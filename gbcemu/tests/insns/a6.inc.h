    TEST(gbcemu, opcode_a6) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A6 0001
        gbc.setState(0xcd5a, 0xb702, 0xc8d0, 0x6b9d, 0x4c19, 0x64ad, 0x1, 0x0);
        gbc.writeMem(0x64ad, { 0x1 });
        gbc.writeMem(0xcd5a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xb702);
        EXPECT(gbc.pc(), 0xcd5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5a), 0xa6);
        // A6 0002
        gbc.setState(0xa9f2, 0xc48c, 0x5e90, 0xb81b, 0x3dd1, 0x928e, 0x1, 0x0);
        gbc.writeMem(0x928e, { 0x4 });
        gbc.writeMem(0xa9f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0xa9f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x928e), 0x4);
        EXPECT(gbc.readMem(0xa9f2), 0xa6);
        // A6 0003
        gbc.setState(0x9ed8, 0x58da, 0xc10, 0x8ac0, 0xbca0, 0xbab6, 0x0, 0x0);
        gbc.writeMem(0x9ed8, { 0xa6 });
        gbc.writeMem(0xbab6, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x58da);
        EXPECT(gbc.pc(), 0x9ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ed8), 0xa6);
        EXPECT(gbc.readMem(0xbab6), 0x6a);
        // A6 0004
        gbc.setState(0xa3a9, 0xac52, 0x3db0, 0xdf8e, 0x9329, 0x6f4a, 0x1, 0x1);
        gbc.writeMem(0x6f4a, { 0x1e });
        gbc.writeMem(0xa3a9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xac52);
        EXPECT(gbc.pc(), 0xa3aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a9), 0xa6);
        // A6 0005
        gbc.setState(0x1fd8, 0xb257, 0x1db0, 0x12a5, 0xa855, 0xaf0f, 0x1, 0x1);
        gbc.writeMem(0x1fd8, { 0xa6 });
        gbc.writeMem(0xaf0f, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb257);
        EXPECT(gbc.pc(), 0x1fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf0f), 0xc6);
        // A6 0006
        gbc.setState(0x8c87, 0x2e5e, 0x6710, 0x378, 0x83be, 0x4f0c, 0x0, 0x1);
        gbc.writeMem(0x4f0c, { 0x83 });
        gbc.writeMem(0x8c87, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2e5e);
        EXPECT(gbc.pc(), 0x8c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c87), 0xa6);
        // A6 0008
        gbc.setState(0x4cb9, 0x8ffe, 0x4c60, 0xf6e7, 0xce7b, 0x8319, 0x0, 0x0);
        gbc.writeMem(0x4cb9, { 0xa6 });
        gbc.writeMem(0x8319, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8ffe);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8319), 0xd0);
        // A6 0009
        gbc.setState(0x5347, 0xdc0f, 0x1010, 0x8a41, 0xbeef, 0xc55a, 0x0, 0x0);
        gbc.writeMem(0x5347, { 0xa6 });
        gbc.writeMem(0xc55a, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xdc0f);
        EXPECT(gbc.pc(), 0x5348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc55a), 0x49);
        // A6 000A
        gbc.setState(0x83e2, 0x82eb, 0x53e0, 0x28fa, 0x9c5d, 0x4997, 0x1, 0x1);
        gbc.writeMem(0x4997, { 0x13 });
        gbc.writeMem(0x83e2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x82eb);
        EXPECT(gbc.pc(), 0x83e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e2), 0xa6);
        // A6 000B
        gbc.setState(0x8c9e, 0x55fc, 0x8220, 0x3c94, 0x94d4, 0xd5cf, 0x1, 0x0);
        gbc.writeMem(0x8c9e, { 0xa6 });
        gbc.writeMem(0xd5cf, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x55fc);
        EXPECT(gbc.pc(), 0x8c9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9e), 0xa6);
        EXPECT(gbc.readMem(0xd5cf), 0xbf);
        // A6 000C
        gbc.setState(0xaf3d, 0xd82, 0x8440, 0x734e, 0x6f4a, 0xfda0, 0x0, 0x0);
        gbc.writeMem(0xaf3d, { 0xa6 });
        gbc.writeMem(0xfda0, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd82);
        EXPECT(gbc.pc(), 0xaf3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf3d), 0xa6);
        EXPECT(gbc.readMem(0xfda0), 0x69);
        // A6 000D
        gbc.setState(0xbb7d, 0x6ba, 0xafd0, 0xbf6, 0xa04d, 0xc61e, 0x1, 0x1);
        gbc.writeMem(0xbb7d, { 0xa6 });
        gbc.writeMem(0xc61e, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6ba);
        EXPECT(gbc.pc(), 0xbb7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7d), 0xa6);
        EXPECT(gbc.readMem(0xc61e), 0xd4);
        // A6 000E
        gbc.setState(0x7a34, 0xe71f, 0x5100, 0x5516, 0xdfc, 0x5f8, 0x0, 0x1);
        gbc.writeMem(0x5f8, { 0xb });
        gbc.writeMem(0x7a34, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe71f);
        EXPECT(gbc.pc(), 0x7a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 000F
        gbc.setState(0x44f1, 0x9ec6, 0x99d0, 0x709, 0xadc2, 0xb9b, 0x1, 0x0);
        gbc.writeMem(0xb9b, { 0xea });
        gbc.writeMem(0x44f1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9ec6);
        EXPECT(gbc.pc(), 0x44f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0010
        gbc.setState(0x1e04, 0xb391, 0xe0, 0x8052, 0xc4f5, 0x18b2, 0x1, 0x0);
        gbc.writeMem(0x18b2, { 0x53 });
        gbc.writeMem(0x1e04, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb391);
        EXPECT(gbc.pc(), 0x1e05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0011
        gbc.setState(0x48a7, 0xe49d, 0x26c0, 0x92ce, 0x44bc, 0xcc4a, 0x1, 0x0);
        gbc.writeMem(0x48a7, { 0xa6 });
        gbc.writeMem(0xcc4a, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe49d);
        EXPECT(gbc.pc(), 0x48a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc4a), 0x11);
        // A6 0012
        gbc.setState(0x3ca2, 0x466a, 0x9c50, 0xf876, 0x54e7, 0x5550, 0x0, 0x0);
        gbc.writeMem(0x3ca2, { 0xa6 });
        gbc.writeMem(0x5550, { 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x466a);
        EXPECT(gbc.pc(), 0x3ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0013
        gbc.setState(0xa5f2, 0x9f3f, 0x5b40, 0x4a7d, 0x90a1, 0x830c, 0x1, 0x1);
        gbc.writeMem(0x830c, { 0x8e });
        gbc.writeMem(0xa5f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9f3f);
        EXPECT(gbc.pc(), 0xa5f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x830c), 0x8e);
        EXPECT(gbc.readMem(0xa5f2), 0xa6);
        // A6 0015
        gbc.setState(0xe888, 0x71f0, 0x5890, 0xe659, 0x3f21, 0xb4c3, 0x0, 0x1);
        gbc.writeMem(0xb4c3, { 0x15 });
        gbc.writeMem(0xe888, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x71f0);
        EXPECT(gbc.pc(), 0xe889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4c3), 0x15);
        EXPECT(gbc.readMem(0xe888), 0xa6);
        // A6 0016
        gbc.setState(0xef3c, 0x6a46, 0xf1f0, 0xb887, 0xd0e1, 0x74d7, 0x1, 0x1);
        gbc.writeMem(0x74d7, { 0x94 });
        gbc.writeMem(0xef3c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6a46);
        EXPECT(gbc.pc(), 0xef3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef3c), 0xa6);
        // A6 0017
        gbc.setState(0x9d14, 0x3f1c, 0x4b60, 0xadab, 0x6508, 0xe6ad, 0x0, 0x0);
        gbc.writeMem(0x9d14, { 0xa6 });
        gbc.writeMem(0xe6ad, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3f1c);
        EXPECT(gbc.pc(), 0x9d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d14), 0xa6);
        EXPECT(gbc.readMem(0xe6ad), 0xd3);
        // A6 0018
        gbc.setState(0x1fec, 0x6747, 0x8240, 0x4540, 0xe0c7, 0xc3d3, 0x0, 0x1);
        gbc.writeMem(0x1fec, { 0xa6 });
        gbc.writeMem(0xc3d3, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6747);
        EXPECT(gbc.pc(), 0x1fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d3), 0xb2);
        // A6 0019
        gbc.setState(0x6507, 0x8798, 0x54e0, 0xa7c2, 0xb398, 0x6ce3, 0x0, 0x1);
        gbc.writeMem(0x6507, { 0xa6 });
        gbc.writeMem(0x6ce3, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x8798);
        EXPECT(gbc.pc(), 0x6508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 001A
        gbc.setState(0xbd39, 0x4a04, 0xd3d0, 0x5744, 0x4c38, 0xb7e3, 0x1, 0x1);
        gbc.writeMem(0xb7e3, { 0xe4 });
        gbc.writeMem(0xbd39, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4a04);
        EXPECT(gbc.pc(), 0xbd3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e3), 0xe4);
        EXPECT(gbc.readMem(0xbd39), 0xa6);
        // A6 001B
        gbc.setState(0xbcb5, 0xcb27, 0xa1e0, 0xa7eb, 0xf4ee, 0x90ca, 0x0, 0x1);
        gbc.writeMem(0x90ca, { 0x54 });
        gbc.writeMem(0xbcb5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xcb27);
        EXPECT(gbc.pc(), 0xbcb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ca), 0x54);
        EXPECT(gbc.readMem(0xbcb5), 0xa6);
        // A6 001C
        gbc.setState(0x4835, 0xde95, 0x6e0, 0x3335, 0xa53d, 0x8062, 0x0, 0x1);
        gbc.writeMem(0x4835, { 0xa6 });
        gbc.writeMem(0x8062, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xde95);
        EXPECT(gbc.pc(), 0x4836);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8062), 0x1d);
        // A6 001D
        gbc.setState(0xb12b, 0x5f38, 0x2080, 0x9767, 0x5c1c, 0xe5d2, 0x0, 0x1);
        gbc.writeMem(0xb12b, { 0xa6 });
        gbc.writeMem(0xe5d2, { 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5f38);
        EXPECT(gbc.pc(), 0xb12c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb12b), 0xa6);
        EXPECT(gbc.readMem(0xe5d2), 0x97);
        // A6 001E
        gbc.setState(0x6b6a, 0x7299, 0x3010, 0x9bc6, 0x66f9, 0x4a06, 0x1, 0x1);
        gbc.writeMem(0x4a06, { 0xca });
        gbc.writeMem(0x6b6a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7299);
        EXPECT(gbc.pc(), 0x6b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 001F
        gbc.setState(0xefbf, 0x2862, 0x74e0, 0xf1aa, 0x5e60, 0x400c, 0x1, 0x1);
        gbc.writeMem(0x400c, { 0xd6 });
        gbc.writeMem(0xefbf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2862);
        EXPECT(gbc.pc(), 0xefc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefbf), 0xa6);
        // A6 0020
        gbc.setState(0x3511, 0x2421, 0xb0f0, 0xffc6, 0xc791, 0x6e05, 0x0, 0x0);
        gbc.writeMem(0x3511, { 0xa6 });
        gbc.writeMem(0x6e05, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x2421);
        EXPECT(gbc.pc(), 0x3512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0021
        gbc.setState(0x1595, 0xf2e6, 0x64a0, 0xa9dc, 0xac16, 0x9ebb, 0x1, 0x0);
        gbc.writeMem(0x1595, { 0xa6 });
        gbc.writeMem(0x9ebb, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf2e6);
        EXPECT(gbc.pc(), 0x1596);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ebb), 0xc6);
        // A6 0022
        gbc.setState(0x5a33, 0x3158, 0xa6a0, 0xcba5, 0x44c8, 0x99b0, 0x0, 0x0);
        gbc.writeMem(0x5a33, { 0xa6 });
        gbc.writeMem(0x99b0, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3158);
        EXPECT(gbc.pc(), 0x5a34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b0), 0xde);
        // A6 0023
        gbc.setState(0xaa40, 0x2ecc, 0xa700, 0x1ee7, 0x7cbb, 0x7583, 0x0, 0x1);
        gbc.writeMem(0x7583, { 0x37 });
        gbc.writeMem(0xaa40, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2ecc);
        EXPECT(gbc.pc(), 0xaa41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa40), 0xa6);
        // A6 0024
        gbc.setState(0x133a, 0xb409, 0x7a00, 0xbc7b, 0x43b9, 0xfa4, 0x0, 0x0);
        gbc.writeMem(0xfa4, { 0xc9 });
        gbc.writeMem(0x133a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb409);
        EXPECT(gbc.pc(), 0x133b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0025
        gbc.setState(0x560d, 0x9c89, 0x3510, 0x4275, 0x389f, 0xdff6, 0x1, 0x0);
        gbc.writeMem(0x560d, { 0xa6 });
        gbc.writeMem(0xdff6, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9c89);
        EXPECT(gbc.pc(), 0x560e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff6), 0x7);
        // A6 0026
        gbc.setState(0x9f95, 0x2baa, 0x2c20, 0x5088, 0xe9ee, 0x306f, 0x0, 0x1);
        gbc.writeMem(0x306f, { 0x16 });
        gbc.writeMem(0x9f95, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2baa);
        EXPECT(gbc.pc(), 0x9f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f95), 0xa6);
        // A6 0028
        gbc.setState(0x2452, 0x629d, 0xf60, 0xe05a, 0x545b, 0x693a, 0x1, 0x0);
        gbc.writeMem(0x2452, { 0xa6 });
        gbc.writeMem(0x693a, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x629d);
        EXPECT(gbc.pc(), 0x2453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0029
        gbc.setState(0x6e3, 0x596e, 0xb590, 0xce9, 0x8d34, 0x2901, 0x0, 0x1);
        gbc.writeMem(0x6e3, { 0xa6 });
        gbc.writeMem(0x2901, { 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x596e);
        EXPECT(gbc.pc(), 0x6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 002A
        gbc.setState(0x59d6, 0x1657, 0x99f0, 0xbcba, 0x9c9b, 0xf0d0, 0x1, 0x0);
        gbc.writeMem(0x59d6, { 0xa6 });
        gbc.writeMem(0xf0d0, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1657);
        EXPECT(gbc.pc(), 0x59d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0d0), 0x3c);
        // A6 002B
        gbc.setState(0x5e2, 0xc15e, 0xe6c0, 0xe786, 0xade6, 0xac2f, 0x0, 0x1);
        gbc.writeMem(0x5e2, { 0xa6 });
        gbc.writeMem(0xac2f, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc15e);
        EXPECT(gbc.pc(), 0x5e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac2f), 0xbc);
        // A6 002C
        gbc.setState(0x983c, 0x8c90, 0xc320, 0xf44d, 0x7386, 0x3fbb, 0x1, 0x0);
        gbc.writeMem(0x3fbb, { 0xd4 });
        gbc.writeMem(0x983c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8c90);
        EXPECT(gbc.pc(), 0x983d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983c), 0xa6);
        // A6 002D
        gbc.setState(0xcce4, 0xa806, 0x8280, 0x72c, 0x5ad0, 0x983e, 0x1, 0x0);
        gbc.writeMem(0x983e, { 0xd8 });
        gbc.writeMem(0xcce4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa806);
        EXPECT(gbc.pc(), 0xcce5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983e), 0xd8);
        EXPECT(gbc.readMem(0xcce4), 0xa6);
        // A6 002E
        gbc.setState(0x1d55, 0xca6a, 0xcd00, 0x9e5f, 0x509c, 0x4986, 0x1, 0x0);
        gbc.writeMem(0x1d55, { 0xa6 });
        gbc.writeMem(0x4986, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xca6a);
        EXPECT(gbc.pc(), 0x1d56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 002F
        gbc.setState(0x46e4, 0x1fa, 0xbbf0, 0x3782, 0x725a, 0x4dc, 0x0, 0x0);
        gbc.writeMem(0x4dc, { 0x68 });
        gbc.writeMem(0x46e4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1fa);
        EXPECT(gbc.pc(), 0x46e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0030
        gbc.setState(0x3704, 0x5ad, 0xa940, 0x7fd5, 0xa8e3, 0x3329, 0x1, 0x0);
        gbc.writeMem(0x3329, { 0x97 });
        gbc.writeMem(0x3704, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5ad);
        EXPECT(gbc.pc(), 0x3705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0031
        gbc.setState(0x6aeb, 0x6823, 0xcc30, 0x7273, 0x3dc6, 0xf422, 0x1, 0x0);
        gbc.writeMem(0x6aeb, { 0xa6 });
        gbc.writeMem(0xf422, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6823);
        EXPECT(gbc.pc(), 0x6aec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf422), 0x2e);
        // A6 0032
        gbc.setState(0xd01d, 0x465c, 0x8ec0, 0xa2b0, 0xedb5, 0x295c, 0x0, 0x0);
        gbc.writeMem(0x295c, { 0x42 });
        gbc.writeMem(0xd01d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x465c);
        EXPECT(gbc.pc(), 0xd01e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd01d), 0xa6);
        // A6 0033
        gbc.setState(0x1009, 0x52d2, 0x760, 0xc624, 0x7a64, 0x18fd, 0x1, 0x1);
        gbc.writeMem(0x1009, { 0xa6 });
        gbc.writeMem(0x18fd, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x52d2);
        EXPECT(gbc.pc(), 0x100a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0034
        gbc.setState(0xc879, 0xea7f, 0x5140, 0x82, 0x138, 0x87e4, 0x0, 0x1);
        gbc.writeMem(0x87e4, { 0x6f });
        gbc.writeMem(0xc879, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xea7f);
        EXPECT(gbc.pc(), 0xc87a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e4), 0x6f);
        EXPECT(gbc.readMem(0xc879), 0xa6);
        // A6 0035
        gbc.setState(0xc53e, 0xac2f, 0xa20, 0xd35e, 0xb8ca, 0x3439, 0x1, 0x1);
        gbc.writeMem(0x3439, { 0x23 });
        gbc.writeMem(0xc53e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xac2f);
        EXPECT(gbc.pc(), 0xc53f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc53e), 0xa6);
        // A6 0036
        gbc.setState(0x98c, 0x29b9, 0xf360, 0xa2a7, 0xfdc9, 0xefd4, 0x1, 0x1);
        gbc.writeMem(0x98c, { 0xa6 });
        gbc.writeMem(0xefd4, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x29b9);
        EXPECT(gbc.pc(), 0x98d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd4), 0x2f);
        // A6 0037
        gbc.setState(0x48e0, 0x1c49, 0x6d00, 0x30fb, 0xd77, 0x1a, 0x0, 0x1);
        gbc.writeMem(0x1a, { 0xec });
        gbc.writeMem(0x48e0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1c49);
        EXPECT(gbc.pc(), 0x48e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0038
        gbc.setState(0xad33, 0xdb97, 0xac60, 0x8f75, 0x7a58, 0x45b3, 0x1, 0x0);
        gbc.writeMem(0x45b3, { 0x59 });
        gbc.writeMem(0xad33, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdb97);
        EXPECT(gbc.pc(), 0xad34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad33), 0xa6);
        // A6 0039
        gbc.setState(0x1f60, 0x9c86, 0xc410, 0x1681, 0x406a, 0x2cf8, 0x1, 0x1);
        gbc.writeMem(0x1f60, { 0xa6 });
        gbc.writeMem(0x2cf8, { 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9c86);
        EXPECT(gbc.pc(), 0x1f61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 003C
        gbc.setState(0x6592, 0x1e43, 0x6b20, 0x8dda, 0xec89, 0x650f, 0x0, 0x0);
        gbc.writeMem(0x650f, { 0x7 });
        gbc.writeMem(0x6592, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1e43);
        EXPECT(gbc.pc(), 0x6593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 003D
        gbc.setState(0x253b, 0xd808, 0x6950, 0x6e42, 0xf86c, 0x913b, 0x1, 0x0);
        gbc.writeMem(0x253b, { 0xa6 });
        gbc.writeMem(0x913b, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd808);
        EXPECT(gbc.pc(), 0x253c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x913b), 0xee);
        // A6 003E
        gbc.setState(0xb7d2, 0xf338, 0xa7d0, 0x3cc7, 0x45e6, 0x2c82, 0x0, 0x1);
        gbc.writeMem(0x2c82, { 0xc2 });
        gbc.writeMem(0xb7d2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf338);
        EXPECT(gbc.pc(), 0xb7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d2), 0xa6);
        // A6 003F
        gbc.setState(0x28de, 0x6aa8, 0xe800, 0xd6b2, 0xdf9, 0xaf14, 0x0, 0x0);
        gbc.writeMem(0x28de, { 0xa6 });
        gbc.writeMem(0xaf14, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6aa8);
        EXPECT(gbc.pc(), 0x28df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf14), 0x86);
        // A6 0040
        gbc.setState(0x38f5, 0x82f8, 0xf860, 0x6d2c, 0xd61b, 0x99dd, 0x1, 0x1);
        gbc.writeMem(0x38f5, { 0xa6 });
        gbc.writeMem(0x99dd, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x82f8);
        EXPECT(gbc.pc(), 0x38f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99dd), 0x6f);
        // A6 0041
        gbc.setState(0x1ed1, 0x6089, 0xe440, 0x81bc, 0xdc49, 0x7045, 0x1, 0x1);
        gbc.writeMem(0x1ed1, { 0xa6 });
        gbc.writeMem(0x7045, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6089);
        EXPECT(gbc.pc(), 0x1ed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0042
        gbc.setState(0xdb12, 0x4bdf, 0x8900, 0x1cd2, 0x1cd4, 0xfbf8, 0x1, 0x0);
        gbc.writeMem(0xdb12, { 0xa6 });
        gbc.writeMem(0xfbf8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4bdf);
        EXPECT(gbc.pc(), 0xdb13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb12), 0xa6);
        EXPECT(gbc.readMem(0xfbf8), 0xa2);
        // A6 0043
        gbc.setState(0x4e8c, 0xabf2, 0x80b0, 0x7305, 0x417a, 0xf41b, 0x1, 0x0);
        gbc.writeMem(0x4e8c, { 0xa6 });
        gbc.writeMem(0xf41b, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xabf2);
        EXPECT(gbc.pc(), 0x4e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf41b), 0xd5);
        // A6 0044
        gbc.setState(0xbf83, 0xfe6d, 0xd050, 0x89e9, 0x6849, 0x4c04, 0x1, 0x0);
        gbc.writeMem(0x4c04, { 0x12 });
        gbc.writeMem(0xbf83, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfe6d);
        EXPECT(gbc.pc(), 0xbf84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf83), 0xa6);
        // A6 0045
        gbc.setState(0x2135, 0xc351, 0xde60, 0x4624, 0xf079, 0xf9e0, 0x0, 0x0);
        gbc.writeMem(0x2135, { 0xa6 });
        gbc.writeMem(0xf9e0, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc351);
        EXPECT(gbc.pc(), 0x2136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9e0), 0xdd);
        // A6 0046
        gbc.setState(0xc31b, 0x9e82, 0x45c0, 0x245b, 0xe2ab, 0x8268, 0x0, 0x0);
        gbc.writeMem(0x8268, { 0x65 });
        gbc.writeMem(0xc31b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9e82);
        EXPECT(gbc.pc(), 0xc31c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8268), 0x65);
        EXPECT(gbc.readMem(0xc31b), 0xa6);
        // A6 0048
        gbc.setState(0x2b52, 0xd2b2, 0x4a50, 0x379, 0x6936, 0xf498, 0x1, 0x1);
        gbc.writeMem(0x2b52, { 0xa6 });
        gbc.writeMem(0xf498, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd2b2);
        EXPECT(gbc.pc(), 0x2b53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf498), 0xae);
        // A6 0049
        gbc.setState(0x447f, 0x8147, 0x3060, 0x1db0, 0x61a8, 0xa10d, 0x0, 0x1);
        gbc.writeMem(0x447f, { 0xa6 });
        gbc.writeMem(0xa10d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8147);
        EXPECT(gbc.pc(), 0x4480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa10d), 0x3);
        // A6 004A
        gbc.setState(0x6cc0, 0x8404, 0x4710, 0xa863, 0x378d, 0xfccd, 0x0, 0x0);
        gbc.writeMem(0x6cc0, { 0xa6 });
        gbc.writeMem(0xfccd, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8404);
        EXPECT(gbc.pc(), 0x6cc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfccd), 0xa4);
        // A6 004B
        gbc.setState(0xd4d4, 0xa2c, 0xe9d0, 0x89f9, 0xeb62, 0x3507, 0x0, 0x1);
        gbc.writeMem(0x3507, { 0x86 });
        gbc.writeMem(0xd4d4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa2c);
        EXPECT(gbc.pc(), 0xd4d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d4), 0xa6);
        // A6 004C
        gbc.setState(0x5b9, 0x6592, 0x2c20, 0xe955, 0xc800, 0x9258, 0x1, 0x0);
        gbc.writeMem(0x5b9, { 0xa6 });
        gbc.writeMem(0x9258, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6592);
        EXPECT(gbc.pc(), 0x5ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9258), 0x71);
        // A6 004D
        gbc.setState(0x94d2, 0x5452, 0xd90, 0x5126, 0x741f, 0x8bb0, 0x0, 0x1);
        gbc.writeMem(0x8bb0, { 0xe5 });
        gbc.writeMem(0x94d2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5452);
        EXPECT(gbc.pc(), 0x94d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb0), 0xe5);
        EXPECT(gbc.readMem(0x94d2), 0xa6);
        // A6 004E
        gbc.setState(0x227e, 0xc98a, 0xb80, 0xeafe, 0x3f25, 0xeecb, 0x1, 0x0);
        gbc.writeMem(0x227e, { 0xa6 });
        gbc.writeMem(0xeecb, { 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc98a);
        EXPECT(gbc.pc(), 0x227f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeecb), 0xf9);
        // A6 004F
        gbc.setState(0xc720, 0x2d68, 0x9590, 0x8433, 0xcc7c, 0x68f0, 0x1, 0x0);
        gbc.writeMem(0x68f0, { 0xfc });
        gbc.writeMem(0xc720, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2d68);
        EXPECT(gbc.pc(), 0xc721);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc720), 0xa6);
        // A6 0050
        gbc.setState(0xee35, 0x8830, 0x8be0, 0x3fa6, 0x2e74, 0xb4ad, 0x0, 0x1);
        gbc.writeMem(0xb4ad, { 0x3e });
        gbc.writeMem(0xee35, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8830);
        EXPECT(gbc.pc(), 0xee36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ad), 0x3e);
        EXPECT(gbc.readMem(0xee35), 0xa6);
        // A6 0051
        gbc.setState(0x7212, 0x6f84, 0xbc10, 0x807d, 0x9066, 0x5b0a, 0x0, 0x1);
        gbc.writeMem(0x5b0a, { 0xf2 });
        gbc.writeMem(0x7212, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6f84);
        EXPECT(gbc.pc(), 0x7213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0052
        gbc.setState(0x505d, 0xa6a0, 0x3c50, 0xac67, 0x95ae, 0xa2ad, 0x1, 0x0);
        gbc.writeMem(0x505d, { 0xa6 });
        gbc.writeMem(0xa2ad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa6a0);
        EXPECT(gbc.pc(), 0x505e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2ad), 0x4c);
        // A6 0053
        gbc.setState(0x7362, 0xefcd, 0x8d20, 0x7a06, 0xf2f, 0xb577, 0x1, 0x1);
        gbc.writeMem(0x7362, { 0xa6 });
        gbc.writeMem(0xb577, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xefcd);
        EXPECT(gbc.pc(), 0x7363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb577), 0xb3);
        // A6 0054
        gbc.setState(0xc18d, 0xe902, 0xbf30, 0x2498, 0x5ce5, 0x4b42, 0x1, 0x1);
        gbc.writeMem(0x4b42, { 0x3a });
        gbc.writeMem(0xc18d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe902);
        EXPECT(gbc.pc(), 0xc18e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc18d), 0xa6);
        // A6 0055
        gbc.setState(0x1ef0, 0xacdd, 0xf0e0, 0x98de, 0x7e7c, 0x470e, 0x0, 0x0);
        gbc.writeMem(0x1ef0, { 0xa6 });
        gbc.writeMem(0x470e, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xacdd);
        EXPECT(gbc.pc(), 0x1ef1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0056
        gbc.setState(0x56f9, 0x391b, 0xd1f0, 0xe335, 0x500d, 0x3743, 0x1, 0x1);
        gbc.writeMem(0x3743, { 0xea });
        gbc.writeMem(0x56f9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x391b);
        EXPECT(gbc.pc(), 0x56fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0057
        gbc.setState(0xe1fa, 0x7f24, 0x54f0, 0xd6f1, 0x216b, 0xcd24, 0x1, 0x1);
        gbc.writeMem(0xcd24, { 0x60 });
        gbc.writeMem(0xe1fa, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7f24);
        EXPECT(gbc.pc(), 0xe1fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd24), 0x60);
        EXPECT(gbc.readMem(0xe1fa), 0xa6);
        // A6 0058
        gbc.setState(0x6378, 0x18ae, 0xbb60, 0xc2df, 0x8971, 0xad1c, 0x1, 0x0);
        gbc.writeMem(0x6378, { 0xa6 });
        gbc.writeMem(0xad1c, { 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x18ae);
        EXPECT(gbc.pc(), 0x6379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1c), 0xcb);
        // A6 0059
        gbc.setState(0x59c3, 0x8296, 0x2b00, 0x9fe0, 0xdd21, 0xec38, 0x0, 0x0);
        gbc.writeMem(0x59c3, { 0xa6 });
        gbc.writeMem(0xec38, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8296);
        EXPECT(gbc.pc(), 0x59c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec38), 0x24);
        // A6 005A
        gbc.setState(0xb7c6, 0xdadd, 0x1980, 0x5131, 0x9e25, 0xd798, 0x1, 0x1);
        gbc.writeMem(0xb7c6, { 0xa6 });
        gbc.writeMem(0xd798, { 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdadd);
        EXPECT(gbc.pc(), 0xb7c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c6), 0xa6);
        EXPECT(gbc.readMem(0xd798), 0x6a);
        // A6 005C
        gbc.setState(0x47e5, 0x37f6, 0x3370, 0x13b, 0x831b, 0x20f6, 0x1, 0x0);
        gbc.writeMem(0x20f6, { 0x3d });
        gbc.writeMem(0x47e5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x37f6);
        EXPECT(gbc.pc(), 0x47e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 005E
        gbc.setState(0xdc60, 0xdb08, 0xb2a0, 0xe756, 0x8ebb, 0x103b, 0x0, 0x0);
        gbc.writeMem(0x103b, { 0x22 });
        gbc.writeMem(0xdc60, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdb08);
        EXPECT(gbc.pc(), 0xdc61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc60), 0xa6);
        // A6 005F
        gbc.setState(0x3398, 0xf3a, 0x4e10, 0x18f9, 0xa090, 0x461d, 0x0, 0x0);
        gbc.writeMem(0x3398, { 0xa6 });
        gbc.writeMem(0x461d, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf3a);
        EXPECT(gbc.pc(), 0x3399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0060
        gbc.setState(0x7375, 0x75d4, 0xe990, 0xd820, 0x3a79, 0xaa78, 0x0, 0x1);
        gbc.writeMem(0x7375, { 0xa6 });
        gbc.writeMem(0xaa78, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x75d4);
        EXPECT(gbc.pc(), 0x7376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa78), 0xa7);
        // A6 0061
        gbc.setState(0x372f, 0x42e9, 0xfdc0, 0xd778, 0xc5c7, 0x9479, 0x0, 0x1);
        gbc.writeMem(0x372f, { 0xa6 });
        gbc.writeMem(0x9479, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x42e9);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9479), 0x59);
        // A6 0062
        gbc.setState(0x6432, 0x6f51, 0xeb80, 0x79b8, 0x4350, 0x7bd9, 0x0, 0x0);
        gbc.writeMem(0x6432, { 0xa6 });
        gbc.writeMem(0x7bd9, { 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6f51);
        EXPECT(gbc.pc(), 0x6433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0064
        gbc.setState(0x4b56, 0xe706, 0xb80, 0xf83c, 0xe680, 0x5e8c, 0x1, 0x1);
        gbc.writeMem(0x4b56, { 0xa6 });
        gbc.writeMem(0x5e8c, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe706);
        EXPECT(gbc.pc(), 0x4b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0066
        gbc.setState(0x4b76, 0x4cdf, 0x4240, 0x84cb, 0x7f17, 0xf2c1, 0x1, 0x1);
        gbc.writeMem(0x4b76, { 0xa6 });
        gbc.writeMem(0xf2c1, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4cdf);
        EXPECT(gbc.pc(), 0x4b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf2c1), 0xec);
        // A6 0067
        gbc.setState(0x209e, 0x6802, 0xf590, 0x311a, 0x2d0d, 0xcced, 0x1, 0x0);
        gbc.writeMem(0x209e, { 0xa6 });
        gbc.writeMem(0xcced, { 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x6802);
        EXPECT(gbc.pc(), 0x209f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcced), 0x7a);
        // A6 0068
        gbc.setState(0xd004, 0x404e, 0x53e0, 0x2626, 0x8b98, 0x8e26, 0x1, 0x0);
        gbc.writeMem(0x8e26, { 0xc4 });
        gbc.writeMem(0xd004, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x404e);
        EXPECT(gbc.pc(), 0xd005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e26), 0xc4);
        EXPECT(gbc.readMem(0xd004), 0xa6);
        // A6 0069
        gbc.setState(0x6a7d, 0xd8e9, 0x1020, 0x1f62, 0x4d9c, 0xb850, 0x0, 0x1);
        gbc.writeMem(0x6a7d, { 0xa6 });
        gbc.writeMem(0xb850, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd8e9);
        EXPECT(gbc.pc(), 0x6a7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb850), 0x9c);
        // A6 006A
        gbc.setState(0x48a2, 0xfc7a, 0xc010, 0xb47d, 0x802, 0x94f4, 0x1, 0x1);
        gbc.writeMem(0x48a2, { 0xa6 });
        gbc.writeMem(0x94f4, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfc7a);
        EXPECT(gbc.pc(), 0x48a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f4), 0x75);
        // A6 006B
        gbc.setState(0x6564, 0x3891, 0x2a0, 0x6e5d, 0x5e3c, 0x311b, 0x1, 0x0);
        gbc.writeMem(0x311b, { 0x83 });
        gbc.writeMem(0x6564, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x3891);
        EXPECT(gbc.pc(), 0x6565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 006C
        gbc.setState(0x76b0, 0x2be5, 0x6e0, 0x96f5, 0x3905, 0x361b, 0x1, 0x0);
        gbc.writeMem(0x361b, { 0x9d });
        gbc.writeMem(0x76b0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2be5);
        EXPECT(gbc.pc(), 0x76b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 006D
        gbc.setState(0x7b85, 0x59f1, 0x3d20, 0x16ca, 0x4780, 0x1621, 0x1, 0x0);
        gbc.writeMem(0x1621, { 0x53 });
        gbc.writeMem(0x7b85, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x59f1);
        EXPECT(gbc.pc(), 0x7b86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 006E
        gbc.setState(0xde9a, 0x3af9, 0x6100, 0x1a87, 0xe072, 0xfc0b, 0x0, 0x0);
        gbc.writeMem(0xde9a, { 0xa6 });
        gbc.writeMem(0xfc0b, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3af9);
        EXPECT(gbc.pc(), 0xde9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde9a), 0xa6);
        EXPECT(gbc.readMem(0xfc0b), 0xa0);
        // A6 006F
        gbc.setState(0x2875, 0x9d14, 0x42a0, 0x3335, 0x9f9c, 0xf5d2, 0x0, 0x0);
        gbc.writeMem(0x2875, { 0xa6 });
        gbc.writeMem(0xf5d2, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9d14);
        EXPECT(gbc.pc(), 0x2876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5d2), 0x3f);
        // A6 0070
        gbc.setState(0xbb4f, 0x3ab7, 0xd7b0, 0x504, 0x65a5, 0x2ccd, 0x0, 0x0);
        gbc.writeMem(0x2ccd, { 0xb5 });
        gbc.writeMem(0xbb4f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x3ab7);
        EXPECT(gbc.pc(), 0xbb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb4f), 0xa6);
        // A6 0071
        gbc.setState(0xa800, 0xd8cf, 0x6f80, 0x3296, 0xf73d, 0xd4bf, 0x1, 0x1);
        gbc.writeMem(0xa800, { 0xa6 });
        gbc.writeMem(0xd4bf, { 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd8cf);
        EXPECT(gbc.pc(), 0xa801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa800), 0xa6);
        EXPECT(gbc.readMem(0xd4bf), 0xd1);
        // A6 0073
        gbc.setState(0x297a, 0xab4c, 0x42a0, 0x5d53, 0xcb3e, 0x91d, 0x0, 0x1);
        gbc.writeMem(0x91d, { 0x95 });
        gbc.writeMem(0x297a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xab4c);
        EXPECT(gbc.pc(), 0x297b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0074
        gbc.setState(0xe8d9, 0x2af7, 0x9860, 0xa336, 0x94c0, 0x5aff, 0x0, 0x1);
        gbc.writeMem(0x5aff, { 0x28 });
        gbc.writeMem(0xe8d9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2af7);
        EXPECT(gbc.pc(), 0xe8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d9), 0xa6);
        // A6 0075
        gbc.setState(0x60f1, 0xc837, 0x9c10, 0xa7b, 0xe3cb, 0x8ae8, 0x1, 0x0);
        gbc.writeMem(0x60f1, { 0xa6 });
        gbc.writeMem(0x8ae8, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc837);
        EXPECT(gbc.pc(), 0x60f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ae8), 0x2f);
        // A6 0076
        gbc.setState(0xaff6, 0xdabe, 0x4d80, 0x6efc, 0x17f8, 0x38d2, 0x1, 0x0);
        gbc.writeMem(0x38d2, { 0x87 });
        gbc.writeMem(0xaff6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdabe);
        EXPECT(gbc.pc(), 0xaff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff6), 0xa6);
        // A6 0077
        gbc.setState(0xea9c, 0x6b63, 0x43d0, 0xb386, 0x9820, 0x82d5, 0x1, 0x0);
        gbc.writeMem(0x82d5, { 0x8d });
        gbc.writeMem(0xea9c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6b63);
        EXPECT(gbc.pc(), 0xea9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d5), 0x8d);
        EXPECT(gbc.readMem(0xea9c), 0xa6);
        // A6 0078
        gbc.setState(0x9fd, 0x62cd, 0x61c0, 0x3266, 0xabb4, 0x1059, 0x1, 0x0);
        gbc.writeMem(0x9fd, { 0xa6 });
        gbc.writeMem(0x1059, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x62cd);
        EXPECT(gbc.pc(), 0x9fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0079
        gbc.setState(0x40e0, 0x9ff5, 0xb470, 0xfbcb, 0x4663, 0xa45f, 0x0, 0x1);
        gbc.writeMem(0x40e0, { 0xa6 });
        gbc.writeMem(0xa45f, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9ff5);
        EXPECT(gbc.pc(), 0x40e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45f), 0x2a);
        // A6 007A
        gbc.setState(0xbc6d, 0x5c21, 0xf830, 0xb1a7, 0x564f, 0x2bf9, 0x1, 0x1);
        gbc.writeMem(0x2bf9, { 0xa });
        gbc.writeMem(0xbc6d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5c21);
        EXPECT(gbc.pc(), 0xbc6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc6d), 0xa6);
        // A6 007B
        gbc.setState(0x2392, 0x7cf9, 0xfc70, 0x7c37, 0xdb98, 0x7972, 0x1, 0x1);
        gbc.writeMem(0x2392, { 0xa6 });
        gbc.writeMem(0x7972, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7cf9);
        EXPECT(gbc.pc(), 0x2393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 007C
        gbc.setState(0x75f6, 0x2872, 0xc570, 0xe589, 0x242f, 0xca28, 0x0, 0x0);
        gbc.writeMem(0x75f6, { 0xa6 });
        gbc.writeMem(0xca28, { 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x2872);
        EXPECT(gbc.pc(), 0x75f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca28), 0x48);
        // A6 007D
        gbc.setState(0x1ff, 0x383d, 0x57c0, 0xee9b, 0xa8a3, 0x16a, 0x1, 0x1);
        gbc.writeMem(0x16a, { 0xe6 });
        gbc.writeMem(0x1ff, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x383d);
        EXPECT(gbc.pc(), 0x200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 007E
        gbc.setState(0x98d0, 0xb9f3, 0x87d0, 0x77c8, 0xf60e, 0x22e6, 0x1, 0x0);
        gbc.writeMem(0x22e6, { 0x40 });
        gbc.writeMem(0x98d0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb9f3);
        EXPECT(gbc.pc(), 0x98d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d0), 0xa6);
        // A6 007F
        gbc.setState(0x634f, 0x53e3, 0xac10, 0xcb55, 0x40f2, 0xcc31, 0x1, 0x0);
        gbc.writeMem(0x634f, { 0xa6 });
        gbc.writeMem(0xcc31, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x53e3);
        EXPECT(gbc.pc(), 0x6350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc31), 0x73);
        // A6 0080
        gbc.setState(0x72b1, 0x4375, 0xdcf0, 0x88e, 0xa759, 0x8376, 0x0, 0x0);
        gbc.writeMem(0x72b1, { 0xa6 });
        gbc.writeMem(0x8376, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4375);
        EXPECT(gbc.pc(), 0x72b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8376), 0xcf);
        // A6 0081
        gbc.setState(0x751b, 0x8ac9, 0x2880, 0x667c, 0xd8ef, 0x395f, 0x1, 0x0);
        gbc.writeMem(0x395f, { 0x3c });
        gbc.writeMem(0x751b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x8ac9);
        EXPECT(gbc.pc(), 0x751c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0082
        gbc.setState(0xa99e, 0x46cd, 0xe2a0, 0x259f, 0x835a, 0xbf62, 0x1, 0x0);
        gbc.writeMem(0xa99e, { 0xa6 });
        gbc.writeMem(0xbf62, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x46cd);
        EXPECT(gbc.pc(), 0xa99f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99e), 0xa6);
        EXPECT(gbc.readMem(0xbf62), 0x8a);
        // A6 0083
        gbc.setState(0x3f5, 0x5b59, 0x59b0, 0x43dc, 0xcf3, 0x3fa9, 0x1, 0x0);
        gbc.writeMem(0x3f5, { 0xa6 });
        gbc.writeMem(0x3fa9, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5b59);
        EXPECT(gbc.pc(), 0x3f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0084
        gbc.setState(0x66c3, 0x6beb, 0x8590, 0x7b74, 0xd519, 0x5c2a, 0x0, 0x1);
        gbc.writeMem(0x5c2a, { 0xcc });
        gbc.writeMem(0x66c3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6beb);
        EXPECT(gbc.pc(), 0x66c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0085
        gbc.setState(0x90f1, 0x7408, 0xb380, 0x48e9, 0x560b, 0xb638, 0x1, 0x0);
        gbc.writeMem(0x90f1, { 0xa6 });
        gbc.writeMem(0xb638, { 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7408);
        EXPECT(gbc.pc(), 0x90f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90f1), 0xa6);
        EXPECT(gbc.readMem(0xb638), 0x32);
        // A6 0086
        gbc.setState(0xcab7, 0xc3d, 0x8470, 0x5520, 0x8a7, 0x88d6, 0x1, 0x1);
        gbc.writeMem(0x88d6, { 0x2f });
        gbc.writeMem(0xcab7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xc3d);
        EXPECT(gbc.pc(), 0xcab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88d6), 0x2f);
        EXPECT(gbc.readMem(0xcab7), 0xa6);
        // A6 0087
        gbc.setState(0x5872, 0x6103, 0xe850, 0xf898, 0x6797, 0x9a71, 0x1, 0x1);
        gbc.writeMem(0x5872, { 0xa6 });
        gbc.writeMem(0x9a71, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x6103);
        EXPECT(gbc.pc(), 0x5873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a71), 0x8b);
        // A6 0088
        gbc.setState(0x739c, 0x4da7, 0x2e40, 0x41aa, 0x1944, 0xa056, 0x1, 0x1);
        gbc.writeMem(0x739c, { 0xa6 });
        gbc.writeMem(0xa056, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4da7);
        EXPECT(gbc.pc(), 0x739d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa056), 0x9e);
        // A6 008A
        gbc.setState(0xe346, 0x9333, 0x65a0, 0x9cc5, 0x5f0e, 0x9d22, 0x0, 0x1);
        gbc.writeMem(0x9d22, { 0xa4 });
        gbc.writeMem(0xe346, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9333);
        EXPECT(gbc.pc(), 0xe347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d22), 0xa4);
        EXPECT(gbc.readMem(0xe346), 0xa6);
        // A6 008B
        gbc.setState(0x79c7, 0x672e, 0x43b0, 0x86a4, 0x8345, 0x1b0d, 0x1, 0x0);
        gbc.writeMem(0x1b0d, { 0x84 });
        gbc.writeMem(0x79c7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x672e);
        EXPECT(gbc.pc(), 0x79c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 008C
        gbc.setState(0x18f6, 0x725d, 0x1b40, 0xc368, 0x9d9, 0x50b8, 0x0, 0x0);
        gbc.writeMem(0x18f6, { 0xa6 });
        gbc.writeMem(0x50b8, { 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x725d);
        EXPECT(gbc.pc(), 0x18f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 008D
        gbc.setState(0xa923, 0x41d6, 0x7c00, 0x9b2c, 0x43b8, 0x1193, 0x1, 0x0);
        gbc.writeMem(0x1193, { 0xc2 });
        gbc.writeMem(0xa923, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x41d6);
        EXPECT(gbc.pc(), 0xa924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa923), 0xa6);
        // A6 008E
        gbc.setState(0x9860, 0x73b5, 0xe030, 0x9d82, 0x4697, 0x4890, 0x0, 0x1);
        gbc.writeMem(0x4890, { 0x8f });
        gbc.writeMem(0x9860, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x73b5);
        EXPECT(gbc.pc(), 0x9861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9860), 0xa6);
        // A6 008F
        gbc.setState(0xf31, 0x1e5f, 0x7450, 0xb482, 0x329e, 0x8b34, 0x1, 0x1);
        gbc.writeMem(0xf31, { 0xa6 });
        gbc.writeMem(0x8b34, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1e5f);
        EXPECT(gbc.pc(), 0xf32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b34), 0x34);
        // A6 0090
        gbc.setState(0x5526, 0x55b9, 0x1c00, 0xb3f2, 0x1c42, 0x8d83, 0x0, 0x1);
        gbc.writeMem(0x5526, { 0xa6 });
        gbc.writeMem(0x8d83, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x55b9);
        EXPECT(gbc.pc(), 0x5527);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d83), 0xc9);
        // A6 0092
        gbc.setState(0x70c9, 0x6bb3, 0x7b00, 0xc324, 0x38be, 0x6d83, 0x0, 0x0);
        gbc.writeMem(0x6d83, { 0x59 });
        gbc.writeMem(0x70c9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6bb3);
        EXPECT(gbc.pc(), 0x70ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0093
        gbc.setState(0x69ae, 0xb54c, 0x82d0, 0x5e22, 0xa869, 0x208, 0x1, 0x1);
        gbc.writeMem(0x208, { 0xef });
        gbc.writeMem(0x69ae, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb54c);
        EXPECT(gbc.pc(), 0x69af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0094
        gbc.setState(0x1349, 0x258c, 0xcf0, 0xb2b6, 0xae32, 0xf0a6, 0x1, 0x0);
        gbc.writeMem(0x1349, { 0xa6 });
        gbc.writeMem(0xf0a6, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x258c);
        EXPECT(gbc.pc(), 0x134a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0a6), 0x3f);
        // A6 0095
        gbc.setState(0xd812, 0xe41f, 0xaed0, 0x2e5e, 0x71f7, 0x1edf, 0x1, 0x0);
        gbc.writeMem(0x1edf, { 0x3c });
        gbc.writeMem(0xd812, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe41f);
        EXPECT(gbc.pc(), 0xd813);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd812), 0xa6);
        // A6 0096
        gbc.setState(0x4061, 0x8669, 0xa510, 0xeb51, 0x2909, 0x5889, 0x1, 0x1);
        gbc.writeMem(0x4061, { 0xa6 });
        gbc.writeMem(0x5889, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8669);
        EXPECT(gbc.pc(), 0x4062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0097
        gbc.setState(0x11fa, 0xd38d, 0xabf0, 0x86a5, 0xc670, 0xcd57, 0x0, 0x0);
        gbc.writeMem(0x11fa, { 0xa6 });
        gbc.writeMem(0xcd57, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd38d);
        EXPECT(gbc.pc(), 0x11fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd57), 0xb3);
        // A6 0098
        gbc.setState(0x1944, 0x7f32, 0x1860, 0x562e, 0x7cb0, 0x9ade, 0x0, 0x1);
        gbc.writeMem(0x1944, { 0xa6 });
        gbc.writeMem(0x9ade, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x7f32);
        EXPECT(gbc.pc(), 0x1945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ade), 0xbc);
        // A6 0099
        gbc.setState(0x6576, 0xb8af, 0x3950, 0xc1fa, 0x13ca, 0xdb35, 0x0, 0x1);
        gbc.writeMem(0x6576, { 0xa6 });
        gbc.writeMem(0xdb35, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb8af);
        EXPECT(gbc.pc(), 0x6577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb35), 0x0);
        // A6 009A
        gbc.setState(0x9940, 0x395, 0x42b0, 0x35f6, 0x4dac, 0xcc03, 0x0, 0x0);
        gbc.writeMem(0x9940, { 0xa6 });
        gbc.writeMem(0xcc03, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x395);
        EXPECT(gbc.pc(), 0x9941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9940), 0xa6);
        EXPECT(gbc.readMem(0xcc03), 0x37);
        // A6 009B
        gbc.setState(0xee7e, 0xfc43, 0x7210, 0x83b6, 0xc39f, 0x68bb, 0x1, 0x0);
        gbc.writeMem(0x68bb, { 0x7b });
        gbc.writeMem(0xee7e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xfc43);
        EXPECT(gbc.pc(), 0xee7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee7e), 0xa6);
        // A6 009C
        gbc.setState(0x3a49, 0x27de, 0x3820, 0x7a24, 0xc21d, 0xd250, 0x1, 0x0);
        gbc.writeMem(0x3a49, { 0xa6 });
        gbc.writeMem(0xd250, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x27de);
        EXPECT(gbc.pc(), 0x3a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd250), 0x81);
        // A6 009D
        gbc.setState(0x90e8, 0xf1d5, 0xe0d0, 0x4747, 0xb4b1, 0x8842, 0x1, 0x1);
        gbc.writeMem(0x8842, { 0xb5 });
        gbc.writeMem(0x90e8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf1d5);
        EXPECT(gbc.pc(), 0x90e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8842), 0xb5);
        EXPECT(gbc.readMem(0x90e8), 0xa6);
        // A6 009E
        gbc.setState(0xdeab, 0xb84d, 0x7210, 0xa20f, 0x4535, 0x25be, 0x0, 0x0);
        gbc.writeMem(0x25be, { 0x38 });
        gbc.writeMem(0xdeab, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb84d);
        EXPECT(gbc.pc(), 0xdeac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeab), 0xa6);
        // A6 009F
        gbc.setState(0x2373, 0x7c7, 0xa600, 0xc23e, 0xc50, 0xeed3, 0x1, 0x1);
        gbc.writeMem(0x2373, { 0xa6 });
        gbc.writeMem(0xeed3, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7c7);
        EXPECT(gbc.pc(), 0x2374);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeed3), 0x30);
        // A6 00A0
        gbc.setState(0x83e2, 0xfaa3, 0xd320, 0xc432, 0xa5a2, 0x701b, 0x1, 0x1);
        gbc.writeMem(0x701b, { 0x8b });
        gbc.writeMem(0x83e2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfaa3);
        EXPECT(gbc.pc(), 0x83e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83e2), 0xa6);
        // A6 00A1
        gbc.setState(0x81bc, 0xf239, 0xc660, 0xd474, 0xa9b7, 0x3f3, 0x0, 0x1);
        gbc.writeMem(0x3f3, { 0x18 });
        gbc.writeMem(0x81bc, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf239);
        EXPECT(gbc.pc(), 0x81bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81bc), 0xa6);
        // A6 00A2
        gbc.setState(0x8d06, 0xefce, 0xece0, 0x5b27, 0xa55f, 0xbe7, 0x0, 0x0);
        gbc.writeMem(0xbe7, { 0x46 });
        gbc.writeMem(0x8d06, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xefce);
        EXPECT(gbc.pc(), 0x8d07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d06), 0xa6);
        // A6 00A3
        gbc.setState(0xe1bc, 0xf2a9, 0xadd0, 0xecb0, 0x9820, 0x66bb, 0x1, 0x1);
        gbc.writeMem(0x66bb, { 0xdc });
        gbc.writeMem(0xe1bc, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf2a9);
        EXPECT(gbc.pc(), 0xe1bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1bc), 0xa6);
        // A6 00A4
        gbc.setState(0xeec3, 0x560c, 0x5a30, 0xe170, 0x9cd4, 0x16bc, 0x1, 0x0);
        gbc.writeMem(0x16bc, { 0xb0 });
        gbc.writeMem(0xeec3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x560c);
        EXPECT(gbc.pc(), 0xeec4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec3), 0xa6);
        // A6 00A5
        gbc.setState(0x40ae, 0x9176, 0xd580, 0x3992, 0x5e35, 0x6014, 0x1, 0x0);
        gbc.writeMem(0x40ae, { 0xa6 });
        gbc.writeMem(0x6014, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9176);
        EXPECT(gbc.pc(), 0x40af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00A6
        gbc.setState(0x2587, 0x1dae, 0x10e0, 0x791a, 0xe960, 0x5dc7, 0x1, 0x0);
        gbc.writeMem(0x2587, { 0xa6 });
        gbc.writeMem(0x5dc7, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1dae);
        EXPECT(gbc.pc(), 0x2588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00A7
        gbc.setState(0x8996, 0xd3d0, 0x7100, 0x70c9, 0xae49, 0x6d5, 0x1, 0x0);
        gbc.writeMem(0x6d5, { 0x80 });
        gbc.writeMem(0x8996, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd3d0);
        EXPECT(gbc.pc(), 0x8997);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8996), 0xa6);
        // A6 00A8
        gbc.setState(0xdfbf, 0x25b4, 0xb490, 0xd043, 0x9640, 0xc887, 0x0, 0x0);
        gbc.writeMem(0xc887, { 0xb5 });
        gbc.writeMem(0xdfbf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x25b4);
        EXPECT(gbc.pc(), 0xdfc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc887), 0xb5);
        EXPECT(gbc.readMem(0xdfbf), 0xa6);
        // A6 00A9
        gbc.setState(0x63b9, 0xa257, 0xac20, 0xc9e2, 0xd782, 0x4056, 0x0, 0x1);
        gbc.writeMem(0x4056, { 0xe8 });
        gbc.writeMem(0x63b9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa257);
        EXPECT(gbc.pc(), 0x63ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00AA
        gbc.setState(0x7beb, 0xdd10, 0xc680, 0x9910, 0x99a6, 0x9cd5, 0x0, 0x1);
        gbc.writeMem(0x7beb, { 0xa6 });
        gbc.writeMem(0x9cd5, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xdd10);
        EXPECT(gbc.pc(), 0x7bec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd5), 0x6b);
        // A6 00AB
        gbc.setState(0xd549, 0xa55f, 0x7e80, 0x6e3d, 0xdb39, 0xaaba, 0x0, 0x0);
        gbc.writeMem(0xaaba, { 0x56 });
        gbc.writeMem(0xd549, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa55f);
        EXPECT(gbc.pc(), 0xd54a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaba), 0x56);
        EXPECT(gbc.readMem(0xd549), 0xa6);
        // A6 00AC
        gbc.setState(0xb4b5, 0xb376, 0xaab0, 0x6402, 0x37b, 0xe400, 0x1, 0x0);
        gbc.writeMem(0xb4b5, { 0xa6 });
        gbc.writeMem(0xe400, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb376);
        EXPECT(gbc.pc(), 0xb4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b5), 0xa6);
        EXPECT(gbc.readMem(0xe400), 0x5d);
        // A6 00AD
        gbc.setState(0xbc29, 0x9e04, 0x84c0, 0x9484, 0xf336, 0x550e, 0x0, 0x1);
        gbc.writeMem(0x550e, { 0x0 });
        gbc.writeMem(0xbc29, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9e04);
        EXPECT(gbc.pc(), 0xbc2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc29), 0xa6);
        // A6 00AE
        gbc.setState(0xc3f2, 0x5dc7, 0xfa10, 0x98dd, 0x3b1b, 0x4cd4, 0x1, 0x0);
        gbc.writeMem(0x4cd4, { 0xb3 });
        gbc.writeMem(0xc3f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5dc7);
        EXPECT(gbc.pc(), 0xc3f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f2), 0xa6);
        // A6 00AF
        gbc.setState(0x9da0, 0xb464, 0x3a0, 0xde72, 0x4d52, 0xa800, 0x1, 0x0);
        gbc.writeMem(0x9da0, { 0xa6 });
        gbc.writeMem(0xa800, { 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xb464);
        EXPECT(gbc.pc(), 0x9da1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9da0), 0xa6);
        EXPECT(gbc.readMem(0xa800), 0x54);
        // A6 00B0
        gbc.setState(0x252, 0x1217, 0xcee0, 0x7d70, 0xfe49, 0xb871, 0x0, 0x0);
        gbc.writeMem(0x252, { 0xa6 });
        gbc.writeMem(0xb871, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1217);
        EXPECT(gbc.pc(), 0x253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb871), 0xaa);
        // A6 00B1
        gbc.setState(0x2d74, 0xac45, 0x2e80, 0x238f, 0x938a, 0xfc3d, 0x1, 0x1);
        gbc.writeMem(0x2d74, { 0xa6 });
        gbc.writeMem(0xfc3d, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xac45);
        EXPECT(gbc.pc(), 0x2d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc3d), 0x13);
        // A6 00B2
        gbc.setState(0x68fd, 0x1e9, 0x8990, 0xfeb8, 0x2a22, 0xdeb9, 0x0, 0x1);
        gbc.writeMem(0x68fd, { 0xa6 });
        gbc.writeMem(0xdeb9, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1e9);
        EXPECT(gbc.pc(), 0x68fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb9), 0xae);
        // A6 00B3
        gbc.setState(0xaa8c, 0x6d30, 0x93a0, 0x7e17, 0x6b0f, 0x2186, 0x1, 0x0);
        gbc.writeMem(0x2186, { 0x2c });
        gbc.writeMem(0xaa8c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x6d30);
        EXPECT(gbc.pc(), 0xaa8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8c), 0xa6);
        // A6 00B4
        gbc.setState(0x3220, 0xe5dd, 0x6780, 0x13be, 0x9c91, 0xecbf, 0x0, 0x0);
        gbc.writeMem(0x3220, { 0xa6 });
        gbc.writeMem(0xecbf, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe5dd);
        EXPECT(gbc.pc(), 0x3221);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbf), 0x66);
        // A6 00B5
        gbc.setState(0x100d, 0xc0df, 0x4ca0, 0x59d6, 0x9492, 0x7f4c, 0x1, 0x0);
        gbc.writeMem(0x100d, { 0xa6 });
        gbc.writeMem(0x7f4c, { 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc0df);
        EXPECT(gbc.pc(), 0x100e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00B6
        gbc.setState(0x8727, 0xce2b, 0x3a90, 0xd1db, 0x965d, 0xe40a, 0x1, 0x1);
        gbc.writeMem(0x8727, { 0xa6 });
        gbc.writeMem(0xe40a, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xce2b);
        EXPECT(gbc.pc(), 0x8728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8727), 0xa6);
        EXPECT(gbc.readMem(0xe40a), 0xda);
        // A6 00B8
        gbc.setState(0xe26d, 0x93f1, 0xb780, 0x9b5f, 0x7a18, 0xe7ab, 0x1, 0x0);
        gbc.writeMem(0xe26d, { 0xa6 });
        gbc.writeMem(0xe7ab, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x93f1);
        EXPECT(gbc.pc(), 0xe26e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe26d), 0xa6);
        EXPECT(gbc.readMem(0xe7ab), 0x1e);
        // A6 00B9
        gbc.setState(0x5ba1, 0x3ad0, 0xbf60, 0xd73d, 0xb4e6, 0x94e8, 0x0, 0x1);
        gbc.writeMem(0x5ba1, { 0xa6 });
        gbc.writeMem(0x94e8, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3ad0);
        EXPECT(gbc.pc(), 0x5ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e8), 0xf);
        // A6 00BA
        gbc.setState(0x5337, 0xf650, 0x70a0, 0xa108, 0x10c, 0xb668, 0x1, 0x0);
        gbc.writeMem(0x5337, { 0xa6 });
        gbc.writeMem(0xb668, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xf650);
        EXPECT(gbc.pc(), 0x5338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb668), 0xfa);
        // A6 00BB
        gbc.setState(0xc1ea, 0x50ca, 0x4170, 0xaced, 0x436, 0x98a7, 0x0, 0x1);
        gbc.writeMem(0x98a7, { 0x5e });
        gbc.writeMem(0xc1ea, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x50ca);
        EXPECT(gbc.pc(), 0xc1eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a7), 0x5e);
        EXPECT(gbc.readMem(0xc1ea), 0xa6);
        // A6 00BC
        gbc.setState(0x8904, 0xecd7, 0x1730, 0x9bd5, 0x6c31, 0x7203, 0x1, 0x0);
        gbc.writeMem(0x7203, { 0x66 });
        gbc.writeMem(0x8904, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xecd7);
        EXPECT(gbc.pc(), 0x8905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8904), 0xa6);
        // A6 00BD
        gbc.setState(0xc1f, 0x3da5, 0xf760, 0x249c, 0xea33, 0x62c4, 0x0, 0x1);
        gbc.writeMem(0xc1f, { 0xa6 });
        gbc.writeMem(0x62c4, { 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3da5);
        EXPECT(gbc.pc(), 0xc20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00BF
        gbc.setState(0x4944, 0x79d, 0xb190, 0x5f45, 0x6496, 0xe70e, 0x0, 0x0);
        gbc.writeMem(0x4944, { 0xa6 });
        gbc.writeMem(0xe70e, { 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x79d);
        EXPECT(gbc.pc(), 0x4945);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70e), 0x68);
        // A6 00C0
        gbc.setState(0x70ed, 0x1a9d, 0x1e10, 0x2e01, 0xf6a2, 0x4fb3, 0x1, 0x0);
        gbc.writeMem(0x4fb3, { 0xd0 });
        gbc.writeMem(0x70ed, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1a9d);
        EXPECT(gbc.pc(), 0x70ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00C3
        gbc.setState(0xd918, 0x138d, 0xce90, 0x7a24, 0x4c7d, 0x7be9, 0x0, 0x1);
        gbc.writeMem(0x7be9, { 0x16 });
        gbc.writeMem(0xd918, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x138d);
        EXPECT(gbc.pc(), 0xd919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd918), 0xa6);
        // A6 00C4
        gbc.setState(0x3fec, 0xbc9a, 0x9b40, 0x3f68, 0x9142, 0xbceb, 0x0, 0x0);
        gbc.writeMem(0x3fec, { 0xa6 });
        gbc.writeMem(0xbceb, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbc9a);
        EXPECT(gbc.pc(), 0x3fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbceb), 0xd2);
        // A6 00C5
        gbc.setState(0x60e0, 0xa4d4, 0xb9e0, 0xe666, 0xa5ac, 0x1c0a, 0x1, 0x0);
        gbc.writeMem(0x1c0a, { 0x51 });
        gbc.writeMem(0x60e0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa4d4);
        EXPECT(gbc.pc(), 0x60e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00C6
        gbc.setState(0x79de, 0x8aea, 0x91b0, 0xf529, 0xfb54, 0x710d, 0x0, 0x1);
        gbc.writeMem(0x710d, { 0x94 });
        gbc.writeMem(0x79de, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8aea);
        EXPECT(gbc.pc(), 0x79df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00C7
        gbc.setState(0xcca3, 0x5ac6, 0xc600, 0x66e2, 0x356b, 0x753f, 0x0, 0x0);
        gbc.writeMem(0x753f, { 0xe7 });
        gbc.writeMem(0xcca3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5ac6);
        EXPECT(gbc.pc(), 0xcca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcca3), 0xa6);
        // A6 00C8
        gbc.setState(0xbf0e, 0x208a, 0xb590, 0x6c58, 0x13be, 0x666e, 0x1, 0x0);
        gbc.writeMem(0x666e, { 0xe8 });
        gbc.writeMem(0xbf0e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x208a);
        EXPECT(gbc.pc(), 0xbf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf0e), 0xa6);
        // A6 00C9
        gbc.setState(0xe88, 0x25e, 0xe9f0, 0x60b2, 0x5f29, 0xa38b, 0x1, 0x1);
        gbc.writeMem(0xe88, { 0xa6 });
        gbc.writeMem(0xa38b, { 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x25e);
        EXPECT(gbc.pc(), 0xe89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38b), 0xdc);
        // A6 00CA
        gbc.setState(0x7b97, 0xb906, 0xfa60, 0xb4e, 0xbc74, 0x9554, 0x1, 0x1);
        gbc.writeMem(0x7b97, { 0xa6 });
        gbc.writeMem(0x9554, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb906);
        EXPECT(gbc.pc(), 0x7b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9554), 0x95);
        // A6 00CB
        gbc.setState(0x3b62, 0x1ecf, 0x5d00, 0x669a, 0xf6ae, 0x4bcd, 0x0, 0x1);
        gbc.writeMem(0x3b62, { 0xa6 });
        gbc.writeMem(0x4bcd, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1ecf);
        EXPECT(gbc.pc(), 0x3b63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00CD
        gbc.setState(0x81c6, 0xe9e4, 0xfd0, 0xdac0, 0x76f4, 0xaf67, 0x0, 0x0);
        gbc.writeMem(0x81c6, { 0xa6 });
        gbc.writeMem(0xaf67, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe9e4);
        EXPECT(gbc.pc(), 0x81c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c6), 0xa6);
        EXPECT(gbc.readMem(0xaf67), 0x15);
        // A6 00CE
        gbc.setState(0xc6ee, 0x7c44, 0x8770, 0x8691, 0x1f55, 0x52f9, 0x1, 0x1);
        gbc.writeMem(0x52f9, { 0xef });
        gbc.writeMem(0xc6ee, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7c44);
        EXPECT(gbc.pc(), 0xc6ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ee), 0xa6);
        // A6 00CF
        gbc.setState(0x9194, 0x284a, 0x47e0, 0x3be4, 0xc89c, 0x735d, 0x0, 0x1);
        gbc.writeMem(0x735d, { 0x51 });
        gbc.writeMem(0x9194, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x284a);
        EXPECT(gbc.pc(), 0x9195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9194), 0xa6);
        // A6 00D0
        gbc.setState(0xcf68, 0x6ca8, 0x4460, 0x1f40, 0xd7d9, 0x1668, 0x1, 0x1);
        gbc.writeMem(0x1668, { 0x67 });
        gbc.writeMem(0xcf68, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x6ca8);
        EXPECT(gbc.pc(), 0xcf69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf68), 0xa6);
        // A6 00D1
        gbc.setState(0x387e, 0xde09, 0xac90, 0xc36c, 0x756f, 0x8dde, 0x0, 0x1);
        gbc.writeMem(0x387e, { 0xa6 });
        gbc.writeMem(0x8dde, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xde09);
        EXPECT(gbc.pc(), 0x387f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dde), 0x57);
        // A6 00D2
        gbc.setState(0x7e5b, 0x898d, 0xfe70, 0x46b1, 0x46f0, 0xf84d, 0x0, 0x1);
        gbc.writeMem(0x7e5b, { 0xa6 });
        gbc.writeMem(0xf84d, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x898d);
        EXPECT(gbc.pc(), 0x7e5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf84d), 0x47);
        // A6 00D3
        gbc.setState(0x5930, 0xf20e, 0x34b0, 0x4aee, 0x1d3a, 0x39d2, 0x0, 0x0);
        gbc.writeMem(0x39d2, { 0xb2 });
        gbc.writeMem(0x5930, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf20e);
        EXPECT(gbc.pc(), 0x5931);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00D4
        gbc.setState(0xac18, 0x6232, 0xb7a0, 0xbcca, 0xd506, 0x45fd, 0x0, 0x0);
        gbc.writeMem(0x45fd, { 0x82 });
        gbc.writeMem(0xac18, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6232);
        EXPECT(gbc.pc(), 0xac19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac18), 0xa6);
        // A6 00D5
        gbc.setState(0x9eb6, 0x315b, 0x5be0, 0xb55f, 0xdbe9, 0x7bfc, 0x1, 0x0);
        gbc.writeMem(0x7bfc, { 0x37 });
        gbc.writeMem(0x9eb6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x315b);
        EXPECT(gbc.pc(), 0x9eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eb6), 0xa6);
        // A6 00D6
        gbc.setState(0x18c3, 0x9f6, 0x8580, 0x829b, 0x69a9, 0xfa17, 0x0, 0x0);
        gbc.writeMem(0x18c3, { 0xa6 });
        gbc.writeMem(0xfa17, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9f6);
        EXPECT(gbc.pc(), 0x18c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfa17), 0xfc);
        // A6 00D7
        gbc.setState(0xe374, 0xfa98, 0xdac0, 0xe08a, 0xa56, 0xe8f7, 0x1, 0x1);
        gbc.writeMem(0xe374, { 0xa6 });
        gbc.writeMem(0xe8f7, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfa98);
        EXPECT(gbc.pc(), 0xe375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe374), 0xa6);
        EXPECT(gbc.readMem(0xe8f7), 0x31);
        // A6 00D8
        gbc.setState(0x81c7, 0x6380, 0x5d0, 0xcbd9, 0xe6da, 0xf0df, 0x0, 0x1);
        gbc.writeMem(0x81c7, { 0xa6 });
        gbc.writeMem(0xf0df, { 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6380);
        EXPECT(gbc.pc(), 0x81c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81c7), 0xa6);
        EXPECT(gbc.readMem(0xf0df), 0xf0);
        // A6 00D9
        gbc.setState(0x94be, 0x6da2, 0x33f0, 0xe951, 0x1e1c, 0x1b80, 0x1, 0x1);
        gbc.writeMem(0x1b80, { 0x86 });
        gbc.writeMem(0x94be, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x6da2);
        EXPECT(gbc.pc(), 0x94bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94be), 0xa6);
        // A6 00DA
        gbc.setState(0x69cf, 0xac54, 0xf050, 0xa10f, 0x4b9c, 0xbcb5, 0x1, 0x1);
        gbc.writeMem(0x69cf, { 0xa6 });
        gbc.writeMem(0xbcb5, { 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xac54);
        EXPECT(gbc.pc(), 0x69d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb5), 0x1);
        // A6 00DB
        gbc.setState(0x8381, 0xcaa0, 0xa850, 0x6515, 0x87c8, 0x28cd, 0x1, 0x0);
        gbc.writeMem(0x28cd, { 0x17 });
        gbc.writeMem(0x8381, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xcaa0);
        EXPECT(gbc.pc(), 0x8382);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8381), 0xa6);
        // A6 00DC
        gbc.setState(0x633c, 0xc3e0, 0x8b40, 0xfec0, 0xc334, 0xec35, 0x0, 0x0);
        gbc.writeMem(0x633c, { 0xa6 });
        gbc.writeMem(0xec35, { 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc3e0);
        EXPECT(gbc.pc(), 0x633d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec35), 0xd4);
        // A6 00DD
        gbc.setState(0x8e0b, 0x9988, 0xac80, 0xae89, 0x56b1, 0xd91f, 0x0, 0x0);
        gbc.writeMem(0x8e0b, { 0xa6 });
        gbc.writeMem(0xd91f, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9988);
        EXPECT(gbc.pc(), 0x8e0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e0b), 0xa6);
        EXPECT(gbc.readMem(0xd91f), 0xec);
        // A6 00DE
        gbc.setState(0x20b0, 0x8a0b, 0x5da0, 0x70b4, 0xc832, 0x5e2, 0x1, 0x0);
        gbc.writeMem(0x5e2, { 0xe1 });
        gbc.writeMem(0x20b0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8a0b);
        EXPECT(gbc.pc(), 0x20b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00DF
        gbc.setState(0x1c8d, 0x338d, 0x62e0, 0xb06, 0xdde9, 0xdf95, 0x1, 0x1);
        gbc.writeMem(0x1c8d, { 0xa6 });
        gbc.writeMem(0xdf95, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x338d);
        EXPECT(gbc.pc(), 0x1c8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf95), 0x3e);
        // A6 00E0
        gbc.setState(0x32f2, 0xda0b, 0xcb00, 0xd61d, 0xa0ec, 0x1df, 0x0, 0x0);
        gbc.writeMem(0x1df, { 0x43 });
        gbc.writeMem(0x32f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xda0b);
        EXPECT(gbc.pc(), 0x32f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00E3
        gbc.setState(0x67e3, 0x43ab, 0xf740, 0x6774, 0x7eb7, 0x317, 0x1, 0x1);
        gbc.writeMem(0x317, { 0x1c });
        gbc.writeMem(0x67e3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x43ab);
        EXPECT(gbc.pc(), 0x67e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00E4
        gbc.setState(0x493d, 0x6952, 0x32f0, 0xc8ce, 0x7c2b, 0xc04, 0x1, 0x1);
        gbc.writeMem(0xc04, { 0xbf });
        gbc.writeMem(0x493d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6952);
        EXPECT(gbc.pc(), 0x493e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00E5
        gbc.setState(0x22ac, 0x692f, 0xfee0, 0x49d8, 0xffa1, 0xc777, 0x1, 0x1);
        gbc.writeMem(0x22ac, { 0xa6 });
        gbc.writeMem(0xc777, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x692f);
        EXPECT(gbc.pc(), 0x22ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc777), 0x3d);
        // A6 00E6
        gbc.setState(0xcb3e, 0xd452, 0x7060, 0xf3ea, 0xffba, 0xcab4, 0x0, 0x1);
        gbc.writeMem(0xcab4, { 0xbb });
        gbc.writeMem(0xcb3e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd452);
        EXPECT(gbc.pc(), 0xcb3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab4), 0xbb);
        EXPECT(gbc.readMem(0xcb3e), 0xa6);
        // A6 00E7
        gbc.setState(0x16, 0x43b7, 0xc610, 0xdf4a, 0xa7c9, 0xc63, 0x1, 0x1);
        gbc.writeMem(0x16, { 0xa6 });
        gbc.writeMem(0xc63, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x43b7);
        EXPECT(gbc.pc(), 0x17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00E8
        gbc.setState(0x2df, 0xe750, 0x5940, 0xe219, 0x21f9, 0x1250, 0x0, 0x1);
        gbc.writeMem(0x2df, { 0xa6 });
        gbc.writeMem(0x1250, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe750);
        EXPECT(gbc.pc(), 0x2e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00E9
        gbc.setState(0xdbd8, 0xdd72, 0x14f0, 0x8f, 0xd859, 0x15ac, 0x1, 0x1);
        gbc.writeMem(0x15ac, { 0x4d });
        gbc.writeMem(0xdbd8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xdd72);
        EXPECT(gbc.pc(), 0xdbd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd8), 0xa6);
        // A6 00EA
        gbc.setState(0x8d8, 0x8c, 0xeb00, 0x82fe, 0xa233, 0x2614, 0x0, 0x0);
        gbc.writeMem(0x8d8, { 0xa6 });
        gbc.writeMem(0x2614, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x8c);
        EXPECT(gbc.pc(), 0x8d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00EB
        gbc.setState(0x70b7, 0xf104, 0x8170, 0xcd6d, 0x5b6f, 0x7bff, 0x1, 0x1);
        gbc.writeMem(0x70b7, { 0xa6 });
        gbc.writeMem(0x7bff, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf104);
        EXPECT(gbc.pc(), 0x70b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00EC
        gbc.setState(0x8b2e, 0x8a8a, 0x6250, 0xec0b, 0xae53, 0x119e, 0x1, 0x0);
        gbc.writeMem(0x119e, { 0x3 });
        gbc.writeMem(0x8b2e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8a8a);
        EXPECT(gbc.pc(), 0x8b2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b2e), 0xa6);
        // A6 00ED
        gbc.setState(0xcc29, 0x4cbd, 0xe5d0, 0x47a4, 0x6832, 0x85b2, 0x0, 0x0);
        gbc.writeMem(0x85b2, { 0x98 });
        gbc.writeMem(0xcc29, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4cbd);
        EXPECT(gbc.pc(), 0xcc2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b2), 0x98);
        EXPECT(gbc.readMem(0xcc29), 0xa6);
        // A6 00EE
        gbc.setState(0x3fa4, 0xc8b8, 0x3bf0, 0xa2b1, 0xf881, 0x84c1, 0x0, 0x1);
        gbc.writeMem(0x3fa4, { 0xa6 });
        gbc.writeMem(0x84c1, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc8b8);
        EXPECT(gbc.pc(), 0x3fa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84c1), 0xfb);
        // A6 00F0
        gbc.setState(0xf8b, 0x61d7, 0x4cb0, 0xb374, 0x9fdf, 0xf1c0, 0x0, 0x1);
        gbc.writeMem(0xf8b, { 0xa6 });
        gbc.writeMem(0xf1c0, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x61d7);
        EXPECT(gbc.pc(), 0xf8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf1c0), 0x7b);
        // A6 00F1
        gbc.setState(0x7a2e, 0xddd, 0x2b50, 0xe50a, 0xd88c, 0x3a96, 0x1, 0x0);
        gbc.writeMem(0x3a96, { 0xfb });
        gbc.writeMem(0x7a2e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xddd);
        EXPECT(gbc.pc(), 0x7a2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00F2
        gbc.setState(0x6db5, 0x4cec, 0xb3e0, 0xc721, 0xfe21, 0xb6a7, 0x0, 0x0);
        gbc.writeMem(0x6db5, { 0xa6 });
        gbc.writeMem(0xb6a7, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4cec);
        EXPECT(gbc.pc(), 0x6db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a7), 0x8);
        // A6 00F3
        gbc.setState(0x258, 0x3a77, 0x7490, 0x10, 0x9c68, 0x5c28, 0x0, 0x0);
        gbc.writeMem(0x258, { 0xa6 });
        gbc.writeMem(0x5c28, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3a77);
        EXPECT(gbc.pc(), 0x259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00F4
        gbc.setState(0x446a, 0x6c34, 0x3d30, 0x6195, 0xa9cf, 0xe43f, 0x0, 0x0);
        gbc.writeMem(0x446a, { 0xa6 });
        gbc.writeMem(0xe43f, { 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6c34);
        EXPECT(gbc.pc(), 0x446b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe43f), 0x50);
        // A6 00F5
        gbc.setState(0x78a2, 0xea94, 0x5790, 0xa62c, 0x9a57, 0xaa96, 0x0, 0x0);
        gbc.writeMem(0x78a2, { 0xa6 });
        gbc.writeMem(0xaa96, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xea94);
        EXPECT(gbc.pc(), 0x78a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa96), 0xc4);
        // A6 00F6
        gbc.setState(0x1f26, 0x5ebf, 0xa00, 0x8352, 0x71c4, 0x5f0c, 0x1, 0x1);
        gbc.writeMem(0x1f26, { 0xa6 });
        gbc.writeMem(0x5f0c, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5ebf);
        EXPECT(gbc.pc(), 0x1f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00F7
        gbc.setState(0xea5a, 0xb362, 0x7660, 0x2bd, 0xf6d3, 0x96cb, 0x1, 0x0);
        gbc.writeMem(0x96cb, { 0x5b });
        gbc.writeMem(0xea5a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb362);
        EXPECT(gbc.pc(), 0xea5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96cb), 0x5b);
        EXPECT(gbc.readMem(0xea5a), 0xa6);
        // A6 00F8
        gbc.setState(0x9ccd, 0x3043, 0xee90, 0xe496, 0x776, 0x56c8, 0x1, 0x1);
        gbc.writeMem(0x56c8, { 0x84 });
        gbc.writeMem(0x9ccd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3043);
        EXPECT(gbc.pc(), 0x9cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0xa6);
        // A6 00F9
        gbc.setState(0x3a61, 0xa049, 0xc790, 0xd2a5, 0x8e4b, 0xd37c, 0x1, 0x0);
        gbc.writeMem(0x3a61, { 0xa6 });
        gbc.writeMem(0xd37c, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xa049);
        EXPECT(gbc.pc(), 0x3a62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37c), 0x22);
        // A6 00FA
        gbc.setState(0xd68b, 0xa318, 0x4880, 0x324a, 0x5c7a, 0x528, 0x0, 0x0);
        gbc.writeMem(0x528, { 0xb8 });
        gbc.writeMem(0xd68b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xa318);
        EXPECT(gbc.pc(), 0xd68c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd68b), 0xa6);
        // A6 00FB
        gbc.setState(0xdaa8, 0xb2b5, 0xa7e0, 0xd576, 0x9113, 0x809a, 0x1, 0x0);
        gbc.writeMem(0x809a, { 0xa4 });
        gbc.writeMem(0xdaa8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xb2b5);
        EXPECT(gbc.pc(), 0xdaa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x809a), 0xa4);
        EXPECT(gbc.readMem(0xdaa8), 0xa6);
        // A6 00FC
        gbc.setState(0xfa3, 0x7f48, 0xfa70, 0x66a6, 0x776, 0x2cce, 0x1, 0x0);
        gbc.writeMem(0xfa3, { 0xa6 });
        gbc.writeMem(0x2cce, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7f48);
        EXPECT(gbc.pc(), 0xfa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 00FD
        gbc.setState(0x753d, 0x2681, 0xb720, 0xa02, 0xa781, 0xfddd, 0x0, 0x0);
        gbc.writeMem(0x753d, { 0xa6 });
        gbc.writeMem(0xfddd, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2681);
        EXPECT(gbc.pc(), 0x753e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfddd), 0xce);
        // A6 00FE
        gbc.setState(0x5d9, 0xe526, 0xd960, 0x8800, 0x12bb, 0xe4d9, 0x0, 0x0);
        gbc.writeMem(0x5d9, { 0xa6 });
        gbc.writeMem(0xe4d9, { 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe526);
        EXPECT(gbc.pc(), 0x5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4d9), 0x26);
        // A6 0100
        gbc.setState(0x93f7, 0xe106, 0xa280, 0x2bd1, 0xb7ef, 0xd50a, 0x0, 0x0);
        gbc.writeMem(0x93f7, { 0xa6 });
        gbc.writeMem(0xd50a, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe106);
        EXPECT(gbc.pc(), 0x93f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f7), 0xa6);
        EXPECT(gbc.readMem(0xd50a), 0xd5);
        // A6 0101
        gbc.setState(0x62b2, 0x7a97, 0xf940, 0xef4, 0x7c2f, 0xbaf9, 0x0, 0x1);
        gbc.writeMem(0x62b2, { 0xa6 });
        gbc.writeMem(0xbaf9, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x7a97);
        EXPECT(gbc.pc(), 0x62b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaf9), 0x52);
        // A6 0102
        gbc.setState(0x5d52, 0xa224, 0x3f80, 0xb78, 0xfe3c, 0xa340, 0x1, 0x1);
        gbc.writeMem(0x5d52, { 0xa6 });
        gbc.writeMem(0xa340, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa224);
        EXPECT(gbc.pc(), 0x5d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa340), 0xe2);
        // A6 0103
        gbc.setState(0x9ba4, 0xc13a, 0xdb20, 0x385d, 0x95d2, 0xea14, 0x1, 0x0);
        gbc.writeMem(0x9ba4, { 0xa6 });
        gbc.writeMem(0xea14, { 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc13a);
        EXPECT(gbc.pc(), 0x9ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ba4), 0xa6);
        EXPECT(gbc.readMem(0xea14), 0x43);
        // A6 0104
        gbc.setState(0x1aa6, 0x2321, 0x9e60, 0xe51c, 0x3235, 0x3a47, 0x0, 0x0);
        gbc.writeMem(0x1aa6, { 0xa6 });
        gbc.writeMem(0x3a47, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2321);
        EXPECT(gbc.pc(), 0x1aa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0105
        gbc.setState(0x6b29, 0x18e8, 0xe6d0, 0xd028, 0xb34b, 0xd780, 0x1, 0x1);
        gbc.writeMem(0x6b29, { 0xa6 });
        gbc.writeMem(0xd780, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x18e8);
        EXPECT(gbc.pc(), 0x6b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd780), 0x86);
        // A6 0106
        gbc.setState(0xc231, 0x8c00, 0xb5d0, 0xf9dc, 0xed53, 0x96fa, 0x1, 0x0);
        gbc.writeMem(0x96fa, { 0xf2 });
        gbc.writeMem(0xc231, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x8c00);
        EXPECT(gbc.pc(), 0xc232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96fa), 0xf2);
        EXPECT(gbc.readMem(0xc231), 0xa6);
        // A6 0107
        gbc.setState(0x25a4, 0xee04, 0x2e70, 0x8f4a, 0x9b4d, 0xd3af, 0x1, 0x0);
        gbc.writeMem(0x25a4, { 0xa6 });
        gbc.writeMem(0xd3af, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xee04);
        EXPECT(gbc.pc(), 0x25a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3af), 0xa3);
        // A6 0108
        gbc.setState(0x6270, 0xc7ff, 0x3c00, 0x96ca, 0xcfa4, 0x47a, 0x1, 0x1);
        gbc.writeMem(0x47a, { 0xf0 });
        gbc.writeMem(0x6270, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc7ff);
        EXPECT(gbc.pc(), 0x6271);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0109
        gbc.setState(0x1b36, 0xdbe3, 0xf990, 0x86b4, 0xb03f, 0x233b, 0x0, 0x1);
        gbc.writeMem(0x1b36, { 0xa6 });
        gbc.writeMem(0x233b, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdbe3);
        EXPECT(gbc.pc(), 0x1b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 010A
        gbc.setState(0x8ce1, 0x5ec5, 0x7300, 0x499, 0x17e5, 0x1115, 0x0, 0x0);
        gbc.writeMem(0x1115, { 0x91 });
        gbc.writeMem(0x8ce1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5ec5);
        EXPECT(gbc.pc(), 0x8ce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce1), 0xa6);
        // A6 010B
        gbc.setState(0xa6c7, 0xf5a7, 0xed10, 0x36b4, 0xfed6, 0xcec9, 0x1, 0x0);
        gbc.writeMem(0xa6c7, { 0xa6 });
        gbc.writeMem(0xcec9, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf5a7);
        EXPECT(gbc.pc(), 0xa6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c7), 0xa6);
        EXPECT(gbc.readMem(0xcec9), 0x40);
        // A6 010C
        gbc.setState(0xb7f9, 0x3529, 0x9bd0, 0xa733, 0xba0, 0x220e, 0x1, 0x1);
        gbc.writeMem(0x220e, { 0x37 });
        gbc.writeMem(0xb7f9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3529);
        EXPECT(gbc.pc(), 0xb7fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f9), 0xa6);
        // A6 010D
        gbc.setState(0x2c65, 0xbb58, 0x9af0, 0x513c, 0xdfa3, 0x429d, 0x0, 0x1);
        gbc.writeMem(0x2c65, { 0xa6 });
        gbc.writeMem(0x429d, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xbb58);
        EXPECT(gbc.pc(), 0x2c66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 010E
        gbc.setState(0x7434, 0xd6f1, 0x9bb0, 0xe390, 0x8bd5, 0xb47c, 0x0, 0x0);
        gbc.writeMem(0x7434, { 0xa6 });
        gbc.writeMem(0xb47c, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd6f1);
        EXPECT(gbc.pc(), 0x7435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47c), 0xd5);
        // A6 010F
        gbc.setState(0xe97a, 0x14aa, 0x5a60, 0x8be3, 0xedbe, 0xeadc, 0x0, 0x0);
        gbc.writeMem(0xe97a, { 0xa6 });
        gbc.writeMem(0xeadc, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x14aa);
        EXPECT(gbc.pc(), 0xe97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe97a), 0xa6);
        EXPECT(gbc.readMem(0xeadc), 0x70);
        // A6 0110
        gbc.setState(0xdeb7, 0x40a2, 0xd910, 0xcf7d, 0x8c5, 0xa84, 0x1, 0x1);
        gbc.writeMem(0xa84, { 0xd4 });
        gbc.writeMem(0xdeb7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x40a2);
        EXPECT(gbc.pc(), 0xdeb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb7), 0xa6);
        // A6 0111
        gbc.setState(0xba, 0x3e6e, 0x34b0, 0xfcb2, 0x97cf, 0x66e5, 0x0, 0x0);
        gbc.writeMem(0xba, { 0xa6 });
        gbc.writeMem(0x66e5, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3e6e);
        EXPECT(gbc.pc(), 0xbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0112
        gbc.setState(0xdae3, 0xfb31, 0x5260, 0xd245, 0x29ba, 0x4e45, 0x0, 0x0);
        gbc.writeMem(0x4e45, { 0x60 });
        gbc.writeMem(0xdae3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xfb31);
        EXPECT(gbc.pc(), 0xdae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae3), 0xa6);
        // A6 0113
        gbc.setState(0x3ba8, 0x7c30, 0xfa20, 0x8879, 0x7ba0, 0x65d9, 0x0, 0x0);
        gbc.writeMem(0x3ba8, { 0xa6 });
        gbc.writeMem(0x65d9, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7c30);
        EXPECT(gbc.pc(), 0x3ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0114
        gbc.setState(0xaf52, 0x7883, 0x78c0, 0xb96d, 0x64ba, 0xa934, 0x0, 0x0);
        gbc.writeMem(0xa934, { 0xb1 });
        gbc.writeMem(0xaf52, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7883);
        EXPECT(gbc.pc(), 0xaf53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa934), 0xb1);
        EXPECT(gbc.readMem(0xaf52), 0xa6);
        // A6 0115
        gbc.setState(0x5b35, 0xdc18, 0x6480, 0x5ae1, 0xf1db, 0x488f, 0x0, 0x0);
        gbc.writeMem(0x488f, { 0x1b });
        gbc.writeMem(0x5b35, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xdc18);
        EXPECT(gbc.pc(), 0x5b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0116
        gbc.setState(0x12b, 0xbcc6, 0x3e70, 0x5439, 0xbec8, 0x6945, 0x0, 0x0);
        gbc.writeMem(0x12b, { 0xa6 });
        gbc.writeMem(0x6945, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbcc6);
        EXPECT(gbc.pc(), 0x12c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0117
        gbc.setState(0x899d, 0xf043, 0xe270, 0x9fbb, 0x8131, 0xbff4, 0x1, 0x0);
        gbc.writeMem(0x899d, { 0xa6 });
        gbc.writeMem(0xbff4, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf043);
        EXPECT(gbc.pc(), 0x899e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899d), 0xa6);
        EXPECT(gbc.readMem(0xbff4), 0x52);
        // A6 0118
        gbc.setState(0xc080, 0x88aa, 0xad00, 0x4a53, 0x4010, 0x3321, 0x0, 0x1);
        gbc.writeMem(0x3321, { 0xab });
        gbc.writeMem(0xc080, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0xc081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc080), 0xa6);
        // A6 0119
        gbc.setState(0x1298, 0xd3a0, 0xea10, 0xca61, 0x7472, 0x1463, 0x0, 0x0);
        gbc.writeMem(0x1298, { 0xa6 });
        gbc.writeMem(0x1463, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd3a0);
        EXPECT(gbc.pc(), 0x1299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 011A
        gbc.setState(0x2548, 0x7739, 0xc4b0, 0xe777, 0xa1ce, 0xcce1, 0x0, 0x1);
        gbc.writeMem(0x2548, { 0xa6 });
        gbc.writeMem(0xcce1, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7739);
        EXPECT(gbc.pc(), 0x2549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce1), 0x70);
        // A6 011B
        gbc.setState(0x45b4, 0xb3c, 0xa270, 0x576e, 0x6c1, 0x153b, 0x0, 0x0);
        gbc.writeMem(0x153b, { 0xc4 });
        gbc.writeMem(0x45b4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb3c);
        EXPECT(gbc.pc(), 0x45b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 011C
        gbc.setState(0xabd7, 0x92f2, 0x1fe0, 0xfcea, 0xdc3d, 0xa5ca, 0x1, 0x1);
        gbc.writeMem(0xa5ca, { 0xc5 });
        gbc.writeMem(0xabd7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x92f2);
        EXPECT(gbc.pc(), 0xabd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ca), 0xc5);
        EXPECT(gbc.readMem(0xabd7), 0xa6);
        // A6 011D
        gbc.setState(0x1f75, 0xdceb, 0xda80, 0xfba3, 0x7400, 0xbed7, 0x0, 0x1);
        gbc.writeMem(0x1f75, { 0xa6 });
        gbc.writeMem(0xbed7, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdceb);
        EXPECT(gbc.pc(), 0x1f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbed7), 0xd2);
        // A6 011E
        gbc.setState(0xda5, 0xe42e, 0xa290, 0x80c3, 0x85ac, 0xa773, 0x1, 0x0);
        gbc.writeMem(0xda5, { 0xa6 });
        gbc.writeMem(0xa773, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe42e);
        EXPECT(gbc.pc(), 0xda6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa773), 0x4b);
        // A6 011F
        gbc.setState(0xbcda, 0x9afc, 0x93e0, 0x8271, 0x2312, 0x993f, 0x0, 0x1);
        gbc.writeMem(0x993f, { 0xba });
        gbc.writeMem(0xbcda, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9afc);
        EXPECT(gbc.pc(), 0xbcdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x993f), 0xba);
        EXPECT(gbc.readMem(0xbcda), 0xa6);
        // A6 0120
        gbc.setState(0xad0b, 0x7391, 0xd600, 0x52eb, 0xd9bc, 0xc9ce, 0x0, 0x1);
        gbc.writeMem(0xad0b, { 0xa6 });
        gbc.writeMem(0xc9ce, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7391);
        EXPECT(gbc.pc(), 0xad0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0b), 0xa6);
        EXPECT(gbc.readMem(0xc9ce), 0xdd);
        // A6 0121
        gbc.setState(0x590e, 0x6f12, 0xde00, 0xacbb, 0x7b18, 0x6e8e, 0x1, 0x1);
        gbc.writeMem(0x590e, { 0xa6 });
        gbc.writeMem(0x6e8e, { 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6f12);
        EXPECT(gbc.pc(), 0x590f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0122
        gbc.setState(0x17b, 0x6f87, 0x5c30, 0xdab4, 0xce8e, 0xdbd8, 0x0, 0x0);
        gbc.writeMem(0x17b, { 0xa6 });
        gbc.writeMem(0xdbd8, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6f87);
        EXPECT(gbc.pc(), 0x17c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd8), 0x58);
        // A6 0123
        gbc.setState(0x779e, 0x6c1f, 0x9040, 0xc482, 0x874e, 0x56c4, 0x0, 0x0);
        gbc.writeMem(0x56c4, { 0xe9 });
        gbc.writeMem(0x779e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6c1f);
        EXPECT(gbc.pc(), 0x779f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0124
        gbc.setState(0xb12a, 0x5671, 0xd970, 0x867f, 0xbd64, 0x803b, 0x0, 0x0);
        gbc.writeMem(0x803b, { 0x68 });
        gbc.writeMem(0xb12a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5671);
        EXPECT(gbc.pc(), 0xb12b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x803b), 0x68);
        EXPECT(gbc.readMem(0xb12a), 0xa6);
        // A6 0125
        gbc.setState(0xc03e, 0xb149, 0x9970, 0xeaaf, 0x11df, 0xa0de, 0x0, 0x1);
        gbc.writeMem(0xa0de, { 0x1b });
        gbc.writeMem(0xc03e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb149);
        EXPECT(gbc.pc(), 0xc03f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0de), 0x1b);
        EXPECT(gbc.readMem(0xc03e), 0xa6);
        // A6 0126
        gbc.setState(0x697f, 0x706e, 0x43c0, 0x109, 0xd42e, 0x3daf, 0x0, 0x1);
        gbc.writeMem(0x3daf, { 0x2c });
        gbc.writeMem(0x697f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x706e);
        EXPECT(gbc.pc(), 0x6980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0127
        gbc.setState(0x6283, 0xb6cd, 0xf130, 0xc33f, 0x73c3, 0x4234, 0x1, 0x0);
        gbc.writeMem(0x4234, { 0x6c });
        gbc.writeMem(0x6283, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb6cd);
        EXPECT(gbc.pc(), 0x6284);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0128
        gbc.setState(0x5ba8, 0xd5a8, 0xe6e0, 0xc7e5, 0x8c8b, 0xef26, 0x0, 0x1);
        gbc.writeMem(0x5ba8, { 0xa6 });
        gbc.writeMem(0xef26, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd5a8);
        EXPECT(gbc.pc(), 0x5ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef26), 0xfe);
        // A6 0129
        gbc.setState(0x75f, 0x3cec, 0x6ea0, 0x3a09, 0x5fec, 0xb2f2, 0x1, 0x1);
        gbc.writeMem(0x75f, { 0xa6 });
        gbc.writeMem(0xb2f2, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3cec);
        EXPECT(gbc.pc(), 0x760);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f2), 0x37);
        // A6 012A
        gbc.setState(0xe80d, 0xbbba, 0x3380, 0x68fa, 0x5102, 0xbef9, 0x0, 0x0);
        gbc.writeMem(0xbef9, { 0xfe });
        gbc.writeMem(0xe80d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xbbba);
        EXPECT(gbc.pc(), 0xe80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef9), 0xfe);
        EXPECT(gbc.readMem(0xe80d), 0xa6);
        // A6 012B
        gbc.setState(0xc60c, 0xc8b9, 0xa0a0, 0xf2ad, 0xfced, 0x32b3, 0x1, 0x1);
        gbc.writeMem(0x32b3, { 0xcb });
        gbc.writeMem(0xc60c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc8b9);
        EXPECT(gbc.pc(), 0xc60d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc60c), 0xa6);
        // A6 012C
        gbc.setState(0x3bd3, 0x880f, 0xafd0, 0x7b31, 0xe5, 0x4230, 0x1, 0x0);
        gbc.writeMem(0x3bd3, { 0xa6 });
        gbc.writeMem(0x4230, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x880f);
        EXPECT(gbc.pc(), 0x3bd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 012E
        gbc.setState(0x4d81, 0x5ad0, 0x90d0, 0x39cc, 0xc146, 0x9d6c, 0x0, 0x1);
        gbc.writeMem(0x4d81, { 0xa6 });
        gbc.writeMem(0x9d6c, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5ad0);
        EXPECT(gbc.pc(), 0x4d82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6c), 0x8b);
        // A6 012F
        gbc.setState(0x3583, 0x27bb, 0xdcb0, 0x138f, 0x37d, 0xbb1, 0x1, 0x1);
        gbc.writeMem(0xbb1, { 0x1a });
        gbc.writeMem(0x3583, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x27bb);
        EXPECT(gbc.pc(), 0x3584);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0130
        gbc.setState(0xec91, 0x6722, 0xdc90, 0x8dc6, 0x827a, 0x54f5, 0x0, 0x1);
        gbc.writeMem(0x54f5, { 0x35 });
        gbc.writeMem(0xec91, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6722);
        EXPECT(gbc.pc(), 0xec92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec91), 0xa6);
        // A6 0131
        gbc.setState(0x413b, 0xbbbe, 0x61a0, 0x106d, 0x943c, 0x5dd3, 0x1, 0x0);
        gbc.writeMem(0x413b, { 0xa6 });
        gbc.writeMem(0x5dd3, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xbbbe);
        EXPECT(gbc.pc(), 0x413c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0132
        gbc.setState(0x2ca3, 0x96df, 0x4790, 0xe1d2, 0x9679, 0x9ce1, 0x0, 0x1);
        gbc.writeMem(0x2ca3, { 0xa6 });
        gbc.writeMem(0x9ce1, { 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x96df);
        EXPECT(gbc.pc(), 0x2ca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce1), 0x3a);
        // A6 0133
        gbc.setState(0x4a71, 0xf02, 0x5c80, 0x6464, 0xf25b, 0xd275, 0x0, 0x1);
        gbc.writeMem(0x4a71, { 0xa6 });
        gbc.writeMem(0xd275, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf02);
        EXPECT(gbc.pc(), 0x4a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd275), 0xb9);
        // A6 0134
        gbc.setState(0x935e, 0xfa1b, 0x39a0, 0xe7ce, 0xfff, 0xaf92, 0x0, 0x0);
        gbc.writeMem(0x935e, { 0xa6 });
        gbc.writeMem(0xaf92, { 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xfa1b);
        EXPECT(gbc.pc(), 0x935f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935e), 0xa6);
        EXPECT(gbc.readMem(0xaf92), 0xad);
        // A6 0135
        gbc.setState(0x6c25, 0xbe1d, 0x8750, 0xc30a, 0x3109, 0xd77c, 0x1, 0x0);
        gbc.writeMem(0x6c25, { 0xa6 });
        gbc.writeMem(0xd77c, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbe1d);
        EXPECT(gbc.pc(), 0x6c26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77c), 0xb3);
        // A6 0136
        gbc.setState(0x881, 0xf3ec, 0x93e0, 0x33d4, 0x6c66, 0xfdd3, 0x1, 0x0);
        gbc.writeMem(0x881, { 0xa6 });
        gbc.writeMem(0xfdd3, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf3ec);
        EXPECT(gbc.pc(), 0x882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfdd3), 0x37);
        // A6 0137
        gbc.setState(0xcde0, 0x13a0, 0x8670, 0x5d33, 0x292f, 0x49c4, 0x0, 0x0);
        gbc.writeMem(0x49c4, { 0x28 });
        gbc.writeMem(0xcde0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x13a0);
        EXPECT(gbc.pc(), 0xcde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde0), 0xa6);
        // A6 0138
        gbc.setState(0x961e, 0xca13, 0xead0, 0x4021, 0x9d3f, 0xbbab, 0x0, 0x1);
        gbc.writeMem(0x961e, { 0xa6 });
        gbc.writeMem(0xbbab, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xca13);
        EXPECT(gbc.pc(), 0x961f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961e), 0xa6);
        EXPECT(gbc.readMem(0xbbab), 0x81);
        // A6 0139
        gbc.setState(0xab2d, 0x74d8, 0x81a0, 0xa450, 0x8b1f, 0x1a8d, 0x0, 0x0);
        gbc.writeMem(0x1a8d, { 0x4a });
        gbc.writeMem(0xab2d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x74d8);
        EXPECT(gbc.pc(), 0xab2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab2d), 0xa6);
        // A6 013A
        gbc.setState(0xced8, 0x9959, 0x44e0, 0x5533, 0x5411, 0x3b66, 0x0, 0x1);
        gbc.writeMem(0x3b66, { 0x8a });
        gbc.writeMem(0xced8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9959);
        EXPECT(gbc.pc(), 0xced9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced8), 0xa6);
        // A6 013B
        gbc.setState(0xd3b5, 0x49c0, 0x6b50, 0x353f, 0x9cf3, 0xb552, 0x0, 0x0);
        gbc.writeMem(0xb552, { 0xe5 });
        gbc.writeMem(0xd3b5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x49c0);
        EXPECT(gbc.pc(), 0xd3b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb552), 0xe5);
        EXPECT(gbc.readMem(0xd3b5), 0xa6);
        // A6 013C
        gbc.setState(0xc337, 0x25d4, 0xc550, 0x5a55, 0x82f8, 0x48b9, 0x0, 0x1);
        gbc.writeMem(0x48b9, { 0x66 });
        gbc.writeMem(0xc337, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x25d4);
        EXPECT(gbc.pc(), 0xc338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc337), 0xa6);
        // A6 013D
        gbc.setState(0xef34, 0xf61, 0x9cf0, 0xbd13, 0xa48d, 0x456a, 0x0, 0x0);
        gbc.writeMem(0x456a, { 0xeb });
        gbc.writeMem(0xef34, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf61);
        EXPECT(gbc.pc(), 0xef35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef34), 0xa6);
        // A6 013F
        gbc.setState(0x2a42, 0x7abd, 0x5400, 0x444f, 0x7838, 0x6237, 0x0, 0x0);
        gbc.writeMem(0x2a42, { 0xa6 });
        gbc.writeMem(0x6237, { 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7abd);
        EXPECT(gbc.pc(), 0x2a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0140
        gbc.setState(0xa4ce, 0xafff, 0xdef0, 0x9f2e, 0x994b, 0x7b41, 0x0, 0x1);
        gbc.writeMem(0x7b41, { 0x1d });
        gbc.writeMem(0xa4ce, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xafff);
        EXPECT(gbc.pc(), 0xa4cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ce), 0xa6);
        // A6 0141
        gbc.setState(0xb73e, 0xb7e6, 0xe8b0, 0x595e, 0x5c83, 0x25e7, 0x0, 0x1);
        gbc.writeMem(0x25e7, { 0x94 });
        gbc.writeMem(0xb73e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb7e6);
        EXPECT(gbc.pc(), 0xb73f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb73e), 0xa6);
        // A6 0142
        gbc.setState(0xee1b, 0xa7cf, 0xfd20, 0xa62e, 0x57f8, 0xc8a5, 0x0, 0x1);
        gbc.writeMem(0xc8a5, { 0xa1 });
        gbc.writeMem(0xee1b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa7cf);
        EXPECT(gbc.pc(), 0xee1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a5), 0xa1);
        EXPECT(gbc.readMem(0xee1b), 0xa6);
        // A6 0143
        gbc.setState(0x4ddb, 0xd4d, 0x5960, 0xe435, 0xcc86, 0x6f9c, 0x1, 0x0);
        gbc.writeMem(0x4ddb, { 0xa6 });
        gbc.writeMem(0x6f9c, { 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd4d);
        EXPECT(gbc.pc(), 0x4ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0144
        gbc.setState(0x2ec, 0xf439, 0x9a60, 0x7b93, 0x918b, 0x412, 0x0, 0x1);
        gbc.writeMem(0x2ec, { 0xa6 });
        gbc.writeMem(0x412, { 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf439);
        EXPECT(gbc.pc(), 0x2ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0145
        gbc.setState(0xe5cb, 0x4513, 0x6a80, 0x1bf5, 0xb101, 0x352e, 0x1, 0x0);
        gbc.writeMem(0x352e, { 0x3e });
        gbc.writeMem(0xe5cb, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4513);
        EXPECT(gbc.pc(), 0xe5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5cb), 0xa6);
        // A6 0146
        gbc.setState(0x33fd, 0xd382, 0xb3b0, 0x924c, 0xc323, 0xa4ba, 0x0, 0x1);
        gbc.writeMem(0x33fd, { 0xa6 });
        gbc.writeMem(0xa4ba, { 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd382);
        EXPECT(gbc.pc(), 0x33fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ba), 0x73);
        // A6 0147
        gbc.setState(0x52c2, 0x5203, 0xa100, 0x5a81, 0x40ad, 0xdd30, 0x0, 0x1);
        gbc.writeMem(0x52c2, { 0xa6 });
        gbc.writeMem(0xdd30, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5203);
        EXPECT(gbc.pc(), 0x52c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd30), 0x84);
        // A6 0148
        gbc.setState(0x686f, 0x6a95, 0x4e80, 0xf5d6, 0x9d0c, 0xf34e, 0x1, 0x0);
        gbc.writeMem(0x686f, { 0xa6 });
        gbc.writeMem(0xf34e, { 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6a95);
        EXPECT(gbc.pc(), 0x6870);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf34e), 0x86);
        // A6 0149
        gbc.setState(0x337f, 0x7d3d, 0xaf60, 0xdf3a, 0x5781, 0x5217, 0x1, 0x1);
        gbc.writeMem(0x337f, { 0xa6 });
        gbc.writeMem(0x5217, { 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7d3d);
        EXPECT(gbc.pc(), 0x3380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 014A
        gbc.setState(0x5083, 0x2ca7, 0x8e00, 0x3d96, 0x209b, 0x9617, 0x0, 0x0);
        gbc.writeMem(0x5083, { 0xa6 });
        gbc.writeMem(0x9617, { 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x2ca7);
        EXPECT(gbc.pc(), 0x5084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9617), 0xa9);
        // A6 014B
        gbc.setState(0x53c, 0xf543, 0x40c0, 0xcc1b, 0x9de0, 0xed1b, 0x1, 0x0);
        gbc.writeMem(0x53c, { 0xa6 });
        gbc.writeMem(0xed1b, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf543);
        EXPECT(gbc.pc(), 0x53d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed1b), 0xfe);
        // A6 014C
        gbc.setState(0x3388, 0xb91c, 0xecc0, 0x4bd0, 0x8406, 0x3f6a, 0x1, 0x1);
        gbc.writeMem(0x3388, { 0xa6 });
        gbc.writeMem(0x3f6a, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xb91c);
        EXPECT(gbc.pc(), 0x3389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 014D
        gbc.setState(0x7673, 0x35a7, 0xd010, 0xc1f, 0x5eea, 0xb9b6, 0x0, 0x1);
        gbc.writeMem(0x7673, { 0xa6 });
        gbc.writeMem(0xb9b6, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x35a7);
        EXPECT(gbc.pc(), 0x7674);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9b6), 0x62);
        // A6 014E
        gbc.setState(0xb8f5, 0xffb6, 0x7900, 0x8698, 0xbfad, 0xeb03, 0x0, 0x1);
        gbc.writeMem(0xb8f5, { 0xa6 });
        gbc.writeMem(0xeb03, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xffb6);
        EXPECT(gbc.pc(), 0xb8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f5), 0xa6);
        EXPECT(gbc.readMem(0xeb03), 0x6e);
        // A6 014F
        gbc.setState(0xc853, 0x939b, 0xe870, 0xc7a, 0x2f6e, 0xea05, 0x0, 0x1);
        gbc.writeMem(0xc853, { 0xa6 });
        gbc.writeMem(0xea05, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x939b);
        EXPECT(gbc.pc(), 0xc854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc853), 0xa6);
        EXPECT(gbc.readMem(0xea05), 0xd);
        // A6 0150
        gbc.setState(0xb85a, 0x47b9, 0xd630, 0x9f8c, 0x904e, 0xa609, 0x0, 0x0);
        gbc.writeMem(0xa609, { 0xe });
        gbc.writeMem(0xb85a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x47b9);
        EXPECT(gbc.pc(), 0xb85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa609), 0xe);
        EXPECT(gbc.readMem(0xb85a), 0xa6);
        // A6 0151
        gbc.setState(0xd364, 0xa11b, 0x9290, 0x4629, 0xc7b0, 0xa1e8, 0x1, 0x1);
        gbc.writeMem(0xa1e8, { 0x89 });
        gbc.writeMem(0xd364, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa11b);
        EXPECT(gbc.pc(), 0xd365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1e8), 0x89);
        EXPECT(gbc.readMem(0xd364), 0xa6);
        // A6 0152
        gbc.setState(0x8d59, 0xa830, 0x2b90, 0xd8d6, 0xcff6, 0x8c6, 0x0, 0x0);
        gbc.writeMem(0x8c6, { 0x46 });
        gbc.writeMem(0x8d59, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa830);
        EXPECT(gbc.pc(), 0x8d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d59), 0xa6);
        // A6 0153
        gbc.setState(0x2e4a, 0xc822, 0x4590, 0x291c, 0xd5e6, 0x9ae1, 0x1, 0x1);
        gbc.writeMem(0x2e4a, { 0xa6 });
        gbc.writeMem(0x9ae1, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc822);
        EXPECT(gbc.pc(), 0x2e4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae1), 0x64);
        // A6 0154
        gbc.setState(0x35a2, 0x58fb, 0x9690, 0xd680, 0x1e29, 0x57d9, 0x0, 0x0);
        gbc.writeMem(0x35a2, { 0xa6 });
        gbc.writeMem(0x57d9, { 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x58fb);
        EXPECT(gbc.pc(), 0x35a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0155
        gbc.setState(0x41d9, 0x2bd6, 0x9920, 0xfc16, 0x2dd, 0xaede, 0x1, 0x1);
        gbc.writeMem(0x41d9, { 0xa6 });
        gbc.writeMem(0xaede, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2bd6);
        EXPECT(gbc.pc(), 0x41da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaede), 0x9e);
        // A6 0156
        gbc.setState(0xcc8d, 0xd2d, 0xa1d0, 0x4b1d, 0x3580, 0x57fc, 0x1, 0x1);
        gbc.writeMem(0x57fc, { 0xa5 });
        gbc.writeMem(0xcc8d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd2d);
        EXPECT(gbc.pc(), 0xcc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc8d), 0xa6);
        // A6 0157
        gbc.setState(0xbd17, 0x88e9, 0xdc30, 0xbb7e, 0x75a2, 0xb27d, 0x1, 0x0);
        gbc.writeMem(0xb27d, { 0xc0 });
        gbc.writeMem(0xbd17, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x88e9);
        EXPECT(gbc.pc(), 0xbd18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb27d), 0xc0);
        EXPECT(gbc.readMem(0xbd17), 0xa6);
        // A6 0158
        gbc.setState(0x9b26, 0x5e83, 0x13c0, 0x1bff, 0xab46, 0x7234, 0x1, 0x0);
        gbc.writeMem(0x7234, { 0x5f });
        gbc.writeMem(0x9b26, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5e83);
        EXPECT(gbc.pc(), 0x9b27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b26), 0xa6);
        // A6 0159
        gbc.setState(0x2459, 0x16f9, 0xf860, 0xd766, 0x6ad2, 0xfb55, 0x0, 0x0);
        gbc.writeMem(0x2459, { 0xa6 });
        gbc.writeMem(0xfb55, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x16f9);
        EXPECT(gbc.pc(), 0x245a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfb55), 0x59);
        // A6 015A
        gbc.setState(0xb618, 0xd4e, 0x2a90, 0xd2bd, 0xc830, 0xdd48, 0x1, 0x0);
        gbc.writeMem(0xb618, { 0xa6 });
        gbc.writeMem(0xdd48, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd4e);
        EXPECT(gbc.pc(), 0xb619);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb618), 0xa6);
        EXPECT(gbc.readMem(0xdd48), 0x9c);
        // A6 015B
        gbc.setState(0x4c58, 0xe4e3, 0xcb30, 0x6109, 0xca02, 0xbb5f, 0x1, 0x0);
        gbc.writeMem(0x4c58, { 0xa6 });
        gbc.writeMem(0xbb5f, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe4e3);
        EXPECT(gbc.pc(), 0x4c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb5f), 0x31);
        // A6 015C
        gbc.setState(0x9a7, 0x5708, 0x56f0, 0xe27c, 0x2453, 0x3850, 0x1, 0x1);
        gbc.writeMem(0x9a7, { 0xa6 });
        gbc.writeMem(0x3850, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5708);
        EXPECT(gbc.pc(), 0x9a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 015D
        gbc.setState(0xb561, 0xc3e6, 0xd060, 0xb1be, 0x1bce, 0xf691, 0x1, 0x0);
        gbc.writeMem(0xb561, { 0xa6 });
        gbc.writeMem(0xf691, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc3e6);
        EXPECT(gbc.pc(), 0xb562);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb561), 0xa6);
        EXPECT(gbc.readMem(0xf691), 0x1f);
        // A6 015E
        gbc.setState(0x1f4b, 0x2fe7, 0x3210, 0x8bae, 0xfb2e, 0xb0bc, 0x1, 0x0);
        gbc.writeMem(0x1f4b, { 0xa6 });
        gbc.writeMem(0xb0bc, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2fe7);
        EXPECT(gbc.pc(), 0x1f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0bc), 0x38);
        // A6 015F
        gbc.setState(0x45ef, 0x2a2e, 0x2810, 0x7dba, 0xd1e8, 0x1da3, 0x0, 0x1);
        gbc.writeMem(0x1da3, { 0x61 });
        gbc.writeMem(0x45ef, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2a2e);
        EXPECT(gbc.pc(), 0x45f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0160
        gbc.setState(0x9597, 0x25ac, 0xd3f0, 0x661e, 0x58e9, 0x9c50, 0x0, 0x0);
        gbc.writeMem(0x9597, { 0xa6 });
        gbc.writeMem(0x9c50, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x25ac);
        EXPECT(gbc.pc(), 0x9598);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9597), 0xa6);
        EXPECT(gbc.readMem(0x9c50), 0x46);
        // A6 0161
        gbc.setState(0xe0aa, 0x7d37, 0xc1c0, 0x6ccf, 0x5df8, 0x8ca0, 0x1, 0x0);
        gbc.writeMem(0x8ca0, { 0xe0 });
        gbc.writeMem(0xe0aa, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7d37);
        EXPECT(gbc.pc(), 0xe0ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ca0), 0xe0);
        EXPECT(gbc.readMem(0xe0aa), 0xa6);
        // A6 0162
        gbc.setState(0xa545, 0xc7ea, 0xd7c0, 0xc8a, 0x1ba6, 0xc06f, 0x0, 0x1);
        gbc.writeMem(0xa545, { 0xa6 });
        gbc.writeMem(0xc06f, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc7ea);
        EXPECT(gbc.pc(), 0xa546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa545), 0xa6);
        EXPECT(gbc.readMem(0xc06f), 0xf1);
        // A6 0163
        gbc.setState(0x25ba, 0x3217, 0xe4d0, 0x9cae, 0x916a, 0x4aec, 0x1, 0x0);
        gbc.writeMem(0x25ba, { 0xa6 });
        gbc.writeMem(0x4aec, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3217);
        EXPECT(gbc.pc(), 0x25bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0164
        gbc.setState(0xc5fd, 0xb6c9, 0xe3a0, 0x322a, 0xeb54, 0x29c5, 0x0, 0x0);
        gbc.writeMem(0x29c5, { 0x41 });
        gbc.writeMem(0xc5fd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb6c9);
        EXPECT(gbc.pc(), 0xc5fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5fd), 0xa6);
        // A6 0165
        gbc.setState(0x73d9, 0xf542, 0x18a0, 0xeafd, 0x8b70, 0xe0a9, 0x1, 0x1);
        gbc.writeMem(0x73d9, { 0xa6 });
        gbc.writeMem(0xe0a9, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xf542);
        EXPECT(gbc.pc(), 0x73da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0a9), 0x74);
        // A6 0166
        gbc.setState(0xa34a, 0x7c5, 0x4a60, 0xf79e, 0xc446, 0x3d94, 0x1, 0x1);
        gbc.writeMem(0x3d94, { 0x46 });
        gbc.writeMem(0xa34a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7c5);
        EXPECT(gbc.pc(), 0xa34b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34a), 0xa6);
        // A6 0167
        gbc.setState(0xe3ed, 0xd626, 0x1a20, 0xf286, 0x2a2a, 0xf793, 0x1, 0x1);
        gbc.writeMem(0xe3ed, { 0xa6 });
        gbc.writeMem(0xf793, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd626);
        EXPECT(gbc.pc(), 0xe3ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3ed), 0xa6);
        EXPECT(gbc.readMem(0xf793), 0xae);
        // A6 0168
        gbc.setState(0x5c8b, 0xbea, 0x18a0, 0xfcfa, 0x4a1c, 0xf32a, 0x0, 0x1);
        gbc.writeMem(0x5c8b, { 0xa6 });
        gbc.writeMem(0xf32a, { 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xbea);
        EXPECT(gbc.pc(), 0x5c8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf32a), 0x9c);
        // A6 0169
        gbc.setState(0x3658, 0xd282, 0xfb30, 0xfa98, 0x436b, 0xfd71, 0x0, 0x0);
        gbc.writeMem(0x3658, { 0xa6 });
        gbc.writeMem(0xfd71, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xd282);
        EXPECT(gbc.pc(), 0x3659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd71), 0x3b);
        // A6 016A
        gbc.setState(0xbff3, 0x813c, 0x5fc0, 0xc1c5, 0xfb8c, 0xec51, 0x0, 0x1);
        gbc.writeMem(0xbff3, { 0xa6 });
        gbc.writeMem(0xec51, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x813c);
        EXPECT(gbc.pc(), 0xbff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff3), 0xa6);
        EXPECT(gbc.readMem(0xec51), 0xd2);
        // A6 016B
        gbc.setState(0xd419, 0xd382, 0x8a60, 0x67f, 0x57b5, 0x186e, 0x1, 0x1);
        gbc.writeMem(0x186e, { 0x28 });
        gbc.writeMem(0xd419, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd382);
        EXPECT(gbc.pc(), 0xd41a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd419), 0xa6);
        // A6 016C
        gbc.setState(0x4954, 0x79e0, 0xb7c0, 0x30b1, 0xa084, 0x1c3f, 0x1, 0x0);
        gbc.writeMem(0x1c3f, { 0x69 });
        gbc.writeMem(0x4954, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x79e0);
        EXPECT(gbc.pc(), 0x4955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 016D
        gbc.setState(0x69a0, 0xe035, 0xe1b0, 0x53d7, 0x3733, 0x2433, 0x0, 0x0);
        gbc.writeMem(0x2433, { 0x27 });
        gbc.writeMem(0x69a0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe035);
        EXPECT(gbc.pc(), 0x69a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 016E
        gbc.setState(0x884e, 0x97f4, 0xc170, 0x32e1, 0x6121, 0xf67b, 0x0, 0x0);
        gbc.writeMem(0x884e, { 0xa6 });
        gbc.writeMem(0xf67b, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x97f4);
        EXPECT(gbc.pc(), 0x884f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884e), 0xa6);
        EXPECT(gbc.readMem(0xf67b), 0xe7);
        // A6 016F
        gbc.setState(0x8db2, 0x803d, 0xab0, 0x31cc, 0xa67a, 0x8dcf, 0x0, 0x0);
        gbc.writeMem(0x8db2, { 0xa6 });
        gbc.writeMem(0x8dcf, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x803d);
        EXPECT(gbc.pc(), 0x8db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8db2), 0xa6);
        EXPECT(gbc.readMem(0x8dcf), 0x64);
        // A6 0170
        gbc.setState(0x26a5, 0x76a2, 0xe790, 0xa26a, 0x71d3, 0xc412, 0x0, 0x1);
        gbc.writeMem(0x26a5, { 0xa6 });
        gbc.writeMem(0xc412, { 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x76a2);
        EXPECT(gbc.pc(), 0x26a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc412), 0xa4);
        // A6 0171
        gbc.setState(0xc4b0, 0xd3f4, 0x430, 0x9395, 0xa2dd, 0x489a, 0x0, 0x1);
        gbc.writeMem(0x489a, { 0x4b });
        gbc.writeMem(0xc4b0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd3f4);
        EXPECT(gbc.pc(), 0xc4b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b0), 0xa6);
        // A6 0172
        gbc.setState(0x39f, 0x340f, 0x3240, 0x10b7, 0xd866, 0x9f7d, 0x0, 0x0);
        gbc.writeMem(0x39f, { 0xa6 });
        gbc.writeMem(0x9f7d, { 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x340f);
        EXPECT(gbc.pc(), 0x3a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f7d), 0x7b);
        // A6 0173
        gbc.setState(0x871a, 0xf1a9, 0x3fa0, 0x30b2, 0xa4e, 0x57be, 0x1, 0x0);
        gbc.writeMem(0x57be, { 0xde });
        gbc.writeMem(0x871a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xf1a9);
        EXPECT(gbc.pc(), 0x871b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x871a), 0xa6);
        // A6 0174
        gbc.setState(0x2b3a, 0x5cbd, 0x8db0, 0xde5d, 0x20ad, 0x571f, 0x1, 0x0);
        gbc.writeMem(0x2b3a, { 0xa6 });
        gbc.writeMem(0x571f, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5cbd);
        EXPECT(gbc.pc(), 0x2b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0175
        gbc.setState(0x690c, 0xa3e2, 0xcc50, 0xec71, 0xccb9, 0x80f9, 0x0, 0x0);
        gbc.writeMem(0x690c, { 0xa6 });
        gbc.writeMem(0x80f9, { 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa3e2);
        EXPECT(gbc.pc(), 0x690d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f9), 0x58);
        // A6 0176
        gbc.setState(0x71bf, 0x141a, 0xb2b0, 0xc7d8, 0x246d, 0xfee0, 0x0, 0x1);
        gbc.writeMem(0x71bf, { 0xa6 });
        gbc.writeMem(0xfee0, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x141a);
        EXPECT(gbc.pc(), 0x71c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfee0), 0xaa);
        // A6 0177
        gbc.setState(0xc1ee, 0x6aaf, 0xa570, 0x98d6, 0x733e, 0xf308, 0x0, 0x1);
        gbc.writeMem(0xc1ee, { 0xa6 });
        gbc.writeMem(0xf308, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6aaf);
        EXPECT(gbc.pc(), 0xc1ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ee), 0xa6);
        EXPECT(gbc.readMem(0xf308), 0x4f);
        // A6 0178
        gbc.setState(0xda7b, 0xcef7, 0x9fc0, 0x5b6a, 0xcb1c, 0x9197, 0x0, 0x1);
        gbc.writeMem(0x9197, { 0xb4 });
        gbc.writeMem(0xda7b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xcef7);
        EXPECT(gbc.pc(), 0xda7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9197), 0xb4);
        EXPECT(gbc.readMem(0xda7b), 0xa6);
        // A6 0179
        gbc.setState(0x42a3, 0x3bd9, 0x4280, 0xee05, 0x8092, 0xda57, 0x0, 0x1);
        gbc.writeMem(0x42a3, { 0xa6 });
        gbc.writeMem(0xda57, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3bd9);
        EXPECT(gbc.pc(), 0x42a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda57), 0xc2);
        // A6 017A
        gbc.setState(0x9c03, 0x40aa, 0x56c0, 0x9518, 0xc413, 0xbe7d, 0x1, 0x1);
        gbc.writeMem(0x9c03, { 0xa6 });
        gbc.writeMem(0xbe7d, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x40aa);
        EXPECT(gbc.pc(), 0x9c04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c03), 0xa6);
        EXPECT(gbc.readMem(0xbe7d), 0x8b);
        // A6 017B
        gbc.setState(0x7e2f, 0x7b36, 0x1640, 0x3da1, 0xc7b4, 0x7715, 0x0, 0x1);
        gbc.writeMem(0x7715, { 0xf2 });
        gbc.writeMem(0x7e2f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7b36);
        EXPECT(gbc.pc(), 0x7e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 017C
        gbc.setState(0xdb19, 0x3408, 0xaa00, 0x96a7, 0x760, 0x6b92, 0x0, 0x0);
        gbc.writeMem(0x6b92, { 0x5a });
        gbc.writeMem(0xdb19, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3408);
        EXPECT(gbc.pc(), 0xdb1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb19), 0xa6);
        // A6 017D
        gbc.setState(0x4587, 0x9cf7, 0x4260, 0x1c14, 0x752f, 0xa892, 0x0, 0x1);
        gbc.writeMem(0x4587, { 0xa6 });
        gbc.writeMem(0xa892, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9cf7);
        EXPECT(gbc.pc(), 0x4588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa892), 0x5);
        // A6 017E
        gbc.setState(0xa5ab, 0x38b, 0xc290, 0x84c9, 0x5ac8, 0xe547, 0x0, 0x1);
        gbc.writeMem(0xa5ab, { 0xa6 });
        gbc.writeMem(0xe547, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x38b);
        EXPECT(gbc.pc(), 0xa5ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ab), 0xa6);
        EXPECT(gbc.readMem(0xe547), 0xb2);
        // A6 017F
        gbc.setState(0x3350, 0xe229, 0xc00, 0xf2d0, 0xa1b, 0x3844, 0x1, 0x0);
        gbc.writeMem(0x3350, { 0xa6 });
        gbc.writeMem(0x3844, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe229);
        EXPECT(gbc.pc(), 0x3351);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0180
        gbc.setState(0x643f, 0x59b6, 0x38e0, 0x88d9, 0xfa6e, 0x59d7, 0x1, 0x1);
        gbc.writeMem(0x59d7, { 0xa6 });
        gbc.writeMem(0x643f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x59b6);
        EXPECT(gbc.pc(), 0x6440);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0181
        gbc.setState(0xde52, 0x860d, 0x6f80, 0x559b, 0x405a, 0xe875, 0x0, 0x1);
        gbc.writeMem(0xde52, { 0xa6 });
        gbc.writeMem(0xe875, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x860d);
        EXPECT(gbc.pc(), 0xde53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde52), 0xa6);
        EXPECT(gbc.readMem(0xe875), 0xb6);
        // A6 0182
        gbc.setState(0xf6d, 0xd423, 0xdc30, 0xffc8, 0xd13f, 0x11ef, 0x0, 0x0);
        gbc.writeMem(0xf6d, { 0xa6 });
        gbc.writeMem(0x11ef, { 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd423);
        EXPECT(gbc.pc(), 0xf6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0183
        gbc.setState(0x40a5, 0xa100, 0x61e0, 0x248c, 0x84bc, 0xcdad, 0x1, 0x0);
        gbc.writeMem(0x40a5, { 0xa6 });
        gbc.writeMem(0xcdad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa100);
        EXPECT(gbc.pc(), 0x40a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdad), 0x4c);
        // A6 0184
        gbc.setState(0x5f99, 0x4fcb, 0xbac0, 0xfab4, 0xf567, 0xd242, 0x0, 0x0);
        gbc.writeMem(0x5f99, { 0xa6 });
        gbc.writeMem(0xd242, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4fcb);
        EXPECT(gbc.pc(), 0x5f9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd242), 0xb2);
        // A6 0185
        gbc.setState(0x8c5, 0x6422, 0xb00, 0x3c0a, 0xd0b, 0xa9ac, 0x1, 0x0);
        gbc.writeMem(0x8c5, { 0xa6 });
        gbc.writeMem(0xa9ac, { 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6422);
        EXPECT(gbc.pc(), 0x8c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ac), 0x8);
        // A6 0186
        gbc.setState(0xaaf5, 0x1536, 0x2520, 0x4058, 0x2ad6, 0x42, 0x0, 0x0);
        gbc.writeMem(0x42, { 0x67 });
        gbc.writeMem(0xaaf5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1536);
        EXPECT(gbc.pc(), 0xaaf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf5), 0xa6);
        // A6 0188
        gbc.setState(0xb184, 0x2330, 0x2390, 0x35bc, 0x2232, 0x2218, 0x1, 0x1);
        gbc.writeMem(0x2218, { 0x8d });
        gbc.writeMem(0xb184, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x2330);
        EXPECT(gbc.pc(), 0xb185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb184), 0xa6);
        // A6 0189
        gbc.setState(0x1a0c, 0x371e, 0x6300, 0x3da4, 0x103e, 0xbb62, 0x1, 0x1);
        gbc.writeMem(0x1a0c, { 0xa6 });
        gbc.writeMem(0xbb62, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x371e);
        EXPECT(gbc.pc(), 0x1a0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb62), 0x2a);
        // A6 018A
        gbc.setState(0x73ae, 0x997, 0xd110, 0xe785, 0x12fa, 0xef14, 0x0, 0x0);
        gbc.writeMem(0x73ae, { 0xa6 });
        gbc.writeMem(0xef14, { 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x997);
        EXPECT(gbc.pc(), 0x73af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef14), 0xf3);
        // A6 018B
        gbc.setState(0x726d, 0xd622, 0x12a0, 0x5c77, 0xaa97, 0xc9df, 0x0, 0x1);
        gbc.writeMem(0x726d, { 0xa6 });
        gbc.writeMem(0xc9df, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd622);
        EXPECT(gbc.pc(), 0x726e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9df), 0xbf);
        // A6 018C
        gbc.setState(0x40bf, 0x1bdb, 0xc0a0, 0xa01f, 0x4db0, 0x2eb1, 0x1, 0x1);
        gbc.writeMem(0x2eb1, { 0x8a });
        gbc.writeMem(0x40bf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1bdb);
        EXPECT(gbc.pc(), 0x40c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 018D
        gbc.setState(0x9914, 0xb587, 0x3270, 0xec78, 0x7f07, 0x1a1a, 0x1, 0x1);
        gbc.writeMem(0x1a1a, { 0x53 });
        gbc.writeMem(0x9914, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb587);
        EXPECT(gbc.pc(), 0x9915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9914), 0xa6);
        // A6 018E
        gbc.setState(0x5741, 0x2e8c, 0x1b40, 0xe761, 0x752e, 0x6c2a, 0x0, 0x0);
        gbc.writeMem(0x5741, { 0xa6 });
        gbc.writeMem(0x6c2a, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2e8c);
        EXPECT(gbc.pc(), 0x5742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 018F
        gbc.setState(0x4ef1, 0x9718, 0x6220, 0xeb27, 0xf4c5, 0xf4be, 0x1, 0x0);
        gbc.writeMem(0x4ef1, { 0xa6 });
        gbc.writeMem(0xf4be, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9718);
        EXPECT(gbc.pc(), 0x4ef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf4be), 0x85);
        // A6 0190
        gbc.setState(0x2959, 0x2886, 0xc180, 0xd96c, 0xe59e, 0xf045, 0x0, 0x1);
        gbc.writeMem(0x2959, { 0xa6 });
        gbc.writeMem(0xf045, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2886);
        EXPECT(gbc.pc(), 0x295a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf045), 0xdd);
        // A6 0191
        gbc.setState(0x322f, 0x8c0f, 0xa440, 0x52d4, 0x33ef, 0x2aa1, 0x0, 0x0);
        gbc.writeMem(0x2aa1, { 0x25 });
        gbc.writeMem(0x322f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8c0f);
        EXPECT(gbc.pc(), 0x3230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0192
        gbc.setState(0x9a06, 0xb408, 0xdbf0, 0x8b3b, 0x5b5b, 0x2e1a, 0x0, 0x0);
        gbc.writeMem(0x2e1a, { 0xc });
        gbc.writeMem(0x9a06, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb408);
        EXPECT(gbc.pc(), 0x9a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a06), 0xa6);
        // A6 0193
        gbc.setState(0xa4c7, 0x36e2, 0xa480, 0xe620, 0x660b, 0x82b5, 0x1, 0x1);
        gbc.writeMem(0x82b5, { 0x57 });
        gbc.writeMem(0xa4c7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x36e2);
        EXPECT(gbc.pc(), 0xa4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b5), 0x57);
        EXPECT(gbc.readMem(0xa4c7), 0xa6);
        // A6 0195
        gbc.setState(0x4502, 0x8c20, 0x3230, 0x2121, 0xd8a2, 0xf0a2, 0x0, 0x0);
        gbc.writeMem(0x4502, { 0xa6 });
        gbc.writeMem(0xf0a2, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8c20);
        EXPECT(gbc.pc(), 0x4503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf0a2), 0x18);
        // A6 0196
        gbc.setState(0xc448, 0x1be0, 0x6a60, 0xcf39, 0x3329, 0x633e, 0x0, 0x0);
        gbc.writeMem(0x633e, { 0xcc });
        gbc.writeMem(0xc448, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1be0);
        EXPECT(gbc.pc(), 0xc449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc448), 0xa6);
        // A6 0197
        gbc.setState(0x9296, 0xbad5, 0x8fc0, 0x587d, 0xd62a, 0x20e9, 0x1, 0x1);
        gbc.writeMem(0x20e9, { 0xff });
        gbc.writeMem(0x9296, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbad5);
        EXPECT(gbc.pc(), 0x9297);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9296), 0xa6);
        // A6 0198
        gbc.setState(0x5f15, 0xcf39, 0xef40, 0x7de9, 0xeb83, 0x9e64, 0x1, 0x1);
        gbc.writeMem(0x5f15, { 0xa6 });
        gbc.writeMem(0x9e64, { 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcf39);
        EXPECT(gbc.pc(), 0x5f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e64), 0x8b);
        // A6 019A
        gbc.setState(0xd40f, 0x2578, 0xb400, 0x67a5, 0xa54c, 0x9319, 0x0, 0x0);
        gbc.writeMem(0x9319, { 0xc9 });
        gbc.writeMem(0xd40f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x2578);
        EXPECT(gbc.pc(), 0xd410);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9319), 0xc9);
        EXPECT(gbc.readMem(0xd40f), 0xa6);
        // A6 019B
        gbc.setState(0x853b, 0x3ce4, 0x4a50, 0x1d1a, 0xc6d, 0x3ff, 0x0, 0x0);
        gbc.writeMem(0x3ff, { 0x77 });
        gbc.writeMem(0x853b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3ce4);
        EXPECT(gbc.pc(), 0x853c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x853b), 0xa6);
        // A6 019C
        gbc.setState(0xdfb8, 0x4288, 0x9820, 0x2ae9, 0xf219, 0xe1eb, 0x0, 0x1);
        gbc.writeMem(0xdfb8, { 0xa6 });
        gbc.writeMem(0xe1eb, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4288);
        EXPECT(gbc.pc(), 0xdfb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfb8), 0xa6);
        EXPECT(gbc.readMem(0xe1eb), 0xfe);
        // A6 019D
        gbc.setState(0xd763, 0x99ec, 0xfaa0, 0x5d23, 0xd8b0, 0x2b35, 0x1, 0x0);
        gbc.writeMem(0x2b35, { 0x2a });
        gbc.writeMem(0xd763, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x99ec);
        EXPECT(gbc.pc(), 0xd764);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd763), 0xa6);
        // A6 019E
        gbc.setState(0x6e97, 0xea90, 0x3870, 0x7cb4, 0x56dc, 0x49bb, 0x0, 0x0);
        gbc.writeMem(0x49bb, { 0x1a });
        gbc.writeMem(0x6e97, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xea90);
        EXPECT(gbc.pc(), 0x6e98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 019F
        gbc.setState(0x3f45, 0x330e, 0x6ea0, 0x35ca, 0x5aba, 0x2264, 0x0, 0x0);
        gbc.writeMem(0x2264, { 0xe7 });
        gbc.writeMem(0x3f45, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x330e);
        EXPECT(gbc.pc(), 0x3f46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01A0
        gbc.setState(0x6105, 0x63f8, 0x9470, 0xf066, 0xc8b9, 0x901e, 0x1, 0x1);
        gbc.writeMem(0x6105, { 0xa6 });
        gbc.writeMem(0x901e, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x63f8);
        EXPECT(gbc.pc(), 0x6106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x901e), 0x14);
        // A6 01A1
        gbc.setState(0xe5c3, 0x4913, 0x10a0, 0xcbda, 0x46d6, 0xb740, 0x1, 0x0);
        gbc.writeMem(0xb740, { 0xe9 });
        gbc.writeMem(0xe5c3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4913);
        EXPECT(gbc.pc(), 0xe5c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb740), 0xe9);
        EXPECT(gbc.readMem(0xe5c3), 0xa6);
        // A6 01A2
        gbc.setState(0x74e6, 0x9f18, 0xb2b0, 0x7cdd, 0x4105, 0xc6c0, 0x1, 0x1);
        gbc.writeMem(0x74e6, { 0xa6 });
        gbc.writeMem(0xc6c0, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9f18);
        EXPECT(gbc.pc(), 0x74e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6c0), 0x69);
        // A6 01A3
        gbc.setState(0x903f, 0x8bed, 0x1250, 0x40f7, 0x756c, 0xf446, 0x1, 0x1);
        gbc.writeMem(0x903f, { 0xa6 });
        gbc.writeMem(0xf446, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8bed);
        EXPECT(gbc.pc(), 0x9040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903f), 0xa6);
        EXPECT(gbc.readMem(0xf446), 0x7d);
        // A6 01A4
        gbc.setState(0x75a3, 0xda2a, 0x6540, 0xa4fd, 0xce3b, 0x2788, 0x1, 0x1);
        gbc.writeMem(0x2788, { 0x7 });
        gbc.writeMem(0x75a3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xda2a);
        EXPECT(gbc.pc(), 0x75a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01A5
        gbc.setState(0x53f2, 0x8ebb, 0xc970, 0x5142, 0xe2e5, 0x1a2e, 0x1, 0x0);
        gbc.writeMem(0x1a2e, { 0x9e });
        gbc.writeMem(0x53f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x8ebb);
        EXPECT(gbc.pc(), 0x53f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01A6
        gbc.setState(0x886d, 0xfacf, 0x2ae0, 0x9100, 0xb555, 0x5f15, 0x1, 0x1);
        gbc.writeMem(0x5f15, { 0x53 });
        gbc.writeMem(0x886d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xfacf);
        EXPECT(gbc.pc(), 0x886e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x886d), 0xa6);
        // A6 01A7
        gbc.setState(0xbc6, 0x7e3e, 0xaef0, 0x6534, 0xa135, 0x507d, 0x1, 0x1);
        gbc.writeMem(0xbc6, { 0xa6 });
        gbc.writeMem(0x507d, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7e3e);
        EXPECT(gbc.pc(), 0xbc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01A8
        gbc.setState(0xc871, 0x5fcc, 0x1560, 0xc7e2, 0xd7ef, 0x39fc, 0x0, 0x0);
        gbc.writeMem(0x39fc, { 0x8b });
        gbc.writeMem(0xc871, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5fcc);
        EXPECT(gbc.pc(), 0xc872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc871), 0xa6);
        // A6 01AA
        gbc.setState(0x8ec3, 0xe9e4, 0x2ec0, 0x184e, 0x2a92, 0x477a, 0x0, 0x1);
        gbc.writeMem(0x477a, { 0x2 });
        gbc.writeMem(0x8ec3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe9e4);
        EXPECT(gbc.pc(), 0x8ec4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ec3), 0xa6);
        // A6 01AB
        gbc.setState(0x4f9e, 0xfd32, 0xe3f0, 0xea63, 0x2d57, 0x67ca, 0x0, 0x0);
        gbc.writeMem(0x4f9e, { 0xa6 });
        gbc.writeMem(0x67ca, { 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfd32);
        EXPECT(gbc.pc(), 0x4f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01AC
        gbc.setState(0x6f1c, 0x4715, 0x5c10, 0xa6b5, 0x2286, 0xa0b7, 0x1, 0x1);
        gbc.writeMem(0x6f1c, { 0xa6 });
        gbc.writeMem(0xa0b7, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x4715);
        EXPECT(gbc.pc(), 0x6f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b7), 0x57);
        // A6 01AD
        gbc.setState(0x1ce5, 0xd528, 0x4fe0, 0xc675, 0x6f32, 0xe00d, 0x1, 0x1);
        gbc.writeMem(0x1ce5, { 0xa6 });
        gbc.writeMem(0xe00d, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd528);
        EXPECT(gbc.pc(), 0x1ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00d), 0xb9);
        // A6 01AE
        gbc.setState(0x156c, 0xb223, 0xd820, 0xfcff, 0xf4, 0xe223, 0x0, 0x0);
        gbc.writeMem(0x156c, { 0xa6 });
        gbc.writeMem(0xe223, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb223);
        EXPECT(gbc.pc(), 0x156d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe223), 0xa2);
        // A6 01AF
        gbc.setState(0xe602, 0x8eaf, 0x9e50, 0x203f, 0x749a, 0x114d, 0x0, 0x1);
        gbc.writeMem(0x114d, { 0x49 });
        gbc.writeMem(0xe602, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8eaf);
        EXPECT(gbc.pc(), 0xe603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe602), 0xa6);
        // A6 01B0
        gbc.setState(0xb6e, 0xb311, 0xe220, 0xcd72, 0x317d, 0xec7c, 0x0, 0x1);
        gbc.writeMem(0xb6e, { 0xa6 });
        gbc.writeMem(0xec7c, { 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb311);
        EXPECT(gbc.pc(), 0xb6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec7c), 0xc0);
        // A6 01B1
        gbc.setState(0x81eb, 0xa708, 0x7870, 0xb6b9, 0x3a0, 0xabb7, 0x0, 0x1);
        gbc.writeMem(0x81eb, { 0xa6 });
        gbc.writeMem(0xabb7, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa708);
        EXPECT(gbc.pc(), 0x81ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81eb), 0xa6);
        EXPECT(gbc.readMem(0xabb7), 0x79);
        // A6 01B2
        gbc.setState(0x8145, 0x228b, 0x8dd0, 0x191d, 0xd0e2, 0x4ed0, 0x0, 0x0);
        gbc.writeMem(0x4ed0, { 0x25 });
        gbc.writeMem(0x8145, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x228b);
        EXPECT(gbc.pc(), 0x8146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8145), 0xa6);
        // A6 01B3
        gbc.setState(0x8c4e, 0x5f28, 0xc140, 0x5994, 0xd596, 0xc72c, 0x1, 0x0);
        gbc.writeMem(0x8c4e, { 0xa6 });
        gbc.writeMem(0xc72c, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5f28);
        EXPECT(gbc.pc(), 0x8c4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c4e), 0xa6);
        EXPECT(gbc.readMem(0xc72c), 0x23);
        // A6 01B5
        gbc.setState(0x41d0, 0x1ad6, 0x62f0, 0x7672, 0x246f, 0x7ba1, 0x1, 0x1);
        gbc.writeMem(0x41d0, { 0xa6 });
        gbc.writeMem(0x7ba1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1ad6);
        EXPECT(gbc.pc(), 0x41d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01B6
        gbc.setState(0xac41, 0x113f, 0xc750, 0x5f55, 0xee2e, 0xf945, 0x1, 0x1);
        gbc.writeMem(0xac41, { 0xa6 });
        gbc.writeMem(0xf945, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x113f);
        EXPECT(gbc.pc(), 0xac42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac41), 0xa6);
        EXPECT(gbc.readMem(0xf945), 0xde);
        // A6 01B7
        gbc.setState(0x46eb, 0xee88, 0x8050, 0x6cc, 0x3c2e, 0xfaa4, 0x0, 0x1);
        gbc.writeMem(0x46eb, { 0xa6 });
        gbc.writeMem(0xfaa4, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xee88);
        EXPECT(gbc.pc(), 0x46ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaa4), 0x9);
        // A6 01B8
        gbc.setState(0xd045, 0x9da8, 0xa920, 0x5f93, 0x3980, 0x8116, 0x0, 0x1);
        gbc.writeMem(0x8116, { 0xe0 });
        gbc.writeMem(0xd045, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9da8);
        EXPECT(gbc.pc(), 0xd046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8116), 0xe0);
        EXPECT(gbc.readMem(0xd045), 0xa6);
        // A6 01B9
        gbc.setState(0x18bf, 0x71fb, 0x79e0, 0x81a1, 0x8608, 0x6060, 0x0, 0x1);
        gbc.writeMem(0x18bf, { 0xa6 });
        gbc.writeMem(0x6060, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x71fb);
        EXPECT(gbc.pc(), 0x18c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01BA
        gbc.setState(0x4b9c, 0x981f, 0x560, 0x4286, 0x3b26, 0x2bfd, 0x1, 0x0);
        gbc.writeMem(0x2bfd, { 0x4e });
        gbc.writeMem(0x4b9c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x981f);
        EXPECT(gbc.pc(), 0x4b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01BB
        gbc.setState(0x1b6f, 0x3655, 0x24b0, 0xa1f5, 0xa96, 0x8594, 0x0, 0x1);
        gbc.writeMem(0x1b6f, { 0xa6 });
        gbc.writeMem(0x8594, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3655);
        EXPECT(gbc.pc(), 0x1b70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8594), 0x64);
        // A6 01BC
        gbc.setState(0x70f8, 0x844a, 0x4a60, 0x3aad, 0xa063, 0x9a22, 0x1, 0x0);
        gbc.writeMem(0x70f8, { 0xa6 });
        gbc.writeMem(0x9a22, { 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x844a);
        EXPECT(gbc.pc(), 0x70f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a22), 0x2c);
        // A6 01BD
        gbc.setState(0x2a5, 0xcc66, 0x13d0, 0x970e, 0x9f38, 0x1826, 0x1, 0x1);
        gbc.writeMem(0x2a5, { 0xa6 });
        gbc.writeMem(0x1826, { 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xcc66);
        EXPECT(gbc.pc(), 0x2a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01BE
        gbc.setState(0x171f, 0xdc33, 0xfdf0, 0x744f, 0x3628, 0x6b52, 0x1, 0x0);
        gbc.writeMem(0x171f, { 0xa6 });
        gbc.writeMem(0x6b52, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xdc33);
        EXPECT(gbc.pc(), 0x1720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01BF
        gbc.setState(0xd6a8, 0x451f, 0x4e00, 0x96ee, 0xcdd4, 0x81ad, 0x0, 0x0);
        gbc.writeMem(0x81ad, { 0xe1 });
        gbc.writeMem(0xd6a8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x451f);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ad), 0xe1);
        EXPECT(gbc.readMem(0xd6a8), 0xa6);
        // A6 01C0
        gbc.setState(0x8b31, 0x9554, 0xe230, 0x59a, 0x3b82, 0x80cb, 0x1, 0x1);
        gbc.writeMem(0x80cb, { 0x58 });
        gbc.writeMem(0x8b31, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9554);
        EXPECT(gbc.pc(), 0x8b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80cb), 0x58);
        EXPECT(gbc.readMem(0x8b31), 0xa6);
        // A6 01C1
        gbc.setState(0x5cf2, 0x6d73, 0x4f50, 0x88b6, 0xea27, 0xc547, 0x1, 0x1);
        gbc.writeMem(0x5cf2, { 0xa6 });
        gbc.writeMem(0xc547, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6d73);
        EXPECT(gbc.pc(), 0x5cf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc547), 0xe1);
        // A6 01C2
        gbc.setState(0xac20, 0xcff6, 0x9370, 0x2707, 0x97ca, 0xbfa, 0x1, 0x0);
        gbc.writeMem(0xbfa, { 0xcb });
        gbc.writeMem(0xac20, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xcff6);
        EXPECT(gbc.pc(), 0xac21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac20), 0xa6);
        // A6 01C3
        gbc.setState(0x3746, 0x5828, 0x4b10, 0x6c7c, 0x495c, 0xf72f, 0x1, 0x0);
        gbc.writeMem(0x3746, { 0xa6 });
        gbc.writeMem(0xf72f, { 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5828);
        EXPECT(gbc.pc(), 0x3747);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf72f), 0x4a);
        // A6 01C4
        gbc.setState(0x1173, 0x965b, 0x8e80, 0xa785, 0xed0e, 0x750b, 0x1, 0x0);
        gbc.writeMem(0x1173, { 0xa6 });
        gbc.writeMem(0x750b, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x965b);
        EXPECT(gbc.pc(), 0x1174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01C5
        gbc.setState(0x3477, 0x2a98, 0xfb30, 0x10c2, 0x72e5, 0xbbde, 0x1, 0x0);
        gbc.writeMem(0x3477, { 0xa6 });
        gbc.writeMem(0xbbde, { 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2a98);
        EXPECT(gbc.pc(), 0x3478);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbde), 0x9f);
        // A6 01C6
        gbc.setState(0x507f, 0xa98c, 0x8e30, 0xae58, 0x8b4b, 0x1c0d, 0x1, 0x0);
        gbc.writeMem(0x1c0d, { 0x8b });
        gbc.writeMem(0x507f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa98c);
        EXPECT(gbc.pc(), 0x5080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01C7
        gbc.setState(0xdd6f, 0x8d9f, 0xb360, 0xc56f, 0x2815, 0xd0b7, 0x0, 0x1);
        gbc.writeMem(0xd0b7, { 0x53 });
        gbc.writeMem(0xdd6f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8d9f);
        EXPECT(gbc.pc(), 0xdd70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b7), 0x53);
        EXPECT(gbc.readMem(0xdd6f), 0xa6);
        // A6 01C9
        gbc.setState(0x9fd1, 0xd500, 0x6430, 0x661e, 0x5105, 0xcac5, 0x0, 0x0);
        gbc.writeMem(0x9fd1, { 0xa6 });
        gbc.writeMem(0xcac5, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd500);
        EXPECT(gbc.pc(), 0x9fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd1), 0xa6);
        EXPECT(gbc.readMem(0xcac5), 0x9b);
        // A6 01CA
        gbc.setState(0xe2db, 0xe87a, 0x1390, 0x6e3f, 0x865c, 0xa45c, 0x0, 0x1);
        gbc.writeMem(0xa45c, { 0xdf });
        gbc.writeMem(0xe2db, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe87a);
        EXPECT(gbc.pc(), 0xe2dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45c), 0xdf);
        EXPECT(gbc.readMem(0xe2db), 0xa6);
        // A6 01CB
        gbc.setState(0x8408, 0x11e7, 0x9d50, 0x3030, 0x3922, 0x651a, 0x1, 0x1);
        gbc.writeMem(0x651a, { 0xe0 });
        gbc.writeMem(0x8408, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x11e7);
        EXPECT(gbc.pc(), 0x8409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8408), 0xa6);
        // A6 01CC
        gbc.setState(0xa929, 0xed6e, 0x4e30, 0x265e, 0x18bd, 0x974b, 0x0, 0x0);
        gbc.writeMem(0x974b, { 0xb });
        gbc.writeMem(0xa929, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xed6e);
        EXPECT(gbc.pc(), 0xa92a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x974b), 0xb);
        EXPECT(gbc.readMem(0xa929), 0xa6);
        // A6 01CD
        gbc.setState(0x2391, 0xaae1, 0xc3b0, 0x9960, 0xc7ce, 0xdc94, 0x1, 0x1);
        gbc.writeMem(0x2391, { 0xa6 });
        gbc.writeMem(0xdc94, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xaae1);
        EXPECT(gbc.pc(), 0x2392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc94), 0x3e);
        // A6 01CE
        gbc.setState(0xbd3, 0x9567, 0x6590, 0x5f75, 0x153f, 0x3dc1, 0x1, 0x0);
        gbc.writeMem(0xbd3, { 0xa6 });
        gbc.writeMem(0x3dc1, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9567);
        EXPECT(gbc.pc(), 0xbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01CF
        gbc.setState(0x9873, 0xd460, 0xaf00, 0xb986, 0xbde2, 0xcef, 0x1, 0x0);
        gbc.writeMem(0xcef, { 0xa5 });
        gbc.writeMem(0x9873, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd460);
        EXPECT(gbc.pc(), 0x9874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9873), 0xa6);
        // A6 01D0
        gbc.setState(0xdbe7, 0xebb4, 0xc160, 0x2396, 0x3239, 0xcf9e, 0x1, 0x0);
        gbc.writeMem(0xcf9e, { 0x60 });
        gbc.writeMem(0xdbe7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xebb4);
        EXPECT(gbc.pc(), 0xdbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf9e), 0x60);
        EXPECT(gbc.readMem(0xdbe7), 0xa6);
        // A6 01D1
        gbc.setState(0x7bb2, 0xb2aa, 0x1b0, 0xfa0b, 0x761f, 0xf051, 0x1, 0x1);
        gbc.writeMem(0x7bb2, { 0xa6 });
        gbc.writeMem(0xf051, { 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xb2aa);
        EXPECT(gbc.pc(), 0x7bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf051), 0x1d);
        // A6 01D2
        gbc.setState(0x187c, 0x7b3a, 0x2500, 0x20ef, 0xca6d, 0xd485, 0x0, 0x0);
        gbc.writeMem(0x187c, { 0xa6 });
        gbc.writeMem(0xd485, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7b3a);
        EXPECT(gbc.pc(), 0x187d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd485), 0x89);
        // A6 01D3
        gbc.setState(0xcc1d, 0x6e45, 0x2460, 0x32bf, 0x1363, 0xdec8, 0x0, 0x1);
        gbc.writeMem(0xcc1d, { 0xa6 });
        gbc.writeMem(0xdec8, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6e45);
        EXPECT(gbc.pc(), 0xcc1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc1d), 0xa6);
        EXPECT(gbc.readMem(0xdec8), 0xfb);
        // A6 01D4
        gbc.setState(0xde34, 0x8510, 0x4d0, 0x2450, 0x4fad, 0x63e9, 0x1, 0x0);
        gbc.writeMem(0x63e9, { 0x1b });
        gbc.writeMem(0xde34, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8510);
        EXPECT(gbc.pc(), 0xde35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde34), 0xa6);
        // A6 01D6
        gbc.setState(0x168, 0xd25e, 0x1270, 0x3e6a, 0x53f5, 0xda74, 0x0, 0x1);
        gbc.writeMem(0x168, { 0xa6 });
        gbc.writeMem(0xda74, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xd25e);
        EXPECT(gbc.pc(), 0x169);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda74), 0x2);
        // A6 01D7
        gbc.setState(0xa0bd, 0xcd06, 0xe6e0, 0x29f7, 0xeea6, 0xf0e9, 0x1, 0x1);
        gbc.writeMem(0xa0bd, { 0xa6 });
        gbc.writeMem(0xf0e9, { 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcd06);
        EXPECT(gbc.pc(), 0xa0be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0bd), 0xa6);
        EXPECT(gbc.readMem(0xf0e9), 0x6d);
        // A6 01D8
        gbc.setState(0xa30b, 0x854d, 0x9340, 0x8001, 0xaa1f, 0x72c2, 0x1, 0x1);
        gbc.writeMem(0x72c2, { 0x3f });
        gbc.writeMem(0xa30b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x854d);
        EXPECT(gbc.pc(), 0xa30c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30b), 0xa6);
        // A6 01D9
        gbc.setState(0x567b, 0x6caf, 0x19d0, 0x8052, 0x9584, 0x7745, 0x0, 0x1);
        gbc.writeMem(0x567b, { 0xa6 });
        gbc.writeMem(0x7745, { 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6caf);
        EXPECT(gbc.pc(), 0x567c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01DA
        gbc.setState(0x16ba, 0xf295, 0xef10, 0x8d3e, 0x1cab, 0xb887, 0x0, 0x1);
        gbc.writeMem(0x16ba, { 0xa6 });
        gbc.writeMem(0xb887, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xf295);
        EXPECT(gbc.pc(), 0x16bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb887), 0x57);
        // A6 01DB
        gbc.setState(0xb954, 0x12ff, 0x6270, 0xaaf1, 0xc574, 0xb675, 0x1, 0x1);
        gbc.writeMem(0xb675, { 0x70 });
        gbc.writeMem(0xb954, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x12ff);
        EXPECT(gbc.pc(), 0xb955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb675), 0x70);
        EXPECT(gbc.readMem(0xb954), 0xa6);
        // A6 01DC
        gbc.setState(0x77bb, 0x718c, 0x9f40, 0x58f2, 0x35fa, 0x20d9, 0x1, 0x1);
        gbc.writeMem(0x20d9, { 0xef });
        gbc.writeMem(0x77bb, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x718c);
        EXPECT(gbc.pc(), 0x77bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01DD
        gbc.setState(0x24d2, 0xaaa6, 0xc0d0, 0xe635, 0x5323, 0x738c, 0x0, 0x0);
        gbc.writeMem(0x24d2, { 0xa6 });
        gbc.writeMem(0x738c, { 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xaaa6);
        EXPECT(gbc.pc(), 0x24d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01DE
        gbc.setState(0x6546, 0xe787, 0xe310, 0x727a, 0x133f, 0xe7f9, 0x0, 0x1);
        gbc.writeMem(0x6546, { 0xa6 });
        gbc.writeMem(0xe7f9, { 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe787);
        EXPECT(gbc.pc(), 0x6547);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f9), 0xa7);
        // A6 01DF
        gbc.setState(0x144d, 0xbaed, 0xe000, 0x82c3, 0x9728, 0xd02f, 0x1, 0x1);
        gbc.writeMem(0x144d, { 0xa6 });
        gbc.writeMem(0xd02f, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbaed);
        EXPECT(gbc.pc(), 0x144e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02f), 0x46);
        // A6 01E1
        gbc.setState(0x44f1, 0xed68, 0xa080, 0x7304, 0xddb7, 0x66ad, 0x0, 0x0);
        gbc.writeMem(0x44f1, { 0xa6 });
        gbc.writeMem(0x66ad, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xed68);
        EXPECT(gbc.pc(), 0x44f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01E2
        gbc.setState(0xd07c, 0xe2ed, 0xe510, 0x405b, 0xa87f, 0x238b, 0x1, 0x0);
        gbc.writeMem(0x238b, { 0x6b });
        gbc.writeMem(0xd07c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe2ed);
        EXPECT(gbc.pc(), 0xd07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07c), 0xa6);
        // A6 01E3
        gbc.setState(0x994, 0x9dff, 0x60b0, 0x1d83, 0xf7df, 0xc587, 0x1, 0x0);
        gbc.writeMem(0x994, { 0xa6 });
        gbc.writeMem(0xc587, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9dff);
        EXPECT(gbc.pc(), 0x995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc587), 0x5a);
        // A6 01E4
        gbc.setState(0x1f8, 0x9e07, 0x61b0, 0x7e75, 0x7772, 0x68c0, 0x1, 0x1);
        gbc.writeMem(0x1f8, { 0xa6 });
        gbc.writeMem(0x68c0, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9e07);
        EXPECT(gbc.pc(), 0x1f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01E5
        gbc.setState(0x4e4e, 0x6b8a, 0x85c0, 0x778, 0xb1bb, 0xf8dc, 0x0, 0x0);
        gbc.writeMem(0x4e4e, { 0xa6 });
        gbc.writeMem(0xf8dc, { 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x6b8a);
        EXPECT(gbc.pc(), 0x4e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8dc), 0xd9);
        // A6 01E6
        gbc.setState(0x7f95, 0x5f72, 0x63f0, 0x2424, 0xc9d1, 0x9357, 0x0, 0x1);
        gbc.writeMem(0x7f95, { 0xa6 });
        gbc.writeMem(0x9357, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5f72);
        EXPECT(gbc.pc(), 0x7f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9357), 0x52);
        // A6 01E8
        gbc.setState(0xa2b2, 0x5b99, 0x3600, 0xbfa9, 0x2cdd, 0xaf0c, 0x0, 0x1);
        gbc.writeMem(0xa2b2, { 0xa6 });
        gbc.writeMem(0xaf0c, { 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5b99);
        EXPECT(gbc.pc(), 0xa2b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b2), 0xa6);
        EXPECT(gbc.readMem(0xaf0c), 0x29);
        // A6 01E9
        gbc.setState(0x29ff, 0x5cd5, 0x7e50, 0xf47d, 0x8566, 0x7ba4, 0x1, 0x1);
        gbc.writeMem(0x29ff, { 0xa6 });
        gbc.writeMem(0x7ba4, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5cd5);
        EXPECT(gbc.pc(), 0x2a00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01EA
        gbc.setState(0x505, 0xa5c3, 0x1eb0, 0x5f05, 0x8a4a, 0xc63b, 0x0, 0x1);
        gbc.writeMem(0x505, { 0xa6 });
        gbc.writeMem(0xc63b, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa5c3);
        EXPECT(gbc.pc(), 0x506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63b), 0x42);
        // A6 01EB
        gbc.setState(0x2799, 0x7955, 0x3d0, 0x5cc5, 0xc945, 0x3973, 0x0, 0x0);
        gbc.writeMem(0x2799, { 0xa6 });
        gbc.writeMem(0x3973, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7955);
        EXPECT(gbc.pc(), 0x279a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01EC
        gbc.setState(0x8ff2, 0x6bbb, 0x1860, 0xdbdc, 0xbcb3, 0x413c, 0x0, 0x1);
        gbc.writeMem(0x413c, { 0xde });
        gbc.writeMem(0x8ff2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6bbb);
        EXPECT(gbc.pc(), 0x8ff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ff2), 0xa6);
        // A6 01ED
        gbc.setState(0xd8d, 0xdbe5, 0xc970, 0x8d04, 0x7fe, 0x27c, 0x0, 0x0);
        gbc.writeMem(0x27c, { 0xc7 });
        gbc.writeMem(0xd8d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdbe5);
        EXPECT(gbc.pc(), 0xd8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01EE
        gbc.setState(0x2a6e, 0x2d4, 0xe310, 0x3363, 0x4861, 0x5b33, 0x0, 0x1);
        gbc.writeMem(0x2a6e, { 0xa6 });
        gbc.writeMem(0x5b33, { 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2d4);
        EXPECT(gbc.pc(), 0x2a6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01EF
        gbc.setState(0xca28, 0x7515, 0xeed0, 0x1336, 0xe3ec, 0x91a7, 0x1, 0x1);
        gbc.writeMem(0x91a7, { 0x34 });
        gbc.writeMem(0xca28, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7515);
        EXPECT(gbc.pc(), 0xca29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a7), 0x34);
        EXPECT(gbc.readMem(0xca28), 0xa6);
        // A6 01F0
        gbc.setState(0x37ec, 0xb2c9, 0x1310, 0x378a, 0xf5da, 0x580a, 0x0, 0x1);
        gbc.writeMem(0x37ec, { 0xa6 });
        gbc.writeMem(0x580a, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb2c9);
        EXPECT(gbc.pc(), 0x37ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01F1
        gbc.setState(0xfdd, 0x23a, 0x4180, 0x8d9a, 0x6ea7, 0x925c, 0x0, 0x1);
        gbc.writeMem(0xfdd, { 0xa6 });
        gbc.writeMem(0x925c, { 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x23a);
        EXPECT(gbc.pc(), 0xfde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x925c), 0x0);
        // A6 01F2
        gbc.setState(0x5766, 0xd7ed, 0x42e0, 0x95e2, 0xfc69, 0x3148, 0x0, 0x1);
        gbc.writeMem(0x3148, { 0x29 });
        gbc.writeMem(0x5766, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd7ed);
        EXPECT(gbc.pc(), 0x5767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01F3
        gbc.setState(0xbf80, 0x9ea7, 0xaa50, 0xde45, 0x81e, 0xf490, 0x0, 0x0);
        gbc.writeMem(0xbf80, { 0xa6 });
        gbc.writeMem(0xf490, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9ea7);
        EXPECT(gbc.pc(), 0xbf81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf80), 0xa6);
        EXPECT(gbc.readMem(0xf490), 0x42);
        // A6 01F4
        gbc.setState(0x3a2e, 0x7f78, 0x28c0, 0x535f, 0x80a7, 0xbb09, 0x0, 0x1);
        gbc.writeMem(0x3a2e, { 0xa6 });
        gbc.writeMem(0xbb09, { 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7f78);
        EXPECT(gbc.pc(), 0x3a2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb09), 0x89);
        // A6 01F5
        gbc.setState(0x1e37, 0x993a, 0xe200, 0x54e1, 0xe374, 0x82ec, 0x0, 0x0);
        gbc.writeMem(0x1e37, { 0xa6 });
        gbc.writeMem(0x82ec, { 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x993a);
        EXPECT(gbc.pc(), 0x1e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82ec), 0x69);
        // A6 01F6
        gbc.setState(0xb072, 0xac73, 0x62c0, 0xbfad, 0x5096, 0x1546, 0x0, 0x1);
        gbc.writeMem(0x1546, { 0xc2 });
        gbc.writeMem(0xb072, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xac73);
        EXPECT(gbc.pc(), 0xb073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb072), 0xa6);
        // A6 01F7
        gbc.setState(0xb32e, 0xe4a2, 0xdff0, 0x53c1, 0x88c8, 0x9071, 0x0, 0x0);
        gbc.writeMem(0x9071, { 0x6 });
        gbc.writeMem(0xb32e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe4a2);
        EXPECT(gbc.pc(), 0xb32f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9071), 0x6);
        EXPECT(gbc.readMem(0xb32e), 0xa6);
        // A6 01F8
        gbc.setState(0xb4b5, 0xab5b, 0xc7a0, 0x3fdf, 0x57c5, 0xde89, 0x1, 0x0);
        gbc.writeMem(0xb4b5, { 0xa6 });
        gbc.writeMem(0xde89, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xab5b);
        EXPECT(gbc.pc(), 0xb4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b5), 0xa6);
        EXPECT(gbc.readMem(0xde89), 0x44);
        // A6 01F9
        gbc.setState(0x7acc, 0x253c, 0xf9f0, 0xb426, 0x7fcf, 0x48e7, 0x1, 0x0);
        gbc.writeMem(0x48e7, { 0xac });
        gbc.writeMem(0x7acc, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x253c);
        EXPECT(gbc.pc(), 0x7acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 01FB
        gbc.setState(0x8c9b, 0x3293, 0x5130, 0x2f0c, 0x3343, 0x1ac0, 0x1, 0x0);
        gbc.writeMem(0x1ac0, { 0x94 });
        gbc.writeMem(0x8c9b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3293);
        EXPECT(gbc.pc(), 0x8c9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9b), 0xa6);
        // A6 01FD
        gbc.setState(0xec4f, 0x85f8, 0x9890, 0xf26f, 0x22b7, 0xcbaa, 0x1, 0x1);
        gbc.writeMem(0xcbaa, { 0x15 });
        gbc.writeMem(0xec4f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x85f8);
        EXPECT(gbc.pc(), 0xec50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbaa), 0x15);
        EXPECT(gbc.readMem(0xec4f), 0xa6);
        // A6 01FE
        gbc.setState(0x33ee, 0xde65, 0xe520, 0x3fa1, 0x7997, 0xd270, 0x0, 0x0);
        gbc.writeMem(0x33ee, { 0xa6 });
        gbc.writeMem(0xd270, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xde65);
        EXPECT(gbc.pc(), 0x33ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd270), 0x70);
        // A6 01FF
        gbc.setState(0x603c, 0xaa97, 0x9a00, 0x334d, 0x8438, 0xf944, 0x0, 0x0);
        gbc.writeMem(0x603c, { 0xa6 });
        gbc.writeMem(0xf944, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa97);
        EXPECT(gbc.pc(), 0x603d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf944), 0xb5);
        // A6 0200
        gbc.setState(0x5c01, 0xf952, 0x74d0, 0x73f2, 0xf82a, 0xcf23, 0x1, 0x0);
        gbc.writeMem(0x5c01, { 0xa6 });
        gbc.writeMem(0xcf23, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf952);
        EXPECT(gbc.pc(), 0x5c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf23), 0x18);
        // A6 0201
        gbc.setState(0x6074, 0x89c8, 0x9940, 0xa8c9, 0x73b2, 0x3058, 0x0, 0x0);
        gbc.writeMem(0x3058, { 0x52 });
        gbc.writeMem(0x6074, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x89c8);
        EXPECT(gbc.pc(), 0x6075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0202
        gbc.setState(0xdd42, 0x63a7, 0x4d00, 0x5194, 0xd290, 0xc47a, 0x0, 0x1);
        gbc.writeMem(0xc47a, { 0xba });
        gbc.writeMem(0xdd42, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x63a7);
        EXPECT(gbc.pc(), 0xdd43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc47a), 0xba);
        EXPECT(gbc.readMem(0xdd42), 0xa6);
        // A6 0203
        gbc.setState(0x2cf1, 0xe85c, 0x4480, 0x53dc, 0xa24f, 0x9d6b, 0x0, 0x0);
        gbc.writeMem(0x2cf1, { 0xa6 });
        gbc.writeMem(0x9d6b, { 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe85c);
        EXPECT(gbc.pc(), 0x2cf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d6b), 0x9d);
        // A6 0204
        gbc.setState(0xef6e, 0x8fbf, 0x87d0, 0x1da6, 0x1dfc, 0x194, 0x1, 0x1);
        gbc.writeMem(0x194, { 0x69 });
        gbc.writeMem(0xef6e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8fbf);
        EXPECT(gbc.pc(), 0xef6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef6e), 0xa6);
        // A6 0205
        gbc.setState(0xaafe, 0x10bf, 0x5350, 0x42f, 0xd30a, 0xd610, 0x1, 0x1);
        gbc.writeMem(0xaafe, { 0xa6 });
        gbc.writeMem(0xd610, { 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x10bf);
        EXPECT(gbc.pc(), 0xaaff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafe), 0xa6);
        EXPECT(gbc.readMem(0xd610), 0x5f);
        // A6 0206
        gbc.setState(0x3813, 0x8fb1, 0xb010, 0xe80e, 0x3e49, 0x60a, 0x1, 0x1);
        gbc.writeMem(0x60a, { 0xf0 });
        gbc.writeMem(0x3813, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8fb1);
        EXPECT(gbc.pc(), 0x3814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0207
        gbc.setState(0x57dc, 0x1ee8, 0x23f0, 0x7cf9, 0x1a0a, 0xebb8, 0x0, 0x1);
        gbc.writeMem(0x57dc, { 0xa6 });
        gbc.writeMem(0xebb8, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1ee8);
        EXPECT(gbc.pc(), 0x57dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebb8), 0x75);
        // A6 0208
        gbc.setState(0x9ca5, 0x800b, 0x4cb0, 0xdf32, 0x10ad, 0x6d1, 0x0, 0x0);
        gbc.writeMem(0x6d1, { 0xba });
        gbc.writeMem(0x9ca5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x800b);
        EXPECT(gbc.pc(), 0x9ca6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca5), 0xa6);
        // A6 020A
        gbc.setState(0x2a7f, 0x36bd, 0x22d0, 0x7a88, 0x238, 0x4886, 0x0, 0x0);
        gbc.writeMem(0x2a7f, { 0xa6 });
        gbc.writeMem(0x4886, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x36bd);
        EXPECT(gbc.pc(), 0x2a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 020B
        gbc.setState(0x8cec, 0xf787, 0x3cd0, 0x4aab, 0xd58b, 0x7859, 0x1, 0x1);
        gbc.writeMem(0x7859, { 0x69 });
        gbc.writeMem(0x8cec, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf787);
        EXPECT(gbc.pc(), 0x8ced);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cec), 0xa6);
        // A6 020D
        gbc.setState(0x78ff, 0x92c3, 0x9e10, 0xe8bf, 0xa56a, 0x9f6, 0x0, 0x0);
        gbc.writeMem(0x9f6, { 0xc9 });
        gbc.writeMem(0x78ff, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x92c3);
        EXPECT(gbc.pc(), 0x7900);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 020E
        gbc.setState(0x71be, 0x7f64, 0x4560, 0x524, 0xb173, 0xa60c, 0x0, 0x1);
        gbc.writeMem(0x71be, { 0xa6 });
        gbc.writeMem(0xa60c, { 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x7f64);
        EXPECT(gbc.pc(), 0x71bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa60c), 0x9a);
        // A6 020F
        gbc.setState(0xd519, 0x1057, 0xbdc0, 0x6233, 0x1102, 0x6d79, 0x1, 0x1);
        gbc.writeMem(0x6d79, { 0xff });
        gbc.writeMem(0xd519, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1057);
        EXPECT(gbc.pc(), 0xd51a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd519), 0xa6);
        // A6 0210
        gbc.setState(0xae3e, 0x65d4, 0x4a30, 0x2ae0, 0xf945, 0xd00c, 0x0, 0x0);
        gbc.writeMem(0xae3e, { 0xa6 });
        gbc.writeMem(0xd00c, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x65d4);
        EXPECT(gbc.pc(), 0xae3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3e), 0xa6);
        EXPECT(gbc.readMem(0xd00c), 0x57);
        // A6 0211
        gbc.setState(0x2456, 0xbebe, 0xc0, 0xd76d, 0x5378, 0x1399, 0x1, 0x0);
        gbc.writeMem(0x1399, { 0xf4 });
        gbc.writeMem(0x2456, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xbebe);
        EXPECT(gbc.pc(), 0x2457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0212
        gbc.setState(0xbc61, 0x3ea, 0xec50, 0x75ee, 0xbf5b, 0xeb52, 0x0, 0x1);
        gbc.writeMem(0xbc61, { 0xa6 });
        gbc.writeMem(0xeb52, { 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3ea);
        EXPECT(gbc.pc(), 0xbc62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc61), 0xa6);
        EXPECT(gbc.readMem(0xeb52), 0x36);
        // A6 0213
        gbc.setState(0xe025, 0x5031, 0x9000, 0x9629, 0xdd41, 0x8dbd, 0x0, 0x0);
        gbc.writeMem(0x8dbd, { 0xd0 });
        gbc.writeMem(0xe025, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5031);
        EXPECT(gbc.pc(), 0xe026);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dbd), 0xd0);
        EXPECT(gbc.readMem(0xe025), 0xa6);
        // A6 0214
        gbc.setState(0x25cf, 0x6904, 0x8f70, 0x55d5, 0x4fc9, 0xda3, 0x1, 0x1);
        gbc.writeMem(0xda3, { 0x6a });
        gbc.writeMem(0x25cf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6904);
        EXPECT(gbc.pc(), 0x25d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0215
        gbc.setState(0x4f9d, 0xb9a2, 0x98a0, 0x19e2, 0xc662, 0xf46d, 0x1, 0x1);
        gbc.writeMem(0x4f9d, { 0xa6 });
        gbc.writeMem(0xf46d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xb9a2);
        EXPECT(gbc.pc(), 0x4f9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf46d), 0x4d);
        // A6 0216
        gbc.setState(0x5154, 0xb71d, 0x8430, 0xd3e1, 0x20ab, 0xfcb, 0x1, 0x1);
        gbc.writeMem(0xfcb, { 0x69 });
        gbc.writeMem(0x5154, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb71d);
        EXPECT(gbc.pc(), 0x5155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0217
        gbc.setState(0x198c, 0x8ed3, 0x5fe0, 0xfae1, 0x54f6, 0x5ac8, 0x1, 0x1);
        gbc.writeMem(0x198c, { 0xa6 });
        gbc.writeMem(0x5ac8, { 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8ed3);
        EXPECT(gbc.pc(), 0x198d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0218
        gbc.setState(0x1593, 0x3dd6, 0xde30, 0x8b4b, 0x5c10, 0x2d1c, 0x0, 0x1);
        gbc.writeMem(0x1593, { 0xa6 });
        gbc.writeMem(0x2d1c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3dd6);
        EXPECT(gbc.pc(), 0x1594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0219
        gbc.setState(0xbca8, 0x88d1, 0x8cb0, 0x426f, 0x649d, 0x3271, 0x1, 0x1);
        gbc.writeMem(0x3271, { 0xcb });
        gbc.writeMem(0xbca8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x88d1);
        EXPECT(gbc.pc(), 0xbca9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbca8), 0xa6);
        // A6 021A
        gbc.setState(0x79ea, 0x7173, 0xc530, 0xedb9, 0x5122, 0x7385, 0x1, 0x0);
        gbc.writeMem(0x7385, { 0x8 });
        gbc.writeMem(0x79ea, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7173);
        EXPECT(gbc.pc(), 0x79eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 021B
        gbc.setState(0x2109, 0xfb2a, 0x2400, 0xb8de, 0xecb0, 0xed9b, 0x1, 0x0);
        gbc.writeMem(0x2109, { 0xa6 });
        gbc.writeMem(0xed9b, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xfb2a);
        EXPECT(gbc.pc(), 0x210a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9b), 0x40);
        // A6 021C
        gbc.setState(0xa1f, 0x5d8d, 0x310, 0xc326, 0xe028, 0x9ce6, 0x0, 0x0);
        gbc.writeMem(0xa1f, { 0xa6 });
        gbc.writeMem(0x9ce6, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5d8d);
        EXPECT(gbc.pc(), 0xa20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce6), 0xfe);
        // A6 021D
        gbc.setState(0xa137, 0x3838, 0x4890, 0x9cb4, 0x910d, 0x18db, 0x1, 0x0);
        gbc.writeMem(0x18db, { 0x6d });
        gbc.writeMem(0xa137, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3838);
        EXPECT(gbc.pc(), 0xa138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa137), 0xa6);
        // A6 021E
        gbc.setState(0x77ed, 0xeeb2, 0x5510, 0xd8f2, 0xe11, 0xa853, 0x0, 0x0);
        gbc.writeMem(0x77ed, { 0xa6 });
        gbc.writeMem(0xa853, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xeeb2);
        EXPECT(gbc.pc(), 0x77ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa853), 0x40);
        // A6 021F
        gbc.setState(0x7cdd, 0xc575, 0xf400, 0x9a56, 0xcd9, 0x102e, 0x0, 0x1);
        gbc.writeMem(0x102e, { 0xbb });
        gbc.writeMem(0x7cdd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc575);
        EXPECT(gbc.pc(), 0x7cde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0220
        gbc.setState(0x77b0, 0x6431, 0x3160, 0xa52d, 0x842f, 0x5664, 0x1, 0x1);
        gbc.writeMem(0x5664, { 0x7e });
        gbc.writeMem(0x77b0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6431);
        EXPECT(gbc.pc(), 0x77b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0221
        gbc.setState(0xd871, 0x90c7, 0xd240, 0xfd62, 0x534a, 0xa8e1, 0x1, 0x0);
        gbc.writeMem(0xa8e1, { 0xce });
        gbc.writeMem(0xd871, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x90c7);
        EXPECT(gbc.pc(), 0xd872);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8e1), 0xce);
        EXPECT(gbc.readMem(0xd871), 0xa6);
        // A6 0222
        gbc.setState(0x61a4, 0x553f, 0x4340, 0xf6ca, 0xa713, 0x202, 0x1, 0x1);
        gbc.writeMem(0x202, { 0x88 });
        gbc.writeMem(0x61a4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x553f);
        EXPECT(gbc.pc(), 0x61a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0223
        gbc.setState(0x92d7, 0x3829, 0xd860, 0x29d6, 0x3c6d, 0x9a7a, 0x1, 0x0);
        gbc.writeMem(0x92d7, { 0xa6 });
        gbc.writeMem(0x9a7a, { 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3829);
        EXPECT(gbc.pc(), 0x92d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d7), 0xa6);
        EXPECT(gbc.readMem(0x9a7a), 0xae);
        // A6 0224
        gbc.setState(0x2987, 0x6dc, 0x1130, 0x71a7, 0x6f3e, 0x2b9f, 0x0, 0x0);
        gbc.writeMem(0x2987, { 0xa6 });
        gbc.writeMem(0x2b9f, { 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6dc);
        EXPECT(gbc.pc(), 0x2988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0226
        gbc.setState(0xab42, 0xf73c, 0x6000, 0x4465, 0x461e, 0x9acd, 0x1, 0x0);
        gbc.writeMem(0x9acd, { 0xd });
        gbc.writeMem(0xab42, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf73c);
        EXPECT(gbc.pc(), 0xab43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9acd), 0xd);
        EXPECT(gbc.readMem(0xab42), 0xa6);
        // A6 0227
        gbc.setState(0xa487, 0x16aa, 0xec0, 0xf28, 0xbfd8, 0xfac8, 0x1, 0x1);
        gbc.writeMem(0xa487, { 0xa6 });
        gbc.writeMem(0xfac8, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x16aa);
        EXPECT(gbc.pc(), 0xa488);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa487), 0xa6);
        EXPECT(gbc.readMem(0xfac8), 0xb);
        // A6 0228
        gbc.setState(0x7d7a, 0xfd01, 0xf350, 0x3d09, 0xa682, 0x394d, 0x0, 0x0);
        gbc.writeMem(0x394d, { 0xf9 });
        gbc.writeMem(0x7d7a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfd01);
        EXPECT(gbc.pc(), 0x7d7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0229
        gbc.setState(0x7e51, 0xb764, 0x640, 0xd583, 0xa208, 0x9d23, 0x0, 0x1);
        gbc.writeMem(0x7e51, { 0xa6 });
        gbc.writeMem(0x9d23, { 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb764);
        EXPECT(gbc.pc(), 0x7e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d23), 0x85);
        // A6 022A
        gbc.setState(0xedf8, 0x8a89, 0xb3d0, 0x7298, 0x3bb5, 0xd4d2, 0x0, 0x1);
        gbc.writeMem(0xd4d2, { 0xc1 });
        gbc.writeMem(0xedf8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8a89);
        EXPECT(gbc.pc(), 0xedf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d2), 0xc1);
        EXPECT(gbc.readMem(0xedf8), 0xa6);
        // A6 022B
        gbc.setState(0x56f2, 0x7b16, 0x8dc0, 0x3b78, 0x2873, 0xd617, 0x0, 0x1);
        gbc.writeMem(0x56f2, { 0xa6 });
        gbc.writeMem(0xd617, { 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7b16);
        EXPECT(gbc.pc(), 0x56f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd617), 0x22);
        // A6 022C
        gbc.setState(0xd322, 0x9df5, 0x9f40, 0x1a30, 0xa87b, 0xe8e6, 0x1, 0x1);
        gbc.writeMem(0xd322, { 0xa6 });
        gbc.writeMem(0xe8e6, { 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9df5);
        EXPECT(gbc.pc(), 0xd323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd322), 0xa6);
        EXPECT(gbc.readMem(0xe8e6), 0xcd);
        // A6 022D
        gbc.setState(0x382a, 0x5534, 0xc990, 0xa475, 0xbbdc, 0xbec4, 0x0, 0x1);
        gbc.writeMem(0x382a, { 0xa6 });
        gbc.writeMem(0xbec4, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x5534);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec4), 0x34);
        // A6 022E
        gbc.setState(0x68dd, 0xb24c, 0x6f00, 0x8d22, 0x3add, 0xa319, 0x1, 0x0);
        gbc.writeMem(0x68dd, { 0xa6 });
        gbc.writeMem(0xa319, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xb24c);
        EXPECT(gbc.pc(), 0x68de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa319), 0x7c);
        // A6 022F
        gbc.setState(0xa211, 0x9a63, 0x7b60, 0x9aa7, 0x8604, 0xc23b, 0x0, 0x1);
        gbc.writeMem(0xa211, { 0xa6 });
        gbc.writeMem(0xc23b, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x9a63);
        EXPECT(gbc.pc(), 0xa212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa211), 0xa6);
        EXPECT(gbc.readMem(0xc23b), 0x95);
        // A6 0231
        gbc.setState(0x7149, 0x766e, 0xd1b0, 0x8055, 0x9034, 0xb617, 0x1, 0x0);
        gbc.writeMem(0x7149, { 0xa6 });
        gbc.writeMem(0xb617, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x766e);
        EXPECT(gbc.pc(), 0x714a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb617), 0x61);
        // A6 0232
        gbc.setState(0x7add, 0x3c8b, 0xddf0, 0x8b04, 0x796d, 0x82af, 0x0, 0x0);
        gbc.writeMem(0x7add, { 0xa6 });
        gbc.writeMem(0x82af, { 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3c8b);
        EXPECT(gbc.pc(), 0x7ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82af), 0x3e);
        // A6 0233
        gbc.setState(0x1c84, 0xb8c8, 0x1030, 0x24dd, 0xbcc6, 0xc85, 0x1, 0x1);
        gbc.writeMem(0xc85, { 0x2f });
        gbc.writeMem(0x1c84, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb8c8);
        EXPECT(gbc.pc(), 0x1c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0234
        gbc.setState(0xa4fe, 0x8f55, 0x8da0, 0x3972, 0xc333, 0x48d7, 0x1, 0x0);
        gbc.writeMem(0x48d7, { 0xdd });
        gbc.writeMem(0xa4fe, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8f55);
        EXPECT(gbc.pc(), 0xa4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4fe), 0xa6);
        // A6 0235
        gbc.setState(0xde42, 0x34c2, 0xda40, 0xaf6c, 0x62f3, 0x8bfa, 0x1, 0x0);
        gbc.writeMem(0x8bfa, { 0x23 });
        gbc.writeMem(0xde42, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x34c2);
        EXPECT(gbc.pc(), 0xde43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bfa), 0x23);
        EXPECT(gbc.readMem(0xde42), 0xa6);
        // A6 0236
        gbc.setState(0x3814, 0x6835, 0xc920, 0x9576, 0xcad2, 0x72a, 0x1, 0x1);
        gbc.writeMem(0x72a, { 0x54 });
        gbc.writeMem(0x3814, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6835);
        EXPECT(gbc.pc(), 0x3815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0237
        gbc.setState(0x138b, 0x9d51, 0x2fb0, 0xcfae, 0x20fd, 0xde75, 0x1, 0x0);
        gbc.writeMem(0x138b, { 0xa6 });
        gbc.writeMem(0xde75, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9d51);
        EXPECT(gbc.pc(), 0x138c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde75), 0x42);
        // A6 0238
        gbc.setState(0x75ef, 0x8a6a, 0x69b0, 0x7f4e, 0x9c77, 0xebe7, 0x0, 0x1);
        gbc.writeMem(0x75ef, { 0xa6 });
        gbc.writeMem(0xebe7, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8a6a);
        EXPECT(gbc.pc(), 0x75f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebe7), 0x81);
        // A6 0239
        gbc.setState(0x3df2, 0xb81a, 0xdbe0, 0x7e2f, 0x887b, 0x2720, 0x0, 0x1);
        gbc.writeMem(0x2720, { 0xd6 });
        gbc.writeMem(0x3df2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb81a);
        EXPECT(gbc.pc(), 0x3df3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 023A
        gbc.setState(0xa492, 0x76df, 0x9e00, 0x662c, 0x9e48, 0xf0b7, 0x0, 0x0);
        gbc.writeMem(0xa492, { 0xa6 });
        gbc.writeMem(0xf0b7, { 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x76df);
        EXPECT(gbc.pc(), 0xa493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa492), 0xa6);
        EXPECT(gbc.readMem(0xf0b7), 0xaa);
        // A6 023B
        gbc.setState(0x4337, 0x6dfe, 0xb610, 0x7e61, 0x4266, 0xfd7c, 0x1, 0x1);
        gbc.writeMem(0x4337, { 0xa6 });
        gbc.writeMem(0xfd7c, { 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x6dfe);
        EXPECT(gbc.pc(), 0x4338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd7c), 0x90);
        // A6 023C
        gbc.setState(0xbdd8, 0x76db, 0x5760, 0x5578, 0x4856, 0xc746, 0x1, 0x1);
        gbc.writeMem(0xbdd8, { 0xa6 });
        gbc.writeMem(0xc746, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x76db);
        EXPECT(gbc.pc(), 0xbdd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdd8), 0xa6);
        EXPECT(gbc.readMem(0xc746), 0xb);
        // A6 023D
        gbc.setState(0x55ac, 0x8130, 0xc660, 0x68ea, 0xd52e, 0x9602, 0x0, 0x0);
        gbc.writeMem(0x55ac, { 0xa6 });
        gbc.writeMem(0x9602, { 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x8130);
        EXPECT(gbc.pc(), 0x55ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9602), 0x8a);
        // A6 023E
        gbc.setState(0x52ec, 0x8727, 0x5f0, 0xe390, 0x2403, 0xc040, 0x0, 0x0);
        gbc.writeMem(0x52ec, { 0xa6 });
        gbc.writeMem(0xc040, { 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x8727);
        EXPECT(gbc.pc(), 0x52ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc040), 0xb9);
        // A6 023F
        gbc.setState(0xe4a8, 0x3a0f, 0x57d0, 0xa2c5, 0x2510, 0xd7d7, 0x1, 0x0);
        gbc.writeMem(0xd7d7, { 0xc0 });
        gbc.writeMem(0xe4a8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3a0f);
        EXPECT(gbc.pc(), 0xe4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d7), 0xc0);
        EXPECT(gbc.readMem(0xe4a8), 0xa6);
        // A6 0240
        gbc.setState(0x5b85, 0x18ea, 0xb5e0, 0xd0df, 0xa025, 0x780e, 0x0, 0x1);
        gbc.writeMem(0x5b85, { 0xa6 });
        gbc.writeMem(0x780e, { 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x18ea);
        EXPECT(gbc.pc(), 0x5b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0241
        gbc.setState(0x85d5, 0xfd4c, 0x2350, 0xf65c, 0xdc57, 0xfeb1, 0x0, 0x0);
        gbc.writeMem(0x85d5, { 0xa6 });
        gbc.writeMem(0xfeb1, { 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfd4c);
        EXPECT(gbc.pc(), 0x85d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85d5), 0xa6);
        EXPECT(gbc.readMem(0xfeb1), 0x3d);
        // A6 0242
        gbc.setState(0xb3ed, 0x7990, 0x6940, 0x3de6, 0x1bbd, 0x391b, 0x1, 0x1);
        gbc.writeMem(0x391b, { 0x76 });
        gbc.writeMem(0xb3ed, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x7990);
        EXPECT(gbc.pc(), 0xb3ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ed), 0xa6);
        // A6 0243
        gbc.setState(0x41c9, 0x4c90, 0x16f0, 0xedb9, 0x4166, 0x679, 0x0, 0x0);
        gbc.writeMem(0x679, { 0xc6 });
        gbc.writeMem(0x41c9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x4c90);
        EXPECT(gbc.pc(), 0x41ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0245
        gbc.setState(0xbc7f, 0x95bc, 0x71d0, 0x33d3, 0x8153, 0x9f07, 0x1, 0x0);
        gbc.writeMem(0x9f07, { 0x21 });
        gbc.writeMem(0xbc7f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x95bc);
        EXPECT(gbc.pc(), 0xbc80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f07), 0x21);
        EXPECT(gbc.readMem(0xbc7f), 0xa6);
        // A6 0246
        gbc.setState(0x4e48, 0x22db, 0xa5c0, 0x61c8, 0x4843, 0x5f4e, 0x0, 0x0);
        gbc.writeMem(0x4e48, { 0xa6 });
        gbc.writeMem(0x5f4e, { 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x22db);
        EXPECT(gbc.pc(), 0x4e49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0248
        gbc.setState(0xa584, 0xfb1f, 0x4220, 0x49aa, 0x2a9a, 0xb35, 0x0, 0x1);
        gbc.writeMem(0xb35, { 0xb3 });
        gbc.writeMem(0xa584, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfb1f);
        EXPECT(gbc.pc(), 0xa585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa584), 0xa6);
        // A6 0249
        gbc.setState(0x2f4a, 0x557f, 0xf880, 0x18ca, 0x2282, 0x66, 0x1, 0x0);
        gbc.writeMem(0x66, { 0xfc });
        gbc.writeMem(0x2f4a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x557f);
        EXPECT(gbc.pc(), 0x2f4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 024A
        gbc.setState(0xc0ca, 0x7af5, 0x5b00, 0x6157, 0xef58, 0x58bf, 0x0, 0x1);
        gbc.writeMem(0x58bf, { 0xd7 });
        gbc.writeMem(0xc0ca, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x7af5);
        EXPECT(gbc.pc(), 0xc0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ca), 0xa6);
        // A6 024C
        gbc.setState(0xbf8c, 0xeefc, 0x940, 0x728b, 0x48cb, 0x5770, 0x1, 0x0);
        gbc.writeMem(0x5770, { 0xff });
        gbc.writeMem(0xbf8c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xeefc);
        EXPECT(gbc.pc(), 0xbf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8c), 0xa6);
        // A6 024D
        gbc.setState(0xae62, 0x703, 0x4b90, 0xe388, 0x2b3b, 0x4410, 0x0, 0x1);
        gbc.writeMem(0x4410, { 0x1e });
        gbc.writeMem(0xae62, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x703);
        EXPECT(gbc.pc(), 0xae63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae62), 0xa6);
        // A6 024E
        gbc.setState(0x6bcd, 0x60d3, 0x92d0, 0xb21a, 0x99aa, 0x6aad, 0x1, 0x0);
        gbc.writeMem(0x6aad, { 0xb4 });
        gbc.writeMem(0x6bcd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x60d3);
        EXPECT(gbc.pc(), 0x6bce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 024F
        gbc.setState(0xecac, 0xe135, 0xa9a0, 0xb0ec, 0x468d, 0xa2b0, 0x1, 0x0);
        gbc.writeMem(0xa2b0, { 0xb1 });
        gbc.writeMem(0xecac, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe135);
        EXPECT(gbc.pc(), 0xecad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b0), 0xb1);
        EXPECT(gbc.readMem(0xecac), 0xa6);
        // A6 0250
        gbc.setState(0x5416, 0xe1cf, 0x4a00, 0x1b8c, 0x72f5, 0x8bf2, 0x0, 0x0);
        gbc.writeMem(0x5416, { 0xa6 });
        gbc.writeMem(0x8bf2, { 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe1cf);
        EXPECT(gbc.pc(), 0x5417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf2), 0x34);
        // A6 0251
        gbc.setState(0xc034, 0x7308, 0x760, 0xdd23, 0x893e, 0x64f3, 0x0, 0x0);
        gbc.writeMem(0x64f3, { 0x53 });
        gbc.writeMem(0xc034, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7308);
        EXPECT(gbc.pc(), 0xc035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc034), 0xa6);
        // A6 0252
        gbc.setState(0xd32b, 0xc7ca, 0x1290, 0xafa0, 0xf5f0, 0x3437, 0x0, 0x0);
        gbc.writeMem(0x3437, { 0x71 });
        gbc.writeMem(0xd32b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc7ca);
        EXPECT(gbc.pc(), 0xd32c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32b), 0xa6);
        // A6 0253
        gbc.setState(0xa718, 0xdb93, 0xdaa0, 0x57d1, 0x96b7, 0x5bbf, 0x1, 0x0);
        gbc.writeMem(0x5bbf, { 0x3a });
        gbc.writeMem(0xa718, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdb93);
        EXPECT(gbc.pc(), 0xa719);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa718), 0xa6);
        // A6 0254
        gbc.setState(0x623, 0x991f, 0x6d60, 0xa5a5, 0xbadc, 0x8299, 0x1, 0x0);
        gbc.writeMem(0x623, { 0xa6 });
        gbc.writeMem(0x8299, { 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x991f);
        EXPECT(gbc.pc(), 0x624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8299), 0xc4);
        // A6 0255
        gbc.setState(0xe179, 0x45c5, 0xd5c0, 0xa282, 0xf1af, 0x1775, 0x1, 0x0);
        gbc.writeMem(0x1775, { 0x4c });
        gbc.writeMem(0xe179, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x45c5);
        EXPECT(gbc.pc(), 0xe17a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe179), 0xa6);
        // A6 0256
        gbc.setState(0x20ea, 0xf13b, 0x4ac0, 0xe75d, 0x9b9c, 0x5aa5, 0x0, 0x1);
        gbc.writeMem(0x20ea, { 0xa6 });
        gbc.writeMem(0x5aa5, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf13b);
        EXPECT(gbc.pc(), 0x20eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0257
        gbc.setState(0x87a7, 0x739f, 0x3a30, 0x3337, 0x286e, 0xc1b3, 0x1, 0x0);
        gbc.writeMem(0x87a7, { 0xa6 });
        gbc.writeMem(0xc1b3, { 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x739f);
        EXPECT(gbc.pc(), 0x87a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87a7), 0xa6);
        EXPECT(gbc.readMem(0xc1b3), 0x31);
        // A6 0258
        gbc.setState(0x769c, 0xece2, 0x390, 0xe05e, 0xffb2, 0x6587, 0x1, 0x1);
        gbc.writeMem(0x6587, { 0x16 });
        gbc.writeMem(0x769c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xece2);
        EXPECT(gbc.pc(), 0x769d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0259
        gbc.setState(0x7a60, 0xd681, 0xb950, 0x757d, 0x31d6, 0xb76f, 0x0, 0x1);
        gbc.writeMem(0x7a60, { 0xa6 });
        gbc.writeMem(0xb76f, { 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd681);
        EXPECT(gbc.pc(), 0x7a61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb76f), 0x5c);
        // A6 025A
        gbc.setState(0xbe9c, 0x8f75, 0x1280, 0x2c3c, 0x9f8c, 0xb271, 0x1, 0x1);
        gbc.writeMem(0xb271, { 0xcd });
        gbc.writeMem(0xbe9c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8f75);
        EXPECT(gbc.pc(), 0xbe9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb271), 0xcd);
        EXPECT(gbc.readMem(0xbe9c), 0xa6);
        // A6 025B
        gbc.setState(0xaeaf, 0x7749, 0xf520, 0x37e8, 0x4697, 0x6696, 0x1, 0x0);
        gbc.writeMem(0x6696, { 0xda });
        gbc.writeMem(0xaeaf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7749);
        EXPECT(gbc.pc(), 0xaeb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeaf), 0xa6);
        // A6 025C
        gbc.setState(0xb45a, 0x3626, 0x58c0, 0x9645, 0x2e2, 0xd696, 0x0, 0x0);
        gbc.writeMem(0xb45a, { 0xa6 });
        gbc.writeMem(0xd696, { 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3626);
        EXPECT(gbc.pc(), 0xb45b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45a), 0xa6);
        EXPECT(gbc.readMem(0xd696), 0x6f);
        // A6 025D
        gbc.setState(0x2f91, 0xb599, 0x1ce0, 0x9c9b, 0x95fb, 0xefdd, 0x1, 0x0);
        gbc.writeMem(0x2f91, { 0xa6 });
        gbc.writeMem(0xefdd, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb599);
        EXPECT(gbc.pc(), 0x2f92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefdd), 0x33);
        // A6 025E
        gbc.setState(0x1217, 0x481d, 0x3fa0, 0x3b23, 0xc9f4, 0x3dba, 0x1, 0x1);
        gbc.writeMem(0x1217, { 0xa6 });
        gbc.writeMem(0x3dba, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x481d);
        EXPECT(gbc.pc(), 0x1218);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 025F
        gbc.setState(0x9ae4, 0xc91e, 0xdd60, 0xb959, 0x74bf, 0x246d, 0x0, 0x0);
        gbc.writeMem(0x246d, { 0xab });
        gbc.writeMem(0x9ae4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc91e);
        EXPECT(gbc.pc(), 0x9ae5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ae4), 0xa6);
        // A6 0260
        gbc.setState(0xaff8, 0x4018, 0x6d00, 0x4891, 0x244d, 0x397b, 0x0, 0x0);
        gbc.writeMem(0x397b, { 0x8a });
        gbc.writeMem(0xaff8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4018);
        EXPECT(gbc.pc(), 0xaff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaff8), 0xa6);
        // A6 0261
        gbc.setState(0x6cff, 0x646b, 0xc0d0, 0xe02a, 0x35a5, 0x18c8, 0x1, 0x0);
        gbc.writeMem(0x18c8, { 0xed });
        gbc.writeMem(0x6cff, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x646b);
        EXPECT(gbc.pc(), 0x6d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0262
        gbc.setState(0xdfec, 0x8dc7, 0x7dc0, 0xd3f3, 0x8193, 0xe4c5, 0x0, 0x0);
        gbc.writeMem(0xdfec, { 0xa6 });
        gbc.writeMem(0xe4c5, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8dc7);
        EXPECT(gbc.pc(), 0xdfed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfec), 0xa6);
        EXPECT(gbc.readMem(0xe4c5), 0x37);
        // A6 0263
        gbc.setState(0xe179, 0x1805, 0xbce0, 0x7ccf, 0x543a, 0x9eaf, 0x1, 0x0);
        gbc.writeMem(0x9eaf, { 0xc9 });
        gbc.writeMem(0xe179, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1805);
        EXPECT(gbc.pc(), 0xe17a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eaf), 0xc9);
        EXPECT(gbc.readMem(0xe179), 0xa6);
        // A6 0264
        gbc.setState(0x43ec, 0xa841, 0x9e80, 0xca1e, 0xa191, 0x5bcc, 0x1, 0x0);
        gbc.writeMem(0x43ec, { 0xa6 });
        gbc.writeMem(0x5bcc, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa841);
        EXPECT(gbc.pc(), 0x43ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0265
        gbc.setState(0xa3f3, 0x278b, 0xa3d0, 0x707b, 0x6486, 0x5312, 0x1, 0x0);
        gbc.writeMem(0x5312, { 0xbe });
        gbc.writeMem(0xa3f3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x278b);
        EXPECT(gbc.pc(), 0xa3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3f3), 0xa6);
        // A6 0266
        gbc.setState(0x7211, 0xe27e, 0x3d20, 0xa21b, 0x347, 0x2ff7, 0x1, 0x1);
        gbc.writeMem(0x2ff7, { 0xc0 });
        gbc.writeMem(0x7211, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe27e);
        EXPECT(gbc.pc(), 0x7212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0267
        gbc.setState(0x893c, 0xd298, 0x2c40, 0xe851, 0x4929, 0xe212, 0x1, 0x1);
        gbc.writeMem(0x893c, { 0xa6 });
        gbc.writeMem(0xe212, { 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xd298);
        EXPECT(gbc.pc(), 0x893d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x893c), 0xa6);
        EXPECT(gbc.readMem(0xe212), 0xc7);
        // A6 0268
        gbc.setState(0xd66f, 0x599a, 0xdfb0, 0x27b5, 0xef56, 0x8ecb, 0x1, 0x1);
        gbc.writeMem(0x8ecb, { 0x7a });
        gbc.writeMem(0xd66f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x599a);
        EXPECT(gbc.pc(), 0xd670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ecb), 0x7a);
        EXPECT(gbc.readMem(0xd66f), 0xa6);
        // A6 0269
        gbc.setState(0xcfd8, 0x1d06, 0xb390, 0x24a7, 0x7f89, 0xbe3, 0x1, 0x1);
        gbc.writeMem(0xbe3, { 0x20 });
        gbc.writeMem(0xcfd8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x1d06);
        EXPECT(gbc.pc(), 0xcfd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd8), 0xa6);
        // A6 026A
        gbc.setState(0xdfa9, 0x44c7, 0xccd0, 0x1cec, 0x6357, 0x935c, 0x1, 0x0);
        gbc.writeMem(0x935c, { 0xe0 });
        gbc.writeMem(0xdfa9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x44c7);
        EXPECT(gbc.pc(), 0xdfaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935c), 0xe0);
        EXPECT(gbc.readMem(0xdfa9), 0xa6);
        // A6 026B
        gbc.setState(0xe37, 0x2eec, 0x4a70, 0x8f1e, 0x7e84, 0x35cf, 0x1, 0x1);
        gbc.writeMem(0xe37, { 0xa6 });
        gbc.writeMem(0x35cf, { 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x2eec);
        EXPECT(gbc.pc(), 0xe38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 026C
        gbc.setState(0x7c72, 0x1d01, 0x8640, 0xc998, 0x8122, 0x7b88, 0x0, 0x0);
        gbc.writeMem(0x7b88, { 0xad });
        gbc.writeMem(0x7c72, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1d01);
        EXPECT(gbc.pc(), 0x7c73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 026D
        gbc.setState(0x5653, 0xabc6, 0xde30, 0x333, 0xff7f, 0x4ed9, 0x0, 0x0);
        gbc.writeMem(0x4ed9, { 0xa6 });
        gbc.writeMem(0x5653, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xabc6);
        EXPECT(gbc.pc(), 0x5654);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 026E
        gbc.setState(0xc37, 0x4fff, 0xc3d0, 0x4691, 0x8a07, 0x5639, 0x0, 0x0);
        gbc.writeMem(0xc37, { 0xa6 });
        gbc.writeMem(0x5639, { 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4fff);
        EXPECT(gbc.pc(), 0xc38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 026F
        gbc.setState(0x8257, 0xa276, 0xbae0, 0x4cf2, 0xa5dd, 0x8043, 0x0, 0x0);
        gbc.writeMem(0x8043, { 0xb8 });
        gbc.writeMem(0x8257, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa276);
        EXPECT(gbc.pc(), 0x8258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8043), 0xb8);
        EXPECT(gbc.readMem(0x8257), 0xa6);
        // A6 0270
        gbc.setState(0x4b62, 0x9683, 0xc250, 0x5013, 0x31, 0xbb35, 0x1, 0x1);
        gbc.writeMem(0x4b62, { 0xa6 });
        gbc.writeMem(0xbb35, { 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9683);
        EXPECT(gbc.pc(), 0x4b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb35), 0x81);
        // A6 0271
        gbc.setState(0x1f4a, 0x9a1e, 0xcf00, 0x6f00, 0x456f, 0x69c, 0x0, 0x1);
        gbc.writeMem(0x69c, { 0x6a });
        gbc.writeMem(0x1f4a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9a1e);
        EXPECT(gbc.pc(), 0x1f4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0272
        gbc.setState(0x6832, 0xaaf6, 0xde70, 0xad9c, 0x62b7, 0xb391, 0x0, 0x1);
        gbc.writeMem(0x6832, { 0xa6 });
        gbc.writeMem(0xb391, { 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xaaf6);
        EXPECT(gbc.pc(), 0x6833);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb391), 0x77);
        // A6 0273
        gbc.setState(0x90e5, 0x7b5, 0x710, 0xd4da, 0x9eb7, 0x6075, 0x0, 0x0);
        gbc.writeMem(0x6075, { 0x2f });
        gbc.writeMem(0x90e5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7b5);
        EXPECT(gbc.pc(), 0x90e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90e5), 0xa6);
        // A6 0274
        gbc.setState(0x1cf3, 0xf628, 0x6510, 0xc874, 0x666d, 0x3bca, 0x0, 0x0);
        gbc.writeMem(0x1cf3, { 0xa6 });
        gbc.writeMem(0x3bca, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf628);
        EXPECT(gbc.pc(), 0x1cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0275
        gbc.setState(0x135d, 0x5d8e, 0xee80, 0x6f0a, 0x8ce7, 0xc42d, 0x1, 0x0);
        gbc.writeMem(0x135d, { 0xa6 });
        gbc.writeMem(0xc42d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5d8e);
        EXPECT(gbc.pc(), 0x135e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42d), 0xa6);
        // A6 0276
        gbc.setState(0xdad8, 0x9288, 0xf6f0, 0xfaed, 0x504a, 0x1c21, 0x0, 0x1);
        gbc.writeMem(0x1c21, { 0x4e });
        gbc.writeMem(0xdad8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9288);
        EXPECT(gbc.pc(), 0xdad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad8), 0xa6);
        // A6 0277
        gbc.setState(0xd6d4, 0x858f, 0xcd20, 0xb3b9, 0x220, 0x9354, 0x1, 0x0);
        gbc.writeMem(0x9354, { 0xc4 });
        gbc.writeMem(0xd6d4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x858f);
        EXPECT(gbc.pc(), 0xd6d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9354), 0xc4);
        EXPECT(gbc.readMem(0xd6d4), 0xa6);
        // A6 0278
        gbc.setState(0xa8c0, 0x995c, 0x9a90, 0xfb86, 0x281, 0xb542, 0x1, 0x1);
        gbc.writeMem(0xa8c0, { 0xa6 });
        gbc.writeMem(0xb542, { 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x995c);
        EXPECT(gbc.pc(), 0xa8c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c0), 0xa6);
        EXPECT(gbc.readMem(0xb542), 0xc2);
        // A6 0279
        gbc.setState(0xe769, 0x6d2e, 0x7940, 0xcfe, 0x4b9b, 0xf441, 0x1, 0x1);
        gbc.writeMem(0xe769, { 0xa6 });
        gbc.writeMem(0xf441, { 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6d2e);
        EXPECT(gbc.pc(), 0xe76a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe769), 0xa6);
        EXPECT(gbc.readMem(0xf441), 0xa0);
        // A6 027A
        gbc.setState(0x58ca, 0x9e29, 0xee00, 0xdefb, 0x9a25, 0xbfc6, 0x0, 0x1);
        gbc.writeMem(0x58ca, { 0xa6 });
        gbc.writeMem(0xbfc6, { 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x9e29);
        EXPECT(gbc.pc(), 0x58cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfc6), 0xac);
        // A6 027B
        gbc.setState(0x4a6b, 0x8c00, 0x7b00, 0x1e1f, 0x3bf2, 0x8430, 0x1, 0x0);
        gbc.writeMem(0x4a6b, { 0xa6 });
        gbc.writeMem(0x8430, { 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8c00);
        EXPECT(gbc.pc(), 0x4a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8430), 0x3f);
        // A6 027C
        gbc.setState(0xea08, 0xd46c, 0x3870, 0x70a0, 0xf1f5, 0x2a67, 0x1, 0x0);
        gbc.writeMem(0x2a67, { 0xb5 });
        gbc.writeMem(0xea08, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd46c);
        EXPECT(gbc.pc(), 0xea09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea08), 0xa6);
        // A6 027D
        gbc.setState(0xadec, 0x349c, 0x9780, 0x67bb, 0xb75d, 0xbf4e, 0x0, 0x1);
        gbc.writeMem(0xadec, { 0xa6 });
        gbc.writeMem(0xbf4e, { 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x349c);
        EXPECT(gbc.pc(), 0xaded);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadec), 0xa6);
        EXPECT(gbc.readMem(0xbf4e), 0xf8);
        // A6 027E
        gbc.setState(0x9bef, 0x79af, 0xcfd0, 0x944a, 0xdfa2, 0x7116, 0x0, 0x0);
        gbc.writeMem(0x7116, { 0x3e });
        gbc.writeMem(0x9bef, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x79af);
        EXPECT(gbc.pc(), 0x9bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bef), 0xa6);
        // A6 027F
        gbc.setState(0x2027, 0x18f1, 0x66d0, 0x1c7a, 0x579f, 0x255a, 0x1, 0x1);
        gbc.writeMem(0x2027, { 0xa6 });
        gbc.writeMem(0x255a, { 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x18f1);
        EXPECT(gbc.pc(), 0x2028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0280
        gbc.setState(0x8eaf, 0x4d2b, 0xec30, 0x5e97, 0x9e15, 0xfcc3, 0x1, 0x0);
        gbc.writeMem(0x8eaf, { 0xa6 });
        gbc.writeMem(0xfcc3, { 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4d2b);
        EXPECT(gbc.pc(), 0x8eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eaf), 0xa6);
        EXPECT(gbc.readMem(0xfcc3), 0xfd);
        // A6 0281
        gbc.setState(0x2929, 0xb86b, 0xc2d0, 0x9995, 0x4efa, 0xb237, 0x0, 0x1);
        gbc.writeMem(0x2929, { 0xa6 });
        gbc.writeMem(0xb237, { 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb86b);
        EXPECT(gbc.pc(), 0x292a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb237), 0x93);
        // A6 0282
        gbc.setState(0x7be6, 0x4358, 0x4f50, 0x5285, 0xd281, 0xa018, 0x1, 0x1);
        gbc.writeMem(0x7be6, { 0xa6 });
        gbc.writeMem(0xa018, { 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4358);
        EXPECT(gbc.pc(), 0x7be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa018), 0xff);
        // A6 0284
        gbc.setState(0xb6c, 0x7984, 0x41a0, 0x14b4, 0x8c7e, 0xf833, 0x1, 0x1);
        gbc.writeMem(0xb6c, { 0xa6 });
        gbc.writeMem(0xf833, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7984);
        EXPECT(gbc.pc(), 0xb6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf833), 0x6e);
        // A6 0285
        gbc.setState(0x9552, 0x37f0, 0xed60, 0xb64d, 0x635a, 0xdf31, 0x1, 0x0);
        gbc.writeMem(0x9552, { 0xa6 });
        gbc.writeMem(0xdf31, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x37f0);
        EXPECT(gbc.pc(), 0x9553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9552), 0xa6);
        EXPECT(gbc.readMem(0xdf31), 0x7c);
        // A6 0286
        gbc.setState(0xe76f, 0x39b3, 0x86d0, 0xa037, 0x96ac, 0x7caf, 0x0, 0x1);
        gbc.writeMem(0x7caf, { 0x46 });
        gbc.writeMem(0xe76f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x39b3);
        EXPECT(gbc.pc(), 0xe770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe76f), 0xa6);
        // A6 0287
        gbc.setState(0xe299, 0xa085, 0xb880, 0xdf12, 0x1f9, 0x1cb9, 0x1, 0x0);
        gbc.writeMem(0x1cb9, { 0x10 });
        gbc.writeMem(0xe299, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa085);
        EXPECT(gbc.pc(), 0xe29a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe299), 0xa6);
        // A6 0288
        gbc.setState(0x22f0, 0x3071, 0xf0d0, 0x8936, 0x3332, 0x14bb, 0x0, 0x0);
        gbc.writeMem(0x14bb, { 0xf6 });
        gbc.writeMem(0x22f0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x3071);
        EXPECT(gbc.pc(), 0x22f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0289
        gbc.setState(0x2679, 0x2586, 0xd30, 0x8cf7, 0x2f18, 0x267b, 0x0, 0x1);
        gbc.writeMem(0x2679, { 0xa6 });
        gbc.writeMem(0x267b, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2586);
        EXPECT(gbc.pc(), 0x267a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 028A
        gbc.setState(0x4d45, 0x4ebf, 0xa290, 0xb87, 0x73ec, 0xb184, 0x1, 0x1);
        gbc.writeMem(0x4d45, { 0xa6 });
        gbc.writeMem(0xb184, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4ebf);
        EXPECT(gbc.pc(), 0x4d46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb184), 0x4c);
        // A6 028B
        gbc.setState(0x88b3, 0x6428, 0xb0e0, 0x8441, 0xc10c, 0xa2fa, 0x0, 0x1);
        gbc.writeMem(0x88b3, { 0xa6 });
        gbc.writeMem(0xa2fa, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6428);
        EXPECT(gbc.pc(), 0x88b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b3), 0xa6);
        EXPECT(gbc.readMem(0xa2fa), 0xb3);
        // A6 028C
        gbc.setState(0x4b46, 0x85a1, 0x8d00, 0x9888, 0x7860, 0x2694, 0x0, 0x1);
        gbc.writeMem(0x2694, { 0xc });
        gbc.writeMem(0x4b46, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x85a1);
        EXPECT(gbc.pc(), 0x4b47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 028D
        gbc.setState(0xb504, 0xfa0f, 0xa10, 0x80fb, 0x2618, 0x4832, 0x1, 0x0);
        gbc.writeMem(0x4832, { 0x35 });
        gbc.writeMem(0xb504, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xfa0f);
        EXPECT(gbc.pc(), 0xb505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb504), 0xa6);
        // A6 028E
        gbc.setState(0x4186, 0xbb08, 0x4a10, 0xba7a, 0x504d, 0xbc19, 0x1, 0x0);
        gbc.writeMem(0x4186, { 0xa6 });
        gbc.writeMem(0xbc19, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xbb08);
        EXPECT(gbc.pc(), 0x4187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc19), 0x2b);
        // A6 028F
        gbc.setState(0x16bd, 0x4f16, 0x3d40, 0x8444, 0x68d2, 0x6784, 0x0, 0x0);
        gbc.writeMem(0x16bd, { 0xa6 });
        gbc.writeMem(0x6784, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4f16);
        EXPECT(gbc.pc(), 0x16be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0290
        gbc.setState(0x180b, 0xdba, 0xb100, 0x5e5c, 0x630, 0xff9c, 0x0, 0x1);
        gbc.writeMem(0x180b, { 0xa6 });
        gbc.writeMem(0xff9c, { 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xdba);
        EXPECT(gbc.pc(), 0x180c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xff9c), 0xb6);
        // A6 0291
        gbc.setState(0xbe64, 0x43e8, 0x9120, 0xcd4, 0x91eb, 0xf69d, 0x0, 0x1);
        gbc.writeMem(0xbe64, { 0xa6 });
        gbc.writeMem(0xf69d, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x43e8);
        EXPECT(gbc.pc(), 0xbe65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe64), 0xa6);
        EXPECT(gbc.readMem(0xf69d), 0x42);
        // A6 0292
        gbc.setState(0xe24b, 0x5a1, 0xb4d0, 0x6d84, 0xb07d, 0x918b, 0x0, 0x1);
        gbc.writeMem(0x918b, { 0x85 });
        gbc.writeMem(0xe24b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5a1);
        EXPECT(gbc.pc(), 0xe24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x918b), 0x85);
        EXPECT(gbc.readMem(0xe24b), 0xa6);
        // A6 0293
        gbc.setState(0xafb2, 0x6a9b, 0x4da0, 0x3b6b, 0x3a7d, 0xfe1d, 0x1, 0x1);
        gbc.writeMem(0xafb2, { 0xa6 });
        gbc.writeMem(0xfe1d, { 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6a9b);
        EXPECT(gbc.pc(), 0xafb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb2), 0xa6);
        EXPECT(gbc.readMem(0xfe1d), 0xd2);
        // A6 0294
        gbc.setState(0x2846, 0x164d, 0x6880, 0x1708, 0x7000, 0x796d, 0x1, 0x0);
        gbc.writeMem(0x2846, { 0xa6 });
        gbc.writeMem(0x796d, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x164d);
        EXPECT(gbc.pc(), 0x2847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0295
        gbc.setState(0xc150, 0x8df2, 0xde30, 0xdd5f, 0x729d, 0x3d31, 0x1, 0x1);
        gbc.writeMem(0x3d31, { 0x26 });
        gbc.writeMem(0xc150, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8df2);
        EXPECT(gbc.pc(), 0xc151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc150), 0xa6);
        // A6 0296
        gbc.setState(0xd941, 0xb1d3, 0xfa90, 0x1d8f, 0x2aab, 0xd008, 0x1, 0x0);
        gbc.writeMem(0xd008, { 0xb4 });
        gbc.writeMem(0xd941, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb1d3);
        EXPECT(gbc.pc(), 0xd942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd008), 0xb4);
        EXPECT(gbc.readMem(0xd941), 0xa6);
        // A6 0297
        gbc.setState(0x47e8, 0xe48b, 0xf510, 0x2eec, 0xf0b, 0x5e6d, 0x0, 0x0);
        gbc.writeMem(0x47e8, { 0xa6 });
        gbc.writeMem(0x5e6d, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe48b);
        EXPECT(gbc.pc(), 0x47e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0298
        gbc.setState(0x4d0a, 0xf967, 0xd760, 0x3b8b, 0x87cc, 0x1a31, 0x0, 0x0);
        gbc.writeMem(0x1a31, { 0x5 });
        gbc.writeMem(0x4d0a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf967);
        EXPECT(gbc.pc(), 0x4d0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0299
        gbc.setState(0x2725, 0x5b9, 0xe0b0, 0x7d2f, 0xe373, 0xd543, 0x1, 0x0);
        gbc.writeMem(0x2725, { 0xa6 });
        gbc.writeMem(0xd543, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5b9);
        EXPECT(gbc.pc(), 0x2726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd543), 0x76);
        // A6 029A
        gbc.setState(0x57e1, 0x8110, 0xd620, 0xd676, 0xd07e, 0xa5ec, 0x0, 0x1);
        gbc.writeMem(0x57e1, { 0xa6 });
        gbc.writeMem(0xa5ec, { 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8110);
        EXPECT(gbc.pc(), 0x57e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5ec), 0xfb);
        // A6 029B
        gbc.setState(0xdea3, 0x22bd, 0x2530, 0x3987, 0xbf59, 0x364b, 0x1, 0x0);
        gbc.writeMem(0x364b, { 0x11 });
        gbc.writeMem(0xdea3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x22bd);
        EXPECT(gbc.pc(), 0xdea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea3), 0xa6);
        // A6 029C
        gbc.setState(0x789e, 0x651a, 0xf4a0, 0x1942, 0x74ec, 0x23cf, 0x0, 0x0);
        gbc.writeMem(0x23cf, { 0x7c });
        gbc.writeMem(0x789e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x651a);
        EXPECT(gbc.pc(), 0x789f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 029D
        gbc.setState(0x21f1, 0xcc77, 0x6d00, 0x80c2, 0xc3f5, 0x73c, 0x0, 0x1);
        gbc.writeMem(0x73c, { 0x3d });
        gbc.writeMem(0x21f1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xcc77);
        EXPECT(gbc.pc(), 0x21f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 029E
        gbc.setState(0xbecf, 0x4fbe, 0xfb0, 0x2736, 0xc682, 0xc1f2, 0x1, 0x1);
        gbc.writeMem(0xbecf, { 0xa6 });
        gbc.writeMem(0xc1f2, { 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4fbe);
        EXPECT(gbc.pc(), 0xbed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbecf), 0xa6);
        EXPECT(gbc.readMem(0xc1f2), 0xa);
        // A6 029F
        gbc.setState(0x1c69, 0x6c10, 0xc630, 0xa058, 0xf055, 0x63a1, 0x1, 0x1);
        gbc.writeMem(0x1c69, { 0xa6 });
        gbc.writeMem(0x63a1, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6c10);
        EXPECT(gbc.pc(), 0x1c6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02A0
        gbc.setState(0x81d7, 0x1335, 0x9140, 0xb01c, 0xec3e, 0x568b, 0x0, 0x0);
        gbc.writeMem(0x568b, { 0x91 });
        gbc.writeMem(0x81d7, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1335);
        EXPECT(gbc.pc(), 0x81d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d7), 0xa6);
        // A6 02A1
        gbc.setState(0xccdd, 0x5503, 0xbfa0, 0x8b1a, 0x7088, 0x81ef, 0x1, 0x0);
        gbc.writeMem(0x81ef, { 0x3f });
        gbc.writeMem(0xccdd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5503);
        EXPECT(gbc.pc(), 0xccde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ef), 0x3f);
        EXPECT(gbc.readMem(0xccdd), 0xa6);
        // A6 02A2
        gbc.setState(0x1c14, 0x6450, 0x88c0, 0xeae8, 0xef2b, 0x633b, 0x0, 0x1);
        gbc.writeMem(0x1c14, { 0xa6 });
        gbc.writeMem(0x633b, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6450);
        EXPECT(gbc.pc(), 0x1c15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02A3
        gbc.setState(0xb408, 0x7f46, 0x6af0, 0x1251, 0x85cf, 0xca68, 0x1, 0x0);
        gbc.writeMem(0xb408, { 0xa6 });
        gbc.writeMem(0xca68, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7f46);
        EXPECT(gbc.pc(), 0xb409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb408), 0xa6);
        EXPECT(gbc.readMem(0xca68), 0x4);
        // A6 02A4
        gbc.setState(0x3990, 0x627b, 0x3430, 0x6cf2, 0x4e05, 0xc0ec, 0x0, 0x1);
        gbc.writeMem(0x3990, { 0xa6 });
        gbc.writeMem(0xc0ec, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x627b);
        EXPECT(gbc.pc(), 0x3991);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ec), 0x7c);
        // A6 02A5
        gbc.setState(0xc809, 0x4e4e, 0x7730, 0x9ca6, 0x279c, 0x3041, 0x1, 0x0);
        gbc.writeMem(0x3041, { 0x9d });
        gbc.writeMem(0xc809, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4e4e);
        EXPECT(gbc.pc(), 0xc80a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc809), 0xa6);
        // A6 02A6
        gbc.setState(0x6540, 0xcbcb, 0x57a0, 0x7c98, 0xb3ca, 0x6364, 0x1, 0x0);
        gbc.writeMem(0x6364, { 0x95 });
        gbc.writeMem(0x6540, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcbcb);
        EXPECT(gbc.pc(), 0x6541);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02A7
        gbc.setState(0x6f8e, 0x528f, 0xc500, 0xabdf, 0x214, 0x3ece, 0x1, 0x1);
        gbc.writeMem(0x3ece, { 0x27 });
        gbc.writeMem(0x6f8e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x528f);
        EXPECT(gbc.pc(), 0x6f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02A8
        gbc.setState(0xd357, 0xe2c4, 0xeb40, 0xf9e5, 0x5bb3, 0xef40, 0x0, 0x1);
        gbc.writeMem(0xd357, { 0xa6 });
        gbc.writeMem(0xef40, { 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xe2c4);
        EXPECT(gbc.pc(), 0xd358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd357), 0xa6);
        EXPECT(gbc.readMem(0xef40), 0xe1);
        // A6 02A9
        gbc.setState(0xdd2, 0x478, 0xcc30, 0x10a1, 0xd123, 0x472b, 0x0, 0x1);
        gbc.writeMem(0xdd2, { 0xa6 });
        gbc.writeMem(0x472b, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x478);
        EXPECT(gbc.pc(), 0xdd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02AA
        gbc.setState(0x8638, 0x3030, 0xdfa0, 0xc9ed, 0x7571, 0x9b8a, 0x1, 0x1);
        gbc.writeMem(0x8638, { 0xa6 });
        gbc.writeMem(0x9b8a, { 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3030);
        EXPECT(gbc.pc(), 0x8639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8638), 0xa6);
        EXPECT(gbc.readMem(0x9b8a), 0xe8);
        // A6 02AB
        gbc.setState(0x407e, 0xece3, 0x48e0, 0xeef3, 0xa199, 0x6c0f, 0x0, 0x0);
        gbc.writeMem(0x407e, { 0xa6 });
        gbc.writeMem(0x6c0f, { 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xece3);
        EXPECT(gbc.pc(), 0x407f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02AC
        gbc.setState(0x70d4, 0x5ef6, 0xc6b0, 0xbdad, 0x2f95, 0xf836, 0x1, 0x0);
        gbc.writeMem(0x70d4, { 0xa6 });
        gbc.writeMem(0xf836, { 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5ef6);
        EXPECT(gbc.pc(), 0x70d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf836), 0x75);
        // A6 02AD
        gbc.setState(0x3aa4, 0x91a7, 0x3da0, 0x2bda, 0x338d, 0x40f2, 0x1, 0x0);
        gbc.writeMem(0x3aa4, { 0xa6 });
        gbc.writeMem(0x40f2, { 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x91a7);
        EXPECT(gbc.pc(), 0x3aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02AE
        gbc.setState(0xa3b2, 0xcd05, 0x6080, 0x3039, 0x5957, 0xd995, 0x0, 0x0);
        gbc.writeMem(0xa3b2, { 0xa6 });
        gbc.writeMem(0xd995, { 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xcd05);
        EXPECT(gbc.pc(), 0xa3b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b2), 0xa6);
        EXPECT(gbc.readMem(0xd995), 0x9b);
        // A6 02AF
        gbc.setState(0xce74, 0x71f, 0x14b0, 0x5bb8, 0xd588, 0x17f0, 0x0, 0x0);
        gbc.writeMem(0x17f0, { 0x4e });
        gbc.writeMem(0xce74, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x71f);
        EXPECT(gbc.pc(), 0xce75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce74), 0xa6);
        // A6 02B0
        gbc.setState(0x1d85, 0xb2ce, 0xe820, 0x8bbe, 0xa37a, 0x60fa, 0x1, 0x1);
        gbc.writeMem(0x1d85, { 0xa6 });
        gbc.writeMem(0x60fa, { 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb2ce);
        EXPECT(gbc.pc(), 0x1d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02B1
        gbc.setState(0x8435, 0x5ca4, 0x71f0, 0xaf08, 0xc5c4, 0x5881, 0x1, 0x1);
        gbc.writeMem(0x5881, { 0xf4 });
        gbc.writeMem(0x8435, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5ca4);
        EXPECT(gbc.pc(), 0x8436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8435), 0xa6);
        // A6 02B2
        gbc.setState(0xdb13, 0x55fd, 0x33a0, 0x8f27, 0xbdad, 0x17da, 0x1, 0x1);
        gbc.writeMem(0x17da, { 0x9f });
        gbc.writeMem(0xdb13, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x55fd);
        EXPECT(gbc.pc(), 0xdb14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb13), 0xa6);
        // A6 02B3
        gbc.setState(0x5c94, 0xf2f3, 0x8a20, 0x3c26, 0xf37a, 0x2640, 0x0, 0x1);
        gbc.writeMem(0x2640, { 0x2a });
        gbc.writeMem(0x5c94, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf2f3);
        EXPECT(gbc.pc(), 0x5c95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02B4
        gbc.setState(0xc282, 0xc580, 0xf9e0, 0xd836, 0xe5d3, 0xf91, 0x0, 0x0);
        gbc.writeMem(0xf91, { 0x7a });
        gbc.writeMem(0xc282, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc580);
        EXPECT(gbc.pc(), 0xc283);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc282), 0xa6);
        // A6 02B5
        gbc.setState(0x7836, 0x6a1f, 0xf5d0, 0xd55a, 0x31df, 0x1fce, 0x1, 0x0);
        gbc.writeMem(0x1fce, { 0xa4 });
        gbc.writeMem(0x7836, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6a1f);
        EXPECT(gbc.pc(), 0x7837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02B6
        gbc.setState(0xa305, 0x8050, 0x58c0, 0xcc2c, 0x6a08, 0x139d, 0x0, 0x0);
        gbc.writeMem(0x139d, { 0x30 });
        gbc.writeMem(0xa305, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8050);
        EXPECT(gbc.pc(), 0xa306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa305), 0xa6);
        // A6 02B7
        gbc.setState(0x9a81, 0x95dc, 0x9c60, 0xb74c, 0x2f, 0x3ce6, 0x0, 0x0);
        gbc.writeMem(0x3ce6, { 0x91 });
        gbc.writeMem(0x9a81, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x95dc);
        EXPECT(gbc.pc(), 0x9a82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a81), 0xa6);
        // A6 02B8
        gbc.setState(0x755e, 0x727d, 0x34d0, 0x87a9, 0xbee7, 0x1163, 0x1, 0x0);
        gbc.writeMem(0x1163, { 0xdb });
        gbc.writeMem(0x755e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x727d);
        EXPECT(gbc.pc(), 0x755f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02B9
        gbc.setState(0x4e1e, 0x440d, 0xd2d0, 0xbe2d, 0x55, 0xd796, 0x0, 0x1);
        gbc.writeMem(0x4e1e, { 0xa6 });
        gbc.writeMem(0xd796, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x440d);
        EXPECT(gbc.pc(), 0x4e1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd796), 0x46);
        // A6 02BA
        gbc.setState(0x470f, 0x6809, 0xffc0, 0x8048, 0x2f69, 0xa6c2, 0x0, 0x0);
        gbc.writeMem(0x470f, { 0xa6 });
        gbc.writeMem(0xa6c2, { 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6809);
        EXPECT(gbc.pc(), 0x4710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c2), 0x5d);
        // A6 02BB
        gbc.setState(0xed28, 0x63f6, 0x3fa0, 0x98ac, 0x25ba, 0x6686, 0x1, 0x0);
        gbc.writeMem(0x6686, { 0xb0 });
        gbc.writeMem(0xed28, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x63f6);
        EXPECT(gbc.pc(), 0xed29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed28), 0xa6);
        // A6 02BD
        gbc.setState(0x45dc, 0x3de0, 0x1fe0, 0xe65a, 0x8197, 0x17ab, 0x0, 0x0);
        gbc.writeMem(0x17ab, { 0xa0 });
        gbc.writeMem(0x45dc, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x3de0);
        EXPECT(gbc.pc(), 0x45dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02BE
        gbc.setState(0x8a16, 0x57e8, 0xa5a0, 0x2adc, 0x118c, 0x3eb, 0x0, 0x0);
        gbc.writeMem(0x3eb, { 0x34 });
        gbc.writeMem(0x8a16, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x57e8);
        EXPECT(gbc.pc(), 0x8a17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a16), 0xa6);
        // A6 02BF
        gbc.setState(0x7d42, 0xea4e, 0xe040, 0x444a, 0x5460, 0xade, 0x1, 0x1);
        gbc.writeMem(0xade, { 0x92 });
        gbc.writeMem(0x7d42, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xea4e);
        EXPECT(gbc.pc(), 0x7d43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02C0
        gbc.setState(0xb67a, 0xf832, 0x9d80, 0x5c5d, 0xfe4b, 0x28d, 0x0, 0x1);
        gbc.writeMem(0x28d, { 0x23 });
        gbc.writeMem(0xb67a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf832);
        EXPECT(gbc.pc(), 0xb67b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb67a), 0xa6);
        // A6 02C1
        gbc.setState(0x47e4, 0x1d25, 0xf0, 0x797b, 0xe778, 0xe883, 0x0, 0x0);
        gbc.writeMem(0x47e4, { 0xa6 });
        gbc.writeMem(0xe883, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1d25);
        EXPECT(gbc.pc(), 0x47e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe883), 0x1c);
        // A6 02C2
        gbc.setState(0x987b, 0xd6e7, 0x46f0, 0x9223, 0xfade, 0x588e, 0x0, 0x0);
        gbc.writeMem(0x588e, { 0x6c });
        gbc.writeMem(0x987b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xd6e7);
        EXPECT(gbc.pc(), 0x987c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x987b), 0xa6);
        // A6 02C3
        gbc.setState(0x6165, 0x329e, 0xe210, 0x846, 0x6441, 0xbeb8, 0x0, 0x0);
        gbc.writeMem(0x6165, { 0xa6 });
        gbc.writeMem(0xbeb8, { 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x329e);
        EXPECT(gbc.pc(), 0x6166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb8), 0x65);
        // A6 02C4
        gbc.setState(0x3345, 0x85a7, 0x9390, 0xf16, 0x9127, 0x4276, 0x0, 0x0);
        gbc.writeMem(0x3345, { 0xa6 });
        gbc.writeMem(0x4276, { 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x85a7);
        EXPECT(gbc.pc(), 0x3346);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02C5
        gbc.setState(0x3afb, 0x9437, 0x7980, 0x80a6, 0xb650, 0xacad, 0x1, 0x0);
        gbc.writeMem(0x3afb, { 0xa6 });
        gbc.writeMem(0xacad, { 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9437);
        EXPECT(gbc.pc(), 0x3afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacad), 0x3c);
        // A6 02C6
        gbc.setState(0x8341, 0x92fb, 0xfff0, 0xf2f1, 0x7cba, 0x9b5a, 0x1, 0x1);
        gbc.writeMem(0x8341, { 0xa6 });
        gbc.writeMem(0x9b5a, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x92fb);
        EXPECT(gbc.pc(), 0x8342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8341), 0xa6);
        EXPECT(gbc.readMem(0x9b5a), 0xb);
        // A6 02C7
        gbc.setState(0x285, 0x10bd, 0x7ea0, 0x56df, 0x2c33, 0x8520, 0x1, 0x1);
        gbc.writeMem(0x285, { 0xa6 });
        gbc.writeMem(0x8520, { 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x10bd);
        EXPECT(gbc.pc(), 0x286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8520), 0xec);
        // A6 02C8
        gbc.setState(0xdaac, 0xeaf4, 0x6b60, 0x5bba, 0x5b7e, 0xfb2c, 0x1, 0x0);
        gbc.writeMem(0xdaac, { 0xa6 });
        gbc.writeMem(0xfb2c, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeaf4);
        EXPECT(gbc.pc(), 0xdaad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaac), 0xa6);
        EXPECT(gbc.readMem(0xfb2c), 0xee);
        // A6 02C9
        gbc.setState(0x7ca1, 0x4f90, 0x1d80, 0xc652, 0x5b38, 0x524, 0x1, 0x0);
        gbc.writeMem(0x524, { 0xb4 });
        gbc.writeMem(0x7ca1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4f90);
        EXPECT(gbc.pc(), 0x7ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02CA
        gbc.setState(0x50b, 0xdb18, 0x2450, 0xaabe, 0xcb2c, 0x59c2, 0x0, 0x0);
        gbc.writeMem(0x50b, { 0xa6 });
        gbc.writeMem(0x59c2, { 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xdb18);
        EXPECT(gbc.pc(), 0x50c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02CB
        gbc.setState(0x5d0f, 0x1fbc, 0x220, 0xf73a, 0xa234, 0xc2ed, 0x1, 0x1);
        gbc.writeMem(0x5d0f, { 0xa6 });
        gbc.writeMem(0xc2ed, { 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1fbc);
        EXPECT(gbc.pc(), 0x5d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ed), 0xca);
        // A6 02CC
        gbc.setState(0xd805, 0x1a7, 0x2090, 0x4bb8, 0xabad, 0x9546, 0x1, 0x1);
        gbc.writeMem(0x9546, { 0x25 });
        gbc.writeMem(0xd805, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1a7);
        EXPECT(gbc.pc(), 0xd806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9546), 0x25);
        EXPECT(gbc.readMem(0xd805), 0xa6);
        // A6 02CD
        gbc.setState(0xb867, 0x46ed, 0xaf0, 0xa8e5, 0x3bd4, 0x7700, 0x0, 0x1);
        gbc.writeMem(0x7700, { 0x44 });
        gbc.writeMem(0xb867, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x46ed);
        EXPECT(gbc.pc(), 0xb868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb867), 0xa6);
        // A6 02CE
        gbc.setState(0x78b2, 0x8bd8, 0x4fc0, 0xe117, 0x4d60, 0xe15, 0x1, 0x0);
        gbc.writeMem(0xe15, { 0x1b });
        gbc.writeMem(0x78b2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8bd8);
        EXPECT(gbc.pc(), 0x78b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02CF
        gbc.setState(0x74f7, 0x5be3, 0x9160, 0x93bf, 0xb7c6, 0xca6d, 0x0, 0x1);
        gbc.writeMem(0x74f7, { 0xa6 });
        gbc.writeMem(0xca6d, { 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5be3);
        EXPECT(gbc.pc(), 0x74f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca6d), 0x7d);
        // A6 02D0
        gbc.setState(0x6418, 0x5d50, 0x8670, 0x5872, 0x9ddb, 0xcce3, 0x1, 0x1);
        gbc.writeMem(0x6418, { 0xa6 });
        gbc.writeMem(0xcce3, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5d50);
        EXPECT(gbc.pc(), 0x6419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce3), 0x23);
        // A6 02D1
        gbc.setState(0x2833, 0x51ef, 0x8500, 0xe057, 0x132b, 0x1087, 0x1, 0x1);
        gbc.writeMem(0x1087, { 0xa });
        gbc.writeMem(0x2833, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x51ef);
        EXPECT(gbc.pc(), 0x2834);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02D2
        gbc.setState(0x41d2, 0x6e25, 0xb490, 0xd39a, 0x89bf, 0xa789, 0x0, 0x0);
        gbc.writeMem(0x41d2, { 0xa6 });
        gbc.writeMem(0xa789, { 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6e25);
        EXPECT(gbc.pc(), 0x41d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa789), 0x92);
        // A6 02D3
        gbc.setState(0xbee6, 0xb8cf, 0xde10, 0xaf3a, 0xf7f2, 0x2884, 0x0, 0x0);
        gbc.writeMem(0x2884, { 0xff });
        gbc.writeMem(0xbee6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb8cf);
        EXPECT(gbc.pc(), 0xbee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbee6), 0xa6);
        // A6 02D4
        gbc.setState(0x8a3a, 0x3ab, 0xb860, 0xfa8e, 0x8021, 0xfa8, 0x0, 0x0);
        gbc.writeMem(0xfa8, { 0x1c });
        gbc.writeMem(0x8a3a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3ab);
        EXPECT(gbc.pc(), 0x8a3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3a), 0xa6);
        // A6 02D5
        gbc.setState(0x19a, 0x33e, 0xbc70, 0x6d33, 0x9451, 0xad0b, 0x1, 0x1);
        gbc.writeMem(0x19a, { 0xa6 });
        gbc.writeMem(0xad0b, { 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x33e);
        EXPECT(gbc.pc(), 0x19b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0b), 0x35);
        // A6 02D6
        gbc.setState(0x16d7, 0x85b3, 0x3740, 0x3aa2, 0x9943, 0x77ff, 0x0, 0x1);
        gbc.writeMem(0x16d7, { 0xa6 });
        gbc.writeMem(0x77ff, { 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x85b3);
        EXPECT(gbc.pc(), 0x16d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02D7
        gbc.setState(0xb75c, 0x12b6, 0xe390, 0xa5ac, 0x85b2, 0xd0b3, 0x0, 0x0);
        gbc.writeMem(0xb75c, { 0xa6 });
        gbc.writeMem(0xd0b3, { 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x12b6);
        EXPECT(gbc.pc(), 0xb75d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb75c), 0xa6);
        EXPECT(gbc.readMem(0xd0b3), 0x2f);
        // A6 02D8
        gbc.setState(0x14d, 0x58a8, 0xe4e0, 0x1b1, 0x19da, 0x817a, 0x0, 0x0);
        gbc.writeMem(0x14d, { 0xa6 });
        gbc.writeMem(0x817a, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x58a8);
        EXPECT(gbc.pc(), 0x14e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x817a), 0x80);
        // A6 02D9
        gbc.setState(0x1b74, 0x2fda, 0x8560, 0x5a07, 0x2ba1, 0xc30e, 0x0, 0x1);
        gbc.writeMem(0x1b74, { 0xa6 });
        gbc.writeMem(0xc30e, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2fda);
        EXPECT(gbc.pc(), 0x1b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc30e), 0xfe);
        // A6 02DA
        gbc.setState(0x9e03, 0x438, 0x58e0, 0x67a8, 0x6e10, 0xac03, 0x0, 0x1);
        gbc.writeMem(0x9e03, { 0xa6 });
        gbc.writeMem(0xac03, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x438);
        EXPECT(gbc.pc(), 0x9e04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e03), 0xa6);
        EXPECT(gbc.readMem(0xac03), 0xd6);
        // A6 02DB
        gbc.setState(0x7dad, 0x704b, 0xd040, 0xdd64, 0x71d2, 0x38ec, 0x0, 0x0);
        gbc.writeMem(0x38ec, { 0x52 });
        gbc.writeMem(0x7dad, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x704b);
        EXPECT(gbc.pc(), 0x7dae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02DC
        gbc.setState(0x98bc, 0x31a5, 0x7250, 0x214e, 0xead6, 0xda51, 0x1, 0x0);
        gbc.writeMem(0x98bc, { 0xa6 });
        gbc.writeMem(0xda51, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x31a5);
        EXPECT(gbc.pc(), 0x98bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98bc), 0xa6);
        EXPECT(gbc.readMem(0xda51), 0xbf);
        // A6 02DD
        gbc.setState(0x2da6, 0x6b4d, 0xd110, 0x8916, 0x5f80, 0xfc0d, 0x1, 0x0);
        gbc.writeMem(0x2da6, { 0xa6 });
        gbc.writeMem(0xfc0d, { 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x6b4d);
        EXPECT(gbc.pc(), 0x2da7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfc0d), 0xee);
        // A6 02DE
        gbc.setState(0x9687, 0xaf4f, 0x5d40, 0x327f, 0x6896, 0x7e73, 0x1, 0x1);
        gbc.writeMem(0x7e73, { 0xae });
        gbc.writeMem(0x9687, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xaf4f);
        EXPECT(gbc.pc(), 0x9688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9687), 0xa6);
        // A6 02DF
        gbc.setState(0x6329, 0x14e1, 0x2940, 0x3e56, 0xb0e2, 0x7b77, 0x0, 0x0);
        gbc.writeMem(0x6329, { 0xa6 });
        gbc.writeMem(0x7b77, { 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x14e1);
        EXPECT(gbc.pc(), 0x632a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02E0
        gbc.setState(0xbff3, 0xac3d, 0x3d20, 0x3c25, 0x84b2, 0x413c, 0x1, 0x1);
        gbc.writeMem(0x413c, { 0xde });
        gbc.writeMem(0xbff3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xac3d);
        EXPECT(gbc.pc(), 0xbff4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbff3), 0xa6);
        // A6 02E1
        gbc.setState(0x4bf5, 0x8368, 0xcd60, 0x271a, 0x3df7, 0x222f, 0x1, 0x0);
        gbc.writeMem(0x222f, { 0x39 });
        gbc.writeMem(0x4bf5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8368);
        EXPECT(gbc.pc(), 0x4bf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02E2
        gbc.setState(0x755b, 0x6ec6, 0xe1e0, 0x1be2, 0xaab4, 0x71aa, 0x1, 0x1);
        gbc.writeMem(0x71aa, { 0x37 });
        gbc.writeMem(0x755b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6ec6);
        EXPECT(gbc.pc(), 0x755c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02E3
        gbc.setState(0xc2d5, 0x1373, 0xe690, 0x84cf, 0xe519, 0x92ce, 0x0, 0x1);
        gbc.writeMem(0x92ce, { 0xcb });
        gbc.writeMem(0xc2d5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1373);
        EXPECT(gbc.pc(), 0xc2d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ce), 0xcb);
        EXPECT(gbc.readMem(0xc2d5), 0xa6);
        // A6 02E4
        gbc.setState(0x452a, 0xe69c, 0x8390, 0x7bd0, 0xc0fe, 0x927a, 0x1, 0x0);
        gbc.writeMem(0x452a, { 0xa6 });
        gbc.writeMem(0x927a, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe69c);
        EXPECT(gbc.pc(), 0x452b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x927a), 0x2e);
        // A6 02E5
        gbc.setState(0x89cf, 0x47f9, 0xc470, 0x2fe3, 0xaf66, 0xe621, 0x1, 0x1);
        gbc.writeMem(0x89cf, { 0xa6 });
        gbc.writeMem(0xe621, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x47f9);
        EXPECT(gbc.pc(), 0x89d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89cf), 0xa6);
        EXPECT(gbc.readMem(0xe621), 0x3);
        // A6 02E6
        gbc.setState(0x2eae, 0x7115, 0xab70, 0x9031, 0x83b1, 0x8877, 0x0, 0x0);
        gbc.writeMem(0x2eae, { 0xa6 });
        gbc.writeMem(0x8877, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7115);
        EXPECT(gbc.pc(), 0x2eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8877), 0x19);
        // A6 02E7
        gbc.setState(0x8824, 0x91e9, 0x1fd0, 0x140b, 0xf265, 0x64e2, 0x1, 0x0);
        gbc.writeMem(0x64e2, { 0x4e });
        gbc.writeMem(0x8824, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x91e9);
        EXPECT(gbc.pc(), 0x8825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8824), 0xa6);
        // A6 02E8
        gbc.setState(0xd8c9, 0xae4f, 0xc2d0, 0x651e, 0xb57f, 0x3e9a, 0x0, 0x0);
        gbc.writeMem(0x3e9a, { 0xe4 });
        gbc.writeMem(0xd8c9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xae4f);
        EXPECT(gbc.pc(), 0xd8ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8c9), 0xa6);
        // A6 02E9
        gbc.setState(0xc25f, 0xdf22, 0xdaf0, 0xe801, 0xbe49, 0x6c9a, 0x1, 0x1);
        gbc.writeMem(0x6c9a, { 0x53 });
        gbc.writeMem(0xc25f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdf22);
        EXPECT(gbc.pc(), 0xc260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc25f), 0xa6);
        // A6 02EA
        gbc.setState(0xd374, 0x3d82, 0xee40, 0x45c2, 0x2a5c, 0x46a6, 0x0, 0x1);
        gbc.writeMem(0x46a6, { 0xab });
        gbc.writeMem(0xd374, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3d82);
        EXPECT(gbc.pc(), 0xd375);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd374), 0xa6);
        // A6 02EB
        gbc.setState(0x7a61, 0x947d, 0xb970, 0xcb31, 0xbad0, 0xeec7, 0x0, 0x0);
        gbc.writeMem(0x7a61, { 0xa6 });
        gbc.writeMem(0xeec7, { 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x947d);
        EXPECT(gbc.pc(), 0x7a62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeec7), 0x37);
        // A6 02EC
        gbc.setState(0x4717, 0x692b, 0xff70, 0xfa4b, 0xbdb2, 0x1919, 0x0, 0x1);
        gbc.writeMem(0x1919, { 0x84 });
        gbc.writeMem(0x4717, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x692b);
        EXPECT(gbc.pc(), 0x4718);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02ED
        gbc.setState(0x9529, 0x8d06, 0xb740, 0x8fba, 0x2555, 0x8c60, 0x1, 0x1);
        gbc.writeMem(0x8c60, { 0xc });
        gbc.writeMem(0x9529, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8d06);
        EXPECT(gbc.pc(), 0x952a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c60), 0xc);
        EXPECT(gbc.readMem(0x9529), 0xa6);
        // A6 02EE
        gbc.setState(0x3032, 0xca05, 0x6e20, 0x947d, 0x2624, 0x5e55, 0x1, 0x1);
        gbc.writeMem(0x3032, { 0xa6 });
        gbc.writeMem(0x5e55, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xca05);
        EXPECT(gbc.pc(), 0x3033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02EF
        gbc.setState(0xea0b, 0x5e51, 0x1ea0, 0x863a, 0xca23, 0x5ae4, 0x1, 0x0);
        gbc.writeMem(0x5ae4, { 0xee });
        gbc.writeMem(0xea0b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5e51);
        EXPECT(gbc.pc(), 0xea0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea0b), 0xa6);
        // A6 02F0
        gbc.setState(0xde9b, 0xb54f, 0xcf90, 0xfaa, 0x2a6a, 0xfe5f, 0x1, 0x0);
        gbc.writeMem(0xde9b, { 0xa6 });
        gbc.writeMem(0xfe5f, { 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb54f);
        EXPECT(gbc.pc(), 0xde9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde9b), 0xa6);
        EXPECT(gbc.readMem(0xfe5f), 0x3b);
        // A6 02F1
        gbc.setState(0x77d9, 0xcca0, 0xc620, 0x87ce, 0xf020, 0x12f7, 0x1, 0x1);
        gbc.writeMem(0x12f7, { 0x22 });
        gbc.writeMem(0x77d9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xcca0);
        EXPECT(gbc.pc(), 0x77da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02F2
        gbc.setState(0x8dec, 0xdc55, 0xfe10, 0xb427, 0x438d, 0xa402, 0x1, 0x1);
        gbc.writeMem(0x8dec, { 0xa6 });
        gbc.writeMem(0xa402, { 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdc55);
        EXPECT(gbc.pc(), 0x8ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dec), 0xa6);
        EXPECT(gbc.readMem(0xa402), 0x79);
        // A6 02F3
        gbc.setState(0xdde0, 0x9c35, 0x71a0, 0x38e4, 0x400, 0x65d2, 0x1, 0x0);
        gbc.writeMem(0x65d2, { 0x39 });
        gbc.writeMem(0xdde0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9c35);
        EXPECT(gbc.pc(), 0xdde1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdde0), 0xa6);
        // A6 02F4
        gbc.setState(0xe4a6, 0xea2e, 0xcbe0, 0x2cd9, 0xa814, 0x3d8e, 0x1, 0x1);
        gbc.writeMem(0x3d8e, { 0x98 });
        gbc.writeMem(0xe4a6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xea2e);
        EXPECT(gbc.pc(), 0xe4a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a6), 0xa6);
        // A6 02F5
        gbc.setState(0xddb, 0x6e2, 0x5b80, 0x5eb5, 0xbafa, 0x17bb, 0x1, 0x0);
        gbc.writeMem(0xddb, { 0xa6 });
        gbc.writeMem(0x17bb, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x6e2);
        EXPECT(gbc.pc(), 0xddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02F6
        gbc.setState(0x15e, 0xe1b0, 0xe550, 0xf81d, 0xdcec, 0xc7ad, 0x1, 0x1);
        gbc.writeMem(0x15e, { 0xa6 });
        gbc.writeMem(0xc7ad, { 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe1b0);
        EXPECT(gbc.pc(), 0x15f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7ad), 0xba);
        // A6 02F7
        gbc.setState(0x574b, 0x43b8, 0x61a0, 0xebed, 0x9843, 0xe6bf, 0x1, 0x0);
        gbc.writeMem(0x574b, { 0xa6 });
        gbc.writeMem(0xe6bf, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x43b8);
        EXPECT(gbc.pc(), 0x574c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6bf), 0xb3);
        // A6 02F8
        gbc.setState(0x8565, 0x62cf, 0x7500, 0xc2fd, 0x7a93, 0x6766, 0x0, 0x0);
        gbc.writeMem(0x6766, { 0xaf });
        gbc.writeMem(0x8565, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x62cf);
        EXPECT(gbc.pc(), 0x8566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8565), 0xa6);
        // A6 02F9
        gbc.setState(0x8aea, 0xafdc, 0xf340, 0x3891, 0x10f8, 0x5beb, 0x1, 0x1);
        gbc.writeMem(0x5beb, { 0x28 });
        gbc.writeMem(0x8aea, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xafdc);
        EXPECT(gbc.pc(), 0x8aeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aea), 0xa6);
        // A6 02FA
        gbc.setState(0xa0de, 0xaab2, 0x5670, 0x3e9d, 0x87e0, 0x919e, 0x1, 0x1);
        gbc.writeMem(0x919e, { 0x21 });
        gbc.writeMem(0xa0de, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xaab2);
        EXPECT(gbc.pc(), 0xa0df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919e), 0x21);
        EXPECT(gbc.readMem(0xa0de), 0xa6);
        // A6 02FB
        gbc.setState(0x5671, 0xa315, 0xa130, 0xd5bb, 0x34d8, 0xbb17, 0x0, 0x0);
        gbc.writeMem(0x5671, { 0xa6 });
        gbc.writeMem(0xbb17, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa315);
        EXPECT(gbc.pc(), 0x5672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb17), 0xe4);
        // A6 02FC
        gbc.setState(0x4d5c, 0x18eb, 0x2d00, 0x35b9, 0xe020, 0x625c, 0x1, 0x0);
        gbc.writeMem(0x4d5c, { 0xa6 });
        gbc.writeMem(0x625c, { 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x18eb);
        EXPECT(gbc.pc(), 0x4d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 02FD
        gbc.setState(0xbc28, 0x2a6f, 0x5800, 0x1360, 0x55c8, 0xcf24, 0x1, 0x1);
        gbc.writeMem(0xbc28, { 0xa6 });
        gbc.writeMem(0xcf24, { 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2a6f);
        EXPECT(gbc.pc(), 0xbc29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc28), 0xa6);
        EXPECT(gbc.readMem(0xcf24), 0xde);
        // A6 02FE
        gbc.setState(0x9a66, 0x272f, 0xe8d0, 0xcbbf, 0x30b3, 0xba32, 0x0, 0x1);
        gbc.writeMem(0x9a66, { 0xa6 });
        gbc.writeMem(0xba32, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x272f);
        EXPECT(gbc.pc(), 0x9a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a66), 0xa6);
        EXPECT(gbc.readMem(0xba32), 0x16);
        // A6 02FF
        gbc.setState(0xdcb9, 0x4d2b, 0x36a0, 0xad81, 0xd6ea, 0x35dd, 0x0, 0x1);
        gbc.writeMem(0x35dd, { 0x2 });
        gbc.writeMem(0xdcb9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4d2b);
        EXPECT(gbc.pc(), 0xdcba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcb9), 0xa6);
        // A6 0300
        gbc.setState(0x3e72, 0xd700, 0x4ce0, 0xb593, 0x651a, 0xb60, 0x1, 0x1);
        gbc.writeMem(0xb60, { 0x51 });
        gbc.writeMem(0x3e72, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd700);
        EXPECT(gbc.pc(), 0x3e73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0301
        gbc.setState(0x548a, 0xf0c2, 0xccc0, 0x660f, 0x29e9, 0x94f0, 0x0, 0x0);
        gbc.writeMem(0x548a, { 0xa6 });
        gbc.writeMem(0x94f0, { 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf0c2);
        EXPECT(gbc.pc(), 0x548b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94f0), 0xbf);
        // A6 0302
        gbc.setState(0xd258, 0xe17b, 0x8ac0, 0xf227, 0x4aa6, 0x84ba, 0x1, 0x0);
        gbc.writeMem(0x84ba, { 0xf6 });
        gbc.writeMem(0xd258, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe17b);
        EXPECT(gbc.pc(), 0xd259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ba), 0xf6);
        EXPECT(gbc.readMem(0xd258), 0xa6);
        // A6 0303
        gbc.setState(0x97bb, 0xac64, 0x1e60, 0xfd5, 0xc36f, 0x6a8f, 0x1, 0x1);
        gbc.writeMem(0x6a8f, { 0x20 });
        gbc.writeMem(0x97bb, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xac64);
        EXPECT(gbc.pc(), 0x97bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97bb), 0xa6);
        // A6 0304
        gbc.setState(0xd2ed, 0x1bb0, 0x5210, 0xcb93, 0x5803, 0x2c42, 0x1, 0x1);
        gbc.writeMem(0x2c42, { 0x8a });
        gbc.writeMem(0xd2ed, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1bb0);
        EXPECT(gbc.pc(), 0xd2ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ed), 0xa6);
        // A6 0305
        gbc.setState(0x588f, 0x8731, 0xa130, 0x5eb8, 0xb1b, 0x386d, 0x0, 0x0);
        gbc.writeMem(0x386d, { 0xaf });
        gbc.writeMem(0x588f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8731);
        EXPECT(gbc.pc(), 0x5890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0306
        gbc.setState(0x236d, 0xe39a, 0x73b0, 0xabd4, 0x33f9, 0xf53d, 0x0, 0x1);
        gbc.writeMem(0x236d, { 0xa6 });
        gbc.writeMem(0xf53d, { 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xe39a);
        EXPECT(gbc.pc(), 0x236e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf53d), 0xeb);
        // A6 0307
        gbc.setState(0xb2c5, 0xa21c, 0x4b80, 0xb516, 0x17a6, 0x5a10, 0x0, 0x0);
        gbc.writeMem(0x5a10, { 0x96 });
        gbc.writeMem(0xb2c5, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa21c);
        EXPECT(gbc.pc(), 0xb2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2c5), 0xa6);
        // A6 0308
        gbc.setState(0x748a, 0x6d27, 0x4090, 0x19c, 0x335e, 0xfd63, 0x0, 0x1);
        gbc.writeMem(0x748a, { 0xa6 });
        gbc.writeMem(0xfd63, { 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6d27);
        EXPECT(gbc.pc(), 0x748b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfd63), 0x71);
        // A6 0309
        gbc.setState(0x910a, 0xe53d, 0x76b0, 0x14e4, 0x404e, 0xb6ff, 0x1, 0x0);
        gbc.writeMem(0x910a, { 0xa6 });
        gbc.writeMem(0xb6ff, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe53d);
        EXPECT(gbc.pc(), 0x910b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x910a), 0xa6);
        EXPECT(gbc.readMem(0xb6ff), 0xa2);
        // A6 030A
        gbc.setState(0xbeb6, 0xdb94, 0x18e0, 0x4f8d, 0xa6c, 0x52f, 0x1, 0x1);
        gbc.writeMem(0x52f, { 0xd0 });
        gbc.writeMem(0xbeb6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xdb94);
        EXPECT(gbc.pc(), 0xbeb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0xa6);
        // A6 030B
        gbc.setState(0xd69c, 0x6363, 0xe7e0, 0x69c6, 0xfdbe, 0xf0cf, 0x1, 0x1);
        gbc.writeMem(0xd69c, { 0xa6 });
        gbc.writeMem(0xf0cf, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6363);
        EXPECT(gbc.pc(), 0xd69d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd69c), 0xa6);
        EXPECT(gbc.readMem(0xf0cf), 0x62);
        // A6 030C
        gbc.setState(0x87f2, 0xc019, 0x3a20, 0x1300, 0xaa2b, 0x29b8, 0x1, 0x0);
        gbc.writeMem(0x29b8, { 0x70 });
        gbc.writeMem(0x87f2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc019);
        EXPECT(gbc.pc(), 0x87f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87f2), 0xa6);
        // A6 030D
        gbc.setState(0xce41, 0x4d86, 0x9320, 0xede8, 0xa2d, 0x7b0a, 0x1, 0x0);
        gbc.writeMem(0x7b0a, { 0x10 });
        gbc.writeMem(0xce41, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4d86);
        EXPECT(gbc.pc(), 0xce42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce41), 0xa6);
        // A6 030E
        gbc.setState(0x18fa, 0x8dcd, 0x3e0, 0xb838, 0x2774, 0xa365, 0x0, 0x0);
        gbc.writeMem(0x18fa, { 0xa6 });
        gbc.writeMem(0xa365, { 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8dcd);
        EXPECT(gbc.pc(), 0x18fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa365), 0x1f);
        // A6 030F
        gbc.setState(0x2041, 0xb7c4, 0xa150, 0x7fcd, 0x4231, 0x6d52, 0x1, 0x1);
        gbc.writeMem(0x2041, { 0xa6 });
        gbc.writeMem(0x6d52, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb7c4);
        EXPECT(gbc.pc(), 0x2042);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0310
        gbc.setState(0xb3bc, 0xf19b, 0x8260, 0xecc6, 0x3f20, 0x7c5e, 0x1, 0x1);
        gbc.writeMem(0x7c5e, { 0x97 });
        gbc.writeMem(0xb3bc, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf19b);
        EXPECT(gbc.pc(), 0xb3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3bc), 0xa6);
        // A6 0311
        gbc.setState(0x7537, 0xc604, 0x69e0, 0x5e8f, 0x8fea, 0xc654, 0x0, 0x1);
        gbc.writeMem(0x7537, { 0xa6 });
        gbc.writeMem(0xc654, { 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc604);
        EXPECT(gbc.pc(), 0x7538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc654), 0x5a);
        // A6 0312
        gbc.setState(0xabd1, 0x2ff2, 0x6f70, 0x3e34, 0xcb04, 0x1636, 0x1, 0x1);
        gbc.writeMem(0x1636, { 0x4a });
        gbc.writeMem(0xabd1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x2ff2);
        EXPECT(gbc.pc(), 0xabd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd1), 0xa6);
        // A6 0313
        gbc.setState(0xa4c3, 0x6e14, 0xb7c0, 0x233a, 0x29d0, 0x132c, 0x0, 0x1);
        gbc.writeMem(0x132c, { 0x96 });
        gbc.writeMem(0xa4c3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6e14);
        EXPECT(gbc.pc(), 0xa4c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4c3), 0xa6);
        // A6 0314
        gbc.setState(0x29bf, 0x2a91, 0xbf00, 0x9d06, 0x72be, 0x890, 0x1, 0x0);
        gbc.writeMem(0x890, { 0x42 });
        gbc.writeMem(0x29bf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2a91);
        EXPECT(gbc.pc(), 0x29c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0316
        gbc.setState(0xe097, 0x222b, 0xd780, 0x145c, 0x5a5c, 0x9bcb, 0x1, 0x0);
        gbc.writeMem(0x9bcb, { 0x74 });
        gbc.writeMem(0xe097, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x222b);
        EXPECT(gbc.pc(), 0xe098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bcb), 0x74);
        EXPECT(gbc.readMem(0xe097), 0xa6);
        // A6 0317
        gbc.setState(0xbd1a, 0x848f, 0xb950, 0x83fe, 0x1714, 0xe7cb, 0x0, 0x1);
        gbc.writeMem(0xbd1a, { 0xa6 });
        gbc.writeMem(0xe7cb, { 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x848f);
        EXPECT(gbc.pc(), 0xbd1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd1a), 0xa6);
        EXPECT(gbc.readMem(0xe7cb), 0x70);
        // A6 0318
        gbc.setState(0x932c, 0xab68, 0x70b0, 0xf2c0, 0xae9f, 0x22ff, 0x1, 0x0);
        gbc.writeMem(0x22ff, { 0x13 });
        gbc.writeMem(0x932c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xab68);
        EXPECT(gbc.pc(), 0x932d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x932c), 0xa6);
        // A6 0319
        gbc.setState(0x900d, 0xb2ba, 0x88b0, 0x4158, 0xc5e9, 0x991, 0x0, 0x1);
        gbc.writeMem(0x991, { 0x7c });
        gbc.writeMem(0x900d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb2ba);
        EXPECT(gbc.pc(), 0x900e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900d), 0xa6);
        // A6 031A
        gbc.setState(0xcb38, 0x2ce9, 0xc880, 0xc822, 0x29b3, 0x9a5b, 0x1, 0x0);
        gbc.writeMem(0x9a5b, { 0xd9 });
        gbc.writeMem(0xcb38, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2ce9);
        EXPECT(gbc.pc(), 0xcb39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5b), 0xd9);
        EXPECT(gbc.readMem(0xcb38), 0xa6);
        // A6 031B
        gbc.setState(0xbcd9, 0xd0b3, 0xce00, 0xee17, 0x32f9, 0x5890, 0x1, 0x1);
        gbc.writeMem(0x5890, { 0x5f });
        gbc.writeMem(0xbcd9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd0b3);
        EXPECT(gbc.pc(), 0xbcda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd9), 0xa6);
        // A6 031C
        gbc.setState(0xa64b, 0xef0d, 0x5900, 0x34ab, 0x12a8, 0xaec6, 0x1, 0x1);
        gbc.writeMem(0xa64b, { 0xa6 });
        gbc.writeMem(0xaec6, { 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xef0d);
        EXPECT(gbc.pc(), 0xa64c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa64b), 0xa6);
        EXPECT(gbc.readMem(0xaec6), 0x59);
        // A6 031D
        gbc.setState(0x5375, 0x9d0, 0x7040, 0xb1ae, 0x9c9, 0xc95e, 0x1, 0x0);
        gbc.writeMem(0x5375, { 0xa6 });
        gbc.writeMem(0xc95e, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9d0);
        EXPECT(gbc.pc(), 0x5376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc95e), 0x2b);
        // A6 031E
        gbc.setState(0x3915, 0x550f, 0x4d60, 0xbe15, 0xbe25, 0xb9e6, 0x0, 0x0);
        gbc.writeMem(0x3915, { 0xa6 });
        gbc.writeMem(0xb9e6, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x550f);
        EXPECT(gbc.pc(), 0x3916);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e6), 0x19);
        // A6 031F
        gbc.setState(0xd194, 0xab76, 0x39c0, 0x17d4, 0xa07d, 0x5044, 0x1, 0x0);
        gbc.writeMem(0x5044, { 0x1c });
        gbc.writeMem(0xd194, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xab76);
        EXPECT(gbc.pc(), 0xd195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd194), 0xa6);
        // A6 0320
        gbc.setState(0x5408, 0x98e9, 0x6890, 0xe65d, 0xf490, 0xe971, 0x1, 0x1);
        gbc.writeMem(0x5408, { 0xa6 });
        gbc.writeMem(0xe971, { 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x98e9);
        EXPECT(gbc.pc(), 0x5409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe971), 0xdd);
        // A6 0321
        gbc.setState(0x54e4, 0x10f5, 0x4610, 0xb463, 0xb19, 0x5263, 0x0, 0x1);
        gbc.writeMem(0x5263, { 0xc3 });
        gbc.writeMem(0x54e4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x10f5);
        EXPECT(gbc.pc(), 0x54e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0322
        gbc.setState(0x8dea, 0x5ef5, 0xc860, 0xbe83, 0x8d4d, 0x81d0, 0x0, 0x0);
        gbc.writeMem(0x81d0, { 0x1e });
        gbc.writeMem(0x8dea, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x5ef5);
        EXPECT(gbc.pc(), 0x8deb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81d0), 0x1e);
        EXPECT(gbc.readMem(0x8dea), 0xa6);
        // A6 0323
        gbc.setState(0x1661, 0xb436, 0x19d0, 0x99db, 0xdcff, 0x5a60, 0x1, 0x1);
        gbc.writeMem(0x1661, { 0xa6 });
        gbc.writeMem(0x5a60, { 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb436);
        EXPECT(gbc.pc(), 0x1662);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0324
        gbc.setState(0xcbbd, 0xb7e4, 0x8360, 0xc8f7, 0x8ef5, 0xb4ac, 0x1, 0x0);
        gbc.writeMem(0xb4ac, { 0x84 });
        gbc.writeMem(0xcbbd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xb7e4);
        EXPECT(gbc.pc(), 0xcbbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4ac), 0x84);
        EXPECT(gbc.readMem(0xcbbd), 0xa6);
        // A6 0325
        gbc.setState(0x2cd7, 0x5748, 0x6380, 0x4eaa, 0xfb00, 0x3a1a, 0x0, 0x1);
        gbc.writeMem(0x2cd7, { 0xa6 });
        gbc.writeMem(0x3a1a, { 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5748);
        EXPECT(gbc.pc(), 0x2cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0326
        gbc.setState(0x8fc3, 0x5e38, 0x9b60, 0xd699, 0x6284, 0xaa4f, 0x0, 0x0);
        gbc.writeMem(0x8fc3, { 0xa6 });
        gbc.writeMem(0xaa4f, { 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x5e38);
        EXPECT(gbc.pc(), 0x8fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc3), 0xa6);
        EXPECT(gbc.readMem(0xaa4f), 0x17);
        // A6 0327
        gbc.setState(0x673b, 0xe1f4, 0xf2b0, 0x9007, 0x859, 0x43e6, 0x0, 0x0);
        gbc.writeMem(0x43e6, { 0xf8 });
        gbc.writeMem(0x673b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xe1f4);
        EXPECT(gbc.pc(), 0x673c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0328
        gbc.setState(0xa99d, 0x5bd2, 0x9460, 0x30d8, 0xe27d, 0x6cad, 0x0, 0x1);
        gbc.writeMem(0x6cad, { 0x9a });
        gbc.writeMem(0xa99d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5bd2);
        EXPECT(gbc.pc(), 0xa99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa99d), 0xa6);
        // A6 0329
        gbc.setState(0x3adc, 0xc44e, 0x3810, 0xcddf, 0xbd7, 0x7df4, 0x1, 0x1);
        gbc.writeMem(0x3adc, { 0xa6 });
        gbc.writeMem(0x7df4, { 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc44e);
        EXPECT(gbc.pc(), 0x3add);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 032A
        gbc.setState(0xa15a, 0xf874, 0x9680, 0xb01, 0x291e, 0x200f, 0x1, 0x1);
        gbc.writeMem(0x200f, { 0xc3 });
        gbc.writeMem(0xa15a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf874);
        EXPECT(gbc.pc(), 0xa15b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa15a), 0xa6);
        // A6 032B
        gbc.setState(0x3458, 0x1165, 0x6cb0, 0x84d8, 0x6f0c, 0x85ec, 0x1, 0x1);
        gbc.writeMem(0x3458, { 0xa6 });
        gbc.writeMem(0x85ec, { 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1165);
        EXPECT(gbc.pc(), 0x3459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ec), 0xf1);
        // A6 032D
        gbc.setState(0xc48, 0xf4b9, 0x17d0, 0x913f, 0x3b0d, 0x4263, 0x1, 0x0);
        gbc.writeMem(0xc48, { 0xa6 });
        gbc.writeMem(0x4263, { 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf4b9);
        EXPECT(gbc.pc(), 0xc49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 032F
        gbc.setState(0x1c9b, 0x71cf, 0x4330, 0xd233, 0x387d, 0x9441, 0x0, 0x1);
        gbc.writeMem(0x1c9b, { 0xa6 });
        gbc.writeMem(0x9441, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x71cf);
        EXPECT(gbc.pc(), 0x1c9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9441), 0xf);
        // A6 0330
        gbc.setState(0x7d80, 0x44b5, 0xd5b0, 0xc0e7, 0x2639, 0xeb08, 0x1, 0x0);
        gbc.writeMem(0x7d80, { 0xa6 });
        gbc.writeMem(0xeb08, { 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x44b5);
        EXPECT(gbc.pc(), 0x7d81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb08), 0xc6);
        // A6 0331
        gbc.setState(0xe3b6, 0xc8c5, 0x3980, 0x3fde, 0x9ab3, 0xff81, 0x0, 0x1);
        gbc.writeMem(0xe3b6, { 0xa6 });
        gbc.writeMem(0xff81, { 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc8c5);
        EXPECT(gbc.pc(), 0xe3b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b6), 0xa6);
        EXPECT(gbc.readMem(0xff81), 0x19);
        // A6 0333
        gbc.setState(0xa0ca, 0x1e50, 0x4850, 0x5dfd, 0x9b17, 0x581, 0x0, 0x0);
        gbc.writeMem(0x581, { 0xf0 });
        gbc.writeMem(0xa0ca, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1e50);
        EXPECT(gbc.pc(), 0xa0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ca), 0xa6);
        // A6 0334
        gbc.setState(0x683a, 0x7544, 0x4090, 0x6eee, 0xe309, 0x9a8d, 0x1, 0x1);
        gbc.writeMem(0x683a, { 0xa6 });
        gbc.writeMem(0x9a8d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7544);
        EXPECT(gbc.pc(), 0x683b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8d), 0x4f);
        // A6 0335
        gbc.setState(0xbfd0, 0x2531, 0xdb00, 0xdafb, 0xf4a5, 0x9a3a, 0x1, 0x0);
        gbc.writeMem(0x9a3a, { 0xd7 });
        gbc.writeMem(0xbfd0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2531);
        EXPECT(gbc.pc(), 0xbfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3a), 0xd7);
        EXPECT(gbc.readMem(0xbfd0), 0xa6);
        // A6 0336
        gbc.setState(0x15fc, 0x2dfc, 0x4480, 0xd766, 0xc10e, 0xcf0c, 0x0, 0x1);
        gbc.writeMem(0x15fc, { 0xa6 });
        gbc.writeMem(0xcf0c, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2dfc);
        EXPECT(gbc.pc(), 0x15fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0c), 0x2b);
        // A6 0337
        gbc.setState(0x799b, 0xfce8, 0xb4c0, 0x9a3e, 0x9a14, 0x551c, 0x0, 0x1);
        gbc.writeMem(0x551c, { 0x1a });
        gbc.writeMem(0x799b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xfce8);
        EXPECT(gbc.pc(), 0x799c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0338
        gbc.setState(0x7e23, 0x5c37, 0x36e0, 0xdc2, 0xa3e1, 0x4787, 0x0, 0x0);
        gbc.writeMem(0x4787, { 0xb2 });
        gbc.writeMem(0x7e23, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5c37);
        EXPECT(gbc.pc(), 0x7e24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0339
        gbc.setState(0x9b58, 0x7358, 0x9cc0, 0x81cd, 0xa16f, 0xf569, 0x1, 0x0);
        gbc.writeMem(0x9b58, { 0xa6 });
        gbc.writeMem(0xf569, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7358);
        EXPECT(gbc.pc(), 0x9b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b58), 0xa6);
        EXPECT(gbc.readMem(0xf569), 0xb7);
        // A6 033A
        gbc.setState(0x8142, 0x97e6, 0x55e0, 0xa139, 0xfbf2, 0x950b, 0x1, 0x0);
        gbc.writeMem(0x8142, { 0xa6 });
        gbc.writeMem(0x950b, { 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x97e6);
        EXPECT(gbc.pc(), 0x8143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8142), 0xa6);
        EXPECT(gbc.readMem(0x950b), 0x61);
        // A6 033B
        gbc.setState(0xba56, 0x9110, 0x4700, 0x8bb6, 0x6492, 0x49a4, 0x1, 0x1);
        gbc.writeMem(0x49a4, { 0xb1 });
        gbc.writeMem(0xba56, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9110);
        EXPECT(gbc.pc(), 0xba57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba56), 0xa6);
        // A6 033C
        gbc.setState(0x6818, 0xd01b, 0x7820, 0x3586, 0x3ff3, 0x4dc2, 0x0, 0x1);
        gbc.writeMem(0x4dc2, { 0x20 });
        gbc.writeMem(0x6818, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xd01b);
        EXPECT(gbc.pc(), 0x6819);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 033D
        gbc.setState(0xe2c, 0x707c, 0x78b0, 0x1e51, 0x4a12, 0xcd85, 0x1, 0x0);
        gbc.writeMem(0xe2c, { 0xa6 });
        gbc.writeMem(0xcd85, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x707c);
        EXPECT(gbc.pc(), 0xe2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd85), 0xf5);
        // A6 033E
        gbc.setState(0x9006, 0xdf90, 0xbb0, 0xf904, 0x80e0, 0x258a, 0x0, 0x1);
        gbc.writeMem(0x258a, { 0xa6 });
        gbc.writeMem(0x9006, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdf90);
        EXPECT(gbc.pc(), 0x9007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9006), 0xa6);
        // A6 033F
        gbc.setState(0x377d, 0xddae, 0xb110, 0x219c, 0x277d, 0x1812, 0x1, 0x0);
        gbc.writeMem(0x1812, { 0x44 });
        gbc.writeMem(0x377d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xddae);
        EXPECT(gbc.pc(), 0x377e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0340
        gbc.setState(0x5fcf, 0x2ea1, 0x67a0, 0x97e5, 0xb46b, 0xc0c0, 0x0, 0x1);
        gbc.writeMem(0x5fcf, { 0xa6 });
        gbc.writeMem(0xc0c0, { 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2ea1);
        EXPECT(gbc.pc(), 0x5fd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0c0), 0xbd);
        // A6 0341
        gbc.setState(0xc87, 0x4e2d, 0x20d0, 0xdf95, 0x6fd8, 0xa936, 0x0, 0x1);
        gbc.writeMem(0xc87, { 0xa6 });
        gbc.writeMem(0xa936, { 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4e2d);
        EXPECT(gbc.pc(), 0xc88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa936), 0xb3);
        // A6 0342
        gbc.setState(0x97e1, 0x16e4, 0x7940, 0xa204, 0x7970, 0xab67, 0x0, 0x1);
        gbc.writeMem(0x97e1, { 0xa6 });
        gbc.writeMem(0xab67, { 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x16e4);
        EXPECT(gbc.pc(), 0x97e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e1), 0xa6);
        EXPECT(gbc.readMem(0xab67), 0x2e);
        // A6 0344
        gbc.setState(0xb93b, 0xdfde, 0x4ce0, 0x20b3, 0xa9c9, 0xf456, 0x1, 0x0);
        gbc.writeMem(0xb93b, { 0xa6 });
        gbc.writeMem(0xf456, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xdfde);
        EXPECT(gbc.pc(), 0xb93c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93b), 0xa6);
        EXPECT(gbc.readMem(0xf456), 0x62);
        // A6 0346
        gbc.setState(0x48e1, 0x5123, 0x4c90, 0xace4, 0xf1fa, 0xee1, 0x0, 0x0);
        gbc.writeMem(0xee1, { 0xd5 });
        gbc.writeMem(0x48e1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5123);
        EXPECT(gbc.pc(), 0x48e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0347
        gbc.setState(0x6e6d, 0x83ac, 0x1c00, 0xd4c5, 0x8202, 0x5bf3, 0x1, 0x1);
        gbc.writeMem(0x5bf3, { 0x95 });
        gbc.writeMem(0x6e6d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x83ac);
        EXPECT(gbc.pc(), 0x6e6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0348
        gbc.setState(0x4ad4, 0x9e1, 0xd290, 0xec2e, 0x6613, 0xca45, 0x1, 0x1);
        gbc.writeMem(0x4ad4, { 0xa6 });
        gbc.writeMem(0xca45, { 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9e1);
        EXPECT(gbc.pc(), 0x4ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca45), 0x7c);
        // A6 0349
        gbc.setState(0x5e7, 0x74eb, 0x2cd0, 0xed11, 0xb683, 0x4fb8, 0x0, 0x0);
        gbc.writeMem(0x5e7, { 0xa6 });
        gbc.writeMem(0x4fb8, { 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x74eb);
        EXPECT(gbc.pc(), 0x5e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 034A
        gbc.setState(0xbf01, 0xa14, 0xcbe0, 0x7ccf, 0x8918, 0x51e, 0x0, 0x0);
        gbc.writeMem(0x51e, { 0xde });
        gbc.writeMem(0xbf01, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa14);
        EXPECT(gbc.pc(), 0xbf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf01), 0xa6);
        // A6 034B
        gbc.setState(0x5f03, 0x7b33, 0x2c60, 0xf1bd, 0xbbee, 0x6a20, 0x1, 0x1);
        gbc.writeMem(0x5f03, { 0xa6 });
        gbc.writeMem(0x6a20, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7b33);
        EXPECT(gbc.pc(), 0x5f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 034C
        gbc.setState(0x7de1, 0x57ec, 0xa9a0, 0x7bb9, 0xbf5, 0x5ea3, 0x1, 0x1);
        gbc.writeMem(0x5ea3, { 0xe4 });
        gbc.writeMem(0x7de1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x57ec);
        EXPECT(gbc.pc(), 0x7de2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 034D
        gbc.setState(0xc11c, 0x95ac, 0x2e60, 0xb605, 0x380f, 0xb8cd, 0x0, 0x1);
        gbc.writeMem(0xb8cd, { 0xfc });
        gbc.writeMem(0xc11c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x95ac);
        EXPECT(gbc.pc(), 0xc11d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8cd), 0xfc);
        EXPECT(gbc.readMem(0xc11c), 0xa6);
        // A6 034E
        gbc.setState(0x38f, 0x103c, 0x54c0, 0x92ec, 0x9565, 0x183d, 0x0, 0x1);
        gbc.writeMem(0x38f, { 0xa6 });
        gbc.writeMem(0x183d, { 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x103c);
        EXPECT(gbc.pc(), 0x390);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 034F
        gbc.setState(0xa9, 0xa7f, 0xa0a0, 0x5aa0, 0x6289, 0xb422, 0x1, 0x1);
        gbc.writeMem(0xa9, { 0xa6 });
        gbc.writeMem(0xb422, { 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa7f);
        EXPECT(gbc.pc(), 0xaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb422), 0xa1);
        // A6 0350
        gbc.setState(0xec10, 0x2f29, 0xd840, 0x28c6, 0x763c, 0x9c43, 0x0, 0x0);
        gbc.writeMem(0x9c43, { 0xf8 });
        gbc.writeMem(0xec10, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2f29);
        EXPECT(gbc.pc(), 0xec11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c43), 0xf8);
        EXPECT(gbc.readMem(0xec10), 0xa6);
        // A6 0351
        gbc.setState(0x18f8, 0xcfd7, 0xa840, 0x27b6, 0x6649, 0xf344, 0x0, 0x0);
        gbc.writeMem(0x18f8, { 0xa6 });
        gbc.writeMem(0xf344, { 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcfd7);
        EXPECT(gbc.pc(), 0x18f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf344), 0xce);
        // A6 0352
        gbc.setState(0x3150, 0xa5b6, 0x70f0, 0x5ab5, 0x608c, 0x4dca, 0x1, 0x0);
        gbc.writeMem(0x3150, { 0xa6 });
        gbc.writeMem(0x4dca, { 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xa5b6);
        EXPECT(gbc.pc(), 0x3151);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0354
        gbc.setState(0x78bd, 0xdcde, 0xb490, 0x6bcb, 0xf40e, 0x5805, 0x1, 0x0);
        gbc.writeMem(0x5805, { 0x63 });
        gbc.writeMem(0x78bd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdcde);
        EXPECT(gbc.pc(), 0x78be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0355
        gbc.setState(0xe500, 0x953f, 0x8540, 0xc5b0, 0x3863, 0x4185, 0x0, 0x0);
        gbc.writeMem(0x4185, { 0xb2 });
        gbc.writeMem(0xe500, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x953f);
        EXPECT(gbc.pc(), 0xe501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe500), 0xa6);
        // A6 0356
        gbc.setState(0xee7d, 0x3f5a, 0x9eb0, 0xf447, 0x68ce, 0x9a74, 0x0, 0x1);
        gbc.writeMem(0x9a74, { 0x16 });
        gbc.writeMem(0xee7d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3f5a);
        EXPECT(gbc.pc(), 0xee7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a74), 0x16);
        EXPECT(gbc.readMem(0xee7d), 0xa6);
        // A6 0357
        gbc.setState(0x23e6, 0xbab8, 0x74e0, 0x50f, 0x7214, 0xbae2, 0x1, 0x0);
        gbc.writeMem(0x23e6, { 0xa6 });
        gbc.writeMem(0xbae2, { 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xbab8);
        EXPECT(gbc.pc(), 0x23e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbae2), 0x47);
        // A6 0358
        gbc.setState(0xe610, 0x1968, 0x4b0, 0x3b7, 0x4c2a, 0x2460, 0x1, 0x0);
        gbc.writeMem(0x2460, { 0x96 });
        gbc.writeMem(0xe610, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x1968);
        EXPECT(gbc.pc(), 0xe611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe610), 0xa6);
        // A6 0359
        gbc.setState(0x8969, 0x4929, 0xfd50, 0xed40, 0xd45e, 0x1196, 0x0, 0x0);
        gbc.writeMem(0x1196, { 0x3e });
        gbc.writeMem(0x8969, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4929);
        EXPECT(gbc.pc(), 0x896a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8969), 0xa6);
        // A6 035A
        gbc.setState(0xef66, 0x77f, 0x27f0, 0xdb0, 0x5c08, 0xcffc, 0x0, 0x1);
        gbc.writeMem(0xcffc, { 0x9f });
        gbc.writeMem(0xef66, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x77f);
        EXPECT(gbc.pc(), 0xef67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcffc), 0x9f);
        EXPECT(gbc.readMem(0xef66), 0xa6);
        // A6 035B
        gbc.setState(0xbdb1, 0xac17, 0x3ed0, 0xf2fd, 0xea02, 0x84cd, 0x0, 0x1);
        gbc.writeMem(0x84cd, { 0x73 });
        gbc.writeMem(0xbdb1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xac17);
        EXPECT(gbc.pc(), 0xbdb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84cd), 0x73);
        EXPECT(gbc.readMem(0xbdb1), 0xa6);
        // A6 035C
        gbc.setState(0x78fb, 0xf2a3, 0xad10, 0x20b6, 0xef5, 0x8e86, 0x0, 0x0);
        gbc.writeMem(0x78fb, { 0xa6 });
        gbc.writeMem(0x8e86, { 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf2a3);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e86), 0x94);
        // A6 035D
        gbc.setState(0x7c30, 0xe9f, 0x1f30, 0x51e2, 0x3a7b, 0x88b5, 0x1, 0x0);
        gbc.writeMem(0x7c30, { 0xa6 });
        gbc.writeMem(0x88b5, { 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe9f);
        EXPECT(gbc.pc(), 0x7c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b5), 0x24);
        // A6 035E
        gbc.setState(0x2a02, 0x66c4, 0xc460, 0x2556, 0x656a, 0x7832, 0x0, 0x1);
        gbc.writeMem(0x2a02, { 0xa6 });
        gbc.writeMem(0x7832, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x66c4);
        EXPECT(gbc.pc(), 0x2a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 035F
        gbc.setState(0xe21c, 0xc6d8, 0xd5a0, 0x5d65, 0xa3ad, 0xa6b2, 0x1, 0x0);
        gbc.writeMem(0xa6b2, { 0xa1 });
        gbc.writeMem(0xe21c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc6d8);
        EXPECT(gbc.pc(), 0xe21d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b2), 0xa1);
        EXPECT(gbc.readMem(0xe21c), 0xa6);
        // A6 0360
        gbc.setState(0x7ad, 0xdcdd, 0x5280, 0x17ae, 0x40ec, 0xc585, 0x0, 0x0);
        gbc.writeMem(0x7ad, { 0xa6 });
        gbc.writeMem(0xc585, { 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xdcdd);
        EXPECT(gbc.pc(), 0x7ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc585), 0xe2);
        // A6 0361
        gbc.setState(0x103b, 0x761f, 0x74b0, 0xeffc, 0x5584, 0x21ce, 0x0, 0x1);
        gbc.writeMem(0x103b, { 0xa6 });
        gbc.writeMem(0x21ce, { 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x761f);
        EXPECT(gbc.pc(), 0x103c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0362
        gbc.setState(0x472d, 0x8e48, 0x8300, 0x5e5a, 0xcac6, 0x21bc, 0x0, 0x0);
        gbc.writeMem(0x21bc, { 0xe2 });
        gbc.writeMem(0x472d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x8e48);
        EXPECT(gbc.pc(), 0x472e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0363
        gbc.setState(0x93ac, 0x6bc6, 0x8690, 0x371f, 0xf5f3, 0x91a8, 0x0, 0x1);
        gbc.writeMem(0x91a8, { 0x8b });
        gbc.writeMem(0x93ac, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6bc6);
        EXPECT(gbc.pc(), 0x93ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91a8), 0x8b);
        EXPECT(gbc.readMem(0x93ac), 0xa6);
        // A6 0364
        gbc.setState(0xc3cf, 0x22c7, 0xb6b0, 0x5e07, 0xb754, 0x4fcb, 0x0, 0x1);
        gbc.writeMem(0x4fcb, { 0x33 });
        gbc.writeMem(0xc3cf, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x22c7);
        EXPECT(gbc.pc(), 0xc3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3cf), 0xa6);
        // A6 0365
        gbc.setState(0xe70e, 0xad0e, 0x6850, 0xd785, 0xf2b3, 0xcf2, 0x0, 0x1);
        gbc.writeMem(0xcf2, { 0xbd });
        gbc.writeMem(0xe70e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xad0e);
        EXPECT(gbc.pc(), 0xe70f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe70e), 0xa6);
        // A6 0367
        gbc.setState(0x4326, 0x31d2, 0xd420, 0x3020, 0xeff6, 0x138c, 0x0, 0x0);
        gbc.writeMem(0x138c, { 0x81 });
        gbc.writeMem(0x4326, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x31d2);
        EXPECT(gbc.pc(), 0x4327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0368
        gbc.setState(0xcfe3, 0x4205, 0x2680, 0xe865, 0x964f, 0x133f, 0x0, 0x1);
        gbc.writeMem(0x133f, { 0x79 });
        gbc.writeMem(0xcfe3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4205);
        EXPECT(gbc.pc(), 0xcfe4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe3), 0xa6);
        // A6 0369
        gbc.setState(0xd816, 0xd4d3, 0x9900, 0xffc3, 0xe33d, 0x56cb, 0x0, 0x1);
        gbc.writeMem(0x56cb, { 0x8c });
        gbc.writeMem(0xd816, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd4d3);
        EXPECT(gbc.pc(), 0xd817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd816), 0xa6);
        // A6 036A
        gbc.setState(0xb50c, 0x7af9, 0xc520, 0x254a, 0x8dd1, 0x31, 0x0, 0x1);
        gbc.writeMem(0x31, { 0xc5 });
        gbc.writeMem(0xb50c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7af9);
        EXPECT(gbc.pc(), 0xb50d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb50c), 0xa6);
        // A6 036B
        gbc.setState(0x9cc9, 0x692e, 0x610, 0xd53d, 0x995c, 0x873a, 0x0, 0x1);
        gbc.writeMem(0x873a, { 0xd0 });
        gbc.writeMem(0x9cc9, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x692e);
        EXPECT(gbc.pc(), 0x9cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873a), 0xd0);
        EXPECT(gbc.readMem(0x9cc9), 0xa6);
        // A6 036C
        gbc.setState(0xe29a, 0x4b34, 0x4c90, 0x321e, 0x8eff, 0xb0f1, 0x0, 0x1);
        gbc.writeMem(0xb0f1, { 0x4a });
        gbc.writeMem(0xe29a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4b34);
        EXPECT(gbc.pc(), 0xe29b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0f1), 0x4a);
        EXPECT(gbc.readMem(0xe29a), 0xa6);
        // A6 036E
        gbc.setState(0xc32b, 0x4718, 0xfc70, 0xd855, 0xbd62, 0x5aa8, 0x1, 0x1);
        gbc.writeMem(0x5aa8, { 0x2c });
        gbc.writeMem(0xc32b, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4718);
        EXPECT(gbc.pc(), 0xc32c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc32b), 0xa6);
        // A6 036F
        gbc.setState(0xe61c, 0x8395, 0x4e30, 0x50fd, 0x99f2, 0xa31, 0x0, 0x0);
        gbc.writeMem(0xa31, { 0x5 });
        gbc.writeMem(0xe61c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8395);
        EXPECT(gbc.pc(), 0xe61d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe61c), 0xa6);
        // A6 0370
        gbc.setState(0x79d6, 0x2d8d, 0x8dc0, 0x429c, 0x454, 0x212e, 0x1, 0x1);
        gbc.writeMem(0x212e, { 0x2f });
        gbc.writeMem(0x79d6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2d8d);
        EXPECT(gbc.pc(), 0x79d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0371
        gbc.setState(0x629d, 0xe935, 0x6940, 0x6f02, 0x887, 0xe0c0, 0x1, 0x0);
        gbc.writeMem(0x629d, { 0xa6 });
        gbc.writeMem(0xe0c0, { 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe935);
        EXPECT(gbc.pc(), 0x629e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0c0), 0x44);
        // A6 0372
        gbc.setState(0xd0b8, 0xaec3, 0x96e0, 0xbe87, 0xb092, 0x62f4, 0x1, 0x1);
        gbc.writeMem(0x62f4, { 0x89 });
        gbc.writeMem(0xd0b8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xaec3);
        EXPECT(gbc.pc(), 0xd0b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b8), 0xa6);
        // A6 0373
        gbc.setState(0xd0aa, 0x6892, 0xb740, 0x5c6d, 0x82b0, 0x992b, 0x0, 0x0);
        gbc.writeMem(0x992b, { 0x2a });
        gbc.writeMem(0xd0aa, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6892);
        EXPECT(gbc.pc(), 0xd0ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992b), 0x2a);
        EXPECT(gbc.readMem(0xd0aa), 0xa6);
        // A6 0374
        gbc.setState(0x25d4, 0x334, 0xb360, 0x42c7, 0x1d80, 0xa2f6, 0x0, 0x0);
        gbc.writeMem(0x25d4, { 0xa6 });
        gbc.writeMem(0xa2f6, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x334);
        EXPECT(gbc.pc(), 0x25d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f6), 0x11);
        // A6 0375
        gbc.setState(0x5ed2, 0x94ba, 0xb8b0, 0x588c, 0xf78b, 0xa01, 0x0, 0x1);
        gbc.writeMem(0xa01, { 0xb6 });
        gbc.writeMem(0x5ed2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x94ba);
        EXPECT(gbc.pc(), 0x5ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0376
        gbc.setState(0x2bbf, 0x7db2, 0xc5e0, 0xc5a8, 0xbf2a, 0xd073, 0x1, 0x1);
        gbc.writeMem(0x2bbf, { 0xa6 });
        gbc.writeMem(0xd073, { 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7db2);
        EXPECT(gbc.pc(), 0x2bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd073), 0x76);
        // A6 0377
        gbc.setState(0xd13, 0xea0c, 0xff20, 0xb9f6, 0xcd0f, 0xaeab, 0x0, 0x0);
        gbc.writeMem(0xd13, { 0xa6 });
        gbc.writeMem(0xaeab, { 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xea0c);
        EXPECT(gbc.pc(), 0xd14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeab), 0xda);
        // A6 0378
        gbc.setState(0x2107, 0x402b, 0x91c0, 0xbbcb, 0x2f04, 0x8a3c, 0x1, 0x1);
        gbc.writeMem(0x2107, { 0xa6 });
        gbc.writeMem(0x8a3c, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x402b);
        EXPECT(gbc.pc(), 0x2108);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a3c), 0xd6);
        // A6 0379
        gbc.setState(0x9395, 0xc9b4, 0xf250, 0xf62d, 0x9313, 0x62f3, 0x0, 0x0);
        gbc.writeMem(0x62f3, { 0x7c });
        gbc.writeMem(0x9395, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc9b4);
        EXPECT(gbc.pc(), 0x9396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9395), 0xa6);
        // A6 037A
        gbc.setState(0xcece, 0xa875, 0xea60, 0xfdc7, 0x14cf, 0x525b, 0x1, 0x1);
        gbc.writeMem(0x525b, { 0xf5 });
        gbc.writeMem(0xcece, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa875);
        EXPECT(gbc.pc(), 0xcecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcece), 0xa6);
        // A6 037C
        gbc.setState(0x5278, 0xa6b3, 0x4c40, 0x7a79, 0xa1b9, 0x7370, 0x1, 0x1);
        gbc.writeMem(0x5278, { 0xa6 });
        gbc.writeMem(0x7370, { 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa6b3);
        EXPECT(gbc.pc(), 0x5279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 037D
        gbc.setState(0x2c06, 0x7d1d, 0xfab0, 0x939f, 0xe823, 0x718, 0x0, 0x0);
        gbc.writeMem(0x718, { 0x20 });
        gbc.writeMem(0x2c06, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7d1d);
        EXPECT(gbc.pc(), 0x2c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 037E
        gbc.setState(0x72b9, 0xa8b3, 0xf930, 0x999e, 0xeb53, 0xd92d, 0x1, 0x0);
        gbc.writeMem(0x72b9, { 0xa6 });
        gbc.writeMem(0xd92d, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa8b3);
        EXPECT(gbc.pc(), 0x72ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92d), 0x21);
        // A6 037F
        gbc.setState(0xa122, 0x3e35, 0xf740, 0x8dce, 0x8ac7, 0x38fd, 0x0, 0x0);
        gbc.writeMem(0x38fd, { 0x2e });
        gbc.writeMem(0xa122, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3e35);
        EXPECT(gbc.pc(), 0xa123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa122), 0xa6);
        // A6 0380
        gbc.setState(0x7a96, 0x6ab2, 0x70, 0xef8, 0xe6ec, 0xdf2a, 0x0, 0x1);
        gbc.writeMem(0x7a96, { 0xa6 });
        gbc.writeMem(0xdf2a, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6ab2);
        EXPECT(gbc.pc(), 0x7a97);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf2a), 0x6e);
        // A6 0381
        gbc.setState(0xc75a, 0x2cbe, 0x47d0, 0x6044, 0xbc7b, 0x509b, 0x1, 0x1);
        gbc.writeMem(0x509b, { 0xaf });
        gbc.writeMem(0xc75a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2cbe);
        EXPECT(gbc.pc(), 0xc75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc75a), 0xa6);
        // A6 0382
        gbc.setState(0x9733, 0x9a03, 0x1c0, 0x7998, 0x8177, 0x4fad, 0x0, 0x1);
        gbc.writeMem(0x4fad, { 0x45 });
        gbc.writeMem(0x9733, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9a03);
        EXPECT(gbc.pc(), 0x9734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9733), 0xa6);
        // A6 0383
        gbc.setState(0xe1a0, 0x8287, 0x36c0, 0xe4de, 0xd374, 0xa075, 0x1, 0x0);
        gbc.writeMem(0xa075, { 0xc0 });
        gbc.writeMem(0xe1a0, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8287);
        EXPECT(gbc.pc(), 0xe1a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa075), 0xc0);
        EXPECT(gbc.readMem(0xe1a0), 0xa6);
        // A6 0384
        gbc.setState(0xcdd4, 0x49f9, 0x2d80, 0x65b0, 0xf433, 0xddee, 0x0, 0x1);
        gbc.writeMem(0xcdd4, { 0xa6 });
        gbc.writeMem(0xddee, { 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x49f9);
        EXPECT(gbc.pc(), 0xcdd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdd4), 0xa6);
        EXPECT(gbc.readMem(0xddee), 0x80);
        // A6 0385
        gbc.setState(0x69c4, 0x7ece, 0xf150, 0x6907, 0xc3d0, 0x545f, 0x0, 0x0);
        gbc.writeMem(0x545f, { 0xde });
        gbc.writeMem(0x69c4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7ece);
        EXPECT(gbc.pc(), 0x69c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0386
        gbc.setState(0x7877, 0x4cfd, 0xcb70, 0x78e3, 0xe014, 0xaf67, 0x0, 0x1);
        gbc.writeMem(0x7877, { 0xa6 });
        gbc.writeMem(0xaf67, { 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4cfd);
        EXPECT(gbc.pc(), 0x7878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf67), 0x15);
        // A6 0387
        gbc.setState(0xc124, 0x7d09, 0xa920, 0x38d, 0xf9f2, 0xb860, 0x1, 0x0);
        gbc.writeMem(0xb860, { 0x62 });
        gbc.writeMem(0xc124, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7d09);
        EXPECT(gbc.pc(), 0xc125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb860), 0x62);
        EXPECT(gbc.readMem(0xc124), 0xa6);
        // A6 0388
        gbc.setState(0x90ba, 0xcab7, 0xa740, 0xa7c4, 0x3b2f, 0xf89d, 0x0, 0x0);
        gbc.writeMem(0x90ba, { 0xa6 });
        gbc.writeMem(0xf89d, { 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xcab7);
        EXPECT(gbc.pc(), 0x90bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90ba), 0xa6);
        EXPECT(gbc.readMem(0xf89d), 0x23);
        // A6 0389
        gbc.setState(0x622, 0x9066, 0x2900, 0x8597, 0x17aa, 0x61b3, 0x0, 0x0);
        gbc.writeMem(0x622, { 0xa6 });
        gbc.writeMem(0x61b3, { 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9066);
        EXPECT(gbc.pc(), 0x623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 038A
        gbc.setState(0xd1a0, 0x17d, 0x38f0, 0xa8e9, 0x85a2, 0xd5b4, 0x0, 0x1);
        gbc.writeMem(0xd1a0, { 0xa6 });
        gbc.writeMem(0xd5b4, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x17d);
        EXPECT(gbc.pc(), 0xd1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a0), 0xa6);
        EXPECT(gbc.readMem(0xd5b4), 0xd3);
        // A6 038B
        gbc.setState(0xeb97, 0xc019, 0x820, 0x7937, 0x82d5, 0xfdfc, 0x1, 0x0);
        gbc.writeMem(0xeb97, { 0xa6 });
        gbc.writeMem(0xfdfc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc019);
        EXPECT(gbc.pc(), 0xeb98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb97), 0xa6);
        EXPECT(gbc.readMem(0xfdfc), 0xd);
        // A6 038D
        gbc.setState(0x1f31, 0xcf7d, 0xe190, 0xe725, 0xbcac, 0x5f6d, 0x1, 0x0);
        gbc.writeMem(0x1f31, { 0xa6 });
        gbc.writeMem(0x5f6d, { 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xcf7d);
        EXPECT(gbc.pc(), 0x1f32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 038E
        gbc.setState(0x46ef, 0xc859, 0x40f0, 0x93d2, 0xd20f, 0xebf6, 0x0, 0x0);
        gbc.writeMem(0x46ef, { 0xa6 });
        gbc.writeMem(0xebf6, { 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc859);
        EXPECT(gbc.pc(), 0x46f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebf6), 0x13);
        // A6 038F
        gbc.setState(0x36be, 0xc17, 0x5990, 0xf3c, 0xc703, 0x2402, 0x0, 0x1);
        gbc.writeMem(0x2402, { 0xd5 });
        gbc.writeMem(0x36be, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc17);
        EXPECT(gbc.pc(), 0x36bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0390
        gbc.setState(0x8f85, 0x2889, 0xb770, 0xe741, 0x6741, 0xbcf2, 0x0, 0x1);
        gbc.writeMem(0x8f85, { 0xa6 });
        gbc.writeMem(0xbcf2, { 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2889);
        EXPECT(gbc.pc(), 0x8f86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f85), 0xa6);
        EXPECT(gbc.readMem(0xbcf2), 0x5b);
        // A6 0391
        gbc.setState(0x4ed8, 0x6e9d, 0x4180, 0xf367, 0xd956, 0x10cf, 0x0, 0x1);
        gbc.writeMem(0x10cf, { 0x17 });
        gbc.writeMem(0x4ed8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6e9d);
        EXPECT(gbc.pc(), 0x4ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0392
        gbc.setState(0x61c1, 0xe595, 0x1910, 0x9c45, 0x2823, 0x3edc, 0x1, 0x0);
        gbc.writeMem(0x3edc, { 0xbf });
        gbc.writeMem(0x61c1, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe595);
        EXPECT(gbc.pc(), 0x61c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0393
        gbc.setState(0xd620, 0x7236, 0x2990, 0x3584, 0x4c11, 0x8ed3, 0x0, 0x1);
        gbc.writeMem(0x8ed3, { 0x53 });
        gbc.writeMem(0xd620, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7236);
        EXPECT(gbc.pc(), 0xd621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed3), 0x53);
        EXPECT(gbc.readMem(0xd620), 0xa6);
        // A6 0394
        gbc.setState(0x9e2f, 0x1b23, 0x10c0, 0xfa14, 0xb151, 0x6f89, 0x0, 0x0);
        gbc.writeMem(0x6f89, { 0x5e });
        gbc.writeMem(0x9e2f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1b23);
        EXPECT(gbc.pc(), 0x9e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2f), 0xa6);
        // A6 0395
        gbc.setState(0xa274, 0x2096, 0x44e0, 0xf944, 0xe809, 0x93f2, 0x0, 0x0);
        gbc.writeMem(0x93f2, { 0x0 });
        gbc.writeMem(0xa274, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x2096);
        EXPECT(gbc.pc(), 0xa275);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f2), 0x0);
        EXPECT(gbc.readMem(0xa274), 0xa6);
        // A6 0396
        gbc.setState(0x2138, 0xe977, 0xf1b0, 0x4374, 0xb3ef, 0xcb6f, 0x0, 0x1);
        gbc.writeMem(0x2138, { 0xa6 });
        gbc.writeMem(0xcb6f, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe977);
        EXPECT(gbc.pc(), 0x2139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb6f), 0x52);
        // A6 0397
        gbc.setState(0x2fd4, 0xd92, 0x79d0, 0x5e87, 0x4d46, 0x726, 0x1, 0x1);
        gbc.writeMem(0x726, { 0x19 });
        gbc.writeMem(0x2fd4, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd92);
        EXPECT(gbc.pc(), 0x2fd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 0398
        gbc.setState(0x885d, 0x7cd3, 0x7410, 0xafe0, 0x9983, 0xc3, 0x1, 0x1);
        gbc.writeMem(0xc3, { 0xf6 });
        gbc.writeMem(0x885d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7cd3);
        EXPECT(gbc.pc(), 0x885e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x885d), 0xa6);
        // A6 0399
        gbc.setState(0x504b, 0xaf0, 0xaa00, 0x6700, 0x6216, 0x68ba, 0x1, 0x0);
        gbc.writeMem(0x504b, { 0xa6 });
        gbc.writeMem(0x68ba, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xaf0);
        EXPECT(gbc.pc(), 0x504c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 039A
        gbc.setState(0xa0b5, 0xd1f, 0xed90, 0xa313, 0xc547, 0xce02, 0x1, 0x1);
        gbc.writeMem(0xa0b5, { 0xa6 });
        gbc.writeMem(0xce02, { 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd1f);
        EXPECT(gbc.pc(), 0xa0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b5), 0xa6);
        EXPECT(gbc.readMem(0xce02), 0x6b);
        // A6 039B
        gbc.setState(0x3915, 0x232f, 0xac90, 0x6f14, 0x4b96, 0xebff, 0x1, 0x0);
        gbc.writeMem(0x3915, { 0xa6 });
        gbc.writeMem(0xebff, { 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x232f);
        EXPECT(gbc.pc(), 0x3916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebff), 0x6e);
        // A6 039C
        gbc.setState(0x561a, 0x6975, 0x1c30, 0xafae, 0xc275, 0x1007, 0x0, 0x0);
        gbc.writeMem(0x1007, { 0x88 });
        gbc.writeMem(0x561a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6975);
        EXPECT(gbc.pc(), 0x561b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 039D
        gbc.setState(0x468b, 0xc013, 0xd460, 0x23a2, 0xacb7, 0xabae, 0x1, 0x1);
        gbc.writeMem(0x468b, { 0xa6 });
        gbc.writeMem(0xabae, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc013);
        EXPECT(gbc.pc(), 0x468c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabae), 0xd6);
        // A6 039E
        gbc.setState(0x3366, 0xbf15, 0xd680, 0x95ed, 0xdf5, 0xb725, 0x1, 0x0);
        gbc.writeMem(0x3366, { 0xa6 });
        gbc.writeMem(0xb725, { 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xbf15);
        EXPECT(gbc.pc(), 0x3367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb725), 0xbe);
        // A6 039F
        gbc.setState(0x3625, 0x2c1b, 0x7410, 0xf14, 0xf12, 0xbfe4, 0x0, 0x0);
        gbc.writeMem(0x3625, { 0xa6 });
        gbc.writeMem(0xbfe4, { 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2c1b);
        EXPECT(gbc.pc(), 0x3626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe4), 0x9);
        // A6 03A0
        gbc.setState(0x5305, 0x671e, 0xbd90, 0xc3f1, 0x2bca, 0xdb14, 0x1, 0x0);
        gbc.writeMem(0x5305, { 0xa6 });
        gbc.writeMem(0xdb14, { 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x671e);
        EXPECT(gbc.pc(), 0x5306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb14), 0x40);
        // A6 03A1
        gbc.setState(0xd9ce, 0xd156, 0x1c90, 0x92d7, 0xd6ce, 0xec50, 0x0, 0x1);
        gbc.writeMem(0xd9ce, { 0xa6 });
        gbc.writeMem(0xec50, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd156);
        EXPECT(gbc.pc(), 0xd9cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ce), 0xa6);
        EXPECT(gbc.readMem(0xec50), 0xd6);
        // A6 03A2
        gbc.setState(0xceb3, 0xd5a8, 0x3370, 0x3bf4, 0x7250, 0x6722, 0x0, 0x1);
        gbc.writeMem(0x6722, { 0xdf });
        gbc.writeMem(0xceb3, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd5a8);
        EXPECT(gbc.pc(), 0xceb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceb3), 0xa6);
        // A6 03A3
        gbc.setState(0x320e, 0x51d9, 0x3420, 0x9fbc, 0x96b8, 0x9d3f, 0x1, 0x0);
        gbc.writeMem(0x320e, { 0xa6 });
        gbc.writeMem(0x9d3f, { 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x51d9);
        EXPECT(gbc.pc(), 0x320f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d3f), 0xb1);
        // A6 03A4
        gbc.setState(0x962b, 0xe6f2, 0xe860, 0x5f03, 0x20a0, 0xb732, 0x1, 0x0);
        gbc.writeMem(0x962b, { 0xa6 });
        gbc.writeMem(0xb732, { 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe6f2);
        EXPECT(gbc.pc(), 0x962c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x962b), 0xa6);
        EXPECT(gbc.readMem(0xb732), 0x8e);
        // A6 03A5
        gbc.setState(0x27ef, 0xa515, 0x7c90, 0x38c8, 0xfaf3, 0x22b0, 0x0, 0x1);
        gbc.writeMem(0x22b0, { 0x50 });
        gbc.writeMem(0x27ef, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xa515);
        EXPECT(gbc.pc(), 0x27f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03A6
        gbc.setState(0xe699, 0x24a5, 0xd8c0, 0xc38, 0xf9cb, 0xacaf, 0x0, 0x1);
        gbc.writeMem(0xacaf, { 0x1c });
        gbc.writeMem(0xe699, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x24a5);
        EXPECT(gbc.pc(), 0xe69a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacaf), 0x1c);
        EXPECT(gbc.readMem(0xe699), 0xa6);
        // A6 03A7
        gbc.setState(0xd9cd, 0xdaba, 0x2410, 0xcde2, 0xbfb4, 0xb1f1, 0x1, 0x1);
        gbc.writeMem(0xb1f1, { 0x7f });
        gbc.writeMem(0xd9cd, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdaba);
        EXPECT(gbc.pc(), 0xd9ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f1), 0x7f);
        EXPECT(gbc.readMem(0xd9cd), 0xa6);
        // A6 03A8
        gbc.setState(0x6176, 0xf63d, 0x7200, 0x17a7, 0xac4e, 0x7f1c, 0x1, 0x1);
        gbc.writeMem(0x6176, { 0xa6 });
        gbc.writeMem(0x7f1c, { 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf63d);
        EXPECT(gbc.pc(), 0x6177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03A9
        gbc.setState(0x4aad, 0xe8a4, 0x5f10, 0xff1, 0xdc22, 0x4d02, 0x0, 0x0);
        gbc.writeMem(0x4aad, { 0xa6 });
        gbc.writeMem(0x4d02, { 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe8a4);
        EXPECT(gbc.pc(), 0x4aae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03AA
        gbc.setState(0x64f0, 0xb749, 0xfb0, 0x4b9, 0xf7f7, 0x91fb, 0x0, 0x1);
        gbc.writeMem(0x64f0, { 0xa6 });
        gbc.writeMem(0x91fb, { 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb749);
        EXPECT(gbc.pc(), 0x64f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91fb), 0x4b);
        // A6 03AB
        gbc.setState(0xa65, 0xa9d5, 0x5060, 0xf03, 0x5c7a, 0xd17a, 0x0, 0x1);
        gbc.writeMem(0xa65, { 0xa6 });
        gbc.writeMem(0xd17a, { 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa9d5);
        EXPECT(gbc.pc(), 0xa66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17a), 0xb);
        // A6 03AC
        gbc.setState(0x9f6f, 0x1e01, 0xc570, 0x216, 0xe08b, 0xb00e, 0x1, 0x0);
        gbc.writeMem(0x9f6f, { 0xa6 });
        gbc.writeMem(0xb00e, { 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1e01);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6f), 0xa6);
        EXPECT(gbc.readMem(0xb00e), 0x4);
        // A6 03AE
        gbc.setState(0xbb12, 0xeb81, 0x8fd0, 0x1b27, 0x761a, 0x3480, 0x0, 0x1);
        gbc.writeMem(0x3480, { 0x67 });
        gbc.writeMem(0xbb12, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xeb81);
        EXPECT(gbc.pc(), 0xbb13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb12), 0xa6);
        // A6 03AF
        gbc.setState(0x8119, 0x5330, 0xb60, 0xa4ca, 0x5b16, 0xf311, 0x1, 0x0);
        gbc.writeMem(0x8119, { 0xa6 });
        gbc.writeMem(0xf311, { 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x5330);
        EXPECT(gbc.pc(), 0x811a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8119), 0xa6);
        EXPECT(gbc.readMem(0xf311), 0xcc);
        // A6 03B0
        gbc.setState(0xd293, 0x526, 0xcd10, 0x9d91, 0xfe84, 0x57e9, 0x0, 0x1);
        gbc.writeMem(0x57e9, { 0xb8 });
        gbc.writeMem(0xd293, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x526);
        EXPECT(gbc.pc(), 0xd294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd293), 0xa6);
        // A6 03B1
        gbc.setState(0x3491, 0x67f9, 0xcf40, 0x6727, 0xe730, 0xc319, 0x1, 0x1);
        gbc.writeMem(0x3491, { 0xa6 });
        gbc.writeMem(0xc319, { 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x67f9);
        EXPECT(gbc.pc(), 0x3492);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc319), 0xf6);
        // A6 03B2
        gbc.setState(0xcb8f, 0x4065, 0xd0a0, 0xfa1f, 0x49ad, 0x3649, 0x0, 0x0);
        gbc.writeMem(0x3649, { 0x46 });
        gbc.writeMem(0xcb8f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4065);
        EXPECT(gbc.pc(), 0xcb90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb8f), 0xa6);
        // A6 03B4
        gbc.setState(0x57b5, 0xe602, 0x4070, 0xd408, 0x4baa, 0x9184, 0x0, 0x0);
        gbc.writeMem(0x57b5, { 0xa6 });
        gbc.writeMem(0x9184, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe602);
        EXPECT(gbc.pc(), 0x57b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9184), 0xd6);
        // A6 03B5
        gbc.setState(0xb251, 0x3b11, 0x4290, 0xe1a4, 0x9869, 0xeba3, 0x0, 0x0);
        gbc.writeMem(0xb251, { 0xa6 });
        gbc.writeMem(0xeba3, { 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3b11);
        EXPECT(gbc.pc(), 0xb252);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb251), 0xa6);
        EXPECT(gbc.readMem(0xeba3), 0x20);
        // A6 03B6
        gbc.setState(0xec6f, 0x38e8, 0x29a0, 0x726f, 0x347f, 0x5a15, 0x0, 0x0);
        gbc.writeMem(0x5a15, { 0xde });
        gbc.writeMem(0xec6f, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x38e8);
        EXPECT(gbc.pc(), 0xec70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6f), 0xa6);
        // A6 03B7
        gbc.setState(0x7eea, 0xf030, 0x42e0, 0x3828, 0x5357, 0xb4eb, 0x1, 0x0);
        gbc.writeMem(0x7eea, { 0xa6 });
        gbc.writeMem(0xb4eb, { 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf030);
        EXPECT(gbc.pc(), 0x7eeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4eb), 0x62);
        // A6 03B8
        gbc.setState(0x1598, 0x6a41, 0x8860, 0xa992, 0x738, 0xf5ae, 0x0, 0x0);
        gbc.writeMem(0x1598, { 0xa6 });
        gbc.writeMem(0xf5ae, { 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6a41);
        EXPECT(gbc.pc(), 0x1599);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf5ae), 0x52);
        // A6 03B9
        gbc.setState(0x9a27, 0x6717, 0x9db0, 0xa40b, 0x3f8c, 0xac05, 0x0, 0x1);
        gbc.writeMem(0x9a27, { 0xa6 });
        gbc.writeMem(0xac05, { 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6717);
        EXPECT(gbc.pc(), 0x9a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a27), 0xa6);
        EXPECT(gbc.readMem(0xac05), 0xd3);
        // A6 03BA
        gbc.setState(0xc13e, 0xd3d8, 0x9440, 0x801, 0x1744, 0x746c, 0x0, 0x1);
        gbc.writeMem(0x746c, { 0x47 });
        gbc.writeMem(0xc13e, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd3d8);
        EXPECT(gbc.pc(), 0xc13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc13e), 0xa6);
        // A6 03BB
        gbc.setState(0xafeb, 0x38a, 0xdc40, 0xf654, 0xdce8, 0x4de5, 0x0, 0x1);
        gbc.writeMem(0x4de5, { 0x2b });
        gbc.writeMem(0xafeb, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x38a);
        EXPECT(gbc.pc(), 0xafec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafeb), 0xa6);
        // A6 03BC
        gbc.setState(0xa542, 0xfafb, 0xfed0, 0x947b, 0xee48, 0xe62c, 0x0, 0x1);
        gbc.writeMem(0xa542, { 0xa6 });
        gbc.writeMem(0xe62c, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfafb);
        EXPECT(gbc.pc(), 0xa543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa542), 0xa6);
        EXPECT(gbc.readMem(0xe62c), 0xf5);
        // A6 03BE
        gbc.setState(0x6048, 0x4571, 0xc360, 0xdde5, 0x6f5e, 0xa6d5, 0x0, 0x0);
        gbc.writeMem(0x6048, { 0xa6 });
        gbc.writeMem(0xa6d5, { 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x4571);
        EXPECT(gbc.pc(), 0x6049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d5), 0x39);
        // A6 03BF
        gbc.setState(0x933d, 0x7f82, 0x55e0, 0xf273, 0x92a5, 0x499c, 0x1, 0x0);
        gbc.writeMem(0x499c, { 0xe });
        gbc.writeMem(0x933d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x7f82);
        EXPECT(gbc.pc(), 0x933e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x933d), 0xa6);
        // A6 03C0
        gbc.setState(0x22b6, 0x88b8, 0x3c10, 0xe4ec, 0xcd77, 0x7a4, 0x0, 0x0);
        gbc.writeMem(0x7a4, { 0xa3 });
        gbc.writeMem(0x22b6, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x88b8);
        EXPECT(gbc.pc(), 0x22b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03C1
        gbc.setState(0xa633, 0x13cb, 0x4520, 0x5b3b, 0x2264, 0x20c, 0x1, 0x1);
        gbc.writeMem(0x20c, { 0x5a });
        gbc.writeMem(0xa633, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x13cb);
        EXPECT(gbc.pc(), 0xa634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa633), 0xa6);
        // A6 03C2
        gbc.setState(0x3180, 0x163c, 0xaec0, 0x574b, 0x5868, 0xb7ad, 0x1, 0x1);
        gbc.writeMem(0x3180, { 0xa6 });
        gbc.writeMem(0xb7ad, { 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0x3181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ad), 0x2b);
        // A6 03C3
        gbc.setState(0x149a, 0x6759, 0xbdf0, 0xb0b4, 0xbe99, 0xe1a0, 0x1, 0x1);
        gbc.writeMem(0x149a, { 0xa6 });
        gbc.writeMem(0xe1a0, { 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6759);
        EXPECT(gbc.pc(), 0x149b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1a0), 0xa8);
        // A6 03C4
        gbc.setState(0xb28a, 0x7ead, 0x6220, 0x3065, 0xe403, 0x6690, 0x0, 0x0);
        gbc.writeMem(0x6690, { 0x2e });
        gbc.writeMem(0xb28a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x7ead);
        EXPECT(gbc.pc(), 0xb28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb28a), 0xa6);
        // A6 03C6
        gbc.setState(0x2137, 0x7e2e, 0x380, 0x58a3, 0x3209, 0x566e, 0x1, 0x0);
        gbc.writeMem(0x2137, { 0xa6 });
        gbc.writeMem(0x566e, { 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7e2e);
        EXPECT(gbc.pc(), 0x2138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03C7
        gbc.setState(0x9297, 0x3aff, 0x1710, 0xed58, 0x8cc4, 0x5710, 0x1, 0x0);
        gbc.writeMem(0x5710, { 0x5f });
        gbc.writeMem(0x9297, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3aff);
        EXPECT(gbc.pc(), 0x9298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9297), 0xa6);
        // A6 03C8
        gbc.setState(0x124b, 0x13fd, 0x4800, 0xea85, 0xabcd, 0xf9a9, 0x1, 0x1);
        gbc.writeMem(0x124b, { 0xa6 });
        gbc.writeMem(0xf9a9, { 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x13fd);
        EXPECT(gbc.pc(), 0x124c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf9a9), 0xdb);
        // A6 03C9
        gbc.setState(0xa8f0, 0x3268, 0x2cd0, 0xdba1, 0xcd10, 0xf786, 0x1, 0x1);
        gbc.writeMem(0xa8f0, { 0xa6 });
        gbc.writeMem(0xf786, { 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3268);
        EXPECT(gbc.pc(), 0xa8f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f0), 0xa6);
        EXPECT(gbc.readMem(0xf786), 0x11);
        // A6 03CA
        gbc.setState(0xec68, 0xa0a4, 0xcaa0, 0xa52f, 0xb8e2, 0xd98f, 0x0, 0x1);
        gbc.writeMem(0xd98f, { 0xbb });
        gbc.writeMem(0xec68, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa0a4);
        EXPECT(gbc.pc(), 0xec69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd98f), 0xbb);
        EXPECT(gbc.readMem(0xec68), 0xa6);
        // A6 03CB
        gbc.setState(0x7239, 0x8890, 0xe5d0, 0x8c9a, 0x2f24, 0x577f, 0x0, 0x0);
        gbc.writeMem(0x577f, { 0x1e });
        gbc.writeMem(0x7239, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8890);
        EXPECT(gbc.pc(), 0x723a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03CC
        gbc.setState(0x63fc, 0xaf28, 0xb160, 0x4c7b, 0x22fe, 0x7708, 0x1, 0x0);
        gbc.writeMem(0x63fc, { 0xa6 });
        gbc.writeMem(0x7708, { 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xaf28);
        EXPECT(gbc.pc(), 0x63fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03CD
        gbc.setState(0x8b56, 0x5f58, 0xe650, 0xac41, 0x3ac1, 0x1458, 0x1, 0x1);
        gbc.writeMem(0x1458, { 0x65 });
        gbc.writeMem(0x8b56, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x5f58);
        EXPECT(gbc.pc(), 0x8b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b56), 0xa6);
        // A6 03CE
        gbc.setState(0x682e, 0x775c, 0xcba0, 0xe9b6, 0x36e3, 0xf6b1, 0x1, 0x0);
        gbc.writeMem(0x682e, { 0xa6 });
        gbc.writeMem(0xf6b1, { 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x775c);
        EXPECT(gbc.pc(), 0x682f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf6b1), 0x1c);
        // A6 03CF
        gbc.setState(0x810a, 0x6115, 0xde90, 0xb36d, 0xc7bb, 0x2458, 0x0, 0x0);
        gbc.writeMem(0x2458, { 0xe9 });
        gbc.writeMem(0x810a, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x6115);
        EXPECT(gbc.pc(), 0x810b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810a), 0xa6);
        // A6 03D0
        gbc.setState(0xcb98, 0x5767, 0xdc30, 0xcda5, 0xa9c3, 0x5843, 0x1, 0x0);
        gbc.writeMem(0x5843, { 0xe6 });
        gbc.writeMem(0xcb98, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5767);
        EXPECT(gbc.pc(), 0xcb99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb98), 0xa6);
        // A6 03D1
        gbc.setState(0x9d01, 0x3abf, 0x8fc0, 0x6013, 0x5554, 0xf19a, 0x0, 0x0);
        gbc.writeMem(0x9d01, { 0xa6 });
        gbc.writeMem(0xf19a, { 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3abf);
        EXPECT(gbc.pc(), 0x9d02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d01), 0xa6);
        EXPECT(gbc.readMem(0xf19a), 0x38);
        // A6 03D2
        gbc.setState(0x483c, 0x3c4, 0xcb00, 0xc44a, 0xf38b, 0x410d, 0x1, 0x0);
        gbc.writeMem(0x410d, { 0xf4 });
        gbc.writeMem(0x483c, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3c4);
        EXPECT(gbc.pc(), 0x483d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03D4
        gbc.setState(0x2b8d, 0x1c5d, 0x7460, 0x2e9e, 0x46ac, 0x1d74, 0x1, 0x0);
        gbc.writeMem(0x1d74, { 0x98 });
        gbc.writeMem(0x2b8d, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1c5d);
        EXPECT(gbc.pc(), 0x2b8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03D5
        gbc.setState(0x9759, 0xe1d3, 0xe900, 0x27b0, 0xe701, 0xd42e, 0x0, 0x0);
        gbc.writeMem(0x9759, { 0xa6 });
        gbc.writeMem(0xd42e, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe1d3);
        EXPECT(gbc.pc(), 0x975a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9759), 0xa6);
        EXPECT(gbc.readMem(0xd42e), 0x88);
        // A6 03D6
        gbc.setState(0x5da2, 0xae5d, 0xead0, 0xe80e, 0xe92d, 0x8791, 0x0, 0x1);
        gbc.writeMem(0x5da2, { 0xa6 });
        gbc.writeMem(0x8791, { 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xae5d);
        EXPECT(gbc.pc(), 0x5da3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8791), 0xdf);
        // A6 03D7
        gbc.setState(0x15b2, 0xe23b, 0xa290, 0xefb5, 0xc865, 0x8069, 0x1, 0x1);
        gbc.writeMem(0x15b2, { 0xa6 });
        gbc.writeMem(0x8069, { 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe23b);
        EXPECT(gbc.pc(), 0x15b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8069), 0x88);
        // A6 03D8
        gbc.setState(0xd00, 0x9ba6, 0x77f0, 0x2de5, 0xc897, 0x5465, 0x0, 0x1);
        gbc.writeMem(0xd00, { 0xa6 });
        gbc.writeMem(0x5465, { 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9ba6);
        EXPECT(gbc.pc(), 0xd01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03D9
        gbc.setState(0x10d2, 0x4308, 0x9830, 0x80da, 0x7144, 0xd23, 0x1, 0x1);
        gbc.writeMem(0xd23, { 0x1 });
        gbc.writeMem(0x10d2, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4308);
        EXPECT(gbc.pc(), 0x10d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03DA
        gbc.setState(0x4338, 0x1c77, 0xb660, 0xc423, 0xd2af, 0x7b9a, 0x0, 0x1);
        gbc.writeMem(0x4338, { 0xa6 });
        gbc.writeMem(0x7b9a, { 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1c77);
        EXPECT(gbc.pc(), 0x4339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03DC
        gbc.setState(0x6807, 0xfe9d, 0xf980, 0x6386, 0x57e7, 0x4388, 0x1, 0x0);
        gbc.writeMem(0x4388, { 0xf7 });
        gbc.writeMem(0x6807, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfe9d);
        EXPECT(gbc.pc(), 0x6808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03DD
        gbc.setState(0xe060, 0xf8c4, 0x82a0, 0x1c7d, 0x1112, 0xf09e, 0x0, 0x1);
        gbc.writeMem(0xe060, { 0xa6 });
        gbc.writeMem(0xf09e, { 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xf8c4);
        EXPECT(gbc.pc(), 0xe061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe060), 0xa6);
        EXPECT(gbc.readMem(0xf09e), 0x21);
        // A6 03DE
        gbc.setState(0x64fb, 0x4171, 0x8a50, 0xb336, 0x1188, 0x29b6, 0x1, 0x1);
        gbc.writeMem(0x29b6, { 0x3e });
        gbc.writeMem(0x64fb, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4171);
        EXPECT(gbc.pc(), 0x64fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03DF
        gbc.setState(0x67c8, 0xc525, 0xcd00, 0xeca, 0xd9f2, 0xc32, 0x1, 0x0);
        gbc.writeMem(0xc32, { 0x7 });
        gbc.writeMem(0x67c8, { 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xc525);
        EXPECT(gbc.pc(), 0x67c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A6 03E0
        gbc.setState(0xcb, 0x3721, 0x1180, 0x6757, 0x559c, 0x8416, 0x0, 0x0);
        gbc.writeMem(0xcb, { 0xa6 });
        gbc.writeMem(0x8416, { 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3721);
        EXPECT(gbc.pc(), 0xcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8416), 0x63);
        // A6 03E2
        gbc.setState(0xab8b, 0x7c2f, 0x1400, 0x11ed, 0x10c2, 0xda64, 0x1, 0x0);
        gbc.writeMem(0xab8b, { 0xa6 });
        gbc.writeMem(0xda64, { 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7c2f);
        EXPECT(gbc.pc(), 0xab8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab8b), 0xa6);
        EXPECT(gbc.readMem(0xda64), 0x64);
        // A6 03E3
        gbc.setState(0x6675, 0x830d, 0x7570, 0x527, 0xd1f, 0xed18, 0x1, 0x0);
        gbc.writeMem(0x6675, { 0xa6 });
        gbc.writeMem(0xed18, { 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x830d);
        EXPECT(gbc.pc(), 0x6676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed18), 0xd6);
        // A6 03E4
        gbc.setState(0x43b, 0x8557, 0x9730, 0x8e59, 0x3a19, 0xfe4e, 0x1, 0x1);
        gbc.writeMem(0x43b, { 0xa6 });
        gbc.writeMem(0xfe4e, { 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8557);
        EXPECT(gbc.pc(), 0x43c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfe4e), 0xef);
        // A6 03E5
        gbc.setState(0x9d39, 0x4091, 0xff20, 0x2451, 0xcc00, 0xad85, 0x0, 0x0);
        gbc.writeMem(0x9d39, { 0xa6 });
        gbc.writeMem(0xad85, { 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4091);
        EXPECT(gbc.pc(), 0x9d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d39), 0xa6);
        EXPECT(gbc.readMem(0xad85), 0x41);
        // A6 03E6
        gbc.setState(0x356b, 0xccc3, 0xbe30, 0xc6f0, 0xa26f, 0x884e, 0x0, 0x1);
        gbc.writeMem(0x356b, { 0xa6 });
        gbc.writeMem(0x884e, { 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xccc3);
        EXPECT(gbc.pc(), 0x356c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x884e), 0xe7);
        // A6 03E7
        gbc.setState(0x117b, 0xf6b1, 0xc9d0, 0x9cc, 0x9529, 0xf401, 0x0, 0x1);
        gbc.writeMem(0x117b, { 0xa6 });
        gbc.writeMem(0xf401, { 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0x117c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf401), 0x16);
    }
