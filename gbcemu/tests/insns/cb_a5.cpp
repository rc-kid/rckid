#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_a5)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_a5) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB A5 0000
        gbc.setState(0x55c0, 0xb38f, 0xda60, 0xce70, 0x6a9, 0x4e5e, 0x0, 0x0);
        gbc.writeMem(0x55c0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb38f);
        EXPECT(gbc.pc(), 0x55c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0001
        gbc.setState(0xb3b8, 0x4eaf, 0xb120, 0xadd6, 0x89c3, 0xd8e3, 0x0, 0x1);
        gbc.writeMem(0xb3b8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4eaf);
        EXPECT(gbc.pc(), 0xb3ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b8), 0xcb);
        EXPECT(gbc.readMem(0xb3b9), 0xa5);
        // CB A5 0002
        gbc.setState(0x7264, 0x6d8c, 0xbf0, 0x7415, 0xb0a6, 0x9a2a, 0x1, 0x0);
        gbc.writeMem(0x7264, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6d8c);
        EXPECT(gbc.pc(), 0x7266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0003
        gbc.setState(0x4aa9, 0x3431, 0x8060, 0x56b9, 0x963b, 0x5685, 0x0, 0x0);
        gbc.writeMem(0x4aa9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3431);
        EXPECT(gbc.pc(), 0x4aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0004
        gbc.setState(0x4689, 0x3431, 0x4480, 0xcd76, 0x66d, 0xc29f, 0x0, 0x1);
        gbc.writeMem(0x4689, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3431);
        EXPECT(gbc.pc(), 0x468b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0005
        gbc.setState(0x9f9d, 0xba03, 0xae30, 0xf34a, 0xf2b, 0x1138, 0x0, 0x1);
        gbc.writeMem(0x9f9d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xba03);
        EXPECT(gbc.pc(), 0x9f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f9d), 0xcb);
        EXPECT(gbc.readMem(0x9f9e), 0xa5);
        // CB A5 0006
        gbc.setState(0xc2d0, 0x5683, 0x9ac0, 0x6ac3, 0x4210, 0x5336, 0x1, 0x1);
        gbc.writeMem(0xc2d0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5683);
        EXPECT(gbc.pc(), 0xc2d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d0), 0xcb);
        EXPECT(gbc.readMem(0xc2d1), 0xa5);
        // CB A5 0007
        gbc.setState(0xda27, 0x8cc, 0x2bd0, 0x9e30, 0x5ece, 0x4300, 0x1, 0x0);
        gbc.writeMem(0xda27, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8cc);
        EXPECT(gbc.pc(), 0xda29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda27), 0xcb);
        EXPECT(gbc.readMem(0xda28), 0xa5);
        // CB A5 0008
        gbc.setState(0xe2db, 0x7d3d, 0x7f60, 0x4055, 0xff7c, 0xccf8, 0x0, 0x0);
        gbc.writeMem(0xe2db, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7d3d);
        EXPECT(gbc.pc(), 0xe2dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2db), 0xcb);
        EXPECT(gbc.readMem(0xe2dc), 0xa5);
        // CB A5 0009
        gbc.setState(0xa5ea, 0x363f, 0x1f30, 0xe607, 0x7048, 0x8284, 0x1, 0x1);
        gbc.writeMem(0xa5ea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x363f);
        EXPECT(gbc.pc(), 0xa5ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ea), 0xcb);
        EXPECT(gbc.readMem(0xa5eb), 0xa5);
        // CB A5 000A
        gbc.setState(0xc226, 0x8a1b, 0x780, 0x4b0b, 0xd254, 0xb10f, 0x1, 0x0);
        gbc.writeMem(0xc226, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8a1b);
        EXPECT(gbc.pc(), 0xc228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc226), 0xcb);
        EXPECT(gbc.readMem(0xc227), 0xa5);
        // CB A5 000B
        gbc.setState(0x1612, 0x5b4d, 0x210, 0xa473, 0x7c7f, 0xa05d, 0x1, 0x1);
        gbc.writeMem(0x1612, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5b4d);
        EXPECT(gbc.pc(), 0x1614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 000C
        gbc.setState(0xcb93, 0xab00, 0x1ba0, 0x28fc, 0x86ce, 0xaef9, 0x0, 0x1);
        gbc.writeMem(0xcb93, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xab00);
        EXPECT(gbc.pc(), 0xcb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb93), 0xcb);
        EXPECT(gbc.readMem(0xcb94), 0xa5);
        // CB A5 000D
        gbc.setState(0xc63d, 0xb15c, 0x2200, 0x11a3, 0xde46, 0x2dca, 0x0, 0x1);
        gbc.writeMem(0xc63d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb15c);
        EXPECT(gbc.pc(), 0xc63f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63d), 0xcb);
        EXPECT(gbc.readMem(0xc63e), 0xa5);
        // CB A5 000E
        gbc.setState(0x4163, 0x9c05, 0x8b60, 0xabf1, 0x89f9, 0xa38e, 0x1, 0x1);
        gbc.writeMem(0x4163, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9c05);
        EXPECT(gbc.pc(), 0x4165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 000F
        gbc.setState(0xd5b1, 0x3b51, 0x6a90, 0x1a0f, 0x2f44, 0x551, 0x0, 0x1);
        gbc.writeMem(0xd5b1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3b51);
        EXPECT(gbc.pc(), 0xd5b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b1), 0xcb);
        EXPECT(gbc.readMem(0xd5b2), 0xa5);
        // CB A5 0010
        gbc.setState(0x145d, 0xa765, 0xf3e0, 0x977d, 0xc7f0, 0x7d13, 0x0, 0x0);
        gbc.writeMem(0x145d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa765);
        EXPECT(gbc.pc(), 0x145f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0011
        gbc.setState(0x835e, 0x2850, 0x6280, 0x81b4, 0x377a, 0x7ea4, 0x0, 0x0);
        gbc.writeMem(0x835e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2850);
        EXPECT(gbc.pc(), 0x8360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x835e), 0xcb);
        EXPECT(gbc.readMem(0x835f), 0xa5);
        // CB A5 0012
        gbc.setState(0x65da, 0x3eaa, 0xb050, 0x288a, 0x823a, 0x73f5, 0x1, 0x1);
        gbc.writeMem(0x65da, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3eaa);
        EXPECT(gbc.pc(), 0x65dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0013
        gbc.setState(0x4ddb, 0x490, 0xe1f0, 0xbeff, 0x5211, 0xa5a3, 0x1, 0x0);
        gbc.writeMem(0x4ddb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x490);
        EXPECT(gbc.pc(), 0x4ddd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0014
        gbc.setState(0x8858, 0xe121, 0xc5e0, 0xee0f, 0xc3e7, 0xc6dd, 0x1, 0x0);
        gbc.writeMem(0x8858, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe121);
        EXPECT(gbc.pc(), 0x885a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8858), 0xcb);
        EXPECT(gbc.readMem(0x8859), 0xa5);
        // CB A5 0015
        gbc.setState(0x8a2f, 0x7dff, 0x90e0, 0x1217, 0x6e84, 0xac98, 0x1, 0x0);
        gbc.writeMem(0x8a2f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7dff);
        EXPECT(gbc.pc(), 0x8a31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a2f), 0xcb);
        EXPECT(gbc.readMem(0x8a30), 0xa5);
        // CB A5 0016
        gbc.setState(0x594a, 0x21dd, 0xed00, 0xbb88, 0x1cdb, 0x8679, 0x1, 0x0);
        gbc.writeMem(0x594a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x21dd);
        EXPECT(gbc.pc(), 0x594c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0017
        gbc.setState(0xd25b, 0x9abc, 0xb0e0, 0xc809, 0x6526, 0xf700, 0x0, 0x0);
        gbc.writeMem(0xd25b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9abc);
        EXPECT(gbc.pc(), 0xd25d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd25b), 0xcb);
        EXPECT(gbc.readMem(0xd25c), 0xa5);
        // CB A5 0018
        gbc.setState(0xd6a7, 0x7b5f, 0x9380, 0x7be2, 0x3dda, 0x7e87, 0x0, 0x0);
        gbc.writeMem(0xd6a7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7b5f);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a7), 0xcb);
        EXPECT(gbc.readMem(0xd6a8), 0xa5);
        // CB A5 0019
        gbc.setState(0x231f, 0x1a04, 0xe690, 0x457b, 0xe211, 0xba06, 0x0, 0x1);
        gbc.writeMem(0x231f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1a04);
        EXPECT(gbc.pc(), 0x2321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 001A
        gbc.setState(0xaeae, 0x9c0e, 0x3560, 0x6b15, 0x3254, 0x3ca5, 0x1, 0x0);
        gbc.writeMem(0xaeae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9c0e);
        EXPECT(gbc.pc(), 0xaeb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeae), 0xcb);
        EXPECT(gbc.readMem(0xaeaf), 0xa5);
        // CB A5 001B
        gbc.setState(0x3bba, 0x9be8, 0x6630, 0xa593, 0xf703, 0x8d83, 0x1, 0x0);
        gbc.writeMem(0x3bba, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9be8);
        EXPECT(gbc.pc(), 0x3bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 001C
        gbc.setState(0x7d0a, 0x8e4b, 0x310, 0xf14b, 0x66f1, 0x89dc, 0x1, 0x0);
        gbc.writeMem(0x7d0a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8e4b);
        EXPECT(gbc.pc(), 0x7d0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 001D
        gbc.setState(0xef33, 0x79f, 0x4010, 0xc61f, 0xcd86, 0x5003, 0x1, 0x1);
        gbc.writeMem(0xef33, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x79f);
        EXPECT(gbc.pc(), 0xef35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef33), 0xcb);
        EXPECT(gbc.readMem(0xef34), 0xa5);
        // CB A5 001E
        gbc.setState(0xabd3, 0xfd64, 0x2eb0, 0xa88e, 0xb555, 0xbea0, 0x1, 0x1);
        gbc.writeMem(0xabd3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfd64);
        EXPECT(gbc.pc(), 0xabd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd3), 0xcb);
        EXPECT(gbc.readMem(0xabd4), 0xa5);
        // CB A5 0020
        gbc.setState(0xb8ce, 0xcb4d, 0xc480, 0x383a, 0xbab0, 0xf3fd, 0x1, 0x0);
        gbc.writeMem(0xb8ce, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xcb4d);
        EXPECT(gbc.pc(), 0xb8d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ce), 0xcb);
        EXPECT(gbc.readMem(0xb8cf), 0xa5);
        // CB A5 0021
        gbc.setState(0x7f52, 0x9e00, 0xaa80, 0x1674, 0x484f, 0xd26, 0x0, 0x1);
        gbc.writeMem(0x7f52, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9e00);
        EXPECT(gbc.pc(), 0x7f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0022
        gbc.setState(0x1c52, 0xa52c, 0x9f50, 0x9e01, 0x49de, 0x7ef1, 0x0, 0x0);
        gbc.writeMem(0x1c52, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa52c);
        EXPECT(gbc.pc(), 0x1c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0023
        gbc.setState(0x41e8, 0x8530, 0xd420, 0xb63d, 0xa9e9, 0x67e0, 0x1, 0x1);
        gbc.writeMem(0x41e8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8530);
        EXPECT(gbc.pc(), 0x41ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0024
        gbc.setState(0xbdb4, 0x5b5c, 0xa6c0, 0x3d0e, 0x585c, 0xbf4b, 0x0, 0x1);
        gbc.writeMem(0xbdb4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x5b5c);
        EXPECT(gbc.pc(), 0xbdb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdb4), 0xcb);
        EXPECT(gbc.readMem(0xbdb5), 0xa5);
        // CB A5 0025
        gbc.setState(0xc274, 0xbda1, 0xe870, 0xb540, 0x404, 0xf406, 0x0, 0x1);
        gbc.writeMem(0xc274, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbda1);
        EXPECT(gbc.pc(), 0xc276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc274), 0xcb);
        EXPECT(gbc.readMem(0xc275), 0xa5);
        // CB A5 0027
        gbc.setState(0x4218, 0x4e47, 0x73c0, 0x92ff, 0x4991, 0xefb3, 0x0, 0x1);
        gbc.writeMem(0x4218, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4e47);
        EXPECT(gbc.pc(), 0x421a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0028
        gbc.setState(0x28e6, 0xd701, 0xdc00, 0xa6ef, 0x110e, 0x8c30, 0x0, 0x0);
        gbc.writeMem(0x28e6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd701);
        EXPECT(gbc.pc(), 0x28e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0029
        gbc.setState(0x62c2, 0xe321, 0x1300, 0xc389, 0x32e9, 0x1ce0, 0x1, 0x0);
        gbc.writeMem(0x62c2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe321);
        EXPECT(gbc.pc(), 0x62c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 002A
        gbc.setState(0xa396, 0x5d7f, 0xcc60, 0xfe91, 0xd98c, 0xebc9, 0x0, 0x1);
        gbc.writeMem(0xa396, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5d7f);
        EXPECT(gbc.pc(), 0xa398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa396), 0xcb);
        EXPECT(gbc.readMem(0xa397), 0xa5);
        // CB A5 002B
        gbc.setState(0x4ef2, 0x6aba, 0xb890, 0xb8cc, 0x323, 0xf1a1, 0x1, 0x1);
        gbc.writeMem(0x4ef2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6aba);
        EXPECT(gbc.pc(), 0x4ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 002C
        gbc.setState(0x364b, 0xdc60, 0x1d70, 0x356d, 0x84e5, 0xdb6c, 0x0, 0x1);
        gbc.writeMem(0x364b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdc60);
        EXPECT(gbc.pc(), 0x364d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 002D
        gbc.setState(0x7c7d, 0x283c, 0x9600, 0x65f3, 0xd7cb, 0x711, 0x1, 0x1);
        gbc.writeMem(0x7c7d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x283c);
        EXPECT(gbc.pc(), 0x7c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 002E
        gbc.setState(0x94d8, 0x21d6, 0xaab0, 0x4460, 0xf723, 0x59dc, 0x0, 0x0);
        gbc.writeMem(0x94d8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x21d6);
        EXPECT(gbc.pc(), 0x94da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94d8), 0xcb);
        EXPECT(gbc.readMem(0x94d9), 0xa5);
        // CB A5 002F
        gbc.setState(0xdbb2, 0x7a05, 0xf580, 0xecfd, 0xc4c9, 0x6fa3, 0x1, 0x1);
        gbc.writeMem(0xdbb2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x7a05);
        EXPECT(gbc.pc(), 0xdbb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbb2), 0xcb);
        EXPECT(gbc.readMem(0xdbb3), 0xa5);
        // CB A5 0030
        gbc.setState(0x249b, 0xdd15, 0xc0c0, 0xba74, 0x2cab, 0x2057, 0x1, 0x0);
        gbc.writeMem(0x249b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdd15);
        EXPECT(gbc.pc(), 0x249d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0031
        gbc.setState(0xe695, 0x24a, 0xf300, 0x212a, 0x7a00, 0x2ca0, 0x0, 0x1);
        gbc.writeMem(0xe695, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x24a);
        EXPECT(gbc.pc(), 0xe697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe695), 0xcb);
        EXPECT(gbc.readMem(0xe696), 0xa5);
        // CB A5 0032
        gbc.setState(0x6669, 0x8af6, 0x7900, 0x88c2, 0xa788, 0x8cfa, 0x1, 0x0);
        gbc.writeMem(0x6669, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8af6);
        EXPECT(gbc.pc(), 0x666b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0033
        gbc.setState(0xa220, 0xa661, 0xc0e0, 0x4140, 0x8fbb, 0x9aa9, 0x0, 0x0);
        gbc.writeMem(0xa220, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa661);
        EXPECT(gbc.pc(), 0xa222);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa220), 0xcb);
        EXPECT(gbc.readMem(0xa221), 0xa5);
        // CB A5 0034
        gbc.setState(0x38ec, 0xa621, 0x4610, 0xa5a3, 0xe31, 0xeb83, 0x1, 0x1);
        gbc.writeMem(0x38ec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa621);
        EXPECT(gbc.pc(), 0x38ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0035
        gbc.setState(0x6e60, 0xd5b1, 0x98b0, 0x2b2d, 0x8c43, 0xa120, 0x0, 0x0);
        gbc.writeMem(0x6e60, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd5b1);
        EXPECT(gbc.pc(), 0x6e62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0036
        gbc.setState(0x5fe1, 0xf7fe, 0xf8f0, 0x3738, 0x4e01, 0x2d95, 0x1, 0x1);
        gbc.writeMem(0x5fe1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xf7fe);
        EXPECT(gbc.pc(), 0x5fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0037
        gbc.setState(0x61dd, 0x5578, 0x4980, 0xa5e7, 0x2eb5, 0xab9d, 0x0, 0x0);
        gbc.writeMem(0x61dd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5578);
        EXPECT(gbc.pc(), 0x61df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0039
        gbc.setState(0xb09c, 0x5c35, 0xfa90, 0x7bc3, 0x52c3, 0x2d4d, 0x1, 0x1);
        gbc.writeMem(0xb09c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5c35);
        EXPECT(gbc.pc(), 0xb09e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb09c), 0xcb);
        EXPECT(gbc.readMem(0xb09d), 0xa5);
        // CB A5 003A
        gbc.setState(0x25c8, 0x38e6, 0x68f0, 0xc3e7, 0xee87, 0x4d46, 0x0, 0x1);
        gbc.writeMem(0x25c8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x38e6);
        EXPECT(gbc.pc(), 0x25ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 003B
        gbc.setState(0x9a3, 0x40f7, 0xe6e0, 0x71dd, 0xd9fe, 0xf4ec, 0x1, 0x0);
        gbc.writeMem(0x9a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x40f7);
        EXPECT(gbc.pc(), 0x9a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 003C
        gbc.setState(0x823f, 0x11f7, 0x9b40, 0x1db8, 0xd0d3, 0xecb4, 0x0, 0x1);
        gbc.writeMem(0x823f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x11f7);
        EXPECT(gbc.pc(), 0x8241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823f), 0xcb);
        EXPECT(gbc.readMem(0x8240), 0xa5);
        // CB A5 003D
        gbc.setState(0x2ab5, 0x39dc, 0xdd40, 0xa63d, 0xd83e, 0xe176, 0x0, 0x0);
        gbc.writeMem(0x2ab5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x39dc);
        EXPECT(gbc.pc(), 0x2ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 003E
        gbc.setState(0xcae4, 0x128e, 0x63c0, 0x3102, 0xa977, 0x718e, 0x0, 0x1);
        gbc.writeMem(0xcae4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x128e);
        EXPECT(gbc.pc(), 0xcae6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae4), 0xcb);
        EXPECT(gbc.readMem(0xcae5), 0xa5);
        // CB A5 003F
        gbc.setState(0x7611, 0xc52, 0x76f0, 0x85a4, 0xc394, 0x5fc0, 0x1, 0x1);
        gbc.writeMem(0x7611, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc52);
        EXPECT(gbc.pc(), 0x7613);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0040
        gbc.setState(0x95f3, 0x863, 0xeee0, 0x3ef8, 0xaa5e, 0xf0c2, 0x1, 0x0);
        gbc.writeMem(0x95f3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x863);
        EXPECT(gbc.pc(), 0x95f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f3), 0xcb);
        EXPECT(gbc.readMem(0x95f4), 0xa5);
        // CB A5 0041
        gbc.setState(0xd219, 0x10de, 0x2340, 0xeb3c, 0x11cd, 0xe841, 0x0, 0x1);
        gbc.writeMem(0xd219, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x10de);
        EXPECT(gbc.pc(), 0xd21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd219), 0xcb);
        EXPECT(gbc.readMem(0xd21a), 0xa5);
        // CB A5 0042
        gbc.setState(0xe616, 0x7fe, 0x3110, 0xa00d, 0x6f71, 0x2a2b, 0x0, 0x0);
        gbc.writeMem(0xe616, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7fe);
        EXPECT(gbc.pc(), 0xe618);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe616), 0xcb);
        EXPECT(gbc.readMem(0xe617), 0xa5);
        // CB A5 0043
        gbc.setState(0x8947, 0xc10, 0xa520, 0x2128, 0xcc39, 0x4a0d, 0x0, 0x0);
        gbc.writeMem(0x8947, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc10);
        EXPECT(gbc.pc(), 0x8949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8947), 0xcb);
        EXPECT(gbc.readMem(0x8948), 0xa5);
        // CB A5 0044
        gbc.setState(0x4dbe, 0x43d5, 0x610, 0xb2a6, 0x69e5, 0xeaba, 0x0, 0x0);
        gbc.writeMem(0x4dbe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x43d5);
        EXPECT(gbc.pc(), 0x4dc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0045
        gbc.setState(0x485, 0x7fdc, 0x7b90, 0x67da, 0xc468, 0xe223, 0x0, 0x0);
        gbc.writeMem(0x485, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7fdc);
        EXPECT(gbc.pc(), 0x487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0046
        gbc.setState(0x9e4f, 0x3639, 0xce20, 0x881f, 0xfb71, 0x5e30, 0x0, 0x1);
        gbc.writeMem(0x9e4f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3639);
        EXPECT(gbc.pc(), 0x9e51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4f), 0xcb);
        EXPECT(gbc.readMem(0x9e50), 0xa5);
        // CB A5 0047
        gbc.setState(0xa374, 0x8007, 0x55f0, 0x1090, 0xbde7, 0x5c84, 0x1, 0x0);
        gbc.writeMem(0xa374, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8007);
        EXPECT(gbc.pc(), 0xa376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa374), 0xcb);
        EXPECT(gbc.readMem(0xa375), 0xa5);
        // CB A5 0048
        gbc.setState(0xc5a3, 0x6af1, 0x72b0, 0xa182, 0x6f36, 0xdbd4, 0x1, 0x1);
        gbc.writeMem(0xc5a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6af1);
        EXPECT(gbc.pc(), 0xc5a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5a3), 0xcb);
        EXPECT(gbc.readMem(0xc5a4), 0xa5);
        // CB A5 0049
        gbc.setState(0x40cc, 0x63d8, 0xaf70, 0x531a, 0x8b84, 0x4b58, 0x1, 0x1);
        gbc.writeMem(0x40cc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x63d8);
        EXPECT(gbc.pc(), 0x40ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 004B
        gbc.setState(0x8b96, 0x5a9b, 0x9760, 0x4385, 0xdcf1, 0x2cdb, 0x0, 0x1);
        gbc.writeMem(0x8b96, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5a9b);
        EXPECT(gbc.pc(), 0x8b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b96), 0xcb);
        EXPECT(gbc.readMem(0x8b97), 0xa5);
        // CB A5 004C
        gbc.setState(0xe68f, 0xd071, 0x5490, 0xf0d9, 0x2d3c, 0x4037, 0x0, 0x0);
        gbc.writeMem(0xe68f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd071);
        EXPECT(gbc.pc(), 0xe691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe68f), 0xcb);
        EXPECT(gbc.readMem(0xe690), 0xa5);
        // CB A5 004D
        gbc.setState(0x2d35, 0x257b, 0x2e30, 0x606a, 0xeb9b, 0x1593, 0x0, 0x0);
        gbc.writeMem(0x2d35, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x257b);
        EXPECT(gbc.pc(), 0x2d37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 004E
        gbc.setState(0xa7f4, 0x3c1d, 0xbb40, 0x160f, 0xa6e7, 0xbae1, 0x1, 0x1);
        gbc.writeMem(0xa7f4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3c1d);
        EXPECT(gbc.pc(), 0xa7f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7f4), 0xcb);
        EXPECT(gbc.readMem(0xa7f5), 0xa5);
        // CB A5 004F
        gbc.setState(0x52d8, 0x179, 0x1170, 0x6f0, 0xa4fe, 0xaf38, 0x1, 0x0);
        gbc.writeMem(0x52d8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x179);
        EXPECT(gbc.pc(), 0x52da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0050
        gbc.setState(0xa55a, 0xc9c6, 0x9070, 0x8cca, 0xb9bb, 0xf982, 0x0, 0x1);
        gbc.writeMem(0xa55a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc9c6);
        EXPECT(gbc.pc(), 0xa55c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa55a), 0xcb);
        EXPECT(gbc.readMem(0xa55b), 0xa5);
        // CB A5 0051
        gbc.setState(0x3bc0, 0x4aa0, 0xf3b0, 0xefb1, 0xd6bb, 0xe08c, 0x1, 0x0);
        gbc.writeMem(0x3bc0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4aa0);
        EXPECT(gbc.pc(), 0x3bc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0052
        gbc.setState(0xb3b6, 0x7e30, 0xd860, 0x322b, 0xd6c8, 0x92f7, 0x1, 0x1);
        gbc.writeMem(0xb3b6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7e30);
        EXPECT(gbc.pc(), 0xb3b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b6), 0xcb);
        EXPECT(gbc.readMem(0xb3b7), 0xa5);
        // CB A5 0054
        gbc.setState(0xe1b6, 0x85a4, 0x3940, 0x816c, 0xeb6a, 0x4798, 0x0, 0x0);
        gbc.writeMem(0xe1b6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x85a4);
        EXPECT(gbc.pc(), 0xe1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b6), 0xcb);
        EXPECT(gbc.readMem(0xe1b7), 0xa5);
        // CB A5 0055
        gbc.setState(0x2225, 0xe52e, 0x1ba0, 0x337e, 0x5221, 0x941c, 0x0, 0x1);
        gbc.writeMem(0x2225, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe52e);
        EXPECT(gbc.pc(), 0x2227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0056
        gbc.setState(0x4187, 0x1ac3, 0xce40, 0xd973, 0x2c46, 0x8580, 0x1, 0x0);
        gbc.writeMem(0x4187, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1ac3);
        EXPECT(gbc.pc(), 0x4189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0057
        gbc.setState(0xc0b4, 0xfd6c, 0x1380, 0xd928, 0x8f17, 0xf41f, 0x1, 0x1);
        gbc.writeMem(0xc0b4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfd6c);
        EXPECT(gbc.pc(), 0xc0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b4), 0xcb);
        EXPECT(gbc.readMem(0xc0b5), 0xa5);
        // CB A5 0059
        gbc.setState(0x7cfe, 0x4dee, 0x99a0, 0xf2bb, 0x3a6b, 0xb784, 0x1, 0x0);
        gbc.writeMem(0x7cfe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4dee);
        EXPECT(gbc.pc(), 0x7d00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 005A
        gbc.setState(0x4bec, 0xad38, 0x9b50, 0x1458, 0xe793, 0x53ee, 0x1, 0x1);
        gbc.writeMem(0x4bec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xad38);
        EXPECT(gbc.pc(), 0x4bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 005B
        gbc.setState(0x9a11, 0x554c, 0x97d0, 0xa22e, 0x843e, 0x57b7, 0x0, 0x0);
        gbc.writeMem(0x9a11, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x554c);
        EXPECT(gbc.pc(), 0x9a13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a11), 0xcb);
        EXPECT(gbc.readMem(0x9a12), 0xa5);
        // CB A5 005C
        gbc.setState(0xdf8f, 0xeadf, 0x690, 0xd666, 0x1782, 0x3ffe, 0x1, 0x0);
        gbc.writeMem(0xdf8f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xeadf);
        EXPECT(gbc.pc(), 0xdf91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf8f), 0xcb);
        EXPECT(gbc.readMem(0xdf90), 0xa5);
        // CB A5 005D
        gbc.setState(0xeafa, 0xd79b, 0x7350, 0x7726, 0xd393, 0x21b8, 0x1, 0x1);
        gbc.writeMem(0xeafa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd79b);
        EXPECT(gbc.pc(), 0xeafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeafa), 0xcb);
        EXPECT(gbc.readMem(0xeafb), 0xa5);
        // CB A5 005F
        gbc.setState(0xb50f, 0x62a, 0xd230, 0xc012, 0xc657, 0xfccc, 0x1, 0x1);
        gbc.writeMem(0xb50f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xb511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb50f), 0xcb);
        EXPECT(gbc.readMem(0xb510), 0xa5);
        // CB A5 0060
        gbc.setState(0x658b, 0x9354, 0xf410, 0xc4a8, 0xc535, 0x9f1f, 0x1, 0x1);
        gbc.writeMem(0x658b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9354);
        EXPECT(gbc.pc(), 0x658d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0062
        gbc.setState(0x5d0f, 0x6dee, 0x9d30, 0x708, 0x3665, 0xfd7, 0x0, 0x0);
        gbc.writeMem(0x5d0f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6dee);
        EXPECT(gbc.pc(), 0x5d11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0063
        gbc.setState(0x9d6, 0x681a, 0x53f0, 0x9fcf, 0x3af7, 0xcc36, 0x0, 0x1);
        gbc.writeMem(0x9d6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x681a);
        EXPECT(gbc.pc(), 0x9d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0064
        gbc.setState(0x96ed, 0x1601, 0xaa90, 0x5b3d, 0x865a, 0x9689, 0x1, 0x1);
        gbc.writeMem(0x96ed, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1601);
        EXPECT(gbc.pc(), 0x96ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ed), 0xcb);
        EXPECT(gbc.readMem(0x96ee), 0xa5);
        // CB A5 0065
        gbc.setState(0xd8be, 0xe1f7, 0x6fc0, 0x9d6e, 0x6c92, 0xa480, 0x0, 0x1);
        gbc.writeMem(0xd8be, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xe1f7);
        EXPECT(gbc.pc(), 0xd8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8be), 0xcb);
        EXPECT(gbc.readMem(0xd8bf), 0xa5);
        // CB A5 0066
        gbc.setState(0x8e64, 0x7349, 0xf8e0, 0x5eab, 0x29bd, 0xec82, 0x0, 0x1);
        gbc.writeMem(0x8e64, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7349);
        EXPECT(gbc.pc(), 0x8e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e64), 0xcb);
        EXPECT(gbc.readMem(0x8e65), 0xa5);
        // CB A5 0067
        gbc.setState(0x36a7, 0xe865, 0x3fd0, 0x1f73, 0xbb4b, 0xb221, 0x1, 0x0);
        gbc.writeMem(0x36a7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe865);
        EXPECT(gbc.pc(), 0x36a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0068
        gbc.setState(0x80bf, 0x6543, 0x8a60, 0x56a4, 0x894e, 0xaaad, 0x0, 0x0);
        gbc.writeMem(0x80bf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6543);
        EXPECT(gbc.pc(), 0x80c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80bf), 0xcb);
        EXPECT(gbc.readMem(0x80c0), 0xa5);
        // CB A5 0069
        gbc.setState(0x956, 0x1c9a, 0xa3d0, 0xf8e7, 0x5721, 0xc2c6, 0x0, 0x1);
        gbc.writeMem(0x956, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x1c9a);
        EXPECT(gbc.pc(), 0x958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 006A
        gbc.setState(0x1a1e, 0xa165, 0x9050, 0xdf9b, 0x6957, 0x155a, 0x1, 0x1);
        gbc.writeMem(0x1a1e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa165);
        EXPECT(gbc.pc(), 0x1a20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 006B
        gbc.setState(0xcb60, 0x7844, 0x9050, 0xfbcc, 0x53d1, 0x2eb1, 0x1, 0x1);
        gbc.writeMem(0xcb60, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7844);
        EXPECT(gbc.pc(), 0xcb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb60), 0xcb);
        EXPECT(gbc.readMem(0xcb61), 0xa5);
        // CB A5 006C
        gbc.setState(0xc90, 0x2ea2, 0x5700, 0xb222, 0x98f7, 0x9148, 0x1, 0x1);
        gbc.writeMem(0xc90, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2ea2);
        EXPECT(gbc.pc(), 0xc92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 006D
        gbc.setState(0x8c57, 0x1ac6, 0xb4c0, 0xfbda, 0xa4dc, 0x9b57, 0x1, 0x1);
        gbc.writeMem(0x8c57, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1ac6);
        EXPECT(gbc.pc(), 0x8c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c57), 0xcb);
        EXPECT(gbc.readMem(0x8c58), 0xa5);
        // CB A5 006E
        gbc.setState(0xb36, 0xe2b1, 0x6040, 0xfbeb, 0xdfd5, 0x94c6, 0x0, 0x0);
        gbc.writeMem(0xb36, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xe2b1);
        EXPECT(gbc.pc(), 0xb38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 006F
        gbc.setState(0xc34a, 0x6ef9, 0x2060, 0x36ec, 0xd9c8, 0x6d9b, 0x0, 0x0);
        gbc.writeMem(0xc34a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6ef9);
        EXPECT(gbc.pc(), 0xc34c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34a), 0xcb);
        EXPECT(gbc.readMem(0xc34b), 0xa5);
        // CB A5 0070
        gbc.setState(0x9030, 0xdb7d, 0x52d0, 0x2427, 0x7643, 0x8084, 0x0, 0x0);
        gbc.writeMem(0x9030, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xdb7d);
        EXPECT(gbc.pc(), 0x9032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9030), 0xcb);
        EXPECT(gbc.readMem(0x9031), 0xa5);
        // CB A5 0071
        gbc.setState(0xe310, 0xbbba, 0x10, 0xc97e, 0xd47, 0xcecc, 0x1, 0x1);
        gbc.writeMem(0xe310, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xbbba);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe310), 0xcb);
        EXPECT(gbc.readMem(0xe311), 0xa5);
        // CB A5 0072
        gbc.setState(0x2646, 0x50c, 0x4700, 0x3e98, 0x408a, 0xf9c0, 0x0, 0x1);
        gbc.writeMem(0x2646, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x50c);
        EXPECT(gbc.pc(), 0x2648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0073
        gbc.setState(0x2cf3, 0x8fdc, 0x7460, 0xefce, 0x8b7, 0x34b0, 0x1, 0x0);
        gbc.writeMem(0x2cf3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x8fdc);
        EXPECT(gbc.pc(), 0x2cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0074
        gbc.setState(0xdde4, 0xccb5, 0xc8f0, 0xad5a, 0x2881, 0x53b6, 0x0, 0x1);
        gbc.writeMem(0xdde4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xccb5);
        EXPECT(gbc.pc(), 0xdde6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdde4), 0xcb);
        EXPECT(gbc.readMem(0xdde5), 0xa5);
        // CB A5 0075
        gbc.setState(0xa7fc, 0x3ba9, 0x4bd0, 0x6b21, 0xabc7, 0xfa8d, 0x0, 0x1);
        gbc.writeMem(0xa7fc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x3ba9);
        EXPECT(gbc.pc(), 0xa7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fc), 0xcb);
        EXPECT(gbc.readMem(0xa7fd), 0xa5);
        // CB A5 0076
        gbc.setState(0xb2e, 0x906c, 0xec10, 0xe38b, 0xcfef, 0x958d, 0x0, 0x0);
        gbc.writeMem(0xb2e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x906c);
        EXPECT(gbc.pc(), 0xb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0077
        gbc.setState(0x5822, 0x57b9, 0xc350, 0x9bcd, 0x62be, 0x1a36, 0x1, 0x1);
        gbc.writeMem(0x5822, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x57b9);
        EXPECT(gbc.pc(), 0x5824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0078
        gbc.setState(0xa37, 0x29f0, 0x7eb0, 0x64c, 0x1132, 0x1d95, 0x1, 0x0);
        gbc.writeMem(0xa37, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x29f0);
        EXPECT(gbc.pc(), 0xa39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 007B
        gbc.setState(0x4d3e, 0xc777, 0xc330, 0x4f44, 0x2bc5, 0x4a5, 0x0, 0x1);
        gbc.writeMem(0x4d3e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xc777);
        EXPECT(gbc.pc(), 0x4d40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 007C
        gbc.setState(0x5c83, 0xd04d, 0x6fd0, 0x7310, 0xf908, 0x5d8, 0x1, 0x1);
        gbc.writeMem(0x5c83, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd04d);
        EXPECT(gbc.pc(), 0x5c85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 007D
        gbc.setState(0x8680, 0x34fb, 0xb080, 0x1bf4, 0x471e, 0x907d, 0x0, 0x0);
        gbc.writeMem(0x8680, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x34fb);
        EXPECT(gbc.pc(), 0x8682);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8680), 0xcb);
        EXPECT(gbc.readMem(0x8681), 0xa5);
        // CB A5 007E
        gbc.setState(0x87f9, 0xfaa1, 0xeaf0, 0x53de, 0x998, 0x4861, 0x0, 0x1);
        gbc.writeMem(0x87f9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xfaa1);
        EXPECT(gbc.pc(), 0x87fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f9), 0xcb);
        EXPECT(gbc.readMem(0x87fa), 0xa5);
        // CB A5 007F
        gbc.setState(0x574c, 0x6640, 0x6160, 0x8f4f, 0x2329, 0x1d9f, 0x1, 0x0);
        gbc.writeMem(0x574c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6640);
        EXPECT(gbc.pc(), 0x574e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0080
        gbc.setState(0x4d77, 0xbca2, 0x69a0, 0x823d, 0x3c64, 0x6937, 0x0, 0x1);
        gbc.writeMem(0x4d77, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xbca2);
        EXPECT(gbc.pc(), 0x4d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0083
        gbc.setState(0xacc1, 0x8041, 0xed70, 0xe2a1, 0xe812, 0xea41, 0x1, 0x1);
        gbc.writeMem(0xacc1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8041);
        EXPECT(gbc.pc(), 0xacc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc1), 0xcb);
        EXPECT(gbc.readMem(0xacc2), 0xa5);
        // CB A5 0084
        gbc.setState(0x5276, 0xda4e, 0x65d0, 0xa23d, 0x6fae, 0x5da7, 0x1, 0x0);
        gbc.writeMem(0x5276, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xda4e);
        EXPECT(gbc.pc(), 0x5278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0085
        gbc.setState(0x49a0, 0x4b86, 0xb90, 0xebc1, 0x2669, 0xb7aa, 0x1, 0x0);
        gbc.writeMem(0x49a0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4b86);
        EXPECT(gbc.pc(), 0x49a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0086
        gbc.setState(0x471, 0x9804, 0xe2e0, 0x506b, 0x8ad, 0x551f, 0x1, 0x1);
        gbc.writeMem(0x471, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9804);
        EXPECT(gbc.pc(), 0x473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0087
        gbc.setState(0x6ca0, 0xdcb7, 0xedc0, 0x289c, 0xbbab, 0x4757, 0x1, 0x1);
        gbc.writeMem(0x6ca0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xdcb7);
        EXPECT(gbc.pc(), 0x6ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0088
        gbc.setState(0x7e3d, 0xc392, 0xc670, 0x9c12, 0x8b52, 0x9bfc, 0x1, 0x1);
        gbc.writeMem(0x7e3d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc392);
        EXPECT(gbc.pc(), 0x7e3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0089
        gbc.setState(0xa6d2, 0xd001, 0x6940, 0x1183, 0x8d1c, 0x7617, 0x1, 0x0);
        gbc.writeMem(0xa6d2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd001);
        EXPECT(gbc.pc(), 0xa6d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6d2), 0xcb);
        EXPECT(gbc.readMem(0xa6d3), 0xa5);
        // CB A5 008A
        gbc.setState(0x454, 0xcc88, 0x9a70, 0x7a27, 0x406, 0xbde9, 0x0, 0x1);
        gbc.writeMem(0x454, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xcc88);
        EXPECT(gbc.pc(), 0x456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 008B
        gbc.setState(0x87d, 0xc723, 0x5e90, 0x1c42, 0x733c, 0x39e2, 0x0, 0x0);
        gbc.writeMem(0x87d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc723);
        EXPECT(gbc.pc(), 0x87f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 008C
        gbc.setState(0x8aba, 0x6b0e, 0x5860, 0xd2fa, 0x89a, 0x6b13, 0x0, 0x0);
        gbc.writeMem(0x8aba, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6b0e);
        EXPECT(gbc.pc(), 0x8abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aba), 0xcb);
        EXPECT(gbc.readMem(0x8abb), 0xa5);
        // CB A5 008D
        gbc.setState(0x6f03, 0x2b03, 0x7fb0, 0x17d, 0xece5, 0xdc76, 0x0, 0x1);
        gbc.writeMem(0x6f03, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2b03);
        EXPECT(gbc.pc(), 0x6f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 008E
        gbc.setState(0x1c8f, 0x2e72, 0xe060, 0x51b6, 0x630c, 0xdafc, 0x1, 0x0);
        gbc.writeMem(0x1c8f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2e72);
        EXPECT(gbc.pc(), 0x1c91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 008F
        gbc.setState(0xdfc3, 0xd2, 0x6fc0, 0x3675, 0x94a2, 0x2722, 0x1, 0x0);
        gbc.writeMem(0xdfc3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xd2);
        EXPECT(gbc.pc(), 0xdfc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc3), 0xcb);
        EXPECT(gbc.readMem(0xdfc4), 0xa5);
        // CB A5 0090
        gbc.setState(0xb396, 0x13da, 0x830, 0xf549, 0xdaef, 0x5080, 0x1, 0x1);
        gbc.writeMem(0xb396, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x13da);
        EXPECT(gbc.pc(), 0xb398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb396), 0xcb);
        EXPECT(gbc.readMem(0xb397), 0xa5);
        // CB A5 0091
        gbc.setState(0x1934, 0xa2f5, 0x5df0, 0xacc, 0x1d4b, 0xe08e, 0x0, 0x1);
        gbc.writeMem(0x1934, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa2f5);
        EXPECT(gbc.pc(), 0x1936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0092
        gbc.setState(0x37a3, 0x9135, 0x3770, 0x763f, 0x1a07, 0xcc7e, 0x0, 0x1);
        gbc.writeMem(0x37a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9135);
        EXPECT(gbc.pc(), 0x37a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0093
        gbc.setState(0x86ff, 0x1445, 0xfb40, 0x6b48, 0x9b6f, 0x16a1, 0x1, 0x1);
        gbc.writeMem(0x86ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1445);
        EXPECT(gbc.pc(), 0x8701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86ff), 0xcb);
        EXPECT(gbc.readMem(0x8700), 0xa5);
        // CB A5 0094
        gbc.setState(0xe8b8, 0x4836, 0xf330, 0x461b, 0x4d0c, 0x924, 0x0, 0x1);
        gbc.writeMem(0xe8b8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4836);
        EXPECT(gbc.pc(), 0xe8ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8b8), 0xcb);
        EXPECT(gbc.readMem(0xe8b9), 0xa5);
        // CB A5 0095
        gbc.setState(0x7d9e, 0x8865, 0xa650, 0x78e5, 0xefa0, 0x7c21, 0x1, 0x0);
        gbc.writeMem(0x7d9e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8865);
        EXPECT(gbc.pc(), 0x7da0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0096
        gbc.setState(0xd861, 0xd8af, 0x1570, 0x930a, 0xa285, 0xaf5d, 0x0, 0x0);
        gbc.writeMem(0xd861, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd8af);
        EXPECT(gbc.pc(), 0xd863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd861), 0xcb);
        EXPECT(gbc.readMem(0xd862), 0xa5);
        // CB A5 0097
        gbc.setState(0x821c, 0x3fbb, 0xa870, 0xbb3d, 0x108d, 0x364, 0x1, 0x0);
        gbc.writeMem(0x821c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x3fbb);
        EXPECT(gbc.pc(), 0x821e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x821c), 0xcb);
        EXPECT(gbc.readMem(0x821d), 0xa5);
        // CB A5 0098
        gbc.setState(0xb0, 0xe3fd, 0xd520, 0x856a, 0x8d9f, 0xa2fd, 0x1, 0x0);
        gbc.writeMem(0xb0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xe3fd);
        EXPECT(gbc.pc(), 0xb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0099
        gbc.setState(0x376f, 0x21a4, 0xf800, 0x671d, 0xc190, 0x7f76, 0x1, 0x1);
        gbc.writeMem(0x376f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0x3771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 009B
        gbc.setState(0x473d, 0x9f8a, 0x1860, 0x7f9a, 0x9406, 0x26da, 0x0, 0x1);
        gbc.writeMem(0x473d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9f8a);
        EXPECT(gbc.pc(), 0x473f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 009C
        gbc.setState(0x33f4, 0x2233, 0xaf60, 0x5a98, 0x236b, 0x27a4, 0x1, 0x0);
        gbc.writeMem(0x33f4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2233);
        EXPECT(gbc.pc(), 0x33f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 009D
        gbc.setState(0xeebc, 0xa3a6, 0xce30, 0x6262, 0xa0b0, 0xf3e0, 0x0, 0x1);
        gbc.writeMem(0xeebc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa3a6);
        EXPECT(gbc.pc(), 0xeebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeebc), 0xcb);
        EXPECT(gbc.readMem(0xeebd), 0xa5);
        // CB A5 009E
        gbc.setState(0xcf02, 0x1643, 0xdca0, 0xa660, 0xd071, 0x1b5d, 0x1, 0x1);
        gbc.writeMem(0xcf02, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1643);
        EXPECT(gbc.pc(), 0xcf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf02), 0xcb);
        EXPECT(gbc.readMem(0xcf03), 0xa5);
        // CB A5 009F
        gbc.setState(0xb508, 0x5908, 0xba20, 0xffcd, 0x3c39, 0x5b18, 0x1, 0x0);
        gbc.writeMem(0xb508, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5908);
        EXPECT(gbc.pc(), 0xb50a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb508), 0xcb);
        EXPECT(gbc.readMem(0xb509), 0xa5);
        // CB A5 00A0
        gbc.setState(0x8eed, 0xf037, 0xa610, 0x753c, 0x8b43, 0x4598, 0x1, 0x0);
        gbc.writeMem(0x8eed, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf037);
        EXPECT(gbc.pc(), 0x8eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eed), 0xcb);
        EXPECT(gbc.readMem(0x8eee), 0xa5);
        // CB A5 00A1
        gbc.setState(0x737c, 0x6910, 0x8b80, 0x6f7a, 0x8128, 0xcef5, 0x1, 0x0);
        gbc.writeMem(0x737c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6910);
        EXPECT(gbc.pc(), 0x737e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00A2
        gbc.setState(0xc3c, 0xd07f, 0xd720, 0x1dd4, 0xcfd8, 0x2111, 0x1, 0x1);
        gbc.writeMem(0xc3c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd07f);
        EXPECT(gbc.pc(), 0xc3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00A4
        gbc.setState(0x8d0e, 0x1890, 0xc810, 0x25db, 0x14f8, 0x4f27, 0x1, 0x0);
        gbc.writeMem(0x8d0e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1890);
        EXPECT(gbc.pc(), 0x8d10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d0e), 0xcb);
        EXPECT(gbc.readMem(0x8d0f), 0xa5);
        // CB A5 00A5
        gbc.setState(0xee09, 0xb237, 0x6250, 0x8acb, 0x4abe, 0xea4a, 0x0, 0x0);
        gbc.writeMem(0xee09, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb237);
        EXPECT(gbc.pc(), 0xee0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee09), 0xcb);
        EXPECT(gbc.readMem(0xee0a), 0xa5);
        // CB A5 00A6
        gbc.setState(0x4dbe, 0x9032, 0xcb90, 0x3b18, 0x4995, 0xf76d, 0x1, 0x0);
        gbc.writeMem(0x4dbe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9032);
        EXPECT(gbc.pc(), 0x4dc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00A7
        gbc.setState(0x765f, 0x388a, 0xeae0, 0xa3f9, 0x7b5d, 0xdd0f, 0x1, 0x0);
        gbc.writeMem(0x765f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x388a);
        EXPECT(gbc.pc(), 0x7661);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00A8
        gbc.setState(0xbe1a, 0xc49a, 0x26b0, 0x215a, 0xda3d, 0x7dfa, 0x1, 0x1);
        gbc.writeMem(0xbe1a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc49a);
        EXPECT(gbc.pc(), 0xbe1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe1a), 0xcb);
        EXPECT(gbc.readMem(0xbe1b), 0xa5);
        // CB A5 00A9
        gbc.setState(0x2f50, 0x8560, 0x3a00, 0x3dab, 0x6e8, 0xe6fd, 0x1, 0x0);
        gbc.writeMem(0x2f50, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8560);
        EXPECT(gbc.pc(), 0x2f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00AA
        gbc.setState(0x4e51, 0x1877, 0x1c60, 0x75f3, 0x1b39, 0x30ef, 0x0, 0x1);
        gbc.writeMem(0x4e51, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1877);
        EXPECT(gbc.pc(), 0x4e53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00AB
        gbc.setState(0xa537, 0xf4c0, 0xbb0, 0xf555, 0xb3fa, 0x1e30, 0x1, 0x1);
        gbc.writeMem(0xa537, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf4c0);
        EXPECT(gbc.pc(), 0xa539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa537), 0xcb);
        EXPECT(gbc.readMem(0xa538), 0xa5);
        // CB A5 00AC
        gbc.setState(0x86b7, 0x94ff, 0x9600, 0x799c, 0x630, 0xe5ef, 0x0, 0x0);
        gbc.writeMem(0x86b7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x94ff);
        EXPECT(gbc.pc(), 0x86b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b7), 0xcb);
        EXPECT(gbc.readMem(0x86b8), 0xa5);
        // CB A5 00AD
        gbc.setState(0xd199, 0x7945, 0xdf90, 0x4e1e, 0xddc6, 0x1cab, 0x1, 0x1);
        gbc.writeMem(0xd199, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7945);
        EXPECT(gbc.pc(), 0xd19b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd199), 0xcb);
        EXPECT(gbc.readMem(0xd19a), 0xa5);
        // CB A5 00AE
        gbc.setState(0x1f79, 0xc41f, 0xcfd0, 0x8b21, 0x224b, 0xf9e, 0x0, 0x0);
        gbc.writeMem(0x1f79, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc41f);
        EXPECT(gbc.pc(), 0x1f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00AF
        gbc.setState(0xabe, 0x1e0d, 0xcdd0, 0x529c, 0x8518, 0x8e8a, 0x0, 0x0);
        gbc.writeMem(0xabe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1e0d);
        EXPECT(gbc.pc(), 0xac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00B0
        gbc.setState(0x31e3, 0xe9, 0x9ec0, 0x90fd, 0xb03, 0x8052, 0x0, 0x0);
        gbc.writeMem(0x31e3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe9);
        EXPECT(gbc.pc(), 0x31e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00B1
        gbc.setState(0xa827, 0x2e25, 0xa290, 0xb595, 0xf9c, 0x9a07, 0x0, 0x0);
        gbc.writeMem(0xa827, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x2e25);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa827), 0xcb);
        EXPECT(gbc.readMem(0xa828), 0xa5);
        // CB A5 00B2
        gbc.setState(0xe9e, 0xab62, 0x230, 0x1f19, 0x9ec0, 0x8590, 0x1, 0x0);
        gbc.writeMem(0xe9e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xab62);
        EXPECT(gbc.pc(), 0xea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00B3
        gbc.setState(0xbe5b, 0xdd95, 0x1290, 0x3200, 0x7d23, 0x4a14, 0x0, 0x0);
        gbc.writeMem(0xbe5b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xdd95);
        EXPECT(gbc.pc(), 0xbe5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe5b), 0xcb);
        EXPECT(gbc.readMem(0xbe5c), 0xa5);
        // CB A5 00B4
        gbc.setState(0xa002, 0x6662, 0xc60, 0x37f8, 0x74c3, 0x20a1, 0x0, 0x1);
        gbc.writeMem(0xa002, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6662);
        EXPECT(gbc.pc(), 0xa004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa002), 0xcb);
        EXPECT(gbc.readMem(0xa003), 0xa5);
        // CB A5 00B5
        gbc.setState(0x222d, 0x3b6, 0x5880, 0x12ed, 0xf4cd, 0x7452, 0x0, 0x0);
        gbc.writeMem(0x222d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x3b6);
        EXPECT(gbc.pc(), 0x222f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00B6
        gbc.setState(0x569f, 0xaf36, 0xf8d0, 0x547e, 0x9e8, 0xe725, 0x0, 0x1);
        gbc.writeMem(0x569f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xaf36);
        EXPECT(gbc.pc(), 0x56a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00B7
        gbc.setState(0x8cae, 0x1abc, 0x7d10, 0xd263, 0x700, 0x762a, 0x1, 0x0);
        gbc.writeMem(0x8cae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1abc);
        EXPECT(gbc.pc(), 0x8cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cae), 0xcb);
        EXPECT(gbc.readMem(0x8caf), 0xa5);
        // CB A5 00B8
        gbc.setState(0xbf8d, 0x6e86, 0x13a0, 0x4611, 0xf328, 0x207a, 0x0, 0x0);
        gbc.writeMem(0xbf8d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x6e86);
        EXPECT(gbc.pc(), 0xbf8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8d), 0xcb);
        EXPECT(gbc.readMem(0xbf8e), 0xa5);
        // CB A5 00B9
        gbc.setState(0x5ef3, 0xff1e, 0x2d0, 0xbc7e, 0x9a8, 0xe7dd, 0x0, 0x1);
        gbc.writeMem(0x5ef3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xff1e);
        EXPECT(gbc.pc(), 0x5ef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00BA
        gbc.setState(0x42e3, 0xba99, 0xfac0, 0xfdae, 0x973b, 0xee31, 0x0, 0x0);
        gbc.writeMem(0x42e3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xba99);
        EXPECT(gbc.pc(), 0x42e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00BB
        gbc.setState(0xe15, 0xcd29, 0xaca0, 0x1336, 0xd122, 0x120, 0x0, 0x1);
        gbc.writeMem(0xe15, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcd29);
        EXPECT(gbc.pc(), 0xe17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00BC
        gbc.setState(0x896, 0xf2fe, 0x63c0, 0x8d83, 0x3c6, 0xa875, 0x1, 0x0);
        gbc.writeMem(0x896, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf2fe);
        EXPECT(gbc.pc(), 0x898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00BD
        gbc.setState(0x88fb, 0x91e, 0x2830, 0xbc0f, 0x2754, 0x95c9, 0x1, 0x0);
        gbc.writeMem(0x88fb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x91e);
        EXPECT(gbc.pc(), 0x88fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88fb), 0xcb);
        EXPECT(gbc.readMem(0x88fc), 0xa5);
        // CB A5 00BE
        gbc.setState(0xd8ba, 0x1207, 0xb3c0, 0x99cc, 0x1313, 0xbab3, 0x1, 0x0);
        gbc.writeMem(0xd8ba, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1207);
        EXPECT(gbc.pc(), 0xd8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8ba), 0xcb);
        EXPECT(gbc.readMem(0xd8bb), 0xa5);
        // CB A5 00BF
        gbc.setState(0xa366, 0x620f, 0x5ca0, 0x8ca6, 0x4e2a, 0xc1dc, 0x0, 0x1);
        gbc.writeMem(0xa366, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x620f);
        EXPECT(gbc.pc(), 0xa368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa366), 0xcb);
        EXPECT(gbc.readMem(0xa367), 0xa5);
        // CB A5 00C0
        gbc.setState(0x74de, 0x3b4, 0x3ea0, 0x4925, 0x7384, 0xb028, 0x0, 0x1);
        gbc.writeMem(0x74de, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3b4);
        EXPECT(gbc.pc(), 0x74e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00C1
        gbc.setState(0xce51, 0x75f5, 0x1ea0, 0xc395, 0x28cc, 0xe177, 0x1, 0x1);
        gbc.writeMem(0xce51, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x75f5);
        EXPECT(gbc.pc(), 0xce53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce51), 0xcb);
        EXPECT(gbc.readMem(0xce52), 0xa5);
        // CB A5 00C2
        gbc.setState(0xdcb, 0x2f7c, 0xa130, 0xe7a9, 0x25a3, 0x4058, 0x0, 0x0);
        gbc.writeMem(0xdcb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x2f7c);
        EXPECT(gbc.pc(), 0xdcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00C3
        gbc.setState(0x6b17, 0x5a35, 0x3160, 0x3dc9, 0xb292, 0xf551, 0x0, 0x0);
        gbc.writeMem(0x6b17, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x5a35);
        EXPECT(gbc.pc(), 0x6b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00C4
        gbc.setState(0x5516, 0x6fd2, 0xe9d0, 0x4932, 0xbad8, 0x3a70, 0x0, 0x1);
        gbc.writeMem(0x5516, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6fd2);
        EXPECT(gbc.pc(), 0x5518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00C5
        gbc.setState(0xa43e, 0xe13e, 0xc4a0, 0xb164, 0x1986, 0x8882, 0x0, 0x1);
        gbc.writeMem(0xa43e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe13e);
        EXPECT(gbc.pc(), 0xa440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa43e), 0xcb);
        EXPECT(gbc.readMem(0xa43f), 0xa5);
        // CB A5 00C6
        gbc.setState(0xc260, 0x4ddc, 0xd950, 0xcc00, 0x1949, 0x56aa, 0x0, 0x0);
        gbc.writeMem(0xc260, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4ddc);
        EXPECT(gbc.pc(), 0xc262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc260), 0xcb);
        EXPECT(gbc.readMem(0xc261), 0xa5);
        // CB A5 00C7
        gbc.setState(0x7f74, 0xcdad, 0xf250, 0x7ddf, 0xeaa7, 0x988c, 0x0, 0x1);
        gbc.writeMem(0x7f74, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xcdad);
        EXPECT(gbc.pc(), 0x7f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00C8
        gbc.setState(0x7df9, 0xc839, 0x5900, 0x44b4, 0xc5de, 0xa275, 0x1, 0x1);
        gbc.writeMem(0x7df9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xc839);
        EXPECT(gbc.pc(), 0x7dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00C9
        gbc.setState(0xbe57, 0xf72a, 0x3f00, 0xcc10, 0xdc18, 0xb875, 0x1, 0x0);
        gbc.writeMem(0xbe57, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf72a);
        EXPECT(gbc.pc(), 0xbe59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe57), 0xcb);
        EXPECT(gbc.readMem(0xbe58), 0xa5);
        // CB A5 00CA
        gbc.setState(0x83b4, 0x5d24, 0xfb30, 0xe4ca, 0xbf5, 0xc234, 0x1, 0x1);
        gbc.writeMem(0x83b4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5d24);
        EXPECT(gbc.pc(), 0x83b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b4), 0xcb);
        EXPECT(gbc.readMem(0x83b5), 0xa5);
        // CB A5 00CB
        gbc.setState(0x13cf, 0x3fe1, 0xfde0, 0x5827, 0xf53d, 0xfb90, 0x0, 0x1);
        gbc.writeMem(0x13cf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x3fe1);
        EXPECT(gbc.pc(), 0x13d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00CC
        gbc.setState(0x6535, 0xdf43, 0x2f80, 0x147, 0xe564, 0x7b01, 0x1, 0x0);
        gbc.writeMem(0x6535, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdf43);
        EXPECT(gbc.pc(), 0x6537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00CD
        gbc.setState(0xccce, 0x4c21, 0x6900, 0x551, 0x972c, 0xb516, 0x0, 0x1);
        gbc.writeMem(0xccce, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4c21);
        EXPECT(gbc.pc(), 0xccd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccce), 0xcb);
        EXPECT(gbc.readMem(0xcccf), 0xa5);
        // CB A5 00CE
        gbc.setState(0x8c95, 0xb2d2, 0xbef0, 0x6822, 0xeb1a, 0x1f66, 0x1, 0x1);
        gbc.writeMem(0x8c95, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xb2d2);
        EXPECT(gbc.pc(), 0x8c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c95), 0xcb);
        EXPECT(gbc.readMem(0x8c96), 0xa5);
        // CB A5 00CF
        gbc.setState(0x6dc4, 0x4fa1, 0x2770, 0x6118, 0xc33e, 0xac54, 0x1, 0x1);
        gbc.writeMem(0x6dc4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4fa1);
        EXPECT(gbc.pc(), 0x6dc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00D0
        gbc.setState(0xae96, 0x887a, 0x5ad0, 0x6f66, 0x201f, 0xd868, 0x0, 0x0);
        gbc.writeMem(0xae96, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x887a);
        EXPECT(gbc.pc(), 0xae98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae96), 0xcb);
        EXPECT(gbc.readMem(0xae97), 0xa5);
        // CB A5 00D1
        gbc.setState(0xbdb0, 0x6a3, 0x9190, 0x972d, 0xd95b, 0xd22c, 0x0, 0x1);
        gbc.writeMem(0xbdb0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6a3);
        EXPECT(gbc.pc(), 0xbdb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdb0), 0xcb);
        EXPECT(gbc.readMem(0xbdb1), 0xa5);
        // CB A5 00D2
        gbc.setState(0x8c52, 0x2ec5, 0xfc40, 0x8711, 0x72be, 0xce67, 0x0, 0x0);
        gbc.writeMem(0x8c52, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2ec5);
        EXPECT(gbc.pc(), 0x8c54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c52), 0xcb);
        EXPECT(gbc.readMem(0x8c53), 0xa5);
        // CB A5 00D3
        gbc.setState(0xd10d, 0x1198, 0xb90, 0x13eb, 0xdb94, 0x8ac3, 0x1, 0x1);
        gbc.writeMem(0xd10d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1198);
        EXPECT(gbc.pc(), 0xd10f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd10d), 0xcb);
        EXPECT(gbc.readMem(0xd10e), 0xa5);
        // CB A5 00D4
        gbc.setState(0x5624, 0xb352, 0xe9c0, 0x9a53, 0xb1b7, 0x9846, 0x1, 0x0);
        gbc.writeMem(0x5624, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb352);
        EXPECT(gbc.pc(), 0x5626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00D5
        gbc.setState(0x194, 0x921a, 0x3480, 0xd1b3, 0xa622, 0x6f0d, 0x1, 0x1);
        gbc.writeMem(0x194, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x921a);
        EXPECT(gbc.pc(), 0x196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00D6
        gbc.setState(0xa7cd, 0xb749, 0xee70, 0x53ff, 0xe450, 0xfa4b, 0x0, 0x0);
        gbc.writeMem(0xa7cd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xb749);
        EXPECT(gbc.pc(), 0xa7cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7cd), 0xcb);
        EXPECT(gbc.readMem(0xa7ce), 0xa5);
        // CB A5 00D7
        gbc.setState(0x27e6, 0x91fc, 0xd70, 0x3e50, 0xcf3a, 0x1729, 0x0, 0x1);
        gbc.writeMem(0x27e6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x91fc);
        EXPECT(gbc.pc(), 0x27e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00D8
        gbc.setState(0x4677, 0x7924, 0x55b0, 0xaf6c, 0x9d16, 0x435d, 0x1, 0x1);
        gbc.writeMem(0x4677, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7924);
        EXPECT(gbc.pc(), 0x4679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00D9
        gbc.setState(0x129d, 0xaa53, 0x8cd0, 0x8fd5, 0xb5dc, 0xea8c, 0x1, 0x0);
        gbc.writeMem(0x129d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xaa53);
        EXPECT(gbc.pc(), 0x129f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00DA
        gbc.setState(0x40bb, 0xd229, 0xebe0, 0x7c8a, 0xcc56, 0x488a, 0x1, 0x0);
        gbc.writeMem(0x40bb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd229);
        EXPECT(gbc.pc(), 0x40bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00DB
        gbc.setState(0x4038, 0x1f4d, 0x5d90, 0xbfc8, 0x142e, 0xe40d, 0x1, 0x0);
        gbc.writeMem(0x4038, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1f4d);
        EXPECT(gbc.pc(), 0x403a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00DC
        gbc.setState(0x5613, 0xad78, 0xe60, 0xa5ea, 0x604d, 0x1002, 0x0, 0x0);
        gbc.writeMem(0x5613, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xad78);
        EXPECT(gbc.pc(), 0x5615);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00DE
        gbc.setState(0x934b, 0x187, 0x8ba0, 0xbd02, 0xd357, 0x905e, 0x0, 0x0);
        gbc.writeMem(0x934b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x187);
        EXPECT(gbc.pc(), 0x934d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x934b), 0xcb);
        EXPECT(gbc.readMem(0x934c), 0xa5);
        // CB A5 00DF
        gbc.setState(0x9ebd, 0x1040, 0x8430, 0x8899, 0xc68c, 0x231f, 0x0, 0x0);
        gbc.writeMem(0x9ebd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1040);
        EXPECT(gbc.pc(), 0x9ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ebd), 0xcb);
        EXPECT(gbc.readMem(0x9ebe), 0xa5);
        // CB A5 00E1
        gbc.setState(0x1caf, 0xe4f2, 0x67f0, 0x5768, 0x314a, 0xf681, 0x1, 0x1);
        gbc.writeMem(0x1caf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe4f2);
        EXPECT(gbc.pc(), 0x1cb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00E2
        gbc.setState(0x8120, 0x79e, 0xe440, 0x36c1, 0x9278, 0x8d0e, 0x1, 0x1);
        gbc.writeMem(0x8120, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x79e);
        EXPECT(gbc.pc(), 0x8122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8120), 0xcb);
        EXPECT(gbc.readMem(0x8121), 0xa5);
        // CB A5 00E3
        gbc.setState(0xd0b8, 0xf450, 0xd250, 0xe4e8, 0x13f, 0x186a, 0x1, 0x1);
        gbc.writeMem(0xd0b8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf450);
        EXPECT(gbc.pc(), 0xd0ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0b8), 0xcb);
        EXPECT(gbc.readMem(0xd0b9), 0xa5);
        // CB A5 00E5
        gbc.setState(0xca11, 0xd851, 0xc5d0, 0x1980, 0xdb88, 0x41af, 0x0, 0x1);
        gbc.writeMem(0xca11, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd851);
        EXPECT(gbc.pc(), 0xca13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca11), 0xcb);
        EXPECT(gbc.readMem(0xca12), 0xa5);
        // CB A5 00E6
        gbc.setState(0xebfb, 0xf17f, 0x8c80, 0x553e, 0x1aee, 0xbf5c, 0x1, 0x0);
        gbc.writeMem(0xebfb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf17f);
        EXPECT(gbc.pc(), 0xebfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebfb), 0xcb);
        EXPECT(gbc.readMem(0xebfc), 0xa5);
        // CB A5 00E7
        gbc.setState(0x60b3, 0x5c88, 0xf850, 0x89d9, 0x8a14, 0x9130, 0x1, 0x0);
        gbc.writeMem(0x60b3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5c88);
        EXPECT(gbc.pc(), 0x60b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00E9
        gbc.setState(0x27af, 0x8ff4, 0x51d0, 0x4b25, 0x352c, 0x99e7, 0x1, 0x0);
        gbc.writeMem(0x27af, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8ff4);
        EXPECT(gbc.pc(), 0x27b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00EA
        gbc.setState(0xf5c, 0xb6af, 0x300, 0xc7ed, 0xbfaf, 0x5687, 0x0, 0x0);
        gbc.writeMem(0xf5c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb6af);
        EXPECT(gbc.pc(), 0xf5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00EB
        gbc.setState(0x6e75, 0x52f6, 0x1930, 0xb8e2, 0x3f2f, 0x77be, 0x1, 0x0);
        gbc.writeMem(0x6e75, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x52f6);
        EXPECT(gbc.pc(), 0x6e77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00EC
        gbc.setState(0x6b3b, 0x3454, 0x190, 0x9d2c, 0xab71, 0xe99f, 0x1, 0x1);
        gbc.writeMem(0x6b3b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3454);
        EXPECT(gbc.pc(), 0x6b3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00ED
        gbc.setState(0x83e7, 0xf77f, 0x28f0, 0xca39, 0x6a25, 0x5244, 0x0, 0x0);
        gbc.writeMem(0x83e7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf77f);
        EXPECT(gbc.pc(), 0x83e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83e7), 0xcb);
        EXPECT(gbc.readMem(0x83e8), 0xa5);
        // CB A5 00EE
        gbc.setState(0xe8ee, 0xe805, 0xda80, 0x9436, 0x4045, 0x3944, 0x1, 0x1);
        gbc.writeMem(0xe8ee, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xe805);
        EXPECT(gbc.pc(), 0xe8f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ee), 0xcb);
        EXPECT(gbc.readMem(0xe8ef), 0xa5);
        // CB A5 00EF
        gbc.setState(0x5737, 0x8ed5, 0x8190, 0x577a, 0x718a, 0xb8f1, 0x0, 0x0);
        gbc.writeMem(0x5737, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8ed5);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00F0
        gbc.setState(0x7800, 0x9a70, 0xe4a0, 0xc60f, 0x6aee, 0x2a78, 0x0, 0x1);
        gbc.writeMem(0x7800, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9a70);
        EXPECT(gbc.pc(), 0x7802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00F1
        gbc.setState(0x964f, 0x131c, 0x9e00, 0x5774, 0xfa38, 0xdd5b, 0x1, 0x0);
        gbc.writeMem(0x964f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x131c);
        EXPECT(gbc.pc(), 0x9651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x964f), 0xcb);
        EXPECT(gbc.readMem(0x9650), 0xa5);
        // CB A5 00F2
        gbc.setState(0xbbae, 0xf682, 0xd2b0, 0xd89a, 0x8c01, 0xb9e2, 0x0, 0x1);
        gbc.writeMem(0xbbae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf682);
        EXPECT(gbc.pc(), 0xbbb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbae), 0xcb);
        EXPECT(gbc.readMem(0xbbaf), 0xa5);
        // CB A5 00F4
        gbc.setState(0x79f3, 0x5661, 0x5570, 0x10b3, 0x8636, 0xcb60, 0x0, 0x1);
        gbc.writeMem(0x79f3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x5661);
        EXPECT(gbc.pc(), 0x79f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 00F6
        gbc.setState(0xa855, 0x25b5, 0xe570, 0xfa07, 0x16ec, 0x776c, 0x1, 0x0);
        gbc.writeMem(0xa855, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x25b5);
        EXPECT(gbc.pc(), 0xa857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa855), 0xcb);
        EXPECT(gbc.readMem(0xa856), 0xa5);
        // CB A5 00F7
        gbc.setState(0x50d0, 0xfbf2, 0x3340, 0x6a1, 0x63ab, 0xddfe, 0x0, 0x0);
        gbc.writeMem(0x50d0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfbf2);
        EXPECT(gbc.pc(), 0x50d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00F8
        gbc.setState(0x402e, 0x869, 0x3b20, 0xe2e9, 0x3d2a, 0x82f0, 0x0, 0x0);
        gbc.writeMem(0x402e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x869);
        EXPECT(gbc.pc(), 0x4030);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00F9
        gbc.setState(0x5caf, 0x4670, 0x6a20, 0x3f49, 0xe62d, 0x3ffd, 0x1, 0x1);
        gbc.writeMem(0x5caf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4670);
        EXPECT(gbc.pc(), 0x5cb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 00FA
        gbc.setState(0xdf97, 0x1791, 0x2b30, 0x37b, 0x387d, 0x5967, 0x1, 0x0);
        gbc.writeMem(0xdf97, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1791);
        EXPECT(gbc.pc(), 0xdf99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf97), 0xcb);
        EXPECT(gbc.readMem(0xdf98), 0xa5);
        // CB A5 00FB
        gbc.setState(0xe338, 0xbff1, 0x33d0, 0x5ac2, 0x965d, 0x6b15, 0x1, 0x1);
        gbc.writeMem(0xe338, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbff1);
        EXPECT(gbc.pc(), 0xe33a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe338), 0xcb);
        EXPECT(gbc.readMem(0xe339), 0xa5);
        // CB A5 00FC
        gbc.setState(0xe882, 0xac38, 0x2b20, 0xbac6, 0xdfb5, 0x9319, 0x0, 0x1);
        gbc.writeMem(0xe882, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xac38);
        EXPECT(gbc.pc(), 0xe884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe882), 0xcb);
        EXPECT(gbc.readMem(0xe883), 0xa5);
        // CB A5 00FD
        gbc.setState(0x8e6e, 0x8267, 0x8a00, 0x3091, 0xf26e, 0xe864, 0x1, 0x1);
        gbc.writeMem(0x8e6e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8267);
        EXPECT(gbc.pc(), 0x8e70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e6e), 0xcb);
        EXPECT(gbc.readMem(0x8e6f), 0xa5);
        // CB A5 00FE
        gbc.setState(0xad18, 0x66ea, 0xc40, 0xe21b, 0xb68c, 0xaa6, 0x0, 0x1);
        gbc.writeMem(0xad18, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x66ea);
        EXPECT(gbc.pc(), 0xad1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad18), 0xcb);
        EXPECT(gbc.readMem(0xad19), 0xa5);
        // CB A5 00FF
        gbc.setState(0x4a79, 0x5a6c, 0x13b0, 0x62e0, 0xc4d6, 0x1565, 0x0, 0x0);
        gbc.writeMem(0x4a79, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x5a6c);
        EXPECT(gbc.pc(), 0x4a7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0100
        gbc.setState(0xa535, 0x9a3c, 0x9af0, 0xc8e0, 0x455f, 0xb585, 0x0, 0x0);
        gbc.writeMem(0xa535, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9a3c);
        EXPECT(gbc.pc(), 0xa537);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa535), 0xcb);
        EXPECT(gbc.readMem(0xa536), 0xa5);
        // CB A5 0101
        gbc.setState(0x739e, 0xc89f, 0xc880, 0x5871, 0x7b34, 0x60e7, 0x1, 0x1);
        gbc.writeMem(0x739e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc89f);
        EXPECT(gbc.pc(), 0x73a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0102
        gbc.setState(0xb6ff, 0x4700, 0xb6d0, 0x7e55, 0x3a57, 0xe924, 0x1, 0x1);
        gbc.writeMem(0xb6ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4700);
        EXPECT(gbc.pc(), 0xb701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ff), 0xcb);
        EXPECT(gbc.readMem(0xb700), 0xa5);
        // CB A5 0103
        gbc.setState(0x343f, 0x4301, 0x3a60, 0xa151, 0x4c1b, 0xe2e1, 0x1, 0x0);
        gbc.writeMem(0x343f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x4301);
        EXPECT(gbc.pc(), 0x3441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0104
        gbc.setState(0x7a00, 0xf5a8, 0xad60, 0xb3a, 0x717e, 0xd9b6, 0x0, 0x1);
        gbc.writeMem(0x7a00, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf5a8);
        EXPECT(gbc.pc(), 0x7a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0105
        gbc.setState(0x5879, 0x7356, 0x9060, 0xdbaa, 0x7071, 0x347b, 0x0, 0x1);
        gbc.writeMem(0x5879, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7356);
        EXPECT(gbc.pc(), 0x587b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0106
        gbc.setState(0xc74, 0x29ad, 0x4410, 0x99e5, 0x2344, 0x7f08, 0x1, 0x1);
        gbc.writeMem(0xc74, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x29ad);
        EXPECT(gbc.pc(), 0xc76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0107
        gbc.setState(0x8917, 0x2ed7, 0xf4b0, 0x90fb, 0x2445, 0xe8a6, 0x1, 0x0);
        gbc.writeMem(0x8917, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2ed7);
        EXPECT(gbc.pc(), 0x8919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8917), 0xcb);
        EXPECT(gbc.readMem(0x8918), 0xa5);
        // CB A5 0108
        gbc.setState(0xc0a7, 0x9d50, 0xfca0, 0x5314, 0x4199, 0x3a1c, 0x0, 0x0);
        gbc.writeMem(0xc0a7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9d50);
        EXPECT(gbc.pc(), 0xc0a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0a7), 0xcb);
        EXPECT(gbc.readMem(0xc0a8), 0xa5);
        // CB A5 0109
        gbc.setState(0x565c, 0x7e27, 0xe2b0, 0x5a61, 0x6d30, 0x380, 0x0, 0x0);
        gbc.writeMem(0x565c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7e27);
        EXPECT(gbc.pc(), 0x565e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 010A
        gbc.setState(0x7e38, 0x20d8, 0x5da0, 0x9989, 0xc5bf, 0xecf9, 0x1, 0x0);
        gbc.writeMem(0x7e38, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x20d8);
        EXPECT(gbc.pc(), 0x7e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 010B
        gbc.setState(0x461a, 0x5f9e, 0xfbf0, 0x7012, 0xb7f9, 0x3646, 0x0, 0x1);
        gbc.writeMem(0x461a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5f9e);
        EXPECT(gbc.pc(), 0x461c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 010C
        gbc.setState(0x4c75, 0x740a, 0x9500, 0xc22f, 0x949e, 0x8270, 0x1, 0x1);
        gbc.writeMem(0x4c75, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x740a);
        EXPECT(gbc.pc(), 0x4c77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 010D
        gbc.setState(0xe65c, 0x4b7, 0xc2e0, 0x58b4, 0x1f45, 0x36ad, 0x1, 0x1);
        gbc.writeMem(0xe65c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4b7);
        EXPECT(gbc.pc(), 0xe65e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe65c), 0xcb);
        EXPECT(gbc.readMem(0xe65d), 0xa5);
        // CB A5 010F
        gbc.setState(0x126d, 0x6a42, 0xacb0, 0x42cf, 0x4279, 0x75f8, 0x0, 0x0);
        gbc.writeMem(0x126d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6a42);
        EXPECT(gbc.pc(), 0x126f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0110
        gbc.setState(0x5683, 0xe832, 0x41e0, 0x471e, 0x3308, 0x3e89, 0x1, 0x0);
        gbc.writeMem(0x5683, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe832);
        EXPECT(gbc.pc(), 0x5685);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0111
        gbc.setState(0x972c, 0x9d53, 0xcb80, 0x5798, 0xaa88, 0xffee, 0x0, 0x1);
        gbc.writeMem(0x972c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9d53);
        EXPECT(gbc.pc(), 0x972e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x972c), 0xcb);
        EXPECT(gbc.readMem(0x972d), 0xa5);
        // CB A5 0112
        gbc.setState(0xe373, 0x1edb, 0xee90, 0xf420, 0xdd3d, 0xb2d9, 0x1, 0x0);
        gbc.writeMem(0xe373, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x1edb);
        EXPECT(gbc.pc(), 0xe375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe373), 0xcb);
        EXPECT(gbc.readMem(0xe374), 0xa5);
        // CB A5 0113
        gbc.setState(0x4741, 0xb0d7, 0xb970, 0x5828, 0xc890, 0x6e4f, 0x0, 0x0);
        gbc.writeMem(0x4741, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb0d7);
        EXPECT(gbc.pc(), 0x4743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0114
        gbc.setState(0x67c7, 0x1194, 0x1820, 0xee5, 0x104f, 0x7545, 0x1, 0x0);
        gbc.writeMem(0x67c7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1194);
        EXPECT(gbc.pc(), 0x67c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0115
        gbc.setState(0xe491, 0x7179, 0x6a70, 0x121f, 0xfd85, 0xe732, 0x0, 0x1);
        gbc.writeMem(0xe491, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7179);
        EXPECT(gbc.pc(), 0xe493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe491), 0xcb);
        EXPECT(gbc.readMem(0xe492), 0xa5);
        // CB A5 0116
        gbc.setState(0xd6ab, 0xfbd0, 0xc840, 0xda91, 0xa79c, 0x8fff, 0x1, 0x1);
        gbc.writeMem(0xd6ab, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfbd0);
        EXPECT(gbc.pc(), 0xd6ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6ab), 0xcb);
        EXPECT(gbc.readMem(0xd6ac), 0xa5);
        // CB A5 0117
        gbc.setState(0x890a, 0x2f5c, 0xa430, 0xce36, 0x9512, 0x12e, 0x1, 0x0);
        gbc.writeMem(0x890a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2f5c);
        EXPECT(gbc.pc(), 0x890c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x890a), 0xcb);
        EXPECT(gbc.readMem(0x890b), 0xa5);
        // CB A5 0118
        gbc.setState(0x940d, 0x4188, 0xe90, 0x5770, 0x2eb7, 0x2c31, 0x1, 0x0);
        gbc.writeMem(0x940d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x4188);
        EXPECT(gbc.pc(), 0x940f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x940d), 0xcb);
        EXPECT(gbc.readMem(0x940e), 0xa5);
        // CB A5 0119
        gbc.setState(0x20c, 0x4c48, 0x64f0, 0x41f7, 0x3cb2, 0xa912, 0x0, 0x0);
        gbc.writeMem(0x20c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4c48);
        EXPECT(gbc.pc(), 0x20e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 011A
        gbc.setState(0xda27, 0xa8a3, 0xd120, 0xf36d, 0x7912, 0xe7f2, 0x0, 0x0);
        gbc.writeMem(0xda27, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa8a3);
        EXPECT(gbc.pc(), 0xda29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda27), 0xcb);
        EXPECT(gbc.readMem(0xda28), 0xa5);
        // CB A5 011C
        gbc.setState(0xa739, 0x5916, 0x4cc0, 0xe5f3, 0x35a0, 0x181, 0x0, 0x1);
        gbc.writeMem(0xa739, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x5916);
        EXPECT(gbc.pc(), 0xa73b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa739), 0xcb);
        EXPECT(gbc.readMem(0xa73a), 0xa5);
        // CB A5 011D
        gbc.setState(0x7be8, 0x37d1, 0x35f0, 0x793f, 0x6ab3, 0x98db, 0x0, 0x1);
        gbc.writeMem(0x7be8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x37d1);
        EXPECT(gbc.pc(), 0x7bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 011E
        gbc.setState(0x3e44, 0x7148, 0x8680, 0x7d42, 0x271f, 0xc6de, 0x0, 0x0);
        gbc.writeMem(0x3e44, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7148);
        EXPECT(gbc.pc(), 0x3e46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 011F
        gbc.setState(0x5c7d, 0x29b9, 0x5e70, 0x663b, 0x3e3a, 0x93c9, 0x1, 0x0);
        gbc.writeMem(0x5c7d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x29b9);
        EXPECT(gbc.pc(), 0x5c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0120
        gbc.setState(0xd971, 0x3050, 0x8900, 0xa932, 0x5eed, 0x6fb9, 0x1, 0x1);
        gbc.writeMem(0xd971, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3050);
        EXPECT(gbc.pc(), 0xd973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd971), 0xcb);
        EXPECT(gbc.readMem(0xd972), 0xa5);
        // CB A5 0121
        gbc.setState(0x4d7e, 0x95c9, 0x6510, 0x276c, 0x45, 0xaa35, 0x0, 0x0);
        gbc.writeMem(0x4d7e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x95c9);
        EXPECT(gbc.pc(), 0x4d80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0122
        gbc.setState(0x98c, 0x5c58, 0xf4e0, 0x1ad7, 0xec05, 0x8ac7, 0x0, 0x1);
        gbc.writeMem(0x98c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5c58);
        EXPECT(gbc.pc(), 0x98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0123
        gbc.setState(0x3d7e, 0x5e08, 0xef80, 0x2b8a, 0x5160, 0x4e89, 0x1, 0x1);
        gbc.writeMem(0x3d7e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5e08);
        EXPECT(gbc.pc(), 0x3d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0124
        gbc.setState(0x4240, 0x82e7, 0x3550, 0x4a0e, 0x64a7, 0x1163, 0x0, 0x0);
        gbc.writeMem(0x4240, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x82e7);
        EXPECT(gbc.pc(), 0x4242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0125
        gbc.setState(0xc01a, 0x7825, 0x25b0, 0x7490, 0x45e8, 0xc352, 0x0, 0x0);
        gbc.writeMem(0xc01a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0xc01c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc01a), 0xcb);
        EXPECT(gbc.readMem(0xc01b), 0xa5);
        // CB A5 0126
        gbc.setState(0x693e, 0xccbe, 0x7b10, 0xb049, 0x8968, 0x2d0f, 0x0, 0x0);
        gbc.writeMem(0x693e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xccbe);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0127
        gbc.setState(0x7d32, 0x41c2, 0xf520, 0x838b, 0x7f24, 0x38d5, 0x1, 0x1);
        gbc.writeMem(0x7d32, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x41c2);
        EXPECT(gbc.pc(), 0x7d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0129
        gbc.setState(0x8f5c, 0xd6ed, 0x1ed0, 0xd4f8, 0xdd2f, 0x163, 0x0, 0x0);
        gbc.writeMem(0x8f5c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd6ed);
        EXPECT(gbc.pc(), 0x8f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5c), 0xcb);
        EXPECT(gbc.readMem(0x8f5d), 0xa5);
        // CB A5 012A
        gbc.setState(0x5a9d, 0xf09f, 0xbed0, 0x18ab, 0x27d7, 0x7108, 0x1, 0x1);
        gbc.writeMem(0x5a9d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf09f);
        EXPECT(gbc.pc(), 0x5a9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 012B
        gbc.setState(0x9952, 0x5dc7, 0x10b0, 0x271a, 0xd041, 0x4474, 0x0, 0x1);
        gbc.writeMem(0x9952, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5dc7);
        EXPECT(gbc.pc(), 0x9954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9952), 0xcb);
        EXPECT(gbc.readMem(0x9953), 0xa5);
        // CB A5 012C
        gbc.setState(0x43fd, 0x95d2, 0xb4c0, 0xe6a0, 0xd2e0, 0xf291, 0x0, 0x1);
        gbc.writeMem(0x43fd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x95d2);
        EXPECT(gbc.pc(), 0x43ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 012D
        gbc.setState(0xd33b, 0x1df1, 0xeaf0, 0x9000, 0x9fd3, 0xf5b0, 0x0, 0x1);
        gbc.writeMem(0xd33b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x1df1);
        EXPECT(gbc.pc(), 0xd33d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd33b), 0xcb);
        EXPECT(gbc.readMem(0xd33c), 0xa5);
        // CB A5 012E
        gbc.setState(0xca9e, 0x9195, 0x64e0, 0x33ff, 0xc3a1, 0x31e0, 0x1, 0x1);
        gbc.writeMem(0xca9e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9195);
        EXPECT(gbc.pc(), 0xcaa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca9e), 0xcb);
        EXPECT(gbc.readMem(0xca9f), 0xa5);
        // CB A5 012F
        gbc.setState(0xd985, 0xdecf, 0xb240, 0x6770, 0x7974, 0x40fc, 0x0, 0x1);
        gbc.writeMem(0xd985, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdecf);
        EXPECT(gbc.pc(), 0xd987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd985), 0xcb);
        EXPECT(gbc.readMem(0xd986), 0xa5);
        // CB A5 0130
        gbc.setState(0xcfbf, 0x2f16, 0x9660, 0x2cc9, 0x2710, 0xa082, 0x0, 0x1);
        gbc.writeMem(0xcfbf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x2f16);
        EXPECT(gbc.pc(), 0xcfc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfbf), 0xcb);
        EXPECT(gbc.readMem(0xcfc0), 0xa5);
        // CB A5 0131
        gbc.setState(0x8663, 0x1863, 0xf2b0, 0x1aba, 0x1799, 0x34dd, 0x0, 0x1);
        gbc.writeMem(0x8663, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1863);
        EXPECT(gbc.pc(), 0x8665);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8663), 0xcb);
        EXPECT(gbc.readMem(0x8664), 0xa5);
        // CB A5 0132
        gbc.setState(0xe1f4, 0x9e3a, 0x79c0, 0x580c, 0x2c8d, 0x2a66, 0x0, 0x1);
        gbc.writeMem(0xe1f4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9e3a);
        EXPECT(gbc.pc(), 0xe1f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f4), 0xcb);
        EXPECT(gbc.readMem(0xe1f5), 0xa5);
        // CB A5 0133
        gbc.setState(0x2afe, 0xd144, 0x2330, 0xd98c, 0x9851, 0x1ec3, 0x1, 0x0);
        gbc.writeMem(0x2afe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd144);
        EXPECT(gbc.pc(), 0x2b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0134
        gbc.setState(0x9a3a, 0x8792, 0xab30, 0xc158, 0xc662, 0x8fab, 0x0, 0x1);
        gbc.writeMem(0x9a3a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8792);
        EXPECT(gbc.pc(), 0x9a3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a3a), 0xcb);
        EXPECT(gbc.readMem(0x9a3b), 0xa5);
        // CB A5 0135
        gbc.setState(0x8279, 0x1cd6, 0xb7d0, 0x7311, 0xf51b, 0xfbef, 0x1, 0x1);
        gbc.writeMem(0x8279, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1cd6);
        EXPECT(gbc.pc(), 0x827b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8279), 0xcb);
        EXPECT(gbc.readMem(0x827a), 0xa5);
        // CB A5 0136
        gbc.setState(0x5fe5, 0xafb7, 0x7c80, 0xa1be, 0xa9a, 0xe644, 0x0, 0x1);
        gbc.writeMem(0x5fe5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xafb7);
        EXPECT(gbc.pc(), 0x5fe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0138
        gbc.setState(0x369d, 0xad5d, 0x8550, 0xf041, 0xc88e, 0x9660, 0x1, 0x0);
        gbc.writeMem(0x369d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xad5d);
        EXPECT(gbc.pc(), 0x369f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0139
        gbc.setState(0xecea, 0x6b62, 0x5a0, 0x1e39, 0xd076, 0xf72a, 0x1, 0x0);
        gbc.writeMem(0xecea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6b62);
        EXPECT(gbc.pc(), 0xecec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecea), 0xcb);
        EXPECT(gbc.readMem(0xeceb), 0xa5);
        // CB A5 013A
        gbc.setState(0xb8f1, 0x1c44, 0xbd60, 0xb237, 0x838b, 0x7d3, 0x1, 0x1);
        gbc.writeMem(0xb8f1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x1c44);
        EXPECT(gbc.pc(), 0xb8f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f1), 0xcb);
        EXPECT(gbc.readMem(0xb8f2), 0xa5);
        // CB A5 013B
        gbc.setState(0xc20a, 0xadb9, 0xbf0, 0x43e4, 0x3bab, 0x1e71, 0x0, 0x0);
        gbc.writeMem(0xc20a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xadb9);
        EXPECT(gbc.pc(), 0xc20c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc20a), 0xcb);
        EXPECT(gbc.readMem(0xc20b), 0xa5);
        // CB A5 013C
        gbc.setState(0xe313, 0xd1e0, 0x18e0, 0xb532, 0x8bfa, 0xb284, 0x1, 0x0);
        gbc.writeMem(0xe313, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd1e0);
        EXPECT(gbc.pc(), 0xe315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe313), 0xcb);
        EXPECT(gbc.readMem(0xe314), 0xa5);
        // CB A5 013D
        gbc.setState(0x96f0, 0x8a, 0xde80, 0xb719, 0xca06, 0x9195, 0x1, 0x1);
        gbc.writeMem(0x96f0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8a);
        EXPECT(gbc.pc(), 0x96f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f0), 0xcb);
        EXPECT(gbc.readMem(0x96f1), 0xa5);
        // CB A5 013E
        gbc.setState(0x9c61, 0x8a59, 0xe4e0, 0xff9b, 0xee06, 0xd771, 0x1, 0x1);
        gbc.writeMem(0x9c61, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8a59);
        EXPECT(gbc.pc(), 0x9c63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c61), 0xcb);
        EXPECT(gbc.readMem(0x9c62), 0xa5);
        // CB A5 013F
        gbc.setState(0x7a9f, 0x6ad2, 0xe990, 0x3b09, 0x3373, 0x421f, 0x1, 0x1);
        gbc.writeMem(0x7a9f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6ad2);
        EXPECT(gbc.pc(), 0x7aa1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0140
        gbc.setState(0xad14, 0x4126, 0x1ed0, 0xd506, 0x2e4a, 0xaa6a, 0x1, 0x1);
        gbc.writeMem(0xad14, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4126);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad14), 0xcb);
        EXPECT(gbc.readMem(0xad15), 0xa5);
        // CB A5 0141
        gbc.setState(0x8eb, 0x5a92, 0xd450, 0x86fb, 0xa6d6, 0xc4e5, 0x0, 0x1);
        gbc.writeMem(0x8eb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5a92);
        EXPECT(gbc.pc(), 0x8ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0142
        gbc.setState(0x1d69, 0x11a2, 0x43e0, 0x91af, 0xeb75, 0xeeec, 0x1, 0x0);
        gbc.writeMem(0x1d69, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x11a2);
        EXPECT(gbc.pc(), 0x1d6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0143
        gbc.setState(0x418c, 0xb001, 0x8720, 0x6b7a, 0xa52f, 0x2d9f, 0x1, 0x1);
        gbc.writeMem(0x418c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb001);
        EXPECT(gbc.pc(), 0x418e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0144
        gbc.setState(0x3c25, 0xb5a8, 0x4ab0, 0xac0f, 0x9230, 0x9008, 0x0, 0x0);
        gbc.writeMem(0x3c25, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb5a8);
        EXPECT(gbc.pc(), 0x3c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0145
        gbc.setState(0xbb85, 0x3420, 0xa370, 0x36ab, 0xff1d, 0x3f43, 0x1, 0x0);
        gbc.writeMem(0xbb85, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3420);
        EXPECT(gbc.pc(), 0xbb87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb85), 0xcb);
        EXPECT(gbc.readMem(0xbb86), 0xa5);
        // CB A5 0146
        gbc.setState(0x9dd8, 0x8c5, 0x5f40, 0xaa65, 0xb54, 0x116f, 0x1, 0x0);
        gbc.writeMem(0x9dd8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8c5);
        EXPECT(gbc.pc(), 0x9dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd8), 0xcb);
        EXPECT(gbc.readMem(0x9dd9), 0xa5);
        // CB A5 0147
        gbc.setState(0xdf4c, 0x8b25, 0xde0, 0x3d75, 0xd920, 0x7165, 0x1, 0x0);
        gbc.writeMem(0xdf4c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8b25);
        EXPECT(gbc.pc(), 0xdf4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4c), 0xcb);
        EXPECT(gbc.readMem(0xdf4d), 0xa5);
        // CB A5 0148
        gbc.setState(0x221e, 0x4475, 0xa860, 0x1c58, 0x49f7, 0xe542, 0x0, 0x0);
        gbc.writeMem(0x221e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4475);
        EXPECT(gbc.pc(), 0x2220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0149
        gbc.setState(0x1432, 0xdcc1, 0x1ad0, 0x7f54, 0x2a9a, 0xb217, 0x0, 0x0);
        gbc.writeMem(0x1432, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdcc1);
        EXPECT(gbc.pc(), 0x1434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 014A
        gbc.setState(0x888c, 0xc856, 0x6d70, 0xd8e2, 0x3ed9, 0x6264, 0x0, 0x0);
        gbc.writeMem(0x888c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc856);
        EXPECT(gbc.pc(), 0x888e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888c), 0xcb);
        EXPECT(gbc.readMem(0x888d), 0xa5);
        // CB A5 014B
        gbc.setState(0xd134, 0x843f, 0x40b0, 0x403b, 0x8c61, 0xa55f, 0x0, 0x0);
        gbc.writeMem(0xd134, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x843f);
        EXPECT(gbc.pc(), 0xd136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd134), 0xcb);
        EXPECT(gbc.readMem(0xd135), 0xa5);
        // CB A5 014C
        gbc.setState(0xebdd, 0x49ac, 0x9cb0, 0x8e89, 0x9cf8, 0x2765, 0x1, 0x1);
        gbc.writeMem(0xebdd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x49ac);
        EXPECT(gbc.pc(), 0xebdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebdd), 0xcb);
        EXPECT(gbc.readMem(0xebde), 0xa5);
        // CB A5 014E
        gbc.setState(0xd31e, 0x6727, 0x9560, 0xfe64, 0xd683, 0xba04, 0x0, 0x1);
        gbc.writeMem(0xd31e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6727);
        EXPECT(gbc.pc(), 0xd320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd31e), 0xcb);
        EXPECT(gbc.readMem(0xd31f), 0xa5);
        // CB A5 014F
        gbc.setState(0xb798, 0xdc9f, 0xd520, 0x5e45, 0xf6a3, 0x41ca, 0x0, 0x1);
        gbc.writeMem(0xb798, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xdc9f);
        EXPECT(gbc.pc(), 0xb79a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb798), 0xcb);
        EXPECT(gbc.readMem(0xb799), 0xa5);
        // CB A5 0150
        gbc.setState(0x770e, 0x272a, 0xf0c0, 0xe0a4, 0xd07e, 0x115e, 0x0, 0x0);
        gbc.writeMem(0x770e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x272a);
        EXPECT(gbc.pc(), 0x7710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0151
        gbc.setState(0x9a63, 0x8178, 0xc080, 0x18b7, 0x1f6d, 0xe6d9, 0x0, 0x0);
        gbc.writeMem(0x9a63, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8178);
        EXPECT(gbc.pc(), 0x9a65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a63), 0xcb);
        EXPECT(gbc.readMem(0x9a64), 0xa5);
        // CB A5 0152
        gbc.setState(0x5f48, 0x1e0, 0xc010, 0x19cf, 0x3d5e, 0x582f, 0x0, 0x1);
        gbc.writeMem(0x5f48, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1e0);
        EXPECT(gbc.pc(), 0x5f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0153
        gbc.setState(0x116f, 0x9fc2, 0x75a0, 0xb59a, 0xd3da, 0xd7e6, 0x1, 0x0);
        gbc.writeMem(0x116f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9fc2);
        EXPECT(gbc.pc(), 0x1171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0154
        gbc.setState(0x15ca, 0x9d37, 0x5a30, 0xfdd3, 0x538a, 0x292c, 0x0, 0x0);
        gbc.writeMem(0x15ca, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9d37);
        EXPECT(gbc.pc(), 0x15cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0155
        gbc.setState(0x2d1d, 0xd559, 0x1e20, 0xa665, 0x974f, 0xacea, 0x1, 0x1);
        gbc.writeMem(0x2d1d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd559);
        EXPECT(gbc.pc(), 0x2d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0156
        gbc.setState(0x7f29, 0xf72d, 0x360, 0x783b, 0xb5d1, 0xdadc, 0x1, 0x0);
        gbc.writeMem(0x7f29, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf72d);
        EXPECT(gbc.pc(), 0x7f2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0157
        gbc.setState(0x610c, 0x546, 0xdfb0, 0x2e6f, 0x15a9, 0xb1fd, 0x1, 0x0);
        gbc.writeMem(0x610c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x546);
        EXPECT(gbc.pc(), 0x610e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0158
        gbc.setState(0x1dc3, 0xcfd8, 0x84a0, 0x17ee, 0x69d1, 0x42b, 0x1, 0x0);
        gbc.writeMem(0x1dc3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcfd8);
        EXPECT(gbc.pc(), 0x1dc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 015A
        gbc.setState(0xe3a1, 0x8f83, 0x780, 0xe5b3, 0x323f, 0x2fda, 0x0, 0x1);
        gbc.writeMem(0xe3a1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8f83);
        EXPECT(gbc.pc(), 0xe3a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3a1), 0xcb);
        EXPECT(gbc.readMem(0xe3a2), 0xa5);
        // CB A5 015B
        gbc.setState(0x6043, 0xe00a, 0x7b40, 0x1c09, 0x6a12, 0x2f88, 0x0, 0x0);
        gbc.writeMem(0x6043, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe00a);
        EXPECT(gbc.pc(), 0x6045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 015C
        gbc.setState(0x4d8a, 0xddd8, 0xc1b0, 0xe23c, 0xeb74, 0xcc22, 0x0, 0x0);
        gbc.writeMem(0x4d8a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xddd8);
        EXPECT(gbc.pc(), 0x4d8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 015D
        gbc.setState(0xa71b, 0x1e40, 0x57e0, 0xa23e, 0xc8c0, 0x625e, 0x0, 0x1);
        gbc.writeMem(0xa71b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x1e40);
        EXPECT(gbc.pc(), 0xa71d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa71b), 0xcb);
        EXPECT(gbc.readMem(0xa71c), 0xa5);
        // CB A5 015E
        gbc.setState(0xc2cb, 0xaf07, 0x9110, 0xfd14, 0x2a08, 0xcbbf, 0x1, 0x0);
        gbc.writeMem(0xc2cb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xaf07);
        EXPECT(gbc.pc(), 0xc2cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2cb), 0xcb);
        EXPECT(gbc.readMem(0xc2cc), 0xa5);
        // CB A5 015F
        gbc.setState(0x6608, 0x3880, 0x1a40, 0x57e1, 0x8ee4, 0x7d1c, 0x1, 0x1);
        gbc.writeMem(0x6608, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3880);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0160
        gbc.setState(0x527, 0x316c, 0x5400, 0x6e3f, 0x29b7, 0xa5ef, 0x0, 0x1);
        gbc.writeMem(0x527, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x316c);
        EXPECT(gbc.pc(), 0x529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0161
        gbc.setState(0x9de4, 0x4b06, 0x8b00, 0x6307, 0xe29f, 0xef5b, 0x0, 0x1);
        gbc.writeMem(0x9de4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4b06);
        EXPECT(gbc.pc(), 0x9de6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9de4), 0xcb);
        EXPECT(gbc.readMem(0x9de5), 0xa5);
        // CB A5 0162
        gbc.setState(0x34b5, 0xf78, 0x92d0, 0x1d91, 0xa16f, 0x324a, 0x0, 0x1);
        gbc.writeMem(0x34b5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf78);
        EXPECT(gbc.pc(), 0x34b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0163
        gbc.setState(0x8c9f, 0xf583, 0x5150, 0x7c0f, 0xc56e, 0x7b7a, 0x0, 0x0);
        gbc.writeMem(0x8c9f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf583);
        EXPECT(gbc.pc(), 0x8ca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c9f), 0xcb);
        EXPECT(gbc.readMem(0x8ca0), 0xa5);
        // CB A5 0164
        gbc.setState(0x9ee8, 0xb382, 0x1860, 0x604f, 0x7c30, 0x3c99, 0x0, 0x1);
        gbc.writeMem(0x9ee8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb382);
        EXPECT(gbc.pc(), 0x9eea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee8), 0xcb);
        EXPECT(gbc.readMem(0x9ee9), 0xa5);
        // CB A5 0165
        gbc.setState(0xe2e9, 0x69e7, 0x68c0, 0xa311, 0xaadd, 0xd876, 0x0, 0x0);
        gbc.writeMem(0xe2e9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x69e7);
        EXPECT(gbc.pc(), 0xe2eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e9), 0xcb);
        EXPECT(gbc.readMem(0xe2ea), 0xa5);
        // CB A5 0166
        gbc.setState(0xc42d, 0x2af6, 0xd940, 0xbdb8, 0x8255, 0xd9c1, 0x0, 0x1);
        gbc.writeMem(0xc42d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2af6);
        EXPECT(gbc.pc(), 0xc42f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42d), 0xcb);
        EXPECT(gbc.readMem(0xc42e), 0xa5);
        // CB A5 0169
        gbc.setState(0xe01a, 0x14ff, 0xcf60, 0x17f5, 0x25be, 0x82d8, 0x0, 0x1);
        gbc.writeMem(0xe01a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x14ff);
        EXPECT(gbc.pc(), 0xe01c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe01a), 0xcb);
        EXPECT(gbc.readMem(0xe01b), 0xa5);
        // CB A5 016A
        gbc.setState(0x45a1, 0x5849, 0xabf0, 0xbc4c, 0xa82c, 0x377d, 0x1, 0x1);
        gbc.writeMem(0x45a1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5849);
        EXPECT(gbc.pc(), 0x45a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 016B
        gbc.setState(0xb750, 0x12d9, 0xc4f0, 0x5766, 0xb82e, 0x97e4, 0x0, 0x1);
        gbc.writeMem(0xb750, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x12d9);
        EXPECT(gbc.pc(), 0xb752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb750), 0xcb);
        EXPECT(gbc.readMem(0xb751), 0xa5);
        // CB A5 016C
        gbc.setState(0x1173, 0xca90, 0xffa0, 0xd13b, 0xc2f9, 0xadd2, 0x0, 0x1);
        gbc.writeMem(0x1173, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xca90);
        EXPECT(gbc.pc(), 0x1175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 016D
        gbc.setState(0xa4d6, 0x2d03, 0x1810, 0x5ad8, 0xf093, 0x6226, 0x0, 0x1);
        gbc.writeMem(0xa4d6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2d03);
        EXPECT(gbc.pc(), 0xa4d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4d6), 0xcb);
        EXPECT(gbc.readMem(0xa4d7), 0xa5);
        // CB A5 016F
        gbc.setState(0x1cb, 0xca68, 0xe4b0, 0x8d4f, 0x1c34, 0x3f61, 0x1, 0x1);
        gbc.writeMem(0x1cb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xca68);
        EXPECT(gbc.pc(), 0x1cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0170
        gbc.setState(0xe4f9, 0x19d2, 0x2eb0, 0xeb70, 0xf0f8, 0x1fd2, 0x1, 0x0);
        gbc.writeMem(0xe4f9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x19d2);
        EXPECT(gbc.pc(), 0xe4fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4f9), 0xcb);
        EXPECT(gbc.readMem(0xe4fa), 0xa5);
        // CB A5 0171
        gbc.setState(0x68af, 0xbbf1, 0x51a0, 0x4d1c, 0x959d, 0x852f, 0x1, 0x1);
        gbc.writeMem(0x68af, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbbf1);
        EXPECT(gbc.pc(), 0x68b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0172
        gbc.setState(0x44f1, 0xe934, 0x2f90, 0x8a0a, 0x7cf2, 0x6ea6, 0x0, 0x1);
        gbc.writeMem(0x44f1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe934);
        EXPECT(gbc.pc(), 0x44f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0173
        gbc.setState(0x5835, 0x19f5, 0x14b0, 0x3cf6, 0x942c, 0x2458, 0x1, 0x1);
        gbc.writeMem(0x5835, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x19f5);
        EXPECT(gbc.pc(), 0x5837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0174
        gbc.setState(0xabda, 0x6b51, 0xe8d0, 0x5a4b, 0x109b, 0x6ed4, 0x1, 0x1);
        gbc.writeMem(0xabda, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6b51);
        EXPECT(gbc.pc(), 0xabdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabda), 0xcb);
        EXPECT(gbc.readMem(0xabdb), 0xa5);
        // CB A5 0176
        gbc.setState(0x4884, 0x5e2b, 0x6d40, 0x3ec9, 0x6a56, 0x427d, 0x1, 0x1);
        gbc.writeMem(0x4884, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5e2b);
        EXPECT(gbc.pc(), 0x4886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0177
        gbc.setState(0xc60d, 0x5208, 0xb280, 0xd496, 0x226e, 0x4efc, 0x1, 0x1);
        gbc.writeMem(0xc60d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5208);
        EXPECT(gbc.pc(), 0xc60f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc60d), 0xcb);
        EXPECT(gbc.readMem(0xc60e), 0xa5);
        // CB A5 0178
        gbc.setState(0xae04, 0x3ce8, 0xdcd0, 0x1aa6, 0xccbe, 0x95eb, 0x0, 0x1);
        gbc.writeMem(0xae04, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3ce8);
        EXPECT(gbc.pc(), 0xae06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae04), 0xcb);
        EXPECT(gbc.readMem(0xae05), 0xa5);
        // CB A5 0179
        gbc.setState(0xc284, 0x8182, 0xea70, 0xb220, 0xa6cb, 0x7490, 0x1, 0x1);
        gbc.writeMem(0xc284, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8182);
        EXPECT(gbc.pc(), 0xc286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc284), 0xcb);
        EXPECT(gbc.readMem(0xc285), 0xa5);
        // CB A5 017A
        gbc.setState(0xe276, 0xf28c, 0x16c0, 0xc709, 0x997e, 0xa532, 0x0, 0x0);
        gbc.writeMem(0xe276, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf28c);
        EXPECT(gbc.pc(), 0xe278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe276), 0xcb);
        EXPECT(gbc.readMem(0xe277), 0xa5);
        // CB A5 017B
        gbc.setState(0x5098, 0x4d97, 0x66e0, 0x6c65, 0xf105, 0x4ddd, 0x1, 0x0);
        gbc.writeMem(0x5098, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4d97);
        EXPECT(gbc.pc(), 0x509a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 017C
        gbc.setState(0x6b4a, 0xfeb7, 0xdba0, 0xebc0, 0x1242, 0xd03b, 0x1, 0x1);
        gbc.writeMem(0x6b4a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfeb7);
        EXPECT(gbc.pc(), 0x6b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 017D
        gbc.setState(0xb6, 0x34f5, 0x4540, 0x5845, 0x296e, 0x1679, 0x0, 0x1);
        gbc.writeMem(0xb6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x34f5);
        EXPECT(gbc.pc(), 0xb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 017E
        gbc.setState(0x319e, 0xdc88, 0x4390, 0x6fbd, 0xd7cb, 0xc649, 0x1, 0x0);
        gbc.writeMem(0x319e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xdc88);
        EXPECT(gbc.pc(), 0x31a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 017F
        gbc.setState(0x1bcf, 0x4020, 0x5be0, 0x55bf, 0x5fbe, 0xe51f, 0x1, 0x1);
        gbc.writeMem(0x1bcf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4020);
        EXPECT(gbc.pc(), 0x1bd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0180
        gbc.setState(0x2aa6, 0x1e92, 0xb30, 0x1edb, 0x3439, 0x117f, 0x0, 0x1);
        gbc.writeMem(0x2aa6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1e92);
        EXPECT(gbc.pc(), 0x2aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0181
        gbc.setState(0x5c75, 0x14d3, 0xa9f0, 0xf8d7, 0x5053, 0xeb4b, 0x1, 0x1);
        gbc.writeMem(0x5c75, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x14d3);
        EXPECT(gbc.pc(), 0x5c77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0182
        gbc.setState(0xc255, 0x8f52, 0x4420, 0x6111, 0x98fb, 0xcec1, 0x0, 0x1);
        gbc.writeMem(0xc255, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8f52);
        EXPECT(gbc.pc(), 0xc257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc255), 0xcb);
        EXPECT(gbc.readMem(0xc256), 0xa5);
        // CB A5 0183
        gbc.setState(0xcf29, 0x2da1, 0x1920, 0x43f7, 0xface, 0x5f0e, 0x1, 0x0);
        gbc.writeMem(0xcf29, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2da1);
        EXPECT(gbc.pc(), 0xcf2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf29), 0xcb);
        EXPECT(gbc.readMem(0xcf2a), 0xa5);
        // CB A5 0184
        gbc.setState(0x39d8, 0x7c6f, 0x28f0, 0x6ce6, 0x558f, 0x1747, 0x0, 0x0);
        gbc.writeMem(0x39d8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7c6f);
        EXPECT(gbc.pc(), 0x39da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0185
        gbc.setState(0x359c, 0xbbce, 0x5460, 0x75d0, 0xeace, 0xe117, 0x1, 0x1);
        gbc.writeMem(0x359c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbbce);
        EXPECT(gbc.pc(), 0x359e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0186
        gbc.setState(0x85e8, 0xe698, 0x1680, 0x64a2, 0xa53b, 0x1f36, 0x0, 0x0);
        gbc.writeMem(0x85e8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xe698);
        EXPECT(gbc.pc(), 0x85ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e8), 0xcb);
        EXPECT(gbc.readMem(0x85e9), 0xa5);
        // CB A5 0187
        gbc.setState(0xb3, 0xb81a, 0xa9b0, 0xa946, 0x1961, 0x5f1, 0x0, 0x0);
        gbc.writeMem(0xb3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb81a);
        EXPECT(gbc.pc(), 0xb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0188
        gbc.setState(0x7607, 0x2ea0, 0x83b0, 0x6683, 0x2aa3, 0x2a18, 0x1, 0x0);
        gbc.writeMem(0x7607, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x2ea0);
        EXPECT(gbc.pc(), 0x7609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0189
        gbc.setState(0xe6b3, 0xf140, 0x10a0, 0xd298, 0xbc37, 0xde53, 0x1, 0x0);
        gbc.writeMem(0xe6b3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xf140);
        EXPECT(gbc.pc(), 0xe6b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6b3), 0xcb);
        EXPECT(gbc.readMem(0xe6b4), 0xa5);
        // CB A5 018A
        gbc.setState(0xe0, 0x95ab, 0x67a0, 0xadec, 0x7183, 0x279a, 0x1, 0x1);
        gbc.writeMem(0xe0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x95ab);
        EXPECT(gbc.pc(), 0xe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 018B
        gbc.setState(0x1f03, 0x9c83, 0x97d0, 0xe745, 0xd3bd, 0xd66c, 0x0, 0x1);
        gbc.writeMem(0x1f03, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9c83);
        EXPECT(gbc.pc(), 0x1f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 018C
        gbc.setState(0x631b, 0xd009, 0xd7d0, 0x5b35, 0xfc1a, 0x7af, 0x0, 0x0);
        gbc.writeMem(0x631b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd009);
        EXPECT(gbc.pc(), 0x631d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 018D
        gbc.setState(0xc459, 0x73aa, 0x730, 0x34c0, 0x49b4, 0x774d, 0x0, 0x0);
        gbc.writeMem(0xc459, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x73aa);
        EXPECT(gbc.pc(), 0xc45b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc459), 0xcb);
        EXPECT(gbc.readMem(0xc45a), 0xa5);
        // CB A5 018F
        gbc.setState(0xedb1, 0x8f5, 0xe590, 0x1560, 0xdcbb, 0xf997, 0x0, 0x1);
        gbc.writeMem(0xedb1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8f5);
        EXPECT(gbc.pc(), 0xedb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedb1), 0xcb);
        EXPECT(gbc.readMem(0xedb2), 0xa5);
        // CB A5 0190
        gbc.setState(0x6f7, 0x8ae8, 0xce40, 0xbb73, 0xe12, 0x71e0, 0x0, 0x0);
        gbc.writeMem(0x6f7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0x6f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0192
        gbc.setState(0xb0a, 0xf2fe, 0x6f0, 0x3b43, 0x9edf, 0x80d5, 0x0, 0x0);
        gbc.writeMem(0xb0a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf2fe);
        EXPECT(gbc.pc(), 0xb0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0193
        gbc.setState(0x460c, 0x8b32, 0x8ce0, 0x8ef9, 0x418f, 0xb1b9, 0x1, 0x1);
        gbc.writeMem(0x460c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8b32);
        EXPECT(gbc.pc(), 0x460e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0194
        gbc.setState(0x7122, 0x604d, 0x7f80, 0x7888, 0x809e, 0xbeb, 0x0, 0x1);
        gbc.writeMem(0x7122, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x604d);
        EXPECT(gbc.pc(), 0x7124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0195
        gbc.setState(0x20f, 0xbb14, 0x2e80, 0x8347, 0x40b1, 0x96d8, 0x1, 0x0);
        gbc.writeMem(0x20f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xbb14);
        EXPECT(gbc.pc(), 0x211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0196
        gbc.setState(0x1a83, 0x983, 0x9000, 0x8476, 0x4e41, 0x2f4c, 0x0, 0x1);
        gbc.writeMem(0x1a83, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x983);
        EXPECT(gbc.pc(), 0x1a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0197
        gbc.setState(0x945e, 0x5e4, 0x8310, 0xe461, 0x2178, 0x20d9, 0x1, 0x1);
        gbc.writeMem(0x945e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5e4);
        EXPECT(gbc.pc(), 0x9460);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x945e), 0xcb);
        EXPECT(gbc.readMem(0x945f), 0xa5);
        // CB A5 0198
        gbc.setState(0xa7d0, 0xd558, 0xcc70, 0xb744, 0x54dd, 0x6821, 0x0, 0x1);
        gbc.writeMem(0xa7d0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd558);
        EXPECT(gbc.pc(), 0xa7d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d0), 0xcb);
        EXPECT(gbc.readMem(0xa7d1), 0xa5);
        // CB A5 0199
        gbc.setState(0xce39, 0xbe36, 0x2a10, 0x2a65, 0x3248, 0xd7d2, 0x1, 0x1);
        gbc.writeMem(0xce39, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xbe36);
        EXPECT(gbc.pc(), 0xce3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce39), 0xcb);
        EXPECT(gbc.readMem(0xce3a), 0xa5);
        // CB A5 019A
        gbc.setState(0x5003, 0x1795, 0xd3a0, 0xc14a, 0x51b, 0x1c93, 0x0, 0x1);
        gbc.writeMem(0x5003, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1795);
        EXPECT(gbc.pc(), 0x5005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 019B
        gbc.setState(0x847b, 0x4687, 0x9130, 0xd91f, 0xa07c, 0xc365, 0x0, 0x0);
        gbc.writeMem(0x847b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4687);
        EXPECT(gbc.pc(), 0x847d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x847b), 0xcb);
        EXPECT(gbc.readMem(0x847c), 0xa5);
        // CB A5 019C
        gbc.setState(0x1148, 0xc646, 0x4ae0, 0x579a, 0xe949, 0x2c82, 0x0, 0x1);
        gbc.writeMem(0x1148, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc646);
        EXPECT(gbc.pc(), 0x114a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 019D
        gbc.setState(0x68b, 0xd317, 0x9f20, 0x3263, 0xd8f0, 0x84ba, 0x0, 0x0);
        gbc.writeMem(0x68b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd317);
        EXPECT(gbc.pc(), 0x68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 019E
        gbc.setState(0xc711, 0x24ce, 0x5410, 0xf8cc, 0x59a9, 0x904a, 0x0, 0x0);
        gbc.writeMem(0xc711, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x24ce);
        EXPECT(gbc.pc(), 0xc713);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc711), 0xcb);
        EXPECT(gbc.readMem(0xc712), 0xa5);
        // CB A5 019F
        gbc.setState(0x1b08, 0xec50, 0xa500, 0xa893, 0x8d02, 0x41e7, 0x1, 0x0);
        gbc.writeMem(0x1b08, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xec50);
        EXPECT(gbc.pc(), 0x1b0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01A0
        gbc.setState(0xb475, 0x546f, 0x38d0, 0x4047, 0xbe6a, 0xa7c, 0x0, 0x1);
        gbc.writeMem(0xb475, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x546f);
        EXPECT(gbc.pc(), 0xb477);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb475), 0xcb);
        EXPECT(gbc.readMem(0xb476), 0xa5);
        // CB A5 01A1
        gbc.setState(0x6042, 0xe9e5, 0xfe50, 0x16e0, 0xcbc5, 0xcbfc, 0x0, 0x0);
        gbc.writeMem(0x6042, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe9e5);
        EXPECT(gbc.pc(), 0x6044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01A2
        gbc.setState(0xd30c, 0xfb22, 0xcbf0, 0x3aae, 0xb7d8, 0x805b, 0x0, 0x1);
        gbc.writeMem(0xd30c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xfb22);
        EXPECT(gbc.pc(), 0xd30e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd30c), 0xcb);
        EXPECT(gbc.readMem(0xd30d), 0xa5);
        // CB A5 01A3
        gbc.setState(0x2533, 0x8333, 0xbe10, 0x10e0, 0x329, 0xdf3f, 0x1, 0x0);
        gbc.writeMem(0x2533, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8333);
        EXPECT(gbc.pc(), 0x2535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01A4
        gbc.setState(0x5725, 0xf962, 0x480, 0x17de, 0xe8bd, 0xf6be, 0x0, 0x1);
        gbc.writeMem(0x5725, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf962);
        EXPECT(gbc.pc(), 0x5727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01A5
        gbc.setState(0xd47f, 0xf81, 0xa4f0, 0x142c, 0x23f3, 0x5c80, 0x0, 0x0);
        gbc.writeMem(0xd47f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf81);
        EXPECT(gbc.pc(), 0xd481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47f), 0xcb);
        EXPECT(gbc.readMem(0xd480), 0xa5);
        // CB A5 01A6
        gbc.setState(0x9671, 0x1123, 0xc470, 0xe56a, 0x296f, 0x2af8, 0x1, 0x0);
        gbc.writeMem(0x9671, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1123);
        EXPECT(gbc.pc(), 0x9673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9671), 0xcb);
        EXPECT(gbc.readMem(0x9672), 0xa5);
        // CB A5 01A7
        gbc.setState(0xd2ad, 0xc327, 0x6950, 0x412b, 0x43af, 0xe359, 0x0, 0x0);
        gbc.writeMem(0xd2ad, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc327);
        EXPECT(gbc.pc(), 0xd2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ad), 0xcb);
        EXPECT(gbc.readMem(0xd2ae), 0xa5);
        // CB A5 01A8
        gbc.setState(0x624d, 0x4456, 0x530, 0xdeaf, 0x7eca, 0xe00f, 0x1, 0x0);
        gbc.writeMem(0x624d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4456);
        EXPECT(gbc.pc(), 0x624f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01A9
        gbc.setState(0x4852, 0xcb2, 0x6720, 0xb161, 0x450e, 0x9605, 0x0, 0x1);
        gbc.writeMem(0x4852, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xcb2);
        EXPECT(gbc.pc(), 0x4854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01AA
        gbc.setState(0x2253, 0xb391, 0x88e0, 0xd1a3, 0x24b8, 0xace1, 0x1, 0x1);
        gbc.writeMem(0x2253, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb391);
        EXPECT(gbc.pc(), 0x2255);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01AB
        gbc.setState(0xa4cb, 0xba2c, 0x73c0, 0x4491, 0x59e, 0xab46, 0x1, 0x1);
        gbc.writeMem(0xa4cb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xba2c);
        EXPECT(gbc.pc(), 0xa4cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4cb), 0xcb);
        EXPECT(gbc.readMem(0xa4cc), 0xa5);
        // CB A5 01AC
        gbc.setState(0xe5f8, 0x1dd0, 0x1c40, 0xb889, 0x83e9, 0xd247, 0x0, 0x1);
        gbc.writeMem(0xe5f8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1dd0);
        EXPECT(gbc.pc(), 0xe5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f8), 0xcb);
        EXPECT(gbc.readMem(0xe5f9), 0xa5);
        // CB A5 01AD
        gbc.setState(0xdc42, 0xd065, 0x2a30, 0x4df3, 0x8d80, 0xb031, 0x1, 0x1);
        gbc.writeMem(0xdc42, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xd065);
        EXPECT(gbc.pc(), 0xdc44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc42), 0xcb);
        EXPECT(gbc.readMem(0xdc43), 0xa5);
        // CB A5 01AE
        gbc.setState(0x5d53, 0xcdc6, 0x7aa0, 0xc09d, 0xfde9, 0x4a4d, 0x1, 0x0);
        gbc.writeMem(0x5d53, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcdc6);
        EXPECT(gbc.pc(), 0x5d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01AF
        gbc.setState(0xd288, 0x8a7c, 0x74c0, 0xb3a8, 0x7f9b, 0x9cd8, 0x0, 0x1);
        gbc.writeMem(0xd288, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8a7c);
        EXPECT(gbc.pc(), 0xd28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd288), 0xcb);
        EXPECT(gbc.readMem(0xd289), 0xa5);
        // CB A5 01B0
        gbc.setState(0x3f01, 0xb52a, 0x6f80, 0xc3fd, 0x8c30, 0x7dba, 0x1, 0x1);
        gbc.writeMem(0x3f01, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb52a);
        EXPECT(gbc.pc(), 0x3f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01B1
        gbc.setState(0x9896, 0x974f, 0x1990, 0xc781, 0xf84d, 0xb8ea, 0x0, 0x0);
        gbc.writeMem(0x9896, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x974f);
        EXPECT(gbc.pc(), 0x9898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9896), 0xcb);
        EXPECT(gbc.readMem(0x9897), 0xa5);
        // CB A5 01B3
        gbc.setState(0x1408, 0x3bf5, 0xe540, 0x5867, 0xf093, 0xf7fc, 0x1, 0x1);
        gbc.writeMem(0x1408, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3bf5);
        EXPECT(gbc.pc(), 0x140a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01B4
        gbc.setState(0xcf2f, 0xe765, 0x61f0, 0x41af, 0x7fb1, 0x6a69, 0x1, 0x1);
        gbc.writeMem(0xcf2f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe765);
        EXPECT(gbc.pc(), 0xcf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2f), 0xcb);
        EXPECT(gbc.readMem(0xcf30), 0xa5);
        // CB A5 01B5
        gbc.setState(0xdfe1, 0x628b, 0xb770, 0xae2b, 0xff76, 0x232d, 0x0, 0x0);
        gbc.writeMem(0xdfe1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x628b);
        EXPECT(gbc.pc(), 0xdfe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe1), 0xcb);
        EXPECT(gbc.readMem(0xdfe2), 0xa5);
        // CB A5 01B6
        gbc.setState(0xdaac, 0xe245, 0xa7d0, 0x690, 0x289b, 0x842, 0x1, 0x1);
        gbc.writeMem(0xdaac, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe245);
        EXPECT(gbc.pc(), 0xdaae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaac), 0xcb);
        EXPECT(gbc.readMem(0xdaad), 0xa5);
        // CB A5 01B7
        gbc.setState(0x12a1, 0xcd19, 0x45e0, 0x8269, 0xf495, 0x4053, 0x1, 0x0);
        gbc.writeMem(0x12a1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcd19);
        EXPECT(gbc.pc(), 0x12a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01B8
        gbc.setState(0xe0, 0xcf39, 0x9c40, 0x5d6b, 0x1a4d, 0x1400, 0x0, 0x0);
        gbc.writeMem(0xe0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcf39);
        EXPECT(gbc.pc(), 0xe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01B9
        gbc.setState(0xaa54, 0x7cb4, 0x4d70, 0x719d, 0x6784, 0xc05c, 0x0, 0x1);
        gbc.writeMem(0xaa54, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7cb4);
        EXPECT(gbc.pc(), 0xaa56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa54), 0xcb);
        EXPECT(gbc.readMem(0xaa55), 0xa5);
        // CB A5 01BA
        gbc.setState(0x6b8a, 0xf636, 0xf9a0, 0xe240, 0xcd61, 0x632, 0x0, 0x0);
        gbc.writeMem(0x6b8a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf636);
        EXPECT(gbc.pc(), 0x6b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01BB
        gbc.setState(0x84ef, 0xeee3, 0xa2b0, 0x972b, 0xcf14, 0x8923, 0x1, 0x1);
        gbc.writeMem(0x84ef, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xeee3);
        EXPECT(gbc.pc(), 0x84f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ef), 0xcb);
        EXPECT(gbc.readMem(0x84f0), 0xa5);
        // CB A5 01BD
        gbc.setState(0x4a43, 0x5b63, 0x3260, 0x354f, 0x4e87, 0x31d5, 0x1, 0x1);
        gbc.writeMem(0x4a43, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5b63);
        EXPECT(gbc.pc(), 0x4a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01BE
        gbc.setState(0x7ccd, 0xba40, 0x7200, 0x70d3, 0x8d89, 0x2ed8, 0x1, 0x1);
        gbc.writeMem(0x7ccd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xba40);
        EXPECT(gbc.pc(), 0x7ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01BF
        gbc.setState(0x6afe, 0xab5a, 0xf550, 0xb966, 0x4b89, 0x7, 0x0, 0x1);
        gbc.writeMem(0x6afe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xab5a);
        EXPECT(gbc.pc(), 0x6b00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01C0
        gbc.setState(0xc123, 0x259a, 0xcb30, 0xf554, 0xe79f, 0x1bbb, 0x1, 0x0);
        gbc.writeMem(0xc123, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x259a);
        EXPECT(gbc.pc(), 0xc125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc123), 0xcb);
        EXPECT(gbc.readMem(0xc124), 0xa5);
        // CB A5 01C1
        gbc.setState(0xa099, 0x7ba7, 0x2870, 0x2672, 0x85ce, 0xbed0, 0x0, 0x1);
        gbc.writeMem(0xa099, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7ba7);
        EXPECT(gbc.pc(), 0xa09b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa099), 0xcb);
        EXPECT(gbc.readMem(0xa09a), 0xa5);
        // CB A5 01C2
        gbc.setState(0x24d4, 0x90db, 0xbac0, 0x14a2, 0xe9b6, 0x8221, 0x0, 0x1);
        gbc.writeMem(0x24d4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x90db);
        EXPECT(gbc.pc(), 0x24d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01C3
        gbc.setState(0x5dcf, 0x79cf, 0x9f70, 0x11dd, 0x92b5, 0x3e30, 0x1, 0x0);
        gbc.writeMem(0x5dcf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x79cf);
        EXPECT(gbc.pc(), 0x5dd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01C4
        gbc.setState(0xb07e, 0x46f3, 0xe3e0, 0xd16b, 0x383d, 0x3645, 0x0, 0x1);
        gbc.writeMem(0xb07e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x46f3);
        EXPECT(gbc.pc(), 0xb080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb07e), 0xcb);
        EXPECT(gbc.readMem(0xb07f), 0xa5);
        // CB A5 01C5
        gbc.setState(0x6aea, 0x506e, 0xbcd0, 0x636f, 0xec7c, 0xcaac, 0x0, 0x0);
        gbc.writeMem(0x6aea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x506e);
        EXPECT(gbc.pc(), 0x6aec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01C6
        gbc.setState(0x3d2d, 0x6d01, 0xb430, 0x7348, 0xbea9, 0xb317, 0x1, 0x0);
        gbc.writeMem(0x3d2d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6d01);
        EXPECT(gbc.pc(), 0x3d2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01C7
        gbc.setState(0xbe09, 0x57fc, 0xcbf0, 0x693, 0xbd6b, 0x5b8b, 0x1, 0x1);
        gbc.writeMem(0xbe09, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x57fc);
        EXPECT(gbc.pc(), 0xbe0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe09), 0xcb);
        EXPECT(gbc.readMem(0xbe0a), 0xa5);
        // CB A5 01C8
        gbc.setState(0xcd6d, 0xede4, 0xdc90, 0xfb09, 0x563e, 0xe90c, 0x0, 0x0);
        gbc.writeMem(0xcd6d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xede4);
        EXPECT(gbc.pc(), 0xcd6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd6d), 0xcb);
        EXPECT(gbc.readMem(0xcd6e), 0xa5);
        // CB A5 01C9
        gbc.setState(0xd38, 0xd1f1, 0xaf90, 0xadb4, 0xae36, 0xb445, 0x1, 0x0);
        gbc.writeMem(0xd38, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd1f1);
        EXPECT(gbc.pc(), 0xd3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01CA
        gbc.setState(0x44e9, 0xa0a2, 0xa660, 0xc188, 0x12ca, 0x2355, 0x0, 0x0);
        gbc.writeMem(0x44e9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa0a2);
        EXPECT(gbc.pc(), 0x44eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01CB
        gbc.setState(0x23f3, 0x4e35, 0x3ba0, 0xf8de, 0xa9c6, 0xe084, 0x0, 0x1);
        gbc.writeMem(0x23f3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4e35);
        EXPECT(gbc.pc(), 0x23f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01CC
        gbc.setState(0xcec4, 0x28d7, 0x7c20, 0x2d10, 0x7512, 0xc535, 0x1, 0x0);
        gbc.writeMem(0xcec4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x28d7);
        EXPECT(gbc.pc(), 0xcec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcec4), 0xcb);
        EXPECT(gbc.readMem(0xcec5), 0xa5);
        // CB A5 01CD
        gbc.setState(0x9b23, 0x649b, 0xf210, 0xb058, 0x5c6a, 0x8435, 0x1, 0x0);
        gbc.writeMem(0x9b23, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x649b);
        EXPECT(gbc.pc(), 0x9b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b23), 0xcb);
        EXPECT(gbc.readMem(0x9b24), 0xa5);
        // CB A5 01CE
        gbc.setState(0xccd2, 0x7266, 0xe910, 0x90a3, 0xfa80, 0xbab5, 0x0, 0x0);
        gbc.writeMem(0xccd2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7266);
        EXPECT(gbc.pc(), 0xccd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd2), 0xcb);
        EXPECT(gbc.readMem(0xccd3), 0xa5);
        // CB A5 01CF
        gbc.setState(0x4ec3, 0x61b6, 0x9c80, 0x7638, 0x94bb, 0xffb8, 0x1, 0x1);
        gbc.writeMem(0x4ec3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x61b6);
        EXPECT(gbc.pc(), 0x4ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01D0
        gbc.setState(0xb3a2, 0x80a9, 0x9a60, 0x6168, 0xbd38, 0x99be, 0x0, 0x1);
        gbc.writeMem(0xb3a2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x80a9);
        EXPECT(gbc.pc(), 0xb3a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a2), 0xcb);
        EXPECT(gbc.readMem(0xb3a3), 0xa5);
        // CB A5 01D1
        gbc.setState(0xe9f8, 0x3a36, 0x8490, 0x5352, 0xa383, 0x963e, 0x1, 0x0);
        gbc.writeMem(0xe9f8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3a36);
        EXPECT(gbc.pc(), 0xe9fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f8), 0xcb);
        EXPECT(gbc.readMem(0xe9f9), 0xa5);
        // CB A5 01D2
        gbc.setState(0x1d03, 0xcc80, 0x1a50, 0x49ca, 0x3648, 0x226f, 0x1, 0x1);
        gbc.writeMem(0x1d03, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcc80);
        EXPECT(gbc.pc(), 0x1d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01D3
        gbc.setState(0xeddf, 0xcd41, 0x5130, 0x29a, 0xdb9b, 0xf280, 0x1, 0x0);
        gbc.writeMem(0xeddf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcd41);
        EXPECT(gbc.pc(), 0xede1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeddf), 0xcb);
        EXPECT(gbc.readMem(0xede0), 0xa5);
        // CB A5 01D4
        gbc.setState(0xa8f4, 0x9526, 0x7340, 0x9548, 0x664c, 0xe54c, 0x0, 0x1);
        gbc.writeMem(0xa8f4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x9526);
        EXPECT(gbc.pc(), 0xa8f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f4), 0xcb);
        EXPECT(gbc.readMem(0xa8f5), 0xa5);
        // CB A5 01D5
        gbc.setState(0x124a, 0x9ce1, 0xde30, 0x6b28, 0xca18, 0x8dc1, 0x1, 0x0);
        gbc.writeMem(0x124a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9ce1);
        EXPECT(gbc.pc(), 0x124c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01D6
        gbc.setState(0x281e, 0x758c, 0xbc90, 0x4f23, 0xd824, 0x8f41, 0x1, 0x0);
        gbc.writeMem(0x281e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x758c);
        EXPECT(gbc.pc(), 0x2820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01D7
        gbc.setState(0x1684, 0xf40b, 0xa250, 0xd617, 0x10b, 0x12be, 0x0, 0x0);
        gbc.writeMem(0x1684, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf40b);
        EXPECT(gbc.pc(), 0x1686);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01D8
        gbc.setState(0x6c8d, 0x7c7a, 0xf880, 0x3fd3, 0xbc6, 0x995d, 0x0, 0x0);
        gbc.writeMem(0x6c8d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7c7a);
        EXPECT(gbc.pc(), 0x6c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01D9
        gbc.setState(0xfb9, 0x52ba, 0x2c60, 0x95ff, 0x7d9a, 0xbd51, 0x0, 0x0);
        gbc.writeMem(0xfb9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x52ba);
        EXPECT(gbc.pc(), 0xfbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01DA
        gbc.setState(0x6c0b, 0xfcfd, 0x8ee0, 0xc3f7, 0x628e, 0x3844, 0x1, 0x1);
        gbc.writeMem(0x6c0b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfcfd);
        EXPECT(gbc.pc(), 0x6c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01DB
        gbc.setState(0xda04, 0x6f74, 0xbde0, 0x9dc6, 0x465c, 0xdff4, 0x0, 0x1);
        gbc.writeMem(0xda04, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6f74);
        EXPECT(gbc.pc(), 0xda06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda04), 0xcb);
        EXPECT(gbc.readMem(0xda05), 0xa5);
        // CB A5 01DC
        gbc.setState(0x2d2f, 0x9724, 0x5de0, 0x6b1e, 0xea76, 0x7fe8, 0x0, 0x1);
        gbc.writeMem(0x2d2f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9724);
        EXPECT(gbc.pc(), 0x2d31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01DD
        gbc.setState(0xa296, 0x7e15, 0x9390, 0x50c7, 0x7059, 0xe33a, 0x1, 0x0);
        gbc.writeMem(0xa296, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7e15);
        EXPECT(gbc.pc(), 0xa298);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa296), 0xcb);
        EXPECT(gbc.readMem(0xa297), 0xa5);
        // CB A5 01DE
        gbc.setState(0xccb4, 0xa666, 0xe1c0, 0x4701, 0xe72e, 0x5750, 0x0, 0x1);
        gbc.writeMem(0xccb4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa666);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccb4), 0xcb);
        EXPECT(gbc.readMem(0xccb5), 0xa5);
        // CB A5 01DF
        gbc.setState(0x52c4, 0xf4ba, 0x66b0, 0x7591, 0xe991, 0x7832, 0x0, 0x1);
        gbc.writeMem(0x52c4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xf4ba);
        EXPECT(gbc.pc(), 0x52c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01E0
        gbc.setState(0x57b, 0x2e64, 0x6180, 0x2a6d, 0x4d33, 0xd89, 0x1, 0x0);
        gbc.writeMem(0x57b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2e64);
        EXPECT(gbc.pc(), 0x57d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01E1
        gbc.setState(0xd2db, 0x79a0, 0x7a10, 0x6d8a, 0x66e9, 0x8273, 0x1, 0x1);
        gbc.writeMem(0xd2db, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x79a0);
        EXPECT(gbc.pc(), 0xd2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2db), 0xcb);
        EXPECT(gbc.readMem(0xd2dc), 0xa5);
        // CB A5 01E2
        gbc.setState(0x7b60, 0x4412, 0xd960, 0x35f0, 0x98bd, 0x1da6, 0x1, 0x1);
        gbc.writeMem(0x7b60, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4412);
        EXPECT(gbc.pc(), 0x7b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01E3
        gbc.setState(0x5969, 0x4b38, 0xba20, 0xb319, 0x233, 0xa585, 0x0, 0x0);
        gbc.writeMem(0x5969, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4b38);
        EXPECT(gbc.pc(), 0x596b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01E4
        gbc.setState(0x4123, 0x909, 0x3fa0, 0x9dc2, 0x2ec0, 0xf262, 0x1, 0x0);
        gbc.writeMem(0x4123, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x909);
        EXPECT(gbc.pc(), 0x4125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01E5
        gbc.setState(0x55cb, 0x4b74, 0x150, 0xe929, 0x2bcd, 0x7adb, 0x1, 0x0);
        gbc.writeMem(0x55cb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4b74);
        EXPECT(gbc.pc(), 0x55cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01E6
        gbc.setState(0x55ea, 0xc5da, 0xfbc0, 0xccf4, 0xcc0c, 0x832c, 0x1, 0x1);
        gbc.writeMem(0x55ea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc5da);
        EXPECT(gbc.pc(), 0x55ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01E7
        gbc.setState(0x32e3, 0x4ccc, 0x2d50, 0xef44, 0x7db9, 0x367c, 0x0, 0x1);
        gbc.writeMem(0x32e3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x4ccc);
        EXPECT(gbc.pc(), 0x32e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01E8
        gbc.setState(0xbfdb, 0xa660, 0x7510, 0x7b76, 0x65fc, 0xc200, 0x0, 0x0);
        gbc.writeMem(0xbfdb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xa660);
        EXPECT(gbc.pc(), 0xbfdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfdb), 0xcb);
        EXPECT(gbc.readMem(0xbfdc), 0xa5);
        // CB A5 01E9
        gbc.setState(0x4223, 0xf5aa, 0x6330, 0xd4e2, 0xf48f, 0x330f, 0x1, 0x0);
        gbc.writeMem(0x4223, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xf5aa);
        EXPECT(gbc.pc(), 0x4225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01EA
        gbc.setState(0xbde1, 0x143, 0xf860, 0x5e95, 0x5477, 0xc47b, 0x0, 0x1);
        gbc.writeMem(0xbde1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x143);
        EXPECT(gbc.pc(), 0xbde3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde1), 0xcb);
        EXPECT(gbc.readMem(0xbde2), 0xa5);
        // CB A5 01EB
        gbc.setState(0x1d0c, 0x20aa, 0x8910, 0xd788, 0xaebf, 0x1e93, 0x0, 0x0);
        gbc.writeMem(0x1d0c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x20aa);
        EXPECT(gbc.pc(), 0x1d0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01EC
        gbc.setState(0x2bbf, 0xd685, 0xfd30, 0x107, 0xc47a, 0x9dbd, 0x1, 0x0);
        gbc.writeMem(0x2bbf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd685);
        EXPECT(gbc.pc(), 0x2bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01ED
        gbc.setState(0x7e83, 0xa8d5, 0x8390, 0xb11c, 0x605b, 0x9512, 0x0, 0x0);
        gbc.writeMem(0x7e83, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa8d5);
        EXPECT(gbc.pc(), 0x7e85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01EE
        gbc.setState(0x5a6, 0xa6fa, 0x50b0, 0xba51, 0x5ac4, 0xa24f, 0x0, 0x1);
        gbc.writeMem(0x5a6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa6fa);
        EXPECT(gbc.pc(), 0x5a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01EF
        gbc.setState(0x5293, 0x73c, 0xab10, 0x84b1, 0xe39d, 0x8d74, 0x0, 0x0);
        gbc.writeMem(0x5293, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x73c);
        EXPECT(gbc.pc(), 0x5295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01F0
        gbc.setState(0x226b, 0x25a2, 0x17b0, 0x5119, 0x32f4, 0xa062, 0x1, 0x0);
        gbc.writeMem(0x226b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x25a2);
        EXPECT(gbc.pc(), 0x226d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01F1
        gbc.setState(0x8747, 0x4a38, 0xc480, 0x1b47, 0x46bd, 0xb8b, 0x1, 0x1);
        gbc.writeMem(0x8747, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4a38);
        EXPECT(gbc.pc(), 0x8749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8747), 0xcb);
        EXPECT(gbc.readMem(0x8748), 0xa5);
        // CB A5 01F2
        gbc.setState(0x7813, 0x3d1f, 0xdeb0, 0x53ea, 0x119b, 0x6fb9, 0x0, 0x1);
        gbc.writeMem(0x7813, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3d1f);
        EXPECT(gbc.pc(), 0x7815);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01F3
        gbc.setState(0xa5c8, 0xe473, 0x4c30, 0xcc63, 0x5378, 0x2f4e, 0x0, 0x0);
        gbc.writeMem(0xa5c8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe473);
        EXPECT(gbc.pc(), 0xa5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c8), 0xcb);
        EXPECT(gbc.readMem(0xa5c9), 0xa5);
        // CB A5 01F4
        gbc.setState(0xeccf, 0x4823, 0x6f40, 0xfe94, 0x8b5, 0x45c1, 0x1, 0x1);
        gbc.writeMem(0xeccf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4823);
        EXPECT(gbc.pc(), 0xecd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccf), 0xcb);
        EXPECT(gbc.readMem(0xecd0), 0xa5);
        // CB A5 01F5
        gbc.setState(0xc4b4, 0xb60, 0x72a0, 0x93b7, 0x755, 0x21b7, 0x1, 0x1);
        gbc.writeMem(0xc4b4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb60);
        EXPECT(gbc.pc(), 0xc4b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b4), 0xcb);
        EXPECT(gbc.readMem(0xc4b5), 0xa5);
        // CB A5 01F6
        gbc.setState(0x29f6, 0x69c8, 0x2ae0, 0x9e4d, 0x42ff, 0x27cb, 0x1, 0x1);
        gbc.writeMem(0x29f6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x69c8);
        EXPECT(gbc.pc(), 0x29f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01F7
        gbc.setState(0x249, 0x9fe4, 0x62d0, 0x5fb7, 0xbe13, 0x9241, 0x0, 0x1);
        gbc.writeMem(0x249, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9fe4);
        EXPECT(gbc.pc(), 0x24b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01F9
        gbc.setState(0x8d2, 0xf9a7, 0x7430, 0x2c8, 0x7094, 0x8dd3, 0x0, 0x1);
        gbc.writeMem(0x8d2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf9a7);
        EXPECT(gbc.pc(), 0x8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01FA
        gbc.setState(0x678f, 0x16ee, 0x1ab0, 0xd14a, 0xa8d, 0x62ed, 0x0, 0x1);
        gbc.writeMem(0x678f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x16ee);
        EXPECT(gbc.pc(), 0x6791);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01FB
        gbc.setState(0x7028, 0xa3bc, 0x6b00, 0x501c, 0xb3a8, 0x4ce7, 0x1, 0x1);
        gbc.writeMem(0x7028, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa3bc);
        EXPECT(gbc.pc(), 0x702a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01FC
        gbc.setState(0x2cab, 0xdce7, 0x65e0, 0x2fac, 0x95e0, 0xf869, 0x0, 0x1);
        gbc.writeMem(0x2cab, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdce7);
        EXPECT(gbc.pc(), 0x2cad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 01FD
        gbc.setState(0x24da, 0xe1ff, 0x16b0, 0x6997, 0xa50b, 0xb988, 0x1, 0x1);
        gbc.writeMem(0x24da, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe1ff);
        EXPECT(gbc.pc(), 0x24dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 01FF
        gbc.setState(0x6ff5, 0x8175, 0x5310, 0x6f42, 0x4f46, 0xe91d, 0x1, 0x0);
        gbc.writeMem(0x6ff5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8175);
        EXPECT(gbc.pc(), 0x6ff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0201
        gbc.setState(0x31b8, 0x485a, 0x8e00, 0x6687, 0x3177, 0x15d7, 0x0, 0x0);
        gbc.writeMem(0x31b8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x485a);
        EXPECT(gbc.pc(), 0x31ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0202
        gbc.setState(0xdf05, 0xca1c, 0xcbe0, 0xf3a5, 0xa8a9, 0xe22e, 0x1, 0x1);
        gbc.writeMem(0xdf05, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xca1c);
        EXPECT(gbc.pc(), 0xdf07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf05), 0xcb);
        EXPECT(gbc.readMem(0xdf06), 0xa5);
        // CB A5 0203
        gbc.setState(0x614a, 0xf830, 0x3840, 0xb2db, 0x8426, 0x78c7, 0x1, 0x1);
        gbc.writeMem(0x614a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xf830);
        EXPECT(gbc.pc(), 0x614c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0204
        gbc.setState(0x9e41, 0x7a0c, 0x2090, 0x9093, 0x53e0, 0xfa7b, 0x1, 0x0);
        gbc.writeMem(0x9e41, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0x9e43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e41), 0xcb);
        EXPECT(gbc.readMem(0x9e42), 0xa5);
        // CB A5 0205
        gbc.setState(0xad56, 0x217f, 0xd240, 0x5f4e, 0x5be8, 0x9af4, 0x1, 0x0);
        gbc.writeMem(0xad56, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x217f);
        EXPECT(gbc.pc(), 0xad58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad56), 0xcb);
        EXPECT(gbc.readMem(0xad57), 0xa5);
        // CB A5 0206
        gbc.setState(0x34fe, 0x356e, 0xc600, 0xe27d, 0x4833, 0x8db9, 0x0, 0x0);
        gbc.writeMem(0x34fe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x356e);
        EXPECT(gbc.pc(), 0x3500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0207
        gbc.setState(0x7520, 0xa1e3, 0xa340, 0x6b5c, 0x91ac, 0xe0cd, 0x0, 0x1);
        gbc.writeMem(0x7520, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa1e3);
        EXPECT(gbc.pc(), 0x7522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0208
        gbc.setState(0xdd50, 0x5cee, 0x9b00, 0x40b6, 0x1bae, 0xd01a, 0x1, 0x0);
        gbc.writeMem(0xdd50, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5cee);
        EXPECT(gbc.pc(), 0xdd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd50), 0xcb);
        EXPECT(gbc.readMem(0xdd51), 0xa5);
        // CB A5 0209
        gbc.setState(0x5fb0, 0xbdfd, 0x6fc0, 0x6655, 0x3eeb, 0x6169, 0x1, 0x1);
        gbc.writeMem(0x5fb0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbdfd);
        EXPECT(gbc.pc(), 0x5fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 020A
        gbc.setState(0xe090, 0xdd, 0xf4f0, 0x8dc6, 0x1920, 0xe709, 0x0, 0x1);
        gbc.writeMem(0xe090, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xdd);
        EXPECT(gbc.pc(), 0xe092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe090), 0xcb);
        EXPECT(gbc.readMem(0xe091), 0xa5);
        // CB A5 020C
        gbc.setState(0x7433, 0xfc2, 0x60b0, 0xe8af, 0x87f0, 0x9901, 0x1, 0x0);
        gbc.writeMem(0x7433, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfc2);
        EXPECT(gbc.pc(), 0x7435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 020D
        gbc.setState(0xe371, 0x53eb, 0x4ea0, 0x4345, 0xffba, 0x9de9, 0x0, 0x1);
        gbc.writeMem(0xe371, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x53eb);
        EXPECT(gbc.pc(), 0xe373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe371), 0xcb);
        EXPECT(gbc.readMem(0xe372), 0xa5);
        // CB A5 020E
        gbc.setState(0x27cc, 0xc9b5, 0xf150, 0xfc7a, 0xb63d, 0xf674, 0x1, 0x1);
        gbc.writeMem(0x27cc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc9b5);
        EXPECT(gbc.pc(), 0x27ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 020F
        gbc.setState(0xa2fe, 0x81d5, 0xa820, 0x4ea6, 0x1154, 0x1f40, 0x1, 0x1);
        gbc.writeMem(0xa2fe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x81d5);
        EXPECT(gbc.pc(), 0xa300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2fe), 0xcb);
        EXPECT(gbc.readMem(0xa2ff), 0xa5);
        // CB A5 0210
        gbc.setState(0xfa3, 0x1a21, 0xb0f0, 0x61fd, 0x3705, 0x69da, 0x1, 0x0);
        gbc.writeMem(0xfa3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1a21);
        EXPECT(gbc.pc(), 0xfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0212
        gbc.setState(0x9a56, 0x436e, 0x8cc0, 0xbb4, 0x97a5, 0x344b, 0x0, 0x0);
        gbc.writeMem(0x9a56, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x436e);
        EXPECT(gbc.pc(), 0x9a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a56), 0xcb);
        EXPECT(gbc.readMem(0x9a57), 0xa5);
        // CB A5 0213
        gbc.setState(0x8772, 0xc452, 0x8c60, 0x84e0, 0xd8ce, 0x60db, 0x1, 0x0);
        gbc.writeMem(0x8772, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc452);
        EXPECT(gbc.pc(), 0x8774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8772), 0xcb);
        EXPECT(gbc.readMem(0x8773), 0xa5);
        // CB A5 0214
        gbc.setState(0x2fc3, 0x7736, 0xe560, 0x4b1e, 0xa544, 0x35ee, 0x1, 0x1);
        gbc.writeMem(0x2fc3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7736);
        EXPECT(gbc.pc(), 0x2fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0215
        gbc.setState(0xda4a, 0x943b, 0xc8f0, 0xb4fd, 0xc513, 0x9359, 0x0, 0x1);
        gbc.writeMem(0xda4a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x943b);
        EXPECT(gbc.pc(), 0xda4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda4a), 0xcb);
        EXPECT(gbc.readMem(0xda4b), 0xa5);
        // CB A5 0216
        gbc.setState(0xd9fa, 0xbba9, 0x580, 0xfd32, 0x23ee, 0x918d, 0x0, 0x1);
        gbc.writeMem(0xd9fa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbba9);
        EXPECT(gbc.pc(), 0xd9fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fa), 0xcb);
        EXPECT(gbc.readMem(0xd9fb), 0xa5);
        // CB A5 0217
        gbc.setState(0x78f6, 0xae45, 0x93d0, 0x8b1b, 0x1883, 0x9eb, 0x0, 0x1);
        gbc.writeMem(0x78f6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xae45);
        EXPECT(gbc.pc(), 0x78f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0218
        gbc.setState(0xa525, 0x7a14, 0xb0e0, 0xe569, 0x2718, 0xb4dd, 0x1, 0x1);
        gbc.writeMem(0xa525, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7a14);
        EXPECT(gbc.pc(), 0xa527);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa525), 0xcb);
        EXPECT(gbc.readMem(0xa526), 0xa5);
        // CB A5 0219
        gbc.setState(0xd0a4, 0xd222, 0x6400, 0x99d0, 0xdd4, 0x42a8, 0x1, 0x1);
        gbc.writeMem(0xd0a4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd222);
        EXPECT(gbc.pc(), 0xd0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0a4), 0xcb);
        EXPECT(gbc.readMem(0xd0a5), 0xa5);
        // CB A5 021A
        gbc.setState(0x873c, 0x26f5, 0xce60, 0xacb6, 0xb8db, 0x611b, 0x1, 0x0);
        gbc.writeMem(0x873c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x26f5);
        EXPECT(gbc.pc(), 0x873e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873c), 0xcb);
        EXPECT(gbc.readMem(0x873d), 0xa5);
        // CB A5 021B
        gbc.setState(0x5884, 0x46d5, 0xc900, 0xc378, 0xbb4a, 0xf76c, 0x0, 0x0);
        gbc.writeMem(0x5884, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x46d5);
        EXPECT(gbc.pc(), 0x5886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 021C
        gbc.setState(0xb39a, 0x7c63, 0x6420, 0x204f, 0x629, 0x8aa2, 0x1, 0x0);
        gbc.writeMem(0xb39a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x7c63);
        EXPECT(gbc.pc(), 0xb39c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb39a), 0xcb);
        EXPECT(gbc.readMem(0xb39b), 0xa5);
        // CB A5 021D
        gbc.setState(0xe003, 0xf5a0, 0x3550, 0xc66e, 0xe246, 0x7beb, 0x0, 0x1);
        gbc.writeMem(0xe003, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf5a0);
        EXPECT(gbc.pc(), 0xe005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe003), 0xcb);
        EXPECT(gbc.readMem(0xe004), 0xa5);
        // CB A5 021E
        gbc.setState(0x78c7, 0x2d4, 0x4b70, 0xc8a7, 0x1065, 0x44eb, 0x0, 0x1);
        gbc.writeMem(0x78c7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2d4);
        EXPECT(gbc.pc(), 0x78c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 021F
        gbc.setState(0xfc9, 0xf55a, 0x7720, 0x2c62, 0x937e, 0x989a, 0x1, 0x1);
        gbc.writeMem(0xfc9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf55a);
        EXPECT(gbc.pc(), 0xfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0220
        gbc.setState(0x5397, 0x419f, 0xca80, 0x1312, 0x582a, 0x9726, 0x1, 0x0);
        gbc.writeMem(0x5397, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x419f);
        EXPECT(gbc.pc(), 0x5399);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0221
        gbc.setState(0xeaac, 0xe5f, 0x1430, 0xcd78, 0x4071, 0x6e4c, 0x0, 0x1);
        gbc.writeMem(0xeaac, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe5f);
        EXPECT(gbc.pc(), 0xeaae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaac), 0xcb);
        EXPECT(gbc.readMem(0xeaad), 0xa5);
        // CB A5 0222
        gbc.setState(0xd4f7, 0x2744, 0xb040, 0xc0af, 0xf20d, 0x12f2, 0x1, 0x1);
        gbc.writeMem(0xd4f7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2744);
        EXPECT(gbc.pc(), 0xd4f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4f7), 0xcb);
        EXPECT(gbc.readMem(0xd4f8), 0xa5);
        // CB A5 0223
        gbc.setState(0xea7c, 0x5807, 0xe0c0, 0xcd2e, 0xe1b8, 0x58f1, 0x1, 0x0);
        gbc.writeMem(0xea7c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5807);
        EXPECT(gbc.pc(), 0xea7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea7c), 0xcb);
        EXPECT(gbc.readMem(0xea7d), 0xa5);
        // CB A5 0224
        gbc.setState(0x8b96, 0x9737, 0x6680, 0xc77e, 0xed10, 0x3918, 0x0, 0x0);
        gbc.writeMem(0x8b96, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9737);
        EXPECT(gbc.pc(), 0x8b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b96), 0xcb);
        EXPECT(gbc.readMem(0x8b97), 0xa5);
        // CB A5 0225
        gbc.setState(0x4da7, 0xaf59, 0xe8b0, 0xb94b, 0xccc8, 0x1c20, 0x0, 0x1);
        gbc.writeMem(0x4da7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xaf59);
        EXPECT(gbc.pc(), 0x4da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0226
        gbc.setState(0xa7cb, 0x9ae, 0x7b30, 0x6842, 0x532c, 0xb540, 0x0, 0x0);
        gbc.writeMem(0xa7cb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9ae);
        EXPECT(gbc.pc(), 0xa7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7cb), 0xcb);
        EXPECT(gbc.readMem(0xa7cc), 0xa5);
        // CB A5 0227
        gbc.setState(0x5e09, 0x833, 0xf6c0, 0xf90e, 0xc4c, 0x1ecd, 0x0, 0x1);
        gbc.writeMem(0x5e09, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x833);
        EXPECT(gbc.pc(), 0x5e0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0228
        gbc.setState(0x3971, 0xeb5a, 0x270, 0xb128, 0x11a9, 0x7c8c, 0x1, 0x1);
        gbc.writeMem(0x3971, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xeb5a);
        EXPECT(gbc.pc(), 0x3973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0229
        gbc.setState(0x519, 0x4125, 0x2690, 0xf882, 0x3f11, 0x3ad0, 0x0, 0x1);
        gbc.writeMem(0x519, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4125);
        EXPECT(gbc.pc(), 0x51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 022A
        gbc.setState(0xdca2, 0x5e78, 0x42a0, 0xe56, 0xb669, 0x6fdf, 0x0, 0x0);
        gbc.writeMem(0xdca2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5e78);
        EXPECT(gbc.pc(), 0xdca4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca2), 0xcb);
        EXPECT(gbc.readMem(0xdca3), 0xa5);
        // CB A5 022B
        gbc.setState(0x35a7, 0x1e43, 0x8560, 0x2c50, 0x7071, 0xa449, 0x1, 0x0);
        gbc.writeMem(0x35a7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1e43);
        EXPECT(gbc.pc(), 0x35a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 022C
        gbc.setState(0x55f9, 0x8f11, 0x9ae0, 0x71af, 0x2399, 0xfb37, 0x1, 0x0);
        gbc.writeMem(0x55f9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8f11);
        EXPECT(gbc.pc(), 0x55fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 022D
        gbc.setState(0x5fa4, 0x1b06, 0x3090, 0xbff8, 0x1210, 0x6d06, 0x1, 0x1);
        gbc.writeMem(0x5fa4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1b06);
        EXPECT(gbc.pc(), 0x5fa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 022E
        gbc.setState(0xe11, 0x1ef8, 0xeea0, 0xdcbf, 0x676b, 0xb0c4, 0x1, 0x1);
        gbc.writeMem(0xe11, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1ef8);
        EXPECT(gbc.pc(), 0xe13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 022F
        gbc.setState(0xccd4, 0x7a83, 0xafd0, 0xba3f, 0x1bd3, 0x4246, 0x0, 0x1);
        gbc.writeMem(0xccd4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7a83);
        EXPECT(gbc.pc(), 0xccd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccd4), 0xcb);
        EXPECT(gbc.readMem(0xccd5), 0xa5);
        // CB A5 0230
        gbc.setState(0x970a, 0x6f95, 0x210, 0xa5a0, 0x72c6, 0x7c45, 0x1, 0x0);
        gbc.writeMem(0x970a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x6f95);
        EXPECT(gbc.pc(), 0x970c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x970a), 0xcb);
        EXPECT(gbc.readMem(0x970b), 0xa5);
        // CB A5 0231
        gbc.setState(0xcf2c, 0x61da, 0x92d0, 0x12af, 0x5451, 0x8bed, 0x0, 0x1);
        gbc.writeMem(0xcf2c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x61da);
        EXPECT(gbc.pc(), 0xcf2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2c), 0xcb);
        EXPECT(gbc.readMem(0xcf2d), 0xa5);
        // CB A5 0232
        gbc.setState(0xe58f, 0xc13c, 0xed00, 0xe102, 0x225d, 0xf47d, 0x0, 0x0);
        gbc.writeMem(0xe58f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc13c);
        EXPECT(gbc.pc(), 0xe591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe58f), 0xcb);
        EXPECT(gbc.readMem(0xe590), 0xa5);
        // CB A5 0233
        gbc.setState(0x4787, 0x95c4, 0x5ae0, 0xeaf2, 0x4327, 0x9401, 0x0, 0x0);
        gbc.writeMem(0x4787, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x95c4);
        EXPECT(gbc.pc(), 0x4789);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0234
        gbc.setState(0x3bde, 0xb5bc, 0xf260, 0xcbad, 0x1e44, 0xa95e, 0x1, 0x0);
        gbc.writeMem(0x3bde, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb5bc);
        EXPECT(gbc.pc(), 0x3be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0235
        gbc.setState(0xc0e2, 0x54f1, 0x8980, 0xa3e4, 0x37a0, 0xb16a, 0x1, 0x1);
        gbc.writeMem(0xc0e2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x54f1);
        EXPECT(gbc.pc(), 0xc0e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e2), 0xcb);
        EXPECT(gbc.readMem(0xc0e3), 0xa5);
        // CB A5 0236
        gbc.setState(0x48aa, 0x5837, 0xb130, 0xd122, 0xbb62, 0x5098, 0x0, 0x1);
        gbc.writeMem(0x48aa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5837);
        EXPECT(gbc.pc(), 0x48ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0237
        gbc.setState(0x170a, 0xc14a, 0x61c0, 0x3f5d, 0xf9f6, 0x7b10, 0x0, 0x0);
        gbc.writeMem(0x170a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc14a);
        EXPECT(gbc.pc(), 0x170c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0238
        gbc.setState(0xdd6e, 0x2807, 0xc500, 0xbf08, 0xcbe4, 0x1641, 0x1, 0x0);
        gbc.writeMem(0xdd6e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2807);
        EXPECT(gbc.pc(), 0xdd70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6e), 0xcb);
        EXPECT(gbc.readMem(0xdd6f), 0xa5);
        // CB A5 0239
        gbc.setState(0x256a, 0x4970, 0x8350, 0x6426, 0x5bb, 0x9bb6, 0x1, 0x1);
        gbc.writeMem(0x256a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4970);
        EXPECT(gbc.pc(), 0x256c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 023A
        gbc.setState(0xabbb, 0x263c, 0xa720, 0x7f2d, 0x4806, 0x4fc3, 0x1, 0x1);
        gbc.writeMem(0xabbb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x263c);
        EXPECT(gbc.pc(), 0xabbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbb), 0xcb);
        EXPECT(gbc.readMem(0xabbc), 0xa5);
        // CB A5 023B
        gbc.setState(0x8890, 0xf996, 0x6840, 0x256c, 0x6437, 0x6d4b, 0x1, 0x0);
        gbc.writeMem(0x8890, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf996);
        EXPECT(gbc.pc(), 0x8892);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8890), 0xcb);
        EXPECT(gbc.readMem(0x8891), 0xa5);
        // CB A5 023C
        gbc.setState(0xc1c1, 0x184a, 0x30e0, 0xb632, 0x36c5, 0x6091, 0x1, 0x0);
        gbc.writeMem(0xc1c1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x184a);
        EXPECT(gbc.pc(), 0xc1c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c1), 0xcb);
        EXPECT(gbc.readMem(0xc1c2), 0xa5);
        // CB A5 023D
        gbc.setState(0x8d7b, 0xae5e, 0xf6b0, 0xaeab, 0x7e5b, 0xba9c, 0x0, 0x0);
        gbc.writeMem(0x8d7b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xae5e);
        EXPECT(gbc.pc(), 0x8d7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d7b), 0xcb);
        EXPECT(gbc.readMem(0x8d7c), 0xa5);
        // CB A5 023E
        gbc.setState(0xa07b, 0x888a, 0xb190, 0x2bc9, 0x3f79, 0x153c, 0x0, 0x1);
        gbc.writeMem(0xa07b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x888a);
        EXPECT(gbc.pc(), 0xa07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa07b), 0xcb);
        EXPECT(gbc.readMem(0xa07c), 0xa5);
        // CB A5 023F
        gbc.setState(0x2b03, 0x78ea, 0x170, 0xd83a, 0x3264, 0xa2bb, 0x0, 0x0);
        gbc.writeMem(0x2b03, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x78ea);
        EXPECT(gbc.pc(), 0x2b05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0240
        gbc.setState(0x685e, 0xb7be, 0xc8b0, 0xd3a0, 0xe932, 0xc841, 0x1, 0x1);
        gbc.writeMem(0x685e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb7be);
        EXPECT(gbc.pc(), 0x6860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0241
        gbc.setState(0xaea0, 0x12d8, 0xb670, 0xad73, 0xdf12, 0x7bda, 0x0, 0x1);
        gbc.writeMem(0xaea0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x12d8);
        EXPECT(gbc.pc(), 0xaea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaea0), 0xcb);
        EXPECT(gbc.readMem(0xaea1), 0xa5);
        // CB A5 0242
        gbc.setState(0x7d38, 0xc161, 0x4540, 0xe3ba, 0x5b55, 0x1095, 0x1, 0x1);
        gbc.writeMem(0x7d38, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc161);
        EXPECT(gbc.pc(), 0x7d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0243
        gbc.setState(0xda4d, 0x2dd, 0x3530, 0x91df, 0x129b, 0x4f36, 0x1, 0x0);
        gbc.writeMem(0xda4d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x2dd);
        EXPECT(gbc.pc(), 0xda4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda4d), 0xcb);
        EXPECT(gbc.readMem(0xda4e), 0xa5);
        // CB A5 0244
        gbc.setState(0xdc16, 0x5f0f, 0xa6b0, 0xb6a9, 0x1093, 0xd08b, 0x0, 0x1);
        gbc.writeMem(0xdc16, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5f0f);
        EXPECT(gbc.pc(), 0xdc18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc16), 0xcb);
        EXPECT(gbc.readMem(0xdc17), 0xa5);
        // CB A5 0245
        gbc.setState(0x8d8b, 0x66d2, 0xbaf0, 0xa623, 0xa196, 0xd5d7, 0x1, 0x1);
        gbc.writeMem(0x8d8b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x66d2);
        EXPECT(gbc.pc(), 0x8d8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d8b), 0xcb);
        EXPECT(gbc.readMem(0x8d8c), 0xa5);
        // CB A5 0246
        gbc.setState(0x630, 0x3c2f, 0xba80, 0x6c3, 0xcd3, 0xe05f, 0x1, 0x0);
        gbc.writeMem(0x630, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3c2f);
        EXPECT(gbc.pc(), 0x632);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0247
        gbc.setState(0xa4, 0x402f, 0xb530, 0x864f, 0xf1d6, 0xc63b, 0x1, 0x0);
        gbc.writeMem(0xa4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x402f);
        EXPECT(gbc.pc(), 0xa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0248
        gbc.setState(0x4e10, 0x40df, 0x2bb0, 0x3be3, 0xa488, 0xd157, 0x1, 0x0);
        gbc.writeMem(0x4e10, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x40df);
        EXPECT(gbc.pc(), 0x4e12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0249
        gbc.setState(0x76d0, 0x62df, 0xb6f0, 0xaa59, 0x9922, 0x6dcc, 0x0, 0x0);
        gbc.writeMem(0x76d0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x62df);
        EXPECT(gbc.pc(), 0x76d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 024A
        gbc.setState(0xc28, 0xca4a, 0x9b50, 0x2473, 0x29d4, 0x8e06, 0x1, 0x0);
        gbc.writeMem(0xc28, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xca4a);
        EXPECT(gbc.pc(), 0xc2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 024B
        gbc.setState(0xddbb, 0x36ec, 0x8ba0, 0x5137, 0xa312, 0x7d2a, 0x0, 0x0);
        gbc.writeMem(0xddbb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x36ec);
        EXPECT(gbc.pc(), 0xddbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddbb), 0xcb);
        EXPECT(gbc.readMem(0xddbc), 0xa5);
        // CB A5 024C
        gbc.setState(0xe65, 0xc2ad, 0x48b0, 0xacee, 0xd6c, 0xb194, 0x0, 0x1);
        gbc.writeMem(0xe65, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xc2ad);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 024D
        gbc.setState(0x6068, 0x1799, 0x4e70, 0x1d6f, 0x4f6d, 0x6d94, 0x1, 0x1);
        gbc.writeMem(0x6068, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1799);
        EXPECT(gbc.pc(), 0x606a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 024E
        gbc.setState(0x2590, 0xa389, 0x1d20, 0xc9ff, 0xf0a6, 0x5aff, 0x0, 0x1);
        gbc.writeMem(0x2590, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xa389);
        EXPECT(gbc.pc(), 0x2592);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 024F
        gbc.setState(0xce9b, 0x6c8b, 0x4610, 0xf379, 0x39aa, 0xd9b0, 0x1, 0x1);
        gbc.writeMem(0xce9b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6c8b);
        EXPECT(gbc.pc(), 0xce9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce9b), 0xcb);
        EXPECT(gbc.readMem(0xce9c), 0xa5);
        // CB A5 0250
        gbc.setState(0x786a, 0x6397, 0x3270, 0x741b, 0x65bb, 0xbfec, 0x1, 0x0);
        gbc.writeMem(0x786a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x6397);
        EXPECT(gbc.pc(), 0x786c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0251
        gbc.setState(0x46be, 0x13e5, 0x2f10, 0xb081, 0x8763, 0x466, 0x1, 0x0);
        gbc.writeMem(0x46be, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x13e5);
        EXPECT(gbc.pc(), 0x46c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0252
        gbc.setState(0xe212, 0xdd4f, 0xbbe0, 0xa3cc, 0x5d15, 0xb200, 0x0, 0x0);
        gbc.writeMem(0xe212, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xdd4f);
        EXPECT(gbc.pc(), 0xe214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe212), 0xcb);
        EXPECT(gbc.readMem(0xe213), 0xa5);
        // CB A5 0253
        gbc.setState(0x570d, 0x1c68, 0xe190, 0xe914, 0xf719, 0x62f7, 0x1, 0x1);
        gbc.writeMem(0x570d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1c68);
        EXPECT(gbc.pc(), 0x570f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0254
        gbc.setState(0x75ff, 0x9ea3, 0xb700, 0xae50, 0x7ad6, 0x7ffd, 0x0, 0x0);
        gbc.writeMem(0x75ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x9ea3);
        EXPECT(gbc.pc(), 0x7601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0255
        gbc.setState(0xed5f, 0x435f, 0xd940, 0xbf57, 0xa4b6, 0x6fb8, 0x1, 0x0);
        gbc.writeMem(0xed5f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x435f);
        EXPECT(gbc.pc(), 0xed61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5f), 0xcb);
        EXPECT(gbc.readMem(0xed60), 0xa5);
        // CB A5 0256
        gbc.setState(0xde1c, 0x23fd, 0x40a0, 0xbaaf, 0x9aed, 0x1ea7, 0x0, 0x0);
        gbc.writeMem(0xde1c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x23fd);
        EXPECT(gbc.pc(), 0xde1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1c), 0xcb);
        EXPECT(gbc.readMem(0xde1d), 0xa5);
        // CB A5 0257
        gbc.setState(0x1f04, 0xd622, 0xc9a0, 0x742e, 0xb314, 0xbbab, 0x1, 0x0);
        gbc.writeMem(0x1f04, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd622);
        EXPECT(gbc.pc(), 0x1f06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0258
        gbc.setState(0xa238, 0x64ad, 0xd900, 0xb87a, 0xba5f, 0x8f68, 0x1, 0x0);
        gbc.writeMem(0xa238, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x64ad);
        EXPECT(gbc.pc(), 0xa23a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa238), 0xcb);
        EXPECT(gbc.readMem(0xa239), 0xa5);
        // CB A5 0259
        gbc.setState(0x252, 0xc9b8, 0xbbd0, 0xd17b, 0xfae, 0x53f7, 0x0, 0x0);
        gbc.writeMem(0x252, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc9b8);
        EXPECT(gbc.pc(), 0x254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 025A
        gbc.setState(0xc350, 0xd62f, 0x360, 0xa1f8, 0xd9ec, 0x90e0, 0x0, 0x0);
        gbc.writeMem(0xc350, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd62f);
        EXPECT(gbc.pc(), 0xc352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc350), 0xcb);
        EXPECT(gbc.readMem(0xc351), 0xa5);
        // CB A5 025B
        gbc.setState(0x7674, 0x2973, 0x8640, 0x2221, 0x1599, 0x8557, 0x0, 0x1);
        gbc.writeMem(0x7674, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2973);
        EXPECT(gbc.pc(), 0x7676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 025C
        gbc.setState(0x4557, 0x319b, 0x64b0, 0x28f7, 0xb459, 0xa459, 0x0, 0x1);
        gbc.writeMem(0x4557, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x319b);
        EXPECT(gbc.pc(), 0x4559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 025D
        gbc.setState(0xae5b, 0x4cc, 0x3a20, 0x4e0f, 0x2e1f, 0x4f1b, 0x0, 0x0);
        gbc.writeMem(0xae5b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4cc);
        EXPECT(gbc.pc(), 0xae5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae5b), 0xcb);
        EXPECT(gbc.readMem(0xae5c), 0xa5);
        // CB A5 025E
        gbc.setState(0xb8a5, 0xeca4, 0xbe30, 0xee20, 0x4e1c, 0xccb2, 0x0, 0x1);
        gbc.writeMem(0xb8a5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xeca4);
        EXPECT(gbc.pc(), 0xb8a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a5), 0xcb);
        EXPECT(gbc.readMem(0xb8a6), 0xa5);
        // CB A5 025F
        gbc.setState(0x5e0, 0xa70f, 0xace0, 0x62ed, 0x25bd, 0x8a97, 0x0, 0x0);
        gbc.writeMem(0x5e0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa70f);
        EXPECT(gbc.pc(), 0x5e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0260
        gbc.setState(0xdf4, 0xb51e, 0x7780, 0xf082, 0xc2f, 0xd5ff, 0x0, 0x0);
        gbc.writeMem(0xdf4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb51e);
        EXPECT(gbc.pc(), 0xdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0261
        gbc.setState(0x3f4c, 0x77cd, 0x5300, 0xcb7c, 0x6f4f, 0x4fc4, 0x1, 0x0);
        gbc.writeMem(0x3f4c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x77cd);
        EXPECT(gbc.pc(), 0x3f4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0262
        gbc.setState(0xd689, 0x799f, 0x9930, 0x8a01, 0x9286, 0xb065, 0x1, 0x0);
        gbc.writeMem(0xd689, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x799f);
        EXPECT(gbc.pc(), 0xd68b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd689), 0xcb);
        EXPECT(gbc.readMem(0xd68a), 0xa5);
        // CB A5 0263
        gbc.setState(0x6529, 0xb2b7, 0x690, 0xafac, 0x8bde, 0x9903, 0x0, 0x1);
        gbc.writeMem(0x6529, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xb2b7);
        EXPECT(gbc.pc(), 0x652b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0264
        gbc.setState(0x1331, 0xa087, 0x2450, 0x225d, 0xdb43, 0xfc6d, 0x1, 0x1);
        gbc.writeMem(0x1331, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa087);
        EXPECT(gbc.pc(), 0x1333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0265
        gbc.setState(0xb0ff, 0xcb81, 0x7d60, 0x2bf5, 0xfaa3, 0xf6a5, 0x0, 0x0);
        gbc.writeMem(0xb0ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xcb81);
        EXPECT(gbc.pc(), 0xb101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ff), 0xcb);
        EXPECT(gbc.readMem(0xb100), 0xa5);
        // CB A5 0266
        gbc.setState(0x1fd3, 0x9261, 0x4e10, 0x4aeb, 0xe0e3, 0x296e, 0x0, 0x1);
        gbc.writeMem(0x1fd3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9261);
        EXPECT(gbc.pc(), 0x1fd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0267
        gbc.setState(0x3cf2, 0xd0ea, 0xa680, 0xbd9, 0x47a9, 0xa9db, 0x1, 0x1);
        gbc.writeMem(0x3cf2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd0ea);
        EXPECT(gbc.pc(), 0x3cf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0268
        gbc.setState(0x9fa6, 0x78b2, 0x9540, 0x494c, 0x969d, 0x5688, 0x1, 0x0);
        gbc.writeMem(0x9fa6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x78b2);
        EXPECT(gbc.pc(), 0x9fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fa6), 0xcb);
        EXPECT(gbc.readMem(0x9fa7), 0xa5);
        // CB A5 0269
        gbc.setState(0xe434, 0xd742, 0x1c50, 0xd7e7, 0x8e3c, 0xbbd, 0x1, 0x1);
        gbc.writeMem(0xe434, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd742);
        EXPECT(gbc.pc(), 0xe436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe434), 0xcb);
        EXPECT(gbc.readMem(0xe435), 0xa5);
        // CB A5 026A
        gbc.setState(0x4b4b, 0x48c9, 0x7670, 0x7c5f, 0xe935, 0xb065, 0x1, 0x0);
        gbc.writeMem(0x4b4b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x48c9);
        EXPECT(gbc.pc(), 0x4b4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 026B
        gbc.setState(0x7605, 0x451b, 0xaef0, 0x9e2f, 0x3343, 0x6720, 0x0, 0x0);
        gbc.writeMem(0x7605, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x451b);
        EXPECT(gbc.pc(), 0x7607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 026C
        gbc.setState(0x45d, 0x77ca, 0x36f0, 0xdd51, 0x7bf9, 0xc61d, 0x1, 0x1);
        gbc.writeMem(0x45d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x77ca);
        EXPECT(gbc.pc(), 0x45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 026D
        gbc.setState(0xe67d, 0x4876, 0x4e90, 0x6aea, 0x3d99, 0xca72, 0x0, 0x0);
        gbc.writeMem(0xe67d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4876);
        EXPECT(gbc.pc(), 0xe67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe67d), 0xcb);
        EXPECT(gbc.readMem(0xe67e), 0xa5);
        // CB A5 026E
        gbc.setState(0x5bb7, 0xcd5b, 0x4d10, 0x564c, 0x9848, 0x49df, 0x1, 0x1);
        gbc.writeMem(0x5bb7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcd5b);
        EXPECT(gbc.pc(), 0x5bb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 026F
        gbc.setState(0xafc9, 0x8246, 0x3710, 0xb471, 0xb62, 0xf071, 0x1, 0x1);
        gbc.writeMem(0xafc9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8246);
        EXPECT(gbc.pc(), 0xafcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafc9), 0xcb);
        EXPECT(gbc.readMem(0xafca), 0xa5);
        // CB A5 0270
        gbc.setState(0x1d7f, 0x68e0, 0x14f0, 0xfe79, 0x87a8, 0x4e58, 0x0, 0x0);
        gbc.writeMem(0x1d7f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x68e0);
        EXPECT(gbc.pc(), 0x1d81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0271
        gbc.setState(0xcae2, 0xf163, 0xe00, 0x9c82, 0x8bf7, 0xe218, 0x0, 0x0);
        gbc.writeMem(0xcae2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf163);
        EXPECT(gbc.pc(), 0xcae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcae2), 0xcb);
        EXPECT(gbc.readMem(0xcae3), 0xa5);
        // CB A5 0272
        gbc.setState(0x42d6, 0x53df, 0xcdf0, 0xf62b, 0xf157, 0x80ba, 0x1, 0x0);
        gbc.writeMem(0x42d6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x53df);
        EXPECT(gbc.pc(), 0x42d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0273
        gbc.setState(0xd321, 0xe1ef, 0xbfa0, 0x374c, 0xf38d, 0xc04e, 0x1, 0x0);
        gbc.writeMem(0xd321, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe1ef);
        EXPECT(gbc.pc(), 0xd323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd321), 0xcb);
        EXPECT(gbc.readMem(0xd322), 0xa5);
        // CB A5 0275
        gbc.setState(0x247a, 0x53b7, 0x1ac0, 0x385a, 0x1031, 0xf4da, 0x0, 0x0);
        gbc.writeMem(0x247a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x53b7);
        EXPECT(gbc.pc(), 0x247c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0276
        gbc.setState(0x9628, 0x1987, 0x9930, 0xbe2b, 0x6a47, 0xb6e7, 0x1, 0x0);
        gbc.writeMem(0x9628, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1987);
        EXPECT(gbc.pc(), 0x962a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9628), 0xcb);
        EXPECT(gbc.readMem(0x9629), 0xa5);
        // CB A5 0277
        gbc.setState(0x7e14, 0x28e3, 0xc0f0, 0x56de, 0x168b, 0x722a, 0x0, 0x1);
        gbc.writeMem(0x7e14, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x28e3);
        EXPECT(gbc.pc(), 0x7e16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0278
        gbc.setState(0x8614, 0x65b0, 0x6200, 0x9870, 0x851f, 0x2b35, 0x1, 0x0);
        gbc.writeMem(0x8614, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x65b0);
        EXPECT(gbc.pc(), 0x8616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8614), 0xcb);
        EXPECT(gbc.readMem(0x8615), 0xa5);
        // CB A5 0279
        gbc.setState(0x45d1, 0x8864, 0x5b20, 0x8f55, 0x30b3, 0x5c57, 0x0, 0x1);
        gbc.writeMem(0x45d1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8864);
        EXPECT(gbc.pc(), 0x45d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 027A
        gbc.setState(0x9e43, 0x62aa, 0x2b70, 0xd689, 0x183e, 0xad08, 0x1, 0x0);
        gbc.writeMem(0x9e43, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x62aa);
        EXPECT(gbc.pc(), 0x9e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e43), 0xcb);
        EXPECT(gbc.readMem(0x9e44), 0xa5);
        // CB A5 027B
        gbc.setState(0xa511, 0x6ac5, 0xdfd0, 0x5061, 0xbf8, 0xc625, 0x1, 0x1);
        gbc.writeMem(0xa511, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6ac5);
        EXPECT(gbc.pc(), 0xa513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa511), 0xcb);
        EXPECT(gbc.readMem(0xa512), 0xa5);
        // CB A5 027C
        gbc.setState(0x146e, 0xbdd8, 0xa410, 0xd524, 0xee00, 0x54bb, 0x1, 0x1);
        gbc.writeMem(0x146e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xbdd8);
        EXPECT(gbc.pc(), 0x1470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 027D
        gbc.setState(0xeeee, 0xfc65, 0xef20, 0xa897, 0x92a5, 0xf32e, 0x0, 0x1);
        gbc.writeMem(0xeeee, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xfc65);
        EXPECT(gbc.pc(), 0xeef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeee), 0xcb);
        EXPECT(gbc.readMem(0xeeef), 0xa5);
        // CB A5 027E
        gbc.setState(0x74aa, 0x1e21, 0x19a0, 0x44b2, 0xa46b, 0xaa3, 0x1, 0x0);
        gbc.writeMem(0x74aa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x1e21);
        EXPECT(gbc.pc(), 0x74ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 027F
        gbc.setState(0xc6b9, 0xc5ad, 0xf8c0, 0x2ebc, 0xa75c, 0x45e7, 0x1, 0x1);
        gbc.writeMem(0xc6b9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc5ad);
        EXPECT(gbc.pc(), 0xc6bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b9), 0xcb);
        EXPECT(gbc.readMem(0xc6ba), 0xa5);
        // CB A5 0281
        gbc.setState(0x18ae, 0x521d, 0x9c50, 0xf2d2, 0xd79d, 0x1148, 0x0, 0x0);
        gbc.writeMem(0x18ae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x521d);
        EXPECT(gbc.pc(), 0x18b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0282
        gbc.setState(0x7b33, 0x3da4, 0x4770, 0x5a77, 0xec2d, 0xd4c2, 0x1, 0x0);
        gbc.writeMem(0x7b33, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3da4);
        EXPECT(gbc.pc(), 0x7b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0283
        gbc.setState(0x2b9c, 0x5d1f, 0x7e50, 0xff41, 0xa82a, 0xb1b2, 0x0, 0x1);
        gbc.writeMem(0x2b9c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5d1f);
        EXPECT(gbc.pc(), 0x2b9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0284
        gbc.setState(0x6a70, 0x61e6, 0xe030, 0x1f58, 0x9fc2, 0x684f, 0x1, 0x0);
        gbc.writeMem(0x6a70, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x61e6);
        EXPECT(gbc.pc(), 0x6a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0285
        gbc.setState(0xb83b, 0xa3c4, 0x46f0, 0xafa0, 0xe347, 0xfad6, 0x1, 0x1);
        gbc.writeMem(0xb83b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xa3c4);
        EXPECT(gbc.pc(), 0xb83d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb83b), 0xcb);
        EXPECT(gbc.readMem(0xb83c), 0xa5);
        // CB A5 0286
        gbc.setState(0x9af4, 0xfd88, 0xf5f0, 0xe339, 0xe48f, 0x3ca2, 0x1, 0x0);
        gbc.writeMem(0x9af4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfd88);
        EXPECT(gbc.pc(), 0x9af6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9af4), 0xcb);
        EXPECT(gbc.readMem(0x9af5), 0xa5);
        // CB A5 0287
        gbc.setState(0xa1b, 0x3632, 0x2e70, 0x7028, 0x77b0, 0x6289, 0x0, 0x0);
        gbc.writeMem(0xa1b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3632);
        EXPECT(gbc.pc(), 0xa1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0288
        gbc.setState(0x67a8, 0xe42e, 0x31d0, 0xdc11, 0x5dc6, 0xcb8f, 0x0, 0x0);
        gbc.writeMem(0x67a8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe42e);
        EXPECT(gbc.pc(), 0x67aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0289
        gbc.setState(0x153e, 0xdfbb, 0x9910, 0xe635, 0x6f5c, 0x652c, 0x1, 0x1);
        gbc.writeMem(0x153e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdfbb);
        EXPECT(gbc.pc(), 0x1540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 028A
        gbc.setState(0xc597, 0x47c8, 0xfb40, 0xb780, 0xb7ee, 0x81a8, 0x1, 0x0);
        gbc.writeMem(0xc597, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x47c8);
        EXPECT(gbc.pc(), 0xc599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc597), 0xcb);
        EXPECT(gbc.readMem(0xc598), 0xa5);
        // CB A5 028B
        gbc.setState(0xcbfd, 0x3df6, 0x810, 0xeaf8, 0x7229, 0xd9f2, 0x0, 0x0);
        gbc.writeMem(0xcbfd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3df6);
        EXPECT(gbc.pc(), 0xcbff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbfd), 0xcb);
        EXPECT(gbc.readMem(0xcbfe), 0xa5);
        // CB A5 028C
        gbc.setState(0x29e8, 0x52ec, 0x6580, 0x64a4, 0xdc12, 0xae10, 0x0, 0x1);
        gbc.writeMem(0x29e8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x52ec);
        EXPECT(gbc.pc(), 0x29ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 028D
        gbc.setState(0x143, 0x295b, 0x5530, 0x3906, 0x8169, 0xbe25, 0x0, 0x0);
        gbc.writeMem(0x143, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x295b);
        EXPECT(gbc.pc(), 0x145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 028E
        gbc.setState(0x5294, 0x756, 0xab0, 0x6664, 0x4de3, 0xbe16, 0x0, 0x1);
        gbc.writeMem(0x5294, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x756);
        EXPECT(gbc.pc(), 0x5296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 028F
        gbc.setState(0xde6e, 0xfa55, 0xa780, 0xfe5c, 0x895c, 0x7d43, 0x1, 0x1);
        gbc.writeMem(0xde6e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xfa55);
        EXPECT(gbc.pc(), 0xde70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde6e), 0xcb);
        EXPECT(gbc.readMem(0xde6f), 0xa5);
        // CB A5 0290
        gbc.setState(0xb294, 0x5f9c, 0xacd0, 0x64dc, 0xc48f, 0x1812, 0x0, 0x0);
        gbc.writeMem(0xb294, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5f9c);
        EXPECT(gbc.pc(), 0xb296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb294), 0xcb);
        EXPECT(gbc.readMem(0xb295), 0xa5);
        // CB A5 0291
        gbc.setState(0x7bae, 0x61b4, 0xf70, 0x475, 0x13be, 0x53fa, 0x0, 0x0);
        gbc.writeMem(0x7bae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x61b4);
        EXPECT(gbc.pc(), 0x7bb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0292
        gbc.setState(0x650c, 0x71d6, 0xf350, 0x93cd, 0xb03e, 0xfcef, 0x1, 0x1);
        gbc.writeMem(0x650c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x71d6);
        EXPECT(gbc.pc(), 0x650e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0293
        gbc.setState(0x8443, 0xf4d7, 0x7920, 0x9ecc, 0xa2e9, 0x9663, 0x1, 0x0);
        gbc.writeMem(0x8443, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf4d7);
        EXPECT(gbc.pc(), 0x8445);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8443), 0xcb);
        EXPECT(gbc.readMem(0x8444), 0xa5);
        // CB A5 0294
        gbc.setState(0xafd5, 0xe5c9, 0xeaf0, 0x9618, 0x406, 0xb483, 0x0, 0x0);
        gbc.writeMem(0xafd5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xe5c9);
        EXPECT(gbc.pc(), 0xafd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd5), 0xcb);
        EXPECT(gbc.readMem(0xafd6), 0xa5);
        // CB A5 0295
        gbc.setState(0xbec9, 0x674c, 0x4670, 0x14b3, 0xbb4b, 0xe882, 0x0, 0x0);
        gbc.writeMem(0xbec9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x674c);
        EXPECT(gbc.pc(), 0xbecb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbec9), 0xcb);
        EXPECT(gbc.readMem(0xbeca), 0xa5);
        // CB A5 0296
        gbc.setState(0x37ff, 0x3a0a, 0xd6f0, 0x7840, 0xa70f, 0x98c5, 0x1, 0x0);
        gbc.writeMem(0x37ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3a0a);
        EXPECT(gbc.pc(), 0x3801);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0297
        gbc.setState(0xf85, 0xb271, 0xe2b0, 0xf1ad, 0x420f, 0x5f2b, 0x0, 0x1);
        gbc.writeMem(0xf85, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xb271);
        EXPECT(gbc.pc(), 0xf87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0298
        gbc.setState(0xa21, 0xa7aa, 0x900, 0x5369, 0x25fa, 0x249e, 0x0, 0x0);
        gbc.writeMem(0xa21, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa7aa);
        EXPECT(gbc.pc(), 0xa23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0299
        gbc.setState(0xf7a, 0x747a, 0x7aa0, 0x4613, 0x3f02, 0xfd28, 0x1, 0x0);
        gbc.writeMem(0xf7a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x747a);
        EXPECT(gbc.pc(), 0xf7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 029A
        gbc.setState(0xa9c6, 0x2620, 0x9b40, 0x211d, 0x63e, 0x317b, 0x1, 0x1);
        gbc.writeMem(0xa9c6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2620);
        EXPECT(gbc.pc(), 0xa9c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c6), 0xcb);
        EXPECT(gbc.readMem(0xa9c7), 0xa5);
        // CB A5 029B
        gbc.setState(0x9c84, 0x932c, 0xaff0, 0x6a94, 0x4fdc, 0xa723, 0x0, 0x1);
        gbc.writeMem(0x9c84, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x932c);
        EXPECT(gbc.pc(), 0x9c86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c84), 0xcb);
        EXPECT(gbc.readMem(0x9c85), 0xa5);
        // CB A5 029C
        gbc.setState(0x8160, 0x5da0, 0x5500, 0xda71, 0x6e52, 0x8815, 0x1, 0x1);
        gbc.writeMem(0x8160, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5da0);
        EXPECT(gbc.pc(), 0x8162);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8160), 0xcb);
        EXPECT(gbc.readMem(0x8161), 0xa5);
        // CB A5 029D
        gbc.setState(0x2fa0, 0xc2da, 0x2150, 0x5369, 0xf354, 0x44ee, 0x0, 0x0);
        gbc.writeMem(0x2fa0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc2da);
        EXPECT(gbc.pc(), 0x2fa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 029E
        gbc.setState(0x83f6, 0x339e, 0x6000, 0x21, 0xf9a6, 0xb0bb, 0x1, 0x0);
        gbc.writeMem(0x83f6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x339e);
        EXPECT(gbc.pc(), 0x83f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f6), 0xcb);
        EXPECT(gbc.readMem(0x83f7), 0xa5);
        // CB A5 029F
        gbc.setState(0x9d24, 0x1be0, 0x3d50, 0xecb8, 0x370e, 0xd589, 0x0, 0x0);
        gbc.writeMem(0x9d24, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1be0);
        EXPECT(gbc.pc(), 0x9d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d24), 0xcb);
        EXPECT(gbc.readMem(0x9d25), 0xa5);
        // CB A5 02A0
        gbc.setState(0x6573, 0xfda1, 0xd90, 0x2bab, 0x208, 0xebb, 0x1, 0x0);
        gbc.writeMem(0x6573, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfda1);
        EXPECT(gbc.pc(), 0x6575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02A1
        gbc.setState(0x1e5d, 0x470b, 0x22a0, 0x2e64, 0x952f, 0x7f1f, 0x1, 0x1);
        gbc.writeMem(0x1e5d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x470b);
        EXPECT(gbc.pc(), 0x1e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02A3
        gbc.setState(0xc6a9, 0xde83, 0xd7f0, 0xd120, 0xf672, 0x58f1, 0x1, 0x1);
        gbc.writeMem(0xc6a9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xde83);
        EXPECT(gbc.pc(), 0xc6ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a9), 0xcb);
        EXPECT(gbc.readMem(0xc6aa), 0xa5);
        // CB A5 02A4
        gbc.setState(0xa9d8, 0x3e57, 0xdb0, 0xe27, 0x3aa, 0xc3c9, 0x1, 0x0);
        gbc.writeMem(0xa9d8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x3e57);
        EXPECT(gbc.pc(), 0xa9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9d8), 0xcb);
        EXPECT(gbc.readMem(0xa9d9), 0xa5);
        // CB A5 02A5
        gbc.setState(0x5a09, 0x3efe, 0x1ae0, 0x2f65, 0x5f21, 0x871e, 0x0, 0x0);
        gbc.writeMem(0x5a09, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x3efe);
        EXPECT(gbc.pc(), 0x5a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02A6
        gbc.setState(0xd802, 0x67a4, 0x5dd0, 0x4976, 0xda03, 0xe337, 0x1, 0x1);
        gbc.writeMem(0xd802, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x67a4);
        EXPECT(gbc.pc(), 0xd804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd802), 0xcb);
        EXPECT(gbc.readMem(0xd803), 0xa5);
        // CB A5 02A7
        gbc.setState(0x4b30, 0x4e52, 0x8730, 0x6eb8, 0x209e, 0x7f7b, 0x0, 0x0);
        gbc.writeMem(0x4b30, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4e52);
        EXPECT(gbc.pc(), 0x4b32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02A8
        gbc.setState(0xb8bb, 0x5bc9, 0x2170, 0x3f5e, 0xabe9, 0x231d, 0x0, 0x1);
        gbc.writeMem(0xb8bb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5bc9);
        EXPECT(gbc.pc(), 0xb8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8bb), 0xcb);
        EXPECT(gbc.readMem(0xb8bc), 0xa5);
        // CB A5 02A9
        gbc.setState(0xae9e, 0x3632, 0x9530, 0x885e, 0x3504, 0x6572, 0x0, 0x1);
        gbc.writeMem(0xae9e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3632);
        EXPECT(gbc.pc(), 0xaea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae9e), 0xcb);
        EXPECT(gbc.readMem(0xae9f), 0xa5);
        // CB A5 02AA
        gbc.setState(0xa89b, 0xd313, 0x7360, 0x2ac8, 0x3e4e, 0xac49, 0x0, 0x1);
        gbc.writeMem(0xa89b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd313);
        EXPECT(gbc.pc(), 0xa89d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa89b), 0xcb);
        EXPECT(gbc.readMem(0xa89c), 0xa5);
        // CB A5 02AB
        gbc.setState(0x3888, 0xd8df, 0xfae0, 0xbe7d, 0x5d8a, 0xd248, 0x1, 0x1);
        gbc.writeMem(0x3888, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd8df);
        EXPECT(gbc.pc(), 0x388a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02AD
        gbc.setState(0x8fa, 0x4274, 0x4f40, 0x4407, 0xa740, 0x1fe0, 0x1, 0x1);
        gbc.writeMem(0x8fa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4274);
        EXPECT(gbc.pc(), 0x8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02AE
        gbc.setState(0x6dec, 0xd3c2, 0x1610, 0xa390, 0xde0b, 0x1acd, 0x0, 0x1);
        gbc.writeMem(0x6dec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd3c2);
        EXPECT(gbc.pc(), 0x6dee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02AF
        gbc.setState(0xe0af, 0x9756, 0x6980, 0x27f9, 0xc4c6, 0xff83, 0x0, 0x1);
        gbc.writeMem(0xe0af, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9756);
        EXPECT(gbc.pc(), 0xe0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0af), 0xcb);
        EXPECT(gbc.readMem(0xe0b0), 0xa5);
        // CB A5 02B0
        gbc.setState(0x97cc, 0x37e3, 0x13d0, 0x61f6, 0x7a5f, 0xc2c0, 0x1, 0x1);
        gbc.writeMem(0x97cc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x37e3);
        EXPECT(gbc.pc(), 0x97ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97cc), 0xcb);
        EXPECT(gbc.readMem(0x97cd), 0xa5);
        // CB A5 02B1
        gbc.setState(0xbb93, 0x82f5, 0x9790, 0xd416, 0x92d9, 0x6195, 0x0, 0x0);
        gbc.writeMem(0xbb93, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x82f5);
        EXPECT(gbc.pc(), 0xbb95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb93), 0xcb);
        EXPECT(gbc.readMem(0xbb94), 0xa5);
        // CB A5 02B2
        gbc.setState(0x2e4b, 0xa363, 0xf6c0, 0x2a63, 0x5642, 0xcb7f, 0x0, 0x0);
        gbc.writeMem(0x2e4b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa363);
        EXPECT(gbc.pc(), 0x2e4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02B3
        gbc.setState(0x72bc, 0x6732, 0x1910, 0x648b, 0x8533, 0xf4a0, 0x0, 0x0);
        gbc.writeMem(0x72bc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6732);
        EXPECT(gbc.pc(), 0x72be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02B4
        gbc.setState(0xdeb9, 0x5bf8, 0x3bd0, 0x520b, 0x125c, 0xe877, 0x0, 0x0);
        gbc.writeMem(0xdeb9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x5bf8);
        EXPECT(gbc.pc(), 0xdebb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb9), 0xcb);
        EXPECT(gbc.readMem(0xdeba), 0xa5);
        // CB A5 02B5
        gbc.setState(0xeb87, 0xea8, 0x8930, 0x2335, 0x98a7, 0x946e, 0x1, 0x0);
        gbc.writeMem(0xeb87, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xea8);
        EXPECT(gbc.pc(), 0xeb89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb87), 0xcb);
        EXPECT(gbc.readMem(0xeb88), 0xa5);
        // CB A5 02B6
        gbc.setState(0xb472, 0xd629, 0x3600, 0x8eb3, 0x8f26, 0x7804, 0x0, 0x0);
        gbc.writeMem(0xb472, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd629);
        EXPECT(gbc.pc(), 0xb474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb472), 0xcb);
        EXPECT(gbc.readMem(0xb473), 0xa5);
        // CB A5 02B8
        gbc.setState(0x6164, 0x5717, 0xc5d0, 0xc0cb, 0x2800, 0x839d, 0x0, 0x1);
        gbc.writeMem(0x6164, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5717);
        EXPECT(gbc.pc(), 0x6166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02B9
        gbc.setState(0x7171, 0xf8d5, 0x9bd0, 0xf839, 0x88d0, 0x4a2d, 0x1, 0x0);
        gbc.writeMem(0x7171, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xf8d5);
        EXPECT(gbc.pc(), 0x7173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02BA
        gbc.setState(0x8961, 0x2606, 0x3c60, 0x2a1e, 0xb26, 0x85e8, 0x0, 0x0);
        gbc.writeMem(0x8961, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2606);
        EXPECT(gbc.pc(), 0x8963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8961), 0xcb);
        EXPECT(gbc.readMem(0x8962), 0xa5);
        // CB A5 02BB
        gbc.setState(0xb6ec, 0x1ada, 0x3910, 0xa356, 0xfb14, 0x9412, 0x0, 0x1);
        gbc.writeMem(0xb6ec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1ada);
        EXPECT(gbc.pc(), 0xb6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ec), 0xcb);
        EXPECT(gbc.readMem(0xb6ed), 0xa5);
        // CB A5 02BC
        gbc.setState(0x76d0, 0xab6e, 0xf410, 0x866e, 0x6657, 0xc34a, 0x0, 0x1);
        gbc.writeMem(0x76d0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xab6e);
        EXPECT(gbc.pc(), 0x76d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02BD
        gbc.setState(0x45d7, 0x14f, 0x8770, 0xce6e, 0x8f81, 0xd78d, 0x0, 0x1);
        gbc.writeMem(0x45d7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x14f);
        EXPECT(gbc.pc(), 0x45d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02BE
        gbc.setState(0xb935, 0x8be8, 0x5d00, 0xda40, 0x2bb1, 0xf4e1, 0x0, 0x0);
        gbc.writeMem(0xb935, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x8be8);
        EXPECT(gbc.pc(), 0xb937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb935), 0xcb);
        EXPECT(gbc.readMem(0xb936), 0xa5);
        // CB A5 02BF
        gbc.setState(0xbdf6, 0xefbf, 0x84d0, 0x2633, 0x5211, 0x5d4f, 0x0, 0x0);
        gbc.writeMem(0xbdf6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xefbf);
        EXPECT(gbc.pc(), 0xbdf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf6), 0xcb);
        EXPECT(gbc.readMem(0xbdf7), 0xa5);
        // CB A5 02C0
        gbc.setState(0xa617, 0xbf08, 0xfa50, 0x5ea1, 0xcd44, 0x1892, 0x0, 0x0);
        gbc.writeMem(0xa617, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xbf08);
        EXPECT(gbc.pc(), 0xa619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa617), 0xcb);
        EXPECT(gbc.readMem(0xa618), 0xa5);
        // CB A5 02C1
        gbc.setState(0x6359, 0x657b, 0xb9c0, 0xbdc2, 0x10e0, 0x3c85, 0x0, 0x1);
        gbc.writeMem(0x6359, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x657b);
        EXPECT(gbc.pc(), 0x635b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02C2
        gbc.setState(0x8627, 0x23f0, 0x4740, 0xfcf2, 0xb9eb, 0xd11c, 0x0, 0x1);
        gbc.writeMem(0x8627, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x23f0);
        EXPECT(gbc.pc(), 0x8629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8627), 0xcb);
        EXPECT(gbc.readMem(0x8628), 0xa5);
        // CB A5 02C4
        gbc.setState(0xc95c, 0xe5b0, 0x4a90, 0x2733, 0x4b53, 0xb7c2, 0x0, 0x1);
        gbc.writeMem(0xc95c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe5b0);
        EXPECT(gbc.pc(), 0xc95e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc95c), 0xcb);
        EXPECT(gbc.readMem(0xc95d), 0xa5);
        // CB A5 02C5
        gbc.setState(0xd32b, 0xbf74, 0xb960, 0x60cc, 0xa355, 0x5d0a, 0x0, 0x1);
        gbc.writeMem(0xd32b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xbf74);
        EXPECT(gbc.pc(), 0xd32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32b), 0xcb);
        EXPECT(gbc.readMem(0xd32c), 0xa5);
        // CB A5 02C6
        gbc.setState(0x6d01, 0xed9e, 0x1eb0, 0x971a, 0xd0b4, 0xc299, 0x0, 0x0);
        gbc.writeMem(0x6d01, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xed9e);
        EXPECT(gbc.pc(), 0x6d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02C7
        gbc.setState(0x1aac, 0x3fae, 0x2f00, 0xe9b0, 0xfdeb, 0xe943, 0x0, 0x1);
        gbc.writeMem(0x1aac, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x3fae);
        EXPECT(gbc.pc(), 0x1aae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02C8
        gbc.setState(0xd922, 0x8610, 0xff90, 0xdf25, 0x2f4e, 0xddb4, 0x1, 0x0);
        gbc.writeMem(0xd922, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8610);
        EXPECT(gbc.pc(), 0xd924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd922), 0xcb);
        EXPECT(gbc.readMem(0xd923), 0xa5);
        // CB A5 02C9
        gbc.setState(0xe29a, 0xd717, 0xb470, 0xafcc, 0x2498, 0x3b42, 0x1, 0x0);
        gbc.writeMem(0xe29a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xd717);
        EXPECT(gbc.pc(), 0xe29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe29a), 0xcb);
        EXPECT(gbc.readMem(0xe29b), 0xa5);
        // CB A5 02CB
        gbc.setState(0xbe02, 0xe005, 0xf840, 0xbffc, 0x8e96, 0x3f9, 0x1, 0x0);
        gbc.writeMem(0xbe02, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xe005);
        EXPECT(gbc.pc(), 0xbe04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe02), 0xcb);
        EXPECT(gbc.readMem(0xbe03), 0xa5);
        // CB A5 02CC
        gbc.setState(0x39d4, 0xbbe4, 0xb940, 0xa1b7, 0x39e9, 0x8e80, 0x1, 0x0);
        gbc.writeMem(0x39d4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xbbe4);
        EXPECT(gbc.pc(), 0x39d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02CD
        gbc.setState(0x7c10, 0x98f4, 0x30f0, 0x339e, 0xff0f, 0xfe99, 0x1, 0x0);
        gbc.writeMem(0x7c10, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x98f4);
        EXPECT(gbc.pc(), 0x7c12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02CE
        gbc.setState(0xbd56, 0xa95b, 0x4750, 0x846f, 0xac0a, 0x8fea, 0x1, 0x0);
        gbc.writeMem(0xbd56, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa95b);
        EXPECT(gbc.pc(), 0xbd58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd56), 0xcb);
        EXPECT(gbc.readMem(0xbd57), 0xa5);
        // CB A5 02CF
        gbc.setState(0xc4e1, 0x2db1, 0x24b0, 0xda, 0x767e, 0xbd5e, 0x1, 0x1);
        gbc.writeMem(0xc4e1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x2db1);
        EXPECT(gbc.pc(), 0xc4e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4e1), 0xcb);
        EXPECT(gbc.readMem(0xc4e2), 0xa5);
        // CB A5 02D0
        gbc.setState(0xd1a3, 0xc36c, 0xedb0, 0x974f, 0x7314, 0xebb8, 0x0, 0x0);
        gbc.writeMem(0xd1a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc36c);
        EXPECT(gbc.pc(), 0xd1a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1a3), 0xcb);
        EXPECT(gbc.readMem(0xd1a4), 0xa5);
        // CB A5 02D2
        gbc.setState(0x45e0, 0xc51e, 0x6320, 0xce09, 0x1cfa, 0x2d46, 0x0, 0x0);
        gbc.writeMem(0x45e0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc51e);
        EXPECT(gbc.pc(), 0x45e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02D4
        gbc.setState(0x259f, 0xaf34, 0x4e50, 0xaaad, 0xfd31, 0x2f20, 0x1, 0x0);
        gbc.writeMem(0x259f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xaf34);
        EXPECT(gbc.pc(), 0x25a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02D5
        gbc.setState(0x9993, 0xd6e1, 0xc8a0, 0x43a5, 0x5485, 0x9bd8, 0x1, 0x1);
        gbc.writeMem(0x9993, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd6e1);
        EXPECT(gbc.pc(), 0x9995);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9993), 0xcb);
        EXPECT(gbc.readMem(0x9994), 0xa5);
        // CB A5 02D6
        gbc.setState(0x7415, 0x23b1, 0x1220, 0x49e1, 0xa7c, 0xc1af, 0x0, 0x1);
        gbc.writeMem(0x7415, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x23b1);
        EXPECT(gbc.pc(), 0x7417);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02D7
        gbc.setState(0xb066, 0xe4fd, 0x8010, 0x78c8, 0x7717, 0xc069, 0x0, 0x0);
        gbc.writeMem(0xb066, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe4fd);
        EXPECT(gbc.pc(), 0xb068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb066), 0xcb);
        EXPECT(gbc.readMem(0xb067), 0xa5);
        // CB A5 02D8
        gbc.setState(0x8890, 0xb560, 0x4890, 0xa789, 0x6d93, 0x42b3, 0x0, 0x0);
        gbc.writeMem(0x8890, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb560);
        EXPECT(gbc.pc(), 0x8892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8890), 0xcb);
        EXPECT(gbc.readMem(0x8891), 0xa5);
        // CB A5 02D9
        gbc.setState(0xad74, 0xd664, 0x5090, 0x8c9e, 0xc31d, 0x7e7d, 0x1, 0x0);
        gbc.writeMem(0xad74, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xd664);
        EXPECT(gbc.pc(), 0xad76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad74), 0xcb);
        EXPECT(gbc.readMem(0xad75), 0xa5);
        // CB A5 02DB
        gbc.setState(0x7e87, 0x3287, 0xdb60, 0x48f9, 0xaf67, 0xa8fd, 0x0, 0x0);
        gbc.writeMem(0x7e87, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3287);
        EXPECT(gbc.pc(), 0x7e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02DC
        gbc.setState(0xa499, 0xcd15, 0x6c20, 0xd12e, 0xd522, 0xaf6a, 0x0, 0x0);
        gbc.writeMem(0xa499, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xcd15);
        EXPECT(gbc.pc(), 0xa49b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa499), 0xcb);
        EXPECT(gbc.readMem(0xa49a), 0xa5);
        // CB A5 02DD
        gbc.setState(0xa0d3, 0x96d8, 0x90b0, 0x714e, 0xaf80, 0x5083, 0x0, 0x1);
        gbc.writeMem(0xa0d3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x96d8);
        EXPECT(gbc.pc(), 0xa0d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0d3), 0xcb);
        EXPECT(gbc.readMem(0xa0d4), 0xa5);
        // CB A5 02DE
        gbc.setState(0x3838, 0xc2ff, 0xcf50, 0x956, 0x1c52, 0x8e03, 0x1, 0x1);
        gbc.writeMem(0x3838, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc2ff);
        EXPECT(gbc.pc(), 0x383a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02DF
        gbc.setState(0xc39b, 0xa1bb, 0xd20, 0xd6c4, 0xf8b1, 0xabf9, 0x1, 0x0);
        gbc.writeMem(0xc39b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa1bb);
        EXPECT(gbc.pc(), 0xc39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39b), 0xcb);
        EXPECT(gbc.readMem(0xc39c), 0xa5);
        // CB A5 02E0
        gbc.setState(0x5aaa, 0xfa53, 0x1d50, 0x80e5, 0x5b62, 0x5d0a, 0x0, 0x0);
        gbc.writeMem(0x5aaa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfa53);
        EXPECT(gbc.pc(), 0x5aac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02E1
        gbc.setState(0x531b, 0x8d28, 0x54f0, 0xb039, 0x85da, 0x7f7, 0x1, 0x1);
        gbc.writeMem(0x531b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x8d28);
        EXPECT(gbc.pc(), 0x531d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02E3
        gbc.setState(0x485, 0xa9f, 0x4310, 0x6c1b, 0xd98f, 0xae39, 0x0, 0x1);
        gbc.writeMem(0x485, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa9f);
        EXPECT(gbc.pc(), 0x487);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02E4
        gbc.setState(0x9361, 0x360e, 0xfb0, 0x6d8f, 0x83f7, 0xff2c, 0x1, 0x1);
        gbc.writeMem(0x9361, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x360e);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9361), 0xcb);
        EXPECT(gbc.readMem(0x9362), 0xa5);
        // CB A5 02E5
        gbc.setState(0x4b1d, 0xc3f2, 0xbd90, 0xfcaf, 0x3f86, 0x32ae, 0x1, 0x0);
        gbc.writeMem(0x4b1d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc3f2);
        EXPECT(gbc.pc(), 0x4b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02E6
        gbc.setState(0x750c, 0x9f8b, 0x9360, 0x2d35, 0x6eb5, 0x721b, 0x1, 0x0);
        gbc.writeMem(0x750c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9f8b);
        EXPECT(gbc.pc(), 0x750e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02E7
        gbc.setState(0x7857, 0x5e79, 0xa860, 0x5abf, 0xa38b, 0xfb87, 0x0, 0x0);
        gbc.writeMem(0x7857, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5e79);
        EXPECT(gbc.pc(), 0x7859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02E8
        gbc.setState(0x5764, 0x12bb, 0x46a0, 0x7638, 0x706c, 0x3683, 0x1, 0x1);
        gbc.writeMem(0x5764, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x12bb);
        EXPECT(gbc.pc(), 0x5766);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02E9
        gbc.setState(0x78db, 0xee86, 0x7290, 0x6459, 0x8824, 0x893e, 0x0, 0x0);
        gbc.writeMem(0x78db, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xee86);
        EXPECT(gbc.pc(), 0x78dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02EA
        gbc.setState(0x651f, 0x152b, 0x1610, 0xd387, 0x3fe8, 0x840e, 0x0, 0x1);
        gbc.writeMem(0x651f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x152b);
        EXPECT(gbc.pc(), 0x6521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02EB
        gbc.setState(0xcc1c, 0x41bf, 0x1ab0, 0x69f8, 0xb6f2, 0x9b4e, 0x0, 0x1);
        gbc.writeMem(0xcc1c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x41bf);
        EXPECT(gbc.pc(), 0xcc1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc1c), 0xcb);
        EXPECT(gbc.readMem(0xcc1d), 0xa5);
        // CB A5 02EC
        gbc.setState(0x473d, 0xd09f, 0x93d0, 0x3b8, 0x40d6, 0x2455, 0x0, 0x0);
        gbc.writeMem(0x473d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd09f);
        EXPECT(gbc.pc(), 0x473f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02ED
        gbc.setState(0x5435, 0x2340, 0xa6c0, 0x80e0, 0xffde, 0xab43, 0x0, 0x0);
        gbc.writeMem(0x5435, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x2340);
        EXPECT(gbc.pc(), 0x5437);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02EE
        gbc.setState(0x13ff, 0xba3d, 0xb710, 0x7f5c, 0x342, 0xd330, 0x0, 0x0);
        gbc.writeMem(0x13ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xba3d);
        EXPECT(gbc.pc(), 0x1401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02EF
        gbc.setState(0x2433, 0xbdbe, 0x1bf0, 0xcc99, 0xfc2f, 0x25db, 0x1, 0x1);
        gbc.writeMem(0x2433, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xbdbe);
        EXPECT(gbc.pc(), 0x2435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02F0
        gbc.setState(0x7b5, 0x12ea, 0x2be0, 0xd75a, 0x85e, 0x3072, 0x1, 0x1);
        gbc.writeMem(0x7b5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x12ea);
        EXPECT(gbc.pc(), 0x7b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02F1
        gbc.setState(0x31e1, 0xf469, 0xd4b0, 0xc3ea, 0x3bb2, 0x6d61, 0x0, 0x0);
        gbc.writeMem(0x31e1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf469);
        EXPECT(gbc.pc(), 0x31e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02F2
        gbc.setState(0x1a5b, 0xdeb2, 0xa060, 0x5db6, 0x206f, 0x7a7b, 0x0, 0x0);
        gbc.writeMem(0x1a5b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xdeb2);
        EXPECT(gbc.pc(), 0x1a5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02F3
        gbc.setState(0x8418, 0x9ea8, 0x8e40, 0xda0, 0x5f60, 0x636c, 0x0, 0x1);
        gbc.writeMem(0x8418, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9ea8);
        EXPECT(gbc.pc(), 0x841a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8418), 0xcb);
        EXPECT(gbc.readMem(0x8419), 0xa5);
        // CB A5 02F4
        gbc.setState(0xdb4b, 0x1b33, 0x8dd0, 0x9ae4, 0x4141, 0x3a85, 0x1, 0x1);
        gbc.writeMem(0xdb4b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x1b33);
        EXPECT(gbc.pc(), 0xdb4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb4b), 0xcb);
        EXPECT(gbc.readMem(0xdb4c), 0xa5);
        // CB A5 02F5
        gbc.setState(0x98e3, 0x7424, 0x45c0, 0x860a, 0xcda7, 0x1647, 0x0, 0x1);
        gbc.writeMem(0x98e3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x7424);
        EXPECT(gbc.pc(), 0x98e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98e3), 0xcb);
        EXPECT(gbc.readMem(0x98e4), 0xa5);
        // CB A5 02F6
        gbc.setState(0x30d8, 0x7153, 0x9010, 0xa890, 0x19f0, 0x3895, 0x0, 0x0);
        gbc.writeMem(0x30d8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7153);
        EXPECT(gbc.pc(), 0x30da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02F7
        gbc.setState(0xbefa, 0xf9a7, 0x1bc0, 0x4e99, 0xf4e7, 0xa463, 0x1, 0x0);
        gbc.writeMem(0xbefa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf9a7);
        EXPECT(gbc.pc(), 0xbefc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbefa), 0xcb);
        EXPECT(gbc.readMem(0xbefb), 0xa5);
        // CB A5 02F8
        gbc.setState(0xe079, 0xbb3b, 0x9710, 0xb7c6, 0xdb3, 0x495e, 0x1, 0x0);
        gbc.writeMem(0xe079, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbb3b);
        EXPECT(gbc.pc(), 0xe07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe079), 0xcb);
        EXPECT(gbc.readMem(0xe07a), 0xa5);
        // CB A5 02F9
        gbc.setState(0x772f, 0x3fae, 0x3ca0, 0x30bf, 0x26fd, 0xa6f4, 0x0, 0x1);
        gbc.writeMem(0x772f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3fae);
        EXPECT(gbc.pc(), 0x7731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02FA
        gbc.setState(0x6e44, 0x1539, 0x7f30, 0x28cc, 0x26b, 0xd48b, 0x1, 0x1);
        gbc.writeMem(0x6e44, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1539);
        EXPECT(gbc.pc(), 0x6e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 02FB
        gbc.setState(0x5464, 0x3428, 0xb580, 0x3d19, 0x19c, 0x5441, 0x0, 0x1);
        gbc.writeMem(0x5464, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3428);
        EXPECT(gbc.pc(), 0x5466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02FC
        gbc.setState(0x5fde, 0xa766, 0xe6a0, 0x4760, 0x26fb, 0x78e8, 0x1, 0x1);
        gbc.writeMem(0x5fde, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa766);
        EXPECT(gbc.pc(), 0x5fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 02FE
        gbc.setState(0xe675, 0x5e95, 0x9be0, 0xccbf, 0x9cde, 0x3df, 0x1, 0x0);
        gbc.writeMem(0xe675, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5e95);
        EXPECT(gbc.pc(), 0xe677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe675), 0xcb);
        EXPECT(gbc.readMem(0xe676), 0xa5);
        // CB A5 02FF
        gbc.setState(0x1b40, 0xf672, 0xe850, 0x4b46, 0xc2c1, 0x68c4, 0x0, 0x1);
        gbc.writeMem(0x1b40, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf672);
        EXPECT(gbc.pc(), 0x1b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0301
        gbc.setState(0x6d38, 0x7825, 0x4630, 0xb2ad, 0x1e38, 0xa8ea, 0x0, 0x0);
        gbc.writeMem(0x6d38, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0x6d3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0302
        gbc.setState(0x6cb1, 0x2ef7, 0x15b0, 0x6599, 0xb04e, 0xd0e7, 0x1, 0x0);
        gbc.writeMem(0x6cb1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2ef7);
        EXPECT(gbc.pc(), 0x6cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0303
        gbc.setState(0x62c2, 0xc260, 0xfb00, 0xc538, 0xe810, 0x1558, 0x1, 0x0);
        gbc.writeMem(0x62c2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc260);
        EXPECT(gbc.pc(), 0x62c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0304
        gbc.setState(0xad52, 0x1743, 0x6ba0, 0x7031, 0x24b9, 0x131a, 0x0, 0x0);
        gbc.writeMem(0xad52, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1743);
        EXPECT(gbc.pc(), 0xad54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad52), 0xcb);
        EXPECT(gbc.readMem(0xad53), 0xa5);
        // CB A5 0307
        gbc.setState(0x5cc, 0x8a8e, 0x7340, 0x6016, 0x43b, 0xa782, 0x1, 0x1);
        gbc.writeMem(0x5cc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x8a8e);
        EXPECT(gbc.pc(), 0x5ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0308
        gbc.setState(0xa5fd, 0x4afa, 0x49c0, 0x4d73, 0x7d5, 0xbb0, 0x1, 0x0);
        gbc.writeMem(0xa5fd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4afa);
        EXPECT(gbc.pc(), 0xa5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fd), 0xcb);
        EXPECT(gbc.readMem(0xa5fe), 0xa5);
        // CB A5 0309
        gbc.setState(0x534d, 0x7a01, 0xfe30, 0xd254, 0xb142, 0x4fdb, 0x0, 0x1);
        gbc.writeMem(0x534d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7a01);
        EXPECT(gbc.pc(), 0x534f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 030A
        gbc.setState(0x659c, 0x1f85, 0x3800, 0x4cf7, 0xe5f7, 0xa6a, 0x1, 0x0);
        gbc.writeMem(0x659c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x1f85);
        EXPECT(gbc.pc(), 0x659e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 030B
        gbc.setState(0x879f, 0xf664, 0x19f0, 0x5f1, 0x575b, 0xc09a, 0x0, 0x0);
        gbc.writeMem(0x879f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf664);
        EXPECT(gbc.pc(), 0x87a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x879f), 0xcb);
        EXPECT(gbc.readMem(0x87a0), 0xa5);
        // CB A5 030C
        gbc.setState(0x42d1, 0xbf9, 0xe770, 0xb6a2, 0xf764, 0xe503, 0x0, 0x1);
        gbc.writeMem(0x42d1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbf9);
        EXPECT(gbc.pc(), 0x42d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 030D
        gbc.setState(0x59ba, 0xd0b8, 0x3cc0, 0xbf93, 0x5240, 0xc608, 0x1, 0x0);
        gbc.writeMem(0x59ba, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd0b8);
        EXPECT(gbc.pc(), 0x59bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 030E
        gbc.setState(0x4f60, 0xff0e, 0xf20, 0xafd4, 0x96f7, 0x84da, 0x0, 0x0);
        gbc.writeMem(0x4f60, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xff0e);
        EXPECT(gbc.pc(), 0x4f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 030F
        gbc.setState(0x2560, 0x6dfe, 0x6fd0, 0x5ced, 0x119, 0xefdb, 0x0, 0x1);
        gbc.writeMem(0x2560, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6dfe);
        EXPECT(gbc.pc(), 0x2562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0310
        gbc.setState(0xe1aa, 0x952e, 0x9e10, 0x3ac2, 0xc715, 0x63b5, 0x1, 0x0);
        gbc.writeMem(0xe1aa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x952e);
        EXPECT(gbc.pc(), 0xe1ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1aa), 0xcb);
        EXPECT(gbc.readMem(0xe1ab), 0xa5);
        // CB A5 0311
        gbc.setState(0x4918, 0x15a, 0x3d60, 0x814f, 0x1662, 0x2c90, 0x1, 0x0);
        gbc.writeMem(0x4918, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x15a);
        EXPECT(gbc.pc(), 0x491a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0312
        gbc.setState(0xa30f, 0x6947, 0xf0f0, 0xff7c, 0x7091, 0xeb8, 0x0, 0x0);
        gbc.writeMem(0xa30f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x6947);
        EXPECT(gbc.pc(), 0xa311);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa30f), 0xcb);
        EXPECT(gbc.readMem(0xa310), 0xa5);
        // CB A5 0313
        gbc.setState(0xc998, 0xb46b, 0xc40, 0xd5f8, 0x640a, 0x6405, 0x1, 0x0);
        gbc.writeMem(0xc998, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb46b);
        EXPECT(gbc.pc(), 0xc99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc998), 0xcb);
        EXPECT(gbc.readMem(0xc999), 0xa5);
        // CB A5 0314
        gbc.setState(0x90a2, 0x638, 0x5790, 0xb2c2, 0x6cd5, 0x7d, 0x1, 0x0);
        gbc.writeMem(0x90a2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x638);
        EXPECT(gbc.pc(), 0x90a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90a2), 0xcb);
        EXPECT(gbc.readMem(0x90a3), 0xa5);
        // CB A5 0315
        gbc.setState(0x3712, 0x4244, 0xc940, 0x40ae, 0xbab1, 0x76aa, 0x1, 0x0);
        gbc.writeMem(0x3712, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4244);
        EXPECT(gbc.pc(), 0x3714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0316
        gbc.setState(0xcb17, 0x3841, 0x1800, 0xb2c0, 0x516f, 0xba83, 0x0, 0x1);
        gbc.writeMem(0xcb17, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3841);
        EXPECT(gbc.pc(), 0xcb19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb17), 0xcb);
        EXPECT(gbc.readMem(0xcb18), 0xa5);
        // CB A5 0317
        gbc.setState(0x964e, 0xda18, 0x13a0, 0x92df, 0x1121, 0x15e6, 0x1, 0x0);
        gbc.writeMem(0x964e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xda18);
        EXPECT(gbc.pc(), 0x9650);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x964e), 0xcb);
        EXPECT(gbc.readMem(0x964f), 0xa5);
        // CB A5 0318
        gbc.setState(0xa7e1, 0x5e6d, 0xc4a0, 0xa90b, 0x972d, 0x36b0, 0x1, 0x1);
        gbc.writeMem(0xa7e1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5e6d);
        EXPECT(gbc.pc(), 0xa7e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7e1), 0xcb);
        EXPECT(gbc.readMem(0xa7e2), 0xa5);
        // CB A5 0319
        gbc.setState(0x81e9, 0xc86a, 0xfc60, 0xd2a, 0x549f, 0x4b8e, 0x0, 0x1);
        gbc.writeMem(0x81e9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc86a);
        EXPECT(gbc.pc(), 0x81eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81e9), 0xcb);
        EXPECT(gbc.readMem(0x81ea), 0xa5);
        // CB A5 031A
        gbc.setState(0x31c7, 0x1928, 0x5680, 0x3369, 0xb27d, 0x892c, 0x0, 0x0);
        gbc.writeMem(0x31c7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1928);
        EXPECT(gbc.pc(), 0x31c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 031B
        gbc.setState(0xefad, 0xee2c, 0x8650, 0x3d6e, 0x2135, 0xebaf, 0x0, 0x0);
        gbc.writeMem(0xefad, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xee2c);
        EXPECT(gbc.pc(), 0xefaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefad), 0xcb);
        EXPECT(gbc.readMem(0xefae), 0xa5);
        // CB A5 031C
        gbc.setState(0xdd77, 0x4c9d, 0xbce0, 0x5b91, 0x13c4, 0x6307, 0x0, 0x0);
        gbc.writeMem(0xdd77, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x4c9d);
        EXPECT(gbc.pc(), 0xdd79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd77), 0xcb);
        EXPECT(gbc.readMem(0xdd78), 0xa5);
        // CB A5 031E
        gbc.setState(0x47f5, 0x8420, 0xa7e0, 0xe74a, 0x4335, 0xd4d2, 0x0, 0x1);
        gbc.writeMem(0x47f5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8420);
        EXPECT(gbc.pc(), 0x47f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 031F
        gbc.setState(0x70f, 0x5773, 0x7070, 0x9141, 0x4230, 0x1eeb, 0x1, 0x0);
        gbc.writeMem(0x70f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5773);
        EXPECT(gbc.pc(), 0x711);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0320
        gbc.setState(0x6aa8, 0x4368, 0x8a90, 0x6e03, 0x6f30, 0xb937, 0x0, 0x1);
        gbc.writeMem(0x6aa8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4368);
        EXPECT(gbc.pc(), 0x6aaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0321
        gbc.setState(0xdd35, 0x9301, 0x19a0, 0xb8f6, 0xc123, 0x3fd8, 0x0, 0x1);
        gbc.writeMem(0xdd35, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9301);
        EXPECT(gbc.pc(), 0xdd37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd35), 0xcb);
        EXPECT(gbc.readMem(0xdd36), 0xa5);
        // CB A5 0322
        gbc.setState(0x9604, 0x90f5, 0x3880, 0x550f, 0x8f5, 0xce7e, 0x0, 0x1);
        gbc.writeMem(0x9604, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x90f5);
        EXPECT(gbc.pc(), 0x9606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9604), 0xcb);
        EXPECT(gbc.readMem(0x9605), 0xa5);
        // CB A5 0323
        gbc.setState(0x3912, 0xf5bb, 0x84c0, 0x7a31, 0x30c0, 0x4099, 0x0, 0x0);
        gbc.writeMem(0x3912, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf5bb);
        EXPECT(gbc.pc(), 0x3914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0324
        gbc.setState(0xbeac, 0xd5ba, 0x2470, 0xba39, 0xbe60, 0xeecf, 0x1, 0x0);
        gbc.writeMem(0xbeac, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd5ba);
        EXPECT(gbc.pc(), 0xbeae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeac), 0xcb);
        EXPECT(gbc.readMem(0xbead), 0xa5);
        // CB A5 0325
        gbc.setState(0x8707, 0x8265, 0x5c10, 0xbb56, 0xab14, 0x870a, 0x0, 0x0);
        gbc.writeMem(0x8707, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8265);
        EXPECT(gbc.pc(), 0x8709);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8707), 0xcb);
        EXPECT(gbc.readMem(0x8708), 0xa5);
        // CB A5 0326
        gbc.setState(0x5201, 0x4404, 0xb530, 0x66e1, 0x20e4, 0x5356, 0x1, 0x0);
        gbc.writeMem(0x5201, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4404);
        EXPECT(gbc.pc(), 0x5203);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0327
        gbc.setState(0x92c6, 0x5ab5, 0x6530, 0x8f99, 0x165e, 0x6a82, 0x1, 0x1);
        gbc.writeMem(0x92c6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5ab5);
        EXPECT(gbc.pc(), 0x92c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c6), 0xcb);
        EXPECT(gbc.readMem(0x92c7), 0xa5);
        // CB A5 0328
        gbc.setState(0x8f3c, 0xcb00, 0x76e0, 0xb64e, 0xf867, 0xfeb1, 0x0, 0x0);
        gbc.writeMem(0x8f3c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xcb00);
        EXPECT(gbc.pc(), 0x8f3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f3c), 0xcb);
        EXPECT(gbc.readMem(0x8f3d), 0xa5);
        // CB A5 0329
        gbc.setState(0x6601, 0xa005, 0x4f30, 0x6a9f, 0xde11, 0x232f, 0x1, 0x0);
        gbc.writeMem(0x6601, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xa005);
        EXPECT(gbc.pc(), 0x6603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 032A
        gbc.setState(0x382b, 0xe1fa, 0xf8d0, 0xf196, 0xf9f8, 0x8c91, 0x0, 0x0);
        gbc.writeMem(0x382b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe1fa);
        EXPECT(gbc.pc(), 0x382d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 032B
        gbc.setState(0x59ba, 0x2726, 0x1be0, 0x649b, 0x9184, 0xec, 0x0, 0x1);
        gbc.writeMem(0x59ba, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x2726);
        EXPECT(gbc.pc(), 0x59bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 032C
        gbc.setState(0x6d1a, 0x73a7, 0xe820, 0x2990, 0x52c3, 0x17a9, 0x1, 0x0);
        gbc.writeMem(0x6d1a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x73a7);
        EXPECT(gbc.pc(), 0x6d1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 032D
        gbc.setState(0x71e, 0xdd30, 0xf8d0, 0x7b0c, 0x83c5, 0x8003, 0x0, 0x1);
        gbc.writeMem(0x71e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xdd30);
        EXPECT(gbc.pc(), 0x720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 032E
        gbc.setState(0x6bf9, 0x963, 0x57b0, 0xab33, 0xdf16, 0xc5ec, 0x0, 0x1);
        gbc.writeMem(0x6bf9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x963);
        EXPECT(gbc.pc(), 0x6bfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 032F
        gbc.setState(0x9b69, 0xddb7, 0xf00, 0xb406, 0x7536, 0xdb24, 0x0, 0x1);
        gbc.writeMem(0x9b69, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xddb7);
        EXPECT(gbc.pc(), 0x9b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b69), 0xcb);
        EXPECT(gbc.readMem(0x9b6a), 0xa5);
        // CB A5 0331
        gbc.setState(0x3d67, 0x928c, 0x8700, 0xab2c, 0x94d6, 0xea86, 0x0, 0x1);
        gbc.writeMem(0x3d67, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x928c);
        EXPECT(gbc.pc(), 0x3d69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0332
        gbc.setState(0x60e5, 0x361e, 0xb150, 0xfdd2, 0x8bc6, 0xcfbc, 0x1, 0x0);
        gbc.writeMem(0x60e5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x361e);
        EXPECT(gbc.pc(), 0x60e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0333
        gbc.setState(0x99f3, 0xc572, 0xa1e0, 0xb1ad, 0x2e75, 0xe2e8, 0x0, 0x0);
        gbc.writeMem(0x99f3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc572);
        EXPECT(gbc.pc(), 0x99f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f3), 0xcb);
        EXPECT(gbc.readMem(0x99f4), 0xa5);
        // CB A5 0334
        gbc.setState(0x15f7, 0xd90a, 0x6800, 0xc2fc, 0x187, 0xbd76, 0x1, 0x1);
        gbc.writeMem(0x15f7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd90a);
        EXPECT(gbc.pc(), 0x15f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0335
        gbc.setState(0xaca1, 0x5e93, 0x11f0, 0x8a96, 0x8375, 0xbef6, 0x1, 0x0);
        gbc.writeMem(0xaca1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5e93);
        EXPECT(gbc.pc(), 0xaca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaca1), 0xcb);
        EXPECT(gbc.readMem(0xaca2), 0xa5);
        // CB A5 0336
        gbc.setState(0x9a81, 0xd1be, 0x6a70, 0x6583, 0x9b77, 0x5e94, 0x0, 0x0);
        gbc.writeMem(0x9a81, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd1be);
        EXPECT(gbc.pc(), 0x9a83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a81), 0xcb);
        EXPECT(gbc.readMem(0x9a82), 0xa5);
        // CB A5 0337
        gbc.setState(0x1ffe, 0x7741, 0x6a70, 0x6506, 0xfe2d, 0xf4ce, 0x1, 0x0);
        gbc.writeMem(0x1ffe, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7741);
        EXPECT(gbc.pc(), 0x2000);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0338
        gbc.setState(0x671a, 0x3bfb, 0x8640, 0xafc8, 0x5f9, 0xd5e5, 0x1, 0x0);
        gbc.writeMem(0x671a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3bfb);
        EXPECT(gbc.pc(), 0x671c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 033A
        gbc.setState(0x6053, 0xc29c, 0x9be0, 0xf2ab, 0xc6f5, 0xbfab, 0x0, 0x1);
        gbc.writeMem(0x6053, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc29c);
        EXPECT(gbc.pc(), 0x6055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 033B
        gbc.setState(0xb350, 0x1340, 0xf300, 0x904a, 0xb844, 0x3462, 0x0, 0x1);
        gbc.writeMem(0xb350, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1340);
        EXPECT(gbc.pc(), 0xb352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb350), 0xcb);
        EXPECT(gbc.readMem(0xb351), 0xa5);
        // CB A5 033C
        gbc.setState(0xe416, 0xc867, 0xa890, 0x6b57, 0xf87a, 0x7459, 0x0, 0x0);
        gbc.writeMem(0xe416, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc867);
        EXPECT(gbc.pc(), 0xe418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe416), 0xcb);
        EXPECT(gbc.readMem(0xe417), 0xa5);
        // CB A5 033D
        gbc.setState(0x5b10, 0xef79, 0x9880, 0xa0eb, 0xb9aa, 0xf85d, 0x0, 0x1);
        gbc.writeMem(0x5b10, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xef79);
        EXPECT(gbc.pc(), 0x5b12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 033E
        gbc.setState(0xdc32, 0x53af, 0xaf60, 0xc696, 0x2254, 0x1b7e, 0x0, 0x1);
        gbc.writeMem(0xdc32, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x53af);
        EXPECT(gbc.pc(), 0xdc34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc32), 0xcb);
        EXPECT(gbc.readMem(0xdc33), 0xa5);
        // CB A5 033F
        gbc.setState(0x5e50, 0x82e9, 0x8e00, 0x5c70, 0x69c1, 0x9888, 0x0, 0x0);
        gbc.writeMem(0x5e50, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x82e9);
        EXPECT(gbc.pc(), 0x5e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0340
        gbc.setState(0x25c9, 0xefc2, 0x10a0, 0xd283, 0x915b, 0x6d43, 0x1, 0x0);
        gbc.writeMem(0x25c9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xefc2);
        EXPECT(gbc.pc(), 0x25cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0341
        gbc.setState(0x2de5, 0x2fdc, 0xb440, 0x681b, 0xd350, 0xd8, 0x1, 0x0);
        gbc.writeMem(0x2de5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2fdc);
        EXPECT(gbc.pc(), 0x2de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0342
        gbc.setState(0x2580, 0xf8e1, 0x7b70, 0xe62b, 0x7674, 0x2e65, 0x0, 0x0);
        gbc.writeMem(0x2580, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xf8e1);
        EXPECT(gbc.pc(), 0x2582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0343
        gbc.setState(0x83eb, 0xe815, 0x9fd0, 0xaae7, 0xf8ef, 0xdb3a, 0x0, 0x0);
        gbc.writeMem(0x83eb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe815);
        EXPECT(gbc.pc(), 0x83ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83eb), 0xcb);
        EXPECT(gbc.readMem(0x83ec), 0xa5);
        // CB A5 0344
        gbc.setState(0x39ff, 0xb3b6, 0xb670, 0xc2cc, 0xbb3e, 0x38be, 0x0, 0x1);
        gbc.writeMem(0x39ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb3b6);
        EXPECT(gbc.pc(), 0x3a01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0345
        gbc.setState(0x34b, 0xc15a, 0x79e0, 0x2691, 0x8059, 0x4d41, 0x0, 0x0);
        gbc.writeMem(0x34b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc15a);
        EXPECT(gbc.pc(), 0x34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0346
        gbc.setState(0xef2, 0xe55b, 0x38e0, 0x3ca3, 0xa6a4, 0xfc66, 0x0, 0x0);
        gbc.writeMem(0xef2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe55b);
        EXPECT(gbc.pc(), 0xef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0347
        gbc.setState(0x6af4, 0xb4c4, 0x9760, 0x1f0, 0x5483, 0xb2ff, 0x1, 0x1);
        gbc.writeMem(0x6af4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb4c4);
        EXPECT(gbc.pc(), 0x6af6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0348
        gbc.setState(0x56a3, 0x6031, 0xfd00, 0xfc5c, 0xd23a, 0x77cd, 0x0, 0x0);
        gbc.writeMem(0x56a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6031);
        EXPECT(gbc.pc(), 0x56a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0349
        gbc.setState(0x5601, 0xc44a, 0xeca0, 0xba92, 0x560f, 0x4fe6, 0x1, 0x1);
        gbc.writeMem(0x5601, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xc44a);
        EXPECT(gbc.pc(), 0x5603);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 034B
        gbc.setState(0x1ebd, 0x55b2, 0xa860, 0x8374, 0x5e0b, 0xf05b, 0x0, 0x1);
        gbc.writeMem(0x1ebd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x55b2);
        EXPECT(gbc.pc(), 0x1ebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 034C
        gbc.setState(0x6339, 0x46af, 0x4090, 0x6a94, 0xfa15, 0x11a1, 0x0, 0x0);
        gbc.writeMem(0x6339, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x46af);
        EXPECT(gbc.pc(), 0x633b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 034D
        gbc.setState(0xe444, 0x6db3, 0x1420, 0x19eb, 0x143a, 0x4cb4, 0x0, 0x0);
        gbc.writeMem(0xe444, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6db3);
        EXPECT(gbc.pc(), 0xe446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe444), 0xcb);
        EXPECT(gbc.readMem(0xe445), 0xa5);
        // CB A5 034E
        gbc.setState(0x69a8, 0x59d7, 0x89e0, 0x85b4, 0xbc87, 0x8115, 0x0, 0x0);
        gbc.writeMem(0x69a8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x59d7);
        EXPECT(gbc.pc(), 0x69aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 034F
        gbc.setState(0xd2be, 0x9ece, 0x7d30, 0x9a9e, 0xb724, 0x811b, 0x0, 0x0);
        gbc.writeMem(0xd2be, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x9ece);
        EXPECT(gbc.pc(), 0xd2c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2be), 0xcb);
        EXPECT(gbc.readMem(0xd2bf), 0xa5);
        // CB A5 0350
        gbc.setState(0x33c6, 0x386b, 0x7540, 0x8032, 0x4362, 0x190b, 0x1, 0x1);
        gbc.writeMem(0x33c6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x386b);
        EXPECT(gbc.pc(), 0x33c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0351
        gbc.setState(0x6bae, 0x9e93, 0x320, 0x9f38, 0xf652, 0x15b3, 0x1, 0x1);
        gbc.writeMem(0x6bae, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9e93);
        EXPECT(gbc.pc(), 0x6bb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0352
        gbc.setState(0x2ce5, 0xb7e5, 0xdfc0, 0x66f2, 0xced1, 0xad6f, 0x0, 0x1);
        gbc.writeMem(0x2ce5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb7e5);
        EXPECT(gbc.pc(), 0x2ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0353
        gbc.setState(0xd837, 0xe70a, 0x300, 0xf405, 0x18c1, 0x48e, 0x0, 0x1);
        gbc.writeMem(0xd837, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe70a);
        EXPECT(gbc.pc(), 0xd839);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd837), 0xcb);
        EXPECT(gbc.readMem(0xd838), 0xa5);
        // CB A5 0354
        gbc.setState(0xe9c3, 0x8bc4, 0x9db0, 0xd970, 0x69b7, 0xab4c, 0x1, 0x1);
        gbc.writeMem(0xe9c3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8bc4);
        EXPECT(gbc.pc(), 0xe9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9c3), 0xcb);
        EXPECT(gbc.readMem(0xe9c4), 0xa5);
        // CB A5 0355
        gbc.setState(0xca60, 0xeeba, 0x2890, 0x1de3, 0xe930, 0x5a70, 0x1, 0x1);
        gbc.writeMem(0xca60, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xeeba);
        EXPECT(gbc.pc(), 0xca62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca60), 0xcb);
        EXPECT(gbc.readMem(0xca61), 0xa5);
        // CB A5 0356
        gbc.setState(0x695e, 0xcf39, 0xa690, 0x2a52, 0xd775, 0x4b33, 0x1, 0x0);
        gbc.writeMem(0x695e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xcf39);
        EXPECT(gbc.pc(), 0x6960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0357
        gbc.setState(0x6278, 0xc17d, 0x8d90, 0xa6f3, 0x2816, 0xc285, 0x1, 0x1);
        gbc.writeMem(0x6278, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc17d);
        EXPECT(gbc.pc(), 0x627a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0358
        gbc.setState(0xa6ea, 0x4bf6, 0x6990, 0xe526, 0x5503, 0x7f46, 0x0, 0x0);
        gbc.writeMem(0xa6ea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4bf6);
        EXPECT(gbc.pc(), 0xa6ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6ea), 0xcb);
        EXPECT(gbc.readMem(0xa6eb), 0xa5);
        // CB A5 0359
        gbc.setState(0x4592, 0x44f4, 0x34d0, 0xa03c, 0x946e, 0xa9af, 0x1, 0x1);
        gbc.writeMem(0x4592, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x44f4);
        EXPECT(gbc.pc(), 0x4594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 035A
        gbc.setState(0x991e, 0xf1e6, 0x8170, 0x7675, 0x8c47, 0xad3c, 0x0, 0x0);
        gbc.writeMem(0x991e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf1e6);
        EXPECT(gbc.pc(), 0x9920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x991e), 0xcb);
        EXPECT(gbc.readMem(0x991f), 0xa5);
        // CB A5 035B
        gbc.setState(0xd67a, 0xc3f8, 0x5240, 0xc1c6, 0xa7d, 0xac02, 0x0, 0x0);
        gbc.writeMem(0xd67a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc3f8);
        EXPECT(gbc.pc(), 0xd67c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd67a), 0xcb);
        EXPECT(gbc.readMem(0xd67b), 0xa5);
        // CB A5 035C
        gbc.setState(0x3abf, 0xdf7b, 0xb690, 0xda3e, 0x949e, 0xe59d, 0x0, 0x1);
        gbc.writeMem(0x3abf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0x3ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 035D
        gbc.setState(0xcdaa, 0xfb8, 0xbfb0, 0x5de, 0x4ca9, 0xb9b4, 0x0, 0x0);
        gbc.writeMem(0xcdaa, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xfb8);
        EXPECT(gbc.pc(), 0xcdac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdaa), 0xcb);
        EXPECT(gbc.readMem(0xcdab), 0xa5);
        // CB A5 035E
        gbc.setState(0x6bfd, 0xf4ad, 0xbfe0, 0x98e7, 0x5c37, 0xc5c9, 0x1, 0x0);
        gbc.writeMem(0x6bfd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf4ad);
        EXPECT(gbc.pc(), 0x6bff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 035F
        gbc.setState(0x6fc0, 0x6e62, 0x3070, 0xa4fd, 0x291d, 0xf8dd, 0x0, 0x0);
        gbc.writeMem(0x6fc0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6e62);
        EXPECT(gbc.pc(), 0x6fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0360
        gbc.setState(0x547, 0x52e0, 0x7580, 0x66c, 0xe19e, 0xe2c4, 0x0, 0x1);
        gbc.writeMem(0x547, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x52e0);
        EXPECT(gbc.pc(), 0x549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0361
        gbc.setState(0x5f0d, 0x7728, 0x5710, 0x14c0, 0xb60e, 0x313e, 0x0, 0x1);
        gbc.writeMem(0x5f0d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7728);
        EXPECT(gbc.pc(), 0x5f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0362
        gbc.setState(0xe57, 0x5d14, 0xf600, 0x156e, 0x5104, 0x79e6, 0x1, 0x0);
        gbc.writeMem(0xe57, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x5d14);
        EXPECT(gbc.pc(), 0xe59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0363
        gbc.setState(0xb2cd, 0x9a4c, 0x9a70, 0xca3b, 0xc0eb, 0x5181, 0x1, 0x0);
        gbc.writeMem(0xb2cd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9a4c);
        EXPECT(gbc.pc(), 0xb2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2cd), 0xcb);
        EXPECT(gbc.readMem(0xb2ce), 0xa5);
        // CB A5 0364
        gbc.setState(0xaf9c, 0xa580, 0xfc60, 0x9de0, 0x3db, 0x5aba, 0x1, 0x0);
        gbc.writeMem(0xaf9c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xa580);
        EXPECT(gbc.pc(), 0xaf9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf9c), 0xcb);
        EXPECT(gbc.readMem(0xaf9d), 0xa5);
        // CB A5 0365
        gbc.setState(0x53e9, 0x49fd, 0x8090, 0x7439, 0x246c, 0x8609, 0x1, 0x1);
        gbc.writeMem(0x53e9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x49fd);
        EXPECT(gbc.pc(), 0x53eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0366
        gbc.setState(0x8ba5, 0xac86, 0x3e10, 0x1360, 0x3e0b, 0x9be0, 0x0, 0x0);
        gbc.writeMem(0x8ba5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xac86);
        EXPECT(gbc.pc(), 0x8ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba5), 0xcb);
        EXPECT(gbc.readMem(0x8ba6), 0xa5);
        // CB A5 0367
        gbc.setState(0xd00f, 0xc41e, 0xa4c0, 0xdbb0, 0x2c02, 0x90a9, 0x1, 0x0);
        gbc.writeMem(0xd00f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc41e);
        EXPECT(gbc.pc(), 0xd011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd00f), 0xcb);
        EXPECT(gbc.readMem(0xd010), 0xa5);
        // CB A5 0368
        gbc.setState(0x9940, 0xb925, 0xec10, 0x47d3, 0xc671, 0xf33e, 0x0, 0x1);
        gbc.writeMem(0x9940, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xb925);
        EXPECT(gbc.pc(), 0x9942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9940), 0xcb);
        EXPECT(gbc.readMem(0x9941), 0xa5);
        // CB A5 0369
        gbc.setState(0x95e1, 0x9e08, 0x8bd0, 0x9dda, 0x2f08, 0xd67, 0x1, 0x1);
        gbc.writeMem(0x95e1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x9e08);
        EXPECT(gbc.pc(), 0x95e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95e1), 0xcb);
        EXPECT(gbc.readMem(0x95e2), 0xa5);
        // CB A5 036A
        gbc.setState(0x1ed4, 0x922b, 0xf9c0, 0xf5ce, 0x75f8, 0xd6b7, 0x0, 0x0);
        gbc.writeMem(0x1ed4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x922b);
        EXPECT(gbc.pc(), 0x1ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 036B
        gbc.setState(0xb200, 0xe948, 0xa380, 0x9bd6, 0x2100, 0x9b85, 0x0, 0x1);
        gbc.writeMem(0xb200, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe948);
        EXPECT(gbc.pc(), 0xb202);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb200), 0xcb);
        EXPECT(gbc.readMem(0xb201), 0xa5);
        // CB A5 036C
        gbc.setState(0xeb33, 0x4cf1, 0xaa70, 0x91d8, 0x8ef7, 0x1eb4, 0x1, 0x0);
        gbc.writeMem(0xeb33, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x4cf1);
        EXPECT(gbc.pc(), 0xeb35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb33), 0xcb);
        EXPECT(gbc.readMem(0xeb34), 0xa5);
        // CB A5 036D
        gbc.setState(0xbbdf, 0x496c, 0x5210, 0xec6, 0x23a9, 0xd032, 0x0, 0x0);
        gbc.writeMem(0xbbdf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x496c);
        EXPECT(gbc.pc(), 0xbbe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbdf), 0xcb);
        EXPECT(gbc.readMem(0xbbe0), 0xa5);
        // CB A5 036E
        gbc.setState(0xe1df, 0x1c3a, 0xaf20, 0x4ac4, 0x68bf, 0x63db, 0x0, 0x0);
        gbc.writeMem(0xe1df, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1c3a);
        EXPECT(gbc.pc(), 0xe1e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1df), 0xcb);
        EXPECT(gbc.readMem(0xe1e0), 0xa5);
        // CB A5 036F
        gbc.setState(0x8def, 0xd5d5, 0x7e70, 0xe80f, 0xa016, 0xe31e, 0x1, 0x0);
        gbc.writeMem(0x8def, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd5d5);
        EXPECT(gbc.pc(), 0x8df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8def), 0xcb);
        EXPECT(gbc.readMem(0x8df0), 0xa5);
        // CB A5 0370
        gbc.setState(0xe732, 0x836b, 0x6c90, 0x7fd6, 0xdfe8, 0xe16d, 0x0, 0x0);
        gbc.writeMem(0xe732, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x836b);
        EXPECT(gbc.pc(), 0xe734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe732), 0xcb);
        EXPECT(gbc.readMem(0xe733), 0xa5);
        // CB A5 0371
        gbc.setState(0x8cc3, 0x4921, 0xf820, 0xd1e5, 0xb629, 0xfcc2, 0x1, 0x0);
        gbc.writeMem(0x8cc3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4921);
        EXPECT(gbc.pc(), 0x8cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cc3), 0xcb);
        EXPECT(gbc.readMem(0x8cc4), 0xa5);
        // CB A5 0372
        gbc.setState(0xcd78, 0x12a5, 0xdc10, 0xda27, 0x5eca, 0x9aa6, 0x0, 0x1);
        gbc.writeMem(0xcd78, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x12a5);
        EXPECT(gbc.pc(), 0xcd7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd78), 0xcb);
        EXPECT(gbc.readMem(0xcd79), 0xa5);
        // CB A5 0373
        gbc.setState(0xe8eb, 0xbbc6, 0x16c0, 0xff0a, 0xddd, 0x6d14, 0x1, 0x0);
        gbc.writeMem(0xe8eb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xbbc6);
        EXPECT(gbc.pc(), 0xe8ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8eb), 0xcb);
        EXPECT(gbc.readMem(0xe8ec), 0xa5);
        // CB A5 0375
        gbc.setState(0x53c4, 0x5cd5, 0x1ca0, 0x9101, 0xa8cd, 0x6eea, 0x1, 0x1);
        gbc.writeMem(0x53c4, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5cd5);
        EXPECT(gbc.pc(), 0x53c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0376
        gbc.setState(0xbc8e, 0xc3c9, 0xbd10, 0xfc1f, 0x1624, 0xfbf3, 0x1, 0x1);
        gbc.writeMem(0xbc8e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc3c9);
        EXPECT(gbc.pc(), 0xbc90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8e), 0xcb);
        EXPECT(gbc.readMem(0xbc8f), 0xa5);
        // CB A5 0377
        gbc.setState(0x6a06, 0xf1bf, 0xba70, 0x273d, 0x303b, 0x2ca, 0x0, 0x0);
        gbc.writeMem(0x6a06, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf1bf);
        EXPECT(gbc.pc(), 0x6a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0378
        gbc.setState(0x1ffb, 0x9ad6, 0x4930, 0x4b4c, 0x9d83, 0x506a, 0x1, 0x0);
        gbc.writeMem(0x1ffb, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9ad6);
        EXPECT(gbc.pc(), 0x1ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0379
        gbc.setState(0x6c9c, 0x6ee5, 0x3ba0, 0x36c1, 0x98c2, 0x16ee, 0x1, 0x1);
        gbc.writeMem(0x6c9c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6ee5);
        EXPECT(gbc.pc(), 0x6c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 037A
        gbc.setState(0xb7b5, 0x428d, 0x2400, 0x2a44, 0xa4d0, 0x194b, 0x1, 0x0);
        gbc.writeMem(0xb7b5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x428d);
        EXPECT(gbc.pc(), 0xb7b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b5), 0xcb);
        EXPECT(gbc.readMem(0xb7b6), 0xa5);
        // CB A5 037B
        gbc.setState(0x7424, 0x284f, 0xf1a0, 0xe9ad, 0x7421, 0xad5f, 0x1, 0x0);
        gbc.writeMem(0x7424, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x284f);
        EXPECT(gbc.pc(), 0x7426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 037D
        gbc.setState(0x455e, 0xd5b2, 0x5010, 0x666c, 0x3682, 0xe490, 0x1, 0x0);
        gbc.writeMem(0x455e, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd5b2);
        EXPECT(gbc.pc(), 0x4560);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 037F
        gbc.setState(0xa448, 0x2362, 0x97e0, 0xe61d, 0x1e77, 0xbbd4, 0x1, 0x0);
        gbc.writeMem(0xa448, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2362);
        EXPECT(gbc.pc(), 0xa44a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa448), 0xcb);
        EXPECT(gbc.readMem(0xa449), 0xa5);
        // CB A5 0380
        gbc.setState(0x32a5, 0x4eb6, 0x8400, 0x80f6, 0x8c84, 0x39a0, 0x1, 0x0);
        gbc.writeMem(0x32a5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4eb6);
        EXPECT(gbc.pc(), 0x32a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0381
        gbc.setState(0x7073, 0xd00, 0x9c10, 0xa223, 0xe5f5, 0xbbdb, 0x1, 0x0);
        gbc.writeMem(0x7073, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xd00);
        EXPECT(gbc.pc(), 0x7075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0382
        gbc.setState(0xb734, 0x32e4, 0x1390, 0xea16, 0xfdad, 0xa7d0, 0x1, 0x1);
        gbc.writeMem(0xb734, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x32e4);
        EXPECT(gbc.pc(), 0xb736);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb734), 0xcb);
        EXPECT(gbc.readMem(0xb735), 0xa5);
        // CB A5 0383
        gbc.setState(0xbe5b, 0x6766, 0x4800, 0x1d61, 0x9001, 0x586d, 0x1, 0x1);
        gbc.writeMem(0xbe5b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x6766);
        EXPECT(gbc.pc(), 0xbe5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5b), 0xcb);
        EXPECT(gbc.readMem(0xbe5c), 0xa5);
        // CB A5 0384
        gbc.setState(0xb108, 0x86d2, 0xf1a0, 0x2cf6, 0xbc4a, 0xe131, 0x0, 0x1);
        gbc.writeMem(0xb108, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x86d2);
        EXPECT(gbc.pc(), 0xb10a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb108), 0xcb);
        EXPECT(gbc.readMem(0xb109), 0xa5);
        // CB A5 0385
        gbc.setState(0x2ad, 0xe4dd, 0x4940, 0xa744, 0xbfa3, 0xdc95, 0x0, 0x0);
        gbc.writeMem(0x2ad, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe4dd);
        EXPECT(gbc.pc(), 0x2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0386
        gbc.setState(0xc46d, 0x2970, 0x69a0, 0xfc6a, 0x7c8c, 0x4b5a, 0x0, 0x0);
        gbc.writeMem(0xc46d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2970);
        EXPECT(gbc.pc(), 0xc46f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc46d), 0xcb);
        EXPECT(gbc.readMem(0xc46e), 0xa5);
        // CB A5 0387
        gbc.setState(0x3fc, 0x5bc6, 0x5550, 0x8ab3, 0xafb0, 0x9e88, 0x0, 0x0);
        gbc.writeMem(0x3fc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5bc6);
        EXPECT(gbc.pc(), 0x3fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0388
        gbc.setState(0xdef3, 0x3b60, 0xa9f0, 0x6f1a, 0xe08, 0xc304, 0x0, 0x1);
        gbc.writeMem(0xdef3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3b60);
        EXPECT(gbc.pc(), 0xdef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef3), 0xcb);
        EXPECT(gbc.readMem(0xdef4), 0xa5);
        // CB A5 0389
        gbc.setState(0x7760, 0x2a24, 0x82e0, 0x2c5e, 0xaa58, 0xcb80, 0x1, 0x1);
        gbc.writeMem(0x7760, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2a24);
        EXPECT(gbc.pc(), 0x7762);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 038A
        gbc.setState(0x9021, 0x80f5, 0xd6f0, 0xad43, 0xf36a, 0x7a92, 0x1, 0x0);
        gbc.writeMem(0x9021, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x80f5);
        EXPECT(gbc.pc(), 0x9023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9021), 0xcb);
        EXPECT(gbc.readMem(0x9022), 0xa5);
        // CB A5 038B
        gbc.setState(0x1f20, 0x28ca, 0x850, 0x9cec, 0x5241, 0x98e4, 0x0, 0x0);
        gbc.writeMem(0x1f20, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x28ca);
        EXPECT(gbc.pc(), 0x1f22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 038C
        gbc.setState(0xaba3, 0x1fc6, 0x6350, 0x8846, 0x5487, 0x4d2c, 0x1, 0x1);
        gbc.writeMem(0xaba3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1fc6);
        EXPECT(gbc.pc(), 0xaba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaba3), 0xcb);
        EXPECT(gbc.readMem(0xaba4), 0xa5);
        // CB A5 038D
        gbc.setState(0x961c, 0x4b60, 0x69a0, 0x8972, 0x11db, 0xa5ed, 0x1, 0x1);
        gbc.writeMem(0x961c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4b60);
        EXPECT(gbc.pc(), 0x961e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961c), 0xcb);
        EXPECT(gbc.readMem(0x961d), 0xa5);
        // CB A5 038E
        gbc.setState(0x412, 0x3017, 0xee30, 0xaf68, 0x5ff, 0x940f, 0x1, 0x1);
        gbc.writeMem(0x412, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x3017);
        EXPECT(gbc.pc(), 0x414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 038F
        gbc.setState(0x9a73, 0xfd0d, 0x93b0, 0x57c1, 0x41b3, 0xcb64, 0x0, 0x0);
        gbc.writeMem(0x9a73, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfd0d);
        EXPECT(gbc.pc(), 0x9a75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a73), 0xcb);
        EXPECT(gbc.readMem(0x9a74), 0xa5);
        // CB A5 0390
        gbc.setState(0x2413, 0x80a2, 0x9e20, 0xcaf6, 0xcd89, 0xfa1, 0x1, 0x0);
        gbc.writeMem(0x2413, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x80a2);
        EXPECT(gbc.pc(), 0x2415);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0391
        gbc.setState(0x2d29, 0xf136, 0x11e0, 0x5bb1, 0xdec1, 0x5f3e, 0x0, 0x0);
        gbc.writeMem(0x2d29, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf136);
        EXPECT(gbc.pc(), 0x2d2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0392
        gbc.setState(0x1e08, 0x93ec, 0x5d00, 0x5c0f, 0x380a, 0xd11a, 0x1, 0x0);
        gbc.writeMem(0x1e08, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x93ec);
        EXPECT(gbc.pc(), 0x1e0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0393
        gbc.setState(0x7848, 0x9d55, 0xb890, 0x932, 0x61ec, 0x8b6a, 0x1, 0x0);
        gbc.writeMem(0x7848, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9d55);
        EXPECT(gbc.pc(), 0x784a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0395
        gbc.setState(0x6660, 0xa7e5, 0x1eb0, 0x3fa8, 0xb2a, 0xd391, 0x0, 0x1);
        gbc.writeMem(0x6660, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa7e5);
        EXPECT(gbc.pc(), 0x6662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 0397
        gbc.setState(0x398c, 0x3fbd, 0x2280, 0x6afc, 0xc32b, 0xe309, 0x1, 0x1);
        gbc.writeMem(0x398c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3fbd);
        EXPECT(gbc.pc(), 0x398e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 0398
        gbc.setState(0x8bee, 0x4524, 0x24b0, 0xf39e, 0xda75, 0x859, 0x0, 0x1);
        gbc.writeMem(0x8bee, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x4524);
        EXPECT(gbc.pc(), 0x8bf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bee), 0xcb);
        EXPECT(gbc.readMem(0x8bef), 0xa5);
        // CB A5 0399
        gbc.setState(0x33c1, 0x9947, 0x12f0, 0x61f3, 0xf7e, 0xa278, 0x1, 0x1);
        gbc.writeMem(0x33c1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9947);
        EXPECT(gbc.pc(), 0x33c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 039A
        gbc.setState(0x52a3, 0x76f0, 0x5f80, 0xd745, 0xa4f7, 0xbf25, 0x0, 0x0);
        gbc.writeMem(0x52a3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x76f0);
        EXPECT(gbc.pc(), 0x52a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 039B
        gbc.setState(0x90f2, 0xfe38, 0x6810, 0xd842, 0x2107, 0x2c35, 0x0, 0x1);
        gbc.writeMem(0x90f2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfe38);
        EXPECT(gbc.pc(), 0x90f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90f2), 0xcb);
        EXPECT(gbc.readMem(0x90f3), 0xa5);
        // CB A5 039C
        gbc.setState(0x4487, 0xc730, 0xe480, 0x1983, 0x519c, 0x8c10, 0x0, 0x1);
        gbc.writeMem(0x4487, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc730);
        EXPECT(gbc.pc(), 0x4489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 039D
        gbc.setState(0x3fa2, 0x4da5, 0xf340, 0x3721, 0xc3, 0x83c8, 0x1, 0x0);
        gbc.writeMem(0x3fa2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4da5);
        EXPECT(gbc.pc(), 0x3fa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 039E
        gbc.setState(0xbe9b, 0x7b78, 0x4410, 0xa4cd, 0x9b47, 0xe730, 0x0, 0x1);
        gbc.writeMem(0xbe9b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7b78);
        EXPECT(gbc.pc(), 0xbe9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe9b), 0xcb);
        EXPECT(gbc.readMem(0xbe9c), 0xa5);
        // CB A5 039F
        gbc.setState(0x51c0, 0xeb50, 0x9b50, 0x7ae6, 0xdc3f, 0x9dfa, 0x1, 0x1);
        gbc.writeMem(0x51c0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xeb50);
        EXPECT(gbc.pc(), 0x51c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03A0
        gbc.setState(0x94ff, 0x930c, 0x31f0, 0x2823, 0xc007, 0xa3c9, 0x0, 0x0);
        gbc.writeMem(0x94ff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x930c);
        EXPECT(gbc.pc(), 0x9501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ff), 0xcb);
        EXPECT(gbc.readMem(0x9500), 0xa5);
        // CB A5 03A1
        gbc.setState(0xc218, 0x9ea2, 0xa000, 0xcb4e, 0x7c83, 0x1273, 0x1, 0x0);
        gbc.writeMem(0xc218, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9ea2);
        EXPECT(gbc.pc(), 0xc21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc218), 0xcb);
        EXPECT(gbc.readMem(0xc219), 0xa5);
        // CB A5 03A2
        gbc.setState(0x3e56, 0x5f7e, 0xba80, 0x791b, 0x240e, 0x597, 0x1, 0x0);
        gbc.writeMem(0x3e56, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5f7e);
        EXPECT(gbc.pc(), 0x3e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03A3
        gbc.setState(0x7978, 0x49bb, 0xab20, 0xbeb1, 0x353, 0xaa74, 0x0, 0x0);
        gbc.writeMem(0x7978, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x49bb);
        EXPECT(gbc.pc(), 0x797a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03A4
        gbc.setState(0xe062, 0x463e, 0x5800, 0x787f, 0x3fd5, 0x43ba, 0x1, 0x1);
        gbc.writeMem(0xe062, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x463e);
        EXPECT(gbc.pc(), 0xe064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe062), 0xcb);
        EXPECT(gbc.readMem(0xe063), 0xa5);
        // CB A5 03A5
        gbc.setState(0x217a, 0xbee2, 0xb4a0, 0x3a7c, 0x4234, 0x27f, 0x0, 0x0);
        gbc.writeMem(0x217a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xbee2);
        EXPECT(gbc.pc(), 0x217c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03A6
        gbc.setState(0x13b7, 0x5215, 0x6440, 0x616d, 0x19a3, 0xdd30, 0x0, 0x0);
        gbc.writeMem(0x13b7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5215);
        EXPECT(gbc.pc(), 0x13b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03A7
        gbc.setState(0x9d5f, 0xe870, 0x1ce0, 0x8434, 0x6e91, 0x1d8b, 0x1, 0x0);
        gbc.writeMem(0x9d5f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xe870);
        EXPECT(gbc.pc(), 0x9d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d5f), 0xcb);
        EXPECT(gbc.readMem(0x9d60), 0xa5);
        // CB A5 03A8
        gbc.setState(0xd8e0, 0x6234, 0x4260, 0x2300, 0x8932, 0x370e, 0x1, 0x1);
        gbc.writeMem(0xd8e0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6234);
        EXPECT(gbc.pc(), 0xd8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e0), 0xcb);
        EXPECT(gbc.readMem(0xd8e1), 0xa5);
        // CB A5 03A9
        gbc.setState(0xc592, 0xee9c, 0x8d90, 0xc197, 0xf304, 0x266c, 0x0, 0x1);
        gbc.writeMem(0xc592, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xee9c);
        EXPECT(gbc.pc(), 0xc594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc592), 0xcb);
        EXPECT(gbc.readMem(0xc593), 0xa5);
        // CB A5 03AB
        gbc.setState(0x304c, 0x6ba1, 0x2220, 0x2123, 0xaacc, 0xb9bc, 0x1, 0x1);
        gbc.writeMem(0x304c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6ba1);
        EXPECT(gbc.pc(), 0x304e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03AC
        gbc.setState(0x84d3, 0x30c2, 0xf7b0, 0xf037, 0x3f15, 0xeab8, 0x0, 0x0);
        gbc.writeMem(0x84d3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x30c2);
        EXPECT(gbc.pc(), 0x84d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84d3), 0xcb);
        EXPECT(gbc.readMem(0x84d4), 0xa5);
        // CB A5 03AD
        gbc.setState(0x3328, 0xc9db, 0xae90, 0xf966, 0x932c, 0xde92, 0x1, 0x1);
        gbc.writeMem(0x3328, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc9db);
        EXPECT(gbc.pc(), 0x332a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03AE
        gbc.setState(0x3408, 0xc8f3, 0xbd00, 0xac29, 0x10a8, 0x849b, 0x1, 0x0);
        gbc.writeMem(0x3408, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc8f3);
        EXPECT(gbc.pc(), 0x340a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03AF
        gbc.setState(0x39cf, 0x5de1, 0xe460, 0x8906, 0xd14c, 0xa958, 0x1, 0x0);
        gbc.writeMem(0x39cf, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5de1);
        EXPECT(gbc.pc(), 0x39d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B0
        gbc.setState(0x972, 0x7615, 0x6c60, 0x8710, 0x2fa4, 0xc7bb, 0x0, 0x0);
        gbc.writeMem(0x972, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7615);
        EXPECT(gbc.pc(), 0x974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B1
        gbc.setState(0x69f7, 0x9a83, 0x5e60, 0xa762, 0x6191, 0xf91a, 0x0, 0x0);
        gbc.writeMem(0x69f7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9a83);
        EXPECT(gbc.pc(), 0x69f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B2
        gbc.setState(0x994, 0x39a0, 0x14f0, 0x4f91, 0xa664, 0xe733, 0x0, 0x1);
        gbc.writeMem(0x994, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x39a0);
        EXPECT(gbc.pc(), 0x996);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03B3
        gbc.setState(0x8e1, 0x70af, 0x5a0, 0x480c, 0x6a70, 0x115f, 0x0, 0x1);
        gbc.writeMem(0x8e1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x70af);
        EXPECT(gbc.pc(), 0x8e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B4
        gbc.setState(0x599a, 0x9409, 0x1f0, 0x66a6, 0x848a, 0x21a4, 0x1, 0x0);
        gbc.writeMem(0x599a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9409);
        EXPECT(gbc.pc(), 0x599c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03B5
        gbc.setState(0x3a19, 0x3e24, 0xc330, 0xd5b0, 0x9531, 0xc577, 0x1, 0x1);
        gbc.writeMem(0x3a19, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x3e24);
        EXPECT(gbc.pc(), 0x3a1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03B6
        gbc.setState(0x7934, 0x7161, 0x2760, 0xd4d3, 0x694f, 0x16c6, 0x1, 0x1);
        gbc.writeMem(0x7934, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7161);
        EXPECT(gbc.pc(), 0x7936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B7
        gbc.setState(0x4fc1, 0xb2e7, 0xd7a0, 0xbdc7, 0x23a, 0x74a2, 0x0, 0x0);
        gbc.writeMem(0x4fc1, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb2e7);
        EXPECT(gbc.pc(), 0x4fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03B8
        gbc.setState(0x623c, 0xd0b5, 0x1e30, 0xeb55, 0x57a, 0xb4d8, 0x1, 0x1);
        gbc.writeMem(0x623c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd0b5);
        EXPECT(gbc.pc(), 0x623e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03B9
        gbc.setState(0x6dec, 0x5f28, 0x56d0, 0xad43, 0x83b1, 0x1548, 0x1, 0x1);
        gbc.writeMem(0x6dec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5f28);
        EXPECT(gbc.pc(), 0x6dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03BC
        gbc.setState(0x1b3d, 0x7fb6, 0x99c0, 0x5c20, 0x7ae4, 0x307f, 0x1, 0x1);
        gbc.writeMem(0x1b3d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7fb6);
        EXPECT(gbc.pc(), 0x1b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03BD
        gbc.setState(0xe66c, 0xa224, 0x89f0, 0xafbe, 0x7e69, 0xc7e, 0x0, 0x1);
        gbc.writeMem(0xe66c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa224);
        EXPECT(gbc.pc(), 0xe66e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe66c), 0xcb);
        EXPECT(gbc.readMem(0xe66d), 0xa5);
        // CB A5 03BE
        gbc.setState(0x602f, 0xdd5a, 0x9ba0, 0x2d07, 0x9542, 0xaec, 0x1, 0x0);
        gbc.writeMem(0x602f, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdd5a);
        EXPECT(gbc.pc(), 0x6031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03BF
        gbc.setState(0x9d57, 0x1bff, 0x6390, 0x1150, 0x13de, 0x47b4, 0x0, 0x0);
        gbc.writeMem(0x9d57, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1bff);
        EXPECT(gbc.pc(), 0x9d59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d57), 0xcb);
        EXPECT(gbc.readMem(0x9d58), 0xa5);
        // CB A5 03C0
        gbc.setState(0x7fb9, 0xdc7d, 0x2ff0, 0xe598, 0xf759, 0x824d, 0x1, 0x1);
        gbc.writeMem(0x7fb9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xdc7d);
        EXPECT(gbc.pc(), 0x7fbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03C1
        gbc.setState(0x2185, 0xa39d, 0xfe10, 0xd86c, 0x4b3, 0x1a9e, 0x0, 0x1);
        gbc.writeMem(0x2185, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xa39d);
        EXPECT(gbc.pc(), 0x2187);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03C2
        gbc.setState(0x8db8, 0x10fa, 0x9cf0, 0x88d2, 0x94ff, 0xfeab, 0x0, 0x0);
        gbc.writeMem(0x8db8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x10fa);
        EXPECT(gbc.pc(), 0x8dba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db8), 0xcb);
        EXPECT(gbc.readMem(0x8db9), 0xa5);
        // CB A5 03C3
        gbc.setState(0x7c18, 0xd8e6, 0x4a20, 0xb5ee, 0x5d52, 0x1883, 0x1, 0x0);
        gbc.writeMem(0x7c18, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd8e6);
        EXPECT(gbc.pc(), 0x7c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03C4
        gbc.setState(0x24c3, 0xd1c8, 0xe530, 0x2f36, 0xa068, 0x1ea, 0x0, 0x1);
        gbc.writeMem(0x24c3, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd1c8);
        EXPECT(gbc.pc(), 0x24c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03C5
        gbc.setState(0x7d7c, 0x8c03, 0xa2f0, 0x944f, 0x95dc, 0xd1c6, 0x1, 0x1);
        gbc.writeMem(0x7d7c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8c03);
        EXPECT(gbc.pc(), 0x7d7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03C6
        gbc.setState(0xc558, 0x937, 0x3e50, 0x96fc, 0xece, 0xef7a, 0x0, 0x0);
        gbc.writeMem(0xc558, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x937);
        EXPECT(gbc.pc(), 0xc55a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc558), 0xcb);
        EXPECT(gbc.readMem(0xc559), 0xa5);
        // CB A5 03C7
        gbc.setState(0x959, 0x920d, 0x1b40, 0x9c4a, 0xa6a5, 0x3b90, 0x1, 0x1);
        gbc.writeMem(0x959, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x920d);
        EXPECT(gbc.pc(), 0x95b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03C8
        gbc.setState(0xb8fd, 0xe77b, 0x6e70, 0x1de9, 0x7636, 0x3d06, 0x0, 0x1);
        gbc.writeMem(0xb8fd, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe77b);
        EXPECT(gbc.pc(), 0xb8ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8fd), 0xcb);
        EXPECT(gbc.readMem(0xb8fe), 0xa5);
        // CB A5 03C9
        gbc.setState(0x16d, 0x58e3, 0x5ab0, 0x42ce, 0x2a9, 0x5f3a, 0x0, 0x1);
        gbc.writeMem(0x16d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x58e3);
        EXPECT(gbc.pc(), 0x16f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03CA
        gbc.setState(0xa3b6, 0x9a95, 0xd620, 0xc8b7, 0xc7de, 0x9289, 0x1, 0x1);
        gbc.writeMem(0xa3b6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9a95);
        EXPECT(gbc.pc(), 0xa3b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b6), 0xcb);
        EXPECT(gbc.readMem(0xa3b7), 0xa5);
        // CB A5 03CB
        gbc.setState(0x2b59, 0x2790, 0xe050, 0xd0b5, 0x7132, 0x130f, 0x1, 0x1);
        gbc.writeMem(0x2b59, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2790);
        EXPECT(gbc.pc(), 0x2b5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03CC
        gbc.setState(0x6041, 0x238a, 0xc6f0, 0x4ec4, 0x60a9, 0x160f, 0x1, 0x1);
        gbc.writeMem(0x6041, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x238a);
        EXPECT(gbc.pc(), 0x6043);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03CD
        gbc.setState(0x77a8, 0xcb8b, 0x2000, 0x9dc3, 0x489f, 0x58f6, 0x0, 0x0);
        gbc.writeMem(0x77a8, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xcb8b);
        EXPECT(gbc.pc(), 0x77aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03CE
        gbc.setState(0x67fc, 0x15b, 0x3230, 0x77c2, 0x3948, 0x5ca3, 0x0, 0x0);
        gbc.writeMem(0x67fc, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x15b);
        EXPECT(gbc.pc(), 0x67fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03CF
        gbc.setState(0x93c6, 0x436a, 0x8910, 0x2f4a, 0xf7bf, 0x9046, 0x0, 0x1);
        gbc.writeMem(0x93c6, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x436a);
        EXPECT(gbc.pc(), 0x93c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93c6), 0xcb);
        EXPECT(gbc.readMem(0x93c7), 0xa5);
        // CB A5 03D0
        gbc.setState(0x2782, 0x5b80, 0xd620, 0x9dfc, 0x4b1f, 0xd024, 0x1, 0x0);
        gbc.writeMem(0x2782, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5b80);
        EXPECT(gbc.pc(), 0x2784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03D1
        gbc.setState(0x5eea, 0x8c81, 0xb140, 0xfe08, 0x6035, 0xadda, 0x1, 0x0);
        gbc.writeMem(0x5eea, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8c81);
        EXPECT(gbc.pc(), 0x5eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03D2
        gbc.setState(0x1f3a, 0x670d, 0x58d0, 0x1c52, 0xb565, 0x1867, 0x0, 0x0);
        gbc.writeMem(0x1f3a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x670d);
        EXPECT(gbc.pc(), 0x1f3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03D3
        gbc.setState(0xbaec, 0x1897, 0x77d0, 0x6133, 0x69c5, 0xf589, 0x0, 0x1);
        gbc.writeMem(0xbaec, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1897);
        EXPECT(gbc.pc(), 0xbaee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaec), 0xcb);
        EXPECT(gbc.readMem(0xbaed), 0xa5);
        // CB A5 03D4
        gbc.setState(0x602d, 0x7c15, 0x72b0, 0x4d19, 0xa9fb, 0x8c35, 0x1, 0x1);
        gbc.writeMem(0x602d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x7c15);
        EXPECT(gbc.pc(), 0x602f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03D5
        gbc.setState(0x155a, 0xa139, 0x36a0, 0xb264, 0x7866, 0x6f96, 0x1, 0x1);
        gbc.writeMem(0x155a, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa139);
        EXPECT(gbc.pc(), 0x155c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03D6
        gbc.setState(0x745b, 0x3142, 0x8bf0, 0x6342, 0x2376, 0x1fbc, 0x1, 0x1);
        gbc.writeMem(0x745b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3142);
        EXPECT(gbc.pc(), 0x745d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03D7
        gbc.setState(0xc124, 0x20e1, 0x3920, 0x95fc, 0x10ab, 0x2ca0, 0x0, 0x0);
        gbc.writeMem(0xc124, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x20e1);
        EXPECT(gbc.pc(), 0xc126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc124), 0xcb);
        EXPECT(gbc.readMem(0xc125), 0xa5);
        // CB A5 03D9
        gbc.setState(0x4244, 0xcaf6, 0xac30, 0xd116, 0x43c, 0x654b, 0x0, 0x0);
        gbc.writeMem(0x4244, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xcaf6);
        EXPECT(gbc.pc(), 0x4246);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03DA
        gbc.setState(0x7ef9, 0xfb40, 0x7f50, 0xbbc7, 0x1ee2, 0x7bf3, 0x0, 0x0);
        gbc.writeMem(0x7ef9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfb40);
        EXPECT(gbc.pc(), 0x7efb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03DB
        gbc.setState(0x4940, 0xa7a0, 0xaf30, 0xc889, 0x5100, 0xcbed, 0x1, 0x1);
        gbc.writeMem(0x4940, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa7a0);
        EXPECT(gbc.pc(), 0x4942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03DC
        gbc.setState(0x1fff, 0xab07, 0xdf70, 0x7938, 0xa80b, 0xcc5b, 0x1, 0x0);
        gbc.writeMem(0x1fff, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xab07);
        EXPECT(gbc.pc(), 0x2001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03DD
        gbc.setState(0x6ac9, 0xf51, 0xf680, 0xba27, 0x8e5, 0xb0d8, 0x1, 0x0);
        gbc.writeMem(0x6ac9, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf51);
        EXPECT(gbc.pc(), 0x6acb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03DE
        gbc.setState(0x50b0, 0x3a35, 0x4e30, 0xba46, 0xbabb, 0x10c8, 0x1, 0x1);
        gbc.writeMem(0x50b0, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3a35);
        EXPECT(gbc.pc(), 0x50b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03DF
        gbc.setState(0x131d, 0xb43c, 0x30c0, 0x3d3d, 0x7f3a, 0x4f3d, 0x0, 0x1);
        gbc.writeMem(0x131d, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xb43c);
        EXPECT(gbc.pc(), 0x131f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03E0
        gbc.setState(0x3b1c, 0xd82a, 0xbf30, 0xd5b2, 0x8407, 0xf84f, 0x1, 0x0);
        gbc.writeMem(0x3b1c, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd82a);
        EXPECT(gbc.pc(), 0x3b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03E1
        gbc.setState(0x11d7, 0xc564, 0xee50, 0x16ba, 0x3acc, 0x6959, 0x1, 0x0);
        gbc.writeMem(0x11d7, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc564);
        EXPECT(gbc.pc(), 0x11d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03E2
        gbc.setState(0x5ac5, 0x7d27, 0x35e0, 0xcaca, 0x5e80, 0x6040, 0x1, 0x1);
        gbc.writeMem(0x5ac5, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7d27);
        EXPECT(gbc.pc(), 0x5ac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB A5 03E3
        gbc.setState(0xcc1b, 0xb668, 0xfd50, 0x6f9b, 0x7665, 0x467c, 0x0, 0x0);
        gbc.writeMem(0xcc1b, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb668);
        EXPECT(gbc.pc(), 0xcc1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc1b), 0xcb);
        EXPECT(gbc.readMem(0xcc1c), 0xa5);
        // CB A5 03E4
        gbc.setState(0xbc28, 0x154, 0x2730, 0x21fb, 0xd960, 0x2243, 0x1, 0x0);
        gbc.writeMem(0xbc28, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x154);
        EXPECT(gbc.pc(), 0xbc2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc28), 0xcb);
        EXPECT(gbc.readMem(0xbc29), 0xa5);
        // CB A5 03E6
        gbc.setState(0x1ae2, 0x5663, 0x1970, 0x5b44, 0x61f3, 0xb2d8, 0x0, 0x0);
        gbc.writeMem(0x1ae2, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x5663);
        EXPECT(gbc.pc(), 0x1ae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB A5 03E7
        gbc.setState(0x8639, 0xdb39, 0xac10, 0x29f, 0x54b, 0x96d0, 0x1, 0x0);
        gbc.writeMem(0x8639, { 0xcb, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xdb39);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8639), 0xcb);
        EXPECT(gbc.readMem(0x863a), 0xa5);
    }
}
#endif
