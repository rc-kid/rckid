    TEST(gbcemu, opcode_ef) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // EF 0002
        gbc.setState(0x6ca5, 0xa094, 0x65e0, 0x4726, 0xeb23, 0x999e, 0x1, 0x0);
        gbc.writeMem(0x6ca5, { 0xef });
        gbc.writeMem(0xa092, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xa092, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa6, gbc.readMem(0xa092));
        EXPECT(0x6c, gbc.readMem(0xa093));
        // EF 0004
        gbc.setState(0x8b2f, 0x8fde, 0x8fb0, 0xa93a, 0x79e0, 0xc717, 0x1, 0x0);
        gbc.writeMem(0x8b2f, { 0xef });
        gbc.writeMem(0x8fdc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x8fdc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8b2f));
        EXPECT(0x30, gbc.readMem(0x8fdc));
        EXPECT(0x8b, gbc.readMem(0x8fdd));
        // EF 0005
        gbc.setState(0xb081, 0xd668, 0x3440, 0x650e, 0x6984, 0xcfc9, 0x0, 0x1);
        gbc.writeMem(0xb081, { 0xef });
        gbc.writeMem(0xd666, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xd666, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb081));
        EXPECT(0x82, gbc.readMem(0xd666));
        EXPECT(0xb0, gbc.readMem(0xd667));
        // EF 0007
        gbc.setState(0xe09f, 0xfef9, 0xd830, 0x6307, 0x492a, 0x7dd7, 0x0, 0x1);
        gbc.writeMem(0xe09f, { 0xef });
        gbc.writeMem(0xfef7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xfef7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xe09f));
        EXPECT(0xa0, gbc.readMem(0xfef7));
        EXPECT(0xe0, gbc.readMem(0xfef8));
        // EF 0009
        gbc.setState(0x61bd, 0xf516, 0xc840, 0xe445, 0x729d, 0xbd00, 0x1, 0x0);
        gbc.writeMem(0x61bd, { 0xef });
        gbc.writeMem(0xf514, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xf514, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbe, gbc.readMem(0xf514));
        EXPECT(0x61, gbc.readMem(0xf515));
        // EF 000A
        gbc.setState(0x1f56, 0xb45c, 0xe8d0, 0xc231, 0x203c, 0x3153, 0x0, 0x0);
        gbc.writeMem(0x1f56, { 0xef });
        gbc.writeMem(0xb45a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xb45a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xb45a));
        EXPECT(0x1f, gbc.readMem(0xb45b));
        // EF 000B
        gbc.setState(0xc2e8, 0x928c, 0x14d0, 0x2e76, 0x9c51, 0x1d2c, 0x0, 0x0);
        gbc.writeMem(0x928a, { 0x0, 0x0 });
        gbc.writeMem(0xc2e8, { 0xef });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x928a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0x928a));
        EXPECT(0xc2, gbc.readMem(0x928b));
        EXPECT(0xef, gbc.readMem(0xc2e8));
        // EF 000F
        gbc.setState(0xee88, 0x9f42, 0x2320, 0x1ccf, 0x8cf2, 0xc4b7, 0x0, 0x1);
        gbc.writeMem(0x9f40, { 0x0, 0x0 });
        gbc.writeMem(0xee88, { 0xef });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x9f40, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x89, gbc.readMem(0x9f40));
        EXPECT(0xee, gbc.readMem(0x9f41));
        EXPECT(0xef, gbc.readMem(0xee88));
        // EF 0011
        gbc.setState(0x7a78, 0xedd1, 0x7820, 0x4d8a, 0xfca9, 0xf9c7, 0x1, 0x0);
        gbc.writeMem(0x7a78, { 0xef });
        gbc.writeMem(0xedcf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xedcf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0xedcf));
        EXPECT(0x7a, gbc.readMem(0xedd0));
        // EF 0015
        gbc.setState(0x8932, 0x9f34, 0x51a0, 0x1e29, 0x4992, 0xa110, 0x0, 0x0);
        gbc.writeMem(0x8932, { 0xef });
        gbc.writeMem(0x9f32, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x9f32, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8932));
        EXPECT(0x33, gbc.readMem(0x9f32));
        EXPECT(0x89, gbc.readMem(0x9f33));
        // EF 0016
        gbc.setState(0x1f6c, 0xfc27, 0xaf90, 0x3bf8, 0x97c2, 0x2bac, 0x1, 0x0);
        gbc.writeMem(0x1f6c, { 0xef });
        gbc.writeMem(0xfc25, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xfc25, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0xfc25));
        EXPECT(0x1f, gbc.readMem(0xfc26));
        // EF 0017
        gbc.setState(0x52a2, 0xf31d, 0xce20, 0xab5, 0xb1cf, 0xcb5c, 0x0, 0x0);
        gbc.writeMem(0x52a2, { 0xef });
        gbc.writeMem(0xf31b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xf31b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa3, gbc.readMem(0xf31b));
        EXPECT(0x52, gbc.readMem(0xf31c));
        // EF 0019
        gbc.setState(0xd9fd, 0xe861, 0x41d0, 0x24a8, 0x4a0b, 0x9bbb, 0x1, 0x1);
        gbc.writeMem(0xd9fd, { 0xef });
        gbc.writeMem(0xe85f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xe85f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd9fd));
        EXPECT(0xfe, gbc.readMem(0xe85f));
        EXPECT(0xd9, gbc.readMem(0xe860));
        // EF 001A
        gbc.setState(0xd18, 0xecb4, 0xc280, 0x2d2c, 0x90dd, 0xa7b4, 0x0, 0x0);
        gbc.writeMem(0xd18, { 0xef });
        gbc.writeMem(0xecb2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xecb2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x19, gbc.readMem(0xecb2));
        EXPECT(0xd, gbc.readMem(0xecb3));
        // EF 001D
        gbc.setState(0x369c, 0x8f2a, 0xeb50, 0xd7d9, 0xa9eb, 0xd07b, 0x1, 0x1);
        gbc.writeMem(0x369c, { 0xef });
        gbc.writeMem(0x8f28, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x8f28, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9d, gbc.readMem(0x8f28));
        EXPECT(0x36, gbc.readMem(0x8f29));
        // EF 001E
        gbc.setState(0xa8c4, 0xe650, 0x4ce0, 0x7b53, 0xc5fd, 0x88bb, 0x1, 0x0);
        gbc.writeMem(0xa8c4, { 0xef });
        gbc.writeMem(0xe64e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xe64e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa8c4));
        EXPECT(0xc5, gbc.readMem(0xe64e));
        EXPECT(0xa8, gbc.readMem(0xe64f));
        // EF 0020
        gbc.setState(0xe9c2, 0xd4e8, 0x9250, 0x5314, 0x5c5a, 0x4a6b, 0x1, 0x0);
        gbc.writeMem(0xd4e6, { 0x0, 0x0 });
        gbc.writeMem(0xe9c2, { 0xef });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xd4e6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0xd4e6));
        EXPECT(0xe9, gbc.readMem(0xd4e7));
        EXPECT(0xef, gbc.readMem(0xe9c2));
        // EF 0022
        gbc.setState(0x9e54, 0x9f61, 0xdfd0, 0xfaed, 0xef89, 0x88a4, 0x1, 0x1);
        gbc.writeMem(0x9e54, { 0xef });
        gbc.writeMem(0x9f5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x9f5f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9e54));
        EXPECT(0x55, gbc.readMem(0x9f5f));
        EXPECT(0x9e, gbc.readMem(0x9f60));
        // EF 0024
        gbc.setState(0x53db, 0xdd4c, 0x6390, 0xf451, 0x6c4e, 0x4969, 0x1, 0x1);
        gbc.writeMem(0x53db, { 0xef });
        gbc.writeMem(0xdd4a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xdd4a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdc, gbc.readMem(0xdd4a));
        EXPECT(0x53, gbc.readMem(0xdd4b));
        // EF 002A
        gbc.setState(0x521f, 0xa5bf, 0xddb0, 0x4077, 0x3115, 0x346c, 0x1, 0x1);
        gbc.writeMem(0x521f, { 0xef });
        gbc.writeMem(0xa5bd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xa5bd, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0xa5bd));
        EXPECT(0x52, gbc.readMem(0xa5be));
        // EF 002D
        gbc.setState(0xaa6b, 0xd9a8, 0x4a30, 0x14ff, 0xad0a, 0x8c1e, 0x1, 0x1);
        gbc.writeMem(0xaa6b, { 0xef });
        gbc.writeMem(0xd9a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xd9a6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xaa6b));
        EXPECT(0x6c, gbc.readMem(0xd9a6));
        EXPECT(0xaa, gbc.readMem(0xd9a7));
        // EF 002F
        gbc.setState(0xc4f0, 0xa5bb, 0x4690, 0x908a, 0xc7d0, 0x1b9b, 0x0, 0x0);
        gbc.writeMem(0xa5b9, { 0x0, 0x0 });
        gbc.writeMem(0xc4f0, { 0xef });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xa5b9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf1, gbc.readMem(0xa5b9));
        EXPECT(0xc4, gbc.readMem(0xa5ba));
        EXPECT(0xef, gbc.readMem(0xc4f0));
        // EF 0031
        gbc.setState(0x7882, 0xc05d, 0x5a90, 0xe982, 0xf424, 0x964f, 0x0, 0x1);
        gbc.writeMem(0x7882, { 0xef });
        gbc.writeMem(0xc05b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xc05b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0xc05b));
        EXPECT(0x78, gbc.readMem(0xc05c));
        // EF 0032
        gbc.setState(0x7504, 0xae62, 0xffe0, 0x4e6b, 0x5af7, 0x59a0, 0x0, 0x1);
        gbc.writeMem(0x7504, { 0xef });
        gbc.writeMem(0xae60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xae60, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5, gbc.readMem(0xae60));
        EXPECT(0x75, gbc.readMem(0xae61));
        // EF 0034
        gbc.setState(0xb646, 0xcd48, 0xc490, 0x38e2, 0xfb5b, 0x22c4, 0x1, 0x1);
        gbc.writeMem(0xb646, { 0xef });
        gbc.writeMem(0xcd46, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xcd46, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb646));
        EXPECT(0x47, gbc.readMem(0xcd46));
        EXPECT(0xb6, gbc.readMem(0xcd47));
        // EF 0037
        gbc.setState(0x4abb, 0xa533, 0xbee0, 0x46c8, 0xc1ca, 0x6501, 0x1, 0x1);
        gbc.writeMem(0x4abb, { 0xef });
        gbc.writeMem(0xa531, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xa531, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0xa531));
        EXPECT(0x4a, gbc.readMem(0xa532));
        // EF 003A
        gbc.setState(0x2a6c, 0xc3ed, 0xb990, 0xa956, 0x2e06, 0x9d0b, 0x1, 0x1);
        gbc.writeMem(0x2a6c, { 0xef });
        gbc.writeMem(0xc3eb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc3eb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0xc3eb));
        EXPECT(0x2a, gbc.readMem(0xc3ec));
        // EF 003C
        gbc.setState(0x3678, 0x9995, 0x27e0, 0xd45e, 0x3351, 0x1871, 0x0, 0x1);
        gbc.writeMem(0x3678, { 0xef });
        gbc.writeMem(0x9993, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x9993, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x79, gbc.readMem(0x9993));
        EXPECT(0x36, gbc.readMem(0x9994));
        // EF 003D
        gbc.setState(0x1e1f, 0xa9f8, 0xdcf0, 0x970a, 0xad41, 0x86cf, 0x1, 0x1);
        gbc.writeMem(0x1e1f, { 0xef });
        gbc.writeMem(0xa9f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa9f6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0xa9f6));
        EXPECT(0x1e, gbc.readMem(0xa9f7));
        // EF 003E
        gbc.setState(0x21c1, 0xe024, 0x18f0, 0x92e0, 0xe61f, 0xd62e, 0x1, 0x1);
        gbc.writeMem(0x21c1, { 0xef });
        gbc.writeMem(0xe022, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xe022, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc2, gbc.readMem(0xe022));
        EXPECT(0x21, gbc.readMem(0xe023));
        // EF 0043
        gbc.setState(0x828, 0xbd32, 0xb440, 0x3bbb, 0xae78, 0x7f36, 0x1, 0x1);
        gbc.writeMem(0x828, { 0xef });
        gbc.writeMem(0xbd30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xbd30, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xbd30));
        EXPECT(0x8, gbc.readMem(0xbd31));
        // EF 0045
        gbc.setState(0x1d1a, 0xed0a, 0xfa90, 0x4101, 0xf545, 0xa936, 0x0, 0x1);
        gbc.writeMem(0x1d1a, { 0xef });
        gbc.writeMem(0xed08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xed08, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xed08));
        EXPECT(0x1d, gbc.readMem(0xed09));
        // EF 0047
        gbc.setState(0xea59, 0xb0ba, 0x27a0, 0x3468, 0x17a4, 0x154f, 0x0, 0x1);
        gbc.writeMem(0xb0b8, { 0x0, 0x0 });
        gbc.writeMem(0xea59, { 0xef });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xb0b8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5a, gbc.readMem(0xb0b8));
        EXPECT(0xea, gbc.readMem(0xb0b9));
        EXPECT(0xef, gbc.readMem(0xea59));
        // EF 004A
        gbc.setState(0xed72, 0xbe4f, 0x8d90, 0x9c9f, 0x8b13, 0x92da, 0x0, 0x0);
        gbc.writeMem(0xbe4d, { 0x0, 0x0 });
        gbc.writeMem(0xed72, { 0xef });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xbe4d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0xbe4d));
        EXPECT(0xed, gbc.readMem(0xbe4e));
        EXPECT(0xef, gbc.readMem(0xed72));
        // EF 004C
        gbc.setState(0x9411, 0xa6a5, 0xa460, 0x2d7b, 0xed5d, 0x98dc, 0x1, 0x0);
        gbc.writeMem(0x9411, { 0xef });
        gbc.writeMem(0xa6a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xa6a3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9411));
        EXPECT(0x12, gbc.readMem(0xa6a3));
        EXPECT(0x94, gbc.readMem(0xa6a4));
        // EF 004E
        gbc.setState(0x8c81, 0xe64e, 0xeb10, 0x1539, 0xb771, 0xf261, 0x1, 0x0);
        gbc.writeMem(0x8c81, { 0xef });
        gbc.writeMem(0xe64c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xe64c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8c81));
        EXPECT(0x82, gbc.readMem(0xe64c));
        EXPECT(0x8c, gbc.readMem(0xe64d));
        // EF 004F
        gbc.setState(0xc068, 0xf76d, 0xdae0, 0x5d2d, 0x74c6, 0x8422, 0x0, 0x0);
        gbc.writeMem(0xc068, { 0xef });
        gbc.writeMem(0xf76b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xf76b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc068));
        EXPECT(0x69, gbc.readMem(0xf76b));
        EXPECT(0xc0, gbc.readMem(0xf76c));
        // EF 0057
        gbc.setState(0xc9b, 0xdad4, 0xda80, 0xf48e, 0x34d, 0xea23, 0x1, 0x0);
        gbc.writeMem(0xc9b, { 0xef });
        gbc.writeMem(0xdad2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xdad2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9c, gbc.readMem(0xdad2));
        EXPECT(0xc, gbc.readMem(0xdad3));
        // EF 005B
        gbc.setState(0x5b3f, 0xe342, 0x4a60, 0x2eb2, 0xe5cf, 0x1ce0, 0x0, 0x0);
        gbc.writeMem(0x5b3f, { 0xef });
        gbc.writeMem(0xe340, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xe340, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xe340));
        EXPECT(0x5b, gbc.readMem(0xe341));
        // EF 005C
        gbc.setState(0x94dc, 0x8865, 0x7ba0, 0x3b6a, 0x2fde, 0x8a2e, 0x1, 0x1);
        gbc.writeMem(0x8863, { 0x0, 0x0 });
        gbc.writeMem(0x94dc, { 0xef });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x8863, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0x8863));
        EXPECT(0x94, gbc.readMem(0x8864));
        EXPECT(0xef, gbc.readMem(0x94dc));
        // EF 005E
        gbc.setState(0xb2c, 0x92b9, 0x5580, 0x2d4f, 0xd33, 0x1e1f, 0x0, 0x0);
        gbc.writeMem(0xb2c, { 0xef });
        gbc.writeMem(0x92b7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x92b7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0x92b7));
        EXPECT(0xb, gbc.readMem(0x92b8));
        // EF 0060
        gbc.setState(0xcb1b, 0xa962, 0x6130, 0xcb1, 0xa24e, 0x27dd, 0x0, 0x1);
        gbc.writeMem(0xa960, { 0x0, 0x0 });
        gbc.writeMem(0xcb1b, { 0xef });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xa960, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0xa960));
        EXPECT(0xcb, gbc.readMem(0xa961));
        EXPECT(0xef, gbc.readMem(0xcb1b));
        // EF 0064
        gbc.setState(0x50f3, 0xfcd5, 0xe290, 0x19c7, 0x8025, 0x6601, 0x1, 0x1);
        gbc.writeMem(0x50f3, { 0xef });
        gbc.writeMem(0xfcd3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xfcd3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf4, gbc.readMem(0xfcd3));
        EXPECT(0x50, gbc.readMem(0xfcd4));
        // EF 0065
        gbc.setState(0x3fad, 0xf28e, 0x50, 0x695c, 0x37c5, 0x8394, 0x0, 0x1);
        gbc.writeMem(0x3fad, { 0xef });
        gbc.writeMem(0xf28c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xf28c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xae, gbc.readMem(0xf28c));
        EXPECT(0x3f, gbc.readMem(0xf28d));
        // EF 0066
        gbc.setState(0x3bbb, 0x8d1a, 0x5ea0, 0x8c0f, 0xafeb, 0x19bd, 0x1, 0x0);
        gbc.writeMem(0x3bbb, { 0xef });
        gbc.writeMem(0x8d18, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8d18, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0x8d18));
        EXPECT(0x3b, gbc.readMem(0x8d19));
        // EF 0069
        gbc.setState(0x1199, 0xc297, 0xf9b0, 0x8c76, 0xca2d, 0xd823, 0x1, 0x1);
        gbc.writeMem(0x1199, { 0xef });
        gbc.writeMem(0xc295, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xc295, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9a, gbc.readMem(0xc295));
        EXPECT(0x11, gbc.readMem(0xc296));
        // EF 006B
        gbc.setState(0x80d7, 0xaf7b, 0x4200, 0x66b0, 0xcab5, 0xb56d, 0x1, 0x0);
        gbc.writeMem(0x80d7, { 0xef });
        gbc.writeMem(0xaf79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xaf79, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x80d7));
        EXPECT(0xd8, gbc.readMem(0xaf79));
        EXPECT(0x80, gbc.readMem(0xaf7a));
        // EF 0074
        gbc.setState(0xb458, 0xead5, 0xa020, 0x2385, 0xab6, 0xeb67, 0x0, 0x1);
        gbc.writeMem(0xb458, { 0xef });
        gbc.writeMem(0xead3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xead3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb458));
        EXPECT(0x59, gbc.readMem(0xead3));
        EXPECT(0xb4, gbc.readMem(0xead4));
        // EF 0076
        gbc.setState(0x4654, 0x8582, 0x5bb0, 0x72f9, 0x1900, 0x59d4, 0x0, 0x0);
        gbc.writeMem(0x4654, { 0xef });
        gbc.writeMem(0x8580, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x8580, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x55, gbc.readMem(0x8580));
        EXPECT(0x46, gbc.readMem(0x8581));
        // EF 0077
        gbc.setState(0x335a, 0xe39f, 0x6ca0, 0x7fd2, 0xb208, 0x7ea5, 0x0, 0x0);
        gbc.writeMem(0x335a, { 0xef });
        gbc.writeMem(0xe39d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xe39d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0xe39d));
        EXPECT(0x33, gbc.readMem(0xe39e));
        // EF 007C
        gbc.setState(0x69a0, 0xce76, 0xb030, 0xc5ed, 0xb97, 0xb054, 0x0, 0x1);
        gbc.writeMem(0x69a0, { 0xef });
        gbc.writeMem(0xce74, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xce74, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0xce74));
        EXPECT(0x69, gbc.readMem(0xce75));
        // EF 007E
        gbc.setState(0x82ca, 0x9abe, 0x74e0, 0xcb6, 0x61bb, 0x6efe, 0x0, 0x1);
        gbc.writeMem(0x82ca, { 0xef });
        gbc.writeMem(0x9abc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x9abc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x82ca));
        EXPECT(0xcb, gbc.readMem(0x9abc));
        EXPECT(0x82, gbc.readMem(0x9abd));
        // EF 007F
        gbc.setState(0x28a0, 0xf013, 0xbd0, 0x8228, 0x4cc5, 0xd9f6, 0x1, 0x1);
        gbc.writeMem(0x28a0, { 0xef });
        gbc.writeMem(0xf011, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xf011, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0xf011));
        EXPECT(0x28, gbc.readMem(0xf012));
        // EF 0082
        gbc.setState(0xcb84, 0xf68b, 0xdeb0, 0x5ab1, 0x6f80, 0x8d6a, 0x0, 0x1);
        gbc.writeMem(0xcb84, { 0xef });
        gbc.writeMem(0xf689, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xf689, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcb84));
        EXPECT(0x85, gbc.readMem(0xf689));
        EXPECT(0xcb, gbc.readMem(0xf68a));
        // EF 0083
        gbc.setState(0x7496, 0x82be, 0x2370, 0x91ac, 0x635c, 0xb203, 0x1, 0x0);
        gbc.writeMem(0x7496, { 0xef });
        gbc.writeMem(0x82bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x82bc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x97, gbc.readMem(0x82bc));
        EXPECT(0x74, gbc.readMem(0x82bd));
        // EF 0084
        gbc.setState(0xac24, 0xd8ba, 0x3410, 0x8234, 0x9040, 0xde2e, 0x1, 0x0);
        gbc.writeMem(0xac24, { 0xef });
        gbc.writeMem(0xd8b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xd8b8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xac24));
        EXPECT(0x25, gbc.readMem(0xd8b8));
        EXPECT(0xac, gbc.readMem(0xd8b9));
        // EF 0085
        gbc.setState(0x3e94, 0xf55b, 0x1190, 0x56e3, 0x9147, 0x410e, 0x1, 0x1);
        gbc.writeMem(0x3e94, { 0xef });
        gbc.writeMem(0xf559, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xf559, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x95, gbc.readMem(0xf559));
        EXPECT(0x3e, gbc.readMem(0xf55a));
        // EF 0089
        gbc.setState(0xdfd6, 0xe3fb, 0x91c0, 0xd3ee, 0x5f43, 0x858b, 0x0, 0x0);
        gbc.writeMem(0xdfd6, { 0xef });
        gbc.writeMem(0xe3f9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe3f9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xdfd6));
        EXPECT(0xd7, gbc.readMem(0xe3f9));
        EXPECT(0xdf, gbc.readMem(0xe3fa));
        // EF 008A
        gbc.setState(0x52f0, 0xc457, 0xc890, 0x3ce0, 0xace1, 0x81a0, 0x0, 0x1);
        gbc.writeMem(0x52f0, { 0xef });
        gbc.writeMem(0xc455, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xc455, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf1, gbc.readMem(0xc455));
        EXPECT(0x52, gbc.readMem(0xc456));
        // EF 008C
        gbc.setState(0x9509, 0xc343, 0xea0, 0x4221, 0x9d67, 0x38bf, 0x0, 0x0);
        gbc.writeMem(0x9509, { 0xef });
        gbc.writeMem(0xc341, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xc341, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9509));
        EXPECT(0xa, gbc.readMem(0xc341));
        EXPECT(0x95, gbc.readMem(0xc342));
        // EF 008E
        gbc.setState(0xbed4, 0xce69, 0x9690, 0xf113, 0x6727, 0x7653, 0x1, 0x1);
        gbc.writeMem(0xbed4, { 0xef });
        gbc.writeMem(0xce67, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xce67, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbed4));
        EXPECT(0xd5, gbc.readMem(0xce67));
        EXPECT(0xbe, gbc.readMem(0xce68));
        // EF 0092
        gbc.setState(0x502e, 0xecbb, 0x9680, 0x511a, 0x829d, 0x9f80, 0x0, 0x0);
        gbc.writeMem(0x502e, { 0xef });
        gbc.writeMem(0xecb9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xecb9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xecb9));
        EXPECT(0x50, gbc.readMem(0xecba));
        // EF 0093
        gbc.setState(0xe16e, 0x9fa5, 0x8e50, 0xb7a7, 0xafa2, 0x1f68, 0x0, 0x1);
        gbc.writeMem(0x9fa3, { 0x0, 0x0 });
        gbc.writeMem(0xe16e, { 0xef });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x9fa3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6f, gbc.readMem(0x9fa3));
        EXPECT(0xe1, gbc.readMem(0x9fa4));
        EXPECT(0xef, gbc.readMem(0xe16e));
        // EF 0099
        gbc.setState(0x5b08, 0x8e1e, 0xaff0, 0xeea1, 0x6fdd, 0xf368, 0x0, 0x1);
        gbc.writeMem(0x5b08, { 0xef });
        gbc.writeMem(0x8e1c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x8e1c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0x8e1c));
        EXPECT(0x5b, gbc.readMem(0x8e1d));
        // EF 009B
        gbc.setState(0x9221, 0xbacf, 0xbf00, 0xcd6a, 0xdca2, 0xadbf, 0x0, 0x0);
        gbc.writeMem(0x9221, { 0xef });
        gbc.writeMem(0xbacd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xbacd, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9221));
        EXPECT(0x22, gbc.readMem(0xbacd));
        EXPECT(0x92, gbc.readMem(0xbace));
        // EF 009D
        gbc.setState(0x4ba7, 0xe92e, 0xca80, 0x57a0, 0xc8b0, 0xa6cf, 0x0, 0x1);
        gbc.writeMem(0x4ba7, { 0xef });
        gbc.writeMem(0xe92c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xe92c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0xe92c));
        EXPECT(0x4b, gbc.readMem(0xe92d));
        // EF 009F
        gbc.setState(0x4c42, 0xd966, 0xfdb0, 0xdbb9, 0xa127, 0x4767, 0x0, 0x0);
        gbc.writeMem(0x4c42, { 0xef });
        gbc.writeMem(0xd964, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xd964, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xd964));
        EXPECT(0x4c, gbc.readMem(0xd965));
        // EF 00A1
        gbc.setState(0xac7e, 0xfb8a, 0x4540, 0x8b93, 0x9875, 0x6f39, 0x0, 0x1);
        gbc.writeMem(0xac7e, { 0xef });
        gbc.writeMem(0xfb88, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xfb88, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xac7e));
        EXPECT(0x7f, gbc.readMem(0xfb88));
        EXPECT(0xac, gbc.readMem(0xfb89));
        // EF 00A3
        gbc.setState(0xa176, 0xea31, 0x2700, 0x9024, 0x687b, 0xf287, 0x1, 0x0);
        gbc.writeMem(0xa176, { 0xef });
        gbc.writeMem(0xea2f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xea2f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa176));
        EXPECT(0x77, gbc.readMem(0xea2f));
        EXPECT(0xa1, gbc.readMem(0xea30));
        // EF 00A7
        gbc.setState(0x2914, 0x9612, 0xf240, 0x657f, 0xedda, 0xc1d2, 0x1, 0x0);
        gbc.writeMem(0x2914, { 0xef });
        gbc.writeMem(0x9610, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x9610, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x15, gbc.readMem(0x9610));
        EXPECT(0x29, gbc.readMem(0x9611));
        // EF 00A8
        gbc.setState(0x15, 0xe12b, 0x1600, 0x6f61, 0xfa88, 0x32d6, 0x1, 0x0);
        gbc.writeMem(0x15, { 0xef });
        gbc.writeMem(0xe129, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xe129, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x16, gbc.readMem(0xe129));
        EXPECT(0x0, gbc.readMem(0xe12a));
        // EF 00AA
        gbc.setState(0x22a0, 0x87f8, 0x6360, 0xd867, 0xa611, 0x961d, 0x0, 0x1);
        gbc.writeMem(0x22a0, { 0xef });
        gbc.writeMem(0x87f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x87f6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0x87f6));
        EXPECT(0x22, gbc.readMem(0x87f7));
        // EF 00AB
        gbc.setState(0x40cb, 0xed11, 0xd260, 0xb695, 0x186e, 0x3cee, 0x0, 0x0);
        gbc.writeMem(0x40cb, { 0xef });
        gbc.writeMem(0xed0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xed0f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xed0f));
        EXPECT(0x40, gbc.readMem(0xed10));
        // EF 00AC
        gbc.setState(0x6603, 0xde47, 0xf410, 0x3a12, 0x83a8, 0x1e57, 0x0, 0x1);
        gbc.writeMem(0x6603, { 0xef });
        gbc.writeMem(0xde45, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xde45, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xde45));
        EXPECT(0x66, gbc.readMem(0xde46));
        // EF 00B0
        gbc.setState(0x7628, 0xa209, 0x4800, 0x4711, 0xc43a, 0x33ed, 0x1, 0x1);
        gbc.writeMem(0x7628, { 0xef });
        gbc.writeMem(0xa207, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xa207, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xa207));
        EXPECT(0x76, gbc.readMem(0xa208));
        // EF 00B1
        gbc.setState(0x8de9, 0xa691, 0xb2f0, 0xc61f, 0xdac9, 0x7a42, 0x1, 0x0);
        gbc.writeMem(0x8de9, { 0xef });
        gbc.writeMem(0xa68f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xa68f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8de9));
        EXPECT(0xea, gbc.readMem(0xa68f));
        EXPECT(0x8d, gbc.readMem(0xa690));
        // EF 00B3
        gbc.setState(0x3d43, 0xc93a, 0x9280, 0xa246, 0x444b, 0xb12d, 0x0, 0x1);
        gbc.writeMem(0x3d43, { 0xef });
        gbc.writeMem(0xc938, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xc938, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xc938));
        EXPECT(0x3d, gbc.readMem(0xc939));
        // EF 00B5
        gbc.setState(0xa504, 0xf620, 0x32a0, 0x3ba8, 0x93c9, 0xe4e3, 0x0, 0x1);
        gbc.writeMem(0xa504, { 0xef });
        gbc.writeMem(0xf61e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xf61e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa504));
        EXPECT(0x5, gbc.readMem(0xf61e));
        EXPECT(0xa5, gbc.readMem(0xf61f));
        // EF 00B6
        gbc.setState(0xb89f, 0xf839, 0x6130, 0x4f9e, 0xa487, 0x998d, 0x0, 0x1);
        gbc.writeMem(0xb89f, { 0xef });
        gbc.writeMem(0xf837, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xf837, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb89f));
        EXPECT(0xa0, gbc.readMem(0xf837));
        EXPECT(0xb8, gbc.readMem(0xf838));
        // EF 00B9
        gbc.setState(0x8a4a, 0x9686, 0x9350, 0xc9ef, 0x57f2, 0xa0f0, 0x1, 0x1);
        gbc.writeMem(0x8a4a, { 0xef });
        gbc.writeMem(0x9684, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9684, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8a4a));
        EXPECT(0x4b, gbc.readMem(0x9684));
        EXPECT(0x8a, gbc.readMem(0x9685));
        // EF 00BA
        gbc.setState(0xd303, 0xc72c, 0xb6a0, 0xe610, 0xef85, 0x42b0, 0x0, 0x0);
        gbc.writeMem(0xc72a, { 0x0, 0x0 });
        gbc.writeMem(0xd303, { 0xef });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xc72a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0xc72a));
        EXPECT(0xd3, gbc.readMem(0xc72b));
        EXPECT(0xef, gbc.readMem(0xd303));
        // EF 00BD
        gbc.setState(0x333, 0xc079, 0x4530, 0xa54c, 0x1cbb, 0x84c4, 0x0, 0x0);
        gbc.writeMem(0x333, { 0xef });
        gbc.writeMem(0xc077, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xc077, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0xc077));
        EXPECT(0x3, gbc.readMem(0xc078));
        // EF 00BE
        gbc.setState(0x5913, 0x9496, 0x6780, 0xa338, 0x9f70, 0x5432, 0x1, 0x1);
        gbc.writeMem(0x5913, { 0xef });
        gbc.writeMem(0x9494, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x9494, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x14, gbc.readMem(0x9494));
        EXPECT(0x59, gbc.readMem(0x9495));
        // EF 00BF
        gbc.setState(0xa5c4, 0xefd1, 0x6b10, 0x7387, 0x158c, 0x6d6a, 0x0, 0x0);
        gbc.writeMem(0xa5c4, { 0xef });
        gbc.writeMem(0xefcf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xefcf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa5c4));
        EXPECT(0xc5, gbc.readMem(0xefcf));
        EXPECT(0xa5, gbc.readMem(0xefd0));
        // EF 00C4
        gbc.setState(0x71e4, 0xbc9f, 0xf710, 0xaf50, 0x36a2, 0xcc23, 0x0, 0x1);
        gbc.writeMem(0x71e4, { 0xef });
        gbc.writeMem(0xbc9d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xbc9d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xbc9d));
        EXPECT(0x71, gbc.readMem(0xbc9e));
        // EF 00C5
        gbc.setState(0x10f2, 0xc553, 0xeac0, 0xc351, 0x6961, 0x2091, 0x1, 0x0);
        gbc.writeMem(0x10f2, { 0xef });
        gbc.writeMem(0xc551, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xc551, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf3, gbc.readMem(0xc551));
        EXPECT(0x10, gbc.readMem(0xc552));
        // EF 00C8
        gbc.setState(0x8375, 0xa5d2, 0x1f30, 0xfbe6, 0x54dd, 0xed58, 0x1, 0x1);
        gbc.writeMem(0x8375, { 0xef });
        gbc.writeMem(0xa5d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xa5d0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8375));
        EXPECT(0x76, gbc.readMem(0xa5d0));
        EXPECT(0x83, gbc.readMem(0xa5d1));
        // EF 00C9
        gbc.setState(0x4644, 0xb634, 0x4db0, 0x17ed, 0xb794, 0xce8f, 0x0, 0x1);
        gbc.writeMem(0x4644, { 0xef });
        gbc.writeMem(0xb632, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xb632, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x45, gbc.readMem(0xb632));
        EXPECT(0x46, gbc.readMem(0xb633));
        // EF 00CB
        gbc.setState(0x7251, 0xb9a7, 0xa850, 0xaac9, 0x7bb, 0x4a3b, 0x1, 0x0);
        gbc.writeMem(0x7251, { 0xef });
        gbc.writeMem(0xb9a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xb9a5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x52, gbc.readMem(0xb9a5));
        EXPECT(0x72, gbc.readMem(0xb9a6));
        // EF 00CC
        gbc.setState(0x4da3, 0x82dd, 0x5b40, 0xfc2c, 0x72b1, 0xc2ea, 0x0, 0x1);
        gbc.writeMem(0x4da3, { 0xef });
        gbc.writeMem(0x82db, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x82db, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0x82db));
        EXPECT(0x4d, gbc.readMem(0x82dc));
        // EF 00CE
        gbc.setState(0x8e26, 0xea82, 0xb5e0, 0x50be, 0x22b3, 0xc1d3, 0x1, 0x1);
        gbc.writeMem(0x8e26, { 0xef });
        gbc.writeMem(0xea80, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xea80, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8e26));
        EXPECT(0x27, gbc.readMem(0xea80));
        EXPECT(0x8e, gbc.readMem(0xea81));
        // EF 00D0
        gbc.setState(0x419c, 0xb29e, 0xfe80, 0xacd8, 0x6fe6, 0x3d97, 0x0, 0x1);
        gbc.writeMem(0x419c, { 0xef });
        gbc.writeMem(0xb29c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb29c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9d, gbc.readMem(0xb29c));
        EXPECT(0x41, gbc.readMem(0xb29d));
        // EF 00D1
        gbc.setState(0xbc33, 0xed30, 0xb290, 0x21f7, 0x1ae4, 0xc3ac, 0x0, 0x1);
        gbc.writeMem(0xbc33, { 0xef });
        gbc.writeMem(0xed2e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xed2e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbc33));
        EXPECT(0x34, gbc.readMem(0xed2e));
        EXPECT(0xbc, gbc.readMem(0xed2f));
        // EF 00D8
        gbc.setState(0xe23f, 0x9a27, 0x8840, 0x9053, 0x7685, 0x7bbe, 0x1, 0x0);
        gbc.writeMem(0x9a25, { 0x0, 0x0 });
        gbc.writeMem(0xe23f, { 0xef });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x9a25, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0x9a25));
        EXPECT(0xe2, gbc.readMem(0x9a26));
        EXPECT(0xef, gbc.readMem(0xe23f));
        // EF 00DB
        gbc.setState(0x4334, 0x98c0, 0x6e00, 0xb29e, 0x209e, 0x9427, 0x0, 0x1);
        gbc.writeMem(0x4334, { 0xef });
        gbc.writeMem(0x98be, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x98be, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x98be));
        EXPECT(0x43, gbc.readMem(0x98bf));
        // EF 00DC
        gbc.setState(0x1730, 0x8734, 0x9c20, 0xb43c, 0xb4d9, 0x64bd, 0x1, 0x0);
        gbc.writeMem(0x1730, { 0xef });
        gbc.writeMem(0x8732, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8732, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0x8732));
        EXPECT(0x17, gbc.readMem(0x8733));
        // EF 00DF
        gbc.setState(0x285d, 0xd0ae, 0x2260, 0xd345, 0x437e, 0x97a3, 0x1, 0x1);
        gbc.writeMem(0x285d, { 0xef });
        gbc.writeMem(0xd0ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xd0ac, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0xd0ac));
        EXPECT(0x28, gbc.readMem(0xd0ad));
        // EF 00E1
        gbc.setState(0x86a6, 0xce37, 0x6480, 0x6333, 0x6455, 0x7eab, 0x1, 0x1);
        gbc.writeMem(0x86a6, { 0xef });
        gbc.writeMem(0xce35, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xce35, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x86a6));
        EXPECT(0xa7, gbc.readMem(0xce35));
        EXPECT(0x86, gbc.readMem(0xce36));
        // EF 00E2
        gbc.setState(0x8a02, 0xf374, 0x34d0, 0xd8ce, 0x45, 0x4d48, 0x0, 0x0);
        gbc.writeMem(0x8a02, { 0xef });
        gbc.writeMem(0xf372, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xf372, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8a02));
        EXPECT(0x3, gbc.readMem(0xf372));
        EXPECT(0x8a, gbc.readMem(0xf373));
        // EF 00E3
        gbc.setState(0x522c, 0x96cf, 0xe20, 0x9a82, 0xaf15, 0x48e3, 0x0, 0x1);
        gbc.writeMem(0x522c, { 0xef });
        gbc.writeMem(0x96cd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x96cd, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0x96cd));
        EXPECT(0x52, gbc.readMem(0x96ce));
        // EF 00E4
        gbc.setState(0xd234, 0x9dd6, 0xa3b0, 0xfbe4, 0xfe29, 0x131b, 0x0, 0x0);
        gbc.writeMem(0x9dd4, { 0x0, 0x0 });
        gbc.writeMem(0xd234, { 0xef });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x9dd4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x9dd4));
        EXPECT(0xd2, gbc.readMem(0x9dd5));
        EXPECT(0xef, gbc.readMem(0xd234));
        // EF 00E7
        gbc.setState(0xe02f, 0xa8d8, 0x79c0, 0x726, 0xc07f, 0xbda3, 0x1, 0x0);
        gbc.writeMem(0xa8d6, { 0x0, 0x0 });
        gbc.writeMem(0xe02f, { 0xef });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xa8d6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x30, gbc.readMem(0xa8d6));
        EXPECT(0xe0, gbc.readMem(0xa8d7));
        EXPECT(0xef, gbc.readMem(0xe02f));
        // EF 00E8
        gbc.setState(0x7f28, 0xba5e, 0xbf40, 0xbcb, 0xbfef, 0x681e, 0x1, 0x0);
        gbc.writeMem(0x7f28, { 0xef });
        gbc.writeMem(0xba5c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xba5c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x29, gbc.readMem(0xba5c));
        EXPECT(0x7f, gbc.readMem(0xba5d));
        // EF 00E9
        gbc.setState(0xb16c, 0x825d, 0x6470, 0xbc29, 0x467e, 0xab6b, 0x1, 0x0);
        gbc.writeMem(0x825b, { 0x0, 0x0 });
        gbc.writeMem(0xb16c, { 0xef });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x825b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6d, gbc.readMem(0x825b));
        EXPECT(0xb1, gbc.readMem(0x825c));
        EXPECT(0xef, gbc.readMem(0xb16c));
        // EF 00EB
        gbc.setState(0x6ac0, 0x866f, 0xe9f0, 0x18b7, 0x274d, 0x4229, 0x0, 0x0);
        gbc.writeMem(0x6ac0, { 0xef });
        gbc.writeMem(0x866d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x866d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc1, gbc.readMem(0x866d));
        EXPECT(0x6a, gbc.readMem(0x866e));
        // EF 00EC
        gbc.setState(0xe599, 0xd2a5, 0x16a0, 0x223f, 0xfd11, 0x1d01, 0x0, 0x0);
        gbc.writeMem(0xd2a3, { 0x0, 0x0 });
        gbc.writeMem(0xe599, { 0xef });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xd2a3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9a, gbc.readMem(0xd2a3));
        EXPECT(0xe5, gbc.readMem(0xd2a4));
        EXPECT(0xef, gbc.readMem(0xe599));
        // EF 00ED
        gbc.setState(0xee34, 0x8135, 0x35b0, 0xb76c, 0xc22, 0x295a, 0x1, 0x1);
        gbc.writeMem(0x8133, { 0x0, 0x0 });
        gbc.writeMem(0xee34, { 0xef });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8133, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x8133));
        EXPECT(0xee, gbc.readMem(0x8134));
        EXPECT(0xef, gbc.readMem(0xee34));
        // EF 00EE
        gbc.setState(0xe501, 0xcba2, 0xefe0, 0xb922, 0xb3b9, 0x7b71, 0x0, 0x0);
        gbc.writeMem(0xcba0, { 0x0, 0x0 });
        gbc.writeMem(0xe501, { 0xef });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xcba0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xcba0));
        EXPECT(0xe5, gbc.readMem(0xcba1));
        EXPECT(0xef, gbc.readMem(0xe501));
        // EF 00F0
        gbc.setState(0x634f, 0x911f, 0x3680, 0x386c, 0xcfb9, 0xeccd, 0x0, 0x1);
        gbc.writeMem(0x634f, { 0xef });
        gbc.writeMem(0x911d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x911d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0x911d));
        EXPECT(0x63, gbc.readMem(0x911e));
        // EF 00F2
        gbc.setState(0xc93d, 0x8deb, 0xb800, 0xfa46, 0x74f8, 0x2a62, 0x1, 0x0);
        gbc.writeMem(0x8de9, { 0x0, 0x0 });
        gbc.writeMem(0xc93d, { 0xef });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x8de9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3e, gbc.readMem(0x8de9));
        EXPECT(0xc9, gbc.readMem(0x8dea));
        EXPECT(0xef, gbc.readMem(0xc93d));
        // EF 00FB
        gbc.setState(0x6809, 0xf776, 0x2f60, 0x62fe, 0xb259, 0x2e8c, 0x1, 0x0);
        gbc.writeMem(0x6809, { 0xef });
        gbc.writeMem(0xf774, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xf774, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xf774));
        EXPECT(0x68, gbc.readMem(0xf775));
        // EF 00FD
        gbc.setState(0xac71, 0xc7b9, 0x65f0, 0x923d, 0x509d, 0xdb98, 0x0, 0x0);
        gbc.writeMem(0xac71, { 0xef });
        gbc.writeMem(0xc7b7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xc7b7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xac71));
        EXPECT(0x72, gbc.readMem(0xc7b7));
        EXPECT(0xac, gbc.readMem(0xc7b8));
        // EF 00FE
        gbc.setState(0x8612, 0xb3b0, 0xd470, 0x2e65, 0x8472, 0x9082, 0x0, 0x0);
        gbc.writeMem(0x8612, { 0xef });
        gbc.writeMem(0xb3ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xb3ae, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8612));
        EXPECT(0x13, gbc.readMem(0xb3ae));
        EXPECT(0x86, gbc.readMem(0xb3af));
        // EF 00FF
        gbc.setState(0x662, 0xfdd0, 0x12c0, 0x3cdd, 0x87, 0xb08f, 0x1, 0x1);
        gbc.writeMem(0x662, { 0xef });
        gbc.writeMem(0xfdce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xfdce, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xfdce));
        EXPECT(0x6, gbc.readMem(0xfdcf));
        // EF 0102
        gbc.setState(0xcbd2, 0xf6ef, 0xafc0, 0x70ac, 0x745f, 0xa6e4, 0x1, 0x1);
        gbc.writeMem(0xcbd2, { 0xef });
        gbc.writeMem(0xf6ed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xf6ed, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcbd2));
        EXPECT(0xd3, gbc.readMem(0xf6ed));
        EXPECT(0xcb, gbc.readMem(0xf6ee));
        // EF 0104
        gbc.setState(0x78bb, 0xd47c, 0x9150, 0x1f1f, 0x7d87, 0x7914, 0x1, 0x0);
        gbc.writeMem(0x78bb, { 0xef });
        gbc.writeMem(0xd47a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xd47a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0xd47a));
        EXPECT(0x78, gbc.readMem(0xd47b));
        // EF 0106
        gbc.setState(0x9a27, 0x9596, 0xe120, 0x1c39, 0x1aa7, 0x2464, 0x0, 0x0);
        gbc.writeMem(0x9594, { 0x0, 0x0 });
        gbc.writeMem(0x9a27, { 0xef });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x9594, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0x9594));
        EXPECT(0x9a, gbc.readMem(0x9595));
        EXPECT(0xef, gbc.readMem(0x9a27));
        // EF 0108
        gbc.setState(0x955e, 0xa6cb, 0x4ba0, 0x5fd4, 0x5cd7, 0xb55d, 0x1, 0x1);
        gbc.writeMem(0x955e, { 0xef });
        gbc.writeMem(0xa6c9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xa6c9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x955e));
        EXPECT(0x5f, gbc.readMem(0xa6c9));
        EXPECT(0x95, gbc.readMem(0xa6ca));
        // EF 010A
        gbc.setState(0x5ab7, 0xd463, 0x77b0, 0x215f, 0x96e7, 0x6f39, 0x1, 0x1);
        gbc.writeMem(0x5ab7, { 0xef });
        gbc.writeMem(0xd461, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xd461, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0xd461));
        EXPECT(0x5a, gbc.readMem(0xd462));
        // EF 010D
        gbc.setState(0xd238, 0x8a19, 0x4960, 0x48b6, 0x47c4, 0xbdae, 0x1, 0x1);
        gbc.writeMem(0x8a17, { 0x0, 0x0 });
        gbc.writeMem(0xd238, { 0xef });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x8a17, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0x8a17));
        EXPECT(0xd2, gbc.readMem(0x8a18));
        EXPECT(0xef, gbc.readMem(0xd238));
        // EF 010E
        gbc.setState(0x676f, 0xc4c6, 0x1f80, 0xd27, 0x2434, 0xc1a, 0x0, 0x0);
        gbc.writeMem(0x676f, { 0xef });
        gbc.writeMem(0xc4c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xc4c4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xc4c4));
        EXPECT(0x67, gbc.readMem(0xc4c5));
        // EF 0111
        gbc.setState(0x9608, 0xc5b4, 0x5a50, 0x9fd0, 0x8e44, 0x1f0b, 0x1, 0x1);
        gbc.writeMem(0x9608, { 0xef });
        gbc.writeMem(0xc5b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc5b2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9608));
        EXPECT(0x9, gbc.readMem(0xc5b2));
        EXPECT(0x96, gbc.readMem(0xc5b3));
        // EF 0112
        gbc.setState(0x387, 0x860e, 0x7820, 0xd4c9, 0x83ce, 0x438f, 0x0, 0x1);
        gbc.writeMem(0x387, { 0xef });
        gbc.writeMem(0x860c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x860c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x88, gbc.readMem(0x860c));
        EXPECT(0x3, gbc.readMem(0x860d));
        // EF 0117
        gbc.setState(0xd288, 0xa48a, 0xa5b0, 0x56ae, 0x4e99, 0x2711, 0x0, 0x1);
        gbc.writeMem(0xa488, { 0x0, 0x0 });
        gbc.writeMem(0xd288, { 0xef });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xa488, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x89, gbc.readMem(0xa488));
        EXPECT(0xd2, gbc.readMem(0xa489));
        EXPECT(0xef, gbc.readMem(0xd288));
        // EF 0119
        gbc.setState(0xd5f0, 0x8f90, 0xf6a0, 0xeaef, 0x74b9, 0xb57a, 0x0, 0x0);
        gbc.writeMem(0x8f8e, { 0x0, 0x0 });
        gbc.writeMem(0xd5f0, { 0xef });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x8f8e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf1, gbc.readMem(0x8f8e));
        EXPECT(0xd5, gbc.readMem(0x8f8f));
        EXPECT(0xef, gbc.readMem(0xd5f0));
        // EF 011C
        gbc.setState(0xd703, 0xf542, 0x2b40, 0x43ca, 0xbc0a, 0xf8ee, 0x1, 0x0);
        gbc.writeMem(0xd703, { 0xef });
        gbc.writeMem(0xf540, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xf540, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd703));
        EXPECT(0x4, gbc.readMem(0xf540));
        EXPECT(0xd7, gbc.readMem(0xf541));
        // EF 011F
        gbc.setState(0x255d, 0xa485, 0xdbd0, 0x61bb, 0x7924, 0xba37, 0x1, 0x1);
        gbc.writeMem(0x255d, { 0xef });
        gbc.writeMem(0xa483, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xa483, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5e, gbc.readMem(0xa483));
        EXPECT(0x25, gbc.readMem(0xa484));
        // EF 0120
        gbc.setState(0x209e, 0xf0e5, 0xb880, 0xa669, 0x77cc, 0x4bbe, 0x0, 0x1);
        gbc.writeMem(0x209e, { 0xef });
        gbc.writeMem(0xf0e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xf0e3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9f, gbc.readMem(0xf0e3));
        EXPECT(0x20, gbc.readMem(0xf0e4));
        // EF 0122
        gbc.setState(0x84b7, 0x8dfd, 0x3fa0, 0xe1d0, 0x42bd, 0x3035, 0x0, 0x0);
        gbc.writeMem(0x84b7, { 0xef });
        gbc.writeMem(0x8dfb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x8dfb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x84b7));
        EXPECT(0xb8, gbc.readMem(0x8dfb));
        EXPECT(0x84, gbc.readMem(0x8dfc));
        // EF 0123
        gbc.setState(0xec5c, 0x9096, 0x1840, 0x4adc, 0x7c41, 0x4bc6, 0x1, 0x1);
        gbc.writeMem(0x9094, { 0x0, 0x0 });
        gbc.writeMem(0xec5c, { 0xef });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x9094, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5d, gbc.readMem(0x9094));
        EXPECT(0xec, gbc.readMem(0x9095));
        EXPECT(0xef, gbc.readMem(0xec5c));
        // EF 0124
        gbc.setState(0x25ea, 0xa3b2, 0x3c10, 0x22e8, 0x1a6a, 0x28d7, 0x1, 0x0);
        gbc.writeMem(0x25ea, { 0xef });
        gbc.writeMem(0xa3b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xa3b0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xa3b0));
        EXPECT(0x25, gbc.readMem(0xa3b1));
        // EF 012A
        gbc.setState(0x6050, 0xacd8, 0xc2c0, 0x61b5, 0xff99, 0xebb2, 0x1, 0x0);
        gbc.writeMem(0x6050, { 0xef });
        gbc.writeMem(0xacd6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xacd6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x51, gbc.readMem(0xacd6));
        EXPECT(0x60, gbc.readMem(0xacd7));
        // EF 012C
        gbc.setState(0xd370, 0xa9a1, 0xd9f0, 0xc52d, 0x97f7, 0x7b2, 0x0, 0x1);
        gbc.writeMem(0xa99f, { 0x0, 0x0 });
        gbc.writeMem(0xd370, { 0xef });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xa99f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0xa99f));
        EXPECT(0xd3, gbc.readMem(0xa9a0));
        EXPECT(0xef, gbc.readMem(0xd370));
        // EF 012F
        gbc.setState(0x72e1, 0xa3bd, 0xcc10, 0x5013, 0xa0a0, 0x9e38, 0x1, 0x1);
        gbc.writeMem(0x72e1, { 0xef });
        gbc.writeMem(0xa3bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xa3bb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe2, gbc.readMem(0xa3bb));
        EXPECT(0x72, gbc.readMem(0xa3bc));
        // EF 0130
        gbc.setState(0x85cf, 0xa7a6, 0x480, 0x66b1, 0x2603, 0xbe1c, 0x1, 0x0);
        gbc.writeMem(0x85cf, { 0xef });
        gbc.writeMem(0xa7a4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xa7a4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x85cf));
        EXPECT(0xd0, gbc.readMem(0xa7a4));
        EXPECT(0x85, gbc.readMem(0xa7a5));
        // EF 0131
        gbc.setState(0x59d5, 0xd9cf, 0x670, 0xa670, 0x55ae, 0xae85, 0x1, 0x0);
        gbc.writeMem(0x59d5, { 0xef });
        gbc.writeMem(0xd9cd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xd9cd, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd6, gbc.readMem(0xd9cd));
        EXPECT(0x59, gbc.readMem(0xd9ce));
        // EF 0132
        gbc.setState(0x997b, 0xdae2, 0xac0, 0x51de, 0x2944, 0xd1b4, 0x1, 0x0);
        gbc.writeMem(0x997b, { 0xef });
        gbc.writeMem(0xdae0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xdae0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x997b));
        EXPECT(0x7c, gbc.readMem(0xdae0));
        EXPECT(0x99, gbc.readMem(0xdae1));
        // EF 0133
        gbc.setState(0xb61, 0xc068, 0xf440, 0x3946, 0x40fd, 0xe6a2, 0x1, 0x0);
        gbc.writeMem(0xb61, { 0xef });
        gbc.writeMem(0xc066, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xc066, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x62, gbc.readMem(0xc066));
        EXPECT(0xb, gbc.readMem(0xc067));
        // EF 0137
        gbc.setState(0xd91a, 0xb020, 0xc030, 0x195e, 0x9df7, 0x4538, 0x1, 0x1);
        gbc.writeMem(0xb01e, { 0x0, 0x0 });
        gbc.writeMem(0xd91a, { 0xef });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xb01e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb01e));
        EXPECT(0xd9, gbc.readMem(0xb01f));
        EXPECT(0xef, gbc.readMem(0xd91a));
        // EF 0138
        gbc.setState(0x8af, 0xa3f3, 0xfae0, 0x7036, 0x5327, 0x2b70, 0x1, 0x0);
        gbc.writeMem(0x8af, { 0xef });
        gbc.writeMem(0xa3f1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xa3f1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb0, gbc.readMem(0xa3f1));
        EXPECT(0x8, gbc.readMem(0xa3f2));
        // EF 0139
        gbc.setState(0xa275, 0xc07b, 0xb790, 0x362e, 0x6626, 0x8661, 0x0, 0x1);
        gbc.writeMem(0xa275, { 0xef });
        gbc.writeMem(0xc079, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xc079, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa275));
        EXPECT(0x76, gbc.readMem(0xc079));
        EXPECT(0xa2, gbc.readMem(0xc07a));
        // EF 013A
        gbc.setState(0xed4c, 0xff8e, 0x8810, 0xc236, 0x36f, 0x6b79, 0x1, 0x0);
        gbc.writeMem(0xed4c, { 0xef });
        gbc.writeMem(0xff8c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xff8c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xed4c));
        EXPECT(0x4d, gbc.readMem(0xff8c));
        EXPECT(0xed, gbc.readMem(0xff8d));
        // EF 0142
        gbc.setState(0x20cf, 0x915c, 0x3f30, 0xd3ce, 0x6bc3, 0x472c, 0x1, 0x0);
        gbc.writeMem(0x20cf, { 0xef });
        gbc.writeMem(0x915a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x915a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd0, gbc.readMem(0x915a));
        EXPECT(0x20, gbc.readMem(0x915b));
        // EF 0143
        gbc.setState(0xb507, 0x9075, 0x74e0, 0x2182, 0xb628, 0x6df8, 0x0, 0x0);
        gbc.writeMem(0x9073, { 0x0, 0x0 });
        gbc.writeMem(0xb507, { 0xef });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x9073, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8, gbc.readMem(0x9073));
        EXPECT(0xb5, gbc.readMem(0x9074));
        EXPECT(0xef, gbc.readMem(0xb507));
        // EF 0144
        gbc.setState(0xc308, 0xb147, 0xe6a0, 0x7e6d, 0xe11a, 0x32fa, 0x0, 0x0);
        gbc.writeMem(0xb145, { 0x0, 0x0 });
        gbc.writeMem(0xc308, { 0xef });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xb145, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x9, gbc.readMem(0xb145));
        EXPECT(0xc3, gbc.readMem(0xb146));
        EXPECT(0xef, gbc.readMem(0xc308));
        // EF 0145
        gbc.setState(0x83dd, 0xb9de, 0x39c0, 0xc2d4, 0xeed9, 0x4ae4, 0x1, 0x0);
        gbc.writeMem(0x83dd, { 0xef });
        gbc.writeMem(0xb9dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xb9dc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x83dd));
        EXPECT(0xde, gbc.readMem(0xb9dc));
        EXPECT(0x83, gbc.readMem(0xb9dd));
        // EF 0146
        gbc.setState(0x6f4f, 0xedbe, 0x5630, 0x387b, 0xaa2e, 0x5b96, 0x0, 0x0);
        gbc.writeMem(0x6f4f, { 0xef });
        gbc.writeMem(0xedbc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0xedbc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x50, gbc.readMem(0xedbc));
        EXPECT(0x6f, gbc.readMem(0xedbd));
        // EF 0147
        gbc.setState(0x7023, 0xbfcd, 0xdd80, 0xc585, 0x426, 0xc89, 0x0, 0x1);
        gbc.writeMem(0x7023, { 0xef });
        gbc.writeMem(0xbfcb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xbfcb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0xbfcb));
        EXPECT(0x70, gbc.readMem(0xbfcc));
        // EF 0148
        gbc.setState(0x6f11, 0xcbd7, 0x2b20, 0x4b0e, 0xdea5, 0x2eae, 0x1, 0x0);
        gbc.writeMem(0x6f11, { 0xef });
        gbc.writeMem(0xcbd5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xcbd5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x12, gbc.readMem(0xcbd5));
        EXPECT(0x6f, gbc.readMem(0xcbd6));
        // EF 014A
        gbc.setState(0x6568, 0xf665, 0xee20, 0xaf9b, 0x3ef1, 0xb5a9, 0x1, 0x1);
        gbc.writeMem(0x6568, { 0xef });
        gbc.writeMem(0xf663, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xf663, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x69, gbc.readMem(0xf663));
        EXPECT(0x65, gbc.readMem(0xf664));
        // EF 014B
        gbc.setState(0x5afc, 0xbe27, 0x4de0, 0x7cf3, 0xb3fd, 0x73ff, 0x1, 0x0);
        gbc.writeMem(0x5afc, { 0xef });
        gbc.writeMem(0xbe25, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xbe25, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfd, gbc.readMem(0xbe25));
        EXPECT(0x5a, gbc.readMem(0xbe26));
        // EF 014C
        gbc.setState(0xc840, 0xebd3, 0xfd90, 0xcc3f, 0x2b48, 0x3b99, 0x0, 0x1);
        gbc.writeMem(0xc840, { 0xef });
        gbc.writeMem(0xebd1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xebd1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc840));
        EXPECT(0x41, gbc.readMem(0xebd1));
        EXPECT(0xc8, gbc.readMem(0xebd2));
        // EF 014E
        gbc.setState(0x1133, 0xb7a7, 0x1e20, 0x4d3a, 0xd388, 0x10f5, 0x1, 0x0);
        gbc.writeMem(0x1133, { 0xef });
        gbc.writeMem(0xb7a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xb7a5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x34, gbc.readMem(0xb7a5));
        EXPECT(0x11, gbc.readMem(0xb7a6));
        // EF 014F
        gbc.setState(0x28d8, 0xb194, 0x63a0, 0x3846, 0x86ad, 0xe662, 0x0, 0x0);
        gbc.writeMem(0x28d8, { 0xef });
        gbc.writeMem(0xb192, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xb192, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd9, gbc.readMem(0xb192));
        EXPECT(0x28, gbc.readMem(0xb193));
        // EF 0150
        gbc.setState(0xa1c7, 0xd096, 0x2c70, 0xf698, 0xee0b, 0x24b2, 0x0, 0x0);
        gbc.writeMem(0xa1c7, { 0xef });
        gbc.writeMem(0xd094, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xd094, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa1c7));
        EXPECT(0xc8, gbc.readMem(0xd094));
        EXPECT(0xa1, gbc.readMem(0xd095));
        // EF 0151
        gbc.setState(0x5416, 0xaf5f, 0x3b0, 0xd58b, 0xe18f, 0x4b14, 0x1, 0x0);
        gbc.writeMem(0x5416, { 0xef });
        gbc.writeMem(0xaf5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xaf5d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x17, gbc.readMem(0xaf5d));
        EXPECT(0x54, gbc.readMem(0xaf5e));
        // EF 0155
        gbc.setState(0xa004, 0xc328, 0xe0d0, 0xf293, 0x986d, 0xa785, 0x1, 0x0);
        gbc.writeMem(0xa004, { 0xef });
        gbc.writeMem(0xc326, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xc326, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa004));
        EXPECT(0x5, gbc.readMem(0xc326));
        EXPECT(0xa0, gbc.readMem(0xc327));
        // EF 0159
        gbc.setState(0xd50f, 0xa9da, 0x6c50, 0x9449, 0xc8d0, 0x5ce0, 0x0, 0x0);
        gbc.writeMem(0xa9d8, { 0x0, 0x0 });
        gbc.writeMem(0xd50f, { 0xef });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xa9d8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0xa9d8));
        EXPECT(0xd5, gbc.readMem(0xa9d9));
        EXPECT(0xef, gbc.readMem(0xd50f));
        // EF 015F
        gbc.setState(0xcb4b, 0xfa42, 0x7a0, 0xf986, 0xb921, 0xaf32, 0x0, 0x0);
        gbc.writeMem(0xcb4b, { 0xef });
        gbc.writeMem(0xfa40, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xfa40, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcb4b));
        EXPECT(0x4c, gbc.readMem(0xfa40));
        EXPECT(0xcb, gbc.readMem(0xfa41));
        // EF 0160
        gbc.setState(0xd00d, 0xfdd1, 0x9a60, 0xd734, 0x6175, 0x98be, 0x1, 0x1);
        gbc.writeMem(0xd00d, { 0xef });
        gbc.writeMem(0xfdcf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xfdcf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd00d));
        EXPECT(0xe, gbc.readMem(0xfdcf));
        EXPECT(0xd0, gbc.readMem(0xfdd0));
        // EF 0161
        gbc.setState(0xdd8d, 0xae54, 0xfeb0, 0x9010, 0xa291, 0x6270, 0x0, 0x1);
        gbc.writeMem(0xae52, { 0x0, 0x0 });
        gbc.writeMem(0xdd8d, { 0xef });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xae52, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8e, gbc.readMem(0xae52));
        EXPECT(0xdd, gbc.readMem(0xae53));
        EXPECT(0xef, gbc.readMem(0xdd8d));
        // EF 0163
        gbc.setState(0xb874, 0xf502, 0x9650, 0x5916, 0x462f, 0xa5c5, 0x0, 0x1);
        gbc.writeMem(0xb874, { 0xef });
        gbc.writeMem(0xf500, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xf500, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb874));
        EXPECT(0x75, gbc.readMem(0xf500));
        EXPECT(0xb8, gbc.readMem(0xf501));
        // EF 0168
        gbc.setState(0xaf60, 0xbe65, 0xdd10, 0x919b, 0xf79f, 0x9c08, 0x0, 0x0);
        gbc.writeMem(0xaf60, { 0xef });
        gbc.writeMem(0xbe63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xbe63, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xaf60));
        EXPECT(0x61, gbc.readMem(0xbe63));
        EXPECT(0xaf, gbc.readMem(0xbe64));
        // EF 0169
        gbc.setState(0xbaff, 0x8737, 0xb660, 0x6ab5, 0x3f18, 0x45b4, 0x1, 0x1);
        gbc.writeMem(0x8735, { 0x0, 0x0 });
        gbc.writeMem(0xbaff, { 0xef });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x8735, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x0, gbc.readMem(0x8735));
        EXPECT(0xbb, gbc.readMem(0x8736));
        EXPECT(0xef, gbc.readMem(0xbaff));
        // EF 016A
        gbc.setState(0x9ab1, 0xe2fa, 0x2d80, 0xdaab, 0x37e6, 0x353c, 0x1, 0x0);
        gbc.writeMem(0x9ab1, { 0xef });
        gbc.writeMem(0xe2f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xe2f8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9ab1));
        EXPECT(0xb2, gbc.readMem(0xe2f8));
        EXPECT(0x9a, gbc.readMem(0xe2f9));
        // EF 016B
        gbc.setState(0x4ea2, 0xf54c, 0x5cb0, 0x2c2, 0x68b5, 0x8ab9, 0x1, 0x0);
        gbc.writeMem(0x4ea2, { 0xef });
        gbc.writeMem(0xf54a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xf54a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa3, gbc.readMem(0xf54a));
        EXPECT(0x4e, gbc.readMem(0xf54b));
        // EF 016E
        gbc.setState(0xe9ef, 0xc0f2, 0xaa90, 0x2d80, 0x869c, 0xd1a8, 0x1, 0x0);
        gbc.writeMem(0xc0f0, { 0x0, 0x0 });
        gbc.writeMem(0xe9ef, { 0xef });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xc0f0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf0, gbc.readMem(0xc0f0));
        EXPECT(0xe9, gbc.readMem(0xc0f1));
        EXPECT(0xef, gbc.readMem(0xe9ef));
        // EF 016F
        gbc.setState(0x5d30, 0xb333, 0x1cf0, 0xc75d, 0x5d4b, 0xbd3a, 0x1, 0x0);
        gbc.writeMem(0x5d30, { 0xef });
        gbc.writeMem(0xb331, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xb331, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0xb331));
        EXPECT(0x5d, gbc.readMem(0xb332));
        // EF 0171
        gbc.setState(0x321, 0xb1ab, 0x2fd0, 0xbb1e, 0x372c, 0x402, 0x1, 0x0);
        gbc.writeMem(0x321, { 0xef });
        gbc.writeMem(0xb1a9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xb1a9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0xb1a9));
        EXPECT(0x3, gbc.readMem(0xb1aa));
        // EF 0173
        gbc.setState(0xaadc, 0x9c0e, 0xbd60, 0x44e3, 0xda23, 0x24a3, 0x0, 0x1);
        gbc.writeMem(0x9c0c, { 0x0, 0x0 });
        gbc.writeMem(0xaadc, { 0xef });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x9c0c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0x9c0c));
        EXPECT(0xaa, gbc.readMem(0x9c0d));
        EXPECT(0xef, gbc.readMem(0xaadc));
        // EF 0174
        gbc.setState(0xbdc7, 0xf778, 0xc860, 0x11c4, 0x211c, 0xeadc, 0x0, 0x1);
        gbc.writeMem(0xbdc7, { 0xef });
        gbc.writeMem(0xf776, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xf776, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbdc7));
        EXPECT(0xc8, gbc.readMem(0xf776));
        EXPECT(0xbd, gbc.readMem(0xf777));
        // EF 0176
        gbc.setState(0x56c4, 0xa9de, 0x6320, 0x10a8, 0x1c2f, 0x1603, 0x0, 0x0);
        gbc.writeMem(0x56c4, { 0xef });
        gbc.writeMem(0xa9dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xa9dc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc5, gbc.readMem(0xa9dc));
        EXPECT(0x56, gbc.readMem(0xa9dd));
        // EF 0178
        gbc.setState(0x34f8, 0xac09, 0xa5e0, 0x858f, 0x238c, 0xeaa6, 0x1, 0x0);
        gbc.writeMem(0x34f8, { 0xef });
        gbc.writeMem(0xac07, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xac07, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf9, gbc.readMem(0xac07));
        EXPECT(0x34, gbc.readMem(0xac08));
        // EF 0179
        gbc.setState(0x7657, 0xc15e, 0xe6a0, 0x49e, 0x68da, 0x8297, 0x0, 0x0);
        gbc.writeMem(0x7657, { 0xef });
        gbc.writeMem(0xc15c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xc15c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xc15c));
        EXPECT(0x76, gbc.readMem(0xc15d));
        // EF 017B
        gbc.setState(0xcf57, 0xe2cd, 0xaa00, 0x17a9, 0xea1d, 0x304, 0x0, 0x1);
        gbc.writeMem(0xcf57, { 0xef });
        gbc.writeMem(0xe2cb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xe2cb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcf57));
        EXPECT(0x58, gbc.readMem(0xe2cb));
        EXPECT(0xcf, gbc.readMem(0xe2cc));
        // EF 017E
        gbc.setState(0x3e27, 0x8773, 0x2fe0, 0x6520, 0x4b23, 0x5e8e, 0x1, 0x1);
        gbc.writeMem(0x3e27, { 0xef });
        gbc.writeMem(0x8771, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x8771, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0x8771));
        EXPECT(0x3e, gbc.readMem(0x8772));
        // EF 017F
        gbc.setState(0xb40e, 0x8a5e, 0x5300, 0x6c49, 0x18f9, 0xaa92, 0x1, 0x1);
        gbc.writeMem(0x8a5c, { 0x0, 0x0 });
        gbc.writeMem(0xb40e, { 0xef });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x8a5c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x8a5c));
        EXPECT(0xb4, gbc.readMem(0x8a5d));
        EXPECT(0xef, gbc.readMem(0xb40e));
        // EF 0180
        gbc.setState(0x4026, 0xc9ce, 0xa0b0, 0xe6f3, 0x4086, 0x79e8, 0x1, 0x1);
        gbc.writeMem(0x4026, { 0xef });
        gbc.writeMem(0xc9cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xc9cc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xc9cc));
        EXPECT(0x40, gbc.readMem(0xc9cd));
        // EF 0189
        gbc.setState(0xbad7, 0xc9f1, 0xc0f0, 0x4a0f, 0xa951, 0xc117, 0x0, 0x0);
        gbc.writeMem(0xbad7, { 0xef });
        gbc.writeMem(0xc9ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xc9ef, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbad7));
        EXPECT(0xd8, gbc.readMem(0xc9ef));
        EXPECT(0xba, gbc.readMem(0xc9f0));
        // EF 018D
        gbc.setState(0x70d4, 0xda0f, 0xfd60, 0xb177, 0xacc8, 0xacaf, 0x0, 0x1);
        gbc.writeMem(0x70d4, { 0xef });
        gbc.writeMem(0xda0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xda0d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd5, gbc.readMem(0xda0d));
        EXPECT(0x70, gbc.readMem(0xda0e));
        // EF 018E
        gbc.setState(0xb476, 0xa3d4, 0x6e20, 0x677e, 0xedb8, 0x4c8f, 0x0, 0x0);
        gbc.writeMem(0xa3d2, { 0x0, 0x0 });
        gbc.writeMem(0xb476, { 0xef });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xa3d2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xa3d2));
        EXPECT(0xb4, gbc.readMem(0xa3d3));
        EXPECT(0xef, gbc.readMem(0xb476));
        // EF 0190
        gbc.setState(0xb351, 0xb59d, 0x13f0, 0xc070, 0xa24b, 0xcbbe, 0x1, 0x0);
        gbc.writeMem(0xb351, { 0xef });
        gbc.writeMem(0xb59b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb59b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb351));
        EXPECT(0x52, gbc.readMem(0xb59b));
        EXPECT(0xb3, gbc.readMem(0xb59c));
        // EF 0197
        gbc.setState(0x2401, 0xafbc, 0x99d0, 0xb524, 0xd555, 0xd48b, 0x1, 0x0);
        gbc.writeMem(0x2401, { 0xef });
        gbc.writeMem(0xafba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xafba, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2, gbc.readMem(0xafba));
        EXPECT(0x24, gbc.readMem(0xafbb));
        // EF 0198
        gbc.setState(0xaa06, 0x9c97, 0xa780, 0x6a7f, 0x738, 0x8203, 0x1, 0x0);
        gbc.writeMem(0x9c95, { 0x0, 0x0 });
        gbc.writeMem(0xaa06, { 0xef });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x9c95, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0x9c95));
        EXPECT(0xaa, gbc.readMem(0x9c96));
        EXPECT(0xef, gbc.readMem(0xaa06));
        // EF 0199
        gbc.setState(0x63, 0xc73a, 0xa710, 0x965c, 0x9d0, 0x10a, 0x1, 0x0);
        gbc.writeMem(0x63, { 0xef });
        gbc.writeMem(0xc738, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xc738, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x64, gbc.readMem(0xc738));
        EXPECT(0x0, gbc.readMem(0xc739));
        // EF 019A
        gbc.setState(0x17af, 0x836e, 0x4fc0, 0x584d, 0xf6ab, 0xf023, 0x1, 0x0);
        gbc.writeMem(0x17af, { 0xef });
        gbc.writeMem(0x836c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x836c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb0, gbc.readMem(0x836c));
        EXPECT(0x17, gbc.readMem(0x836d));
        // EF 019C
        gbc.setState(0x30aa, 0x8399, 0x6290, 0x2348, 0xee3e, 0x6fe5, 0x0, 0x0);
        gbc.writeMem(0x30aa, { 0xef });
        gbc.writeMem(0x8397, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x8397, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0x8397));
        EXPECT(0x30, gbc.readMem(0x8398));
        // EF 019D
        gbc.setState(0xcd03, 0x97d7, 0x4e60, 0xf195, 0x8c80, 0xc802, 0x1, 0x1);
        gbc.writeMem(0x97d5, { 0x0, 0x0 });
        gbc.writeMem(0xcd03, { 0xef });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x97d5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4, gbc.readMem(0x97d5));
        EXPECT(0xcd, gbc.readMem(0x97d6));
        EXPECT(0xef, gbc.readMem(0xcd03));
        // EF 019E
        gbc.setState(0xa995, 0xfb9d, 0xa7b0, 0xe46d, 0xd864, 0xa514, 0x1, 0x0);
        gbc.writeMem(0xa995, { 0xef });
        gbc.writeMem(0xfb9b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xfb9b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa995));
        EXPECT(0x96, gbc.readMem(0xfb9b));
        EXPECT(0xa9, gbc.readMem(0xfb9c));
        // EF 019F
        gbc.setState(0xa297, 0xe37a, 0xed0, 0x6892, 0x706d, 0xd49a, 0x0, 0x1);
        gbc.writeMem(0xa297, { 0xef });
        gbc.writeMem(0xe378, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xe378, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa297));
        EXPECT(0x98, gbc.readMem(0xe378));
        EXPECT(0xa2, gbc.readMem(0xe379));
        // EF 01A0
        gbc.setState(0xde13, 0x9c28, 0x6b80, 0xe2c9, 0x22e4, 0xa31c, 0x1, 0x0);
        gbc.writeMem(0x9c26, { 0x0, 0x0 });
        gbc.writeMem(0xde13, { 0xef });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x9c26, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x14, gbc.readMem(0x9c26));
        EXPECT(0xde, gbc.readMem(0x9c27));
        EXPECT(0xef, gbc.readMem(0xde13));
        // EF 01A2
        gbc.setState(0x3f99, 0x87b6, 0xc010, 0x9528, 0x6ed3, 0xbb0c, 0x1, 0x1);
        gbc.writeMem(0x3f99, { 0xef });
        gbc.writeMem(0x87b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x87b4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9a, gbc.readMem(0x87b4));
        EXPECT(0x3f, gbc.readMem(0x87b5));
        // EF 01A3
        gbc.setState(0xed65, 0xa7ee, 0xef70, 0xc38c, 0x8a90, 0xc770, 0x1, 0x1);
        gbc.writeMem(0xa7ec, { 0x0, 0x0 });
        gbc.writeMem(0xed65, { 0xef });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xa7ec, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x66, gbc.readMem(0xa7ec));
        EXPECT(0xed, gbc.readMem(0xa7ed));
        EXPECT(0xef, gbc.readMem(0xed65));
        // EF 01A4
        gbc.setState(0x836b, 0xadf2, 0xab60, 0x959f, 0x3147, 0x4c25, 0x1, 0x1);
        gbc.writeMem(0x836b, { 0xef });
        gbc.writeMem(0xadf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xadf0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x836b));
        EXPECT(0x6c, gbc.readMem(0xadf0));
        EXPECT(0x83, gbc.readMem(0xadf1));
        // EF 01AA
        gbc.setState(0x9e8a, 0xa6b2, 0xb860, 0xf670, 0x9cac, 0x1709, 0x1, 0x0);
        gbc.writeMem(0x9e8a, { 0xef });
        gbc.writeMem(0xa6b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xa6b0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9e8a));
        EXPECT(0x8b, gbc.readMem(0xa6b0));
        EXPECT(0x9e, gbc.readMem(0xa6b1));
        // EF 01AD
        gbc.setState(0xdd2e, 0xf357, 0x800, 0xd86a, 0xb791, 0x4821, 0x0, 0x1);
        gbc.writeMem(0xdd2e, { 0xef });
        gbc.writeMem(0xf355, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xf355, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xdd2e));
        EXPECT(0x2f, gbc.readMem(0xf355));
        EXPECT(0xdd, gbc.readMem(0xf356));
        // EF 01AF
        gbc.setState(0xd71, 0x852f, 0xc30, 0xa760, 0x1961, 0xb0d5, 0x0, 0x0);
        gbc.writeMem(0xd71, { 0xef });
        gbc.writeMem(0x852d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x852d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0x852d));
        EXPECT(0xd, gbc.readMem(0x852e));
        // EF 01B1
        gbc.setState(0x27c7, 0xe6d5, 0x5a50, 0x9c5, 0x56f2, 0x5179, 0x0, 0x1);
        gbc.writeMem(0x27c7, { 0xef });
        gbc.writeMem(0xe6d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xe6d3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc8, gbc.readMem(0xe6d3));
        EXPECT(0x27, gbc.readMem(0xe6d4));
        // EF 01B2
        gbc.setState(0x3623, 0x9e4a, 0xc670, 0x181c, 0x9092, 0x68a5, 0x1, 0x0);
        gbc.writeMem(0x3623, { 0xef });
        gbc.writeMem(0x9e48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x9e48, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0x9e48));
        EXPECT(0x36, gbc.readMem(0x9e49));
        // EF 01B6
        gbc.setState(0x5f19, 0xc056, 0x1650, 0x1264, 0x223b, 0x720b, 0x0, 0x0);
        gbc.writeMem(0x5f19, { 0xef });
        gbc.writeMem(0xc054, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xc054, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1a, gbc.readMem(0xc054));
        EXPECT(0x5f, gbc.readMem(0xc055));
        // EF 01B9
        gbc.setState(0x3b0f, 0x8153, 0x6f00, 0xc57f, 0x77c1, 0xdebb, 0x1, 0x1);
        gbc.writeMem(0x3b0f, { 0xef });
        gbc.writeMem(0x8151, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x8151, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0x8151));
        EXPECT(0x3b, gbc.readMem(0x8152));
        // EF 01BB
        gbc.setState(0x7c3c, 0xed0a, 0x55d0, 0xc890, 0x31, 0x905b, 0x0, 0x1);
        gbc.writeMem(0x7c3c, { 0xef });
        gbc.writeMem(0xed08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xed08, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3d, gbc.readMem(0xed08));
        EXPECT(0x7c, gbc.readMem(0xed09));
        // EF 01BC
        gbc.setState(0x2d82, 0xf44b, 0x6300, 0x4608, 0x4db6, 0x8900, 0x1, 0x1);
        gbc.writeMem(0x2d82, { 0xef });
        gbc.writeMem(0xf449, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xf449, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x83, gbc.readMem(0xf449));
        EXPECT(0x2d, gbc.readMem(0xf44a));
        // EF 01C0
        gbc.setState(0xc4b0, 0xb16a, 0x4d20, 0xb023, 0x3d37, 0x7c00, 0x0, 0x0);
        gbc.writeMem(0xb168, { 0x0, 0x0 });
        gbc.writeMem(0xc4b0, { 0xef });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xb168, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb1, gbc.readMem(0xb168));
        EXPECT(0xc4, gbc.readMem(0xb169));
        EXPECT(0xef, gbc.readMem(0xc4b0));
        // EF 01C1
        gbc.setState(0xea73, 0xfb34, 0xbf40, 0x8efb, 0x56b2, 0x656f, 0x0, 0x1);
        gbc.writeMem(0xea73, { 0xef });
        gbc.writeMem(0xfb32, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xfb32, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xea73));
        EXPECT(0x74, gbc.readMem(0xfb32));
        EXPECT(0xea, gbc.readMem(0xfb33));
        // EF 01C3
        gbc.setState(0x58b7, 0xf357, 0x200, 0x7fc2, 0x599c, 0xc8ea, 0x1, 0x1);
        gbc.writeMem(0x58b7, { 0xef });
        gbc.writeMem(0xf355, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xf355, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0xf355));
        EXPECT(0x58, gbc.readMem(0xf356));
        // EF 01C6
        gbc.setState(0x846e, 0x8947, 0x2430, 0x59ed, 0x3e10, 0xbd11, 0x0, 0x0);
        gbc.writeMem(0x846e, { 0xef });
        gbc.writeMem(0x8945, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x8945, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x846e));
        EXPECT(0x6f, gbc.readMem(0x8945));
        EXPECT(0x84, gbc.readMem(0x8946));
        // EF 01C7
        gbc.setState(0x50c2, 0xec6f, 0x9580, 0xc912, 0x84f1, 0xc48d, 0x1, 0x0);
        gbc.writeMem(0x50c2, { 0xef });
        gbc.writeMem(0xec6d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xec6d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0xec6d));
        EXPECT(0x50, gbc.readMem(0xec6e));
        // EF 01CC
        gbc.setState(0xa31f, 0x8261, 0xc160, 0x2a5f, 0xb9ca, 0xcaaa, 0x0, 0x0);
        gbc.writeMem(0x825f, { 0x0, 0x0 });
        gbc.writeMem(0xa31f, { 0xef });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x825f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x20, gbc.readMem(0x825f));
        EXPECT(0xa3, gbc.readMem(0x8260));
        EXPECT(0xef, gbc.readMem(0xa31f));
        // EF 01CF
        gbc.setState(0x11f7, 0x8a3b, 0xc2c0, 0x1675, 0xb545, 0x48, 0x0, 0x1);
        gbc.writeMem(0x11f7, { 0xef });
        gbc.writeMem(0x8a39, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x8a39, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf8, gbc.readMem(0x8a39));
        EXPECT(0x11, gbc.readMem(0x8a3a));
        // EF 01D0
        gbc.setState(0xbed6, 0x9652, 0xa690, 0xdfc7, 0x3c0f, 0x9ea6, 0x0, 0x1);
        gbc.writeMem(0x9650, { 0x0, 0x0 });
        gbc.writeMem(0xbed6, { 0xef });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x9650, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd7, gbc.readMem(0x9650));
        EXPECT(0xbe, gbc.readMem(0x9651));
        EXPECT(0xef, gbc.readMem(0xbed6));
        // EF 01D2
        gbc.setState(0x9373, 0x91c4, 0x4650, 0xe728, 0x2146, 0xb5d5, 0x0, 0x1);
        gbc.writeMem(0x91c2, { 0x0, 0x0 });
        gbc.writeMem(0x9373, { 0xef });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x91c2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0x91c2));
        EXPECT(0x93, gbc.readMem(0x91c3));
        EXPECT(0xef, gbc.readMem(0x9373));
        // EF 01D3
        gbc.setState(0x3041, 0xe29d, 0xbbb0, 0xb4d4, 0x3537, 0x3faa, 0x0, 0x1);
        gbc.writeMem(0x3041, { 0xef });
        gbc.writeMem(0xe29b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe29b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x42, gbc.readMem(0xe29b));
        EXPECT(0x30, gbc.readMem(0xe29c));
        // EF 01D4
        gbc.setState(0x46f3, 0xa8dd, 0x18e0, 0xaec6, 0x94d2, 0xada2, 0x1, 0x0);
        gbc.writeMem(0x46f3, { 0xef });
        gbc.writeMem(0xa8db, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa8db, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf4, gbc.readMem(0xa8db));
        EXPECT(0x46, gbc.readMem(0xa8dc));
        // EF 01D5
        gbc.setState(0x7ae, 0x9cbb, 0x9f00, 0xaae0, 0xee37, 0x26fe, 0x0, 0x1);
        gbc.writeMem(0x7ae, { 0xef });
        gbc.writeMem(0x9cb9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x9cb9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xaf, gbc.readMem(0x9cb9));
        EXPECT(0x7, gbc.readMem(0x9cba));
        // EF 01D6
        gbc.setState(0xa275, 0xd642, 0x4ce0, 0x2d70, 0x8d2a, 0xf12d, 0x1, 0x0);
        gbc.writeMem(0xa275, { 0xef });
        gbc.writeMem(0xd640, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xd640, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa275));
        EXPECT(0x76, gbc.readMem(0xd640));
        EXPECT(0xa2, gbc.readMem(0xd641));
        // EF 01D9
        gbc.setState(0x87cb, 0x9b89, 0xb5b0, 0x769e, 0x8aa7, 0x6fa5, 0x0, 0x1);
        gbc.writeMem(0x87cb, { 0xef });
        gbc.writeMem(0x9b87, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x9b87, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x87cb));
        EXPECT(0xcc, gbc.readMem(0x9b87));
        EXPECT(0x87, gbc.readMem(0x9b88));
        // EF 01DA
        gbc.setState(0xd179, 0xf45c, 0xf400, 0x8ecb, 0xc01b, 0x6f2f, 0x0, 0x1);
        gbc.writeMem(0xd179, { 0xef });
        gbc.writeMem(0xf45a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xf45a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd179));
        EXPECT(0x7a, gbc.readMem(0xf45a));
        EXPECT(0xd1, gbc.readMem(0xf45b));
        // EF 01DB
        gbc.setState(0xb350, 0xeae1, 0xcf0, 0xd9e, 0x76f7, 0x56e9, 0x1, 0x0);
        gbc.writeMem(0xb350, { 0xef });
        gbc.writeMem(0xeadf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xeadf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb350));
        EXPECT(0x51, gbc.readMem(0xeadf));
        EXPECT(0xb3, gbc.readMem(0xeae0));
        // EF 01DC
        gbc.setState(0x5b66, 0xb4a3, 0xd660, 0x71df, 0xee67, 0x775f, 0x0, 0x1);
        gbc.writeMem(0x5b66, { 0xef });
        gbc.writeMem(0xb4a1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xb4a1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0xb4a1));
        EXPECT(0x5b, gbc.readMem(0xb4a2));
        // EF 01E0
        gbc.setState(0xe80c, 0xbda8, 0xac70, 0x5ce6, 0xf8c4, 0x93cc, 0x0, 0x1);
        gbc.writeMem(0xbda6, { 0x0, 0x0 });
        gbc.writeMem(0xe80c, { 0xef });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xbda6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd, gbc.readMem(0xbda6));
        EXPECT(0xe8, gbc.readMem(0xbda7));
        EXPECT(0xef, gbc.readMem(0xe80c));
        // EF 01E2
        gbc.setState(0x4a89, 0xb192, 0x5700, 0xa1eb, 0x430e, 0x8212, 0x1, 0x0);
        gbc.writeMem(0x4a89, { 0xef });
        gbc.writeMem(0xb190, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xb190, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8a, gbc.readMem(0xb190));
        EXPECT(0x4a, gbc.readMem(0xb191));
        // EF 01E3
        gbc.setState(0x1f80, 0xa962, 0x9b10, 0x538b, 0x2531, 0x12ff, 0x0, 0x1);
        gbc.writeMem(0x1f80, { 0xef });
        gbc.writeMem(0xa960, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xa960, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x81, gbc.readMem(0xa960));
        EXPECT(0x1f, gbc.readMem(0xa961));
        // EF 01E4
        gbc.setState(0xf67, 0xebb1, 0xfaf0, 0x77f3, 0x9697, 0x7793, 0x0, 0x0);
        gbc.writeMem(0xf67, { 0xef });
        gbc.writeMem(0xebaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xebaf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xebaf));
        EXPECT(0xf, gbc.readMem(0xebb0));
        // EF 01E5
        gbc.setState(0xbff3, 0xa710, 0xded0, 0xf2f4, 0x42d3, 0xc4a, 0x1, 0x0);
        gbc.writeMem(0xa70e, { 0x0, 0x0 });
        gbc.writeMem(0xbff3, { 0xef });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa70e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf4, gbc.readMem(0xa70e));
        EXPECT(0xbf, gbc.readMem(0xa70f));
        EXPECT(0xef, gbc.readMem(0xbff3));
        // EF 01E9
        gbc.setState(0x6745, 0x841f, 0xa8e0, 0x3ba5, 0x2844, 0x5edf, 0x0, 0x0);
        gbc.writeMem(0x6745, { 0xef });
        gbc.writeMem(0x841d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x841d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x46, gbc.readMem(0x841d));
        EXPECT(0x67, gbc.readMem(0x841e));
        // EF 01EA
        gbc.setState(0x83e8, 0xc9d4, 0x5070, 0x4f60, 0x36df, 0x7fd6, 0x0, 0x1);
        gbc.writeMem(0x83e8, { 0xef });
        gbc.writeMem(0xc9d2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xc9d2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x83e8));
        EXPECT(0xe9, gbc.readMem(0xc9d2));
        EXPECT(0x83, gbc.readMem(0xc9d3));
        // EF 01EC
        gbc.setState(0xcae, 0xde65, 0x2c10, 0xab52, 0x1f85, 0x98d5, 0x0, 0x1);
        gbc.writeMem(0xcae, { 0xef });
        gbc.writeMem(0xde63, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xde63, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xaf, gbc.readMem(0xde63));
        EXPECT(0xc, gbc.readMem(0xde64));
        // EF 01EE
        gbc.setState(0xe070, 0x9cef, 0xa30, 0x16d8, 0x32cd, 0x10ba, 0x1, 0x1);
        gbc.writeMem(0x9ced, { 0x0, 0x0 });
        gbc.writeMem(0xe070, { 0xef });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x9ced, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x71, gbc.readMem(0x9ced));
        EXPECT(0xe0, gbc.readMem(0x9cee));
        EXPECT(0xef, gbc.readMem(0xe070));
        // EF 01F1
        gbc.setState(0x14a3, 0x8c58, 0xe710, 0x1a2e, 0xd323, 0x1e61, 0x0, 0x1);
        gbc.writeMem(0x14a3, { 0xef });
        gbc.writeMem(0x8c56, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x8c56, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0x8c56));
        EXPECT(0x14, gbc.readMem(0x8c57));
        // EF 01F8
        gbc.setState(0x21c3, 0x9714, 0x1a50, 0x2fd0, 0x987f, 0x7f3b, 0x0, 0x1);
        gbc.writeMem(0x21c3, { 0xef });
        gbc.writeMem(0x9712, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x9712, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc4, gbc.readMem(0x9712));
        EXPECT(0x21, gbc.readMem(0x9713));
        // EF 01FB
        gbc.setState(0x290e, 0x884d, 0xa1b0, 0x5413, 0xdde1, 0x16d0, 0x0, 0x0);
        gbc.writeMem(0x290e, { 0xef });
        gbc.writeMem(0x884b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x884b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0x884b));
        EXPECT(0x29, gbc.readMem(0x884c));
        // EF 01FC
        gbc.setState(0xba97, 0xf4ce, 0x6100, 0xd4fe, 0x5f67, 0x83d8, 0x1, 0x0);
        gbc.writeMem(0xba97, { 0xef });
        gbc.writeMem(0xf4cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xf4cc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xba97));
        EXPECT(0x98, gbc.readMem(0xf4cc));
        EXPECT(0xba, gbc.readMem(0xf4cd));
        // EF 01FD
        gbc.setState(0xc085, 0xb2b4, 0xd7f0, 0xbc7d, 0xdcd, 0x5f5b, 0x0, 0x0);
        gbc.writeMem(0xb2b2, { 0x0, 0x0 });
        gbc.writeMem(0xc085, { 0xef });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xb2b2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0xb2b2));
        EXPECT(0xc0, gbc.readMem(0xb2b3));
        EXPECT(0xef, gbc.readMem(0xc085));
        // EF 01FF
        gbc.setState(0x9922, 0xd62a, 0xc470, 0x5848, 0x226, 0x6c00, 0x1, 0x1);
        gbc.writeMem(0x9922, { 0xef });
        gbc.writeMem(0xd628, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xd628, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9922));
        EXPECT(0x23, gbc.readMem(0xd628));
        EXPECT(0x99, gbc.readMem(0xd629));
        // EF 0201
        gbc.setState(0xd683, 0x9c66, 0x9c70, 0xbfd4, 0xeca4, 0xf0f5, 0x1, 0x0);
        gbc.writeMem(0x9c64, { 0x0, 0x0 });
        gbc.writeMem(0xd683, { 0xef });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x9c64, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x9c64));
        EXPECT(0xd6, gbc.readMem(0x9c65));
        EXPECT(0xef, gbc.readMem(0xd683));
        // EF 0202
        gbc.setState(0x6d1a, 0x9cdb, 0x8d40, 0xf5d9, 0xfb6a, 0x516b, 0x0, 0x0);
        gbc.writeMem(0x6d1a, { 0xef });
        gbc.writeMem(0x9cd9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x9cd9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9cd9));
        EXPECT(0x6d, gbc.readMem(0x9cda));
        // EF 0203
        gbc.setState(0x647e, 0xfe0a, 0xeeb0, 0x13e7, 0x6f92, 0x81f4, 0x0, 0x1);
        gbc.writeMem(0x647e, { 0xef });
        gbc.writeMem(0xfe08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xfe08, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xfe08));
        EXPECT(0x64, gbc.readMem(0xfe09));
        // EF 0206
        gbc.setState(0x3042, 0xf97f, 0xcaa0, 0x482e, 0x3abf, 0x707d, 0x1, 0x0);
        gbc.writeMem(0x3042, { 0xef });
        gbc.writeMem(0xf97d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xf97d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0xf97d));
        EXPECT(0x30, gbc.readMem(0xf97e));
        // EF 0209
        gbc.setState(0xded2, 0xa8c8, 0x9bf0, 0xca26, 0xb0d6, 0x3c7b, 0x1, 0x1);
        gbc.writeMem(0xa8c6, { 0x0, 0x0 });
        gbc.writeMem(0xded2, { 0xef });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xa8c6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd3, gbc.readMem(0xa8c6));
        EXPECT(0xde, gbc.readMem(0xa8c7));
        EXPECT(0xef, gbc.readMem(0xded2));
        // EF 0211
        gbc.setState(0xe76f, 0xc554, 0x7c80, 0x1250, 0x7ea0, 0x9446, 0x0, 0x1);
        gbc.writeMem(0xc552, { 0x0, 0x0 });
        gbc.writeMem(0xe76f, { 0xef });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc552, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x70, gbc.readMem(0xc552));
        EXPECT(0xe7, gbc.readMem(0xc553));
        EXPECT(0xef, gbc.readMem(0xe76f));
        // EF 0213
        gbc.setState(0x5e21, 0x82d9, 0x1190, 0xa2cc, 0xce9b, 0x1f5d, 0x1, 0x0);
        gbc.writeMem(0x5e21, { 0xef });
        gbc.writeMem(0x82d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x82d7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0x82d7));
        EXPECT(0x5e, gbc.readMem(0x82d8));
        // EF 0215
        gbc.setState(0x3b97, 0x9989, 0x7e10, 0xf074, 0x6666, 0x66e7, 0x1, 0x1);
        gbc.writeMem(0x3b97, { 0xef });
        gbc.writeMem(0x9987, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x9987, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x98, gbc.readMem(0x9987));
        EXPECT(0x3b, gbc.readMem(0x9988));
        // EF 0216
        gbc.setState(0x8dcb, 0x9dd3, 0xbbb0, 0xa859, 0x56fb, 0x5a78, 0x0, 0x1);
        gbc.writeMem(0x8dcb, { 0xef });
        gbc.writeMem(0x9dd1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x9dd1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8dcb));
        EXPECT(0xcc, gbc.readMem(0x9dd1));
        EXPECT(0x8d, gbc.readMem(0x9dd2));
        // EF 0217
        gbc.setState(0xbf4d, 0x8ac1, 0x79e0, 0x36d7, 0x94d4, 0x18bf, 0x0, 0x0);
        gbc.writeMem(0x8abf, { 0x0, 0x0 });
        gbc.writeMem(0xbf4d, { 0xef });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x8abf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4e, gbc.readMem(0x8abf));
        EXPECT(0xbf, gbc.readMem(0x8ac0));
        EXPECT(0xef, gbc.readMem(0xbf4d));
        // EF 0219
        gbc.setState(0xd6fa, 0xe51a, 0xbca0, 0xcabb, 0x1dc5, 0x428b, 0x0, 0x1);
        gbc.writeMem(0xd6fa, { 0xef });
        gbc.writeMem(0xe518, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xe518, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd6fa));
        EXPECT(0xfb, gbc.readMem(0xe518));
        EXPECT(0xd6, gbc.readMem(0xe519));
        // EF 021C
        gbc.setState(0xcbbd, 0xeb5a, 0x1f50, 0x8d3f, 0x8255, 0x8fb5, 0x0, 0x0);
        gbc.writeMem(0xcbbd, { 0xef });
        gbc.writeMem(0xeb58, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xeb58, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcbbd));
        EXPECT(0xbe, gbc.readMem(0xeb58));
        EXPECT(0xcb, gbc.readMem(0xeb59));
        // EF 021E
        gbc.setState(0xd8ba, 0xa7a4, 0xb880, 0x9d8, 0x5303, 0x827e, 0x1, 0x1);
        gbc.writeMem(0xa7a2, { 0x0, 0x0 });
        gbc.writeMem(0xd8ba, { 0xef });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xa7a2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbb, gbc.readMem(0xa7a2));
        EXPECT(0xd8, gbc.readMem(0xa7a3));
        EXPECT(0xef, gbc.readMem(0xd8ba));
        // EF 021F
        gbc.setState(0x1bc2, 0x9f51, 0x1e80, 0xfd73, 0x6a2b, 0x9095, 0x0, 0x0);
        gbc.writeMem(0x1bc2, { 0xef });
        gbc.writeMem(0x9f4f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x9f4f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc3, gbc.readMem(0x9f4f));
        EXPECT(0x1b, gbc.readMem(0x9f50));
        // EF 0220
        gbc.setState(0x4137, 0xfefb, 0xc490, 0x79b9, 0x8448, 0x1bd6, 0x0, 0x0);
        gbc.writeMem(0x4137, { 0xef });
        gbc.writeMem(0xfef9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xfef9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x38, gbc.readMem(0xfef9));
        EXPECT(0x41, gbc.readMem(0xfefa));
        // EF 0221
        gbc.setState(0xce7e, 0xa773, 0x50d0, 0xc0f9, 0x2774, 0xf8e8, 0x0, 0x1);
        gbc.writeMem(0xa771, { 0x0, 0x0 });
        gbc.writeMem(0xce7e, { 0xef });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xa771, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xa771));
        EXPECT(0xce, gbc.readMem(0xa772));
        EXPECT(0xef, gbc.readMem(0xce7e));
        // EF 0222
        gbc.setState(0xe934, 0x965f, 0xc8d0, 0x3995, 0x53f5, 0x7ea, 0x0, 0x0);
        gbc.writeMem(0x965d, { 0x0, 0x0 });
        gbc.writeMem(0xe934, { 0xef });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x965d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x35, gbc.readMem(0x965d));
        EXPECT(0xe9, gbc.readMem(0x965e));
        EXPECT(0xef, gbc.readMem(0xe934));
        // EF 0223
        gbc.setState(0x2ef5, 0xc12f, 0x8670, 0xdf91, 0xc515, 0x8519, 0x0, 0x0);
        gbc.writeMem(0x2ef5, { 0xef });
        gbc.writeMem(0xc12d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xc12d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xf6, gbc.readMem(0xc12d));
        EXPECT(0x2e, gbc.readMem(0xc12e));
        // EF 0224
        gbc.setState(0x50b6, 0xbfb8, 0x2d50, 0x2ab9, 0x9c4c, 0x50e4, 0x1, 0x0);
        gbc.writeMem(0x50b6, { 0xef });
        gbc.writeMem(0xbfb6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xbfb6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb7, gbc.readMem(0xbfb6));
        EXPECT(0x50, gbc.readMem(0xbfb7));
        // EF 0227
        gbc.setState(0xcba9, 0xf277, 0x5510, 0x674, 0xe382, 0xf1e9, 0x0, 0x1);
        gbc.writeMem(0xcba9, { 0xef });
        gbc.writeMem(0xf275, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xf275, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xcba9));
        EXPECT(0xaa, gbc.readMem(0xf275));
        EXPECT(0xcb, gbc.readMem(0xf276));
        // EF 0229
        gbc.setState(0x754a, 0xdb43, 0xa850, 0x9322, 0x3da7, 0x497f, 0x0, 0x1);
        gbc.writeMem(0x754a, { 0xef });
        gbc.writeMem(0xdb41, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xdb41, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0xdb41));
        EXPECT(0x75, gbc.readMem(0xdb42));
        // EF 022A
        gbc.setState(0x9121, 0xebcc, 0x3c00, 0xcca2, 0x5d4b, 0xc38b, 0x1, 0x1);
        gbc.writeMem(0x9121, { 0xef });
        gbc.writeMem(0xebca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xebca, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9121));
        EXPECT(0x22, gbc.readMem(0xebca));
        EXPECT(0x91, gbc.readMem(0xebcb));
        // EF 022B
        gbc.setState(0xe0f2, 0xfdf2, 0x2ad0, 0xfb7b, 0xc1b4, 0x535a, 0x1, 0x0);
        gbc.writeMem(0xe0f2, { 0xef });
        gbc.writeMem(0xfdf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xfdf0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xe0f2));
        EXPECT(0xf3, gbc.readMem(0xfdf0));
        EXPECT(0xe0, gbc.readMem(0xfdf1));
        // EF 022C
        gbc.setState(0x730d, 0xd404, 0xc1b0, 0xe2ad, 0x2486, 0xcba6, 0x1, 0x1);
        gbc.writeMem(0x730d, { 0xef });
        gbc.writeMem(0xd402, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xd402, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0xd402));
        EXPECT(0x73, gbc.readMem(0xd403));
        // EF 022E
        gbc.setState(0x71aa, 0x99e4, 0xb4a0, 0xbde4, 0xf6af, 0x3729, 0x0, 0x1);
        gbc.writeMem(0x71aa, { 0xef });
        gbc.writeMem(0x99e2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x99e2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0x99e2));
        EXPECT(0x71, gbc.readMem(0x99e3));
        // EF 0230
        gbc.setState(0xe162, 0x8670, 0x73f0, 0x85f6, 0x8d17, 0xc39b, 0x0, 0x0);
        gbc.writeMem(0x866e, { 0x0, 0x0 });
        gbc.writeMem(0xe162, { 0xef });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x866e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0x866e));
        EXPECT(0xe1, gbc.readMem(0x866f));
        EXPECT(0xef, gbc.readMem(0xe162));
        // EF 0232
        gbc.setState(0x91fa, 0xb418, 0xbd0, 0x6eb3, 0x582a, 0x40be, 0x0, 0x0);
        gbc.writeMem(0x91fa, { 0xef });
        gbc.writeMem(0xb416, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xb416, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x91fa));
        EXPECT(0xfb, gbc.readMem(0xb416));
        EXPECT(0x91, gbc.readMem(0xb417));
        // EF 0235
        gbc.setState(0x169d, 0xfade, 0x1d30, 0x26c8, 0xdc12, 0x1b84, 0x0, 0x0);
        gbc.writeMem(0x169d, { 0xef });
        gbc.writeMem(0xfadc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xfadc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x9e, gbc.readMem(0xfadc));
        EXPECT(0x16, gbc.readMem(0xfadd));
        // EF 0236
        gbc.setState(0x9ae6, 0xbd80, 0x3540, 0x295e, 0x6b67, 0xc16d, 0x0, 0x0);
        gbc.writeMem(0x9ae6, { 0xef });
        gbc.writeMem(0xbd7e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xbd7e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9ae6));
        EXPECT(0xe7, gbc.readMem(0xbd7e));
        EXPECT(0x9a, gbc.readMem(0xbd7f));
        // EF 0237
        gbc.setState(0xfac, 0xaea1, 0xcfb0, 0x5fac, 0x21c0, 0x9b64, 0x0, 0x1);
        gbc.writeMem(0xfac, { 0xef });
        gbc.writeMem(0xae9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xae9f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xad, gbc.readMem(0xae9f));
        EXPECT(0xf, gbc.readMem(0xaea0));
        // EF 023A
        gbc.setState(0x7b7, 0xf997, 0x2b60, 0xd710, 0x259e, 0xb06f, 0x1, 0x0);
        gbc.writeMem(0x7b7, { 0xef });
        gbc.writeMem(0xf995, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xf995, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb8, gbc.readMem(0xf995));
        EXPECT(0x7, gbc.readMem(0xf996));
        // EF 023D
        gbc.setState(0xa435, 0xac3e, 0xc0d0, 0x5b09, 0xc01a, 0x58e8, 0x0, 0x1);
        gbc.writeMem(0xa435, { 0xef });
        gbc.writeMem(0xac3c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xac3c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa435));
        EXPECT(0x36, gbc.readMem(0xac3c));
        EXPECT(0xa4, gbc.readMem(0xac3d));
        // EF 023F
        gbc.setState(0x2d49, 0xb4f1, 0xc060, 0xb107, 0x87e1, 0x96b0, 0x1, 0x1);
        gbc.writeMem(0x2d49, { 0xef });
        gbc.writeMem(0xb4ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xb4ef, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x4a, gbc.readMem(0xb4ef));
        EXPECT(0x2d, gbc.readMem(0xb4f0));
        // EF 0242
        gbc.setState(0x19dd, 0x853c, 0x85e0, 0x5cc5, 0xe6b2, 0x606e, 0x1, 0x1);
        gbc.writeMem(0x19dd, { 0xef });
        gbc.writeMem(0x853a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x853a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xde, gbc.readMem(0x853a));
        EXPECT(0x19, gbc.readMem(0x853b));
        // EF 0243
        gbc.setState(0x1fe8, 0xacd9, 0x20c0, 0xef9a, 0x5724, 0xf38d, 0x1, 0x0);
        gbc.writeMem(0x1fe8, { 0xef });
        gbc.writeMem(0xacd7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xacd7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0xacd7));
        EXPECT(0x1f, gbc.readMem(0xacd8));
        // EF 0246
        gbc.setState(0x2f0e, 0xbf50, 0x8180, 0xebd5, 0xbb25, 0x699f, 0x0, 0x0);
        gbc.writeMem(0x2f0e, { 0xef });
        gbc.writeMem(0xbf4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xbf4e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xbf4e));
        EXPECT(0x2f, gbc.readMem(0xbf4f));
        // EF 0248
        gbc.setState(0x26b6, 0xf94a, 0x790, 0x4ba, 0x622, 0x21b4, 0x0, 0x1);
        gbc.writeMem(0x26b6, { 0xef });
        gbc.writeMem(0xf948, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xf948, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb7, gbc.readMem(0xf948));
        EXPECT(0x26, gbc.readMem(0xf949));
        // EF 0249
        gbc.setState(0x3b69, 0xc5f0, 0x1870, 0xa82f, 0x3ef5, 0xdfdb, 0x0, 0x1);
        gbc.writeMem(0x3b69, { 0xef });
        gbc.writeMem(0xc5ee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xc5ee, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xc5ee));
        EXPECT(0x3b, gbc.readMem(0xc5ef));
        // EF 024B
        gbc.setState(0xbb0d, 0x8daa, 0x1730, 0xe98e, 0xd515, 0x6f99, 0x1, 0x0);
        gbc.writeMem(0x8da8, { 0x0, 0x0 });
        gbc.writeMem(0xbb0d, { 0xef });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x8da8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe, gbc.readMem(0x8da8));
        EXPECT(0xbb, gbc.readMem(0x8da9));
        EXPECT(0xef, gbc.readMem(0xbb0d));
        // EF 024D
        gbc.setState(0x8063, 0xff7b, 0x9500, 0x32aa, 0x7047, 0x5c75, 0x1, 0x0);
        gbc.writeMem(0x8063, { 0xef });
        gbc.writeMem(0xff79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xff79, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8063));
        EXPECT(0x64, gbc.readMem(0xff79));
        EXPECT(0x80, gbc.readMem(0xff7a));
        // EF 024F
        gbc.setState(0x1d0f, 0xcadd, 0x930, 0xfde2, 0xc51c, 0x77be, 0x1, 0x0);
        gbc.writeMem(0x1d0f, { 0xef });
        gbc.writeMem(0xcadb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xcadb, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x10, gbc.readMem(0xcadb));
        EXPECT(0x1d, gbc.readMem(0xcadc));
        // EF 0252
        gbc.setState(0x7475, 0x84e0, 0x4400, 0xd51, 0xc1be, 0x2c61, 0x0, 0x0);
        gbc.writeMem(0x7475, { 0xef });
        gbc.writeMem(0x84de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x84de, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x76, gbc.readMem(0x84de));
        EXPECT(0x74, gbc.readMem(0x84df));
        // EF 0253
        gbc.setState(0x9b37, 0x8c66, 0x7490, 0x116c, 0x19f5, 0x957f, 0x1, 0x1);
        gbc.writeMem(0x8c64, { 0x0, 0x0 });
        gbc.writeMem(0x9b37, { 0xef });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x8c64, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x38, gbc.readMem(0x8c64));
        EXPECT(0x9b, gbc.readMem(0x8c65));
        EXPECT(0xef, gbc.readMem(0x9b37));
        // EF 0254
        gbc.setState(0x6d0a, 0xd051, 0x4960, 0x917f, 0x5ffc, 0xad07, 0x1, 0x1);
        gbc.writeMem(0x6d0a, { 0xef });
        gbc.writeMem(0xd04f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xd04f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb, gbc.readMem(0xd04f));
        EXPECT(0x6d, gbc.readMem(0xd050));
        // EF 0258
        gbc.setState(0x42dc, 0xe0ac, 0xf0d0, 0x9a7f, 0xfc64, 0x6539, 0x1, 0x0);
        gbc.writeMem(0x42dc, { 0xef });
        gbc.writeMem(0xe0aa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xe0aa, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0xe0aa));
        EXPECT(0x42, gbc.readMem(0xe0ab));
        // EF 025A
        gbc.setState(0xd356, 0xc573, 0x48b0, 0xfc83, 0xdbb0, 0x6b88, 0x1, 0x1);
        gbc.writeMem(0xc571, { 0x0, 0x0 });
        gbc.writeMem(0xd356, { 0xef });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xc571, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xc571));
        EXPECT(0xd3, gbc.readMem(0xc572));
        EXPECT(0xef, gbc.readMem(0xd356));
        // EF 025D
        gbc.setState(0xe974, 0xbcd4, 0xd370, 0xd2e8, 0x35b7, 0x7660, 0x1, 0x0);
        gbc.writeMem(0xbcd2, { 0x0, 0x0 });
        gbc.writeMem(0xe974, { 0xef });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xbcd2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x75, gbc.readMem(0xbcd2));
        EXPECT(0xe9, gbc.readMem(0xbcd3));
        EXPECT(0xef, gbc.readMem(0xe974));
        // EF 025F
        gbc.setState(0x574a, 0x8499, 0x2170, 0xcf62, 0xd4d6, 0x5d5a, 0x0, 0x0);
        gbc.writeMem(0x574a, { 0xef });
        gbc.writeMem(0x8497, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8497, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x4b, gbc.readMem(0x8497));
        EXPECT(0x57, gbc.readMem(0x8498));
        // EF 0262
        gbc.setState(0xd71f, 0xfc88, 0xbb50, 0xf084, 0x95ce, 0xf05d, 0x1, 0x1);
        gbc.writeMem(0xd71f, { 0xef });
        gbc.writeMem(0xfc86, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xfc86, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd71f));
        EXPECT(0x20, gbc.readMem(0xfc86));
        EXPECT(0xd7, gbc.readMem(0xfc87));
        // EF 0264
        gbc.setState(0x1c86, 0xb57a, 0xc550, 0xa72d, 0xd2b5, 0x9447, 0x1, 0x1);
        gbc.writeMem(0x1c86, { 0xef });
        gbc.writeMem(0xb578, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xb578, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x87, gbc.readMem(0xb578));
        EXPECT(0x1c, gbc.readMem(0xb579));
        // EF 0265
        gbc.setState(0x395b, 0xf929, 0x71a0, 0x2010, 0xf90f, 0x1ec0, 0x1, 0x0);
        gbc.writeMem(0x395b, { 0xef });
        gbc.writeMem(0xf927, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xf927, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0xf927));
        EXPECT(0x39, gbc.readMem(0xf928));
        // EF 0268
        gbc.setState(0x4a30, 0xc1ce, 0xf290, 0xe1fb, 0x8d, 0x7df3, 0x1, 0x1);
        gbc.writeMem(0x4a30, { 0xef });
        gbc.writeMem(0xc1cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xc1cc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0xc1cc));
        EXPECT(0x4a, gbc.readMem(0xc1cd));
        // EF 026A
        gbc.setState(0x722c, 0x9621, 0xe350, 0x4894, 0x4179, 0xadec, 0x0, 0x1);
        gbc.writeMem(0x722c, { 0xef });
        gbc.writeMem(0x961f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x961f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2d, gbc.readMem(0x961f));
        EXPECT(0x72, gbc.readMem(0x9620));
        // EF 026C
        gbc.setState(0x5422, 0xa3f2, 0x7150, 0xd576, 0xe79d, 0x9f17, 0x0, 0x0);
        gbc.writeMem(0x5422, { 0xef });
        gbc.writeMem(0xa3f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa3f0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x23, gbc.readMem(0xa3f0));
        EXPECT(0x54, gbc.readMem(0xa3f1));
        // EF 026F
        gbc.setState(0xa369, 0xb9d5, 0x5240, 0x6aa, 0x3905, 0xda40, 0x0, 0x1);
        gbc.writeMem(0xa369, { 0xef });
        gbc.writeMem(0xb9d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xb9d3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa369));
        EXPECT(0x6a, gbc.readMem(0xb9d3));
        EXPECT(0xa3, gbc.readMem(0xb9d4));
        // EF 0270
        gbc.setState(0x2454, 0xb981, 0xca70, 0x791d, 0x8c79, 0xb9b9, 0x1, 0x0);
        gbc.writeMem(0x2454, { 0xef });
        gbc.writeMem(0xb97f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x8c, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xb97f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x55, gbc.readMem(0xb97f));
        EXPECT(0x24, gbc.readMem(0xb980));
        // EF 0274
        gbc.setState(0xfb1, 0xc8da, 0xc570, 0x38b4, 0x7d1, 0x41c5, 0x0, 0x1);
        gbc.writeMem(0xfb1, { 0xef });
        gbc.writeMem(0xc8d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xc8d8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb2, gbc.readMem(0xc8d8));
        EXPECT(0xf, gbc.readMem(0xc8d9));
        // EF 0275
        gbc.setState(0x99de, 0xc1dc, 0xe7f0, 0x26a1, 0x452c, 0x9697, 0x1, 0x0);
        gbc.writeMem(0x99de, { 0xef });
        gbc.writeMem(0xc1da, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xc1da, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x99de));
        EXPECT(0xdf, gbc.readMem(0xc1da));
        EXPECT(0x99, gbc.readMem(0xc1db));
        // EF 0278
        gbc.setState(0x292, 0xff63, 0xc270, 0x1975, 0x3bfa, 0x100b, 0x1, 0x0);
        gbc.writeMem(0x292, { 0xef });
        gbc.writeMem(0xff61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xff61, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x93, gbc.readMem(0xff61));
        EXPECT(0x2, gbc.readMem(0xff62));
        // EF 0279
        gbc.setState(0xc7d1, 0xf952, 0xa490, 0x81ec, 0xea15, 0xf3d2, 0x1, 0x0);
        gbc.writeMem(0xc7d1, { 0xef });
        gbc.writeMem(0xf950, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xf950, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc7d1));
        EXPECT(0xd2, gbc.readMem(0xf950));
        EXPECT(0xc7, gbc.readMem(0xf951));
        // EF 027E
        gbc.setState(0xc875, 0xcf54, 0x8940, 0x858e, 0xe71, 0xa401, 0x1, 0x1);
        gbc.writeMem(0xc875, { 0xef });
        gbc.writeMem(0xcf52, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xcf52, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc875));
        EXPECT(0x76, gbc.readMem(0xcf52));
        EXPECT(0xc8, gbc.readMem(0xcf53));
        // EF 0281
        gbc.setState(0x6b8e, 0xe436, 0x4040, 0x2205, 0x8ad1, 0x22fa, 0x0, 0x1);
        gbc.writeMem(0x6b8e, { 0xef });
        gbc.writeMem(0xe434, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xe434, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8f, gbc.readMem(0xe434));
        EXPECT(0x6b, gbc.readMem(0xe435));
        // EF 0287
        gbc.setState(0x376a, 0xbf78, 0x4340, 0x56f9, 0xd54a, 0x4050, 0x1, 0x1);
        gbc.writeMem(0x376a, { 0xef });
        gbc.writeMem(0xbf76, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xbf76, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xbf76));
        EXPECT(0x37, gbc.readMem(0xbf77));
        // EF 0288
        gbc.setState(0x2b1b, 0xbe98, 0xa20, 0x911f, 0xcf1f, 0xd8e3, 0x0, 0x1);
        gbc.writeMem(0x2b1b, { 0xef });
        gbc.writeMem(0xbe96, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xbe96, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1c, gbc.readMem(0xbe96));
        EXPECT(0x2b, gbc.readMem(0xbe97));
        // EF 028C
        gbc.setState(0x95a2, 0xedf3, 0xb9f0, 0x214b, 0x6e16, 0x38ac, 0x0, 0x1);
        gbc.writeMem(0x95a2, { 0xef });
        gbc.writeMem(0xedf1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xedf1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x95a2));
        EXPECT(0xa3, gbc.readMem(0xedf1));
        EXPECT(0x95, gbc.readMem(0xedf2));
        // EF 028E
        gbc.setState(0xacd, 0xac8d, 0x4ec0, 0x8af, 0x5d11, 0x7c1e, 0x1, 0x0);
        gbc.writeMem(0xacd, { 0xef });
        gbc.writeMem(0xac8b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xac8b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xac8b));
        EXPECT(0xa, gbc.readMem(0xac8c));
        // EF 028F
        gbc.setState(0xb3ba, 0x88d2, 0x5c60, 0x8542, 0x32b6, 0x832e, 0x0, 0x1);
        gbc.writeMem(0x88d0, { 0x0, 0x0 });
        gbc.writeMem(0xb3ba, { 0xef });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x88d0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xbb, gbc.readMem(0x88d0));
        EXPECT(0xb3, gbc.readMem(0x88d1));
        EXPECT(0xef, gbc.readMem(0xb3ba));
        // EF 0291
        gbc.setState(0xc618, 0xc9c4, 0xe80, 0x5c74, 0x3d97, 0xf94c, 0x0, 0x0);
        gbc.writeMem(0xc618, { 0xef });
        gbc.writeMem(0xc9c2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x74, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xc9c2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc618));
        EXPECT(0x19, gbc.readMem(0xc9c2));
        EXPECT(0xc6, gbc.readMem(0xc9c3));
        // EF 0295
        gbc.setState(0x733a, 0xcf4d, 0x8470, 0x3abd, 0x9823, 0xe8fc, 0x0, 0x0);
        gbc.writeMem(0x733a, { 0xef });
        gbc.writeMem(0xcf4b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xcf4b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3b, gbc.readMem(0xcf4b));
        EXPECT(0x73, gbc.readMem(0xcf4c));
        // EF 0298
        gbc.setState(0x6db2, 0xb843, 0x3cd0, 0x5486, 0x78e7, 0xb7f4, 0x1, 0x0);
        gbc.writeMem(0x6db2, { 0xef });
        gbc.writeMem(0xb841, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb841, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0xb841));
        EXPECT(0x6d, gbc.readMem(0xb842));
        // EF 0299
        gbc.setState(0x5c52, 0xac21, 0x87f0, 0xf638, 0x835d, 0xb4cc, 0x1, 0x0);
        gbc.writeMem(0x5c52, { 0xef });
        gbc.writeMem(0xac1f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xac1f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x53, gbc.readMem(0xac1f));
        EXPECT(0x5c, gbc.readMem(0xac20));
        // EF 029C
        gbc.setState(0xb62b, 0x9853, 0x4de0, 0xad48, 0x859c, 0x7e92, 0x0, 0x0);
        gbc.writeMem(0x9851, { 0x0, 0x0 });
        gbc.writeMem(0xb62b, { 0xef });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9851, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0x9851));
        EXPECT(0xb6, gbc.readMem(0x9852));
        EXPECT(0xef, gbc.readMem(0xb62b));
        // EF 02A2
        gbc.setState(0xaed3, 0x9a5b, 0x7850, 0x7ce5, 0xeb8e, 0x207e, 0x0, 0x1);
        gbc.writeMem(0x9a59, { 0x0, 0x0 });
        gbc.writeMem(0xaed3, { 0xef });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x9a59, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xd4, gbc.readMem(0x9a59));
        EXPECT(0xae, gbc.readMem(0x9a5a));
        EXPECT(0xef, gbc.readMem(0xaed3));
        // EF 02A3
        gbc.setState(0x7b35, 0xb77e, 0x4cc0, 0x9d3a, 0x1117, 0x904e, 0x0, 0x0);
        gbc.writeMem(0x7b35, { 0xef });
        gbc.writeMem(0xb77c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xb77c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x36, gbc.readMem(0xb77c));
        EXPECT(0x7b, gbc.readMem(0xb77d));
        // EF 02A4
        gbc.setState(0xbd4f, 0xf4da, 0x4900, 0xa558, 0x91b9, 0x3688, 0x1, 0x0);
        gbc.writeMem(0xbd4f, { 0xef });
        gbc.writeMem(0xf4d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf4d8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xbd4f));
        EXPECT(0x50, gbc.readMem(0xf4d8));
        EXPECT(0xbd, gbc.readMem(0xf4d9));
        // EF 02A5
        gbc.setState(0x43a1, 0xc985, 0xf710, 0x180e, 0x8f56, 0x9bbd, 0x0, 0x0);
        gbc.writeMem(0x43a1, { 0xef });
        gbc.writeMem(0xc983, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc983, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xc983));
        EXPECT(0x43, gbc.readMem(0xc984));
        // EF 02A9
        gbc.setState(0x6da4, 0xb9d8, 0x8380, 0x6e5, 0x90ae, 0xb6bd, 0x0, 0x1);
        gbc.writeMem(0x6da4, { 0xef });
        gbc.writeMem(0xb9d6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xb9d6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0xb9d6));
        EXPECT(0x6d, gbc.readMem(0xb9d7));
        // EF 02AA
        gbc.setState(0x904f, 0xef8d, 0x4c0, 0x6b04, 0xbaa2, 0xe6b5, 0x0, 0x1);
        gbc.writeMem(0x904f, { 0xef });
        gbc.writeMem(0xef8b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xef8b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x904f));
        EXPECT(0x50, gbc.readMem(0xef8b));
        EXPECT(0x90, gbc.readMem(0xef8c));
        // EF 02AE
        gbc.setState(0x69cd, 0xc659, 0x1000, 0xb954, 0x161c, 0x5959, 0x0, 0x1);
        gbc.writeMem(0x69cd, { 0xef });
        gbc.writeMem(0xc657, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xc657, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xce, gbc.readMem(0xc657));
        EXPECT(0x69, gbc.readMem(0xc658));
        // EF 02AF
        gbc.setState(0x2919, 0xb370, 0x1520, 0x93ae, 0x18df, 0xac43, 0x0, 0x0);
        gbc.writeMem(0x2919, { 0xef });
        gbc.writeMem(0xb36e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xb36e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1a, gbc.readMem(0xb36e));
        EXPECT(0x29, gbc.readMem(0xb36f));
        // EF 02B0
        gbc.setState(0xdba4, 0xbbf8, 0x8b90, 0x1583, 0xccd7, 0xe9d8, 0x1, 0x1);
        gbc.writeMem(0xbbf6, { 0x0, 0x0 });
        gbc.writeMem(0xdba4, { 0xef });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xbbf6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0xbbf6));
        EXPECT(0xdb, gbc.readMem(0xbbf7));
        EXPECT(0xef, gbc.readMem(0xdba4));
        // EF 02B1
        gbc.setState(0x205e, 0xdb23, 0x9f30, 0x39a2, 0x2a64, 0x9a63, 0x1, 0x1);
        gbc.writeMem(0x205e, { 0xef });
        gbc.writeMem(0xdb21, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xdb21, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x5f, gbc.readMem(0xdb21));
        EXPECT(0x20, gbc.readMem(0xdb22));
        // EF 02B2
        gbc.setState(0x77fd, 0x85b3, 0xab50, 0x3618, 0xeb03, 0xf112, 0x0, 0x0);
        gbc.writeMem(0x77fd, { 0xef });
        gbc.writeMem(0x85b1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x85b1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfe, gbc.readMem(0x85b1));
        EXPECT(0x77, gbc.readMem(0x85b2));
        // EF 02B3
        gbc.setState(0x45e8, 0xc13f, 0xde0, 0xa09b, 0xa491, 0xe472, 0x0, 0x0);
        gbc.writeMem(0x45e8, { 0xef });
        gbc.writeMem(0xc13d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xc13d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0xc13d));
        EXPECT(0x45, gbc.readMem(0xc13e));
        // EF 02B5
        gbc.setState(0x1205, 0xc62b, 0x2060, 0xcda2, 0xcd49, 0xd567, 0x1, 0x1);
        gbc.writeMem(0x1205, { 0xef });
        gbc.writeMem(0xc629, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xc629, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6, gbc.readMem(0xc629));
        EXPECT(0x12, gbc.readMem(0xc62a));
        // EF 02B8
        gbc.setState(0xe22f, 0xea8a, 0xdd80, 0xd0a5, 0xae11, 0xae42, 0x1, 0x1);
        gbc.writeMem(0xe22f, { 0xef });
        gbc.writeMem(0xea88, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xea88, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xe22f));
        EXPECT(0x30, gbc.readMem(0xea88));
        EXPECT(0xe2, gbc.readMem(0xea89));
        // EF 02BA
        gbc.setState(0xd60f, 0xfb57, 0xe8f0, 0x8059, 0xe282, 0x41da, 0x0, 0x0);
        gbc.writeMem(0xd60f, { 0xef });
        gbc.writeMem(0xfb55, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xfb55, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xd60f));
        EXPECT(0x10, gbc.readMem(0xfb55));
        EXPECT(0xd6, gbc.readMem(0xfb56));
        // EF 02BB
        gbc.setState(0xe411, 0x9ab0, 0xb080, 0x2fb7, 0x20db, 0x34fa, 0x1, 0x0);
        gbc.writeMem(0x9aae, { 0x0, 0x0 });
        gbc.writeMem(0xe411, { 0xef });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x9aae, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x12, gbc.readMem(0x9aae));
        EXPECT(0xe4, gbc.readMem(0x9aaf));
        EXPECT(0xef, gbc.readMem(0xe411));
        // EF 02BD
        gbc.setState(0x2d59, 0x8fe5, 0xf80, 0xdc4, 0x95d2, 0xaa95, 0x1, 0x0);
        gbc.writeMem(0x2d59, { 0xef });
        gbc.writeMem(0x8fe3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x8fe3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5a, gbc.readMem(0x8fe3));
        EXPECT(0x2d, gbc.readMem(0x8fe4));
        // EF 02BE
        gbc.setState(0xb053, 0xfc31, 0x720, 0xc068, 0x2e4c, 0xf2d9, 0x1, 0x0);
        gbc.writeMem(0xb053, { 0xef });
        gbc.writeMem(0xfc2f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xfc2f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb053));
        EXPECT(0x54, gbc.readMem(0xfc2f));
        EXPECT(0xb0, gbc.readMem(0xfc30));
        // EF 02BF
        gbc.setState(0x1a21, 0x844d, 0xb220, 0xcd08, 0x126d, 0xca93, 0x0, 0x1);
        gbc.writeMem(0x1a21, { 0xef });
        gbc.writeMem(0x844b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x844b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x22, gbc.readMem(0x844b));
        EXPECT(0x1a, gbc.readMem(0x844c));
        // EF 02C2
        gbc.setState(0xc24c, 0xf657, 0x85d0, 0x618, 0x7760, 0xa098, 0x0, 0x1);
        gbc.writeMem(0xc24c, { 0xef });
        gbc.writeMem(0xf655, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xf655, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc24c));
        EXPECT(0x4d, gbc.readMem(0xf655));
        EXPECT(0xc2, gbc.readMem(0xf656));
        // EF 02C4
        gbc.setState(0x1867, 0xfd3f, 0x8270, 0x61a3, 0xab8d, 0xeddf, 0x0, 0x0);
        gbc.writeMem(0x1867, { 0xef });
        gbc.writeMem(0xfd3d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xfd3d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x68, gbc.readMem(0xfd3d));
        EXPECT(0x18, gbc.readMem(0xfd3e));
        // EF 02C6
        gbc.setState(0xef90, 0xf697, 0xe4b0, 0x90c8, 0x14f0, 0xc34a, 0x0, 0x1);
        gbc.writeMem(0xef90, { 0xef });
        gbc.writeMem(0xf695, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xf695, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xef90));
        EXPECT(0x91, gbc.readMem(0xf695));
        EXPECT(0xef, gbc.readMem(0xf696));
        // EF 02C7
        gbc.setState(0x602e, 0xf9ea, 0xcd50, 0x38bd, 0x5912, 0x74cc, 0x0, 0x0);
        gbc.writeMem(0x602e, { 0xef });
        gbc.writeMem(0xf9e8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xf9e8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0xf9e8));
        EXPECT(0x60, gbc.readMem(0xf9e9));
        // EF 02C8
        gbc.setState(0x7db6, 0xcc15, 0xb7a0, 0x8bd4, 0xe66f, 0x9df9, 0x1, 0x0);
        gbc.writeMem(0x7db6, { 0xef });
        gbc.writeMem(0xcc13, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xcc13, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb7, gbc.readMem(0xcc13));
        EXPECT(0x7d, gbc.readMem(0xcc14));
        // EF 02C9
        gbc.setState(0x8b85, 0x80b8, 0xa340, 0x3af4, 0x794b, 0x4de0, 0x1, 0x0);
        gbc.writeMem(0x80b6, { 0x0, 0x0 });
        gbc.writeMem(0x8b85, { 0xef });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x80b6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0x80b6));
        EXPECT(0x8b, gbc.readMem(0x80b7));
        EXPECT(0xef, gbc.readMem(0x8b85));
        // EF 02CB
        gbc.setState(0x61a3, 0xdb49, 0xe090, 0xde9b, 0x1a54, 0xa5bb, 0x1, 0x0);
        gbc.writeMem(0x61a3, { 0xef });
        gbc.writeMem(0xdb47, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xdb47, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa4, gbc.readMem(0xdb47));
        EXPECT(0x61, gbc.readMem(0xdb48));
        // EF 02CE
        gbc.setState(0x4456, 0xb11f, 0xbb10, 0xbcde, 0xc23a, 0x996d, 0x0, 0x0);
        gbc.writeMem(0x4456, { 0xef });
        gbc.writeMem(0xb11d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xb11d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x57, gbc.readMem(0xb11d));
        EXPECT(0x44, gbc.readMem(0xb11e));
        // EF 02D0
        gbc.setState(0x8020, 0x885e, 0x3f70, 0xfd01, 0xdbcd, 0xf7b3, 0x0, 0x1);
        gbc.writeMem(0x8020, { 0xef });
        gbc.writeMem(0x885c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x885c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8020));
        EXPECT(0x21, gbc.readMem(0x885c));
        EXPECT(0x80, gbc.readMem(0x885d));
        // EF 02D1
        gbc.setState(0x59fe, 0xc24d, 0xa5d0, 0xc390, 0x55cb, 0xe8a4, 0x0, 0x1);
        gbc.writeMem(0x59fe, { 0xef });
        gbc.writeMem(0xc24b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc24b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0xc24b));
        EXPECT(0x59, gbc.readMem(0xc24c));
        // EF 02D2
        gbc.setState(0x1630, 0xcaf1, 0x1ec0, 0x7668, 0x9c22, 0x2e46, 0x1, 0x1);
        gbc.writeMem(0x1630, { 0xef });
        gbc.writeMem(0xcaef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xcaef, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x31, gbc.readMem(0xcaef));
        EXPECT(0x16, gbc.readMem(0xcaf0));
        // EF 02D5
        gbc.setState(0x932, 0x88e9, 0xeca0, 0xcf6d, 0xfdad, 0xf6b0, 0x0, 0x1);
        gbc.writeMem(0x932, { 0xef });
        gbc.writeMem(0x88e7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x88e7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x33, gbc.readMem(0x88e7));
        EXPECT(0x9, gbc.readMem(0x88e8));
        // EF 02D6
        gbc.setState(0x1b0b, 0xc8a2, 0xb190, 0x85cc, 0xab19, 0x9021, 0x0, 0x1);
        gbc.writeMem(0x1b0b, { 0xef });
        gbc.writeMem(0xc8a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xc8a0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xc, gbc.readMem(0xc8a0));
        EXPECT(0x1b, gbc.readMem(0xc8a1));
        // EF 02D9
        gbc.setState(0xabe3, 0xb83d, 0xe370, 0x2534, 0xebbf, 0x6626, 0x0, 0x0);
        gbc.writeMem(0xabe3, { 0xef });
        gbc.writeMem(0xb83b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb83b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xabe3));
        EXPECT(0xe4, gbc.readMem(0xb83b));
        EXPECT(0xab, gbc.readMem(0xb83c));
        // EF 02DA
        gbc.setState(0x69fb, 0x9de9, 0x5ea0, 0xb44a, 0x112a, 0x5b8c, 0x0, 0x1);
        gbc.writeMem(0x69fb, { 0xef });
        gbc.writeMem(0x9de7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x9de7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfc, gbc.readMem(0x9de7));
        EXPECT(0x69, gbc.readMem(0x9de8));
        // EF 02DB
        gbc.setState(0xcbce, 0xa151, 0x8870, 0x9df9, 0x1704, 0x55ec, 0x1, 0x1);
        gbc.writeMem(0xa14f, { 0x0, 0x0 });
        gbc.writeMem(0xcbce, { 0xef });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xa14f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcf, gbc.readMem(0xa14f));
        EXPECT(0xcb, gbc.readMem(0xa150));
        EXPECT(0xef, gbc.readMem(0xcbce));
        // EF 02DC
        gbc.setState(0xe110, 0xd6eb, 0xad90, 0x3b35, 0x6079, 0xbf3b, 0x1, 0x0);
        gbc.writeMem(0xd6e9, { 0x0, 0x0 });
        gbc.writeMem(0xe110, { 0xef });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xd6e9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x11, gbc.readMem(0xd6e9));
        EXPECT(0xe1, gbc.readMem(0xd6ea));
        EXPECT(0xef, gbc.readMem(0xe110));
        // EF 02DD
        gbc.setState(0x2872, 0xee3b, 0x2550, 0x58dc, 0xc055, 0xa59f, 0x1, 0x1);
        gbc.writeMem(0x2872, { 0xef });
        gbc.writeMem(0xee39, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xee39, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x73, gbc.readMem(0xee39));
        EXPECT(0x28, gbc.readMem(0xee3a));
        // EF 02DF
        gbc.setState(0xbfe5, 0x886e, 0x8660, 0xd515, 0x42e3, 0x33f5, 0x0, 0x0);
        gbc.writeMem(0x886c, { 0x0, 0x0 });
        gbc.writeMem(0xbfe5, { 0xef });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x886c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xe6, gbc.readMem(0x886c));
        EXPECT(0xbf, gbc.readMem(0x886d));
        EXPECT(0xef, gbc.readMem(0xbfe5));
        // EF 02E2
        gbc.setState(0x66e8, 0x8d2b, 0xc730, 0xb6fa, 0xef47, 0xeb2a, 0x1, 0x0);
        gbc.writeMem(0x66e8, { 0xef });
        gbc.writeMem(0x8d29, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x8d29, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe9, gbc.readMem(0x8d29));
        EXPECT(0x66, gbc.readMem(0x8d2a));
        // EF 02E3
        gbc.setState(0x3009, 0xad11, 0xf620, 0x5fbe, 0x1dd8, 0x936d, 0x0, 0x0);
        gbc.writeMem(0x3009, { 0xef });
        gbc.writeMem(0xad0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xad0f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa, gbc.readMem(0xad0f));
        EXPECT(0x30, gbc.readMem(0xad10));
        // EF 02E5
        gbc.setState(0xe262, 0xaa0f, 0x2330, 0xc1e0, 0xe6dc, 0x4a67, 0x1, 0x1);
        gbc.writeMem(0xaa0d, { 0x0, 0x0 });
        gbc.writeMem(0xe262, { 0xef });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xaa0d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xaa0d));
        EXPECT(0xe2, gbc.readMem(0xaa0e));
        EXPECT(0xef, gbc.readMem(0xe262));
        // EF 02E9
        gbc.setState(0x55a7, 0xd531, 0xac50, 0xedd9, 0xc46b, 0x1c10, 0x0, 0x0);
        gbc.writeMem(0x55a7, { 0xef });
        gbc.writeMem(0xd52f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xd52f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0xd52f));
        EXPECT(0x55, gbc.readMem(0xd530));
        // EF 02EA
        gbc.setState(0xcc23, 0xc697, 0x2b20, 0x61ce, 0x78f5, 0x5d7b, 0x0, 0x1);
        gbc.writeMem(0xc695, { 0x0, 0x0 });
        gbc.writeMem(0xcc23, { 0xef });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xc695, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x24, gbc.readMem(0xc695));
        EXPECT(0xcc, gbc.readMem(0xc696));
        EXPECT(0xef, gbc.readMem(0xcc23));
        // EF 02EB
        gbc.setState(0x5c2b, 0x9658, 0xeb90, 0x76f7, 0xdff9, 0x24f0, 0x0, 0x1);
        gbc.writeMem(0x5c2b, { 0xef });
        gbc.writeMem(0x9656, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9656, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0x9656));
        EXPECT(0x5c, gbc.readMem(0x9657));
        // EF 02EF
        gbc.setState(0x5d06, 0x892c, 0xbb30, 0x8922, 0x9ab8, 0xb073, 0x0, 0x1);
        gbc.writeMem(0x5d06, { 0xef });
        gbc.writeMem(0x892a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x892a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7, gbc.readMem(0x892a));
        EXPECT(0x5d, gbc.readMem(0x892b));
        // EF 02F2
        gbc.setState(0x783f, 0xc18c, 0x140, 0xae80, 0xa4ba, 0x51e6, 0x0, 0x0);
        gbc.writeMem(0x783f, { 0xef });
        gbc.writeMem(0xc18a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xc18a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xc18a));
        EXPECT(0x78, gbc.readMem(0xc18b));
        // EF 02F3
        gbc.setState(0x75d7, 0xd726, 0x78a0, 0xadd2, 0x1239, 0xb6f4, 0x0, 0x0);
        gbc.writeMem(0x75d7, { 0xef });
        gbc.writeMem(0xd724, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xd724, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd8, gbc.readMem(0xd724));
        EXPECT(0x75, gbc.readMem(0xd725));
        // EF 02F4
        gbc.setState(0x306a, 0xb1df, 0x8a10, 0xa034, 0x2c8e, 0xef81, 0x1, 0x0);
        gbc.writeMem(0x306a, { 0xef });
        gbc.writeMem(0xb1dd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xb1dd, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6b, gbc.readMem(0xb1dd));
        EXPECT(0x30, gbc.readMem(0xb1de));
        // EF 02FC
        gbc.setState(0xabc5, 0xf582, 0x9000, 0x4d4b, 0x61d4, 0xb3ca, 0x0, 0x1);
        gbc.writeMem(0xabc5, { 0xef });
        gbc.writeMem(0xf580, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xf580, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xabc5));
        EXPECT(0xc6, gbc.readMem(0xf580));
        EXPECT(0xab, gbc.readMem(0xf581));
        // EF 02FD
        gbc.setState(0xc3a1, 0xb528, 0x4b00, 0x1966, 0x68de, 0xde77, 0x0, 0x1);
        gbc.writeMem(0xb526, { 0x0, 0x0 });
        gbc.writeMem(0xc3a1, { 0xef });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb526, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa2, gbc.readMem(0xb526));
        EXPECT(0xc3, gbc.readMem(0xb527));
        EXPECT(0xef, gbc.readMem(0xc3a1));
        // EF 02FF
        gbc.setState(0x2573, 0x9eaa, 0x80, 0xef53, 0x77c7, 0xd1d9, 0x0, 0x1);
        gbc.writeMem(0x2573, { 0xef });
        gbc.writeMem(0x9ea8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x9ea8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x74, gbc.readMem(0x9ea8));
        EXPECT(0x25, gbc.readMem(0x9ea9));
        // EF 0301
        gbc.setState(0xce8b, 0xa585, 0xbe70, 0xff0f, 0xdc0e, 0x544, 0x1, 0x0);
        gbc.writeMem(0xa583, { 0x0, 0x0 });
        gbc.writeMem(0xce8b, { 0xef });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xa583, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8c, gbc.readMem(0xa583));
        EXPECT(0xce, gbc.readMem(0xa584));
        EXPECT(0xef, gbc.readMem(0xce8b));
        // EF 030A
        gbc.setState(0xc4aa, 0xa347, 0x7ef0, 0xffe5, 0x7add, 0x7077, 0x1, 0x0);
        gbc.writeMem(0xa345, { 0x0, 0x0 });
        gbc.writeMem(0xc4aa, { 0xef });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xa345, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xab, gbc.readMem(0xa345));
        EXPECT(0xc4, gbc.readMem(0xa346));
        EXPECT(0xef, gbc.readMem(0xc4aa));
        // EF 0310
        gbc.setState(0x4d36, 0x8d97, 0xc330, 0x362f, 0x3cb5, 0xf5a2, 0x1, 0x1);
        gbc.writeMem(0x4d36, { 0xef });
        gbc.writeMem(0x8d95, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x8d95, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0x8d95));
        EXPECT(0x4d, gbc.readMem(0x8d96));
        // EF 0311
        gbc.setState(0xd627, 0xc632, 0x8b20, 0x6e7f, 0x3c1e, 0x9a3b, 0x1, 0x0);
        gbc.writeMem(0xc630, { 0x0, 0x0 });
        gbc.writeMem(0xd627, { 0xef });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xc630, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x28, gbc.readMem(0xc630));
        EXPECT(0xd6, gbc.readMem(0xc631));
        EXPECT(0xef, gbc.readMem(0xd627));
        // EF 0312
        gbc.setState(0x27bc, 0x8442, 0x14f0, 0x4eed, 0xdd12, 0x65c7, 0x0, 0x0);
        gbc.writeMem(0x27bc, { 0xef });
        gbc.writeMem(0x8440, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8440, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbd, gbc.readMem(0x8440));
        EXPECT(0x27, gbc.readMem(0x8441));
        // EF 0317
        gbc.setState(0x1e7, 0xa8dd, 0xda50, 0x92ba, 0x937, 0x36bb, 0x1, 0x1);
        gbc.writeMem(0x1e7, { 0xef });
        gbc.writeMem(0xa8db, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xa8db, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0xa8db));
        EXPECT(0x1, gbc.readMem(0xa8dc));
        // EF 0318
        gbc.setState(0xd69, 0xd5ee, 0xcc60, 0xa6d4, 0x1729, 0x72a4, 0x1, 0x1);
        gbc.writeMem(0xd69, { 0xef });
        gbc.writeMem(0xd5ec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xd5ec, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0xd5ec));
        EXPECT(0xd, gbc.readMem(0xd5ed));
        // EF 031B
        gbc.setState(0x9914, 0xfc27, 0x2d60, 0x3b30, 0x5fe6, 0x49c0, 0x0, 0x0);
        gbc.writeMem(0x9914, { 0xef });
        gbc.writeMem(0xfc25, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xfc25, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9914));
        EXPECT(0x15, gbc.readMem(0xfc25));
        EXPECT(0x99, gbc.readMem(0xfc26));
        // EF 031C
        gbc.setState(0x1b26, 0xe6a8, 0x4a60, 0xf9fe, 0x29fe, 0x4b7d, 0x0, 0x0);
        gbc.writeMem(0x1b26, { 0xef });
        gbc.writeMem(0xe6a6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xe6a6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xe6a6));
        EXPECT(0x1b, gbc.readMem(0xe6a7));
        // EF 031E
        gbc.setState(0x7f32, 0xde0d, 0x7710, 0x965b, 0x5192, 0xc761, 0x0, 0x1);
        gbc.writeMem(0x7f32, { 0xef });
        gbc.writeMem(0xde0b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xde0b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x33, gbc.readMem(0xde0b));
        EXPECT(0x7f, gbc.readMem(0xde0c));
        // EF 0321
        gbc.setState(0x5902, 0xb01e, 0xa0a0, 0x5a34, 0xbdb, 0xc3fd, 0x1, 0x1);
        gbc.writeMem(0x5902, { 0xef });
        gbc.writeMem(0xb01c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xb01c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3, gbc.readMem(0xb01c));
        EXPECT(0x59, gbc.readMem(0xb01d));
        // EF 0322
        gbc.setState(0xc4d3, 0xc7a0, 0x6a20, 0x8804, 0x6df7, 0x347, 0x1, 0x1);
        gbc.writeMem(0xc4d3, { 0xef });
        gbc.writeMem(0xc79e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xc79e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc4d3));
        EXPECT(0xd4, gbc.readMem(0xc79e));
        EXPECT(0xc4, gbc.readMem(0xc79f));
        // EF 0323
        gbc.setState(0xe436, 0xbbb6, 0x31d0, 0xb689, 0x97b7, 0xf3b7, 0x1, 0x1);
        gbc.writeMem(0xbbb4, { 0x0, 0x0 });
        gbc.writeMem(0xe436, { 0xef });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xbbb4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x37, gbc.readMem(0xbbb4));
        EXPECT(0xe4, gbc.readMem(0xbbb5));
        EXPECT(0xef, gbc.readMem(0xe436));
        // EF 0324
        gbc.setState(0xaf35, 0xe1b0, 0x1ac0, 0x67be, 0xb9d9, 0x1ed0, 0x1, 0x0);
        gbc.writeMem(0xaf35, { 0xef });
        gbc.writeMem(0xe1ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xe1ae, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xaf35));
        EXPECT(0x36, gbc.readMem(0xe1ae));
        EXPECT(0xaf, gbc.readMem(0xe1af));
        // EF 032A
        gbc.setState(0x911b, 0xb869, 0x6e90, 0x1181, 0x1c87, 0x7f7b, 0x1, 0x1);
        gbc.writeMem(0x911b, { 0xef });
        gbc.writeMem(0xb867, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xb867, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x911b));
        EXPECT(0x1c, gbc.readMem(0xb867));
        EXPECT(0x91, gbc.readMem(0xb868));
        // EF 032B
        gbc.setState(0xa966, 0xfbc3, 0xedf0, 0xe8, 0x6b3d, 0xa01b, 0x1, 0x1);
        gbc.writeMem(0xa966, { 0xef });
        gbc.writeMem(0xfbc1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xfbc1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa966));
        EXPECT(0x67, gbc.readMem(0xfbc1));
        EXPECT(0xa9, gbc.readMem(0xfbc2));
        // EF 032E
        gbc.setState(0x4d7d, 0xbae0, 0x9330, 0x1a37, 0xd43b, 0xd1c4, 0x0, 0x0);
        gbc.writeMem(0x4d7d, { 0xef });
        gbc.writeMem(0xbade, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xbade, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x7e, gbc.readMem(0xbade));
        EXPECT(0x4d, gbc.readMem(0xbadf));
        // EF 032F
        gbc.setState(0x8f08, 0xa454, 0xfc60, 0x7efa, 0x9422, 0xb7cf, 0x0, 0x0);
        gbc.writeMem(0x8f08, { 0xef });
        gbc.writeMem(0xa452, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa452, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8f08));
        EXPECT(0x9, gbc.readMem(0xa452));
        EXPECT(0x8f, gbc.readMem(0xa453));
        // EF 0330
        gbc.setState(0xd9a4, 0xbffb, 0x2eb0, 0x5fc6, 0x567a, 0x3142, 0x1, 0x0);
        gbc.writeMem(0xbff9, { 0x0, 0x0 });
        gbc.writeMem(0xd9a4, { 0xef });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xbff9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa5, gbc.readMem(0xbff9));
        EXPECT(0xd9, gbc.readMem(0xbffa));
        EXPECT(0xef, gbc.readMem(0xd9a4));
        // EF 0331
        gbc.setState(0x3a57, 0xc32d, 0x3390, 0x9e61, 0x8723, 0x5661, 0x0, 0x1);
        gbc.writeMem(0x3a57, { 0xef });
        gbc.writeMem(0xc32b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xc32b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x58, gbc.readMem(0xc32b));
        EXPECT(0x3a, gbc.readMem(0xc32c));
        // EF 0332
        gbc.setState(0x2d7e, 0xbb3f, 0x53e0, 0xf9f, 0x8396, 0x21e5, 0x0, 0x0);
        gbc.writeMem(0x2d7e, { 0xef });
        gbc.writeMem(0xbb3d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xbb3d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xbb3d));
        EXPECT(0x2d, gbc.readMem(0xbb3e));
        // EF 0333
        gbc.setState(0x874c, 0xe8fc, 0xaa70, 0xc75e, 0x4ee6, 0xe42b, 0x1, 0x0);
        gbc.writeMem(0x874c, { 0xef });
        gbc.writeMem(0xe8fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xe8fa, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x874c));
        EXPECT(0x4d, gbc.readMem(0xe8fa));
        EXPECT(0x87, gbc.readMem(0xe8fb));
        // EF 0335
        gbc.setState(0x23fe, 0xa515, 0xcb10, 0x65ea, 0x766f, 0x9a24, 0x0, 0x0);
        gbc.writeMem(0x23fe, { 0xef });
        gbc.writeMem(0xa513, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xa513, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0xa513));
        EXPECT(0x23, gbc.readMem(0xa514));
        // EF 0337
        gbc.setState(0xb109, 0xfab6, 0xbf50, 0x87a2, 0x972a, 0x148d, 0x1, 0x1);
        gbc.writeMem(0xb109, { 0xef });
        gbc.writeMem(0xfab4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xfab4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb109));
        EXPECT(0xa, gbc.readMem(0xfab4));
        EXPECT(0xb1, gbc.readMem(0xfab5));
        // EF 0338
        gbc.setState(0x435a, 0xcb9f, 0x5320, 0x3727, 0x587, 0xa3b9, 0x0, 0x1);
        gbc.writeMem(0x435a, { 0xef });
        gbc.writeMem(0xcb9d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xcb9d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5b, gbc.readMem(0xcb9d));
        EXPECT(0x43, gbc.readMem(0xcb9e));
        // EF 0339
        gbc.setState(0x16cb, 0xdf32, 0xbe90, 0xb2e5, 0x72b2, 0xb6cf, 0x1, 0x1);
        gbc.writeMem(0x16cb, { 0xef });
        gbc.writeMem(0xdf30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xdf30, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcc, gbc.readMem(0xdf30));
        EXPECT(0x16, gbc.readMem(0xdf31));
        // EF 0340
        gbc.setState(0x2085, 0xd953, 0x1460, 0x28d4, 0xacd8, 0x724e, 0x1, 0x0);
        gbc.writeMem(0x2085, { 0xef });
        gbc.writeMem(0xd951, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xd951, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x86, gbc.readMem(0xd951));
        EXPECT(0x20, gbc.readMem(0xd952));
        // EF 0343
        gbc.setState(0x449f, 0xf9d7, 0x7b70, 0xa2a1, 0xada, 0x9f58, 0x0, 0x1);
        gbc.writeMem(0x449f, { 0xef });
        gbc.writeMem(0xf9d5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xf9d5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa0, gbc.readMem(0xf9d5));
        EXPECT(0x44, gbc.readMem(0xf9d6));
        // EF 0346
        gbc.setState(0x4f83, 0x8283, 0x9160, 0xa2cb, 0x92a0, 0x8f5b, 0x0, 0x0);
        gbc.writeMem(0x4f83, { 0xef });
        gbc.writeMem(0x8281, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x8281, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x84, gbc.readMem(0x8281));
        EXPECT(0x4f, gbc.readMem(0x8282));
        // EF 0349
        gbc.setState(0x819d, 0x8648, 0x5500, 0xc871, 0x8560, 0xa514, 0x0, 0x1);
        gbc.writeMem(0x819d, { 0xef });
        gbc.writeMem(0x8646, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x8646, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x819d));
        EXPECT(0x9e, gbc.readMem(0x8646));
        EXPECT(0x81, gbc.readMem(0x8647));
        // EF 034C
        gbc.setState(0x801d, 0x8a07, 0xd240, 0x2e96, 0x43e2, 0x3622, 0x0, 0x0);
        gbc.writeMem(0x801d, { 0xef });
        gbc.writeMem(0x8a05, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x8a05, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x801d));
        EXPECT(0x1e, gbc.readMem(0x8a05));
        EXPECT(0x80, gbc.readMem(0x8a06));
        // EF 034D
        gbc.setState(0xa829, 0xdba1, 0x8c50, 0x10a8, 0xe5f1, 0x8dac, 0x0, 0x0);
        gbc.writeMem(0xa829, { 0xef });
        gbc.writeMem(0xdb9f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xdb9f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa829));
        EXPECT(0x2a, gbc.readMem(0xdb9f));
        EXPECT(0xa8, gbc.readMem(0xdba0));
        // EF 0351
        gbc.setState(0xc00c, 0xd477, 0xe460, 0xd618, 0x4180, 0x5d0a, 0x1, 0x1);
        gbc.writeMem(0xc00c, { 0xef });
        gbc.writeMem(0xd475, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xd475, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc00c));
        EXPECT(0xd, gbc.readMem(0xd475));
        EXPECT(0xc0, gbc.readMem(0xd476));
        // EF 0352
        gbc.setState(0xeca3, 0xf7b6, 0xd390, 0xe41, 0xc812, 0xc199, 0x0, 0x1);
        gbc.writeMem(0xeca3, { 0xef });
        gbc.writeMem(0xf7b4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xf7b4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xeca3));
        EXPECT(0xa4, gbc.readMem(0xf7b4));
        EXPECT(0xec, gbc.readMem(0xf7b5));
        // EF 0356
        gbc.setState(0x8193, 0xdfdb, 0xc10, 0x9ce, 0x4b5b, 0x5444, 0x0, 0x1);
        gbc.writeMem(0x8193, { 0xef });
        gbc.writeMem(0xdfd9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xdfd9, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8193));
        EXPECT(0x94, gbc.readMem(0xdfd9));
        EXPECT(0x81, gbc.readMem(0xdfda));
        // EF 0357
        gbc.setState(0x4f39, 0xa883, 0x8ba0, 0xb421, 0x991d, 0x94fe, 0x1, 0x0);
        gbc.writeMem(0x4f39, { 0xef });
        gbc.writeMem(0xa881, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xa881, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3a, gbc.readMem(0xa881));
        EXPECT(0x4f, gbc.readMem(0xa882));
        // EF 0358
        gbc.setState(0x6a66, 0x9663, 0x3660, 0x6a24, 0x6cda, 0xed24, 0x0, 0x0);
        gbc.writeMem(0x6a66, { 0xef });
        gbc.writeMem(0x9661, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x9661, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x67, gbc.readMem(0x9661));
        EXPECT(0x6a, gbc.readMem(0x9662));
        // EF 0359
        gbc.setState(0xf3f, 0xb64e, 0xfb10, 0xc1b7, 0x2502, 0x79c9, 0x0, 0x0);
        gbc.writeMem(0xf3f, { 0xef });
        gbc.writeMem(0xb64c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xb64c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x40, gbc.readMem(0xb64c));
        EXPECT(0xf, gbc.readMem(0xb64d));
        // EF 035A
        gbc.setState(0xdeb2, 0xb1be, 0x9990, 0xe487, 0x4886, 0xce72, 0x0, 0x0);
        gbc.writeMem(0xb1bc, { 0x0, 0x0 });
        gbc.writeMem(0xdeb2, { 0xef });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xb1bc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xb3, gbc.readMem(0xb1bc));
        EXPECT(0xde, gbc.readMem(0xb1bd));
        EXPECT(0xef, gbc.readMem(0xdeb2));
        // EF 0360
        gbc.setState(0x72b, 0xbb34, 0x7d70, 0xa90, 0x312c, 0x9ce3, 0x1, 0x0);
        gbc.writeMem(0x72b, { 0xef });
        gbc.writeMem(0xbb32, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xbb32, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xbb32));
        EXPECT(0x7, gbc.readMem(0xbb33));
        // EF 0367
        gbc.setState(0xe92e, 0x8616, 0x7140, 0x15bf, 0x74ff, 0x31b3, 0x1, 0x0);
        gbc.writeMem(0x8614, { 0x0, 0x0 });
        gbc.writeMem(0xe92e, { 0xef });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x8614, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2f, gbc.readMem(0x8614));
        EXPECT(0xe9, gbc.readMem(0x8615));
        EXPECT(0xef, gbc.readMem(0xe92e));
        // EF 0368
        gbc.setState(0x80af, 0xd72a, 0xad00, 0x3820, 0x12c4, 0x212b, 0x0, 0x1);
        gbc.writeMem(0x80af, { 0xef });
        gbc.writeMem(0xd728, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xd728, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x80af));
        EXPECT(0xb0, gbc.readMem(0xd728));
        EXPECT(0x80, gbc.readMem(0xd729));
        // EF 036A
        gbc.setState(0x1d38, 0x9e52, 0xf3b0, 0x6977, 0xba6b, 0x4cf0, 0x0, 0x0);
        gbc.writeMem(0x1d38, { 0xef });
        gbc.writeMem(0x9e50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9e50, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x39, gbc.readMem(0x9e50));
        EXPECT(0x1d, gbc.readMem(0x9e51));
        // EF 0370
        gbc.setState(0x3d7c, 0xa313, 0xc9c0, 0xd6bc, 0x86f5, 0x6d82, 0x0, 0x1);
        gbc.writeMem(0x3d7c, { 0xef });
        gbc.writeMem(0xa311, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xa311, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7d, gbc.readMem(0xa311));
        EXPECT(0x3d, gbc.readMem(0xa312));
        // EF 0371
        gbc.setState(0x9ba7, 0x9016, 0x950, 0xf31e, 0x15f3, 0x6eff, 0x0, 0x0);
        gbc.writeMem(0x9014, { 0x0, 0x0 });
        gbc.writeMem(0x9ba7, { 0xef });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x9014, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xa8, gbc.readMem(0x9014));
        EXPECT(0x9b, gbc.readMem(0x9015));
        EXPECT(0xef, gbc.readMem(0x9ba7));
        // EF 0373
        gbc.setState(0xcc8, 0x9474, 0x3d40, 0x782a, 0xc695, 0x857d, 0x1, 0x1);
        gbc.writeMem(0xcc8, { 0xef });
        gbc.writeMem(0x9472, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x9472, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc9, gbc.readMem(0x9472));
        EXPECT(0xc, gbc.readMem(0x9473));
        // EF 0374
        gbc.setState(0x302b, 0xe775, 0xca40, 0xe3df, 0x8eb3, 0x375f, 0x0, 0x1);
        gbc.writeMem(0x302b, { 0xef });
        gbc.writeMem(0xe773, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0xe773, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x2c, gbc.readMem(0xe773));
        EXPECT(0x30, gbc.readMem(0xe774));
        // EF 0376
        gbc.setState(0x25bb, 0xd089, 0x150, 0xb398, 0x640, 0x8920, 0x1, 0x1);
        gbc.writeMem(0x25bb, { 0xef });
        gbc.writeMem(0xd087, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xd087, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbc, gbc.readMem(0xd087));
        EXPECT(0x25, gbc.readMem(0xd088));
        // EF 0377
        gbc.setState(0xb012, 0x8117, 0x5390, 0xda33, 0x4a0b, 0x237d, 0x1, 0x1);
        gbc.writeMem(0x8115, { 0x0, 0x0 });
        gbc.writeMem(0xb012, { 0xef });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x8115, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x13, gbc.readMem(0x8115));
        EXPECT(0xb0, gbc.readMem(0x8116));
        EXPECT(0xef, gbc.readMem(0xb012));
        // EF 0378
        gbc.setState(0xba6d, 0x916e, 0xc510, 0xf503, 0xbeac, 0x7737, 0x1, 0x1);
        gbc.writeMem(0x916c, { 0x0, 0x0 });
        gbc.writeMem(0xba6d, { 0xef });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x916c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x6e, gbc.readMem(0x916c));
        EXPECT(0xba, gbc.readMem(0x916d));
        EXPECT(0xef, gbc.readMem(0xba6d));
        // EF 037A
        gbc.setState(0x5f14, 0x8ece, 0x3590, 0xfc40, 0xbf31, 0x37a0, 0x1, 0x1);
        gbc.writeMem(0x5f14, { 0xef });
        gbc.writeMem(0x8ecc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x8ecc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x15, gbc.readMem(0x8ecc));
        EXPECT(0x5f, gbc.readMem(0x8ecd));
        // EF 037B
        gbc.setState(0xba54, 0xd27d, 0x7760, 0xda4d, 0x6d18, 0x6f9, 0x1, 0x0);
        gbc.writeMem(0xba54, { 0xef });
        gbc.writeMem(0xd27b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd27b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xba54));
        EXPECT(0x55, gbc.readMem(0xd27b));
        EXPECT(0xba, gbc.readMem(0xd27c));
        // EF 037D
        gbc.setState(0x47b0, 0xcead, 0xe9a0, 0x9ec3, 0x2e20, 0xf7be, 0x1, 0x1);
        gbc.writeMem(0x47b0, { 0xef });
        gbc.writeMem(0xceab, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0xceab, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb1, gbc.readMem(0xceab));
        EXPECT(0x47, gbc.readMem(0xceac));
        // EF 037E
        gbc.setState(0xb58c, 0xa4d8, 0x9780, 0x1627, 0xc43b, 0x16a2, 0x1, 0x0);
        gbc.writeMem(0xa4d6, { 0x0, 0x0 });
        gbc.writeMem(0xb58c, { 0xef });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xa4d6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x8d, gbc.readMem(0xa4d6));
        EXPECT(0xb5, gbc.readMem(0xa4d7));
        EXPECT(0xef, gbc.readMem(0xb58c));
        // EF 037F
        gbc.setState(0x4026, 0xd3d2, 0x8d20, 0xb4ab, 0x9843, 0xd038, 0x1, 0x1);
        gbc.writeMem(0x4026, { 0xef });
        gbc.writeMem(0xd3d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xd3d0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x27, gbc.readMem(0xd3d0));
        EXPECT(0x40, gbc.readMem(0xd3d1));
        // EF 0383
        gbc.setState(0xc0fa, 0xc02b, 0x35e0, 0x3109, 0xec60, 0xd5d6, 0x1, 0x0);
        gbc.writeMem(0xc029, { 0x0, 0x0 });
        gbc.writeMem(0xc0fa, { 0xef });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xc029, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfb, gbc.readMem(0xc029));
        EXPECT(0xc0, gbc.readMem(0xc02a));
        EXPECT(0xef, gbc.readMem(0xc0fa));
        // EF 0385
        gbc.setState(0xcadc, 0x92ec, 0x26a0, 0x93ca, 0x2f53, 0xef7, 0x1, 0x1);
        gbc.writeMem(0x92ea, { 0x0, 0x0 });
        gbc.writeMem(0xcadc, { 0xef });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x92ea, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xdd, gbc.readMem(0x92ea));
        EXPECT(0xca, gbc.readMem(0x92eb));
        EXPECT(0xef, gbc.readMem(0xcadc));
        // EF 038A
        gbc.setState(0x2c3b, 0x98d9, 0xc650, 0xd61a, 0xdbf5, 0x7cd6, 0x1, 0x1);
        gbc.writeMem(0x2c3b, { 0xef });
        gbc.writeMem(0x98d7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x98d7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x3c, gbc.readMem(0x98d7));
        EXPECT(0x2c, gbc.readMem(0x98d8));
        // EF 038D
        gbc.setState(0xb8c1, 0xf80f, 0xeaf0, 0x2298, 0xdf87, 0xca45, 0x0, 0x1);
        gbc.writeMem(0xb8c1, { 0xef });
        gbc.writeMem(0xf80d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xf80d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb8c1));
        EXPECT(0xc2, gbc.readMem(0xf80d));
        EXPECT(0xb8, gbc.readMem(0xf80e));
        // EF 038F
        gbc.setState(0x37bd, 0x9559, 0x390, 0x9b81, 0xfe55, 0x99cb, 0x0, 0x1);
        gbc.writeMem(0x37bd, { 0xef });
        gbc.writeMem(0x9557, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x9557, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xbe, gbc.readMem(0x9557));
        EXPECT(0x37, gbc.readMem(0x9558));
        // EF 0390
        gbc.setState(0xcf43, 0xb0e5, 0x1140, 0xd9d1, 0x4a99, 0x41b1, 0x1, 0x0);
        gbc.writeMem(0xb0e3, { 0x0, 0x0 });
        gbc.writeMem(0xcf43, { 0xef });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xb0e3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x44, gbc.readMem(0xb0e3));
        EXPECT(0xcf, gbc.readMem(0xb0e4));
        EXPECT(0xef, gbc.readMem(0xcf43));
        // EF 0391
        gbc.setState(0x5362, 0xc13c, 0xc5d0, 0x8162, 0xbd90, 0xabf3, 0x1, 0x1);
        gbc.writeMem(0x5362, { 0xef });
        gbc.writeMem(0xc13a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xc13a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x63, gbc.readMem(0xc13a));
        EXPECT(0x53, gbc.readMem(0xc13b));
        // EF 0395
        gbc.setState(0x18ea, 0xc668, 0xbf30, 0xf539, 0xd109, 0x3010, 0x1, 0x1);
        gbc.writeMem(0x18ea, { 0xef });
        gbc.writeMem(0xc666, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc666, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xeb, gbc.readMem(0xc666));
        EXPECT(0x18, gbc.readMem(0xc667));
        // EF 0396
        gbc.setState(0x50e, 0xb91f, 0x11c0, 0xd6fd, 0x42ea, 0x276c, 0x0, 0x0);
        gbc.writeMem(0x50e, { 0xef });
        gbc.writeMem(0xb91d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0xb91d, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xf, gbc.readMem(0xb91d));
        EXPECT(0x5, gbc.readMem(0xb91e));
        // EF 0397
        gbc.setState(0xeac6, 0x984a, 0xa480, 0x5a77, 0x8e0d, 0xf7f1, 0x1, 0x1);
        gbc.writeMem(0x9848, { 0x0, 0x0 });
        gbc.writeMem(0xeac6, { 0xef });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x9848, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xc7, gbc.readMem(0x9848));
        EXPECT(0xea, gbc.readMem(0x9849));
        EXPECT(0xef, gbc.readMem(0xeac6));
        // EF 0398
        gbc.setState(0x74e4, 0xfd4b, 0x6b10, 0xe1c1, 0xbe41, 0xf42c, 0x0, 0x0);
        gbc.writeMem(0x74e4, { 0xef });
        gbc.writeMem(0xfd49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xfd49, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe5, gbc.readMem(0xfd49));
        EXPECT(0x74, gbc.readMem(0xfd4a));
        // EF 039A
        gbc.setState(0xb3e2, 0x8023, 0x5a10, 0xfcca, 0xe917, 0x1ce0, 0x0, 0x0);
        gbc.writeMem(0x8021, { 0x0, 0x0 });
        gbc.writeMem(0xb3e2, { 0xef });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x8021, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe3, gbc.readMem(0x8021));
        EXPECT(0xb3, gbc.readMem(0x8022));
        EXPECT(0xef, gbc.readMem(0xb3e2));
        // EF 039F
        gbc.setState(0xda67, 0xf7ba, 0xaf90, 0x843, 0xd93d, 0x82c8, 0x1, 0x0);
        gbc.writeMem(0xda67, { 0xef });
        gbc.writeMem(0xf7b8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xf7b8, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xda67));
        EXPECT(0x68, gbc.readMem(0xf7b8));
        EXPECT(0xda, gbc.readMem(0xf7b9));
        // EF 03A1
        gbc.setState(0xb703, 0xf4d3, 0xcfc0, 0x5f83, 0xe394, 0x3ae6, 0x1, 0x1);
        gbc.writeMem(0xb703, { 0xef });
        gbc.writeMem(0xf4d1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x5f, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xf4d1, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xb703));
        EXPECT(0x4, gbc.readMem(0xf4d1));
        EXPECT(0xb7, gbc.readMem(0xf4d2));
        // EF 03A4
        gbc.setState(0x8e13, 0xc6d8, 0x44d0, 0x861f, 0x8d12, 0xecb2, 0x1, 0x0);
        gbc.writeMem(0x8e13, { 0xef });
        gbc.writeMem(0xc6d6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xc6d6, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8e13));
        EXPECT(0x14, gbc.readMem(0xc6d6));
        EXPECT(0x8e, gbc.readMem(0xc6d7));
        // EF 03A6
        gbc.setState(0x9cfc, 0xa01a, 0x10a0, 0xffde, 0x7f0f, 0xeb12, 0x1, 0x1);
        gbc.writeMem(0x9cfc, { 0xef });
        gbc.writeMem(0xa018, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xa018, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9cfc));
        EXPECT(0xfd, gbc.readMem(0xa018));
        EXPECT(0x9c, gbc.readMem(0xa019));
        // EF 03A8
        gbc.setState(0x42a8, 0xef50, 0xa100, 0xe315, 0xbbba, 0xc76a, 0x1, 0x0);
        gbc.writeMem(0x42a8, { 0xef });
        gbc.writeMem(0xef4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xef4e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa9, gbc.readMem(0xef4e));
        EXPECT(0x42, gbc.readMem(0xef4f));
        // EF 03A9
        gbc.setState(0xb169, 0x9da0, 0x12e0, 0x866d, 0x8dca, 0xfa5, 0x1, 0x0);
        gbc.writeMem(0x9d9e, { 0x0, 0x0 });
        gbc.writeMem(0xb169, { 0xef });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x9d9e, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6a, gbc.readMem(0x9d9e));
        EXPECT(0xb1, gbc.readMem(0x9d9f));
        EXPECT(0xef, gbc.readMem(0xb169));
        // EF 03AA
        gbc.setState(0x6a8a, 0x8e61, 0x2a90, 0xc064, 0xc70e, 0x4502, 0x0, 0x1);
        gbc.writeMem(0x6a8a, { 0xef });
        gbc.writeMem(0x8e5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x8e5f, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x8b, gbc.readMem(0x8e5f));
        EXPECT(0x6a, gbc.readMem(0x8e60));
        // EF 03AB
        gbc.setState(0xce24, 0x9c7e, 0x72c0, 0xee88, 0x8532, 0x54fb, 0x0, 0x0);
        gbc.writeMem(0x9c7c, { 0x0, 0x0 });
        gbc.writeMem(0xce24, { 0xef });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x9c7c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x25, gbc.readMem(0x9c7c));
        EXPECT(0xce, gbc.readMem(0x9c7d));
        EXPECT(0xef, gbc.readMem(0xce24));
        // EF 03AE
        gbc.setState(0xa342, 0x8ff5, 0x3400, 0xcf24, 0x676, 0xdd31, 0x1, 0x1);
        gbc.writeMem(0x8ff3, { 0x0, 0x0 });
        gbc.writeMem(0xa342, { 0xef });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x8ff3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x43, gbc.readMem(0x8ff3));
        EXPECT(0xa3, gbc.readMem(0x8ff4));
        EXPECT(0xef, gbc.readMem(0xa342));
        // EF 03B0
        gbc.setState(0xe776, 0xc5c7, 0x9740, 0xe611, 0xe1c2, 0x2e98, 0x0, 0x1);
        gbc.writeMem(0xc5c5, { 0x0, 0x0 });
        gbc.writeMem(0xe776, { 0xef });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xc5c5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x77, gbc.readMem(0xc5c5));
        EXPECT(0xe7, gbc.readMem(0xc5c6));
        EXPECT(0xef, gbc.readMem(0xe776));
        // EF 03B1
        gbc.setState(0xea5c, 0xf599, 0xa400, 0x2167, 0x6a4, 0x18b0, 0x1, 0x0);
        gbc.writeMem(0xea5c, { 0xef });
        gbc.writeMem(0xf597, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xf597, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xea5c));
        EXPECT(0x5d, gbc.readMem(0xf597));
        EXPECT(0xea, gbc.readMem(0xf598));
        // EF 03B4
        gbc.setState(0x4f64, 0x9938, 0x4800, 0x66d3, 0x2d95, 0x4849, 0x1, 0x1);
        gbc.writeMem(0x4f64, { 0xef });
        gbc.writeMem(0x9936, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x9936, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x65, gbc.readMem(0x9936));
        EXPECT(0x4f, gbc.readMem(0x9937));
        // EF 03B6
        gbc.setState(0x387, 0x90b1, 0x67a0, 0x1488, 0xd305, 0x94af, 0x1, 0x0);
        gbc.writeMem(0x387, { 0xef });
        gbc.writeMem(0x90af, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x90af, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x88, gbc.readMem(0x90af));
        EXPECT(0x3, gbc.readMem(0x90b0));
        // EF 03BA
        gbc.setState(0x9a15, 0xd7c1, 0xbf00, 0x5bbf, 0x6c31, 0x7a93, 0x1, 0x0);
        gbc.writeMem(0x9a15, { 0xef });
        gbc.writeMem(0xd7bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xd7bf, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9a15));
        EXPECT(0x16, gbc.readMem(0xd7bf));
        EXPECT(0x9a, gbc.readMem(0xd7c0));
        // EF 03BD
        gbc.setState(0x60b4, 0x891b, 0x8a60, 0xb251, 0x2996, 0x8079, 0x0, 0x0);
        gbc.writeMem(0x60b4, { 0xef });
        gbc.writeMem(0x8919, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x8919, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xb5, gbc.readMem(0x8919));
        EXPECT(0x60, gbc.readMem(0x891a));
        // EF 03BF
        gbc.setState(0x5c7e, 0xa53b, 0x5120, 0x409e, 0xad27, 0xbaf3, 0x0, 0x0);
        gbc.writeMem(0x5c7e, { 0xef });
        gbc.writeMem(0xa539, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xa539, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x7f, gbc.readMem(0xa539));
        EXPECT(0x5c, gbc.readMem(0xa53a));
        // EF 03C0
        gbc.setState(0xc558, 0xd8f6, 0x9740, 0xbbe3, 0xf7de, 0x8512, 0x1, 0x1);
        gbc.writeMem(0xc558, { 0xef });
        gbc.writeMem(0xd8f4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xd8f4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xc558));
        EXPECT(0x59, gbc.readMem(0xd8f4));
        EXPECT(0xc5, gbc.readMem(0xd8f5));
        // EF 03C1
        gbc.setState(0xda94, 0xb83e, 0x1e10, 0x6634, 0x6239, 0xfd9c, 0x0, 0x1);
        gbc.writeMem(0xb83c, { 0x0, 0x0 });
        gbc.writeMem(0xda94, { 0xef });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0xb83c, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x95, gbc.readMem(0xb83c));
        EXPECT(0xda, gbc.readMem(0xb83d));
        EXPECT(0xef, gbc.readMem(0xda94));
        // EF 03C2
        gbc.setState(0x8f6e, 0xbeb9, 0xe790, 0x4bdb, 0x9c12, 0x291e, 0x0, 0x0);
        gbc.writeMem(0x8f6e, { 0xef });
        gbc.writeMem(0xbeb7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xbeb7, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x8f6e));
        EXPECT(0x6f, gbc.readMem(0xbeb7));
        EXPECT(0x8f, gbc.readMem(0xbeb8));
        // EF 03C3
        gbc.setState(0xbfa, 0xb854, 0xe320, 0xf93a, 0x6d74, 0x8f60, 0x1, 0x1);
        gbc.writeMem(0xbfa, { 0xef });
        gbc.writeMem(0xb852, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xb852, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xfb, gbc.readMem(0xb852));
        EXPECT(0xb, gbc.readMem(0xb853));
        // EF 03C4
        gbc.setState(0x9dfe, 0x926b, 0xadd0, 0x77da, 0xc747, 0xd447, 0x0, 0x1);
        gbc.writeMem(0x9269, { 0x0, 0x0 });
        gbc.writeMem(0x9dfe, { 0xef });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x9269, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xff, gbc.readMem(0x9269));
        EXPECT(0x9d, gbc.readMem(0x926a));
        EXPECT(0xef, gbc.readMem(0x9dfe));
        // EF 03C5
        gbc.setState(0x14e7, 0xc636, 0xaff0, 0x8d3, 0x92bb, 0x37b9, 0x0, 0x0);
        gbc.writeMem(0x14e7, { 0xef });
        gbc.writeMem(0xc634, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xc634, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0xc634));
        EXPECT(0x14, gbc.readMem(0xc635));
        // EF 03C7
        gbc.setState(0x1e7, 0x8419, 0x55d0, 0xc870, 0xe2b9, 0xdd35, 0x0, 0x1);
        gbc.writeMem(0x1e7, { 0xef });
        gbc.writeMem(0x8417, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x8417, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xe8, gbc.readMem(0x8417));
        EXPECT(0x1, gbc.readMem(0x8418));
        // EF 03C8
        gbc.setState(0xe45b, 0xd4c6, 0x4a80, 0xfdac, 0x6178, 0x53af, 0x0, 0x1);
        gbc.writeMem(0xd4c4, { 0x0, 0x0 });
        gbc.writeMem(0xe45b, { 0xef });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xd4c4, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x5c, gbc.readMem(0xd4c4));
        EXPECT(0xe4, gbc.readMem(0xd4c5));
        EXPECT(0xef, gbc.readMem(0xe45b));
        // EF 03CB
        gbc.setState(0x9276, 0xa76d, 0xda70, 0x1820, 0xecf0, 0xeb2e, 0x0, 0x0);
        gbc.writeMem(0x9276, { 0xef });
        gbc.writeMem(0xa76b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xa76b, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9276));
        EXPECT(0x77, gbc.readMem(0xa76b));
        EXPECT(0x92, gbc.readMem(0xa76c));
        // EF 03CE
        gbc.setState(0x7ad5, 0x9afe, 0xfe0, 0x76a9, 0xe25, 0x520a, 0x0, 0x1);
        gbc.writeMem(0x7ad5, { 0xef });
        gbc.writeMem(0x9afc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x9afc, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xd6, gbc.readMem(0x9afc));
        EXPECT(0x7a, gbc.readMem(0x9afd));
        // EF 03CF
        gbc.setState(0x9b28, 0xb33c, 0x6de0, 0xaf7f, 0xde23, 0xad4c, 0x1, 0x1);
        gbc.writeMem(0x9b28, { 0xef });
        gbc.writeMem(0xb33a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xb33a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x9b28));
        EXPECT(0x29, gbc.readMem(0xb33a));
        EXPECT(0x9b, gbc.readMem(0xb33b));
        // EF 03D5
        gbc.setState(0xa7fa, 0xe7c5, 0xd480, 0xf9fd, 0xc55d, 0x888, 0x1, 0x1);
        gbc.writeMem(0xa7fa, { 0xef });
        gbc.writeMem(0xe7c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xe7c3, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa7fa));
        EXPECT(0xfb, gbc.readMem(0xe7c3));
        EXPECT(0xa7, gbc.readMem(0xe7c4));
        // EF 03D6
        gbc.setState(0x4c6b, 0xd8c7, 0x1a00, 0x5719, 0xb397, 0x1798, 0x1, 0x0);
        gbc.writeMem(0x4c6b, { 0xef });
        gbc.writeMem(0xd8c5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xd8c5, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x6c, gbc.readMem(0xd8c5));
        EXPECT(0x4c, gbc.readMem(0xd8c6));
        // EF 03D8
        gbc.setState(0x371, 0x9b24, 0x68c0, 0x1958, 0xc82f, 0xcd10, 0x1, 0x0);
        gbc.writeMem(0x371, { 0xef });
        gbc.writeMem(0x9b22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x9b22, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x72, gbc.readMem(0x9b22));
        EXPECT(0x3, gbc.readMem(0x9b23));
        // EF 03DD
        gbc.setState(0x5c02, 0xeff0, 0xcea0, 0x13d5, 0x2808, 0x7acd, 0x0, 0x1);
        gbc.writeMem(0x5c02, { 0xef });
        gbc.writeMem(0xefee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xefee, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3, gbc.readMem(0xefee));
        EXPECT(0x5c, gbc.readMem(0xefef));
        // EF 03DE
        gbc.setState(0xecfa, 0xe9a2, 0x6bd0, 0x7cb4, 0xf216, 0xa1f4, 0x1, 0x1);
        gbc.writeMem(0xe9a0, { 0x0, 0x0 });
        gbc.writeMem(0xecfa, { 0xef });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xe9a0, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xfb, gbc.readMem(0xe9a0));
        EXPECT(0xec, gbc.readMem(0xe9a1));
        EXPECT(0xef, gbc.readMem(0xecfa));
        // EF 03E1
        gbc.setState(0xa0, 0xcd4c, 0x54e0, 0x48c8, 0x67ae, 0x8693, 0x0, 0x0);
        gbc.writeMem(0xa0, { 0xef });
        gbc.writeMem(0xcd4a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xcd4a, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xa1, gbc.readMem(0xcd4a));
        EXPECT(0x0, gbc.readMem(0xcd4b));
        // EF 03E2
        gbc.setState(0x753b, 0xff9a, 0xbd00, 0xd9a7, 0x9152, 0x5234, 0x0, 0x1);
        gbc.writeMem(0x753b, { 0xef });
        gbc.writeMem(0xff98, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xff98, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x3c, gbc.readMem(0xff98));
        EXPECT(0x75, gbc.readMem(0xff99));
        // EF 03E3
        gbc.setState(0x92b1, 0xf447, 0x530, 0xec15, 0xb2e5, 0xb3ce, 0x0, 0x0);
        gbc.writeMem(0x92b1, { 0xef });
        gbc.writeMem(0xf445, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xf445, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0x92b1));
        EXPECT(0xb2, gbc.readMem(0xf445));
        EXPECT(0x92, gbc.readMem(0xf446));
        // EF 03E5
        gbc.setState(0xa118, 0xf1b4, 0x3280, 0xd5e7, 0x3d5, 0xa047, 0x1, 0x1);
        gbc.writeMem(0xa118, { 0xef });
        gbc.writeMem(0xf1b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xf1b2, gbc.sp());
        EXPECT(0x28, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xef, gbc.readMem(0xa118));
        EXPECT(0x19, gbc.readMem(0xf1b2));
        EXPECT(0xa1, gbc.readMem(0xf1b3));
    }
