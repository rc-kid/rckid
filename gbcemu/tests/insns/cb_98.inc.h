    TEST(gbcemu, opcode_cb_98) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 98 0000
        gbc.setState(0xd3c0, 0x64c0, 0x7090, 0x281c, 0xb863, 0x95cf, 0x1, 0x1);
        gbc.writeMem(0xd3c0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x64c0, gbc.sp());
        EXPECT(0xd3c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3c0));
        EXPECT(0x98, gbc.readMem(0xd3c1));
        // CB 98 0001
        gbc.setState(0xa7f5, 0xb0cf, 0x8220, 0x8b92, 0x8f35, 0x9be3, 0x0, 0x0);
        gbc.writeMem(0xa7f5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xb0cf, gbc.sp());
        EXPECT(0xa7f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7f5));
        EXPECT(0x98, gbc.readMem(0xa7f6));
        // CB 98 0002
        gbc.setState(0x18c4, 0x1ccf, 0x8db0, 0xb2e7, 0xf1bd, 0x72a2, 0x0, 0x0);
        gbc.writeMem(0x18c4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x1ccf, gbc.sp());
        EXPECT(0x18c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0004
        gbc.setState(0xaa0c, 0x58b1, 0x8a50, 0xbcb8, 0xe3bc, 0x80da, 0x0, 0x0);
        gbc.writeMem(0xaa0c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x58b1, gbc.sp());
        EXPECT(0xaa0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa0c));
        EXPECT(0x98, gbc.readMem(0xaa0d));
        // CB 98 0005
        gbc.setState(0x9049, 0xbe7e, 0x2d60, 0xd973, 0x16fa, 0xe404, 0x1, 0x0);
        gbc.writeMem(0x9049, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xbe7e, gbc.sp());
        EXPECT(0x904b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9049));
        EXPECT(0x98, gbc.readMem(0x904a));
        // CB 98 0006
        gbc.setState(0x5901, 0xab00, 0xaa90, 0x4929, 0x2b27, 0x4810, 0x0, 0x1);
        gbc.writeMem(0x5901, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xab00, gbc.sp());
        EXPECT(0x5903, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0007
        gbc.setState(0x4d18, 0x24a, 0x9050, 0x2397, 0x3ab8, 0x287f, 0x1, 0x0);
        gbc.writeMem(0x4d18, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x24a, gbc.sp());
        EXPECT(0x4d1a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0008
        gbc.setState(0x7250, 0xd40b, 0x60e0, 0xfbdc, 0x1c07, 0xb0c6, 0x1, 0x0);
        gbc.writeMem(0x7250, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xd40b, gbc.sp());
        EXPECT(0x7252, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0009
        gbc.setState(0x320f, 0xd859, 0x4e00, 0x786c, 0x2c8f, 0x7c3d, 0x1, 0x1);
        gbc.writeMem(0x320f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xd859, gbc.sp());
        EXPECT(0x3211, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 000B
        gbc.setState(0x2958, 0x2654, 0xa770, 0x24a0, 0xb3e, 0x9d86, 0x1, 0x1);
        gbc.writeMem(0x2958, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x2654, gbc.sp());
        EXPECT(0x295a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 000C
        gbc.setState(0x2a55, 0x94c2, 0xfd50, 0x44c3, 0xb7cc, 0x64d1, 0x0, 0x1);
        gbc.writeMem(0x2a55, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x94c2, gbc.sp());
        EXPECT(0x2a57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 000D
        gbc.setState(0xc344, 0x68e0, 0xfed0, 0x82a1, 0xfc37, 0xb262, 0x1, 0x0);
        gbc.writeMem(0xc344, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x68e0, gbc.sp());
        EXPECT(0xc346, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc344));
        EXPECT(0x98, gbc.readMem(0xc345));
        // CB 98 000E
        gbc.setState(0x7cd7, 0x4298, 0x87a0, 0xfd8e, 0xa667, 0x8bbc, 0x1, 0x0);
        gbc.writeMem(0x7cd7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x4298, gbc.sp());
        EXPECT(0x7cd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 000F
        gbc.setState(0x752, 0x355d, 0x2c70, 0x7e6c, 0xbc0, 0xe75f, 0x1, 0x0);
        gbc.writeMem(0x752, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x355d, gbc.sp());
        EXPECT(0x754, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0010
        gbc.setState(0xa97, 0x1816, 0x9080, 0xb32, 0x2f3e, 0xe1e1, 0x1, 0x1);
        gbc.writeMem(0xa97, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x1816, gbc.sp());
        EXPECT(0xa99, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0011
        gbc.setState(0xcaf5, 0x1890, 0x7dd0, 0x6af5, 0x5c72, 0x17bf, 0x1, 0x0);
        gbc.writeMem(0xcaf5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1890, gbc.sp());
        EXPECT(0xcaf7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcaf5));
        EXPECT(0x98, gbc.readMem(0xcaf6));
        // CB 98 0012
        gbc.setState(0x611e, 0xcdab, 0x31f0, 0xd559, 0x21c1, 0x8a69, 0x0, 0x0);
        gbc.writeMem(0x611e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xcdab, gbc.sp());
        EXPECT(0x6120, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0015
        gbc.setState(0x6033, 0x761c, 0xbd0, 0x2352, 0x3236, 0x6d36, 0x0, 0x0);
        gbc.writeMem(0x6033, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x761c, gbc.sp());
        EXPECT(0x6035, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0016
        gbc.setState(0x8c36, 0xe8ab, 0x8220, 0x7cf5, 0x677, 0x4789, 0x1, 0x0);
        gbc.writeMem(0x8c36, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xe8ab, gbc.sp());
        EXPECT(0x8c38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c36));
        EXPECT(0x98, gbc.readMem(0x8c37));
        // CB 98 0017
        gbc.setState(0xe8df, 0x5e6, 0x1b70, 0x20e, 0xf7d, 0x34e, 0x0, 0x0);
        gbc.writeMem(0xe8df, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x5e6, gbc.sp());
        EXPECT(0xe8e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe8df));
        EXPECT(0x98, gbc.readMem(0xe8e0));
        // CB 98 0018
        gbc.setState(0x9b4e, 0xe6a4, 0x2f0, 0x8f94, 0x56c1, 0xca54, 0x1, 0x0);
        gbc.writeMem(0x9b4e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xe6a4, gbc.sp());
        EXPECT(0x9b50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b4e));
        EXPECT(0x98, gbc.readMem(0x9b4f));
        // CB 98 0019
        gbc.setState(0x3e83, 0xfb6a, 0x40e0, 0xb558, 0xbd10, 0xdd73, 0x0, 0x1);
        gbc.writeMem(0x3e83, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xfb6a, gbc.sp());
        EXPECT(0x3e85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 001A
        gbc.setState(0xbdf9, 0x765f, 0xb960, 0x4852, 0x18e9, 0xc550, 0x1, 0x1);
        gbc.writeMem(0xbdf9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x765f, gbc.sp());
        EXPECT(0xbdfb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdf9));
        EXPECT(0x98, gbc.readMem(0xbdfa));
        // CB 98 001B
        gbc.setState(0x20f5, 0x4a05, 0x3990, 0xd473, 0xf2f7, 0xcc37, 0x0, 0x1);
        gbc.writeMem(0x20f5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x4a05, gbc.sp());
        EXPECT(0x20f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 001C
        gbc.setState(0x1f93, 0xe631, 0x8390, 0x6e13, 0xf13b, 0x71cf, 0x1, 0x1);
        gbc.writeMem(0x1f93, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xe631, gbc.sp());
        EXPECT(0x1f95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 001D
        gbc.setState(0x615b, 0x8392, 0xc380, 0xbc40, 0xe464, 0x8e1c, 0x0, 0x1);
        gbc.writeMem(0x615b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x8392, gbc.sp());
        EXPECT(0x615d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 001E
        gbc.setState(0x9f74, 0x363, 0x9fb0, 0x6178, 0x2a78, 0x675, 0x1, 0x1);
        gbc.writeMem(0x9f74, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x363, gbc.sp());
        EXPECT(0x9f76, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f74));
        EXPECT(0x98, gbc.readMem(0x9f75));
        // CB 98 001F
        gbc.setState(0xc2d7, 0x65e5, 0xfc80, 0xf201, 0x2e0, 0xc24d, 0x1, 0x1);
        gbc.writeMem(0xc2d7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x65e5, gbc.sp());
        EXPECT(0xc2d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2d7));
        EXPECT(0x98, gbc.readMem(0xc2d8));
        // CB 98 0020
        gbc.setState(0x40ea, 0xaff8, 0x2ed0, 0x3414, 0xc3e5, 0x7732, 0x0, 0x1);
        gbc.writeMem(0x40ea, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xaff8, gbc.sp());
        EXPECT(0x40ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0021
        gbc.setState(0x587c, 0x2192, 0xc580, 0x7193, 0x5cf0, 0xbfd6, 0x0, 0x0);
        gbc.writeMem(0x587c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x2192, gbc.sp());
        EXPECT(0x587e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0022
        gbc.setState(0x7aff, 0x6c2, 0x1930, 0xec89, 0x9db, 0xa7cc, 0x0, 0x1);
        gbc.writeMem(0x7aff, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x6c2, gbc.sp());
        EXPECT(0x7b01, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0023
        gbc.setState(0x12bd, 0xaf85, 0xadc0, 0x3d59, 0x2772, 0x4b87, 0x0, 0x0);
        gbc.writeMem(0x12bd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xaf85, gbc.sp());
        EXPECT(0x12bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0024
        gbc.setState(0x5f51, 0xae2a, 0x93a0, 0xf00b, 0xd134, 0xb46e, 0x0, 0x0);
        gbc.writeMem(0x5f51, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xae2a, gbc.sp());
        EXPECT(0x5f53, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0025
        gbc.setState(0x5d5d, 0xde7e, 0xad90, 0xbe05, 0x4994, 0x7862, 0x1, 0x1);
        gbc.writeMem(0x5d5d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xde7e, gbc.sp());
        EXPECT(0x5d5f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0027
        gbc.setState(0x1a93, 0x6470, 0x7050, 0xfab8, 0x8d2c, 0x72e0, 0x1, 0x0);
        gbc.writeMem(0x1a93, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x6470, gbc.sp());
        EXPECT(0x1a95, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0028
        gbc.setState(0x373e, 0x6bd8, 0x7700, 0xc8af, 0x9b28, 0xfc23, 0x0, 0x0);
        gbc.writeMem(0x373e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x6bd8, gbc.sp());
        EXPECT(0x3740, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0029
        gbc.setState(0x3961, 0x77b, 0x7c80, 0xac4c, 0x9059, 0x6a0c, 0x1, 0x0);
        gbc.writeMem(0x3961, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x77b, gbc.sp());
        EXPECT(0x3963, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 002A
        gbc.setState(0x5556, 0xa896, 0x4910, 0x5a99, 0xfd15, 0xd30, 0x1, 0x0);
        gbc.writeMem(0x5556, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xa896, gbc.sp());
        EXPECT(0x5558, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 002B
        gbc.setState(0x1bee, 0x3bfe, 0x7780, 0xa0b0, 0xc934, 0xe660, 0x1, 0x0);
        gbc.writeMem(0x1bee, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x3bfe, gbc.sp());
        EXPECT(0x1bf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 002C
        gbc.setState(0x86cb, 0xaa4, 0x1e60, 0x861b, 0x559a, 0xe27e, 0x0, 0x1);
        gbc.writeMem(0x86cb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xaa4, gbc.sp());
        EXPECT(0x86cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86cb));
        EXPECT(0x98, gbc.readMem(0x86cc));
        // CB 98 002D
        gbc.setState(0x6335, 0x7c87, 0x9ed0, 0xeeca, 0x947d, 0xb662, 0x1, 0x1);
        gbc.writeMem(0x6335, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x7c87, gbc.sp());
        EXPECT(0x6337, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 002E
        gbc.setState(0x993e, 0x6459, 0xbe90, 0x95b6, 0x5432, 0xeaef, 0x0, 0x1);
        gbc.writeMem(0x993e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x6459, gbc.sp());
        EXPECT(0x9940, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x993e));
        EXPECT(0x98, gbc.readMem(0x993f));
        // CB 98 002F
        gbc.setState(0xc582, 0x4604, 0xa290, 0x1e19, 0xa844, 0x9f37, 0x0, 0x1);
        gbc.writeMem(0xc582, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x4604, gbc.sp());
        EXPECT(0xc584, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc582));
        EXPECT(0x98, gbc.readMem(0xc583));
        // CB 98 0030
        gbc.setState(0x1033, 0x1753, 0xfdb0, 0xf7b1, 0x34d6, 0x2a68, 0x1, 0x0);
        gbc.writeMem(0x1033, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x1753, gbc.sp());
        EXPECT(0x1035, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0031
        gbc.setState(0x4a64, 0x4773, 0xcdb0, 0xb383, 0x9155, 0x46f3, 0x1, 0x0);
        gbc.writeMem(0x4a64, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4773, gbc.sp());
        EXPECT(0x4a66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0032
        gbc.setState(0xb82f, 0x6735, 0x7000, 0x39b3, 0x33ee, 0x217f, 0x1, 0x1);
        gbc.writeMem(0xb82f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x6735, gbc.sp());
        EXPECT(0xb831, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb82f));
        EXPECT(0x98, gbc.readMem(0xb830));
        // CB 98 0033
        gbc.setState(0x4fda, 0x3587, 0xa220, 0x294c, 0x587b, 0x9361, 0x0, 0x1);
        gbc.writeMem(0x4fda, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x3587, gbc.sp());
        EXPECT(0x4fdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0034
        gbc.setState(0x2a78, 0x8854, 0x9440, 0xd25d, 0xdcda, 0xf453, 0x0, 0x0);
        gbc.writeMem(0x2a78, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x8854, gbc.sp());
        EXPECT(0x2a7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0035
        gbc.setState(0x2b57, 0x5676, 0x6bc0, 0xc7ed, 0xbfab, 0xc2e1, 0x1, 0x1);
        gbc.writeMem(0x2b57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x5676, gbc.sp());
        EXPECT(0x2b59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0036
        gbc.setState(0x526d, 0xfb59, 0x8e30, 0x4c43, 0x5a5f, 0x2a73, 0x1, 0x1);
        gbc.writeMem(0x526d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xfb59, gbc.sp());
        EXPECT(0x526f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0037
        gbc.setState(0xef7a, 0xb469, 0xc160, 0x70a0, 0xe27c, 0x1461, 0x0, 0x0);
        gbc.writeMem(0xef7a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb469, gbc.sp());
        EXPECT(0xef7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef7a));
        EXPECT(0x98, gbc.readMem(0xef7b));
        // CB 98 0038
        gbc.setState(0x5df9, 0x789f, 0x5a10, 0x1af4, 0x1d31, 0x7987, 0x0, 0x1);
        gbc.writeMem(0x5df9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x789f, gbc.sp());
        EXPECT(0x5dfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0039
        gbc.setState(0xc4b, 0x99c4, 0xca20, 0xec75, 0x10e8, 0x2a5, 0x0, 0x0);
        gbc.writeMem(0xc4b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x99c4, gbc.sp());
        EXPECT(0xc4d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 003A
        gbc.setState(0xa592, 0x55a0, 0x3890, 0x36f4, 0x8498, 0x8dc, 0x1, 0x1);
        gbc.writeMem(0xa592, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x55a0, gbc.sp());
        EXPECT(0xa594, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa592));
        EXPECT(0x98, gbc.readMem(0xa593));
        // CB 98 003B
        gbc.setState(0xa40a, 0x45d6, 0xa4d0, 0x1696, 0x3bf8, 0x464c, 0x0, 0x1);
        gbc.writeMem(0xa40a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x45d6, gbc.sp());
        EXPECT(0xa40c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa40a));
        EXPECT(0x98, gbc.readMem(0xa40b));
        // CB 98 003C
        gbc.setState(0x2646, 0xcfb4, 0xe2f0, 0x9e15, 0xca, 0x6bc1, 0x1, 0x0);
        gbc.writeMem(0x2646, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xcfb4, gbc.sp());
        EXPECT(0x2648, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 003D
        gbc.setState(0x1321, 0x9a41, 0x6920, 0x7b7b, 0xeb41, 0x289b, 0x0, 0x1);
        gbc.writeMem(0x1321, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x9a41, gbc.sp());
        EXPECT(0x1323, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 003F
        gbc.setState(0xd51f, 0xaacd, 0x71a0, 0xda6f, 0x8fce, 0xb3f3, 0x0, 0x0);
        gbc.writeMem(0xd51f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xaacd, gbc.sp());
        EXPECT(0xd521, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd51f));
        EXPECT(0x98, gbc.readMem(0xd520));
        // CB 98 0040
        gbc.setState(0xaa57, 0xc7a9, 0x9410, 0x9673, 0x7c21, 0x95c9, 0x0, 0x0);
        gbc.writeMem(0xaa57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xc7a9, gbc.sp());
        EXPECT(0xaa59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaa57));
        EXPECT(0x98, gbc.readMem(0xaa58));
        // CB 98 0041
        gbc.setState(0x6c5, 0xb823, 0xf590, 0xe838, 0x73de, 0x422c, 0x1, 0x0);
        gbc.writeMem(0x6c5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xb823, gbc.sp());
        EXPECT(0x6c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0042
        gbc.setState(0x4f8c, 0x7cdb, 0x9390, 0xd507, 0x2a98, 0x78a7, 0x0, 0x1);
        gbc.writeMem(0x4f8c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x7cdb, gbc.sp());
        EXPECT(0x4f8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0043
        gbc.setState(0x668, 0x28db, 0x87f0, 0x6d4c, 0xa24d, 0xcd19, 0x0, 0x0);
        gbc.writeMem(0x668, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x28db, gbc.sp());
        EXPECT(0x66a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0044
        gbc.setState(0xc386, 0xc8ca, 0x99f0, 0x2d4, 0x68ee, 0xb35d, 0x0, 0x1);
        gbc.writeMem(0xc386, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xc8ca, gbc.sp());
        EXPECT(0xc388, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc386));
        EXPECT(0x98, gbc.readMem(0xc387));
        // CB 98 0045
        gbc.setState(0xd85d, 0x5d20, 0x9dd0, 0x1e35, 0xf669, 0x5001, 0x0, 0x1);
        gbc.writeMem(0xd85d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x5d20, gbc.sp());
        EXPECT(0xd85f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd85d));
        EXPECT(0x98, gbc.readMem(0xd85e));
        // CB 98 0046
        gbc.setState(0x944d, 0x2e4e, 0x9b40, 0x8b1f, 0xce70, 0xcf01, 0x0, 0x1);
        gbc.writeMem(0x944d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x2e4e, gbc.sp());
        EXPECT(0x944f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x944d));
        EXPECT(0x98, gbc.readMem(0x944e));
        // CB 98 0047
        gbc.setState(0x7111, 0x2b88, 0xa4d0, 0xd81f, 0x79e9, 0x56cf, 0x1, 0x0);
        gbc.writeMem(0x7111, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x2b88, gbc.sp());
        EXPECT(0x7113, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0048
        gbc.setState(0x12f3, 0x9982, 0x9690, 0xb31b, 0xaec2, 0x48a7, 0x0, 0x0);
        gbc.writeMem(0x12f3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x9982, gbc.sp());
        EXPECT(0x12f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 004A
        gbc.setState(0x5739, 0x4fac, 0x40f0, 0x9fd9, 0xf64a, 0x4147, 0x1, 0x0);
        gbc.writeMem(0x5739, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4fac, gbc.sp());
        EXPECT(0x573b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 004B
        gbc.setState(0xa268, 0xef55, 0x7ea0, 0x7320, 0x29e1, 0x63ea, 0x1, 0x0);
        gbc.writeMem(0xa268, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xef55, gbc.sp());
        EXPECT(0xa26a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa268));
        EXPECT(0x98, gbc.readMem(0xa269));
        // CB 98 004C
        gbc.setState(0x79ab, 0xffd2, 0x36f0, 0xd99a, 0x9d9, 0xbf7e, 0x1, 0x0);
        gbc.writeMem(0x79ab, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xffd2, gbc.sp());
        EXPECT(0x79ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 004D
        gbc.setState(0x3127, 0x58cf, 0x47d0, 0x533, 0xeeed, 0xdd5d, 0x1, 0x1);
        gbc.writeMem(0x3127, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x58cf, gbc.sp());
        EXPECT(0x3129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 004E
        gbc.setState(0x90ae, 0x3943, 0x2040, 0x6cb2, 0x2bf, 0xffe0, 0x1, 0x0);
        gbc.writeMem(0x90ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x3943, gbc.sp());
        EXPECT(0x90b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90ae));
        EXPECT(0x98, gbc.readMem(0x90af));
        // CB 98 004F
        gbc.setState(0x19a3, 0xb4a6, 0x8fa0, 0x1a1e, 0xb96e, 0x9358, 0x1, 0x1);
        gbc.writeMem(0x19a3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xb4a6, gbc.sp());
        EXPECT(0x19a5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0050
        gbc.setState(0x5333, 0xdc26, 0xeef0, 0x25a, 0x430c, 0xab14, 0x1, 0x1);
        gbc.writeMem(0x5333, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xdc26, gbc.sp());
        EXPECT(0x5335, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0051
        gbc.setState(0x5b64, 0xed9c, 0xb7d0, 0xdecb, 0x81ab, 0xd269, 0x0, 0x0);
        gbc.writeMem(0x5b64, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xed9c, gbc.sp());
        EXPECT(0x5b66, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0052
        gbc.setState(0x55ac, 0xc80f, 0x2b40, 0x86be, 0x15a8, 0x11f0, 0x1, 0x1);
        gbc.writeMem(0x55ac, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xc80f, gbc.sp());
        EXPECT(0x55ae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0053
        gbc.setState(0x5f47, 0xf43d, 0x430, 0x5ac5, 0x5756, 0xc93d, 0x1, 0x1);
        gbc.writeMem(0x5f47, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xf43d, gbc.sp());
        EXPECT(0x5f49, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0054
        gbc.setState(0x1da5, 0xdf53, 0x4340, 0xb8e6, 0x5cc3, 0xcec1, 0x1, 0x0);
        gbc.writeMem(0x1da5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xdf53, gbc.sp());
        EXPECT(0x1da7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0055
        gbc.setState(0x75db, 0x5061, 0x23f0, 0x1992, 0x16cf, 0x16a3, 0x1, 0x0);
        gbc.writeMem(0x75db, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x5061, gbc.sp());
        EXPECT(0x75dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0057
        gbc.setState(0x5f8e, 0x1463, 0x7c20, 0xf951, 0x6a84, 0x80f2, 0x1, 0x0);
        gbc.writeMem(0x5f8e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x1463, gbc.sp());
        EXPECT(0x5f90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0058
        gbc.setState(0x8e24, 0xd743, 0x76e0, 0xeb48, 0x8171, 0x8b11, 0x1, 0x1);
        gbc.writeMem(0x8e24, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xd743, gbc.sp());
        EXPECT(0x8e26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e24));
        EXPECT(0x98, gbc.readMem(0x8e25));
        // CB 98 005A
        gbc.setState(0x8f11, 0xbf15, 0x8a60, 0xaed, 0x57, 0xb4cf, 0x0, 0x0);
        gbc.writeMem(0x8f11, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xbf15, gbc.sp());
        EXPECT(0x8f13, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f11));
        EXPECT(0x98, gbc.readMem(0x8f12));
        // CB 98 005B
        gbc.setState(0xc1ec, 0xcc9a, 0xd3d0, 0x3bdd, 0x175, 0xeee2, 0x0, 0x1);
        gbc.writeMem(0xc1ec, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xcc9a, gbc.sp());
        EXPECT(0xc1ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1ec));
        EXPECT(0x98, gbc.readMem(0xc1ed));
        // CB 98 005C
        gbc.setState(0xb04d, 0x8506, 0x95a0, 0xdfbb, 0x1a78, 0x265b, 0x0, 0x1);
        gbc.writeMem(0xb04d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x8506, gbc.sp());
        EXPECT(0xb04f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb04d));
        EXPECT(0x98, gbc.readMem(0xb04e));
        // CB 98 005D
        gbc.setState(0xdb0, 0x8f83, 0x1a20, 0x7458, 0x3836, 0x2e97, 0x0, 0x0);
        gbc.writeMem(0xdb0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x8f83, gbc.sp());
        EXPECT(0xdb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 005F
        gbc.setState(0x7ee9, 0xd197, 0xb350, 0xdb18, 0x4149, 0x7425, 0x1, 0x1);
        gbc.writeMem(0x7ee9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xd197, gbc.sp());
        EXPECT(0x7eeb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0060
        gbc.setState(0xe4f0, 0x94b5, 0x2a10, 0xab50, 0x782e, 0xd0f8, 0x0, 0x0);
        gbc.writeMem(0xe4f0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x94b5, gbc.sp());
        EXPECT(0xe4f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe4f0));
        EXPECT(0x98, gbc.readMem(0xe4f1));
        // CB 98 0061
        gbc.setState(0xdc93, 0xc221, 0x7580, 0x4494, 0xefe7, 0x26a0, 0x0, 0x0);
        gbc.writeMem(0xdc93, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xc221, gbc.sp());
        EXPECT(0xdc95, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc93));
        EXPECT(0x98, gbc.readMem(0xdc94));
        // CB 98 0062
        gbc.setState(0xe38e, 0xcd2, 0xb630, 0x5385, 0x694f, 0xf7ad, 0x1, 0x1);
        gbc.writeMem(0xe38e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xcd2, gbc.sp());
        EXPECT(0xe390, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe38e));
        EXPECT(0x98, gbc.readMem(0xe38f));
        // CB 98 0063
        gbc.setState(0x10b6, 0x845d, 0xb800, 0xcbf1, 0xe4, 0xc02e, 0x0, 0x0);
        gbc.writeMem(0x10b6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x845d, gbc.sp());
        EXPECT(0x10b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0064
        gbc.setState(0x4a04, 0x7bf5, 0x88a0, 0x4ce, 0xd4a2, 0xbeb, 0x0, 0x1);
        gbc.writeMem(0x4a04, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x7bf5, gbc.sp());
        EXPECT(0x4a06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0065
        gbc.setState(0x40e3, 0x19d8, 0xb1d0, 0xc7e3, 0xc30d, 0x4e95, 0x0, 0x0);
        gbc.writeMem(0x40e3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x19d8, gbc.sp());
        EXPECT(0x40e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0066
        gbc.setState(0x5d58, 0x2aa0, 0x150, 0xa42c, 0xc2a3, 0xc440, 0x0, 0x0);
        gbc.writeMem(0x5d58, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x2aa0, gbc.sp());
        EXPECT(0x5d5a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0067
        gbc.setState(0x1cef, 0x1f9a, 0x5610, 0xb300, 0xc17a, 0x1b27, 0x0, 0x1);
        gbc.writeMem(0x1cef, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x1f9a, gbc.sp());
        EXPECT(0x1cf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0068
        gbc.setState(0x9cbc, 0xb350, 0xea70, 0xd6c0, 0x13f, 0x9bd0, 0x1, 0x1);
        gbc.writeMem(0x9cbc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xb350, gbc.sp());
        EXPECT(0x9cbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cbc));
        EXPECT(0x98, gbc.readMem(0x9cbd));
        // CB 98 0069
        gbc.setState(0xea67, 0xde2f, 0xabc0, 0xac34, 0xdd68, 0xccd4, 0x0, 0x1);
        gbc.writeMem(0xea67, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0xde2f, gbc.sp());
        EXPECT(0xea69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea67));
        EXPECT(0x98, gbc.readMem(0xea68));
        // CB 98 006A
        gbc.setState(0x6e41, 0xd2e3, 0xc900, 0xf492, 0xd656, 0xaf2f, 0x1, 0x1);
        gbc.writeMem(0x6e41, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xd2e3, gbc.sp());
        EXPECT(0x6e43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 006B
        gbc.setState(0x4658, 0x9fbc, 0x3a20, 0x6d97, 0xfaae, 0x4cfc, 0x1, 0x0);
        gbc.writeMem(0x4658, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x9fbc, gbc.sp());
        EXPECT(0x465a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 006C
        gbc.setState(0x47a0, 0xc203, 0x37e0, 0xf0f9, 0x619c, 0xd634, 0x0, 0x0);
        gbc.writeMem(0x47a0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0xc203, gbc.sp());
        EXPECT(0x47a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 006D
        gbc.setState(0x338a, 0xd760, 0xd3d0, 0x5ecb, 0x452b, 0xd655, 0x1, 0x0);
        gbc.writeMem(0x338a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xd760, gbc.sp());
        EXPECT(0x338c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 006E
        gbc.setState(0xb712, 0x28ec, 0x7100, 0xe1e1, 0xe5c5, 0x8295, 0x1, 0x1);
        gbc.writeMem(0xb712, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x28ec, gbc.sp());
        EXPECT(0xb714, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb712));
        EXPECT(0x98, gbc.readMem(0xb713));
        // CB 98 006F
        gbc.setState(0xcc62, 0xbbb5, 0x9930, 0xdc78, 0x8029, 0x6339, 0x1, 0x1);
        gbc.writeMem(0xcc62, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0xbbb5, gbc.sp());
        EXPECT(0xcc64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc62));
        EXPECT(0x98, gbc.readMem(0xcc63));
        // CB 98 0070
        gbc.setState(0x2f5b, 0x3034, 0xc40, 0x921, 0x677, 0x50b6, 0x1, 0x0);
        gbc.writeMem(0x2f5b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x3034, gbc.sp());
        EXPECT(0x2f5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0071
        gbc.setState(0x8aad, 0x4ad4, 0xc980, 0xd420, 0x4228, 0x791, 0x0, 0x0);
        gbc.writeMem(0x8aad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x4ad4, gbc.sp());
        EXPECT(0x8aaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8aad));
        EXPECT(0x98, gbc.readMem(0x8aae));
        // CB 98 0072
        gbc.setState(0x5668, 0xcabf, 0x87b0, 0x5247, 0x1b01, 0xff88, 0x0, 0x0);
        gbc.writeMem(0x5668, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xcabf, gbc.sp());
        EXPECT(0x566a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0073
        gbc.setState(0x8782, 0xd287, 0x19f0, 0x628b, 0xe6a9, 0x5b1c, 0x1, 0x1);
        gbc.writeMem(0x8782, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xd287, gbc.sp());
        EXPECT(0x8784, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8782));
        EXPECT(0x98, gbc.readMem(0x8783));
        // CB 98 0074
        gbc.setState(0x9393, 0x493e, 0xbc0, 0x345d, 0xdb60, 0x353a, 0x0, 0x1);
        gbc.writeMem(0x9393, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x493e, gbc.sp());
        EXPECT(0x9395, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9393));
        EXPECT(0x98, gbc.readMem(0x9394));
        // CB 98 0075
        gbc.setState(0x54c7, 0x92e2, 0x8510, 0xdebe, 0x7da9, 0x62af, 0x0, 0x1);
        gbc.writeMem(0x54c7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x92e2, gbc.sp());
        EXPECT(0x54c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0076
        gbc.setState(0x7588, 0x44c8, 0x13d0, 0x7541, 0x3a97, 0xe5d9, 0x0, 0x0);
        gbc.writeMem(0x7588, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x44c8, gbc.sp());
        EXPECT(0x758a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0077
        gbc.setState(0x4e80, 0x9493, 0xb00, 0x65b0, 0x7b9f, 0xbd, 0x0, 0x0);
        gbc.writeMem(0x4e80, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x9493, gbc.sp());
        EXPECT(0x4e82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0078
        gbc.setState(0xd367, 0x482f, 0xdae0, 0x73f3, 0x8bd2, 0x2c28, 0x0, 0x1);
        gbc.writeMem(0xd367, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x482f, gbc.sp());
        EXPECT(0xd369, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd367));
        EXPECT(0x98, gbc.readMem(0xd368));
        // CB 98 0079
        gbc.setState(0xde99, 0xb095, 0xa710, 0x32ec, 0xdcbf, 0xea83, 0x0, 0x0);
        gbc.writeMem(0xde99, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xb095, gbc.sp());
        EXPECT(0xde9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde99));
        EXPECT(0x98, gbc.readMem(0xde9a));
        // CB 98 007A
        gbc.setState(0x8256, 0x882f, 0xb4b0, 0x5b36, 0x3d49, 0x439c, 0x0, 0x1);
        gbc.writeMem(0x8256, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x882f, gbc.sp());
        EXPECT(0x8258, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8256));
        EXPECT(0x98, gbc.readMem(0x8257));
        // CB 98 007B
        gbc.setState(0x99f0, 0x650a, 0x53f0, 0xc02d, 0x7a8b, 0x828a, 0x0, 0x1);
        gbc.writeMem(0x99f0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x650a, gbc.sp());
        EXPECT(0x99f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99f0));
        EXPECT(0x98, gbc.readMem(0x99f1));
        // CB 98 007C
        gbc.setState(0xb88c, 0x2780, 0xa480, 0xb697, 0x55e0, 0x50e5, 0x0, 0x1);
        gbc.writeMem(0xb88c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x2780, gbc.sp());
        EXPECT(0xb88e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb88c));
        EXPECT(0x98, gbc.readMem(0xb88d));
        // CB 98 007D
        gbc.setState(0x5c56, 0x7d5e, 0xaaa0, 0x2fbc, 0x13e5, 0xb5a2, 0x1, 0x0);
        gbc.writeMem(0x5c56, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x7d5e, gbc.sp());
        EXPECT(0x5c58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 007E
        gbc.setState(0xc17b, 0x96e7, 0x8ab0, 0xecbf, 0xa5c7, 0x5214, 0x1, 0x0);
        gbc.writeMem(0xc17b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x96e7, gbc.sp());
        EXPECT(0xc17d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc17b));
        EXPECT(0x98, gbc.readMem(0xc17c));
        // CB 98 007F
        gbc.setState(0xdaf1, 0x45d2, 0x5cf0, 0x49bf, 0xa8f2, 0x60b6, 0x0, 0x1);
        gbc.writeMem(0xdaf1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x45d2, gbc.sp());
        EXPECT(0xdaf3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdaf1));
        EXPECT(0x98, gbc.readMem(0xdaf2));
        // CB 98 0080
        gbc.setState(0x2ce6, 0x318c, 0x7b90, 0x73dd, 0xa82f, 0xf4d8, 0x0, 0x1);
        gbc.writeMem(0x2ce6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x318c, gbc.sp());
        EXPECT(0x2ce8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0081
        gbc.setState(0x59da, 0x78de, 0xb210, 0x4246, 0x88d5, 0x2013, 0x0, 0x0);
        gbc.writeMem(0x59da, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x78de, gbc.sp());
        EXPECT(0x59dc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0082
        gbc.setState(0x9dbd, 0x2194, 0x4fb0, 0x3fa9, 0xf749, 0x52af, 0x1, 0x1);
        gbc.writeMem(0x9dbd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x2194, gbc.sp());
        EXPECT(0x9dbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dbd));
        EXPECT(0x98, gbc.readMem(0x9dbe));
        // CB 98 0083
        gbc.setState(0x9a66, 0xeaba, 0x3ec0, 0x7ef6, 0xcbe9, 0x67b0, 0x1, 0x0);
        gbc.writeMem(0x9a66, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xeaba, gbc.sp());
        EXPECT(0x9a68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9a66));
        EXPECT(0x98, gbc.readMem(0x9a67));
        // CB 98 0084
        gbc.setState(0x1ca, 0x6f74, 0xca50, 0x7da7, 0xb119, 0x532d, 0x1, 0x1);
        gbc.writeMem(0x1ca, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x6f74, gbc.sp());
        EXPECT(0x1cc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0085
        gbc.setState(0x86b1, 0x416, 0xb5b0, 0xa040, 0xca9d, 0xc4ed, 0x1, 0x1);
        gbc.writeMem(0x86b1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x416, gbc.sp());
        EXPECT(0x86b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x86b1));
        EXPECT(0x98, gbc.readMem(0x86b2));
        // CB 98 0086
        gbc.setState(0x602a, 0x150d, 0xa210, 0x31c6, 0xc04d, 0xf16c, 0x0, 0x1);
        gbc.writeMem(0x602a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x150d, gbc.sp());
        EXPECT(0x602c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0087
        gbc.setState(0xde, 0xe3f0, 0x2420, 0xb977, 0x343f, 0xccc2, 0x1, 0x1);
        gbc.writeMem(0xde, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xe3f0, gbc.sp());
        EXPECT(0xe0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0088
        gbc.setState(0x218d, 0x9b31, 0xb320, 0xa1a, 0xa0e4, 0x652, 0x1, 0x0);
        gbc.writeMem(0x218d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x9b31, gbc.sp());
        EXPECT(0x218f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0089
        gbc.setState(0x1231, 0x88f, 0xf8b0, 0x770b, 0x9906, 0xe92f, 0x0, 0x0);
        gbc.writeMem(0x1231, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x88f, gbc.sp());
        EXPECT(0x1233, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 008A
        gbc.setState(0x1d53, 0x6d09, 0x23b0, 0x6b38, 0x1122, 0x2d8e, 0x1, 0x1);
        gbc.writeMem(0x1d53, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x6d09, gbc.sp());
        EXPECT(0x1d55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 008B
        gbc.setState(0x2705, 0x6a8b, 0x2410, 0xf49d, 0xb230, 0x43d7, 0x1, 0x0);
        gbc.writeMem(0x2705, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x6a8b, gbc.sp());
        EXPECT(0x2707, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 008C
        gbc.setState(0x73c1, 0x5849, 0x74a0, 0xbf90, 0xb51e, 0xacdf, 0x0, 0x0);
        gbc.writeMem(0x73c1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x5849, gbc.sp());
        EXPECT(0x73c3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 008D
        gbc.setState(0x20ae, 0xc36c, 0x63b0, 0x21bb, 0x9e85, 0xbba, 0x0, 0x1);
        gbc.writeMem(0x20ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xc36c, gbc.sp());
        EXPECT(0x20b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 008E
        gbc.setState(0x4ce8, 0xc3e0, 0x5a50, 0x6064, 0x2043, 0x8263, 0x0, 0x0);
        gbc.writeMem(0x4ce8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xc3e0, gbc.sp());
        EXPECT(0x4cea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 008F
        gbc.setState(0x198e, 0xa529, 0x3ec0, 0x8e2d, 0x1ebd, 0x4400, 0x1, 0x0);
        gbc.writeMem(0x198e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xa529, gbc.sp());
        EXPECT(0x1990, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0091
        gbc.setState(0xee61, 0x2d7e, 0x1680, 0x662b, 0xa3fa, 0xf617, 0x1, 0x1);
        gbc.writeMem(0xee61, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x2d7e, gbc.sp());
        EXPECT(0xee63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee61));
        EXPECT(0x98, gbc.readMem(0xee62));
        // CB 98 0092
        gbc.setState(0x2642, 0x7116, 0x4ef0, 0x36eb, 0x3986, 0xb98, 0x1, 0x0);
        gbc.writeMem(0x2642, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0x7116, gbc.sp());
        EXPECT(0x2644, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0093
        gbc.setState(0x98e0, 0x8f0a, 0xd70, 0x3eee, 0xfded, 0x435e, 0x0, 0x0);
        gbc.writeMem(0x98e0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x8f0a, gbc.sp());
        EXPECT(0x98e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x98e0));
        EXPECT(0x98, gbc.readMem(0x98e1));
        // CB 98 0094
        gbc.setState(0x29d1, 0xbee3, 0xbbb0, 0x5f13, 0xb4c6, 0x1ad2, 0x0, 0x1);
        gbc.writeMem(0x29d1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xbee3, gbc.sp());
        EXPECT(0x29d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0095
        gbc.setState(0x67db, 0x2700, 0xd6e0, 0x3a54, 0xab3a, 0x4a77, 0x1, 0x1);
        gbc.writeMem(0x67db, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x2700, gbc.sp());
        EXPECT(0x67dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0096
        gbc.setState(0x39d1, 0xcf60, 0x8170, 0x6f00, 0xc212, 0xb2e5, 0x0, 0x1);
        gbc.writeMem(0x39d1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xcf60, gbc.sp());
        EXPECT(0x39d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0097
        gbc.setState(0x6db9, 0x2b43, 0xaa90, 0x917a, 0x3287, 0x9afd, 0x1, 0x1);
        gbc.writeMem(0x6db9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x2b43, gbc.sp());
        EXPECT(0x6dbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0098
        gbc.setState(0x82d, 0x23d7, 0x2370, 0x998a, 0xaba4, 0x7604, 0x1, 0x1);
        gbc.writeMem(0x82d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x23d7, gbc.sp());
        EXPECT(0x82f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0099
        gbc.setState(0xd7c, 0xff5a, 0x9b0, 0xfbee, 0x8215, 0x9738, 0x1, 0x0);
        gbc.writeMem(0xd7c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xff5a, gbc.sp());
        EXPECT(0xd7e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 009A
        gbc.setState(0xeff6, 0xc740, 0x60e0, 0x8f0e, 0x1577, 0x7709, 0x1, 0x1);
        gbc.writeMem(0xeff6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0xc740, gbc.sp());
        EXPECT(0xeff8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeff6));
        EXPECT(0x98, gbc.readMem(0xeff7));
        // CB 98 009B
        gbc.setState(0x88e2, 0xc96a, 0xd6a0, 0x7f7e, 0xde82, 0xe4ad, 0x1, 0x1);
        gbc.writeMem(0x88e2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xc96a, gbc.sp());
        EXPECT(0x88e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x88e2));
        EXPECT(0x98, gbc.readMem(0x88e3));
        // CB 98 009C
        gbc.setState(0x59ba, 0x31b7, 0x8fa0, 0xda12, 0xc81d, 0x901a, 0x0, 0x0);
        gbc.writeMem(0x59ba, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x31b7, gbc.sp());
        EXPECT(0x59bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 009D
        gbc.setState(0xce9e, 0x92fe, 0xb4c0, 0x2f63, 0xa6b5, 0xeb87, 0x0, 0x0);
        gbc.writeMem(0xce9e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x92fe, gbc.sp());
        EXPECT(0xcea0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce9e));
        EXPECT(0x98, gbc.readMem(0xce9f));
        // CB 98 009E
        gbc.setState(0x16a0, 0xab92, 0x62c0, 0x90ef, 0xa12, 0x189e, 0x0, 0x0);
        gbc.writeMem(0x16a0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xab92, gbc.sp());
        EXPECT(0x16a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 009F
        gbc.setState(0x295, 0x53ad, 0xa210, 0xbe6f, 0x30f3, 0xb53c, 0x1, 0x0);
        gbc.writeMem(0x295, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x53ad, gbc.sp());
        EXPECT(0x297, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00A0
        gbc.setState(0xe9d7, 0x4eea, 0x7750, 0xaf36, 0xf66, 0xc83, 0x0, 0x0);
        gbc.writeMem(0xe9d7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x4eea, gbc.sp());
        EXPECT(0xe9d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9d7));
        EXPECT(0x98, gbc.readMem(0xe9d8));
        // CB 98 00A1
        gbc.setState(0x8a0, 0x2d56, 0x6e50, 0x9c07, 0x3034, 0xad30, 0x0, 0x1);
        gbc.writeMem(0x8a0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x2d56, gbc.sp());
        EXPECT(0x8a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00A2
        gbc.setState(0xbbc, 0x50, 0xe070, 0xb691, 0xe45a, 0xf337, 0x0, 0x1);
        gbc.writeMem(0xbbc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x50, gbc.sp());
        EXPECT(0xbbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00A3
        gbc.setState(0x2619, 0x85c8, 0x5320, 0x4f7, 0x89bc, 0xfef0, 0x0, 0x1);
        gbc.writeMem(0x2619, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x85c8, gbc.sp());
        EXPECT(0x261b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00A4
        gbc.setState(0x9032, 0xf3c2, 0x3ed0, 0xb2a7, 0x1a0a, 0xac4b, 0x0, 0x0);
        gbc.writeMem(0x9032, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf3c2, gbc.sp());
        EXPECT(0x9034, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9032));
        EXPECT(0x98, gbc.readMem(0x9033));
        // CB 98 00A5
        gbc.setState(0x251d, 0xc848, 0xee00, 0x8169, 0xc326, 0x62cd, 0x0, 0x0);
        gbc.writeMem(0x251d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xc848, gbc.sp());
        EXPECT(0x251f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00A6
        gbc.setState(0x8b40, 0x8527, 0xdae0, 0xb198, 0x5f04, 0xfc23, 0x0, 0x0);
        gbc.writeMem(0x8b40, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x8527, gbc.sp());
        EXPECT(0x8b42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b40));
        EXPECT(0x98, gbc.readMem(0x8b41));
        // CB 98 00A7
        gbc.setState(0x6ad8, 0x3a04, 0x4be0, 0xa426, 0xea8b, 0x14a5, 0x0, 0x0);
        gbc.writeMem(0x6ad8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x3a04, gbc.sp());
        EXPECT(0x6ada, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00A8
        gbc.setState(0x7318, 0x1b4c, 0x74c0, 0x9418, 0x69a7, 0x2abf, 0x1, 0x1);
        gbc.writeMem(0x7318, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x1b4c, gbc.sp());
        EXPECT(0x731a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00A9
        gbc.setState(0x7f8e, 0x52c7, 0x570, 0x5d33, 0xaa49, 0x7a35, 0x1, 0x1);
        gbc.writeMem(0x7f8e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x52c7, gbc.sp());
        EXPECT(0x7f90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00AA
        gbc.setState(0x7dad, 0x7ece, 0x3ac0, 0x4a07, 0x3797, 0x9686, 0x1, 0x0);
        gbc.writeMem(0x7dad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7ece, gbc.sp());
        EXPECT(0x7daf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00AC
        gbc.setState(0x4a9, 0x1938, 0x6b50, 0x14a5, 0x80b9, 0x496c, 0x1, 0x1);
        gbc.writeMem(0x4a9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x1938, gbc.sp());
        EXPECT(0x4ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00AD
        gbc.setState(0x1333, 0x442f, 0xbce0, 0x36b8, 0xed62, 0xfd30, 0x0, 0x1);
        gbc.writeMem(0x1333, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x442f, gbc.sp());
        EXPECT(0x1335, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00AE
        gbc.setState(0x3c63, 0x584e, 0xf0f0, 0xd040, 0x4e77, 0x8a20, 0x1, 0x0);
        gbc.writeMem(0x3c63, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x584e, gbc.sp());
        EXPECT(0x3c65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00AF
        gbc.setState(0x7f5c, 0x896e, 0x3660, 0x737f, 0x6725, 0xed25, 0x0, 0x1);
        gbc.writeMem(0x7f5c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x896e, gbc.sp());
        EXPECT(0x7f5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00B0
        gbc.setState(0x4bad, 0xff99, 0x950, 0x104b, 0x55f9, 0x4f0c, 0x0, 0x0);
        gbc.writeMem(0x4bad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0xff99, gbc.sp());
        EXPECT(0x4baf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00B1
        gbc.setState(0x4f08, 0x43c5, 0x7040, 0x3f70, 0x6693, 0x9d77, 0x0, 0x0);
        gbc.writeMem(0x4f08, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x43c5, gbc.sp());
        EXPECT(0x4f0a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00B2
        gbc.setState(0x8e75, 0xac99, 0x8cb0, 0x3eee, 0x3d3b, 0x63af, 0x1, 0x0);
        gbc.writeMem(0x8e75, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0xac99, gbc.sp());
        EXPECT(0x8e77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e75));
        EXPECT(0x98, gbc.readMem(0x8e76));
        // CB 98 00B3
        gbc.setState(0x21f7, 0x96f6, 0xe310, 0x2877, 0x529, 0xb423, 0x0, 0x1);
        gbc.writeMem(0x21f7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x96f6, gbc.sp());
        EXPECT(0x21f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00B4
        gbc.setState(0xd671, 0x75ac, 0x65d0, 0x23d3, 0x84c3, 0xe2c9, 0x0, 0x1);
        gbc.writeMem(0xd671, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x75ac, gbc.sp());
        EXPECT(0xd673, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd671));
        EXPECT(0x98, gbc.readMem(0xd672));
        // CB 98 00B5
        gbc.setState(0x3ca3, 0x6581, 0x8b90, 0xb5d4, 0xf2cf, 0xb4cf, 0x1, 0x1);
        gbc.writeMem(0x3ca3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x6581, gbc.sp());
        EXPECT(0x3ca5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00B6
        gbc.setState(0x1ea1, 0xe7ba, 0x7430, 0x69f0, 0x5a5f, 0xbd3c, 0x0, 0x0);
        gbc.writeMem(0x1ea1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xe7ba, gbc.sp());
        EXPECT(0x1ea3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00B7
        gbc.setState(0xfb1, 0x71f4, 0xd320, 0x8db, 0x6a9c, 0x2c6, 0x0, 0x1);
        gbc.writeMem(0xfb1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x71f4, gbc.sp());
        EXPECT(0xfb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00B8
        gbc.setState(0xae53, 0x97a8, 0xc920, 0x8bab, 0xbaba, 0x815d, 0x0, 0x0);
        gbc.writeMem(0xae53, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x97a8, gbc.sp());
        EXPECT(0xae55, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae53));
        EXPECT(0x98, gbc.readMem(0xae54));
        // CB 98 00B9
        gbc.setState(0x493a, 0xfc88, 0x5140, 0x78c3, 0xe805, 0xa4ce, 0x1, 0x0);
        gbc.writeMem(0x493a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xfc88, gbc.sp());
        EXPECT(0x493c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00BA
        gbc.setState(0x1ec6, 0x96b5, 0x8920, 0x8336, 0x9a36, 0x418, 0x0, 0x1);
        gbc.writeMem(0x1ec6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x96b5, gbc.sp());
        EXPECT(0x1ec8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00BB
        gbc.setState(0xe762, 0xd990, 0xf710, 0xa242, 0xfe86, 0x4fc3, 0x1, 0x1);
        gbc.writeMem(0xe762, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xd990, gbc.sp());
        EXPECT(0xe764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe762));
        EXPECT(0x98, gbc.readMem(0xe763));
        // CB 98 00BC
        gbc.setState(0x834b, 0x2a6c, 0x7810, 0x531f, 0xd1f6, 0xaeb3, 0x0, 0x0);
        gbc.writeMem(0x834b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x2a6c, gbc.sp());
        EXPECT(0x834d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x834b));
        EXPECT(0x98, gbc.readMem(0x834c));
        // CB 98 00BD
        gbc.setState(0x4b78, 0xf453, 0x2ac0, 0x8c3c, 0xecd0, 0x763b, 0x0, 0x0);
        gbc.writeMem(0x4b78, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xf453, gbc.sp());
        EXPECT(0x4b7a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00BE
        gbc.setState(0x11e1, 0xbd5, 0xd4b0, 0xae3, 0x1a3d, 0x1f1e, 0x0, 0x1);
        gbc.writeMem(0x11e1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xbd5, gbc.sp());
        EXPECT(0x11e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00BF
        gbc.setState(0xb7b8, 0xabd9, 0x7520, 0x1a31, 0xb47c, 0x737b, 0x0, 0x0);
        gbc.writeMem(0xb7b8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xabd9, gbc.sp());
        EXPECT(0xb7ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7b8));
        EXPECT(0x98, gbc.readMem(0xb7b9));
        // CB 98 00C0
        gbc.setState(0x969b, 0x3849, 0x71f0, 0x5bec, 0x3d2e, 0x2d51, 0x1, 0x0);
        gbc.writeMem(0x969b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x3849, gbc.sp());
        EXPECT(0x969d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x969b));
        EXPECT(0x98, gbc.readMem(0x969c));
        // CB 98 00C1
        gbc.setState(0x1624, 0xc63b, 0x66d0, 0xa2e1, 0x2313, 0xfab8, 0x0, 0x0);
        gbc.writeMem(0x1624, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xc63b, gbc.sp());
        EXPECT(0x1626, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00C2
        gbc.setState(0x20cb, 0xa1cd, 0x2860, 0xbf4c, 0x30a, 0xd1e4, 0x1, 0x1);
        gbc.writeMem(0x20cb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xa1cd, gbc.sp());
        EXPECT(0x20cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00C3
        gbc.setState(0x9f22, 0x6985, 0x7240, 0xf4ae, 0x7de8, 0x83f2, 0x1, 0x0);
        gbc.writeMem(0x9f22, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x6985, gbc.sp());
        EXPECT(0x9f24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f22));
        EXPECT(0x98, gbc.readMem(0x9f23));
        // CB 98 00C4
        gbc.setState(0x532a, 0x6b1f, 0xf0b0, 0xecbc, 0xb14b, 0x8de8, 0x0, 0x1);
        gbc.writeMem(0x532a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x6b1f, gbc.sp());
        EXPECT(0x532c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00C5
        gbc.setState(0x7e69, 0xe5c8, 0x3a60, 0x5b9, 0x7994, 0xde46, 0x1, 0x0);
        gbc.writeMem(0x7e69, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xe5c8, gbc.sp());
        EXPECT(0x7e6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00C6
        gbc.setState(0xe9cb, 0x170c, 0x79a0, 0x35a9, 0x70ce, 0x2194, 0x1, 0x0);
        gbc.writeMem(0xe9cb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x170c, gbc.sp());
        EXPECT(0xe9cd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe9cb));
        EXPECT(0x98, gbc.readMem(0xe9cc));
        // CB 98 00C7
        gbc.setState(0xcee8, 0x6ebb, 0x83d0, 0x1752, 0xb54c, 0x3cfb, 0x0, 0x0);
        gbc.writeMem(0xcee8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x6ebb, gbc.sp());
        EXPECT(0xceea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcee8));
        EXPECT(0x98, gbc.readMem(0xcee9));
        // CB 98 00C8
        gbc.setState(0x6bee, 0xee74, 0x6530, 0x9b4d, 0x713e, 0xe3f7, 0x1, 0x0);
        gbc.writeMem(0x6bee, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xee74, gbc.sp());
        EXPECT(0x6bf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00C9
        gbc.setState(0x1b96, 0x14e3, 0x6b90, 0xd108, 0xfbab, 0x4207, 0x0, 0x0);
        gbc.writeMem(0x1b96, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x14e3, gbc.sp());
        EXPECT(0x1b98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00CA
        gbc.setState(0x590, 0x95b9, 0x670, 0x311, 0x8712, 0xb7d9, 0x0, 0x0);
        gbc.writeMem(0x590, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x95b9, gbc.sp());
        EXPECT(0x592, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00CB
        gbc.setState(0xde41, 0x7c63, 0x7620, 0xbf0f, 0x5c0f, 0x2102, 0x1, 0x0);
        gbc.writeMem(0xde41, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x7c63, gbc.sp());
        EXPECT(0xde43, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde41));
        EXPECT(0x98, gbc.readMem(0xde42));
        // CB 98 00CC
        gbc.setState(0x6aad, 0x4bd7, 0xaa60, 0xf6e7, 0x3d3b, 0xcd11, 0x0, 0x0);
        gbc.writeMem(0x6aad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x4bd7, gbc.sp());
        EXPECT(0x6aaf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00CD
        gbc.setState(0x712e, 0x4e93, 0x88e0, 0x61bc, 0x3a4d, 0x4b0b, 0x1, 0x0);
        gbc.writeMem(0x712e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x4e93, gbc.sp());
        EXPECT(0x7130, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00CE
        gbc.setState(0xbdc7, 0x191a, 0x5330, 0xb237, 0xee2, 0x15ca, 0x1, 0x1);
        gbc.writeMem(0xbdc7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x191a, gbc.sp());
        EXPECT(0xbdc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdc7));
        EXPECT(0x98, gbc.readMem(0xbdc8));
        // CB 98 00CF
        gbc.setState(0x53b7, 0xa40, 0xd570, 0xc2b0, 0x5397, 0x8885, 0x1, 0x1);
        gbc.writeMem(0x53b7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xa40, gbc.sp());
        EXPECT(0x53b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00D0
        gbc.setState(0xdf15, 0x5f, 0x1010, 0x6684, 0x80f4, 0xf5dd, 0x0, 0x0);
        gbc.writeMem(0xdf15, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x5f, gbc.sp());
        EXPECT(0xdf17, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf15));
        EXPECT(0x98, gbc.readMem(0xdf16));
        // CB 98 00D1
        gbc.setState(0xb972, 0x7515, 0xf130, 0xe0f9, 0xa8cb, 0x29d6, 0x0, 0x0);
        gbc.writeMem(0xb972, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x7515, gbc.sp());
        EXPECT(0xb974, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb972));
        EXPECT(0x98, gbc.readMem(0xb973));
        // CB 98 00D3
        gbc.setState(0x1011, 0x6123, 0x1fe0, 0x18aa, 0x89fd, 0x1404, 0x0, 0x1);
        gbc.writeMem(0x1011, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x6123, gbc.sp());
        EXPECT(0x1013, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00D4
        gbc.setState(0x7185, 0xb6ab, 0x2300, 0xbdc4, 0x1cf8, 0xad77, 0x1, 0x0);
        gbc.writeMem(0x7185, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb6ab, gbc.sp());
        EXPECT(0x7187, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00D5
        gbc.setState(0xd28b, 0x5a13, 0xb950, 0x2e5d, 0x18d4, 0x817d, 0x0, 0x0);
        gbc.writeMem(0xd28b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x5a13, gbc.sp());
        EXPECT(0xd28d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd28b));
        EXPECT(0x98, gbc.readMem(0xd28c));
        // CB 98 00D6
        gbc.setState(0xae9e, 0xcc7f, 0x9c30, 0x9ba, 0xbcc5, 0x8354, 0x0, 0x0);
        gbc.writeMem(0xae9e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xcc7f, gbc.sp());
        EXPECT(0xaea0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae9e));
        EXPECT(0x98, gbc.readMem(0xae9f));
        // CB 98 00D7
        gbc.setState(0x4784, 0xa334, 0xa0c0, 0x876, 0x2e62, 0x57b0, 0x0, 0x1);
        gbc.writeMem(0x4784, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xa334, gbc.sp());
        EXPECT(0x4786, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00D8
        gbc.setState(0xde99, 0xddd2, 0xa320, 0x4641, 0x9058, 0xaa3d, 0x0, 0x1);
        gbc.writeMem(0xde99, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xddd2, gbc.sp());
        EXPECT(0xde9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde99));
        EXPECT(0x98, gbc.readMem(0xde9a));
        // CB 98 00D9
        gbc.setState(0x2fb8, 0x1698, 0xa5e0, 0x5102, 0x7892, 0xb354, 0x0, 0x0);
        gbc.writeMem(0x2fb8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x1698, gbc.sp());
        EXPECT(0x2fba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00DA
        gbc.setState(0x1d7f, 0x8702, 0x1320, 0xb826, 0x14f3, 0xa070, 0x1, 0x1);
        gbc.writeMem(0x1d7f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x8702, gbc.sp());
        EXPECT(0x1d81, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00DB
        gbc.setState(0xe776, 0xbfda, 0x1a10, 0xeaa7, 0x40cc, 0x8870, 0x0, 0x0);
        gbc.writeMem(0xe776, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xbfda, gbc.sp());
        EXPECT(0xe778, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe776));
        EXPECT(0x98, gbc.readMem(0xe777));
        // CB 98 00DC
        gbc.setState(0xcc45, 0xf475, 0xcec0, 0x23f, 0x8ebb, 0x6edd, 0x1, 0x1);
        gbc.writeMem(0xcc45, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xf475, gbc.sp());
        EXPECT(0xcc47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc45));
        EXPECT(0x98, gbc.readMem(0xcc46));
        // CB 98 00DD
        gbc.setState(0xd74d, 0x2fdb, 0x17f0, 0xfb3e, 0xe265, 0x60ee, 0x0, 0x0);
        gbc.writeMem(0xd74d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x2fdb, gbc.sp());
        EXPECT(0xd74f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd74d));
        EXPECT(0x98, gbc.readMem(0xd74e));
        // CB 98 00DE
        gbc.setState(0x4335, 0xa4b3, 0x54c0, 0xabdb, 0xeea6, 0x5cf1, 0x1, 0x0);
        gbc.writeMem(0x4335, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xa4b3, gbc.sp());
        EXPECT(0x4337, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00DF
        gbc.setState(0xca76, 0x6310, 0x5640, 0x4595, 0xa4ef, 0xde7b, 0x1, 0x0);
        gbc.writeMem(0xca76, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x6310, gbc.sp());
        EXPECT(0xca78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xca76));
        EXPECT(0x98, gbc.readMem(0xca77));
        // CB 98 00E0
        gbc.setState(0x4093, 0xbd3d, 0xd5c0, 0x8442, 0x2a0a, 0xba9e, 0x1, 0x0);
        gbc.writeMem(0x4093, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0xbd3d, gbc.sp());
        EXPECT(0x4095, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00E1
        gbc.setState(0x8c48, 0xd55e, 0x9c60, 0x7fdf, 0xddfc, 0x6f55, 0x1, 0x0);
        gbc.writeMem(0x8c48, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xd55e, gbc.sp());
        EXPECT(0x8c4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8c48));
        EXPECT(0x98, gbc.readMem(0x8c49));
        // CB 98 00E2
        gbc.setState(0x7c3, 0x3a3b, 0x2b40, 0x9c23, 0xe6cd, 0x5f3a, 0x1, 0x1);
        gbc.writeMem(0x7c3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x3a3b, gbc.sp());
        EXPECT(0x7c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00E3
        gbc.setState(0x15be, 0x7723, 0xf1c0, 0x423, 0xa548, 0x6939, 0x1, 0x1);
        gbc.writeMem(0x15be, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x7723, gbc.sp());
        EXPECT(0x15c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00E4
        gbc.setState(0x175e, 0xe9aa, 0xd490, 0xf23d, 0x2189, 0x351f, 0x1, 0x0);
        gbc.writeMem(0x175e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xe9aa, gbc.sp());
        EXPECT(0x1760, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00E6
        gbc.setState(0x3cd7, 0x5826, 0xde10, 0x991, 0xd0fa, 0xe822, 0x1, 0x1);
        gbc.writeMem(0x3cd7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x5826, gbc.sp());
        EXPECT(0x3cd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00E7
        gbc.setState(0xd1ad, 0x13b8, 0x69d0, 0xcfcf, 0x50c7, 0xe10f, 0x0, 0x0);
        gbc.writeMem(0xd1ad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x13b8, gbc.sp());
        EXPECT(0xd1af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1ad));
        EXPECT(0x98, gbc.readMem(0xd1ae));
        // CB 98 00E8
        gbc.setState(0x349b, 0x34b5, 0xc2b0, 0xb698, 0xebdc, 0xeed, 0x0, 0x0);
        gbc.writeMem(0x349b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x34b5, gbc.sp());
        EXPECT(0x349d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00E9
        gbc.setState(0x9f96, 0x30bf, 0xd520, 0x90d7, 0x52b0, 0x6d89, 0x0, 0x1);
        gbc.writeMem(0x9f96, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x30bf, gbc.sp());
        EXPECT(0x9f98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f96));
        EXPECT(0x98, gbc.readMem(0x9f97));
        // CB 98 00EA
        gbc.setState(0x4333, 0xb1de, 0xbe50, 0x8121, 0x13fe, 0xcdd9, 0x0, 0x1);
        gbc.writeMem(0x4333, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xb1de, gbc.sp());
        EXPECT(0x4335, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00EB
        gbc.setState(0x8ed3, 0x2eb8, 0xa280, 0x24c1, 0x1a75, 0x8a8b, 0x0, 0x0);
        gbc.writeMem(0x8ed3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x2eb8, gbc.sp());
        EXPECT(0x8ed5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ed3));
        EXPECT(0x98, gbc.readMem(0x8ed4));
        // CB 98 00EC
        gbc.setState(0xa123, 0x21b3, 0x3d30, 0xc5e9, 0x627d, 0xfad6, 0x0, 0x0);
        gbc.writeMem(0xa123, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x21b3, gbc.sp());
        EXPECT(0xa125, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa123));
        EXPECT(0x98, gbc.readMem(0xa124));
        // CB 98 00ED
        gbc.setState(0x6c50, 0x7bf2, 0xb760, 0x5c8d, 0xbc9f, 0xbb73, 0x1, 0x1);
        gbc.writeMem(0x6c50, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0x7bf2, gbc.sp());
        EXPECT(0x6c52, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00EE
        gbc.setState(0xa7de, 0x76a0, 0x9910, 0xb157, 0xc19e, 0x1645, 0x0, 0x1);
        gbc.writeMem(0xa7de, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x76a0, gbc.sp());
        EXPECT(0xa7e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa7de));
        EXPECT(0x98, gbc.readMem(0xa7df));
        // CB 98 00EF
        gbc.setState(0xaec4, 0x6004, 0xd7c0, 0x8627, 0xe5bc, 0x13c6, 0x0, 0x1);
        gbc.writeMem(0xaec4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x6004, gbc.sp());
        EXPECT(0xaec6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaec4));
        EXPECT(0x98, gbc.readMem(0xaec5));
        // CB 98 00F0
        gbc.setState(0xb399, 0x9a99, 0xd040, 0xf35d, 0x31a1, 0x8070, 0x1, 0x1);
        gbc.writeMem(0xb399, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x9a99, gbc.sp());
        EXPECT(0xb39b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb399));
        EXPECT(0x98, gbc.readMem(0xb39a));
        // CB 98 00F1
        gbc.setState(0xd254, 0x8517, 0xc080, 0xf0cb, 0xa9e4, 0xc002, 0x0, 0x1);
        gbc.writeMem(0xd254, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x8517, gbc.sp());
        EXPECT(0xd256, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd254));
        EXPECT(0x98, gbc.readMem(0xd255));
        // CB 98 00F2
        gbc.setState(0xa46e, 0xac5c, 0x510, 0x19b6, 0x82be, 0x59d5, 0x0, 0x1);
        gbc.writeMem(0xa46e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xac5c, gbc.sp());
        EXPECT(0xa470, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa46e));
        EXPECT(0x98, gbc.readMem(0xa46f));
        // CB 98 00F3
        gbc.setState(0xae5f, 0x365a, 0xab70, 0x4062, 0x699d, 0xb4d5, 0x1, 0x0);
        gbc.writeMem(0xae5f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x365a, gbc.sp());
        EXPECT(0xae61, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xae5f));
        EXPECT(0x98, gbc.readMem(0xae60));
        // CB 98 00F4
        gbc.setState(0x3a1b, 0xf1bb, 0x7e30, 0x5cde, 0x68e8, 0xa7ee, 0x0, 0x1);
        gbc.writeMem(0x3a1b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xf1bb, gbc.sp());
        EXPECT(0x3a1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00F5
        gbc.setState(0x29c5, 0xd9d8, 0xb570, 0xd379, 0x6939, 0x4831, 0x0, 0x1);
        gbc.writeMem(0x29c5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0xd9d8, gbc.sp());
        EXPECT(0x29c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00F6
        gbc.setState(0xadd9, 0x5098, 0xb610, 0xc7bf, 0xd33a, 0x29cb, 0x0, 0x1);
        gbc.writeMem(0xadd9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x5098, gbc.sp());
        EXPECT(0xaddb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xadd9));
        EXPECT(0x98, gbc.readMem(0xadda));
        // CB 98 00F7
        gbc.setState(0xb978, 0x74c9, 0xea70, 0x5544, 0xd47, 0x1811, 0x0, 0x1);
        gbc.writeMem(0xb978, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x74c9, gbc.sp());
        EXPECT(0xb97a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb978));
        EXPECT(0x98, gbc.readMem(0xb979));
        // CB 98 00F8
        gbc.setState(0xc879, 0x58cb, 0xd070, 0xccb3, 0xe85, 0x9f7a, 0x1, 0x1);
        gbc.writeMem(0xc879, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x58cb, gbc.sp());
        EXPECT(0xc87b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc879));
        EXPECT(0x98, gbc.readMem(0xc87a));
        // CB 98 00F9
        gbc.setState(0x703f, 0x959, 0x5ce0, 0xa980, 0x4606, 0x9f68, 0x0, 0x1);
        gbc.writeMem(0x703f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x959, gbc.sp());
        EXPECT(0x7041, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00FA
        gbc.setState(0x40d5, 0x5850, 0x49d0, 0x6a01, 0xdd8e, 0xdebb, 0x1, 0x1);
        gbc.writeMem(0x40d5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0x5850, gbc.sp());
        EXPECT(0x40d7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 00FB
        gbc.setState(0x8f12, 0x4577, 0x3860, 0xaf9d, 0x1849, 0xa556, 0x1, 0x1);
        gbc.writeMem(0x8f12, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x4577, gbc.sp());
        EXPECT(0x8f14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f12));
        EXPECT(0x98, gbc.readMem(0x8f13));
        // CB 98 00FC
        gbc.setState(0x303d, 0x5fca, 0x8ae0, 0xf48d, 0xbc1f, 0x2c8e, 0x0, 0x0);
        gbc.writeMem(0x303d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x5fca, gbc.sp());
        EXPECT(0x303f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 00FD
        gbc.setState(0xc2d6, 0xb506, 0x8c0, 0x69c8, 0x65e9, 0xaf44, 0x1, 0x0);
        gbc.writeMem(0xc2d6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xb506, gbc.sp());
        EXPECT(0xc2d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2d6));
        EXPECT(0x98, gbc.readMem(0xc2d7));
        // CB 98 00FE
        gbc.setState(0xc890, 0x8eeb, 0x7c40, 0x5cbc, 0xae81, 0x1d9c, 0x0, 0x1);
        gbc.writeMem(0xc890, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x8eeb, gbc.sp());
        EXPECT(0xc892, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc890));
        EXPECT(0x98, gbc.readMem(0xc891));
        // CB 98 00FF
        gbc.setState(0xb1af, 0x4c70, 0x1400, 0xe1e3, 0xb366, 0xe496, 0x0, 0x0);
        gbc.writeMem(0xb1af, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x4c70, gbc.sp());
        EXPECT(0xb1b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1af));
        EXPECT(0x98, gbc.readMem(0xb1b0));
        // CB 98 0100
        gbc.setState(0x2869, 0xb588, 0xfa70, 0x3d4c, 0x6abf, 0x875c, 0x0, 0x1);
        gbc.writeMem(0x2869, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xb588, gbc.sp());
        EXPECT(0x286b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0101
        gbc.setState(0x1b23, 0x5391, 0x7b40, 0x3aec, 0x52a9, 0xd0bd, 0x1, 0x0);
        gbc.writeMem(0x1b23, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x5391, gbc.sp());
        EXPECT(0x1b25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0102
        gbc.setState(0x4293, 0x74de, 0x1e10, 0xbd0e, 0xdd00, 0x671b, 0x0, 0x0);
        gbc.writeMem(0x4293, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x74de, gbc.sp());
        EXPECT(0x4295, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0103
        gbc.setState(0xed05, 0x13f3, 0x2480, 0x2d8f, 0xe287, 0x809b, 0x0, 0x0);
        gbc.writeMem(0xed05, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x13f3, gbc.sp());
        EXPECT(0xed07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed05));
        EXPECT(0x98, gbc.readMem(0xed06));
        // CB 98 0104
        gbc.setState(0x325b, 0xf3ec, 0x2990, 0x4ddd, 0xbc5f, 0xe4a5, 0x1, 0x1);
        gbc.writeMem(0x325b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xf3ec, gbc.sp());
        EXPECT(0x325d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0105
        gbc.setState(0xb28a, 0x3ca6, 0x3df0, 0x6230, 0x50de, 0x12fc, 0x1, 0x1);
        gbc.writeMem(0xb28a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3ca6, gbc.sp());
        EXPECT(0xb28c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb28a));
        EXPECT(0x98, gbc.readMem(0xb28b));
        // CB 98 0106
        gbc.setState(0x37ae, 0x39cf, 0xaa90, 0x2fb9, 0x114d, 0x6024, 0x0, 0x1);
        gbc.writeMem(0x37ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x39cf, gbc.sp());
        EXPECT(0x37b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0107
        gbc.setState(0xbc3e, 0x3029, 0x1740, 0x80ca, 0xee9f, 0x79ed, 0x0, 0x1);
        gbc.writeMem(0xbc3e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x3029, gbc.sp());
        EXPECT(0xbc40, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc3e));
        EXPECT(0x98, gbc.readMem(0xbc3f));
        // CB 98 0108
        gbc.setState(0xd0d1, 0xb3ed, 0xf4f0, 0x3cea, 0xd0aa, 0x4cc1, 0x0, 0x1);
        gbc.writeMem(0xd0d1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xb3ed, gbc.sp());
        EXPECT(0xd0d3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd0d1));
        EXPECT(0x98, gbc.readMem(0xd0d2));
        // CB 98 0109
        gbc.setState(0x36c, 0x9f42, 0x6990, 0x2fa1, 0x8e6b, 0xbe9a, 0x0, 0x0);
        gbc.writeMem(0x36c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x9f42, gbc.sp());
        EXPECT(0x36e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 010B
        gbc.setState(0xc7b3, 0x2605, 0xfc60, 0x7998, 0x66ee, 0xdb99, 0x1, 0x1);
        gbc.writeMem(0xc7b3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x2605, gbc.sp());
        EXPECT(0xc7b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7b3));
        EXPECT(0x98, gbc.readMem(0xc7b4));
        // CB 98 010C
        gbc.setState(0x238f, 0x4dc, 0x7a60, 0xe110, 0x6cc5, 0x711f, 0x0, 0x1);
        gbc.writeMem(0x238f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x4dc, gbc.sp());
        EXPECT(0x2391, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 010D
        gbc.setState(0x3490, 0xd303, 0x6640, 0xb759, 0x914d, 0x2173, 0x1, 0x1);
        gbc.writeMem(0x3490, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x73, gbc.l());
        EXPECT(0xd303, gbc.sp());
        EXPECT(0x3492, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 010E
        gbc.setState(0xdb52, 0x2503, 0x5af0, 0x657b, 0x15dc, 0x756f, 0x1, 0x0);
        gbc.writeMem(0xdb52, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x2503, gbc.sp());
        EXPECT(0xdb54, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb52));
        EXPECT(0x98, gbc.readMem(0xdb53));
        // CB 98 010F
        gbc.setState(0x89b1, 0x2d8, 0x8b50, 0x9e25, 0x9e3, 0x1dfe, 0x1, 0x1);
        gbc.writeMem(0x89b1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x2d8, gbc.sp());
        EXPECT(0x89b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89b1));
        EXPECT(0x98, gbc.readMem(0x89b2));
        // CB 98 0110
        gbc.setState(0x4678, 0x6eab, 0xf740, 0x622b, 0x8985, 0xfa97, 0x0, 0x1);
        gbc.writeMem(0x4678, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x6eab, gbc.sp());
        EXPECT(0x467a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0111
        gbc.setState(0x2212, 0xa82e, 0x22f0, 0xc9d9, 0x130f, 0x7677, 0x0, 0x1);
        gbc.writeMem(0x2212, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xa82e, gbc.sp());
        EXPECT(0x2214, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0112
        gbc.setState(0xe82d, 0xaea2, 0xe910, 0x7ad6, 0x4197, 0xafd6, 0x0, 0x1);
        gbc.writeMem(0xe82d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xaea2, gbc.sp());
        EXPECT(0xe82f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe82d));
        EXPECT(0x98, gbc.readMem(0xe82e));
        // CB 98 0113
        gbc.setState(0x7127, 0x8245, 0x41c0, 0xc9ea, 0x381a, 0xf0c1, 0x1, 0x1);
        gbc.writeMem(0x7127, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x8245, gbc.sp());
        EXPECT(0x7129, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0114
        gbc.setState(0x60d4, 0x53fa, 0x10d0, 0xfd23, 0x42fc, 0xade2, 0x1, 0x1);
        gbc.writeMem(0x60d4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x53fa, gbc.sp());
        EXPECT(0x60d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0115
        gbc.setState(0x10e, 0xeefa, 0x9480, 0x5a08, 0x4c34, 0x3e8c, 0x1, 0x0);
        gbc.writeMem(0x10e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xeefa, gbc.sp());
        EXPECT(0x110, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0116
        gbc.setState(0x3ce6, 0x7dc5, 0xcff0, 0xd80b, 0xb1ae, 0x21dc, 0x0, 0x0);
        gbc.writeMem(0x3ce6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x7dc5, gbc.sp());
        EXPECT(0x3ce8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0117
        gbc.setState(0xbcaf, 0x17c8, 0xcdb0, 0xf8a3, 0x4b8c, 0xd376, 0x0, 0x1);
        gbc.writeMem(0xbcaf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x17c8, gbc.sp());
        EXPECT(0xbcb1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcaf));
        EXPECT(0x98, gbc.readMem(0xbcb0));
        // CB 98 0118
        gbc.setState(0xb315, 0x8dcb, 0xb170, 0x5bd2, 0xbdfc, 0x252c, 0x1, 0x1);
        gbc.writeMem(0xb315, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x8dcb, gbc.sp());
        EXPECT(0xb317, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb315));
        EXPECT(0x98, gbc.readMem(0xb316));
        // CB 98 0119
        gbc.setState(0x42ba, 0xc46b, 0x66f0, 0x1550, 0x2eba, 0x3e59, 0x0, 0x1);
        gbc.writeMem(0x42ba, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xc46b, gbc.sp());
        EXPECT(0x42bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 011A
        gbc.setState(0xcd1d, 0xb375, 0x1470, 0x7cc9, 0x653d, 0x6449, 0x1, 0x0);
        gbc.writeMem(0xcd1d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xb375, gbc.sp());
        EXPECT(0xcd1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcd1d));
        EXPECT(0x98, gbc.readMem(0xcd1e));
        // CB 98 011B
        gbc.setState(0x47e4, 0x3c25, 0x6ed0, 0x280a, 0xf8fc, 0x472a, 0x1, 0x0);
        gbc.writeMem(0x47e4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x3c25, gbc.sp());
        EXPECT(0x47e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 011C
        gbc.setState(0x8f39, 0x1e4f, 0xbb80, 0x276f, 0x95c7, 0x2665, 0x1, 0x0);
        gbc.writeMem(0x8f39, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x1e4f, gbc.sp());
        EXPECT(0x8f3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8f39));
        EXPECT(0x98, gbc.readMem(0x8f3a));
        // CB 98 011E
        gbc.setState(0x9c21, 0x46fc, 0x8a0, 0x4557, 0xa3dd, 0x8aeb, 0x1, 0x0);
        gbc.writeMem(0x9c21, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x46fc, gbc.sp());
        EXPECT(0x9c23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c21));
        EXPECT(0x98, gbc.readMem(0x9c22));
        // CB 98 011F
        gbc.setState(0x4a14, 0x5ad6, 0x8e90, 0xb196, 0xbfb, 0x522a, 0x1, 0x1);
        gbc.writeMem(0x4a14, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x5ad6, gbc.sp());
        EXPECT(0x4a16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0120
        gbc.setState(0x8da9, 0x9780, 0xcae0, 0x82cb, 0xb13a, 0x7c8d, 0x0, 0x1);
        gbc.writeMem(0x8da9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x9780, gbc.sp());
        EXPECT(0x8dab, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8da9));
        EXPECT(0x98, gbc.readMem(0x8daa));
        // CB 98 0121
        gbc.setState(0xc5fa, 0x2929, 0x5f70, 0xb37a, 0x82d0, 0x7c6e, 0x1, 0x1);
        gbc.writeMem(0xc5fa, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x2929, gbc.sp());
        EXPECT(0xc5fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc5fa));
        EXPECT(0x98, gbc.readMem(0xc5fb));
        // CB 98 0122
        gbc.setState(0xa6d2, 0x6975, 0x5b20, 0x1df8, 0xc909, 0xb350, 0x1, 0x1);
        gbc.writeMem(0xa6d2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x6975, gbc.sp());
        EXPECT(0xa6d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6d2));
        EXPECT(0x98, gbc.readMem(0xa6d3));
        // CB 98 0123
        gbc.setState(0x6998, 0xdafe, 0xf690, 0xdc9e, 0xd4e6, 0x29d5, 0x0, 0x0);
        gbc.writeMem(0x6998, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xdafe, gbc.sp());
        EXPECT(0x699a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0124
        gbc.setState(0x46e8, 0x318a, 0xd600, 0x8de7, 0x99de, 0xed9d, 0x1, 0x0);
        gbc.writeMem(0x46e8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0x318a, gbc.sp());
        EXPECT(0x46ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0125
        gbc.setState(0x541f, 0x75eb, 0x7ea0, 0xb498, 0xbff, 0x28d, 0x0, 0x1);
        gbc.writeMem(0x541f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x75eb, gbc.sp());
        EXPECT(0x5421, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0126
        gbc.setState(0x3cf, 0x9af9, 0x6330, 0xd987, 0xdcf6, 0x6af, 0x0, 0x0);
        gbc.writeMem(0x3cf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x9af9, gbc.sp());
        EXPECT(0x3d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0127
        gbc.setState(0x5736, 0xd630, 0x1120, 0xd3ac, 0x8a3e, 0x4550, 0x1, 0x1);
        gbc.writeMem(0x5736, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xd630, gbc.sp());
        EXPECT(0x5738, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0128
        gbc.setState(0x10d5, 0x9264, 0x3720, 0xa36a, 0x1f65, 0xd26c, 0x0, 0x1);
        gbc.writeMem(0x10d5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x9264, gbc.sp());
        EXPECT(0x10d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0129
        gbc.setState(0x7132, 0xce46, 0x1eb0, 0xb843, 0x2daa, 0x80ea, 0x0, 0x0);
        gbc.writeMem(0x7132, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xce46, gbc.sp());
        EXPECT(0x7134, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 012B
        gbc.setState(0xe5e0, 0xfe06, 0x7e00, 0xb90a, 0x6167, 0xd58, 0x1, 0x0);
        gbc.writeMem(0xe5e0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0xfe06, gbc.sp());
        EXPECT(0xe5e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe5e0));
        EXPECT(0x98, gbc.readMem(0xe5e1));
        // CB 98 012C
        gbc.setState(0xc1af, 0xa544, 0x3b10, 0x7150, 0x6545, 0x272a, 0x0, 0x1);
        gbc.writeMem(0xc1af, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0xa544, gbc.sp());
        EXPECT(0xc1b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1af));
        EXPECT(0x98, gbc.readMem(0xc1b0));
        // CB 98 012D
        gbc.setState(0xdb55, 0x3f41, 0xba20, 0x9860, 0x65f9, 0xda8, 0x1, 0x0);
        gbc.writeMem(0xdb55, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x3f41, gbc.sp());
        EXPECT(0xdb57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdb55));
        EXPECT(0x98, gbc.readMem(0xdb56));
        // CB 98 012E
        gbc.setState(0x9fa6, 0x2234, 0x920, 0x488c, 0xcf2e, 0xdf78, 0x1, 0x1);
        gbc.writeMem(0x9fa6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x2234, gbc.sp());
        EXPECT(0x9fa8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9fa6));
        EXPECT(0x98, gbc.readMem(0x9fa7));
        // CB 98 012F
        gbc.setState(0xd3ec, 0xb517, 0x3b80, 0xf2df, 0x249d, 0xbe35, 0x0, 0x0);
        gbc.writeMem(0xd3ec, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xb517, gbc.sp());
        EXPECT(0xd3ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3ec));
        EXPECT(0x98, gbc.readMem(0xd3ed));
        // CB 98 0130
        gbc.setState(0x609a, 0x2642, 0x7c90, 0x75eb, 0x66a8, 0x6726, 0x0, 0x0);
        gbc.writeMem(0x609a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x2642, gbc.sp());
        EXPECT(0x609c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0131
        gbc.setState(0xa8b2, 0x5363, 0xa370, 0xa321, 0x65da, 0xe406, 0x0, 0x1);
        gbc.writeMem(0xa8b2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x5363, gbc.sp());
        EXPECT(0xa8b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa8b2));
        EXPECT(0x98, gbc.readMem(0xa8b3));
        // CB 98 0132
        gbc.setState(0xbe1, 0x7553, 0xa7a0, 0x7b37, 0x6f0c, 0x569b, 0x0, 0x1);
        gbc.writeMem(0xbe1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x7553, gbc.sp());
        EXPECT(0xbe3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0133
        gbc.setState(0xd4f, 0x8850, 0x65f0, 0x183d, 0x38f, 0xba36, 0x0, 0x0);
        gbc.writeMem(0xd4f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8850, gbc.sp());
        EXPECT(0xd51, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0135
        gbc.setState(0xc759, 0x45e7, 0x37b0, 0x530, 0xb243, 0xf307, 0x1, 0x1);
        gbc.writeMem(0xc759, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x45e7, gbc.sp());
        EXPECT(0xc75b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc759));
        EXPECT(0x98, gbc.readMem(0xc75a));
        // CB 98 0136
        gbc.setState(0x7604, 0x2765, 0xff70, 0x5966, 0x33d6, 0x284a, 0x1, 0x0);
        gbc.writeMem(0x7604, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x2765, gbc.sp());
        EXPECT(0x7606, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0137
        gbc.setState(0x121d, 0x43a7, 0x120, 0x4f11, 0x3034, 0x5040, 0x1, 0x0);
        gbc.writeMem(0x121d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x43a7, gbc.sp());
        EXPECT(0x121f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0139
        gbc.setState(0x718a, 0x5ec3, 0xb620, 0xbab4, 0x7be9, 0xdde6, 0x0, 0x0);
        gbc.writeMem(0x718a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x5ec3, gbc.sp());
        EXPECT(0x718c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 013A
        gbc.setState(0xcc33, 0xcc92, 0xae90, 0xc239, 0x460e, 0xc2e6, 0x0, 0x1);
        gbc.writeMem(0xcc33, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xcc92, gbc.sp());
        EXPECT(0xcc35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc33));
        EXPECT(0x98, gbc.readMem(0xcc34));
        // CB 98 013B
        gbc.setState(0xc4e5, 0x2416, 0xcc90, 0x7c6b, 0x8587, 0x1f99, 0x1, 0x0);
        gbc.writeMem(0xc4e5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x2416, gbc.sp());
        EXPECT(0xc4e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4e5));
        EXPECT(0x98, gbc.readMem(0xc4e6));
        // CB 98 013C
        gbc.setState(0xbc39, 0xd40a, 0xb400, 0xa105, 0xe01, 0xbd36, 0x1, 0x0);
        gbc.writeMem(0xbc39, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xd40a, gbc.sp());
        EXPECT(0xbc3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbc39));
        EXPECT(0x98, gbc.readMem(0xbc3a));
        // CB 98 013E
        gbc.setState(0x4c45, 0xeb0, 0x2db0, 0x653f, 0xa0fe, 0x308, 0x0, 0x1);
        gbc.writeMem(0x4c45, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xeb0, gbc.sp());
        EXPECT(0x4c47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 013F
        gbc.setState(0x578a, 0xb4fa, 0x7ff0, 0x8c9d, 0xcd2e, 0xfd7a, 0x0, 0x1);
        gbc.writeMem(0x578a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xb4fa, gbc.sp());
        EXPECT(0x578c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0140
        gbc.setState(0x4a9e, 0x9b60, 0xbfe0, 0xdba5, 0xa0eb, 0xd87a, 0x1, 0x0);
        gbc.writeMem(0x4a9e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x9b60, gbc.sp());
        EXPECT(0x4aa0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0141
        gbc.setState(0x27de, 0x7eae, 0x21e0, 0x8f9d, 0xa0ef, 0xb283, 0x1, 0x0);
        gbc.writeMem(0x27de, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x7eae, gbc.sp());
        EXPECT(0x27e0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0142
        gbc.setState(0x9bd6, 0x384e, 0x8430, 0x3a68, 0xec59, 0xa31c, 0x0, 0x1);
        gbc.writeMem(0x9bd6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x384e, gbc.sp());
        EXPECT(0x9bd8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9bd6));
        EXPECT(0x98, gbc.readMem(0x9bd7));
        // CB 98 0143
        gbc.setState(0x4171, 0x8ebf, 0x5cd0, 0x49b9, 0xf2b1, 0x53c, 0x0, 0x1);
        gbc.writeMem(0x4171, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x8ebf, gbc.sp());
        EXPECT(0x4173, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0144
        gbc.setState(0xe2f6, 0xf033, 0x8890, 0xa754, 0xdd1d, 0x302, 0x0, 0x0);
        gbc.writeMem(0xe2f6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xf033, gbc.sp());
        EXPECT(0xe2f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2f6));
        EXPECT(0x98, gbc.readMem(0xe2f7));
        // CB 98 0145
        gbc.setState(0x6e80, 0x7a70, 0x2260, 0x68ec, 0xd74a, 0x5e11, 0x0, 0x0);
        gbc.writeMem(0x6e80, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x7a70, gbc.sp());
        EXPECT(0x6e82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0146
        gbc.setState(0xe2d6, 0x697a, 0xa320, 0x8630, 0x58c9, 0xee2e, 0x1, 0x0);
        gbc.writeMem(0xe2d6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x697a, gbc.sp());
        EXPECT(0xe2d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2d6));
        EXPECT(0x98, gbc.readMem(0xe2d7));
        // CB 98 0147
        gbc.setState(0x2ab2, 0x9fe7, 0x67d0, 0xa8ae, 0x4fc4, 0x608c, 0x0, 0x0);
        gbc.writeMem(0x2ab2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x9fe7, gbc.sp());
        EXPECT(0x2ab4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0148
        gbc.setState(0x6a45, 0xd535, 0x5610, 0x6f2f, 0x10c3, 0x8828, 0x1, 0x0);
        gbc.writeMem(0x6a45, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xd535, gbc.sp());
        EXPECT(0x6a47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0149
        gbc.setState(0x7769, 0x4e75, 0xad30, 0x44ba, 0x574b, 0x558a, 0x0, 0x1);
        gbc.writeMem(0x7769, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x4e75, gbc.sp());
        EXPECT(0x776b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 014A
        gbc.setState(0x2c38, 0x7ac, 0xe530, 0x86a9, 0x3c01, 0x97b3, 0x0, 0x0);
        gbc.writeMem(0x2c38, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x7ac, gbc.sp());
        EXPECT(0x2c3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 014B
        gbc.setState(0x8cd1, 0x40da, 0xd280, 0xaa2a, 0x3bad, 0x4b37, 0x0, 0x1);
        gbc.writeMem(0x8cd1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x40da, gbc.sp());
        EXPECT(0x8cd3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cd1));
        EXPECT(0x98, gbc.readMem(0x8cd2));
        // CB 98 014C
        gbc.setState(0x7c7b, 0xb710, 0xf9a0, 0x9b4c, 0xe097, 0x4d28, 0x0, 0x0);
        gbc.writeMem(0x7c7b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xb710, gbc.sp());
        EXPECT(0x7c7d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 014D
        gbc.setState(0x9f1, 0x581b, 0x3680, 0xa9e8, 0x768d, 0xf760, 0x0, 0x1);
        gbc.writeMem(0x9f1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x581b, gbc.sp());
        EXPECT(0x9f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 014F
        gbc.setState(0xcff1, 0xcd54, 0xf100, 0x9a2a, 0xb528, 0x6425, 0x0, 0x0);
        gbc.writeMem(0xcff1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xcd54, gbc.sp());
        EXPECT(0xcff3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcff1));
        EXPECT(0x98, gbc.readMem(0xcff2));
        // CB 98 0151
        gbc.setState(0xc2e5, 0x30f3, 0x72c0, 0x4739, 0xbc22, 0x583b, 0x1, 0x0);
        gbc.writeMem(0xc2e5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x30f3, gbc.sp());
        EXPECT(0xc2e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc2e5));
        EXPECT(0x98, gbc.readMem(0xc2e6));
        // CB 98 0153
        gbc.setState(0x93e6, 0xbb6c, 0xcca0, 0x18b0, 0x6367, 0x991, 0x1, 0x1);
        gbc.writeMem(0x93e6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xbb6c, gbc.sp());
        EXPECT(0x93e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93e6));
        EXPECT(0x98, gbc.readMem(0x93e7));
        // CB 98 0154
        gbc.setState(0x2bfe, 0x2501, 0xec70, 0x81ba, 0x9fcc, 0x8ed7, 0x1, 0x0);
        gbc.writeMem(0x2bfe, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x2501, gbc.sp());
        EXPECT(0x2c00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0155
        gbc.setState(0x843a, 0x3574, 0xaac0, 0xfdf5, 0x1cee, 0x4317, 0x1, 0x0);
        gbc.writeMem(0x843a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x3574, gbc.sp());
        EXPECT(0x843c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x843a));
        EXPECT(0x98, gbc.readMem(0x843b));
        // CB 98 0156
        gbc.setState(0x54f8, 0x4b85, 0x9820, 0xefad, 0xe018, 0xf061, 0x1, 0x1);
        gbc.writeMem(0x54f8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x4b85, gbc.sp());
        EXPECT(0x54fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0158
        gbc.setState(0x781d, 0xb0c6, 0xdb80, 0xa02d, 0xc5d9, 0xd8f1, 0x0, 0x1);
        gbc.writeMem(0x781d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xb0c6, gbc.sp());
        EXPECT(0x781f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0159
        gbc.setState(0xbfda, 0xa7e7, 0x66f0, 0x552e, 0x6a64, 0x3c80, 0x0, 0x0);
        gbc.writeMem(0xbfda, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xa7e7, gbc.sp());
        EXPECT(0xbfdc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbfda));
        EXPECT(0x98, gbc.readMem(0xbfdb));
        // CB 98 015A
        gbc.setState(0x6022, 0x252a, 0xff50, 0x3e75, 0x59e2, 0x725d, 0x0, 0x0);
        gbc.writeMem(0x6022, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x252a, gbc.sp());
        EXPECT(0x6024, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 015B
        gbc.setState(0x2436, 0x9be4, 0x5fd0, 0x1ceb, 0x9f57, 0x7403, 0x0, 0x0);
        gbc.writeMem(0x2436, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x9be4, gbc.sp());
        EXPECT(0x2438, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 015C
        gbc.setState(0xb034, 0xe207, 0xa0e0, 0x59a0, 0xedc8, 0xe549, 0x0, 0x0);
        gbc.writeMem(0xb034, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xe207, gbc.sp());
        EXPECT(0xb036, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb034));
        EXPECT(0x98, gbc.readMem(0xb035));
        // CB 98 015E
        gbc.setState(0x3766, 0xd190, 0x20a0, 0xb367, 0x8914, 0xa1ac, 0x1, 0x1);
        gbc.writeMem(0x3766, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd190, gbc.sp());
        EXPECT(0x3768, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 015F
        gbc.setState(0xc570, 0x58cd, 0x11a0, 0xea51, 0xe151, 0xaf2c, 0x0, 0x1);
        gbc.writeMem(0xc570, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x58cd, gbc.sp());
        EXPECT(0xc572, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc570));
        EXPECT(0x98, gbc.readMem(0xc571));
        // CB 98 0160
        gbc.setState(0x2dab, 0xdd49, 0x790, 0xb495, 0xcd4f, 0x907f, 0x0, 0x1);
        gbc.writeMem(0x2dab, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0xdd49, gbc.sp());
        EXPECT(0x2dad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0161
        gbc.setState(0xdffc, 0xd3ba, 0x38e0, 0x686a, 0x9a87, 0x7ee7, 0x0, 0x1);
        gbc.writeMem(0xdffc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xd3ba, gbc.sp());
        EXPECT(0xdffe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdffc));
        EXPECT(0x98, gbc.readMem(0xdffd));
        // CB 98 0162
        gbc.setState(0x499b, 0xb940, 0xd4f0, 0x1a72, 0x377e, 0xe8f7, 0x0, 0x0);
        gbc.writeMem(0x499b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xb940, gbc.sp());
        EXPECT(0x499d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0163
        gbc.setState(0x4d85, 0xe7b, 0x49a0, 0x885e, 0xf307, 0xf3fa, 0x1, 0x0);
        gbc.writeMem(0x4d85, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xe7b, gbc.sp());
        EXPECT(0x4d87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0164
        gbc.setState(0xa91f, 0x9d7a, 0x8c70, 0x40a5, 0xa40c, 0x44a0, 0x1, 0x1);
        gbc.writeMem(0xa91f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x9d7a, gbc.sp());
        EXPECT(0xa921, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa91f));
        EXPECT(0x98, gbc.readMem(0xa920));
        // CB 98 0165
        gbc.setState(0xd1ce, 0xe83b, 0x5000, 0x8a4a, 0xcd51, 0xa05d, 0x1, 0x1);
        gbc.writeMem(0xd1ce, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xe83b, gbc.sp());
        EXPECT(0xd1d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1ce));
        EXPECT(0x98, gbc.readMem(0xd1cf));
        // CB 98 0167
        gbc.setState(0x2514, 0xb39e, 0xc660, 0x7c7, 0x2c45, 0x3790, 0x0, 0x0);
        gbc.writeMem(0x2514, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xb39e, gbc.sp());
        EXPECT(0x2516, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0168
        gbc.setState(0x8787, 0xd6ee, 0x89e0, 0x790c, 0x6fa4, 0xc1dd, 0x1, 0x0);
        gbc.writeMem(0x8787, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xd6ee, gbc.sp());
        EXPECT(0x8789, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8787));
        EXPECT(0x98, gbc.readMem(0x8788));
        // CB 98 0169
        gbc.setState(0x6400, 0x18c2, 0x3830, 0xc162, 0xafc4, 0xe171, 0x1, 0x0);
        gbc.writeMem(0x6400, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x18c2, gbc.sp());
        EXPECT(0x6402, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 016A
        gbc.setState(0x927, 0xca2e, 0x3740, 0x9f18, 0xcdd, 0xb7b2, 0x1, 0x1);
        gbc.writeMem(0x927, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xca2e, gbc.sp());
        EXPECT(0x929, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 016B
        gbc.setState(0x1e29, 0x1ffa, 0x8e10, 0xeb7c, 0x66f3, 0xc1a9, 0x1, 0x0);
        gbc.writeMem(0x1e29, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x1ffa, gbc.sp());
        EXPECT(0x1e2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 016C
        gbc.setState(0x539, 0xdd4f, 0x61d0, 0xe737, 0x4909, 0xd6f4, 0x0, 0x0);
        gbc.writeMem(0x539, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xdd4f, gbc.sp());
        EXPECT(0x53b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 016D
        gbc.setState(0x2399, 0xdc5e, 0x88e0, 0x899, 0xf36e, 0x6312, 0x0, 0x0);
        gbc.writeMem(0x2399, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xdc5e, gbc.sp());
        EXPECT(0x239b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 016E
        gbc.setState(0x2991, 0x1b2f, 0x8480, 0xfa2c, 0xd87, 0xce87, 0x1, 0x1);
        gbc.writeMem(0x2991, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x1b2f, gbc.sp());
        EXPECT(0x2993, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 016F
        gbc.setState(0x1375, 0xecc4, 0xcdb0, 0x77c9, 0x30fe, 0x789d, 0x0, 0x1);
        gbc.writeMem(0x1375, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xecc4, gbc.sp());
        EXPECT(0x1377, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0170
        gbc.setState(0xeb8d, 0x1776, 0xc8b0, 0xdd01, 0xcc0d, 0xb88f, 0x0, 0x0);
        gbc.writeMem(0xeb8d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x1776, gbc.sp());
        EXPECT(0xeb8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb8d));
        EXPECT(0x98, gbc.readMem(0xeb8e));
        // CB 98 0171
        gbc.setState(0x65c8, 0xcb1b, 0x310, 0x1562, 0xbe1e, 0x9887, 0x1, 0x1);
        gbc.writeMem(0x65c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xcb1b, gbc.sp());
        EXPECT(0x65ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0172
        gbc.setState(0x7808, 0xcf7, 0xf170, 0xf7e8, 0x6c5, 0x4388, 0x0, 0x0);
        gbc.writeMem(0x7808, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xcf7, gbc.sp());
        EXPECT(0x780a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0173
        gbc.setState(0x939a, 0xcf0d, 0x7dc0, 0x4e88, 0xbfe6, 0x86dc, 0x1, 0x0);
        gbc.writeMem(0x939a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xcf0d, gbc.sp());
        EXPECT(0x939c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x939a));
        EXPECT(0x98, gbc.readMem(0x939b));
        // CB 98 0174
        gbc.setState(0xccb4, 0x138c, 0x4ce0, 0x8a9a, 0x83a8, 0x99bd, 0x0, 0x0);
        gbc.writeMem(0xccb4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x138c, gbc.sp());
        EXPECT(0xccb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccb4));
        EXPECT(0x98, gbc.readMem(0xccb5));
        // CB 98 0175
        gbc.setState(0x547e, 0x61ce, 0x3dd0, 0xd95f, 0xa6b3, 0x936, 0x1, 0x1);
        gbc.writeMem(0x547e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x61ce, gbc.sp());
        EXPECT(0x5480, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0176
        gbc.setState(0x6de5, 0x4fb9, 0xc250, 0xff01, 0xb6e0, 0x6035, 0x1, 0x1);
        gbc.writeMem(0x6de5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x4fb9, gbc.sp());
        EXPECT(0x6de7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0177
        gbc.setState(0x7582, 0xd7c9, 0x5160, 0xb3d1, 0xc0a2, 0xfbf1, 0x1, 0x0);
        gbc.writeMem(0x7582, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0xd7c9, gbc.sp());
        EXPECT(0x7584, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0178
        gbc.setState(0xb014, 0x4fdf, 0xdc80, 0xca4a, 0x2d0d, 0x899e, 0x0, 0x1);
        gbc.writeMem(0xb014, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x4fdf, gbc.sp());
        EXPECT(0xb016, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb014));
        EXPECT(0x98, gbc.readMem(0xb015));
        // CB 98 0179
        gbc.setState(0x6db2, 0x71ea, 0x8580, 0x2788, 0x24a9, 0x2a, 0x0, 0x1);
        gbc.writeMem(0x6db2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x71ea, gbc.sp());
        EXPECT(0x6db4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 017A
        gbc.setState(0x7258, 0xe4a, 0xe7b0, 0x9d36, 0x92b5, 0xe617, 0x0, 0x0);
        gbc.writeMem(0x7258, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xe4a, gbc.sp());
        EXPECT(0x725a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 017B
        gbc.setState(0xa72, 0x7793, 0x8e80, 0xef00, 0xd2d9, 0xbb59, 0x0, 0x0);
        gbc.writeMem(0xa72, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x7793, gbc.sp());
        EXPECT(0xa74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 017C
        gbc.setState(0x9b4c, 0x3459, 0x13a0, 0x6269, 0xc540, 0x1e96, 0x1, 0x0);
        gbc.writeMem(0x9b4c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x3459, gbc.sp());
        EXPECT(0x9b4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9b4c));
        EXPECT(0x98, gbc.readMem(0x9b4d));
        // CB 98 017D
        gbc.setState(0x255f, 0x58cf, 0x7240, 0x722, 0xbb9b, 0x1a37, 0x1, 0x0);
        gbc.writeMem(0x255f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x58cf, gbc.sp());
        EXPECT(0x2561, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 017E
        gbc.setState(0xce8b, 0x289f, 0x5cf0, 0xccb0, 0x901b, 0x3406, 0x0, 0x0);
        gbc.writeMem(0xce8b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x289f, gbc.sp());
        EXPECT(0xce8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce8b));
        EXPECT(0x98, gbc.readMem(0xce8c));
        // CB 98 017F
        gbc.setState(0x6428, 0xfa7c, 0x52d0, 0xa05f, 0x81bb, 0x6f5a, 0x1, 0x0);
        gbc.writeMem(0x6428, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xfa7c, gbc.sp());
        EXPECT(0x642a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0180
        gbc.setState(0x6c59, 0x994a, 0xb340, 0xdd7a, 0xe461, 0x7b86, 0x0, 0x0);
        gbc.writeMem(0x6c59, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x994a, gbc.sp());
        EXPECT(0x6c5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0181
        gbc.setState(0xc928, 0x25d2, 0xc1a0, 0xce5b, 0x9e1a, 0x77a5, 0x0, 0x1);
        gbc.writeMem(0xc928, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x25d2, gbc.sp());
        EXPECT(0xc92a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc928));
        EXPECT(0x98, gbc.readMem(0xc929));
        // CB 98 0182
        gbc.setState(0x89e7, 0x47b4, 0x11a0, 0xa56a, 0x8774, 0xf203, 0x1, 0x0);
        gbc.writeMem(0x89e7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x47b4, gbc.sp());
        EXPECT(0x89e9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x89e7));
        EXPECT(0x98, gbc.readMem(0x89e8));
        // CB 98 0183
        gbc.setState(0x30c2, 0x3ff0, 0x7e30, 0xe9e3, 0xe1b7, 0x7e06, 0x0, 0x0);
        gbc.writeMem(0x30c2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x3ff0, gbc.sp());
        EXPECT(0x30c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0184
        gbc.setState(0x1bee, 0x2bb2, 0x4d30, 0xeccc, 0x7cad, 0x985f, 0x1, 0x1);
        gbc.writeMem(0x1bee, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x2bb2, gbc.sp());
        EXPECT(0x1bf0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0185
        gbc.setState(0xd6f1, 0xd480, 0x8400, 0x7e4, 0xcbbf, 0x5ce0, 0x0, 0x0);
        gbc.writeMem(0xd6f1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xd480, gbc.sp());
        EXPECT(0xd6f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6f1));
        EXPECT(0x98, gbc.readMem(0xd6f2));
        // CB 98 0186
        gbc.setState(0xc688, 0x1ffb, 0x4550, 0x996d, 0x17ee, 0x48ca, 0x1, 0x0);
        gbc.writeMem(0xc688, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x1ffb, gbc.sp());
        EXPECT(0xc68a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc688));
        EXPECT(0x98, gbc.readMem(0xc689));
        // CB 98 0187
        gbc.setState(0xb3ef, 0x22f7, 0xc160, 0xe12f, 0x7d4d, 0x8010, 0x1, 0x0);
        gbc.writeMem(0xb3ef, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x22f7, gbc.sp());
        EXPECT(0xb3f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb3ef));
        EXPECT(0x98, gbc.readMem(0xb3f0));
        // CB 98 0188
        gbc.setState(0xd2c0, 0x7061, 0x2470, 0x603c, 0x55e9, 0x7784, 0x1, 0x1);
        gbc.writeMem(0xd2c0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x7061, gbc.sp());
        EXPECT(0xd2c2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2c0));
        EXPECT(0x98, gbc.readMem(0xd2c1));
        // CB 98 0189
        gbc.setState(0xc4a4, 0xfcdd, 0xfda0, 0x461e, 0x66d0, 0xe848, 0x1, 0x1);
        gbc.writeMem(0xc4a4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xfcdd, gbc.sp());
        EXPECT(0xc4a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4a4));
        EXPECT(0x98, gbc.readMem(0xc4a5));
        // CB 98 018A
        gbc.setState(0x15d9, 0x7b19, 0x4170, 0x3e0b, 0xc295, 0x3910, 0x1, 0x1);
        gbc.writeMem(0x15d9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x7b19, gbc.sp());
        EXPECT(0x15db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 018B
        gbc.setState(0xdc9d, 0x55a1, 0x5e20, 0xe545, 0xa40d, 0x144c, 0x1, 0x0);
        gbc.writeMem(0xdc9d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x55a1, gbc.sp());
        EXPECT(0xdc9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc9d));
        EXPECT(0x98, gbc.readMem(0xdc9e));
        // CB 98 018C
        gbc.setState(0x3c7f, 0xee9e, 0x4cc0, 0x5d6e, 0x17df, 0x208c, 0x0, 0x0);
        gbc.writeMem(0x3c7f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0xee9e, gbc.sp());
        EXPECT(0x3c81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 018D
        gbc.setState(0xdcf2, 0xd8c7, 0xc7c0, 0x4a4d, 0x75f3, 0xedf9, 0x1, 0x0);
        gbc.writeMem(0xdcf2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xd8c7, gbc.sp());
        EXPECT(0xdcf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdcf2));
        EXPECT(0x98, gbc.readMem(0xdcf3));
        // CB 98 018E
        gbc.setState(0x8150, 0xc4bc, 0xfc70, 0xd4e3, 0x223a, 0x7d82, 0x1, 0x1);
        gbc.writeMem(0x8150, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xc4bc, gbc.sp());
        EXPECT(0x8152, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8150));
        EXPECT(0x98, gbc.readMem(0x8151));
        // CB 98 018F
        gbc.setState(0x237e, 0x7ca1, 0x2450, 0x2378, 0xaf2b, 0x1406, 0x1, 0x0);
        gbc.writeMem(0x237e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x7ca1, gbc.sp());
        EXPECT(0x2380, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0190
        gbc.setState(0x92fb, 0xb175, 0xaaa0, 0x12cc, 0xf155, 0x6cbb, 0x0, 0x1);
        gbc.writeMem(0x92fb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xb175, gbc.sp());
        EXPECT(0x92fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x92fb));
        EXPECT(0x98, gbc.readMem(0x92fc));
        // CB 98 0191
        gbc.setState(0x5e26, 0x625, 0x9070, 0xff80, 0x91ef, 0x4bbf, 0x0, 0x0);
        gbc.writeMem(0x5e26, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x625, gbc.sp());
        EXPECT(0x5e28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0192
        gbc.setState(0x8ed4, 0xcd6c, 0x3bb0, 0xfc89, 0x2fe0, 0x751e, 0x1, 0x0);
        gbc.writeMem(0x8ed4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xcd6c, gbc.sp());
        EXPECT(0x8ed6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ed4));
        EXPECT(0x98, gbc.readMem(0x8ed5));
        // CB 98 0193
        gbc.setState(0x6b6, 0x66ca, 0x8e80, 0xd487, 0xf8e5, 0x1baf, 0x0, 0x0);
        gbc.writeMem(0x6b6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x66ca, gbc.sp());
        EXPECT(0x6b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0194
        gbc.setState(0x800e, 0x8b91, 0x51b0, 0x13bf, 0xbd93, 0xa65f, 0x1, 0x0);
        gbc.writeMem(0x800e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x8b91, gbc.sp());
        EXPECT(0x8010, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x800e));
        EXPECT(0x98, gbc.readMem(0x800f));
        // CB 98 0195
        gbc.setState(0x398d, 0xd531, 0x5670, 0xd5a5, 0x4d98, 0xa8cb, 0x0, 0x0);
        gbc.writeMem(0x398d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xd531, gbc.sp());
        EXPECT(0x398f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0196
        gbc.setState(0x4fed, 0xbd59, 0x92a0, 0x80c5, 0xf2f9, 0xf11b, 0x1, 0x0);
        gbc.writeMem(0x4fed, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xbd59, gbc.sp());
        EXPECT(0x4fef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0199
        gbc.setState(0x96d8, 0x5eea, 0xd260, 0xe16c, 0x6a3, 0x3b85, 0x1, 0x0);
        gbc.writeMem(0x96d8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5eea, gbc.sp());
        EXPECT(0x96da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96d8));
        EXPECT(0x98, gbc.readMem(0x96d9));
        // CB 98 019A
        gbc.setState(0xa789, 0x94f4, 0x9f80, 0x17ff, 0xe1b4, 0x99a4, 0x0, 0x0);
        gbc.writeMem(0xa789, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x94f4, gbc.sp());
        EXPECT(0xa78b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa789));
        EXPECT(0x98, gbc.readMem(0xa78a));
        // CB 98 019B
        gbc.setState(0xbbd4, 0xad60, 0x6500, 0xc1e, 0x5075, 0xb615, 0x1, 0x1);
        gbc.writeMem(0xbbd4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xad60, gbc.sp());
        EXPECT(0xbbd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbbd4));
        EXPECT(0x98, gbc.readMem(0xbbd5));
        // CB 98 019C
        gbc.setState(0xddae, 0x489c, 0xaec0, 0xf15d, 0x957c, 0xb816, 0x0, 0x1);
        gbc.writeMem(0xddae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x489c, gbc.sp());
        EXPECT(0xddb0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddae));
        EXPECT(0x98, gbc.readMem(0xddaf));
        // CB 98 019D
        gbc.setState(0x9cc4, 0x10f2, 0xa700, 0x252b, 0xedc2, 0x3079, 0x1, 0x1);
        gbc.writeMem(0x9cc4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0x10f2, gbc.sp());
        EXPECT(0x9cc6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cc4));
        EXPECT(0x98, gbc.readMem(0x9cc5));
        // CB 98 019E
        gbc.setState(0xc8a6, 0x1f21, 0xe270, 0xf6a, 0x2d, 0xba4d, 0x1, 0x1);
        gbc.writeMem(0xc8a6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x1f21, gbc.sp());
        EXPECT(0xc8a8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc8a6));
        EXPECT(0x98, gbc.readMem(0xc8a7));
        // CB 98 019F
        gbc.setState(0x14c7, 0x689f, 0x6600, 0x8f9c, 0x702d, 0x1be2, 0x1, 0x1);
        gbc.writeMem(0x14c7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x689f, gbc.sp());
        EXPECT(0x14c9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01A0
        gbc.setState(0x70cd, 0xa969, 0x6710, 0xab2e, 0x8be1, 0xc461, 0x0, 0x0);
        gbc.writeMem(0x70cd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xa969, gbc.sp());
        EXPECT(0x70cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01A2
        gbc.setState(0x99f1, 0x71b2, 0x9e00, 0xd2d4, 0x59c4, 0xbb36, 0x1, 0x1);
        gbc.writeMem(0x99f1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x71b2, gbc.sp());
        EXPECT(0x99f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99f1));
        EXPECT(0x98, gbc.readMem(0x99f2));
        // CB 98 01A3
        gbc.setState(0xc113, 0xee57, 0x8830, 0x121, 0x137f, 0x7ce6, 0x0, 0x0);
        gbc.writeMem(0xc113, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xee57, gbc.sp());
        EXPECT(0xc115, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc113));
        EXPECT(0x98, gbc.readMem(0xc114));
        // CB 98 01A4
        gbc.setState(0x93bc, 0xe154, 0xa800, 0x6c84, 0x239a, 0xe315, 0x0, 0x0);
        gbc.writeMem(0x93bc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xe154, gbc.sp());
        EXPECT(0x93be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93bc));
        EXPECT(0x98, gbc.readMem(0x93bd));
        // CB 98 01A5
        gbc.setState(0x6d54, 0xfa6, 0xf1a0, 0x1bce, 0xf0e7, 0x9ce9, 0x0, 0x1);
        gbc.writeMem(0x6d54, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xfa6, gbc.sp());
        EXPECT(0x6d56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01A6
        gbc.setState(0x3bfd, 0xa63, 0x1f80, 0x1fea, 0x6053, 0xb91f, 0x0, 0x1);
        gbc.writeMem(0x3bfd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0xa63, gbc.sp());
        EXPECT(0x3bff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01A7
        gbc.setState(0x1339, 0x3867, 0x9410, 0x763a, 0xf90a, 0xf93c, 0x1, 0x0);
        gbc.writeMem(0x1339, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x3867, gbc.sp());
        EXPECT(0x133b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01A8
        gbc.setState(0xdc3a, 0x7b7b, 0x9950, 0x4776, 0x433c, 0xa47f, 0x0, 0x0);
        gbc.writeMem(0xdc3a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x7b7b, gbc.sp());
        EXPECT(0xdc3c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc3a));
        EXPECT(0x98, gbc.readMem(0xdc3b));
        // CB 98 01A9
        gbc.setState(0x6282, 0x7c0, 0xd280, 0x9ff7, 0x1e33, 0x3c6d, 0x0, 0x1);
        gbc.writeMem(0x6282, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x7c0, gbc.sp());
        EXPECT(0x6284, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01AA
        gbc.setState(0x2d88, 0xbb80, 0x4ca0, 0x42ad, 0xdfee, 0x8b3f, 0x0, 0x1);
        gbc.writeMem(0x2d88, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xbb80, gbc.sp());
        EXPECT(0x2d8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01AB
        gbc.setState(0x560d, 0x63a, 0xa650, 0x2268, 0x53d0, 0x7146, 0x0, 0x1);
        gbc.writeMem(0x560d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x63a, gbc.sp());
        EXPECT(0x560f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01AC
        gbc.setState(0xfb6, 0x3ab0, 0xf2f0, 0xd489, 0x7bad, 0x795f, 0x0, 0x1);
        gbc.writeMem(0xfb6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x3ab0, gbc.sp());
        EXPECT(0xfb8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01AD
        gbc.setState(0xac5c, 0x9be, 0xf730, 0xfef3, 0x68aa, 0xab61, 0x1, 0x1);
        gbc.writeMem(0xac5c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x9be, gbc.sp());
        EXPECT(0xac5e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac5c));
        EXPECT(0x98, gbc.readMem(0xac5d));
        // CB 98 01AE
        gbc.setState(0x8cc9, 0x3727, 0x48c0, 0x3a7, 0x8a78, 0x27dc, 0x1, 0x0);
        gbc.writeMem(0x8cc9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x3727, gbc.sp());
        EXPECT(0x8ccb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cc9));
        EXPECT(0x98, gbc.readMem(0x8cca));
        // CB 98 01AF
        gbc.setState(0xa852, 0x4145, 0xcb50, 0x7b2b, 0xbeac, 0x22f3, 0x0, 0x1);
        gbc.writeMem(0xa852, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4145, gbc.sp());
        EXPECT(0xa854, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa852));
        EXPECT(0x98, gbc.readMem(0xa853));
        // CB 98 01B0
        gbc.setState(0x12, 0xfdf3, 0x7f0, 0x1399, 0x20c2, 0xba4f, 0x0, 0x0);
        gbc.writeMem(0x12, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xfdf3, gbc.sp());
        EXPECT(0x14, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01B1
        gbc.setState(0x7735, 0xd80e, 0x63e0, 0xcf33, 0xd7f7, 0x10c8, 0x1, 0x0);
        gbc.writeMem(0x7735, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xd80e, gbc.sp());
        EXPECT(0x7737, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01B2
        gbc.setState(0x9137, 0xde67, 0xc350, 0xe6f0, 0xe33e, 0x9c48, 0x1, 0x0);
        gbc.writeMem(0x9137, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xde67, gbc.sp());
        EXPECT(0x9139, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9137));
        EXPECT(0x98, gbc.readMem(0x9138));
        // CB 98 01B3
        gbc.setState(0xac99, 0x760f, 0x9350, 0xdb0c, 0x33fe, 0x1da8, 0x0, 0x1);
        gbc.writeMem(0xac99, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x760f, gbc.sp());
        EXPECT(0xac9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xac99));
        EXPECT(0x98, gbc.readMem(0xac9a));
        // CB 98 01B4
        gbc.setState(0x745f, 0xdbe8, 0x9ca0, 0x5e30, 0xf8b7, 0xcaec, 0x1, 0x1);
        gbc.writeMem(0x745f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xdbe8, gbc.sp());
        EXPECT(0x7461, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01B5
        gbc.setState(0x3a57, 0x2ba8, 0x70c0, 0x165a, 0x867c, 0x4803, 0x0, 0x0);
        gbc.writeMem(0x3a57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2ba8, gbc.sp());
        EXPECT(0x3a59, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01B6
        gbc.setState(0x611d, 0x336, 0xdc50, 0xb3db, 0x4bc8, 0x6236, 0x0, 0x0);
        gbc.writeMem(0x611d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x336, gbc.sp());
        EXPECT(0x611f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01B7
        gbc.setState(0xab45, 0xab52, 0x8740, 0x6926, 0x683c, 0x3865, 0x1, 0x1);
        gbc.writeMem(0xab45, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xab52, gbc.sp());
        EXPECT(0xab47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab45));
        EXPECT(0x98, gbc.readMem(0xab46));
        // CB 98 01B8
        gbc.setState(0x4c0, 0x10d4, 0x19e0, 0x69ec, 0x6103, 0x6982, 0x0, 0x1);
        gbc.writeMem(0x4c0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x10d4, gbc.sp());
        EXPECT(0x4c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01B9
        gbc.setState(0x7ebf, 0x76e7, 0x6bb0, 0x3a65, 0xb619, 0xe10a, 0x0, 0x0);
        gbc.writeMem(0x7ebf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x76e7, gbc.sp());
        EXPECT(0x7ec1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01BA
        gbc.setState(0x6ae4, 0xb3e7, 0xd2b0, 0x538d, 0x8f62, 0xb89d, 0x0, 0x1);
        gbc.writeMem(0x6ae4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xb3e7, gbc.sp());
        EXPECT(0x6ae6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01BB
        gbc.setState(0x2f57, 0x193e, 0x3070, 0x35a, 0x22f4, 0x9ffd, 0x1, 0x1);
        gbc.writeMem(0x2f57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x193e, gbc.sp());
        EXPECT(0x2f59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01BC
        gbc.setState(0x2eaa, 0xb2fe, 0x9040, 0xc9b2, 0xb2ab, 0xb16a, 0x1, 0x1);
        gbc.writeMem(0x2eaa, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xb2fe, gbc.sp());
        EXPECT(0x2eac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01BD
        gbc.setState(0xb33f, 0x465a, 0xf060, 0x221f, 0x533b, 0x7b76, 0x1, 0x1);
        gbc.writeMem(0xb33f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x465a, gbc.sp());
        EXPECT(0xb341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb33f));
        EXPECT(0x98, gbc.readMem(0xb340));
        // CB 98 01BE
        gbc.setState(0x3602, 0x9a82, 0xbea0, 0x25f8, 0xb44d, 0xb490, 0x0, 0x1);
        gbc.writeMem(0x3602, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x9a82, gbc.sp());
        EXPECT(0x3604, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01BF
        gbc.setState(0xcc87, 0x401b, 0x5c00, 0xb9a3, 0x77fd, 0x6bc2, 0x0, 0x1);
        gbc.writeMem(0xcc87, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0x401b, gbc.sp());
        EXPECT(0xcc89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc87));
        EXPECT(0x98, gbc.readMem(0xcc88));
        // CB 98 01C0
        gbc.setState(0xb5b6, 0xc5b5, 0x55c0, 0xf3f8, 0x9732, 0x589b, 0x1, 0x1);
        gbc.writeMem(0xb5b6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xc5b5, gbc.sp());
        EXPECT(0xb5b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5b6));
        EXPECT(0x98, gbc.readMem(0xb5b7));
        // CB 98 01C1
        gbc.setState(0x1cc0, 0x9897, 0x6820, 0x9f7f, 0xd9ee, 0xf7e8, 0x1, 0x1);
        gbc.writeMem(0x1cc0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0x9897, gbc.sp());
        EXPECT(0x1cc2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01C2
        gbc.setState(0xa19d, 0xdf41, 0x6b40, 0xb9d4, 0x92c4, 0x2e6e, 0x0, 0x0);
        gbc.writeMem(0xa19d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xdf41, gbc.sp());
        EXPECT(0xa19f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa19d));
        EXPECT(0x98, gbc.readMem(0xa19e));
        // CB 98 01C3
        gbc.setState(0x4ab2, 0xc6c8, 0x82b0, 0x8d4e, 0x77f5, 0x8c71, 0x0, 0x1);
        gbc.writeMem(0x4ab2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xc6c8, gbc.sp());
        EXPECT(0x4ab4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01C4
        gbc.setState(0xef01, 0xd24f, 0x75e0, 0x542c, 0xefb0, 0x2249, 0x1, 0x0);
        gbc.writeMem(0xef01, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0xd24f, gbc.sp());
        EXPECT(0xef03, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef01));
        EXPECT(0x98, gbc.readMem(0xef02));
        // CB 98 01C5
        gbc.setState(0xcec3, 0x2d3e, 0x5990, 0xdee9, 0xc3cf, 0xd41e, 0x1, 0x0);
        gbc.writeMem(0xcec3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x2d3e, gbc.sp());
        EXPECT(0xcec5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcec3));
        EXPECT(0x98, gbc.readMem(0xcec4));
        // CB 98 01C6
        gbc.setState(0x8800, 0x2cc3, 0xe6f0, 0xa87, 0xecde, 0x1fb4, 0x1, 0x1);
        gbc.writeMem(0x8800, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x2cc3, gbc.sp());
        EXPECT(0x8802, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8800));
        EXPECT(0x98, gbc.readMem(0x8801));
        // CB 98 01C7
        gbc.setState(0x74b5, 0xdeb8, 0x16e0, 0xe1d7, 0x4cf4, 0xdaa7, 0x0, 0x0);
        gbc.writeMem(0x74b5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xdeb8, gbc.sp());
        EXPECT(0x74b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01C8
        gbc.setState(0x4e1a, 0x82a0, 0x780, 0xf61, 0xbfd0, 0x3d0c, 0x1, 0x0);
        gbc.writeMem(0x4e1a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x82a0, gbc.sp());
        EXPECT(0x4e1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01CA
        gbc.setState(0xef2d, 0x6e92, 0xa310, 0xb13c, 0x75f6, 0x382e, 0x0, 0x1);
        gbc.writeMem(0xef2d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x6e92, gbc.sp());
        EXPECT(0xef2f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef2d));
        EXPECT(0x98, gbc.readMem(0xef2e));
        // CB 98 01CB
        gbc.setState(0x62f3, 0x638b, 0xbc30, 0x359a, 0x39f4, 0x3957, 0x0, 0x0);
        gbc.writeMem(0x62f3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x638b, gbc.sp());
        EXPECT(0x62f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01CD
        gbc.setState(0xb01c, 0xbe17, 0xfa30, 0xa6a8, 0x3da1, 0x4359, 0x0, 0x1);
        gbc.writeMem(0xb01c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xbe17, gbc.sp());
        EXPECT(0xb01e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb01c));
        EXPECT(0x98, gbc.readMem(0xb01d));
        // CB 98 01CE
        gbc.setState(0x3d54, 0xbe3e, 0xe7f0, 0xbf56, 0x523c, 0xefe2, 0x0, 0x0);
        gbc.writeMem(0x3d54, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xbe3e, gbc.sp());
        EXPECT(0x3d56, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01CF
        gbc.setState(0x712a, 0x287b, 0xe270, 0x1e29, 0x8fa1, 0x2c37, 0x0, 0x0);
        gbc.writeMem(0x712a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x287b, gbc.sp());
        EXPECT(0x712c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01D0
        gbc.setState(0x4522, 0x27de, 0xf5c0, 0xe89c, 0x4ae8, 0x19c6, 0x1, 0x1);
        gbc.writeMem(0x4522, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x27de, gbc.sp());
        EXPECT(0x4524, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01D1
        gbc.setState(0x6d9, 0x8304, 0xb6f0, 0x2224, 0x8d5f, 0x55ec, 0x1, 0x1);
        gbc.writeMem(0x6d9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x8304, gbc.sp());
        EXPECT(0x6db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01D2
        gbc.setState(0x2ace, 0xd081, 0x4500, 0x5c44, 0x6537, 0x4d28, 0x0, 0x1);
        gbc.writeMem(0x2ace, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0xd081, gbc.sp());
        EXPECT(0x2ad0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01D3
        gbc.setState(0xddcd, 0xf9c4, 0xf310, 0x63e8, 0x5bf4, 0xbefb, 0x1, 0x0);
        gbc.writeMem(0xddcd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xf9c4, gbc.sp());
        EXPECT(0xddcf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xddcd));
        EXPECT(0x98, gbc.readMem(0xddce));
        // CB 98 01D4
        gbc.setState(0x2ede, 0x9647, 0x9a70, 0x5fe2, 0xb679, 0xab5, 0x1, 0x1);
        gbc.writeMem(0x2ede, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x9647, gbc.sp());
        EXPECT(0x2ee0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01D5
        gbc.setState(0xb45d, 0x281b, 0xb510, 0x15d8, 0x1830, 0x244d, 0x0, 0x0);
        gbc.writeMem(0xb45d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x281b, gbc.sp());
        EXPECT(0xb45f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb45d));
        EXPECT(0x98, gbc.readMem(0xb45e));
        // CB 98 01D6
        gbc.setState(0x4505, 0xe327, 0x2250, 0x2a4e, 0xcdcb, 0x9d8e, 0x0, 0x1);
        gbc.writeMem(0x4505, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xe327, gbc.sp());
        EXPECT(0x4507, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01D7
        gbc.setState(0x3345, 0x752d, 0x43a0, 0xc824, 0x15dc, 0x1094, 0x1, 0x1);
        gbc.writeMem(0x3345, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x752d, gbc.sp());
        EXPECT(0x3347, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01D8
        gbc.setState(0xaf07, 0x45bc, 0xfe40, 0x7009, 0xc129, 0x7ed6, 0x1, 0x1);
        gbc.writeMem(0xaf07, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x45bc, gbc.sp());
        EXPECT(0xaf09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf07));
        EXPECT(0x98, gbc.readMem(0xaf08));
        // CB 98 01D9
        gbc.setState(0x9dd3, 0x1d20, 0xea00, 0xe7ce, 0x1101, 0x8166, 0x0, 0x0);
        gbc.writeMem(0x9dd3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x1d20, gbc.sp());
        EXPECT(0x9dd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dd3));
        EXPECT(0x98, gbc.readMem(0x9dd4));
        // CB 98 01DA
        gbc.setState(0xc7f7, 0x87f4, 0xfc0, 0xaec0, 0x6a70, 0xc8c9, 0x0, 0x1);
        gbc.writeMem(0xc7f7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x87f4, gbc.sp());
        EXPECT(0xc7f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc7f7));
        EXPECT(0x98, gbc.readMem(0xc7f8));
        // CB 98 01DB
        gbc.setState(0xb787, 0x8ae8, 0x39b0, 0x30ee, 0x3c19, 0x9282, 0x1, 0x0);
        gbc.writeMem(0xb787, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0x8ae8, gbc.sp());
        EXPECT(0xb789, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb787));
        EXPECT(0x98, gbc.readMem(0xb788));
        // CB 98 01DC
        gbc.setState(0x4b67, 0xb0d9, 0xbd10, 0x65b1, 0x6a2e, 0x2d19, 0x0, 0x1);
        gbc.writeMem(0x4b67, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xb0d9, gbc.sp());
        EXPECT(0x4b69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01DD
        gbc.setState(0x5079, 0x6f1c, 0xb1c0, 0xaea7, 0xe890, 0x304e, 0x0, 0x1);
        gbc.writeMem(0x5079, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x6f1c, gbc.sp());
        EXPECT(0x507b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01DE
        gbc.setState(0x13ff, 0xc6ae, 0x4550, 0x48b9, 0xba2d, 0x3379, 0x1, 0x1);
        gbc.writeMem(0x13ff, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xc6ae, gbc.sp());
        EXPECT(0x1401, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01DF
        gbc.setState(0x53d1, 0x688c, 0x2340, 0x317a, 0xf845, 0x7ad7, 0x1, 0x1);
        gbc.writeMem(0x53d1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x688c, gbc.sp());
        EXPECT(0x53d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01E0
        gbc.setState(0xb1aa, 0x1176, 0x4630, 0x206e, 0x5d84, 0x1c97, 0x1, 0x1);
        gbc.writeMem(0xb1aa, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1176, gbc.sp());
        EXPECT(0xb1ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb1aa));
        EXPECT(0x98, gbc.readMem(0xb1ab));
        // CB 98 01E1
        gbc.setState(0x6428, 0x3a93, 0x2060, 0xeb22, 0xce7, 0x95f2, 0x0, 0x0);
        gbc.writeMem(0x6428, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x3a93, gbc.sp());
        EXPECT(0x642a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01E2
        gbc.setState(0x7538, 0x492e, 0x8960, 0xd80d, 0xdd84, 0xe80c, 0x0, 0x0);
        gbc.writeMem(0x7538, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xdd, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x492e, gbc.sp());
        EXPECT(0x753a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01E3
        gbc.setState(0x69b0, 0x15ec, 0x18e0, 0x6429, 0x6310, 0x6790, 0x0, 0x1);
        gbc.writeMem(0x69b0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x15ec, gbc.sp());
        EXPECT(0x69b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01E4
        gbc.setState(0x8463, 0x89e3, 0x9d00, 0xdebb, 0x709f, 0x4b24, 0x0, 0x1);
        gbc.writeMem(0x8463, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x89e3, gbc.sp());
        EXPECT(0x8465, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8463));
        EXPECT(0x98, gbc.readMem(0x8464));
        // CB 98 01E5
        gbc.setState(0x5fcb, 0xeb2, 0x7840, 0x68c5, 0xde9e, 0x33a7, 0x0, 0x1);
        gbc.writeMem(0x5fcb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xeb2, gbc.sp());
        EXPECT(0x5fcd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01E6
        gbc.setState(0xa288, 0x8642, 0xd8c0, 0xf818, 0xb9b6, 0x577c, 0x0, 0x0);
        gbc.writeMem(0xa288, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x8642, gbc.sp());
        EXPECT(0xa28a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa288));
        EXPECT(0x98, gbc.readMem(0xa289));
        // CB 98 01E7
        gbc.setState(0xbb94, 0x2117, 0x7a60, 0x1b27, 0xe6d6, 0xce19, 0x1, 0x1);
        gbc.writeMem(0xbb94, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x2117, gbc.sp());
        EXPECT(0xbb96, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbb94));
        EXPECT(0x98, gbc.readMem(0xbb95));
        // CB 98 01E8
        gbc.setState(0xd4bd, 0xe46a, 0x8ea0, 0xd364, 0x3178, 0xec9f, 0x0, 0x0);
        gbc.writeMem(0xd4bd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xe46a, gbc.sp());
        EXPECT(0xd4bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd4bd));
        EXPECT(0x98, gbc.readMem(0xd4be));
        // CB 98 01E9
        gbc.setState(0xd3be, 0x55d5, 0x8280, 0x5e07, 0x434a, 0xc300, 0x1, 0x0);
        gbc.writeMem(0xd3be, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x55d5, gbc.sp());
        EXPECT(0xd3c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3be));
        EXPECT(0x98, gbc.readMem(0xd3bf));
        // CB 98 01EB
        gbc.setState(0x3896, 0x9de3, 0xf2a0, 0x58da, 0x89da, 0xe18e, 0x0, 0x1);
        gbc.writeMem(0x3896, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x9de3, gbc.sp());
        EXPECT(0x3898, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01ED
        gbc.setState(0x191f, 0x7d48, 0x76e0, 0x16db, 0x69e9, 0x9124, 0x1, 0x0);
        gbc.writeMem(0x191f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x7d48, gbc.sp());
        EXPECT(0x1921, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01EE
        gbc.setState(0x5e22, 0xd19c, 0x5c60, 0x26d0, 0x6199, 0x2f72, 0x0, 0x0);
        gbc.writeMem(0x5e22, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xd19c, gbc.sp());
        EXPECT(0x5e24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01EF
        gbc.setState(0x3c39, 0xd459, 0x3450, 0xba8a, 0x520a, 0xdf26, 0x1, 0x1);
        gbc.writeMem(0x3c39, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xd459, gbc.sp());
        EXPECT(0x3c3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01F0
        gbc.setState(0xbdb9, 0x984f, 0x9290, 0x6358, 0xac8d, 0x1308, 0x1, 0x1);
        gbc.writeMem(0xbdb9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x984f, gbc.sp());
        EXPECT(0xbdbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbdb9));
        EXPECT(0x98, gbc.readMem(0xbdba));
        // CB 98 01F1
        gbc.setState(0x65bb, 0x5d49, 0x7130, 0xf797, 0x531e, 0x28f1, 0x0, 0x0);
        gbc.writeMem(0x65bb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x5d49, gbc.sp());
        EXPECT(0x65bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01F2
        gbc.setState(0xed88, 0x2903, 0xea80, 0xa16, 0x9931, 0x4233, 0x1, 0x0);
        gbc.writeMem(0xed88, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x2903, gbc.sp());
        EXPECT(0xed8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xed88));
        EXPECT(0x98, gbc.readMem(0xed89));
        // CB 98 01F3
        gbc.setState(0x9f8a, 0xa71f, 0x8330, 0x601c, 0x45e7, 0x44a1, 0x0, 0x0);
        gbc.writeMem(0x9f8a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xa71f, gbc.sp());
        EXPECT(0x9f8c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f8a));
        EXPECT(0x98, gbc.readMem(0x9f8b));
        // CB 98 01F4
        gbc.setState(0x7513, 0xa07e, 0xc4c0, 0x1c02, 0xe8d8, 0x2ac6, 0x1, 0x0);
        gbc.writeMem(0x7513, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0xa07e, gbc.sp());
        EXPECT(0x7515, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01F5
        gbc.setState(0x68eb, 0xc71d, 0x54d0, 0x520f, 0x7b1b, 0xc3d5, 0x0, 0x0);
        gbc.writeMem(0x68eb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xc71d, gbc.sp());
        EXPECT(0x68ed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01F6
        gbc.setState(0x281, 0x58ba, 0xe940, 0xa917, 0xec24, 0xe4cd, 0x1, 0x0);
        gbc.writeMem(0x281, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x58ba, gbc.sp());
        EXPECT(0x283, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01F7
        gbc.setState(0x979e, 0xa7f4, 0xf790, 0x1806, 0xf918, 0xd220, 0x0, 0x0);
        gbc.writeMem(0x979e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xa7f4, gbc.sp());
        EXPECT(0x97a0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x979e));
        EXPECT(0x98, gbc.readMem(0x979f));
        // CB 98 01F8
        gbc.setState(0x9cbc, 0x26b1, 0x69a0, 0x7af, 0xb616, 0x4524, 0x0, 0x0);
        gbc.writeMem(0x9cbc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x26b1, gbc.sp());
        EXPECT(0x9cbe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cbc));
        EXPECT(0x98, gbc.readMem(0x9cbd));
        // CB 98 01F9
        gbc.setState(0x17b0, 0x50a4, 0x43e0, 0x2530, 0xcaf3, 0xc5e9, 0x0, 0x0);
        gbc.writeMem(0x17b0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x50a4, gbc.sp());
        EXPECT(0x17b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01FA
        gbc.setState(0x7508, 0xd8ac, 0x46a0, 0x7a57, 0x94bd, 0xde1, 0x1, 0x1);
        gbc.writeMem(0x7508, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0xd8ac, gbc.sp());
        EXPECT(0x750a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01FB
        gbc.setState(0x8b03, 0xfabe, 0x3010, 0xfae, 0x616b, 0xb775, 0x0, 0x1);
        gbc.writeMem(0x8b03, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xfabe, gbc.sp());
        EXPECT(0x8b05, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b03));
        EXPECT(0x98, gbc.readMem(0x8b04));
        // CB 98 01FC
        gbc.setState(0x2a00, 0xcc83, 0x5a50, 0xee8a, 0x88c5, 0xb291, 0x0, 0x1);
        gbc.writeMem(0x2a00, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xcc83, gbc.sp());
        EXPECT(0x2a02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 01FD
        gbc.setState(0x5cd3, 0xc9b5, 0xcc0, 0xc08a, 0x469, 0x90ec, 0x0, 0x0);
        gbc.writeMem(0x5cd3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xc9b5, gbc.sp());
        EXPECT(0x5cd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01FE
        gbc.setState(0xbe6, 0x29df, 0x41e0, 0x67f8, 0x52b5, 0x51e0, 0x1, 0x0);
        gbc.writeMem(0xbe6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x29df, gbc.sp());
        EXPECT(0xbe8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 01FF
        gbc.setState(0x32de, 0xedd9, 0x4570, 0xe0bd, 0x9081, 0x4f7c, 0x0, 0x1);
        gbc.writeMem(0x32de, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xedd9, gbc.sp());
        EXPECT(0x32e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0200
        gbc.setState(0xdf9d, 0xd9c4, 0xa120, 0x8ae2, 0xf99f, 0xd686, 0x0, 0x1);
        gbc.writeMem(0xdf9d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xd9c4, gbc.sp());
        EXPECT(0xdf9f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdf9d));
        EXPECT(0x98, gbc.readMem(0xdf9e));
        // CB 98 0201
        gbc.setState(0xc4b4, 0x2e1b, 0x7af0, 0xcaff, 0x6dd3, 0x63e3, 0x0, 0x0);
        gbc.writeMem(0xc4b4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x2e1b, gbc.sp());
        EXPECT(0xc4b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4b4));
        EXPECT(0x98, gbc.readMem(0xc4b5));
        // CB 98 0202
        gbc.setState(0x5164, 0xc07c, 0xd7c0, 0xdd27, 0x3c3e, 0x5b9b, 0x1, 0x1);
        gbc.writeMem(0x5164, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xc07c, gbc.sp());
        EXPECT(0x5166, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0203
        gbc.setState(0xe939, 0x6da8, 0x55e0, 0xf096, 0xbecc, 0x720a, 0x0, 0x0);
        gbc.writeMem(0xe939, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x6da8, gbc.sp());
        EXPECT(0xe93b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe939));
        EXPECT(0x98, gbc.readMem(0xe93a));
        // CB 98 0204
        gbc.setState(0x2b57, 0xaf8, 0xb8d0, 0xd536, 0x96e2, 0x572e, 0x1, 0x1);
        gbc.writeMem(0x2b57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xaf8, gbc.sp());
        EXPECT(0x2b59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0205
        gbc.setState(0xaba8, 0xe888, 0x2e90, 0x19ac, 0xcc1d, 0x5400, 0x0, 0x1);
        gbc.writeMem(0xaba8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xe888, gbc.sp());
        EXPECT(0xabaa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaba8));
        EXPECT(0x98, gbc.readMem(0xaba9));
        // CB 98 0206
        gbc.setState(0x4dec, 0x61b2, 0x5080, 0x7468, 0x4e97, 0xda14, 0x1, 0x0);
        gbc.writeMem(0x4dec, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x61b2, gbc.sp());
        EXPECT(0x4dee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0207
        gbc.setState(0x9dea, 0x756b, 0x27f0, 0xba46, 0xfda, 0x1d88, 0x0, 0x1);
        gbc.writeMem(0x9dea, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x756b, gbc.sp());
        EXPECT(0x9dec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9dea));
        EXPECT(0x98, gbc.readMem(0x9deb));
        // CB 98 0208
        gbc.setState(0xb397, 0xe5a8, 0x2800, 0x86f7, 0xf617, 0x8ac0, 0x0, 0x1);
        gbc.writeMem(0xb397, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xe5a8, gbc.sp());
        EXPECT(0xb399, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb397));
        EXPECT(0x98, gbc.readMem(0xb398));
        // CB 98 0209
        gbc.setState(0xc965, 0x262a, 0x2e0, 0x2fee, 0x3b39, 0x65f1, 0x1, 0x1);
        gbc.writeMem(0xc965, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x262a, gbc.sp());
        EXPECT(0xc967, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc965));
        EXPECT(0x98, gbc.readMem(0xc966));
        // CB 98 020A
        gbc.setState(0x51c8, 0x4dba, 0xb010, 0x3b3d, 0xb3a1, 0x2327, 0x0, 0x0);
        gbc.writeMem(0x51c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x4dba, gbc.sp());
        EXPECT(0x51ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 020B
        gbc.setState(0x125c, 0x1905, 0x6d80, 0xf242, 0x81f, 0x3269, 0x0, 0x0);
        gbc.writeMem(0x125c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x1905, gbc.sp());
        EXPECT(0x125e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 020C
        gbc.setState(0x527b, 0xe111, 0xb5c0, 0x2a20, 0x648f, 0x5325, 0x1, 0x0);
        gbc.writeMem(0x527b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xe111, gbc.sp());
        EXPECT(0x527d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 020D
        gbc.setState(0xa85, 0x800b, 0x8a30, 0x1c26, 0xad5c, 0x4c52, 0x1, 0x1);
        gbc.writeMem(0xa85, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x800b, gbc.sp());
        EXPECT(0xa87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 020E
        gbc.setState(0x6198, 0x935d, 0xc360, 0xad95, 0xee25, 0x3188, 0x0, 0x0);
        gbc.writeMem(0x6198, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x935d, gbc.sp());
        EXPECT(0x619a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0210
        gbc.setState(0x242f, 0x594b, 0xb00, 0x95, 0x7b2d, 0xdc5a, 0x1, 0x0);
        gbc.writeMem(0x242f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x594b, gbc.sp());
        EXPECT(0x2431, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0211
        gbc.setState(0xbf70, 0x73e0, 0xed70, 0xf7a5, 0x4a4, 0xd753, 0x1, 0x1);
        gbc.writeMem(0xbf70, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x73e0, gbc.sp());
        EXPECT(0xbf72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf70));
        EXPECT(0x98, gbc.readMem(0xbf71));
        // CB 98 0212
        gbc.setState(0xb295, 0xe344, 0x100, 0xc479, 0x1010, 0xaae9, 0x0, 0x0);
        gbc.writeMem(0xb295, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xe344, gbc.sp());
        EXPECT(0xb297, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb295));
        EXPECT(0x98, gbc.readMem(0xb296));
        // CB 98 0213
        gbc.setState(0x628a, 0x9e52, 0xd0e0, 0xb840, 0xb91d, 0x217d, 0x0, 0x1);
        gbc.writeMem(0x628a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x9e52, gbc.sp());
        EXPECT(0x628c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0214
        gbc.setState(0x4884, 0xbd30, 0x98a0, 0x4ac6, 0x4dfb, 0x8d5a, 0x1, 0x0);
        gbc.writeMem(0x4884, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xbd30, gbc.sp());
        EXPECT(0x4886, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0215
        gbc.setState(0x5f56, 0x507c, 0x3200, 0x60, 0x5715, 0x5057, 0x0, 0x1);
        gbc.writeMem(0x5f56, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x507c, gbc.sp());
        EXPECT(0x5f58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0216
        gbc.setState(0xd5bf, 0x78ac, 0x8d30, 0x2f22, 0xe121, 0x33fa, 0x0, 0x0);
        gbc.writeMem(0xd5bf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x78ac, gbc.sp());
        EXPECT(0xd5c1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5bf));
        EXPECT(0x98, gbc.readMem(0xd5c0));
        // CB 98 0217
        gbc.setState(0x1451, 0xbef1, 0x9700, 0xc727, 0x660b, 0xf3ce, 0x0, 0x0);
        gbc.writeMem(0x1451, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xbef1, gbc.sp());
        EXPECT(0x1453, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0219
        gbc.setState(0x88d, 0x6831, 0xbc50, 0x1791, 0xcc5f, 0xa250, 0x1, 0x1);
        gbc.writeMem(0x88d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x6831, gbc.sp());
        EXPECT(0x88f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 021A
        gbc.setState(0xd711, 0x84a8, 0xa20, 0xbf78, 0xa5dc, 0xce42, 0x0, 0x1);
        gbc.writeMem(0xd711, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x84a8, gbc.sp());
        EXPECT(0xd713, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd711));
        EXPECT(0x98, gbc.readMem(0xd712));
        // CB 98 021B
        gbc.setState(0x7508, 0x879c, 0x9720, 0x89f7, 0xc0cf, 0x566a, 0x0, 0x1);
        gbc.writeMem(0x7508, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x879c, gbc.sp());
        EXPECT(0x750a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 021C
        gbc.setState(0xabd9, 0x25cd, 0x7b50, 0x1154, 0x249c, 0xb892, 0x1, 0x1);
        gbc.writeMem(0xabd9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x25cd, gbc.sp());
        EXPECT(0xabdb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xabd9));
        EXPECT(0x98, gbc.readMem(0xabda));
        // CB 98 021D
        gbc.setState(0x6c9b, 0x8f49, 0x3420, 0x7b00, 0x511, 0xf104, 0x1, 0x0);
        gbc.writeMem(0x6c9b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x8f49, gbc.sp());
        EXPECT(0x6c9d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 021E
        gbc.setState(0x1da2, 0x588e, 0x1db0, 0x39e0, 0x9e72, 0xf2ea, 0x1, 0x1);
        gbc.writeMem(0x1da2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x588e, gbc.sp());
        EXPECT(0x1da4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 021F
        gbc.setState(0x36b0, 0x8483, 0xa8f0, 0x67c9, 0x93fa, 0x6eda, 0x1, 0x0);
        gbc.writeMem(0x36b0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x8483, gbc.sp());
        EXPECT(0x36b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0220
        gbc.setState(0x49a5, 0x1f6d, 0x74f0, 0xb82b, 0xb3e4, 0xb88a, 0x0, 0x0);
        gbc.writeMem(0x49a5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x1f6d, gbc.sp());
        EXPECT(0x49a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0221
        gbc.setState(0x1c9e, 0x3911, 0xaea0, 0xe54d, 0x28b3, 0x9618, 0x1, 0x1);
        gbc.writeMem(0x1c9e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x3911, gbc.sp());
        EXPECT(0x1ca0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0222
        gbc.setState(0xc9c2, 0xda1, 0x7cf0, 0x3fea, 0x1a67, 0xf6e0, 0x0, 0x0);
        gbc.writeMem(0xc9c2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0xda1, gbc.sp());
        EXPECT(0xc9c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9c2));
        EXPECT(0x98, gbc.readMem(0xc9c3));
        // CB 98 0223
        gbc.setState(0xef72, 0xd258, 0x2260, 0xd653, 0x659d, 0xb25c, 0x1, 0x0);
        gbc.writeMem(0xef72, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xd258, gbc.sp());
        EXPECT(0xef74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef72));
        EXPECT(0x98, gbc.readMem(0xef73));
        // CB 98 0224
        gbc.setState(0xc09f, 0x50bc, 0x23a0, 0x2a4b, 0x727, 0x9188, 0x1, 0x0);
        gbc.writeMem(0xc09f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0x50bc, gbc.sp());
        EXPECT(0xc0a1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc09f));
        EXPECT(0x98, gbc.readMem(0xc0a0));
        // CB 98 0225
        gbc.setState(0x1bf9, 0x9395, 0x9610, 0xec8e, 0x536f, 0xe01c, 0x0, 0x0);
        gbc.writeMem(0x1bf9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x9395, gbc.sp());
        EXPECT(0x1bfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0226
        gbc.setState(0x66f5, 0x6a07, 0x13d0, 0x60c6, 0xd889, 0x37f9, 0x0, 0x0);
        gbc.writeMem(0x66f5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x6a07, gbc.sp());
        EXPECT(0x66f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0227
        gbc.setState(0x32e5, 0xc623, 0xe910, 0x606, 0xebf2, 0xd303, 0x1, 0x1);
        gbc.writeMem(0x32e5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xc623, gbc.sp());
        EXPECT(0x32e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0228
        gbc.setState(0xd220, 0x2a7d, 0x5220, 0x8590, 0x7bcc, 0xe403, 0x1, 0x0);
        gbc.writeMem(0xd220, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x2a7d, gbc.sp());
        EXPECT(0xd222, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd220));
        EXPECT(0x98, gbc.readMem(0xd221));
        // CB 98 0229
        gbc.setState(0xa68, 0x7a68, 0x1600, 0x3555, 0xad35, 0x941d, 0x0, 0x0);
        gbc.writeMem(0xa68, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x7a68, gbc.sp());
        EXPECT(0xa6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 022A
        gbc.setState(0x1651, 0x1447, 0x3660, 0x3187, 0x52b4, 0x172c, 0x0, 0x1);
        gbc.writeMem(0x1651, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x1447, gbc.sp());
        EXPECT(0x1653, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 022B
        gbc.setState(0x4b44, 0x2ec9, 0x6330, 0x5397, 0x93f5, 0x6d92, 0x0, 0x0);
        gbc.writeMem(0x4b44, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x2ec9, gbc.sp());
        EXPECT(0x4b46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 022C
        gbc.setState(0x379, 0xd4e2, 0xccc0, 0x22de, 0x830e, 0x45f0, 0x1, 0x1);
        gbc.writeMem(0x379, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xd4e2, gbc.sp());
        EXPECT(0x37b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 022D
        gbc.setState(0x249d, 0xba55, 0x5a90, 0x8ffe, 0xb786, 0x69fe, 0x0, 0x0);
        gbc.writeMem(0x249d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xba55, gbc.sp());
        EXPECT(0x249f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 022E
        gbc.setState(0x78d5, 0x515b, 0x9130, 0x7e1, 0x8426, 0xc4d6, 0x0, 0x1);
        gbc.writeMem(0x78d5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x515b, gbc.sp());
        EXPECT(0x78d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 022F
        gbc.setState(0x1067, 0x7325, 0x6cf0, 0x38de, 0x1b2b, 0xbdfe, 0x1, 0x1);
        gbc.writeMem(0x1067, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x7325, gbc.sp());
        EXPECT(0x1069, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0230
        gbc.setState(0x78b7, 0xb394, 0xc180, 0xf82d, 0x1d1, 0x5497, 0x1, 0x1);
        gbc.writeMem(0x78b7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xb394, gbc.sp());
        EXPECT(0x78b9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0231
        gbc.setState(0x3b54, 0x1964, 0x45b0, 0x5833, 0xf946, 0x4cb3, 0x1, 0x0);
        gbc.writeMem(0x3b54, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x1964, gbc.sp());
        EXPECT(0x3b56, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0232
        gbc.setState(0x1d5b, 0x3d60, 0x8150, 0x18f5, 0xfea, 0x23e6, 0x1, 0x1);
        gbc.writeMem(0x1d5b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3d60, gbc.sp());
        EXPECT(0x1d5d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0233
        gbc.setState(0xc54a, 0xc054, 0x3e60, 0xb76a, 0xcd6d, 0x7acb, 0x1, 0x1);
        gbc.writeMem(0xc54a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xc054, gbc.sp());
        EXPECT(0xc54c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc54a));
        EXPECT(0x98, gbc.readMem(0xc54b));
        // CB 98 0236
        gbc.setState(0xda82, 0x544a, 0x1ef0, 0x8493, 0xe05a, 0xd026, 0x1, 0x0);
        gbc.writeMem(0xda82, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1e, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x544a, gbc.sp());
        EXPECT(0xda84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda82));
        EXPECT(0x98, gbc.readMem(0xda83));
        // CB 98 0237
        gbc.setState(0x93ed, 0x7ee7, 0x52b0, 0x217e, 0xc9d, 0x8d8b, 0x0, 0x0);
        gbc.writeMem(0x93ed, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x7ee7, gbc.sp());
        EXPECT(0x93ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x93ed));
        EXPECT(0x98, gbc.readMem(0x93ee));
        // CB 98 0238
        gbc.setState(0x13ad, 0x6709, 0x5930, 0x83d5, 0xd79b, 0x4bcb, 0x0, 0x0);
        gbc.writeMem(0x13ad, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x6709, gbc.sp());
        EXPECT(0x13af, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0239
        gbc.setState(0xd1a2, 0xf19e, 0xaae0, 0xedee, 0xcb37, 0x1b24, 0x0, 0x0);
        gbc.writeMem(0xd1a2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xf19e, gbc.sp());
        EXPECT(0xd1a4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd1a2));
        EXPECT(0x98, gbc.readMem(0xd1a3));
        // CB 98 023A
        gbc.setState(0x8ded, 0xb8e3, 0x3160, 0xe276, 0x4d33, 0x893, 0x1, 0x1);
        gbc.writeMem(0x8ded, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xb8e3, gbc.sp());
        EXPECT(0x8def, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ded));
        EXPECT(0x98, gbc.readMem(0x8dee));
        // CB 98 023C
        gbc.setState(0x2c59, 0x7b02, 0x73b0, 0x403e, 0xf9e2, 0xa4e2, 0x1, 0x0);
        gbc.writeMem(0x2c59, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x7b02, gbc.sp());
        EXPECT(0x2c5b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 023D
        gbc.setState(0x9f19, 0x62c6, 0xccb0, 0x10a4, 0x5aa7, 0x4578, 0x0, 0x0);
        gbc.writeMem(0x9f19, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x78, gbc.l());
        EXPECT(0x62c6, gbc.sp());
        EXPECT(0x9f1b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f19));
        EXPECT(0x98, gbc.readMem(0x9f1a));
        // CB 98 023E
        gbc.setState(0x3257, 0x9f6, 0x6680, 0x4ea8, 0x27e, 0x60d4, 0x0, 0x1);
        gbc.writeMem(0x3257, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x9f6, gbc.sp());
        EXPECT(0x3259, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 023F
        gbc.setState(0x43f8, 0x16a8, 0xda90, 0x15a1, 0x30ac, 0xf2b8, 0x0, 0x0);
        gbc.writeMem(0x43f8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x16a8, gbc.sp());
        EXPECT(0x43fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0240
        gbc.setState(0x718e, 0xb0a2, 0xdb70, 0xe52f, 0x3ec1, 0xfff0, 0x1, 0x1);
        gbc.writeMem(0x718e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0xb0a2, gbc.sp());
        EXPECT(0x7190, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0241
        gbc.setState(0x5bfb, 0x421, 0x1980, 0xce9d, 0xb201, 0xf87a, 0x0, 0x0);
        gbc.writeMem(0x5bfb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x421, gbc.sp());
        EXPECT(0x5bfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0242
        gbc.setState(0x6393, 0x5d3e, 0x48e0, 0xf77e, 0x9c84, 0xacf3, 0x1, 0x0);
        gbc.writeMem(0x6393, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x5d3e, gbc.sp());
        EXPECT(0x6395, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0243
        gbc.setState(0xd97c, 0xa91e, 0x56d0, 0x1082, 0x145, 0x6c22, 0x0, 0x1);
        gbc.writeMem(0xd97c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xa91e, gbc.sp());
        EXPECT(0xd97e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd97c));
        EXPECT(0x98, gbc.readMem(0xd97d));
        // CB 98 0244
        gbc.setState(0x63d7, 0xfe33, 0xeda0, 0x7e34, 0x6b5b, 0xfca3, 0x1, 0x1);
        gbc.writeMem(0x63d7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xfe33, gbc.sp());
        EXPECT(0x63d9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0245
        gbc.setState(0x80b, 0xe18e, 0x66e0, 0x4ef, 0x7c98, 0x48de, 0x1, 0x0);
        gbc.writeMem(0x80b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0xe18e, gbc.sp());
        EXPECT(0x80d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0246
        gbc.setState(0xefc7, 0x304c, 0x4b40, 0xeb72, 0xdf78, 0xd95a, 0x1, 0x0);
        gbc.writeMem(0xefc7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x304c, gbc.sp());
        EXPECT(0xefc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefc7));
        EXPECT(0x98, gbc.readMem(0xefc8));
        // CB 98 0247
        gbc.setState(0xd738, 0x5f46, 0x870, 0x1013, 0xe8e7, 0x1de3, 0x0, 0x1);
        gbc.writeMem(0xd738, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x5f46, gbc.sp());
        EXPECT(0xd73a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd738));
        EXPECT(0x98, gbc.readMem(0xd739));
        // CB 98 0248
        gbc.setState(0xd875, 0x9db0, 0x26f0, 0x743f, 0xb705, 0xfe5, 0x0, 0x0);
        gbc.writeMem(0xd875, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x9db0, gbc.sp());
        EXPECT(0xd877, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd875));
        EXPECT(0x98, gbc.readMem(0xd876));
        // CB 98 024A
        gbc.setState(0xdc8c, 0xb752, 0x9270, 0x14d3, 0xc8bf, 0x57f4, 0x1, 0x0);
        gbc.writeMem(0xdc8c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb752, gbc.sp());
        EXPECT(0xdc8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc8c));
        EXPECT(0x98, gbc.readMem(0xdc8d));
        // CB 98 024B
        gbc.setState(0x7023, 0x5737, 0x9a60, 0x3983, 0x3e2, 0xc3d, 0x0, 0x1);
        gbc.writeMem(0x7023, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5737, gbc.sp());
        EXPECT(0x7025, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 024C
        gbc.setState(0xd016, 0xb3e4, 0xe8b0, 0x1a01, 0x68f4, 0x3cfa, 0x0, 0x0);
        gbc.writeMem(0xd016, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xb3e4, gbc.sp());
        EXPECT(0xd018, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd016));
        EXPECT(0x98, gbc.readMem(0xd017));
        // CB 98 024D
        gbc.setState(0x4ae, 0x331a, 0x3970, 0x9b92, 0x1d4e, 0x3bcb, 0x0, 0x1);
        gbc.writeMem(0x4ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x331a, gbc.sp());
        EXPECT(0x4b0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 024E
        gbc.setState(0x671d, 0x2efa, 0x6c40, 0x2f3d, 0x6bbe, 0x3cd3, 0x1, 0x0);
        gbc.writeMem(0x671d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x2efa, gbc.sp());
        EXPECT(0x671f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0250
        gbc.setState(0x9512, 0x120e, 0x3880, 0x239f, 0x8632, 0xd818, 0x1, 0x0);
        gbc.writeMem(0x9512, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x120e, gbc.sp());
        EXPECT(0x9514, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9512));
        EXPECT(0x98, gbc.readMem(0x9513));
        // CB 98 0251
        gbc.setState(0xd5a5, 0xe00c, 0x8600, 0x3a05, 0x1533, 0x9df, 0x0, 0x1);
        gbc.writeMem(0xd5a5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xe00c, gbc.sp());
        EXPECT(0xd5a7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd5a5));
        EXPECT(0x98, gbc.readMem(0xd5a6));
        // CB 98 0252
        gbc.setState(0xbcc5, 0xb76b, 0x3160, 0x8221, 0x2f39, 0xa77a, 0x0, 0x1);
        gbc.writeMem(0xbcc5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xb76b, gbc.sp());
        EXPECT(0xbcc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbcc5));
        EXPECT(0x98, gbc.readMem(0xbcc6));
        // CB 98 0253
        gbc.setState(0x2d1a, 0xbc5, 0x4220, 0xa20e, 0x89a9, 0x8857, 0x0, 0x1);
        gbc.writeMem(0x2d1a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xbc5, gbc.sp());
        EXPECT(0x2d1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0254
        gbc.setState(0x4bc5, 0x1336, 0xd9a0, 0x8d47, 0xd8bd, 0x2558, 0x0, 0x1);
        gbc.writeMem(0x4bc5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x1336, gbc.sp());
        EXPECT(0x4bc7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0255
        gbc.setState(0x4472, 0x14e, 0x9270, 0xce82, 0xc, 0x845c, 0x0, 0x1);
        gbc.writeMem(0x4472, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x14e, gbc.sp());
        EXPECT(0x4474, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0256
        gbc.setState(0x173c, 0x921a, 0xc2f0, 0xcd68, 0xb0b1, 0xbf1f, 0x1, 0x1);
        gbc.writeMem(0x173c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x921a, gbc.sp());
        EXPECT(0x173e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0257
        gbc.setState(0x4169, 0x5772, 0xadd0, 0xf15f, 0x3c39, 0x1601, 0x1, 0x0);
        gbc.writeMem(0x4169, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x5772, gbc.sp());
        EXPECT(0x416b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0258
        gbc.setState(0x36d2, 0xba3a, 0xaf70, 0x3e83, 0xc888, 0x2b0d, 0x1, 0x1);
        gbc.writeMem(0x36d2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xba3a, gbc.sp());
        EXPECT(0x36d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0259
        gbc.setState(0xb44c, 0x8245, 0x5e10, 0xec3, 0xe799, 0x36e, 0x0, 0x1);
        gbc.writeMem(0xb44c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x8245, gbc.sp());
        EXPECT(0xb44e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb44c));
        EXPECT(0x98, gbc.readMem(0xb44d));
        // CB 98 025A
        gbc.setState(0x5ddf, 0xe35e, 0x2340, 0x3e6d, 0xa537, 0xa575, 0x1, 0x1);
        gbc.writeMem(0x5ddf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xe35e, gbc.sp());
        EXPECT(0x5de1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 025B
        gbc.setState(0x4dd6, 0x9aaa, 0xfc80, 0xd4bb, 0x8586, 0x271e, 0x1, 0x0);
        gbc.writeMem(0x4dd6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x9aaa, gbc.sp());
        EXPECT(0x4dd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 025C
        gbc.setState(0xd02e, 0xa006, 0xe040, 0x7f11, 0xe7b6, 0xb194, 0x0, 0x0);
        gbc.writeMem(0xd02e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xa006, gbc.sp());
        EXPECT(0xd030, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd02e));
        EXPECT(0x98, gbc.readMem(0xd02f));
        // CB 98 025D
        gbc.setState(0xa4ac, 0x5b0a, 0xb20, 0x6408, 0x2492, 0x5303, 0x0, 0x1);
        gbc.writeMem(0xa4ac, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x5b0a, gbc.sp());
        EXPECT(0xa4ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4ac));
        EXPECT(0x98, gbc.readMem(0xa4ad));
        // CB 98 025E
        gbc.setState(0x3dc5, 0x78d, 0x2780, 0x1c10, 0x3d2b, 0x60fa, 0x1, 0x1);
        gbc.writeMem(0x3dc5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x78d, gbc.sp());
        EXPECT(0x3dc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 025F
        gbc.setState(0x546b, 0xeb9, 0x62c0, 0x6486, 0xa2ea, 0xb005, 0x1, 0x0);
        gbc.writeMem(0x546b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xeb9, gbc.sp());
        EXPECT(0x546d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0261
        gbc.setState(0x359b, 0x52c1, 0x11b0, 0x6044, 0x6635, 0xd970, 0x1, 0x0);
        gbc.writeMem(0x359b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0x52c1, gbc.sp());
        EXPECT(0x359d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0262
        gbc.setState(0x21e4, 0x2ea7, 0xa0, 0xc3f3, 0x6b2e, 0x6446, 0x1, 0x0);
        gbc.writeMem(0x21e4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x2ea7, gbc.sp());
        EXPECT(0x21e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0263
        gbc.setState(0x63a7, 0x6557, 0xa200, 0xaf50, 0x72bd, 0x5186, 0x0, 0x0);
        gbc.writeMem(0x63a7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x6557, gbc.sp());
        EXPECT(0x63a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0264
        gbc.setState(0x104c, 0x9578, 0x790, 0xfe80, 0x3d74, 0x752c, 0x0, 0x1);
        gbc.writeMem(0x104c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x9578, gbc.sp());
        EXPECT(0x104e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0265
        gbc.setState(0xe6, 0x6094, 0x7ef0, 0x3f91, 0xe73c, 0xe33f, 0x0, 0x1);
        gbc.writeMem(0xe6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x6094, gbc.sp());
        EXPECT(0xe8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0266
        gbc.setState(0x31fd, 0x63e, 0x15f0, 0x5b10, 0x9ad1, 0x8bce, 0x0, 0x0);
        gbc.writeMem(0x31fd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x63e, gbc.sp());
        EXPECT(0x31ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0267
        gbc.setState(0x3b64, 0x63fb, 0x19e0, 0x4245, 0x82a, 0xe2ec, 0x1, 0x1);
        gbc.writeMem(0x3b64, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x63fb, gbc.sp());
        EXPECT(0x3b66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0268
        gbc.setState(0x9539, 0x816c, 0x44f0, 0x5894, 0x12fc, 0xdf19, 0x0, 0x0);
        gbc.writeMem(0x9539, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x816c, gbc.sp());
        EXPECT(0x953b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9539));
        EXPECT(0x98, gbc.readMem(0x953a));
        // CB 98 026A
        gbc.setState(0x2414, 0xc6b, 0xba40, 0xce9, 0xe191, 0xbf54, 0x0, 0x1);
        gbc.writeMem(0x2414, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xc6b, gbc.sp());
        EXPECT(0x2416, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 026B
        gbc.setState(0x171d, 0x3881, 0x7220, 0xc24e, 0x43b3, 0xd50, 0x0, 0x1);
        gbc.writeMem(0x171d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x3881, gbc.sp());
        EXPECT(0x171f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 026C
        gbc.setState(0x87e2, 0xc31f, 0x82c0, 0x8c0f, 0xcc75, 0xf9a, 0x1, 0x1);
        gbc.writeMem(0x87e2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xc31f, gbc.sp());
        EXPECT(0x87e4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x87e2));
        EXPECT(0x98, gbc.readMem(0x87e3));
        // CB 98 026D
        gbc.setState(0xc5d, 0xf013, 0x4e30, 0x5aae, 0xd3e9, 0x98f3, 0x0, 0x0);
        gbc.writeMem(0xc5d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xf013, gbc.sp());
        EXPECT(0xc5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 026E
        gbc.setState(0xfb, 0x4d4b, 0x510, 0x7989, 0xaceb, 0xa281, 0x1, 0x0);
        gbc.writeMem(0xfb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x4d4b, gbc.sp());
        EXPECT(0xfd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 026F
        gbc.setState(0x5adb, 0x93c3, 0x78c0, 0x884c, 0x91ee, 0x2a95, 0x0, 0x1);
        gbc.writeMem(0x5adb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x93c3, gbc.sp());
        EXPECT(0x5add, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0270
        gbc.setState(0x8e52, 0xe792, 0x33b0, 0x4a34, 0x790d, 0xad6e, 0x0, 0x0);
        gbc.writeMem(0x8e52, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xe792, gbc.sp());
        EXPECT(0x8e54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e52));
        EXPECT(0x98, gbc.readMem(0x8e53));
        // CB 98 0271
        gbc.setState(0x797b, 0xda1, 0x8b80, 0xa14b, 0xd4df, 0xa013, 0x0, 0x0);
        gbc.writeMem(0x797b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xda1, gbc.sp());
        EXPECT(0x797d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0272
        gbc.setState(0xcc75, 0x67f7, 0x22b0, 0xa93b, 0x4e16, 0x6552, 0x1, 0x0);
        gbc.writeMem(0xcc75, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x67f7, gbc.sp());
        EXPECT(0xcc77, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc75));
        EXPECT(0x98, gbc.readMem(0xcc76));
        // CB 98 0273
        gbc.setState(0x7511, 0xfff0, 0xbf60, 0xe528, 0xc78f, 0x8da, 0x1, 0x0);
        gbc.writeMem(0x7511, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xfff0, gbc.sp());
        EXPECT(0x7513, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0274
        gbc.setState(0x9010, 0x1bda, 0x40c0, 0xea33, 0x11f5, 0x7cb4, 0x0, 0x0);
        gbc.writeMem(0x9010, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x1bda, gbc.sp());
        EXPECT(0x9012, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9010));
        EXPECT(0x98, gbc.readMem(0x9011));
        // CB 98 0275
        gbc.setState(0xa291, 0xc40a, 0x15c0, 0x87ca, 0xb7c9, 0x930e, 0x0, 0x1);
        gbc.writeMem(0xa291, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xc40a, gbc.sp());
        EXPECT(0xa293, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa291));
        EXPECT(0x98, gbc.readMem(0xa292));
        // CB 98 0276
        gbc.setState(0x6865, 0xdcc0, 0xd400, 0xd5de, 0x8f88, 0xb48f, 0x0, 0x1);
        gbc.writeMem(0x6865, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xdcc0, gbc.sp());
        EXPECT(0x6867, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0277
        gbc.setState(0x451c, 0x2839, 0x2310, 0x185e, 0x769a, 0x6bc8, 0x1, 0x0);
        gbc.writeMem(0x451c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x2839, gbc.sp());
        EXPECT(0x451e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0278
        gbc.setState(0xc96b, 0x71ce, 0x6b30, 0x9394, 0xc9c8, 0x5a95, 0x1, 0x0);
        gbc.writeMem(0xc96b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x71ce, gbc.sp());
        EXPECT(0xc96d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc96b));
        EXPECT(0x98, gbc.readMem(0xc96c));
        // CB 98 0279
        gbc.setState(0x4d78, 0xdfa8, 0xa0e0, 0xfa09, 0x6249, 0x87a8, 0x1, 0x1);
        gbc.writeMem(0x4d78, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xdfa8, gbc.sp());
        EXPECT(0x4d7a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 027A
        gbc.setState(0xc129, 0xace1, 0xee60, 0x2766, 0x4a42, 0x7bd9, 0x0, 0x0);
        gbc.writeMem(0xc129, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0xace1, gbc.sp());
        EXPECT(0xc12b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc129));
        EXPECT(0x98, gbc.readMem(0xc12a));
        // CB 98 027B
        gbc.setState(0x5fc, 0xcaad, 0x9b40, 0xd6d9, 0x6f64, 0x833f, 0x1, 0x1);
        gbc.writeMem(0x5fc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xcaad, gbc.sp());
        EXPECT(0x5fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 027D
        gbc.setState(0x4290, 0x21aa, 0xc670, 0xc918, 0xc230, 0xe96b, 0x0, 0x1);
        gbc.writeMem(0x4290, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x21aa, gbc.sp());
        EXPECT(0x4292, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 027F
        gbc.setState(0x3f16, 0x43e8, 0x2e30, 0x4223, 0x4ea3, 0xf675, 0x1, 0x0);
        gbc.writeMem(0x3f16, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0x43e8, gbc.sp());
        EXPECT(0x3f18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0280
        gbc.setState(0xcefe, 0xbc40, 0x45d0, 0x5883, 0x1eba, 0x4986, 0x0, 0x0);
        gbc.writeMem(0xcefe, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xbc40, gbc.sp());
        EXPECT(0xcf00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcefe));
        EXPECT(0x98, gbc.readMem(0xceff));
        // CB 98 0281
        gbc.setState(0x8ac6, 0x398a, 0x6c90, 0x9100, 0x8095, 0x13c6, 0x0, 0x1);
        gbc.writeMem(0x8ac6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x398a, gbc.sp());
        EXPECT(0x8ac8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ac6));
        EXPECT(0x98, gbc.readMem(0x8ac7));
        // CB 98 0282
        gbc.setState(0x96ba, 0x757a, 0x7f0, 0x4293, 0xb901, 0x1b2, 0x1, 0x0);
        gbc.writeMem(0x96ba, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x757a, gbc.sp());
        EXPECT(0x96bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x96ba));
        EXPECT(0x98, gbc.readMem(0x96bb));
        // CB 98 0283
        gbc.setState(0x9f57, 0xdf4e, 0xae0, 0x48f3, 0x634f, 0x1c0d, 0x1, 0x0);
        gbc.writeMem(0x9f57, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xdf4e, gbc.sp());
        EXPECT(0x9f59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f57));
        EXPECT(0x98, gbc.readMem(0x9f58));
        // CB 98 0284
        gbc.setState(0x4628, 0x81a0, 0x1680, 0x90ae, 0xdfb8, 0x8add, 0x0, 0x1);
        gbc.writeMem(0x4628, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x81a0, gbc.sp());
        EXPECT(0x462a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0285
        gbc.setState(0x26d6, 0x949d, 0x6800, 0x92ac, 0xd5b0, 0xe6fd, 0x1, 0x0);
        gbc.writeMem(0x26d6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x949d, gbc.sp());
        EXPECT(0x26d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0286
        gbc.setState(0xa1a7, 0xb119, 0xb380, 0x5251, 0x89ba, 0xddff, 0x0, 0x1);
        gbc.writeMem(0xa1a7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0xb119, gbc.sp());
        EXPECT(0xa1a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1a7));
        EXPECT(0x98, gbc.readMem(0xa1a8));
        // CB 98 0287
        gbc.setState(0xa17b, 0x1f1c, 0x25f0, 0x8c87, 0xb294, 0x2742, 0x0, 0x0);
        gbc.writeMem(0xa17b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x1f1c, gbc.sp());
        EXPECT(0xa17d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa17b));
        EXPECT(0x98, gbc.readMem(0xa17c));
        // CB 98 028B
        gbc.setState(0x3b0, 0xb76d, 0x81c0, 0x4b9f, 0x1107, 0xa2cb, 0x0, 0x0);
        gbc.writeMem(0x3b0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xb76d, gbc.sp());
        EXPECT(0x3b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 028C
        gbc.setState(0x170f, 0x1361, 0x7800, 0xef4d, 0xfd2d, 0x95f8, 0x0, 0x0);
        gbc.writeMem(0x170f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0x1361, gbc.sp());
        EXPECT(0x1711, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 028D
        gbc.setState(0xa567, 0xe29d, 0xdde0, 0xa1bb, 0x5407, 0xbfdc, 0x0, 0x1);
        gbc.writeMem(0xa567, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xe29d, gbc.sp());
        EXPECT(0xa569, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa567));
        EXPECT(0x98, gbc.readMem(0xa568));
        // CB 98 028E
        gbc.setState(0xe35e, 0xf025, 0x28f0, 0xdbb6, 0x8a8d, 0x3e14, 0x1, 0x0);
        gbc.writeMem(0xe35e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf025, gbc.sp());
        EXPECT(0xe360, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe35e));
        EXPECT(0x98, gbc.readMem(0xe35f));
        // CB 98 028F
        gbc.setState(0x9cfc, 0xda69, 0xec20, 0x9832, 0x6098, 0x5564, 0x0, 0x0);
        gbc.writeMem(0x9cfc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xda69, gbc.sp());
        EXPECT(0x9cfe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9cfc));
        EXPECT(0x98, gbc.readMem(0x9cfd));
        // CB 98 0290
        gbc.setState(0x35dd, 0xafe, 0x69a0, 0x4b18, 0x7d91, 0x7cc, 0x1, 0x1);
        gbc.writeMem(0x35dd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xafe, gbc.sp());
        EXPECT(0x35df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0291
        gbc.setState(0x6a1f, 0x4692, 0xd180, 0x7552, 0x31ba, 0xc8ea, 0x0, 0x1);
        gbc.writeMem(0x6a1f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x4692, gbc.sp());
        EXPECT(0x6a21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0292
        gbc.setState(0x8a99, 0xf5cd, 0x3d30, 0xc4c4, 0xff1, 0xeaf3, 0x0, 0x1);
        gbc.writeMem(0x8a99, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xf5cd, gbc.sp());
        EXPECT(0x8a9b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8a99));
        EXPECT(0x98, gbc.readMem(0x8a9a));
        // CB 98 0293
        gbc.setState(0xab7a, 0x1b2b, 0x51b0, 0x86a7, 0xfc77, 0x35fa, 0x0, 0x1);
        gbc.writeMem(0xab7a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0x1b2b, gbc.sp());
        EXPECT(0xab7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xab7a));
        EXPECT(0x98, gbc.readMem(0xab7b));
        // CB 98 0295
        gbc.setState(0x847a, 0x4129, 0x1d60, 0x70a7, 0xef0, 0xcf9, 0x0, 0x0);
        gbc.writeMem(0x847a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x4129, gbc.sp());
        EXPECT(0x847c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x847a));
        EXPECT(0x98, gbc.readMem(0x847b));
        // CB 98 0296
        gbc.setState(0xc47e, 0x7ae, 0xf2f0, 0xa181, 0x8ed4, 0xec42, 0x0, 0x0);
        gbc.writeMem(0xc47e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x7ae, gbc.sp());
        EXPECT(0xc480, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc47e));
        EXPECT(0x98, gbc.readMem(0xc47f));
        // CB 98 0297
        gbc.setState(0xfd6, 0x5739, 0xee50, 0xcc1f, 0x8081, 0x521e, 0x1, 0x1);
        gbc.writeMem(0xfd6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x5739, gbc.sp());
        EXPECT(0xfd8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0298
        gbc.setState(0x22c3, 0x491, 0x45c0, 0xdb65, 0xb76c, 0x93eb, 0x1, 0x0);
        gbc.writeMem(0x22c3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x491, gbc.sp());
        EXPECT(0x22c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0299
        gbc.setState(0x7d30, 0x27d7, 0x7390, 0x11d9, 0xd868, 0x49d2, 0x1, 0x0);
        gbc.writeMem(0x7d30, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x27d7, gbc.sp());
        EXPECT(0x7d32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 029A
        gbc.setState(0x562, 0x7adb, 0x6030, 0x5d40, 0xf7b, 0x27ed, 0x0, 0x1);
        gbc.writeMem(0x562, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x7adb, gbc.sp());
        EXPECT(0x564, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 029B
        gbc.setState(0xdf9, 0x8ecb, 0x2f0, 0xd945, 0x582e, 0xa940, 0x0, 0x1);
        gbc.writeMem(0xdf9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x8ecb, gbc.sp());
        EXPECT(0xdfb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 029C
        gbc.setState(0x40d7, 0x9d9d, 0xf90, 0x5af9, 0x3eed, 0x96e3, 0x0, 0x0);
        gbc.writeMem(0x40d7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x9d9d, gbc.sp());
        EXPECT(0x40d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 029D
        gbc.setState(0xefe8, 0xf6f5, 0x9ca0, 0x4c1a, 0xc58b, 0x4053, 0x1, 0x1);
        gbc.writeMem(0xefe8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xf6f5, gbc.sp());
        EXPECT(0xefea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xefe8));
        EXPECT(0x98, gbc.readMem(0xefe9));
        // CB 98 029E
        gbc.setState(0xa4f1, 0xc731, 0x4960, 0xb27f, 0x6cd9, 0x1ac1, 0x1, 0x0);
        gbc.writeMem(0xa4f1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xc731, gbc.sp());
        EXPECT(0xa4f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa4f1));
        EXPECT(0x98, gbc.readMem(0xa4f2));
        // CB 98 02A0
        gbc.setState(0x702d, 0xe8e1, 0xfda0, 0xe101, 0x452e, 0xe4ed, 0x0, 0x1);
        gbc.writeMem(0x702d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xe8e1, gbc.sp());
        EXPECT(0x702f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02A1
        gbc.setState(0xba1f, 0x6f40, 0x87f0, 0xc74d, 0xec5b, 0x7922, 0x0, 0x1);
        gbc.writeMem(0xba1f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x6f40, gbc.sp());
        EXPECT(0xba21, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xba1f));
        EXPECT(0x98, gbc.readMem(0xba20));
        // CB 98 02A2
        gbc.setState(0x370d, 0xb440, 0x62c0, 0x885b, 0x56b7, 0xb122, 0x0, 0x1);
        gbc.writeMem(0x370d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xb440, gbc.sp());
        EXPECT(0x370f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02A3
        gbc.setState(0xb437, 0x4a7b, 0x4ea0, 0xbc1b, 0xe4ec, 0xabfd, 0x0, 0x0);
        gbc.writeMem(0xb437, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x4a7b, gbc.sp());
        EXPECT(0xb439, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb437));
        EXPECT(0x98, gbc.readMem(0xb438));
        // CB 98 02A4
        gbc.setState(0x9e02, 0xb93a, 0x6cd0, 0xf7b7, 0xd81c, 0xb4a7, 0x0, 0x1);
        gbc.writeMem(0x9e02, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xb93a, gbc.sp());
        EXPECT(0x9e04, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9e02));
        EXPECT(0x98, gbc.readMem(0x9e03));
        // CB 98 02A5
        gbc.setState(0x539d, 0xf291, 0x8230, 0x248c, 0x2ab7, 0x7114, 0x0, 0x1);
        gbc.writeMem(0x539d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0xf291, gbc.sp());
        EXPECT(0x539f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02A7
        gbc.setState(0xc835, 0x508c, 0x7bd0, 0x328d, 0x9ff9, 0x8b4b, 0x0, 0x0);
        gbc.writeMem(0xc835, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x508c, gbc.sp());
        EXPECT(0xc837, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc835));
        EXPECT(0x98, gbc.readMem(0xc836));
        // CB 98 02A8
        gbc.setState(0xd157, 0xe175, 0xdc00, 0x6cf8, 0x1b75, 0x9a0d, 0x1, 0x0);
        gbc.writeMem(0xd157, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xe175, gbc.sp());
        EXPECT(0xd159, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd157));
        EXPECT(0x98, gbc.readMem(0xd158));
        // CB 98 02A9
        gbc.setState(0x5ebd, 0x4587, 0x7b20, 0x2729, 0xb932, 0x1d2e, 0x1, 0x1);
        gbc.writeMem(0x5ebd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x4587, gbc.sp());
        EXPECT(0x5ebf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02AA
        gbc.setState(0x2f2b, 0x5cdf, 0x21b0, 0xedb5, 0x1075, 0xd0ce, 0x0, 0x0);
        gbc.writeMem(0x2f2b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x5cdf, gbc.sp());
        EXPECT(0x2f2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02AB
        gbc.setState(0xb4fc, 0x5595, 0x20b0, 0x39ac, 0x12c7, 0x1584, 0x1, 0x1);
        gbc.writeMem(0xb4fc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5595, gbc.sp());
        EXPECT(0xb4fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4fc));
        EXPECT(0x98, gbc.readMem(0xb4fd));
        // CB 98 02AC
        gbc.setState(0x7bcc, 0xa698, 0x6fa0, 0x7bff, 0x6783, 0xf407, 0x1, 0x0);
        gbc.writeMem(0x7bcc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xa698, gbc.sp());
        EXPECT(0x7bce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02AD
        gbc.setState(0x70f7, 0x18ec, 0x20e0, 0x6776, 0x9359, 0x9a38, 0x0, 0x1);
        gbc.writeMem(0x70f7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x18ec, gbc.sp());
        EXPECT(0x70f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02AE
        gbc.setState(0xee22, 0xe151, 0x3aa0, 0xc75a, 0xa9f8, 0x23b3, 0x0, 0x0);
        gbc.writeMem(0xee22, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xe151, gbc.sp());
        EXPECT(0xee24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee22));
        EXPECT(0x98, gbc.readMem(0xee23));
        // CB 98 02AF
        gbc.setState(0x79e8, 0x7146, 0x18a0, 0xac78, 0xee9f, 0x54c3, 0x1, 0x1);
        gbc.writeMem(0x79e8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x7146, gbc.sp());
        EXPECT(0x79ea, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02B0
        gbc.setState(0xef9, 0x218b, 0x8ce0, 0x969c, 0x804, 0x88fd, 0x1, 0x0);
        gbc.writeMem(0xef9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x218b, gbc.sp());
        EXPECT(0xefb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02B1
        gbc.setState(0x6838, 0x8bb4, 0xc970, 0xf5fa, 0x7b02, 0xbf05, 0x1, 0x1);
        gbc.writeMem(0x6838, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x8bb4, gbc.sp());
        EXPECT(0x683a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02B2
        gbc.setState(0x20ae, 0xa176, 0x7dc0, 0xfca7, 0x11a3, 0x624d, 0x1, 0x1);
        gbc.writeMem(0x20ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xa176, gbc.sp());
        EXPECT(0x20b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02B3
        gbc.setState(0x94cd, 0x2476, 0xb870, 0x977a, 0x594e, 0x3e92, 0x1, 0x1);
        gbc.writeMem(0x94cd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x2476, gbc.sp());
        EXPECT(0x94cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94cd));
        EXPECT(0x98, gbc.readMem(0x94ce));
        // CB 98 02B4
        gbc.setState(0x3de6, 0x26e9, 0x6b70, 0xedcc, 0x47bb, 0xcb51, 0x1, 0x1);
        gbc.writeMem(0x3de6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x26e9, gbc.sp());
        EXPECT(0x3de8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02B5
        gbc.setState(0xb453, 0xf155, 0x19e0, 0x8982, 0x1538, 0x748d, 0x1, 0x1);
        gbc.writeMem(0xb453, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xf155, gbc.sp());
        EXPECT(0xb455, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb453));
        EXPECT(0x98, gbc.readMem(0xb454));
        // CB 98 02B6
        gbc.setState(0x62b2, 0x2c9, 0x1890, 0x3230, 0x5235, 0x8107, 0x0, 0x1);
        gbc.writeMem(0x62b2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x2c9, gbc.sp());
        EXPECT(0x62b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02B7
        gbc.setState(0x6455, 0xd8f2, 0x5540, 0xe201, 0x950a, 0x53c1, 0x0, 0x1);
        gbc.writeMem(0x6455, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x53, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xd8f2, gbc.sp());
        EXPECT(0x6457, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02B8
        gbc.setState(0x8ba4, 0x6878, 0x29e0, 0x4f2b, 0x49d, 0x91d3, 0x0, 0x1);
        gbc.writeMem(0x8ba4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x6878, gbc.sp());
        EXPECT(0x8ba6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ba4));
        EXPECT(0x98, gbc.readMem(0x8ba5));
        // CB 98 02BA
        gbc.setState(0x62ca, 0x2e43, 0x6eb0, 0xe369, 0x8917, 0x56de, 0x0, 0x1);
        gbc.writeMem(0x62ca, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x2e43, gbc.sp());
        EXPECT(0x62cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02BB
        gbc.setState(0x6816, 0x35bc, 0x5f90, 0x3035, 0xf382, 0x2697, 0x1, 0x1);
        gbc.writeMem(0x6816, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x35bc, gbc.sp());
        EXPECT(0x6818, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02BC
        gbc.setState(0xa006, 0xa4f8, 0x3a30, 0xe4c2, 0xe860, 0x900, 0x1, 0x0);
        gbc.writeMem(0xa006, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xa4f8, gbc.sp());
        EXPECT(0xa008, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa006));
        EXPECT(0x98, gbc.readMem(0xa007));
        // CB 98 02BD
        gbc.setState(0xc4c8, 0x3171, 0xd8f0, 0x1d44, 0x410a, 0xce3f, 0x1, 0x1);
        gbc.writeMem(0xc4c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x3171, gbc.sp());
        EXPECT(0xc4ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4c8));
        EXPECT(0x98, gbc.readMem(0xc4c9));
        // CB 98 02BE
        gbc.setState(0x13b8, 0x50ae, 0x9d80, 0xa051, 0x9f73, 0x32f4, 0x1, 0x1);
        gbc.writeMem(0x13b8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x50ae, gbc.sp());
        EXPECT(0x13ba, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02BF
        gbc.setState(0xd765, 0xed8b, 0x1200, 0x635b, 0x35b5, 0xdb0f, 0x0, 0x0);
        gbc.writeMem(0xd765, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xed8b, gbc.sp());
        EXPECT(0xd767, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd765));
        EXPECT(0x98, gbc.readMem(0xd766));
        // CB 98 02C0
        gbc.setState(0x8991, 0x45be, 0xe040, 0x5ac8, 0xd33b, 0x462, 0x0, 0x0);
        gbc.writeMem(0x8991, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x45be, gbc.sp());
        EXPECT(0x8993, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8991));
        EXPECT(0x98, gbc.readMem(0x8992));
        // CB 98 02C2
        gbc.setState(0x2663, 0xd448, 0x7070, 0x2bef, 0x9dfd, 0x278b, 0x0, 0x0);
        gbc.writeMem(0x2663, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xd448, gbc.sp());
        EXPECT(0x2665, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02C3
        gbc.setState(0xb16e, 0xbff1, 0xdc80, 0xd04, 0x7f76, 0xf6ea, 0x1, 0x1);
        gbc.writeMem(0xb16e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xbff1, gbc.sp());
        EXPECT(0xb170, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb16e));
        EXPECT(0x98, gbc.readMem(0xb16f));
        // CB 98 02C4
        gbc.setState(0x15e5, 0xd8ad, 0x76a0, 0x1fe8, 0x6361, 0x6490, 0x1, 0x1);
        gbc.writeMem(0x15e5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xd8ad, gbc.sp());
        EXPECT(0x15e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02C5
        gbc.setState(0xc852, 0xb50d, 0xff40, 0x80fa, 0xa778, 0xaa26, 0x0, 0x1);
        gbc.writeMem(0xc852, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xb50d, gbc.sp());
        EXPECT(0xc854, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc852));
        EXPECT(0x98, gbc.readMem(0xc853));
        // CB 98 02C6
        gbc.setState(0x18a4, 0x3eab, 0xf00, 0x2098, 0x73e2, 0xdb8f, 0x1, 0x1);
        gbc.writeMem(0x18a4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x3eab, gbc.sp());
        EXPECT(0x18a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02C7
        gbc.setState(0x53d2, 0x1d9, 0x6ad0, 0x6cf2, 0xf781, 0x414a, 0x0, 0x0);
        gbc.writeMem(0x53d2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0x1d9, gbc.sp());
        EXPECT(0x53d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02C8
        gbc.setState(0xb32a, 0x1fef, 0xcf70, 0xc81f, 0x134d, 0xf4be, 0x1, 0x1);
        gbc.writeMem(0xb32a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x1fef, gbc.sp());
        EXPECT(0xb32c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb32a));
        EXPECT(0x98, gbc.readMem(0xb32b));
        // CB 98 02C9
        gbc.setState(0x7a9f, 0xa853, 0x78d0, 0x90e2, 0x4acc, 0x7dd6, 0x1, 0x1);
        gbc.writeMem(0x7a9f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xa853, gbc.sp());
        EXPECT(0x7aa1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02CA
        gbc.setState(0x8db9, 0xde33, 0xce80, 0x60b9, 0x897e, 0xfabb, 0x1, 0x0);
        gbc.writeMem(0x8db9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xde33, gbc.sp());
        EXPECT(0x8dbb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8db9));
        EXPECT(0x98, gbc.readMem(0x8dba));
        // CB 98 02CB
        gbc.setState(0xd3bc, 0xf9a1, 0x3720, 0xfc1b, 0xbcef, 0x8401, 0x0, 0x1);
        gbc.writeMem(0xd3bc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0xf9a1, gbc.sp());
        EXPECT(0xd3be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3bc));
        EXPECT(0x98, gbc.readMem(0xd3bd));
        // CB 98 02CC
        gbc.setState(0x344b, 0x49a0, 0xb4a0, 0x259c, 0x91f5, 0xc0bc, 0x0, 0x1);
        gbc.writeMem(0x344b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x49a0, gbc.sp());
        EXPECT(0x344d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02CD
        gbc.setState(0xda45, 0x78a4, 0x55c0, 0x645c, 0x480a, 0x52b4, 0x1, 0x0);
        gbc.writeMem(0xda45, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x78a4, gbc.sp());
        EXPECT(0xda47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xda45));
        EXPECT(0x98, gbc.readMem(0xda46));
        // CB 98 02CE
        gbc.setState(0xe04c, 0x9497, 0x78d0, 0x690e, 0x8855, 0xb44, 0x0, 0x1);
        gbc.writeMem(0xe04c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x9497, gbc.sp());
        EXPECT(0xe04e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe04c));
        EXPECT(0x98, gbc.readMem(0xe04d));
        // CB 98 02CF
        gbc.setState(0xef5, 0x19aa, 0xa720, 0x59d2, 0x6bf7, 0xcc7b, 0x1, 0x1);
        gbc.writeMem(0xef5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x19aa, gbc.sp());
        EXPECT(0xef7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02D0
        gbc.setState(0x5aea, 0xd79c, 0x2930, 0x4885, 0xc87d, 0x68f8, 0x1, 0x1);
        gbc.writeMem(0x5aea, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xd79c, gbc.sp());
        EXPECT(0x5aec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02D1
        gbc.setState(0x1982, 0xfe55, 0x3f00, 0x4dc9, 0x99e4, 0x76c0, 0x0, 0x1);
        gbc.writeMem(0x1982, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xfe55, gbc.sp());
        EXPECT(0x1984, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02D2
        gbc.setState(0xd2b5, 0xb5ad, 0x5ea0, 0xf953, 0xebdf, 0xc4a0, 0x0, 0x1);
        gbc.writeMem(0xd2b5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xb5ad, gbc.sp());
        EXPECT(0xd2b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd2b5));
        EXPECT(0x98, gbc.readMem(0xd2b6));
        // CB 98 02D3
        gbc.setState(0xd3c3, 0xf4d1, 0x9f10, 0x9acd, 0x3c6, 0xa984, 0x1, 0x1);
        gbc.writeMem(0xd3c3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0xf4d1, gbc.sp());
        EXPECT(0xd3c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd3c3));
        EXPECT(0x98, gbc.readMem(0xd3c4));
        // CB 98 02D5
        gbc.setState(0x8806, 0xc56d, 0xc460, 0xa0e4, 0x33a1, 0x8ea7, 0x0, 0x1);
        gbc.writeMem(0x8806, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xc56d, gbc.sp());
        EXPECT(0x8808, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8806));
        EXPECT(0x98, gbc.readMem(0x8807));
        // CB 98 02D6
        gbc.setState(0xd027, 0x1ba, 0xaae0, 0xb65a, 0x89c5, 0x5806, 0x0, 0x0);
        gbc.writeMem(0xd027, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x1ba, gbc.sp());
        EXPECT(0xd029, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd027));
        EXPECT(0x98, gbc.readMem(0xd028));
        // CB 98 02D7
        gbc.setState(0x2392, 0x4f92, 0xa290, 0x2f98, 0xac27, 0xd48e, 0x1, 0x1);
        gbc.writeMem(0x2392, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x4f92, gbc.sp());
        EXPECT(0x2394, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02D8
        gbc.setState(0x91d9, 0xf9ea, 0xe2e0, 0x9b25, 0xb85d, 0xd0a, 0x0, 0x1);
        gbc.writeMem(0x91d9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xf9ea, gbc.sp());
        EXPECT(0x91db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x91d9));
        EXPECT(0x98, gbc.readMem(0x91da));
        // CB 98 02D9
        gbc.setState(0xf39, 0x3c63, 0x3470, 0x9c12, 0x1ea, 0x65b3, 0x1, 0x1);
        gbc.writeMem(0xf39, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x3c63, gbc.sp());
        EXPECT(0xf3b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02DA
        gbc.setState(0x1588, 0x7985, 0xb4d0, 0xd047, 0x67f0, 0x4c4c, 0x0, 0x1);
        gbc.writeMem(0x1588, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x7985, gbc.sp());
        EXPECT(0x158a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02DB
        gbc.setState(0x1665, 0x1fc1, 0xaf10, 0xc491, 0x9bac, 0x6c58, 0x0, 0x0);
        gbc.writeMem(0x1665, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x58, gbc.l());
        EXPECT(0x1fc1, gbc.sp());
        EXPECT(0x1667, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02DC
        gbc.setState(0x7a67, 0xe5f, 0xe030, 0x769b, 0xccae, 0x33bd, 0x1, 0x1);
        gbc.writeMem(0x7a67, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xe5f, gbc.sp());
        EXPECT(0x7a69, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02DD
        gbc.setState(0x9ca6, 0x1d48, 0x41f0, 0x76f8, 0x7c9c, 0x1861, 0x0, 0x1);
        gbc.writeMem(0x9ca6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xf8, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x1d48, gbc.sp());
        EXPECT(0x9ca8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ca6));
        EXPECT(0x98, gbc.readMem(0x9ca7));
        // CB 98 02DE
        gbc.setState(0x58c1, 0xa3dd, 0xce60, 0x9042, 0x8815, 0x8afc, 0x1, 0x1);
        gbc.writeMem(0x58c1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xa3dd, gbc.sp());
        EXPECT(0x58c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02DF
        gbc.setState(0xd62f, 0x47aa, 0x8420, 0x6c0e, 0xe134, 0xe587, 0x1, 0x0);
        gbc.writeMem(0xd62f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x47aa, gbc.sp());
        EXPECT(0xd631, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd62f));
        EXPECT(0x98, gbc.readMem(0xd630));
        // CB 98 02E0
        gbc.setState(0xba4, 0x5290, 0xd8e0, 0xf0e1, 0x9e21, 0x3239, 0x0, 0x0);
        gbc.writeMem(0xba4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x5290, gbc.sp());
        EXPECT(0xba6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02E1
        gbc.setState(0xef30, 0x848a, 0x3870, 0x52d8, 0x2475, 0x4f34, 0x1, 0x0);
        gbc.writeMem(0xef30, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x848a, gbc.sp());
        EXPECT(0xef32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xef30));
        EXPECT(0x98, gbc.readMem(0xef31));
        // CB 98 02E2
        gbc.setState(0x1265, 0x5418, 0x2640, 0xc32c, 0xf8aa, 0xe795, 0x1, 0x1);
        gbc.writeMem(0x1265, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x5418, gbc.sp());
        EXPECT(0x1267, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02E3
        gbc.setState(0x9f69, 0x4958, 0x19f0, 0xed15, 0x7ac7, 0x9266, 0x1, 0x1);
        gbc.writeMem(0x9f69, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x4958, gbc.sp());
        EXPECT(0x9f6b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9f69));
        EXPECT(0x98, gbc.readMem(0x9f6a));
        // CB 98 02E4
        gbc.setState(0x2d43, 0x3a12, 0xd5d0, 0x64df, 0x3b03, 0x2803, 0x0, 0x0);
        gbc.writeMem(0x2d43, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x3a12, gbc.sp());
        EXPECT(0x2d45, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02E5
        gbc.setState(0xacc1, 0x892a, 0xf350, 0x58c1, 0x9072, 0x8c1b, 0x0, 0x1);
        gbc.writeMem(0xacc1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x892a, gbc.sp());
        EXPECT(0xacc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xacc1));
        EXPECT(0x98, gbc.readMem(0xacc2));
        // CB 98 02E6
        gbc.setState(0xaf13, 0xafe6, 0xec80, 0x5f79, 0x734b, 0xb81c, 0x0, 0x1);
        gbc.writeMem(0xaf13, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0xafe6, gbc.sp());
        EXPECT(0xaf15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaf13));
        EXPECT(0x98, gbc.readMem(0xaf14));
        // CB 98 02E7
        gbc.setState(0x1e8e, 0xc16b, 0x8bc0, 0x73de, 0xb217, 0x5d87, 0x1, 0x1);
        gbc.writeMem(0x1e8e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xc16b, gbc.sp());
        EXPECT(0x1e90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02E8
        gbc.setState(0x9ade, 0x81a1, 0x2810, 0x9234, 0x4d48, 0x1e4b, 0x0, 0x0);
        gbc.writeMem(0x9ade, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x81a1, gbc.sp());
        EXPECT(0x9ae0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ade));
        EXPECT(0x98, gbc.readMem(0x9adf));
        // CB 98 02E9
        gbc.setState(0xe991, 0x8cc8, 0xe20, 0xa915, 0x85f6, 0xa6f4, 0x0, 0x1);
        gbc.writeMem(0xe991, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x8cc8, gbc.sp());
        EXPECT(0xe993, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe991));
        EXPECT(0x98, gbc.readMem(0xe992));
        // CB 98 02EA
        gbc.setState(0xa22c, 0xa286, 0x4dd0, 0xbd66, 0xab0e, 0xbcf9, 0x0, 0x0);
        gbc.writeMem(0xa22c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0xa286, gbc.sp());
        EXPECT(0xa22e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa22c));
        EXPECT(0x98, gbc.readMem(0xa22d));
        // CB 98 02EB
        gbc.setState(0x60c, 0xba08, 0x8d10, 0x4a17, 0x3196, 0x6b52, 0x1, 0x1);
        gbc.writeMem(0x60c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x96, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xba08, gbc.sp());
        EXPECT(0x60e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02EC
        gbc.setState(0x2cfe, 0x9bf0, 0xe420, 0xb137, 0xd71f, 0xeca6, 0x1, 0x0);
        gbc.writeMem(0x2cfe, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x9bf0, gbc.sp());
        EXPECT(0x2d00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02ED
        gbc.setState(0xcc82, 0xb80d, 0xba70, 0x7958, 0xfad3, 0xe4db, 0x1, 0x0);
        gbc.writeMem(0xcc82, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xb80d, gbc.sp());
        EXPECT(0xcc84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc82));
        EXPECT(0x98, gbc.readMem(0xcc83));
        // CB 98 02EE
        gbc.setState(0xc6dc, 0xfdc4, 0xa3d0, 0xac77, 0x3b1a, 0x5a62, 0x0, 0x0);
        gbc.writeMem(0xc6dc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xfdc4, gbc.sp());
        EXPECT(0xc6de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc6dc));
        EXPECT(0x98, gbc.readMem(0xc6dd));
        // CB 98 02EF
        gbc.setState(0x455f, 0x4e7f, 0x64d0, 0x8ef5, 0x2fef, 0x4d16, 0x0, 0x1);
        gbc.writeMem(0x455f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x4e7f, gbc.sp());
        EXPECT(0x4561, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02F0
        gbc.setState(0xeb56, 0x5f0e, 0xab20, 0x3193, 0x6d2b, 0x80a5, 0x1, 0x1);
        gbc.writeMem(0xeb56, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x5f0e, gbc.sp());
        EXPECT(0xeb58, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb56));
        EXPECT(0x98, gbc.readMem(0xeb57));
        // CB 98 02F1
        gbc.setState(0xc9b8, 0x647e, 0x8640, 0x9e02, 0xd297, 0x7a3a, 0x0, 0x1);
        gbc.writeMem(0xc9b8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x647e, gbc.sp());
        EXPECT(0xc9ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc9b8));
        EXPECT(0x98, gbc.readMem(0xc9b9));
        // CB 98 02F2
        gbc.setState(0x76af, 0x18dd, 0xe050, 0x1bce, 0x2950, 0xe41c, 0x0, 0x1);
        gbc.writeMem(0x76af, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xe4, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x18dd, gbc.sp());
        EXPECT(0x76b1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02F3
        gbc.setState(0x3b0c, 0xd786, 0x3ba0, 0x5731, 0x1029, 0x82a3, 0x1, 0x0);
        gbc.writeMem(0x3b0c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xd786, gbc.sp());
        EXPECT(0x3b0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02F4
        gbc.setState(0x3283, 0x4f4a, 0x85f0, 0x82, 0xdb65, 0x3309, 0x0, 0x1);
        gbc.writeMem(0x3283, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x9, gbc.l());
        EXPECT(0x4f4a, gbc.sp());
        EXPECT(0x3285, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02F5
        gbc.setState(0xb444, 0x8ffc, 0x7700, 0xb13e, 0x8bf9, 0x1515, 0x1, 0x0);
        gbc.writeMem(0xb444, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x8ffc, gbc.sp());
        EXPECT(0xb446, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb444));
        EXPECT(0x98, gbc.readMem(0xb445));
        // CB 98 02F6
        gbc.setState(0xe90f, 0xe0ea, 0x43c0, 0x6b5c, 0xa5cb, 0x7072, 0x0, 0x1);
        gbc.writeMem(0xe90f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xe0ea, gbc.sp());
        EXPECT(0xe911, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe90f));
        EXPECT(0x98, gbc.readMem(0xe910));
        // CB 98 02F7
        gbc.setState(0x2e32, 0xe828, 0xe680, 0x46b, 0x9c06, 0xa56a, 0x0, 0x1);
        gbc.writeMem(0x2e32, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xe828, gbc.sp());
        EXPECT(0x2e34, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02F8
        gbc.setState(0x4ca5, 0x34d5, 0x12a0, 0x83fd, 0x5808, 0xffd4, 0x1, 0x0);
        gbc.writeMem(0x4ca5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x34d5, gbc.sp());
        EXPECT(0x4ca7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02F9
        gbc.setState(0x5b87, 0xc8b4, 0xd9a0, 0xf928, 0x53e8, 0x7046, 0x0, 0x1);
        gbc.writeMem(0x5b87, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc8b4, gbc.sp());
        EXPECT(0x5b89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02FA
        gbc.setState(0x5979, 0xcdb2, 0xc2d0, 0x51ec, 0x565c, 0xa95b, 0x1, 0x0);
        gbc.writeMem(0x5979, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xcdb2, gbc.sp());
        EXPECT(0x597b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 02FB
        gbc.setState(0x634d, 0x487c, 0x4f60, 0x98f, 0xcde4, 0x9cc5, 0x1, 0x1);
        gbc.writeMem(0x634d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x487c, gbc.sp());
        EXPECT(0x634f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 02FC
        gbc.setState(0xe901, 0xaaa7, 0xa960, 0xc59f, 0x27d7, 0xc82d, 0x1, 0x0);
        gbc.writeMem(0xe901, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xaaa7, gbc.sp());
        EXPECT(0xe903, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe901));
        EXPECT(0x98, gbc.readMem(0xe902));
        // CB 98 02FD
        gbc.setState(0xb7ec, 0x2991, 0xa9a0, 0xb8b, 0x8153, 0x585b, 0x1, 0x1);
        gbc.writeMem(0xb7ec, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x53, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x2991, gbc.sp());
        EXPECT(0xb7ee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7ec));
        EXPECT(0x98, gbc.readMem(0xb7ed));
        // CB 98 02FE
        gbc.setState(0x8ace, 0x1fe4, 0xb7d0, 0xac05, 0xcff, 0x4997, 0x1, 0x0);
        gbc.writeMem(0x8ace, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x1fe4, gbc.sp());
        EXPECT(0x8ad0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ace));
        EXPECT(0x98, gbc.readMem(0x8acf));
        // CB 98 02FF
        gbc.setState(0x78d9, 0x2c9a, 0x48f0, 0xce58, 0xd000, 0xa27e, 0x1, 0x1);
        gbc.writeMem(0x78d9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x2c9a, gbc.sp());
        EXPECT(0x78db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0300
        gbc.setState(0x6d85, 0xdacb, 0x3760, 0x5243, 0x20b6, 0xae95, 0x1, 0x0);
        gbc.writeMem(0x6d85, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xdacb, gbc.sp());
        EXPECT(0x6d87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0301
        gbc.setState(0x157a, 0xe976, 0x6930, 0xc3a1, 0x579b, 0x7edb, 0x1, 0x0);
        gbc.writeMem(0x157a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x7e, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xe976, gbc.sp());
        EXPECT(0x157c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0302
        gbc.setState(0x6248, 0x7577, 0xa6b0, 0xb182, 0x13f4, 0xc396, 0x0, 0x0);
        gbc.writeMem(0x6248, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x7577, gbc.sp());
        EXPECT(0x624a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0303
        gbc.setState(0x9ccb, 0xf669, 0xe0a0, 0x2d75, 0x64c6, 0x9f7d, 0x0, 0x1);
        gbc.writeMem(0x9ccb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xf669, gbc.sp());
        EXPECT(0x9ccd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9ccb));
        EXPECT(0x98, gbc.readMem(0x9ccc));
        // CB 98 0304
        gbc.setState(0x6aa2, 0x2770, 0xab10, 0x10f0, 0x160, 0xf22b, 0x1, 0x0);
        gbc.writeMem(0x6aa2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x2770, gbc.sp());
        EXPECT(0x6aa4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0305
        gbc.setState(0x5e00, 0xe850, 0xc1e0, 0xc7f4, 0x4bc1, 0x1bda, 0x0, 0x1);
        gbc.writeMem(0x5e00, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xe850, gbc.sp());
        EXPECT(0x5e02, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0306
        gbc.setState(0x62e1, 0x203e, 0x3880, 0xe1bf, 0xdc2d, 0xa851, 0x1, 0x0);
        gbc.writeMem(0x62e1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x203e, gbc.sp());
        EXPECT(0x62e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0307
        gbc.setState(0xd538, 0x7a5b, 0x280, 0x7cbc, 0x36f, 0xf03e, 0x1, 0x0);
        gbc.writeMem(0xd538, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x7a5b, gbc.sp());
        EXPECT(0xd53a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd538));
        EXPECT(0x98, gbc.readMem(0xd539));
        // CB 98 0308
        gbc.setState(0x90c8, 0x8e23, 0xf3f0, 0x1680, 0x8fb1, 0xd50, 0x1, 0x1);
        gbc.writeMem(0x90c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x8e23, gbc.sp());
        EXPECT(0x90ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x90c8));
        EXPECT(0x98, gbc.readMem(0x90c9));
        // CB 98 0309
        gbc.setState(0x7e36, 0x576e, 0x7670, 0x8639, 0x614b, 0x205c, 0x1, 0x1);
        gbc.writeMem(0x7e36, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x576e, gbc.sp());
        EXPECT(0x7e38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 030A
        gbc.setState(0x6475, 0xb680, 0xa210, 0x9a93, 0xe22a, 0xfbb3, 0x0, 0x1);
        gbc.writeMem(0x6475, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xb680, gbc.sp());
        EXPECT(0x6477, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 030B
        gbc.setState(0x321f, 0xb294, 0x4c60, 0x807e, 0xf37, 0xedac, 0x0, 0x1);
        gbc.writeMem(0x321f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4c, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xb294, gbc.sp());
        EXPECT(0x3221, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 030C
        gbc.setState(0xc33f, 0x7e29, 0xab00, 0x5da1, 0xd631, 0xb2ca, 0x1, 0x0);
        gbc.writeMem(0xc33f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x7e29, gbc.sp());
        EXPECT(0xc341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc33f));
        EXPECT(0x98, gbc.readMem(0xc340));
        // CB 98 030D
        gbc.setState(0x9272, 0x6578, 0x75d0, 0x553f, 0x2b7, 0xdcce, 0x1, 0x1);
        gbc.writeMem(0x9272, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x6578, gbc.sp());
        EXPECT(0x9274, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9272));
        EXPECT(0x98, gbc.readMem(0x9273));
        // CB 98 030E
        gbc.setState(0x2744, 0xd066, 0x9cd0, 0xdd5a, 0x44d0, 0xcf6, 0x1, 0x0);
        gbc.writeMem(0x2744, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xd066, gbc.sp());
        EXPECT(0x2746, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 030F
        gbc.setState(0xdd15, 0x8f83, 0xeab0, 0xa2eb, 0xfe73, 0x8936, 0x1, 0x0);
        gbc.writeMem(0xdd15, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0x8f83, gbc.sp());
        EXPECT(0xdd17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdd15));
        EXPECT(0x98, gbc.readMem(0xdd16));
        // CB 98 0310
        gbc.setState(0x674a, 0x5db, 0xf30, 0xfe20, 0x67c4, 0x1e39, 0x0, 0x0);
        gbc.writeMem(0x674a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x5db, gbc.sp());
        EXPECT(0x674c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0311
        gbc.setState(0x8775, 0x53fc, 0x8120, 0x72d8, 0x77bf, 0x107d, 0x1, 0x0);
        gbc.writeMem(0x8775, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x53fc, gbc.sp());
        EXPECT(0x8777, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8775));
        EXPECT(0x98, gbc.readMem(0x8776));
        // CB 98 0312
        gbc.setState(0x2233, 0x7b39, 0x9170, 0x9db, 0xf988, 0xa4e9, 0x0, 0x0);
        gbc.writeMem(0x2233, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x7b39, gbc.sp());
        EXPECT(0x2235, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0314
        gbc.setState(0x132c, 0x9668, 0xec40, 0x1329, 0xac51, 0x1db6, 0x0, 0x1);
        gbc.writeMem(0x132c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x9668, gbc.sp());
        EXPECT(0x132e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0315
        gbc.setState(0x5b81, 0xd610, 0x6360, 0xea24, 0x6473, 0x4237, 0x0, 0x0);
        gbc.writeMem(0x5b81, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xd610, gbc.sp());
        EXPECT(0x5b83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0316
        gbc.setState(0x3401, 0x53a3, 0x720, 0xab78, 0xa7d6, 0x9ea1, 0x0, 0x0);
        gbc.writeMem(0x3401, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x53a3, gbc.sp());
        EXPECT(0x3403, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0317
        gbc.setState(0x389d, 0xd687, 0x2e60, 0x980e, 0x5fa1, 0xe0a0, 0x1, 0x0);
        gbc.writeMem(0x389d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xd687, gbc.sp());
        EXPECT(0x389f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0318
        gbc.setState(0x2687, 0x5eee, 0x37d0, 0xd0be, 0x5e90, 0xcb9e, 0x1, 0x0);
        gbc.writeMem(0x2687, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0xcb, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x5eee, gbc.sp());
        EXPECT(0x2689, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0319
        gbc.setState(0xbf3e, 0x8f72, 0xaf20, 0x7c01, 0x9557, 0xf72b, 0x1, 0x0);
        gbc.writeMem(0xbf3e, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x8f72, gbc.sp());
        EXPECT(0xbf40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf3e));
        EXPECT(0x98, gbc.readMem(0xbf3f));
        // CB 98 031A
        gbc.setState(0x1825, 0xe240, 0xc220, 0x500f, 0x4c11, 0x752f, 0x0, 0x0);
        gbc.writeMem(0x1825, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x11, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xe240, gbc.sp());
        EXPECT(0x1827, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 031B
        gbc.setState(0x38be, 0xc7a1, 0xd8c0, 0xe618, 0x43f7, 0x68bd, 0x0, 0x1);
        gbc.writeMem(0x38be, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc7a1, gbc.sp());
        EXPECT(0x38c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 031C
        gbc.setState(0x5d25, 0x64f6, 0x9660, 0xaea4, 0x4e40, 0xc233, 0x0, 0x1);
        gbc.writeMem(0x5d25, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x64f6, gbc.sp());
        EXPECT(0x5d27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 031D
        gbc.setState(0x2df3, 0xf0c, 0xd560, 0xb9bf, 0xe774, 0x1226, 0x1, 0x0);
        gbc.writeMem(0x2df3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x12, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xf0c, gbc.sp());
        EXPECT(0x2df5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 031E
        gbc.setState(0xd62, 0x7cf3, 0x9d40, 0xe20, 0x3764, 0x2d7c, 0x1, 0x0);
        gbc.writeMem(0xd62, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x7cf3, gbc.sp());
        EXPECT(0xd64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 031F
        gbc.setState(0x5679, 0x9ed5, 0x9b00, 0xaefd, 0x938f, 0x8517, 0x1, 0x1);
        gbc.writeMem(0x5679, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0x9ed5, gbc.sp());
        EXPECT(0x567b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0320
        gbc.setState(0x4bfd, 0x1bb8, 0x92e0, 0xb5be, 0x45bc, 0xd11d, 0x1, 0x0);
        gbc.writeMem(0x4bfd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x1bb8, gbc.sp());
        EXPECT(0x4bff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0321
        gbc.setState(0xc802, 0xce57, 0xccd0, 0x5f9b, 0x19ff, 0x840, 0x0, 0x0);
        gbc.writeMem(0xc802, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xce57, gbc.sp());
        EXPECT(0xc804, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc802));
        EXPECT(0x98, gbc.readMem(0xc803));
        // CB 98 0322
        gbc.setState(0x529a, 0x8a5f, 0x2c0, 0xc2e8, 0x9afc, 0x3bbc, 0x0, 0x1);
        gbc.writeMem(0x529a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x8a5f, gbc.sp());
        EXPECT(0x529c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0323
        gbc.setState(0x1644, 0xce79, 0x1d90, 0xcba6, 0x9caa, 0x5be7, 0x1, 0x0);
        gbc.writeMem(0x1644, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xce79, gbc.sp());
        EXPECT(0x1646, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0324
        gbc.setState(0x22dd, 0x96b7, 0xf2f0, 0x65a, 0x3b91, 0x634d, 0x1, 0x1);
        gbc.writeMem(0x22dd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x96b7, gbc.sp());
        EXPECT(0x22df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0325
        gbc.setState(0x39d5, 0x97bd, 0xf300, 0x94f3, 0x2eba, 0x46a4, 0x0, 0x1);
        gbc.writeMem(0x39d5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x97bd, gbc.sp());
        EXPECT(0x39d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0326
        gbc.setState(0xded5, 0x2753, 0x4eb0, 0xd79a, 0xe129, 0xa81c, 0x0, 0x0);
        gbc.writeMem(0xded5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x2753, gbc.sp());
        EXPECT(0xded7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xded5));
        EXPECT(0x98, gbc.readMem(0xded6));
        // CB 98 0327
        gbc.setState(0x60fe, 0x7d3b, 0x4e80, 0x8a06, 0x4bdb, 0xeae, 0x1, 0x1);
        gbc.writeMem(0x60fe, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x7d3b, gbc.sp());
        EXPECT(0x6100, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0328
        gbc.setState(0x7cca, 0x6361, 0xed0, 0xf3ef, 0x40d, 0xe168, 0x1, 0x0);
        gbc.writeMem(0x7cca, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x6361, gbc.sp());
        EXPECT(0x7ccc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0329
        gbc.setState(0x7921, 0xfbbb, 0xd1f0, 0x4446, 0xc763, 0x8f4, 0x1, 0x1);
        gbc.writeMem(0x7921, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xfbbb, gbc.sp());
        EXPECT(0x7923, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 032A
        gbc.setState(0x303d, 0x7734, 0x1520, 0x5bab, 0xc6a1, 0x57db, 0x0, 0x1);
        gbc.writeMem(0x303d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x7734, gbc.sp());
        EXPECT(0x303f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 032B
        gbc.setState(0x7060, 0x9fea, 0x5820, 0x30d4, 0x49f0, 0x7910, 0x0, 0x0);
        gbc.writeMem(0x7060, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x9fea, gbc.sp());
        EXPECT(0x7062, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 032C
        gbc.setState(0x3332, 0x5a70, 0xae80, 0x7266, 0x91b4, 0x3574, 0x1, 0x0);
        gbc.writeMem(0x3332, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x5a70, gbc.sp());
        EXPECT(0x3334, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 032D
        gbc.setState(0x1ba3, 0x3d6a, 0x5300, 0x91d, 0x6c60, 0x633d, 0x1, 0x1);
        gbc.writeMem(0x1ba3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x3d6a, gbc.sp());
        EXPECT(0x1ba5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 032E
        gbc.setState(0xbace, 0xdcc1, 0xbe0, 0xc544, 0x7a69, 0xb125, 0x1, 0x1);
        gbc.writeMem(0xbace, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0xdcc1, gbc.sp());
        EXPECT(0xbad0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbace));
        EXPECT(0x98, gbc.readMem(0xbacf));
        // CB 98 032F
        gbc.setState(0x12b1, 0x236f, 0xc840, 0x76c, 0x9f, 0xb928, 0x1, 0x1);
        gbc.writeMem(0x12b1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x236f, gbc.sp());
        EXPECT(0x12b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0330
        gbc.setState(0x2fd3, 0x3021, 0xe820, 0x8fcd, 0xfedf, 0xbe65, 0x1, 0x0);
        gbc.writeMem(0x2fd3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x3021, gbc.sp());
        EXPECT(0x2fd5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0331
        gbc.setState(0x5f8c, 0xb77d, 0xb720, 0x99b7, 0x37c3, 0xa216, 0x1, 0x1);
        gbc.writeMem(0x5f8c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0xb77d, gbc.sp());
        EXPECT(0x5f8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0332
        gbc.setState(0x8ac9, 0xf55f, 0x8970, 0x7afc, 0x8f1a, 0x89b9, 0x1, 0x0);
        gbc.writeMem(0x8ac9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xf55f, gbc.sp());
        EXPECT(0x8acb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ac9));
        EXPECT(0x98, gbc.readMem(0x8aca));
        // CB 98 0333
        gbc.setState(0x508c, 0x6907, 0xaf30, 0x5add, 0xc5ee, 0x3200, 0x0, 0x1);
        gbc.writeMem(0x508c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6907, gbc.sp());
        EXPECT(0x508e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0334
        gbc.setState(0xc01d, 0x80c3, 0x2260, 0x13a3, 0xfdf5, 0xbe3, 0x1, 0x0);
        gbc.writeMem(0xc01d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x80c3, gbc.sp());
        EXPECT(0xc01f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc01d));
        EXPECT(0x98, gbc.readMem(0xc01e));
        // CB 98 0335
        gbc.setState(0x94f4, 0x80, 0x6ae0, 0xecec, 0x14ed, 0x68c7, 0x0, 0x0);
        gbc.writeMem(0x94f4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x80, gbc.sp());
        EXPECT(0x94f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x94f4));
        EXPECT(0x98, gbc.readMem(0x94f5));
        // CB 98 0336
        gbc.setState(0x5dd4, 0x6a57, 0x4490, 0x24bb, 0x7785, 0xe16c, 0x1, 0x0);
        gbc.writeMem(0x5dd4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x6a57, gbc.sp());
        EXPECT(0x5dd6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0337
        gbc.setState(0x696, 0xe525, 0x20f0, 0x991, 0x3812, 0x14d8, 0x1, 0x1);
        gbc.writeMem(0x696, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0xe525, gbc.sp());
        EXPECT(0x698, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0338
        gbc.setState(0x1a3a, 0x84aa, 0xc520, 0x3cd1, 0x72a, 0x9ddd, 0x1, 0x1);
        gbc.writeMem(0x1a3a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x84aa, gbc.sp());
        EXPECT(0x1a3c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0339
        gbc.setState(0xe389, 0xe412, 0x80e0, 0x24bc, 0x4912, 0x83e9, 0x1, 0x0);
        gbc.writeMem(0xe389, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xe412, gbc.sp());
        EXPECT(0xe38b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe389));
        EXPECT(0x98, gbc.readMem(0xe38a));
        // CB 98 033A
        gbc.setState(0xb5ae, 0xd15, 0x3280, 0x83d, 0xc244, 0x51fa, 0x1, 0x0);
        gbc.writeMem(0xb5ae, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xd15, gbc.sp());
        EXPECT(0xb5b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb5ae));
        EXPECT(0x98, gbc.readMem(0xb5af));
        // CB 98 033B
        gbc.setState(0xd471, 0xe524, 0x3950, 0x22d4, 0x3459, 0x1a2c, 0x1, 0x1);
        gbc.writeMem(0xd471, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0x34, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xe524, gbc.sp());
        EXPECT(0xd473, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd471));
        EXPECT(0x98, gbc.readMem(0xd472));
        // CB 98 033C
        gbc.setState(0x43f6, 0x19e4, 0xd540, 0x6b54, 0xb352, 0x839c, 0x1, 0x0);
        gbc.writeMem(0x43f6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x19e4, gbc.sp());
        EXPECT(0x43f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 033D
        gbc.setState(0xaff9, 0x23d, 0x100, 0x71dc, 0x6d1c, 0xa152, 0x1, 0x0);
        gbc.writeMem(0xaff9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x23d, gbc.sp());
        EXPECT(0xaffb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaff9));
        EXPECT(0x98, gbc.readMem(0xaffa));
        // CB 98 033E
        gbc.setState(0xb7b4, 0x4ba4, 0xac40, 0xa09d, 0xb2fb, 0xf147, 0x0, 0x1);
        gbc.writeMem(0xb7b4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x4ba4, gbc.sp());
        EXPECT(0xb7b6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb7b4));
        EXPECT(0x98, gbc.readMem(0xb7b5));
        // CB 98 033F
        gbc.setState(0x4ff5, 0x41d0, 0xbf70, 0xd6f9, 0xe200, 0xd613, 0x0, 0x0);
        gbc.writeMem(0x4ff5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x41d0, gbc.sp());
        EXPECT(0x4ff7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0340
        gbc.setState(0x32d8, 0x1132, 0x1250, 0x4ee, 0x567, 0xf08c, 0x1, 0x1);
        gbc.writeMem(0x32d8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x8c, gbc.l());
        EXPECT(0x1132, gbc.sp());
        EXPECT(0x32da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0341
        gbc.setState(0xa886, 0x45ab, 0x1100, 0x8d05, 0x2a8, 0xebce, 0x1, 0x1);
        gbc.writeMem(0xa886, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x45ab, gbc.sp());
        EXPECT(0xa888, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa886));
        EXPECT(0x98, gbc.readMem(0xa887));
        // CB 98 0342
        gbc.setState(0x8bc2, 0x5768, 0x3700, 0x61fc, 0x75, 0x8827, 0x1, 0x0);
        gbc.writeMem(0x8bc2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x5768, gbc.sp());
        EXPECT(0x8bc4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8bc2));
        EXPECT(0x98, gbc.readMem(0x8bc3));
        // CB 98 0344
        gbc.setState(0x26d0, 0x8985, 0x6a90, 0xd8bd, 0xe339, 0x6c5e, 0x1, 0x0);
        gbc.writeMem(0x26d0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x8985, gbc.sp());
        EXPECT(0x26d2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0345
        gbc.setState(0x6f47, 0x39e5, 0x61d0, 0x97ff, 0xe651, 0x3900, 0x0, 0x0);
        gbc.writeMem(0x6f47, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x39e5, gbc.sp());
        EXPECT(0x6f49, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0346
        gbc.setState(0x7742, 0xb9bc, 0x44c0, 0xb37e, 0x1fba, 0xbd42, 0x1, 0x1);
        gbc.writeMem(0x7742, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xb9bc, gbc.sp());
        EXPECT(0x7744, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0347
        gbc.setState(0x9257, 0xd918, 0x6c50, 0xf1fa, 0x2320, 0xe74a, 0x1, 0x1);
        gbc.writeMem(0x9257, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xd918, gbc.sp());
        EXPECT(0x9259, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9257));
        EXPECT(0x98, gbc.readMem(0x9258));
        // CB 98 0348
        gbc.setState(0xd948, 0x6d0d, 0x6a10, 0xcce0, 0xaa82, 0x3fe2, 0x0, 0x1);
        gbc.writeMem(0xd948, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x6d0d, gbc.sp());
        EXPECT(0xd94a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd948));
        EXPECT(0x98, gbc.readMem(0xd949));
        // CB 98 0349
        gbc.setState(0xa325, 0x68af, 0x78c0, 0xe134, 0xba60, 0x3b94, 0x0, 0x1);
        gbc.writeMem(0xa325, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x68af, gbc.sp());
        EXPECT(0xa327, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa325));
        EXPECT(0x98, gbc.readMem(0xa326));
        // CB 98 034B
        gbc.setState(0xbf67, 0x8eea, 0xb970, 0xf006, 0xfd06, 0x210c, 0x0, 0x1);
        gbc.writeMem(0xbf67, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x8eea, gbc.sp());
        EXPECT(0xbf69, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xbf67));
        EXPECT(0x98, gbc.readMem(0xbf68));
        // CB 98 034C
        gbc.setState(0x6182, 0x9c77, 0x5400, 0x4c4a, 0xeb14, 0x5581, 0x1, 0x1);
        gbc.writeMem(0x6182, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x54, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0x9c77, gbc.sp());
        EXPECT(0x6184, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 034D
        gbc.setState(0x164a, 0x5c56, 0xbc40, 0x80e0, 0x6dea, 0x7f92, 0x0, 0x0);
        gbc.writeMem(0x164a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x5c56, gbc.sp());
        EXPECT(0x164c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 034E
        gbc.setState(0x81f1, 0xb95c, 0x1c20, 0xbfb, 0x7b15, 0x87ea, 0x0, 0x0);
        gbc.writeMem(0x81f1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xb95c, gbc.sp());
        EXPECT(0x81f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x81f1));
        EXPECT(0x98, gbc.readMem(0x81f2));
        // CB 98 034F
        gbc.setState(0x1ecb, 0xa2bb, 0xaff0, 0x3f79, 0x2798, 0x5c44, 0x1, 0x1);
        gbc.writeMem(0x1ecb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xa2bb, gbc.sp());
        EXPECT(0x1ecd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0350
        gbc.setState(0x9d39, 0x7b56, 0xe7b0, 0x92f0, 0xde1a, 0xeb32, 0x0, 0x0);
        gbc.writeMem(0x9d39, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x7b56, gbc.sp());
        EXPECT(0x9d3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9d39));
        EXPECT(0x98, gbc.readMem(0x9d3a));
        // CB 98 0351
        gbc.setState(0xa555, 0x6843, 0xa810, 0xee99, 0xc1e0, 0xe257, 0x0, 0x1);
        gbc.writeMem(0xa555, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x6843, gbc.sp());
        EXPECT(0xa557, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa555));
        EXPECT(0x98, gbc.readMem(0xa556));
        // CB 98 0352
        gbc.setState(0x784a, 0x9ffc, 0x9f10, 0x9e2a, 0x810b, 0x3abf, 0x1, 0x0);
        gbc.writeMem(0x784a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x9ffc, gbc.sp());
        EXPECT(0x784c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0353
        gbc.setState(0xee94, 0x2f93, 0xad80, 0xc48c, 0x6e00, 0x62df, 0x0, 0x0);
        gbc.writeMem(0xee94, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x2f93, gbc.sp());
        EXPECT(0xee96, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xee94));
        EXPECT(0x98, gbc.readMem(0xee95));
        // CB 98 0354
        gbc.setState(0x8ce4, 0x55af, 0x130, 0x81ee, 0xc057, 0xcad5, 0x1, 0x0);
        gbc.writeMem(0x8ce4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x55af, gbc.sp());
        EXPECT(0x8ce6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8ce4));
        EXPECT(0x98, gbc.readMem(0x8ce5));
        // CB 98 0355
        gbc.setState(0x6fe6, 0x783b, 0x1bb0, 0x61d0, 0x7a79, 0x527d, 0x1, 0x0);
        gbc.writeMem(0x6fe6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x783b, gbc.sp());
        EXPECT(0x6fe8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0356
        gbc.setState(0x2f24, 0xc04c, 0x3490, 0xab53, 0xb772, 0x99ef, 0x0, 0x0);
        gbc.writeMem(0x2f24, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xc04c, gbc.sp());
        EXPECT(0x2f26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0357
        gbc.setState(0xd80c, 0x82f4, 0x3b60, 0xf234, 0xd6f4, 0xca1c, 0x1, 0x0);
        gbc.writeMem(0xd80c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x82f4, gbc.sp());
        EXPECT(0xd80e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd80c));
        EXPECT(0x98, gbc.readMem(0xd80d));
        // CB 98 0358
        gbc.setState(0x419d, 0xa79, 0xa370, 0x5f1c, 0xa77b, 0x244, 0x1, 0x1);
        gbc.writeMem(0x419d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xa79, gbc.sp());
        EXPECT(0x419f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0359
        gbc.setState(0xd002, 0xad1, 0xcc90, 0x3dbb, 0xe5a2, 0xcf36, 0x0, 0x1);
        gbc.writeMem(0xd002, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x36, gbc.l());
        EXPECT(0xad1, gbc.sp());
        EXPECT(0xd004, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd002));
        EXPECT(0x98, gbc.readMem(0xd003));
        // CB 98 035A
        gbc.setState(0x99aa, 0xce9e, 0x1210, 0xcd2f, 0x2978, 0xd635, 0x1, 0x0);
        gbc.writeMem(0x99aa, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xce9e, gbc.sp());
        EXPECT(0x99ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x99aa));
        EXPECT(0x98, gbc.readMem(0x99ab));
        // CB 98 035B
        gbc.setState(0x77c, 0x842f, 0xba10, 0x72ff, 0x858, 0xeb3b, 0x0, 0x0);
        gbc.writeMem(0x77c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x8, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x842f, gbc.sp());
        EXPECT(0x77e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 035C
        gbc.setState(0x8b61, 0xd76d, 0x2200, 0xdcd6, 0xced6, 0xdf1a, 0x1, 0x1);
        gbc.writeMem(0x8b61, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd76d, gbc.sp());
        EXPECT(0x8b63, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8b61));
        EXPECT(0x98, gbc.readMem(0x8b62));
        // CB 98 035E
        gbc.setState(0x95db, 0x41a0, 0xc0a0, 0xd6e1, 0x2434, 0xd052, 0x1, 0x1);
        gbc.writeMem(0x95db, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x41a0, gbc.sp());
        EXPECT(0x95dd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x95db));
        EXPECT(0x98, gbc.readMem(0x95dc));
        // CB 98 035F
        gbc.setState(0xa432, 0xe094, 0x5840, 0xb1db, 0x9da6, 0x23cf, 0x0, 0x0);
        gbc.writeMem(0xa432, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xe094, gbc.sp());
        EXPECT(0xa434, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa432));
        EXPECT(0x98, gbc.readMem(0xa433));
        // CB 98 0360
        gbc.setState(0x57ab, 0x702d, 0xe480, 0xb035, 0x13bd, 0x67d1, 0x1, 0x0);
        gbc.writeMem(0x57ab, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x702d, gbc.sp());
        EXPECT(0x57ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0361
        gbc.setState(0x27d8, 0xce6c, 0x7b50, 0x1cc6, 0xb81d, 0xb5e8, 0x1, 0x0);
        gbc.writeMem(0x27d8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xb8, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xce6c, gbc.sp());
        EXPECT(0x27da, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0362
        gbc.setState(0x2019, 0x9765, 0x9370, 0xacb0, 0xd031, 0xf620, 0x0, 0x1);
        gbc.writeMem(0x2019, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x9765, gbc.sp());
        EXPECT(0x201b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0363
        gbc.setState(0xc0fc, 0xaf38, 0xb950, 0x5204, 0xb129, 0xeb93, 0x1, 0x1);
        gbc.writeMem(0xc0fc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xaf38, gbc.sp());
        EXPECT(0xc0fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc0fc));
        EXPECT(0x98, gbc.readMem(0xc0fd));
        // CB 98 0364
        gbc.setState(0xa31f, 0xbedd, 0xd060, 0x5b3e, 0x73da, 0xbba5, 0x1, 0x0);
        gbc.writeMem(0xa31f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xbedd, gbc.sp());
        EXPECT(0xa321, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa31f));
        EXPECT(0x98, gbc.readMem(0xa320));
        // CB 98 0365
        gbc.setState(0xb703, 0x82a7, 0xf520, 0x11f4, 0x57aa, 0xba74, 0x0, 0x1);
        gbc.writeMem(0xb703, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x82a7, gbc.sp());
        EXPECT(0xb705, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb703));
        EXPECT(0x98, gbc.readMem(0xb704));
        // CB 98 0366
        gbc.setState(0x660c, 0x8ff6, 0x22a0, 0x4049, 0x1039, 0x8f33, 0x0, 0x1);
        gbc.writeMem(0x660c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x8ff6, gbc.sp());
        EXPECT(0x660e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0367
        gbc.setState(0xe6d, 0xee3a, 0xe5c0, 0xbfac, 0x5dcd, 0x40ac, 0x1, 0x1);
        gbc.writeMem(0xe6d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xee3a, gbc.sp());
        EXPECT(0xe6f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0368
        gbc.setState(0x9028, 0x9caf, 0xbc50, 0x37a3, 0x708b, 0x7984, 0x0, 0x0);
        gbc.writeMem(0x9028, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x9caf, gbc.sp());
        EXPECT(0x902a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9028));
        EXPECT(0x98, gbc.readMem(0x9029));
        // CB 98 0369
        gbc.setState(0x38d, 0x957d, 0x8b10, 0x2556, 0xc4a1, 0x1863, 0x0, 0x1);
        gbc.writeMem(0x38d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x957d, gbc.sp());
        EXPECT(0x38f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 036A
        gbc.setState(0x44fc, 0xe463, 0x8900, 0xc0ea, 0x70b1, 0x84a, 0x1, 0x1);
        gbc.writeMem(0x44fc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xe463, gbc.sp());
        EXPECT(0x44fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 036B
        gbc.setState(0xc4bf, 0x9786, 0x6710, 0x525a, 0x541c, 0xe2b5, 0x1, 0x1);
        gbc.writeMem(0xc4bf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x9786, gbc.sp());
        EXPECT(0xc4c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc4bf));
        EXPECT(0x98, gbc.readMem(0xc4c0));
        // CB 98 036C
        gbc.setState(0xde31, 0xe939, 0x39c0, 0xf6cb, 0x5b0a, 0x8e2c, 0x1, 0x1);
        gbc.writeMem(0xde31, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xe939, gbc.sp());
        EXPECT(0xde33, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xde31));
        EXPECT(0x98, gbc.readMem(0xde32));
        // CB 98 036D
        gbc.setState(0x74bc, 0x82ff, 0x1f90, 0xb8c1, 0x922e, 0xb772, 0x1, 0x1);
        gbc.writeMem(0x74bc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0xc1, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x82ff, gbc.sp());
        EXPECT(0x74be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 036E
        gbc.setState(0xe2dd, 0xf18f, 0x8bf0, 0xa6dc, 0xa90a, 0x863e, 0x0, 0x0);
        gbc.writeMem(0xe2dd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0xf18f, gbc.sp());
        EXPECT(0xe2df, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe2dd));
        EXPECT(0x98, gbc.readMem(0xe2de));
        // CB 98 036F
        gbc.setState(0x8e3d, 0xe52f, 0xea90, 0x6d79, 0xb4c4, 0xbe85, 0x1, 0x1);
        gbc.writeMem(0x8e3d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0xe52f, gbc.sp());
        EXPECT(0x8e3f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e3d));
        EXPECT(0x98, gbc.readMem(0x8e3e));
        // CB 98 0370
        gbc.setState(0x6007, 0xe759, 0xde70, 0x9993, 0xc74d, 0xc2d6, 0x1, 0x1);
        gbc.writeMem(0x6007, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xe759, gbc.sp());
        EXPECT(0x6009, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0371
        gbc.setState(0x523b, 0x9d0a, 0xdc30, 0x1eb5, 0x7390, 0x475c, 0x1, 0x0);
        gbc.writeMem(0x523b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x9d0a, gbc.sp());
        EXPECT(0x523d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0372
        gbc.setState(0x708b, 0xdd64, 0x8d0, 0xaf64, 0xa213, 0xdb12, 0x1, 0x0);
        gbc.writeMem(0x708b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xdd64, gbc.sp());
        EXPECT(0x708d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0373
        gbc.setState(0x6b4a, 0x5e70, 0x1a70, 0x1af6, 0x3efa, 0xdb51, 0x0, 0x1);
        gbc.writeMem(0x6b4a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x5e70, gbc.sp());
        EXPECT(0x6b4c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0374
        gbc.setState(0x566b, 0x6bbf, 0x4690, 0x823c, 0xe801, 0x2157, 0x1, 0x1);
        gbc.writeMem(0x566b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0x6bbf, gbc.sp());
        EXPECT(0x566d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0375
        gbc.setState(0x45d, 0xf5a5, 0x7520, 0x341e, 0x8e97, 0x6ef8, 0x0, 0x0);
        gbc.writeMem(0x45d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xf5a5, gbc.sp());
        EXPECT(0x45f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0376
        gbc.setState(0x2593, 0x717b, 0xc6e0, 0x4f3d, 0x14cd, 0xe80, 0x1, 0x0);
        gbc.writeMem(0x2593, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x717b, gbc.sp());
        EXPECT(0x2595, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0377
        gbc.setState(0x49a8, 0xc2bb, 0xab40, 0xdebf, 0x1623, 0x62fe, 0x1, 0x0);
        gbc.writeMem(0x49a8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xc2bb, gbc.sp());
        EXPECT(0x49aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0378
        gbc.setState(0x7d60, 0xa9a4, 0x2040, 0x5847, 0x2c21, 0x5cbd, 0x1, 0x0);
        gbc.writeMem(0x7d60, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xa9a4, gbc.sp());
        EXPECT(0x7d62, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0379
        gbc.setState(0xd871, 0xfe7f, 0x8ef0, 0xf943, 0x8a5d, 0x10f2, 0x0, 0x1);
        gbc.writeMem(0xd871, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xfe7f, gbc.sp());
        EXPECT(0xd873, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd871));
        EXPECT(0x98, gbc.readMem(0xd872));
        // CB 98 037A
        gbc.setState(0x2958, 0x1151, 0x9a20, 0x23fb, 0xd036, 0xfcfe, 0x1, 0x0);
        gbc.writeMem(0x2958, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xfb, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xfc, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x1151, gbc.sp());
        EXPECT(0x295a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 037B
        gbc.setState(0xe669, 0x5c32, 0xd120, 0x61, 0x15df, 0x5e72, 0x1, 0x1);
        gbc.writeMem(0xe669, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x5e, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x5c32, gbc.sp());
        EXPECT(0xe66b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe669));
        EXPECT(0x98, gbc.readMem(0xe66a));
        // CB 98 037C
        gbc.setState(0x1cfc, 0xc864, 0x9b60, 0x28ff, 0x588, 0x5432, 0x0, 0x0);
        gbc.writeMem(0x1cfc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xc864, gbc.sp());
        EXPECT(0x1cfe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 037D
        gbc.setState(0xcc1f, 0x9ac5, 0x3900, 0x6d2b, 0x6317, 0x9996, 0x1, 0x0);
        gbc.writeMem(0xcc1f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x9ac5, gbc.sp());
        EXPECT(0xcc21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc1f));
        EXPECT(0x98, gbc.readMem(0xcc20));
        // CB 98 037E
        gbc.setState(0xce63, 0x236a, 0x1b80, 0xaf83, 0xe9ce, 0xc61d, 0x0, 0x1);
        gbc.writeMem(0xce63, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x236a, gbc.sp());
        EXPECT(0xce65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xce63));
        EXPECT(0x98, gbc.readMem(0xce64));
        // CB 98 037F
        gbc.setState(0x7990, 0x740, 0xbcd0, 0x25cb, 0x9b0b, 0x9cb9, 0x1, 0x1);
        gbc.writeMem(0x7990, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x740, gbc.sp());
        EXPECT(0x7992, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0380
        gbc.setState(0x2865, 0xf4f2, 0x9580, 0x7d35, 0x75f3, 0x9bb, 0x1, 0x1);
        gbc.writeMem(0x2865, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xf4f2, gbc.sp());
        EXPECT(0x2867, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0381
        gbc.setState(0x7eeb, 0x1a87, 0x5960, 0x96b4, 0x5558, 0x808a, 0x0, 0x0);
        gbc.writeMem(0x7eeb, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x1a87, gbc.sp());
        EXPECT(0x7eed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0382
        gbc.setState(0x67e4, 0x7666, 0xf520, 0x3c7, 0xc61f, 0x637d, 0x0, 0x1);
        gbc.writeMem(0x67e4, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf5, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x7666, gbc.sp());
        EXPECT(0x67e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0383
        gbc.setState(0x262d, 0x195a, 0x6c90, 0x3118, 0x578b, 0x2128, 0x0, 0x1);
        gbc.writeMem(0x262d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x195a, gbc.sp());
        EXPECT(0x262f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0384
        gbc.setState(0x109b, 0x4bc7, 0x5e60, 0x8e7c, 0xd163, 0x3025, 0x0, 0x0);
        gbc.writeMem(0x109b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x4bc7, gbc.sp());
        EXPECT(0x109d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0385
        gbc.setState(0xb4ec, 0x505b, 0xad80, 0x168e, 0x5cc8, 0x8a3b, 0x0, 0x0);
        gbc.writeMem(0xb4ec, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x505b, gbc.sp());
        EXPECT(0xb4ee, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb4ec));
        EXPECT(0x98, gbc.readMem(0xb4ed));
        // CB 98 0386
        gbc.setState(0x2e90, 0xe9c6, 0x53f0, 0x9615, 0xd033, 0x198, 0x1, 0x1);
        gbc.writeMem(0x2e90, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xe9c6, gbc.sp());
        EXPECT(0x2e92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0387
        gbc.setState(0xb8c8, 0xb003, 0x12d0, 0x98e6, 0x668b, 0x45f4, 0x0, 0x0);
        gbc.writeMem(0xb8c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xb003, gbc.sp());
        EXPECT(0xb8ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb8c8));
        EXPECT(0x98, gbc.readMem(0xb8c9));
        // CB 98 0388
        gbc.setState(0xea36, 0xda89, 0x1dc0, 0xddda, 0x9f24, 0xc0b8, 0x1, 0x0);
        gbc.writeMem(0xea36, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xda89, gbc.sp());
        EXPECT(0xea38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xea36));
        EXPECT(0x98, gbc.readMem(0xea37));
        // CB 98 0389
        gbc.setState(0x37f6, 0x3830, 0x6870, 0x7ead, 0x94b8, 0x8c8d, 0x0, 0x1);
        gbc.writeMem(0x37f6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x3830, gbc.sp());
        EXPECT(0x37f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 038A
        gbc.setState(0x4dd8, 0x7bef, 0x4650, 0xff3f, 0xc378, 0x8d39, 0x1, 0x1);
        gbc.writeMem(0x4dd8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x7bef, gbc.sp());
        EXPECT(0x4dda, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 038B
        gbc.setState(0x9da3, 0xb32d, 0xdb70, 0x509f, 0x870b, 0xa902, 0x1, 0x1);
        gbc.writeMem(0x9da3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xb32d, gbc.sp());
        EXPECT(0x9da5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9da3));
        EXPECT(0x98, gbc.readMem(0x9da4));
        // CB 98 038C
        gbc.setState(0x6bf8, 0xa0cc, 0x5f10, 0x3712, 0x3256, 0x50e8, 0x1, 0x1);
        gbc.writeMem(0x6bf8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xe8, gbc.l());
        EXPECT(0xa0cc, gbc.sp());
        EXPECT(0x6bfa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 038D
        gbc.setState(0x85f6, 0xd64e, 0x34f0, 0xb4e2, 0x827a, 0xf411, 0x0, 0x1);
        gbc.writeMem(0x85f6, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0xd64e, gbc.sp());
        EXPECT(0x85f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85f6));
        EXPECT(0x98, gbc.readMem(0x85f7));
        // CB 98 038E
        gbc.setState(0x3161, 0xa1f7, 0x6730, 0x8008, 0x21e0, 0x2318, 0x1, 0x0);
        gbc.writeMem(0x3161, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xa1f7, gbc.sp());
        EXPECT(0x3163, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 038F
        gbc.setState(0x69bd, 0x445b, 0xd0f0, 0xee84, 0x83ef, 0x5a19, 0x1, 0x0);
        gbc.writeMem(0x69bd, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x445b, gbc.sp());
        EXPECT(0x69bf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0390
        gbc.setState(0x3f82, 0x8a05, 0x30b0, 0x9929, 0x3dbc, 0xc4be, 0x1, 0x0);
        gbc.writeMem(0x3f82, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8a05, gbc.sp());
        EXPECT(0x3f84, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 0391
        gbc.setState(0xb6c5, 0xd7c0, 0xce10, 0xfd47, 0xb4bf, 0xaf5, 0x0, 0x0);
        gbc.writeMem(0xb6c5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xd7c0, gbc.sp());
        EXPECT(0xb6c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb6c5));
        EXPECT(0x98, gbc.readMem(0xb6c6));
        // CB 98 0392
        gbc.setState(0x2254, 0x91ef, 0xc5c0, 0xff69, 0x5c4e, 0x8d1a, 0x0, 0x1);
        gbc.writeMem(0x2254, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x91ef, gbc.sp());
        EXPECT(0x2256, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0393
        gbc.setState(0x3f73, 0x4cae, 0x35c0, 0x363e, 0xa354, 0xd563, 0x1, 0x1);
        gbc.writeMem(0x3f73, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0x4cae, gbc.sp());
        EXPECT(0x3f75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 0394
        gbc.setState(0xc762, 0x2621, 0x4550, 0xa32e, 0xe8d6, 0xf67, 0x1, 0x1);
        gbc.writeMem(0xc762, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x2621, gbc.sp());
        EXPECT(0xc764, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc762));
        EXPECT(0x98, gbc.readMem(0xc763));
        // CB 98 0395
        gbc.setState(0xdc5b, 0x967b, 0xfd00, 0x763c, 0x4374, 0xb047, 0x0, 0x1);
        gbc.writeMem(0xdc5b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x967b, gbc.sp());
        EXPECT(0xdc5d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xdc5b));
        EXPECT(0x98, gbc.readMem(0xdc5c));
        // CB 98 0396
        gbc.setState(0x9c4d, 0x8285, 0xbbb0, 0xd959, 0xf158, 0xb15, 0x0, 0x0);
        gbc.writeMem(0x9c4d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x8285, gbc.sp());
        EXPECT(0x9c4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x9c4d));
        EXPECT(0x98, gbc.readMem(0x9c4e));
        // CB 98 0397
        gbc.setState(0xd324, 0xb831, 0x1b30, 0xb682, 0x5ddd, 0x70fa, 0x1, 0x0);
        gbc.writeMem(0xd324, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xb831, gbc.sp());
        EXPECT(0xd326, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd324));
        EXPECT(0x98, gbc.readMem(0xd325));
        // CB 98 0399
        gbc.setState(0x3baf, 0x5e9d, 0xbb80, 0xe9b, 0x5af3, 0x7b3f, 0x1, 0x1);
        gbc.writeMem(0x3baf, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x5e9d, gbc.sp());
        EXPECT(0x3bb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 039B
        gbc.setState(0x43c2, 0x5f1f, 0xce60, 0x34a1, 0x4b0, 0xc95e, 0x1, 0x1);
        gbc.writeMem(0x43c2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0x5f1f, gbc.sp());
        EXPECT(0x43c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 039C
        gbc.setState(0x1686, 0x6bb6, 0xd8e0, 0x25b9, 0xffee, 0x8cb9, 0x1, 0x0);
        gbc.writeMem(0x1686, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x6bb6, gbc.sp());
        EXPECT(0x1688, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 039D
        gbc.setState(0xd6f8, 0x925a, 0xf780, 0xf89e, 0xb187, 0xab12, 0x1, 0x1);
        gbc.writeMem(0xd6f8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0x925a, gbc.sp());
        EXPECT(0xd6fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd6f8));
        EXPECT(0x98, gbc.readMem(0xd6f9));
        // CB 98 039F
        gbc.setState(0x6bb5, 0x8f7e, 0xa400, 0x6dc6, 0xb288, 0xaeef, 0x1, 0x0);
        gbc.writeMem(0x6bb5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x88, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x8f7e, gbc.sp());
        EXPECT(0x6bb7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03A0
        gbc.setState(0x293c, 0xd2ef, 0xde80, 0x1f84, 0xac06, 0xf18, 0x0, 0x0);
        gbc.writeMem(0x293c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0xd2ef, gbc.sp());
        EXPECT(0x293e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03A1
        gbc.setState(0x2165, 0x2222, 0xbb60, 0xdade, 0xe873, 0xbf23, 0x1, 0x0);
        gbc.writeMem(0x2165, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x2222, gbc.sp());
        EXPECT(0x2167, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03A2
        gbc.setState(0x5e27, 0xc650, 0xc100, 0x584b, 0x15b7, 0x2502, 0x0, 0x1);
        gbc.writeMem(0x5e27, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xc650, gbc.sp());
        EXPECT(0x5e29, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03A3
        gbc.setState(0xcc63, 0xa7a, 0xd230, 0xc66d, 0x1036, 0x4e3a, 0x1, 0x0);
        gbc.writeMem(0xcc63, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xa7a, gbc.sp());
        EXPECT(0xcc65, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcc63));
        EXPECT(0x98, gbc.readMem(0xcc64));
        // CB 98 03A5
        gbc.setState(0x5c33, 0x1969, 0xca00, 0xb52f, 0x3fb5, 0x2b7f, 0x0, 0x1);
        gbc.writeMem(0x5c33, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x1969, gbc.sp());
        EXPECT(0x5c35, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03A6
        gbc.setState(0xc95f, 0x26ec, 0x5960, 0xf440, 0x298a, 0x2e08, 0x1, 0x1);
        gbc.writeMem(0xc95f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x26ec, gbc.sp());
        EXPECT(0xc961, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc95f));
        EXPECT(0x98, gbc.readMem(0xc960));
        // CB 98 03A7
        gbc.setState(0xc1a3, 0x6730, 0xd8a0, 0xc453, 0xf5c2, 0x7c51, 0x0, 0x1);
        gbc.writeMem(0xc1a3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x6730, gbc.sp());
        EXPECT(0xc1a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc1a3));
        EXPECT(0x98, gbc.readMem(0xc1a4));
        // CB 98 03A8
        gbc.setState(0xa65f, 0x44cc, 0xac40, 0x6ea5, 0xedce, 0xa6c0, 0x0, 0x1);
        gbc.writeMem(0xa65f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x44cc, gbc.sp());
        EXPECT(0xa661, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa65f));
        EXPECT(0x98, gbc.readMem(0xa660));
        // CB 98 03A9
        gbc.setState(0x85e3, 0x23bf, 0xde10, 0x6c62, 0x9b22, 0x6cb, 0x0, 0x1);
        gbc.writeMem(0x85e3, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0x23bf, gbc.sp());
        EXPECT(0x85e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x85e3));
        EXPECT(0x98, gbc.readMem(0x85e4));
        // CB 98 03AA
        gbc.setState(0xd979, 0xebb9, 0x4380, 0xc3ac, 0x3bf8, 0xfd, 0x0, 0x1);
        gbc.writeMem(0xd979, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xebb9, gbc.sp());
        EXPECT(0xd97b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd979));
        EXPECT(0x98, gbc.readMem(0xd97a));
        // CB 98 03AB
        gbc.setState(0x319b, 0x3f70, 0xbb50, 0xec33, 0x7f1c, 0xdc34, 0x1, 0x1);
        gbc.writeMem(0x319b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x3f70, gbc.sp());
        EXPECT(0x319d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03AC
        gbc.setState(0xb35f, 0x336f, 0x1be0, 0xa62b, 0xdb4c, 0xfb3a, 0x1, 0x0);
        gbc.writeMem(0xb35f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x336f, gbc.sp());
        EXPECT(0xb361, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb35f));
        EXPECT(0x98, gbc.readMem(0xb360));
        // CB 98 03AD
        gbc.setState(0x64fc, 0x355f, 0xfec0, 0xc4ab, 0x51af, 0x42d8, 0x0, 0x1);
        gbc.writeMem(0x64fc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x355f, gbc.sp());
        EXPECT(0x64fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03AE
        gbc.setState(0x4ced, 0xff3e, 0x60c0, 0x205b, 0xda73, 0x8c8f, 0x0, 0x1);
        gbc.writeMem(0x4ced, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x5b, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0xff3e, gbc.sp());
        EXPECT(0x4cef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03B0
        gbc.setState(0xa6a0, 0xd964, 0xc790, 0xa20d, 0xfa85, 0xf78a, 0x0, 0x0);
        gbc.writeMem(0xa6a0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0xd964, gbc.sp());
        EXPECT(0xa6a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa6a0));
        EXPECT(0x98, gbc.readMem(0xa6a1));
        // CB 98 03B1
        gbc.setState(0xd03d, 0x439b, 0xa2a0, 0x2c0a, 0xcb92, 0x1ca6, 0x0, 0x0);
        gbc.writeMem(0xd03d, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x439b, gbc.sp());
        EXPECT(0xd03f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd03d));
        EXPECT(0x98, gbc.readMem(0xd03e));
        // CB 98 03B2
        gbc.setState(0xc01a, 0xf841, 0x7520, 0xfb71, 0xf457, 0xac2f, 0x1, 0x1);
        gbc.writeMem(0xc01a, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xf841, gbc.sp());
        EXPECT(0xc01c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xc01a));
        EXPECT(0x98, gbc.readMem(0xc01b));
        // CB 98 03B3
        gbc.setState(0x4d13, 0x379c, 0xc090, 0x8cb4, 0xa386, 0xfe24, 0x1, 0x1);
        gbc.writeMem(0x4d13, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x379c, gbc.sp());
        EXPECT(0x4d15, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03B4
        gbc.setState(0x640b, 0x1e4d, 0x4020, 0x7b4b, 0xc372, 0xfdb9, 0x0, 0x0);
        gbc.writeMem(0x640b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x1e4d, gbc.sp());
        EXPECT(0x640d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03B5
        gbc.setState(0x4908, 0xc4f6, 0xe050, 0xcb2d, 0xafbd, 0x4576, 0x0, 0x1);
        gbc.writeMem(0x4908, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xc4f6, gbc.sp());
        EXPECT(0x490a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03B6
        gbc.setState(0x8e8f, 0xe2fa, 0x83a0, 0xf2cc, 0xca66, 0xed2f, 0x1, 0x1);
        gbc.writeMem(0x8e8f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xe2fa, gbc.sp());
        EXPECT(0x8e91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8e8f));
        EXPECT(0x98, gbc.readMem(0x8e90));
        // CB 98 03B7
        gbc.setState(0x614b, 0xfac2, 0x48b0, 0xefdc, 0x6dc5, 0x2be6, 0x1, 0x0);
        gbc.writeMem(0x614b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xe7, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xfac2, gbc.sp());
        EXPECT(0x614d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03B8
        gbc.setState(0x5bb7, 0xe591, 0xb490, 0x5a85, 0xc610, 0xd430, 0x1, 0x1);
        gbc.writeMem(0x5bb7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xe591, gbc.sp());
        EXPECT(0x5bb9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03B9
        gbc.setState(0x4dd7, 0xb530, 0xf9e0, 0x4db3, 0x8bbd, 0x7f6b, 0x1, 0x0);
        gbc.writeMem(0x4dd7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xb530, gbc.sp());
        EXPECT(0x4dd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03BA
        gbc.setState(0x6c2, 0x8e1d, 0xb640, 0xbee8, 0xb1dc, 0x52d8, 0x0, 0x0);
        gbc.writeMem(0x6c2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x8e1d, gbc.sp());
        EXPECT(0x6c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03BB
        gbc.setState(0x8619, 0xce66, 0x9370, 0x29e, 0x8000, 0x614e, 0x1, 0x0);
        gbc.writeMem(0x8619, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xce66, gbc.sp());
        EXPECT(0x861b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8619));
        EXPECT(0x98, gbc.readMem(0x861a));
        // CB 98 03BC
        gbc.setState(0x466, 0x8f46, 0x280, 0x127a, 0xf52e, 0x6389, 0x0, 0x0);
        gbc.writeMem(0x466, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x8f46, gbc.sp());
        EXPECT(0x468, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03BD
        gbc.setState(0x73c8, 0xfd06, 0x8040, 0xaf3d, 0x2cc9, 0xf8d, 0x1, 0x0);
        gbc.writeMem(0x73c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xfd06, gbc.sp());
        EXPECT(0x73ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03BE
        gbc.setState(0x51c1, 0xfa29, 0xa830, 0x7f04, 0x63b3, 0x8cad, 0x1, 0x0);
        gbc.writeMem(0x51c1, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xfa29, gbc.sp());
        EXPECT(0x51c3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03BF
        gbc.setState(0xe059, 0xd220, 0x4b30, 0x23c8, 0x5f16, 0xf9a7, 0x0, 0x0);
        gbc.writeMem(0xe059, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xd220, gbc.sp());
        EXPECT(0xe05b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe059));
        EXPECT(0x98, gbc.readMem(0xe05a));
        // CB 98 03C0
        gbc.setState(0xccf2, 0x36b3, 0x3980, 0x2b8, 0x6941, 0x15cf, 0x0, 0x0);
        gbc.writeMem(0xccf2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x36b3, gbc.sp());
        EXPECT(0xccf4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xccf2));
        EXPECT(0x98, gbc.readMem(0xccf3));
        // CB 98 03C2
        gbc.setState(0xd44b, 0xfc0a, 0x20a0, 0xcc23, 0xdb6e, 0xafab, 0x1, 0x0);
        gbc.writeMem(0xd44b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xfc0a, gbc.sp());
        EXPECT(0xd44d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xd44b));
        EXPECT(0x98, gbc.readMem(0xd44c));
        // CB 98 03C3
        gbc.setState(0xaef7, 0xd0ea, 0x97b0, 0xd5aa, 0x56af, 0xb02e, 0x1, 0x0);
        gbc.writeMem(0xaef7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0xd0ea, gbc.sp());
        EXPECT(0xaef9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaef7));
        EXPECT(0x98, gbc.readMem(0xaef8));
        // CB 98 03C4
        gbc.setState(0xa44f, 0xdcbe, 0x9490, 0x391f, 0xf980, 0x604f, 0x0, 0x0);
        gbc.writeMem(0xa44f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xdcbe, gbc.sp());
        EXPECT(0xa451, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa44f));
        EXPECT(0x98, gbc.readMem(0xa450));
        // CB 98 03C6
        gbc.setState(0x3e1b, 0x107e, 0xee40, 0x7915, 0xb141, 0xc27f, 0x1, 0x0);
        gbc.writeMem(0x3e1b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x107e, gbc.sp());
        EXPECT(0x3e1d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03C7
        gbc.setState(0x3a66, 0x9ab, 0x6830, 0x5e78, 0x74ff, 0xfb16, 0x1, 0x0);
        gbc.writeMem(0x3a66, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xfb, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x9ab, gbc.sp());
        EXPECT(0x3a68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03C8
        gbc.setState(0x7478, 0x6366, 0x11f0, 0xc68c, 0x1363, 0x3ff1, 0x0, 0x1);
        gbc.writeMem(0x7478, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x3f, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x6366, gbc.sp());
        EXPECT(0x747a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03C9
        gbc.setState(0x7fe7, 0x333b, 0xc8e0, 0xa151, 0x1e6c, 0x5197, 0x0, 0x1);
        gbc.writeMem(0x7fe7, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x333b, gbc.sp());
        EXPECT(0x7fe9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03CA
        gbc.setState(0x929c, 0x52f1, 0x6f50, 0x76c6, 0x8dbf, 0xceff, 0x0, 0x0);
        gbc.writeMem(0x929c, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x52f1, gbc.sp());
        EXPECT(0x929e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x929c));
        EXPECT(0x98, gbc.readMem(0x929d));
        // CB 98 03CB
        gbc.setState(0x5b77, 0xa1f0, 0x60c0, 0x882f, 0xdb6a, 0x583f, 0x0, 0x0);
        gbc.writeMem(0x5b77, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0xa1f0, gbc.sp());
        EXPECT(0x5b79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03CC
        gbc.setState(0x2bc9, 0x6f57, 0xc700, 0x7559, 0x50d3, 0xbe3f, 0x0, 0x1);
        gbc.writeMem(0x2bc9, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x6f57, gbc.sp());
        EXPECT(0x2bcb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03CD
        gbc.setState(0x74e5, 0xc9a9, 0x95f0, 0x9b1c, 0xf244, 0xa08b, 0x0, 0x1);
        gbc.writeMem(0x74e5, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0xc9a9, gbc.sp());
        EXPECT(0x74e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03CE
        gbc.setState(0xb261, 0xd778, 0x8db0, 0xf0e6, 0x737f, 0x2e95, 0x1, 0x1);
        gbc.writeMem(0xb261, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xd778, gbc.sp());
        EXPECT(0xb263, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb261));
        EXPECT(0x98, gbc.readMem(0xb262));
        // CB 98 03CF
        gbc.setState(0xeb98, 0x3e3d, 0x6a80, 0xb40d, 0x2746, 0x6a89, 0x1, 0x1);
        gbc.writeMem(0xeb98, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0x3e3d, gbc.sp());
        EXPECT(0xeb9a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb98));
        EXPECT(0x98, gbc.readMem(0xeb99));
        // CB 98 03D0
        gbc.setState(0x5f56, 0x850, 0xa6e0, 0x4bc3, 0x1163, 0xa00b, 0x0, 0x1);
        gbc.writeMem(0x5f56, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x850, gbc.sp());
        EXPECT(0x5f58, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03D2
        gbc.setState(0x159, 0xcdff, 0x4b30, 0x3554, 0xa8f7, 0xa08d, 0x1, 0x1);
        gbc.writeMem(0x159, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0xcdff, gbc.sp());
        EXPECT(0x15b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03D3
        gbc.setState(0x60c8, 0x3a7, 0x8f90, 0xd349, 0x32, 0x21b4, 0x0, 0x0);
        gbc.writeMem(0x60c8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x3a7, gbc.sp());
        EXPECT(0x60ca, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03D4
        gbc.setState(0x464f, 0x6286, 0xb9a0, 0xe3a, 0x20b2, 0x2213, 0x1, 0x1);
        gbc.writeMem(0x464f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x6286, gbc.sp());
        EXPECT(0x4651, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03D5
        gbc.setState(0xeb62, 0xc6d7, 0x8050, 0x4bbb, 0x7cc1, 0x2dc5, 0x0, 0x0);
        gbc.writeMem(0xeb62, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xc6d7, gbc.sp());
        EXPECT(0xeb64, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xeb62));
        EXPECT(0x98, gbc.readMem(0xeb63));
        // CB 98 03D6
        gbc.setState(0xb05f, 0xea5c, 0x50d0, 0xb694, 0x58ca, 0xd189, 0x1, 0x0);
        gbc.writeMem(0xb05f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xea5c, gbc.sp());
        EXPECT(0xb061, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb05f));
        EXPECT(0x98, gbc.readMem(0xb060));
        // CB 98 03D7
        gbc.setState(0x8cc0, 0xd7be, 0xf710, 0xe03e, 0xa51f, 0xec69, 0x0, 0x1);
        gbc.writeMem(0x8cc0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xf7, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xd7be, gbc.sp());
        EXPECT(0x8cc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8cc0));
        EXPECT(0x98, gbc.readMem(0x8cc1));
        // CB 98 03D8
        gbc.setState(0xaae8, 0x2574, 0x7740, 0xdf4c, 0xacda, 0x850c, 0x0, 0x1);
        gbc.writeMem(0xaae8, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x2574, gbc.sp());
        EXPECT(0xaaea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xaae8));
        EXPECT(0x98, gbc.readMem(0xaae9));
        // CB 98 03D9
        gbc.setState(0x765f, 0xc8bf, 0x86b0, 0x9785, 0x9e6c, 0xed9d, 0x1, 0x0);
        gbc.writeMem(0x765f, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xc8bf, gbc.sp());
        EXPECT(0x7661, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03DA
        gbc.setState(0xcf01, 0x3f9a, 0xb940, 0xe462, 0x66c2, 0xa2e6, 0x0, 0x1);
        gbc.writeMem(0xcf01, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x3f9a, gbc.sp());
        EXPECT(0xcf03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xcf01));
        EXPECT(0x98, gbc.readMem(0xcf02));
        // CB 98 03DC
        gbc.setState(0x6f72, 0x678a, 0x3f80, 0x17da, 0x102, 0x1ae2, 0x0, 0x1);
        gbc.writeMem(0x6f72, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x678a, gbc.sp());
        EXPECT(0x6f74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03DD
        gbc.setState(0x26cc, 0xa97f, 0x2f00, 0x930a, 0xc252, 0xc97a, 0x0, 0x0);
        gbc.writeMem(0x26cc, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xa97f, gbc.sp());
        EXPECT(0x26ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03DE
        gbc.setState(0x5c07, 0x2a51, 0x2ba0, 0xa103, 0x5405, 0x2fe7, 0x1, 0x1);
        gbc.writeMem(0x5c07, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0x2a51, gbc.sp());
        EXPECT(0x5c09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03DF
        gbc.setState(0x40ce, 0xc197, 0xa310, 0x8889, 0x1dc9, 0xb6e7, 0x1, 0x1);
        gbc.writeMem(0x40ce, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x89, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe7, gbc.l());
        EXPECT(0xc197, gbc.sp());
        EXPECT(0x40d0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03E0
        gbc.setState(0x318b, 0xfc1, 0x640, 0xea28, 0xf0db, 0x51ee, 0x1, 0x0);
        gbc.writeMem(0x318b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xfc1, gbc.sp());
        EXPECT(0x318d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // CB 98 03E1
        gbc.setState(0x7aed, 0xd2cf, 0x3b0, 0x2cd2, 0x4009, 0x6554, 0x0, 0x1);
        gbc.writeMem(0x7aed, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0xd2cf, gbc.sp());
        EXPECT(0x7aef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03E2
        gbc.setState(0xb175, 0x90d4, 0x2690, 0x92c7, 0x62a8, 0xa19c, 0x1, 0x0);
        gbc.writeMem(0xb175, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x90d4, gbc.sp());
        EXPECT(0xb177, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xb175));
        EXPECT(0x98, gbc.readMem(0xb176));
        // CB 98 03E3
        gbc.setState(0xe7d2, 0x15ea, 0xe2f0, 0xa7a4, 0x6443, 0x41da, 0x0, 0x0);
        gbc.writeMem(0xe7d2, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0x15ea, gbc.sp());
        EXPECT(0xe7d4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xe7d2));
        EXPECT(0x98, gbc.readMem(0xe7d3));
        // CB 98 03E4
        gbc.setState(0x8397, 0x909c, 0xa1d0, 0x8363, 0x3cf2, 0x8fc8, 0x1, 0x1);
        gbc.writeMem(0x8397, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x909c, gbc.sp());
        EXPECT(0x8399, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0x8397));
        EXPECT(0x98, gbc.readMem(0x8398));
        // CB 98 03E5
        gbc.setState(0xa1b0, 0xd9fb, 0x3c60, 0x3e49, 0x1fc8, 0x26ba, 0x1, 0x1);
        gbc.writeMem(0xa1b0, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0xd9fb, gbc.sp());
        EXPECT(0xa1b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0xcb, gbc.readMem(0xa1b0));
        EXPECT(0x98, gbc.readMem(0xa1b1));
        // CB 98 03E6
        gbc.setState(0x3f24, 0x5a62, 0xefb0, 0xa9be, 0x23fa, 0xa12c, 0x0, 0x1);
        gbc.writeMem(0x3f24, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x23, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x5a62, gbc.sp());
        EXPECT(0x3f26, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // CB 98 03E7
        gbc.setState(0x71b, 0xe88b, 0xe9a0, 0x518, 0x6c0a, 0x86bf, 0x0, 0x0);
        gbc.writeMem(0x71b, { 0xcb, 0x98 });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xe88b, gbc.sp());
        EXPECT(0x71d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
    }
