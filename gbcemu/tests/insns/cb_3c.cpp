#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_cb_3c)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_cb_3c) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 3C 0000
        gbc.setState(0xb389, 0xcfcc, 0xf480, 0x258, 0xa2c4, 0x29af, 0x1, 0x1);
        gbc.writeMem(0xb389, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcfcc);
        EXPECT(gbc.pc(), 0xb38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb389), 0xcb);
        EXPECT(gbc.readMem(0xb38a), 0x3c);
        // CB 3C 0001
        gbc.setState(0x403c, 0xa72b, 0x37f0, 0x9227, 0x4a2e, 0x56cf, 0x1, 0x1);
        gbc.writeMem(0x403c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xa72b);
        EXPECT(gbc.pc(), 0x403e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0002
        gbc.setState(0x5722, 0x4aa8, 0xb7d0, 0xd038, 0xfea4, 0xc820, 0x1, 0x1);
        gbc.writeMem(0x5722, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4aa8);
        EXPECT(gbc.pc(), 0x5724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0004
        gbc.setState(0x2a1a, 0xa678, 0xc080, 0x1a68, 0xa7f8, 0xe641, 0x0, 0x1);
        gbc.writeMem(0x2a1a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa678);
        EXPECT(gbc.pc(), 0x2a1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0005
        gbc.setState(0x42d3, 0xda20, 0xd2d0, 0xf886, 0x56ed, 0xd763, 0x1, 0x0);
        gbc.writeMem(0x42d3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xda20);
        EXPECT(gbc.pc(), 0x42d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0006
        gbc.setState(0x27dd, 0xe3ed, 0x9270, 0xbe9f, 0xaad7, 0x480b, 0x0, 0x1);
        gbc.writeMem(0x27dd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe3ed);
        EXPECT(gbc.pc(), 0x27df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0007
        gbc.setState(0x3730, 0x9077, 0x4ab0, 0x9922, 0x6f8c, 0xee5e, 0x1, 0x0);
        gbc.writeMem(0x3730, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9077);
        EXPECT(gbc.pc(), 0x3732);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0008
        gbc.setState(0x865d, 0xbae0, 0x6c10, 0xe94b, 0x4241, 0xb7ca, 0x0, 0x0);
        gbc.writeMem(0x865d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbae0);
        EXPECT(gbc.pc(), 0x865f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x865d), 0xcb);
        EXPECT(gbc.readMem(0x865e), 0x3c);
        // CB 3C 0009
        gbc.setState(0x9a59, 0xc881, 0x77c0, 0x71c, 0xb0b8, 0x5b8b, 0x0, 0x1);
        gbc.writeMem(0x9a59, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc881);
        EXPECT(gbc.pc(), 0x9a5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a59), 0xcb);
        EXPECT(gbc.readMem(0x9a5a), 0x3c);
        // CB 3C 000A
        gbc.setState(0x3cd5, 0xc1b, 0xb3c0, 0xdaf3, 0xc8a9, 0xaaed, 0x1, 0x0);
        gbc.writeMem(0x3cd5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc1b);
        EXPECT(gbc.pc(), 0x3cd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 000B
        gbc.setState(0x8c88, 0x3edb, 0x2880, 0x9b3d, 0x42cc, 0x2194, 0x1, 0x1);
        gbc.writeMem(0x8c88, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3edb);
        EXPECT(gbc.pc(), 0x8c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c88), 0xcb);
        EXPECT(gbc.readMem(0x8c89), 0x3c);
        // CB 3C 000C
        gbc.setState(0x8ac8, 0x7be2, 0xd770, 0xa1d6, 0x50b8, 0x1e1d, 0x1, 0x1);
        gbc.writeMem(0x8ac8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7be2);
        EXPECT(gbc.pc(), 0x8aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac8), 0xcb);
        EXPECT(gbc.readMem(0x8ac9), 0x3c);
        // CB 3C 000D
        gbc.setState(0x2460, 0x55f2, 0xab0, 0x16a3, 0xa39e, 0xe829, 0x1, 0x1);
        gbc.writeMem(0x2460, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x55f2);
        EXPECT(gbc.pc(), 0x2462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 000E
        gbc.setState(0x82b, 0xae0f, 0xc270, 0x150e, 0x7f9, 0x1baa, 0x0, 0x1);
        gbc.writeMem(0x82b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xae0f);
        EXPECT(gbc.pc(), 0x82d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 000F
        gbc.setState(0x7981, 0xe131, 0xe870, 0x626c, 0x66b4, 0x3564, 0x1, 0x1);
        gbc.writeMem(0x7981, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe131);
        EXPECT(gbc.pc(), 0x7983);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0010
        gbc.setState(0x9db3, 0xa78c, 0xaf80, 0x1f9c, 0x1076, 0x6812, 0x0, 0x0);
        gbc.writeMem(0x9db3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xa78c);
        EXPECT(gbc.pc(), 0x9db5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db3), 0xcb);
        EXPECT(gbc.readMem(0x9db4), 0x3c);
        // CB 3C 0011
        gbc.setState(0xc007, 0x34a3, 0x4350, 0x8270, 0x2b2c, 0x236f, 0x0, 0x1);
        gbc.writeMem(0xc007, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x34a3);
        EXPECT(gbc.pc(), 0xc009);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc007), 0xcb);
        EXPECT(gbc.readMem(0xc008), 0x3c);
        // CB 3C 0012
        gbc.setState(0xa985, 0xe307, 0x5260, 0x8ace, 0x1c61, 0x827d, 0x1, 0x0);
        gbc.writeMem(0xa985, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe307);
        EXPECT(gbc.pc(), 0xa987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa985), 0xcb);
        EXPECT(gbc.readMem(0xa986), 0x3c);
        // CB 3C 0014
        gbc.setState(0x1630, 0xa8c9, 0xfe90, 0x95f5, 0x3f4b, 0x36a6, 0x0, 0x0);
        gbc.writeMem(0x1630, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xa8c9);
        EXPECT(gbc.pc(), 0x1632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0015
        gbc.setState(0xb4f9, 0xb136, 0xe270, 0xbe2e, 0xae0d, 0xae85, 0x0, 0x0);
        gbc.writeMem(0xb4f9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb136);
        EXPECT(gbc.pc(), 0xb4fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4f9), 0xcb);
        EXPECT(gbc.readMem(0xb4fa), 0x3c);
        // CB 3C 0017
        gbc.setState(0xbc90, 0x69e4, 0x8740, 0x9218, 0xd569, 0xd9cd, 0x1, 0x1);
        gbc.writeMem(0xbc90, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x69e4);
        EXPECT(gbc.pc(), 0xbc92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc90), 0xcb);
        EXPECT(gbc.readMem(0xbc91), 0x3c);
        // CB 3C 0018
        gbc.setState(0xd55d, 0x8a54, 0x5690, 0xf79d, 0x3c85, 0x710e, 0x1, 0x0);
        gbc.writeMem(0xd55d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8a54);
        EXPECT(gbc.pc(), 0xd55f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd55d), 0xcb);
        EXPECT(gbc.readMem(0xd55e), 0x3c);
        // CB 3C 0019
        gbc.setState(0x4434, 0xfbe0, 0xcd10, 0xfa98, 0x2ba1, 0xde5c, 0x1, 0x0);
        gbc.writeMem(0x4434, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfbe0);
        EXPECT(gbc.pc(), 0x4436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 001A
        gbc.setState(0x9dc9, 0x3c4b, 0xbf20, 0x3ad5, 0xf7f3, 0x9c2e, 0x0, 0x1);
        gbc.writeMem(0x9dc9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3c4b);
        EXPECT(gbc.pc(), 0x9dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dc9), 0xcb);
        EXPECT(gbc.readMem(0x9dca), 0x3c);
        // CB 3C 001B
        gbc.setState(0x2e93, 0x4e88, 0xafe0, 0x6e5f, 0xa91e, 0xbae4, 0x1, 0x0);
        gbc.writeMem(0x2e93, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4e88);
        EXPECT(gbc.pc(), 0x2e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 001C
        gbc.setState(0x4e70, 0xda09, 0x7da0, 0xc383, 0x8851, 0xa989, 0x1, 0x1);
        gbc.writeMem(0x4e70, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xda09);
        EXPECT(gbc.pc(), 0x4e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 001D
        gbc.setState(0xcec0, 0x8b7e, 0xb3b0, 0x6653, 0x45ab, 0x962a, 0x0, 0x0);
        gbc.writeMem(0xcec0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8b7e);
        EXPECT(gbc.pc(), 0xcec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcec0), 0xcb);
        EXPECT(gbc.readMem(0xcec1), 0x3c);
        // CB 3C 001E
        gbc.setState(0x2d23, 0x5559, 0x37a0, 0x801b, 0x4326, 0x782f, 0x0, 0x0);
        gbc.writeMem(0x2d23, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5559);
        EXPECT(gbc.pc(), 0x2d25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 001F
        gbc.setState(0x957d, 0xc912, 0x9fe0, 0x1cbc, 0xbcda, 0x45d7, 0x1, 0x0);
        gbc.writeMem(0x957d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc912);
        EXPECT(gbc.pc(), 0x957f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x957d), 0xcb);
        EXPECT(gbc.readMem(0x957e), 0x3c);
        // CB 3C 0020
        gbc.setState(0x2625, 0x18eb, 0x2f50, 0xaf01, 0xbd06, 0xe04e, 0x0, 0x0);
        gbc.writeMem(0x2625, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x18eb);
        EXPECT(gbc.pc(), 0x2627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0021
        gbc.setState(0x3630, 0x1abe, 0x7580, 0x38a7, 0x32b, 0x4913, 0x0, 0x1);
        gbc.writeMem(0x3630, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1abe);
        EXPECT(gbc.pc(), 0x3632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0022
        gbc.setState(0xa827, 0xd283, 0x3ee0, 0xa116, 0x98ea, 0x1c11, 0x0, 0x1);
        gbc.writeMem(0xa827, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd283);
        EXPECT(gbc.pc(), 0xa829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa827), 0xcb);
        EXPECT(gbc.readMem(0xa828), 0x3c);
        // CB 3C 0024
        gbc.setState(0x7e80, 0xfd44, 0x8440, 0x8f9, 0x93a4, 0xe7f, 0x1, 0x0);
        gbc.writeMem(0x7e80, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xfd44);
        EXPECT(gbc.pc(), 0x7e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0025
        gbc.setState(0xe203, 0x9a7f, 0x9a20, 0xfb7d, 0x9c5e, 0x3486, 0x0, 0x1);
        gbc.writeMem(0xe203, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9a7f);
        EXPECT(gbc.pc(), 0xe205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe203), 0xcb);
        EXPECT(gbc.readMem(0xe204), 0x3c);
        // CB 3C 0026
        gbc.setState(0xa49a, 0x9324, 0x9b40, 0x8579, 0xda68, 0x5b47, 0x1, 0x1);
        gbc.writeMem(0xa49a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9324);
        EXPECT(gbc.pc(), 0xa49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa49a), 0xcb);
        EXPECT(gbc.readMem(0xa49b), 0x3c);
        // CB 3C 0027
        gbc.setState(0x8e05, 0x20f5, 0x7cd0, 0x73d6, 0xbe8c, 0x969b, 0x1, 0x1);
        gbc.writeMem(0x8e05, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x20f5);
        EXPECT(gbc.pc(), 0x8e07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e05), 0xcb);
        EXPECT(gbc.readMem(0x8e06), 0x3c);
        // CB 3C 0028
        gbc.setState(0x947, 0xbfc2, 0x8080, 0x754c, 0x33d0, 0x48aa, 0x1, 0x0);
        gbc.writeMem(0x947, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xbfc2);
        EXPECT(gbc.pc(), 0x949);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0029
        gbc.setState(0x5af3, 0xc140, 0xa6b0, 0x866f, 0x9e56, 0x10b4, 0x0, 0x0);
        gbc.writeMem(0x5af3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc140);
        EXPECT(gbc.pc(), 0x5af5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 002A
        gbc.setState(0x673c, 0x17ca, 0x8690, 0xa270, 0xb858, 0xf81f, 0x0, 0x0);
        gbc.writeMem(0x673c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x17ca);
        EXPECT(gbc.pc(), 0x673e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 002B
        gbc.setState(0x79b1, 0xfbc2, 0xc90, 0x7d0e, 0xc696, 0x2ac7, 0x1, 0x0);
        gbc.writeMem(0x79b1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xfbc2);
        EXPECT(gbc.pc(), 0x79b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 002C
        gbc.setState(0xc013, 0xbbf1, 0xebb0, 0x5543, 0xee28, 0x98d1, 0x0, 0x0);
        gbc.writeMem(0xc013, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xbbf1);
        EXPECT(gbc.pc(), 0xc015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc013), 0xcb);
        EXPECT(gbc.readMem(0xc014), 0x3c);
        // CB 3C 002D
        gbc.setState(0x3b85, 0xe1d8, 0xcfd0, 0xf440, 0xb249, 0xdd16, 0x0, 0x1);
        gbc.writeMem(0x3b85, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe1d8);
        EXPECT(gbc.pc(), 0x3b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 002E
        gbc.setState(0xa450, 0x22cd, 0x1900, 0x67f1, 0x2572, 0xe8d7, 0x1, 0x0);
        gbc.writeMem(0xa450, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x22cd);
        EXPECT(gbc.pc(), 0xa452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa450), 0xcb);
        EXPECT(gbc.readMem(0xa451), 0x3c);
        // CB 3C 002F
        gbc.setState(0x28ca, 0x6caa, 0x2ec0, 0x2a02, 0x9fd8, 0x4b61, 0x0, 0x1);
        gbc.writeMem(0x28ca, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6caa);
        EXPECT(gbc.pc(), 0x28cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0030
        gbc.setState(0xb1ce, 0xc477, 0x2330, 0x6c89, 0x6ee4, 0x677, 0x1, 0x1);
        gbc.writeMem(0xb1ce, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc477);
        EXPECT(gbc.pc(), 0xb1d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ce), 0xcb);
        EXPECT(gbc.readMem(0xb1cf), 0x3c);
        // CB 3C 0031
        gbc.setState(0xc61f, 0x8535, 0x9e40, 0xbbdc, 0xcf86, 0xbba7, 0x1, 0x1);
        gbc.writeMem(0xc61f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8535);
        EXPECT(gbc.pc(), 0xc621);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc61f), 0xcb);
        EXPECT(gbc.readMem(0xc620), 0x3c);
        // CB 3C 0032
        gbc.setState(0xb8d1, 0x983d, 0xe8b0, 0xf93e, 0x1f77, 0x1684, 0x0, 0x1);
        gbc.writeMem(0xb8d1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x983d);
        EXPECT(gbc.pc(), 0xb8d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8d1), 0xcb);
        EXPECT(gbc.readMem(0xb8d2), 0x3c);
        // CB 3C 0033
        gbc.setState(0xe3a7, 0x9e1f, 0x3a00, 0x902f, 0x38d3, 0x1d3, 0x0, 0x1);
        gbc.writeMem(0xe3a7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9e1f);
        EXPECT(gbc.pc(), 0xe3a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3a7), 0xcb);
        EXPECT(gbc.readMem(0xe3a8), 0x3c);
        // CB 3C 0034
        gbc.setState(0xac8c, 0xf457, 0x3750, 0x4bfd, 0xb0d8, 0xe93c, 0x1, 0x0);
        gbc.writeMem(0xac8c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xf457);
        EXPECT(gbc.pc(), 0xac8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8c), 0xcb);
        EXPECT(gbc.readMem(0xac8d), 0x3c);
        // CB 3C 0035
        gbc.setState(0xc104, 0x8efc, 0x4a70, 0x29fb, 0x4ead, 0x50ea, 0x0, 0x0);
        gbc.writeMem(0xc104, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8efc);
        EXPECT(gbc.pc(), 0xc106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc104), 0xcb);
        EXPECT(gbc.readMem(0xc105), 0x3c);
        // CB 3C 0036
        gbc.setState(0x5f8b, 0x3160, 0x7630, 0xa2ae, 0x17f, 0x974, 0x1, 0x1);
        gbc.writeMem(0x5f8b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3160);
        EXPECT(gbc.pc(), 0x5f8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0037
        gbc.setState(0xbb56, 0x860f, 0x6660, 0xd18a, 0xf264, 0xe4, 0x1, 0x0);
        gbc.writeMem(0xbb56, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x860f);
        EXPECT(gbc.pc(), 0xbb58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb56), 0xcb);
        EXPECT(gbc.readMem(0xbb57), 0x3c);
        // CB 3C 0038
        gbc.setState(0x147d, 0xd38d, 0x5a30, 0xecf9, 0xdbac, 0x4267, 0x0, 0x0);
        gbc.writeMem(0x147d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd38d);
        EXPECT(gbc.pc(), 0x147f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0039
        gbc.setState(0xd58d, 0xfba2, 0xf6f0, 0x2285, 0x2e6e, 0x772b, 0x0, 0x0);
        gbc.writeMem(0xd58d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfba2);
        EXPECT(gbc.pc(), 0xd58f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58d), 0xcb);
        EXPECT(gbc.readMem(0xd58e), 0x3c);
        // CB 3C 003A
        gbc.setState(0xb45d, 0x12d1, 0x97b0, 0xb2, 0x6093, 0x4390, 0x0, 0x0);
        gbc.writeMem(0xb45d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x12d1);
        EXPECT(gbc.pc(), 0xb45f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb45d), 0xcb);
        EXPECT(gbc.readMem(0xb45e), 0x3c);
        // CB 3C 003B
        gbc.setState(0x2fff, 0xd180, 0xa100, 0x9982, 0x9c38, 0x29dd, 0x1, 0x1);
        gbc.writeMem(0x2fff, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd180);
        EXPECT(gbc.pc(), 0x3001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 003C
        gbc.setState(0x6bc4, 0x4161, 0xed70, 0xd1cb, 0xa394, 0x906b, 0x0, 0x1);
        gbc.writeMem(0x6bc4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4161);
        EXPECT(gbc.pc(), 0x6bc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 003D
        gbc.setState(0x2df6, 0x123c, 0x5800, 0xbc79, 0x40aa, 0x4672, 0x0, 0x0);
        gbc.writeMem(0x2df6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x123c);
        EXPECT(gbc.pc(), 0x2df8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 003E
        gbc.setState(0xc93e, 0x14c6, 0xe210, 0x4c50, 0x3a1, 0x9ea3, 0x1, 0x1);
        gbc.writeMem(0xc93e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x14c6);
        EXPECT(gbc.pc(), 0xc940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93e), 0xcb);
        EXPECT(gbc.readMem(0xc93f), 0x3c);
        // CB 3C 003F
        gbc.setState(0x3e2e, 0xce48, 0x2a60, 0x9392, 0x27e8, 0x3751, 0x0, 0x0);
        gbc.writeMem(0x3e2e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xce48);
        EXPECT(gbc.pc(), 0x3e30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0040
        gbc.setState(0xe6be, 0xe1a5, 0x2ee0, 0x55ee, 0xea92, 0xc61d, 0x1, 0x1);
        gbc.writeMem(0xe6be, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe1a5);
        EXPECT(gbc.pc(), 0xe6c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6be), 0xcb);
        EXPECT(gbc.readMem(0xe6bf), 0x3c);
        // CB 3C 0041
        gbc.setState(0x3e5d, 0x3fdd, 0xd8b0, 0x5332, 0xf2fe, 0x670d, 0x1, 0x0);
        gbc.writeMem(0x3e5d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3fdd);
        EXPECT(gbc.pc(), 0x3e5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0042
        gbc.setState(0xdec7, 0x9231, 0x6dc0, 0x4a70, 0xff24, 0xfe4b, 0x0, 0x0);
        gbc.writeMem(0xdec7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9231);
        EXPECT(gbc.pc(), 0xdec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdec7), 0xcb);
        EXPECT(gbc.readMem(0xdec8), 0x3c);
        // CB 3C 0043
        gbc.setState(0xab9f, 0x72da, 0xa80, 0xc76f, 0x97ef, 0x273f, 0x0, 0x1);
        gbc.writeMem(0xab9f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x72da);
        EXPECT(gbc.pc(), 0xaba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9f), 0xcb);
        EXPECT(gbc.readMem(0xaba0), 0x3c);
        // CB 3C 0044
        gbc.setState(0x6653, 0x9f99, 0xe790, 0x9394, 0xfa2, 0xfaee, 0x0, 0x0);
        gbc.writeMem(0x6653, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x9f99);
        EXPECT(gbc.pc(), 0x6655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0045
        gbc.setState(0xd79b, 0x91dc, 0x40d0, 0x79a, 0x3eae, 0xead6, 0x0, 0x1);
        gbc.writeMem(0xd79b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x91dc);
        EXPECT(gbc.pc(), 0xd79d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd79b), 0xcb);
        EXPECT(gbc.readMem(0xd79c), 0x3c);
        // CB 3C 0046
        gbc.setState(0x5661, 0x121d, 0x2e90, 0xcb5c, 0x7c5e, 0xd068, 0x1, 0x1);
        gbc.writeMem(0x5661, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x121d);
        EXPECT(gbc.pc(), 0x5663);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0047
        gbc.setState(0x9031, 0xf46f, 0x16b0, 0x3b4, 0x2546, 0xa88e, 0x1, 0x0);
        gbc.writeMem(0x9031, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf46f);
        EXPECT(gbc.pc(), 0x9033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9031), 0xcb);
        EXPECT(gbc.readMem(0x9032), 0x3c);
        // CB 3C 0048
        gbc.setState(0x3286, 0x1933, 0x8700, 0xc4fa, 0x886e, 0xab56, 0x0, 0x0);
        gbc.writeMem(0x3286, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1933);
        EXPECT(gbc.pc(), 0x3288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0049
        gbc.setState(0x850b, 0x8c8a, 0xc8d0, 0x8334, 0x166a, 0xf606, 0x0, 0x1);
        gbc.writeMem(0x850b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8c8a);
        EXPECT(gbc.pc(), 0x850d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x850b), 0xcb);
        EXPECT(gbc.readMem(0x850c), 0x3c);
        // CB 3C 004A
        gbc.setState(0x520e, 0xeca9, 0xad00, 0xcbfa, 0x3e59, 0xe2b4, 0x1, 0x0);
        gbc.writeMem(0x520e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xeca9);
        EXPECT(gbc.pc(), 0x5210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 004B
        gbc.setState(0xa923, 0xc3ba, 0x52f0, 0xb1c3, 0x322c, 0xa0c3, 0x0, 0x0);
        gbc.writeMem(0xa923, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc3ba);
        EXPECT(gbc.pc(), 0xa925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa923), 0xcb);
        EXPECT(gbc.readMem(0xa924), 0x3c);
        // CB 3C 004C
        gbc.setState(0x6f71, 0x7696, 0xd780, 0x3b2b, 0xb7c3, 0x4682, 0x0, 0x0);
        gbc.writeMem(0x6f71, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7696);
        EXPECT(gbc.pc(), 0x6f73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 004D
        gbc.setState(0x4881, 0x715e, 0x2f40, 0x2c1b, 0xcaa9, 0xfb31, 0x0, 0x1);
        gbc.writeMem(0x4881, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x715e);
        EXPECT(gbc.pc(), 0x4883);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 004E
        gbc.setState(0xd3ba, 0x28f5, 0x9e70, 0x21e4, 0x2ae8, 0x2cbe, 0x1, 0x1);
        gbc.writeMem(0xd3ba, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x28f5);
        EXPECT(gbc.pc(), 0xd3bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ba), 0xcb);
        EXPECT(gbc.readMem(0xd3bb), 0x3c);
        // CB 3C 0050
        gbc.setState(0x7b88, 0x4794, 0x64e0, 0x8f2d, 0xf190, 0x7bbd, 0x0, 0x1);
        gbc.writeMem(0x7b88, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4794);
        EXPECT(gbc.pc(), 0x7b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0051
        gbc.setState(0x6b3d, 0xe456, 0x9110, 0x95d1, 0x3379, 0x924, 0x1, 0x0);
        gbc.writeMem(0x6b3d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe456);
        EXPECT(gbc.pc(), 0x6b3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0052
        gbc.setState(0x45b1, 0xb79e, 0x9c0, 0x6aeb, 0x1182, 0xff7c, 0x0, 0x0);
        gbc.writeMem(0x45b1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb79e);
        EXPECT(gbc.pc(), 0x45b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0053
        gbc.setState(0x5b63, 0xc0ab, 0xe020, 0x7e34, 0xe976, 0x3f72, 0x0, 0x0);
        gbc.writeMem(0x5b63, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc0ab);
        EXPECT(gbc.pc(), 0x5b65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0054
        gbc.setState(0x5914, 0xa0fc, 0x3460, 0x2697, 0xb823, 0x5097, 0x1, 0x1);
        gbc.writeMem(0x5914, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xa0fc);
        EXPECT(gbc.pc(), 0x5916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0055
        gbc.setState(0x48dd, 0xba13, 0x4e90, 0x5d26, 0x23ba, 0x5b04, 0x1, 0x0);
        gbc.writeMem(0x48dd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xba13);
        EXPECT(gbc.pc(), 0x48df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0056
        gbc.setState(0x72bc, 0x665f, 0xa050, 0xe807, 0x83b5, 0xbea1, 0x1, 0x1);
        gbc.writeMem(0x72bc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x665f);
        EXPECT(gbc.pc(), 0x72be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0057
        gbc.setState(0xbae8, 0x9b82, 0x4480, 0x52ae, 0xff, 0xb5c5, 0x1, 0x0);
        gbc.writeMem(0xbae8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9b82);
        EXPECT(gbc.pc(), 0xbaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbae8), 0xcb);
        EXPECT(gbc.readMem(0xbae9), 0x3c);
        // CB 3C 0059
        gbc.setState(0x1b38, 0xa782, 0xc710, 0x7b51, 0x4b0a, 0x4420, 0x0, 0x1);
        gbc.writeMem(0x1b38, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa782);
        EXPECT(gbc.pc(), 0x1b3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 005A
        gbc.setState(0xaad6, 0xd9b7, 0x5b0, 0x9f48, 0x7e9f, 0x5e01, 0x0, 0x0);
        gbc.writeMem(0xaad6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd9b7);
        EXPECT(gbc.pc(), 0xaad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad6), 0xcb);
        EXPECT(gbc.readMem(0xaad7), 0x3c);
        // CB 3C 005C
        gbc.setState(0x4097, 0xbfbe, 0xd890, 0xb943, 0x997f, 0x8350, 0x0, 0x1);
        gbc.writeMem(0x4097, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbfbe);
        EXPECT(gbc.pc(), 0x4099);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 005D
        gbc.setState(0xa8e, 0xd7b5, 0x4100, 0x68f4, 0x5df5, 0xa446, 0x0, 0x1);
        gbc.writeMem(0xa8e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd7b5);
        EXPECT(gbc.pc(), 0xa90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 005E
        gbc.setState(0x5e85, 0x964b, 0xdcb0, 0x7c17, 0xd38d, 0xf878, 0x0, 0x1);
        gbc.writeMem(0x5e85, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x964b);
        EXPECT(gbc.pc(), 0x5e87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 005F
        gbc.setState(0x1ada, 0x363a, 0xc9c0, 0x29c2, 0xdea, 0x7ef1, 0x1, 0x1);
        gbc.writeMem(0x1ada, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x363a);
        EXPECT(gbc.pc(), 0x1adc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0060
        gbc.setState(0x63c3, 0x2576, 0x5c10, 0x85bd, 0xbe09, 0xf1b9, 0x0, 0x0);
        gbc.writeMem(0x63c3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2576);
        EXPECT(gbc.pc(), 0x63c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0061
        gbc.setState(0x7197, 0xa783, 0x2320, 0x3b2f, 0xeb46, 0x60e5, 0x0, 0x1);
        gbc.writeMem(0x7197, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa783);
        EXPECT(gbc.pc(), 0x7199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0062
        gbc.setState(0x39a4, 0xdbdc, 0x81e0, 0x45fc, 0x3685, 0x4254, 0x1, 0x1);
        gbc.writeMem(0x39a4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xdbdc);
        EXPECT(gbc.pc(), 0x39a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0063
        gbc.setState(0xdd63, 0x9858, 0xca0, 0xba19, 0xa1c0, 0x6e70, 0x1, 0x0);
        gbc.writeMem(0xdd63, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9858);
        EXPECT(gbc.pc(), 0xdd65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd63), 0xcb);
        EXPECT(gbc.readMem(0xdd64), 0x3c);
        // CB 3C 0064
        gbc.setState(0xbd6f, 0x56ce, 0x4a60, 0xacf2, 0x5db7, 0x4846, 0x1, 0x1);
        gbc.writeMem(0xbd6f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x56ce);
        EXPECT(gbc.pc(), 0xbd71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6f), 0xcb);
        EXPECT(gbc.readMem(0xbd70), 0x3c);
        // CB 3C 0065
        gbc.setState(0x9bf8, 0x2cd8, 0xc250, 0x1b5b, 0x8e7f, 0x9264, 0x0, 0x0);
        gbc.writeMem(0x9bf8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2cd8);
        EXPECT(gbc.pc(), 0x9bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf8), 0xcb);
        EXPECT(gbc.readMem(0x9bf9), 0x3c);
        // CB 3C 0066
        gbc.setState(0x9e30, 0xad19, 0xcbd0, 0xa183, 0x6711, 0x8665, 0x0, 0x0);
        gbc.writeMem(0x9e30, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xad19);
        EXPECT(gbc.pc(), 0x9e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e30), 0xcb);
        EXPECT(gbc.readMem(0x9e31), 0x3c);
        // CB 3C 0067
        gbc.setState(0x29a9, 0xa9b8, 0x3e20, 0x6a06, 0xa7e4, 0x1d7, 0x0, 0x0);
        gbc.writeMem(0x29a9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xa9b8);
        EXPECT(gbc.pc(), 0x29ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0068
        gbc.setState(0x34f3, 0x548d, 0xe9a0, 0xb50, 0xd04f, 0xce81, 0x0, 0x1);
        gbc.writeMem(0x34f3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x548d);
        EXPECT(gbc.pc(), 0x34f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0069
        gbc.setState(0xa42f, 0xb42f, 0x2db0, 0xf5fc, 0xd637, 0xd9bc, 0x0, 0x1);
        gbc.writeMem(0xa42f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb42f);
        EXPECT(gbc.pc(), 0xa431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa42f), 0xcb);
        EXPECT(gbc.readMem(0xa430), 0x3c);
        // CB 3C 006A
        gbc.setState(0x859a, 0x292e, 0xedf0, 0x6973, 0x370a, 0xf0ef, 0x1, 0x0);
        gbc.writeMem(0x859a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x292e);
        EXPECT(gbc.pc(), 0x859c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859a), 0xcb);
        EXPECT(gbc.readMem(0x859b), 0x3c);
        // CB 3C 006B
        gbc.setState(0x7c41, 0x3c62, 0x6dd0, 0x8fb0, 0x4bd6, 0xb07e, 0x0, 0x0);
        gbc.writeMem(0x7c41, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3c62);
        EXPECT(gbc.pc(), 0x7c43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 006C
        gbc.setState(0xc71c, 0xd6ca, 0x9be0, 0x2bd6, 0xa3b, 0x44fa, 0x1, 0x0);
        gbc.writeMem(0xc71c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xd6ca);
        EXPECT(gbc.pc(), 0xc71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc71c), 0xcb);
        EXPECT(gbc.readMem(0xc71d), 0x3c);
        // CB 3C 006D
        gbc.setState(0x41b1, 0x2ea6, 0xb910, 0x338d, 0x7c4d, 0x54f1, 0x0, 0x0);
        gbc.writeMem(0x41b1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2ea6);
        EXPECT(gbc.pc(), 0x41b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 006E
        gbc.setState(0xde21, 0xb155, 0xefb0, 0xdd3c, 0xa1ca, 0x518a, 0x0, 0x1);
        gbc.writeMem(0xde21, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xb155);
        EXPECT(gbc.pc(), 0xde23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde21), 0xcb);
        EXPECT(gbc.readMem(0xde22), 0x3c);
        // CB 3C 0070
        gbc.setState(0x44ea, 0x7534, 0xd470, 0x4632, 0xaaf4, 0xb53d, 0x1, 0x0);
        gbc.writeMem(0x44ea, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7534);
        EXPECT(gbc.pc(), 0x44ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0071
        gbc.setState(0x2f01, 0x2c1b, 0x5ae0, 0xb0e7, 0xc5e0, 0x3feb, 0x1, 0x1);
        gbc.writeMem(0x2f01, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2c1b);
        EXPECT(gbc.pc(), 0x2f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0072
        gbc.setState(0x6edb, 0xa1ca, 0xff80, 0x19a8, 0x744d, 0x7a8c, 0x0, 0x1);
        gbc.writeMem(0x6edb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa1ca);
        EXPECT(gbc.pc(), 0x6edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0073
        gbc.setState(0xe15f, 0x3c55, 0x34b0, 0x6c0, 0xc68b, 0x6eef, 0x0, 0x1);
        gbc.writeMem(0xe15f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3c55);
        EXPECT(gbc.pc(), 0xe161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe15f), 0xcb);
        EXPECT(gbc.readMem(0xe160), 0x3c);
        // CB 3C 0074
        gbc.setState(0x84de, 0xf227, 0xfb20, 0x60c7, 0xc85, 0x8aab, 0x1, 0x1);
        gbc.writeMem(0x84de, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf227);
        EXPECT(gbc.pc(), 0x84e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84de), 0xcb);
        EXPECT(gbc.readMem(0x84df), 0x3c);
        // CB 3C 0075
        gbc.setState(0x766b, 0xe326, 0xfc60, 0xd393, 0xf56e, 0xa885, 0x0, 0x0);
        gbc.writeMem(0x766b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xe326);
        EXPECT(gbc.pc(), 0x766d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0076
        gbc.setState(0xdb1f, 0xc833, 0x50d0, 0x3dba, 0xfb15, 0x5cbf, 0x1, 0x0);
        gbc.writeMem(0xdb1f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xc833);
        EXPECT(gbc.pc(), 0xdb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb1f), 0xcb);
        EXPECT(gbc.readMem(0xdb20), 0x3c);
        // CB 3C 0077
        gbc.setState(0x1d63, 0xf42f, 0xbae0, 0x111f, 0xb92f, 0x3e41, 0x1, 0x0);
        gbc.writeMem(0x1d63, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf42f);
        EXPECT(gbc.pc(), 0x1d65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0078
        gbc.setState(0xeef8, 0xf9b8, 0xdaa0, 0x25a9, 0x5ba1, 0x6060, 0x1, 0x0);
        gbc.writeMem(0xeef8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xf9b8);
        EXPECT(gbc.pc(), 0xeefa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef8), 0xcb);
        EXPECT(gbc.readMem(0xeef9), 0x3c);
        // CB 3C 0079
        gbc.setState(0xaf7a, 0xda57, 0x4ca0, 0x4894, 0xdbbd, 0x34db, 0x0, 0x1);
        gbc.writeMem(0xaf7a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xda57);
        EXPECT(gbc.pc(), 0xaf7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7a), 0xcb);
        EXPECT(gbc.readMem(0xaf7b), 0x3c);
        // CB 3C 007A
        gbc.setState(0xd888, 0x34c8, 0x24c0, 0x34ca, 0x8d86, 0xf853, 0x0, 0x1);
        gbc.writeMem(0xd888, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x34c8);
        EXPECT(gbc.pc(), 0xd88a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd888), 0xcb);
        EXPECT(gbc.readMem(0xd889), 0x3c);
        // CB 3C 007B
        gbc.setState(0x5fb7, 0x7609, 0x7cb0, 0xd4bf, 0xb29e, 0x9cd0, 0x1, 0x0);
        gbc.writeMem(0x5fb7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7609);
        EXPECT(gbc.pc(), 0x5fb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 007C
        gbc.setState(0xc604, 0xd231, 0x84e0, 0x6693, 0xd5fd, 0xc67, 0x0, 0x0);
        gbc.writeMem(0xc604, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd231);
        EXPECT(gbc.pc(), 0xc606);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc604), 0xcb);
        EXPECT(gbc.readMem(0xc605), 0x3c);
        // CB 3C 007D
        gbc.setState(0x13f1, 0x294d, 0xf260, 0x3d1c, 0x43f0, 0x9086, 0x0, 0x1);
        gbc.writeMem(0x13f1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x294d);
        EXPECT(gbc.pc(), 0x13f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 007F
        gbc.setState(0x7719, 0xbefb, 0xc660, 0x802, 0x8d3d, 0x3638, 0x1, 0x1);
        gbc.writeMem(0x7719, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xbefb);
        EXPECT(gbc.pc(), 0x771b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0080
        gbc.setState(0x8b8d, 0xe930, 0xfc30, 0x90cb, 0xf233, 0xe8d1, 0x1, 0x1);
        gbc.writeMem(0x8b8d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe930);
        EXPECT(gbc.pc(), 0x8b8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b8d), 0xcb);
        EXPECT(gbc.readMem(0x8b8e), 0x3c);
        // CB 3C 0081
        gbc.setState(0x659e, 0xb0aa, 0xc930, 0x747a, 0x4d, 0x1373, 0x0, 0x1);
        gbc.writeMem(0x659e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb0aa);
        EXPECT(gbc.pc(), 0x65a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0082
        gbc.setState(0xda5c, 0xda4a, 0x1600, 0x349e, 0x3c33, 0xd40c, 0x0, 0x1);
        gbc.writeMem(0xda5c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xda4a);
        EXPECT(gbc.pc(), 0xda5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda5c), 0xcb);
        EXPECT(gbc.readMem(0xda5d), 0x3c);
        // CB 3C 0083
        gbc.setState(0x8cf4, 0x9d0f, 0x9fb0, 0xc53c, 0x7754, 0x7ee2, 0x0, 0x0);
        gbc.writeMem(0x8cf4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9d0f);
        EXPECT(gbc.pc(), 0x8cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf4), 0xcb);
        EXPECT(gbc.readMem(0x8cf5), 0x3c);
        // CB 3C 0084
        gbc.setState(0xc384, 0xacb1, 0x5fd0, 0x30ac, 0x66c1, 0x9924, 0x0, 0x1);
        gbc.writeMem(0xc384, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xacb1);
        EXPECT(gbc.pc(), 0xc386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc384), 0xcb);
        EXPECT(gbc.readMem(0xc385), 0x3c);
        // CB 3C 0086
        gbc.setState(0xc9c7, 0x8a0e, 0x8c80, 0x9777, 0xd19f, 0x431c, 0x0, 0x0);
        gbc.writeMem(0xc9c7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x8a0e);
        EXPECT(gbc.pc(), 0xc9c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9c7), 0xcb);
        EXPECT(gbc.readMem(0xc9c8), 0x3c);
        // CB 3C 0087
        gbc.setState(0x2f4, 0xfbf6, 0x1360, 0x1d81, 0x8aa4, 0x564, 0x0, 0x1);
        gbc.writeMem(0x2f4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xfbf6);
        EXPECT(gbc.pc(), 0x2f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0088
        gbc.setState(0xb3d9, 0xe47e, 0xaf0, 0xd55e, 0x92a5, 0x43f9, 0x0, 0x0);
        gbc.writeMem(0xb3d9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe47e);
        EXPECT(gbc.pc(), 0xb3db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d9), 0xcb);
        EXPECT(gbc.readMem(0xb3da), 0x3c);
        // CB 3C 0089
        gbc.setState(0x667a, 0xd1cf, 0x71a0, 0xdf81, 0xefee, 0x8fa3, 0x0, 0x0);
        gbc.writeMem(0x667a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd1cf);
        EXPECT(gbc.pc(), 0x667c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 008A
        gbc.setState(0xb392, 0x20a2, 0xcc10, 0x2052, 0xd6c3, 0xf988, 0x0, 0x0);
        gbc.writeMem(0xb392, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x20a2);
        EXPECT(gbc.pc(), 0xb394);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb392), 0xcb);
        EXPECT(gbc.readMem(0xb393), 0x3c);
        // CB 3C 008B
        gbc.setState(0x6871, 0xfa17, 0x4570, 0xee5f, 0x741e, 0xbdac, 0x0, 0x0);
        gbc.writeMem(0x6871, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfa17);
        EXPECT(gbc.pc(), 0x6873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 008C
        gbc.setState(0xe4f6, 0x1cbe, 0x68f0, 0x4d29, 0xbfa7, 0x6ce7, 0x0, 0x0);
        gbc.writeMem(0xe4f6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1cbe);
        EXPECT(gbc.pc(), 0xe4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f6), 0xcb);
        EXPECT(gbc.readMem(0xe4f7), 0x3c);
        // CB 3C 008D
        gbc.setState(0xbac5, 0x5249, 0xf660, 0xda8c, 0xdcf7, 0x923c, 0x1, 0x1);
        gbc.writeMem(0xbac5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5249);
        EXPECT(gbc.pc(), 0xbac7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac5), 0xcb);
        EXPECT(gbc.readMem(0xbac6), 0x3c);
        // CB 3C 008E
        gbc.setState(0x441a, 0x6304, 0x3950, 0xc37d, 0x757c, 0xfb27, 0x1, 0x0);
        gbc.writeMem(0x441a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6304);
        EXPECT(gbc.pc(), 0x441c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 008F
        gbc.setState(0x6b67, 0x12f1, 0xe440, 0xf295, 0x3db6, 0xe689, 0x0, 0x0);
        gbc.writeMem(0x6b67, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x12f1);
        EXPECT(gbc.pc(), 0x6b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0090
        gbc.setState(0xabc, 0x8cd5, 0x4f40, 0xad9c, 0xe7f, 0x69d7, 0x1, 0x0);
        gbc.writeMem(0xabc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8cd5);
        EXPECT(gbc.pc(), 0xabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0091
        gbc.setState(0x7ad0, 0xf74d, 0xd550, 0x763e, 0x5dfa, 0xb072, 0x0, 0x1);
        gbc.writeMem(0x7ad0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf74d);
        EXPECT(gbc.pc(), 0x7ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0092
        gbc.setState(0x9c37, 0xfd25, 0xdba0, 0xb62a, 0xf6b6, 0xcf11, 0x0, 0x0);
        gbc.writeMem(0x9c37, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xfd25);
        EXPECT(gbc.pc(), 0x9c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c37), 0xcb);
        EXPECT(gbc.readMem(0x9c38), 0x3c);
        // CB 3C 0093
        gbc.setState(0x8b4, 0xf9df, 0x8b20, 0xa255, 0xa1d, 0x871a, 0x1, 0x0);
        gbc.writeMem(0x8b4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf9df);
        EXPECT(gbc.pc(), 0x8b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0094
        gbc.setState(0xb99c, 0xe7c9, 0x3c80, 0xe4eb, 0xbad8, 0xb1dd, 0x0, 0x0);
        gbc.writeMem(0xb99c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe7c9);
        EXPECT(gbc.pc(), 0xb99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb99c), 0xcb);
        EXPECT(gbc.readMem(0xb99d), 0x3c);
        // CB 3C 0095
        gbc.setState(0x2b1e, 0x3ff, 0xe650, 0xd15c, 0x3e3a, 0x1c36, 0x0, 0x1);
        gbc.writeMem(0x2b1e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3ff);
        EXPECT(gbc.pc(), 0x2b20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0096
        gbc.setState(0x1df0, 0x3ab6, 0x1fc0, 0xbbc3, 0x65e4, 0xf69e, 0x1, 0x0);
        gbc.writeMem(0x1df0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x3ab6);
        EXPECT(gbc.pc(), 0x1df2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0097
        gbc.setState(0xd8e7, 0x8ce6, 0x5e90, 0x51d7, 0xcf0b, 0xa38a, 0x0, 0x0);
        gbc.writeMem(0xd8e7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8ce6);
        EXPECT(gbc.pc(), 0xd8e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8e7), 0xcb);
        EXPECT(gbc.readMem(0xd8e8), 0x3c);
        // CB 3C 0098
        gbc.setState(0x8978, 0xa38d, 0x4aa0, 0x36ae, 0xa6, 0xf8f7, 0x1, 0x1);
        gbc.writeMem(0x8978, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa38d);
        EXPECT(gbc.pc(), 0x897a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8978), 0xcb);
        EXPECT(gbc.readMem(0x8979), 0x3c);
        // CB 3C 0099
        gbc.setState(0x92d7, 0x6efe, 0x5ca0, 0x5c75, 0xc7d7, 0xb0f1, 0x0, 0x0);
        gbc.writeMem(0x92d7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6efe);
        EXPECT(gbc.pc(), 0x92d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d7), 0xcb);
        EXPECT(gbc.readMem(0x92d8), 0x3c);
        // CB 3C 009A
        gbc.setState(0x4390, 0xe258, 0xe140, 0xd569, 0x70d2, 0xe462, 0x0, 0x0);
        gbc.writeMem(0x4390, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe258);
        EXPECT(gbc.pc(), 0x4392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 009B
        gbc.setState(0xa405, 0xd7ca, 0xdb40, 0x17b, 0x1eee, 0x8be2, 0x1, 0x1);
        gbc.writeMem(0xa405, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xd7ca);
        EXPECT(gbc.pc(), 0xa407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa405), 0xcb);
        EXPECT(gbc.readMem(0xa406), 0x3c);
        // CB 3C 009C
        gbc.setState(0x3d4, 0x6097, 0xb5b0, 0x94e3, 0x17e5, 0xdcac, 0x0, 0x1);
        gbc.writeMem(0x3d4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6097);
        EXPECT(gbc.pc(), 0x3d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 009D
        gbc.setState(0xc0b2, 0xc564, 0xc90, 0xd1d1, 0x814e, 0xf43a, 0x1, 0x1);
        gbc.writeMem(0xc0b2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc564);
        EXPECT(gbc.pc(), 0xc0b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b2), 0xcb);
        EXPECT(gbc.readMem(0xc0b3), 0x3c);
        // CB 3C 009E
        gbc.setState(0xab5e, 0xbe07, 0x4030, 0xc962, 0x7c44, 0x15e, 0x0, 0x0);
        gbc.writeMem(0xab5e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbe07);
        EXPECT(gbc.pc(), 0xab60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab5e), 0xcb);
        EXPECT(gbc.readMem(0xab5f), 0x3c);
        // CB 3C 009F
        gbc.setState(0xaf60, 0xfd95, 0xd600, 0xa9ec, 0x731, 0xd5ff, 0x0, 0x0);
        gbc.writeMem(0xaf60, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xfd95);
        EXPECT(gbc.pc(), 0xaf62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf60), 0xcb);
        EXPECT(gbc.readMem(0xaf61), 0x3c);
        // CB 3C 00A0
        gbc.setState(0x44ff, 0xe9aa, 0x4ce0, 0x425f, 0xb24d, 0x6a14, 0x0, 0x1);
        gbc.writeMem(0x44ff, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe9aa);
        EXPECT(gbc.pc(), 0x4501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00A1
        gbc.setState(0x2e81, 0x95b6, 0xb6a0, 0xec94, 0xa412, 0x63a5, 0x1, 0x0);
        gbc.writeMem(0x2e81, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x95b6);
        EXPECT(gbc.pc(), 0x2e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00A2
        gbc.setState(0x19b6, 0x3a9f, 0x4020, 0x1e51, 0x745d, 0x9b74, 0x0, 0x0);
        gbc.writeMem(0x19b6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3a9f);
        EXPECT(gbc.pc(), 0x19b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00A3
        gbc.setState(0xbea2, 0xcbc1, 0x9140, 0xdcf9, 0x4d49, 0x44e, 0x1, 0x0);
        gbc.writeMem(0xbea2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xcbc1);
        EXPECT(gbc.pc(), 0xbea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea2), 0xcb);
        EXPECT(gbc.readMem(0xbea3), 0x3c);
        // CB 3C 00A4
        gbc.setState(0x4ae5, 0xa84c, 0x9800, 0xdfac, 0x20ed, 0xf2a9, 0x0, 0x1);
        gbc.writeMem(0x4ae5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa84c);
        EXPECT(gbc.pc(), 0x4ae7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00A5
        gbc.setState(0x9e5a, 0xeceb, 0x470, 0x2409, 0xd698, 0x223c, 0x1, 0x0);
        gbc.writeMem(0x9e5a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xeceb);
        EXPECT(gbc.pc(), 0x9e5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e5a), 0xcb);
        EXPECT(gbc.readMem(0x9e5b), 0x3c);
        // CB 3C 00A7
        gbc.setState(0x348b, 0x2824, 0x6c50, 0xfe39, 0xe7a2, 0x6425, 0x1, 0x1);
        gbc.writeMem(0x348b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2824);
        EXPECT(gbc.pc(), 0x348d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00A8
        gbc.setState(0xb5b3, 0xa85b, 0xb830, 0x95c2, 0x4463, 0x988a, 0x0, 0x1);
        gbc.writeMem(0xb5b3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa85b);
        EXPECT(gbc.pc(), 0xb5b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5b3), 0xcb);
        EXPECT(gbc.readMem(0xb5b4), 0x3c);
        // CB 3C 00A9
        gbc.setState(0x29f3, 0xa16f, 0xad30, 0x71cd, 0xce7e, 0x9d75, 0x1, 0x0);
        gbc.writeMem(0x29f3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa16f);
        EXPECT(gbc.pc(), 0x29f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00AA
        gbc.setState(0x3fd2, 0xe7cb, 0x4530, 0x4a0f, 0xc4f7, 0xf6fd, 0x0, 0x0);
        gbc.writeMem(0x3fd2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe7cb);
        EXPECT(gbc.pc(), 0x3fd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00AB
        gbc.setState(0x74d6, 0xaee6, 0x4670, 0x1c17, 0x2560, 0xf4c0, 0x0, 0x0);
        gbc.writeMem(0x74d6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xaee6);
        EXPECT(gbc.pc(), 0x74d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00AC
        gbc.setState(0x5f56, 0x6be4, 0xb840, 0x3552, 0xb94a, 0xf128, 0x0, 0x1);
        gbc.writeMem(0x5f56, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6be4);
        EXPECT(gbc.pc(), 0x5f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00AD
        gbc.setState(0xb47f, 0xef64, 0x21c0, 0xd5f0, 0x834d, 0x6877, 0x0, 0x1);
        gbc.writeMem(0xb47f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xef64);
        EXPECT(gbc.pc(), 0xb481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb47f), 0xcb);
        EXPECT(gbc.readMem(0xb480), 0x3c);
        // CB 3C 00AE
        gbc.setState(0x7b6, 0x9a61, 0x3800, 0x20d1, 0x26, 0x471b, 0x1, 0x0);
        gbc.writeMem(0x7b6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9a61);
        EXPECT(gbc.pc(), 0x7b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00AF
        gbc.setState(0x8fe7, 0x1a76, 0x9b10, 0xcc0c, 0xfecf, 0x5687, 0x0, 0x0);
        gbc.writeMem(0x8fe7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1a76);
        EXPECT(gbc.pc(), 0x8fe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fe7), 0xcb);
        EXPECT(gbc.readMem(0x8fe8), 0x3c);
        // CB 3C 00B0
        gbc.setState(0xce0f, 0xbf96, 0x9ff0, 0x5852, 0x4229, 0x615c, 0x1, 0x0);
        gbc.writeMem(0xce0f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xbf96);
        EXPECT(gbc.pc(), 0xce11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce0f), 0xcb);
        EXPECT(gbc.readMem(0xce10), 0x3c);
        // CB 3C 00B1
        gbc.setState(0xce7f, 0x81fb, 0x9a90, 0xa29, 0x4ab4, 0xdf8a, 0x0, 0x1);
        gbc.writeMem(0xce7f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x81fb);
        EXPECT(gbc.pc(), 0xce81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce7f), 0xcb);
        EXPECT(gbc.readMem(0xce80), 0x3c);
        // CB 3C 00B2
        gbc.setState(0x426, 0x706a, 0xe940, 0x268d, 0x88ab, 0xb0e0, 0x0, 0x0);
        gbc.writeMem(0x426, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x706a);
        EXPECT(gbc.pc(), 0x428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00B3
        gbc.setState(0x7e15, 0x63b3, 0x8620, 0xe89f, 0x42f5, 0x450f, 0x0, 0x0);
        gbc.writeMem(0x7e15, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x63b3);
        EXPECT(gbc.pc(), 0x7e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00B4
        gbc.setState(0xd79b, 0x3d41, 0xd630, 0xfd47, 0xbd12, 0x6d5c, 0x0, 0x0);
        gbc.writeMem(0xd79b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x3d41);
        EXPECT(gbc.pc(), 0xd79d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd79b), 0xcb);
        EXPECT(gbc.readMem(0xd79c), 0x3c);
        // CB 3C 00B5
        gbc.setState(0xba6, 0x86ed, 0x1590, 0x48e9, 0xe276, 0x23e5, 0x1, 0x1);
        gbc.writeMem(0xba6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x86ed);
        EXPECT(gbc.pc(), 0xba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00B6
        gbc.setState(0x68c4, 0x2764, 0xd5e0, 0xa569, 0x820b, 0x151, 0x1, 0x0);
        gbc.writeMem(0x68c4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2764);
        EXPECT(gbc.pc(), 0x68c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00B7
        gbc.setState(0xc53, 0xdd22, 0x5230, 0x75c7, 0x9147, 0xcf6, 0x1, 0x0);
        gbc.writeMem(0xc53, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdd22);
        EXPECT(gbc.pc(), 0xc55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00B8
        gbc.setState(0xe712, 0xc85f, 0xfa60, 0xd2c3, 0x62b6, 0x2b3c, 0x1, 0x1);
        gbc.writeMem(0xe712, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc85f);
        EXPECT(gbc.pc(), 0xe714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe712), 0xcb);
        EXPECT(gbc.readMem(0xe713), 0x3c);
        // CB 3C 00B9
        gbc.setState(0x7a13, 0x2b2e, 0x20a0, 0xa548, 0x2ddc, 0x6168, 0x0, 0x1);
        gbc.writeMem(0x7a13, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2b2e);
        EXPECT(gbc.pc(), 0x7a15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00BA
        gbc.setState(0xb463, 0x659a, 0x8be0, 0xe2ad, 0x4c79, 0x3b6d, 0x1, 0x0);
        gbc.writeMem(0xb463, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x659a);
        EXPECT(gbc.pc(), 0xb465);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb463), 0xcb);
        EXPECT(gbc.readMem(0xb464), 0x3c);
        // CB 3C 00BC
        gbc.setState(0x58b1, 0xeb24, 0x15e0, 0xf69b, 0xd0ed, 0x5497, 0x0, 0x0);
        gbc.writeMem(0x58b1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xeb24);
        EXPECT(gbc.pc(), 0x58b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00BD
        gbc.setState(0x4bec, 0x4848, 0xde60, 0x69f6, 0x9318, 0x375b, 0x0, 0x0);
        gbc.writeMem(0x4bec, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x4848);
        EXPECT(gbc.pc(), 0x4bee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00BE
        gbc.setState(0x1b92, 0xb2ff, 0x2e50, 0xfdd5, 0x8c90, 0x4887, 0x1, 0x0);
        gbc.writeMem(0x1b92, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb2ff);
        EXPECT(gbc.pc(), 0x1b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00BF
        gbc.setState(0x5c74, 0x8a22, 0x39a0, 0x82ca, 0x243b, 0x440f, 0x0, 0x0);
        gbc.writeMem(0x5c74, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x8a22);
        EXPECT(gbc.pc(), 0x5c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00C0
        gbc.setState(0x8dd8, 0x8e10, 0x25f0, 0xf6c0, 0x81c2, 0x44b7, 0x1, 0x1);
        gbc.writeMem(0x8dd8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8e10);
        EXPECT(gbc.pc(), 0x8dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd8), 0xcb);
        EXPECT(gbc.readMem(0x8dd9), 0x3c);
        // CB 3C 00C1
        gbc.setState(0x52c4, 0x751e, 0x1050, 0x7da6, 0xa17e, 0x9190, 0x1, 0x0);
        gbc.writeMem(0x52c4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x751e);
        EXPECT(gbc.pc(), 0x52c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00C2
        gbc.setState(0x7544, 0xd526, 0xb8e0, 0xffd9, 0xa8b5, 0x7f5f, 0x1, 0x0);
        gbc.writeMem(0x7544, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd526);
        EXPECT(gbc.pc(), 0x7546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00C3
        gbc.setState(0xd45c, 0x5a55, 0x2070, 0xc5c0, 0x7648, 0x16d1, 0x0, 0x1);
        gbc.writeMem(0xd45c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x5a55);
        EXPECT(gbc.pc(), 0xd45e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd45c), 0xcb);
        EXPECT(gbc.readMem(0xd45d), 0x3c);
        // CB 3C 00C4
        gbc.setState(0xa060, 0xafe, 0xcf0, 0x814b, 0x9eb6, 0x45f8, 0x1, 0x1);
        gbc.writeMem(0xa060, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xafe);
        EXPECT(gbc.pc(), 0xa062);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa060), 0xcb);
        EXPECT(gbc.readMem(0xa061), 0x3c);
        // CB 3C 00C5
        gbc.setState(0x707a, 0xfadb, 0x9f50, 0x4b6, 0x316d, 0x17c6, 0x1, 0x1);
        gbc.writeMem(0x707a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfadb);
        EXPECT(gbc.pc(), 0x707c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00C6
        gbc.setState(0x1599, 0x3d93, 0x9cc0, 0x4223, 0x7805, 0x2798, 0x1, 0x1);
        gbc.writeMem(0x1599, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3d93);
        EXPECT(gbc.pc(), 0x159b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00C7
        gbc.setState(0x4c2d, 0x495d, 0x51f0, 0xc063, 0x63f8, 0xfa78, 0x1, 0x1);
        gbc.writeMem(0x4c2d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x495d);
        EXPECT(gbc.pc(), 0x4c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00C8
        gbc.setState(0x3899, 0x25a0, 0xca80, 0xecb1, 0xaa6d, 0xb90e, 0x0, 0x0);
        gbc.writeMem(0x3899, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x25a0);
        EXPECT(gbc.pc(), 0x389b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00C9
        gbc.setState(0xa00d, 0x50c9, 0x3680, 0x8750, 0x1d11, 0xbdb0, 0x1, 0x0);
        gbc.writeMem(0xa00d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x50c9);
        EXPECT(gbc.pc(), 0xa00f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa00d), 0xcb);
        EXPECT(gbc.readMem(0xa00e), 0x3c);
        // CB 3C 00CA
        gbc.setState(0x1d5c, 0xecef, 0xec20, 0x75a9, 0x8628, 0xd749, 0x0, 0x1);
        gbc.writeMem(0x1d5c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xecef);
        EXPECT(gbc.pc(), 0x1d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00CB
        gbc.setState(0x65a4, 0xd2bf, 0x2930, 0x24d2, 0xf3e9, 0xa350, 0x0, 0x0);
        gbc.writeMem(0x65a4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd2bf);
        EXPECT(gbc.pc(), 0x65a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00CC
        gbc.setState(0x3b64, 0x1ae2, 0x6820, 0x3cf6, 0x28da, 0xd4ad, 0x1, 0x0);
        gbc.writeMem(0x3b64, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1ae2);
        EXPECT(gbc.pc(), 0x3b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00CD
        gbc.setState(0xc4d2, 0x2c1a, 0x8460, 0x274e, 0x4b62, 0xf38f, 0x1, 0x0);
        gbc.writeMem(0xc4d2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2c1a);
        EXPECT(gbc.pc(), 0xc4d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4d2), 0xcb);
        EXPECT(gbc.readMem(0xc4d3), 0x3c);
        // CB 3C 00CF
        gbc.setState(0xa5db, 0x7645, 0xbdd0, 0xcc31, 0xc0ec, 0x4e13, 0x1, 0x1);
        gbc.writeMem(0xa5db, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7645);
        EXPECT(gbc.pc(), 0xa5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5db), 0xcb);
        EXPECT(gbc.readMem(0xa5dc), 0x3c);
        // CB 3C 00D0
        gbc.setState(0x6850, 0x5725, 0x900, 0x801f, 0x1028, 0x4d7c, 0x0, 0x0);
        gbc.writeMem(0x6850, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x5725);
        EXPECT(gbc.pc(), 0x6852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00D2
        gbc.setState(0x8477, 0xa190, 0x9b60, 0x5f42, 0x8206, 0xdd5a, 0x1, 0x0);
        gbc.writeMem(0x8477, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa190);
        EXPECT(gbc.pc(), 0x8479);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8477), 0xcb);
        EXPECT(gbc.readMem(0x8478), 0x3c);
        // CB 3C 00D3
        gbc.setState(0x5a34, 0x8c43, 0x7c50, 0x490, 0xc718, 0xb3d, 0x0, 0x0);
        gbc.writeMem(0x5a34, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x8c43);
        EXPECT(gbc.pc(), 0x5a36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00D4
        gbc.setState(0xabf1, 0x7ffb, 0xbc80, 0x4d19, 0x431, 0xaf69, 0x1, 0x1);
        gbc.writeMem(0xabf1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7ffb);
        EXPECT(gbc.pc(), 0xabf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf1), 0xcb);
        EXPECT(gbc.readMem(0xabf2), 0x3c);
        // CB 3C 00D5
        gbc.setState(0x90fe, 0xc218, 0x5cc0, 0x4bd6, 0xaff3, 0x3624, 0x1, 0x1);
        gbc.writeMem(0x90fe, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc218);
        EXPECT(gbc.pc(), 0x9100);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90fe), 0xcb);
        EXPECT(gbc.readMem(0x90ff), 0x3c);
        // CB 3C 00D6
        gbc.setState(0x5a52, 0x886b, 0xfd50, 0x251b, 0x35fd, 0xc478, 0x1, 0x1);
        gbc.writeMem(0x5a52, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x886b);
        EXPECT(gbc.pc(), 0x5a54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00D7
        gbc.setState(0x8b6f, 0x508c, 0x7d00, 0xf58c, 0xee84, 0x124e, 0x1, 0x0);
        gbc.writeMem(0x8b6f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x508c);
        EXPECT(gbc.pc(), 0x8b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b6f), 0xcb);
        EXPECT(gbc.readMem(0x8b70), 0x3c);
        // CB 3C 00D8
        gbc.setState(0x29c, 0x65fb, 0x2180, 0xb16b, 0x28b1, 0xd9bd, 0x1, 0x1);
        gbc.writeMem(0x29c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x65fb);
        EXPECT(gbc.pc(), 0x29e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00D9
        gbc.setState(0x6a57, 0xcc7f, 0x4cb0, 0x7328, 0xf6f9, 0xe139, 0x1, 0x1);
        gbc.writeMem(0x6a57, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xcc7f);
        EXPECT(gbc.pc(), 0x6a59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00DA
        gbc.setState(0x9d2b, 0xb307, 0x53a0, 0x7398, 0xdcc8, 0x743e, 0x0, 0x1);
        gbc.writeMem(0x9d2b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb307);
        EXPECT(gbc.pc(), 0x9d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2b), 0xcb);
        EXPECT(gbc.readMem(0x9d2c), 0x3c);
        // CB 3C 00DB
        gbc.setState(0x323e, 0x4fd9, 0xa9f0, 0x4afc, 0xc06c, 0xbba8, 0x0, 0x1);
        gbc.writeMem(0x323e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x4fd9);
        EXPECT(gbc.pc(), 0x3240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00DC
        gbc.setState(0x91b8, 0x5c9, 0xf260, 0xe6b1, 0xa70a, 0x1f59, 0x1, 0x1);
        gbc.writeMem(0x91b8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5c9);
        EXPECT(gbc.pc(), 0x91ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b8), 0xcb);
        EXPECT(gbc.readMem(0x91b9), 0x3c);
        // CB 3C 00DD
        gbc.setState(0xc0d5, 0xa039, 0x4590, 0x6c56, 0xf57a, 0xaf56, 0x1, 0x1);
        gbc.writeMem(0xc0d5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa039);
        EXPECT(gbc.pc(), 0xc0d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d5), 0xcb);
        EXPECT(gbc.readMem(0xc0d6), 0x3c);
        // CB 3C 00DE
        gbc.setState(0x4e0e, 0xb819, 0xdad0, 0x6d09, 0xa3a3, 0xebc9, 0x0, 0x0);
        gbc.writeMem(0x4e0e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb819);
        EXPECT(gbc.pc(), 0x4e10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00DF
        gbc.setState(0x403d, 0x3991, 0x18c0, 0x3981, 0xeab, 0x8d19, 0x0, 0x0);
        gbc.writeMem(0x403d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3991);
        EXPECT(gbc.pc(), 0x403f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E0
        gbc.setState(0x19f9, 0x309b, 0xc0, 0x97a, 0xbcf7, 0x4db6, 0x0, 0x0);
        gbc.writeMem(0x19f9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x309b);
        EXPECT(gbc.pc(), 0x19fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E1
        gbc.setState(0x527, 0x5479, 0xfa50, 0xd7d8, 0x1620, 0xc1f4, 0x0, 0x0);
        gbc.writeMem(0x527, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5479);
        EXPECT(gbc.pc(), 0x529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E2
        gbc.setState(0x30ae, 0x7662, 0x97c0, 0xe26, 0xc7d, 0xb154, 0x0, 0x0);
        gbc.writeMem(0x30ae, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7662);
        EXPECT(gbc.pc(), 0x30b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E4
        gbc.setState(0x1f83, 0x3fca, 0x25c0, 0xbdc0, 0xdc74, 0x5875, 0x1, 0x1);
        gbc.writeMem(0x1f83, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3fca);
        EXPECT(gbc.pc(), 0x1f85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00E5
        gbc.setState(0x537a, 0xa89f, 0x27b0, 0x4076, 0x19bd, 0xdf6e, 0x1, 0x0);
        gbc.writeMem(0x537a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa89f);
        EXPECT(gbc.pc(), 0x537c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E6
        gbc.setState(0x5f7d, 0xef3e, 0x2870, 0x3a85, 0x3520, 0x2e0a, 0x1, 0x0);
        gbc.writeMem(0x5f7d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xef3e);
        EXPECT(gbc.pc(), 0x5f7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00E8
        gbc.setState(0x52cf, 0x9195, 0x5f90, 0xa48b, 0x6fa7, 0xb557, 0x0, 0x1);
        gbc.writeMem(0x52cf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9195);
        EXPECT(gbc.pc(), 0x52d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00E9
        gbc.setState(0x44d7, 0xe606, 0x6cb0, 0xecba, 0xa26e, 0xe6d9, 0x0, 0x1);
        gbc.writeMem(0x44d7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe606);
        EXPECT(gbc.pc(), 0x44d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00EA
        gbc.setState(0xd03c, 0xf0a7, 0xb010, 0x5098, 0x73a1, 0xcc4f, 0x1, 0x1);
        gbc.writeMem(0xd03c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf0a7);
        EXPECT(gbc.pc(), 0xd03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd03c), 0xcb);
        EXPECT(gbc.readMem(0xd03d), 0x3c);
        // CB 3C 00EB
        gbc.setState(0x510e, 0x9265, 0x6c90, 0xd941, 0x84c1, 0xbd7d, 0x1, 0x1);
        gbc.writeMem(0x510e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9265);
        EXPECT(gbc.pc(), 0x5110);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00EC
        gbc.setState(0xc1dd, 0x758d, 0x2d80, 0x55e2, 0xcbaa, 0x3be0, 0x1, 0x1);
        gbc.writeMem(0xc1dd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x758d);
        EXPECT(gbc.pc(), 0xc1df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1dd), 0xcb);
        EXPECT(gbc.readMem(0xc1de), 0x3c);
        // CB 3C 00ED
        gbc.setState(0x65, 0xba2f, 0x8740, 0x4c06, 0x24ec, 0xfb0, 0x1, 0x1);
        gbc.writeMem(0x65, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xba2f);
        EXPECT(gbc.pc(), 0x67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00EE
        gbc.setState(0x5f79, 0xc8bd, 0x61e0, 0x8f42, 0x3709, 0x5eb0, 0x1, 0x0);
        gbc.writeMem(0x5f79, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc8bd);
        EXPECT(gbc.pc(), 0x5f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00EF
        gbc.setState(0x403f, 0xb107, 0xa020, 0x4545, 0xd9ca, 0xeac8, 0x1, 0x1);
        gbc.writeMem(0x403f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb107);
        EXPECT(gbc.pc(), 0x4041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00F0
        gbc.setState(0x5c5b, 0xb3b4, 0xcee0, 0xb957, 0xbeac, 0x5f96, 0x0, 0x1);
        gbc.writeMem(0x5c5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb3b4);
        EXPECT(gbc.pc(), 0x5c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00F1
        gbc.setState(0x2503, 0x3d60, 0x8f50, 0x43fb, 0x15b9, 0xfbdf, 0x0, 0x1);
        gbc.writeMem(0x2503, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3d60);
        EXPECT(gbc.pc(), 0x2505);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00F2
        gbc.setState(0x34f3, 0xc030, 0x3310, 0xda55, 0x3702, 0x4d7d, 0x1, 0x1);
        gbc.writeMem(0x34f3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc030);
        EXPECT(gbc.pc(), 0x34f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00F3
        gbc.setState(0x1854, 0xd696, 0x2830, 0x431a, 0x9e7, 0xa191, 0x0, 0x1);
        gbc.writeMem(0x1854, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd696);
        EXPECT(gbc.pc(), 0x1856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00F4
        gbc.setState(0x8c14, 0xd69c, 0xf800, 0x2128, 0x357, 0xf5e, 0x0, 0x0);
        gbc.writeMem(0x8c14, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd69c);
        EXPECT(gbc.pc(), 0x8c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c14), 0xcb);
        EXPECT(gbc.readMem(0x8c15), 0x3c);
        // CB 3C 00F5
        gbc.setState(0x5640, 0xce04, 0x1cf0, 0xeabb, 0xfe7, 0xd6fa, 0x1, 0x0);
        gbc.writeMem(0x5640, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xce04);
        EXPECT(gbc.pc(), 0x5642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00F6
        gbc.setState(0x6f17, 0x51e7, 0x9270, 0x4660, 0xa14b, 0xa34d, 0x0, 0x0);
        gbc.writeMem(0x6f17, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x51e7);
        EXPECT(gbc.pc(), 0x6f19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00F7
        gbc.setState(0x42bd, 0x299e, 0x7b0, 0x3a1b, 0x3c79, 0xce99, 0x1, 0x1);
        gbc.writeMem(0x42bd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x299e);
        EXPECT(gbc.pc(), 0x42bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00F8
        gbc.setState(0x7d8d, 0xc756, 0x19f0, 0xf4d8, 0xc933, 0x261c, 0x0, 0x1);
        gbc.writeMem(0x7d8d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc756);
        EXPECT(gbc.pc(), 0x7d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00F9
        gbc.setState(0x3eb5, 0x8f3c, 0xe600, 0xb906, 0x5f97, 0x4a20, 0x1, 0x0);
        gbc.writeMem(0x3eb5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8f3c);
        EXPECT(gbc.pc(), 0x3eb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00FA
        gbc.setState(0x3600, 0xb16d, 0xcfe0, 0x98fc, 0x2dd9, 0xaa87, 0x1, 0x0);
        gbc.writeMem(0x3600, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xb16d);
        EXPECT(gbc.pc(), 0x3602);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00FB
        gbc.setState(0x409c, 0x9982, 0x93d0, 0xf7ed, 0x445e, 0xac57, 0x1, 0x0);
        gbc.writeMem(0x409c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9982);
        EXPECT(gbc.pc(), 0x409e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00FC
        gbc.setState(0xd46, 0xe3f6, 0x86d0, 0x5865, 0xe7e5, 0x5ddf, 0x1, 0x0);
        gbc.writeMem(0xd46, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe3f6);
        EXPECT(gbc.pc(), 0xd48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 00FD
        gbc.setState(0x4f4a, 0xce9e, 0xa3b0, 0xcc3e, 0xd6d, 0x7a91, 0x0, 0x0);
        gbc.writeMem(0x4f4a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xce9e);
        EXPECT(gbc.pc(), 0x4f4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 00FE
        gbc.setState(0xb141, 0xdc21, 0x2b10, 0x6fed, 0xd061, 0xdd66, 0x1, 0x0);
        gbc.writeMem(0xb141, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xdc21);
        EXPECT(gbc.pc(), 0xb143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb141), 0xcb);
        EXPECT(gbc.readMem(0xb142), 0x3c);
        // CB 3C 00FF
        gbc.setState(0x1ec0, 0x45e0, 0x7570, 0x44e5, 0xbed4, 0xc669, 0x0, 0x1);
        gbc.writeMem(0x1ec0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x45e0);
        EXPECT(gbc.pc(), 0x1ec2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0100
        gbc.setState(0xbcc6, 0x676f, 0x4980, 0x6012, 0xcca3, 0x4bca, 0x1, 0x1);
        gbc.writeMem(0xbcc6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x676f);
        EXPECT(gbc.pc(), 0xbcc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc6), 0xcb);
        EXPECT(gbc.readMem(0xbcc7), 0x3c);
        // CB 3C 0101
        gbc.setState(0xd156, 0x149d, 0x820, 0x5299, 0x8daf, 0x4ab4, 0x1, 0x0);
        gbc.writeMem(0xd156, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x149d);
        EXPECT(gbc.pc(), 0xd158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd156), 0xcb);
        EXPECT(gbc.readMem(0xd157), 0x3c);
        // CB 3C 0102
        gbc.setState(0xcf6a, 0x7a65, 0xe250, 0xc4ec, 0x44ac, 0x13a1, 0x0, 0x1);
        gbc.writeMem(0xcf6a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7a65);
        EXPECT(gbc.pc(), 0xcf6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf6a), 0xcb);
        EXPECT(gbc.readMem(0xcf6b), 0x3c);
        // CB 3C 0103
        gbc.setState(0xe607, 0x116d, 0x3630, 0xe8f7, 0x52f9, 0xe392, 0x0, 0x1);
        gbc.writeMem(0xe607, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x116d);
        EXPECT(gbc.pc(), 0xe609);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe607), 0xcb);
        EXPECT(gbc.readMem(0xe608), 0x3c);
        // CB 3C 0104
        gbc.setState(0x77ec, 0x5040, 0xa360, 0xf1f6, 0xbf78, 0xa96f, 0x0, 0x0);
        gbc.writeMem(0x77ec, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5040);
        EXPECT(gbc.pc(), 0x77ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0105
        gbc.setState(0x840a, 0xc3d, 0x1800, 0x1a0c, 0xec, 0xb397, 0x1, 0x1);
        gbc.writeMem(0x840a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc3d);
        EXPECT(gbc.pc(), 0x840c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x840a), 0xcb);
        EXPECT(gbc.readMem(0x840b), 0x3c);
        // CB 3C 0106
        gbc.setState(0xb8a7, 0x7058, 0xe690, 0x9da7, 0x5660, 0x37ad, 0x0, 0x1);
        gbc.writeMem(0xb8a7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7058);
        EXPECT(gbc.pc(), 0xb8a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a7), 0xcb);
        EXPECT(gbc.readMem(0xb8a8), 0x3c);
        // CB 3C 0107
        gbc.setState(0x7195, 0x18ac, 0x50f0, 0x514e, 0x40b4, 0xe21, 0x0, 0x0);
        gbc.writeMem(0x7195, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x18ac);
        EXPECT(gbc.pc(), 0x7197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0108
        gbc.setState(0xb238, 0xa190, 0xba30, 0xd397, 0x6007, 0x9df7, 0x1, 0x1);
        gbc.writeMem(0xb238, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xa190);
        EXPECT(gbc.pc(), 0xb23a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb238), 0xcb);
        EXPECT(gbc.readMem(0xb239), 0x3c);
        // CB 3C 0109
        gbc.setState(0x9519, 0x5e8, 0xdff0, 0x9b91, 0x4324, 0xaabc, 0x1, 0x1);
        gbc.writeMem(0x9519, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5e8);
        EXPECT(gbc.pc(), 0x951b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9519), 0xcb);
        EXPECT(gbc.readMem(0x951a), 0x3c);
        // CB 3C 010C
        gbc.setState(0x5b21, 0x27ee, 0x3350, 0x6c37, 0x1949, 0x8c4e, 0x0, 0x1);
        gbc.writeMem(0x5b21, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x27ee);
        EXPECT(gbc.pc(), 0x5b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 010D
        gbc.setState(0xc242, 0x4458, 0x8a80, 0x220f, 0x6ac6, 0x72fe, 0x1, 0x0);
        gbc.writeMem(0xc242, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4458);
        EXPECT(gbc.pc(), 0xc244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc242), 0xcb);
        EXPECT(gbc.readMem(0xc243), 0x3c);
        // CB 3C 010E
        gbc.setState(0x3422, 0x756e, 0xae40, 0x232c, 0x2e13, 0x7561, 0x1, 0x0);
        gbc.writeMem(0x3422, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x756e);
        EXPECT(gbc.pc(), 0x3424);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 010F
        gbc.setState(0x1c9b, 0x12d5, 0x4b0, 0xbd76, 0x4307, 0x42e8, 0x0, 0x1);
        gbc.writeMem(0x1c9b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x12d5);
        EXPECT(gbc.pc(), 0x1c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0110
        gbc.setState(0x6ff8, 0xeb33, 0x3560, 0x8e42, 0x1a19, 0xce68, 0x1, 0x1);
        gbc.writeMem(0x6ff8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xeb33);
        EXPECT(gbc.pc(), 0x6ffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0111
        gbc.setState(0x23cb, 0xfd67, 0xf050, 0xa206, 0xcda2, 0xcccd, 0x1, 0x1);
        gbc.writeMem(0x23cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfd67);
        EXPECT(gbc.pc(), 0x23cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0112
        gbc.setState(0xe248, 0xb84c, 0xd440, 0x7607, 0x5cb7, 0x3c83, 0x0, 0x0);
        gbc.writeMem(0xe248, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb84c);
        EXPECT(gbc.pc(), 0xe24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe248), 0xcb);
        EXPECT(gbc.readMem(0xe249), 0x3c);
        // CB 3C 0113
        gbc.setState(0x6b59, 0x9f5a, 0xbc0, 0x9b8e, 0x2ba9, 0x840f, 0x1, 0x1);
        gbc.writeMem(0x6b59, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x9f5a);
        EXPECT(gbc.pc(), 0x6b5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0114
        gbc.setState(0x75f1, 0xa499, 0x5a50, 0xca58, 0x9a16, 0xc9bb, 0x0, 0x1);
        gbc.writeMem(0x75f1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa499);
        EXPECT(gbc.pc(), 0x75f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0115
        gbc.setState(0xd92e, 0xaee6, 0x3440, 0xe21, 0xbebc, 0xf7eb, 0x0, 0x0);
        gbc.writeMem(0xd92e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xaee6);
        EXPECT(gbc.pc(), 0xd930);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd92e), 0xcb);
        EXPECT(gbc.readMem(0xd92f), 0x3c);
        // CB 3C 0117
        gbc.setState(0xd1c9, 0xfb24, 0xe960, 0x99e9, 0x99e5, 0xd0e0, 0x1, 0x1);
        gbc.writeMem(0xd1c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfb24);
        EXPECT(gbc.pc(), 0xd1cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1c9), 0xcb);
        EXPECT(gbc.readMem(0xd1ca), 0x3c);
        // CB 3C 0118
        gbc.setState(0xeccc, 0x3cd1, 0x5ae0, 0xc66, 0x7ea3, 0x4204, 0x1, 0x1);
        gbc.writeMem(0xeccc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3cd1);
        EXPECT(gbc.pc(), 0xecce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeccc), 0xcb);
        EXPECT(gbc.readMem(0xeccd), 0x3c);
        // CB 3C 0119
        gbc.setState(0x7434, 0x53e, 0xf0f0, 0x59cc, 0x4335, 0xa02a, 0x1, 0x0);
        gbc.writeMem(0x7434, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x53e);
        EXPECT(gbc.pc(), 0x7436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 011A
        gbc.setState(0x2a23, 0xc773, 0x3a30, 0xe428, 0xc376, 0x8d6c, 0x0, 0x1);
        gbc.writeMem(0x2a23, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc773);
        EXPECT(gbc.pc(), 0x2a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 011B
        gbc.setState(0x51f5, 0xf9a8, 0x6ff0, 0x75b4, 0x6139, 0x5cba, 0x0, 0x0);
        gbc.writeMem(0x51f5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf9a8);
        EXPECT(gbc.pc(), 0x51f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 011C
        gbc.setState(0xb6c9, 0x123, 0x66c0, 0x6578, 0x5fd0, 0x5c03, 0x0, 0x0);
        gbc.writeMem(0xb6c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x123);
        EXPECT(gbc.pc(), 0xb6cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c9), 0xcb);
        EXPECT(gbc.readMem(0xb6ca), 0x3c);
        // CB 3C 011D
        gbc.setState(0xb653, 0x5359, 0x8400, 0x20d1, 0xe9f5, 0x6348, 0x0, 0x0);
        gbc.writeMem(0xb653, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5359);
        EXPECT(gbc.pc(), 0xb655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb653), 0xcb);
        EXPECT(gbc.readMem(0xb654), 0x3c);
        // CB 3C 011E
        gbc.setState(0x635b, 0xb38c, 0x7850, 0x4616, 0xd884, 0x967f, 0x1, 0x0);
        gbc.writeMem(0x635b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb38c);
        EXPECT(gbc.pc(), 0x635d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 011F
        gbc.setState(0xfe5, 0x147, 0xac10, 0x6a8b, 0xb24, 0x9940, 0x1, 0x1);
        gbc.writeMem(0xfe5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x147);
        EXPECT(gbc.pc(), 0xfe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0120
        gbc.setState(0x2f96, 0x7591, 0xb4a0, 0x412c, 0xfb8f, 0x600, 0x0, 0x0);
        gbc.writeMem(0x2f96, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7591);
        EXPECT(gbc.pc(), 0x2f98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0121
        gbc.setState(0x4861, 0xa5e0, 0x57a0, 0x3e3, 0xe8c2, 0x24c4, 0x1, 0x1);
        gbc.writeMem(0x4861, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa5e0);
        EXPECT(gbc.pc(), 0x4863);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0122
        gbc.setState(0xbe00, 0xa91a, 0x5b00, 0xc980, 0x77b5, 0xe354, 0x1, 0x1);
        gbc.writeMem(0xbe00, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa91a);
        EXPECT(gbc.pc(), 0xbe02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe00), 0xcb);
        EXPECT(gbc.readMem(0xbe01), 0x3c);
        // CB 3C 0123
        gbc.setState(0x8f2e, 0x3900, 0x15a0, 0xb997, 0x9e9f, 0x5657, 0x0, 0x0);
        gbc.writeMem(0x8f2e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3900);
        EXPECT(gbc.pc(), 0x8f30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f2e), 0xcb);
        EXPECT(gbc.readMem(0x8f2f), 0x3c);
        // CB 3C 0124
        gbc.setState(0x8f6c, 0xb04, 0xfd80, 0xd0b5, 0x5c5b, 0xf3f6, 0x0, 0x1);
        gbc.writeMem(0x8f6c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb04);
        EXPECT(gbc.pc(), 0x8f6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f6c), 0xcb);
        EXPECT(gbc.readMem(0x8f6d), 0x3c);
        // CB 3C 0125
        gbc.setState(0x5b, 0xde1c, 0x45d0, 0x8488, 0xeff4, 0x3088, 0x0, 0x0);
        gbc.writeMem(0x5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xde1c);
        EXPECT(gbc.pc(), 0x5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0126
        gbc.setState(0x5fd2, 0xb2ed, 0x9fe0, 0x48eb, 0xb94d, 0xe34f, 0x1, 0x0);
        gbc.writeMem(0x5fd2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xb2ed);
        EXPECT(gbc.pc(), 0x5fd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0127
        gbc.setState(0x72, 0x95f8, 0xa920, 0x5d9b, 0x90a9, 0xc4b5, 0x0, 0x1);
        gbc.writeMem(0x72, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x95f8);
        EXPECT(gbc.pc(), 0x74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0128
        gbc.setState(0x547, 0x5df8, 0x2150, 0xc386, 0x79d9, 0x538c, 0x0, 0x1);
        gbc.writeMem(0x547, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5df8);
        EXPECT(gbc.pc(), 0x549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0129
        gbc.setState(0xafa7, 0x43a2, 0x76e0, 0x9dec, 0x780, 0xae9a, 0x1, 0x0);
        gbc.writeMem(0xafa7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x43a2);
        EXPECT(gbc.pc(), 0xafa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa7), 0xcb);
        EXPECT(gbc.readMem(0xafa8), 0x3c);
        // CB 3C 012A
        gbc.setState(0xa81e, 0x8fd, 0x92b0, 0x8423, 0x4fd8, 0x6b30, 0x0, 0x0);
        gbc.writeMem(0xa81e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8fd);
        EXPECT(gbc.pc(), 0xa820);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa81e), 0xcb);
        EXPECT(gbc.readMem(0xa81f), 0x3c);
        // CB 3C 012B
        gbc.setState(0x8315, 0xcc79, 0xea30, 0x344, 0x26ca, 0x48e7, 0x0, 0x1);
        gbc.writeMem(0x8315, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xcc79);
        EXPECT(gbc.pc(), 0x8317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8315), 0xcb);
        EXPECT(gbc.readMem(0x8316), 0x3c);
        // CB 3C 012C
        gbc.setState(0x2926, 0x402, 0x2870, 0xe5f3, 0x3753, 0x921e, 0x0, 0x0);
        gbc.writeMem(0x2926, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x402);
        EXPECT(gbc.pc(), 0x2928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 012D
        gbc.setState(0x6459, 0x7ab4, 0x860, 0xf70a, 0x9ce0, 0xc70, 0x0, 0x0);
        gbc.writeMem(0x6459, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7ab4);
        EXPECT(gbc.pc(), 0x645b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 012E
        gbc.setState(0xc97b, 0xedbf, 0x50e0, 0xea8f, 0xba3c, 0xb060, 0x0, 0x0);
        gbc.writeMem(0xc97b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xedbf);
        EXPECT(gbc.pc(), 0xc97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc97b), 0xcb);
        EXPECT(gbc.readMem(0xc97c), 0x3c);
        // CB 3C 012F
        gbc.setState(0xd0d7, 0x485f, 0x4fa0, 0x4b7, 0xc0f3, 0x833d, 0x1, 0x1);
        gbc.writeMem(0xd0d7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x485f);
        EXPECT(gbc.pc(), 0xd0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0d7), 0xcb);
        EXPECT(gbc.readMem(0xd0d8), 0x3c);
        // CB 3C 0130
        gbc.setState(0x5c3, 0xc87b, 0xa3e0, 0x4f6c, 0x2e35, 0x1d99, 0x0, 0x1);
        gbc.writeMem(0x5c3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc87b);
        EXPECT(gbc.pc(), 0x5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0131
        gbc.setState(0xa13b, 0xc3f3, 0x2a30, 0xa4c8, 0xc99e, 0x77fe, 0x1, 0x1);
        gbc.writeMem(0xa13b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc3f3);
        EXPECT(gbc.pc(), 0xa13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa13b), 0xcb);
        EXPECT(gbc.readMem(0xa13c), 0x3c);
        // CB 3C 0132
        gbc.setState(0xaa75, 0xe35d, 0xe7b0, 0x3837, 0x7a9, 0xf7d3, 0x0, 0x1);
        gbc.writeMem(0xaa75, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xe35d);
        EXPECT(gbc.pc(), 0xaa77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa75), 0xcb);
        EXPECT(gbc.readMem(0xaa76), 0x3c);
        // CB 3C 0133
        gbc.setState(0x461a, 0x4224, 0x40b0, 0x26a9, 0x7495, 0xe97, 0x1, 0x1);
        gbc.writeMem(0x461a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x4224);
        EXPECT(gbc.pc(), 0x461c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0134
        gbc.setState(0x9575, 0xa452, 0x84b0, 0x1e1f, 0x86ef, 0x881, 0x0, 0x0);
        gbc.writeMem(0x9575, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xa452);
        EXPECT(gbc.pc(), 0x9577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9575), 0xcb);
        EXPECT(gbc.readMem(0x9576), 0x3c);
        // CB 3C 0136
        gbc.setState(0x8196, 0x21d5, 0xdf90, 0xa676, 0x39bd, 0xfc51, 0x0, 0x0);
        gbc.writeMem(0x8196, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x21d5);
        EXPECT(gbc.pc(), 0x8198);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8196), 0xcb);
        EXPECT(gbc.readMem(0x8197), 0x3c);
        // CB 3C 0137
        gbc.setState(0x1e20, 0xc8e3, 0xc990, 0x8125, 0xe24f, 0x576b, 0x1, 0x1);
        gbc.writeMem(0x1e20, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xc8e3);
        EXPECT(gbc.pc(), 0x1e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0138
        gbc.setState(0x6110, 0xe5d4, 0x9740, 0x633c, 0x3111, 0xeea, 0x0, 0x0);
        gbc.writeMem(0x6110, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe5d4);
        EXPECT(gbc.pc(), 0x6112);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0139
        gbc.setState(0x45d8, 0xb6c, 0x6340, 0x2dd2, 0x3303, 0x51dd, 0x0, 0x1);
        gbc.writeMem(0x45d8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb6c);
        EXPECT(gbc.pc(), 0x45da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 013A
        gbc.setState(0x402f, 0x5e43, 0xa090, 0x73ec, 0xecd, 0x3027, 0x0, 0x0);
        gbc.writeMem(0x402f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x5e43);
        EXPECT(gbc.pc(), 0x4031);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 013B
        gbc.setState(0x726d, 0x7b9f, 0xfd0, 0xae8, 0xf682, 0x384d, 0x1, 0x0);
        gbc.writeMem(0x726d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7b9f);
        EXPECT(gbc.pc(), 0x726f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 013D
        gbc.setState(0x71cf, 0xaed1, 0x9d60, 0x8cf6, 0x88a0, 0x508, 0x1, 0x0);
        gbc.writeMem(0x71cf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xaed1);
        EXPECT(gbc.pc(), 0x71d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 013E
        gbc.setState(0x5fa1, 0x2529, 0x8190, 0x38de, 0x1e61, 0x5d47, 0x0, 0x1);
        gbc.writeMem(0x5fa1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x2529);
        EXPECT(gbc.pc(), 0x5fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 013F
        gbc.setState(0x473c, 0x1282, 0x23c0, 0x69d8, 0x488, 0x2a76, 0x1, 0x0);
        gbc.writeMem(0x473c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1282);
        EXPECT(gbc.pc(), 0x473e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0140
        gbc.setState(0xa3d4, 0x993, 0x4010, 0x1d55, 0x4003, 0x213f, 0x0, 0x1);
        gbc.writeMem(0xa3d4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x993);
        EXPECT(gbc.pc(), 0xa3d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d4), 0xcb);
        EXPECT(gbc.readMem(0xa3d5), 0x3c);
        // CB 3C 0141
        gbc.setState(0xbcf8, 0xc262, 0x2880, 0x7bf5, 0xcb94, 0x336c, 0x0, 0x1);
        gbc.writeMem(0xbcf8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc262);
        EXPECT(gbc.pc(), 0xbcfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf8), 0xcb);
        EXPECT(gbc.readMem(0xbcf9), 0x3c);
        // CB 3C 0142
        gbc.setState(0x68b6, 0xd974, 0xf730, 0xc43b, 0xe591, 0xbaa8, 0x1, 0x0);
        gbc.writeMem(0x68b6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd974);
        EXPECT(gbc.pc(), 0x68b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0143
        gbc.setState(0x8364, 0xa3d9, 0xea00, 0x2867, 0x2180, 0x46dd, 0x1, 0x0);
        gbc.writeMem(0x8364, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa3d9);
        EXPECT(gbc.pc(), 0x8366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8364), 0xcb);
        EXPECT(gbc.readMem(0x8365), 0x3c);
        // CB 3C 0144
        gbc.setState(0xc62f, 0xf212, 0xac90, 0x8028, 0x7cc, 0xbafc, 0x1, 0x1);
        gbc.writeMem(0xc62f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf212);
        EXPECT(gbc.pc(), 0xc631);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62f), 0xcb);
        EXPECT(gbc.readMem(0xc630), 0x3c);
        // CB 3C 0145
        gbc.setState(0xb03e, 0xe097, 0x6ec0, 0x2f90, 0x6a0c, 0x5688, 0x1, 0x1);
        gbc.writeMem(0xb03e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe097);
        EXPECT(gbc.pc(), 0xb040);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03e), 0xcb);
        EXPECT(gbc.readMem(0xb03f), 0x3c);
        // CB 3C 0147
        gbc.setState(0x800c, 0xa5b5, 0xa1f0, 0x9a4d, 0x13a0, 0x58b8, 0x0, 0x1);
        gbc.writeMem(0x800c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa5b5);
        EXPECT(gbc.pc(), 0x800e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x800c), 0xcb);
        EXPECT(gbc.readMem(0x800d), 0x3c);
        // CB 3C 0148
        gbc.setState(0xd554, 0x47f0, 0xe3b0, 0x2a2e, 0xbd66, 0xd74d, 0x1, 0x0);
        gbc.writeMem(0xd554, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x47f0);
        EXPECT(gbc.pc(), 0xd556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd554), 0xcb);
        EXPECT(gbc.readMem(0xd555), 0x3c);
        // CB 3C 014A
        gbc.setState(0x873f, 0x3c52, 0xbdd0, 0xcee1, 0xf7b4, 0x2238, 0x0, 0x1);
        gbc.writeMem(0x873f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3c52);
        EXPECT(gbc.pc(), 0x8741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x873f), 0xcb);
        EXPECT(gbc.readMem(0x8740), 0x3c);
        // CB 3C 014B
        gbc.setState(0x2344, 0x4466, 0xd310, 0xc71b, 0x6590, 0xdaa6, 0x1, 0x1);
        gbc.writeMem(0x2344, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4466);
        EXPECT(gbc.pc(), 0x2346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 014C
        gbc.setState(0x46dc, 0xea66, 0xf6c0, 0xbfc3, 0x2994, 0x78b6, 0x0, 0x1);
        gbc.writeMem(0x46dc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xea66);
        EXPECT(gbc.pc(), 0x46de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 014E
        gbc.setState(0x19b2, 0x4749, 0xf490, 0xfbd8, 0xd653, 0xa685, 0x0, 0x1);
        gbc.writeMem(0x19b2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4749);
        EXPECT(gbc.pc(), 0x19b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 014F
        gbc.setState(0x96c2, 0x4ce, 0x25a0, 0x8dcd, 0x8b76, 0xd657, 0x1, 0x1);
        gbc.writeMem(0x96c2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4ce);
        EXPECT(gbc.pc(), 0x96c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c2), 0xcb);
        EXPECT(gbc.readMem(0x96c3), 0x3c);
        // CB 3C 0150
        gbc.setState(0x3a69, 0x39d0, 0xb510, 0x4b9a, 0xff6e, 0x1440, 0x0, 0x1);
        gbc.writeMem(0x3a69, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x39d0);
        EXPECT(gbc.pc(), 0x3a6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0151
        gbc.setState(0x6fdb, 0xe004, 0x9eb0, 0x8fe0, 0xea5e, 0xf8af, 0x0, 0x0);
        gbc.writeMem(0x6fdb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xe004);
        EXPECT(gbc.pc(), 0x6fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0153
        gbc.setState(0x3d10, 0x6a5a, 0xc7a0, 0x98ff, 0x7381, 0xb009, 0x1, 0x0);
        gbc.writeMem(0x3d10, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6a5a);
        EXPECT(gbc.pc(), 0x3d12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0154
        gbc.setState(0xd984, 0xea0b, 0xc170, 0xe97c, 0x2cdb, 0xe542, 0x0, 0x1);
        gbc.writeMem(0xd984, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xea0b);
        EXPECT(gbc.pc(), 0xd986);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd984), 0xcb);
        EXPECT(gbc.readMem(0xd985), 0x3c);
        // CB 3C 0155
        gbc.setState(0x2120, 0xf2d3, 0x44d0, 0x6ad8, 0x9a1b, 0xbf29, 0x0, 0x1);
        gbc.writeMem(0x2120, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf2d3);
        EXPECT(gbc.pc(), 0x2122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0156
        gbc.setState(0x6254, 0x1eda, 0xb80, 0x6328, 0xe547, 0x3e22, 0x1, 0x0);
        gbc.writeMem(0x6254, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1eda);
        EXPECT(gbc.pc(), 0x6256);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0157
        gbc.setState(0x4cc3, 0x36a0, 0x4af0, 0x4b6c, 0x90e9, 0xcfa1, 0x0, 0x0);
        gbc.writeMem(0x4cc3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x36a0);
        EXPECT(gbc.pc(), 0x4cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0158
        gbc.setState(0xcfea, 0x2a24, 0x1390, 0xb652, 0x520c, 0x626d, 0x1, 0x0);
        gbc.writeMem(0xcfea, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2a24);
        EXPECT(gbc.pc(), 0xcfec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfea), 0xcb);
        EXPECT(gbc.readMem(0xcfeb), 0x3c);
        // CB 3C 0159
        gbc.setState(0xd90d, 0x3244, 0x6e00, 0x9f56, 0x1dcb, 0xe968, 0x0, 0x0);
        gbc.writeMem(0xd90d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3244);
        EXPECT(gbc.pc(), 0xd90f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd90d), 0xcb);
        EXPECT(gbc.readMem(0xd90e), 0x3c);
        // CB 3C 015A
        gbc.setState(0x8298, 0xecf5, 0xf4f0, 0x4407, 0xc668, 0x912c, 0x1, 0x1);
        gbc.writeMem(0x8298, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xecf5);
        EXPECT(gbc.pc(), 0x829a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8298), 0xcb);
        EXPECT(gbc.readMem(0x8299), 0x3c);
        // CB 3C 015B
        gbc.setState(0x74cf, 0x70fa, 0x80f0, 0xebae, 0xb4a3, 0x4324, 0x0, 0x0);
        gbc.writeMem(0x74cf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x70fa);
        EXPECT(gbc.pc(), 0x74d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 015C
        gbc.setState(0x79b6, 0xa6d, 0xa500, 0x228d, 0xb8d2, 0x4e3a, 0x0, 0x0);
        gbc.writeMem(0x79b6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xa6d);
        EXPECT(gbc.pc(), 0x79b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 015D
        gbc.setState(0x46bf, 0x64f8, 0x9c40, 0x705f, 0x83c5, 0x191, 0x1, 0x1);
        gbc.writeMem(0x46bf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x64f8);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 015E
        gbc.setState(0x43e2, 0x5577, 0xd6b0, 0x6636, 0x342d, 0xe7b3, 0x1, 0x1);
        gbc.writeMem(0x43e2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5577);
        EXPECT(gbc.pc(), 0x43e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 015F
        gbc.setState(0xd398, 0xaadd, 0xd050, 0x7ead, 0x8773, 0xe6ce, 0x1, 0x1);
        gbc.writeMem(0xd398, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaadd);
        EXPECT(gbc.pc(), 0xd39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd398), 0xcb);
        EXPECT(gbc.readMem(0xd399), 0x3c);
        // CB 3C 0160
        gbc.setState(0xc118, 0xed59, 0xc0b0, 0x7c95, 0x6e2c, 0xfae, 0x1, 0x1);
        gbc.writeMem(0xc118, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xed59);
        EXPECT(gbc.pc(), 0xc11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc118), 0xcb);
        EXPECT(gbc.readMem(0xc119), 0x3c);
        // CB 3C 0161
        gbc.setState(0x4b4a, 0x467d, 0xd5b0, 0xcf51, 0x167a, 0x6c20, 0x0, 0x0);
        gbc.writeMem(0x4b4a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x467d);
        EXPECT(gbc.pc(), 0x4b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0162
        gbc.setState(0xe6db, 0x48c4, 0x1d10, 0x1232, 0x90be, 0x2c44, 0x0, 0x1);
        gbc.writeMem(0xe6db, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x48c4);
        EXPECT(gbc.pc(), 0xe6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6db), 0xcb);
        EXPECT(gbc.readMem(0xe6dc), 0x3c);
        // CB 3C 0163
        gbc.setState(0x720a, 0x6582, 0xa8f0, 0x3003, 0xba17, 0x4592, 0x1, 0x1);
        gbc.writeMem(0x720a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6582);
        EXPECT(gbc.pc(), 0x720c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0164
        gbc.setState(0xa953, 0xb0ba, 0xe040, 0xcb41, 0x674, 0x2e7c, 0x1, 0x1);
        gbc.writeMem(0xa953, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb0ba);
        EXPECT(gbc.pc(), 0xa955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa953), 0xcb);
        EXPECT(gbc.readMem(0xa954), 0x3c);
        // CB 3C 0165
        gbc.setState(0x51bd, 0x62a7, 0x2650, 0x6457, 0x26f5, 0x6a7, 0x1, 0x1);
        gbc.writeMem(0x51bd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x62a7);
        EXPECT(gbc.pc(), 0x51bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0166
        gbc.setState(0x3c07, 0x6af1, 0x5100, 0xa9f9, 0x2803, 0x2e0f, 0x0, 0x1);
        gbc.writeMem(0x3c07, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6af1);
        EXPECT(gbc.pc(), 0x3c09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0167
        gbc.setState(0xe642, 0x4375, 0x6040, 0x3000, 0xa7c8, 0x8f85, 0x0, 0x0);
        gbc.writeMem(0xe642, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x4375);
        EXPECT(gbc.pc(), 0xe644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe642), 0xcb);
        EXPECT(gbc.readMem(0xe643), 0x3c);
        // CB 3C 0168
        gbc.setState(0x4797, 0x9052, 0xfbb0, 0xee64, 0xbfaf, 0xc825, 0x1, 0x0);
        gbc.writeMem(0x4797, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x9052);
        EXPECT(gbc.pc(), 0x4799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0169
        gbc.setState(0x27c0, 0x49b7, 0x5320, 0x399f, 0x17d8, 0xd109, 0x0, 0x1);
        gbc.writeMem(0x27c0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x49b7);
        EXPECT(gbc.pc(), 0x27c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 016A
        gbc.setState(0x95db, 0x743b, 0x430, 0x15a4, 0xaae2, 0x4882, 0x0, 0x1);
        gbc.writeMem(0x95db, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x743b);
        EXPECT(gbc.pc(), 0x95dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95db), 0xcb);
        EXPECT(gbc.readMem(0x95dc), 0x3c);
        // CB 3C 016B
        gbc.setState(0x67f0, 0xd7c7, 0xfa0, 0xa6a3, 0xd16d, 0x22a, 0x0, 0x0);
        gbc.writeMem(0x67f0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd7c7);
        EXPECT(gbc.pc(), 0x67f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 016C
        gbc.setState(0xb037, 0x9abc, 0x5f30, 0x6f4a, 0xa91b, 0x4d3, 0x0, 0x1);
        gbc.writeMem(0xb037, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9abc);
        EXPECT(gbc.pc(), 0xb039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb037), 0xcb);
        EXPECT(gbc.readMem(0xb038), 0x3c);
        // CB 3C 016D
        gbc.setState(0x35cb, 0xc086, 0x2680, 0x584, 0x2243, 0x1695, 0x1, 0x0);
        gbc.writeMem(0x35cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xc086);
        EXPECT(gbc.pc(), 0x35cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 016E
        gbc.setState(0x3919, 0xe61d, 0x45a0, 0xb284, 0x7f5f, 0x33cd, 0x0, 0x1);
        gbc.writeMem(0x3919, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe61d);
        EXPECT(gbc.pc(), 0x391b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 016F
        gbc.setState(0x87c3, 0x60a1, 0xdc20, 0xbc93, 0xc4cc, 0x714b, 0x1, 0x1);
        gbc.writeMem(0x87c3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x60a1);
        EXPECT(gbc.pc(), 0x87c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c3), 0xcb);
        EXPECT(gbc.readMem(0x87c4), 0x3c);
        // CB 3C 0170
        gbc.setState(0x80e7, 0xed58, 0x8070, 0xb29c, 0x9b39, 0x4d81, 0x0, 0x0);
        gbc.writeMem(0x80e7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xed58);
        EXPECT(gbc.pc(), 0x80e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e7), 0xcb);
        EXPECT(gbc.readMem(0x80e8), 0x3c);
        // CB 3C 0171
        gbc.setState(0xa536, 0x12c9, 0x54a0, 0xab57, 0x62c4, 0xde66, 0x1, 0x0);
        gbc.writeMem(0xa536, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x12c9);
        EXPECT(gbc.pc(), 0xa538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa536), 0xcb);
        EXPECT(gbc.readMem(0xa537), 0x3c);
        // CB 3C 0172
        gbc.setState(0x4077, 0xa21b, 0x2600, 0xdf8c, 0x3b6d, 0xcc85, 0x0, 0x1);
        gbc.writeMem(0x4077, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xa21b);
        EXPECT(gbc.pc(), 0x4079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0173
        gbc.setState(0x544f, 0xa9b7, 0x43b0, 0x6ba9, 0x2f48, 0xd7e, 0x1, 0x0);
        gbc.writeMem(0x544f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa9b7);
        EXPECT(gbc.pc(), 0x5451);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0174
        gbc.setState(0x983a, 0x8b7a, 0x4a50, 0x776d, 0xc8dd, 0x6aa5, 0x1, 0x1);
        gbc.writeMem(0x983a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x8b7a);
        EXPECT(gbc.pc(), 0x983c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983a), 0xcb);
        EXPECT(gbc.readMem(0x983b), 0x3c);
        // CB 3C 0175
        gbc.setState(0xc2b4, 0x63ca, 0x9550, 0x8589, 0xa8b, 0x9bf, 0x0, 0x1);
        gbc.writeMem(0xc2b4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x63ca);
        EXPECT(gbc.pc(), 0xc2b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2b4), 0xcb);
        EXPECT(gbc.readMem(0xc2b5), 0x3c);
        // CB 3C 0176
        gbc.setState(0x8a1e, 0xf778, 0xe590, 0x1be2, 0x7045, 0x5b6b, 0x0, 0x1);
        gbc.writeMem(0x8a1e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf778);
        EXPECT(gbc.pc(), 0x8a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a1e), 0xcb);
        EXPECT(gbc.readMem(0x8a1f), 0x3c);
        // CB 3C 0177
        gbc.setState(0x7166, 0x536, 0x9810, 0xe739, 0xc2ea, 0xc8ca, 0x1, 0x1);
        gbc.writeMem(0x7166, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x536);
        EXPECT(gbc.pc(), 0x7168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0178
        gbc.setState(0x50ae, 0xc7c2, 0x5a90, 0x4f89, 0xca8e, 0x3671, 0x1, 0x1);
        gbc.writeMem(0x50ae, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc7c2);
        EXPECT(gbc.pc(), 0x50b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0179
        gbc.setState(0x1554, 0x6ab5, 0xc600, 0x15de, 0xa0ff, 0xfb9a, 0x1, 0x1);
        gbc.writeMem(0x1554, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x6ab5);
        EXPECT(gbc.pc(), 0x1556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 017A
        gbc.setState(0x949e, 0x13b8, 0xcd30, 0xfb61, 0x8fb6, 0xa2df, 0x1, 0x0);
        gbc.writeMem(0x949e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x13b8);
        EXPECT(gbc.pc(), 0x94a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x949e), 0xcb);
        EXPECT(gbc.readMem(0x949f), 0x3c);
        // CB 3C 017B
        gbc.setState(0x8c8d, 0x1787, 0x2d20, 0xc610, 0xa7c5, 0x711b, 0x0, 0x1);
        gbc.writeMem(0x8c8d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1787);
        EXPECT(gbc.pc(), 0x8c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c8d), 0xcb);
        EXPECT(gbc.readMem(0x8c8e), 0x3c);
        // CB 3C 017C
        gbc.setState(0x2a2d, 0xc22b, 0x490, 0xdaae, 0x71b8, 0x83b4, 0x1, 0x0);
        gbc.writeMem(0x2a2d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc22b);
        EXPECT(gbc.pc(), 0x2a2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 017E
        gbc.setState(0x834c, 0xeed5, 0xade0, 0x8514, 0xdd67, 0xf052, 0x0, 0x1);
        gbc.writeMem(0x834c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xeed5);
        EXPECT(gbc.pc(), 0x834e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834c), 0xcb);
        EXPECT(gbc.readMem(0x834d), 0x3c);
        // CB 3C 017F
        gbc.setState(0xadf2, 0xc5a7, 0x7350, 0x4cab, 0x3b10, 0x3713, 0x1, 0x0);
        gbc.writeMem(0xadf2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc5a7);
        EXPECT(gbc.pc(), 0xadf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf2), 0xcb);
        EXPECT(gbc.readMem(0xadf3), 0x3c);
        // CB 3C 0181
        gbc.setState(0x2365, 0x8d0, 0x46f0, 0xec66, 0xae24, 0xb5da, 0x1, 0x1);
        gbc.writeMem(0x2365, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8d0);
        EXPECT(gbc.pc(), 0x2367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0182
        gbc.setState(0xe10d, 0xac1a, 0xf3d0, 0xeef3, 0xeab9, 0xd04f, 0x1, 0x1);
        gbc.writeMem(0xe10d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xac1a);
        EXPECT(gbc.pc(), 0xe10f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10d), 0xcb);
        EXPECT(gbc.readMem(0xe10e), 0x3c);
        // CB 3C 0183
        gbc.setState(0x98af, 0xa6cd, 0x51e0, 0x636e, 0x26f9, 0x62a8, 0x1, 0x1);
        gbc.writeMem(0x98af, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa6cd);
        EXPECT(gbc.pc(), 0x98b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98af), 0xcb);
        EXPECT(gbc.readMem(0x98b0), 0x3c);
        // CB 3C 0184
        gbc.setState(0xe87b, 0x9c60, 0x3290, 0x5998, 0x839a, 0xeb3, 0x1, 0x1);
        gbc.writeMem(0xe87b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9c60);
        EXPECT(gbc.pc(), 0xe87d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe87b), 0xcb);
        EXPECT(gbc.readMem(0xe87c), 0x3c);
        // CB 3C 0185
        gbc.setState(0xd92b, 0xe0c7, 0x6b40, 0xaf03, 0xa1a2, 0xba18, 0x1, 0x1);
        gbc.writeMem(0xd92b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xe0c7);
        EXPECT(gbc.pc(), 0xd92d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd92b), 0xcb);
        EXPECT(gbc.readMem(0xd92c), 0x3c);
        // CB 3C 0186
        gbc.setState(0x1fd6, 0xb681, 0xd060, 0xcae3, 0x8f09, 0x527f, 0x0, 0x0);
        gbc.writeMem(0x1fd6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb681);
        EXPECT(gbc.pc(), 0x1fd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0187
        gbc.setState(0xda53, 0xf185, 0xe500, 0x4db2, 0x7b41, 0xfdec, 0x0, 0x1);
        gbc.writeMem(0xda53, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf185);
        EXPECT(gbc.pc(), 0xda55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda53), 0xcb);
        EXPECT(gbc.readMem(0xda54), 0x3c);
        // CB 3C 0188
        gbc.setState(0xc069, 0x76f8, 0xb050, 0xb2d2, 0xb569, 0x4611, 0x1, 0x0);
        gbc.writeMem(0xc069, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x76f8);
        EXPECT(gbc.pc(), 0xc06b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc069), 0xcb);
        EXPECT(gbc.readMem(0xc06a), 0x3c);
        // CB 3C 0189
        gbc.setState(0x5b6a, 0x421f, 0x6c90, 0x3a58, 0x9d7, 0xb19d, 0x1, 0x1);
        gbc.writeMem(0x5b6a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x421f);
        EXPECT(gbc.pc(), 0x5b6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 018A
        gbc.setState(0x33ca, 0xdec2, 0x9310, 0x6f84, 0x1a2d, 0x6eb1, 0x0, 0x0);
        gbc.writeMem(0x33ca, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xdec2);
        EXPECT(gbc.pc(), 0x33cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 018B
        gbc.setState(0x48b2, 0xba57, 0x340, 0xb917, 0x918a, 0x6574, 0x0, 0x0);
        gbc.writeMem(0x48b2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xba57);
        EXPECT(gbc.pc(), 0x48b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 018C
        gbc.setState(0x5a9, 0xc2f9, 0x7580, 0x7d72, 0x6d28, 0xafdb, 0x0, 0x1);
        gbc.writeMem(0x5a9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc2f9);
        EXPECT(gbc.pc(), 0x5ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 018E
        gbc.setState(0x2179, 0x39db, 0xfc20, 0x4a43, 0x1b25, 0x2f1f, 0x0, 0x0);
        gbc.writeMem(0x2179, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x39db);
        EXPECT(gbc.pc(), 0x217b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 018F
        gbc.setState(0x5766, 0x87ab, 0xf0, 0x8ff6, 0x2072, 0xf324, 0x1, 0x0);
        gbc.writeMem(0x5766, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x87ab);
        EXPECT(gbc.pc(), 0x5768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0190
        gbc.setState(0xe7, 0xa550, 0xaa20, 0x6ad1, 0xda8c, 0x981d, 0x1, 0x1);
        gbc.writeMem(0xe7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa550);
        EXPECT(gbc.pc(), 0xe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0191
        gbc.setState(0x4f0b, 0x2bae, 0x72b0, 0x7fca, 0xd556, 0xa4be, 0x0, 0x0);
        gbc.writeMem(0x4f0b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x2bae);
        EXPECT(gbc.pc(), 0x4f0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0192
        gbc.setState(0x53da, 0x6960, 0x6850, 0x6215, 0x37e8, 0x277d, 0x1, 0x0);
        gbc.writeMem(0x53da, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6960);
        EXPECT(gbc.pc(), 0x53dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0193
        gbc.setState(0x4334, 0x66e8, 0x6ec0, 0x45ff, 0x48a2, 0x413, 0x1, 0x1);
        gbc.writeMem(0x4334, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x66e8);
        EXPECT(gbc.pc(), 0x4336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0194
        gbc.setState(0x2b85, 0x8290, 0xc980, 0xf0cf, 0x10e6, 0x1057, 0x1, 0x1);
        gbc.writeMem(0x2b85, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8290);
        EXPECT(gbc.pc(), 0x2b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0196
        gbc.setState(0xe4a9, 0x7b2d, 0x2340, 0x99ba, 0xb075, 0x80bd, 0x1, 0x0);
        gbc.writeMem(0xe4a9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7b2d);
        EXPECT(gbc.pc(), 0xe4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a9), 0xcb);
        EXPECT(gbc.readMem(0xe4aa), 0x3c);
        // CB 3C 0197
        gbc.setState(0x4f77, 0xa503, 0x77a0, 0x7f65, 0x2f1a, 0xcbbc, 0x1, 0x0);
        gbc.writeMem(0x4f77, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa503);
        EXPECT(gbc.pc(), 0x4f79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0198
        gbc.setState(0xbb26, 0xf0e0, 0x2f40, 0xe5e4, 0xdf42, 0x9acf, 0x1, 0x0);
        gbc.writeMem(0xbb26, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf0e0);
        EXPECT(gbc.pc(), 0xbb28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb26), 0xcb);
        EXPECT(gbc.readMem(0xbb27), 0x3c);
        // CB 3C 0199
        gbc.setState(0x8717, 0xd927, 0xae90, 0x4b81, 0x40f2, 0xcb1, 0x1, 0x0);
        gbc.writeMem(0x8717, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd927);
        EXPECT(gbc.pc(), 0x8719);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8717), 0xcb);
        EXPECT(gbc.readMem(0x8718), 0x3c);
        // CB 3C 019A
        gbc.setState(0x36af, 0xd93c, 0xa690, 0xaac5, 0xaf98, 0x28cf, 0x0, 0x1);
        gbc.writeMem(0x36af, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd93c);
        EXPECT(gbc.pc(), 0x36b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 019B
        gbc.setState(0xf4d, 0xe761, 0xa270, 0xb0c8, 0xf0b3, 0x6bca, 0x1, 0x1);
        gbc.writeMem(0xf4d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe761);
        EXPECT(gbc.pc(), 0xf4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 019C
        gbc.setState(0x3a82, 0xbc4b, 0xd1c0, 0x6c5a, 0x154c, 0x1052, 0x0, 0x1);
        gbc.writeMem(0x3a82, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbc4b);
        EXPECT(gbc.pc(), 0x3a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 019D
        gbc.setState(0x5c97, 0x15bc, 0x2980, 0x139, 0xba08, 0x14c5, 0x1, 0x1);
        gbc.writeMem(0x5c97, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x15bc);
        EXPECT(gbc.pc(), 0x5c99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 019E
        gbc.setState(0x388b, 0xd802, 0x3680, 0x7afe, 0xb3f6, 0x4f81, 0x1, 0x0);
        gbc.writeMem(0x388b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd802);
        EXPECT(gbc.pc(), 0x388d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 019F
        gbc.setState(0x5ec3, 0xfd04, 0xf400, 0xa086, 0x4697, 0x9aaa, 0x1, 0x1);
        gbc.writeMem(0x5ec3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xfd04);
        EXPECT(gbc.pc(), 0x5ec5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01A0
        gbc.setState(0x80e2, 0xe2d0, 0x9b20, 0xbe64, 0xb77, 0x4de1, 0x0, 0x1);
        gbc.writeMem(0x80e2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe2d0);
        EXPECT(gbc.pc(), 0x80e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e2), 0xcb);
        EXPECT(gbc.readMem(0x80e3), 0x3c);
        // CB 3C 01A1
        gbc.setState(0xe86b, 0xa51, 0x3e30, 0x1d5c, 0x104a, 0xda68, 0x1, 0x0);
        gbc.writeMem(0xe86b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa51);
        EXPECT(gbc.pc(), 0xe86d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe86b), 0xcb);
        EXPECT(gbc.readMem(0xe86c), 0x3c);
        // CB 3C 01A2
        gbc.setState(0xefe3, 0x3179, 0xd510, 0x8ff, 0x33f4, 0x63b, 0x1, 0x1);
        gbc.writeMem(0xefe3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3179);
        EXPECT(gbc.pc(), 0xefe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe3), 0xcb);
        EXPECT(gbc.readMem(0xefe4), 0x3c);
        // CB 3C 01A3
        gbc.setState(0xc4f0, 0x7fb6, 0x1db0, 0x5e75, 0x9200, 0x8303, 0x0, 0x0);
        gbc.writeMem(0xc4f0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7fb6);
        EXPECT(gbc.pc(), 0xc4f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f0), 0xcb);
        EXPECT(gbc.readMem(0xc4f1), 0x3c);
        // CB 3C 01A4
        gbc.setState(0x823b, 0x1cdb, 0xbfb0, 0x358f, 0xedcc, 0x88d1, 0x0, 0x0);
        gbc.writeMem(0x823b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1cdb);
        EXPECT(gbc.pc(), 0x823d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x823b), 0xcb);
        EXPECT(gbc.readMem(0x823c), 0x3c);
        // CB 3C 01A5
        gbc.setState(0xd676, 0xfb8c, 0x3e80, 0x7388, 0x8c9c, 0x4f91, 0x0, 0x1);
        gbc.writeMem(0xd676, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfb8c);
        EXPECT(gbc.pc(), 0xd678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd676), 0xcb);
        EXPECT(gbc.readMem(0xd677), 0x3c);
        // CB 3C 01A6
        gbc.setState(0x2eb2, 0xd8a1, 0x64d0, 0x41bf, 0x932a, 0x6f1a, 0x1, 0x1);
        gbc.writeMem(0x2eb2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd8a1);
        EXPECT(gbc.pc(), 0x2eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01A7
        gbc.setState(0xdd63, 0xeb22, 0x1370, 0x1fa8, 0x9bac, 0x28d5, 0x0, 0x0);
        gbc.writeMem(0xdd63, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xeb22);
        EXPECT(gbc.pc(), 0xdd65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd63), 0xcb);
        EXPECT(gbc.readMem(0xdd64), 0x3c);
        // CB 3C 01A8
        gbc.setState(0xfb7, 0xa9da, 0x5c50, 0xc6a4, 0x1f7b, 0x7aa0, 0x1, 0x1);
        gbc.writeMem(0xfb7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa9da);
        EXPECT(gbc.pc(), 0xfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01A9
        gbc.setState(0xc54a, 0x9e5f, 0xc590, 0x8f22, 0x4c38, 0xe147, 0x0, 0x1);
        gbc.writeMem(0xc54a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9e5f);
        EXPECT(gbc.pc(), 0xc54c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54a), 0xcb);
        EXPECT(gbc.readMem(0xc54b), 0x3c);
        // CB 3C 01AA
        gbc.setState(0xa1d4, 0xb996, 0xeef0, 0xbb4a, 0xca7c, 0xb617, 0x0, 0x1);
        gbc.writeMem(0xa1d4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb996);
        EXPECT(gbc.pc(), 0xa1d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1d4), 0xcb);
        EXPECT(gbc.readMem(0xa1d5), 0x3c);
        // CB 3C 01AB
        gbc.setState(0x9175, 0x19f6, 0xa6d0, 0x6289, 0xce10, 0xd32c, 0x0, 0x1);
        gbc.writeMem(0x9175, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x19f6);
        EXPECT(gbc.pc(), 0x9177);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9175), 0xcb);
        EXPECT(gbc.readMem(0x9176), 0x3c);
        // CB 3C 01AC
        gbc.setState(0x5326, 0x668a, 0xeaf0, 0xf6ba, 0x345f, 0xce2b, 0x0, 0x0);
        gbc.writeMem(0x5326, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x668a);
        EXPECT(gbc.pc(), 0x5328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01AD
        gbc.setState(0xc588, 0x11fd, 0xe4b0, 0x58a, 0xe4f7, 0x5617, 0x0, 0x1);
        gbc.writeMem(0xc588, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x11fd);
        EXPECT(gbc.pc(), 0xc58a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc588), 0xcb);
        EXPECT(gbc.readMem(0xc589), 0x3c);
        // CB 3C 01AF
        gbc.setState(0xde13, 0x14d6, 0xa850, 0xb3b9, 0x1466, 0x4465, 0x0, 0x1);
        gbc.writeMem(0xde13, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x14d6);
        EXPECT(gbc.pc(), 0xde15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde13), 0xcb);
        EXPECT(gbc.readMem(0xde14), 0x3c);
        // CB 3C 01B0
        gbc.setState(0x863c, 0x1992, 0xe400, 0x8ad0, 0x4f0e, 0x1052, 0x1, 0x0);
        gbc.writeMem(0x863c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x1992);
        EXPECT(gbc.pc(), 0x863e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863c), 0xcb);
        EXPECT(gbc.readMem(0x863d), 0x3c);
        // CB 3C 01B1
        gbc.setState(0x947e, 0xcc0a, 0xedb0, 0xfd6a, 0x3155, 0x8e76, 0x1, 0x0);
        gbc.writeMem(0x947e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcc0a);
        EXPECT(gbc.pc(), 0x9480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x947e), 0xcb);
        EXPECT(gbc.readMem(0x947f), 0x3c);
        // CB 3C 01B3
        gbc.setState(0x5daf, 0x245d, 0xe400, 0x8828, 0xd5e5, 0xfd86, 0x1, 0x0);
        gbc.writeMem(0x5daf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x245d);
        EXPECT(gbc.pc(), 0x5db1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01B4
        gbc.setState(0x4968, 0xcbb5, 0x22e0, 0x587e, 0x8b33, 0x160a, 0x1, 0x0);
        gbc.writeMem(0x4968, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcbb5);
        EXPECT(gbc.pc(), 0x496a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01B5
        gbc.setState(0x6fb7, 0x2525, 0x9e80, 0xaeda, 0x7863, 0x82e8, 0x1, 0x1);
        gbc.writeMem(0x6fb7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2525);
        EXPECT(gbc.pc(), 0x6fb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01B6
        gbc.setState(0xd136, 0x889d, 0x2430, 0x3e10, 0x59a0, 0xaf0d, 0x1, 0x1);
        gbc.writeMem(0xd136, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x889d);
        EXPECT(gbc.pc(), 0xd138);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd136), 0xcb);
        EXPECT(gbc.readMem(0xd137), 0x3c);
        // CB 3C 01B7
        gbc.setState(0x6a83, 0x8807, 0xe530, 0xedb4, 0xcdb7, 0x49ce, 0x1, 0x0);
        gbc.writeMem(0x6a83, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8807);
        EXPECT(gbc.pc(), 0x6a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01B8
        gbc.setState(0xe555, 0x50f8, 0xa270, 0x6d8b, 0xb600, 0x15c2, 0x0, 0x0);
        gbc.writeMem(0xe555, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x50f8);
        EXPECT(gbc.pc(), 0xe557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe555), 0xcb);
        EXPECT(gbc.readMem(0xe556), 0x3c);
        // CB 3C 01B9
        gbc.setState(0x3d80, 0x530e, 0xdb10, 0xeba2, 0xb4fe, 0xc11a, 0x1, 0x1);
        gbc.writeMem(0x3d80, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x530e);
        EXPECT(gbc.pc(), 0x3d82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01BA
        gbc.setState(0x4144, 0xe7f1, 0x7120, 0xbd18, 0xc526, 0xa37c, 0x1, 0x1);
        gbc.writeMem(0x4144, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xe7f1);
        EXPECT(gbc.pc(), 0x4146);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01BB
        gbc.setState(0xac53, 0x98d8, 0xf190, 0xcc1a, 0x9bfb, 0x686b, 0x0, 0x1);
        gbc.writeMem(0xac53, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x98d8);
        EXPECT(gbc.pc(), 0xac55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac53), 0xcb);
        EXPECT(gbc.readMem(0xac54), 0x3c);
        // CB 3C 01BC
        gbc.setState(0x2d01, 0x71a2, 0x97d0, 0x2cca, 0xea7e, 0x7b59, 0x1, 0x1);
        gbc.writeMem(0x2d01, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x71a2);
        EXPECT(gbc.pc(), 0x2d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01BD
        gbc.setState(0xa6a9, 0x845, 0xae30, 0xfea7, 0x5485, 0xe562, 0x0, 0x1);
        gbc.writeMem(0xa6a9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x845);
        EXPECT(gbc.pc(), 0xa6ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a9), 0xcb);
        EXPECT(gbc.readMem(0xa6aa), 0x3c);
        // CB 3C 01BE
        gbc.setState(0x4bca, 0xea22, 0x1bb0, 0xa044, 0x8eee, 0xc520, 0x0, 0x1);
        gbc.writeMem(0x4bca, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xea22);
        EXPECT(gbc.pc(), 0x4bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01BF
        gbc.setState(0xaef0, 0xeb2c, 0xb580, 0x111b, 0x2d3f, 0xb5b3, 0x1, 0x1);
        gbc.writeMem(0xaef0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xeb2c);
        EXPECT(gbc.pc(), 0xaef2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef0), 0xcb);
        EXPECT(gbc.readMem(0xaef1), 0x3c);
        // CB 3C 01C0
        gbc.setState(0x60c9, 0xe9d6, 0xff10, 0xa725, 0xff07, 0x4a66, 0x0, 0x1);
        gbc.writeMem(0x60c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe9d6);
        EXPECT(gbc.pc(), 0x60cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01C1
        gbc.setState(0x52cb, 0x93e8, 0x4de0, 0xba2d, 0x7766, 0x76c5, 0x0, 0x0);
        gbc.writeMem(0x52cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x93e8);
        EXPECT(gbc.pc(), 0x52cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01C2
        gbc.setState(0xb076, 0x2eaa, 0x280, 0x161e, 0x18a1, 0xccdd, 0x0, 0x0);
        gbc.writeMem(0xb076, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x2eaa);
        EXPECT(gbc.pc(), 0xb078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb076), 0xcb);
        EXPECT(gbc.readMem(0xb077), 0x3c);
        // CB 3C 01C3
        gbc.setState(0x80ef, 0x4c3b, 0xbec0, 0x8c34, 0x50b4, 0x1860, 0x1, 0x1);
        gbc.writeMem(0x80ef, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4c3b);
        EXPECT(gbc.pc(), 0x80f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ef), 0xcb);
        EXPECT(gbc.readMem(0x80f0), 0x3c);
        // CB 3C 01C5
        gbc.setState(0xa4a8, 0xb7f8, 0x4320, 0x8872, 0x2be8, 0x1135, 0x0, 0x1);
        gbc.writeMem(0xa4a8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb7f8);
        EXPECT(gbc.pc(), 0xa4aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4a8), 0xcb);
        EXPECT(gbc.readMem(0xa4a9), 0x3c);
        // CB 3C 01C6
        gbc.setState(0x5f47, 0xa433, 0x2970, 0x8dd4, 0xbd29, 0x1b9f, 0x1, 0x0);
        gbc.writeMem(0x5f47, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa433);
        EXPECT(gbc.pc(), 0x5f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01C7
        gbc.setState(0xdbd9, 0xebb8, 0xd640, 0x8cd2, 0x84e2, 0x297f, 0x1, 0x0);
        gbc.writeMem(0xdbd9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xebb8);
        EXPECT(gbc.pc(), 0xdbdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd9), 0xcb);
        EXPECT(gbc.readMem(0xdbda), 0x3c);
        // CB 3C 01C8
        gbc.setState(0xbdfe, 0x681c, 0x3130, 0x809a, 0xab13, 0x4031, 0x0, 0x1);
        gbc.writeMem(0xbdfe, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x681c);
        EXPECT(gbc.pc(), 0xbe00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdfe), 0xcb);
        EXPECT(gbc.readMem(0xbdff), 0x3c);
        // CB 3C 01C9
        gbc.setState(0x64ca, 0xbbf8, 0xbcb0, 0xaec7, 0xc7d9, 0x67a9, 0x0, 0x0);
        gbc.writeMem(0x64ca, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbbf8);
        EXPECT(gbc.pc(), 0x64cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01CA
        gbc.setState(0x76ae, 0x740b, 0xa520, 0x6ed, 0xf69e, 0xa8a8, 0x0, 0x0);
        gbc.writeMem(0x76ae, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x740b);
        EXPECT(gbc.pc(), 0x76b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01CB
        gbc.setState(0xea70, 0x39b5, 0x8b00, 0xcb0c, 0x8d82, 0xe455, 0x0, 0x1);
        gbc.writeMem(0xea70, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x39b5);
        EXPECT(gbc.pc(), 0xea72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea70), 0xcb);
        EXPECT(gbc.readMem(0xea71), 0x3c);
        // CB 3C 01CC
        gbc.setState(0x5d5b, 0x53fb, 0x8700, 0x339f, 0x5c3c, 0xc5f4, 0x0, 0x1);
        gbc.writeMem(0x5d5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x53fb);
        EXPECT(gbc.pc(), 0x5d5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01CD
        gbc.setState(0x1b76, 0x2192, 0xe0, 0xf13b, 0x5cb0, 0xc912, 0x1, 0x0);
        gbc.writeMem(0x1b76, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2192);
        EXPECT(gbc.pc(), 0x1b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01CE
        gbc.setState(0x8e27, 0x6077, 0xb8d0, 0x92dd, 0x304a, 0xd4cb, 0x0, 0x0);
        gbc.writeMem(0x8e27, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x6077);
        EXPECT(gbc.pc(), 0x8e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e27), 0xcb);
        EXPECT(gbc.readMem(0x8e28), 0x3c);
        // CB 3C 01CF
        gbc.setState(0xd568, 0x8034, 0xe640, 0xcd13, 0xd506, 0x4441, 0x0, 0x1);
        gbc.writeMem(0xd568, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8034);
        EXPECT(gbc.pc(), 0xd56a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd568), 0xcb);
        EXPECT(gbc.readMem(0xd569), 0x3c);
        // CB 3C 01D0
        gbc.setState(0x9d12, 0x56f3, 0x9f10, 0xcd0b, 0x57f3, 0x392, 0x1, 0x0);
        gbc.writeMem(0x9d12, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x56f3);
        EXPECT(gbc.pc(), 0x9d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d12), 0xcb);
        EXPECT(gbc.readMem(0x9d13), 0x3c);
        // CB 3C 01D2
        gbc.setState(0x23bf, 0xd70c, 0xbbd0, 0x9949, 0x4085, 0xe47a, 0x0, 0x0);
        gbc.writeMem(0x23bf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xd70c);
        EXPECT(gbc.pc(), 0x23c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01D3
        gbc.setState(0x8529, 0xe9fe, 0x64d0, 0x2903, 0xad13, 0x70ae, 0x0, 0x0);
        gbc.writeMem(0x8529, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe9fe);
        EXPECT(gbc.pc(), 0x852b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8529), 0xcb);
        EXPECT(gbc.readMem(0x852a), 0x3c);
        // CB 3C 01D4
        gbc.setState(0xbcd4, 0x8ebb, 0x4de0, 0x39ec, 0x906f, 0x9c36, 0x1, 0x1);
        gbc.writeMem(0xbcd4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x8ebb);
        EXPECT(gbc.pc(), 0xbcd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd4), 0xcb);
        EXPECT(gbc.readMem(0xbcd5), 0x3c);
        // CB 3C 01D5
        gbc.setState(0xbbbb, 0x9209, 0xe3f0, 0x68ca, 0xfd7d, 0x921, 0x0, 0x1);
        gbc.writeMem(0xbbbb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9209);
        EXPECT(gbc.pc(), 0xbbbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbbb), 0xcb);
        EXPECT(gbc.readMem(0xbbbc), 0x3c);
        // CB 3C 01D6
        gbc.setState(0x6553, 0xd697, 0x3400, 0x8f59, 0xb994, 0xb42c, 0x0, 0x1);
        gbc.writeMem(0x6553, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd697);
        EXPECT(gbc.pc(), 0x6555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01D7
        gbc.setState(0x9770, 0xc13a, 0x29d0, 0xcea8, 0xe647, 0x8577, 0x1, 0x1);
        gbc.writeMem(0x9770, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc13a);
        EXPECT(gbc.pc(), 0x9772);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9770), 0xcb);
        EXPECT(gbc.readMem(0x9771), 0x3c);
        // CB 3C 01D8
        gbc.setState(0x9c3f, 0xecb4, 0x64e0, 0x4f21, 0x7637, 0x80c2, 0x1, 0x0);
        gbc.writeMem(0x9c3f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xecb4);
        EXPECT(gbc.pc(), 0x9c41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c3f), 0xcb);
        EXPECT(gbc.readMem(0x9c40), 0x3c);
        // CB 3C 01D9
        gbc.setState(0x9a80, 0xdcca, 0xcd0, 0xfd1f, 0xa36f, 0xf0c3, 0x1, 0x0);
        gbc.writeMem(0x9a80, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdcca);
        EXPECT(gbc.pc(), 0x9a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a80), 0xcb);
        EXPECT(gbc.readMem(0x9a81), 0x3c);
        // CB 3C 01DA
        gbc.setState(0xb194, 0x3209, 0xe60, 0x6293, 0x6f31, 0x7c66, 0x1, 0x0);
        gbc.writeMem(0xb194, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3209);
        EXPECT(gbc.pc(), 0xb196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb194), 0xcb);
        EXPECT(gbc.readMem(0xb195), 0x3c);
        // CB 3C 01DC
        gbc.setState(0x4ea3, 0xa87c, 0x7c0, 0x9447, 0x7f73, 0x569e, 0x0, 0x0);
        gbc.writeMem(0x4ea3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa87c);
        EXPECT(gbc.pc(), 0x4ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01DD
        gbc.setState(0x7737, 0x10e0, 0xb160, 0x5537, 0xfaf, 0x5785, 0x1, 0x0);
        gbc.writeMem(0x7737, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x10e0);
        EXPECT(gbc.pc(), 0x7739);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01DE
        gbc.setState(0x36af, 0x3660, 0x94e0, 0xd147, 0xb2eb, 0xfba8, 0x1, 0x1);
        gbc.writeMem(0x36af, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3660);
        EXPECT(gbc.pc(), 0x36b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01DF
        gbc.setState(0x9b40, 0xc5e5, 0x2b60, 0x5f96, 0x7e9f, 0x953, 0x0, 0x1);
        gbc.writeMem(0x9b40, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc5e5);
        EXPECT(gbc.pc(), 0x9b42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b40), 0xcb);
        EXPECT(gbc.readMem(0x9b41), 0x3c);
        // CB 3C 01E0
        gbc.setState(0xaa5b, 0x93b4, 0x4670, 0x9c85, 0xa958, 0x49df, 0x0, 0x0);
        gbc.writeMem(0xaa5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x93b4);
        EXPECT(gbc.pc(), 0xaa5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa5b), 0xcb);
        EXPECT(gbc.readMem(0xaa5c), 0x3c);
        // CB 3C 01E2
        gbc.setState(0xe580, 0x72fc, 0xd300, 0xc0b4, 0x9711, 0x205a, 0x0, 0x1);
        gbc.writeMem(0xe580, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x72fc);
        EXPECT(gbc.pc(), 0xe582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe580), 0xcb);
        EXPECT(gbc.readMem(0xe581), 0x3c);
        // CB 3C 01E3
        gbc.setState(0x6d0b, 0xa88a, 0x70d0, 0xae2b, 0x1d62, 0x9323, 0x1, 0x1);
        gbc.writeMem(0x6d0b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa88a);
        EXPECT(gbc.pc(), 0x6d0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01E5
        gbc.setState(0x581, 0x3c09, 0x2030, 0xe6c0, 0x24ff, 0xae2c, 0x0, 0x0);
        gbc.writeMem(0x581, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3c09);
        EXPECT(gbc.pc(), 0x583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01E6
        gbc.setState(0x30eb, 0xea3f, 0x6500, 0x82d3, 0x7c67, 0x54a8, 0x0, 0x1);
        gbc.writeMem(0x30eb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xea3f);
        EXPECT(gbc.pc(), 0x30ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01E7
        gbc.setState(0x79c7, 0x5265, 0x2290, 0x9a93, 0x4418, 0xfd8, 0x1, 0x0);
        gbc.writeMem(0x79c7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5265);
        EXPECT(gbc.pc(), 0x79c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01E8
        gbc.setState(0xdfe2, 0x8679, 0x21e0, 0x84a9, 0xc114, 0xd4f0, 0x1, 0x1);
        gbc.writeMem(0xdfe2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8679);
        EXPECT(gbc.pc(), 0xdfe4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe2), 0xcb);
        EXPECT(gbc.readMem(0xdfe3), 0x3c);
        // CB 3C 01E9
        gbc.setState(0x28da, 0xaa66, 0x2f80, 0x76f7, 0x4d7e, 0xc14, 0x1, 0x0);
        gbc.writeMem(0x28da, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xaa66);
        EXPECT(gbc.pc(), 0x28dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01EA
        gbc.setState(0x6c02, 0x7715, 0xc9b0, 0xf7f2, 0x994f, 0x8e2e, 0x0, 0x0);
        gbc.writeMem(0x6c02, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7715);
        EXPECT(gbc.pc(), 0x6c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01EB
        gbc.setState(0x528d, 0xd713, 0xae40, 0xdddf, 0xf675, 0x1a6, 0x1, 0x0);
        gbc.writeMem(0x528d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd713);
        EXPECT(gbc.pc(), 0x528f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01EC
        gbc.setState(0x3570, 0xc199, 0xf550, 0xbc39, 0xe8e4, 0xf12a, 0x1, 0x0);
        gbc.writeMem(0x3570, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc199);
        EXPECT(gbc.pc(), 0x3572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01ED
        gbc.setState(0x8574, 0x145, 0xc0, 0xceba, 0x3c40, 0xdc62, 0x1, 0x1);
        gbc.writeMem(0x8574, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x145);
        EXPECT(gbc.pc(), 0x8576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8574), 0xcb);
        EXPECT(gbc.readMem(0x8575), 0x3c);
        // CB 3C 01EE
        gbc.setState(0x4416, 0xbafa, 0xfc10, 0xa08f, 0x7e33, 0xabfa, 0x0, 0x1);
        gbc.writeMem(0x4416, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbafa);
        EXPECT(gbc.pc(), 0x4418);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01EF
        gbc.setState(0x6ef, 0xd0bf, 0x1d10, 0x868f, 0xb13e, 0xdcde, 0x1, 0x1);
        gbc.writeMem(0x6ef, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd0bf);
        EXPECT(gbc.pc(), 0x6f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01F0
        gbc.setState(0x84ca, 0xe99d, 0xcd50, 0xff0c, 0xb156, 0xf3a3, 0x0, 0x1);
        gbc.writeMem(0x84ca, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xe99d);
        EXPECT(gbc.pc(), 0x84cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ca), 0xcb);
        EXPECT(gbc.readMem(0x84cb), 0x3c);
        // CB 3C 01F1
        gbc.setState(0xa15a, 0x7220, 0x2490, 0x5c6b, 0x2f5f, 0xe594, 0x0, 0x1);
        gbc.writeMem(0xa15a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x7220);
        EXPECT(gbc.pc(), 0xa15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa15a), 0xcb);
        EXPECT(gbc.readMem(0xa15b), 0x3c);
        // CB 3C 01F2
        gbc.setState(0x448a, 0xe4ba, 0x9be0, 0xec5d, 0x5ffd, 0x8375, 0x0, 0x0);
        gbc.writeMem(0x448a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe4ba);
        EXPECT(gbc.pc(), 0x448c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01F3
        gbc.setState(0x4a75, 0xd22f, 0x6b10, 0x71a8, 0x6862, 0xb61b, 0x0, 0x1);
        gbc.writeMem(0x4a75, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd22f);
        EXPECT(gbc.pc(), 0x4a77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01F4
        gbc.setState(0x3d42, 0x8861, 0xac30, 0x310b, 0xe51b, 0xd3ed, 0x1, 0x0);
        gbc.writeMem(0x3d42, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8861);
        EXPECT(gbc.pc(), 0x3d44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01F5
        gbc.setState(0xbcbc, 0xa8c2, 0x7a00, 0xeed8, 0xc62d, 0x73c9, 0x0, 0x1);
        gbc.writeMem(0xbcbc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa8c2);
        EXPECT(gbc.pc(), 0xbcbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcbc), 0xcb);
        EXPECT(gbc.readMem(0xbcbd), 0x3c);
        // CB 3C 01F6
        gbc.setState(0x1122, 0x5e40, 0xd8a0, 0xb85b, 0x97a9, 0xdf42, 0x0, 0x1);
        gbc.writeMem(0x1122, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5e40);
        EXPECT(gbc.pc(), 0x1124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01F7
        gbc.setState(0x447b, 0xcab7, 0xeff0, 0xefa0, 0xe4, 0x755e, 0x0, 0x0);
        gbc.writeMem(0x447b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcab7);
        EXPECT(gbc.pc(), 0x447d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01F8
        gbc.setState(0xbdc1, 0x328c, 0x2f0, 0x2e19, 0x4b3d, 0xb057, 0x1, 0x0);
        gbc.writeMem(0xbdc1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x328c);
        EXPECT(gbc.pc(), 0xbdc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc1), 0xcb);
        EXPECT(gbc.readMem(0xbdc2), 0x3c);
        // CB 3C 01F9
        gbc.setState(0x3afa, 0x84e, 0x5be0, 0xf166, 0x2977, 0xe275, 0x0, 0x0);
        gbc.writeMem(0x3afa, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x84e);
        EXPECT(gbc.pc(), 0x3afc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01FA
        gbc.setState(0xd0b1, 0xdfee, 0xbf50, 0xc9b5, 0x4990, 0x884c, 0x0, 0x1);
        gbc.writeMem(0xd0b1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xdfee);
        EXPECT(gbc.pc(), 0xd0b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b1), 0xcb);
        EXPECT(gbc.readMem(0xd0b2), 0x3c);
        // CB 3C 01FB
        gbc.setState(0x3632, 0x30cd, 0x1de0, 0x3aa0, 0xf0c4, 0xf40c, 0x1, 0x1);
        gbc.writeMem(0x3632, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x30cd);
        EXPECT(gbc.pc(), 0x3634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 01FC
        gbc.setState(0xb042, 0xf270, 0xc8f0, 0x44db, 0xf9, 0xae14, 0x0, 0x1);
        gbc.writeMem(0xb042, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf270);
        EXPECT(gbc.pc(), 0xb044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb042), 0xcb);
        EXPECT(gbc.readMem(0xb043), 0x3c);
        // CB 3C 01FD
        gbc.setState(0xe548, 0x638e, 0x4e90, 0x3218, 0x3dda, 0x39b9, 0x0, 0x0);
        gbc.writeMem(0xe548, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x638e);
        EXPECT(gbc.pc(), 0xe54a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe548), 0xcb);
        EXPECT(gbc.readMem(0xe549), 0x3c);
        // CB 3C 01FE
        gbc.setState(0x59f6, 0x946c, 0xe330, 0x4bb4, 0xb81b, 0x6ff0, 0x1, 0x0);
        gbc.writeMem(0x59f6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x946c);
        EXPECT(gbc.pc(), 0x59f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 01FF
        gbc.setState(0xb4a3, 0x45e, 0x69d0, 0x1af9, 0xfed3, 0x4e9c, 0x0, 0x1);
        gbc.writeMem(0xb4a3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x45e);
        EXPECT(gbc.pc(), 0xb4a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4a3), 0xcb);
        EXPECT(gbc.readMem(0xb4a4), 0x3c);
        // CB 3C 0200
        gbc.setState(0xe95b, 0x61a1, 0xe1b0, 0x49c1, 0xe4ea, 0x611d, 0x0, 0x1);
        gbc.writeMem(0xe95b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x61a1);
        EXPECT(gbc.pc(), 0xe95d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe95b), 0xcb);
        EXPECT(gbc.readMem(0xe95c), 0x3c);
        // CB 3C 0201
        gbc.setState(0x3d9a, 0x9336, 0x4180, 0xe37c, 0xe11c, 0x3fa0, 0x1, 0x0);
        gbc.writeMem(0x3d9a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9336);
        EXPECT(gbc.pc(), 0x3d9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0202
        gbc.setState(0x924c, 0xb3f0, 0x40c0, 0xc71c, 0x3043, 0xbe24, 0x1, 0x1);
        gbc.writeMem(0x924c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb3f0);
        EXPECT(gbc.pc(), 0x924e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x924c), 0xcb);
        EXPECT(gbc.readMem(0x924d), 0x3c);
        // CB 3C 0203
        gbc.setState(0x56bc, 0xa59, 0xd590, 0x47d1, 0x1b53, 0xbd66, 0x0, 0x0);
        gbc.writeMem(0x56bc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa59);
        EXPECT(gbc.pc(), 0x56be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0204
        gbc.setState(0x149e, 0xca7c, 0xce50, 0xbe07, 0x3224, 0xe1c3, 0x1, 0x0);
        gbc.writeMem(0x149e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xca7c);
        EXPECT(gbc.pc(), 0x14a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0205
        gbc.setState(0xd2ac, 0xefa3, 0xa720, 0x181d, 0xe288, 0x591a, 0x1, 0x1);
        gbc.writeMem(0xd2ac, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xefa3);
        EXPECT(gbc.pc(), 0xd2ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2ac), 0xcb);
        EXPECT(gbc.readMem(0xd2ad), 0x3c);
        // CB 3C 0207
        gbc.setState(0xe5c9, 0x25d1, 0xe8b0, 0x7ff7, 0x46f1, 0x99c5, 0x1, 0x0);
        gbc.writeMem(0xe5c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x25d1);
        EXPECT(gbc.pc(), 0xe5cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5c9), 0xcb);
        EXPECT(gbc.readMem(0xe5ca), 0x3c);
        // CB 3C 0208
        gbc.setState(0xc23f, 0xb2f8, 0xc9d0, 0x416d, 0x5bce, 0x98f2, 0x1, 0x1);
        gbc.writeMem(0xc23f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb2f8);
        EXPECT(gbc.pc(), 0xc241);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc23f), 0xcb);
        EXPECT(gbc.readMem(0xc240), 0x3c);
        // CB 3C 0209
        gbc.setState(0x8341, 0x5578, 0x1f60, 0xd1f3, 0x3964, 0xf463, 0x0, 0x1);
        gbc.writeMem(0x8341, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5578);
        EXPECT(gbc.pc(), 0x8343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8341), 0xcb);
        EXPECT(gbc.readMem(0x8342), 0x3c);
        // CB 3C 020A
        gbc.setState(0x919a, 0xdc88, 0xfc0, 0x9fb8, 0xbf52, 0x2df8, 0x0, 0x0);
        gbc.writeMem(0x919a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xdc88);
        EXPECT(gbc.pc(), 0x919c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x919a), 0xcb);
        EXPECT(gbc.readMem(0x919b), 0x3c);
        // CB 3C 020B
        gbc.setState(0x30fd, 0x972a, 0xb7c0, 0xe3e0, 0xbbce, 0x6aae, 0x0, 0x1);
        gbc.writeMem(0x30fd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x972a);
        EXPECT(gbc.pc(), 0x30ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 020C
        gbc.setState(0x4761, 0xebd4, 0xc360, 0x86f9, 0x3564, 0xb512, 0x1, 0x0);
        gbc.writeMem(0x4761, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xebd4);
        EXPECT(gbc.pc(), 0x4763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 020D
        gbc.setState(0x1088, 0x5461, 0x8390, 0x8b43, 0xd3d0, 0x73d4, 0x0, 0x0);
        gbc.writeMem(0x1088, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5461);
        EXPECT(gbc.pc(), 0x108a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 020E
        gbc.setState(0xbe8e, 0xa856, 0xedf0, 0xdffb, 0xa465, 0x2970, 0x1, 0x0);
        gbc.writeMem(0xbe8e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xa856);
        EXPECT(gbc.pc(), 0xbe90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe8e), 0xcb);
        EXPECT(gbc.readMem(0xbe8f), 0x3c);
        // CB 3C 020F
        gbc.setState(0x60a, 0xb8b3, 0xb650, 0xd9db, 0xe8d3, 0x36bb, 0x1, 0x1);
        gbc.writeMem(0x60a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb8b3);
        EXPECT(gbc.pc(), 0x60c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0210
        gbc.setState(0xe2e, 0x4d6e, 0xaf10, 0x2c84, 0x9ac4, 0x5672, 0x0, 0x0);
        gbc.writeMem(0xe2e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4d6e);
        EXPECT(gbc.pc(), 0xe30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0211
        gbc.setState(0x3f4a, 0xab69, 0xf750, 0xf6db, 0xc81a, 0x34f8, 0x0, 0x0);
        gbc.writeMem(0x3f4a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xab69);
        EXPECT(gbc.pc(), 0x3f4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0212
        gbc.setState(0xa227, 0x2c26, 0x1260, 0x4338, 0x1ac4, 0xc285, 0x1, 0x1);
        gbc.writeMem(0xa227, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x2c26);
        EXPECT(gbc.pc(), 0xa229);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa227), 0xcb);
        EXPECT(gbc.readMem(0xa228), 0x3c);
        // CB 3C 0214
        gbc.setState(0xc0, 0x953d, 0xcef0, 0xac73, 0xa296, 0x6df3, 0x1, 0x0);
        gbc.writeMem(0xc0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x953d);
        EXPECT(gbc.pc(), 0xc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0215
        gbc.setState(0xb8bb, 0xb25e, 0x79c0, 0xfcbd, 0x3f8f, 0x14bd, 0x0, 0x0);
        gbc.writeMem(0xb8bb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb25e);
        EXPECT(gbc.pc(), 0xb8bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8bb), 0xcb);
        EXPECT(gbc.readMem(0xb8bc), 0x3c);
        // CB 3C 0216
        gbc.setState(0xcc4b, 0xac91, 0xce0, 0x214a, 0x60ee, 0x2649, 0x0, 0x0);
        gbc.writeMem(0xcc4b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xac91);
        EXPECT(gbc.pc(), 0xcc4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc4b), 0xcb);
        EXPECT(gbc.readMem(0xcc4c), 0x3c);
        // CB 3C 0218
        gbc.setState(0xa55c, 0xcc05, 0x1990, 0x5e37, 0x2d9b, 0x7d52, 0x1, 0x1);
        gbc.writeMem(0xa55c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xcc05);
        EXPECT(gbc.pc(), 0xa55e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa55c), 0xcb);
        EXPECT(gbc.readMem(0xa55d), 0x3c);
        // CB 3C 0219
        gbc.setState(0x794d, 0x732b, 0xba00, 0x7b41, 0x2c4, 0x9b23, 0x0, 0x1);
        gbc.writeMem(0x794d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x732b);
        EXPECT(gbc.pc(), 0x794f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 021B
        gbc.setState(0x51c7, 0xe2a9, 0x27a0, 0xa5eb, 0xfcfa, 0xf3ab, 0x1, 0x1);
        gbc.writeMem(0x51c7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe2a9);
        EXPECT(gbc.pc(), 0x51c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 021C
        gbc.setState(0x5e56, 0x42fa, 0x7030, 0x4564, 0x5f5a, 0x5b46, 0x1, 0x0);
        gbc.writeMem(0x5e56, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x42fa);
        EXPECT(gbc.pc(), 0x5e58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 021D
        gbc.setState(0x4274, 0xdd2d, 0xec60, 0x1e43, 0xf06d, 0xe938, 0x0, 0x1);
        gbc.writeMem(0x4274, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xdd2d);
        EXPECT(gbc.pc(), 0x4276);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 021E
        gbc.setState(0x50af, 0x4ac3, 0x9950, 0x26ff, 0x9302, 0x177d, 0x0, 0x0);
        gbc.writeMem(0x50af, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4ac3);
        EXPECT(gbc.pc(), 0x50b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 021F
        gbc.setState(0x610, 0xf2f6, 0x86e0, 0x3323, 0x2ea1, 0x91b2, 0x1, 0x1);
        gbc.writeMem(0x610, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf2f6);
        EXPECT(gbc.pc(), 0x612);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0220
        gbc.setState(0x497, 0x5526, 0x97b0, 0x4755, 0xcf2f, 0x5fe2, 0x1, 0x0);
        gbc.writeMem(0x497, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5526);
        EXPECT(gbc.pc(), 0x499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0221
        gbc.setState(0x7524, 0x5060, 0xc5a0, 0xdebc, 0x75e, 0x27cb, 0x0, 0x0);
        gbc.writeMem(0x7524, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5060);
        EXPECT(gbc.pc(), 0x7526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0222
        gbc.setState(0x394, 0x7f45, 0xf3a0, 0x56e3, 0x8691, 0x6840, 0x1, 0x0);
        gbc.writeMem(0x394, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x7f45);
        EXPECT(gbc.pc(), 0x396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0223
        gbc.setState(0x96c1, 0x41fd, 0x9eb0, 0x1c1e, 0x1d79, 0x8ef3, 0x1, 0x1);
        gbc.writeMem(0x96c1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x41fd);
        EXPECT(gbc.pc(), 0x96c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96c1), 0xcb);
        EXPECT(gbc.readMem(0x96c2), 0x3c);
        // CB 3C 0224
        gbc.setState(0x2530, 0xa43c, 0x5c80, 0x8550, 0x3701, 0x9c3c, 0x0, 0x1);
        gbc.writeMem(0x2530, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xa43c);
        EXPECT(gbc.pc(), 0x2532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0225
        gbc.setState(0xbb02, 0x94bc, 0x94c0, 0xfd3d, 0xa541, 0x8b73, 0x0, 0x1);
        gbc.writeMem(0xbb02, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x94bc);
        EXPECT(gbc.pc(), 0xbb04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb02), 0xcb);
        EXPECT(gbc.readMem(0xbb03), 0x3c);
        // CB 3C 0226
        gbc.setState(0xee8a, 0x13b0, 0x960, 0xf53c, 0x2019, 0x4bd2, 0x0, 0x0);
        gbc.writeMem(0xee8a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x13b0);
        EXPECT(gbc.pc(), 0xee8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8a), 0xcb);
        EXPECT(gbc.readMem(0xee8b), 0x3c);
        // CB 3C 0227
        gbc.setState(0xb29f, 0x4ea6, 0x68d0, 0xe30c, 0xcf23, 0x8cf7, 0x1, 0x0);
        gbc.writeMem(0xb29f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4ea6);
        EXPECT(gbc.pc(), 0xb2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb29f), 0xcb);
        EXPECT(gbc.readMem(0xb2a0), 0x3c);
        // CB 3C 0228
        gbc.setState(0xa610, 0x6b5f, 0xeb60, 0x260, 0x6e9a, 0xec10, 0x0, 0x0);
        gbc.writeMem(0xa610, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6b5f);
        EXPECT(gbc.pc(), 0xa612);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa610), 0xcb);
        EXPECT(gbc.readMem(0xa611), 0x3c);
        // CB 3C 0229
        gbc.setState(0x750, 0x5523, 0xde60, 0x896f, 0xdd57, 0xf97f, 0x1, 0x1);
        gbc.writeMem(0x750, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5523);
        EXPECT(gbc.pc(), 0x752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 022A
        gbc.setState(0xc4f0, 0xd8e3, 0x49f0, 0x750c, 0xcbf4, 0x5785, 0x1, 0x0);
        gbc.writeMem(0xc4f0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd8e3);
        EXPECT(gbc.pc(), 0xc4f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4f0), 0xcb);
        EXPECT(gbc.readMem(0xc4f1), 0x3c);
        // CB 3C 022B
        gbc.setState(0xa2e4, 0x96f3, 0x74a0, 0xd61, 0x1eec, 0x46e0, 0x0, 0x1);
        gbc.writeMem(0xa2e4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x96f3);
        EXPECT(gbc.pc(), 0xa2e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2e4), 0xcb);
        EXPECT(gbc.readMem(0xa2e5), 0x3c);
        // CB 3C 022C
        gbc.setState(0xba1c, 0x5bcb, 0xf6d0, 0xd80a, 0xc6b3, 0x6cf7, 0x0, 0x0);
        gbc.writeMem(0xba1c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5bcb);
        EXPECT(gbc.pc(), 0xba1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1c), 0xcb);
        EXPECT(gbc.readMem(0xba1d), 0x3c);
        // CB 3C 022D
        gbc.setState(0xaef3, 0xf46c, 0x9e30, 0x8fc6, 0xb70c, 0x914b, 0x0, 0x0);
        gbc.writeMem(0xaef3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf46c);
        EXPECT(gbc.pc(), 0xaef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaef3), 0xcb);
        EXPECT(gbc.readMem(0xaef4), 0x3c);
        // CB 3C 022E
        gbc.setState(0xa0d3, 0x2a9f, 0xb850, 0x417d, 0x87a4, 0x74ad, 0x0, 0x0);
        gbc.writeMem(0xa0d3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x2a9f);
        EXPECT(gbc.pc(), 0xa0d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0d3), 0xcb);
        EXPECT(gbc.readMem(0xa0d4), 0x3c);
        // CB 3C 0230
        gbc.setState(0x10f1, 0x314f, 0x7eb0, 0x4bcd, 0xc96a, 0xb542, 0x1, 0x1);
        gbc.writeMem(0x10f1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x314f);
        EXPECT(gbc.pc(), 0x10f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0231
        gbc.setState(0x4fff, 0x50a6, 0x7460, 0x8981, 0xcdb4, 0xac52, 0x1, 0x1);
        gbc.writeMem(0x4fff, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x50a6);
        EXPECT(gbc.pc(), 0x5001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0232
        gbc.setState(0x403b, 0x4bd9, 0x59c0, 0xf24d, 0x6270, 0xbab6, 0x0, 0x1);
        gbc.writeMem(0x403b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x4bd9);
        EXPECT(gbc.pc(), 0x403d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0233
        gbc.setState(0x1d94, 0x30b3, 0xbcd0, 0x6868, 0xf558, 0x3753, 0x1, 0x1);
        gbc.writeMem(0x1d94, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x30b3);
        EXPECT(gbc.pc(), 0x1d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0234
        gbc.setState(0xd11d, 0x656, 0x6710, 0x12f3, 0x9616, 0x47b1, 0x1, 0x1);
        gbc.writeMem(0xd11d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x656);
        EXPECT(gbc.pc(), 0xd11f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd11d), 0xcb);
        EXPECT(gbc.readMem(0xd11e), 0x3c);
        // CB 3C 0236
        gbc.setState(0xd2d9, 0x9679, 0xf870, 0xc70, 0xfd7f, 0xf343, 0x1, 0x0);
        gbc.writeMem(0xd2d9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x9679);
        EXPECT(gbc.pc(), 0xd2db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2d9), 0xcb);
        EXPECT(gbc.readMem(0xd2da), 0x3c);
        // CB 3C 0237
        gbc.setState(0x9d1e, 0x4ecc, 0x7e40, 0xcc35, 0x2a41, 0xff72, 0x0, 0x0);
        gbc.writeMem(0x9d1e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4ecc);
        EXPECT(gbc.pc(), 0x9d20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d1e), 0xcb);
        EXPECT(gbc.readMem(0x9d1f), 0x3c);
        // CB 3C 0238
        gbc.setState(0x9e44, 0x1e1e, 0x2e20, 0xb4b0, 0xd726, 0x89e8, 0x1, 0x1);
        gbc.writeMem(0x9e44, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1e1e);
        EXPECT(gbc.pc(), 0x9e46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e44), 0xcb);
        EXPECT(gbc.readMem(0x9e45), 0x3c);
        // CB 3C 0239
        gbc.setState(0x4da3, 0x6497, 0xa890, 0x1b1e, 0xbc65, 0xcfc, 0x0, 0x1);
        gbc.writeMem(0x4da3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6497);
        EXPECT(gbc.pc(), 0x4da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 023A
        gbc.setState(0x6f0d, 0x1a91, 0xe430, 0x121b, 0x7ead, 0xc7ac, 0x1, 0x0);
        gbc.writeMem(0x6f0d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1a91);
        EXPECT(gbc.pc(), 0x6f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 023B
        gbc.setState(0xd44a, 0x16f0, 0x2ff0, 0x182c, 0xe2d, 0xf70e, 0x0, 0x1);
        gbc.writeMem(0xd44a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x16f0);
        EXPECT(gbc.pc(), 0xd44c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd44a), 0xcb);
        EXPECT(gbc.readMem(0xd44b), 0x3c);
        // CB 3C 023C
        gbc.setState(0xcfb3, 0xe2ab, 0x4d70, 0xb59d, 0x368b, 0xd1b5, 0x1, 0x0);
        gbc.writeMem(0xcfb3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe2ab);
        EXPECT(gbc.pc(), 0xcfb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb3), 0xcb);
        EXPECT(gbc.readMem(0xcfb4), 0x3c);
        // CB 3C 023D
        gbc.setState(0xca39, 0xd57b, 0x6ff0, 0xb431, 0xd3f4, 0x2265, 0x0, 0x1);
        gbc.writeMem(0xca39, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd57b);
        EXPECT(gbc.pc(), 0xca3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca39), 0xcb);
        EXPECT(gbc.readMem(0xca3a), 0x3c);
        // CB 3C 023E
        gbc.setState(0x2d0a, 0xf98e, 0x1c20, 0x62f5, 0x420e, 0xbfc3, 0x0, 0x0);
        gbc.writeMem(0x2d0a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf98e);
        EXPECT(gbc.pc(), 0x2d0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 023F
        gbc.setState(0x2fc3, 0x748f, 0xa290, 0x7a42, 0xad54, 0x232f, 0x1, 0x1);
        gbc.writeMem(0x2fc3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x748f);
        EXPECT(gbc.pc(), 0x2fc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0240
        gbc.setState(0xb3b3, 0xf965, 0x29b0, 0xd156, 0x556, 0xa8df, 0x1, 0x1);
        gbc.writeMem(0xb3b3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf965);
        EXPECT(gbc.pc(), 0xb3b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3b3), 0xcb);
        EXPECT(gbc.readMem(0xb3b4), 0x3c);
        // CB 3C 0241
        gbc.setState(0x946e, 0xfe5, 0xbbc0, 0x21a6, 0xe2a8, 0xaa76, 0x1, 0x0);
        gbc.writeMem(0x946e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xfe5);
        EXPECT(gbc.pc(), 0x9470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946e), 0xcb);
        EXPECT(gbc.readMem(0x946f), 0x3c);
        // CB 3C 0242
        gbc.setState(0x9065, 0x5619, 0x9520, 0x7f4d, 0x4620, 0x3f21, 0x0, 0x0);
        gbc.writeMem(0x9065, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5619);
        EXPECT(gbc.pc(), 0x9067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9065), 0xcb);
        EXPECT(gbc.readMem(0x9066), 0x3c);
        // CB 3C 0243
        gbc.setState(0x696d, 0x8b9c, 0xc0a0, 0x9098, 0xbcf7, 0xf64d, 0x0, 0x1);
        gbc.writeMem(0x696d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8b9c);
        EXPECT(gbc.pc(), 0x696f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0244
        gbc.setState(0x3f82, 0xeec1, 0xec40, 0x856d, 0xe216, 0x9c7a, 0x1, 0x0);
        gbc.writeMem(0x3f82, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xeec1);
        EXPECT(gbc.pc(), 0x3f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0245
        gbc.setState(0x2307, 0x23e1, 0xd5f0, 0xddee, 0xe3, 0x9f72, 0x1, 0x1);
        gbc.writeMem(0x2307, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x23e1);
        EXPECT(gbc.pc(), 0x2309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0246
        gbc.setState(0x8d3c, 0xe90a, 0x2ea0, 0xc09b, 0xa03d, 0x72ec, 0x1, 0x1);
        gbc.writeMem(0x8d3c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe90a);
        EXPECT(gbc.pc(), 0x8d3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d3c), 0xcb);
        EXPECT(gbc.readMem(0x8d3d), 0x3c);
        // CB 3C 0247
        gbc.setState(0x8b03, 0x496c, 0x8ff0, 0xf4ac, 0xe076, 0x2928, 0x1, 0x0);
        gbc.writeMem(0x8b03, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x496c);
        EXPECT(gbc.pc(), 0x8b05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b03), 0xcb);
        EXPECT(gbc.readMem(0x8b04), 0x3c);
        // CB 3C 0248
        gbc.setState(0xe05e, 0xeb2b, 0x5960, 0x5066, 0x5cab, 0xe58e, 0x0, 0x1);
        gbc.writeMem(0xe05e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xeb2b);
        EXPECT(gbc.pc(), 0xe060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe05e), 0xcb);
        EXPECT(gbc.readMem(0xe05f), 0x3c);
        // CB 3C 0249
        gbc.setState(0x6614, 0x75c1, 0xd210, 0x6cc0, 0xb578, 0x31c3, 0x1, 0x1);
        gbc.writeMem(0x6614, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x75c1);
        EXPECT(gbc.pc(), 0x6616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 024A
        gbc.setState(0xcc9b, 0x5cff, 0xaa40, 0x44ae, 0xde9c, 0x4bf8, 0x0, 0x1);
        gbc.writeMem(0xcc9b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x5cff);
        EXPECT(gbc.pc(), 0xcc9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc9b), 0xcb);
        EXPECT(gbc.readMem(0xcc9c), 0x3c);
        // CB 3C 024B
        gbc.setState(0xa828, 0x4237, 0xc850, 0xff3e, 0xa356, 0xac18, 0x0, 0x0);
        gbc.writeMem(0xa828, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4237);
        EXPECT(gbc.pc(), 0xa82a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa828), 0xcb);
        EXPECT(gbc.readMem(0xa829), 0x3c);
        // CB 3C 024C
        gbc.setState(0x81f7, 0xba86, 0xfb40, 0x2bda, 0xb52d, 0xfffe, 0x1, 0x1);
        gbc.writeMem(0x81f7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xba86);
        EXPECT(gbc.pc(), 0x81f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81f7), 0xcb);
        EXPECT(gbc.readMem(0x81f8), 0x3c);
        // CB 3C 024D
        gbc.setState(0xe5d9, 0xcd3b, 0x9bf0, 0xa9f4, 0x2156, 0xc5f1, 0x1, 0x0);
        gbc.writeMem(0xe5d9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcd3b);
        EXPECT(gbc.pc(), 0xe5db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5d9), 0xcb);
        EXPECT(gbc.readMem(0xe5da), 0x3c);
        // CB 3C 024E
        gbc.setState(0xc968, 0x8a7b, 0xe460, 0x741, 0xa31e, 0x3404, 0x0, 0x0);
        gbc.writeMem(0xc968, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x8a7b);
        EXPECT(gbc.pc(), 0xc96a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc968), 0xcb);
        EXPECT(gbc.readMem(0xc969), 0x3c);
        // CB 3C 024F
        gbc.setState(0x49e1, 0x59d7, 0x4ef0, 0xc4c8, 0x9a63, 0x6a99, 0x1, 0x0);
        gbc.writeMem(0x49e1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x59d7);
        EXPECT(gbc.pc(), 0x49e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0250
        gbc.setState(0x1e05, 0xc9be, 0x9bb0, 0x12d5, 0x9faf, 0x9e3, 0x0, 0x1);
        gbc.writeMem(0x1e05, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc9be);
        EXPECT(gbc.pc(), 0x1e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0251
        gbc.setState(0xc1ad, 0x3443, 0x63b0, 0x717, 0x327, 0xfa53, 0x0, 0x1);
        gbc.writeMem(0xc1ad, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3443);
        EXPECT(gbc.pc(), 0xc1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ad), 0xcb);
        EXPECT(gbc.readMem(0xc1ae), 0x3c);
        // CB 3C 0252
        gbc.setState(0x423e, 0x74f4, 0x270, 0x28bd, 0xc5e4, 0x2630, 0x0, 0x0);
        gbc.writeMem(0x423e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x74f4);
        EXPECT(gbc.pc(), 0x4240);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0253
        gbc.setState(0x1108, 0x5cde, 0x2e0, 0x5043, 0xc302, 0x2787, 0x0, 0x1);
        gbc.writeMem(0x1108, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5cde);
        EXPECT(gbc.pc(), 0x110a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0254
        gbc.setState(0xb60c, 0x8adc, 0x4810, 0x33dd, 0xb2f, 0xe775, 0x1, 0x1);
        gbc.writeMem(0xb60c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8adc);
        EXPECT(gbc.pc(), 0xb60e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb60c), 0xcb);
        EXPECT(gbc.readMem(0xb60d), 0x3c);
        // CB 3C 0255
        gbc.setState(0x1dda, 0xc624, 0xfbc0, 0x9584, 0xefde, 0x3548, 0x1, 0x0);
        gbc.writeMem(0x1dda, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc624);
        EXPECT(gbc.pc(), 0x1ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0256
        gbc.setState(0x369c, 0xbf17, 0xe990, 0x2a4f, 0x905a, 0x7e4a, 0x0, 0x0);
        gbc.writeMem(0x369c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xbf17);
        EXPECT(gbc.pc(), 0x369e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0257
        gbc.setState(0xc7d6, 0x1e63, 0xe890, 0xb760, 0x8a25, 0x501b, 0x0, 0x1);
        gbc.writeMem(0xc7d6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1e63);
        EXPECT(gbc.pc(), 0xc7d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d6), 0xcb);
        EXPECT(gbc.readMem(0xc7d7), 0x3c);
        // CB 3C 0258
        gbc.setState(0x22bb, 0xe20a, 0xde0, 0xe200, 0x515e, 0xbc67, 0x0, 0x1);
        gbc.writeMem(0x22bb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe20a);
        EXPECT(gbc.pc(), 0x22bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0259
        gbc.setState(0x70b7, 0xf217, 0xea10, 0x6ca0, 0xc46e, 0x1140, 0x1, 0x1);
        gbc.writeMem(0x70b7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf217);
        EXPECT(gbc.pc(), 0x70b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 025A
        gbc.setState(0x2cbc, 0x7544, 0xfd30, 0xf0b2, 0x818f, 0x89c1, 0x0, 0x1);
        gbc.writeMem(0x2cbc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7544);
        EXPECT(gbc.pc(), 0x2cbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 025B
        gbc.setState(0x2fd1, 0xc483, 0x2390, 0x727f, 0x9e7e, 0xbc03, 0x1, 0x1);
        gbc.writeMem(0x2fd1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xc483);
        EXPECT(gbc.pc(), 0x2fd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 025C
        gbc.setState(0x2800, 0xff68, 0xe870, 0x7b76, 0x9fce, 0x5a50, 0x1, 0x0);
        gbc.writeMem(0x2800, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xff68);
        EXPECT(gbc.pc(), 0x2802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 025D
        gbc.setState(0x51a7, 0xf085, 0x9250, 0x9bb6, 0x94f, 0xc38a, 0x0, 0x0);
        gbc.writeMem(0x51a7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf085);
        EXPECT(gbc.pc(), 0x51a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 025E
        gbc.setState(0xbcda, 0x9b52, 0xf2b0, 0xabf5, 0x21e5, 0xc540, 0x1, 0x1);
        gbc.writeMem(0xbcda, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9b52);
        EXPECT(gbc.pc(), 0xbcdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcda), 0xcb);
        EXPECT(gbc.readMem(0xbcdb), 0x3c);
        // CB 3C 025F
        gbc.setState(0xce50, 0xd016, 0x1140, 0xba4d, 0xd045, 0xa476, 0x1, 0x0);
        gbc.writeMem(0xce50, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd016);
        EXPECT(gbc.pc(), 0xce52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce50), 0xcb);
        EXPECT(gbc.readMem(0xce51), 0x3c);
        // CB 3C 0260
        gbc.setState(0x3f0f, 0x6cce, 0x5330, 0x20a9, 0x1516, 0xc5d6, 0x0, 0x0);
        gbc.writeMem(0x3f0f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x6cce);
        EXPECT(gbc.pc(), 0x3f11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0261
        gbc.setState(0xd750, 0x15d9, 0x1b20, 0xca4d, 0x1e0a, 0x9abe, 0x0, 0x0);
        gbc.writeMem(0xd750, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x15d9);
        EXPECT(gbc.pc(), 0xd752);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd750), 0xcb);
        EXPECT(gbc.readMem(0xd751), 0x3c);
        // CB 3C 0262
        gbc.setState(0xe44b, 0x20d6, 0xded0, 0x879, 0x13b5, 0x7a9c, 0x0, 0x0);
        gbc.writeMem(0xe44b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x20d6);
        EXPECT(gbc.pc(), 0xe44d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44b), 0xcb);
        EXPECT(gbc.readMem(0xe44c), 0x3c);
        // CB 3C 0263
        gbc.setState(0x562b, 0x77bd, 0x3d0, 0xb839, 0x2037, 0xef33, 0x0, 0x0);
        gbc.writeMem(0x562b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x77bd);
        EXPECT(gbc.pc(), 0x562d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0264
        gbc.setState(0xaf97, 0xa149, 0x5fc0, 0x2ac2, 0xf93d, 0x14ad, 0x1, 0x1);
        gbc.writeMem(0xaf97, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa149);
        EXPECT(gbc.pc(), 0xaf99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf97), 0xcb);
        EXPECT(gbc.readMem(0xaf98), 0x3c);
        // CB 3C 0265
        gbc.setState(0x4fa3, 0xb2db, 0xec70, 0x5a5f, 0xbf38, 0x9dfb, 0x1, 0x1);
        gbc.writeMem(0x4fa3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xb2db);
        EXPECT(gbc.pc(), 0x4fa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0266
        gbc.setState(0x9712, 0x2b8e, 0xeea0, 0xf855, 0xc0a8, 0x4bb8, 0x0, 0x0);
        gbc.writeMem(0x9712, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2b8e);
        EXPECT(gbc.pc(), 0x9714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9712), 0xcb);
        EXPECT(gbc.readMem(0x9713), 0x3c);
        // CB 3C 0267
        gbc.setState(0x853e, 0x1b32, 0x4f30, 0x2638, 0xf093, 0xb032, 0x1, 0x0);
        gbc.writeMem(0x853e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1b32);
        EXPECT(gbc.pc(), 0x8540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x853e), 0xcb);
        EXPECT(gbc.readMem(0x853f), 0x3c);
        // CB 3C 0268
        gbc.setState(0x3315, 0x8fa2, 0xd900, 0x1b35, 0x879e, 0x9d39, 0x1, 0x0);
        gbc.writeMem(0x3315, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x8fa2);
        EXPECT(gbc.pc(), 0x3317);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0269
        gbc.setState(0x9bc0, 0x5177, 0x9f60, 0xb500, 0xe566, 0x9626, 0x1, 0x0);
        gbc.writeMem(0x9bc0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5177);
        EXPECT(gbc.pc(), 0x9bc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bc0), 0xcb);
        EXPECT(gbc.readMem(0x9bc1), 0x3c);
        // CB 3C 026A
        gbc.setState(0x4366, 0x45ac, 0x4990, 0x7e36, 0xd215, 0x7250, 0x0, 0x0);
        gbc.writeMem(0x4366, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x45ac);
        EXPECT(gbc.pc(), 0x4368);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 026B
        gbc.setState(0xcf8b, 0x1520, 0xf8a0, 0xf0d5, 0xfac2, 0x1ef2, 0x1, 0x1);
        gbc.writeMem(0xcf8b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1520);
        EXPECT(gbc.pc(), 0xcf8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf8b), 0xcb);
        EXPECT(gbc.readMem(0xcf8c), 0x3c);
        // CB 3C 026C
        gbc.setState(0x1c32, 0xad8, 0xb9e0, 0xdc1f, 0xd1e6, 0x40a7, 0x1, 0x0);
        gbc.writeMem(0x1c32, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xad8);
        EXPECT(gbc.pc(), 0x1c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 026D
        gbc.setState(0x5d3f, 0x6be, 0x8560, 0xfc1c, 0xd6b7, 0x6e08, 0x0, 0x0);
        gbc.writeMem(0x5d3f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6be);
        EXPECT(gbc.pc(), 0x5d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 026E
        gbc.setState(0x2d11, 0xd0f8, 0x71e0, 0xa099, 0x1579, 0xbebc, 0x0, 0x1);
        gbc.writeMem(0x2d11, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd0f8);
        EXPECT(gbc.pc(), 0x2d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0270
        gbc.setState(0x815a, 0x8c54, 0x92b0, 0x456b, 0x1d47, 0xa2a, 0x1, 0x0);
        gbc.writeMem(0x815a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x8c54);
        EXPECT(gbc.pc(), 0x815c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815a), 0xcb);
        EXPECT(gbc.readMem(0x815b), 0x3c);
        // CB 3C 0271
        gbc.setState(0x9b0b, 0xa6f9, 0xa8f0, 0xd36c, 0x1e54, 0xf3ff, 0x0, 0x1);
        gbc.writeMem(0x9b0b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa6f9);
        EXPECT(gbc.pc(), 0x9b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b0b), 0xcb);
        EXPECT(gbc.readMem(0x9b0c), 0x3c);
        // CB 3C 0272
        gbc.setState(0x70d3, 0xf78a, 0xa830, 0xe7fb, 0x55a1, 0x9061, 0x1, 0x1);
        gbc.writeMem(0x70d3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf78a);
        EXPECT(gbc.pc(), 0x70d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0273
        gbc.setState(0x5933, 0x71ea, 0x84f0, 0xaa67, 0x6ad0, 0x1063, 0x0, 0x1);
        gbc.writeMem(0x5933, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x71ea);
        EXPECT(gbc.pc(), 0x5935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0274
        gbc.setState(0x49e5, 0xca6a, 0x4410, 0x7c5c, 0xd258, 0x8d09, 0x1, 0x0);
        gbc.writeMem(0x49e5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xca6a);
        EXPECT(gbc.pc(), 0x49e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0275
        gbc.setState(0xad35, 0x42, 0x22d0, 0x7afd, 0xed2b, 0x84ad, 0x1, 0x0);
        gbc.writeMem(0xad35, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x42);
        EXPECT(gbc.pc(), 0xad37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad35), 0xcb);
        EXPECT(gbc.readMem(0xad36), 0x3c);
        // CB 3C 0276
        gbc.setState(0xc63f, 0xeba5, 0x62b0, 0xd895, 0x3d89, 0xa2eb, 0x0, 0x1);
        gbc.writeMem(0xc63f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeba5);
        EXPECT(gbc.pc(), 0xc641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63f), 0xcb);
        EXPECT(gbc.readMem(0xc640), 0x3c);
        // CB 3C 0277
        gbc.setState(0x119b, 0xfdf7, 0xcac0, 0x2ecc, 0x41de, 0xdbaa, 0x1, 0x0);
        gbc.writeMem(0x119b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xfdf7);
        EXPECT(gbc.pc(), 0x119d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0278
        gbc.setState(0xdc36, 0x8c3d, 0xb3a0, 0xbb13, 0x2691, 0xa748, 0x1, 0x1);
        gbc.writeMem(0xdc36, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8c3d);
        EXPECT(gbc.pc(), 0xdc38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc36), 0xcb);
        EXPECT(gbc.readMem(0xdc37), 0x3c);
        // CB 3C 0279
        gbc.setState(0xa520, 0xfb40, 0x5f10, 0x40fc, 0xc6c7, 0xc418, 0x0, 0x0);
        gbc.writeMem(0xa520, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xfb40);
        EXPECT(gbc.pc(), 0xa522);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa520), 0xcb);
        EXPECT(gbc.readMem(0xa521), 0x3c);
        // CB 3C 027A
        gbc.setState(0x2c42, 0x782, 0x1760, 0xf3d9, 0xbc49, 0xa57c, 0x0, 0x0);
        gbc.writeMem(0x2c42, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x782);
        EXPECT(gbc.pc(), 0x2c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 027B
        gbc.setState(0x2db5, 0x289d, 0xbd60, 0x2187, 0xac6a, 0xdb49, 0x1, 0x1);
        gbc.writeMem(0x2db5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x289d);
        EXPECT(gbc.pc(), 0x2db7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 027D
        gbc.setState(0xa8fb, 0x24e2, 0xa220, 0x2cd5, 0x74c4, 0x5246, 0x1, 0x0);
        gbc.writeMem(0xa8fb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x24e2);
        EXPECT(gbc.pc(), 0xa8fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8fb), 0xcb);
        EXPECT(gbc.readMem(0xa8fc), 0x3c);
        // CB 3C 027E
        gbc.setState(0x1f0c, 0xdcf4, 0x44a0, 0x4dd5, 0x7e80, 0x6a9f, 0x1, 0x1);
        gbc.writeMem(0x1f0c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xdcf4);
        EXPECT(gbc.pc(), 0x1f0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 027F
        gbc.setState(0x84e6, 0xa4d3, 0x9e10, 0x4580, 0x2283, 0x5de5, 0x1, 0x1);
        gbc.writeMem(0x84e6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa4d3);
        EXPECT(gbc.pc(), 0x84e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e6), 0xcb);
        EXPECT(gbc.readMem(0x84e7), 0x3c);
        // CB 3C 0280
        gbc.setState(0x685f, 0xefba, 0x9a20, 0xf958, 0x7969, 0xe9d8, 0x0, 0x1);
        gbc.writeMem(0x685f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xefba);
        EXPECT(gbc.pc(), 0x6861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0281
        gbc.setState(0x26f0, 0x7f95, 0x2270, 0x7ca, 0xb9a8, 0x924c, 0x0, 0x1);
        gbc.writeMem(0x26f0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x7f95);
        EXPECT(gbc.pc(), 0x26f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0282
        gbc.setState(0x7b1f, 0x6261, 0xfa40, 0x992b, 0x1234, 0xba3d, 0x0, 0x1);
        gbc.writeMem(0x7b1f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6261);
        EXPECT(gbc.pc(), 0x7b21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0283
        gbc.setState(0x98b9, 0x3bd6, 0x99e0, 0xb52e, 0x3a6, 0x442e, 0x1, 0x1);
        gbc.writeMem(0x98b9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3bd6);
        EXPECT(gbc.pc(), 0x98bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b9), 0xcb);
        EXPECT(gbc.readMem(0x98ba), 0x3c);
        // CB 3C 0284
        gbc.setState(0x48fa, 0xf2af, 0xa350, 0xa5d5, 0x891a, 0x9635, 0x1, 0x1);
        gbc.writeMem(0x48fa, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf2af);
        EXPECT(gbc.pc(), 0x48fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0285
        gbc.setState(0x408d, 0xc385, 0xc7d0, 0x4811, 0xae70, 0x304b, 0x1, 0x1);
        gbc.writeMem(0x408d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc385);
        EXPECT(gbc.pc(), 0x408f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0286
        gbc.setState(0x4005, 0xe34f, 0x2bb0, 0x584, 0xf73, 0x1a93, 0x0, 0x1);
        gbc.writeMem(0x4005, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe34f);
        EXPECT(gbc.pc(), 0x4007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0287
        gbc.setState(0x2586, 0xf0a4, 0xba30, 0x6054, 0xf91b, 0x164b, 0x0, 0x1);
        gbc.writeMem(0x2586, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf0a4);
        EXPECT(gbc.pc(), 0x2588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0288
        gbc.setState(0xcec6, 0xfcf8, 0x8060, 0xde9a, 0x922c, 0x319, 0x1, 0x1);
        gbc.writeMem(0xcec6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfcf8);
        EXPECT(gbc.pc(), 0xcec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec6), 0xcb);
        EXPECT(gbc.readMem(0xcec7), 0x3c);
        // CB 3C 0289
        gbc.setState(0x669d, 0x752, 0x5a20, 0xc6b7, 0x5a68, 0xccdd, 0x0, 0x1);
        gbc.writeMem(0x669d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x752);
        EXPECT(gbc.pc(), 0x669f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 028B
        gbc.setState(0x1011, 0xf5b6, 0xf9e0, 0xdea0, 0xeca2, 0x178d, 0x0, 0x0);
        gbc.writeMem(0x1011, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xf5b6);
        EXPECT(gbc.pc(), 0x1013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 028C
        gbc.setState(0x205e, 0x9ec, 0xbec0, 0xb8e7, 0x66b5, 0xb163, 0x1, 0x1);
        gbc.writeMem(0x205e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9ec);
        EXPECT(gbc.pc(), 0x2060);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 028D
        gbc.setState(0x3a68, 0x2950, 0x31b0, 0xa88b, 0x62fe, 0x95b0, 0x0, 0x0);
        gbc.writeMem(0x3a68, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2950);
        EXPECT(gbc.pc(), 0x3a6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0290
        gbc.setState(0xe9a5, 0xe14d, 0x5180, 0xf33c, 0x306, 0x27f9, 0x1, 0x0);
        gbc.writeMem(0xe9a5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe14d);
        EXPECT(gbc.pc(), 0xe9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a5), 0xcb);
        EXPECT(gbc.readMem(0xe9a6), 0x3c);
        // CB 3C 0291
        gbc.setState(0x1968, 0x1922, 0x7810, 0xc598, 0xfacc, 0xa6e7, 0x0, 0x1);
        gbc.writeMem(0x1968, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x1922);
        EXPECT(gbc.pc(), 0x196a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0293
        gbc.setState(0xbf84, 0x430a, 0x81a0, 0x8163, 0xefa0, 0xf976, 0x0, 0x1);
        gbc.writeMem(0xbf84, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x430a);
        EXPECT(gbc.pc(), 0xbf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf84), 0xcb);
        EXPECT(gbc.readMem(0xbf85), 0x3c);
        // CB 3C 0294
        gbc.setState(0xa1bc, 0x5ed2, 0xf550, 0x5f05, 0xecb5, 0x2fba, 0x0, 0x1);
        gbc.writeMem(0xa1bc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5ed2);
        EXPECT(gbc.pc(), 0xa1be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1bc), 0xcb);
        EXPECT(gbc.readMem(0xa1bd), 0x3c);
        // CB 3C 0295
        gbc.setState(0x83b5, 0xd977, 0x9cc0, 0x3178, 0x717c, 0xfce, 0x1, 0x1);
        gbc.writeMem(0x83b5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd977);
        EXPECT(gbc.pc(), 0x83b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b5), 0xcb);
        EXPECT(gbc.readMem(0x83b6), 0x3c);
        // CB 3C 0296
        gbc.setState(0x9389, 0xd34, 0xc260, 0xa9bf, 0x85e7, 0x3599, 0x0, 0x0);
        gbc.writeMem(0x9389, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xd34);
        EXPECT(gbc.pc(), 0x938b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9389), 0xcb);
        EXPECT(gbc.readMem(0x938a), 0x3c);
        // CB 3C 0297
        gbc.setState(0x9234, 0xfacd, 0x1580, 0x65be, 0x3399, 0x43b4, 0x0, 0x1);
        gbc.writeMem(0x9234, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xfacd);
        EXPECT(gbc.pc(), 0x9236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9234), 0xcb);
        EXPECT(gbc.readMem(0x9235), 0x3c);
        // CB 3C 0298
        gbc.setState(0x9ecc, 0xb454, 0xf090, 0xa9a8, 0x7bfb, 0x4f97, 0x0, 0x0);
        gbc.writeMem(0x9ecc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xb454);
        EXPECT(gbc.pc(), 0x9ece);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ecc), 0xcb);
        EXPECT(gbc.readMem(0x9ecd), 0x3c);
        // CB 3C 0299
        gbc.setState(0x18cb, 0x2959, 0x42c0, 0xac5e, 0x139e, 0x353a, 0x0, 0x0);
        gbc.writeMem(0x18cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2959);
        EXPECT(gbc.pc(), 0x18cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 029A
        gbc.setState(0x8695, 0x9c7b, 0x7560, 0xa4c9, 0x92c3, 0x13ec, 0x1, 0x0);
        gbc.writeMem(0x8695, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9c7b);
        EXPECT(gbc.pc(), 0x8697);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8695), 0xcb);
        EXPECT(gbc.readMem(0x8696), 0x3c);
        // CB 3C 029B
        gbc.setState(0x50e1, 0x46d6, 0xa5b0, 0xe465, 0x36e6, 0x1fe, 0x0, 0x1);
        gbc.writeMem(0x50e1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x46d6);
        EXPECT(gbc.pc(), 0x50e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 029C
        gbc.setState(0x7896, 0x507a, 0x4110, 0x3001, 0xb9d3, 0xf950, 0x0, 0x1);
        gbc.writeMem(0x7896, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x507a);
        EXPECT(gbc.pc(), 0x7898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 029E
        gbc.setState(0x1e2d, 0xe90c, 0xa850, 0xfd56, 0x53ed, 0x3669, 0x1, 0x1);
        gbc.writeMem(0x1e2d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xe90c);
        EXPECT(gbc.pc(), 0x1e2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 029F
        gbc.setState(0xbbbb, 0x3e8, 0xdb60, 0xbbe1, 0x3c58, 0xaa68, 0x1, 0x1);
        gbc.writeMem(0xbbbb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3e8);
        EXPECT(gbc.pc(), 0xbbbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbb), 0xcb);
        EXPECT(gbc.readMem(0xbbbc), 0x3c);
        // CB 3C 02A0
        gbc.setState(0xddc5, 0xd30b, 0x2a10, 0x66f6, 0x8ac2, 0x9123, 0x1, 0x1);
        gbc.writeMem(0xddc5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd30b);
        EXPECT(gbc.pc(), 0xddc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddc5), 0xcb);
        EXPECT(gbc.readMem(0xddc6), 0x3c);
        // CB 3C 02A1
        gbc.setState(0x51e1, 0x4c2b, 0xfa00, 0x4c74, 0xb7a6, 0x2f95, 0x0, 0x0);
        gbc.writeMem(0x51e1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4c2b);
        EXPECT(gbc.pc(), 0x51e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02A2
        gbc.setState(0xbc8b, 0xe11d, 0x2180, 0x3fc8, 0x21cc, 0x7ddf, 0x1, 0x1);
        gbc.writeMem(0xbc8b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xe11d);
        EXPECT(gbc.pc(), 0xbc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8b), 0xcb);
        EXPECT(gbc.readMem(0xbc8c), 0x3c);
        // CB 3C 02A3
        gbc.setState(0x537f, 0x5899, 0xbd80, 0x9606, 0xe71e, 0x9cd7, 0x0, 0x0);
        gbc.writeMem(0x537f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x5899);
        EXPECT(gbc.pc(), 0x5381);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02A4
        gbc.setState(0xceee, 0x407, 0x1200, 0x1bad, 0x7dcc, 0x1b5c, 0x0, 0x0);
        gbc.writeMem(0xceee, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x407);
        EXPECT(gbc.pc(), 0xcef0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceee), 0xcb);
        EXPECT(gbc.readMem(0xceef), 0x3c);
        // CB 3C 02A5
        gbc.setState(0x5680, 0xe88, 0xa3a0, 0x9baa, 0xe848, 0x587a, 0x1, 0x0);
        gbc.writeMem(0x5680, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe88);
        EXPECT(gbc.pc(), 0x5682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02A6
        gbc.setState(0x4fed, 0xa0da, 0x2b70, 0xf384, 0x6b7f, 0x6f5f, 0x0, 0x1);
        gbc.writeMem(0x4fed, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa0da);
        EXPECT(gbc.pc(), 0x4fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02A7
        gbc.setState(0xddf1, 0xbc9e, 0x3b40, 0x5157, 0xadb, 0x9049, 0x0, 0x1);
        gbc.writeMem(0xddf1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xbc9e);
        EXPECT(gbc.pc(), 0xddf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddf1), 0xcb);
        EXPECT(gbc.readMem(0xddf2), 0x3c);
        // CB 3C 02A8
        gbc.setState(0x7fc1, 0x945f, 0x39a0, 0x194d, 0x891e, 0x9c59, 0x0, 0x1);
        gbc.writeMem(0x7fc1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x945f);
        EXPECT(gbc.pc(), 0x7fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02A9
        gbc.setState(0x258f, 0x9f9, 0xd0, 0xa790, 0x3b2, 0x1422, 0x1, 0x1);
        gbc.writeMem(0x258f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9f9);
        EXPECT(gbc.pc(), 0x2591);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02AA
        gbc.setState(0xd1bd, 0x893, 0xbb40, 0x1841, 0x341e, 0xf5f6, 0x1, 0x1);
        gbc.writeMem(0xd1bd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x893);
        EXPECT(gbc.pc(), 0xd1bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1bd), 0xcb);
        EXPECT(gbc.readMem(0xd1be), 0x3c);
        // CB 3C 02AB
        gbc.setState(0x627b, 0xbc02, 0x8320, 0x53b0, 0xc972, 0x439f, 0x0, 0x1);
        gbc.writeMem(0x627b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xbc02);
        EXPECT(gbc.pc(), 0x627d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02AC
        gbc.setState(0xb09d, 0x654b, 0x2f60, 0x6aa6, 0x9107, 0x5247, 0x0, 0x0);
        gbc.writeMem(0xb09d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x654b);
        EXPECT(gbc.pc(), 0xb09f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb09d), 0xcb);
        EXPECT(gbc.readMem(0xb09e), 0x3c);
        // CB 3C 02AD
        gbc.setState(0x7e25, 0x822c, 0x5b70, 0xaeb0, 0x854, 0xd7d1, 0x0, 0x0);
        gbc.writeMem(0x7e25, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x822c);
        EXPECT(gbc.pc(), 0x7e27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02AE
        gbc.setState(0x6a97, 0x1a0, 0x5ee0, 0x73fa, 0x4672, 0x2e15, 0x1, 0x0);
        gbc.writeMem(0x6a97, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1a0);
        EXPECT(gbc.pc(), 0x6a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02AF
        gbc.setState(0x8ed0, 0xe6da, 0x1a50, 0x728f, 0xfdcf, 0x3047, 0x1, 0x0);
        gbc.writeMem(0x8ed0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe6da);
        EXPECT(gbc.pc(), 0x8ed2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed0), 0xcb);
        EXPECT(gbc.readMem(0x8ed1), 0x3c);
        // CB 3C 02B0
        gbc.setState(0x2412, 0x2c47, 0xab80, 0xb1ce, 0xda6a, 0xf9ab, 0x1, 0x0);
        gbc.writeMem(0x2412, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2c47);
        EXPECT(gbc.pc(), 0x2414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02B2
        gbc.setState(0x4c40, 0xba7d, 0x6a80, 0xf8d, 0x5468, 0x82ab, 0x0, 0x0);
        gbc.writeMem(0x4c40, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xba7d);
        EXPECT(gbc.pc(), 0x4c42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02B4
        gbc.setState(0x1e0d, 0xd4a0, 0x290, 0xb53c, 0xd068, 0x5ad, 0x0, 0x0);
        gbc.writeMem(0x1e0d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd4a0);
        EXPECT(gbc.pc(), 0x1e0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02B5
        gbc.setState(0x440f, 0xd5fc, 0x7040, 0xeb8, 0x5800, 0x5ed, 0x1, 0x1);
        gbc.writeMem(0x440f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd5fc);
        EXPECT(gbc.pc(), 0x4411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02B6
        gbc.setState(0xbce0, 0xd104, 0xdd50, 0x9349, 0x236d, 0x3b09, 0x0, 0x1);
        gbc.writeMem(0xbce0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xd104);
        EXPECT(gbc.pc(), 0xbce2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce0), 0xcb);
        EXPECT(gbc.readMem(0xbce1), 0x3c);
        // CB 3C 02B7
        gbc.setState(0x93e1, 0x617c, 0xb0e0, 0xc939, 0x39ec, 0x54bf, 0x1, 0x0);
        gbc.writeMem(0x93e1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x617c);
        EXPECT(gbc.pc(), 0x93e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e1), 0xcb);
        EXPECT(gbc.readMem(0x93e2), 0x3c);
        // CB 3C 02B8
        gbc.setState(0xbf9a, 0x7ea6, 0xdb70, 0x80e2, 0xea3, 0xfab3, 0x0, 0x1);
        gbc.writeMem(0xbf9a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7ea6);
        EXPECT(gbc.pc(), 0xbf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf9a), 0xcb);
        EXPECT(gbc.readMem(0xbf9b), 0x3c);
        // CB 3C 02B9
        gbc.setState(0xc99a, 0xd78c, 0x8020, 0xceac, 0x88a, 0x8a64, 0x1, 0x0);
        gbc.writeMem(0xc99a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd78c);
        EXPECT(gbc.pc(), 0xc99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc99a), 0xcb);
        EXPECT(gbc.readMem(0xc99b), 0x3c);
        // CB 3C 02BA
        gbc.setState(0x6f33, 0xb44b, 0x4390, 0xca38, 0x9b05, 0xa231, 0x1, 0x1);
        gbc.writeMem(0x6f33, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb44b);
        EXPECT(gbc.pc(), 0x6f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02BB
        gbc.setState(0x91b0, 0xe6f5, 0x7dd0, 0x8b1d, 0xbaea, 0xae6f, 0x0, 0x0);
        gbc.writeMem(0x91b0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xe6f5);
        EXPECT(gbc.pc(), 0x91b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b0), 0xcb);
        EXPECT(gbc.readMem(0x91b1), 0x3c);
        // CB 3C 02BC
        gbc.setState(0x7533, 0x987, 0x5b10, 0xfc88, 0x6f64, 0xb4ce, 0x0, 0x1);
        gbc.writeMem(0x7533, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x987);
        EXPECT(gbc.pc(), 0x7535);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02BD
        gbc.setState(0xb589, 0xc4f7, 0xf8d0, 0x3d0c, 0x19f4, 0x2539, 0x0, 0x1);
        gbc.writeMem(0xb589, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc4f7);
        EXPECT(gbc.pc(), 0xb58b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb589), 0xcb);
        EXPECT(gbc.readMem(0xb58a), 0x3c);
        // CB 3C 02BE
        gbc.setState(0xcf78, 0xcbe5, 0x9130, 0xbec3, 0x8878, 0x33c2, 0x0, 0x1);
        gbc.writeMem(0xcf78, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcbe5);
        EXPECT(gbc.pc(), 0xcf7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf78), 0xcb);
        EXPECT(gbc.readMem(0xcf79), 0x3c);
        // CB 3C 02BF
        gbc.setState(0x47e, 0xa95d, 0x5310, 0xb8d2, 0x12d4, 0xcb51, 0x1, 0x0);
        gbc.writeMem(0x47e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xa95d);
        EXPECT(gbc.pc(), 0x480);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02C0
        gbc.setState(0x99f5, 0x9df3, 0xad40, 0xdb1a, 0xa51f, 0x9cd3, 0x1, 0x1);
        gbc.writeMem(0x99f5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9df3);
        EXPECT(gbc.pc(), 0x99f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f5), 0xcb);
        EXPECT(gbc.readMem(0x99f6), 0x3c);
        // CB 3C 02C1
        gbc.setState(0x41b7, 0xf4b5, 0x27b0, 0xa3c0, 0x6b15, 0x3ce4, 0x1, 0x0);
        gbc.writeMem(0x41b7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf4b5);
        EXPECT(gbc.pc(), 0x41b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02C2
        gbc.setState(0x4a40, 0x2268, 0x2b80, 0x98f6, 0x6b01, 0x9844, 0x0, 0x0);
        gbc.writeMem(0x4a40, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2268);
        EXPECT(gbc.pc(), 0x4a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02C3
        gbc.setState(0x935d, 0x823f, 0x5a30, 0x5604, 0xbc64, 0xe587, 0x1, 0x0);
        gbc.writeMem(0x935d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x823f);
        EXPECT(gbc.pc(), 0x935f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935d), 0xcb);
        EXPECT(gbc.readMem(0x935e), 0x3c);
        // CB 3C 02C4
        gbc.setState(0x1def, 0xf110, 0x1000, 0xf6f5, 0x7ac, 0xea8, 0x1, 0x1);
        gbc.writeMem(0x1def, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf110);
        EXPECT(gbc.pc(), 0x1df1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02C5
        gbc.setState(0x3289, 0xcc7e, 0x4e80, 0x2741, 0xc21b, 0x5560, 0x0, 0x0);
        gbc.writeMem(0x3289, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcc7e);
        EXPECT(gbc.pc(), 0x328b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02C6
        gbc.setState(0x5ad0, 0xc4d1, 0x8310, 0x57d0, 0x1b18, 0xb1e0, 0x1, 0x0);
        gbc.writeMem(0x5ad0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc4d1);
        EXPECT(gbc.pc(), 0x5ad2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02C7
        gbc.setState(0x6f08, 0x7a0e, 0x8740, 0xdc7b, 0xf25c, 0x1ff0, 0x0, 0x1);
        gbc.writeMem(0x6f08, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7a0e);
        EXPECT(gbc.pc(), 0x6f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02C8
        gbc.setState(0x887c, 0xbe0c, 0xdd10, 0x6e40, 0xd9a9, 0x2d, 0x1, 0x1);
        gbc.writeMem(0x887c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbe0c);
        EXPECT(gbc.pc(), 0x887e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x887c), 0xcb);
        EXPECT(gbc.readMem(0x887d), 0x3c);
        // CB 3C 02C9
        gbc.setState(0x9132, 0x594b, 0x3940, 0xa9fc, 0x378, 0x7786, 0x1, 0x0);
        gbc.writeMem(0x9132, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x594b);
        EXPECT(gbc.pc(), 0x9134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9132), 0xcb);
        EXPECT(gbc.readMem(0x9133), 0x3c);
        // CB 3C 02CA
        gbc.setState(0x8576, 0xf955, 0xd460, 0xfed9, 0x74d3, 0x15e9, 0x1, 0x0);
        gbc.writeMem(0x8576, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf955);
        EXPECT(gbc.pc(), 0x8578);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8576), 0xcb);
        EXPECT(gbc.readMem(0x8577), 0x3c);
        // CB 3C 02CB
        gbc.setState(0x9522, 0xcad5, 0x5e00, 0x7447, 0x204f, 0xb978, 0x0, 0x1);
        gbc.writeMem(0x9522, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xcad5);
        EXPECT(gbc.pc(), 0x9524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9522), 0xcb);
        EXPECT(gbc.readMem(0x9523), 0x3c);
        // CB 3C 02CC
        gbc.setState(0x7b49, 0x4ff8, 0x7150, 0x4620, 0xc934, 0xc6ff, 0x0, 0x1);
        gbc.writeMem(0x7b49, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4ff8);
        EXPECT(gbc.pc(), 0x7b4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02CD
        gbc.setState(0x6ab5, 0x38c8, 0x19c0, 0xcd, 0xe18d, 0x3615, 0x1, 0x1);
        gbc.writeMem(0x6ab5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x38c8);
        EXPECT(gbc.pc(), 0x6ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02CE
        gbc.setState(0x4607, 0x880d, 0x8dc0, 0x4096, 0x4a05, 0x17b9, 0x1, 0x0);
        gbc.writeMem(0x4607, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x880d);
        EXPECT(gbc.pc(), 0x4609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02CF
        gbc.setState(0xa929, 0x2974, 0x98f0, 0xbe75, 0x6906, 0xf4c6, 0x1, 0x0);
        gbc.writeMem(0xa929, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2974);
        EXPECT(gbc.pc(), 0xa92b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa929), 0xcb);
        EXPECT(gbc.readMem(0xa92a), 0x3c);
        // CB 3C 02D1
        gbc.setState(0xe7c0, 0x850f, 0x9fc0, 0x62a9, 0xbffa, 0x92b1, 0x1, 0x0);
        gbc.writeMem(0xe7c0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x850f);
        EXPECT(gbc.pc(), 0xe7c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c0), 0xcb);
        EXPECT(gbc.readMem(0xe7c1), 0x3c);
        // CB 3C 02D2
        gbc.setState(0x6b3d, 0xb4f1, 0x5310, 0x737, 0x4df6, 0x935e, 0x0, 0x0);
        gbc.writeMem(0x6b3d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb4f1);
        EXPECT(gbc.pc(), 0x6b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02D3
        gbc.setState(0xb18b, 0xa0a0, 0x5a50, 0xe112, 0xa43, 0x1120, 0x0, 0x1);
        gbc.writeMem(0xb18b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa0a0);
        EXPECT(gbc.pc(), 0xb18d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb18b), 0xcb);
        EXPECT(gbc.readMem(0xb18c), 0x3c);
        // CB 3C 02D4
        gbc.setState(0x1042, 0x1ea4, 0xaa60, 0x9566, 0xa88, 0xa64c, 0x1, 0x1);
        gbc.writeMem(0x1042, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1ea4);
        EXPECT(gbc.pc(), 0x1044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02D5
        gbc.setState(0x7c53, 0x2284, 0x100, 0xa9ad, 0xa46e, 0xc3d1, 0x1, 0x1);
        gbc.writeMem(0x7c53, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2284);
        EXPECT(gbc.pc(), 0x7c55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02D6
        gbc.setState(0x3747, 0x9f6c, 0x82a0, 0x74b0, 0x9c13, 0x1a9f, 0x1, 0x1);
        gbc.writeMem(0x3747, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9f6c);
        EXPECT(gbc.pc(), 0x3749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02D7
        gbc.setState(0x8505, 0xb029, 0xdc30, 0x221b, 0x8280, 0xc196, 0x1, 0x1);
        gbc.writeMem(0x8505, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb029);
        EXPECT(gbc.pc(), 0x8507);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8505), 0xcb);
        EXPECT(gbc.readMem(0x8506), 0x3c);
        // CB 3C 02D8
        gbc.setState(0x66a8, 0xf9f, 0xf420, 0x7a3f, 0xbff2, 0x4e52, 0x1, 0x1);
        gbc.writeMem(0x66a8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf9f);
        EXPECT(gbc.pc(), 0x66aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02D9
        gbc.setState(0x5599, 0x90d9, 0x32e0, 0x1bbe, 0xfad3, 0xe895, 0x1, 0x1);
        gbc.writeMem(0x5599, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x90d9);
        EXPECT(gbc.pc(), 0x559b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02DA
        gbc.setState(0x4ed, 0x9e6b, 0xc6c0, 0x7754, 0x5138, 0x9942, 0x0, 0x1);
        gbc.writeMem(0x4ed, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9e6b);
        EXPECT(gbc.pc(), 0x4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02DC
        gbc.setState(0xc2a, 0x1879, 0x3a80, 0x2128, 0x993a, 0x5258, 0x0, 0x0);
        gbc.writeMem(0xc2a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x1879);
        EXPECT(gbc.pc(), 0xc2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02DD
        gbc.setState(0x6dd2, 0xd947, 0x60e0, 0x312e, 0x4dce, 0x4c7c, 0x0, 0x0);
        gbc.writeMem(0x6dd2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xd947);
        EXPECT(gbc.pc(), 0x6dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02DE
        gbc.setState(0x3bf6, 0xba94, 0x9910, 0x363f, 0x12e3, 0xc3a5, 0x1, 0x1);
        gbc.writeMem(0x3bf6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xba94);
        EXPECT(gbc.pc(), 0x3bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02DF
        gbc.setState(0x3cec, 0xdd79, 0x2e80, 0x6991, 0x1394, 0x4a2c, 0x0, 0x0);
        gbc.writeMem(0x3cec, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdd79);
        EXPECT(gbc.pc(), 0x3cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02E0
        gbc.setState(0x72f, 0x3eec, 0x120, 0x9b24, 0xa98, 0x2220, 0x1, 0x1);
        gbc.writeMem(0x72f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3eec);
        EXPECT(gbc.pc(), 0x731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02E1
        gbc.setState(0x5ab3, 0x1342, 0x8ae0, 0x585d, 0xe4f2, 0xcacf, 0x1, 0x1);
        gbc.writeMem(0x5ab3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1342);
        EXPECT(gbc.pc(), 0x5ab5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02E3
        gbc.setState(0x3570, 0x50, 0x6540, 0xe732, 0xd564, 0x226, 0x1, 0x0);
        gbc.writeMem(0x3570, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x50);
        EXPECT(gbc.pc(), 0x3572);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02E4
        gbc.setState(0x5efd, 0x6d94, 0xa460, 0xa824, 0x8ad0, 0x4d31, 0x1, 0x1);
        gbc.writeMem(0x5efd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x6d94);
        EXPECT(gbc.pc(), 0x5eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02E5
        gbc.setState(0xc933, 0xfe98, 0xca40, 0x2a54, 0x95c2, 0x79bc, 0x1, 0x0);
        gbc.writeMem(0xc933, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfe98);
        EXPECT(gbc.pc(), 0xc935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc933), 0xcb);
        EXPECT(gbc.readMem(0xc934), 0x3c);
        // CB 3C 02E6
        gbc.setState(0x8002, 0x292, 0x4750, 0x5a17, 0x7b4e, 0xd258, 0x0, 0x0);
        gbc.writeMem(0x8002, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x292);
        EXPECT(gbc.pc(), 0x8004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8002), 0xcb);
        EXPECT(gbc.readMem(0x8003), 0x3c);
        // CB 3C 02E7
        gbc.setState(0xb14b, 0xbfca, 0x5fe0, 0xecb8, 0x1aa9, 0x1fc1, 0x1, 0x0);
        gbc.writeMem(0xb14b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xbfca);
        EXPECT(gbc.pc(), 0xb14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb14b), 0xcb);
        EXPECT(gbc.readMem(0xb14c), 0x3c);
        // CB 3C 02E8
        gbc.setState(0x25f3, 0xcd3f, 0xce50, 0xe448, 0xae1d, 0x3708, 0x0, 0x0);
        gbc.writeMem(0x25f3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcd3f);
        EXPECT(gbc.pc(), 0x25f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02E9
        gbc.setState(0xe622, 0x7731, 0x5dd0, 0xe41e, 0x5901, 0x5277, 0x1, 0x0);
        gbc.writeMem(0xe622, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7731);
        EXPECT(gbc.pc(), 0xe624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe622), 0xcb);
        EXPECT(gbc.readMem(0xe623), 0x3c);
        // CB 3C 02EA
        gbc.setState(0x64c, 0x74cb, 0x65a0, 0x5200, 0xd009, 0x5146, 0x0, 0x1);
        gbc.writeMem(0x64c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x74cb);
        EXPECT(gbc.pc(), 0x64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02EB
        gbc.setState(0x1296, 0xdb25, 0x5640, 0x4f0a, 0x91b5, 0x264e, 0x0, 0x1);
        gbc.writeMem(0x1296, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xdb25);
        EXPECT(gbc.pc(), 0x1298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02EC
        gbc.setState(0x136b, 0x153e, 0x2e90, 0x2cf7, 0x79bc, 0x7063, 0x1, 0x0);
        gbc.writeMem(0x136b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x153e);
        EXPECT(gbc.pc(), 0x136d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02ED
        gbc.setState(0xd5d5, 0xdad2, 0x53c0, 0x5af3, 0xe798, 0x482b, 0x1, 0x0);
        gbc.writeMem(0xd5d5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdad2);
        EXPECT(gbc.pc(), 0xd5d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5d5), 0xcb);
        EXPECT(gbc.readMem(0xd5d6), 0x3c);
        // CB 3C 02EE
        gbc.setState(0xb0d7, 0xcc85, 0xcad0, 0x8667, 0x58f3, 0xbc14, 0x1, 0x1);
        gbc.writeMem(0xb0d7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcc85);
        EXPECT(gbc.pc(), 0xb0d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0d7), 0xcb);
        EXPECT(gbc.readMem(0xb0d8), 0x3c);
        // CB 3C 02EF
        gbc.setState(0x8eed, 0xbcd4, 0x2170, 0x48e9, 0x29d5, 0xa652, 0x1, 0x0);
        gbc.writeMem(0x8eed, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbcd4);
        EXPECT(gbc.pc(), 0x8eef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eed), 0xcb);
        EXPECT(gbc.readMem(0x8eee), 0x3c);
        // CB 3C 02F0
        gbc.setState(0x5048, 0xc026, 0xb7b0, 0x1ac9, 0x59e0, 0x3b13, 0x1, 0x1);
        gbc.writeMem(0x5048, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc026);
        EXPECT(gbc.pc(), 0x504a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02F1
        gbc.setState(0xa755, 0x8825, 0xc340, 0x3686, 0xd9dd, 0x2cbb, 0x0, 0x1);
        gbc.writeMem(0xa755, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8825);
        EXPECT(gbc.pc(), 0xa757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa755), 0xcb);
        EXPECT(gbc.readMem(0xa756), 0x3c);
        // CB 3C 02F2
        gbc.setState(0x3aa5, 0x4ff1, 0xe540, 0x4d43, 0x56d7, 0x9695, 0x1, 0x0);
        gbc.writeMem(0x3aa5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4ff1);
        EXPECT(gbc.pc(), 0x3aa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02F3
        gbc.setState(0x77ce, 0xcca0, 0xbc70, 0x7b95, 0x2ce4, 0xb9e4, 0x1, 0x1);
        gbc.writeMem(0x77ce, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcca0);
        EXPECT(gbc.pc(), 0x77d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02F5
        gbc.setState(0x6ee0, 0xfba5, 0x5690, 0x3574, 0xb0a7, 0x79e2, 0x1, 0x1);
        gbc.writeMem(0x6ee0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfba5);
        EXPECT(gbc.pc(), 0x6ee2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02F6
        gbc.setState(0x3f54, 0xac62, 0xe0c0, 0xa6cb, 0xd9ba, 0x437f, 0x1, 0x0);
        gbc.writeMem(0x3f54, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xac62);
        EXPECT(gbc.pc(), 0x3f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02F7
        gbc.setState(0x487d, 0xa51, 0x6570, 0xc563, 0xb3bb, 0x99c9, 0x0, 0x1);
        gbc.writeMem(0x487d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa51);
        EXPECT(gbc.pc(), 0x487f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02F8
        gbc.setState(0xcc28, 0xf60b, 0x4b20, 0x16e0, 0xcc4d, 0xdd28, 0x0, 0x1);
        gbc.writeMem(0xcc28, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xf60b);
        EXPECT(gbc.pc(), 0xcc2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc28), 0xcb);
        EXPECT(gbc.readMem(0xcc29), 0x3c);
        // CB 3C 02F9
        gbc.setState(0x49d1, 0x43ef, 0x2c00, 0xfb82, 0xf6c7, 0xcbb4, 0x1, 0x1);
        gbc.writeMem(0x49d1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x43ef);
        EXPECT(gbc.pc(), 0x49d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02FA
        gbc.setState(0x46de, 0xa380, 0x75e0, 0x13b8, 0x805c, 0x7f37, 0x1, 0x0);
        gbc.writeMem(0x46de, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa380);
        EXPECT(gbc.pc(), 0x46e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02FC
        gbc.setState(0x18e0, 0x8a37, 0xf370, 0xf2c8, 0x70fe, 0xd6b, 0x1, 0x0);
        gbc.writeMem(0x18e0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x8a37);
        EXPECT(gbc.pc(), 0x18e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 02FD
        gbc.setState(0x49c6, 0x62fb, 0x8520, 0xc15c, 0x8857, 0x80c5, 0x0, 0x0);
        gbc.writeMem(0x49c6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x62fb);
        EXPECT(gbc.pc(), 0x49c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 02FE
        gbc.setState(0x9016, 0xae7, 0x370, 0x7ecc, 0xc508, 0x5cc0, 0x0, 0x1);
        gbc.writeMem(0x9016, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xae7);
        EXPECT(gbc.pc(), 0x9018);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9016), 0xcb);
        EXPECT(gbc.readMem(0x9017), 0x3c);
        // CB 3C 02FF
        gbc.setState(0xc448, 0xee3d, 0x3d20, 0xfb92, 0x1242, 0x82a4, 0x0, 0x1);
        gbc.writeMem(0xc448, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xee3d);
        EXPECT(gbc.pc(), 0xc44a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc448), 0xcb);
        EXPECT(gbc.readMem(0xc449), 0x3c);
        // CB 3C 0300
        gbc.setState(0xc715, 0xeff9, 0xe010, 0x37ea, 0xdaf, 0x1538, 0x1, 0x0);
        gbc.writeMem(0xc715, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xeff9);
        EXPECT(gbc.pc(), 0xc717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc715), 0xcb);
        EXPECT(gbc.readMem(0xc716), 0x3c);
        // CB 3C 0301
        gbc.setState(0x36b2, 0xedcc, 0x1f10, 0xfeb, 0x51ff, 0xa5f5, 0x0, 0x1);
        gbc.writeMem(0x36b2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xedcc);
        EXPECT(gbc.pc(), 0x36b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0302
        gbc.setState(0x4ff0, 0x831a, 0x7850, 0x4f6a, 0x2b53, 0x6970, 0x0, 0x0);
        gbc.writeMem(0x4ff0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x831a);
        EXPECT(gbc.pc(), 0x4ff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0303
        gbc.setState(0xcfc4, 0x23f6, 0x5e80, 0x1472, 0x77a7, 0xa7c9, 0x0, 0x0);
        gbc.writeMem(0xcfc4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x23f6);
        EXPECT(gbc.pc(), 0xcfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc4), 0xcb);
        EXPECT(gbc.readMem(0xcfc5), 0x3c);
        // CB 3C 0304
        gbc.setState(0x82cb, 0x8a3, 0x9c50, 0xb27c, 0x585e, 0x7f0a, 0x0, 0x0);
        gbc.writeMem(0x82cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8a3);
        EXPECT(gbc.pc(), 0x82cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cb), 0xcb);
        EXPECT(gbc.readMem(0x82cc), 0x3c);
        // CB 3C 0305
        gbc.setState(0x54f2, 0xc27, 0xf250, 0xef31, 0xa886, 0x39c, 0x1, 0x0);
        gbc.writeMem(0x54f2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xc27);
        EXPECT(gbc.pc(), 0x54f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0306
        gbc.setState(0xb71c, 0x85a6, 0xf500, 0x807e, 0x2cfc, 0xa5ef, 0x0, 0x1);
        gbc.writeMem(0xb71c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x85a6);
        EXPECT(gbc.pc(), 0xb71e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb71c), 0xcb);
        EXPECT(gbc.readMem(0xb71d), 0x3c);
        // CB 3C 0307
        gbc.setState(0xe2d4, 0x3602, 0x3540, 0x4a28, 0xd55c, 0x5ded, 0x1, 0x0);
        gbc.writeMem(0xe2d4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x3602);
        EXPECT(gbc.pc(), 0xe2d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2d4), 0xcb);
        EXPECT(gbc.readMem(0xe2d5), 0x3c);
        // CB 3C 0308
        gbc.setState(0x518a, 0x9340, 0xfde0, 0x9082, 0xccc8, 0x3a60, 0x1, 0x1);
        gbc.writeMem(0x518a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9340);
        EXPECT(gbc.pc(), 0x518c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0309
        gbc.setState(0x70aa, 0xa8a8, 0x9a90, 0x318b, 0x3831, 0x46ec, 0x1, 0x0);
        gbc.writeMem(0x70aa, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa8a8);
        EXPECT(gbc.pc(), 0x70ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 030A
        gbc.setState(0xb7c2, 0x55ab, 0x7210, 0x6b6e, 0xfa09, 0x92ba, 0x0, 0x0);
        gbc.writeMem(0xb7c2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x55ab);
        EXPECT(gbc.pc(), 0xb7c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7c2), 0xcb);
        EXPECT(gbc.readMem(0xb7c3), 0x3c);
        // CB 3C 030B
        gbc.setState(0x467c, 0x1b46, 0xcb90, 0x5c59, 0xff4, 0xb95b, 0x1, 0x1);
        gbc.writeMem(0x467c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x1b46);
        EXPECT(gbc.pc(), 0x467e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 030C
        gbc.setState(0xc243, 0x5662, 0x8da0, 0x5257, 0x693, 0x449e, 0x0, 0x1);
        gbc.writeMem(0xc243, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5662);
        EXPECT(gbc.pc(), 0xc245);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc243), 0xcb);
        EXPECT(gbc.readMem(0xc244), 0x3c);
        // CB 3C 030D
        gbc.setState(0x236e, 0x6c46, 0x61f0, 0xdfc6, 0xd05e, 0xf82b, 0x1, 0x0);
        gbc.writeMem(0x236e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x6c46);
        EXPECT(gbc.pc(), 0x2370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 030E
        gbc.setState(0xb9b9, 0x73ad, 0xc960, 0xaa59, 0x166e, 0xf53f, 0x1, 0x1);
        gbc.writeMem(0xb9b9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x73ad);
        EXPECT(gbc.pc(), 0xb9bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b9), 0xcb);
        EXPECT(gbc.readMem(0xb9ba), 0x3c);
        // CB 3C 030F
        gbc.setState(0x69d7, 0x3609, 0x15c0, 0x3350, 0x931d, 0x5cce, 0x0, 0x1);
        gbc.writeMem(0x69d7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3609);
        EXPECT(gbc.pc(), 0x69d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0310
        gbc.setState(0xb1d, 0x633e, 0xf480, 0x80fa, 0xb9a0, 0x1dad, 0x0, 0x1);
        gbc.writeMem(0xb1d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x633e);
        EXPECT(gbc.pc(), 0xb1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0311
        gbc.setState(0x80a2, 0x8a35, 0x9040, 0x34d4, 0xa83d, 0x2fb2, 0x1, 0x1);
        gbc.writeMem(0x80a2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8a35);
        EXPECT(gbc.pc(), 0x80a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a2), 0xcb);
        EXPECT(gbc.readMem(0x80a3), 0x3c);
        // CB 3C 0312
        gbc.setState(0x9b61, 0x1054, 0x2ad0, 0x37b6, 0x84f2, 0xa84d, 0x1, 0x1);
        gbc.writeMem(0x9b61, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1054);
        EXPECT(gbc.pc(), 0x9b63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b61), 0xcb);
        EXPECT(gbc.readMem(0x9b62), 0x3c);
        // CB 3C 0313
        gbc.setState(0x4c5b, 0xfede, 0x3540, 0x4895, 0x8dea, 0x5248, 0x1, 0x0);
        gbc.writeMem(0x4c5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfede);
        EXPECT(gbc.pc(), 0x4c5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0314
        gbc.setState(0x6cf6, 0x1297, 0x2ad0, 0x8c15, 0xc6db, 0x8f6d, 0x1, 0x0);
        gbc.writeMem(0x6cf6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x1297);
        EXPECT(gbc.pc(), 0x6cf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0315
        gbc.setState(0x362d, 0x9207, 0x2c20, 0x7900, 0xedd3, 0xcf05, 0x1, 0x1);
        gbc.writeMem(0x362d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9207);
        EXPECT(gbc.pc(), 0x362f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0316
        gbc.setState(0xbf84, 0x89fc, 0x1c00, 0xfba9, 0xeae4, 0x87e2, 0x0, 0x1);
        gbc.writeMem(0xbf84, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x89fc);
        EXPECT(gbc.pc(), 0xbf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf84), 0xcb);
        EXPECT(gbc.readMem(0xbf85), 0x3c);
        // CB 3C 0317
        gbc.setState(0x62e9, 0xf75a, 0xc090, 0xe846, 0x9925, 0xaebb, 0x0, 0x0);
        gbc.writeMem(0x62e9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf75a);
        EXPECT(gbc.pc(), 0x62eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0318
        gbc.setState(0x4928, 0x82b8, 0x2400, 0x9919, 0x4ae0, 0x6f77, 0x0, 0x0);
        gbc.writeMem(0x4928, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x82b8);
        EXPECT(gbc.pc(), 0x492a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0319
        gbc.setState(0x9518, 0xdfb8, 0x7600, 0x37c8, 0x7ded, 0xc586, 0x1, 0x1);
        gbc.writeMem(0x9518, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xdfb8);
        EXPECT(gbc.pc(), 0x951a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9518), 0xcb);
        EXPECT(gbc.readMem(0x9519), 0x3c);
        // CB 3C 031A
        gbc.setState(0x4ee3, 0xec17, 0x8d30, 0x416c, 0x6646, 0x114, 0x0, 0x1);
        gbc.writeMem(0x4ee3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xec17);
        EXPECT(gbc.pc(), 0x4ee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 031B
        gbc.setState(0x996c, 0x32f6, 0x7e30, 0x5090, 0x6470, 0xad49, 0x0, 0x1);
        gbc.writeMem(0x996c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x32f6);
        EXPECT(gbc.pc(), 0x996e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x996c), 0xcb);
        EXPECT(gbc.readMem(0x996d), 0x3c);
        // CB 3C 031C
        gbc.setState(0xbd9f, 0xe8bb, 0x2ef0, 0xff3a, 0x9c43, 0x3864, 0x0, 0x1);
        gbc.writeMem(0xbd9f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe8bb);
        EXPECT(gbc.pc(), 0xbda1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd9f), 0xcb);
        EXPECT(gbc.readMem(0xbda0), 0x3c);
        // CB 3C 031D
        gbc.setState(0x7584, 0xc09f, 0x8d90, 0x5cfc, 0x9a1, 0x9725, 0x1, 0x1);
        gbc.writeMem(0x7584, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc09f);
        EXPECT(gbc.pc(), 0x7586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 031E
        gbc.setState(0xc3ae, 0x68d9, 0x9970, 0xbadd, 0x79ed, 0x8ace, 0x0, 0x0);
        gbc.writeMem(0xc3ae, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x68d9);
        EXPECT(gbc.pc(), 0xc3b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ae), 0xcb);
        EXPECT(gbc.readMem(0xc3af), 0x3c);
        // CB 3C 031F
        gbc.setState(0x5e5b, 0x138c, 0xe530, 0x9d09, 0x47a4, 0x964e, 0x0, 0x0);
        gbc.writeMem(0x5e5b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x138c);
        EXPECT(gbc.pc(), 0x5e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0320
        gbc.setState(0x1dbf, 0x1f23, 0x1730, 0x6f5a, 0xf7de, 0xab6f, 0x1, 0x1);
        gbc.writeMem(0x1dbf, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1f23);
        EXPECT(gbc.pc(), 0x1dc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0321
        gbc.setState(0x1ff0, 0x30bd, 0xda50, 0xb79, 0x80e2, 0xeef9, 0x0, 0x0);
        gbc.writeMem(0x1ff0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x30bd);
        EXPECT(gbc.pc(), 0x1ff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0322
        gbc.setState(0x9a81, 0x5c72, 0x5cd0, 0x7f5f, 0x910f, 0x8687, 0x1, 0x1);
        gbc.writeMem(0x9a81, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5c72);
        EXPECT(gbc.pc(), 0x9a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a81), 0xcb);
        EXPECT(gbc.readMem(0x9a82), 0x3c);
        // CB 3C 0323
        gbc.setState(0x5412, 0xe2b1, 0xc9c0, 0xf1f6, 0x5549, 0x6cd7, 0x0, 0x0);
        gbc.writeMem(0x5412, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe2b1);
        EXPECT(gbc.pc(), 0x5414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0325
        gbc.setState(0xaca9, 0x9c2b, 0x7e90, 0x4e3a, 0x8188, 0x36c7, 0x1, 0x1);
        gbc.writeMem(0xaca9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9c2b);
        EXPECT(gbc.pc(), 0xacab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca9), 0xcb);
        EXPECT(gbc.readMem(0xacaa), 0x3c);
        // CB 3C 0326
        gbc.setState(0x8394, 0xcba4, 0x79a0, 0xbbe3, 0xb18f, 0x4668, 0x1, 0x0);
        gbc.writeMem(0x8394, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcba4);
        EXPECT(gbc.pc(), 0x8396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8394), 0xcb);
        EXPECT(gbc.readMem(0x8395), 0x3c);
        // CB 3C 0327
        gbc.setState(0x3cf3, 0x565d, 0xb4f0, 0x791c, 0x4bd3, 0x153d, 0x1, 0x1);
        gbc.writeMem(0x3cf3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x565d);
        EXPECT(gbc.pc(), 0x3cf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0328
        gbc.setState(0x25aa, 0x4023, 0x9ab0, 0x4911, 0x5c4f, 0xffbf, 0x0, 0x1);
        gbc.writeMem(0x25aa, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4023);
        EXPECT(gbc.pc(), 0x25ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0329
        gbc.setState(0xed64, 0xe990, 0x3d10, 0x8b79, 0x757e, 0x9dae, 0x1, 0x1);
        gbc.writeMem(0xed64, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe990);
        EXPECT(gbc.pc(), 0xed66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed64), 0xcb);
        EXPECT(gbc.readMem(0xed65), 0x3c);
        // CB 3C 032A
        gbc.setState(0xbe1a, 0x2095, 0x30b0, 0x430d, 0xaf8c, 0xf274, 0x0, 0x1);
        gbc.writeMem(0xbe1a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2095);
        EXPECT(gbc.pc(), 0xbe1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe1a), 0xcb);
        EXPECT(gbc.readMem(0xbe1b), 0x3c);
        // CB 3C 032B
        gbc.setState(0x5702, 0xaa4a, 0x96f0, 0xce7a, 0x7d75, 0xcc5d, 0x1, 0x0);
        gbc.writeMem(0x5702, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xaa4a);
        EXPECT(gbc.pc(), 0x5704);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 032C
        gbc.setState(0xeeb4, 0x6288, 0x48f0, 0x13b8, 0xac53, 0xee7d, 0x1, 0x0);
        gbc.writeMem(0xeeb4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6288);
        EXPECT(gbc.pc(), 0xeeb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeeb4), 0xcb);
        EXPECT(gbc.readMem(0xeeb5), 0x3c);
        // CB 3C 032D
        gbc.setState(0x76c9, 0x9a2d, 0x33b0, 0x553b, 0x1cdb, 0x25fd, 0x0, 0x1);
        gbc.writeMem(0x76c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x9a2d);
        EXPECT(gbc.pc(), 0x76cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 032E
        gbc.setState(0x7885, 0x8d9a, 0xf500, 0x5ec4, 0x8fbe, 0xd04c, 0x0, 0x1);
        gbc.writeMem(0x7885, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8d9a);
        EXPECT(gbc.pc(), 0x7887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 032F
        gbc.setState(0x4a8e, 0x112d, 0x8040, 0x12b7, 0x65c2, 0x4b5f, 0x1, 0x0);
        gbc.writeMem(0x4a8e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x112d);
        EXPECT(gbc.pc(), 0x4a90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0330
        gbc.setState(0x8ef5, 0x4c0a, 0x3890, 0x342c, 0x784b, 0x808a, 0x1, 0x0);
        gbc.writeMem(0x8ef5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4c0a);
        EXPECT(gbc.pc(), 0x8ef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef5), 0xcb);
        EXPECT(gbc.readMem(0x8ef6), 0x3c);
        // CB 3C 0331
        gbc.setState(0x4006, 0xc8cd, 0x8680, 0xf884, 0xfe22, 0xf5d9, 0x0, 0x0);
        gbc.writeMem(0x4006, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc8cd);
        EXPECT(gbc.pc(), 0x4008);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0332
        gbc.setState(0xe1fd, 0xbc19, 0xfd00, 0x8cbf, 0x33c2, 0xf6a2, 0x0, 0x0);
        gbc.writeMem(0xe1fd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbc19);
        EXPECT(gbc.pc(), 0xe1ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1fd), 0xcb);
        EXPECT(gbc.readMem(0xe1fe), 0x3c);
        // CB 3C 0333
        gbc.setState(0xdf3e, 0xc375, 0x5ad0, 0xd1b4, 0x735a, 0x3900, 0x0, 0x0);
        gbc.writeMem(0xdf3e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc375);
        EXPECT(gbc.pc(), 0xdf40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf3e), 0xcb);
        EXPECT(gbc.readMem(0xdf3f), 0x3c);
        // CB 3C 0334
        gbc.setState(0x379f, 0x4f55, 0xa80, 0x4898, 0xb4f, 0xc16, 0x1, 0x0);
        gbc.writeMem(0x379f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4f55);
        EXPECT(gbc.pc(), 0x37a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0335
        gbc.setState(0xcb, 0x8d26, 0x5cd0, 0x6b65, 0x92c2, 0x3760, 0x0, 0x1);
        gbc.writeMem(0xcb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8d26);
        EXPECT(gbc.pc(), 0xcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0336
        gbc.setState(0xafd2, 0x4e5d, 0x5570, 0x29ea, 0x53cd, 0x7992, 0x1, 0x0);
        gbc.writeMem(0xafd2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4e5d);
        EXPECT(gbc.pc(), 0xafd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd2), 0xcb);
        EXPECT(gbc.readMem(0xafd3), 0x3c);
        // CB 3C 0337
        gbc.setState(0x4f79, 0x57b8, 0xfa10, 0x1a9c, 0x1528, 0x6c08, 0x1, 0x1);
        gbc.writeMem(0x4f79, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x57b8);
        EXPECT(gbc.pc(), 0x4f7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0338
        gbc.setState(0x6354, 0xeb77, 0xd860, 0xaa64, 0xce61, 0x78c, 0x1, 0x1);
        gbc.writeMem(0x6354, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xeb77);
        EXPECT(gbc.pc(), 0x6356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0339
        gbc.setState(0x106c, 0x4b67, 0xc8a0, 0x193b, 0x8bdd, 0x509c, 0x1, 0x0);
        gbc.writeMem(0x106c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4b67);
        EXPECT(gbc.pc(), 0x106e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 033B
        gbc.setState(0xbee, 0x40d8, 0xc140, 0xf115, 0x1bcb, 0x6392, 0x1, 0x1);
        gbc.writeMem(0xbee, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x40d8);
        EXPECT(gbc.pc(), 0xbf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 033C
        gbc.setState(0x1c34, 0xdbb5, 0xef00, 0x58f1, 0x8f3d, 0x7779, 0x1, 0x1);
        gbc.writeMem(0x1c34, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xdbb5);
        EXPECT(gbc.pc(), 0x1c36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 033E
        gbc.setState(0xd063, 0x49d9, 0x6b70, 0xbc14, 0x6f3e, 0xb8f3, 0x1, 0x0);
        gbc.writeMem(0xd063, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x49d9);
        EXPECT(gbc.pc(), 0xd065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd063), 0xcb);
        EXPECT(gbc.readMem(0xd064), 0x3c);
        // CB 3C 033F
        gbc.setState(0x2782, 0x5aee, 0xb280, 0x4c25, 0x572e, 0x2178, 0x1, 0x1);
        gbc.writeMem(0x2782, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5aee);
        EXPECT(gbc.pc(), 0x2784);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0340
        gbc.setState(0x11f7, 0xd77e, 0x590, 0x31cb, 0xf0c, 0xba00, 0x0, 0x0);
        gbc.writeMem(0x11f7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd77e);
        EXPECT(gbc.pc(), 0x11f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0341
        gbc.setState(0xeb8a, 0xb684, 0x1100, 0x9f45, 0x5aed, 0x54be, 0x1, 0x0);
        gbc.writeMem(0xeb8a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb684);
        EXPECT(gbc.pc(), 0xeb8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb8a), 0xcb);
        EXPECT(gbc.readMem(0xeb8b), 0x3c);
        // CB 3C 0342
        gbc.setState(0xe3c5, 0xfc54, 0x20, 0xd790, 0xfbcf, 0xc98a, 0x1, 0x0);
        gbc.writeMem(0xe3c5, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfc54);
        EXPECT(gbc.pc(), 0xe3c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c5), 0xcb);
        EXPECT(gbc.readMem(0xe3c6), 0x3c);
        // CB 3C 0343
        gbc.setState(0x4f7d, 0xb3e0, 0xac00, 0x8dd2, 0x7093, 0x5d70, 0x1, 0x0);
        gbc.writeMem(0x4f7d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xb3e0);
        EXPECT(gbc.pc(), 0x4f7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0344
        gbc.setState(0x666b, 0xaa56, 0xe170, 0xa705, 0x1f62, 0x1174, 0x1, 0x1);
        gbc.writeMem(0x666b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xaa56);
        EXPECT(gbc.pc(), 0x666d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0345
        gbc.setState(0x50e7, 0xbf65, 0xb8d0, 0xf9e3, 0x2e1b, 0xcad5, 0x1, 0x0);
        gbc.writeMem(0x50e7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbf65);
        EXPECT(gbc.pc(), 0x50e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0346
        gbc.setState(0x89e4, 0xedec, 0xbbb0, 0xaf07, 0x290d, 0xb6e1, 0x0, 0x0);
        gbc.writeMem(0x89e4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xedec);
        EXPECT(gbc.pc(), 0x89e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e4), 0xcb);
        EXPECT(gbc.readMem(0x89e5), 0x3c);
        // CB 3C 0347
        gbc.setState(0x1436, 0x28ea, 0xe520, 0x796a, 0x8d0f, 0xc61b, 0x1, 0x0);
        gbc.writeMem(0x1436, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x28ea);
        EXPECT(gbc.pc(), 0x1438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0348
        gbc.setState(0xc766, 0x1cc4, 0xfe20, 0x5bf3, 0x6909, 0xcad, 0x0, 0x0);
        gbc.writeMem(0xc766, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1cc4);
        EXPECT(gbc.pc(), 0xc768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc766), 0xcb);
        EXPECT(gbc.readMem(0xc767), 0x3c);
        // CB 3C 034A
        gbc.setState(0xe7f2, 0x7d88, 0x4370, 0xf902, 0xf4cd, 0xc4aa, 0x1, 0x0);
        gbc.writeMem(0xe7f2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7d88);
        EXPECT(gbc.pc(), 0xe7f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f2), 0xcb);
        EXPECT(gbc.readMem(0xe7f3), 0x3c);
        // CB 3C 034B
        gbc.setState(0xc426, 0xc775, 0x5560, 0xb17d, 0xab5e, 0xe6c3, 0x0, 0x1);
        gbc.writeMem(0xc426, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xc775);
        EXPECT(gbc.pc(), 0xc428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc426), 0xcb);
        EXPECT(gbc.readMem(0xc427), 0x3c);
        // CB 3C 034C
        gbc.setState(0xeb2d, 0xed27, 0x3d0, 0xb89a, 0x914f, 0xb1ee, 0x0, 0x0);
        gbc.writeMem(0xeb2d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xed27);
        EXPECT(gbc.pc(), 0xeb2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb2d), 0xcb);
        EXPECT(gbc.readMem(0xeb2e), 0x3c);
        // CB 3C 034D
        gbc.setState(0x88cb, 0x2af3, 0x4240, 0x7c88, 0x81f2, 0x612d, 0x1, 0x0);
        gbc.writeMem(0x88cb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2af3);
        EXPECT(gbc.pc(), 0x88cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88cb), 0xcb);
        EXPECT(gbc.readMem(0x88cc), 0x3c);
        // CB 3C 034E
        gbc.setState(0xb5f7, 0x1b13, 0xdcb0, 0x1ea5, 0x883f, 0xc988, 0x1, 0x1);
        gbc.writeMem(0xb5f7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1b13);
        EXPECT(gbc.pc(), 0xb5f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5f7), 0xcb);
        EXPECT(gbc.readMem(0xb5f8), 0x3c);
        // CB 3C 034F
        gbc.setState(0x2595, 0xd318, 0x47d0, 0xe28f, 0xc85a, 0xf8b3, 0x1, 0x1);
        gbc.writeMem(0x2595, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd318);
        EXPECT(gbc.pc(), 0x2597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0350
        gbc.setState(0x8599, 0x3ab0, 0xf220, 0xb34b, 0x83b9, 0xad8e, 0x0, 0x0);
        gbc.writeMem(0x8599, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3ab0);
        EXPECT(gbc.pc(), 0x859b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8599), 0xcb);
        EXPECT(gbc.readMem(0x859a), 0x3c);
        // CB 3C 0351
        gbc.setState(0xcad6, 0xf98, 0xd820, 0xcc6a, 0x61b, 0x7e2a, 0x1, 0x0);
        gbc.writeMem(0xcad6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf98);
        EXPECT(gbc.pc(), 0xcad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcad6), 0xcb);
        EXPECT(gbc.readMem(0xcad7), 0x3c);
        // CB 3C 0352
        gbc.setState(0xb33, 0x2dc5, 0x650, 0xa5c3, 0x8589, 0x55bd, 0x0, 0x1);
        gbc.writeMem(0xb33, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2dc5);
        EXPECT(gbc.pc(), 0xb35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0353
        gbc.setState(0x64a4, 0x5651, 0x83b0, 0x9017, 0xf6ba, 0xeab8, 0x1, 0x1);
        gbc.writeMem(0x64a4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x5651);
        EXPECT(gbc.pc(), 0x64a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0354
        gbc.setState(0x6c8, 0xdada, 0x5d90, 0xab4a, 0x35da, 0xa4f3, 0x1, 0x1);
        gbc.writeMem(0x6c8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdada);
        EXPECT(gbc.pc(), 0x6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0355
        gbc.setState(0x11ea, 0xf455, 0x3830, 0x44c7, 0x3afa, 0xbb24, 0x1, 0x0);
        gbc.writeMem(0x11ea, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf455);
        EXPECT(gbc.pc(), 0x11ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0356
        gbc.setState(0xce61, 0x60ca, 0x7460, 0xac15, 0x26e0, 0x279f, 0x0, 0x0);
        gbc.writeMem(0xce61, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x60ca);
        EXPECT(gbc.pc(), 0xce63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce61), 0xcb);
        EXPECT(gbc.readMem(0xce62), 0x3c);
        // CB 3C 0357
        gbc.setState(0x4c6e, 0x279c, 0x7190, 0x79d2, 0xab82, 0x5f3b, 0x1, 0x0);
        gbc.writeMem(0x4c6e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x279c);
        EXPECT(gbc.pc(), 0x4c70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0358
        gbc.setState(0xe61d, 0xe815, 0x9de0, 0x6959, 0xdb63, 0xde1d, 0x0, 0x0);
        gbc.writeMem(0xe61d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe815);
        EXPECT(gbc.pc(), 0xe61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe61d), 0xcb);
        EXPECT(gbc.readMem(0xe61e), 0x3c);
        // CB 3C 0359
        gbc.setState(0xd18d, 0xb0d5, 0x51b0, 0x2ad, 0xe775, 0x5916, 0x0, 0x0);
        gbc.writeMem(0xd18d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xb0d5);
        EXPECT(gbc.pc(), 0xd18f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd18d), 0xcb);
        EXPECT(gbc.readMem(0xd18e), 0x3c);
        // CB 3C 035A
        gbc.setState(0xae9a, 0x285c, 0x16c0, 0x83a2, 0x4b4e, 0xcff2, 0x1, 0x1);
        gbc.writeMem(0xae9a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x285c);
        EXPECT(gbc.pc(), 0xae9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae9a), 0xcb);
        EXPECT(gbc.readMem(0xae9b), 0x3c);
        // CB 3C 035B
        gbc.setState(0x5815, 0x261c, 0x34b0, 0xc26e, 0xd0e1, 0x5311, 0x0, 0x0);
        gbc.writeMem(0x5815, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x261c);
        EXPECT(gbc.pc(), 0x5817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 035C
        gbc.setState(0xb1d, 0xe1ae, 0x830, 0x7ef2, 0xecb, 0x89f6, 0x1, 0x1);
        gbc.writeMem(0xb1d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe1ae);
        EXPECT(gbc.pc(), 0xb1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 035D
        gbc.setState(0xc531, 0xf598, 0xb8c0, 0xf3b7, 0x93b1, 0x5eb4, 0x1, 0x0);
        gbc.writeMem(0xc531, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf598);
        EXPECT(gbc.pc(), 0xc533);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc531), 0xcb);
        EXPECT(gbc.readMem(0xc532), 0x3c);
        // CB 3C 035E
        gbc.setState(0x33bd, 0x9739, 0x8f30, 0x7f75, 0x8904, 0x48a8, 0x1, 0x1);
        gbc.writeMem(0x33bd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x9739);
        EXPECT(gbc.pc(), 0x33bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 035F
        gbc.setState(0xd90e, 0x577, 0x6b30, 0x1fb9, 0x11d, 0xe2d0, 0x1, 0x1);
        gbc.writeMem(0xd90e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x577);
        EXPECT(gbc.pc(), 0xd910);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd90e), 0xcb);
        EXPECT(gbc.readMem(0xd90f), 0x3c);
        // CB 3C 0360
        gbc.setState(0x73eb, 0x80af, 0xb2f0, 0x4499, 0x91a4, 0xc011, 0x0, 0x0);
        gbc.writeMem(0x73eb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x80af);
        EXPECT(gbc.pc(), 0x73ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0362
        gbc.setState(0x2070, 0x6c21, 0x6be0, 0xd8e4, 0x6e14, 0xd259, 0x0, 0x0);
        gbc.writeMem(0x2070, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6c21);
        EXPECT(gbc.pc(), 0x2072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0363
        gbc.setState(0xbce4, 0xf5a3, 0x8c40, 0x160c, 0x2e72, 0x3a5c, 0x1, 0x0);
        gbc.writeMem(0xbce4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf5a3);
        EXPECT(gbc.pc(), 0xbce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce4), 0xcb);
        EXPECT(gbc.readMem(0xbce5), 0x3c);
        // CB 3C 0364
        gbc.setState(0x1aa6, 0xade3, 0x11f0, 0xce12, 0x2df9, 0x4f17, 0x0, 0x0);
        gbc.writeMem(0x1aa6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xade3);
        EXPECT(gbc.pc(), 0x1aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0365
        gbc.setState(0x660d, 0x7856, 0xa900, 0x1f3c, 0x97dd, 0x2902, 0x1, 0x1);
        gbc.writeMem(0x660d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7856);
        EXPECT(gbc.pc(), 0x660f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0366
        gbc.setState(0xcdde, 0x250e, 0xaee0, 0x3ece, 0xed5b, 0x7ea2, 0x0, 0x0);
        gbc.writeMem(0xcdde, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x250e);
        EXPECT(gbc.pc(), 0xcde0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdde), 0xcb);
        EXPECT(gbc.readMem(0xcddf), 0x3c);
        // CB 3C 0367
        gbc.setState(0x76d2, 0x6f2f, 0xf860, 0x487a, 0xaf4e, 0x33f4, 0x0, 0x1);
        gbc.writeMem(0x76d2, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6f2f);
        EXPECT(gbc.pc(), 0x76d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0368
        gbc.setState(0xb7fd, 0x6ad3, 0xc890, 0xc17c, 0xeb0f, 0x6b04, 0x1, 0x1);
        gbc.writeMem(0xb7fd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6ad3);
        EXPECT(gbc.pc(), 0xb7ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7fd), 0xcb);
        EXPECT(gbc.readMem(0xb7fe), 0x3c);
        // CB 3C 0369
        gbc.setState(0xd9d8, 0xc003, 0xa00, 0xb9cb, 0xa285, 0xc1d0, 0x0, 0x1);
        gbc.writeMem(0xd9d8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xc003);
        EXPECT(gbc.pc(), 0xd9da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d8), 0xcb);
        EXPECT(gbc.readMem(0xd9d9), 0x3c);
        // CB 3C 036A
        gbc.setState(0x6c2f, 0x9f8b, 0xd250, 0xd971, 0xe9e9, 0x105a, 0x1, 0x0);
        gbc.writeMem(0x6c2f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9f8b);
        EXPECT(gbc.pc(), 0x6c31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 036B
        gbc.setState(0x62e3, 0x2fba, 0x8ac0, 0x2e1e, 0xda5, 0x71e5, 0x1, 0x1);
        gbc.writeMem(0x62e3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2fba);
        EXPECT(gbc.pc(), 0x62e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 036C
        gbc.setState(0x4f6d, 0xc509, 0x2040, 0xe6ea, 0x2918, 0xad66, 0x1, 0x1);
        gbc.writeMem(0x4f6d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc509);
        EXPECT(gbc.pc(), 0x4f6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 036D
        gbc.setState(0x762a, 0x7496, 0x3380, 0xbd4c, 0xac03, 0x94e8, 0x1, 0x1);
        gbc.writeMem(0x762a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7496);
        EXPECT(gbc.pc(), 0x762c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 036E
        gbc.setState(0x401b, 0x762a, 0xd90, 0x25bd, 0xbbc3, 0x6daf, 0x1, 0x0);
        gbc.writeMem(0x401b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x762a);
        EXPECT(gbc.pc(), 0x401d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 036F
        gbc.setState(0x937e, 0xfb9a, 0x3bb0, 0x8011, 0xc0cb, 0xf6d9, 0x1, 0x0);
        gbc.writeMem(0x937e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfb9a);
        EXPECT(gbc.pc(), 0x9380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937e), 0xcb);
        EXPECT(gbc.readMem(0x937f), 0x3c);
        // CB 3C 0370
        gbc.setState(0xd81a, 0x5de7, 0x17b0, 0x5708, 0xc392, 0xa582, 0x1, 0x1);
        gbc.writeMem(0xd81a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5de7);
        EXPECT(gbc.pc(), 0xd81c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd81a), 0xcb);
        EXPECT(gbc.readMem(0xd81b), 0x3c);
        // CB 3C 0371
        gbc.setState(0xdeba, 0x7643, 0x610, 0x62de, 0x2991, 0xf6c3, 0x0, 0x1);
        gbc.writeMem(0xdeba, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7643);
        EXPECT(gbc.pc(), 0xdebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeba), 0xcb);
        EXPECT(gbc.readMem(0xdebb), 0x3c);
        // CB 3C 0372
        gbc.setState(0xe0ce, 0x3789, 0xf750, 0x8e53, 0xb64d, 0x5354, 0x0, 0x1);
        gbc.writeMem(0xe0ce, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3789);
        EXPECT(gbc.pc(), 0xe0d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ce), 0xcb);
        EXPECT(gbc.readMem(0xe0cf), 0x3c);
        // CB 3C 0373
        gbc.setState(0xf05, 0x2990, 0x9c40, 0xd296, 0xd587, 0x77ff, 0x0, 0x0);
        gbc.writeMem(0xf05, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2990);
        EXPECT(gbc.pc(), 0xf07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0374
        gbc.setState(0x4803, 0x6905, 0xfab0, 0x1035, 0xfa6f, 0x68df, 0x1, 0x0);
        gbc.writeMem(0x4803, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x6905);
        EXPECT(gbc.pc(), 0x4805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0375
        gbc.setState(0xcec7, 0x3ef5, 0xfb00, 0x5fa, 0xadf, 0x63b8, 0x1, 0x0);
        gbc.writeMem(0xcec7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x3ef5);
        EXPECT(gbc.pc(), 0xcec9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcec7), 0xcb);
        EXPECT(gbc.readMem(0xcec8), 0x3c);
        // CB 3C 0376
        gbc.setState(0x5972, 0x1e6f, 0xc6f0, 0x32ca, 0x4fdb, 0x181, 0x1, 0x0);
        gbc.writeMem(0x5972, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x1e6f);
        EXPECT(gbc.pc(), 0x5974);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0377
        gbc.setState(0x14c9, 0xe2aa, 0x7990, 0x31ad, 0xdfe1, 0x7b8f, 0x0, 0x0);
        gbc.writeMem(0x14c9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe2aa);
        EXPECT(gbc.pc(), 0x14cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0378
        gbc.setState(0x5180, 0x7526, 0xf50, 0x53e6, 0x8cd1, 0xe8a8, 0x0, 0x1);
        gbc.writeMem(0x5180, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7526);
        EXPECT(gbc.pc(), 0x5182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0379
        gbc.setState(0x331c, 0x17fe, 0x2f40, 0xb6a3, 0x7c1f, 0xd18e, 0x1, 0x1);
        gbc.writeMem(0x331c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x17fe);
        EXPECT(gbc.pc(), 0x331e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 037A
        gbc.setState(0x4c7c, 0x127e, 0x7b30, 0x5d5, 0x244e, 0xab12, 0x0, 0x1);
        gbc.writeMem(0x4c7c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x127e);
        EXPECT(gbc.pc(), 0x4c7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 037B
        gbc.setState(0xc31c, 0xb065, 0xc150, 0x5e08, 0xf5b3, 0x3679, 0x0, 0x1);
        gbc.writeMem(0xc31c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb065);
        EXPECT(gbc.pc(), 0xc31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc31c), 0xcb);
        EXPECT(gbc.readMem(0xc31d), 0x3c);
        // CB 3C 037C
        gbc.setState(0x8b0f, 0x744f, 0x18c0, 0x70ff, 0xd1b8, 0x8c1, 0x1, 0x1);
        gbc.writeMem(0x8b0f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x744f);
        EXPECT(gbc.pc(), 0x8b11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0f), 0xcb);
        EXPECT(gbc.readMem(0x8b10), 0x3c);
        // CB 3C 037D
        gbc.setState(0x5be7, 0x518e, 0x9840, 0xdd0a, 0xeae1, 0x19c2, 0x1, 0x0);
        gbc.writeMem(0x5be7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x518e);
        EXPECT(gbc.pc(), 0x5be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 037E
        gbc.setState(0x4de1, 0x1d06, 0x1780, 0x746b, 0x7ca1, 0xe75f, 0x0, 0x1);
        gbc.writeMem(0x4de1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1d06);
        EXPECT(gbc.pc(), 0x4de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 037F
        gbc.setState(0x5378, 0xc5b3, 0xf140, 0x45be, 0x4081, 0x7a3e, 0x0, 0x0);
        gbc.writeMem(0x5378, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc5b3);
        EXPECT(gbc.pc(), 0x537a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0380
        gbc.setState(0x662a, 0xc010, 0xe260, 0x43d5, 0x7622, 0xdc3e, 0x0, 0x0);
        gbc.writeMem(0x662a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xc010);
        EXPECT(gbc.pc(), 0x662c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0381
        gbc.setState(0x3183, 0x28cd, 0xac80, 0xbab2, 0x96a5, 0x486a, 0x1, 0x1);
        gbc.writeMem(0x3183, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x28cd);
        EXPECT(gbc.pc(), 0x3185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0382
        gbc.setState(0xe289, 0x325c, 0x3190, 0xad29, 0x8dc9, 0x55b6, 0x1, 0x1);
        gbc.writeMem(0xe289, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x325c);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe289), 0xcb);
        EXPECT(gbc.readMem(0xe28a), 0x3c);
        // CB 3C 0383
        gbc.setState(0x33af, 0x8ef5, 0x20f0, 0xf3ef, 0x3b94, 0xecc, 0x0, 0x1);
        gbc.writeMem(0x33af, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8ef5);
        EXPECT(gbc.pc(), 0x33b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0384
        gbc.setState(0x782e, 0x7db6, 0xf80, 0x3871, 0x13df, 0xf00f, 0x1, 0x0);
        gbc.writeMem(0x782e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7db6);
        EXPECT(gbc.pc(), 0x7830);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0385
        gbc.setState(0x6023, 0xcb4e, 0x7f90, 0x6e4a, 0x6abf, 0x73f0, 0x1, 0x0);
        gbc.writeMem(0x6023, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcb4e);
        EXPECT(gbc.pc(), 0x6025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 0386
        gbc.setState(0x58c0, 0xfd69, 0x2380, 0x3aa0, 0xb81a, 0xbac4, 0x0, 0x0);
        gbc.writeMem(0x58c0, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xfd69);
        EXPECT(gbc.pc(), 0x58c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0387
        gbc.setState(0xb828, 0xa941, 0xf370, 0xaa49, 0x823c, 0xe823, 0x0, 0x1);
        gbc.writeMem(0xb828, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa941);
        EXPECT(gbc.pc(), 0xb82a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb828), 0xcb);
        EXPECT(gbc.readMem(0xb829), 0x3c);
        // CB 3C 0388
        gbc.setState(0x4c91, 0x8796, 0xb500, 0x846e, 0xb423, 0x5455, 0x0, 0x0);
        gbc.writeMem(0x4c91, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8796);
        EXPECT(gbc.pc(), 0x4c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0389
        gbc.setState(0x6b85, 0xafcc, 0x6f20, 0x9528, 0x3ec7, 0x5aea, 0x0, 0x1);
        gbc.writeMem(0x6b85, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xafcc);
        EXPECT(gbc.pc(), 0x6b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 038A
        gbc.setState(0xdc92, 0x2391, 0x4350, 0xcc64, 0xad1e, 0x109e, 0x1, 0x0);
        gbc.writeMem(0xdc92, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2391);
        EXPECT(gbc.pc(), 0xdc94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc92), 0xcb);
        EXPECT(gbc.readMem(0xdc93), 0x3c);
        // CB 3C 038B
        gbc.setState(0x1ff1, 0xacea, 0xb8f0, 0x44bb, 0x404, 0x3bfe, 0x1, 0x1);
        gbc.writeMem(0x1ff1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xacea);
        EXPECT(gbc.pc(), 0x1ff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 038C
        gbc.setState(0x528a, 0xfbee, 0x5ed0, 0xd015, 0xc94c, 0xbb13, 0x1, 0x1);
        gbc.writeMem(0x528a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xfbee);
        EXPECT(gbc.pc(), 0x528c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 038D
        gbc.setState(0xee56, 0x5c02, 0xba90, 0x9451, 0x65f8, 0x6e6b, 0x0, 0x1);
        gbc.writeMem(0xee56, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5c02);
        EXPECT(gbc.pc(), 0xee58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee56), 0xcb);
        EXPECT(gbc.readMem(0xee57), 0x3c);
        // CB 3C 038E
        gbc.setState(0xe120, 0x882f, 0x9010, 0x4c13, 0x5855, 0xd8df, 0x0, 0x0);
        gbc.writeMem(0xe120, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x882f);
        EXPECT(gbc.pc(), 0xe122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe120), 0xcb);
        EXPECT(gbc.readMem(0xe121), 0x3c);
        // CB 3C 038F
        gbc.setState(0x390c, 0x1197, 0x9a00, 0x4fb8, 0xb85, 0x6ea4, 0x0, 0x1);
        gbc.writeMem(0x390c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1197);
        EXPECT(gbc.pc(), 0x390e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0390
        gbc.setState(0xb4d1, 0x5d1f, 0xc0a0, 0xc619, 0x48ba, 0x199d, 0x1, 0x0);
        gbc.writeMem(0xb4d1, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5d1f);
        EXPECT(gbc.pc(), 0xb4d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d1), 0xcb);
        EXPECT(gbc.readMem(0xb4d2), 0x3c);
        // CB 3C 0391
        gbc.setState(0x9bff, 0x74d7, 0x6170, 0x37ad, 0x8b, 0x4c63, 0x0, 0x0);
        gbc.writeMem(0x9bff, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x74d7);
        EXPECT(gbc.pc(), 0x9c01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bff), 0xcb);
        EXPECT(gbc.readMem(0x9c00), 0x3c);
        // CB 3C 0392
        gbc.setState(0xe4f4, 0xef29, 0x22f0, 0xa301, 0x9278, 0x64e5, 0x1, 0x0);
        gbc.writeMem(0xe4f4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xef29);
        EXPECT(gbc.pc(), 0xe4f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4f4), 0xcb);
        EXPECT(gbc.readMem(0xe4f5), 0x3c);
        // CB 3C 0393
        gbc.setState(0xd8fc, 0xc338, 0x3820, 0xf35b, 0xbee3, 0x1958, 0x0, 0x1);
        gbc.writeMem(0xd8fc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc338);
        EXPECT(gbc.pc(), 0xd8fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8fc), 0xcb);
        EXPECT(gbc.readMem(0xd8fd), 0x3c);
        // CB 3C 0394
        gbc.setState(0x788e, 0x4ab5, 0x4160, 0xb8fe, 0x6df, 0x9cc8, 0x0, 0x1);
        gbc.writeMem(0x788e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4ab5);
        EXPECT(gbc.pc(), 0x7890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0395
        gbc.setState(0xcf90, 0xbb09, 0x3330, 0xeb84, 0xb140, 0x809a, 0x0, 0x0);
        gbc.writeMem(0xcf90, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbb09);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf90), 0xcb);
        EXPECT(gbc.readMem(0xcf91), 0x3c);
        // CB 3C 0396
        gbc.setState(0x98f4, 0x4858, 0x2e80, 0xb82b, 0xa88a, 0xd042, 0x1, 0x0);
        gbc.writeMem(0x98f4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4858);
        EXPECT(gbc.pc(), 0x98f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98f4), 0xcb);
        EXPECT(gbc.readMem(0x98f5), 0x3c);
        // CB 3C 0397
        gbc.setState(0x38bb, 0xf21f, 0xf310, 0x5e44, 0x3b0f, 0x2cc5, 0x1, 0x1);
        gbc.writeMem(0x38bb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xf21f);
        EXPECT(gbc.pc(), 0x38bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0398
        gbc.setState(0x5b5e, 0xb386, 0x9670, 0x2ea1, 0x8c72, 0x68dd, 0x0, 0x0);
        gbc.writeMem(0x5b5e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xb386);
        EXPECT(gbc.pc(), 0x5b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 0399
        gbc.setState(0x47dc, 0xcf4f, 0x32a0, 0xe3b7, 0xcc71, 0x348f, 0x0, 0x0);
        gbc.writeMem(0x47dc, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcf4f);
        EXPECT(gbc.pc(), 0x47de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 039A
        gbc.setState(0x1227, 0x4d25, 0x640, 0xcdd9, 0xed7e, 0xcabf, 0x0, 0x0);
        gbc.writeMem(0x1227, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4d25);
        EXPECT(gbc.pc(), 0x1229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 039B
        gbc.setState(0xcf37, 0x9f25, 0xcb80, 0x42b5, 0xe6dc, 0xadf, 0x0, 0x0);
        gbc.writeMem(0xcf37, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x9f25);
        EXPECT(gbc.pc(), 0xcf39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf37), 0xcb);
        EXPECT(gbc.readMem(0xcf38), 0x3c);
        // CB 3C 039C
        gbc.setState(0xdef4, 0x7a4b, 0xe780, 0x8f90, 0xa515, 0xc6a4, 0x0, 0x0);
        gbc.writeMem(0xdef4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7a4b);
        EXPECT(gbc.pc(), 0xdef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef4), 0xcb);
        EXPECT(gbc.readMem(0xdef5), 0x3c);
        // CB 3C 039D
        gbc.setState(0xa6fb, 0xce9e, 0x5cb0, 0x9b6e, 0x5983, 0x119b, 0x0, 0x1);
        gbc.writeMem(0xa6fb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xce9e);
        EXPECT(gbc.pc(), 0xa6fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6fb), 0xcb);
        EXPECT(gbc.readMem(0xa6fc), 0x3c);
        // CB 3C 039E
        gbc.setState(0x7a31, 0x4262, 0x9dc0, 0xe219, 0xc38e, 0xdc0d, 0x1, 0x1);
        gbc.writeMem(0x7a31, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4262);
        EXPECT(gbc.pc(), 0x7a33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 039F
        gbc.setState(0x57f, 0x26b4, 0xc780, 0x9bc8, 0x213, 0xdc2f, 0x0, 0x0);
        gbc.writeMem(0x57f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x26b4);
        EXPECT(gbc.pc(), 0x581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03A0
        gbc.setState(0x515d, 0xa05, 0x2b60, 0x93ac, 0x3cf2, 0x35cc, 0x0, 0x0);
        gbc.writeMem(0x515d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa05);
        EXPECT(gbc.pc(), 0x515f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03A1
        gbc.setState(0xdfc4, 0x9afb, 0xe700, 0x8da3, 0x4184, 0xc8e8, 0x0, 0x0);
        gbc.writeMem(0xdfc4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9afb);
        EXPECT(gbc.pc(), 0xdfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc4), 0xcb);
        EXPECT(gbc.readMem(0xdfc5), 0x3c);
        // CB 3C 03A2
        gbc.setState(0xe18a, 0x7ea0, 0xa30, 0xbb8d, 0xa668, 0xb7d9, 0x0, 0x1);
        gbc.writeMem(0xe18a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7ea0);
        EXPECT(gbc.pc(), 0xe18c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe18a), 0xcb);
        EXPECT(gbc.readMem(0xe18b), 0x3c);
        // CB 3C 03A3
        gbc.setState(0x651e, 0x701b, 0x5660, 0x8aac, 0x383b, 0xa377, 0x0, 0x0);
        gbc.writeMem(0x651e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x701b);
        EXPECT(gbc.pc(), 0x6520);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03A4
        gbc.setState(0x6dba, 0x8872, 0xf0e0, 0x2a2c, 0xae31, 0x7768, 0x1, 0x1);
        gbc.writeMem(0x6dba, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8872);
        EXPECT(gbc.pc(), 0x6dbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03A5
        gbc.setState(0x3216, 0xc877, 0xba40, 0x7152, 0xc4d7, 0x580c, 0x0, 0x0);
        gbc.writeMem(0x3216, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc877);
        EXPECT(gbc.pc(), 0x3218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03A6
        gbc.setState(0x16f6, 0x91f3, 0x4bd0, 0x7671, 0x83f6, 0x1c0d, 0x0, 0x0);
        gbc.writeMem(0x16f6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x91f3);
        EXPECT(gbc.pc(), 0x16f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03A7
        gbc.setState(0x7786, 0xb5b1, 0x73c0, 0xa48d, 0x3c38, 0x7773, 0x1, 0x1);
        gbc.writeMem(0x7786, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb5b1);
        EXPECT(gbc.pc(), 0x7788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03A8
        gbc.setState(0xdde, 0xe832, 0xc3c0, 0xdba6, 0xb3a7, 0x25e8, 0x0, 0x1);
        gbc.writeMem(0xdde, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe832);
        EXPECT(gbc.pc(), 0xde0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03A9
        gbc.setState(0xc9ea, 0xb0f1, 0xa7e0, 0xf5cf, 0xab56, 0xb242, 0x1, 0x1);
        gbc.writeMem(0xc9ea, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb0f1);
        EXPECT(gbc.pc(), 0xc9ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ea), 0xcb);
        EXPECT(gbc.readMem(0xc9eb), 0x3c);
        // CB 3C 03AA
        gbc.setState(0x4c7d, 0x31f6, 0x6ef0, 0xb310, 0x311a, 0x5986, 0x0, 0x0);
        gbc.writeMem(0x4c7d, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x31f6);
        EXPECT(gbc.pc(), 0x4c7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03AB
        gbc.setState(0x35ac, 0xd959, 0xa50, 0x8633, 0x3f30, 0xbebd, 0x1, 0x1);
        gbc.writeMem(0x35ac, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd959);
        EXPECT(gbc.pc(), 0x35ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03AD
        gbc.setState(0x3db6, 0xcf8f, 0x9f20, 0xe13a, 0xacc5, 0x5ba9, 0x0, 0x1);
        gbc.writeMem(0x3db6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xcf8f);
        EXPECT(gbc.pc(), 0x3db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03AF
        gbc.setState(0x319c, 0xabad, 0xdee0, 0x52d5, 0x80d6, 0x17ff, 0x1, 0x0);
        gbc.writeMem(0x319c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xabad);
        EXPECT(gbc.pc(), 0x319e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03B0
        gbc.setState(0x1945, 0x70af, 0x6d90, 0x7ffd, 0x9181, 0x8cda, 0x1, 0x0);
        gbc.writeMem(0x1945, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x70af);
        EXPECT(gbc.pc(), 0x1947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03B1
        gbc.setState(0x7cb6, 0x352d, 0x67b0, 0x7c0e, 0x21e2, 0x46fd, 0x0, 0x1);
        gbc.writeMem(0x7cb6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x352d);
        EXPECT(gbc.pc(), 0x7cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03B2
        gbc.setState(0x4524, 0xe4d, 0xad30, 0x76ad, 0x94df, 0x42bf, 0x1, 0x0);
        gbc.writeMem(0x4524, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xe4d);
        EXPECT(gbc.pc(), 0x4526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03B3
        gbc.setState(0xb255, 0x5b74, 0x9790, 0x230e, 0x7721, 0xb7ad, 0x0, 0x1);
        gbc.writeMem(0xb255, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5b74);
        EXPECT(gbc.pc(), 0xb257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb255), 0xcb);
        EXPECT(gbc.readMem(0xb256), 0x3c);
        // CB 3C 03B4
        gbc.setState(0x3d2e, 0x4ada, 0x55d0, 0x5371, 0x5034, 0x714f, 0x1, 0x0);
        gbc.writeMem(0x3d2e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4ada);
        EXPECT(gbc.pc(), 0x3d30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03B5
        gbc.setState(0x4ae8, 0x8b7f, 0xbea0, 0x8f13, 0x5b20, 0xcde2, 0x0, 0x0);
        gbc.writeMem(0x4ae8, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8b7f);
        EXPECT(gbc.pc(), 0x4aea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03B6
        gbc.setState(0xd99a, 0xd46a, 0x85f0, 0x7f81, 0xf8cf, 0x41b7, 0x1, 0x0);
        gbc.writeMem(0xd99a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd46a);
        EXPECT(gbc.pc(), 0xd99c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd99a), 0xcb);
        EXPECT(gbc.readMem(0xd99b), 0x3c);
        // CB 3C 03B7
        gbc.setState(0x3424, 0x970a, 0x76b0, 0x7ccc, 0xa270, 0x444c, 0x0, 0x1);
        gbc.writeMem(0x3424, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x970a);
        EXPECT(gbc.pc(), 0x3426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03B8
        gbc.setState(0xf27, 0xf054, 0x2e40, 0xec0, 0x3f5, 0x4910, 0x0, 0x1);
        gbc.writeMem(0xf27, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf054);
        EXPECT(gbc.pc(), 0xf29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03B9
        gbc.setState(0x8140, 0x58a1, 0x2010, 0x87d8, 0xd02a, 0x15cf, 0x1, 0x1);
        gbc.writeMem(0x8140, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x58a1);
        EXPECT(gbc.pc(), 0x8142);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8140), 0xcb);
        EXPECT(gbc.readMem(0x8141), 0x3c);
        // CB 3C 03BA
        gbc.setState(0xd025, 0x845b, 0x4520, 0xeadd, 0xfd9b, 0x29b3, 0x1, 0x1);
        gbc.writeMem(0xd025, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x845b);
        EXPECT(gbc.pc(), 0xd027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd025), 0xcb);
        EXPECT(gbc.readMem(0xd026), 0x3c);
        // CB 3C 03BB
        gbc.setState(0x1972, 0x4910, 0x3430, 0x3572, 0xb473, 0x3eae, 0x0, 0x0);
        gbc.writeMem(0x1972, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x4910);
        EXPECT(gbc.pc(), 0x1974);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03BC
        gbc.setState(0x1e49, 0xc338, 0x7750, 0x42d0, 0x5d78, 0x6ce0, 0x0, 0x1);
        gbc.writeMem(0x1e49, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xc338);
        EXPECT(gbc.pc(), 0x1e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03BD
        gbc.setState(0x3165, 0x3cff, 0x3e70, 0x4720, 0xa526, 0xb1da, 0x0, 0x1);
        gbc.writeMem(0x3165, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x3cff);
        EXPECT(gbc.pc(), 0x3167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03BE
        gbc.setState(0xd50, 0xae88, 0x1740, 0x9e11, 0x4e01, 0x8c0e, 0x1, 0x0);
        gbc.writeMem(0xd50, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xae88);
        EXPECT(gbc.pc(), 0xd52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03BF
        gbc.setState(0x301a, 0xcd86, 0x3ef0, 0x8c03, 0x5cb6, 0x9d92, 0x1, 0x1);
        gbc.writeMem(0x301a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcd86);
        EXPECT(gbc.pc(), 0x301c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03C0
        gbc.setState(0x4306, 0x3a80, 0x8230, 0xad68, 0x961e, 0xa1b7, 0x1, 0x1);
        gbc.writeMem(0x4306, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3a80);
        EXPECT(gbc.pc(), 0x4308);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03C1
        gbc.setState(0x27da, 0x28db, 0x6c70, 0x7183, 0xbaaa, 0xa8d4, 0x0, 0x0);
        gbc.writeMem(0x27da, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x28db);
        EXPECT(gbc.pc(), 0x27dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03C2
        gbc.setState(0x7773, 0x819, 0xa460, 0xa721, 0x1cf2, 0x1d7c, 0x0, 0x1);
        gbc.writeMem(0x7773, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x819);
        EXPECT(gbc.pc(), 0x7775);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03C3
        gbc.setState(0x9df, 0xa7a4, 0x7af0, 0xcb93, 0x8ed2, 0xcd3f, 0x1, 0x1);
        gbc.writeMem(0x9df, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa7a4);
        EXPECT(gbc.pc(), 0x9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03C4
        gbc.setState(0x74f9, 0x75a5, 0x5ec0, 0xcfa5, 0x81a7, 0xc09b, 0x0, 0x0);
        gbc.writeMem(0x74f9, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x75a5);
        EXPECT(gbc.pc(), 0x74fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03C5
        gbc.setState(0x2d74, 0x2524, 0x200, 0x102e, 0xc0d1, 0x48b9, 0x0, 0x1);
        gbc.writeMem(0x2d74, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x2524);
        EXPECT(gbc.pc(), 0x2d76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03C7
        gbc.setState(0x1ef6, 0x6d88, 0x6840, 0xa511, 0xb829, 0xc7b, 0x0, 0x1);
        gbc.writeMem(0x1ef6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6d88);
        EXPECT(gbc.pc(), 0x1ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03C8
        gbc.setState(0x1633, 0x50f, 0xee10, 0xd013, 0xb1b5, 0x4366, 0x1, 0x0);
        gbc.writeMem(0x1633, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x50f);
        EXPECT(gbc.pc(), 0x1635);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03C9
        gbc.setState(0x56bd, 0xfee6, 0x5a80, 0xe6fa, 0xbc1a, 0x7697, 0x1, 0x0);
        gbc.writeMem(0x56bd, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfee6);
        EXPECT(gbc.pc(), 0x56bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03CA
        gbc.setState(0x57e7, 0xece5, 0x3c00, 0xec8e, 0x8171, 0x9fd, 0x1, 0x0);
        gbc.writeMem(0x57e7, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xece5);
        EXPECT(gbc.pc(), 0x57e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03CB
        gbc.setState(0x6133, 0xd7c, 0x1000, 0xb6aa, 0xf353, 0x6c27, 0x1, 0x1);
        gbc.writeMem(0x6133, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd7c);
        EXPECT(gbc.pc(), 0x6135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03CC
        gbc.setState(0x4831, 0x61ac, 0x6c00, 0x70cd, 0x7217, 0xb02, 0x1, 0x1);
        gbc.writeMem(0x4831, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x61ac);
        EXPECT(gbc.pc(), 0x4833);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03CD
        gbc.setState(0xc36e, 0x8b71, 0xfc60, 0xedf0, 0xab8, 0xee26, 0x0, 0x1);
        gbc.writeMem(0xc36e, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8b71);
        EXPECT(gbc.pc(), 0xc370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc36e), 0xcb);
        EXPECT(gbc.readMem(0xc36f), 0x3c);
        // CB 3C 03CE
        gbc.setState(0xc94f, 0xa756, 0x8540, 0x9b61, 0x53da, 0x886a, 0x1, 0x0);
        gbc.writeMem(0xc94f, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa756);
        EXPECT(gbc.pc(), 0xc951);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94f), 0xcb);
        EXPECT(gbc.readMem(0xc950), 0x3c);
        // CB 3C 03CF
        gbc.setState(0x3c8c, 0x4383, 0x76e0, 0xc620, 0xaa57, 0xa248, 0x0, 0x1);
        gbc.writeMem(0x3c8c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4383);
        EXPECT(gbc.pc(), 0x3c8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03D0
        gbc.setState(0xc424, 0x1e24, 0x4630, 0xd2a9, 0x76ee, 0x9e66, 0x0, 0x1);
        gbc.writeMem(0xc424, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1e24);
        EXPECT(gbc.pc(), 0xc426);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc424), 0xcb);
        EXPECT(gbc.readMem(0xc425), 0x3c);
        // CB 3C 03D1
        gbc.setState(0x524, 0xc25e, 0x18d0, 0x30a3, 0x473e, 0xe7b1, 0x1, 0x0);
        gbc.writeMem(0x524, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc25e);
        EXPECT(gbc.pc(), 0x526);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03D2
        gbc.setState(0x900a, 0xa143, 0x6e60, 0xb447, 0x19a3, 0xfefb, 0x1, 0x0);
        gbc.writeMem(0x900a, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa143);
        EXPECT(gbc.pc(), 0x900c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900a), 0xcb);
        EXPECT(gbc.readMem(0x900b), 0x3c);
        // CB 3C 03D3
        gbc.setState(0xe921, 0xfbe9, 0xe340, 0x31ec, 0x8d6a, 0x9ad1, 0x1, 0x0);
        gbc.writeMem(0xe921, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xfbe9);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe921), 0xcb);
        EXPECT(gbc.readMem(0xe922), 0x3c);
        // CB 3C 03D4
        gbc.setState(0x1b92, 0xa234, 0x5530, 0x4fea, 0xcc9b, 0xab1, 0x1, 0x0);
        gbc.writeMem(0x1b92, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa234);
        EXPECT(gbc.pc(), 0x1b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03D5
        gbc.setState(0xefeb, 0x1b24, 0x8bb0, 0xd4a2, 0xaaf7, 0xd23b, 0x0, 0x1);
        gbc.writeMem(0xefeb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1b24);
        EXPECT(gbc.pc(), 0xefed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefeb), 0xcb);
        EXPECT(gbc.readMem(0xefec), 0x3c);
        // CB 3C 03D6
        gbc.setState(0xabcb, 0xb8d4, 0xe3e0, 0x872, 0xfc6c, 0xa375, 0x1, 0x1);
        gbc.writeMem(0xabcb, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb8d4);
        EXPECT(gbc.pc(), 0xabcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabcb), 0xcb);
        EXPECT(gbc.readMem(0xabcc), 0x3c);
        // CB 3C 03D8
        gbc.setState(0x4f40, 0x4ecc, 0x6c10, 0x9c28, 0xb3e6, 0xd508, 0x0, 0x0);
        gbc.writeMem(0x4f40, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x4ecc);
        EXPECT(gbc.pc(), 0x4f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03D9
        gbc.setState(0xd438, 0xb6e6, 0x3e60, 0xd674, 0x6e4, 0x2bf2, 0x0, 0x0);
        gbc.writeMem(0xd438, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb6e6);
        EXPECT(gbc.pc(), 0xd43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd438), 0xcb);
        EXPECT(gbc.readMem(0xd439), 0x3c);
        // CB 3C 03DA
        gbc.setState(0xbc0c, 0xa6ef, 0x6100, 0xd843, 0xca5a, 0xd82e, 0x0, 0x1);
        gbc.writeMem(0xbc0c, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa6ef);
        EXPECT(gbc.pc(), 0xbc0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0c), 0xcb);
        EXPECT(gbc.readMem(0xbc0d), 0x3c);
        // CB 3C 03DB
        gbc.setState(0x5d35, 0x20ef, 0xa5f0, 0x4aa7, 0xb3a0, 0x2365, 0x1, 0x1);
        gbc.writeMem(0x5d35, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x20ef);
        EXPECT(gbc.pc(), 0x5d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03DC
        gbc.setState(0x101b, 0x1170, 0x8bd0, 0xd2b0, 0xbb61, 0x671c, 0x0, 0x0);
        gbc.writeMem(0x101b, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1170);
        EXPECT(gbc.pc(), 0x101d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03DD
        gbc.setState(0x85f6, 0xaafd, 0x1fd0, 0xc670, 0xc743, 0x36e0, 0x1, 0x0);
        gbc.writeMem(0x85f6, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xaafd);
        EXPECT(gbc.pc(), 0x85f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f6), 0xcb);
        EXPECT(gbc.readMem(0x85f7), 0x3c);
        // CB 3C 03DE
        gbc.setState(0x9fc4, 0xc65e, 0x4af0, 0xe667, 0xd49b, 0x5efd, 0x0, 0x0);
        gbc.writeMem(0x9fc4, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc65e);
        EXPECT(gbc.pc(), 0x9fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fc4), 0xcb);
        EXPECT(gbc.readMem(0x9fc5), 0x3c);
        // CB 3C 03DF
        gbc.setState(0x4d63, 0xd7b, 0xf170, 0xc13c, 0xc9dc, 0xaab9, 0x0, 0x0);
        gbc.writeMem(0x4d63, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd7b);
        EXPECT(gbc.pc(), 0x4d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03E0
        gbc.setState(0xc7df, 0x9d9d, 0x8ae0, 0x701b, 0xfcfc, 0xc24b, 0x0, 0x0);
        gbc.writeMem(0xc7df, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9d9d);
        EXPECT(gbc.pc(), 0xc7e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7df), 0xcb);
        EXPECT(gbc.readMem(0xc7e0), 0x3c);
        // CB 3C 03E1
        gbc.setState(0x3cb3, 0x449a, 0x1cb0, 0x7078, 0x52c2, 0xed88, 0x0, 0x0);
        gbc.writeMem(0x3cb3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x449a);
        EXPECT(gbc.pc(), 0x3cb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03E2
        gbc.setState(0xc623, 0x8bb4, 0x1d20, 0x6352, 0x9525, 0x1466, 0x1, 0x0);
        gbc.writeMem(0xc623, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x8bb4);
        EXPECT(gbc.pc(), 0xc625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc623), 0xcb);
        EXPECT(gbc.readMem(0xc624), 0x3c);
        // CB 3C 03E3
        gbc.setState(0x20d3, 0x4be5, 0xe930, 0x80dc, 0x1908, 0xc60, 0x1, 0x1);
        gbc.writeMem(0x20d3, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4be5);
        EXPECT(gbc.pc(), 0x20d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03E4
        gbc.setState(0x1872, 0x101a, 0x8be0, 0xf33c, 0x893a, 0x8390, 0x1, 0x0);
        gbc.writeMem(0x1872, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x101a);
        EXPECT(gbc.pc(), 0x1874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03E5
        gbc.setState(0x6f54, 0x7f35, 0x9d10, 0xc6f1, 0xdc35, 0x5e2e, 0x1, 0x1);
        gbc.writeMem(0x6f54, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7f35);
        EXPECT(gbc.pc(), 0x6f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB 3C 03E6
        gbc.setState(0x7cff, 0x736a, 0x89e0, 0x9a7f, 0x66f1, 0xf98d, 0x0, 0x1);
        gbc.writeMem(0x7cff, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x736a);
        EXPECT(gbc.pc(), 0x7d01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB 3C 03E7
        gbc.setState(0xacec, 0x135c, 0x8bc0, 0x51a9, 0x8303, 0xb58f, 0x0, 0x1);
        gbc.writeMem(0xacec, { 0xcb, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x135c);
        EXPECT(gbc.pc(), 0xacee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacec), 0xcb);
        EXPECT(gbc.readMem(0xaced), 0x3c);
    }
}
#endif
