    TEST(gbcemu, opcode_4f) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 4F 0000
        gbc.setState(0xb7e5, 0xff13, 0x3a20, 0xd385, 0x2b47, 0x9fa, 0x0, 0x0);
        gbc.writeMem(0xb7e5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xff13);
        EXPECT(gbc.pc(), 0xb7e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e5), 0x4f);
        // 4F 0001
        gbc.setState(0x73db, 0x41ac, 0xb0d0, 0x28bd, 0x3c11, 0x90c9, 0x0, 0x1);
        gbc.writeMem(0x73db, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x41ac);
        EXPECT(gbc.pc(), 0x73dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0002
        gbc.setState(0xe817, 0xf277, 0x2090, 0x5271, 0x88ec, 0x9a02, 0x0, 0x0);
        gbc.writeMem(0xe817, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf277);
        EXPECT(gbc.pc(), 0xe818);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe817), 0x4f);
        // 4F 0003
        gbc.setState(0x70c5, 0xb72, 0xbe40, 0x390f, 0x8fc0, 0xdcd8, 0x0, 0x0);
        gbc.writeMem(0x70c5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb72);
        EXPECT(gbc.pc(), 0x70c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0004
        gbc.setState(0x790d, 0xe9ca, 0x7d70, 0xc0ed, 0xd284, 0x4425, 0x0, 0x0);
        gbc.writeMem(0x790d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe9ca);
        EXPECT(gbc.pc(), 0x790e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0005
        gbc.setState(0x37e3, 0xd25c, 0xcfc0, 0x4d58, 0x34b5, 0xad8b, 0x0, 0x0);
        gbc.writeMem(0x37e3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xd25c);
        EXPECT(gbc.pc(), 0x37e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0006
        gbc.setState(0x1120, 0x64e8, 0x6cd0, 0x932b, 0xe4d8, 0xe96c, 0x1, 0x1);
        gbc.writeMem(0x1120, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x64e8);
        EXPECT(gbc.pc(), 0x1121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0007
        gbc.setState(0x429b, 0xabc1, 0x9080, 0xae86, 0xbe9c, 0xa9d9, 0x1, 0x0);
        gbc.writeMem(0x429b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xabc1);
        EXPECT(gbc.pc(), 0x429c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0008
        gbc.setState(0x4c06, 0xb6ba, 0xbca0, 0xa11d, 0xa371, 0x2ba9, 0x1, 0x1);
        gbc.writeMem(0x4c06, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xb6ba);
        EXPECT(gbc.pc(), 0x4c07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0009
        gbc.setState(0x71c3, 0xbdf7, 0x3230, 0x9835, 0x412d, 0x8111, 0x1, 0x0);
        gbc.writeMem(0x71c3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbdf7);
        EXPECT(gbc.pc(), 0x71c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 000A
        gbc.setState(0xb9d2, 0xb873, 0x77f0, 0x7ad9, 0xcb2, 0x8e33, 0x0, 0x0);
        gbc.writeMem(0xb9d2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb873);
        EXPECT(gbc.pc(), 0xb9d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9d2), 0x4f);
        // 4F 000B
        gbc.setState(0x3473, 0xbb64, 0x790, 0x6977, 0x4158, 0x6fef, 0x0, 0x0);
        gbc.writeMem(0x3473, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbb64);
        EXPECT(gbc.pc(), 0x3474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 000C
        gbc.setState(0x9b16, 0x12ca, 0x14e0, 0x8baf, 0x74aa, 0x270a, 0x1, 0x0);
        gbc.writeMem(0x9b16, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x12ca);
        EXPECT(gbc.pc(), 0x9b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b16), 0x4f);
        // 4F 000D
        gbc.setState(0x4dff, 0x69bd, 0x8600, 0x9d4c, 0xb016, 0x118a, 0x1, 0x0);
        gbc.writeMem(0x4dff, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x69bd);
        EXPECT(gbc.pc(), 0x4e00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 000E
        gbc.setState(0x8191, 0x69f6, 0x1f90, 0x7166, 0x4292, 0xb0d8, 0x1, 0x1);
        gbc.writeMem(0x8191, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x69f6);
        EXPECT(gbc.pc(), 0x8192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8191), 0x4f);
        // 4F 000F
        gbc.setState(0x85ff, 0x9798, 0xa800, 0xf445, 0x3c8e, 0x1f66, 0x0, 0x1);
        gbc.writeMem(0x85ff, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x9798);
        EXPECT(gbc.pc(), 0x8600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ff), 0x4f);
        // 4F 0010
        gbc.setState(0x90e8, 0xa8b9, 0x6c30, 0xda1f, 0x9eb, 0xa55b, 0x1, 0x1);
        gbc.writeMem(0x90e8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa8b9);
        EXPECT(gbc.pc(), 0x90e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90e8), 0x4f);
        // 4F 0011
        gbc.setState(0x6ee8, 0xe347, 0x14e0, 0xd3dd, 0xf672, 0xc38, 0x1, 0x1);
        gbc.writeMem(0x6ee8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe347);
        EXPECT(gbc.pc(), 0x6ee9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0012
        gbc.setState(0x7b0d, 0xfe9e, 0xfd00, 0x670b, 0xd92a, 0x1948, 0x0, 0x1);
        gbc.writeMem(0x7b0d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfe9e);
        EXPECT(gbc.pc(), 0x7b0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0013
        gbc.setState(0x2c18, 0x8518, 0x3fe0, 0xd608, 0x828b, 0xc7e0, 0x1, 0x1);
        gbc.writeMem(0x2c18, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8518);
        EXPECT(gbc.pc(), 0x2c19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0014
        gbc.setState(0xb87f, 0x71ae, 0x8140, 0x3bad, 0x2ac, 0x8af5, 0x1, 0x1);
        gbc.writeMem(0xb87f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x71ae);
        EXPECT(gbc.pc(), 0xb880);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb87f), 0x4f);
        // 4F 0015
        gbc.setState(0x3c24, 0x725d, 0x4b70, 0x1e5e, 0xef06, 0x8e32, 0x1, 0x0);
        gbc.writeMem(0x3c24, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x725d);
        EXPECT(gbc.pc(), 0x3c25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0016
        gbc.setState(0xb84a, 0xdeaa, 0xf190, 0x7fee, 0xe412, 0xfff5, 0x1, 0x1);
        gbc.writeMem(0xb84a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdeaa);
        EXPECT(gbc.pc(), 0xb84b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb84a), 0x4f);
        // 4F 0017
        gbc.setState(0x4933, 0xbb1d, 0x8800, 0x6313, 0x1e7c, 0x4c5f, 0x0, 0x1);
        gbc.writeMem(0x4933, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbb1d);
        EXPECT(gbc.pc(), 0x4934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0018
        gbc.setState(0xee15, 0x2021, 0x9a60, 0xe00c, 0x5e38, 0xc516, 0x0, 0x1);
        gbc.writeMem(0xee15, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2021);
        EXPECT(gbc.pc(), 0xee16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee15), 0x4f);
        // 4F 0019
        gbc.setState(0x5e7b, 0xdfa2, 0xf770, 0xc68c, 0xe62f, 0xbdff, 0x0, 0x0);
        gbc.writeMem(0x5e7b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdfa2);
        EXPECT(gbc.pc(), 0x5e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 001A
        gbc.setState(0x79f, 0x55f7, 0x10f0, 0x252f, 0xc814, 0x65ac, 0x0, 0x0);
        gbc.writeMem(0x79f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x55f7);
        EXPECT(gbc.pc(), 0x7a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 001C
        gbc.setState(0xe9, 0x1208, 0xa9b0, 0xed97, 0x192d, 0xc32e, 0x0, 0x1);
        gbc.writeMem(0xe9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1208);
        EXPECT(gbc.pc(), 0xea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 001D
        gbc.setState(0x3972, 0x421d, 0xf780, 0xfc8f, 0x72b9, 0xb680, 0x1, 0x0);
        gbc.writeMem(0x3972, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x421d);
        EXPECT(gbc.pc(), 0x3973);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 001E
        gbc.setState(0x6682, 0xb44, 0x68a0, 0x8081, 0x5727, 0x516c, 0x0, 0x0);
        gbc.writeMem(0x6682, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb44);
        EXPECT(gbc.pc(), 0x6683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 001F
        gbc.setState(0xb5c7, 0x16d1, 0xe160, 0xd7fc, 0x6e0a, 0x9abe, 0x0, 0x1);
        gbc.writeMem(0xb5c7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x16d1);
        EXPECT(gbc.pc(), 0xb5c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c7), 0x4f);
        // 4F 0020
        gbc.setState(0x8eab, 0x978c, 0xc830, 0x849b, 0x9714, 0xc0b5, 0x1, 0x0);
        gbc.writeMem(0x8eab, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x978c);
        EXPECT(gbc.pc(), 0x8eac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eab), 0x4f);
        // 4F 0021
        gbc.setState(0x2f6e, 0x3056, 0x4430, 0xcf12, 0xefa0, 0xb93c, 0x0, 0x1);
        gbc.writeMem(0x2f6e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x3056);
        EXPECT(gbc.pc(), 0x2f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0022
        gbc.setState(0x591f, 0x9164, 0x5060, 0x2c34, 0x788c, 0x7ff8, 0x0, 0x1);
        gbc.writeMem(0x591f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9164);
        EXPECT(gbc.pc(), 0x5920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0023
        gbc.setState(0x3328, 0xef37, 0x27a0, 0x762c, 0x558f, 0x6d41, 0x1, 0x0);
        gbc.writeMem(0x3328, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xef37);
        EXPECT(gbc.pc(), 0x3329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0024
        gbc.setState(0xb9b7, 0xac7c, 0xd810, 0xd137, 0x841b, 0x8fff, 0x0, 0x1);
        gbc.writeMem(0xb9b7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xac7c);
        EXPECT(gbc.pc(), 0xb9b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b7), 0x4f);
        // 4F 0025
        gbc.setState(0x1c0e, 0x5973, 0xf870, 0x9dda, 0x6390, 0x110d, 0x0, 0x1);
        gbc.writeMem(0x1c0e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5973);
        EXPECT(gbc.pc(), 0x1c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0026
        gbc.setState(0x58aa, 0x2a44, 0x22b0, 0xa28, 0x80a, 0x9eb7, 0x1, 0x1);
        gbc.writeMem(0x58aa, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2a44);
        EXPECT(gbc.pc(), 0x58ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0027
        gbc.setState(0xdd6e, 0xdc4, 0xc460, 0x726a, 0x49c2, 0xd8af, 0x1, 0x1);
        gbc.writeMem(0xdd6e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdc4);
        EXPECT(gbc.pc(), 0xdd6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6e), 0x4f);
        // 4F 0028
        gbc.setState(0x831, 0xfc46, 0xa4a0, 0x695f, 0x469a, 0x83a9, 0x1, 0x0);
        gbc.writeMem(0x831, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfc46);
        EXPECT(gbc.pc(), 0x832);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0029
        gbc.setState(0x3190, 0xdccc, 0x9280, 0xae4a, 0x4f93, 0x23af, 0x0, 0x1);
        gbc.writeMem(0x3190, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xdccc);
        EXPECT(gbc.pc(), 0x3191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 002A
        gbc.setState(0x486e, 0x6c3c, 0xb3e0, 0x68ab, 0xf010, 0x2f21, 0x1, 0x1);
        gbc.writeMem(0x486e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6c3c);
        EXPECT(gbc.pc(), 0x486f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 002B
        gbc.setState(0x7299, 0xfb58, 0xf400, 0xa4c, 0x2aaa, 0x27df, 0x1, 0x1);
        gbc.writeMem(0x7299, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfb58);
        EXPECT(gbc.pc(), 0x729a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 002D
        gbc.setState(0x1537, 0xadb0, 0x6cf0, 0x513b, 0x6428, 0x13b6, 0x0, 0x0);
        gbc.writeMem(0x1537, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xadb0);
        EXPECT(gbc.pc(), 0x1538);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 002F
        gbc.setState(0xc551, 0x16dd, 0xd3e0, 0xffd8, 0x8ac, 0x281d, 0x0, 0x1);
        gbc.writeMem(0xc551, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x16dd);
        EXPECT(gbc.pc(), 0xc552);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc551), 0x4f);
        // 4F 0030
        gbc.setState(0x7b85, 0x2590, 0x1210, 0xeffc, 0x98f7, 0x143d, 0x0, 0x1);
        gbc.writeMem(0x7b85, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2590);
        EXPECT(gbc.pc(), 0x7b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0031
        gbc.setState(0x1df2, 0x82e2, 0xf1a0, 0x9a20, 0xb898, 0x53a, 0x1, 0x0);
        gbc.writeMem(0x1df2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x82e2);
        EXPECT(gbc.pc(), 0x1df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0032
        gbc.setState(0x7eed, 0xb590, 0x9390, 0xf41c, 0xa75, 0xee7a, 0x0, 0x1);
        gbc.writeMem(0x7eed, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xb590);
        EXPECT(gbc.pc(), 0x7eee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0033
        gbc.setState(0x8678, 0xad3e, 0xf160, 0x956b, 0xa9b9, 0xe583, 0x1, 0x0);
        gbc.writeMem(0x8678, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xad3e);
        EXPECT(gbc.pc(), 0x8679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8678), 0x4f);
        // 4F 0034
        gbc.setState(0xf5b, 0x8e58, 0xdb20, 0xd39e, 0xb520, 0x76a1, 0x1, 0x0);
        gbc.writeMem(0xf5b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8e58);
        EXPECT(gbc.pc(), 0xf5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0035
        gbc.setState(0xecee, 0x2a8b, 0x5080, 0x256f, 0xdf40, 0xdfca, 0x1, 0x1);
        gbc.writeMem(0xecee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2a8b);
        EXPECT(gbc.pc(), 0xecef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecee), 0x4f);
        // 4F 0036
        gbc.setState(0xbaa7, 0xc460, 0x6c90, 0xf432, 0xad0, 0x4371, 0x1, 0x0);
        gbc.writeMem(0xbaa7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xc460);
        EXPECT(gbc.pc(), 0xbaa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaa7), 0x4f);
        // 4F 0037
        gbc.setState(0xa830, 0x3129, 0x90b0, 0x6b26, 0x2ac2, 0xa2a1, 0x0, 0x1);
        gbc.writeMem(0xa830, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3129);
        EXPECT(gbc.pc(), 0xa831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa830), 0x4f);
        // 4F 0038
        gbc.setState(0x894b, 0xaf4e, 0x6360, 0x87ca, 0x21c7, 0x840d, 0x1, 0x0);
        gbc.writeMem(0x894b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xaf4e);
        EXPECT(gbc.pc(), 0x894c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894b), 0x4f);
        // 4F 0039
        gbc.setState(0x8d56, 0x2224, 0x7f70, 0x194a, 0xac01, 0x156d, 0x1, 0x0);
        gbc.writeMem(0x8d56, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x2224);
        EXPECT(gbc.pc(), 0x8d57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d56), 0x4f);
        // 4F 003A
        gbc.setState(0x7962, 0xfcd3, 0x5750, 0xdde0, 0x4c88, 0x4360, 0x1, 0x0);
        gbc.writeMem(0x7962, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfcd3);
        EXPECT(gbc.pc(), 0x7963);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 003C
        gbc.setState(0x7a46, 0x1fb, 0x85e0, 0x277f, 0x7bc1, 0x3c9a, 0x1, 0x1);
        gbc.writeMem(0x7a46, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0x7a47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 003D
        gbc.setState(0xee37, 0x2cb9, 0x6410, 0x1a6f, 0xb31e, 0xf697, 0x1, 0x1);
        gbc.writeMem(0xee37, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x2cb9);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee37), 0x4f);
        // 4F 003E
        gbc.setState(0xb085, 0x86c9, 0xb540, 0x5a53, 0x93b4, 0x9a87, 0x0, 0x1);
        gbc.writeMem(0xb085, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x86c9);
        EXPECT(gbc.pc(), 0xb086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb085), 0x4f);
        // 4F 003F
        gbc.setState(0x3da0, 0x81b8, 0x7d0, 0x67f9, 0x3f25, 0x4b7c, 0x1, 0x0);
        gbc.writeMem(0x3da0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x81b8);
        EXPECT(gbc.pc(), 0x3da1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0040
        gbc.setState(0x9f1, 0x33a4, 0xe820, 0x9a78, 0x9df3, 0xb806, 0x0, 0x1);
        gbc.writeMem(0x9f1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x33a4);
        EXPECT(gbc.pc(), 0x9f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0041
        gbc.setState(0x5f79, 0x24e7, 0x8320, 0xf7bc, 0x2023, 0xaea8, 0x1, 0x0);
        gbc.writeMem(0x5f79, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x24e7);
        EXPECT(gbc.pc(), 0x5f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0042
        gbc.setState(0x7c0d, 0x9ded, 0x6000, 0x2b3b, 0x5e5a, 0xf426, 0x0, 0x1);
        gbc.writeMem(0x7c0d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x9ded);
        EXPECT(gbc.pc(), 0x7c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0043
        gbc.setState(0xd71, 0x5920, 0xad30, 0x9d87, 0x2c39, 0xd515, 0x1, 0x0);
        gbc.writeMem(0xd71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x5920);
        EXPECT(gbc.pc(), 0xd72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0044
        gbc.setState(0x7f25, 0x640c, 0x1050, 0xb3b5, 0xe697, 0xb056, 0x1, 0x1);
        gbc.writeMem(0x7f25, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x640c);
        EXPECT(gbc.pc(), 0x7f26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0045
        gbc.setState(0x1716, 0x6cd1, 0x7b00, 0xb5ca, 0x7538, 0x5770, 0x1, 0x0);
        gbc.writeMem(0x1716, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6cd1);
        EXPECT(gbc.pc(), 0x1717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0046
        gbc.setState(0xd4dd, 0xd301, 0x4250, 0xed1b, 0x20e0, 0xf4d3, 0x1, 0x1);
        gbc.writeMem(0xd4dd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd301);
        EXPECT(gbc.pc(), 0xd4de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4dd), 0x4f);
        // 4F 0047
        gbc.setState(0x120d, 0x202f, 0xca10, 0x5ad6, 0x63bc, 0xdb34, 0x1, 0x1);
        gbc.writeMem(0x120d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x202f);
        EXPECT(gbc.pc(), 0x120e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0048
        gbc.setState(0x6aa5, 0x4750, 0xe410, 0xce4c, 0xd0d9, 0xbde6, 0x1, 0x1);
        gbc.writeMem(0x6aa5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4750);
        EXPECT(gbc.pc(), 0x6aa6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0049
        gbc.setState(0xac45, 0xd091, 0xaec0, 0x6302, 0xba5f, 0x5018, 0x0, 0x1);
        gbc.writeMem(0xac45, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd091);
        EXPECT(gbc.pc(), 0xac46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac45), 0x4f);
        // 4F 004A
        gbc.setState(0xb6dd, 0x981f, 0x1620, 0xe97d, 0xf320, 0x3ea9, 0x0, 0x1);
        gbc.writeMem(0xb6dd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x981f);
        EXPECT(gbc.pc(), 0xb6de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6dd), 0x4f);
        // 4F 004B
        gbc.setState(0x94b1, 0xbc8c, 0x510, 0x4857, 0x8899, 0xb102, 0x1, 0x0);
        gbc.writeMem(0x94b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xbc8c);
        EXPECT(gbc.pc(), 0x94b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94b1), 0x4f);
        // 4F 004D
        gbc.setState(0xe54c, 0x6dbd, 0xae00, 0x49f1, 0x6468, 0x586b, 0x0, 0x1);
        gbc.writeMem(0xe54c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x6dbd);
        EXPECT(gbc.pc(), 0xe54d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe54c), 0x4f);
        // 4F 004E
        gbc.setState(0x5df2, 0xa929, 0x4820, 0x6dc5, 0xb31a, 0x7435, 0x1, 0x0);
        gbc.writeMem(0x5df2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa929);
        EXPECT(gbc.pc(), 0x5df3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 004F
        gbc.setState(0xa96e, 0x8510, 0xb5a0, 0x1ba0, 0x9256, 0x954b, 0x1, 0x0);
        gbc.writeMem(0xa96e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8510);
        EXPECT(gbc.pc(), 0xa96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96e), 0x4f);
        // 4F 0050
        gbc.setState(0x910a, 0xe216, 0x99f0, 0xce1, 0xf6a6, 0x67a, 0x1, 0x1);
        gbc.writeMem(0x910a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe216);
        EXPECT(gbc.pc(), 0x910b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x910a), 0x4f);
        // 4F 0051
        gbc.setState(0x4bb9, 0x96b4, 0xb080, 0xd9bb, 0x5d0e, 0x1b00, 0x1, 0x1);
        gbc.writeMem(0x4bb9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0x4bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0052
        gbc.setState(0xeb7f, 0xa3d3, 0x8250, 0xbcd7, 0xdeb, 0x9ee2, 0x1, 0x0);
        gbc.writeMem(0xeb7f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa3d3);
        EXPECT(gbc.pc(), 0xeb80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb7f), 0x4f);
        // 4F 0053
        gbc.setState(0x6ed, 0x1dec, 0x7220, 0x1650, 0x1c5c, 0xec51, 0x1, 0x0);
        gbc.writeMem(0x6ed, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1dec);
        EXPECT(gbc.pc(), 0x6ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0054
        gbc.setState(0xe492, 0xae14, 0xb9a0, 0x470e, 0xcb87, 0xf20, 0x0, 0x0);
        gbc.writeMem(0xe492, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xae14);
        EXPECT(gbc.pc(), 0xe493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe492), 0x4f);
        // 4F 0055
        gbc.setState(0x9d14, 0xdbac, 0xe0a0, 0xb085, 0x9734, 0xcf3, 0x0, 0x1);
        gbc.writeMem(0x9d14, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xdbac);
        EXPECT(gbc.pc(), 0x9d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d14), 0x4f);
        // 4F 0056
        gbc.setState(0xa9db, 0xf497, 0x99e0, 0x491e, 0x6bda, 0x46ea, 0x1, 0x1);
        gbc.writeMem(0xa9db, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf497);
        EXPECT(gbc.pc(), 0xa9dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9db), 0x4f);
        // 4F 0057
        gbc.setState(0x32ef, 0xd4e9, 0xd80, 0x4592, 0x2777, 0x8f93, 0x0, 0x0);
        gbc.writeMem(0x32ef, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd4e9);
        EXPECT(gbc.pc(), 0x32f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0058
        gbc.setState(0x3de6, 0x3a58, 0xb340, 0x3abb, 0x76a9, 0xe5eb, 0x1, 0x0);
        gbc.writeMem(0x3de6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x3a58);
        EXPECT(gbc.pc(), 0x3de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0059
        gbc.setState(0xb5bb, 0xc826, 0xe890, 0xd8e4, 0x1a96, 0x7ecb, 0x1, 0x0);
        gbc.writeMem(0xb5bb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc826);
        EXPECT(gbc.pc(), 0xb5bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5bb), 0x4f);
        // 4F 005A
        gbc.setState(0x2005, 0xdbdc, 0x9510, 0x7e8d, 0xfb74, 0xbb76, 0x1, 0x0);
        gbc.writeMem(0x2005, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xdbdc);
        EXPECT(gbc.pc(), 0x2006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 005B
        gbc.setState(0x4692, 0x6cd7, 0xa960, 0x111c, 0x6236, 0x6dd4, 0x0, 0x1);
        gbc.writeMem(0x4692, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6cd7);
        EXPECT(gbc.pc(), 0x4693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 005C
        gbc.setState(0xb2f5, 0xd6be, 0xaf30, 0xc9f3, 0xf321, 0xfbc7, 0x1, 0x0);
        gbc.writeMem(0xb2f5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd6be);
        EXPECT(gbc.pc(), 0xb2f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2f5), 0x4f);
        // 4F 005D
        gbc.setState(0x975d, 0xa26, 0x4c60, 0x9d77, 0x7e53, 0xd9ba, 0x1, 0x0);
        gbc.writeMem(0x975d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa26);
        EXPECT(gbc.pc(), 0x975e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x975d), 0x4f);
        // 4F 005E
        gbc.setState(0xa1b1, 0x2889, 0x38a0, 0xec5b, 0xafa6, 0xf7cb, 0x0, 0x0);
        gbc.writeMem(0xa1b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2889);
        EXPECT(gbc.pc(), 0xa1b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1b1), 0x4f);
        // 4F 005F
        gbc.setState(0xc9a7, 0x61cc, 0xf3f0, 0xe953, 0x4956, 0xe9f9, 0x0, 0x0);
        gbc.writeMem(0xc9a7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x61cc);
        EXPECT(gbc.pc(), 0xc9a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9a7), 0x4f);
        // 4F 0060
        gbc.setState(0xa0ac, 0x97ff, 0x43f0, 0x5079, 0x2630, 0x6104, 0x0, 0x1);
        gbc.writeMem(0xa0ac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x97ff);
        EXPECT(gbc.pc(), 0xa0ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ac), 0x4f);
        // 4F 0061
        gbc.setState(0x1b13, 0x7076, 0xff70, 0x1ada, 0xac2d, 0x9930, 0x1, 0x0);
        gbc.writeMem(0x1b13, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7076);
        EXPECT(gbc.pc(), 0x1b14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0062
        gbc.setState(0x3237, 0x56d9, 0xd570, 0x41b6, 0x12cd, 0x19e6, 0x1, 0x0);
        gbc.writeMem(0x3237, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x56d9);
        EXPECT(gbc.pc(), 0x3238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0063
        gbc.setState(0xcca0, 0x6b13, 0x93c0, 0x263f, 0x8cae, 0x72f3, 0x1, 0x0);
        gbc.writeMem(0xcca0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6b13);
        EXPECT(gbc.pc(), 0xcca1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcca0), 0x4f);
        // 4F 0064
        gbc.setState(0xef1f, 0xaa9c, 0x4850, 0x31f9, 0xcab3, 0x1a40, 0x1, 0x0);
        gbc.writeMem(0xef1f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xaa9c);
        EXPECT(gbc.pc(), 0xef20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef1f), 0x4f);
        // 4F 0066
        gbc.setState(0xbd49, 0x1e45, 0xbfb0, 0xc5a4, 0xfe64, 0x20ed, 0x1, 0x0);
        gbc.writeMem(0xbd49, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1e45);
        EXPECT(gbc.pc(), 0xbd4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd49), 0x4f);
        // 4F 0067
        gbc.setState(0x4512, 0xc426, 0x5e60, 0x25d3, 0x7791, 0xc33b, 0x0, 0x0);
        gbc.writeMem(0x4512, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xc426);
        EXPECT(gbc.pc(), 0x4513);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0068
        gbc.setState(0xb7e3, 0x9810, 0xb4e0, 0x56f4, 0x1e5c, 0xf360, 0x0, 0x0);
        gbc.writeMem(0xb7e3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x9810);
        EXPECT(gbc.pc(), 0xb7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e3), 0x4f);
        // 4F 0069
        gbc.setState(0x95ad, 0x8786, 0x8910, 0xfb43, 0x85dd, 0xa518, 0x0, 0x1);
        gbc.writeMem(0x95ad, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8786);
        EXPECT(gbc.pc(), 0x95ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ad), 0x4f);
        // 4F 006A
        gbc.setState(0x6409, 0x91f8, 0xeee0, 0x3255, 0x4528, 0xa125, 0x1, 0x0);
        gbc.writeMem(0x6409, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x91f8);
        EXPECT(gbc.pc(), 0x640a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 006B
        gbc.setState(0xb928, 0x107e, 0xee00, 0xea9b, 0x90ac, 0x16f7, 0x0, 0x0);
        gbc.writeMem(0xb928, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x107e);
        EXPECT(gbc.pc(), 0xb929);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb928), 0x4f);
        // 4F 006C
        gbc.setState(0x6b56, 0x393c, 0x7fc0, 0xf579, 0x66b2, 0x27e3, 0x1, 0x1);
        gbc.writeMem(0x6b56, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x393c);
        EXPECT(gbc.pc(), 0x6b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 006D
        gbc.setState(0xcda8, 0x7d09, 0xd840, 0x69ad, 0xaa4a, 0x1b97, 0x1, 0x0);
        gbc.writeMem(0xcda8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x7d09);
        EXPECT(gbc.pc(), 0xcda9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcda8), 0x4f);
        // 4F 006E
        gbc.setState(0x4db1, 0xc544, 0xbf60, 0xb6e0, 0x8813, 0xd97c, 0x0, 0x1);
        gbc.writeMem(0x4db1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xc544);
        EXPECT(gbc.pc(), 0x4db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 006F
        gbc.setState(0x1866, 0xcfbf, 0x4360, 0xbe36, 0x6f8c, 0x1bc2, 0x1, 0x1);
        gbc.writeMem(0x1866, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcfbf);
        EXPECT(gbc.pc(), 0x1867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0070
        gbc.setState(0x2b8e, 0xf54c, 0xf600, 0xb507, 0x957d, 0xb262, 0x0, 0x1);
        gbc.writeMem(0x2b8e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf54c);
        EXPECT(gbc.pc(), 0x2b8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0071
        gbc.setState(0x9a97, 0xca6f, 0x400, 0xe22a, 0x1c02, 0xcc50, 0x0, 0x0);
        gbc.writeMem(0x9a97, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xca6f);
        EXPECT(gbc.pc(), 0x9a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a97), 0x4f);
        // 4F 0072
        gbc.setState(0x99b9, 0xb21d, 0x60e0, 0xa2ca, 0x307e, 0x3d7, 0x1, 0x0);
        gbc.writeMem(0x99b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xb21d);
        EXPECT(gbc.pc(), 0x99ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b9), 0x4f);
        // 4F 0073
        gbc.setState(0x3cb6, 0xc5bf, 0x5b70, 0x9446, 0x497f, 0x6766, 0x0, 0x1);
        gbc.writeMem(0x3cb6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xc5bf);
        EXPECT(gbc.pc(), 0x3cb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0074
        gbc.setState(0xd46a, 0xb8fd, 0x3c30, 0xfbe1, 0x1f1e, 0xedf0, 0x0, 0x0);
        gbc.writeMem(0xd46a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb8fd);
        EXPECT(gbc.pc(), 0xd46b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd46a), 0x4f);
        // 4F 0075
        gbc.setState(0x2440, 0x5265, 0x11e0, 0x9a87, 0x9e34, 0xdba0, 0x1, 0x0);
        gbc.writeMem(0x2440, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5265);
        EXPECT(gbc.pc(), 0x2441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0076
        gbc.setState(0x9e5f, 0xd3f4, 0xacb0, 0xfea7, 0xdbd9, 0xcfc0, 0x1, 0x0);
        gbc.writeMem(0x9e5f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd3f4);
        EXPECT(gbc.pc(), 0x9e60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e5f), 0x4f);
        // 4F 0077
        gbc.setState(0x9e2b, 0x3e7a, 0x7f50, 0x5333, 0x7b8f, 0x456, 0x0, 0x0);
        gbc.writeMem(0x9e2b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x3e7a);
        EXPECT(gbc.pc(), 0x9e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e2b), 0x4f);
        // 4F 0078
        gbc.setState(0x39ba, 0x1ea8, 0x4a20, 0xb88f, 0x372b, 0xb736, 0x1, 0x1);
        gbc.writeMem(0x39ba, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1ea8);
        EXPECT(gbc.pc(), 0x39bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0079
        gbc.setState(0x9210, 0x4a10, 0x10b0, 0x8e76, 0x8ccb, 0x8a65, 0x0, 0x0);
        gbc.writeMem(0x9210, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0x9211);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9210), 0x4f);
        // 4F 007A
        gbc.setState(0x6c46, 0xfbdf, 0x2df0, 0xbb29, 0xeb34, 0x6ed8, 0x1, 0x1);
        gbc.writeMem(0x6c46, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xfbdf);
        EXPECT(gbc.pc(), 0x6c47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 007B
        gbc.setState(0x628, 0xc942, 0x2c60, 0xa6f9, 0x5b42, 0x4302, 0x0, 0x1);
        gbc.writeMem(0x628, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc942);
        EXPECT(gbc.pc(), 0x629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 007C
        gbc.setState(0x8dd6, 0x153b, 0x1c50, 0xd021, 0x7a05, 0x78d4, 0x0, 0x1);
        gbc.writeMem(0x8dd6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x153b);
        EXPECT(gbc.pc(), 0x8dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd6), 0x4f);
        // 4F 007D
        gbc.setState(0xac16, 0x8fc6, 0xe420, 0x968f, 0x5cbe, 0x8ea, 0x0, 0x0);
        gbc.writeMem(0xac16, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8fc6);
        EXPECT(gbc.pc(), 0xac17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac16), 0x4f);
        // 4F 007E
        gbc.setState(0xd440, 0xef5a, 0xb190, 0x5f15, 0x1c45, 0x9e0c, 0x1, 0x1);
        gbc.writeMem(0xd440, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xef5a);
        EXPECT(gbc.pc(), 0xd441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd440), 0x4f);
        // 4F 007F
        gbc.setState(0x9341, 0x4bc2, 0xb560, 0xae3d, 0xbf52, 0xfc0b, 0x0, 0x0);
        gbc.writeMem(0x9341, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4bc2);
        EXPECT(gbc.pc(), 0x9342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9341), 0x4f);
        // 4F 0080
        gbc.setState(0xda3d, 0x283f, 0x6090, 0x671e, 0xea1a, 0x5421, 0x1, 0x1);
        gbc.writeMem(0xda3d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x283f);
        EXPECT(gbc.pc(), 0xda3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda3d), 0x4f);
        // 4F 0081
        gbc.setState(0x80c6, 0x8a3, 0x4650, 0x31c5, 0x3af2, 0x7c38, 0x0, 0x0);
        gbc.writeMem(0x80c6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8a3);
        EXPECT(gbc.pc(), 0x80c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c6), 0x4f);
        // 4F 0082
        gbc.setState(0x6b89, 0x6429, 0xeeb0, 0xa4c4, 0xfd8f, 0x5339, 0x1, 0x1);
        gbc.writeMem(0x6b89, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6429);
        EXPECT(gbc.pc(), 0x6b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0083
        gbc.setState(0x22eb, 0xf17c, 0x24c0, 0x25c8, 0x323d, 0xe1b2, 0x0, 0x1);
        gbc.writeMem(0x22eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf17c);
        EXPECT(gbc.pc(), 0x22ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0084
        gbc.setState(0x67d6, 0x70db, 0x1340, 0xcf52, 0x1847, 0x5645, 0x0, 0x1);
        gbc.writeMem(0x67d6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x70db);
        EXPECT(gbc.pc(), 0x67d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0085
        gbc.setState(0x766f, 0x980b, 0x9470, 0xcb49, 0x44ad, 0xd47e, 0x0, 0x1);
        gbc.writeMem(0x766f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x980b);
        EXPECT(gbc.pc(), 0x7670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0086
        gbc.setState(0x5db5, 0xa507, 0xd7a0, 0xbe12, 0x5e17, 0x1fbe, 0x1, 0x1);
        gbc.writeMem(0x5db5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa507);
        EXPECT(gbc.pc(), 0x5db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0087
        gbc.setState(0x8fbc, 0xeecc, 0x63d0, 0xefb9, 0xbac1, 0x19b0, 0x0, 0x0);
        gbc.writeMem(0x8fbc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xeecc);
        EXPECT(gbc.pc(), 0x8fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fbc), 0x4f);
        // 4F 0088
        gbc.setState(0x201e, 0xa462, 0xa750, 0x8c03, 0x4f74, 0xf38a, 0x0, 0x1);
        gbc.writeMem(0x201e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa462);
        EXPECT(gbc.pc(), 0x201f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0089
        gbc.setState(0x6ca2, 0x2c20, 0xa400, 0x23fd, 0x9db1, 0x2bd, 0x1, 0x1);
        gbc.writeMem(0x6ca2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2c20);
        EXPECT(gbc.pc(), 0x6ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 008A
        gbc.setState(0x4043, 0x253e, 0x8310, 0x5d4d, 0x831c, 0xed84, 0x1, 0x1);
        gbc.writeMem(0x4043, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x253e);
        EXPECT(gbc.pc(), 0x4044);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 008B
        gbc.setState(0xd172, 0xe397, 0x4e30, 0xf29f, 0x27b6, 0xb1e8, 0x1, 0x0);
        gbc.writeMem(0xd172, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe397);
        EXPECT(gbc.pc(), 0xd173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd172), 0x4f);
        // 4F 008C
        gbc.setState(0x67da, 0x2b, 0x18c0, 0x15ef, 0x9974, 0x9fb8, 0x0, 0x1);
        gbc.writeMem(0x67da, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2b);
        EXPECT(gbc.pc(), 0x67db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 008D
        gbc.setState(0x810a, 0xa7d5, 0x76e0, 0x3d68, 0xc229, 0x85bc, 0x0, 0x1);
        gbc.writeMem(0x810a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa7d5);
        EXPECT(gbc.pc(), 0x810b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x810a), 0x4f);
        // 4F 008E
        gbc.setState(0x1a47, 0x3482, 0x56e0, 0x862c, 0x57a6, 0x326c, 0x1, 0x0);
        gbc.writeMem(0x1a47, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x3482);
        EXPECT(gbc.pc(), 0x1a48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0090
        gbc.setState(0x3527, 0xe0f9, 0x5f20, 0x7651, 0xa00d, 0x47fb, 0x1, 0x1);
        gbc.writeMem(0x3527, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe0f9);
        EXPECT(gbc.pc(), 0x3528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0092
        gbc.setState(0xae1f, 0xf401, 0x1470, 0x9fee, 0x337f, 0x90d1, 0x0, 0x0);
        gbc.writeMem(0xae1f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf401);
        EXPECT(gbc.pc(), 0xae20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae1f), 0x4f);
        // 4F 0093
        gbc.setState(0x74b, 0x32eb, 0xb240, 0xd035, 0x73ec, 0x41ea, 0x0, 0x0);
        gbc.writeMem(0x74b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x32eb);
        EXPECT(gbc.pc(), 0x74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0094
        gbc.setState(0x1448, 0xb460, 0x88a0, 0x4e9f, 0xe4ef, 0x380f, 0x0, 0x0);
        gbc.writeMem(0x1448, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xb460);
        EXPECT(gbc.pc(), 0x1449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0095
        gbc.setState(0x6429, 0x3c48, 0x1580, 0x784e, 0x82ee, 0x6c3b, 0x0, 0x1);
        gbc.writeMem(0x6429, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3c48);
        EXPECT(gbc.pc(), 0x642a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0096
        gbc.setState(0xe4f8, 0x745e, 0x9330, 0x4ca, 0x152, 0x423a, 0x1, 0x1);
        gbc.writeMem(0xe4f8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x745e);
        EXPECT(gbc.pc(), 0xe4f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4f8), 0x4f);
        // 4F 0097
        gbc.setState(0x307, 0xbd69, 0x4a80, 0xcf52, 0xad01, 0xee81, 0x0, 0x0);
        gbc.writeMem(0x307, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbd69);
        EXPECT(gbc.pc(), 0x308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0098
        gbc.setState(0x541c, 0x2f57, 0x33f0, 0x1828, 0x63d9, 0x2f76, 0x0, 0x0);
        gbc.writeMem(0x541c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2f57);
        EXPECT(gbc.pc(), 0x541d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0099
        gbc.setState(0xc49b, 0x4d54, 0xae60, 0xa0de, 0xa34f, 0xbaaf, 0x1, 0x1);
        gbc.writeMem(0xc49b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4d54);
        EXPECT(gbc.pc(), 0xc49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc49b), 0x4f);
        // 4F 009A
        gbc.setState(0x8476, 0xf16b, 0xfbb0, 0xcb42, 0x194c, 0x2aa5, 0x1, 0x1);
        gbc.writeMem(0x8476, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf16b);
        EXPECT(gbc.pc(), 0x8477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8476), 0x4f);
        // 4F 009B
        gbc.setState(0x4997, 0xe76f, 0x8af0, 0xd43c, 0xb7b9, 0x509b, 0x1, 0x1);
        gbc.writeMem(0x4997, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe76f);
        EXPECT(gbc.pc(), 0x4998);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 009C
        gbc.setState(0x2858, 0x1f43, 0x7a30, 0x3312, 0x6dde, 0xc2c8, 0x0, 0x0);
        gbc.writeMem(0x2858, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1f43);
        EXPECT(gbc.pc(), 0x2859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 009D
        gbc.setState(0xb6de, 0x72fb, 0xf370, 0xcf33, 0xdb18, 0xdaf2, 0x1, 0x0);
        gbc.writeMem(0xb6de, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x72fb);
        EXPECT(gbc.pc(), 0xb6df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6de), 0x4f);
        // 4F 009E
        gbc.setState(0x6794, 0x3ae8, 0x9bf0, 0x5c42, 0x38e9, 0xb797, 0x1, 0x0);
        gbc.writeMem(0x6794, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3ae8);
        EXPECT(gbc.pc(), 0x6795);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 009F
        gbc.setState(0xc263, 0xf301, 0xf610, 0x9d93, 0xb79d, 0xb312, 0x1, 0x1);
        gbc.writeMem(0xc263, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xf301);
        EXPECT(gbc.pc(), 0xc264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc263), 0x4f);
        // 4F 00A0
        gbc.setState(0x7aaa, 0xc505, 0x330, 0x34b, 0x6406, 0xfa4c, 0x0, 0x1);
        gbc.writeMem(0x7aaa, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xc505);
        EXPECT(gbc.pc(), 0x7aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00A1
        gbc.setState(0xdb1a, 0x7a27, 0xac10, 0x2a8b, 0xcf50, 0x886, 0x1, 0x0);
        gbc.writeMem(0xdb1a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x7a27);
        EXPECT(gbc.pc(), 0xdb1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb1a), 0x4f);
        // 4F 00A2
        gbc.setState(0x9b6c, 0xc3cc, 0xfeb0, 0x48b0, 0x4047, 0xfe23, 0x1, 0x0);
        gbc.writeMem(0x9b6c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xc3cc);
        EXPECT(gbc.pc(), 0x9b6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b6c), 0x4f);
        // 4F 00A3
        gbc.setState(0x8c5, 0x1388, 0x2df0, 0x77b3, 0xca21, 0x93b9, 0x0, 0x0);
        gbc.writeMem(0x8c5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1388);
        EXPECT(gbc.pc(), 0x8c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00A4
        gbc.setState(0x843a, 0x901a, 0xeff0, 0x5661, 0x37a9, 0x201, 0x1, 0x1);
        gbc.writeMem(0x843a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x901a);
        EXPECT(gbc.pc(), 0x843b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x843a), 0x4f);
        // 4F 00A5
        gbc.setState(0x3e59, 0x9c7c, 0xa9a0, 0xd841, 0x4148, 0xac50, 0x1, 0x1);
        gbc.writeMem(0x3e59, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9c7c);
        EXPECT(gbc.pc(), 0x3e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00A6
        gbc.setState(0xb12f, 0x782f, 0xdf10, 0xc84, 0x9bbc, 0xac5f, 0x1, 0x0);
        gbc.writeMem(0xb12f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x782f);
        EXPECT(gbc.pc(), 0xb130);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb12f), 0x4f);
        // 4F 00A7
        gbc.setState(0x1b7, 0x7365, 0x5790, 0xc3db, 0xfd6b, 0xd984, 0x0, 0x1);
        gbc.writeMem(0x1b7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x7365);
        EXPECT(gbc.pc(), 0x1b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00A8
        gbc.setState(0xdebd, 0x9a22, 0xe700, 0x960c, 0xdeae, 0xaed5, 0x0, 0x1);
        gbc.writeMem(0xdebd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x9a22);
        EXPECT(gbc.pc(), 0xdebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebd), 0x4f);
        // 4F 00A9
        gbc.setState(0xa460, 0x4516, 0xfcd0, 0x7a3d, 0xf51c, 0xd48, 0x0, 0x0);
        gbc.writeMem(0xa460, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4516);
        EXPECT(gbc.pc(), 0xa461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa460), 0x4f);
        // 4F 00AA
        gbc.setState(0xa1a9, 0x296b, 0x9560, 0x70d9, 0x72b3, 0x1da0, 0x0, 0x0);
        gbc.writeMem(0xa1a9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x296b);
        EXPECT(gbc.pc(), 0xa1aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a9), 0x4f);
        // 4F 00AB
        gbc.setState(0x5c1, 0xefbb, 0x42e0, 0x5dbd, 0x8809, 0x4107, 0x0, 0x1);
        gbc.writeMem(0x5c1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xefbb);
        EXPECT(gbc.pc(), 0x5c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00AC
        gbc.setState(0x5179, 0x7237, 0xda60, 0x2806, 0xcb0, 0x8365, 0x1, 0x0);
        gbc.writeMem(0x5179, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7237);
        EXPECT(gbc.pc(), 0x517a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00AD
        gbc.setState(0x2ef8, 0xeca, 0x5a80, 0xdf1c, 0x8290, 0x95eb, 0x0, 0x0);
        gbc.writeMem(0x2ef8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xeca);
        EXPECT(gbc.pc(), 0x2ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00AE
        gbc.setState(0x325, 0xb527, 0x5a10, 0x897, 0xe668, 0xe7af, 0x0, 0x0);
        gbc.writeMem(0x325, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xb527);
        EXPECT(gbc.pc(), 0x326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00AF
        gbc.setState(0xccdc, 0xa4dd, 0x3b60, 0x208e, 0xa324, 0x799, 0x0, 0x0);
        gbc.writeMem(0xccdc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa4dd);
        EXPECT(gbc.pc(), 0xccdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccdc), 0x4f);
        // 4F 00B0
        gbc.setState(0x43e0, 0xdd04, 0x770, 0x391f, 0xe34c, 0x6a17, 0x0, 0x1);
        gbc.writeMem(0x43e0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdd04);
        EXPECT(gbc.pc(), 0x43e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00B1
        gbc.setState(0xc02, 0x59dc, 0xac20, 0xe3f0, 0xc3c5, 0x993c, 0x0, 0x1);
        gbc.writeMem(0xc02, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x59dc);
        EXPECT(gbc.pc(), 0xc03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00B2
        gbc.setState(0xd9d2, 0x7c5b, 0x3410, 0x2d78, 0x72eb, 0x67a1, 0x1, 0x0);
        gbc.writeMem(0xd9d2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7c5b);
        EXPECT(gbc.pc(), 0xd9d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9d2), 0x4f);
        // 4F 00B3
        gbc.setState(0x2b20, 0xbfbc, 0xc50, 0x5d67, 0x64e1, 0x7e38, 0x1, 0x1);
        gbc.writeMem(0x2b20, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xbfbc);
        EXPECT(gbc.pc(), 0x2b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00B4
        gbc.setState(0x1979, 0x4e7, 0x4a0, 0x768e, 0xca0f, 0xc00d, 0x1, 0x1);
        gbc.writeMem(0x1979, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4e7);
        EXPECT(gbc.pc(), 0x197a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00B5
        gbc.setState(0x3c7d, 0x17c8, 0x55e0, 0x41bd, 0xcf40, 0x59bc, 0x1, 0x1);
        gbc.writeMem(0x3c7d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x17c8);
        EXPECT(gbc.pc(), 0x3c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00B6
        gbc.setState(0x74f4, 0x2dd3, 0xca60, 0xf323, 0x1d28, 0x5164, 0x1, 0x0);
        gbc.writeMem(0x74f4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2dd3);
        EXPECT(gbc.pc(), 0x74f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00B7
        gbc.setState(0xa9b9, 0x3adc, 0x2aa0, 0x66a, 0xf6e0, 0xd825, 0x0, 0x0);
        gbc.writeMem(0xa9b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3adc);
        EXPECT(gbc.pc(), 0xa9ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b9), 0x4f);
        // 4F 00B8
        gbc.setState(0x57e6, 0x89fb, 0xec70, 0xcf1e, 0x6d89, 0xe7d4, 0x0, 0x0);
        gbc.writeMem(0x57e6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x89fb);
        EXPECT(gbc.pc(), 0x57e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00B9
        gbc.setState(0x2cfc, 0x62d7, 0xb280, 0x3ba2, 0x5401, 0x13fe, 0x1, 0x1);
        gbc.writeMem(0x2cfc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x62d7);
        EXPECT(gbc.pc(), 0x2cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00BA
        gbc.setState(0x1682, 0x51f2, 0x4170, 0x3f3d, 0x6e20, 0x958f, 0x0, 0x1);
        gbc.writeMem(0x1682, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x51f2);
        EXPECT(gbc.pc(), 0x1683);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00BC
        gbc.setState(0x53f6, 0xacab, 0x35e0, 0xd, 0x9c8a, 0x4136, 0x0, 0x1);
        gbc.writeMem(0x53f6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xacab);
        EXPECT(gbc.pc(), 0x53f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00BD
        gbc.setState(0x3278, 0x8e44, 0xd4e0, 0x5dd3, 0x8af4, 0x9261, 0x1, 0x1);
        gbc.writeMem(0x3278, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8e44);
        EXPECT(gbc.pc(), 0x3279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00BE
        gbc.setState(0x7eb3, 0xaa70, 0x5d20, 0x2055, 0x6cc0, 0x48f7, 0x1, 0x0);
        gbc.writeMem(0x7eb3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xaa70);
        EXPECT(gbc.pc(), 0x7eb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00BF
        gbc.setState(0x40cf, 0x3f57, 0x5090, 0xf93e, 0xebf0, 0x5c4d, 0x0, 0x1);
        gbc.writeMem(0x40cf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3f57);
        EXPECT(gbc.pc(), 0x40d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00C0
        gbc.setState(0x13d6, 0x91b1, 0xe3d0, 0x9fe9, 0x3c26, 0x564e, 0x1, 0x0);
        gbc.writeMem(0x13d6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x91b1);
        EXPECT(gbc.pc(), 0x13d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00C1
        gbc.setState(0xe1a3, 0x3d21, 0x4df0, 0xbb21, 0x3212, 0x6e09, 0x1, 0x0);
        gbc.writeMem(0xe1a3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x3d21);
        EXPECT(gbc.pc(), 0xe1a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a3), 0x4f);
        // 4F 00C2
        gbc.setState(0x7446, 0x8e8e, 0x5960, 0x49ef, 0xdc10, 0xe94d, 0x0, 0x0);
        gbc.writeMem(0x7446, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8e8e);
        EXPECT(gbc.pc(), 0x7447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00C3
        gbc.setState(0x94b1, 0xef55, 0xb320, 0xa8fb, 0xbc0a, 0xa77d, 0x1, 0x0);
        gbc.writeMem(0x94b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xef55);
        EXPECT(gbc.pc(), 0x94b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94b1), 0x4f);
        // 4F 00C4
        gbc.setState(0xa08b, 0x193d, 0xaa20, 0x516d, 0xd7fe, 0x3fac, 0x0, 0x0);
        gbc.writeMem(0xa08b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x193d);
        EXPECT(gbc.pc(), 0xa08c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08b), 0x4f);
        // 4F 00C5
        gbc.setState(0x700e, 0x226f, 0x910, 0x1061, 0x9e5b, 0xb21d, 0x0, 0x0);
        gbc.writeMem(0x700e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x226f);
        EXPECT(gbc.pc(), 0x700f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00C6
        gbc.setState(0x8d48, 0x325f, 0xbce0, 0x6ee6, 0xd772, 0xd7a4, 0x1, 0x1);
        gbc.writeMem(0x8d48, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x325f);
        EXPECT(gbc.pc(), 0x8d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d48), 0x4f);
        // 4F 00C7
        gbc.setState(0xd689, 0x39e6, 0x51b0, 0xbb09, 0xf3da, 0xcaa5, 0x1, 0x1);
        gbc.writeMem(0xd689, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x39e6);
        EXPECT(gbc.pc(), 0xd68a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd689), 0x4f);
        // 4F 00CB
        gbc.setState(0xe10d, 0x33d6, 0x86c0, 0xa37f, 0xfdc3, 0x42cd, 0x0, 0x0);
        gbc.writeMem(0xe10d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x33d6);
        EXPECT(gbc.pc(), 0xe10e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10d), 0x4f);
        // 4F 00CC
        gbc.setState(0xaa23, 0xb45, 0xa3e0, 0x3d21, 0xaf8b, 0x261c, 0x0, 0x1);
        gbc.writeMem(0xaa23, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb45);
        EXPECT(gbc.pc(), 0xaa24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa23), 0x4f);
        // 4F 00CD
        gbc.setState(0x4a4c, 0x8fb3, 0xbd60, 0xc670, 0x5966, 0x916c, 0x1, 0x0);
        gbc.writeMem(0x4a4c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8fb3);
        EXPECT(gbc.pc(), 0x4a4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00CE
        gbc.setState(0x6b24, 0xc432, 0x7910, 0x89ec, 0x5982, 0x282c, 0x0, 0x1);
        gbc.writeMem(0x6b24, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc432);
        EXPECT(gbc.pc(), 0x6b25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00CF
        gbc.setState(0xb120, 0x7c16, 0xba50, 0x2d8f, 0x9df5, 0x1d7b, 0x1, 0x0);
        gbc.writeMem(0xb120, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7c16);
        EXPECT(gbc.pc(), 0xb121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb120), 0x4f);
        // 4F 00D0
        gbc.setState(0x31f1, 0xe521, 0xbe20, 0xc036, 0x1b20, 0xf2a6, 0x1, 0x1);
        gbc.writeMem(0x31f1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe521);
        EXPECT(gbc.pc(), 0x31f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00D1
        gbc.setState(0xb03f, 0x2ce0, 0xb920, 0xc7ac, 0xdfcf, 0xc3c6, 0x0, 0x1);
        gbc.writeMem(0xb03f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2ce0);
        EXPECT(gbc.pc(), 0xb040);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03f), 0x4f);
        // 4F 00D2
        gbc.setState(0xb08e, 0xb99c, 0x44b0, 0xd85, 0xe228, 0xe042, 0x0, 0x0);
        gbc.writeMem(0xb08e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb99c);
        EXPECT(gbc.pc(), 0xb08f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb08e), 0x4f);
        // 4F 00D3
        gbc.setState(0x8ef, 0x28b3, 0xae60, 0x45a6, 0x3b7b, 0x9d41, 0x0, 0x1);
        gbc.writeMem(0x8ef, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x28b3);
        EXPECT(gbc.pc(), 0x8f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00D4
        gbc.setState(0x8181, 0x367d, 0x7880, 0xfcda, 0x916d, 0x90e6, 0x0, 0x0);
        gbc.writeMem(0x8181, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x367d);
        EXPECT(gbc.pc(), 0x8182);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8181), 0x4f);
        // 4F 00D5
        gbc.setState(0x965c, 0xb9, 0xbbb0, 0x35fd, 0x33b7, 0xf922, 0x1, 0x1);
        gbc.writeMem(0x965c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xb9);
        EXPECT(gbc.pc(), 0x965d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965c), 0x4f);
        // 4F 00D6
        gbc.setState(0xe26f, 0x5ac6, 0x390, 0x5ed8, 0x9bb3, 0x5d32, 0x0, 0x0);
        gbc.writeMem(0xe26f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5ac6);
        EXPECT(gbc.pc(), 0xe270);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26f), 0x4f);
        // 4F 00D7
        gbc.setState(0x404c, 0xc2d, 0x8c40, 0x6fa, 0x9c43, 0xbc6d, 0x0, 0x1);
        gbc.writeMem(0x404c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc2d);
        EXPECT(gbc.pc(), 0x404d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00D8
        gbc.setState(0x86f5, 0x97a3, 0x4480, 0x6e7d, 0x3cf2, 0x326e, 0x1, 0x0);
        gbc.writeMem(0x86f5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x97a3);
        EXPECT(gbc.pc(), 0x86f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86f5), 0x4f);
        // 4F 00D9
        gbc.setState(0x7695, 0xa0ae, 0x2c0, 0x3bc7, 0xbee9, 0x418a, 0x0, 0x1);
        gbc.writeMem(0x7695, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa0ae);
        EXPECT(gbc.pc(), 0x7696);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00DA
        gbc.setState(0x46d4, 0x5d3b, 0xcbc0, 0x8e71, 0xfee9, 0xeb1d, 0x0, 0x0);
        gbc.writeMem(0x46d4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5d3b);
        EXPECT(gbc.pc(), 0x46d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00DB
        gbc.setState(0xd3eb, 0xf605, 0xe80, 0x2012, 0x2058, 0x2fa3, 0x1, 0x0);
        gbc.writeMem(0xd3eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf605);
        EXPECT(gbc.pc(), 0xd3ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3eb), 0x4f);
        // 4F 00DC
        gbc.setState(0x4205, 0xfdd9, 0xfc20, 0xc164, 0x3136, 0xd284, 0x0, 0x1);
        gbc.writeMem(0x4205, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfdd9);
        EXPECT(gbc.pc(), 0x4206);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00DD
        gbc.setState(0xafb9, 0xb254, 0x1ee0, 0xa0a9, 0x8669, 0xcc32, 0x1, 0x1);
        gbc.writeMem(0xafb9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xb254);
        EXPECT(gbc.pc(), 0xafba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafb9), 0x4f);
        // 4F 00DE
        gbc.setState(0x1dc9, 0x6f4b, 0xfd60, 0x549f, 0x864, 0x48b4, 0x0, 0x0);
        gbc.writeMem(0x1dc9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6f4b);
        EXPECT(gbc.pc(), 0x1dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 00DF
        gbc.setState(0xaea9, 0xa4af, 0x4d00, 0x7891, 0xc8c8, 0x3ab2, 0x1, 0x1);
        gbc.writeMem(0xaea9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa4af);
        EXPECT(gbc.pc(), 0xaeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea9), 0x4f);
        // 4F 00E1
        gbc.setState(0x6ede, 0xdab1, 0xb8d0, 0x583b, 0x7178, 0x3977, 0x0, 0x1);
        gbc.writeMem(0x6ede, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdab1);
        EXPECT(gbc.pc(), 0x6edf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00E2
        gbc.setState(0xa5a9, 0x7426, 0xc340, 0xec66, 0x18fb, 0xb4d1, 0x1, 0x0);
        gbc.writeMem(0xa5a9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7426);
        EXPECT(gbc.pc(), 0xa5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a9), 0x4f);
        // 4F 00E3
        gbc.setState(0xd035, 0xba40, 0x8070, 0xd6d9, 0x5f45, 0x65ff, 0x0, 0x0);
        gbc.writeMem(0xd035, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xba40);
        EXPECT(gbc.pc(), 0xd036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd035), 0x4f);
        // 4F 00E4
        gbc.setState(0xbc5d, 0x5662, 0x2670, 0xaec6, 0xf85c, 0xdff, 0x0, 0x1);
        gbc.writeMem(0xbc5d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x5662);
        EXPECT(gbc.pc(), 0xbc5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc5d), 0x4f);
        // 4F 00E5
        gbc.setState(0x3ed2, 0x86a3, 0x8650, 0xa723, 0x535a, 0x713f, 0x0, 0x0);
        gbc.writeMem(0x3ed2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x86a3);
        EXPECT(gbc.pc(), 0x3ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00E6
        gbc.setState(0xbac4, 0x47d1, 0x6c90, 0x6cc1, 0x959, 0x8330, 0x0, 0x0);
        gbc.writeMem(0xbac4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x47d1);
        EXPECT(gbc.pc(), 0xbac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbac4), 0x4f);
        // 4F 00E7
        gbc.setState(0x8c66, 0x9b33, 0xd350, 0xd40e, 0x5b4a, 0x233e, 0x0, 0x1);
        gbc.writeMem(0x8c66, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9b33);
        EXPECT(gbc.pc(), 0x8c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c66), 0x4f);
        // 4F 00E8
        gbc.setState(0x4ffc, 0xbcfa, 0x2b80, 0xd3cb, 0xae52, 0x23b8, 0x1, 0x1);
        gbc.writeMem(0x4ffc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbcfa);
        EXPECT(gbc.pc(), 0x4ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00E9
        gbc.setState(0xa8bd, 0xd8b1, 0x6210, 0x2175, 0xd96b, 0x7bf, 0x1, 0x0);
        gbc.writeMem(0xa8bd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd8b1);
        EXPECT(gbc.pc(), 0xa8be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8bd), 0x4f);
        // 4F 00EA
        gbc.setState(0x7c4f, 0xed6e, 0x4300, 0x1b0c, 0xd2ae, 0x2a8b, 0x0, 0x1);
        gbc.writeMem(0x7c4f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xed6e);
        EXPECT(gbc.pc(), 0x7c50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00EB
        gbc.setState(0x4775, 0xc3f0, 0xecd0, 0x3b55, 0xef, 0x9899, 0x1, 0x1);
        gbc.writeMem(0x4775, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc3f0);
        EXPECT(gbc.pc(), 0x4776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00EC
        gbc.setState(0x97b4, 0x9eb, 0x1b30, 0xe40f, 0x6d79, 0xe6ad, 0x1, 0x0);
        gbc.writeMem(0x97b4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x9eb);
        EXPECT(gbc.pc(), 0x97b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b4), 0x4f);
        // 4F 00ED
        gbc.setState(0xa999, 0x1417, 0xba00, 0xddef, 0xe193, 0x67ed, 0x1, 0x0);
        gbc.writeMem(0xa999, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1417);
        EXPECT(gbc.pc(), 0xa99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa999), 0x4f);
        // 4F 00EE
        gbc.setState(0xeb19, 0xf222, 0x2920, 0x7700, 0x7820, 0xc17e, 0x1, 0x1);
        gbc.writeMem(0xeb19, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf222);
        EXPECT(gbc.pc(), 0xeb1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb19), 0x4f);
        // 4F 00EF
        gbc.setState(0xc078, 0xb563, 0xd000, 0xcba2, 0xbe5f, 0x7e63, 0x0, 0x1);
        gbc.writeMem(0xc078, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb563);
        EXPECT(gbc.pc(), 0xc079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc078), 0x4f);
        // 4F 00F0
        gbc.setState(0x620c, 0x3721, 0x2430, 0x742, 0x76, 0xd9ff, 0x0, 0x0);
        gbc.writeMem(0x620c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3721);
        EXPECT(gbc.pc(), 0x620d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00F1
        gbc.setState(0x85a3, 0xd6dd, 0x3990, 0x70fe, 0xedaf, 0xff6e, 0x1, 0x0);
        gbc.writeMem(0x85a3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xd6dd);
        EXPECT(gbc.pc(), 0x85a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85a3), 0x4f);
        // 4F 00F2
        gbc.setState(0xb560, 0x8ce3, 0x8cf0, 0xa455, 0x2649, 0xe5f8, 0x0, 0x0);
        gbc.writeMem(0xb560, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8ce3);
        EXPECT(gbc.pc(), 0xb561);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb560), 0x4f);
        // 4F 00F3
        gbc.setState(0xb06, 0x7626, 0x2050, 0x8276, 0xdfa1, 0x69ec, 0x1, 0x1);
        gbc.writeMem(0xb06, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7626);
        EXPECT(gbc.pc(), 0xb07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00F4
        gbc.setState(0x6437, 0xbb83, 0xa000, 0x38, 0xb187, 0xfa25, 0x0, 0x0);
        gbc.writeMem(0x6437, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xbb83);
        EXPECT(gbc.pc(), 0x6438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 00F5
        gbc.setState(0xb3fc, 0x7597, 0x2050, 0xb5e0, 0x30bf, 0x5ac, 0x1, 0x0);
        gbc.writeMem(0xb3fc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x7597);
        EXPECT(gbc.pc(), 0xb3fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3fc), 0x4f);
        // 4F 00F6
        gbc.setState(0xd886, 0xaf3, 0xe870, 0xcba2, 0xf944, 0x318b, 0x0, 0x1);
        gbc.writeMem(0xd886, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaf3);
        EXPECT(gbc.pc(), 0xd887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd886), 0x4f);
        // 4F 00F7
        gbc.setState(0x81a4, 0x1595, 0x9aa0, 0xf86, 0x2502, 0xda84, 0x0, 0x1);
        gbc.writeMem(0x81a4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x1595);
        EXPECT(gbc.pc(), 0x81a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a4), 0x4f);
        // 4F 00F8
        gbc.setState(0x17a3, 0x631a, 0x9e70, 0x30ab, 0xcd42, 0x2f06, 0x0, 0x1);
        gbc.writeMem(0x17a3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x631a);
        EXPECT(gbc.pc(), 0x17a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00F9
        gbc.setState(0x4ebc, 0xae27, 0x49d0, 0xdb7f, 0x32d2, 0x9dbb, 0x1, 0x0);
        gbc.writeMem(0x4ebc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xae27);
        EXPECT(gbc.pc(), 0x4ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00FA
        gbc.setState(0x5f90, 0x73b, 0xa5f0, 0x8a43, 0x5be5, 0xbbef, 0x1, 0x1);
        gbc.writeMem(0x5f90, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x73b);
        EXPECT(gbc.pc(), 0x5f91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00FB
        gbc.setState(0xb1f8, 0x9ba7, 0x8c50, 0xbf77, 0xd39, 0x7695, 0x1, 0x1);
        gbc.writeMem(0xb1f8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9ba7);
        EXPECT(gbc.pc(), 0xb1f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1f8), 0x4f);
        // 4F 00FC
        gbc.setState(0x3e9a, 0xae7c, 0xb410, 0xb165, 0x50a0, 0x61f, 0x1, 0x0);
        gbc.writeMem(0x3e9a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xae7c);
        EXPECT(gbc.pc(), 0x3e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 00FD
        gbc.setState(0xcc66, 0x3034, 0xdad0, 0x4ff6, 0x102f, 0xd430, 0x0, 0x1);
        gbc.writeMem(0xcc66, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3034);
        EXPECT(gbc.pc(), 0xcc67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc66), 0x4f);
        // 4F 00FE
        gbc.setState(0x47d1, 0x9a81, 0xfb30, 0x9b96, 0x27, 0x83d, 0x0, 0x1);
        gbc.writeMem(0x47d1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9a81);
        EXPECT(gbc.pc(), 0x47d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 00FF
        gbc.setState(0xe3f0, 0x90fa, 0x3140, 0xb775, 0x7dfd, 0x930b, 0x1, 0x1);
        gbc.writeMem(0xe3f0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x90fa);
        EXPECT(gbc.pc(), 0xe3f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3f0), 0x4f);
        // 4F 0100
        gbc.setState(0x4946, 0x3aa7, 0x730, 0x927b, 0x71db, 0x2b13, 0x0, 0x0);
        gbc.writeMem(0x4946, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3aa7);
        EXPECT(gbc.pc(), 0x4947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0101
        gbc.setState(0x28, 0x4e15, 0x8030, 0x7912, 0xb2da, 0x69c, 0x1, 0x0);
        gbc.writeMem(0x28, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4e15);
        EXPECT(gbc.pc(), 0x29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0102
        gbc.setState(0xd029, 0xcd81, 0xaf30, 0x7e58, 0xd93d, 0xe36b, 0x1, 0x1);
        gbc.writeMem(0xd029, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xcd81);
        EXPECT(gbc.pc(), 0xd02a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd029), 0x4f);
        // 4F 0103
        gbc.setState(0xc1a7, 0xd122, 0x90c0, 0x71cd, 0xb289, 0x2c04, 0x0, 0x0);
        gbc.writeMem(0xc1a7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd122);
        EXPECT(gbc.pc(), 0xc1a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1a7), 0x4f);
        // 4F 0104
        gbc.setState(0x2c63, 0xc8b1, 0x6fd0, 0x8133, 0xeddd, 0xbae7, 0x1, 0x1);
        gbc.writeMem(0x2c63, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc8b1);
        EXPECT(gbc.pc(), 0x2c64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0105
        gbc.setState(0x6e66, 0xad85, 0x25a0, 0x9a7f, 0x4f5, 0xf67, 0x1, 0x0);
        gbc.writeMem(0x6e66, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xad85);
        EXPECT(gbc.pc(), 0x6e67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0106
        gbc.setState(0x4cce, 0x5118, 0x6cb0, 0xbb83, 0xddaa, 0x39e4, 0x1, 0x1);
        gbc.writeMem(0x4cce, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5118);
        EXPECT(gbc.pc(), 0x4ccf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0108
        gbc.setState(0x983d, 0x3659, 0xd200, 0xd714, 0x918, 0x8e63, 0x1, 0x1);
        gbc.writeMem(0x983d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3659);
        EXPECT(gbc.pc(), 0x983e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x983d), 0x4f);
        // 4F 010A
        gbc.setState(0x10a2, 0x3538, 0x2490, 0x80a6, 0x6356, 0x8122, 0x0, 0x1);
        gbc.writeMem(0x10a2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x3538);
        EXPECT(gbc.pc(), 0x10a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 010B
        gbc.setState(0xca71, 0xbc43, 0x1930, 0xbbab, 0x9a76, 0xded4, 0x1, 0x0);
        gbc.writeMem(0xca71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbc43);
        EXPECT(gbc.pc(), 0xca72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca71), 0x4f);
        // 4F 010C
        gbc.setState(0x4de4, 0xa86f, 0xae80, 0x5524, 0x7de7, 0xea91, 0x0, 0x1);
        gbc.writeMem(0x4de4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xa86f);
        EXPECT(gbc.pc(), 0x4de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 010D
        gbc.setState(0x1495, 0xdcb0, 0x82a0, 0x816e, 0x22a0, 0x6f6, 0x0, 0x1);
        gbc.writeMem(0x1495, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdcb0);
        EXPECT(gbc.pc(), 0x1496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 010E
        gbc.setState(0x687, 0xb542, 0xd0, 0x6ad4, 0x3fd5, 0xddc9, 0x1, 0x0);
        gbc.writeMem(0x687, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb542);
        EXPECT(gbc.pc(), 0x688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0110
        gbc.setState(0xcd5a, 0xb858, 0x11c0, 0xba31, 0xdd86, 0xdf31, 0x0, 0x0);
        gbc.writeMem(0xcd5a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb858);
        EXPECT(gbc.pc(), 0xcd5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5a), 0x4f);
        // 4F 0111
        gbc.setState(0x66b, 0xc5f3, 0x4450, 0xfa60, 0x5919, 0x76fc, 0x1, 0x0);
        gbc.writeMem(0x66b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc5f3);
        EXPECT(gbc.pc(), 0x66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0112
        gbc.setState(0x2f20, 0xa95b, 0xb5f0, 0xcfe8, 0x31e9, 0xb806, 0x0, 0x0);
        gbc.writeMem(0x2f20, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa95b);
        EXPECT(gbc.pc(), 0x2f21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0113
        gbc.setState(0xe049, 0x4823, 0x69f0, 0x772e, 0xb9be, 0x9992, 0x1, 0x1);
        gbc.writeMem(0xe049, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4823);
        EXPECT(gbc.pc(), 0xe04a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe049), 0x4f);
        // 4F 0114
        gbc.setState(0x875e, 0xc48a, 0xc10, 0x9214, 0xff85, 0x125b, 0x1, 0x0);
        gbc.writeMem(0x875e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc48a);
        EXPECT(gbc.pc(), 0x875f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875e), 0x4f);
        // 4F 0116
        gbc.setState(0xb836, 0x2d81, 0x510, 0xed6e, 0xd67f, 0x58c9, 0x1, 0x1);
        gbc.writeMem(0xb836, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2d81);
        EXPECT(gbc.pc(), 0xb837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb836), 0x4f);
        // 4F 0117
        gbc.setState(0x501b, 0xce10, 0x320, 0xcb2f, 0xa3c2, 0x77b5, 0x1, 0x1);
        gbc.writeMem(0x501b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xce10);
        EXPECT(gbc.pc(), 0x501c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0119
        gbc.setState(0x8ad7, 0x7b, 0xfed0, 0x69e9, 0x89dd, 0x5408, 0x0, 0x1);
        gbc.writeMem(0x8ad7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7b);
        EXPECT(gbc.pc(), 0x8ad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ad7), 0x4f);
        // 4F 011A
        gbc.setState(0xab69, 0x3897, 0x74b0, 0x483f, 0x89db, 0x33dc, 0x0, 0x1);
        gbc.writeMem(0xab69, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3897);
        EXPECT(gbc.pc(), 0xab6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab69), 0x4f);
        // 4F 011B
        gbc.setState(0xb064, 0x8b19, 0xbc0, 0x1a9a, 0xd5af, 0xa154, 0x0, 0x1);
        gbc.writeMem(0xb064, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x8b19);
        EXPECT(gbc.pc(), 0xb065);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb064), 0x4f);
        // 4F 011C
        gbc.setState(0x5fb9, 0xfe7c, 0x1e90, 0xa04b, 0x72cc, 0xfc8d, 0x1, 0x0);
        gbc.writeMem(0x5fb9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xfe7c);
        EXPECT(gbc.pc(), 0x5fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 011D
        gbc.setState(0x6c13, 0x1685, 0x2790, 0x3c27, 0xed59, 0x1ee, 0x1, 0x0);
        gbc.writeMem(0x6c13, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1685);
        EXPECT(gbc.pc(), 0x6c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 011F
        gbc.setState(0x6c8a, 0x6cda, 0x65d0, 0xa865, 0x50b6, 0x50f, 0x1, 0x0);
        gbc.writeMem(0x6c8a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x6cda);
        EXPECT(gbc.pc(), 0x6c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0120
        gbc.setState(0x4253, 0x23a3, 0x40f0, 0x2c5e, 0x6cfb, 0x7480, 0x0, 0x0);
        gbc.writeMem(0x4253, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x23a3);
        EXPECT(gbc.pc(), 0x4254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0121
        gbc.setState(0xb85a, 0xafb, 0xbf80, 0xdd8, 0x5660, 0x117e, 0x1, 0x0);
        gbc.writeMem(0xb85a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xafb);
        EXPECT(gbc.pc(), 0xb85b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85a), 0x4f);
        // 4F 0123
        gbc.setState(0x2b48, 0x6e28, 0x98f0, 0xf031, 0x60a9, 0x9843, 0x1, 0x0);
        gbc.writeMem(0x2b48, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6e28);
        EXPECT(gbc.pc(), 0x2b49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0124
        gbc.setState(0xe923, 0xe72c, 0x3e50, 0xcd69, 0x8fa3, 0x5e5, 0x1, 0x1);
        gbc.writeMem(0xe923, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xe72c);
        EXPECT(gbc.pc(), 0xe924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe923), 0x4f);
        // 4F 0126
        gbc.setState(0xe2be, 0x8d15, 0x7e10, 0xe91b, 0x5b67, 0x7ed5, 0x1, 0x1);
        gbc.writeMem(0xe2be, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x8d15);
        EXPECT(gbc.pc(), 0xe2bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2be), 0x4f);
        // 4F 0127
        gbc.setState(0x9c49, 0x260c, 0x1390, 0xb719, 0x89d7, 0x2fc5, 0x0, 0x0);
        gbc.writeMem(0x9c49, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x260c);
        EXPECT(gbc.pc(), 0x9c4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c49), 0x4f);
        // 4F 0128
        gbc.setState(0x8ae2, 0xd86d, 0xda90, 0xf1a9, 0x816a, 0xf778, 0x0, 0x0);
        gbc.writeMem(0x8ae2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd86d);
        EXPECT(gbc.pc(), 0x8ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae2), 0x4f);
        // 4F 0129
        gbc.setState(0x28e3, 0xf78f, 0xb10, 0xa431, 0x266a, 0x166c, 0x0, 0x1);
        gbc.writeMem(0x28e3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf78f);
        EXPECT(gbc.pc(), 0x28e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 012A
        gbc.setState(0xc5b9, 0xbc7b, 0xdbd0, 0xe14, 0x4f09, 0xa4e7, 0x0, 0x1);
        gbc.writeMem(0xc5b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xbc7b);
        EXPECT(gbc.pc(), 0xc5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b9), 0x4f);
        // 4F 012B
        gbc.setState(0x21ff, 0x9e45, 0xc460, 0x3506, 0x84d4, 0x6c00, 0x1, 0x0);
        gbc.writeMem(0x21ff, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9e45);
        EXPECT(gbc.pc(), 0x2200);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 012C
        gbc.setState(0x7788, 0x3f90, 0xca70, 0xcc53, 0x8482, 0xbc01, 0x1, 0x0);
        gbc.writeMem(0x7788, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3f90);
        EXPECT(gbc.pc(), 0x7789);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 012D
        gbc.setState(0x8f76, 0xb79e, 0xfbc0, 0x8c1c, 0x5521, 0x16a7, 0x0, 0x0);
        gbc.writeMem(0x8f76, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb79e);
        EXPECT(gbc.pc(), 0x8f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f76), 0x4f);
        // 4F 012E
        gbc.setState(0x7625, 0x44ce, 0x84e0, 0xa1be, 0x97ce, 0x628, 0x0, 0x0);
        gbc.writeMem(0x7625, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x44ce);
        EXPECT(gbc.pc(), 0x7626);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 012F
        gbc.setState(0xc1e1, 0xac94, 0xdf60, 0xc97a, 0x9986, 0x4211, 0x0, 0x1);
        gbc.writeMem(0xc1e1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xac94);
        EXPECT(gbc.pc(), 0xc1e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e1), 0x4f);
        // 4F 0130
        gbc.setState(0x3863, 0xf412, 0xcc90, 0x7f60, 0x6f11, 0xc1b5, 0x1, 0x1);
        gbc.writeMem(0x3863, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf412);
        EXPECT(gbc.pc(), 0x3864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0131
        gbc.setState(0x9f5c, 0xde29, 0x78a0, 0x2239, 0x8986, 0x9efd, 0x1, 0x0);
        gbc.writeMem(0x9f5c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xde29);
        EXPECT(gbc.pc(), 0x9f5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f5c), 0x4f);
        // 4F 0132
        gbc.setState(0x10da, 0x151b, 0xa490, 0x12fb, 0xc22b, 0xd959, 0x1, 0x1);
        gbc.writeMem(0x10da, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x151b);
        EXPECT(gbc.pc(), 0x10db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0133
        gbc.setState(0xb65a, 0x1c29, 0x82f0, 0xb0aa, 0xd6cd, 0x336c, 0x0, 0x1);
        gbc.writeMem(0xb65a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1c29);
        EXPECT(gbc.pc(), 0xb65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb65a), 0x4f);
        // 4F 0134
        gbc.setState(0x5fe9, 0xa255, 0x3dc0, 0x86b1, 0xfa7c, 0x94dc, 0x0, 0x1);
        gbc.writeMem(0x5fe9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa255);
        EXPECT(gbc.pc(), 0x5fea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0135
        gbc.setState(0x50ac, 0xfb4a, 0xb870, 0x681a, 0xa277, 0x1294, 0x0, 0x0);
        gbc.writeMem(0x50ac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfb4a);
        EXPECT(gbc.pc(), 0x50ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0136
        gbc.setState(0x7f7a, 0x4ca3, 0xf8a0, 0x841a, 0x29aa, 0x1fd3, 0x0, 0x0);
        gbc.writeMem(0x7f7a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4ca3);
        EXPECT(gbc.pc(), 0x7f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0137
        gbc.setState(0x36e7, 0xa05d, 0x1260, 0x5e40, 0xd890, 0xa373, 0x0, 0x1);
        gbc.writeMem(0x36e7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa05d);
        EXPECT(gbc.pc(), 0x36e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0138
        gbc.setState(0x90fe, 0xc589, 0xd3f0, 0xeed, 0x169c, 0xed16, 0x0, 0x1);
        gbc.writeMem(0x90fe, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xc589);
        EXPECT(gbc.pc(), 0x90ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90fe), 0x4f);
        // 4F 0139
        gbc.setState(0x317b, 0x11bd, 0x42c0, 0x1764, 0xac14, 0x8c78, 0x0, 0x1);
        gbc.writeMem(0x317b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x11bd);
        EXPECT(gbc.pc(), 0x317c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 013A
        gbc.setState(0xa954, 0x71a, 0x9600, 0x5a5b, 0x2167, 0x646e, 0x0, 0x1);
        gbc.writeMem(0xa954, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x71a);
        EXPECT(gbc.pc(), 0xa955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa954), 0x4f);
        // 4F 013B
        gbc.setState(0xd155, 0x7ad4, 0x7320, 0xc736, 0x9915, 0x8db6, 0x1, 0x1);
        gbc.writeMem(0xd155, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7ad4);
        EXPECT(gbc.pc(), 0xd156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd155), 0x4f);
        // 4F 013C
        gbc.setState(0x5f9a, 0x7970, 0x5140, 0x5903, 0xf110, 0x281e, 0x0, 0x0);
        gbc.writeMem(0x5f9a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7970);
        EXPECT(gbc.pc(), 0x5f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 013D
        gbc.setState(0x2f75, 0x52d, 0x3580, 0x399b, 0x1a26, 0x436d, 0x0, 0x1);
        gbc.writeMem(0x2f75, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0x2f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 013E
        gbc.setState(0x4e38, 0x43dd, 0x5830, 0x2474, 0x62ef, 0xda36, 0x0, 0x0);
        gbc.writeMem(0x4e38, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x43dd);
        EXPECT(gbc.pc(), 0x4e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 013F
        gbc.setState(0xa15, 0xc00b, 0xef30, 0x21af, 0x4eec, 0xc955, 0x0, 0x1);
        gbc.writeMem(0xa15, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc00b);
        EXPECT(gbc.pc(), 0xa16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0140
        gbc.setState(0x1537, 0xfac1, 0x1f80, 0x75e0, 0x67cc, 0x3fb1, 0x1, 0x1);
        gbc.writeMem(0x1537, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xfac1);
        EXPECT(gbc.pc(), 0x1538);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0141
        gbc.setState(0xbed1, 0xeaf7, 0x3450, 0xd5f0, 0xe4de, 0xa377, 0x0, 0x0);
        gbc.writeMem(0xbed1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xeaf7);
        EXPECT(gbc.pc(), 0xbed2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbed1), 0x4f);
        // 4F 0142
        gbc.setState(0xb9c3, 0xb01c, 0xbd50, 0x8b8c, 0x94be, 0x5b62, 0x0, 0x1);
        gbc.writeMem(0xb9c3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xb01c);
        EXPECT(gbc.pc(), 0xb9c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c3), 0x4f);
        // 4F 0143
        gbc.setState(0x221f, 0x68d6, 0xd850, 0x6b99, 0x1fac, 0xc857, 0x1, 0x1);
        gbc.writeMem(0x221f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x68d6);
        EXPECT(gbc.pc(), 0x2220);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0144
        gbc.setState(0x9467, 0xfab8, 0x59c0, 0x274c, 0xf9f8, 0x6084, 0x1, 0x0);
        gbc.writeMem(0x9467, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xfab8);
        EXPECT(gbc.pc(), 0x9468);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9467), 0x4f);
        // 4F 0145
        gbc.setState(0x9a2b, 0xfca, 0x46c0, 0x528d, 0xc326, 0x446c, 0x0, 0x1);
        gbc.writeMem(0x9a2b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xfca);
        EXPECT(gbc.pc(), 0x9a2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a2b), 0x4f);
        // 4F 0146
        gbc.setState(0x3ac5, 0x7532, 0xfda0, 0x5f29, 0x85f2, 0xed13, 0x0, 0x1);
        gbc.writeMem(0x3ac5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0x3ac6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0147
        gbc.setState(0x3d1c, 0xc36, 0x6580, 0x1e7a, 0x548d, 0x3cc6, 0x1, 0x1);
        gbc.writeMem(0x3d1c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc36);
        EXPECT(gbc.pc(), 0x3d1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0148
        gbc.setState(0x486a, 0xc849, 0x6830, 0x6d62, 0x6cde, 0x86a1, 0x0, 0x1);
        gbc.writeMem(0x486a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc849);
        EXPECT(gbc.pc(), 0x486b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0149
        gbc.setState(0x9dbe, 0x3cf4, 0x9220, 0x394b, 0xd48b, 0xcd1e, 0x0, 0x1);
        gbc.writeMem(0x9dbe, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3cf4);
        EXPECT(gbc.pc(), 0x9dbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dbe), 0x4f);
        // 4F 014A
        gbc.setState(0x5515, 0x6856, 0x2730, 0x3223, 0x6f7e, 0x43ef, 0x1, 0x0);
        gbc.writeMem(0x5515, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6856);
        EXPECT(gbc.pc(), 0x5516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 014B
        gbc.setState(0x961e, 0xf4c2, 0xdc0, 0xc614, 0x430c, 0xdf30, 0x1, 0x1);
        gbc.writeMem(0x961e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf4c2);
        EXPECT(gbc.pc(), 0x961f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x961e), 0x4f);
        // 4F 014C
        gbc.setState(0x361d, 0xca64, 0xa420, 0xad52, 0x4cd2, 0x698e, 0x1, 0x0);
        gbc.writeMem(0x361d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xca64);
        EXPECT(gbc.pc(), 0x361e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 014D
        gbc.setState(0x91b2, 0x96de, 0x9670, 0x8cdf, 0x5421, 0xa60b, 0x1, 0x0);
        gbc.writeMem(0x91b2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x96de);
        EXPECT(gbc.pc(), 0x91b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b2), 0x4f);
        // 4F 014E
        gbc.setState(0x7ddc, 0xe47b, 0xbc50, 0x89ff, 0x168b, 0x22c1, 0x0, 0x0);
        gbc.writeMem(0x7ddc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe47b);
        EXPECT(gbc.pc(), 0x7ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 014F
        gbc.setState(0xd26c, 0x634f, 0x3ff0, 0xd516, 0xa22c, 0x489e, 0x1, 0x0);
        gbc.writeMem(0xd26c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x634f);
        EXPECT(gbc.pc(), 0xd26d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd26c), 0x4f);
        // 4F 0150
        gbc.setState(0x2d4b, 0x75b0, 0x9f50, 0xfafc, 0xbad5, 0x1a99, 0x0, 0x1);
        gbc.writeMem(0x2d4b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x75b0);
        EXPECT(gbc.pc(), 0x2d4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0151
        gbc.setState(0x7df4, 0xbc9a, 0xf3a0, 0x5098, 0x1c9b, 0x4222, 0x1, 0x0);
        gbc.writeMem(0x7df4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xbc9a);
        EXPECT(gbc.pc(), 0x7df5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0152
        gbc.setState(0xd498, 0xd446, 0x5850, 0xf843, 0x6be7, 0xef5a, 0x1, 0x1);
        gbc.writeMem(0xd498, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd446);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0x4f);
        // 4F 0153
        gbc.setState(0xd9f4, 0x5703, 0x4e40, 0xa42f, 0x4136, 0xba72, 0x1, 0x1);
        gbc.writeMem(0xd9f4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5703);
        EXPECT(gbc.pc(), 0xd9f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f4), 0x4f);
        // 4F 0154
        gbc.setState(0x6f78, 0x6d35, 0xa800, 0xa83a, 0x2f56, 0x4e1b, 0x0, 0x0);
        gbc.writeMem(0x6f78, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6d35);
        EXPECT(gbc.pc(), 0x6f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0155
        gbc.setState(0x9fd0, 0x3f74, 0xc060, 0xffd7, 0x4a5d, 0x568a, 0x1, 0x1);
        gbc.writeMem(0x9fd0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3f74);
        EXPECT(gbc.pc(), 0x9fd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd0), 0x4f);
        // 4F 0156
        gbc.setState(0x7c26, 0x4ffc, 0x1320, 0x7ec7, 0xa229, 0x4e6d, 0x1, 0x1);
        gbc.writeMem(0x7c26, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4ffc);
        EXPECT(gbc.pc(), 0x7c27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0157
        gbc.setState(0x6607, 0x2785, 0xe4d0, 0x9872, 0xc477, 0x7f42, 0x1, 0x1);
        gbc.writeMem(0x6607, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2785);
        EXPECT(gbc.pc(), 0x6608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0158
        gbc.setState(0x12d, 0xb55f, 0xbf60, 0xd0e3, 0xb5a8, 0xf9c0, 0x1, 0x0);
        gbc.writeMem(0x12d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb55f);
        EXPECT(gbc.pc(), 0x12e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0159
        gbc.setState(0x4f1f, 0xdcbf, 0x7cd0, 0xd679, 0xf141, 0x846f, 0x1, 0x1);
        gbc.writeMem(0x4f1f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xdcbf);
        EXPECT(gbc.pc(), 0x4f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 015A
        gbc.setState(0xc5b5, 0x97b6, 0xe3f0, 0x99aa, 0xa5a1, 0x34a3, 0x1, 0x1);
        gbc.writeMem(0xc5b5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x97b6);
        EXPECT(gbc.pc(), 0xc5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b5), 0x4f);
        // 4F 015B
        gbc.setState(0xe5a1, 0xeabe, 0xb160, 0x21e9, 0xd080, 0x6055, 0x1, 0x0);
        gbc.writeMem(0xe5a1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xeabe);
        EXPECT(gbc.pc(), 0xe5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a1), 0x4f);
        // 4F 015C
        gbc.setState(0x557d, 0x782c, 0x2b20, 0xc979, 0x4b6b, 0xb8fe, 0x1, 0x0);
        gbc.writeMem(0x557d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x782c);
        EXPECT(gbc.pc(), 0x557e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 015D
        gbc.setState(0x11eb, 0xd5aa, 0xb410, 0xebee, 0xbc5, 0x15c6, 0x1, 0x1);
        gbc.writeMem(0x11eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd5aa);
        EXPECT(gbc.pc(), 0x11ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 015E
        gbc.setState(0x79ba, 0x8a61, 0x1e90, 0x334d, 0xbdd6, 0x9f0b, 0x1, 0x1);
        gbc.writeMem(0x79ba, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x8a61);
        EXPECT(gbc.pc(), 0x79bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 015F
        gbc.setState(0x99cb, 0x1e2, 0xc4c0, 0x3868, 0xa971, 0x379d, 0x0, 0x0);
        gbc.writeMem(0x99cb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1e2);
        EXPECT(gbc.pc(), 0x99cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99cb), 0x4f);
        // 4F 0160
        gbc.setState(0x154c, 0x8014, 0xaea0, 0x19b1, 0xe6e5, 0x1d4, 0x0, 0x1);
        gbc.writeMem(0x154c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x8014);
        EXPECT(gbc.pc(), 0x154d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0161
        gbc.setState(0xc37f, 0x1f9d, 0xe710, 0xc3a3, 0xaf2e, 0x18f3, 0x0, 0x1);
        gbc.writeMem(0xc37f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1f9d);
        EXPECT(gbc.pc(), 0xc380);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc37f), 0x4f);
        // 4F 0162
        gbc.setState(0x1bee, 0x3c48, 0xd680, 0xf4d5, 0x35e2, 0x88d8, 0x0, 0x1);
        gbc.writeMem(0x1bee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x3c48);
        EXPECT(gbc.pc(), 0x1bef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0163
        gbc.setState(0x8f45, 0xcaf3, 0x5be0, 0x719c, 0xbae7, 0xdb12, 0x1, 0x1);
        gbc.writeMem(0x8f45, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xcaf3);
        EXPECT(gbc.pc(), 0x8f46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f45), 0x4f);
        // 4F 0164
        gbc.setState(0x9917, 0x9a3b, 0x19f0, 0x3d9c, 0xf3b5, 0x8bcf, 0x1, 0x0);
        gbc.writeMem(0x9917, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x9a3b);
        EXPECT(gbc.pc(), 0x9918);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9917), 0x4f);
        // 4F 0165
        gbc.setState(0x4995, 0x977e, 0x7ba0, 0x1421, 0x11ee, 0xfd0a, 0x1, 0x1);
        gbc.writeMem(0x4995, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x977e);
        EXPECT(gbc.pc(), 0x4996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0166
        gbc.setState(0x7b56, 0x7a3f, 0x43d0, 0x2e46, 0x47e, 0xfd72, 0x1, 0x0);
        gbc.writeMem(0x7b56, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x7a3f);
        EXPECT(gbc.pc(), 0x7b57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0167
        gbc.setState(0x7932, 0x9172, 0x7340, 0xc488, 0xfe1f, 0x8d41, 0x0, 0x1);
        gbc.writeMem(0x7932, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9172);
        EXPECT(gbc.pc(), 0x7933);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0168
        gbc.setState(0xa305, 0x6935, 0x44d0, 0xf977, 0xb3af, 0x45a9, 0x0, 0x1);
        gbc.writeMem(0xa305, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6935);
        EXPECT(gbc.pc(), 0xa306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa305), 0x4f);
        // 4F 0169
        gbc.setState(0x1711, 0x705c, 0xa5f0, 0x59c5, 0xbcb2, 0xd739, 0x0, 0x0);
        gbc.writeMem(0x1711, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x705c);
        EXPECT(gbc.pc(), 0x1712);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 016A
        gbc.setState(0xe975, 0x5972, 0x4760, 0x8602, 0xe718, 0xc76, 0x0, 0x1);
        gbc.writeMem(0xe975, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5972);
        EXPECT(gbc.pc(), 0xe976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe975), 0x4f);
        // 4F 016B
        gbc.setState(0xabb6, 0xf490, 0x6280, 0xea6c, 0xf018, 0x16d7, 0x0, 0x0);
        gbc.writeMem(0xabb6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf490);
        EXPECT(gbc.pc(), 0xabb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabb6), 0x4f);
        // 4F 016C
        gbc.setState(0x1aac, 0x51e5, 0x1610, 0xf691, 0xf4ef, 0xa1e3, 0x0, 0x0);
        gbc.writeMem(0x1aac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x51e5);
        EXPECT(gbc.pc(), 0x1aad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 016E
        gbc.setState(0xd0dc, 0x2a2, 0x5310, 0x36ea, 0xe519, 0x3898, 0x0, 0x0);
        gbc.writeMem(0xd0dc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x2a2);
        EXPECT(gbc.pc(), 0xd0dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0dc), 0x4f);
        // 4F 016F
        gbc.setState(0x5e6f, 0x9f1, 0x4670, 0x6789, 0x6c15, 0x57c9, 0x0, 0x1);
        gbc.writeMem(0x5e6f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x9f1);
        EXPECT(gbc.pc(), 0x5e70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0170
        gbc.setState(0x40bc, 0x9b71, 0x8b90, 0x304, 0x1a4e, 0xc8fa, 0x0, 0x0);
        gbc.writeMem(0x40bc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x9b71);
        EXPECT(gbc.pc(), 0x40bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0171
        gbc.setState(0x7d91, 0xa6e6, 0x8c60, 0x43ee, 0x93de, 0x9a7, 0x0, 0x1);
        gbc.writeMem(0x7d91, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa6e6);
        EXPECT(gbc.pc(), 0x7d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0173
        gbc.setState(0x4f0f, 0xa4c3, 0xb1d0, 0xd7ac, 0xe560, 0xa1cb, 0x1, 0x1);
        gbc.writeMem(0x4f0f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa4c3);
        EXPECT(gbc.pc(), 0x4f10);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0174
        gbc.setState(0xb430, 0xba11, 0x7780, 0x383d, 0x7b1e, 0x161f, 0x0, 0x0);
        gbc.writeMem(0xb430, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xba11);
        EXPECT(gbc.pc(), 0xb431);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb430), 0x4f);
        // 4F 0175
        gbc.setState(0x7db2, 0x66a5, 0x5d70, 0xdcad, 0xe877, 0xda2c, 0x0, 0x0);
        gbc.writeMem(0x7db2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x66a5);
        EXPECT(gbc.pc(), 0x7db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0176
        gbc.setState(0xb889, 0x5beb, 0x70a0, 0x5dca, 0xce7e, 0x8d14, 0x1, 0x1);
        gbc.writeMem(0xb889, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5beb);
        EXPECT(gbc.pc(), 0xb88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb889), 0x4f);
        // 4F 0177
        gbc.setState(0x1a5d, 0xcb49, 0xafc0, 0x8a90, 0x26fb, 0xd60b, 0x0, 0x1);
        gbc.writeMem(0x1a5d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xcb49);
        EXPECT(gbc.pc(), 0x1a5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0178
        gbc.setState(0xebef, 0x46b7, 0x8520, 0x71f0, 0xc019, 0x764a, 0x1, 0x1);
        gbc.writeMem(0xebef, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x46b7);
        EXPECT(gbc.pc(), 0xebf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebef), 0x4f);
        // 4F 0179
        gbc.setState(0xf9f, 0xcebe, 0x4690, 0xc908, 0xe630, 0x50a4, 0x1, 0x0);
        gbc.writeMem(0xf9f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xcebe);
        EXPECT(gbc.pc(), 0xfa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 017B
        gbc.setState(0xfc, 0x9110, 0xdea0, 0x2a6c, 0x3353, 0xc879, 0x0, 0x0);
        gbc.writeMem(0xfc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9110);
        EXPECT(gbc.pc(), 0xfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 017C
        gbc.setState(0xa7fe, 0x2b9e, 0xd9f0, 0x30b0, 0x8a5, 0x83e2, 0x1, 0x1);
        gbc.writeMem(0xa7fe, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x2b9e);
        EXPECT(gbc.pc(), 0xa7ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7fe), 0x4f);
        // 4F 017D
        gbc.setState(0x655b, 0xee09, 0xc940, 0xcad0, 0xc15b, 0x7b06, 0x1, 0x0);
        gbc.writeMem(0x655b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xee09);
        EXPECT(gbc.pc(), 0x655c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 017E
        gbc.setState(0x8e3c, 0x34c2, 0x3f90, 0x9e4e, 0x274f, 0x1d7, 0x0, 0x1);
        gbc.writeMem(0x8e3c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x34c2);
        EXPECT(gbc.pc(), 0x8e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3c), 0x4f);
        // 4F 017F
        gbc.setState(0x1330, 0x48dc, 0xd040, 0x6741, 0xe887, 0xea6c, 0x1, 0x0);
        gbc.writeMem(0x1330, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x48dc);
        EXPECT(gbc.pc(), 0x1331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0180
        gbc.setState(0xb683, 0xff6d, 0x7340, 0x269c, 0xaee5, 0x84f0, 0x0, 0x0);
        gbc.writeMem(0xb683, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xff6d);
        EXPECT(gbc.pc(), 0xb684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb683), 0x4f);
        // 4F 0181
        gbc.setState(0x9357, 0x9fc, 0xbd20, 0xbedf, 0x7abb, 0x6ae0, 0x1, 0x1);
        gbc.writeMem(0x9357, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9fc);
        EXPECT(gbc.pc(), 0x9358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9357), 0x4f);
        // 4F 0182
        gbc.setState(0x533c, 0x73be, 0xeec0, 0x4e26, 0xf003, 0x49de, 0x0, 0x0);
        gbc.writeMem(0x533c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x73be);
        EXPECT(gbc.pc(), 0x533d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0183
        gbc.setState(0x1824, 0xa849, 0x2bc0, 0x95b3, 0x550e, 0xe44f, 0x1, 0x1);
        gbc.writeMem(0x1824, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa849);
        EXPECT(gbc.pc(), 0x1825);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0184
        gbc.setState(0x3d97, 0x9c1c, 0x50f0, 0xdb32, 0x7fa8, 0xb96a, 0x0, 0x1);
        gbc.writeMem(0x3d97, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9c1c);
        EXPECT(gbc.pc(), 0x3d98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0185
        gbc.setState(0xa93d, 0x296e, 0xbd70, 0x8de5, 0xbac0, 0xdd0e, 0x0, 0x1);
        gbc.writeMem(0xa93d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x296e);
        EXPECT(gbc.pc(), 0xa93e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa93d), 0x4f);
        // 4F 0186
        gbc.setState(0xd1f8, 0xac02, 0xda0, 0xb4f1, 0xd54c, 0xc42a, 0x1, 0x0);
        gbc.writeMem(0xd1f8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xac02);
        EXPECT(gbc.pc(), 0xd1f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f8), 0x4f);
        // 4F 0187
        gbc.setState(0xc904, 0x8a0e, 0x20a0, 0xb1be, 0xd7e8, 0x29e6, 0x1, 0x1);
        gbc.writeMem(0xc904, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8a0e);
        EXPECT(gbc.pc(), 0xc905);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc904), 0x4f);
        // 4F 0188
        gbc.setState(0xe776, 0x20db, 0xcc70, 0x7c22, 0xecd6, 0x9945, 0x1, 0x1);
        gbc.writeMem(0xe776, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x20db);
        EXPECT(gbc.pc(), 0xe777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe776), 0x4f);
        // 4F 0189
        gbc.setState(0xe7de, 0xe4b5, 0xf30, 0x57b8, 0xbbf5, 0xab30, 0x1, 0x1);
        gbc.writeMem(0xe7de, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe4b5);
        EXPECT(gbc.pc(), 0xe7df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7de), 0x4f);
        // 4F 018A
        gbc.setState(0x33c3, 0x3150, 0xc850, 0xa5ca, 0xe7f, 0x657c, 0x1, 0x1);
        gbc.writeMem(0x33c3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x3150);
        EXPECT(gbc.pc(), 0x33c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 018B
        gbc.setState(0x19c4, 0xcaf2, 0x4760, 0x669e, 0x5b4f, 0xf35, 0x0, 0x1);
        gbc.writeMem(0x19c4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xcaf2);
        EXPECT(gbc.pc(), 0x19c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 018C
        gbc.setState(0x1439, 0x3a90, 0x2fa0, 0x30d0, 0xc8d9, 0x41e1, 0x1, 0x0);
        gbc.writeMem(0x1439, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3a90);
        EXPECT(gbc.pc(), 0x143a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 018D
        gbc.setState(0x7ec4, 0x8ddf, 0x8f50, 0x4e39, 0xc6c, 0xe3d6, 0x0, 0x0);
        gbc.writeMem(0x7ec4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8ddf);
        EXPECT(gbc.pc(), 0x7ec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 018E
        gbc.setState(0x2def, 0x9275, 0x6530, 0xb015, 0x328d, 0x2eb, 0x0, 0x1);
        gbc.writeMem(0x2def, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9275);
        EXPECT(gbc.pc(), 0x2df0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 018F
        gbc.setState(0x226d, 0x2d04, 0x1de0, 0x2bce, 0xc055, 0xd25d, 0x1, 0x1);
        gbc.writeMem(0x226d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2d04);
        EXPECT(gbc.pc(), 0x226e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0190
        gbc.setState(0x59dd, 0x2244, 0x8f40, 0x3d72, 0xf032, 0xfcf0, 0x1, 0x0);
        gbc.writeMem(0x59dd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2244);
        EXPECT(gbc.pc(), 0x59de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0191
        gbc.setState(0xc7ef, 0x56d, 0x7530, 0xe8f6, 0x9ae9, 0x1fcb, 0x1, 0x1);
        gbc.writeMem(0xc7ef, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x56d);
        EXPECT(gbc.pc(), 0xc7f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7ef), 0x4f);
        // 4F 0193
        gbc.setState(0x8770, 0x5c2c, 0x9cb0, 0x67ff, 0xe96d, 0xf59a, 0x0, 0x1);
        gbc.writeMem(0x8770, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5c2c);
        EXPECT(gbc.pc(), 0x8771);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8770), 0x4f);
        // 4F 0194
        gbc.setState(0x2ea4, 0x971f, 0xa1b0, 0xed3, 0x4a8a, 0x3f9e, 0x0, 0x1);
        gbc.writeMem(0x2ea4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x971f);
        EXPECT(gbc.pc(), 0x2ea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0195
        gbc.setState(0xa793, 0xfc23, 0x4600, 0xf904, 0xd6f5, 0x9a89, 0x0, 0x0);
        gbc.writeMem(0xa793, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfc23);
        EXPECT(gbc.pc(), 0xa794);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa793), 0x4f);
        // 4F 0196
        gbc.setState(0xd38c, 0x7091, 0xe260, 0xc6fd, 0xc02b, 0x9423, 0x0, 0x0);
        gbc.writeMem(0xd38c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7091);
        EXPECT(gbc.pc(), 0xd38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38c), 0x4f);
        // 4F 0197
        gbc.setState(0x88af, 0x917a, 0x9950, 0x2b3b, 0x902a, 0x9386, 0x0, 0x0);
        gbc.writeMem(0x88af, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x917a);
        EXPECT(gbc.pc(), 0x88b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88af), 0x4f);
        // 4F 0198
        gbc.setState(0x9536, 0xeede, 0xcd0, 0xb548, 0x2dd8, 0x9e2c, 0x1, 0x0);
        gbc.writeMem(0x9536, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xeede);
        EXPECT(gbc.pc(), 0x9537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9536), 0x4f);
        // 4F 0199
        gbc.setState(0xba94, 0xde1a, 0x3710, 0x571f, 0x92a6, 0x67d1, 0x1, 0x0);
        gbc.writeMem(0xba94, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xde1a);
        EXPECT(gbc.pc(), 0xba95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba94), 0x4f);
        // 4F 019A
        gbc.setState(0x2382, 0xf311, 0x540, 0x2a41, 0xd249, 0x873b, 0x0, 0x0);
        gbc.writeMem(0x2382, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf311);
        EXPECT(gbc.pc(), 0x2383);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 019B
        gbc.setState(0x3e8b, 0xdfd6, 0xe60, 0x38dd, 0xc879, 0xcf51, 0x0, 0x0);
        gbc.writeMem(0x3e8b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdfd6);
        EXPECT(gbc.pc(), 0x3e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 019C
        gbc.setState(0xe1e8, 0xf9f, 0x7eb0, 0x2ea1, 0x3797, 0xb3a2, 0x0, 0x0);
        gbc.writeMem(0xe1e8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf9f);
        EXPECT(gbc.pc(), 0xe1e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e8), 0x4f);
        // 4F 019D
        gbc.setState(0x14ab, 0x382e, 0xe8f0, 0x1b62, 0x46b, 0x32b6, 0x0, 0x0);
        gbc.writeMem(0x14ab, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x382e);
        EXPECT(gbc.pc(), 0x14ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 019E
        gbc.setState(0x8654, 0x4735, 0x6930, 0x84d4, 0x61cf, 0xd8c0, 0x1, 0x0);
        gbc.writeMem(0x8654, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4735);
        EXPECT(gbc.pc(), 0x8655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8654), 0x4f);
        // 4F 019F
        gbc.setState(0xa219, 0x92bf, 0xc2f0, 0xd945, 0x5324, 0x94ed, 0x1, 0x1);
        gbc.writeMem(0xa219, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x92bf);
        EXPECT(gbc.pc(), 0xa21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa219), 0x4f);
        // 4F 01A0
        gbc.setState(0x22e8, 0x757f, 0x9260, 0xfe8e, 0x6784, 0xd599, 0x0, 0x1);
        gbc.writeMem(0x22e8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x757f);
        EXPECT(gbc.pc(), 0x22e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01A1
        gbc.setState(0xb4a8, 0x40ac, 0x5bf0, 0x23b0, 0x5f30, 0xeba7, 0x1, 0x0);
        gbc.writeMem(0xb4a8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x40ac);
        EXPECT(gbc.pc(), 0xb4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4a8), 0x4f);
        // 4F 01A2
        gbc.setState(0x9de6, 0x3792, 0xc490, 0xb62d, 0x6d56, 0xf529, 0x1, 0x0);
        gbc.writeMem(0x9de6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3792);
        EXPECT(gbc.pc(), 0x9de7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9de6), 0x4f);
        // 4F 01A3
        gbc.setState(0x84f5, 0x8dd6, 0x9400, 0x1f38, 0x6b45, 0xecbb, 0x0, 0x0);
        gbc.writeMem(0x84f5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8dd6);
        EXPECT(gbc.pc(), 0x84f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f5), 0x4f);
        // 4F 01A4
        gbc.setState(0xdd39, 0xe0a4, 0xf160, 0x81f6, 0x8657, 0xd839, 0x0, 0x0);
        gbc.writeMem(0xdd39, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe0a4);
        EXPECT(gbc.pc(), 0xdd3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd39), 0x4f);
        // 4F 01A5
        gbc.setState(0x59fd, 0x44e, 0x5f00, 0x509b, 0xc6b5, 0x3b7e, 0x0, 0x0);
        gbc.writeMem(0x59fd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x44e);
        EXPECT(gbc.pc(), 0x59fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01A6
        gbc.setState(0x556c, 0xe6b5, 0xed80, 0x1ec0, 0xd235, 0xe55e, 0x0, 0x1);
        gbc.writeMem(0x556c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xe6b5);
        EXPECT(gbc.pc(), 0x556d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01A7
        gbc.setState(0x67fc, 0xc820, 0xf980, 0xe749, 0x651e, 0x91ab, 0x0, 0x0);
        gbc.writeMem(0x67fc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc820);
        EXPECT(gbc.pc(), 0x67fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01A8
        gbc.setState(0x38c1, 0xa9bb, 0x1a0, 0x4283, 0xcd47, 0xfcdf, 0x1, 0x0);
        gbc.writeMem(0x38c1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa9bb);
        EXPECT(gbc.pc(), 0x38c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01A9
        gbc.setState(0x7fc7, 0x5e2e, 0xca40, 0x54bb, 0xa307, 0x329e, 0x1, 0x0);
        gbc.writeMem(0x7fc7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5e2e);
        EXPECT(gbc.pc(), 0x7fc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01AA
        gbc.setState(0xa164, 0xe49d, 0xfd60, 0x72f0, 0xad68, 0x7f3c, 0x0, 0x1);
        gbc.writeMem(0xa164, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe49d);
        EXPECT(gbc.pc(), 0xa165);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa164), 0x4f);
        // 4F 01AB
        gbc.setState(0x5cb, 0x8ef9, 0x3690, 0xf79c, 0x80ca, 0xd598, 0x1, 0x0);
        gbc.writeMem(0x5cb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x8ef9);
        EXPECT(gbc.pc(), 0x5cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01AC
        gbc.setState(0x54e6, 0xb2d, 0x5890, 0x41c5, 0xb9a3, 0x47c, 0x1, 0x0);
        gbc.writeMem(0x54e6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xb2d);
        EXPECT(gbc.pc(), 0x54e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01AE
        gbc.setState(0xd7fd, 0xcee4, 0xabe0, 0xbe, 0x9fb3, 0x5245, 0x0, 0x0);
        gbc.writeMem(0xd7fd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcee4);
        EXPECT(gbc.pc(), 0xd7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7fd), 0x4f);
        // 4F 01AF
        gbc.setState(0x3691, 0x4af3, 0xc820, 0x6962, 0x32c0, 0x1c01, 0x0, 0x0);
        gbc.writeMem(0x3691, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4af3);
        EXPECT(gbc.pc(), 0x3692);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01B0
        gbc.setState(0xdef5, 0xf6b1, 0xf390, 0x7453, 0xb3cf, 0x15d2, 0x0, 0x1);
        gbc.writeMem(0xdef5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf6b1);
        EXPECT(gbc.pc(), 0xdef6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef5), 0x4f);
        // 4F 01B1
        gbc.setState(0x92ea, 0x896f, 0x5d00, 0xaf9, 0xb115, 0x7e41, 0x1, 0x1);
        gbc.writeMem(0x92ea, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x896f);
        EXPECT(gbc.pc(), 0x92eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ea), 0x4f);
        // 4F 01B2
        gbc.setState(0xdf11, 0xae8f, 0x5220, 0x473e, 0x708a, 0xbfe8, 0x1, 0x1);
        gbc.writeMem(0xdf11, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xae8f);
        EXPECT(gbc.pc(), 0xdf12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf11), 0x4f);
        // 4F 01B3
        gbc.setState(0xe69c, 0x2ce1, 0x2c10, 0x3bf0, 0xe6cd, 0x51e9, 0x0, 0x0);
        gbc.writeMem(0xe69c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2ce1);
        EXPECT(gbc.pc(), 0xe69d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe69c), 0x4f);
        // 4F 01B4
        gbc.setState(0x205, 0x1dde, 0xf40, 0x67dd, 0xdd01, 0x9d24, 0x1, 0x0);
        gbc.writeMem(0x205, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1dde);
        EXPECT(gbc.pc(), 0x206);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01B5
        gbc.setState(0x8df9, 0x5500, 0x690, 0x1add, 0x1013, 0xbbad, 0x0, 0x1);
        gbc.writeMem(0x8df9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x5500);
        EXPECT(gbc.pc(), 0x8dfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df9), 0x4f);
        // 4F 01B6
        gbc.setState(0x954, 0xef07, 0x78d0, 0x4e2c, 0x4136, 0xb980, 0x0, 0x0);
        gbc.writeMem(0x954, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xef07);
        EXPECT(gbc.pc(), 0x955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01B7
        gbc.setState(0xc4aa, 0x82fe, 0xa620, 0x8560, 0x28a1, 0xab0b, 0x1, 0x0);
        gbc.writeMem(0xc4aa, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x82fe);
        EXPECT(gbc.pc(), 0xc4ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4aa), 0x4f);
        // 4F 01B8
        gbc.setState(0xae53, 0xac8e, 0xb630, 0x298a, 0xb263, 0x3c1a, 0x0, 0x1);
        gbc.writeMem(0xae53, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xac8e);
        EXPECT(gbc.pc(), 0xae54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae53), 0x4f);
        // 4F 01B9
        gbc.setState(0x4179, 0xaa1e, 0xdd20, 0x5a78, 0xeb2, 0xfb16, 0x0, 0x1);
        gbc.writeMem(0x4179, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xaa1e);
        EXPECT(gbc.pc(), 0x417a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01BA
        gbc.setState(0x8d9, 0xc26a, 0x4710, 0xd04c, 0x3e03, 0x5ff4, 0x1, 0x0);
        gbc.writeMem(0x8d9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc26a);
        EXPECT(gbc.pc(), 0x8da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01BB
        gbc.setState(0xe97a, 0x6c66, 0xada0, 0x58e1, 0x1da0, 0x78d5, 0x0, 0x0);
        gbc.writeMem(0xe97a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6c66);
        EXPECT(gbc.pc(), 0xe97b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe97a), 0x4f);
        // 4F 01BC
        gbc.setState(0x5df4, 0xac2a, 0xd490, 0x5c48, 0x73e8, 0xeb71, 0x0, 0x1);
        gbc.writeMem(0x5df4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xac2a);
        EXPECT(gbc.pc(), 0x5df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01BD
        gbc.setState(0x57b1, 0xda5f, 0xefa0, 0xed9e, 0x1437, 0x33aa, 0x0, 0x0);
        gbc.writeMem(0x57b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xda5f);
        EXPECT(gbc.pc(), 0x57b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01BE
        gbc.setState(0x3454, 0x8050, 0x9290, 0x44f2, 0x7240, 0xf3d0, 0x1, 0x0);
        gbc.writeMem(0x3454, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8050);
        EXPECT(gbc.pc(), 0x3455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01BF
        gbc.setState(0xefe2, 0xa45b, 0xeb00, 0x4ec8, 0xdee1, 0xebf8, 0x1, 0x0);
        gbc.writeMem(0xefe2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xa45b);
        EXPECT(gbc.pc(), 0xefe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe2), 0x4f);
        // 4F 01C0
        gbc.setState(0x9eb9, 0x7e21, 0x1f50, 0xe562, 0xbbc0, 0xbe, 0x1, 0x0);
        gbc.writeMem(0x9eb9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7e21);
        EXPECT(gbc.pc(), 0x9eba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eb9), 0x4f);
        // 4F 01C1
        gbc.setState(0x7f15, 0x450e, 0x1600, 0x58a9, 0xd735, 0xc970, 0x1, 0x1);
        gbc.writeMem(0x7f15, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x450e);
        EXPECT(gbc.pc(), 0x7f16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01C2
        gbc.setState(0x779d, 0xfd64, 0x63b0, 0xf4d5, 0x3128, 0x8400, 0x0, 0x1);
        gbc.writeMem(0x779d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfd64);
        EXPECT(gbc.pc(), 0x779e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01C4
        gbc.setState(0xde94, 0xe695, 0xd260, 0xd78, 0xcb00, 0xb0de, 0x0, 0x0);
        gbc.writeMem(0xde94, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe695);
        EXPECT(gbc.pc(), 0xde95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde94), 0x4f);
        // 4F 01C5
        gbc.setState(0xebd0, 0xdc6, 0x2b0, 0x5fd8, 0xc91a, 0x37ce, 0x1, 0x0);
        gbc.writeMem(0xebd0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xdc6);
        EXPECT(gbc.pc(), 0xebd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebd0), 0x4f);
        // 4F 01C7
        gbc.setState(0xa70e, 0x816a, 0x220, 0x79c4, 0x8afa, 0x9a85, 0x0, 0x1);
        gbc.writeMem(0xa70e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x816a);
        EXPECT(gbc.pc(), 0xa70f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa70e), 0x4f);
        // 4F 01C8
        gbc.setState(0xad12, 0x6733, 0xce70, 0xb7db, 0x431b, 0x6a8c, 0x1, 0x0);
        gbc.writeMem(0xad12, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x6733);
        EXPECT(gbc.pc(), 0xad13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad12), 0x4f);
        // 4F 01C9
        gbc.setState(0x768a, 0xf7b7, 0xf040, 0xc88e, 0xa73, 0x6db5, 0x1, 0x0);
        gbc.writeMem(0x768a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf7b7);
        EXPECT(gbc.pc(), 0x768b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01CA
        gbc.setState(0xe612, 0x3e56, 0x5b30, 0x549f, 0x62c, 0xf9ae, 0x0, 0x1);
        gbc.writeMem(0xe612, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3e56);
        EXPECT(gbc.pc(), 0xe613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe612), 0x4f);
        // 4F 01CB
        gbc.setState(0xe502, 0x86be, 0xd320, 0x894d, 0xb8bd, 0x2c9f, 0x0, 0x0);
        gbc.writeMem(0xe502, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x86be);
        EXPECT(gbc.pc(), 0xe503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe502), 0x4f);
        // 4F 01CD
        gbc.setState(0x16b, 0xeb55, 0x5a70, 0xf993, 0x92b4, 0xe90e, 0x1, 0x1);
        gbc.writeMem(0x16b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xeb55);
        EXPECT(gbc.pc(), 0x16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01CE
        gbc.setState(0x58dc, 0x8006, 0xdd40, 0x6951, 0xed9b, 0xec91, 0x0, 0x1);
        gbc.writeMem(0x58dc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8006);
        EXPECT(gbc.pc(), 0x58dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01CF
        gbc.setState(0xa428, 0xedc7, 0xe5e0, 0x6db0, 0xe24b, 0x18c9, 0x1, 0x0);
        gbc.writeMem(0xa428, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xedc7);
        EXPECT(gbc.pc(), 0xa429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa428), 0x4f);
        // 4F 01D0
        gbc.setState(0x5112, 0x93af, 0x2150, 0xfc69, 0xc09f, 0x512a, 0x1, 0x1);
        gbc.writeMem(0x5112, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x93af);
        EXPECT(gbc.pc(), 0x5113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D1
        gbc.setState(0x6609, 0xc6a8, 0x8070, 0x4fc0, 0x5336, 0xa955, 0x1, 0x1);
        gbc.writeMem(0x6609, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xc6a8);
        EXPECT(gbc.pc(), 0x660a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D2
        gbc.setState(0x3946, 0x3a2f, 0x7600, 0x12f0, 0xe729, 0x1f48, 0x0, 0x1);
        gbc.writeMem(0x3946, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3a2f);
        EXPECT(gbc.pc(), 0x3947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01D3
        gbc.setState(0xcac0, 0xbead, 0xaed0, 0x6348, 0xad7c, 0x90a2, 0x1, 0x0);
        gbc.writeMem(0xcac0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbead);
        EXPECT(gbc.pc(), 0xcac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcac0), 0x4f);
        // 4F 01D5
        gbc.setState(0x4a99, 0x40f8, 0xacf0, 0xaeb3, 0x15c0, 0x5093, 0x0, 0x1);
        gbc.writeMem(0x4a99, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x40f8);
        EXPECT(gbc.pc(), 0x4a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D6
        gbc.setState(0x2233, 0x375c, 0xf790, 0x381a, 0x7e84, 0x8483, 0x1, 0x0);
        gbc.writeMem(0x2233, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x375c);
        EXPECT(gbc.pc(), 0x2234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D7
        gbc.setState(0x1f1e, 0x2585, 0x11b0, 0xa33e, 0x58ff, 0x5ea9, 0x1, 0x0);
        gbc.writeMem(0x1f1e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2585);
        EXPECT(gbc.pc(), 0x1f1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D8
        gbc.setState(0x5724, 0x6e5f, 0x3b70, 0xa3e, 0x9705, 0x487, 0x0, 0x1);
        gbc.writeMem(0x5724, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6e5f);
        EXPECT(gbc.pc(), 0x5725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01D9
        gbc.setState(0xd1c0, 0x680f, 0x7b50, 0xe6b7, 0xe2a3, 0x4626, 0x0, 0x0);
        gbc.writeMem(0xd1c0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x680f);
        EXPECT(gbc.pc(), 0xd1c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1c0), 0x4f);
        // 4F 01DA
        gbc.setState(0xdbd3, 0xc94a, 0xdf40, 0xb027, 0x3f00, 0xe378, 0x1, 0x1);
        gbc.writeMem(0xdbd3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc94a);
        EXPECT(gbc.pc(), 0xdbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbd3), 0x4f);
        // 4F 01DB
        gbc.setState(0x61bc, 0x263f, 0xf160, 0x7dab, 0x3cad, 0x7980, 0x1, 0x1);
        gbc.writeMem(0x61bc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x263f);
        EXPECT(gbc.pc(), 0x61bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01DC
        gbc.setState(0x8bbd, 0xa14, 0x48d0, 0x535, 0x77cb, 0xb403, 0x0, 0x0);
        gbc.writeMem(0x8bbd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xa14);
        EXPECT(gbc.pc(), 0x8bbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bbd), 0x4f);
        // 4F 01DD
        gbc.setState(0x40e6, 0x22fd, 0x62f0, 0xfed8, 0xcf0e, 0x579, 0x0, 0x1);
        gbc.writeMem(0x40e6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x22fd);
        EXPECT(gbc.pc(), 0x40e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01DF
        gbc.setState(0xea26, 0xf6b8, 0x6ab0, 0xe1d3, 0xd9cb, 0x5844, 0x0, 0x1);
        gbc.writeMem(0xea26, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf6b8);
        EXPECT(gbc.pc(), 0xea27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea26), 0x4f);
        // 4F 01E0
        gbc.setState(0x6bd2, 0x6d3d, 0x1ab0, 0xe143, 0x4be1, 0xf03e, 0x1, 0x0);
        gbc.writeMem(0x6bd2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6d3d);
        EXPECT(gbc.pc(), 0x6bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01E1
        gbc.setState(0x2dd4, 0x345c, 0x1670, 0x9e3, 0xae0, 0xf446, 0x0, 0x1);
        gbc.writeMem(0x2dd4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x345c);
        EXPECT(gbc.pc(), 0x2dd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01E2
        gbc.setState(0x4fd, 0x444b, 0x13e0, 0x9592, 0x3ae3, 0x9a79, 0x1, 0x1);
        gbc.writeMem(0x4fd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x444b);
        EXPECT(gbc.pc(), 0x4fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01E3
        gbc.setState(0x43bb, 0xc81d, 0x2130, 0xdef1, 0xa10b, 0x76b3, 0x0, 0x0);
        gbc.writeMem(0x43bb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc81d);
        EXPECT(gbc.pc(), 0x43bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01E4
        gbc.setState(0xb191, 0xe70b, 0x9580, 0x1d12, 0xe64f, 0x4f35, 0x0, 0x1);
        gbc.writeMem(0xb191, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe70b);
        EXPECT(gbc.pc(), 0xb192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb191), 0x4f);
        // 4F 01E5
        gbc.setState(0xb6b8, 0x2462, 0x27a0, 0x86b7, 0x833b, 0x8886, 0x0, 0x1);
        gbc.writeMem(0xb6b8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2462);
        EXPECT(gbc.pc(), 0xb6b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b8), 0x4f);
        // 4F 01E6
        gbc.setState(0xb41d, 0x7e5a, 0x13e0, 0xc7b8, 0xa2dc, 0xf5cb, 0x1, 0x0);
        gbc.writeMem(0xb41d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7e5a);
        EXPECT(gbc.pc(), 0xb41e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41d), 0x4f);
        // 4F 01E7
        gbc.setState(0x3826, 0xc348, 0x2990, 0xd066, 0xd748, 0x6c8a, 0x0, 0x0);
        gbc.writeMem(0x3826, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc348);
        EXPECT(gbc.pc(), 0x3827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 01E8
        gbc.setState(0xbd7c, 0xb644, 0x6a50, 0xc9a2, 0x833f, 0x610a, 0x0, 0x0);
        gbc.writeMem(0xbd7c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb644);
        EXPECT(gbc.pc(), 0xbd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd7c), 0x4f);
        // 4F 01E9
        gbc.setState(0x7f3a, 0x1f4a, 0x40e0, 0xcb29, 0x2f62, 0xa7c2, 0x1, 0x0);
        gbc.writeMem(0x7f3a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1f4a);
        EXPECT(gbc.pc(), 0x7f3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01EA
        gbc.setState(0xd32d, 0x53f4, 0x5040, 0x5e08, 0xb794, 0xd14a, 0x0, 0x0);
        gbc.writeMem(0xd32d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x53f4);
        EXPECT(gbc.pc(), 0xd32e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd32d), 0x4f);
        // 4F 01EB
        gbc.setState(0xccbb, 0x30fb, 0xeae0, 0x2f06, 0x74fc, 0x77b6, 0x1, 0x0);
        gbc.writeMem(0xccbb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x30fb);
        EXPECT(gbc.pc(), 0xccbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccbb), 0x4f);
        // 4F 01EC
        gbc.setState(0x80b9, 0xf74c, 0x2fc0, 0xeb25, 0xee46, 0x1b00, 0x0, 0x1);
        gbc.writeMem(0x80b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf74c);
        EXPECT(gbc.pc(), 0x80ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80b9), 0x4f);
        // 4F 01ED
        gbc.setState(0x8eb3, 0x2299, 0x8ca0, 0xff1a, 0xc82d, 0xbeb, 0x0, 0x1);
        gbc.writeMem(0x8eb3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2299);
        EXPECT(gbc.pc(), 0x8eb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eb3), 0x4f);
        // 4F 01EE
        gbc.setState(0xed52, 0x7f4a, 0x78e0, 0xd798, 0x9d98, 0xadb0, 0x1, 0x1);
        gbc.writeMem(0xed52, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7f4a);
        EXPECT(gbc.pc(), 0xed53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed52), 0x4f);
        // 4F 01F0
        gbc.setState(0x6f14, 0x3401, 0xd2a0, 0x907f, 0x773c, 0x9b2, 0x1, 0x1);
        gbc.writeMem(0x6f14, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x3401);
        EXPECT(gbc.pc(), 0x6f15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01F1
        gbc.setState(0x5854, 0x2225, 0x5140, 0x5765, 0xebed, 0xf63a, 0x1, 0x0);
        gbc.writeMem(0x5854, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2225);
        EXPECT(gbc.pc(), 0x5855);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 01F2
        gbc.setState(0x4b6e, 0x1902, 0x820, 0x614, 0x5cce, 0x6adf, 0x1, 0x1);
        gbc.writeMem(0x4b6e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1902);
        EXPECT(gbc.pc(), 0x4b6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01F3
        gbc.setState(0x4686, 0x6be1, 0xf430, 0x868f, 0x6ab4, 0x91ad, 0x1, 0x1);
        gbc.writeMem(0x4686, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6be1);
        EXPECT(gbc.pc(), 0x4687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01F4
        gbc.setState(0x7c94, 0x8b, 0x61f0, 0x8af5, 0xccd8, 0xbfac, 0x0, 0x1);
        gbc.writeMem(0x7c94, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8b);
        EXPECT(gbc.pc(), 0x7c95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01F5
        gbc.setState(0x93e0, 0x5c1c, 0x4180, 0x8f49, 0x90dd, 0x4604, 0x1, 0x0);
        gbc.writeMem(0x93e0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5c1c);
        EXPECT(gbc.pc(), 0x93e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e0), 0x4f);
        // 4F 01F6
        gbc.setState(0x8bb, 0xc4b1, 0x6a60, 0xbbff, 0x99d7, 0xc358, 0x0, 0x0);
        gbc.writeMem(0x8bb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc4b1);
        EXPECT(gbc.pc(), 0x8bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01F7
        gbc.setState(0x94a9, 0x7f8, 0x6ab0, 0xe79, 0x2ae3, 0x5c4d, 0x0, 0x1);
        gbc.writeMem(0x94a9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x7f8);
        EXPECT(gbc.pc(), 0x94aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a9), 0x4f);
        // 4F 01F8
        gbc.setState(0xeb8f, 0xe617, 0x8e10, 0xd51d, 0xbffd, 0x1aa4, 0x0, 0x0);
        gbc.writeMem(0xeb8f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe617);
        EXPECT(gbc.pc(), 0xeb90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb8f), 0x4f);
        // 4F 01F9
        gbc.setState(0xda11, 0xa593, 0xa7e0, 0xe34c, 0x94b0, 0x5a30, 0x0, 0x1);
        gbc.writeMem(0xda11, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa593);
        EXPECT(gbc.pc(), 0xda12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda11), 0x4f);
        // 4F 01FA
        gbc.setState(0xb482, 0x7b1d, 0xb240, 0xa1e2, 0x3131, 0xb1d4, 0x1, 0x1);
        gbc.writeMem(0xb482, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x7b1d);
        EXPECT(gbc.pc(), 0xb483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb482), 0x4f);
        // 4F 01FB
        gbc.setState(0x64b1, 0x4cc1, 0x6a60, 0x84a3, 0xb130, 0x5428, 0x1, 0x1);
        gbc.writeMem(0x64b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4cc1);
        EXPECT(gbc.pc(), 0x64b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01FC
        gbc.setState(0x3056, 0xa600, 0x5830, 0x5fea, 0x51e5, 0xbae5, 0x0, 0x1);
        gbc.writeMem(0x3056, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa600);
        EXPECT(gbc.pc(), 0x3057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 01FE
        gbc.setState(0x60e2, 0x29b5, 0xbe20, 0x9502, 0xdb6d, 0x1ce, 0x0, 0x1);
        gbc.writeMem(0x60e2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x29b5);
        EXPECT(gbc.pc(), 0x60e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 01FF
        gbc.setState(0x77cf, 0x42de, 0x2e70, 0x8548, 0xfaf0, 0x704b, 0x1, 0x1);
        gbc.writeMem(0x77cf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x42de);
        EXPECT(gbc.pc(), 0x77d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0200
        gbc.setState(0xb4cf, 0x54d7, 0xbee0, 0xe7c1, 0x7411, 0xad14, 0x0, 0x1);
        gbc.writeMem(0xb4cf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x54d7);
        EXPECT(gbc.pc(), 0xb4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4cf), 0x4f);
        // 4F 0201
        gbc.setState(0x303e, 0x218c, 0xfb50, 0x6b3, 0x606c, 0xb88d, 0x1, 0x1);
        gbc.writeMem(0x303e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x218c);
        EXPECT(gbc.pc(), 0x303f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0202
        gbc.setState(0xc4c9, 0xc600, 0x2c00, 0xc4b5, 0xf959, 0x4821, 0x0, 0x0);
        gbc.writeMem(0xc4c9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc600);
        EXPECT(gbc.pc(), 0xc4ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4c9), 0x4f);
        // 4F 0204
        gbc.setState(0xd527, 0xc111, 0xbb10, 0xc59, 0x1f28, 0x92ad, 0x1, 0x0);
        gbc.writeMem(0xd527, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc111);
        EXPECT(gbc.pc(), 0xd528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd527), 0x4f);
        // 4F 0205
        gbc.setState(0x714e, 0x8471, 0x6950, 0xda3f, 0x9fc1, 0x7818, 0x1, 0x0);
        gbc.writeMem(0x714e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x8471);
        EXPECT(gbc.pc(), 0x714f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0206
        gbc.setState(0x2f04, 0x1412, 0x9120, 0x77cf, 0x4cc8, 0x4f24, 0x0, 0x0);
        gbc.writeMem(0x2f04, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x1412);
        EXPECT(gbc.pc(), 0x2f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0207
        gbc.setState(0xab53, 0xd4ee, 0xa3b0, 0xd90, 0x8b14, 0x7a27, 0x1, 0x0);
        gbc.writeMem(0xab53, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd4ee);
        EXPECT(gbc.pc(), 0xab54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab53), 0x4f);
        // 4F 0209
        gbc.setState(0xe199, 0xf333, 0x3b80, 0x5286, 0x4049, 0x22c1, 0x0, 0x1);
        gbc.writeMem(0xe199, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xf333);
        EXPECT(gbc.pc(), 0xe19a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe199), 0x4f);
        // 4F 020A
        gbc.setState(0x9c70, 0x3b30, 0xbfa0, 0x5e18, 0x320b, 0x24f, 0x0, 0x0);
        gbc.writeMem(0x9c70, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3b30);
        EXPECT(gbc.pc(), 0x9c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c70), 0x4f);
        // 4F 020B
        gbc.setState(0x5a79, 0x6dcd, 0xc2b0, 0xddc2, 0x5dac, 0x9120, 0x1, 0x0);
        gbc.writeMem(0x5a79, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6dcd);
        EXPECT(gbc.pc(), 0x5a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 020C
        gbc.setState(0xd1d8, 0x3a52, 0x5770, 0x3d85, 0xa4d9, 0xffc0, 0x1, 0x1);
        gbc.writeMem(0xd1d8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3a52);
        EXPECT(gbc.pc(), 0xd1d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d8), 0x4f);
        // 4F 020D
        gbc.setState(0x21e1, 0x4c06, 0x780, 0x4996, 0xbd01, 0x7de3, 0x1, 0x0);
        gbc.writeMem(0x21e1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4c06);
        EXPECT(gbc.pc(), 0x21e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 020E
        gbc.setState(0x831d, 0xc955, 0xb90, 0x51fa, 0xe27c, 0x5cb9, 0x0, 0x0);
        gbc.writeMem(0x831d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xc955);
        EXPECT(gbc.pc(), 0x831e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x831d), 0x4f);
        // 4F 020F
        gbc.setState(0x941d, 0x9c9a, 0x8e0, 0x8689, 0xdb78, 0x523, 0x0, 0x1);
        gbc.writeMem(0x941d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x9c9a);
        EXPECT(gbc.pc(), 0x941e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x941d), 0x4f);
        // 4F 0210
        gbc.setState(0xd02c, 0xd860, 0x9980, 0x5d9a, 0x29fe, 0x3157, 0x1, 0x1);
        gbc.writeMem(0xd02c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd860);
        EXPECT(gbc.pc(), 0xd02d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02c), 0x4f);
        // 4F 0211
        gbc.setState(0xe054, 0x983f, 0x5500, 0x19a0, 0x2315, 0x6b6d, 0x1, 0x1);
        gbc.writeMem(0xe054, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x983f);
        EXPECT(gbc.pc(), 0xe055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe054), 0x4f);
        // 4F 0212
        gbc.setState(0x79e8, 0xc334, 0x50, 0x1291, 0x2168, 0x2f39, 0x0, 0x1);
        gbc.writeMem(0x79e8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc334);
        EXPECT(gbc.pc(), 0x79e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0213
        gbc.setState(0xb1c7, 0x27a, 0x3380, 0xd4c8, 0xfddc, 0x238b, 0x0, 0x1);
        gbc.writeMem(0xb1c7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x27a);
        EXPECT(gbc.pc(), 0xb1c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1c7), 0x4f);
        // 4F 0214
        gbc.setState(0xe3d6, 0x95da, 0xecf0, 0x4df7, 0xb617, 0x1061, 0x1, 0x0);
        gbc.writeMem(0xe3d6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x95da);
        EXPECT(gbc.pc(), 0xe3d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3d6), 0x4f);
        // 4F 0215
        gbc.setState(0x3dc2, 0x51df, 0x8b60, 0x998e, 0x4b63, 0x3de, 0x1, 0x1);
        gbc.writeMem(0x3dc2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x51df);
        EXPECT(gbc.pc(), 0x3dc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0216
        gbc.setState(0x5f86, 0x16e0, 0xe0e0, 0x6b4d, 0x6a46, 0xde8d, 0x0, 0x1);
        gbc.writeMem(0x5f86, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x16e0);
        EXPECT(gbc.pc(), 0x5f87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0217
        gbc.setState(0x1167, 0x6859, 0xa8d0, 0xb730, 0xc0b0, 0xaeb4, 0x1, 0x0);
        gbc.writeMem(0x1167, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6859);
        EXPECT(gbc.pc(), 0x1168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0218
        gbc.setState(0x8f93, 0x17be, 0xee80, 0xe78d, 0x6a80, 0x940b, 0x0, 0x1);
        gbc.writeMem(0x8f93, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x17be);
        EXPECT(gbc.pc(), 0x8f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f93), 0x4f);
        // 4F 0219
        gbc.setState(0xc148, 0xf002, 0xa0, 0x57a6, 0xae2f, 0xea3b, 0x0, 0x0);
        gbc.writeMem(0xc148, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf002);
        EXPECT(gbc.pc(), 0xc149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc148), 0x4f);
        // 4F 021A
        gbc.setState(0xeae7, 0x7a68, 0xc080, 0x4743, 0xfdcf, 0x9e19, 0x0, 0x0);
        gbc.writeMem(0xeae7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7a68);
        EXPECT(gbc.pc(), 0xeae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeae7), 0x4f);
        // 4F 021B
        gbc.setState(0x318, 0xb8d8, 0x2760, 0x6050, 0xfd02, 0x304d, 0x0, 0x0);
        gbc.writeMem(0x318, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb8d8);
        EXPECT(gbc.pc(), 0x319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 021C
        gbc.setState(0x3499, 0xdc6d, 0x6d60, 0x8c6d, 0xbc8d, 0x1629, 0x1, 0x1);
        gbc.writeMem(0x3499, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xdc6d);
        EXPECT(gbc.pc(), 0x349a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 021D
        gbc.setState(0x6674, 0x2a5b, 0x1f00, 0x2d3b, 0xf2de, 0xa024, 0x1, 0x1);
        gbc.writeMem(0x6674, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2a5b);
        EXPECT(gbc.pc(), 0x6675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 021E
        gbc.setState(0x4b82, 0x4a1c, 0x60c0, 0x87b8, 0x582a, 0x8b23, 0x1, 0x1);
        gbc.writeMem(0x4b82, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x4a1c);
        EXPECT(gbc.pc(), 0x4b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 021F
        gbc.setState(0x4237, 0xc750, 0x7740, 0x8fe2, 0xdf17, 0x46e3, 0x1, 0x1);
        gbc.writeMem(0x4237, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc750);
        EXPECT(gbc.pc(), 0x4238);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0220
        gbc.setState(0x4ecf, 0x7f79, 0x9f10, 0xdb2b, 0x11d1, 0x26da, 0x1, 0x1);
        gbc.writeMem(0x4ecf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7f79);
        EXPECT(gbc.pc(), 0x4ed0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0221
        gbc.setState(0x173b, 0x6284, 0x9c50, 0x7004, 0x9af5, 0x6eb2, 0x1, 0x0);
        gbc.writeMem(0x173b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6284);
        EXPECT(gbc.pc(), 0x173c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0222
        gbc.setState(0x3af6, 0xde8c, 0x8ef0, 0x1706, 0xea46, 0xf0df, 0x1, 0x1);
        gbc.writeMem(0x3af6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xde8c);
        EXPECT(gbc.pc(), 0x3af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0223
        gbc.setState(0xba1e, 0xea50, 0x3040, 0xacf9, 0xea61, 0x3157, 0x0, 0x1);
        gbc.writeMem(0xba1e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xea50);
        EXPECT(gbc.pc(), 0xba1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba1e), 0x4f);
        // 4F 0224
        gbc.setState(0xbfa8, 0x82b1, 0x14b0, 0x4a91, 0x33c6, 0xb2d6, 0x0, 0x1);
        gbc.writeMem(0xbfa8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x82b1);
        EXPECT(gbc.pc(), 0xbfa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa8), 0x4f);
        // 4F 0225
        gbc.setState(0x5bc2, 0x4f6e, 0x5460, 0xebe4, 0x636e, 0xda18, 0x1, 0x1);
        gbc.writeMem(0x5bc2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4f6e);
        EXPECT(gbc.pc(), 0x5bc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0226
        gbc.setState(0x561f, 0x138b, 0x9300, 0x126e, 0xe5a8, 0xa469, 0x0, 0x0);
        gbc.writeMem(0x561f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x138b);
        EXPECT(gbc.pc(), 0x5620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0227
        gbc.setState(0x1b6d, 0xb5ef, 0xd680, 0x1fcf, 0x53f9, 0x3f9f, 0x1, 0x0);
        gbc.writeMem(0x1b6d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xb5ef);
        EXPECT(gbc.pc(), 0x1b6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0228
        gbc.setState(0xae75, 0xf8d7, 0xc3d0, 0x816, 0x7098, 0xd991, 0x1, 0x0);
        gbc.writeMem(0xae75, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf8d7);
        EXPECT(gbc.pc(), 0xae76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae75), 0x4f);
        // 4F 0229
        gbc.setState(0x72eb, 0x4cbd, 0x420, 0x947c, 0x2ebb, 0xe1ab, 0x1, 0x0);
        gbc.writeMem(0x72eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x4cbd);
        EXPECT(gbc.pc(), 0x72ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 022B
        gbc.setState(0x43b9, 0xcbf9, 0xac10, 0xacc9, 0xc5d9, 0xda46, 0x0, 0x0);
        gbc.writeMem(0x43b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xcbf9);
        EXPECT(gbc.pc(), 0x43ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 022C
        gbc.setState(0x781c, 0xbdf3, 0x9040, 0xdb00, 0x166c, 0xe68a, 0x0, 0x0);
        gbc.writeMem(0x781c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xbdf3);
        EXPECT(gbc.pc(), 0x781d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 022D
        gbc.setState(0xa896, 0xd74d, 0xc0f0, 0x1971, 0x3994, 0xf103, 0x1, 0x0);
        gbc.writeMem(0xa896, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xd74d);
        EXPECT(gbc.pc(), 0xa897);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa896), 0x4f);
        // 4F 022E
        gbc.setState(0x4c74, 0x9bb, 0xe730, 0xf0a1, 0xe5dd, 0x7f06, 0x0, 0x0);
        gbc.writeMem(0x4c74, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9bb);
        EXPECT(gbc.pc(), 0x4c75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 022F
        gbc.setState(0xd38c, 0x67e6, 0x7910, 0x96c0, 0x8bb1, 0xaaa, 0x0, 0x0);
        gbc.writeMem(0xd38c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x67e6);
        EXPECT(gbc.pc(), 0xd38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd38c), 0x4f);
        // 4F 0230
        gbc.setState(0xcbac, 0x8b2, 0xc1c0, 0xf076, 0x5366, 0xd73f, 0x0, 0x0);
        gbc.writeMem(0xcbac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x8b2);
        EXPECT(gbc.pc(), 0xcbad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbac), 0x4f);
        // 4F 0232
        gbc.setState(0x5cb1, 0x823e, 0x9050, 0xe529, 0x4397, 0xfab5, 0x1, 0x0);
        gbc.writeMem(0x5cb1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x823e);
        EXPECT(gbc.pc(), 0x5cb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0233
        gbc.setState(0x3340, 0x83ed, 0xc6d0, 0xaf42, 0xa5b4, 0xc8fe, 0x0, 0x0);
        gbc.writeMem(0x3340, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x83ed);
        EXPECT(gbc.pc(), 0x3341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0234
        gbc.setState(0x751b, 0x48ad, 0x3590, 0x9799, 0x536, 0x9c1f, 0x0, 0x0);
        gbc.writeMem(0x751b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x48ad);
        EXPECT(gbc.pc(), 0x751c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0235
        gbc.setState(0xae7a, 0xcbcf, 0xe020, 0x4e90, 0x1d03, 0x4b99, 0x1, 0x0);
        gbc.writeMem(0xae7a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xcbcf);
        EXPECT(gbc.pc(), 0xae7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7a), 0x4f);
        // 4F 0236
        gbc.setState(0xb485, 0x8421, 0xd2b0, 0xc, 0xe9ed, 0x2306, 0x1, 0x1);
        gbc.writeMem(0xb485, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8421);
        EXPECT(gbc.pc(), 0xb486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb485), 0x4f);
        // 4F 0237
        gbc.setState(0xcdbb, 0xc420, 0x2030, 0x237, 0x1297, 0x79ef, 0x0, 0x0);
        gbc.writeMem(0xcdbb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc420);
        EXPECT(gbc.pc(), 0xcdbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdbb), 0x4f);
        // 4F 0238
        gbc.setState(0xdc43, 0xa157, 0x41c0, 0x2f48, 0xa0f4, 0xacce, 0x1, 0x1);
        gbc.writeMem(0xdc43, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa157);
        EXPECT(gbc.pc(), 0xdc44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc43), 0x4f);
        // 4F 0239
        gbc.setState(0x264e, 0x9374, 0x70, 0x6fec, 0x9439, 0x1cc, 0x0, 0x0);
        gbc.writeMem(0x264e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9374);
        EXPECT(gbc.pc(), 0x264f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 023A
        gbc.setState(0xbffa, 0x634a, 0xe410, 0xe898, 0x2e23, 0x1a9f, 0x1, 0x1);
        gbc.writeMem(0xbffa, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x634a);
        EXPECT(gbc.pc(), 0xbffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbffa), 0x4f);
        // 4F 023B
        gbc.setState(0x18ac, 0xc959, 0xa0d0, 0x3c6, 0xd92c, 0x3ff3, 0x0, 0x0);
        gbc.writeMem(0x18ac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc959);
        EXPECT(gbc.pc(), 0x18ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 023C
        gbc.setState(0xe9d0, 0x7a9a, 0xbc60, 0xacf, 0x31c4, 0x9470, 0x0, 0x1);
        gbc.writeMem(0xe9d0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7a9a);
        EXPECT(gbc.pc(), 0xe9d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d0), 0x4f);
        // 4F 023D
        gbc.setState(0x860b, 0x1669, 0xf110, 0x41d9, 0xeaca, 0x91ab, 0x1, 0x0);
        gbc.writeMem(0x860b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1669);
        EXPECT(gbc.pc(), 0x860c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860b), 0x4f);
        // 4F 023E
        gbc.setState(0xcf36, 0x39c7, 0xad0, 0x913e, 0x2a73, 0x90cd, 0x1, 0x0);
        gbc.writeMem(0xcf36, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x39c7);
        EXPECT(gbc.pc(), 0xcf37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf36), 0x4f);
        // 4F 023F
        gbc.setState(0x6ffb, 0x18c4, 0xead0, 0xc4c7, 0x33be, 0x91e9, 0x0, 0x1);
        gbc.writeMem(0x6ffb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x18c4);
        EXPECT(gbc.pc(), 0x6ffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0241
        gbc.setState(0x9d33, 0x54cc, 0xd610, 0x89f, 0x98d7, 0x8f02, 0x1, 0x0);
        gbc.writeMem(0x9d33, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x54cc);
        EXPECT(gbc.pc(), 0x9d34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d33), 0x4f);
        // 4F 0242
        gbc.setState(0xb9eb, 0xc91b, 0xb370, 0x88d7, 0xfa42, 0x5bed, 0x0, 0x1);
        gbc.writeMem(0xb9eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc91b);
        EXPECT(gbc.pc(), 0xb9ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9eb), 0x4f);
        // 4F 0243
        gbc.setState(0x6b6, 0x319d, 0x80a0, 0xc5e5, 0x8de9, 0x13bc, 0x1, 0x1);
        gbc.writeMem(0x6b6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x319d);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0244
        gbc.setState(0xea73, 0xaf3c, 0x3a70, 0xe113, 0xd04f, 0x669c, 0x1, 0x1);
        gbc.writeMem(0xea73, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xaf3c);
        EXPECT(gbc.pc(), 0xea74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea73), 0x4f);
        // 4F 0245
        gbc.setState(0x26ed, 0xfc50, 0xc1b0, 0x2ce9, 0x971b, 0xe5da, 0x1, 0x0);
        gbc.writeMem(0x26ed, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfc50);
        EXPECT(gbc.pc(), 0x26ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0246
        gbc.setState(0xd879, 0x565a, 0x5ee0, 0x33e5, 0x98ae, 0x673a, 0x0, 0x0);
        gbc.writeMem(0xd879, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x565a);
        EXPECT(gbc.pc(), 0xd87a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd879), 0x4f);
        // 4F 0247
        gbc.setState(0xb3a1, 0x535b, 0x2b00, 0xb816, 0x2722, 0x812c, 0x0, 0x1);
        gbc.writeMem(0xb3a1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x535b);
        EXPECT(gbc.pc(), 0xb3a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a1), 0x4f);
        // 4F 0248
        gbc.setState(0x3259, 0x54a7, 0x46d0, 0xf0c7, 0x39df, 0xaefa, 0x1, 0x0);
        gbc.writeMem(0x3259, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x54a7);
        EXPECT(gbc.pc(), 0x325a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0249
        gbc.setState(0xbeac, 0x8d8d, 0xa390, 0x903a, 0x5f2c, 0x2110, 0x0, 0x0);
        gbc.writeMem(0xbeac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8d8d);
        EXPECT(gbc.pc(), 0xbead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeac), 0x4f);
        // 4F 024A
        gbc.setState(0x83d8, 0x8901, 0xae00, 0x1b30, 0x11be, 0x4ae9, 0x1, 0x0);
        gbc.writeMem(0x83d8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8901);
        EXPECT(gbc.pc(), 0x83d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83d8), 0x4f);
        // 4F 024B
        gbc.setState(0x2047, 0x34ef, 0xf020, 0x635b, 0xf7fb, 0x2b62, 0x1, 0x1);
        gbc.writeMem(0x2047, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x34ef);
        EXPECT(gbc.pc(), 0x2048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 024C
        gbc.setState(0xb8ed, 0x78ab, 0xcb30, 0xefbd, 0x11df, 0xf6bc, 0x1, 0x0);
        gbc.writeMem(0xb8ed, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x78ab);
        EXPECT(gbc.pc(), 0xb8ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ed), 0x4f);
        // 4F 024D
        gbc.setState(0xc87, 0x3448, 0xd310, 0xc74, 0x50b3, 0x1f87, 0x0, 0x0);
        gbc.writeMem(0xc87, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3448);
        EXPECT(gbc.pc(), 0xc88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 024E
        gbc.setState(0xcd03, 0xd63f, 0x5e00, 0x871a, 0x59b9, 0x8682, 0x0, 0x1);
        gbc.writeMem(0xcd03, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd63f);
        EXPECT(gbc.pc(), 0xcd04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd03), 0x4f);
        // 4F 024F
        gbc.setState(0x5938, 0xcbf7, 0x9470, 0x1769, 0x25ca, 0x87, 0x0, 0x1);
        gbc.writeMem(0x5938, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xcbf7);
        EXPECT(gbc.pc(), 0x5939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0250
        gbc.setState(0x5969, 0x3207, 0xc0, 0x2ed8, 0xed7d, 0xc80d, 0x1, 0x1);
        gbc.writeMem(0x5969, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x3207);
        EXPECT(gbc.pc(), 0x596a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0251
        gbc.setState(0xaa7f, 0x1e9c, 0x30a0, 0x7be1, 0x13fe, 0x548d, 0x0, 0x1);
        gbc.writeMem(0xaa7f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1e9c);
        EXPECT(gbc.pc(), 0xaa80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa7f), 0x4f);
        // 4F 0252
        gbc.setState(0x3517, 0x3dbf, 0x84b0, 0xc92, 0x3aa1, 0x7303, 0x1, 0x1);
        gbc.writeMem(0x3517, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3dbf);
        EXPECT(gbc.pc(), 0x3518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0253
        gbc.setState(0xa571, 0x49ca, 0x6570, 0xf59a, 0xdac4, 0x7f54, 0x0, 0x1);
        gbc.writeMem(0xa571, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x49ca);
        EXPECT(gbc.pc(), 0xa572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa571), 0x4f);
        // 4F 0254
        gbc.setState(0xba2, 0x9f4b, 0x3b80, 0xd69f, 0x8ff6, 0x35a9, 0x1, 0x1);
        gbc.writeMem(0xba2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9f4b);
        EXPECT(gbc.pc(), 0xba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0255
        gbc.setState(0x805d, 0xff5e, 0x73b0, 0xfb91, 0x1a8f, 0x5f64, 0x0, 0x0);
        gbc.writeMem(0x805d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xff5e);
        EXPECT(gbc.pc(), 0x805e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x805d), 0x4f);
        // 4F 0256
        gbc.setState(0x51cf, 0xa9bd, 0xf950, 0x2abd, 0x528d, 0x8f79, 0x1, 0x1);
        gbc.writeMem(0x51cf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa9bd);
        EXPECT(gbc.pc(), 0x51d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0257
        gbc.setState(0x9c49, 0xfd8, 0x140, 0x86e2, 0xab17, 0xc77b, 0x0, 0x1);
        gbc.writeMem(0x9c49, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xfd8);
        EXPECT(gbc.pc(), 0x9c4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c49), 0x4f);
        // 4F 0258
        gbc.setState(0x6da4, 0x59ad, 0x20d0, 0x819f, 0xcb8c, 0xea42, 0x0, 0x0);
        gbc.writeMem(0x6da4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x59ad);
        EXPECT(gbc.pc(), 0x6da5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0259
        gbc.setState(0x8843, 0x1deb, 0xa0, 0xcba9, 0x591e, 0x8db5, 0x0, 0x1);
        gbc.writeMem(0x8843, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1deb);
        EXPECT(gbc.pc(), 0x8844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8843), 0x4f);
        // 4F 025A
        gbc.setState(0x5f92, 0x94a5, 0xe5a0, 0x23c1, 0xb6d6, 0x6d5f, 0x1, 0x1);
        gbc.writeMem(0x5f92, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x94a5);
        EXPECT(gbc.pc(), 0x5f93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 025B
        gbc.setState(0x6687, 0xcce9, 0xd600, 0xfb3f, 0x619f, 0x80d8, 0x1, 0x1);
        gbc.writeMem(0x6687, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xcce9);
        EXPECT(gbc.pc(), 0x6688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 025C
        gbc.setState(0x3a53, 0x90ae, 0xae80, 0x299b, 0xfe99, 0x6622, 0x0, 0x1);
        gbc.writeMem(0x3a53, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x90ae);
        EXPECT(gbc.pc(), 0x3a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 025D
        gbc.setState(0xe093, 0x96a4, 0x86d0, 0xc73, 0xf3a, 0x5776, 0x0, 0x0);
        gbc.writeMem(0xe093, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x96a4);
        EXPECT(gbc.pc(), 0xe094);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe093), 0x4f);
        // 4F 025E
        gbc.setState(0x8c3f, 0x4a57, 0x91e0, 0xc3f7, 0xa8cd, 0xe5f0, 0x0, 0x1);
        gbc.writeMem(0x8c3f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4a57);
        EXPECT(gbc.pc(), 0x8c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c3f), 0x4f);
        // 4F 025F
        gbc.setState(0x6629, 0xfaa, 0x7cc0, 0x9863, 0x81cc, 0x3c9a, 0x0, 0x0);
        gbc.writeMem(0x6629, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xfaa);
        EXPECT(gbc.pc(), 0x662a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0260
        gbc.setState(0x34c5, 0xd6da, 0xfa0, 0xc9f0, 0x60a8, 0x4750, 0x1, 0x0);
        gbc.writeMem(0x34c5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd6da);
        EXPECT(gbc.pc(), 0x34c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0261
        gbc.setState(0x908e, 0x709e, 0x2070, 0xe0b1, 0xed0d, 0x74f8, 0x0, 0x0);
        gbc.writeMem(0x908e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x709e);
        EXPECT(gbc.pc(), 0x908f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x908e), 0x4f);
        // 4F 0262
        gbc.setState(0x70bd, 0xf00a, 0xeec0, 0xd89, 0x42b1, 0x9882, 0x1, 0x0);
        gbc.writeMem(0x70bd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf00a);
        EXPECT(gbc.pc(), 0x70be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0263
        gbc.setState(0x1c48, 0xd83d, 0xf9b0, 0xf705, 0xd992, 0x6dac, 0x1, 0x1);
        gbc.writeMem(0x1c48, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd83d);
        EXPECT(gbc.pc(), 0x1c49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0264
        gbc.setState(0xc87e, 0xac7f, 0x4d20, 0x8249, 0xbd5b, 0x3f3b, 0x0, 0x0);
        gbc.writeMem(0xc87e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xac7f);
        EXPECT(gbc.pc(), 0xc87f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc87e), 0x4f);
        // 4F 0265
        gbc.setState(0x438, 0x6ef8, 0x3340, 0x8cde, 0x5ef1, 0xe191, 0x0, 0x1);
        gbc.writeMem(0x438, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x6ef8);
        EXPECT(gbc.pc(), 0x439);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0266
        gbc.setState(0xd8e1, 0x5cc7, 0xe40, 0x321c, 0xaf44, 0x47f5, 0x0, 0x0);
        gbc.writeMem(0xd8e1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0xd8e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8e1), 0x4f);
        // 4F 0267
        gbc.setState(0x898a, 0xc0c2, 0xaa30, 0x3d44, 0xedbd, 0x7bae, 0x0, 0x1);
        gbc.writeMem(0x898a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc0c2);
        EXPECT(gbc.pc(), 0x898b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898a), 0x4f);
        // 4F 0268
        gbc.setState(0x6b9, 0xff64, 0x4e70, 0xd36e, 0x34ba, 0x90b4, 0x1, 0x0);
        gbc.writeMem(0x6b9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xff64);
        EXPECT(gbc.pc(), 0x6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0269
        gbc.setState(0x69d4, 0x750e, 0xe8a0, 0x9abb, 0xf568, 0xfbc9, 0x0, 0x1);
        gbc.writeMem(0x69d4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x750e);
        EXPECT(gbc.pc(), 0x69d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 026A
        gbc.setState(0x265f, 0xe1c4, 0xf570, 0x15f0, 0x1b06, 0x2fd4, 0x0, 0x1);
        gbc.writeMem(0x265f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe1c4);
        EXPECT(gbc.pc(), 0x2660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 026B
        gbc.setState(0x56ca, 0xd8f5, 0x8910, 0x806c, 0x3c7e, 0xcdc8, 0x1, 0x1);
        gbc.writeMem(0x56ca, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xd8f5);
        EXPECT(gbc.pc(), 0x56cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 026C
        gbc.setState(0x250a, 0x9c9, 0xa2f0, 0xf66, 0xf019, 0x39c8, 0x0, 0x1);
        gbc.writeMem(0x250a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9c9);
        EXPECT(gbc.pc(), 0x250b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 026D
        gbc.setState(0x4f1d, 0x83d3, 0xe910, 0x1823, 0xb7fa, 0x7835, 0x1, 0x0);
        gbc.writeMem(0x4f1d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x83d3);
        EXPECT(gbc.pc(), 0x4f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 026E
        gbc.setState(0x13a5, 0x23ab, 0x6870, 0x9efe, 0x614d, 0x1275, 0x1, 0x0);
        gbc.writeMem(0x13a5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x23ab);
        EXPECT(gbc.pc(), 0x13a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 026F
        gbc.setState(0x2331, 0x7da0, 0xb670, 0x781c, 0x2133, 0x1f9d, 0x0, 0x1);
        gbc.writeMem(0x2331, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x7da0);
        EXPECT(gbc.pc(), 0x2332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0270
        gbc.setState(0x8953, 0x18e3, 0x9310, 0x5979, 0x6e16, 0xbe73, 0x0, 0x1);
        gbc.writeMem(0x8953, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x18e3);
        EXPECT(gbc.pc(), 0x8954);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8953), 0x4f);
        // 4F 0271
        gbc.setState(0xdbb7, 0x9dbe, 0xc8d0, 0xab0, 0x6fb3, 0x9e1b, 0x1, 0x0);
        gbc.writeMem(0xdbb7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9dbe);
        EXPECT(gbc.pc(), 0xdbb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbb7), 0x4f);
        // 4F 0272
        gbc.setState(0xa959, 0x2dd, 0x4380, 0xee1e, 0x429c, 0xf4e5, 0x0, 0x1);
        gbc.writeMem(0xa959, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2dd);
        EXPECT(gbc.pc(), 0xa95a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa959), 0x4f);
        // 4F 0273
        gbc.setState(0x93ab, 0xfb82, 0x4e0, 0xa842, 0xf33a, 0x422d, 0x0, 0x1);
        gbc.writeMem(0x93ab, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xfb82);
        EXPECT(gbc.pc(), 0x93ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93ab), 0x4f);
        // 4F 0274
        gbc.setState(0x739d, 0x266a, 0xa5a0, 0xa368, 0x987d, 0x66be, 0x1, 0x1);
        gbc.writeMem(0x739d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x266a);
        EXPECT(gbc.pc(), 0x739e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0275
        gbc.setState(0xd4e4, 0xa53a, 0x9cd0, 0x1ffe, 0x988d, 0xf5c9, 0x0, 0x1);
        gbc.writeMem(0xd4e4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa53a);
        EXPECT(gbc.pc(), 0xd4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4e4), 0x4f);
        // 4F 0276
        gbc.setState(0x5edc, 0xe3bf, 0x99a0, 0xb84, 0x36c1, 0xa7c2, 0x0, 0x1);
        gbc.writeMem(0x5edc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe3bf);
        EXPECT(gbc.pc(), 0x5edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0277
        gbc.setState(0xf8a, 0xb446, 0x76f0, 0x2feb, 0xa98a, 0xa7e0, 0x1, 0x1);
        gbc.writeMem(0xf8a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb446);
        EXPECT(gbc.pc(), 0xf8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0278
        gbc.setState(0xc82b, 0x2473, 0x6bb0, 0x27ea, 0xfdb1, 0xc164, 0x1, 0x1);
        gbc.writeMem(0xc82b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2473);
        EXPECT(gbc.pc(), 0xc82c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc82b), 0x4f);
        // 4F 0279
        gbc.setState(0xd96b, 0xa9f9, 0x59b0, 0x4998, 0x6026, 0xbbd0, 0x0, 0x1);
        gbc.writeMem(0xd96b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xa9f9);
        EXPECT(gbc.pc(), 0xd96c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd96b), 0x4f);
        // 4F 027A
        gbc.setState(0x95b1, 0x98b4, 0x9f90, 0xdf9e, 0xc7e3, 0x5778, 0x1, 0x0);
        gbc.writeMem(0x95b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x98b4);
        EXPECT(gbc.pc(), 0x95b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95b1), 0x4f);
        // 4F 027B
        gbc.setState(0x3598, 0x70e4, 0x22b0, 0x4e47, 0xac6f, 0x68da, 0x1, 0x1);
        gbc.writeMem(0x3598, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x70e4);
        EXPECT(gbc.pc(), 0x3599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 027C
        gbc.setState(0x1892, 0x7e6, 0xd720, 0x4d1c, 0x27eb, 0xd79b, 0x1, 0x0);
        gbc.writeMem(0x1892, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7e6);
        EXPECT(gbc.pc(), 0x1893);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 027D
        gbc.setState(0x3ffb, 0xfd39, 0x4990, 0x9ef5, 0xf5ea, 0x7aef, 0x1, 0x0);
        gbc.writeMem(0x3ffb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xfd39);
        EXPECT(gbc.pc(), 0x3ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 027E
        gbc.setState(0xbfb6, 0x2fe8, 0x5ee0, 0x858, 0x3cf0, 0xa186, 0x0, 0x1);
        gbc.writeMem(0xbfb6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2fe8);
        EXPECT(gbc.pc(), 0xbfb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb6), 0x4f);
        // 4F 027F
        gbc.setState(0x67b7, 0x876d, 0x6b40, 0x93b, 0xf89a, 0x8430, 0x1, 0x0);
        gbc.writeMem(0x67b7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x876d);
        EXPECT(gbc.pc(), 0x67b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0280
        gbc.setState(0xa592, 0x2952, 0xb250, 0xf2c7, 0x2d11, 0x33c1, 0x1, 0x0);
        gbc.writeMem(0xa592, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2952);
        EXPECT(gbc.pc(), 0xa593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa592), 0x4f);
        // 4F 0281
        gbc.setState(0xf0e, 0x5752, 0x6d30, 0xed3f, 0x4f16, 0x6b61, 0x0, 0x0);
        gbc.writeMem(0xf0e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5752);
        EXPECT(gbc.pc(), 0xf0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0282
        gbc.setState(0x1e95, 0x7a37, 0xb780, 0x29c3, 0x56db, 0x5d74, 0x1, 0x1);
        gbc.writeMem(0x1e95, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7a37);
        EXPECT(gbc.pc(), 0x1e96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0283
        gbc.setState(0x3d62, 0xd853, 0x3870, 0xa54a, 0x590f, 0x8ea, 0x1, 0x0);
        gbc.writeMem(0x3d62, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd853);
        EXPECT(gbc.pc(), 0x3d63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0285
        gbc.setState(0x67ac, 0x309a, 0x9440, 0xfb87, 0x2d60, 0x5700, 0x0, 0x0);
        gbc.writeMem(0x67ac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x309a);
        EXPECT(gbc.pc(), 0x67ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0286
        gbc.setState(0xcf0c, 0x3c40, 0x3be0, 0x404, 0xd3e7, 0x2a34, 0x1, 0x1);
        gbc.writeMem(0xcf0c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x3c40);
        EXPECT(gbc.pc(), 0xcf0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0c), 0x4f);
        // 4F 0287
        gbc.setState(0x53fb, 0xe553, 0x9e50, 0xabf2, 0x95d7, 0x4f61, 0x1, 0x1);
        gbc.writeMem(0x53fb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe553);
        EXPECT(gbc.pc(), 0x53fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0288
        gbc.setState(0xdecb, 0x460, 0x17b0, 0x5d9a, 0x861c, 0x67d4, 0x0, 0x0);
        gbc.writeMem(0xdecb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x460);
        EXPECT(gbc.pc(), 0xdecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdecb), 0x4f);
        // 4F 0289
        gbc.setState(0x45e6, 0x12b1, 0x1e90, 0x5216, 0x40ad, 0xcf51, 0x1, 0x1);
        gbc.writeMem(0x45e6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x12b1);
        EXPECT(gbc.pc(), 0x45e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 028A
        gbc.setState(0x4c31, 0x88f3, 0x40, 0xc346, 0x8c45, 0x6d75, 0x1, 0x0);
        gbc.writeMem(0x4c31, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x88f3);
        EXPECT(gbc.pc(), 0x4c32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 028B
        gbc.setState(0x7a42, 0xfe35, 0xe700, 0xce40, 0x8dde, 0x16b2, 0x1, 0x0);
        gbc.writeMem(0x7a42, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfe35);
        EXPECT(gbc.pc(), 0x7a43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 028C
        gbc.setState(0xd74e, 0x5b31, 0x3060, 0x992c, 0x6e1e, 0x2fde, 0x1, 0x0);
        gbc.writeMem(0xd74e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5b31);
        EXPECT(gbc.pc(), 0xd74f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74e), 0x4f);
        // 4F 028D
        gbc.setState(0xe4b5, 0xa5a5, 0xa460, 0x2d5b, 0x9f08, 0xa57d, 0x0, 0x0);
        gbc.writeMem(0xe4b5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xa5a5);
        EXPECT(gbc.pc(), 0xe4b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4b5), 0x4f);
        // 4F 028E
        gbc.setState(0x7b72, 0x2a4a, 0xdf00, 0xbf23, 0x74a0, 0xc969, 0x0, 0x0);
        gbc.writeMem(0x7b72, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x2a4a);
        EXPECT(gbc.pc(), 0x7b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 028F
        gbc.setState(0x49e6, 0x5da6, 0xe210, 0x1220, 0xa11, 0xa5ca, 0x0, 0x0);
        gbc.writeMem(0x49e6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5da6);
        EXPECT(gbc.pc(), 0x49e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0290
        gbc.setState(0x9c77, 0x3fe3, 0xec90, 0x2105, 0x873b, 0x1958, 0x0, 0x1);
        gbc.writeMem(0x9c77, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3fe3);
        EXPECT(gbc.pc(), 0x9c78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c77), 0x4f);
        // 4F 0292
        gbc.setState(0x7064, 0x923c, 0x8c0, 0xbc9c, 0xbe06, 0x166, 0x1, 0x0);
        gbc.writeMem(0x7064, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x923c);
        EXPECT(gbc.pc(), 0x7065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0293
        gbc.setState(0xaaf6, 0x68bd, 0xa6f0, 0xae5, 0x22a0, 0x9746, 0x1, 0x1);
        gbc.writeMem(0xaaf6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x68bd);
        EXPECT(gbc.pc(), 0xaaf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaf6), 0x4f);
        // 4F 0294
        gbc.setState(0xe2ad, 0x3306, 0xc8c0, 0x262a, 0xc4af, 0x13f7, 0x1, 0x0);
        gbc.writeMem(0xe2ad, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3306);
        EXPECT(gbc.pc(), 0xe2ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2ad), 0x4f);
        // 4F 0295
        gbc.setState(0x1a28, 0x2f33, 0x1380, 0x2e4, 0x92d9, 0xa87a, 0x1, 0x1);
        gbc.writeMem(0x1a28, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2f33);
        EXPECT(gbc.pc(), 0x1a29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0296
        gbc.setState(0x48cf, 0x1db9, 0xe8d0, 0xe268, 0xff22, 0x4594, 0x1, 0x1);
        gbc.writeMem(0x48cf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x1db9);
        EXPECT(gbc.pc(), 0x48d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0297
        gbc.setState(0x1d71, 0x69b4, 0xb910, 0x5fb4, 0xab55, 0x935c, 0x0, 0x0);
        gbc.writeMem(0x1d71, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x69b4);
        EXPECT(gbc.pc(), 0x1d72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0298
        gbc.setState(0xc229, 0x42e5, 0x89e0, 0x5dee, 0xb9ba, 0xe3ee, 0x1, 0x0);
        gbc.writeMem(0xc229, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x42e5);
        EXPECT(gbc.pc(), 0xc22a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc229), 0x4f);
        // 4F 0299
        gbc.setState(0x9ad2, 0xd357, 0x3510, 0x57a8, 0x8c89, 0x48be, 0x1, 0x0);
        gbc.writeMem(0x9ad2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd357);
        EXPECT(gbc.pc(), 0x9ad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ad2), 0x4f);
        // 4F 029A
        gbc.setState(0x3431, 0x7605, 0x4c10, 0xb6b9, 0xfe32, 0x5326, 0x1, 0x1);
        gbc.writeMem(0x3431, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7605);
        EXPECT(gbc.pc(), 0x3432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 029B
        gbc.setState(0x6251, 0x22df, 0xdcb0, 0xc40a, 0xa5a8, 0xb576, 0x1, 0x1);
        gbc.writeMem(0x6251, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x22df);
        EXPECT(gbc.pc(), 0x6252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 029C
        gbc.setState(0x9b6a, 0x4650, 0xd450, 0xdd4, 0x80d1, 0x4157, 0x0, 0x0);
        gbc.writeMem(0x9b6a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4650);
        EXPECT(gbc.pc(), 0x9b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b6a), 0x4f);
        // 4F 029D
        gbc.setState(0x9806, 0xce01, 0x1ac0, 0x74a5, 0xa211, 0xddcb, 0x1, 0x0);
        gbc.writeMem(0x9806, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xce01);
        EXPECT(gbc.pc(), 0x9807);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9806), 0x4f);
        // 4F 029E
        gbc.setState(0x6668, 0xf6f4, 0xaa20, 0x143b, 0x39b7, 0x2a09, 0x0, 0x1);
        gbc.writeMem(0x6668, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf6f4);
        EXPECT(gbc.pc(), 0x6669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 029F
        gbc.setState(0x8d50, 0x84f2, 0x99d0, 0x6d93, 0xf503, 0x9524, 0x0, 0x0);
        gbc.writeMem(0x8d50, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x84f2);
        EXPECT(gbc.pc(), 0x8d51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d50), 0x4f);
        // 4F 02A0
        gbc.setState(0x2a5f, 0x308c, 0x2280, 0x8b52, 0x3046, 0x3a8a, 0x0, 0x0);
        gbc.writeMem(0x2a5f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x308c);
        EXPECT(gbc.pc(), 0x2a60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02A1
        gbc.setState(0x2fc1, 0x69fd, 0x7410, 0xd28c, 0x8478, 0x722a, 0x0, 0x1);
        gbc.writeMem(0x2fc1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x69fd);
        EXPECT(gbc.pc(), 0x2fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02A2
        gbc.setState(0x2b46, 0x4417, 0x4b50, 0x90a8, 0xa35b, 0x7bcd, 0x1, 0x0);
        gbc.writeMem(0x2b46, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4417);
        EXPECT(gbc.pc(), 0x2b47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02A3
        gbc.setState(0x2fc7, 0x81f6, 0x9a70, 0x9faf, 0x61d, 0x8f12, 0x0, 0x0);
        gbc.writeMem(0x2fc7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x81f6);
        EXPECT(gbc.pc(), 0x2fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02A4
        gbc.setState(0x4b78, 0x3642, 0x9f20, 0x3e11, 0xecd, 0x283f, 0x0, 0x1);
        gbc.writeMem(0x4b78, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3642);
        EXPECT(gbc.pc(), 0x4b79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02A5
        gbc.setState(0x9581, 0x103d, 0x240, 0x870c, 0x5f85, 0x61ab, 0x0, 0x0);
        gbc.writeMem(0x9581, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x103d);
        EXPECT(gbc.pc(), 0x9582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9581), 0x4f);
        // 4F 02A6
        gbc.setState(0xd47e, 0x8bb5, 0xb340, 0x86bd, 0x547c, 0xcdc9, 0x0, 0x0);
        gbc.writeMem(0xd47e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8bb5);
        EXPECT(gbc.pc(), 0xd47f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd47e), 0x4f);
        // 4F 02A7
        gbc.setState(0xa17f, 0x28a1, 0x67a0, 0x4469, 0xfc65, 0x284d, 0x0, 0x1);
        gbc.writeMem(0xa17f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x28a1);
        EXPECT(gbc.pc(), 0xa180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17f), 0x4f);
        // 4F 02A8
        gbc.setState(0x7e0a, 0x5f2f, 0x6830, 0x7803, 0xc477, 0x4034, 0x1, 0x1);
        gbc.writeMem(0x7e0a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5f2f);
        EXPECT(gbc.pc(), 0x7e0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02A9
        gbc.setState(0xef49, 0x9e62, 0x670, 0xdeb6, 0x6f02, 0x1f9f, 0x1, 0x0);
        gbc.writeMem(0xef49, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9e62);
        EXPECT(gbc.pc(), 0xef4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef49), 0x4f);
        // 4F 02AA
        gbc.setState(0x7bbf, 0xcdf2, 0x85f0, 0x1c43, 0x1bb8, 0x45f5, 0x1, 0x1);
        gbc.writeMem(0x7bbf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xcdf2);
        EXPECT(gbc.pc(), 0x7bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02AB
        gbc.setState(0x5aec, 0xc511, 0xd210, 0xcab1, 0x7146, 0x1a1, 0x0, 0x1);
        gbc.writeMem(0x5aec, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc511);
        EXPECT(gbc.pc(), 0x5aed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02AC
        gbc.setState(0x9062, 0x28b4, 0x65e0, 0x1b59, 0xfb79, 0x9bed, 0x0, 0x0);
        gbc.writeMem(0x9062, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x28b4);
        EXPECT(gbc.pc(), 0x9063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9062), 0x4f);
        // 4F 02AD
        gbc.setState(0xefc6, 0x7fcb, 0x1da0, 0x269b, 0xa1c5, 0x20ec, 0x1, 0x0);
        gbc.writeMem(0xefc6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7fcb);
        EXPECT(gbc.pc(), 0xefc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc6), 0x4f);
        // 4F 02B0
        gbc.setState(0x91c7, 0xd8d1, 0xb230, 0xeb0f, 0x8a49, 0xcba4, 0x1, 0x0);
        gbc.writeMem(0x91c7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd8d1);
        EXPECT(gbc.pc(), 0x91c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91c7), 0x4f);
        // 4F 02B1
        gbc.setState(0x5954, 0xf160, 0x77b0, 0xe7f, 0x3c4a, 0xbbff, 0x1, 0x0);
        gbc.writeMem(0x5954, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf160);
        EXPECT(gbc.pc(), 0x5955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02B3
        gbc.setState(0x3124, 0x5e74, 0x17c0, 0xd712, 0xa0c2, 0xf9e1, 0x1, 0x1);
        gbc.writeMem(0x3124, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5e74);
        EXPECT(gbc.pc(), 0x3125);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02B4
        gbc.setState(0x4f78, 0x3633, 0xf1a0, 0xc2b0, 0x2907, 0x2b8e, 0x0, 0x0);
        gbc.writeMem(0x4f78, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3633);
        EXPECT(gbc.pc(), 0x4f79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02B5
        gbc.setState(0x7eba, 0x51af, 0xc170, 0xa11c, 0x547a, 0xa5fd, 0x0, 0x1);
        gbc.writeMem(0x7eba, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x51af);
        EXPECT(gbc.pc(), 0x7ebb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02B6
        gbc.setState(0xb063, 0xb7f2, 0xd8f0, 0xa738, 0x662d, 0x1bd3, 0x0, 0x0);
        gbc.writeMem(0xb063, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb7f2);
        EXPECT(gbc.pc(), 0xb064);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb063), 0x4f);
        // 4F 02B7
        gbc.setState(0x916a, 0x3fe7, 0xa8f0, 0x2d3d, 0xdd8c, 0x5205, 0x1, 0x1);
        gbc.writeMem(0x916a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3fe7);
        EXPECT(gbc.pc(), 0x916b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x916a), 0x4f);
        // 4F 02B8
        gbc.setState(0x1d83, 0x5ea9, 0x430, 0x95be, 0xa40b, 0x359, 0x1, 0x1);
        gbc.writeMem(0x1d83, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5ea9);
        EXPECT(gbc.pc(), 0x1d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02B9
        gbc.setState(0xa52, 0xc1b3, 0x7110, 0xc784, 0xd560, 0x19f1, 0x0, 0x1);
        gbc.writeMem(0xa52, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc1b3);
        EXPECT(gbc.pc(), 0xa53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02BA
        gbc.setState(0x174, 0xef47, 0xb720, 0x65a, 0xd3cc, 0xe9b8, 0x1, 0x0);
        gbc.writeMem(0x174, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xef47);
        EXPECT(gbc.pc(), 0x175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02BB
        gbc.setState(0xdd18, 0x3a1a, 0x900, 0xb143, 0xded1, 0xb48e, 0x1, 0x1);
        gbc.writeMem(0xdd18, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3a1a);
        EXPECT(gbc.pc(), 0xdd19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd18), 0x4f);
        // 4F 02BC
        gbc.setState(0x1644, 0xe18c, 0x9500, 0x76cf, 0x1e81, 0x381, 0x1, 0x0);
        gbc.writeMem(0x1644, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe18c);
        EXPECT(gbc.pc(), 0x1645);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02BD
        gbc.setState(0xe6c4, 0x9753, 0x4f90, 0xb2cb, 0x2e87, 0x1f2c, 0x0, 0x1);
        gbc.writeMem(0xe6c4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9753);
        EXPECT(gbc.pc(), 0xe6c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6c4), 0x4f);
        // 4F 02BF
        gbc.setState(0x6000, 0xe6fa, 0xb0b0, 0x8659, 0x9f0, 0x151c, 0x0, 0x0);
        gbc.writeMem(0x6000, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe6fa);
        EXPECT(gbc.pc(), 0x6001);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02C0
        gbc.setState(0x98c0, 0x4b4a, 0x92a0, 0xa1f4, 0x9b5, 0x1a7b, 0x0, 0x1);
        gbc.writeMem(0x98c0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x4b4a);
        EXPECT(gbc.pc(), 0x98c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c0), 0x4f);
        // 4F 02C1
        gbc.setState(0xd261, 0xd1d6, 0xa250, 0xc805, 0x6310, 0x3719, 0x1, 0x1);
        gbc.writeMem(0xd261, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0xd262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd261), 0x4f);
        // 4F 02C2
        gbc.setState(0x607a, 0x3e07, 0x4a10, 0xdeb2, 0xe0bc, 0xbc91, 0x0, 0x0);
        gbc.writeMem(0x607a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3e07);
        EXPECT(gbc.pc(), 0x607b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02C3
        gbc.setState(0x2ccf, 0x8b71, 0xa090, 0xb289, 0xdf05, 0xb56, 0x1, 0x1);
        gbc.writeMem(0x2ccf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x8b71);
        EXPECT(gbc.pc(), 0x2cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02C4
        gbc.setState(0x2871, 0xde0, 0x5260, 0x8c43, 0x5d56, 0x5f5e, 0x0, 0x0);
        gbc.writeMem(0x2871, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xde0);
        EXPECT(gbc.pc(), 0x2872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02C5
        gbc.setState(0x758d, 0xd48e, 0xdca0, 0xdb9f, 0x1ee0, 0x8a2d, 0x0, 0x0);
        gbc.writeMem(0x758d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd48e);
        EXPECT(gbc.pc(), 0x758e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02C6
        gbc.setState(0x2bde, 0x1b7f, 0xa150, 0x6405, 0x754f, 0xa422, 0x1, 0x1);
        gbc.writeMem(0x2bde, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1b7f);
        EXPECT(gbc.pc(), 0x2bdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02C7
        gbc.setState(0x8f34, 0x6ea2, 0x9310, 0x1257, 0x2fbc, 0xb1ab, 0x1, 0x0);
        gbc.writeMem(0x8f34, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6ea2);
        EXPECT(gbc.pc(), 0x8f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f34), 0x4f);
        // 4F 02C8
        gbc.setState(0x8fde, 0xe8bd, 0xa750, 0x25b5, 0xe65d, 0x881c, 0x0, 0x0);
        gbc.writeMem(0x8fde, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe8bd);
        EXPECT(gbc.pc(), 0x8fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fde), 0x4f);
        // 4F 02C9
        gbc.setState(0x85c2, 0x5e1e, 0x19d0, 0x946b, 0xd45e, 0x1e32, 0x1, 0x0);
        gbc.writeMem(0x85c2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5e1e);
        EXPECT(gbc.pc(), 0x85c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c2), 0x4f);
        // 4F 02CA
        gbc.setState(0xb66, 0x3f44, 0x5970, 0x9a6e, 0xd553, 0xe671, 0x1, 0x0);
        gbc.writeMem(0xb66, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3f44);
        EXPECT(gbc.pc(), 0xb67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02CB
        gbc.setState(0x44ee, 0x71a0, 0x3c0, 0xcfca, 0xb4ba, 0x7cda, 0x0, 0x1);
        gbc.writeMem(0x44ee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x71a0);
        EXPECT(gbc.pc(), 0x44ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02CC
        gbc.setState(0xb8a4, 0xb8f9, 0x9970, 0x1530, 0xb7dc, 0x3972, 0x0, 0x1);
        gbc.writeMem(0xb8a4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb8f9);
        EXPECT(gbc.pc(), 0xb8a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a4), 0x4f);
        // 4F 02CD
        gbc.setState(0xd014, 0xddde, 0x15a0, 0xb395, 0xd21, 0x38b0, 0x0, 0x0);
        gbc.writeMem(0xd014, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xddde);
        EXPECT(gbc.pc(), 0xd015);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd014), 0x4f);
        // 4F 02CE
        gbc.setState(0x161, 0x7373, 0x5110, 0x94b5, 0x3225, 0x9537, 0x0, 0x0);
        gbc.writeMem(0x161, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7373);
        EXPECT(gbc.pc(), 0x162);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02CF
        gbc.setState(0xb962, 0xe099, 0x7f60, 0x59f3, 0xdef8, 0xde03, 0x0, 0x1);
        gbc.writeMem(0xb962, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xe099);
        EXPECT(gbc.pc(), 0xb963);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb962), 0x4f);
        // 4F 02D0
        gbc.setState(0x248b, 0xd47d, 0x2860, 0xe2d7, 0x238, 0xce04, 0x0, 0x0);
        gbc.writeMem(0x248b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xd47d);
        EXPECT(gbc.pc(), 0x248c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02D1
        gbc.setState(0x372a, 0xcea, 0xd30, 0x6f5, 0xca86, 0xb230, 0x0, 0x1);
        gbc.writeMem(0x372a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xcea);
        EXPECT(gbc.pc(), 0x372b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02D2
        gbc.setState(0x51f0, 0x3a47, 0xa60, 0x3af6, 0xdd23, 0xa32e, 0x0, 0x1);
        gbc.writeMem(0x51f0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3a47);
        EXPECT(gbc.pc(), 0x51f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02D3
        gbc.setState(0xe8f9, 0x7c39, 0x5910, 0xb0dd, 0xeecb, 0xac18, 0x1, 0x0);
        gbc.writeMem(0xe8f9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7c39);
        EXPECT(gbc.pc(), 0xe8fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8f9), 0x4f);
        // 4F 02D4
        gbc.setState(0xd11b, 0xf254, 0x54e0, 0xf528, 0x779d, 0x17dd, 0x1, 0x1);
        gbc.writeMem(0xd11b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf254);
        EXPECT(gbc.pc(), 0xd11c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd11b), 0x4f);
        // 4F 02D6
        gbc.setState(0xc1fd, 0x30b3, 0x3f30, 0x1222, 0x4460, 0xde20, 0x0, 0x0);
        gbc.writeMem(0xc1fd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x30b3);
        EXPECT(gbc.pc(), 0xc1fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1fd), 0x4f);
        // 4F 02D7
        gbc.setState(0xe677, 0x19a4, 0x1cb0, 0x33f9, 0x84e1, 0xc34a, 0x1, 0x0);
        gbc.writeMem(0xe677, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x19a4);
        EXPECT(gbc.pc(), 0xe678);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe677), 0x4f);
        // 4F 02D8
        gbc.setState(0xe44e, 0xec24, 0x5920, 0x503d, 0xeb6a, 0xdb08, 0x0, 0x0);
        gbc.writeMem(0xe44e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xec24);
        EXPECT(gbc.pc(), 0xe44f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44e), 0x4f);
        // 4F 02D9
        gbc.setState(0xd1fc, 0xded, 0x5ab0, 0xcfe4, 0x4474, 0x27d8, 0x0, 0x1);
        gbc.writeMem(0xd1fc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xded);
        EXPECT(gbc.pc(), 0xd1fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1fc), 0x4f);
        // 4F 02DA
        gbc.setState(0x4585, 0x2b3b, 0xdc80, 0x58c7, 0x731d, 0x481c, 0x1, 0x1);
        gbc.writeMem(0x4585, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2b3b);
        EXPECT(gbc.pc(), 0x4586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02DB
        gbc.setState(0x2894, 0xd708, 0x7c00, 0x1bc1, 0xf694, 0x22c0, 0x1, 0x1);
        gbc.writeMem(0x2894, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd708);
        EXPECT(gbc.pc(), 0x2895);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02DC
        gbc.setState(0x3af6, 0x9dbe, 0x23b0, 0xef68, 0x2286, 0x4a32, 0x1, 0x1);
        gbc.writeMem(0x3af6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9dbe);
        EXPECT(gbc.pc(), 0x3af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02DD
        gbc.setState(0xa060, 0x48a2, 0x75b0, 0x333b, 0xce0f, 0xdbfb, 0x1, 0x1);
        gbc.writeMem(0xa060, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x48a2);
        EXPECT(gbc.pc(), 0xa061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa060), 0x4f);
        // 4F 02DE
        gbc.setState(0x5882, 0x79d4, 0xc200, 0x3ad, 0x9069, 0x9f76, 0x1, 0x1);
        gbc.writeMem(0x5882, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x79d4);
        EXPECT(gbc.pc(), 0x5883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02DF
        gbc.setState(0x457d, 0xdc69, 0xf620, 0x5504, 0xb4e2, 0x6e2, 0x0, 0x0);
        gbc.writeMem(0x457d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xdc69);
        EXPECT(gbc.pc(), 0x457e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02E0
        gbc.setState(0x50b3, 0x88c3, 0x9a70, 0x9d54, 0xa271, 0x50d5, 0x0, 0x1);
        gbc.writeMem(0x50b3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x88c3);
        EXPECT(gbc.pc(), 0x50b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02E1
        gbc.setState(0x1ed5, 0xef4c, 0xa50, 0x6d0b, 0xf148, 0x90be, 0x1, 0x1);
        gbc.writeMem(0x1ed5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xef4c);
        EXPECT(gbc.pc(), 0x1ed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02E3
        gbc.setState(0x640b, 0x88a4, 0x2cb0, 0xec29, 0x8e2e, 0xcd77, 0x0, 0x0);
        gbc.writeMem(0x640b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x88a4);
        EXPECT(gbc.pc(), 0x640c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02E4
        gbc.setState(0xe38c, 0x16dd, 0x5380, 0xa862, 0xd65b, 0x891b, 0x1, 0x1);
        gbc.writeMem(0xe38c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x16dd);
        EXPECT(gbc.pc(), 0xe38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38c), 0x4f);
        // 4F 02E5
        gbc.setState(0xa493, 0xc2b6, 0x4670, 0xa2dd, 0x2a9e, 0x1ad1, 0x0, 0x0);
        gbc.writeMem(0xa493, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xc2b6);
        EXPECT(gbc.pc(), 0xa494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa493), 0x4f);
        // 4F 02E6
        gbc.setState(0xe52a, 0x3f50, 0x820, 0x7dc0, 0x17bb, 0xe19, 0x1, 0x0);
        gbc.writeMem(0xe52a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3f50);
        EXPECT(gbc.pc(), 0xe52b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe52a), 0x4f);
        // 4F 02E7
        gbc.setState(0xd23e, 0x4db5, 0xec50, 0xd9b2, 0xb5f0, 0x2fdf, 0x1, 0x1);
        gbc.writeMem(0xd23e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x4db5);
        EXPECT(gbc.pc(), 0xd23f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd23e), 0x4f);
        // 4F 02E8
        gbc.setState(0x1cbc, 0xb69e, 0x2980, 0x1391, 0xa102, 0x8418, 0x0, 0x0);
        gbc.writeMem(0x1cbc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xb69e);
        EXPECT(gbc.pc(), 0x1cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02E9
        gbc.setState(0x14e9, 0xe83e, 0xb8b0, 0x3a46, 0x4a67, 0xba51, 0x0, 0x0);
        gbc.writeMem(0x14e9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe83e);
        EXPECT(gbc.pc(), 0x14ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 02EA
        gbc.setState(0xc56b, 0x3fed, 0x1f10, 0x6ae7, 0x5e45, 0xc7f7, 0x1, 0x0);
        gbc.writeMem(0xc56b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3fed);
        EXPECT(gbc.pc(), 0xc56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56b), 0x4f);
        // 4F 02EB
        gbc.setState(0xa401, 0xfeef, 0x3d50, 0x4489, 0x1097, 0x742c, 0x0, 0x1);
        gbc.writeMem(0xa401, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfeef);
        EXPECT(gbc.pc(), 0xa402);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa401), 0x4f);
        // 4F 02EC
        gbc.setState(0x5769, 0xe3a1, 0x1110, 0x7222, 0x889f, 0x5952, 0x0, 0x1);
        gbc.writeMem(0x5769, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe3a1);
        EXPECT(gbc.pc(), 0x576a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02ED
        gbc.setState(0xc32c, 0x5c0e, 0xe250, 0xa835, 0xbeac, 0xf1cf, 0x0, 0x1);
        gbc.writeMem(0xc32c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5c0e);
        EXPECT(gbc.pc(), 0xc32d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc32c), 0x4f);
        // 4F 02EE
        gbc.setState(0x5ae2, 0xcc6e, 0x10, 0xe467, 0xdb72, 0x5ca0, 0x0, 0x0);
        gbc.writeMem(0x5ae2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xcc6e);
        EXPECT(gbc.pc(), 0x5ae3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02EF
        gbc.setState(0xd364, 0x7526, 0x4ab0, 0x5ed6, 0xc0c2, 0xefe2, 0x0, 0x0);
        gbc.writeMem(0xd364, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7526);
        EXPECT(gbc.pc(), 0xd365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd364), 0x4f);
        // 4F 02F0
        gbc.setState(0x2705, 0x4c65, 0xc5d0, 0x490c, 0x9fd0, 0xf941, 0x1, 0x0);
        gbc.writeMem(0x2705, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4c65);
        EXPECT(gbc.pc(), 0x2706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02F1
        gbc.setState(0xe5c4, 0xb8c0, 0xd600, 0xfc9d, 0xd1f7, 0x3782, 0x1, 0x1);
        gbc.writeMem(0xe5c4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb8c0);
        EXPECT(gbc.pc(), 0xe5c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c4), 0x4f);
        // 4F 02F2
        gbc.setState(0xa895, 0x8054, 0x9bb0, 0x1d9, 0x6401, 0x837b, 0x0, 0x0);
        gbc.writeMem(0xa895, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8054);
        EXPECT(gbc.pc(), 0xa896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa895), 0x4f);
        // 4F 02F3
        gbc.setState(0x6c20, 0x15af, 0x8110, 0x423a, 0x6602, 0x188e, 0x1, 0x1);
        gbc.writeMem(0x6c20, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x15af);
        EXPECT(gbc.pc(), 0x6c21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02F4
        gbc.setState(0xaf6a, 0x3743, 0xc900, 0xb639, 0xfbc4, 0xfa3, 0x0, 0x1);
        gbc.writeMem(0xaf6a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3743);
        EXPECT(gbc.pc(), 0xaf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6a), 0x4f);
        // 4F 02F5
        gbc.setState(0x403e, 0xfb45, 0xe510, 0x45e5, 0x5e7f, 0xcd23, 0x0, 0x0);
        gbc.writeMem(0x403e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfb45);
        EXPECT(gbc.pc(), 0x403f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02F6
        gbc.setState(0x5f83, 0x25a1, 0xb190, 0xa34, 0x2ce9, 0xa356, 0x1, 0x1);
        gbc.writeMem(0x5f83, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x25a1);
        EXPECT(gbc.pc(), 0x5f84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02F7
        gbc.setState(0x2bab, 0xe057, 0x260, 0x4113, 0x6cfd, 0x5d55, 0x0, 0x0);
        gbc.writeMem(0x2bab, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe057);
        EXPECT(gbc.pc(), 0x2bac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 02F8
        gbc.setState(0x96e5, 0x499, 0xaa60, 0xfc34, 0xa4da, 0x7fe8, 0x0, 0x1);
        gbc.writeMem(0x96e5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x499);
        EXPECT(gbc.pc(), 0x96e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e5), 0x4f);
        // 4F 02F9
        gbc.setState(0xa1be, 0xd7e4, 0xe150, 0xba9d, 0x84e4, 0x4a07, 0x0, 0x1);
        gbc.writeMem(0xa1be, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xd7e4);
        EXPECT(gbc.pc(), 0xa1bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1be), 0x4f);
        // 4F 02FA
        gbc.setState(0xdc70, 0x311a, 0xea80, 0x97a3, 0xed2f, 0x11b9, 0x1, 0x1);
        gbc.writeMem(0xdc70, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x311a);
        EXPECT(gbc.pc(), 0xdc71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc70), 0x4f);
        // 4F 02FB
        gbc.setState(0x8d31, 0xb009, 0x7740, 0xff98, 0xa72f, 0x4ff9, 0x0, 0x0);
        gbc.writeMem(0x8d31, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb009);
        EXPECT(gbc.pc(), 0x8d32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d31), 0x4f);
        // 4F 02FC
        gbc.setState(0x746f, 0xa681, 0x8980, 0xfa1e, 0xc4a0, 0x8a50, 0x1, 0x1);
        gbc.writeMem(0x746f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa681);
        EXPECT(gbc.pc(), 0x7470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 02FD
        gbc.setState(0xc323, 0x1ae0, 0xc270, 0xd5dd, 0x45b2, 0x8f56, 0x1, 0x0);
        gbc.writeMem(0xc323, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1ae0);
        EXPECT(gbc.pc(), 0xc324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc323), 0x4f);
        // 4F 02FE
        gbc.setState(0x1ff1, 0x147a, 0x2450, 0x3a98, 0x5fa9, 0x80d9, 0x1, 0x0);
        gbc.writeMem(0x1ff1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x147a);
        EXPECT(gbc.pc(), 0x1ff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 02FF
        gbc.setState(0xd80f, 0x2180, 0x1c60, 0xf0e4, 0x7ef0, 0xbf22, 0x1, 0x0);
        gbc.writeMem(0xd80f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2180);
        EXPECT(gbc.pc(), 0xd810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd80f), 0x4f);
        // 4F 0300
        gbc.setState(0x53e9, 0xdcb6, 0x8440, 0x3586, 0x3d25, 0xddb2, 0x0, 0x1);
        gbc.writeMem(0x53e9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xdcb6);
        EXPECT(gbc.pc(), 0x53ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0301
        gbc.setState(0x4ce9, 0x2301, 0x4ff0, 0xe64b, 0x8af0, 0xe1b0, 0x0, 0x1);
        gbc.writeMem(0x4ce9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2301);
        EXPECT(gbc.pc(), 0x4cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0303
        gbc.setState(0x739f, 0x5fda, 0xd80, 0x8bd0, 0x61b1, 0x2af4, 0x0, 0x1);
        gbc.writeMem(0x739f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5fda);
        EXPECT(gbc.pc(), 0x73a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0304
        gbc.setState(0x2120, 0x75d7, 0xf050, 0x6b15, 0xc4f0, 0x5045, 0x1, 0x0);
        gbc.writeMem(0x2120, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x75d7);
        EXPECT(gbc.pc(), 0x2121);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0305
        gbc.setState(0x4752, 0xef1c, 0x77b0, 0xe227, 0x6e70, 0xaff4, 0x0, 0x1);
        gbc.writeMem(0x4752, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xef1c);
        EXPECT(gbc.pc(), 0x4753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0306
        gbc.setState(0x2027, 0x6a40, 0xfee0, 0x83c2, 0xc2d8, 0x3d3d, 0x1, 0x0);
        gbc.writeMem(0x2027, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x6a40);
        EXPECT(gbc.pc(), 0x2028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0307
        gbc.setState(0xbd9b, 0x34c4, 0xbb30, 0x199a, 0xc12e, 0x6c9e, 0x0, 0x0);
        gbc.writeMem(0xbd9b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x34c4);
        EXPECT(gbc.pc(), 0xbd9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd9b), 0x4f);
        // 4F 0308
        gbc.setState(0xc173, 0x16b, 0x76d0, 0x67b4, 0x8ac6, 0x86ea, 0x1, 0x1);
        gbc.writeMem(0xc173, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x16b);
        EXPECT(gbc.pc(), 0xc174);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc173), 0x4f);
        // 4F 0309
        gbc.setState(0x7fb0, 0xd2ba, 0x1b70, 0xb2d2, 0x9f0f, 0x46f, 0x0, 0x0);
        gbc.writeMem(0x7fb0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd2ba);
        EXPECT(gbc.pc(), 0x7fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 030B
        gbc.setState(0x4067, 0x8e07, 0x9d10, 0xd147, 0xea27, 0x460e, 0x1, 0x0);
        gbc.writeMem(0x4067, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8e07);
        EXPECT(gbc.pc(), 0x4068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 030C
        gbc.setState(0x3aa9, 0xbdc8, 0x1c10, 0xe104, 0x346e, 0x3a7f, 0x1, 0x0);
        gbc.writeMem(0x3aa9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xbdc8);
        EXPECT(gbc.pc(), 0x3aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 030D
        gbc.setState(0x233b, 0x8726, 0xc660, 0x5a7f, 0x9828, 0x53a6, 0x0, 0x1);
        gbc.writeMem(0x233b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8726);
        EXPECT(gbc.pc(), 0x233c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 030E
        gbc.setState(0xe4cd, 0x68c5, 0x2640, 0xea72, 0x5658, 0x3df, 0x1, 0x1);
        gbc.writeMem(0xe4cd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x68c5);
        EXPECT(gbc.pc(), 0xe4ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4cd), 0x4f);
        // 4F 030F
        gbc.setState(0xacf5, 0x823d, 0x60a0, 0x7462, 0x5c9b, 0x59a4, 0x0, 0x1);
        gbc.writeMem(0xacf5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x823d);
        EXPECT(gbc.pc(), 0xacf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacf5), 0x4f);
        // 4F 0310
        gbc.setState(0x8d2c, 0x48f2, 0xa280, 0xfa1e, 0x7836, 0xe5b1, 0x0, 0x0);
        gbc.writeMem(0x8d2c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x48f2);
        EXPECT(gbc.pc(), 0x8d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d2c), 0x4f);
        // 4F 0311
        gbc.setState(0x54c0, 0x6626, 0xb380, 0x6130, 0x37a, 0xf69f, 0x0, 0x1);
        gbc.writeMem(0x54c0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6626);
        EXPECT(gbc.pc(), 0x54c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0312
        gbc.setState(0x812d, 0x9c00, 0xcc70, 0x6b63, 0xe4ca, 0x2ca6, 0x0, 0x1);
        gbc.writeMem(0x812d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x9c00);
        EXPECT(gbc.pc(), 0x812e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x812d), 0x4f);
        // 4F 0313
        gbc.setState(0xd38c, 0x295, 0x1c60, 0x9c65, 0x597, 0x513, 0x1, 0x1);
        gbc.writeMem(0xd38c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x295);
        EXPECT(gbc.pc(), 0xd38d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd38c), 0x4f);
        // 4F 0314
        gbc.setState(0xc78d, 0x55c0, 0x66c0, 0x2b63, 0xf1e1, 0xf485, 0x1, 0x0);
        gbc.writeMem(0xc78d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x55c0);
        EXPECT(gbc.pc(), 0xc78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc78d), 0x4f);
        // 4F 0315
        gbc.setState(0x8e81, 0x615c, 0xdfe0, 0x6d3, 0x16ee, 0x43b, 0x1, 0x1);
        gbc.writeMem(0x8e81, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x615c);
        EXPECT(gbc.pc(), 0x8e82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e81), 0x4f);
        // 4F 0316
        gbc.setState(0xefff, 0xaad7, 0x7400, 0x4077, 0x5f13, 0x526f, 0x0, 0x0);
        gbc.writeMem(0xefff, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xaad7);
        EXPECT(gbc.pc(), 0xf000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefff), 0x4f);
        // 4F 0317
        gbc.setState(0x26c, 0x64c8, 0x810, 0xa8b2, 0x9913, 0xfc11, 0x0, 0x1);
        gbc.writeMem(0x26c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x64c8);
        EXPECT(gbc.pc(), 0x26d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0318
        gbc.setState(0x35bb, 0x34f7, 0xabf0, 0x8120, 0x9214, 0xc188, 0x1, 0x0);
        gbc.writeMem(0x35bb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x34f7);
        EXPECT(gbc.pc(), 0x35bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0319
        gbc.setState(0xa690, 0xa22, 0xb0b0, 0xfc84, 0x35e0, 0x16b4, 0x1, 0x0);
        gbc.writeMem(0xa690, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa22);
        EXPECT(gbc.pc(), 0xa691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa690), 0x4f);
        // 4F 031A
        gbc.setState(0xb1c2, 0x618e, 0x6170, 0x805f, 0x3b69, 0x5252, 0x0, 0x1);
        gbc.writeMem(0xb1c2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x618e);
        EXPECT(gbc.pc(), 0xb1c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1c2), 0x4f);
        // 4F 031B
        gbc.setState(0xc029, 0x896f, 0xd6c0, 0x846d, 0x2bb2, 0x2c73, 0x1, 0x0);
        gbc.writeMem(0xc029, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x896f);
        EXPECT(gbc.pc(), 0xc02a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc029), 0x4f);
        // 4F 031C
        gbc.setState(0x8b9f, 0xb7e3, 0x9a20, 0x867b, 0xc04b, 0x2ac5, 0x0, 0x1);
        gbc.writeMem(0x8b9f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb7e3);
        EXPECT(gbc.pc(), 0x8ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b9f), 0x4f);
        // 4F 031D
        gbc.setState(0xe91c, 0xfc2a, 0xd490, 0xccee, 0xdb83, 0xf023, 0x1, 0x0);
        gbc.writeMem(0xe91c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfc2a);
        EXPECT(gbc.pc(), 0xe91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91c), 0x4f);
        // 4F 031E
        gbc.setState(0x774e, 0xd27d, 0x8b70, 0x9b7, 0xac97, 0x46df, 0x0, 0x0);
        gbc.writeMem(0x774e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd27d);
        EXPECT(gbc.pc(), 0x774f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 031F
        gbc.setState(0x2381, 0xea9e, 0xe2e0, 0x68d6, 0x3721, 0x8e54, 0x0, 0x0);
        gbc.writeMem(0x2381, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xea9e);
        EXPECT(gbc.pc(), 0x2382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0320
        gbc.setState(0x9d8b, 0xb631, 0xb820, 0x549c, 0x374c, 0xbd3e, 0x1, 0x1);
        gbc.writeMem(0x9d8b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb631);
        EXPECT(gbc.pc(), 0x9d8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d8b), 0x4f);
        // 4F 0321
        gbc.setState(0x1f9f, 0x827d, 0x17e0, 0x8b52, 0x578f, 0x4a7e, 0x1, 0x0);
        gbc.writeMem(0x1f9f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x827d);
        EXPECT(gbc.pc(), 0x1fa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0322
        gbc.setState(0xb545, 0x7565, 0x5e70, 0x71f6, 0x7293, 0x5454, 0x0, 0x0);
        gbc.writeMem(0xb545, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7565);
        EXPECT(gbc.pc(), 0xb546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb545), 0x4f);
        // 4F 0323
        gbc.setState(0x64a6, 0x81aa, 0x6880, 0x453a, 0x7796, 0x28d4, 0x0, 0x0);
        gbc.writeMem(0x64a6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x81aa);
        EXPECT(gbc.pc(), 0x64a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0324
        gbc.setState(0xa49f, 0xab70, 0xddf0, 0x67c1, 0xb023, 0x7cad, 0x1, 0x1);
        gbc.writeMem(0xa49f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xab70);
        EXPECT(gbc.pc(), 0xa4a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa49f), 0x4f);
        // 4F 0325
        gbc.setState(0xb118, 0x82d5, 0xd7d0, 0x39b2, 0x1fc9, 0xdd20, 0x0, 0x0);
        gbc.writeMem(0xb118, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x82d5);
        EXPECT(gbc.pc(), 0xb119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb118), 0x4f);
        // 4F 0326
        gbc.setState(0x2f2d, 0x76ad, 0x6940, 0x3132, 0x5e63, 0x1d66, 0x0, 0x1);
        gbc.writeMem(0x2f2d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x76ad);
        EXPECT(gbc.pc(), 0x2f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0327
        gbc.setState(0xe542, 0x73a9, 0xfe70, 0x9575, 0x17f1, 0x5f7c, 0x0, 0x0);
        gbc.writeMem(0xe542, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x73a9);
        EXPECT(gbc.pc(), 0xe543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe542), 0x4f);
        // 4F 0328
        gbc.setState(0xc9d7, 0xf9c7, 0x460, 0x82fb, 0x75ca, 0x7b7, 0x1, 0x1);
        gbc.writeMem(0xc9d7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf9c7);
        EXPECT(gbc.pc(), 0xc9d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d7), 0x4f);
        // 4F 0329
        gbc.setState(0x2c3b, 0xb35c, 0xd450, 0x7421, 0x7d4a, 0x2b6f, 0x0, 0x1);
        gbc.writeMem(0x2c3b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb35c);
        EXPECT(gbc.pc(), 0x2c3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 032A
        gbc.setState(0xdf3d, 0xb46f, 0xa9e0, 0xe7ff, 0x3fa9, 0x5e42, 0x1, 0x1);
        gbc.writeMem(0xdf3d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb46f);
        EXPECT(gbc.pc(), 0xdf3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf3d), 0x4f);
        // 4F 032B
        gbc.setState(0xa8b8, 0x3618, 0x97b0, 0x45d5, 0xee56, 0xda6a, 0x0, 0x1);
        gbc.writeMem(0xa8b8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x3618);
        EXPECT(gbc.pc(), 0xa8b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8b8), 0x4f);
        // 4F 032C
        gbc.setState(0x1d41, 0x7d28, 0x45a0, 0x7fe6, 0x8a41, 0xe2fe, 0x1, 0x1);
        gbc.writeMem(0x1d41, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7d28);
        EXPECT(gbc.pc(), 0x1d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 032E
        gbc.setState(0x7abb, 0xfc0b, 0xeb60, 0xf238, 0x5620, 0xd26f, 0x0, 0x0);
        gbc.writeMem(0x7abb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfc0b);
        EXPECT(gbc.pc(), 0x7abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 032F
        gbc.setState(0x4bde, 0xbd9f, 0xc5b0, 0x1679, 0x7485, 0xe960, 0x0, 0x1);
        gbc.writeMem(0x4bde, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbd9f);
        EXPECT(gbc.pc(), 0x4bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0330
        gbc.setState(0x175e, 0x534e, 0x5c0, 0x5f5c, 0xe92e, 0xaba1, 0x1, 0x1);
        gbc.writeMem(0x175e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x534e);
        EXPECT(gbc.pc(), 0x175f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0331
        gbc.setState(0x7ffb, 0xec39, 0xabd0, 0x7916, 0x2d7d, 0xbf76, 0x1, 0x1);
        gbc.writeMem(0x7ffb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xec39);
        EXPECT(gbc.pc(), 0x7ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0332
        gbc.setState(0x552e, 0xd778, 0x5820, 0x4a52, 0xb107, 0xd827, 0x1, 0x0);
        gbc.writeMem(0x552e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd778);
        EXPECT(gbc.pc(), 0x552f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0333
        gbc.setState(0xdf31, 0x1f7, 0x83a0, 0xdaa, 0xa621, 0xf899, 0x0, 0x0);
        gbc.writeMem(0xdf31, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1f7);
        EXPECT(gbc.pc(), 0xdf32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf31), 0x4f);
        // 4F 0334
        gbc.setState(0xcff8, 0x2ae, 0x2440, 0x94b, 0xc9f0, 0x97a6, 0x0, 0x0);
        gbc.writeMem(0xcff8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x2ae);
        EXPECT(gbc.pc(), 0xcff9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcff8), 0x4f);
        // 4F 0335
        gbc.setState(0x3418, 0x3cf9, 0x38f0, 0x6797, 0xc14f, 0xf3f9, 0x1, 0x0);
        gbc.writeMem(0x3418, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3cf9);
        EXPECT(gbc.pc(), 0x3419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0336
        gbc.setState(0xec25, 0xd931, 0x8400, 0xa761, 0x853d, 0xd6b4, 0x1, 0x0);
        gbc.writeMem(0xec25, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd931);
        EXPECT(gbc.pc(), 0xec26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec25), 0x4f);
        // 4F 0337
        gbc.setState(0x1e5f, 0x6697, 0xe930, 0x7316, 0x1f32, 0x1c3b, 0x0, 0x0);
        gbc.writeMem(0x1e5f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6697);
        EXPECT(gbc.pc(), 0x1e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0338
        gbc.setState(0x1724, 0xddb3, 0xf520, 0xff00, 0x90a1, 0x52dc, 0x0, 0x1);
        gbc.writeMem(0x1724, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xddb3);
        EXPECT(gbc.pc(), 0x1725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0339
        gbc.setState(0x9bdc, 0x885b, 0x97c0, 0xcc92, 0x2ac5, 0x2c97, 0x1, 0x1);
        gbc.writeMem(0x9bdc, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x885b);
        EXPECT(gbc.pc(), 0x9bdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bdc), 0x4f);
        // 4F 033A
        gbc.setState(0x2198, 0x4bc7, 0xb5a0, 0xb839, 0x534e, 0x1f91, 0x0, 0x1);
        gbc.writeMem(0x2198, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x4bc7);
        EXPECT(gbc.pc(), 0x2199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 033B
        gbc.setState(0xcf14, 0x5389, 0xbc10, 0x3681, 0xe216, 0xda47, 0x0, 0x0);
        gbc.writeMem(0xcf14, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5389);
        EXPECT(gbc.pc(), 0xcf15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf14), 0x4f);
        // 4F 033C
        gbc.setState(0x2edf, 0xf2b9, 0x9040, 0x7d7d, 0x905a, 0x65dd, 0x1, 0x1);
        gbc.writeMem(0x2edf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf2b9);
        EXPECT(gbc.pc(), 0x2ee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 033D
        gbc.setState(0x770b, 0xef7a, 0x3610, 0xdd46, 0xf9bd, 0x3cf5, 0x1, 0x0);
        gbc.writeMem(0x770b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xef7a);
        EXPECT(gbc.pc(), 0x770c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 033E
        gbc.setState(0xd8b1, 0x201f, 0x61c0, 0xddd5, 0x1e12, 0x6ca3, 0x0, 0x0);
        gbc.writeMem(0xd8b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x201f);
        EXPECT(gbc.pc(), 0xd8b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8b1), 0x4f);
        // 4F 033F
        gbc.setState(0x4dc4, 0x15c2, 0xc9f0, 0x1705, 0x21ea, 0x6f5b, 0x0, 0x0);
        gbc.writeMem(0x4dc4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x15c2);
        EXPECT(gbc.pc(), 0x4dc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0340
        gbc.setState(0x3c4, 0xa56, 0x8880, 0x499, 0xaac7, 0xe795, 0x1, 0x1);
        gbc.writeMem(0x3c4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa56);
        EXPECT(gbc.pc(), 0x3c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0341
        gbc.setState(0x8ba1, 0x4b4, 0x27f0, 0x5a44, 0xcd0c, 0xf4db, 0x0, 0x1);
        gbc.writeMem(0x8ba1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4b4);
        EXPECT(gbc.pc(), 0x8ba2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ba1), 0x4f);
        // 4F 0342
        gbc.setState(0x4b82, 0xa14d, 0x65b0, 0x8df1, 0x8ce7, 0x2e33, 0x1, 0x1);
        gbc.writeMem(0x4b82, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa14d);
        EXPECT(gbc.pc(), 0x4b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0343
        gbc.setState(0x5b82, 0x64e, 0x6df0, 0x1c89, 0xefc3, 0xe17e, 0x1, 0x0);
        gbc.writeMem(0x5b82, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x64e);
        EXPECT(gbc.pc(), 0x5b83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0344
        gbc.setState(0xa0b5, 0x70f, 0xab60, 0x46a3, 0xf410, 0x8eb1, 0x0, 0x1);
        gbc.writeMem(0xa0b5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x70f);
        EXPECT(gbc.pc(), 0xa0b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0b5), 0x4f);
        // 4F 0345
        gbc.setState(0x5861, 0xa81e, 0xd5c0, 0xa9ed, 0x5d9b, 0xd1f0, 0x1, 0x0);
        gbc.writeMem(0x5861, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa81e);
        EXPECT(gbc.pc(), 0x5862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0346
        gbc.setState(0x89c, 0xe634, 0x6630, 0x76d4, 0x3e87, 0x5a1e, 0x1, 0x0);
        gbc.writeMem(0x89c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe634);
        EXPECT(gbc.pc(), 0x89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0347
        gbc.setState(0x8601, 0x3e9a, 0x65e0, 0x5cee, 0x94d4, 0x649f, 0x0, 0x0);
        gbc.writeMem(0x8601, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3e9a);
        EXPECT(gbc.pc(), 0x8602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8601), 0x4f);
        // 4F 0348
        gbc.setState(0x714f, 0x6a7b, 0x9aa0, 0x2007, 0x5825, 0x54d1, 0x0, 0x1);
        gbc.writeMem(0x714f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6a7b);
        EXPECT(gbc.pc(), 0x7150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0349
        gbc.setState(0xa8d4, 0xed5a, 0x2cc0, 0xbdff, 0xb325, 0x4013, 0x0, 0x1);
        gbc.writeMem(0xa8d4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xed5a);
        EXPECT(gbc.pc(), 0xa8d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8d4), 0x4f);
        // 4F 034A
        gbc.setState(0x44bf, 0x64cd, 0xb640, 0x9431, 0x1f9d, 0xa79b, 0x1, 0x0);
        gbc.writeMem(0x44bf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x64cd);
        EXPECT(gbc.pc(), 0x44c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 034B
        gbc.setState(0x21c6, 0x2285, 0xb0d0, 0xdc9f, 0x99db, 0xe01b, 0x1, 0x1);
        gbc.writeMem(0x21c6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2285);
        EXPECT(gbc.pc(), 0x21c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 034C
        gbc.setState(0x35d7, 0x4aa7, 0x8e20, 0x5d78, 0xeaa9, 0x6882, 0x0, 0x0);
        gbc.writeMem(0x35d7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4aa7);
        EXPECT(gbc.pc(), 0x35d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 034D
        gbc.setState(0x6153, 0x4bff, 0x4150, 0x186d, 0xe518, 0x5a19, 0x0, 0x0);
        gbc.writeMem(0x6153, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4bff);
        EXPECT(gbc.pc(), 0x6154);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 034E
        gbc.setState(0x9f47, 0x39d, 0xc980, 0xa61c, 0x2578, 0xcc32, 0x0, 0x0);
        gbc.writeMem(0x9f47, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x39d);
        EXPECT(gbc.pc(), 0x9f48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f47), 0x4f);
        // 4F 034F
        gbc.setState(0x8cd3, 0x6de, 0x70c0, 0x54c1, 0xe7, 0x8e50, 0x1, 0x0);
        gbc.writeMem(0x8cd3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6de);
        EXPECT(gbc.pc(), 0x8cd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd3), 0x4f);
        // 4F 0350
        gbc.setState(0x4a25, 0xa6a1, 0x35b0, 0x2daa, 0x2649, 0x6ce4, 0x1, 0x1);
        gbc.writeMem(0x4a25, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa6a1);
        EXPECT(gbc.pc(), 0x4a26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0351
        gbc.setState(0x1e13, 0x8432, 0x1f0, 0x54ec, 0x8dd6, 0xf9f3, 0x0, 0x0);
        gbc.writeMem(0x1e13, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8432);
        EXPECT(gbc.pc(), 0x1e14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0352
        gbc.setState(0x7b50, 0x85dc, 0x2100, 0x1622, 0x10ff, 0x564, 0x0, 0x1);
        gbc.writeMem(0x7b50, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x85dc);
        EXPECT(gbc.pc(), 0x7b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0353
        gbc.setState(0xc7c4, 0xb2b9, 0xdae0, 0x25bc, 0x88de, 0x23f3, 0x1, 0x1);
        gbc.writeMem(0xc7c4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb2b9);
        EXPECT(gbc.pc(), 0xc7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7c4), 0x4f);
        // 4F 0354
        gbc.setState(0xb48c, 0x5f64, 0x1f50, 0x6124, 0x31c8, 0xcaf3, 0x0, 0x1);
        gbc.writeMem(0xb48c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x5f64);
        EXPECT(gbc.pc(), 0xb48d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb48c), 0x4f);
        // 4F 0355
        gbc.setState(0x908a, 0xc806, 0x5ac0, 0x24a6, 0xd8a0, 0x1735, 0x1, 0x1);
        gbc.writeMem(0x908a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc806);
        EXPECT(gbc.pc(), 0x908b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908a), 0x4f);
        // 4F 0356
        gbc.setState(0xdce, 0xff56, 0xab50, 0xdb9e, 0x21d3, 0x4658, 0x1, 0x0);
        gbc.writeMem(0xdce, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xff56);
        EXPECT(gbc.pc(), 0xdcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0357
        gbc.setState(0x8a6a, 0x727f, 0x3320, 0xceb5, 0x44f9, 0xef40, 0x0, 0x0);
        gbc.writeMem(0x8a6a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x727f);
        EXPECT(gbc.pc(), 0x8a6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a6a), 0x4f);
        // 4F 0359
        gbc.setState(0x32f3, 0xbbd2, 0x18c0, 0x945a, 0xb629, 0x196a, 0x0, 0x0);
        gbc.writeMem(0x32f3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbbd2);
        EXPECT(gbc.pc(), 0x32f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 035A
        gbc.setState(0x2b89, 0xf17e, 0x3de0, 0xcf13, 0x6281, 0xbbbf, 0x1, 0x0);
        gbc.writeMem(0x2b89, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf17e);
        EXPECT(gbc.pc(), 0x2b8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 035B
        gbc.setState(0xaf6c, 0x802c, 0xe800, 0x684e, 0xd2bd, 0xdc9b, 0x1, 0x1);
        gbc.writeMem(0xaf6c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x802c);
        EXPECT(gbc.pc(), 0xaf6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf6c), 0x4f);
        // 4F 035C
        gbc.setState(0xb7ee, 0x8bfd, 0xca10, 0x60e3, 0x3bb6, 0xc172, 0x0, 0x1);
        gbc.writeMem(0xb7ee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8bfd);
        EXPECT(gbc.pc(), 0xb7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ee), 0x4f);
        // 4F 035D
        gbc.setState(0xcadd, 0x81e3, 0x8bf0, 0x92a9, 0x6505, 0x291f, 0x0, 0x0);
        gbc.writeMem(0xcadd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x81e3);
        EXPECT(gbc.pc(), 0xcade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcadd), 0x4f);
        // 4F 035E
        gbc.setState(0x33af, 0xe333, 0xbd0, 0x60f3, 0xa81f, 0x8cf1, 0x1, 0x1);
        gbc.writeMem(0x33af, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe333);
        EXPECT(gbc.pc(), 0x33b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 035F
        gbc.setState(0xcf5, 0x3385, 0x6320, 0x7d18, 0x9dae, 0x47dd, 0x0, 0x0);
        gbc.writeMem(0xcf5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3385);
        EXPECT(gbc.pc(), 0xcf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0360
        gbc.setState(0xb126, 0x8487, 0xde00, 0xeffc, 0x3590, 0x8a4b, 0x0, 0x1);
        gbc.writeMem(0xb126, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8487);
        EXPECT(gbc.pc(), 0xb127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb126), 0x4f);
        // 4F 0361
        gbc.setState(0x30ee, 0x1ba9, 0x3780, 0xc8f6, 0xbcb6, 0x597b, 0x1, 0x1);
        gbc.writeMem(0x30ee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1ba9);
        EXPECT(gbc.pc(), 0x30ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0362
        gbc.setState(0x38ac, 0xd5f2, 0x9530, 0xef56, 0x4ca3, 0x694a, 0x1, 0x0);
        gbc.writeMem(0x38ac, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xd5f2);
        EXPECT(gbc.pc(), 0x38ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0363
        gbc.setState(0xbb34, 0x630, 0x8680, 0x5bfd, 0xcc19, 0x905a, 0x1, 0x1);
        gbc.writeMem(0xbb34, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x630);
        EXPECT(gbc.pc(), 0xbb35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb34), 0x4f);
        // 4F 0365
        gbc.setState(0x483a, 0x842f, 0x4100, 0xc7f5, 0xa22f, 0xb51f, 0x1, 0x0);
        gbc.writeMem(0x483a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x842f);
        EXPECT(gbc.pc(), 0x483b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0366
        gbc.setState(0x8cd8, 0x25bc, 0x8a00, 0x4ae6, 0x38e8, 0xc3b9, 0x0, 0x1);
        gbc.writeMem(0x8cd8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x25bc);
        EXPECT(gbc.pc(), 0x8cd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cd8), 0x4f);
        // 4F 0367
        gbc.setState(0x51ad, 0x8cd8, 0x4890, 0xa603, 0xdcf4, 0xed1e, 0x0, 0x1);
        gbc.writeMem(0x51ad, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x8cd8);
        EXPECT(gbc.pc(), 0x51ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0368
        gbc.setState(0xb9c6, 0x8225, 0x1680, 0x54c9, 0x8320, 0x3abe, 0x0, 0x1);
        gbc.writeMem(0xb9c6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x8225);
        EXPECT(gbc.pc(), 0xb9c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c6), 0x4f);
        // 4F 0369
        gbc.setState(0x59d1, 0xe287, 0xf860, 0x6b05, 0xdbf5, 0x3afc, 0x1, 0x1);
        gbc.writeMem(0x59d1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe287);
        EXPECT(gbc.pc(), 0x59d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 036A
        gbc.setState(0x5a45, 0x8bb4, 0x3d10, 0xc7, 0x5d18, 0x25ed, 0x0, 0x1);
        gbc.writeMem(0x5a45, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8bb4);
        EXPECT(gbc.pc(), 0x5a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 036B
        gbc.setState(0x4d37, 0xb0ba, 0x2530, 0x2cdf, 0xf1f1, 0x157f, 0x0, 0x1);
        gbc.writeMem(0x4d37, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb0ba);
        EXPECT(gbc.pc(), 0x4d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 036C
        gbc.setState(0x3f42, 0x9bb6, 0x8930, 0x7d3b, 0xf6ba, 0xf3a4, 0x0, 0x0);
        gbc.writeMem(0x3f42, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9bb6);
        EXPECT(gbc.pc(), 0x3f43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 036D
        gbc.setState(0x90fd, 0xe24d, 0x9230, 0x584b, 0xeb6e, 0x7cb0, 0x1, 0x0);
        gbc.writeMem(0x90fd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xe24d);
        EXPECT(gbc.pc(), 0x90fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90fd), 0x4f);
        // 4F 036E
        gbc.setState(0xa090, 0xd115, 0xad40, 0x7dad, 0x2e50, 0xff14, 0x0, 0x1);
        gbc.writeMem(0xa090, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd115);
        EXPECT(gbc.pc(), 0xa091);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa090), 0x4f);
        // 4F 036F
        gbc.setState(0x7de9, 0x74e4, 0x1bf0, 0xcd35, 0x475d, 0x6bfd, 0x0, 0x1);
        gbc.writeMem(0x7de9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x74e4);
        EXPECT(gbc.pc(), 0x7dea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 0370
        gbc.setState(0xc1b1, 0x2c58, 0xac70, 0x25cd, 0xa551, 0x9363, 0x1, 0x0);
        gbc.writeMem(0xc1b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x2c58);
        EXPECT(gbc.pc(), 0xc1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1b1), 0x4f);
        // 4F 0371
        gbc.setState(0xa2f4, 0x7cc3, 0xdc0, 0xa922, 0x9539, 0xff4, 0x1, 0x1);
        gbc.writeMem(0xa2f4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7cc3);
        EXPECT(gbc.pc(), 0xa2f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f4), 0x4f);
        // 4F 0373
        gbc.setState(0x30e2, 0x905c, 0x4640, 0x6eda, 0x1d4f, 0x3a6f, 0x0, 0x0);
        gbc.writeMem(0x30e2, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x905c);
        EXPECT(gbc.pc(), 0x30e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0374
        gbc.setState(0xa1ec, 0xde4f, 0x3ad0, 0xbfa4, 0xe878, 0x9e4f, 0x1, 0x1);
        gbc.writeMem(0xa1ec, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xde4f);
        EXPECT(gbc.pc(), 0xa1ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ec), 0x4f);
        // 4F 0375
        gbc.setState(0x50a4, 0x6829, 0xba80, 0x6d29, 0xf938, 0x8306, 0x1, 0x0);
        gbc.writeMem(0x50a4, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x6829);
        EXPECT(gbc.pc(), 0x50a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0376
        gbc.setState(0xd642, 0x97f3, 0x76d0, 0x94a7, 0x3e59, 0xcb0a, 0x0, 0x0);
        gbc.writeMem(0xd642, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x97f3);
        EXPECT(gbc.pc(), 0xd643);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd642), 0x4f);
        // 4F 0377
        gbc.setState(0x3274, 0x6092, 0xc120, 0xc38, 0x6cd8, 0xe88a, 0x1, 0x1);
        gbc.writeMem(0x3274, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x6092);
        EXPECT(gbc.pc(), 0x3275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0378
        gbc.setState(0x937b, 0xc2dc, 0x9320, 0x8bd7, 0x9353, 0x87d5, 0x1, 0x0);
        gbc.writeMem(0x937b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc2dc);
        EXPECT(gbc.pc(), 0x937c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x937b), 0x4f);
        // 4F 0379
        gbc.setState(0x267c, 0x4de9, 0xc8d0, 0xd5e8, 0xbc4, 0xceaa, 0x1, 0x0);
        gbc.writeMem(0x267c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4de9);
        EXPECT(gbc.pc(), 0x267d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 037A
        gbc.setState(0x788b, 0x6f64, 0x6940, 0x3120, 0x886e, 0x883a, 0x1, 0x0);
        gbc.writeMem(0x788b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x6f64);
        EXPECT(gbc.pc(), 0x788c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 037B
        gbc.setState(0x9a5f, 0xa177, 0xde60, 0xa98c, 0x6afe, 0xb377, 0x1, 0x1);
        gbc.writeMem(0x9a5f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa177);
        EXPECT(gbc.pc(), 0x9a60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5f), 0x4f);
        // 4F 037C
        gbc.setState(0x399f, 0xacf5, 0x7a10, 0x3ef4, 0xdcd7, 0x108b, 0x1, 0x1);
        gbc.writeMem(0x399f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xacf5);
        EXPECT(gbc.pc(), 0x39a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 037D
        gbc.setState(0x8ee6, 0x2ff5, 0xcdd0, 0x4e2a, 0xa77e, 0xafd1, 0x0, 0x1);
        gbc.writeMem(0x8ee6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2ff5);
        EXPECT(gbc.pc(), 0x8ee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee6), 0x4f);
        // 4F 037F
        gbc.setState(0x235e, 0x87d0, 0x5140, 0xe827, 0xc09e, 0xf1e5, 0x0, 0x0);
        gbc.writeMem(0x235e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x87d0);
        EXPECT(gbc.pc(), 0x235f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 0380
        gbc.setState(0xc8bf, 0xd4bb, 0x6350, 0x847a, 0x7be6, 0x766b, 0x0, 0x0);
        gbc.writeMem(0xc8bf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd4bb);
        EXPECT(gbc.pc(), 0xc8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8bf), 0x4f);
        // 4F 0381
        gbc.setState(0xa186, 0x9e5f, 0x7730, 0xb523, 0xf00a, 0x60e, 0x1, 0x0);
        gbc.writeMem(0xa186, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9e5f);
        EXPECT(gbc.pc(), 0xa187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa186), 0x4f);
        // 4F 0382
        gbc.setState(0x1f49, 0xf4, 0x8c90, 0xc2e4, 0x370, 0x43b6, 0x1, 0x0);
        gbc.writeMem(0x1f49, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf4);
        EXPECT(gbc.pc(), 0x1f4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0383
        gbc.setState(0xd1ba, 0x8cbf, 0xfc50, 0x7aed, 0x746c, 0xada4, 0x0, 0x1);
        gbc.writeMem(0xd1ba, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8cbf);
        EXPECT(gbc.pc(), 0xd1bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1ba), 0x4f);
        // 4F 0384
        gbc.setState(0x5260, 0x2dc1, 0x9720, 0x26c0, 0xfe61, 0x8c81, 0x0, 0x1);
        gbc.writeMem(0x5260, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x2dc1);
        EXPECT(gbc.pc(), 0x5261);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0385
        gbc.setState(0xac9, 0xbca7, 0x9460, 0x951c, 0xfd9c, 0xab63, 0x1, 0x1);
        gbc.writeMem(0xac9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbca7);
        EXPECT(gbc.pc(), 0xaca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 0386
        gbc.setState(0xe922, 0x1264, 0x2ff0, 0xfa4e, 0xe84e, 0x2de4, 0x0, 0x1);
        gbc.writeMem(0xe922, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1264);
        EXPECT(gbc.pc(), 0xe923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe922), 0x4f);
        // 4F 0387
        gbc.setState(0xc29f, 0xdeca, 0x4f30, 0x2400, 0x6c3c, 0x9830, 0x1, 0x0);
        gbc.writeMem(0xc29f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xdeca);
        EXPECT(gbc.pc(), 0xc2a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc29f), 0x4f);
        // 4F 0388
        gbc.setState(0x968c, 0x5e56, 0xcac0, 0x2930, 0x5760, 0x2a50, 0x0, 0x1);
        gbc.writeMem(0x968c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5e56);
        EXPECT(gbc.pc(), 0x968d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x968c), 0x4f);
        // 4F 0389
        gbc.setState(0xce64, 0x2608, 0x4970, 0xe929, 0x978d, 0xed03, 0x1, 0x0);
        gbc.writeMem(0xce64, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2608);
        EXPECT(gbc.pc(), 0xce65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce64), 0x4f);
        // 4F 038A
        gbc.setState(0xb2ce, 0x908e, 0x5f30, 0x5271, 0xbed5, 0x16a1, 0x1, 0x1);
        gbc.writeMem(0xb2ce, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x908e);
        EXPECT(gbc.pc(), 0xb2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ce), 0x4f);
        // 4F 038B
        gbc.setState(0xe9f8, 0x31bc, 0x5890, 0xf891, 0xf38, 0x892e, 0x0, 0x0);
        gbc.writeMem(0xe9f8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x31bc);
        EXPECT(gbc.pc(), 0xe9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f8), 0x4f);
        // 4F 038C
        gbc.setState(0x152c, 0x33d7, 0x9d70, 0x2540, 0xb64d, 0xc26c, 0x1, 0x1);
        gbc.writeMem(0x152c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x33d7);
        EXPECT(gbc.pc(), 0x152d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 038D
        gbc.setState(0xccfa, 0x6c66, 0xa2b0, 0x2b33, 0x7830, 0xe4f2, 0x1, 0x0);
        gbc.writeMem(0xccfa, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6c66);
        EXPECT(gbc.pc(), 0xccfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccfa), 0x4f);
        // 4F 038E
        gbc.setState(0x35eb, 0x5541, 0x4fb0, 0xea07, 0x50c, 0xa5c2, 0x1, 0x0);
        gbc.writeMem(0x35eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5541);
        EXPECT(gbc.pc(), 0x35ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 038F
        gbc.setState(0xc47d, 0xc5f1, 0x8d70, 0x44a7, 0xf9cf, 0x9a73, 0x0, 0x1);
        gbc.writeMem(0xc47d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc5f1);
        EXPECT(gbc.pc(), 0xc47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc47d), 0x4f);
        // 4F 0390
        gbc.setState(0x802d, 0x58a8, 0xc90, 0xec5e, 0x13b2, 0xf4c2, 0x1, 0x1);
        gbc.writeMem(0x802d, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x58a8);
        EXPECT(gbc.pc(), 0x802e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x802d), 0x4f);
        // 4F 0391
        gbc.setState(0xaac5, 0xbab0, 0x1c80, 0x4866, 0x9ec4, 0x31de, 0x1, 0x1);
        gbc.writeMem(0xaac5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xbab0);
        EXPECT(gbc.pc(), 0xaac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac5), 0x4f);
        // 4F 0392
        gbc.setState(0x11df, 0xc28c, 0x810, 0x8683, 0xc987, 0x3f26, 0x0, 0x0);
        gbc.writeMem(0x11df, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xc28c);
        EXPECT(gbc.pc(), 0x11e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0393
        gbc.setState(0xd717, 0xe6b0, 0x6410, 0xda60, 0xe87e, 0x592, 0x1, 0x0);
        gbc.writeMem(0xd717, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe6b0);
        EXPECT(gbc.pc(), 0xd718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd717), 0x4f);
        // 4F 0394
        gbc.setState(0x6d1c, 0x8b9b, 0x5d90, 0x4635, 0x5872, 0x5705, 0x0, 0x0);
        gbc.writeMem(0x6d1c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x8b9b);
        EXPECT(gbc.pc(), 0x6d1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0395
        gbc.setState(0x7922, 0xb55d, 0xbd90, 0x57f4, 0x5772, 0x209f, 0x0, 0x1);
        gbc.writeMem(0x7922, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xb55d);
        EXPECT(gbc.pc(), 0x7923);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0396
        gbc.setState(0x589f, 0x6337, 0x9610, 0x13fc, 0xb6e8, 0x8a05, 0x0, 0x1);
        gbc.writeMem(0x589f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6337);
        EXPECT(gbc.pc(), 0x58a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0397
        gbc.setState(0x2ddf, 0xc8f5, 0x6250, 0xa725, 0x6903, 0x800, 0x0, 0x1);
        gbc.writeMem(0x2ddf, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc8f5);
        EXPECT(gbc.pc(), 0x2de0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 0398
        gbc.setState(0xbd4e, 0xea60, 0x6810, 0xe97, 0xe42a, 0x901b, 0x1, 0x1);
        gbc.writeMem(0xbd4e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xea60);
        EXPECT(gbc.pc(), 0xbd4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd4e), 0x4f);
        // 4F 0399
        gbc.setState(0x79d1, 0x1d84, 0xaac0, 0x3a36, 0xcad4, 0x8c5, 0x0, 0x0);
        gbc.writeMem(0x79d1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1d84);
        EXPECT(gbc.pc(), 0x79d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 039A
        gbc.setState(0x7830, 0x4e1a, 0x760, 0x555d, 0xef06, 0x49a0, 0x0, 0x1);
        gbc.writeMem(0x7830, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4e1a);
        EXPECT(gbc.pc(), 0x7831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 039B
        gbc.setState(0x986b, 0x30f3, 0x3ff0, 0xeb46, 0x674f, 0x78f7, 0x0, 0x0);
        gbc.writeMem(0x986b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x30f3);
        EXPECT(gbc.pc(), 0x986c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x986b), 0x4f);
        // 4F 039C
        gbc.setState(0x2531, 0x1a42, 0xdfb0, 0xc4f5, 0xaefd, 0x1a88, 0x0, 0x0);
        gbc.writeMem(0x2531, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1a42);
        EXPECT(gbc.pc(), 0x2532);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 039D
        gbc.setState(0x46c3, 0xc2e0, 0x27e0, 0x5890, 0x36ea, 0x79c2, 0x0, 0x1);
        gbc.writeMem(0x46c3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc2e0);
        EXPECT(gbc.pc(), 0x46c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 039E
        gbc.setState(0x83c8, 0xf1, 0xc1e0, 0x833c, 0xb4c9, 0xc73b, 0x1, 0x1);
        gbc.writeMem(0x83c8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf1);
        EXPECT(gbc.pc(), 0x83c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c8), 0x4f);
        // 4F 039F
        gbc.setState(0x527c, 0x9f41, 0xb580, 0x4061, 0x2d73, 0xee32, 0x1, 0x0);
        gbc.writeMem(0x527c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x9f41);
        EXPECT(gbc.pc(), 0x527d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03A0
        gbc.setState(0xa523, 0xfd92, 0xc220, 0xb0c3, 0x780f, 0xc995, 0x0, 0x0);
        gbc.writeMem(0xa523, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfd92);
        EXPECT(gbc.pc(), 0xa524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa523), 0x4f);
        // 4F 03A1
        gbc.setState(0x73d7, 0xa2ae, 0x53f0, 0x38b, 0x9bca, 0x14b, 0x0, 0x0);
        gbc.writeMem(0x73d7, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa2ae);
        EXPECT(gbc.pc(), 0x73d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03A2
        gbc.setState(0x74c5, 0xdab0, 0xb4f0, 0x20ac, 0x8044, 0x5d0d, 0x0, 0x1);
        gbc.writeMem(0x74c5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdab0);
        EXPECT(gbc.pc(), 0x74c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03A3
        gbc.setState(0xea36, 0x29ba, 0xd020, 0x787b, 0x9ed2, 0xe158, 0x0, 0x0);
        gbc.writeMem(0xea36, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x29ba);
        EXPECT(gbc.pc(), 0xea37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea36), 0x4f);
        // 4F 03A4
        gbc.setState(0x2ae5, 0xdeb1, 0x5de0, 0x25fa, 0x3813, 0xe59c, 0x1, 0x1);
        gbc.writeMem(0x2ae5, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xdeb1);
        EXPECT(gbc.pc(), 0x2ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03A5
        gbc.setState(0x4349, 0x1bf9, 0x47d0, 0x1b92, 0xd659, 0x7e27, 0x1, 0x0);
        gbc.writeMem(0x4349, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1bf9);
        EXPECT(gbc.pc(), 0x434a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03A6
        gbc.setState(0x625b, 0xa391, 0xea10, 0x833a, 0xff4c, 0xaf8b, 0x1, 0x1);
        gbc.writeMem(0x625b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xa391);
        EXPECT(gbc.pc(), 0x625c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03A7
        gbc.setState(0x4bba, 0xd3f9, 0x6a10, 0xd591, 0xee9d, 0xac2b, 0x1, 0x0);
        gbc.writeMem(0x4bba, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd3f9);
        EXPECT(gbc.pc(), 0x4bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03A8
        gbc.setState(0x85b0, 0x23f4, 0x4650, 0x4500, 0x1f8a, 0xc072, 0x1, 0x1);
        gbc.writeMem(0x85b0, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x23f4);
        EXPECT(gbc.pc(), 0x85b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85b0), 0x4f);
        // 4F 03A9
        gbc.setState(0x11eb, 0xf19c, 0xb4e0, 0x5e19, 0x5735, 0xb8a5, 0x1, 0x0);
        gbc.writeMem(0x11eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf19c);
        EXPECT(gbc.pc(), 0x11ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03AA
        gbc.setState(0x134f, 0x9935, 0x2b10, 0x8119, 0x4477, 0xd1aa, 0x1, 0x0);
        gbc.writeMem(0x134f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9935);
        EXPECT(gbc.pc(), 0x1350);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03AB
        gbc.setState(0x948, 0x4b52, 0x3950, 0x7ef2, 0xd79a, 0xf49b, 0x0, 0x1);
        gbc.writeMem(0x948, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4b52);
        EXPECT(gbc.pc(), 0x949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03AD
        gbc.setState(0x63ed, 0x8597, 0xe760, 0xf43d, 0xdd49, 0x482d, 0x0, 0x1);
        gbc.writeMem(0x63ed, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8597);
        EXPECT(gbc.pc(), 0x63ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03AE
        gbc.setState(0x22f9, 0xe833, 0xdcc0, 0x331e, 0xdd04, 0x67e1, 0x1, 0x1);
        gbc.writeMem(0x22f9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe833);
        EXPECT(gbc.pc(), 0x22fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03AF
        gbc.setState(0xdd69, 0x2047, 0xdfd0, 0x8d02, 0x10a0, 0x94eb, 0x1, 0x1);
        gbc.writeMem(0xdd69, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2047);
        EXPECT(gbc.pc(), 0xdd6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd69), 0x4f);
        // 4F 03B0
        gbc.setState(0xe1c, 0xe672, 0x4710, 0xcbea, 0xc1fe, 0xc709, 0x1, 0x1);
        gbc.writeMem(0xe1c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xe672);
        EXPECT(gbc.pc(), 0xe1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03B1
        gbc.setState(0xbdc1, 0x7af4, 0x4a60, 0x1e96, 0x69e8, 0xccf2, 0x1, 0x0);
        gbc.writeMem(0xbdc1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7af4);
        EXPECT(gbc.pc(), 0xbdc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc1), 0x4f);
        // 4F 03B2
        gbc.setState(0x240, 0x55cb, 0xa540, 0x9136, 0x57de, 0x6e73, 0x0, 0x0);
        gbc.writeMem(0x240, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x55cb);
        EXPECT(gbc.pc(), 0x241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03B3
        gbc.setState(0xc6af, 0x14d1, 0xa7d0, 0x60fc, 0x19b8, 0x7411, 0x1, 0x0);
        gbc.writeMem(0xc6af, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x14d1);
        EXPECT(gbc.pc(), 0xc6b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6af), 0x4f);
        // 4F 03B4
        gbc.setState(0x6dd, 0x1d3b, 0x85b0, 0x7ca3, 0xf3e4, 0x3540, 0x1, 0x0);
        gbc.writeMem(0x6dd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1d3b);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03B5
        gbc.setState(0x96df, 0x12dc, 0x6770, 0xdd41, 0x273a, 0x4b32, 0x1, 0x0);
        gbc.writeMem(0x96df, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x12dc);
        EXPECT(gbc.pc(), 0x96e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96df), 0x4f);
        // 4F 03B6
        gbc.setState(0x13da, 0xefaf, 0xf3f0, 0x4ff0, 0x7164, 0x2dd6, 0x1, 0x0);
        gbc.writeMem(0x13da, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xefaf);
        EXPECT(gbc.pc(), 0x13db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03B7
        gbc.setState(0xfe8, 0x9d60, 0x2870, 0xdd0c, 0x9007, 0x3978, 0x0, 0x1);
        gbc.writeMem(0xfe8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9d60);
        EXPECT(gbc.pc(), 0xfe9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03B8
        gbc.setState(0xa5a8, 0xa8f3, 0x80a0, 0xc48a, 0xb69b, 0x9f5f, 0x0, 0x0);
        gbc.writeMem(0xa5a8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa8f3);
        EXPECT(gbc.pc(), 0xa5a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a8), 0x4f);
        // 4F 03BA
        gbc.setState(0x691b, 0xde73, 0xe890, 0x2b06, 0x487b, 0xbc71, 0x1, 0x1);
        gbc.writeMem(0x691b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xde73);
        EXPECT(gbc.pc(), 0x691c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03BB
        gbc.setState(0xb45e, 0xd5b, 0x52a0, 0x469c, 0x802c, 0x1db7, 0x1, 0x1);
        gbc.writeMem(0xb45e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xd5b);
        EXPECT(gbc.pc(), 0xb45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb45e), 0x4f);
        // 4F 03BC
        gbc.setState(0xc22, 0x9a67, 0xe7a0, 0x3cc5, 0xb9bd, 0xd6c7, 0x0, 0x0);
        gbc.writeMem(0xc22, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9a67);
        EXPECT(gbc.pc(), 0xc23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03BD
        gbc.setState(0x762b, 0x34e9, 0x580, 0x490c, 0xb99e, 0xe319, 0x1, 0x1);
        gbc.writeMem(0x762b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x34e9);
        EXPECT(gbc.pc(), 0x762c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03BE
        gbc.setState(0xc42b, 0x2c72, 0xc280, 0x781b, 0x86c8, 0x7096, 0x1, 0x0);
        gbc.writeMem(0xc42b, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2c72);
        EXPECT(gbc.pc(), 0xc42c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42b), 0x4f);
        // 4F 03BF
        gbc.setState(0x8098, 0xc2fc, 0x7350, 0xd3f7, 0xb367, 0x904b, 0x1, 0x0);
        gbc.writeMem(0x8098, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc2fc);
        EXPECT(gbc.pc(), 0x8099);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8098), 0x4f);
        // 4F 03C0
        gbc.setState(0x7c61, 0xe9b7, 0xfec0, 0xfd0e, 0x72c5, 0x9450, 0x1, 0x0);
        gbc.writeMem(0x7c61, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xe9b7);
        EXPECT(gbc.pc(), 0x7c62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03C1
        gbc.setState(0x46f3, 0xdbdf, 0x4150, 0xe9fd, 0x4c2d, 0xe581, 0x0, 0x0);
        gbc.writeMem(0x46f3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xdbdf);
        EXPECT(gbc.pc(), 0x46f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03C2
        gbc.setState(0x507c, 0x7d7, 0xd3c0, 0x7f2d, 0x311b, 0xf159, 0x0, 0x1);
        gbc.writeMem(0x507c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7d7);
        EXPECT(gbc.pc(), 0x507d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03C3
        gbc.setState(0x6892, 0x5a09, 0x2fc0, 0xc823, 0x2f44, 0x7985, 0x0, 0x1);
        gbc.writeMem(0x6892, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5a09);
        EXPECT(gbc.pc(), 0x6893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03C4
        gbc.setState(0x12b1, 0xec95, 0xd1a0, 0x99b4, 0x9fc0, 0xb867, 0x1, 0x1);
        gbc.writeMem(0x12b1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xec95);
        EXPECT(gbc.pc(), 0x12b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03C5
        gbc.setState(0x4a4f, 0xae6f, 0xa520, 0x7ee5, 0x5575, 0x68a6, 0x0, 0x0);
        gbc.writeMem(0x4a4f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xae6f);
        EXPECT(gbc.pc(), 0x4a50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4F 03C6
        gbc.setState(0x604, 0x2412, 0x3f30, 0x79d0, 0x6d33, 0x732c, 0x1, 0x1);
        gbc.writeMem(0x604, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2412);
        EXPECT(gbc.pc(), 0x605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03C7
        gbc.setState(0xdf72, 0x68a2, 0x5b40, 0x8166, 0x189c, 0x8fae, 0x0, 0x0);
        gbc.writeMem(0xdf72, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x68a2);
        EXPECT(gbc.pc(), 0xdf73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf72), 0x4f);
        // 4F 03C8
        gbc.setState(0x61e1, 0x57a, 0x6c50, 0x662b, 0x484f, 0xb973, 0x0, 0x0);
        gbc.writeMem(0x61e1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x57a);
        EXPECT(gbc.pc(), 0x61e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03C9
        gbc.setState(0xe714, 0xf6ee, 0x5010, 0xf264, 0xd27a, 0xeede, 0x1, 0x1);
        gbc.writeMem(0xe714, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xf6ee);
        EXPECT(gbc.pc(), 0xe715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe714), 0x4f);
        // 4F 03CA
        gbc.setState(0x257a, 0x6742, 0x5580, 0x794f, 0x399, 0xb499, 0x0, 0x0);
        gbc.writeMem(0x257a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6742);
        EXPECT(gbc.pc(), 0x257b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03CB
        gbc.setState(0x74d3, 0x7ac5, 0x84b0, 0xf36e, 0x1bd6, 0xc00, 0x1, 0x0);
        gbc.writeMem(0x74d3, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7ac5);
        EXPECT(gbc.pc(), 0x74d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03CC
        gbc.setState(0x197e, 0x8772, 0x7cf0, 0xc88e, 0x5559, 0x78af, 0x0, 0x1);
        gbc.writeMem(0x197e, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8772);
        EXPECT(gbc.pc(), 0x197f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03CD
        gbc.setState(0xbccd, 0x6f0a, 0x4970, 0x8a0d, 0xf2d5, 0x3f28, 0x1, 0x1);
        gbc.writeMem(0xbccd, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6f0a);
        EXPECT(gbc.pc(), 0xbcce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbccd), 0x4f);
        // 4F 03CE
        gbc.setState(0x5ff6, 0xeb19, 0x7ec0, 0x4619, 0xea10, 0x5777, 0x1, 0x0);
        gbc.writeMem(0x5ff6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xeb19);
        EXPECT(gbc.pc(), 0x5ff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03CF
        gbc.setState(0x35d8, 0x1d51, 0x2630, 0xc8e3, 0xd388, 0xb64a, 0x0, 0x0);
        gbc.writeMem(0x35d8, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x1d51);
        EXPECT(gbc.pc(), 0x35d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03D0
        gbc.setState(0xe7a9, 0x2d1d, 0x1150, 0xe8c, 0x467a, 0xc6c0, 0x1, 0x0);
        gbc.writeMem(0xe7a9, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2d1d);
        EXPECT(gbc.pc(), 0xe7aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7a9), 0x4f);
        // 4F 03D1
        gbc.setState(0xb1ee, 0x9f74, 0x9ae0, 0xe6e, 0x839, 0xcea5, 0x0, 0x1);
        gbc.writeMem(0xb1ee, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9f74);
        EXPECT(gbc.pc(), 0xb1ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1ee), 0x4f);
        // 4F 03D2
        gbc.setState(0x4661, 0x4d81, 0x5910, 0xeca8, 0x877e, 0xb92f, 0x0, 0x1);
        gbc.writeMem(0x4661, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x4d81);
        EXPECT(gbc.pc(), 0x4662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03D3
        gbc.setState(0x2d28, 0x3362, 0xb700, 0x3828, 0x941, 0xa747, 0x0, 0x1);
        gbc.writeMem(0x2d28, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x3362);
        EXPECT(gbc.pc(), 0x2d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03D6
        gbc.setState(0x501c, 0xab3c, 0x2a70, 0x5420, 0x1e61, 0xda6, 0x0, 0x1);
        gbc.writeMem(0x501c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xab3c);
        EXPECT(gbc.pc(), 0x501d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03D8
        gbc.setState(0x1452, 0x5871, 0x2530, 0xbdb, 0x3475, 0x458c, 0x1, 0x1);
        gbc.writeMem(0x1452, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5871);
        EXPECT(gbc.pc(), 0x1453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03D9
        gbc.setState(0x7a0a, 0x503a, 0xbbf0, 0x195c, 0x3460, 0x512c, 0x0, 0x1);
        gbc.writeMem(0x7a0a, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x503a);
        EXPECT(gbc.pc(), 0x7a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03DA
        gbc.setState(0xdf4f, 0x52, 0xe80, 0x17e5, 0x76e9, 0x97db, 0x0, 0x0);
        gbc.writeMem(0xdf4f, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x52);
        EXPECT(gbc.pc(), 0xdf50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf4f), 0x4f);
        // 4F 03DB
        gbc.setState(0x5a36, 0x1c8c, 0xda50, 0xc485, 0xd058, 0xd8fa, 0x1, 0x0);
        gbc.writeMem(0x5a36, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1c8c);
        EXPECT(gbc.pc(), 0x5a37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03DC
        gbc.setState(0xe46c, 0x6e41, 0x3f0, 0x600f, 0x221e, 0x41f6, 0x0, 0x0);
        gbc.writeMem(0xe46c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6e41);
        EXPECT(gbc.pc(), 0xe46d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe46c), 0x4f);
        // 4F 03DD
        gbc.setState(0xeea1, 0xe571, 0xe550, 0x96b6, 0xcf23, 0xe91, 0x0, 0x1);
        gbc.writeMem(0xeea1, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe571);
        EXPECT(gbc.pc(), 0xeea2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea1), 0x4f);
        // 4F 03DE
        gbc.setState(0x11eb, 0x7e98, 0x24d0, 0xf251, 0xaed7, 0xd6db, 0x1, 0x1);
        gbc.writeMem(0x11eb, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x7e98);
        EXPECT(gbc.pc(), 0x11ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03DF
        gbc.setState(0x9c0c, 0x7d64, 0xd980, 0x9603, 0x45d7, 0x6e05, 0x1, 0x1);
        gbc.writeMem(0x9c0c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7d64);
        EXPECT(gbc.pc(), 0x9c0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c0c), 0x4f);
        // 4F 03E0
        gbc.setState(0x451c, 0x19ea, 0x3880, 0xf2fa, 0x66cb, 0xc9f6, 0x1, 0x0);
        gbc.writeMem(0x451c, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x19ea);
        EXPECT(gbc.pc(), 0x451d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03E1
        gbc.setState(0x80a6, 0x47a3, 0x1030, 0x3a6, 0xc22, 0x81d6, 0x0, 0x0);
        gbc.writeMem(0x80a6, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x47a3);
        EXPECT(gbc.pc(), 0x80a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80a6), 0x4f);
        // 4F 03E2
        gbc.setState(0xc748, 0x37de, 0xa100, 0x798b, 0xb9a1, 0xd375, 0x0, 0x1);
        gbc.writeMem(0xc748, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x37de);
        EXPECT(gbc.pc(), 0xc749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc748), 0x4f);
        // 4F 03E3
        gbc.setState(0x2b91, 0xbee4, 0x1500, 0xc176, 0x9a1e, 0x4700, 0x0, 0x1);
        gbc.writeMem(0x2b91, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xbee4);
        EXPECT(gbc.pc(), 0x2b92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03E4
        gbc.setState(0x3330, 0x6d5a, 0x35b0, 0x2d36, 0x475, 0xe748, 0x0, 0x1);
        gbc.writeMem(0x3330, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x6d5a);
        EXPECT(gbc.pc(), 0x3331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4F 03E5
        gbc.setState(0x949, 0xd3e8, 0x2440, 0xb76a, 0x3206, 0x7af2, 0x1, 0x1);
        gbc.writeMem(0x949, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xd3e8);
        EXPECT(gbc.pc(), 0x94a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4F 03E6
        gbc.setState(0x7529, 0x3dba, 0x7cd0, 0xc38a, 0xb083, 0x80df, 0x0, 0x0);
        gbc.writeMem(0x7529, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3dba);
        EXPECT(gbc.pc(), 0x752a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4F 03E7
        gbc.setState(0x3646, 0xcb9d, 0x6780, 0xa345, 0x9a7b, 0xfbb9, 0x1, 0x1);
        gbc.writeMem(0x3646, { 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xcb9d);
        EXPECT(gbc.pc(), 0x3647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
    }
