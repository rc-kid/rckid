    TEST(gbcemu, opcode_f5) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // F5 0000
        gbc.setState(0x6a0e, 0xc9d0, 0x1850, 0xd220, 0x9968, 0x99eb, 0x1, 0x1);
        gbc.writeMem(0x6a0e, { 0xf5 });
        gbc.writeMem(0xc9ce, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xc9ce);
        EXPECT(gbc.pc(), 0x6a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9ce), 0x50);
        EXPECT(gbc.readMem(0xc9cf), 0x18);
        // F5 0001
        gbc.setState(0x48e6, 0x879b, 0xd640, 0x3164, 0x97b0, 0x3463, 0x1, 0x1);
        gbc.writeMem(0x48e6, { 0xf5 });
        gbc.writeMem(0x8799, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8799);
        EXPECT(gbc.pc(), 0x48e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8799), 0x40);
        EXPECT(gbc.readMem(0x879a), 0xd6);
        // F5 0002
        gbc.setState(0x2b7b, 0xbc02, 0xe6e0, 0xc056, 0x64d, 0xa004, 0x1, 0x1);
        gbc.writeMem(0x2b7b, { 0xf5 });
        gbc.writeMem(0xbc00, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xbc00);
        EXPECT(gbc.pc(), 0x2b7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc00), 0xe0);
        EXPECT(gbc.readMem(0xbc01), 0xe6);
        // F5 0006
        gbc.setState(0x1292, 0x8401, 0x5600, 0x1002, 0xcc36, 0xc85c, 0x0, 0x1);
        gbc.writeMem(0x1292, { 0xf5 });
        gbc.writeMem(0x83ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x83ff);
        EXPECT(gbc.pc(), 0x1293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83ff), 0x0);
        EXPECT(gbc.readMem(0x8400), 0x56);
        // F5 0007
        gbc.setState(0x1c50, 0xac40, 0x9e70, 0x689a, 0xaf00, 0xf5cf, 0x0, 0x0);
        gbc.writeMem(0x1c50, { 0xf5 });
        gbc.writeMem(0xac3e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xac3e);
        EXPECT(gbc.pc(), 0x1c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac3e), 0x70);
        EXPECT(gbc.readMem(0xac3f), 0x9e);
        // F5 0010
        gbc.setState(0xcae3, 0xc5ea, 0xcb30, 0x3cf1, 0x81ca, 0x7950, 0x0, 0x1);
        gbc.writeMem(0xc5e8, { 0x0, 0x0 });
        gbc.writeMem(0xcae3, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc5e8);
        EXPECT(gbc.pc(), 0xcae4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5e8), 0x30);
        EXPECT(gbc.readMem(0xc5e9), 0xcb);
        EXPECT(gbc.readMem(0xcae3), 0xf5);
        // F5 0011
        gbc.setState(0x52b2, 0xff62, 0x1b30, 0x24d8, 0x972e, 0x21ce, 0x0, 0x1);
        gbc.writeMem(0x52b2, { 0xf5 });
        gbc.writeMem(0xff60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xff60);
        EXPECT(gbc.pc(), 0x52b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff60), 0x30);
        EXPECT(gbc.readMem(0xff61), 0x1b);
        // F5 0014
        gbc.setState(0x5de5, 0xc21b, 0xc130, 0x883e, 0x64ce, 0xef9, 0x1, 0x0);
        gbc.writeMem(0x5de5, { 0xf5 });
        gbc.writeMem(0xc219, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc219);
        EXPECT(gbc.pc(), 0x5de6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc219), 0x30);
        EXPECT(gbc.readMem(0xc21a), 0xc1);
        // F5 0015
        gbc.setState(0x6e9a, 0x8275, 0xf030, 0xfb2d, 0xc03d, 0xf88d, 0x1, 0x0);
        gbc.writeMem(0x6e9a, { 0xf5 });
        gbc.writeMem(0x8273, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8273);
        EXPECT(gbc.pc(), 0x6e9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8273), 0x30);
        EXPECT(gbc.readMem(0x8274), 0xf0);
        // F5 001B
        gbc.setState(0x4325, 0xa571, 0xceb0, 0x8e66, 0x5a68, 0xfb5d, 0x0, 0x0);
        gbc.writeMem(0x4325, { 0xf5 });
        gbc.writeMem(0xa56f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa56f);
        EXPECT(gbc.pc(), 0x4326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56f), 0xb0);
        EXPECT(gbc.readMem(0xa570), 0xce);
        // F5 001E
        gbc.setState(0xbc40, 0xa8f2, 0xd940, 0x2bf1, 0x2623, 0x5736, 0x0, 0x1);
        gbc.writeMem(0xa8f0, { 0x0, 0x0 });
        gbc.writeMem(0xbc40, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa8f0);
        EXPECT(gbc.pc(), 0xbc41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8f0), 0x40);
        EXPECT(gbc.readMem(0xa8f1), 0xd9);
        EXPECT(gbc.readMem(0xbc40), 0xf5);
        // F5 0021
        gbc.setState(0x8394, 0xf0e1, 0x7e60, 0x3a64, 0x633b, 0xb769, 0x1, 0x1);
        gbc.writeMem(0x8394, { 0xf5 });
        gbc.writeMem(0xf0df, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf0df);
        EXPECT(gbc.pc(), 0x8395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8394), 0xf5);
        EXPECT(gbc.readMem(0xf0df), 0x60);
        EXPECT(gbc.readMem(0xf0e0), 0x7e);
        // F5 0022
        gbc.setState(0x79d8, 0xa2ca, 0xc2a0, 0x80ff, 0x3fce, 0x2a11, 0x0, 0x1);
        gbc.writeMem(0x79d8, { 0xf5 });
        gbc.writeMem(0xa2c8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa2c8);
        EXPECT(gbc.pc(), 0x79d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2c8), 0xa0);
        EXPECT(gbc.readMem(0xa2c9), 0xc2);
        // F5 0023
        gbc.setState(0x3988, 0xdc7f, 0x57b0, 0x2f5f, 0xbbd, 0x342b, 0x1, 0x1);
        gbc.writeMem(0x3988, { 0xf5 });
        gbc.writeMem(0xdc7d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xdc7d);
        EXPECT(gbc.pc(), 0x3989);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc7d), 0xb0);
        EXPECT(gbc.readMem(0xdc7e), 0x57);
        // F5 0026
        gbc.setState(0x2218, 0x8f54, 0xe340, 0xb486, 0x6aa, 0x9759, 0x1, 0x1);
        gbc.writeMem(0x2218, { 0xf5 });
        gbc.writeMem(0x8f52, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8f52);
        EXPECT(gbc.pc(), 0x2219);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f52), 0x40);
        EXPECT(gbc.readMem(0x8f53), 0xe3);
        // F5 0027
        gbc.setState(0xa846, 0xde61, 0xd620, 0x4b01, 0x514d, 0x16cd, 0x0, 0x1);
        gbc.writeMem(0xa846, { 0xf5 });
        gbc.writeMem(0xde5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xde5f);
        EXPECT(gbc.pc(), 0xa847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa846), 0xf5);
        EXPECT(gbc.readMem(0xde5f), 0x20);
        EXPECT(gbc.readMem(0xde60), 0xd6);
        // F5 0029
        gbc.setState(0xc86d, 0x9b6f, 0x670, 0x4e6a, 0x6b4a, 0x65f0, 0x1, 0x0);
        gbc.writeMem(0x9b6d, { 0x0, 0x0 });
        gbc.writeMem(0xc86d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9b6d);
        EXPECT(gbc.pc(), 0xc86e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b6d), 0x70);
        EXPECT(gbc.readMem(0x9b6e), 0x6);
        EXPECT(gbc.readMem(0xc86d), 0xf5);
        // F5 0032
        gbc.setState(0x9b7e, 0xd524, 0xa6c0, 0x92ce, 0xb530, 0x611f, 0x0, 0x1);
        gbc.writeMem(0x9b7e, { 0xf5 });
        gbc.writeMem(0xd522, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xd522);
        EXPECT(gbc.pc(), 0x9b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b7e), 0xf5);
        EXPECT(gbc.readMem(0xd522), 0xc0);
        EXPECT(gbc.readMem(0xd523), 0xa6);
        // F5 0033
        gbc.setState(0xd5f6, 0xc707, 0x9630, 0x4079, 0xdec5, 0x391e, 0x0, 0x0);
        gbc.writeMem(0xc705, { 0x0, 0x0 });
        gbc.writeMem(0xd5f6, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xc705);
        EXPECT(gbc.pc(), 0xd5f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc705), 0x30);
        EXPECT(gbc.readMem(0xc706), 0x96);
        EXPECT(gbc.readMem(0xd5f6), 0xf5);
        // F5 0038
        gbc.setState(0x8d20, 0x83a4, 0xc680, 0x4b3c, 0x7427, 0x631d, 0x1, 0x0);
        gbc.writeMem(0x83a2, { 0x0, 0x0 });
        gbc.writeMem(0x8d20, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x83a2);
        EXPECT(gbc.pc(), 0x8d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a2), 0x80);
        EXPECT(gbc.readMem(0x83a3), 0xc6);
        EXPECT(gbc.readMem(0x8d20), 0xf5);
        // F5 003C
        gbc.setState(0x82cf, 0xe7cc, 0x8e10, 0x32e4, 0x1c58, 0x4f6c, 0x1, 0x0);
        gbc.writeMem(0x82cf, { 0xf5 });
        gbc.writeMem(0xe7ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xe7ca);
        EXPECT(gbc.pc(), 0x82d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82cf), 0xf5);
        EXPECT(gbc.readMem(0xe7ca), 0x10);
        EXPECT(gbc.readMem(0xe7cb), 0x8e);
        // F5 003D
        gbc.setState(0x151c, 0xc4b5, 0xd810, 0xb9a7, 0xd2ec, 0x7b9e, 0x1, 0x1);
        gbc.writeMem(0x151c, { 0xf5 });
        gbc.writeMem(0xc4b3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc4b3);
        EXPECT(gbc.pc(), 0x151d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4b3), 0x10);
        EXPECT(gbc.readMem(0xc4b4), 0xd8);
        // F5 0043
        gbc.setState(0x4dc1, 0xe838, 0x4940, 0xaa22, 0x114d, 0x7ae, 0x0, 0x1);
        gbc.writeMem(0x4dc1, { 0xf5 });
        gbc.writeMem(0xe836, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe836);
        EXPECT(gbc.pc(), 0x4dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe836), 0x40);
        EXPECT(gbc.readMem(0xe837), 0x49);
        // F5 0044
        gbc.setState(0x9a38, 0xe7b7, 0x5f00, 0x1af1, 0x2172, 0x79f7, 0x0, 0x1);
        gbc.writeMem(0x9a38, { 0xf5 });
        gbc.writeMem(0xe7b5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xe7b5);
        EXPECT(gbc.pc(), 0x9a39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a38), 0xf5);
        EXPECT(gbc.readMem(0xe7b5), 0x0);
        EXPECT(gbc.readMem(0xe7b6), 0x5f);
        // F5 0045
        gbc.setState(0x84fb, 0xa951, 0x3f70, 0x32cf, 0x429e, 0xd67b, 0x0, 0x1);
        gbc.writeMem(0x84fb, { 0xf5 });
        gbc.writeMem(0xa94f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xa94f);
        EXPECT(gbc.pc(), 0x84fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84fb), 0xf5);
        EXPECT(gbc.readMem(0xa94f), 0x70);
        EXPECT(gbc.readMem(0xa950), 0x3f);
        // F5 004A
        gbc.setState(0xd240, 0xfe0f, 0xf060, 0x961c, 0x8b4f, 0x8a71, 0x0, 0x0);
        gbc.writeMem(0xd240, { 0xf5 });
        gbc.writeMem(0xfe0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xfe0d);
        EXPECT(gbc.pc(), 0xd241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd240), 0xf5);
        EXPECT(gbc.readMem(0xfe0d), 0x60);
        EXPECT(gbc.readMem(0xfe0e), 0xf0);
        // F5 004B
        gbc.setState(0x4ebe, 0xb406, 0xd60, 0x10b2, 0xeaf5, 0x787d, 0x1, 0x0);
        gbc.writeMem(0x4ebe, { 0xf5 });
        gbc.writeMem(0xb404, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb404);
        EXPECT(gbc.pc(), 0x4ebf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb404), 0x60);
        EXPECT(gbc.readMem(0xb405), 0xd);
        // F5 004E
        gbc.setState(0xede7, 0xb8f6, 0x37c0, 0xf8a4, 0x60cb, 0x3985, 0x0, 0x0);
        gbc.writeMem(0xb8f4, { 0x0, 0x0 });
        gbc.writeMem(0xede7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb8f4);
        EXPECT(gbc.pc(), 0xede8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f4), 0xc0);
        EXPECT(gbc.readMem(0xb8f5), 0x37);
        EXPECT(gbc.readMem(0xede7), 0xf5);
        // F5 004F
        gbc.setState(0xd573, 0xe0c0, 0x9dc0, 0xf019, 0x3c3e, 0x57b9, 0x0, 0x1);
        gbc.writeMem(0xd573, { 0xf5 });
        gbc.writeMem(0xe0be, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xe0be);
        EXPECT(gbc.pc(), 0xd574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd573), 0xf5);
        EXPECT(gbc.readMem(0xe0be), 0xc0);
        EXPECT(gbc.readMem(0xe0bf), 0x9d);
        // F5 0050
        gbc.setState(0xd986, 0xe779, 0xfc10, 0x7406, 0xc9ee, 0x7ddb, 0x0, 0x1);
        gbc.writeMem(0xd986, { 0xf5 });
        gbc.writeMem(0xe777, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xe777);
        EXPECT(gbc.pc(), 0xd987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd986), 0xf5);
        EXPECT(gbc.readMem(0xe777), 0x10);
        EXPECT(gbc.readMem(0xe778), 0xfc);
        // F5 0053
        gbc.setState(0xd7fe, 0xd767, 0xab50, 0xa25, 0x1c04, 0xf4ab, 0x0, 0x0);
        gbc.writeMem(0xd765, { 0x0, 0x0 });
        gbc.writeMem(0xd7fe, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd765);
        EXPECT(gbc.pc(), 0xd7ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd765), 0x50);
        EXPECT(gbc.readMem(0xd766), 0xab);
        EXPECT(gbc.readMem(0xd7fe), 0xf5);
        // F5 0055
        gbc.setState(0x58cc, 0xd987, 0x3bc0, 0x7f81, 0x240c, 0x4358, 0x1, 0x0);
        gbc.writeMem(0x58cc, { 0xf5 });
        gbc.writeMem(0xd985, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd985);
        EXPECT(gbc.pc(), 0x58cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd985), 0xc0);
        EXPECT(gbc.readMem(0xd986), 0x3b);
        // F5 0057
        gbc.setState(0xe745, 0xcd26, 0xb720, 0xafc8, 0x8dbc, 0xee5a, 0x0, 0x1);
        gbc.writeMem(0xcd24, { 0x0, 0x0 });
        gbc.writeMem(0xe745, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xcd24);
        EXPECT(gbc.pc(), 0xe746);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd24), 0x20);
        EXPECT(gbc.readMem(0xcd25), 0xb7);
        EXPECT(gbc.readMem(0xe745), 0xf5);
        // F5 005C
        gbc.setState(0x2521, 0xbf8c, 0x4a20, 0xdda9, 0xcd02, 0x8d56, 0x1, 0x1);
        gbc.writeMem(0x2521, { 0xf5 });
        gbc.writeMem(0xbf8a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xbf8a);
        EXPECT(gbc.pc(), 0x2522);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf8a), 0x20);
        EXPECT(gbc.readMem(0xbf8b), 0x4a);
        // F5 005D
        gbc.setState(0x8945, 0xdae9, 0xca60, 0xf8b0, 0x3a68, 0x611c, 0x1, 0x0);
        gbc.writeMem(0x8945, { 0xf5 });
        gbc.writeMem(0xdae7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdae7);
        EXPECT(gbc.pc(), 0x8946);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8945), 0xf5);
        EXPECT(gbc.readMem(0xdae7), 0x60);
        EXPECT(gbc.readMem(0xdae8), 0xca);
        // F5 0060
        gbc.setState(0x8879, 0x961c, 0x280, 0xf9ee, 0x47c6, 0xb33c, 0x0, 0x1);
        gbc.writeMem(0x8879, { 0xf5 });
        gbc.writeMem(0x961a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x961a);
        EXPECT(gbc.pc(), 0x887a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8879), 0xf5);
        EXPECT(gbc.readMem(0x961a), 0x80);
        EXPECT(gbc.readMem(0x961b), 0x2);
        // F5 0061
        gbc.setState(0xc039, 0x83ff, 0xcbe0, 0xc567, 0x63cf, 0x11bc, 0x1, 0x0);
        gbc.writeMem(0x83fd, { 0x0, 0x0 });
        gbc.writeMem(0xc039, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x83fd);
        EXPECT(gbc.pc(), 0xc03a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83fd), 0xe0);
        EXPECT(gbc.readMem(0x83fe), 0xcb);
        EXPECT(gbc.readMem(0xc039), 0xf5);
        // F5 0066
        gbc.setState(0xaa4a, 0xf9ec, 0x8b90, 0x86c8, 0x9f6d, 0x97ae, 0x1, 0x0);
        gbc.writeMem(0xaa4a, { 0xf5 });
        gbc.writeMem(0xf9ea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf9ea);
        EXPECT(gbc.pc(), 0xaa4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa4a), 0xf5);
        EXPECT(gbc.readMem(0xf9ea), 0x90);
        EXPECT(gbc.readMem(0xf9eb), 0x8b);
        // F5 0068
        gbc.setState(0xcc1c, 0xad60, 0x1470, 0xbdb9, 0x9c36, 0xabd4, 0x0, 0x0);
        gbc.writeMem(0xad5e, { 0x0, 0x0 });
        gbc.writeMem(0xcc1c, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xad5e);
        EXPECT(gbc.pc(), 0xcc1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad5e), 0x70);
        EXPECT(gbc.readMem(0xad5f), 0x14);
        EXPECT(gbc.readMem(0xcc1c), 0xf5);
        // F5 006E
        gbc.setState(0x5e46, 0xb0e7, 0xa640, 0xaf1e, 0xcc63, 0xe588, 0x0, 0x1);
        gbc.writeMem(0x5e46, { 0xf5 });
        gbc.writeMem(0xb0e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb0e5);
        EXPECT(gbc.pc(), 0x5e47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0e5), 0x40);
        EXPECT(gbc.readMem(0xb0e6), 0xa6);
        // F5 006F
        gbc.setState(0xea8f, 0xf193, 0xfa60, 0xc7ff, 0xca9, 0xa28a, 0x1, 0x1);
        gbc.writeMem(0xea8f, { 0xf5 });
        gbc.writeMem(0xf191, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xf191);
        EXPECT(gbc.pc(), 0xea90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea8f), 0xf5);
        EXPECT(gbc.readMem(0xf191), 0x60);
        EXPECT(gbc.readMem(0xf192), 0xfa);
        // F5 0070
        gbc.setState(0x6bbc, 0xd6d1, 0xf070, 0x74cf, 0xafe6, 0xc6ca, 0x1, 0x0);
        gbc.writeMem(0x6bbc, { 0xf5 });
        gbc.writeMem(0xd6cf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd6cf);
        EXPECT(gbc.pc(), 0x6bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6cf), 0x70);
        EXPECT(gbc.readMem(0xd6d0), 0xf0);
        // F5 0071
        gbc.setState(0xcd7a, 0xf32d, 0x510, 0x992e, 0xd18, 0x31cb, 0x1, 0x0);
        gbc.writeMem(0xcd7a, { 0xf5 });
        gbc.writeMem(0xf32b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf32b);
        EXPECT(gbc.pc(), 0xcd7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd7a), 0xf5);
        EXPECT(gbc.readMem(0xf32b), 0x10);
        EXPECT(gbc.readMem(0xf32c), 0x5);
        // F5 0072
        gbc.setState(0x2d30, 0xcbf1, 0x3250, 0x6bb9, 0x948, 0xc959, 0x1, 0x1);
        gbc.writeMem(0x2d30, { 0xf5 });
        gbc.writeMem(0xcbef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xcbef);
        EXPECT(gbc.pc(), 0x2d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbef), 0x50);
        EXPECT(gbc.readMem(0xcbf0), 0x32);
        // F5 0076
        gbc.setState(0x79ec, 0xc196, 0x3cb0, 0x5457, 0xfb09, 0x5ac2, 0x0, 0x1);
        gbc.writeMem(0x79ec, { 0xf5 });
        gbc.writeMem(0xc194, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc194);
        EXPECT(gbc.pc(), 0x79ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc194), 0xb0);
        EXPECT(gbc.readMem(0xc195), 0x3c);
        // F5 007A
        gbc.setState(0x7b8, 0xf077, 0x9440, 0xc712, 0x5c72, 0x3679, 0x0, 0x1);
        gbc.writeMem(0x7b8, { 0xf5 });
        gbc.writeMem(0xf075, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf075);
        EXPECT(gbc.pc(), 0x7b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf075), 0x40);
        EXPECT(gbc.readMem(0xf076), 0x94);
        // F5 007C
        gbc.setState(0xc0ad, 0xd6c1, 0xbe40, 0x3c78, 0xc993, 0x8bc1, 0x0, 0x1);
        gbc.writeMem(0xc0ad, { 0xf5 });
        gbc.writeMem(0xd6bf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd6bf);
        EXPECT(gbc.pc(), 0xc0ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ad), 0xf5);
        EXPECT(gbc.readMem(0xd6bf), 0x40);
        EXPECT(gbc.readMem(0xd6c0), 0xbe);
        // F5 007D
        gbc.setState(0xb018, 0xffde, 0x1650, 0x1807, 0x422e, 0x586c, 0x0, 0x1);
        gbc.writeMem(0xb018, { 0xf5 });
        gbc.writeMem(0xffdc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xffdc);
        EXPECT(gbc.pc(), 0xb019);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb018), 0xf5);
        EXPECT(gbc.readMem(0xffdc), 0x50);
        EXPECT(gbc.readMem(0xffdd), 0x16);
        // F5 007E
        gbc.setState(0xe3bb, 0xfa10, 0xcae0, 0xd799, 0x387d, 0xf3e6, 0x0, 0x0);
        gbc.writeMem(0xe3bb, { 0xf5 });
        gbc.writeMem(0xfa0e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xfa0e);
        EXPECT(gbc.pc(), 0xe3bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3bb), 0xf5);
        EXPECT(gbc.readMem(0xfa0e), 0xe0);
        EXPECT(gbc.readMem(0xfa0f), 0xca);
        // F5 0081
        gbc.setState(0x1756, 0xaef0, 0x3da0, 0xb172, 0x5f84, 0x5123, 0x1, 0x1);
        gbc.writeMem(0x1756, { 0xf5 });
        gbc.writeMem(0xaeee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaeee);
        EXPECT(gbc.pc(), 0x1757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeee), 0xa0);
        EXPECT(gbc.readMem(0xaeef), 0x3d);
        // F5 0082
        gbc.setState(0x252e, 0xc63c, 0x5e0, 0xd208, 0x1750, 0x1c42, 0x1, 0x1);
        gbc.writeMem(0x252e, { 0xf5 });
        gbc.writeMem(0xc63a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc63a);
        EXPECT(gbc.pc(), 0x252f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63a), 0xe0);
        EXPECT(gbc.readMem(0xc63b), 0x5);
        // F5 0086
        gbc.setState(0xae9b, 0xefaa, 0x61d0, 0x7f8b, 0x659d, 0x7b1a, 0x0, 0x0);
        gbc.writeMem(0xae9b, { 0xf5 });
        gbc.writeMem(0xefa8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xefa8);
        EXPECT(gbc.pc(), 0xae9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae9b), 0xf5);
        EXPECT(gbc.readMem(0xefa8), 0xd0);
        EXPECT(gbc.readMem(0xefa9), 0x61);
        // F5 008B
        gbc.setState(0x33ea, 0xdf32, 0x6310, 0x701e, 0x1922, 0x5b2a, 0x1, 0x0);
        gbc.writeMem(0x33ea, { 0xf5 });
        gbc.writeMem(0xdf30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdf30);
        EXPECT(gbc.pc(), 0x33eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf30), 0x10);
        EXPECT(gbc.readMem(0xdf31), 0x63);
        // F5 008C
        gbc.setState(0x95d8, 0xde0d, 0x12c0, 0x26a0, 0x660c, 0x52a0, 0x0, 0x1);
        gbc.writeMem(0x95d8, { 0xf5 });
        gbc.writeMem(0xde0b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xde0b);
        EXPECT(gbc.pc(), 0x95d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d8), 0xf5);
        EXPECT(gbc.readMem(0xde0b), 0xc0);
        EXPECT(gbc.readMem(0xde0c), 0x12);
        // F5 008D
        gbc.setState(0x61d5, 0x8635, 0x1ae0, 0xcf2f, 0x3fdb, 0xf333, 0x0, 0x1);
        gbc.writeMem(0x61d5, { 0xf5 });
        gbc.writeMem(0x8633, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8633);
        EXPECT(gbc.pc(), 0x61d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8633), 0xe0);
        EXPECT(gbc.readMem(0x8634), 0x1a);
        // F5 008E
        gbc.setState(0xdd50, 0xdd70, 0xa220, 0xcaf1, 0x436b, 0xd97b, 0x0, 0x0);
        gbc.writeMem(0xdd50, { 0xf5 });
        gbc.writeMem(0xdd6e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xdd6e);
        EXPECT(gbc.pc(), 0xdd51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd50), 0xf5);
        EXPECT(gbc.readMem(0xdd6e), 0x20);
        EXPECT(gbc.readMem(0xdd6f), 0xa2);
        // F5 008F
        gbc.setState(0xb603, 0xe00c, 0xa970, 0x6970, 0x6f3f, 0x237e, 0x0, 0x1);
        gbc.writeMem(0xb603, { 0xf5 });
        gbc.writeMem(0xe00a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe00a);
        EXPECT(gbc.pc(), 0xb604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb603), 0xf5);
        EXPECT(gbc.readMem(0xe00a), 0x70);
        EXPECT(gbc.readMem(0xe00b), 0xa9);
        // F5 0090
        gbc.setState(0x604c, 0x89d7, 0x8740, 0xb524, 0xb6f8, 0x8f1f, 0x0, 0x0);
        gbc.writeMem(0x604c, { 0xf5 });
        gbc.writeMem(0x89d5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x89d5);
        EXPECT(gbc.pc(), 0x604d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89d5), 0x40);
        EXPECT(gbc.readMem(0x89d6), 0x87);
        // F5 0093
        gbc.setState(0x6b9b, 0x9e00, 0xe280, 0x2129, 0x5965, 0xea88, 0x1, 0x1);
        gbc.writeMem(0x6b9b, { 0xf5 });
        gbc.writeMem(0x9dfe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9dfe);
        EXPECT(gbc.pc(), 0x6b9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dfe), 0x80);
        EXPECT(gbc.readMem(0x9dff), 0xe2);
        // F5 0094
        gbc.setState(0xeb76, 0x83b4, 0xb510, 0xaa57, 0x12a0, 0xcf94, 0x1, 0x1);
        gbc.writeMem(0x83b2, { 0x0, 0x0 });
        gbc.writeMem(0xeb76, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x83b2);
        EXPECT(gbc.pc(), 0xeb77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b2), 0x10);
        EXPECT(gbc.readMem(0x83b3), 0xb5);
        EXPECT(gbc.readMem(0xeb76), 0xf5);
        // F5 0097
        gbc.setState(0x1fe4, 0xdb41, 0xa3e0, 0x1e27, 0xe631, 0x3662, 0x1, 0x0);
        gbc.writeMem(0x1fe4, { 0xf5 });
        gbc.writeMem(0xdb3f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xdb3f);
        EXPECT(gbc.pc(), 0x1fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb3f), 0xe0);
        EXPECT(gbc.readMem(0xdb40), 0xa3);
        // F5 009C
        gbc.setState(0xd63e, 0xea07, 0x28e0, 0x94a7, 0x97b3, 0xe91b, 0x0, 0x0);
        gbc.writeMem(0xd63e, { 0xf5 });
        gbc.writeMem(0xea05, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xea05);
        EXPECT(gbc.pc(), 0xd63f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd63e), 0xf5);
        EXPECT(gbc.readMem(0xea05), 0xe0);
        EXPECT(gbc.readMem(0xea06), 0x28);
        // F5 009E
        gbc.setState(0x17fd, 0x8f8e, 0xd1a0, 0x1088, 0xcd56, 0xdfc5, 0x0, 0x1);
        gbc.writeMem(0x17fd, { 0xf5 });
        gbc.writeMem(0x8f8c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x8f8c);
        EXPECT(gbc.pc(), 0x17fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f8c), 0xa0);
        EXPECT(gbc.readMem(0x8f8d), 0xd1);
        // F5 00A0
        gbc.setState(0x8349, 0x9c2f, 0x1530, 0x91e5, 0x6282, 0xce59, 0x0, 0x1);
        gbc.writeMem(0x8349, { 0xf5 });
        gbc.writeMem(0x9c2d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9c2d);
        EXPECT(gbc.pc(), 0x834a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8349), 0xf5);
        EXPECT(gbc.readMem(0x9c2d), 0x30);
        EXPECT(gbc.readMem(0x9c2e), 0x15);
        // F5 00A1
        gbc.setState(0x83ad, 0xd7fd, 0x1fb0, 0xea30, 0xd1b1, 0xbd9a, 0x0, 0x0);
        gbc.writeMem(0x83ad, { 0xf5 });
        gbc.writeMem(0xd7fb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd7fb);
        EXPECT(gbc.pc(), 0x83ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ad), 0xf5);
        EXPECT(gbc.readMem(0xd7fb), 0xb0);
        EXPECT(gbc.readMem(0xd7fc), 0x1f);
        // F5 00A2
        gbc.setState(0xd2ec, 0xe9fa, 0x6740, 0x493d, 0xc516, 0x9399, 0x1, 0x1);
        gbc.writeMem(0xd2ec, { 0xf5 });
        gbc.writeMem(0xe9f8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe9f8);
        EXPECT(gbc.pc(), 0xd2ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ec), 0xf5);
        EXPECT(gbc.readMem(0xe9f8), 0x40);
        EXPECT(gbc.readMem(0xe9f9), 0x67);
        // F5 00A3
        gbc.setState(0x4595, 0xda3d, 0x1ac0, 0xa541, 0x86ea, 0x1ffd, 0x0, 0x1);
        gbc.writeMem(0x4595, { 0xf5 });
        gbc.writeMem(0xda3b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xda3b);
        EXPECT(gbc.pc(), 0x4596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3b), 0xc0);
        EXPECT(gbc.readMem(0xda3c), 0x1a);
        // F5 00A6
        gbc.setState(0xc713, 0xff91, 0xd9c0, 0x3811, 0xcd5e, 0x555f, 0x0, 0x1);
        gbc.writeMem(0xc713, { 0xf5 });
        gbc.writeMem(0xff8f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xff8f);
        EXPECT(gbc.pc(), 0xc714);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc713), 0xf5);
        EXPECT(gbc.readMem(0xff8f), 0xc0);
        EXPECT(gbc.readMem(0xff90), 0xd9);
        // F5 00A9
        gbc.setState(0x5715, 0xef92, 0x6880, 0xa97c, 0x1de7, 0x2fb5, 0x1, 0x0);
        gbc.writeMem(0x5715, { 0xf5 });
        gbc.writeMem(0xef90, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xef90);
        EXPECT(gbc.pc(), 0x5716);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef90), 0x80);
        EXPECT(gbc.readMem(0xef91), 0x68);
        // F5 00AA
        gbc.setState(0xe203, 0xede1, 0x3830, 0xa2ce, 0x4700, 0x1b75, 0x1, 0x0);
        gbc.writeMem(0xe203, { 0xf5 });
        gbc.writeMem(0xeddf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xeddf);
        EXPECT(gbc.pc(), 0xe204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe203), 0xf5);
        EXPECT(gbc.readMem(0xeddf), 0x30);
        EXPECT(gbc.readMem(0xede0), 0x38);
        // F5 00AC
        gbc.setState(0xda00, 0xbc0d, 0xd540, 0x61b5, 0x81a3, 0x5441, 0x1, 0x1);
        gbc.writeMem(0xbc0b, { 0x0, 0x0 });
        gbc.writeMem(0xda00, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xbc0b);
        EXPECT(gbc.pc(), 0xda01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0b), 0x40);
        EXPECT(gbc.readMem(0xbc0c), 0xd5);
        EXPECT(gbc.readMem(0xda00), 0xf5);
        // F5 00AD
        gbc.setState(0xc08f, 0xff97, 0x7e80, 0x1f9a, 0xf8b1, 0x7512, 0x0, 0x1);
        gbc.writeMem(0xc08f, { 0xf5 });
        gbc.writeMem(0xff95, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xff95);
        EXPECT(gbc.pc(), 0xc090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc08f), 0xf5);
        EXPECT(gbc.readMem(0xff95), 0x80);
        EXPECT(gbc.readMem(0xff96), 0x7e);
        // F5 00AF
        gbc.setState(0x1337, 0xc065, 0x6f20, 0xfb5b, 0xedc1, 0xc0ff, 0x0, 0x0);
        gbc.writeMem(0x1337, { 0xf5 });
        gbc.writeMem(0xc063, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc063);
        EXPECT(gbc.pc(), 0x1338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc063), 0x20);
        EXPECT(gbc.readMem(0xc064), 0x6f);
        // F5 00B2
        gbc.setState(0x58f2, 0xfc74, 0x5670, 0xf192, 0x9354, 0xc2f4, 0x0, 0x0);
        gbc.writeMem(0x58f2, { 0xf5 });
        gbc.writeMem(0xfc72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfc72);
        EXPECT(gbc.pc(), 0x58f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc72), 0x70);
        EXPECT(gbc.readMem(0xfc73), 0x56);
        // F5 00B3
        gbc.setState(0xd103, 0xd18b, 0xb0f0, 0x6430, 0xdbb3, 0x7d2d, 0x0, 0x0);
        gbc.writeMem(0xd103, { 0xf5 });
        gbc.writeMem(0xd189, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd189);
        EXPECT(gbc.pc(), 0xd104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd103), 0xf5);
        EXPECT(gbc.readMem(0xd189), 0xf0);
        EXPECT(gbc.readMem(0xd18a), 0xb0);
        // F5 00B5
        gbc.setState(0x2e3b, 0x99ae, 0xdfc0, 0x5535, 0x3f1f, 0xa50, 0x0, 0x1);
        gbc.writeMem(0x2e3b, { 0xf5 });
        gbc.writeMem(0x99ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x99ac);
        EXPECT(gbc.pc(), 0x2e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ac), 0xc0);
        EXPECT(gbc.readMem(0x99ad), 0xdf);
        // F5 00B8
        gbc.setState(0x3853, 0xe4a2, 0xc80, 0xf774, 0x149b, 0x5652, 0x0, 0x0);
        gbc.writeMem(0x3853, { 0xf5 });
        gbc.writeMem(0xe4a0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe4a0);
        EXPECT(gbc.pc(), 0x3854);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4a0), 0x80);
        EXPECT(gbc.readMem(0xe4a1), 0xc);
        // F5 00BA
        gbc.setState(0x84e, 0xd029, 0x38c0, 0x2fce, 0xb266, 0xf691, 0x1, 0x0);
        gbc.writeMem(0x84e, { 0xf5 });
        gbc.writeMem(0xd027, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xd027);
        EXPECT(gbc.pc(), 0x84f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd027), 0xc0);
        EXPECT(gbc.readMem(0xd028), 0x38);
        // F5 00BB
        gbc.setState(0x9eb3, 0xa0bc, 0x14f0, 0xebfc, 0x81f5, 0x824d, 0x0, 0x0);
        gbc.writeMem(0x9eb3, { 0xf5 });
        gbc.writeMem(0xa0ba, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xa0ba);
        EXPECT(gbc.pc(), 0x9eb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9eb3), 0xf5);
        EXPECT(gbc.readMem(0xa0ba), 0xf0);
        EXPECT(gbc.readMem(0xa0bb), 0x14);
        // F5 00BD
        gbc.setState(0x1775, 0xda0a, 0xd4d0, 0x3fa9, 0x41e, 0x1c1c, 0x0, 0x0);
        gbc.writeMem(0x1775, { 0xf5 });
        gbc.writeMem(0xda08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xda08);
        EXPECT(gbc.pc(), 0x1776);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda08), 0xd0);
        EXPECT(gbc.readMem(0xda09), 0xd4);
        // F5 00BE
        gbc.setState(0xc570, 0xd231, 0x19c0, 0xf8a9, 0x84, 0x3ebd, 0x1, 0x0);
        gbc.writeMem(0xc570, { 0xf5 });
        gbc.writeMem(0xd22f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd22f);
        EXPECT(gbc.pc(), 0xc571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc570), 0xf5);
        EXPECT(gbc.readMem(0xd22f), 0xc0);
        EXPECT(gbc.readMem(0xd230), 0x19);
        // F5 00C0
        gbc.setState(0xe9b3, 0x8f96, 0xab20, 0xb7fb, 0x21e9, 0xcfc1, 0x1, 0x1);
        gbc.writeMem(0x8f94, { 0x0, 0x0 });
        gbc.writeMem(0xe9b3, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x8f94);
        EXPECT(gbc.pc(), 0xe9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f94), 0x20);
        EXPECT(gbc.readMem(0x8f95), 0xab);
        EXPECT(gbc.readMem(0xe9b3), 0xf5);
        // F5 00C1
        gbc.setState(0x1aaf, 0x8b6b, 0xd4e0, 0x5857, 0x3ed9, 0xdb4c, 0x1, 0x0);
        gbc.writeMem(0x1aaf, { 0xf5 });
        gbc.writeMem(0x8b69, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8b69);
        EXPECT(gbc.pc(), 0x1ab0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b69), 0xe0);
        EXPECT(gbc.readMem(0x8b6a), 0xd4);
        // F5 00C3
        gbc.setState(0x34ad, 0xdb01, 0xee90, 0xaf1f, 0xeb7d, 0x22fe, 0x1, 0x0);
        gbc.writeMem(0x34ad, { 0xf5 });
        gbc.writeMem(0xdaff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xdaff);
        EXPECT(gbc.pc(), 0x34ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaff), 0x90);
        EXPECT(gbc.readMem(0xdb00), 0xee);
        // F5 00C4
        gbc.setState(0x1a11, 0xa47f, 0x5040, 0x2d4, 0x78a3, 0x83c0, 0x1, 0x1);
        gbc.writeMem(0x1a11, { 0xf5 });
        gbc.writeMem(0xa47d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa47d);
        EXPECT(gbc.pc(), 0x1a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa47d), 0x40);
        EXPECT(gbc.readMem(0xa47e), 0x50);
        // F5 00C5
        gbc.setState(0xcf16, 0xfc28, 0xbd0, 0x8499, 0x4fd1, 0xa55f, 0x1, 0x0);
        gbc.writeMem(0xcf16, { 0xf5 });
        gbc.writeMem(0xfc26, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xfc26);
        EXPECT(gbc.pc(), 0xcf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf16), 0xf5);
        EXPECT(gbc.readMem(0xfc26), 0xd0);
        EXPECT(gbc.readMem(0xfc27), 0xb);
        // F5 00CB
        gbc.setState(0xb8f1, 0xd3ec, 0x95e0, 0x96a9, 0x8e8a, 0x46d0, 0x1, 0x0);
        gbc.writeMem(0xb8f1, { 0xf5 });
        gbc.writeMem(0xd3ea, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd3ea);
        EXPECT(gbc.pc(), 0xb8f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f1), 0xf5);
        EXPECT(gbc.readMem(0xd3ea), 0xe0);
        EXPECT(gbc.readMem(0xd3eb), 0x95);
        // F5 00CC
        gbc.setState(0x6bba, 0xcc88, 0xba30, 0x3072, 0x8c15, 0x64b2, 0x1, 0x0);
        gbc.writeMem(0x6bba, { 0xf5 });
        gbc.writeMem(0xcc86, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xcc86);
        EXPECT(gbc.pc(), 0x6bbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc86), 0x30);
        EXPECT(gbc.readMem(0xcc87), 0xba);
        // F5 00CF
        gbc.setState(0xd60, 0xa7de, 0xc7b0, 0xa57e, 0x345a, 0x6ac0, 0x0, 0x0);
        gbc.writeMem(0xd60, { 0xf5 });
        gbc.writeMem(0xa7dc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa7dc);
        EXPECT(gbc.pc(), 0xd61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7dc), 0xb0);
        EXPECT(gbc.readMem(0xa7dd), 0xc7);
        // F5 00D8
        gbc.setState(0x41ad, 0xe5a7, 0x3000, 0x739d, 0x3529, 0x74b3, 0x1, 0x0);
        gbc.writeMem(0x41ad, { 0xf5 });
        gbc.writeMem(0xe5a5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe5a5);
        EXPECT(gbc.pc(), 0x41ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5a5), 0x0);
        EXPECT(gbc.readMem(0xe5a6), 0x30);
        // F5 00DB
        gbc.setState(0x91d5, 0xc3f1, 0xcd10, 0x724a, 0x442, 0x38d9, 0x0, 0x0);
        gbc.writeMem(0x91d5, { 0xf5 });
        gbc.writeMem(0xc3ef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc3ef);
        EXPECT(gbc.pc(), 0x91d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d5), 0xf5);
        EXPECT(gbc.readMem(0xc3ef), 0x10);
        EXPECT(gbc.readMem(0xc3f0), 0xcd);
        // F5 00DD
        gbc.setState(0x8662, 0xc385, 0x16a0, 0x99ae, 0x44d7, 0x488e, 0x1, 0x0);
        gbc.writeMem(0x8662, { 0xf5 });
        gbc.writeMem(0xc383, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc383);
        EXPECT(gbc.pc(), 0x8663);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8662), 0xf5);
        EXPECT(gbc.readMem(0xc383), 0xa0);
        EXPECT(gbc.readMem(0xc384), 0x16);
        // F5 00DF
        gbc.setState(0xb223, 0xa0e9, 0x90f0, 0x2e58, 0xd754, 0xc26c, 0x1, 0x0);
        gbc.writeMem(0xa0e7, { 0x0, 0x0 });
        gbc.writeMem(0xb223, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xa0e7);
        EXPECT(gbc.pc(), 0xb224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0e7), 0xf0);
        EXPECT(gbc.readMem(0xa0e8), 0x90);
        EXPECT(gbc.readMem(0xb223), 0xf5);
        // F5 00E0
        gbc.setState(0x2246, 0xc577, 0xbcb0, 0x48ff, 0x5f06, 0x2a3f, 0x1, 0x1);
        gbc.writeMem(0x2246, { 0xf5 });
        gbc.writeMem(0xc575, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc575);
        EXPECT(gbc.pc(), 0x2247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc575), 0xb0);
        EXPECT(gbc.readMem(0xc576), 0xbc);
        // F5 00E1
        gbc.setState(0xd329, 0xfe38, 0x83e0, 0xae04, 0x1d15, 0xcae0, 0x0, 0x1);
        gbc.writeMem(0xd329, { 0xf5 });
        gbc.writeMem(0xfe36, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfe36);
        EXPECT(gbc.pc(), 0xd32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd329), 0xf5);
        EXPECT(gbc.readMem(0xfe36), 0xe0);
        EXPECT(gbc.readMem(0xfe37), 0x83);
        // F5 00E2
        gbc.setState(0x1013, 0xb43d, 0xc640, 0x8f50, 0x2dcd, 0x3505, 0x1, 0x0);
        gbc.writeMem(0x1013, { 0xf5 });
        gbc.writeMem(0xb43b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb43b);
        EXPECT(gbc.pc(), 0x1014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43b), 0x40);
        EXPECT(gbc.readMem(0xb43c), 0xc6);
        // F5 00E3
        gbc.setState(0xdc41, 0x8a60, 0x2920, 0xa49e, 0x4099, 0xeb69, 0x1, 0x1);
        gbc.writeMem(0x8a5e, { 0x0, 0x0 });
        gbc.writeMem(0xdc41, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8a5e);
        EXPECT(gbc.pc(), 0xdc42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5e), 0x20);
        EXPECT(gbc.readMem(0x8a5f), 0x29);
        EXPECT(gbc.readMem(0xdc41), 0xf5);
        // F5 00E5
        gbc.setState(0xe425, 0xfb81, 0x3ff0, 0x881d, 0x39b3, 0xa248, 0x1, 0x1);
        gbc.writeMem(0xe425, { 0xf5 });
        gbc.writeMem(0xfb7f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xfb7f);
        EXPECT(gbc.pc(), 0xe426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe425), 0xf5);
        EXPECT(gbc.readMem(0xfb7f), 0xf0);
        EXPECT(gbc.readMem(0xfb80), 0x3f);
        // F5 00E6
        gbc.setState(0xb35, 0xa2c2, 0x1e10, 0xd9f0, 0x8f2b, 0x950f, 0x0, 0x0);
        gbc.writeMem(0xb35, { 0xf5 });
        gbc.writeMem(0xa2c0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa2c0);
        EXPECT(gbc.pc(), 0xb36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2c0), 0x10);
        EXPECT(gbc.readMem(0xa2c1), 0x1e);
        // F5 00E8
        gbc.setState(0x8f33, 0x9021, 0xe920, 0x6375, 0x6d0e, 0x3374, 0x0, 0x0);
        gbc.writeMem(0x8f33, { 0xf5 });
        gbc.writeMem(0x901f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x901f);
        EXPECT(gbc.pc(), 0x8f34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f33), 0xf5);
        EXPECT(gbc.readMem(0x901f), 0x20);
        EXPECT(gbc.readMem(0x9020), 0xe9);
        // F5 00EA
        gbc.setState(0x8994, 0xa294, 0x20a0, 0xe7de, 0x27a9, 0x307, 0x0, 0x1);
        gbc.writeMem(0x8994, { 0xf5 });
        gbc.writeMem(0xa292, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa292);
        EXPECT(gbc.pc(), 0x8995);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8994), 0xf5);
        EXPECT(gbc.readMem(0xa292), 0xa0);
        EXPECT(gbc.readMem(0xa293), 0x20);
        // F5 00EF
        gbc.setState(0x5ced, 0xd601, 0x5e30, 0xe91e, 0x315c, 0xed9e, 0x0, 0x0);
        gbc.writeMem(0x5ced, { 0xf5 });
        gbc.writeMem(0xd5ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd5ff);
        EXPECT(gbc.pc(), 0x5cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ff), 0x30);
        EXPECT(gbc.readMem(0xd600), 0x5e);
        // F5 00F7
        gbc.setState(0x5026, 0x8d97, 0xa6f0, 0xe22c, 0x546a, 0x5fe8, 0x1, 0x0);
        gbc.writeMem(0x5026, { 0xf5 });
        gbc.writeMem(0x8d95, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x8d95);
        EXPECT(gbc.pc(), 0x5027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d95), 0xf0);
        EXPECT(gbc.readMem(0x8d96), 0xa6);
        // F5 00F8
        gbc.setState(0x2aa8, 0xd6c6, 0xfd30, 0x7561, 0x425d, 0xbf08, 0x1, 0x0);
        gbc.writeMem(0x2aa8, { 0xf5 });
        gbc.writeMem(0xd6c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd6c4);
        EXPECT(gbc.pc(), 0x2aa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6c4), 0x30);
        EXPECT(gbc.readMem(0xd6c5), 0xfd);
        // F5 00FB
        gbc.setState(0x6c8, 0x8a9c, 0x4630, 0x11e7, 0x1f06, 0x195d, 0x0, 0x1);
        gbc.writeMem(0x6c8, { 0xf5 });
        gbc.writeMem(0x8a9a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8a9a);
        EXPECT(gbc.pc(), 0x6c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a9a), 0x30);
        EXPECT(gbc.readMem(0x8a9b), 0x46);
        // F5 00FD
        gbc.setState(0x6fb4, 0xd1d2, 0x8980, 0xa7ca, 0x2894, 0x6a98, 0x1, 0x0);
        gbc.writeMem(0x6fb4, { 0xf5 });
        gbc.writeMem(0xd1d0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd1d0);
        EXPECT(gbc.pc(), 0x6fb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d0), 0x80);
        EXPECT(gbc.readMem(0xd1d1), 0x89);
        // F5 00FF
        gbc.setState(0xc3ba, 0xec7e, 0xd4a0, 0x157a, 0xd480, 0x2e28, 0x1, 0x1);
        gbc.writeMem(0xc3ba, { 0xf5 });
        gbc.writeMem(0xec7c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xec7c);
        EXPECT(gbc.pc(), 0xc3bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ba), 0xf5);
        EXPECT(gbc.readMem(0xec7c), 0xa0);
        EXPECT(gbc.readMem(0xec7d), 0xd4);
        // F5 0100
        gbc.setState(0xec22, 0xbdfb, 0xc3f0, 0xc5e, 0xe218, 0xd3db, 0x0, 0x1);
        gbc.writeMem(0xbdf9, { 0x0, 0x0 });
        gbc.writeMem(0xec22, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbdf9);
        EXPECT(gbc.pc(), 0xec23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdf9), 0xf0);
        EXPECT(gbc.readMem(0xbdfa), 0xc3);
        EXPECT(gbc.readMem(0xec22), 0xf5);
        // F5 0101
        gbc.setState(0x7809, 0xdf0a, 0x25f0, 0x894c, 0x68ca, 0x7bd8, 0x0, 0x0);
        gbc.writeMem(0x7809, { 0xf5 });
        gbc.writeMem(0xdf08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xdf08);
        EXPECT(gbc.pc(), 0x780a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf08), 0xf0);
        EXPECT(gbc.readMem(0xdf09), 0x25);
        // F5 0102
        gbc.setState(0x79ff, 0xe5a5, 0xd0d0, 0xd5b3, 0xc263, 0x5642, 0x0, 0x1);
        gbc.writeMem(0x79ff, { 0xf5 });
        gbc.writeMem(0xe5a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe5a3);
        EXPECT(gbc.pc(), 0x7a00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5a3), 0xd0);
        EXPECT(gbc.readMem(0xe5a4), 0xd0);
        // F5 0104
        gbc.setState(0xa15, 0xdfe4, 0x43a0, 0x865e, 0xdde2, 0x8af1, 0x1, 0x0);
        gbc.writeMem(0xa15, { 0xf5 });
        gbc.writeMem(0xdfe2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xdfe2);
        EXPECT(gbc.pc(), 0xa16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfe2), 0xa0);
        EXPECT(gbc.readMem(0xdfe3), 0x43);
        // F5 0105
        gbc.setState(0xdbb6, 0x9abe, 0xea40, 0x89e, 0x5505, 0xcbfb, 0x0, 0x1);
        gbc.writeMem(0x9abc, { 0x0, 0x0 });
        gbc.writeMem(0xdbb6, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9abc);
        EXPECT(gbc.pc(), 0xdbb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9abc), 0x40);
        EXPECT(gbc.readMem(0x9abd), 0xea);
        EXPECT(gbc.readMem(0xdbb6), 0xf5);
        // F5 0107
        gbc.setState(0x3272, 0xeffd, 0xfcd0, 0x637a, 0x69a8, 0x3d7b, 0x1, 0x0);
        gbc.writeMem(0x3272, { 0xf5 });
        gbc.writeMem(0xeffb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xeffb);
        EXPECT(gbc.pc(), 0x3273);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeffb), 0xd0);
        EXPECT(gbc.readMem(0xeffc), 0xfc);
        // F5 010A
        gbc.setState(0xe12a, 0x9a5d, 0x2540, 0xe7b, 0xb496, 0x7b81, 0x0, 0x0);
        gbc.writeMem(0x9a5b, { 0x0, 0x0 });
        gbc.writeMem(0xe12a, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9a5b);
        EXPECT(gbc.pc(), 0xe12b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5b), 0x40);
        EXPECT(gbc.readMem(0x9a5c), 0x25);
        EXPECT(gbc.readMem(0xe12a), 0xf5);
        // F5 010B
        gbc.setState(0x7879, 0xe8c9, 0x3fe0, 0xe548, 0xe44e, 0x5b8e, 0x1, 0x0);
        gbc.writeMem(0x7879, { 0xf5 });
        gbc.writeMem(0xe8c7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe8c7);
        EXPECT(gbc.pc(), 0x787a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c7), 0xe0);
        EXPECT(gbc.readMem(0xe8c8), 0x3f);
        // F5 010C
        gbc.setState(0xdf0e, 0xf101, 0xe170, 0x1be0, 0x60bd, 0xd74d, 0x1, 0x1);
        gbc.writeMem(0xdf0e, { 0xf5 });
        gbc.writeMem(0xf0ff, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf0ff);
        EXPECT(gbc.pc(), 0xdf0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf0e), 0xf5);
        EXPECT(gbc.readMem(0xf0ff), 0x70);
        EXPECT(gbc.readMem(0xf100), 0xe1);
        // F5 0110
        gbc.setState(0x1067, 0xbeee, 0x7070, 0x7703, 0xe90d, 0xf7d4, 0x0, 0x1);
        gbc.writeMem(0x1067, { 0xf5 });
        gbc.writeMem(0xbeec, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xbeec);
        EXPECT(gbc.pc(), 0x1068);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeec), 0x70);
        EXPECT(gbc.readMem(0xbeed), 0x70);
        // F5 0111
        gbc.setState(0x558, 0xc28a, 0x9b20, 0x2746, 0xd5c0, 0xfb7a, 0x1, 0x1);
        gbc.writeMem(0x558, { 0xf5 });
        gbc.writeMem(0xc288, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc288);
        EXPECT(gbc.pc(), 0x559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc288), 0x20);
        EXPECT(gbc.readMem(0xc289), 0x9b);
        // F5 0113
        gbc.setState(0x8f54, 0xbc77, 0x65b0, 0xe439, 0x49a4, 0x5d06, 0x1, 0x1);
        gbc.writeMem(0x8f54, { 0xf5 });
        gbc.writeMem(0xbc75, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbc75);
        EXPECT(gbc.pc(), 0x8f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f54), 0xf5);
        EXPECT(gbc.readMem(0xbc75), 0xb0);
        EXPECT(gbc.readMem(0xbc76), 0x65);
        // F5 0115
        gbc.setState(0x47e1, 0xcd14, 0x7f10, 0x1bc9, 0xe8ca, 0x16d4, 0x0, 0x0);
        gbc.writeMem(0x47e1, { 0xf5 });
        gbc.writeMem(0xcd12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xcd12);
        EXPECT(gbc.pc(), 0x47e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd12), 0x10);
        EXPECT(gbc.readMem(0xcd13), 0x7f);
        // F5 0116
        gbc.setState(0xde0d, 0x96d8, 0x7d80, 0x72c5, 0x16b4, 0x9130, 0x1, 0x1);
        gbc.writeMem(0x96d6, { 0x0, 0x0 });
        gbc.writeMem(0xde0d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x96d6);
        EXPECT(gbc.pc(), 0xde0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96d6), 0x80);
        EXPECT(gbc.readMem(0x96d7), 0x7d);
        EXPECT(gbc.readMem(0xde0d), 0xf5);
        // F5 0118
        gbc.setState(0x2dc1, 0x9814, 0xcc20, 0xd8, 0xc669, 0xe6d8, 0x1, 0x0);
        gbc.writeMem(0x2dc1, { 0xf5 });
        gbc.writeMem(0x9812, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x9812);
        EXPECT(gbc.pc(), 0x2dc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9812), 0x20);
        EXPECT(gbc.readMem(0x9813), 0xcc);
        // F5 011A
        gbc.setState(0xc578, 0xd6b8, 0x34d0, 0xb3c6, 0x68d5, 0x8a2c, 0x0, 0x0);
        gbc.writeMem(0xc578, { 0xf5 });
        gbc.writeMem(0xd6b6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd6b6);
        EXPECT(gbc.pc(), 0xc579);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc578), 0xf5);
        EXPECT(gbc.readMem(0xd6b6), 0xd0);
        EXPECT(gbc.readMem(0xd6b7), 0x34);
        // F5 011C
        gbc.setState(0xbe7f, 0x858f, 0x26f0, 0x94ed, 0xf53a, 0x1274, 0x1, 0x1);
        gbc.writeMem(0x858d, { 0x0, 0x0 });
        gbc.writeMem(0xbe7f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x858d);
        EXPECT(gbc.pc(), 0xbe80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x858d), 0xf0);
        EXPECT(gbc.readMem(0x858e), 0x26);
        EXPECT(gbc.readMem(0xbe7f), 0xf5);
        // F5 0120
        gbc.setState(0x87fa, 0x8b52, 0xdff0, 0x77ba, 0x447, 0xcdc, 0x1, 0x0);
        gbc.writeMem(0x87fa, { 0xf5 });
        gbc.writeMem(0x8b50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8b50);
        EXPECT(gbc.pc(), 0x87fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87fa), 0xf5);
        EXPECT(gbc.readMem(0x8b50), 0xf0);
        EXPECT(gbc.readMem(0x8b51), 0xdf);
        // F5 0122
        gbc.setState(0xaf55, 0x9e25, 0x9620, 0x65fd, 0x2415, 0x9f69, 0x1, 0x0);
        gbc.writeMem(0x9e23, { 0x0, 0x0 });
        gbc.writeMem(0xaf55, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x9e23);
        EXPECT(gbc.pc(), 0xaf56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e23), 0x20);
        EXPECT(gbc.readMem(0x9e24), 0x96);
        EXPECT(gbc.readMem(0xaf55), 0xf5);
        // F5 0124
        gbc.setState(0x4bdf, 0xa397, 0xe570, 0x57ab, 0xdd2, 0x6b1b, 0x1, 0x0);
        gbc.writeMem(0x4bdf, { 0xf5 });
        gbc.writeMem(0xa395, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa395);
        EXPECT(gbc.pc(), 0x4be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa395), 0x70);
        EXPECT(gbc.readMem(0xa396), 0xe5);
        // F5 0125
        gbc.setState(0xcfd8, 0xea0f, 0xcc30, 0xbad6, 0x2875, 0x98a, 0x0, 0x0);
        gbc.writeMem(0xcfd8, { 0xf5 });
        gbc.writeMem(0xea0d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xea0d);
        EXPECT(gbc.pc(), 0xcfd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfd8), 0xf5);
        EXPECT(gbc.readMem(0xea0d), 0x30);
        EXPECT(gbc.readMem(0xea0e), 0xcc);
        // F5 0126
        gbc.setState(0x3e0, 0xe1e6, 0xfe90, 0x8ac8, 0xd08d, 0x1227, 0x1, 0x1);
        gbc.writeMem(0x3e0, { 0xf5 });
        gbc.writeMem(0xe1e4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe1e4);
        EXPECT(gbc.pc(), 0x3e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1e4), 0x90);
        EXPECT(gbc.readMem(0xe1e5), 0xfe);
        // F5 0127
        gbc.setState(0x81c8, 0x958b, 0x1030, 0xb4a0, 0xa1a9, 0x7ca7, 0x1, 0x1);
        gbc.writeMem(0x81c8, { 0xf5 });
        gbc.writeMem(0x9589, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x9589);
        EXPECT(gbc.pc(), 0x81c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c8), 0xf5);
        EXPECT(gbc.readMem(0x9589), 0x30);
        EXPECT(gbc.readMem(0x958a), 0x10);
        // F5 012A
        gbc.setState(0xbac3, 0xb981, 0x210, 0xaa35, 0x5e20, 0xe027, 0x0, 0x0);
        gbc.writeMem(0xb97f, { 0x0, 0x0 });
        gbc.writeMem(0xbac3, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb97f);
        EXPECT(gbc.pc(), 0xbac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb97f), 0x10);
        EXPECT(gbc.readMem(0xb980), 0x2);
        EXPECT(gbc.readMem(0xbac3), 0xf5);
        // F5 012D
        gbc.setState(0xa7d9, 0xac11, 0x1250, 0xdc45, 0x6ae0, 0xa50b, 0x0, 0x0);
        gbc.writeMem(0xa7d9, { 0xf5 });
        gbc.writeMem(0xac0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xac0f);
        EXPECT(gbc.pc(), 0xa7da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d9), 0xf5);
        EXPECT(gbc.readMem(0xac0f), 0x50);
        EXPECT(gbc.readMem(0xac10), 0x12);
        // F5 012E
        gbc.setState(0x834, 0xad79, 0x7b90, 0xc8a6, 0x8aa2, 0x4578, 0x0, 0x1);
        gbc.writeMem(0x834, { 0xf5 });
        gbc.writeMem(0xad77, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xad77);
        EXPECT(gbc.pc(), 0x835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad77), 0x90);
        EXPECT(gbc.readMem(0xad78), 0x7b);
        // F5 0132
        gbc.setState(0x92dc, 0xab50, 0x27e0, 0xa94d, 0xeee8, 0x429a, 0x1, 0x0);
        gbc.writeMem(0x92dc, { 0xf5 });
        gbc.writeMem(0xab4e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xab4e);
        EXPECT(gbc.pc(), 0x92dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92dc), 0xf5);
        EXPECT(gbc.readMem(0xab4e), 0xe0);
        EXPECT(gbc.readMem(0xab4f), 0x27);
        // F5 0133
        gbc.setState(0xc0c5, 0xb77a, 0x5710, 0xa8b5, 0x29c6, 0x52ed, 0x0, 0x0);
        gbc.writeMem(0xb778, { 0x0, 0x0 });
        gbc.writeMem(0xc0c5, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb778);
        EXPECT(gbc.pc(), 0xc0c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb778), 0x10);
        EXPECT(gbc.readMem(0xb779), 0x57);
        EXPECT(gbc.readMem(0xc0c5), 0xf5);
        // F5 0135
        gbc.setState(0x7c92, 0xaf85, 0xfb00, 0xb3ba, 0xc0a9, 0x2746, 0x0, 0x0);
        gbc.writeMem(0x7c92, { 0xf5 });
        gbc.writeMem(0xaf83, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xaf83);
        EXPECT(gbc.pc(), 0x7c93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf83), 0x0);
        EXPECT(gbc.readMem(0xaf84), 0xfb);
        // F5 0136
        gbc.setState(0x1792, 0xe116, 0xc010, 0x3f3e, 0x9ee3, 0x5839, 0x0, 0x1);
        gbc.writeMem(0x1792, { 0xf5 });
        gbc.writeMem(0xe114, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe114);
        EXPECT(gbc.pc(), 0x1793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe114), 0x10);
        EXPECT(gbc.readMem(0xe115), 0xc0);
        // F5 0139
        gbc.setState(0x8c3d, 0xdb62, 0x650, 0xe6f0, 0x844c, 0x3626, 0x1, 0x0);
        gbc.writeMem(0x8c3d, { 0xf5 });
        gbc.writeMem(0xdb60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xdb60);
        EXPECT(gbc.pc(), 0x8c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c3d), 0xf5);
        EXPECT(gbc.readMem(0xdb60), 0x50);
        EXPECT(gbc.readMem(0xdb61), 0x6);
        // F5 013A
        gbc.setState(0x32ae, 0x8ce7, 0x7030, 0x9678, 0x7b50, 0xa333, 0x1, 0x1);
        gbc.writeMem(0x32ae, { 0xf5 });
        gbc.writeMem(0x8ce5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8ce5);
        EXPECT(gbc.pc(), 0x32af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ce5), 0x30);
        EXPECT(gbc.readMem(0x8ce6), 0x70);
        // F5 013D
        gbc.setState(0x5649, 0x98b0, 0x14e0, 0x6ca9, 0x47e2, 0x553f, 0x0, 0x1);
        gbc.writeMem(0x5649, { 0xf5 });
        gbc.writeMem(0x98ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x98ae);
        EXPECT(gbc.pc(), 0x564a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ae), 0xe0);
        EXPECT(gbc.readMem(0x98af), 0x14);
        // F5 0140
        gbc.setState(0x8371, 0xabca, 0x93c0, 0xf771, 0x783a, 0x4edd, 0x0, 0x1);
        gbc.writeMem(0x8371, { 0xf5 });
        gbc.writeMem(0xabc8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xabc8);
        EXPECT(gbc.pc(), 0x8372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8371), 0xf5);
        EXPECT(gbc.readMem(0xabc8), 0xc0);
        EXPECT(gbc.readMem(0xabc9), 0x93);
        // F5 0144
        gbc.setState(0xd075, 0xf5a0, 0x5f30, 0x5223, 0xb7f1, 0x73f7, 0x0, 0x1);
        gbc.writeMem(0xd075, { 0xf5 });
        gbc.writeMem(0xf59e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0xd076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd075), 0xf5);
        EXPECT(gbc.readMem(0xf59e), 0x30);
        EXPECT(gbc.readMem(0xf59f), 0x5f);
        // F5 0145
        gbc.setState(0x2046, 0xe013, 0x21c0, 0x3035, 0xffaf, 0x2762, 0x1, 0x1);
        gbc.writeMem(0x2046, { 0xf5 });
        gbc.writeMem(0xe011, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe011);
        EXPECT(gbc.pc(), 0x2047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe011), 0xc0);
        EXPECT(gbc.readMem(0xe012), 0x21);
        // F5 014A
        gbc.setState(0xe0a5, 0xe589, 0x51f0, 0xeef3, 0xcdd8, 0x251a, 0x1, 0x0);
        gbc.writeMem(0xe0a5, { 0xf5 });
        gbc.writeMem(0xe587, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe587);
        EXPECT(gbc.pc(), 0xe0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0a5), 0xf5);
        EXPECT(gbc.readMem(0xe587), 0xf0);
        EXPECT(gbc.readMem(0xe588), 0x51);
        // F5 014C
        gbc.setState(0xd11d, 0x80d2, 0x10f0, 0xcbaa, 0xa005, 0x55d4, 0x0, 0x1);
        gbc.writeMem(0x80d0, { 0x0, 0x0 });
        gbc.writeMem(0xd11d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x80d0);
        EXPECT(gbc.pc(), 0xd11e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d0), 0xf0);
        EXPECT(gbc.readMem(0x80d1), 0x10);
        EXPECT(gbc.readMem(0xd11d), 0xf5);
        // F5 014E
        gbc.setState(0xd0c1, 0xda7c, 0xad30, 0xfea7, 0x70b8, 0xbc6a, 0x0, 0x0);
        gbc.writeMem(0xd0c1, { 0xf5 });
        gbc.writeMem(0xda7a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xda7a);
        EXPECT(gbc.pc(), 0xd0c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0c1), 0xf5);
        EXPECT(gbc.readMem(0xda7a), 0x30);
        EXPECT(gbc.readMem(0xda7b), 0xad);
        // F5 0151
        gbc.setState(0x6060, 0xa286, 0xe070, 0xa075, 0xebf6, 0x6ee0, 0x1, 0x1);
        gbc.writeMem(0x6060, { 0xf5 });
        gbc.writeMem(0xa284, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa284);
        EXPECT(gbc.pc(), 0x6061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa284), 0x70);
        EXPECT(gbc.readMem(0xa285), 0xe0);
        // F5 0156
        gbc.setState(0xa107, 0xa51c, 0xa30, 0xbb76, 0x7106, 0x14cd, 0x0, 0x0);
        gbc.writeMem(0xa107, { 0xf5 });
        gbc.writeMem(0xa51a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xa51a);
        EXPECT(gbc.pc(), 0xa108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa107), 0xf5);
        EXPECT(gbc.readMem(0xa51a), 0x30);
        EXPECT(gbc.readMem(0xa51b), 0xa);
        // F5 0158
        gbc.setState(0x68e6, 0xc591, 0xdeb0, 0xa716, 0xa2e3, 0xc49d, 0x1, 0x1);
        gbc.writeMem(0x68e6, { 0xf5 });
        gbc.writeMem(0xc58f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc58f);
        EXPECT(gbc.pc(), 0x68e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc58f), 0xb0);
        EXPECT(gbc.readMem(0xc590), 0xde);
        // F5 015B
        gbc.setState(0xef76, 0xc525, 0x5f70, 0x9dec, 0x8f2f, 0x40cf, 0x0, 0x0);
        gbc.writeMem(0xc523, { 0x0, 0x0 });
        gbc.writeMem(0xef76, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc523);
        EXPECT(gbc.pc(), 0xef77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc523), 0x70);
        EXPECT(gbc.readMem(0xc524), 0x5f);
        EXPECT(gbc.readMem(0xef76), 0xf5);
        // F5 015C
        gbc.setState(0x6caa, 0x9776, 0x96d0, 0x73d4, 0xb7cd, 0x45c7, 0x1, 0x0);
        gbc.writeMem(0x6caa, { 0xf5 });
        gbc.writeMem(0x9774, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x9774);
        EXPECT(gbc.pc(), 0x6cab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9774), 0xd0);
        EXPECT(gbc.readMem(0x9775), 0x96);
        // F5 015D
        gbc.setState(0xb64d, 0x94d2, 0x2300, 0x7ca0, 0x73d1, 0xe485, 0x1, 0x0);
        gbc.writeMem(0x94d0, { 0x0, 0x0 });
        gbc.writeMem(0xb64d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x94d0);
        EXPECT(gbc.pc(), 0xb64e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d0), 0x0);
        EXPECT(gbc.readMem(0x94d1), 0x23);
        EXPECT(gbc.readMem(0xb64d), 0xf5);
        // F5 0162
        gbc.setState(0x1de4, 0xe63e, 0xa9f0, 0x84e1, 0xed89, 0xd69a, 0x0, 0x1);
        gbc.writeMem(0x1de4, { 0xf5 });
        gbc.writeMem(0xe63c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe63c);
        EXPECT(gbc.pc(), 0x1de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe63c), 0xf0);
        EXPECT(gbc.readMem(0xe63d), 0xa9);
        // F5 0163
        gbc.setState(0xc1f0, 0xa699, 0x5ef0, 0x7b7f, 0xee86, 0xb31c, 0x0, 0x0);
        gbc.writeMem(0xa697, { 0x0, 0x0 });
        gbc.writeMem(0xc1f0, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xa697);
        EXPECT(gbc.pc(), 0xc1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa697), 0xf0);
        EXPECT(gbc.readMem(0xa698), 0x5e);
        EXPECT(gbc.readMem(0xc1f0), 0xf5);
        // F5 0167
        gbc.setState(0x5bfa, 0xa978, 0x1740, 0xcb3e, 0xc344, 0xdebc, 0x1, 0x1);
        gbc.writeMem(0x5bfa, { 0xf5 });
        gbc.writeMem(0xa976, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xa976);
        EXPECT(gbc.pc(), 0x5bfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa976), 0x40);
        EXPECT(gbc.readMem(0xa977), 0x17);
        // F5 0169
        gbc.setState(0xd75f, 0xf38b, 0xc980, 0x3402, 0xf3c6, 0x176a, 0x0, 0x1);
        gbc.writeMem(0xd75f, { 0xf5 });
        gbc.writeMem(0xf389, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xf389);
        EXPECT(gbc.pc(), 0xd760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75f), 0xf5);
        EXPECT(gbc.readMem(0xf389), 0x80);
        EXPECT(gbc.readMem(0xf38a), 0xc9);
        // F5 016A
        gbc.setState(0x6876, 0xa1f2, 0xade0, 0x5fd1, 0x88b, 0xc176, 0x1, 0x0);
        gbc.writeMem(0x6876, { 0xf5 });
        gbc.writeMem(0xa1f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa1f0);
        EXPECT(gbc.pc(), 0x6877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f0), 0xe0);
        EXPECT(gbc.readMem(0xa1f1), 0xad);
        // F5 016F
        gbc.setState(0x8068, 0xc535, 0xe820, 0xfca2, 0x8f76, 0xf34a, 0x1, 0x1);
        gbc.writeMem(0x8068, { 0xf5 });
        gbc.writeMem(0xc533, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc533);
        EXPECT(gbc.pc(), 0x8069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8068), 0xf5);
        EXPECT(gbc.readMem(0xc533), 0x20);
        EXPECT(gbc.readMem(0xc534), 0xe8);
        // F5 0170
        gbc.setState(0x85cf, 0xe5e5, 0xca10, 0xe1ab, 0xb172, 0x768d, 0x1, 0x0);
        gbc.writeMem(0x85cf, { 0xf5 });
        gbc.writeMem(0xe5e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xe5e3);
        EXPECT(gbc.pc(), 0x85d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85cf), 0xf5);
        EXPECT(gbc.readMem(0xe5e3), 0x10);
        EXPECT(gbc.readMem(0xe5e4), 0xca);
        // F5 0176
        gbc.setState(0x9073, 0xe298, 0x2cf0, 0xb435, 0x5808, 0xfdd2, 0x0, 0x0);
        gbc.writeMem(0x9073, { 0xf5 });
        gbc.writeMem(0xe296, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe296);
        EXPECT(gbc.pc(), 0x9074);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9073), 0xf5);
        EXPECT(gbc.readMem(0xe296), 0xf0);
        EXPECT(gbc.readMem(0xe297), 0x2c);
        // F5 0178
        gbc.setState(0x76b0, 0x8b19, 0xb310, 0xaaa7, 0x8e0b, 0xaa9c, 0x1, 0x1);
        gbc.writeMem(0x76b0, { 0xf5 });
        gbc.writeMem(0x8b17, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8b17);
        EXPECT(gbc.pc(), 0x76b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b17), 0x10);
        EXPECT(gbc.readMem(0x8b18), 0xb3);
        // F5 0179
        gbc.setState(0xc7eb, 0xebd7, 0xc850, 0xf245, 0xcfe, 0xf29e, 0x0, 0x0);
        gbc.writeMem(0xc7eb, { 0xf5 });
        gbc.writeMem(0xebd5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xebd5);
        EXPECT(gbc.pc(), 0xc7ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7eb), 0xf5);
        EXPECT(gbc.readMem(0xebd5), 0x50);
        EXPECT(gbc.readMem(0xebd6), 0xc8);
        // F5 017B
        gbc.setState(0xb21a, 0xe0d1, 0xcee0, 0x2151, 0x2f0d, 0xcc94, 0x1, 0x1);
        gbc.writeMem(0xb21a, { 0xf5 });
        gbc.writeMem(0xe0cf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe0cf);
        EXPECT(gbc.pc(), 0xb21b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb21a), 0xf5);
        EXPECT(gbc.readMem(0xe0cf), 0xe0);
        EXPECT(gbc.readMem(0xe0d0), 0xce);
        // F5 017E
        gbc.setState(0x62b7, 0xa679, 0x3f60, 0x6867, 0x94b, 0xef10, 0x0, 0x1);
        gbc.writeMem(0x62b7, { 0xf5 });
        gbc.writeMem(0xa677, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa677);
        EXPECT(gbc.pc(), 0x62b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa677), 0x60);
        EXPECT(gbc.readMem(0xa678), 0x3f);
        // F5 017F
        gbc.setState(0x5b53, 0xa4a0, 0x7380, 0x751b, 0x97a3, 0x94f0, 0x0, 0x1);
        gbc.writeMem(0x5b53, { 0xf5 });
        gbc.writeMem(0xa49e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa49e);
        EXPECT(gbc.pc(), 0x5b54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa49e), 0x80);
        EXPECT(gbc.readMem(0xa49f), 0x73);
        // F5 0180
        gbc.setState(0x3a7e, 0xdaf0, 0x80f0, 0x2463, 0x597, 0x7e17, 0x1, 0x1);
        gbc.writeMem(0x3a7e, { 0xf5 });
        gbc.writeMem(0xdaee, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xdaee);
        EXPECT(gbc.pc(), 0x3a7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdaee), 0xf0);
        EXPECT(gbc.readMem(0xdaef), 0x80);
        // F5 0182
        gbc.setState(0xdb9f, 0xa96c, 0x2b20, 0xf976, 0x6578, 0x4f3, 0x1, 0x1);
        gbc.writeMem(0xa96a, { 0x0, 0x0 });
        gbc.writeMem(0xdb9f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa96a);
        EXPECT(gbc.pc(), 0xdba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa96a), 0x20);
        EXPECT(gbc.readMem(0xa96b), 0x2b);
        EXPECT(gbc.readMem(0xdb9f), 0xf5);
        // F5 0183
        gbc.setState(0x11c4, 0xea29, 0xb50, 0xc324, 0x59a7, 0x97e4, 0x0, 0x1);
        gbc.writeMem(0x11c4, { 0xf5 });
        gbc.writeMem(0xea27, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xea27);
        EXPECT(gbc.pc(), 0x11c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea27), 0x50);
        EXPECT(gbc.readMem(0xea28), 0xb);
        // F5 0184
        gbc.setState(0x3894, 0x9260, 0xd550, 0x279f, 0x5a2f, 0x1534, 0x1, 0x1);
        gbc.writeMem(0x3894, { 0xf5 });
        gbc.writeMem(0x925e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x925e);
        EXPECT(gbc.pc(), 0x3895);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x925e), 0x50);
        EXPECT(gbc.readMem(0x925f), 0xd5);
        // F5 0186
        gbc.setState(0x2df4, 0x9a32, 0x8730, 0xde3, 0xa06e, 0x9c56, 0x0, 0x1);
        gbc.writeMem(0x2df4, { 0xf5 });
        gbc.writeMem(0x9a30, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9a30);
        EXPECT(gbc.pc(), 0x2df5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a30), 0x30);
        EXPECT(gbc.readMem(0x9a31), 0x87);
        // F5 0187
        gbc.setState(0x5888, 0xe677, 0xbfe0, 0x9633, 0xbca1, 0xcc54, 0x0, 0x0);
        gbc.writeMem(0x5888, { 0xf5 });
        gbc.writeMem(0xe675, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe675);
        EXPECT(gbc.pc(), 0x5889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe675), 0xe0);
        EXPECT(gbc.readMem(0xe676), 0xbf);
        // F5 0188
        gbc.setState(0xfbb, 0xf6b4, 0x5510, 0xbb4b, 0xd331, 0xb6b8, 0x0, 0x0);
        gbc.writeMem(0xfbb, { 0xf5 });
        gbc.writeMem(0xf6b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf6b2);
        EXPECT(gbc.pc(), 0xfbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6b2), 0x10);
        EXPECT(gbc.readMem(0xf6b3), 0x55);
        // F5 0189
        gbc.setState(0xa66f, 0x91d1, 0xe020, 0x3a64, 0xd74f, 0x3017, 0x0, 0x0);
        gbc.writeMem(0x91cf, { 0x0, 0x0 });
        gbc.writeMem(0xa66f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x91cf);
        EXPECT(gbc.pc(), 0xa670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91cf), 0x20);
        EXPECT(gbc.readMem(0x91d0), 0xe0);
        EXPECT(gbc.readMem(0xa66f), 0xf5);
        // F5 018A
        gbc.setState(0x5a5b, 0xa8d1, 0xe890, 0xd002, 0xb117, 0x94b2, 0x1, 0x1);
        gbc.writeMem(0x5a5b, { 0xf5 });
        gbc.writeMem(0xa8cf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa8cf);
        EXPECT(gbc.pc(), 0x5a5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8cf), 0x90);
        EXPECT(gbc.readMem(0xa8d0), 0xe8);
        // F5 018B
        gbc.setState(0x8166, 0xfdc5, 0x6aa0, 0x74bf, 0x8aa8, 0x545c, 0x0, 0x0);
        gbc.writeMem(0x8166, { 0xf5 });
        gbc.writeMem(0xfdc3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfdc3);
        EXPECT(gbc.pc(), 0x8167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8166), 0xf5);
        EXPECT(gbc.readMem(0xfdc3), 0xa0);
        EXPECT(gbc.readMem(0xfdc4), 0x6a);
        // F5 018C
        gbc.setState(0xb673, 0xef11, 0xd660, 0xfcc, 0xf1e, 0x15fc, 0x1, 0x0);
        gbc.writeMem(0xb673, { 0xf5 });
        gbc.writeMem(0xef0f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xef0f);
        EXPECT(gbc.pc(), 0xb674);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb673), 0xf5);
        EXPECT(gbc.readMem(0xef0f), 0x60);
        EXPECT(gbc.readMem(0xef10), 0xd6);
        // F5 018D
        gbc.setState(0x6e4, 0x91b2, 0x8750, 0xb7d, 0x82ef, 0xd8b8, 0x1, 0x1);
        gbc.writeMem(0x6e4, { 0xf5 });
        gbc.writeMem(0x91b0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x91b0);
        EXPECT(gbc.pc(), 0x6e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b0), 0x50);
        EXPECT(gbc.readMem(0x91b1), 0x87);
        // F5 0190
        gbc.setState(0x2f3d, 0xe443, 0xf6f0, 0x44aa, 0x8334, 0x2ca7, 0x1, 0x0);
        gbc.writeMem(0x2f3d, { 0xf5 });
        gbc.writeMem(0xe441, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xe441);
        EXPECT(gbc.pc(), 0x2f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe441), 0xf0);
        EXPECT(gbc.readMem(0xe442), 0xf6);
        // F5 0192
        gbc.setState(0x6c6c, 0xa76e, 0x7490, 0x3af5, 0x838e, 0x97d9, 0x0, 0x1);
        gbc.writeMem(0x6c6c, { 0xf5 });
        gbc.writeMem(0xa76c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa76c);
        EXPECT(gbc.pc(), 0x6c6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76c), 0x90);
        EXPECT(gbc.readMem(0xa76d), 0x74);
        // F5 019B
        gbc.setState(0xbde0, 0xcb56, 0xee0, 0x9a78, 0x7840, 0x456, 0x0, 0x0);
        gbc.writeMem(0xbde0, { 0xf5 });
        gbc.writeMem(0xcb54, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcb54);
        EXPECT(gbc.pc(), 0xbde1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbde0), 0xf5);
        EXPECT(gbc.readMem(0xcb54), 0xe0);
        EXPECT(gbc.readMem(0xcb55), 0xe);
        // F5 019D
        gbc.setState(0x5cc2, 0xadbf, 0x1a40, 0x4d53, 0xe02c, 0x3a10, 0x0, 0x0);
        gbc.writeMem(0x5cc2, { 0xf5 });
        gbc.writeMem(0xadbd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xadbd);
        EXPECT(gbc.pc(), 0x5cc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadbd), 0x40);
        EXPECT(gbc.readMem(0xadbe), 0x1a);
        // F5 01A1
        gbc.setState(0xea3, 0xb8a4, 0x94b0, 0xe85c, 0x7602, 0x7469, 0x1, 0x0);
        gbc.writeMem(0xea3, { 0xf5 });
        gbc.writeMem(0xb8a2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb8a2);
        EXPECT(gbc.pc(), 0xea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8a2), 0xb0);
        EXPECT(gbc.readMem(0xb8a3), 0x94);
        // F5 01A2
        gbc.setState(0x4f48, 0xbb74, 0x77c0, 0xd747, 0xf58a, 0x1a91, 0x1, 0x1);
        gbc.writeMem(0x4f48, { 0xf5 });
        gbc.writeMem(0xbb72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbb72);
        EXPECT(gbc.pc(), 0x4f49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb72), 0xc0);
        EXPECT(gbc.readMem(0xbb73), 0x77);
        // F5 01A3
        gbc.setState(0xbf5a, 0x9a0a, 0x45c0, 0xfe87, 0x937c, 0xd6c3, 0x0, 0x1);
        gbc.writeMem(0x9a08, { 0x0, 0x0 });
        gbc.writeMem(0xbf5a, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9a08);
        EXPECT(gbc.pc(), 0xbf5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a08), 0xc0);
        EXPECT(gbc.readMem(0x9a09), 0x45);
        EXPECT(gbc.readMem(0xbf5a), 0xf5);
        // F5 01A4
        gbc.setState(0x713e, 0xdc1d, 0x4990, 0xa22c, 0x2af7, 0xae83, 0x0, 0x1);
        gbc.writeMem(0x713e, { 0xf5 });
        gbc.writeMem(0xdc1b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xdc1b);
        EXPECT(gbc.pc(), 0x713f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc1b), 0x90);
        EXPECT(gbc.readMem(0xdc1c), 0x49);
        // F5 01A9
        gbc.setState(0x3ddb, 0xfefd, 0xead0, 0xf9df, 0x6928, 0xefa7, 0x1, 0x0);
        gbc.writeMem(0x3ddb, { 0xf5 });
        gbc.writeMem(0xfefb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfefb);
        EXPECT(gbc.pc(), 0x3ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfefb), 0xd0);
        EXPECT(gbc.readMem(0xfefc), 0xea);
        // F5 01AA
        gbc.setState(0xb007, 0xd8e6, 0x1f90, 0x186d, 0x500d, 0xc4c7, 0x1, 0x0);
        gbc.writeMem(0xb007, { 0xf5 });
        gbc.writeMem(0xd8e4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd8e4);
        EXPECT(gbc.pc(), 0xb008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb007), 0xf5);
        EXPECT(gbc.readMem(0xd8e4), 0x90);
        EXPECT(gbc.readMem(0xd8e5), 0x1f);
        // F5 01AD
        gbc.setState(0xb5f6, 0xd168, 0xfbe0, 0x62, 0x5b0f, 0x86bd, 0x0, 0x1);
        gbc.writeMem(0xb5f6, { 0xf5 });
        gbc.writeMem(0xd166, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd166);
        EXPECT(gbc.pc(), 0xb5f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f6), 0xf5);
        EXPECT(gbc.readMem(0xd166), 0xe0);
        EXPECT(gbc.readMem(0xd167), 0xfb);
        // F5 01AE
        gbc.setState(0x3280, 0x91b5, 0x9e70, 0xf7a9, 0xeb87, 0x474a, 0x1, 0x0);
        gbc.writeMem(0x3280, { 0xf5 });
        gbc.writeMem(0x91b3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x91b3);
        EXPECT(gbc.pc(), 0x3281);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91b3), 0x70);
        EXPECT(gbc.readMem(0x91b4), 0x9e);
        // F5 01B2
        gbc.setState(0xdc3b, 0xf023, 0xb3f0, 0x6f64, 0xf816, 0xc082, 0x1, 0x0);
        gbc.writeMem(0xdc3b, { 0xf5 });
        gbc.writeMem(0xf021, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf021);
        EXPECT(gbc.pc(), 0xdc3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc3b), 0xf5);
        EXPECT(gbc.readMem(0xf021), 0xf0);
        EXPECT(gbc.readMem(0xf022), 0xb3);
        // F5 01B3
        gbc.setState(0x92, 0xa019, 0xf460, 0x4f4, 0x665c, 0x6c77, 0x1, 0x0);
        gbc.writeMem(0x92, { 0xf5 });
        gbc.writeMem(0xa017, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xa017);
        EXPECT(gbc.pc(), 0x93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa017), 0x60);
        EXPECT(gbc.readMem(0xa018), 0xf4);
        // F5 01B4
        gbc.setState(0xe00f, 0xebe8, 0x4f60, 0x114c, 0x1844, 0x7363, 0x1, 0x0);
        gbc.writeMem(0xe00f, { 0xf5 });
        gbc.writeMem(0xebe6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xebe6);
        EXPECT(gbc.pc(), 0xe010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00f), 0xf5);
        EXPECT(gbc.readMem(0xebe6), 0x60);
        EXPECT(gbc.readMem(0xebe7), 0x4f);
        // F5 01B5
        gbc.setState(0xd427, 0xb5ca, 0x1380, 0x9787, 0x8e9e, 0x14b6, 0x0, 0x1);
        gbc.writeMem(0xb5c8, { 0x0, 0x0 });
        gbc.writeMem(0xd427, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xb5c8);
        EXPECT(gbc.pc(), 0xd428);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c8), 0x80);
        EXPECT(gbc.readMem(0xb5c9), 0x13);
        EXPECT(gbc.readMem(0xd427), 0xf5);
        // F5 01B7
        gbc.setState(0x51a3, 0xf1bd, 0xecb0, 0xeaa3, 0x9c5e, 0x9496, 0x1, 0x0);
        gbc.writeMem(0x51a3, { 0xf5 });
        gbc.writeMem(0xf1bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf1bb);
        EXPECT(gbc.pc(), 0x51a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf1bb), 0xb0);
        EXPECT(gbc.readMem(0xf1bc), 0xec);
        // F5 01B8
        gbc.setState(0x8ef1, 0xe87c, 0x1380, 0x2477, 0x1498, 0xd952, 0x0, 0x0);
        gbc.writeMem(0x8ef1, { 0xf5 });
        gbc.writeMem(0xe87a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe87a);
        EXPECT(gbc.pc(), 0x8ef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ef1), 0xf5);
        EXPECT(gbc.readMem(0xe87a), 0x80);
        EXPECT(gbc.readMem(0xe87b), 0x13);
        // F5 01BA
        gbc.setState(0xd8f3, 0xf3c4, 0xc970, 0xcec7, 0x89c9, 0x6ddb, 0x0, 0x0);
        gbc.writeMem(0xd8f3, { 0xf5 });
        gbc.writeMem(0xf3c2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf3c2);
        EXPECT(gbc.pc(), 0xd8f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f3), 0xf5);
        EXPECT(gbc.readMem(0xf3c2), 0x70);
        EXPECT(gbc.readMem(0xf3c3), 0xc9);
        // F5 01BE
        gbc.setState(0xcb1, 0xe943, 0x7c20, 0x1ea4, 0xe8e9, 0x6938, 0x1, 0x1);
        gbc.writeMem(0xcb1, { 0xf5 });
        gbc.writeMem(0xe941, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xe941);
        EXPECT(gbc.pc(), 0xcb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe941), 0x20);
        EXPECT(gbc.readMem(0xe942), 0x7c);
        // F5 01C3
        gbc.setState(0x8b70, 0x9984, 0xf0d0, 0xfce0, 0xf57, 0x7024, 0x1, 0x0);
        gbc.writeMem(0x8b70, { 0xf5 });
        gbc.writeMem(0x9982, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9982);
        EXPECT(gbc.pc(), 0x8b71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b70), 0xf5);
        EXPECT(gbc.readMem(0x9982), 0xd0);
        EXPECT(gbc.readMem(0x9983), 0xf0);
        // F5 01C6
        gbc.setState(0xacb2, 0x9a54, 0x3e80, 0x20f7, 0x70b4, 0x5201, 0x0, 0x1);
        gbc.writeMem(0x9a52, { 0x0, 0x0 });
        gbc.writeMem(0xacb2, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9a52);
        EXPECT(gbc.pc(), 0xacb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a52), 0x80);
        EXPECT(gbc.readMem(0x9a53), 0x3e);
        EXPECT(gbc.readMem(0xacb2), 0xf5);
        // F5 01C7
        gbc.setState(0x9c1e, 0xe556, 0x25e0, 0x66dc, 0x719d, 0x6753, 0x1, 0x1);
        gbc.writeMem(0x9c1e, { 0xf5 });
        gbc.writeMem(0xe554, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe554);
        EXPECT(gbc.pc(), 0x9c1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c1e), 0xf5);
        EXPECT(gbc.readMem(0xe554), 0xe0);
        EXPECT(gbc.readMem(0xe555), 0x25);
        // F5 01C9
        gbc.setState(0x3cb2, 0xe394, 0xc970, 0x978d, 0xd15c, 0xd4f5, 0x1, 0x0);
        gbc.writeMem(0x3cb2, { 0xf5 });
        gbc.writeMem(0xe392, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe392);
        EXPECT(gbc.pc(), 0x3cb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe392), 0x70);
        EXPECT(gbc.readMem(0xe393), 0xc9);
        // F5 01CE
        gbc.setState(0x6c7f, 0xbca0, 0x26c0, 0xadf1, 0xfd4, 0x3cf2, 0x0, 0x0);
        gbc.writeMem(0x6c7f, { 0xf5 });
        gbc.writeMem(0xbc9e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbc9e);
        EXPECT(gbc.pc(), 0x6c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc9e), 0xc0);
        EXPECT(gbc.readMem(0xbc9f), 0x26);
        // F5 01D5
        gbc.setState(0xcc6f, 0x8bd9, 0xc770, 0x8f95, 0xaff7, 0x6291, 0x1, 0x1);
        gbc.writeMem(0x8bd7, { 0x0, 0x0 });
        gbc.writeMem(0xcc6f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x8bd7);
        EXPECT(gbc.pc(), 0xcc70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bd7), 0x70);
        EXPECT(gbc.readMem(0x8bd8), 0xc7);
        EXPECT(gbc.readMem(0xcc6f), 0xf5);
        // F5 01D8
        gbc.setState(0x54a8, 0xb40f, 0x42c0, 0x5ce, 0xeea5, 0x1fb0, 0x1, 0x1);
        gbc.writeMem(0x54a8, { 0xf5 });
        gbc.writeMem(0xb40d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb40d);
        EXPECT(gbc.pc(), 0x54a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb40d), 0xc0);
        EXPECT(gbc.readMem(0xb40e), 0x42);
        // F5 01DA
        gbc.setState(0xadc3, 0x8ede, 0x3c50, 0x2fc1, 0x6d40, 0x9fec, 0x0, 0x0);
        gbc.writeMem(0x8edc, { 0x0, 0x0 });
        gbc.writeMem(0xadc3, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8edc);
        EXPECT(gbc.pc(), 0xadc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8edc), 0x50);
        EXPECT(gbc.readMem(0x8edd), 0x3c);
        EXPECT(gbc.readMem(0xadc3), 0xf5);
        // F5 01DB
        gbc.setState(0x8f5d, 0xe974, 0x3b30, 0xb7ef, 0x2e54, 0x6d21, 0x1, 0x1);
        gbc.writeMem(0x8f5d, { 0xf5 });
        gbc.writeMem(0xe972, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xe972);
        EXPECT(gbc.pc(), 0x8f5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5d), 0xf5);
        EXPECT(gbc.readMem(0xe972), 0x30);
        EXPECT(gbc.readMem(0xe973), 0x3b);
        // F5 01DE
        gbc.setState(0x5294, 0x93d3, 0x5700, 0xcd49, 0x7662, 0x48bc, 0x0, 0x1);
        gbc.writeMem(0x5294, { 0xf5 });
        gbc.writeMem(0x93d1, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x93d1);
        EXPECT(gbc.pc(), 0x5295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93d1), 0x0);
        EXPECT(gbc.readMem(0x93d2), 0x57);
        // F5 01E3
        gbc.setState(0xd63, 0xb759, 0x7020, 0xa182, 0x1165, 0xd7be, 0x0, 0x0);
        gbc.writeMem(0xd63, { 0xf5 });
        gbc.writeMem(0xb757, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb757);
        EXPECT(gbc.pc(), 0xd64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb757), 0x20);
        EXPECT(gbc.readMem(0xb758), 0x70);
        // F5 01E7
        gbc.setState(0xa19f, 0x98c2, 0xdfa0, 0x3593, 0xf5ad, 0x7bae, 0x0, 0x1);
        gbc.writeMem(0x98c0, { 0x0, 0x0 });
        gbc.writeMem(0xa19f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x98c0);
        EXPECT(gbc.pc(), 0xa1a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98c0), 0xa0);
        EXPECT(gbc.readMem(0x98c1), 0xdf);
        EXPECT(gbc.readMem(0xa19f), 0xf5);
        // F5 01E9
        gbc.setState(0x5353, 0x9f89, 0x5ed0, 0x6c26, 0x20a5, 0x6f8e, 0x0, 0x0);
        gbc.writeMem(0x5353, { 0xf5 });
        gbc.writeMem(0x9f87, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x9f87);
        EXPECT(gbc.pc(), 0x5354);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f87), 0xd0);
        EXPECT(gbc.readMem(0x9f88), 0x5e);
        // F5 01EC
        gbc.setState(0x836a, 0xdee7, 0xa420, 0xa0c1, 0xcc76, 0xb89c, 0x0, 0x0);
        gbc.writeMem(0x836a, { 0xf5 });
        gbc.writeMem(0xdee5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xdee5);
        EXPECT(gbc.pc(), 0x836b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x836a), 0xf5);
        EXPECT(gbc.readMem(0xdee5), 0x20);
        EXPECT(gbc.readMem(0xdee6), 0xa4);
        // F5 01F1
        gbc.setState(0x51ea, 0xd389, 0xe8f0, 0xbc6b, 0x338f, 0xff23, 0x1, 0x1);
        gbc.writeMem(0x51ea, { 0xf5 });
        gbc.writeMem(0xd387, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd387);
        EXPECT(gbc.pc(), 0x51eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd387), 0xf0);
        EXPECT(gbc.readMem(0xd388), 0xe8);
        // F5 01F6
        gbc.setState(0x4f93, 0xd5cc, 0xfc0, 0x3d0d, 0xaad8, 0xcc5a, 0x0, 0x1);
        gbc.writeMem(0x4f93, { 0xf5 });
        gbc.writeMem(0xd5ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd5ca);
        EXPECT(gbc.pc(), 0x4f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ca), 0xc0);
        EXPECT(gbc.readMem(0xd5cb), 0xf);
        // F5 01F7
        gbc.setState(0xeba2, 0x877b, 0x19f0, 0xa9e4, 0x5c0b, 0xeb48, 0x0, 0x1);
        gbc.writeMem(0x8779, { 0x0, 0x0 });
        gbc.writeMem(0xeba2, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8779);
        EXPECT(gbc.pc(), 0xeba3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8779), 0xf0);
        EXPECT(gbc.readMem(0x877a), 0x19);
        EXPECT(gbc.readMem(0xeba2), 0xf5);
        // F5 01F8
        gbc.setState(0x15bd, 0xf4f2, 0xf270, 0xe60, 0xcfb6, 0x9adf, 0x1, 0x1);
        gbc.writeMem(0x15bd, { 0xf5 });
        gbc.writeMem(0xf4f0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf4f0);
        EXPECT(gbc.pc(), 0x15be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf4f0), 0x70);
        EXPECT(gbc.readMem(0xf4f1), 0xf2);
        // F5 01FE
        gbc.setState(0x5650, 0xa07c, 0xa800, 0x93f3, 0xb271, 0x6ff9, 0x1, 0x1);
        gbc.writeMem(0x5650, { 0xf5 });
        gbc.writeMem(0xa07a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xa07a);
        EXPECT(gbc.pc(), 0x5651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa07a), 0x0);
        EXPECT(gbc.readMem(0xa07b), 0xa8);
        // F5 01FF
        gbc.setState(0x2cab, 0xe31f, 0xdf40, 0x863c, 0x981f, 0x1b30, 0x0, 0x0);
        gbc.writeMem(0x2cab, { 0xf5 });
        gbc.writeMem(0xe31d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe31d);
        EXPECT(gbc.pc(), 0x2cac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe31d), 0x40);
        EXPECT(gbc.readMem(0xe31e), 0xdf);
        // F5 0201
        gbc.setState(0x7d4e, 0xf12e, 0x3f30, 0x2314, 0xfa2a, 0xc91f, 0x0, 0x1);
        gbc.writeMem(0x7d4e, { 0xf5 });
        gbc.writeMem(0xf12c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf12c);
        EXPECT(gbc.pc(), 0x7d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf12c), 0x30);
        EXPECT(gbc.readMem(0xf12d), 0x3f);
        // F5 0202
        gbc.setState(0x1b05, 0xdfcb, 0xf4f0, 0x5cd3, 0x4f40, 0xbc2c, 0x1, 0x0);
        gbc.writeMem(0x1b05, { 0xf5 });
        gbc.writeMem(0xdfc9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdfc9);
        EXPECT(gbc.pc(), 0x1b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfc9), 0xf0);
        EXPECT(gbc.readMem(0xdfca), 0xf4);
        // F5 0203
        gbc.setState(0xd558, 0x92ad, 0xc80, 0xefa6, 0xe89e, 0x35b2, 0x0, 0x1);
        gbc.writeMem(0x92ab, { 0x0, 0x0 });
        gbc.writeMem(0xd558, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x92ab);
        EXPECT(gbc.pc(), 0xd559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ab), 0x80);
        EXPECT(gbc.readMem(0x92ac), 0xc);
        EXPECT(gbc.readMem(0xd558), 0xf5);
        // F5 0204
        gbc.setState(0x4a57, 0x94be, 0x4b40, 0x89b8, 0x1c0d, 0x6d85, 0x0, 0x0);
        gbc.writeMem(0x4a57, { 0xf5 });
        gbc.writeMem(0x94bc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x94bc);
        EXPECT(gbc.pc(), 0x4a58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94bc), 0x40);
        EXPECT(gbc.readMem(0x94bd), 0x4b);
        // F5 0208
        gbc.setState(0xaead, 0x8b33, 0xa560, 0x576f, 0x5b43, 0x47a1, 0x0, 0x0);
        gbc.writeMem(0x8b31, { 0x0, 0x0 });
        gbc.writeMem(0xaead, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8b31);
        EXPECT(gbc.pc(), 0xaeae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b31), 0x60);
        EXPECT(gbc.readMem(0x8b32), 0xa5);
        EXPECT(gbc.readMem(0xaead), 0xf5);
        // F5 020A
        gbc.setState(0xdd0, 0xc3da, 0xd190, 0x6294, 0xb2c4, 0x164, 0x1, 0x0);
        gbc.writeMem(0xdd0, { 0xf5 });
        gbc.writeMem(0xc3d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc3d8);
        EXPECT(gbc.pc(), 0xdd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d8), 0x90);
        EXPECT(gbc.readMem(0xc3d9), 0xd1);
        // F5 020B
        gbc.setState(0xe1e2, 0xd360, 0x3f00, 0x1ffd, 0x6bee, 0x6911, 0x1, 0x1);
        gbc.writeMem(0xd35e, { 0x0, 0x0 });
        gbc.writeMem(0xe1e2, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd35e);
        EXPECT(gbc.pc(), 0xe1e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35e), 0x0);
        EXPECT(gbc.readMem(0xd35f), 0x3f);
        EXPECT(gbc.readMem(0xe1e2), 0xf5);
        // F5 020D
        gbc.setState(0x687e, 0xacd9, 0x93b0, 0xffde, 0xd8d1, 0xe036, 0x0, 0x1);
        gbc.writeMem(0x687e, { 0xf5 });
        gbc.writeMem(0xacd7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xacd7);
        EXPECT(gbc.pc(), 0x687f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacd7), 0xb0);
        EXPECT(gbc.readMem(0xacd8), 0x93);
        // F5 020E
        gbc.setState(0x7b94, 0xa600, 0xbcc0, 0xda73, 0x1420, 0x5030, 0x1, 0x0);
        gbc.writeMem(0x7b94, { 0xf5 });
        gbc.writeMem(0xa5fe, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa5fe);
        EXPECT(gbc.pc(), 0x7b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5fe), 0xc0);
        EXPECT(gbc.readMem(0xa5ff), 0xbc);
        // F5 020F
        gbc.setState(0xbcb7, 0xdac1, 0x3740, 0xd7df, 0xf5ac, 0xee69, 0x1, 0x0);
        gbc.writeMem(0xbcb7, { 0xf5 });
        gbc.writeMem(0xdabf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xdabf);
        EXPECT(gbc.pc(), 0xbcb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcb7), 0xf5);
        EXPECT(gbc.readMem(0xdabf), 0x40);
        EXPECT(gbc.readMem(0xdac0), 0x37);
        // F5 0217
        gbc.setState(0x3bbf, 0xf6ce, 0x6db0, 0xfdc3, 0x37a8, 0x9ab2, 0x1, 0x1);
        gbc.writeMem(0x3bbf, { 0xf5 });
        gbc.writeMem(0xf6cc, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf6cc);
        EXPECT(gbc.pc(), 0x3bc0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf6cc), 0xb0);
        EXPECT(gbc.readMem(0xf6cd), 0x6d);
        // F5 0218
        gbc.setState(0xeb6b, 0xff36, 0xadb0, 0x312d, 0x5c2e, 0x7cb6, 0x0, 0x0);
        gbc.writeMem(0xeb6b, { 0xf5 });
        gbc.writeMem(0xff34, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xff34);
        EXPECT(gbc.pc(), 0xeb6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb6b), 0xf5);
        EXPECT(gbc.readMem(0xff34), 0xb0);
        EXPECT(gbc.readMem(0xff35), 0xad);
        // F5 021A
        gbc.setState(0xb072, 0xebd5, 0x6e30, 0xcfa, 0x1f3f, 0x6d45, 0x0, 0x1);
        gbc.writeMem(0xb072, { 0xf5 });
        gbc.writeMem(0xebd3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xebd3);
        EXPECT(gbc.pc(), 0xb073);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb072), 0xf5);
        EXPECT(gbc.readMem(0xebd3), 0x30);
        EXPECT(gbc.readMem(0xebd4), 0x6e);
        // F5 021C
        gbc.setState(0xb873, 0xf777, 0xc4a0, 0xb748, 0xaa05, 0x154d, 0x1, 0x0);
        gbc.writeMem(0xb873, { 0xf5 });
        gbc.writeMem(0xf775, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf775);
        EXPECT(gbc.pc(), 0xb874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb873), 0xf5);
        EXPECT(gbc.readMem(0xf775), 0xa0);
        EXPECT(gbc.readMem(0xf776), 0xc4);
        // F5 021D
        gbc.setState(0x6626, 0xe896, 0x1f50, 0xd8d1, 0xec85, 0xcd9f, 0x1, 0x1);
        gbc.writeMem(0x6626, { 0xf5 });
        gbc.writeMem(0xe894, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe894);
        EXPECT(gbc.pc(), 0x6627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe894), 0x50);
        EXPECT(gbc.readMem(0xe895), 0x1f);
        // F5 021E
        gbc.setState(0xe259, 0xfa14, 0x1d0, 0xe5d8, 0x8a9d, 0x88cc, 0x0, 0x0);
        gbc.writeMem(0xe259, { 0xf5 });
        gbc.writeMem(0xfa12, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xfa12);
        EXPECT(gbc.pc(), 0xe25a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe259), 0xf5);
        EXPECT(gbc.readMem(0xfa12), 0xd0);
        EXPECT(gbc.readMem(0xfa13), 0x1);
        // F5 0220
        gbc.setState(0x9517, 0x850a, 0x85b0, 0xdbb3, 0x4cee, 0xca70, 0x0, 0x1);
        gbc.writeMem(0x8508, { 0x0, 0x0 });
        gbc.writeMem(0x9517, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8508);
        EXPECT(gbc.pc(), 0x9518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8508), 0xb0);
        EXPECT(gbc.readMem(0x8509), 0x85);
        EXPECT(gbc.readMem(0x9517), 0xf5);
        // F5 0226
        gbc.setState(0x6273, 0xbf15, 0xd590, 0x3659, 0xe9e2, 0xbbb8, 0x1, 0x1);
        gbc.writeMem(0x6273, { 0xf5 });
        gbc.writeMem(0xbf13, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbf13);
        EXPECT(gbc.pc(), 0x6274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf13), 0x90);
        EXPECT(gbc.readMem(0xbf14), 0xd5);
        // F5 0227
        gbc.setState(0x7162, 0xf611, 0x8020, 0x1e8d, 0xdf60, 0xd159, 0x1, 0x0);
        gbc.writeMem(0x7162, { 0xf5 });
        gbc.writeMem(0xf60f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xf60f);
        EXPECT(gbc.pc(), 0x7163);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf60f), 0x20);
        EXPECT(gbc.readMem(0xf610), 0x80);
        // F5 0228
        gbc.setState(0xd9d0, 0x8cdb, 0x970, 0xf826, 0x1c29, 0xeca6, 0x1, 0x1);
        gbc.writeMem(0x8cd9, { 0x0, 0x0 });
        gbc.writeMem(0xd9d0, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x8cd9);
        EXPECT(gbc.pc(), 0xd9d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd9), 0x70);
        EXPECT(gbc.readMem(0x8cda), 0x9);
        EXPECT(gbc.readMem(0xd9d0), 0xf5);
        // F5 0229
        gbc.setState(0xb716, 0xb9a1, 0x54a0, 0xf103, 0x1f75, 0x516b, 0x0, 0x1);
        gbc.writeMem(0xb716, { 0xf5 });
        gbc.writeMem(0xb99f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb99f);
        EXPECT(gbc.pc(), 0xb717);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb716), 0xf5);
        EXPECT(gbc.readMem(0xb99f), 0xa0);
        EXPECT(gbc.readMem(0xb9a0), 0x54);
        // F5 022C
        gbc.setState(0x6afb, 0xc660, 0x9270, 0xa683, 0xfbfc, 0x307b, 0x1, 0x1);
        gbc.writeMem(0x6afb, { 0xf5 });
        gbc.writeMem(0xc65e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc65e);
        EXPECT(gbc.pc(), 0x6afc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc65e), 0x70);
        EXPECT(gbc.readMem(0xc65f), 0x92);
        // F5 022E
        gbc.setState(0x4690, 0xa766, 0x5bb0, 0x8493, 0xc5ef, 0x386f, 0x1, 0x0);
        gbc.writeMem(0x4690, { 0xf5 });
        gbc.writeMem(0xa764, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa764);
        EXPECT(gbc.pc(), 0x4691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa764), 0xb0);
        EXPECT(gbc.readMem(0xa765), 0x5b);
        // F5 022F
        gbc.setState(0x1434, 0xe9a9, 0xea10, 0x91b6, 0x2917, 0x8286, 0x1, 0x1);
        gbc.writeMem(0x1434, { 0xf5 });
        gbc.writeMem(0xe9a7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe9a7);
        EXPECT(gbc.pc(), 0x1435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9a7), 0x10);
        EXPECT(gbc.readMem(0xe9a8), 0xea);
        // F5 0232
        gbc.setState(0xb, 0x95ff, 0xfd80, 0xb48f, 0xdb59, 0xdf71, 0x0, 0x0);
        gbc.writeMem(0xb, { 0xf5 });
        gbc.writeMem(0x95fd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x95fd);
        EXPECT(gbc.pc(), 0xc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95fd), 0x80);
        EXPECT(gbc.readMem(0x95fe), 0xfd);
        // F5 0233
        gbc.setState(0x14bb, 0x94c7, 0x61e0, 0xd088, 0x3c27, 0x5a53, 0x1, 0x0);
        gbc.writeMem(0x14bb, { 0xf5 });
        gbc.writeMem(0x94c5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x94c5);
        EXPECT(gbc.pc(), 0x14bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94c5), 0xe0);
        EXPECT(gbc.readMem(0x94c6), 0x61);
        // F5 0236
        gbc.setState(0x8fa6, 0xb682, 0xfd50, 0x5ad8, 0x77f0, 0xfa68, 0x1, 0x1);
        gbc.writeMem(0x8fa6, { 0xf5 });
        gbc.writeMem(0xb680, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb680);
        EXPECT(gbc.pc(), 0x8fa7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fa6), 0xf5);
        EXPECT(gbc.readMem(0xb680), 0x50);
        EXPECT(gbc.readMem(0xb681), 0xfd);
        // F5 0237
        gbc.setState(0x2603, 0xbda6, 0x62c0, 0xfa7a, 0xcfc1, 0xe5a2, 0x1, 0x0);
        gbc.writeMem(0x2603, { 0xf5 });
        gbc.writeMem(0xbda4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xbda4);
        EXPECT(gbc.pc(), 0x2604);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda4), 0xc0);
        EXPECT(gbc.readMem(0xbda5), 0x62);
        // F5 0238
        gbc.setState(0xa22c, 0x8fbb, 0xb40, 0x9cbe, 0x59de, 0xf217, 0x1, 0x0);
        gbc.writeMem(0x8fb9, { 0x0, 0x0 });
        gbc.writeMem(0xa22c, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x8fb9);
        EXPECT(gbc.pc(), 0xa22d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb9), 0x40);
        EXPECT(gbc.readMem(0x8fba), 0xb);
        EXPECT(gbc.readMem(0xa22c), 0xf5);
        // F5 023A
        gbc.setState(0x2d37, 0xccff, 0x4300, 0x90ef, 0x8865, 0xd55e, 0x0, 0x1);
        gbc.writeMem(0x2d37, { 0xf5 });
        gbc.writeMem(0xccfd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xccfd);
        EXPECT(gbc.pc(), 0x2d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccfd), 0x0);
        EXPECT(gbc.readMem(0xccfe), 0x43);
        // F5 023B
        gbc.setState(0x5f4f, 0xfd5d, 0x9230, 0x1a54, 0x23c2, 0xbff2, 0x0, 0x1);
        gbc.writeMem(0x5f4f, { 0xf5 });
        gbc.writeMem(0xfd5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xfd5b);
        EXPECT(gbc.pc(), 0x5f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd5b), 0x30);
        EXPECT(gbc.readMem(0xfd5c), 0x92);
        // F5 023D
        gbc.setState(0xab6a, 0xb8a9, 0xd9a0, 0x437c, 0x91a1, 0x61c, 0x1, 0x1);
        gbc.writeMem(0xab6a, { 0xf5 });
        gbc.writeMem(0xb8a7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb8a7);
        EXPECT(gbc.pc(), 0xab6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab6a), 0xf5);
        EXPECT(gbc.readMem(0xb8a7), 0xa0);
        EXPECT(gbc.readMem(0xb8a8), 0xd9);
        // F5 023E
        gbc.setState(0xe52f, 0xd231, 0xaae0, 0x960, 0x32d7, 0xd863, 0x0, 0x1);
        gbc.writeMem(0xd22f, { 0x0, 0x0 });
        gbc.writeMem(0xe52f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd22f);
        EXPECT(gbc.pc(), 0xe530);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd22f), 0xe0);
        EXPECT(gbc.readMem(0xd230), 0xaa);
        EXPECT(gbc.readMem(0xe52f), 0xf5);
        // F5 023F
        gbc.setState(0xa0ac, 0xfbb1, 0x3310, 0xde26, 0x5468, 0xa87e, 0x1, 0x1);
        gbc.writeMem(0xa0ac, { 0xf5 });
        gbc.writeMem(0xfbaf, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xfbaf);
        EXPECT(gbc.pc(), 0xa0ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ac), 0xf5);
        EXPECT(gbc.readMem(0xfbaf), 0x10);
        EXPECT(gbc.readMem(0xfbb0), 0x33);
        // F5 0241
        gbc.setState(0xe89c, 0xac06, 0xfa0, 0xce60, 0xc547, 0x60b2, 0x0, 0x1);
        gbc.writeMem(0xac04, { 0x0, 0x0 });
        gbc.writeMem(0xe89c, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xac04);
        EXPECT(gbc.pc(), 0xe89d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac04), 0xa0);
        EXPECT(gbc.readMem(0xac05), 0xf);
        EXPECT(gbc.readMem(0xe89c), 0xf5);
        // F5 0242
        gbc.setState(0xc726, 0xeefd, 0xf370, 0x15e0, 0x630c, 0x5ea5, 0x0, 0x0);
        gbc.writeMem(0xc726, { 0xf5 });
        gbc.writeMem(0xeefb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xeefb);
        EXPECT(gbc.pc(), 0xc727);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc726), 0xf5);
        EXPECT(gbc.readMem(0xeefb), 0x70);
        EXPECT(gbc.readMem(0xeefc), 0xf3);
        // F5 0244
        gbc.setState(0x915b, 0x998c, 0xfb90, 0x80ea, 0xef6e, 0xe2a2, 0x0, 0x0);
        gbc.writeMem(0x915b, { 0xf5 });
        gbc.writeMem(0x998a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x998a);
        EXPECT(gbc.pc(), 0x915c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x915b), 0xf5);
        EXPECT(gbc.readMem(0x998a), 0x90);
        EXPECT(gbc.readMem(0x998b), 0xfb);
        // F5 0246
        gbc.setState(0x3f40, 0xf2e0, 0x7470, 0x2962, 0xd378, 0x239c, 0x1, 0x1);
        gbc.writeMem(0x3f40, { 0xf5 });
        gbc.writeMem(0xf2de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf2de);
        EXPECT(gbc.pc(), 0x3f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xf2de), 0x70);
        EXPECT(gbc.readMem(0xf2df), 0x74);
        // F5 0247
        gbc.setState(0x58b9, 0xe603, 0x80f0, 0xc701, 0x8128, 0x301, 0x1, 0x0);
        gbc.writeMem(0x58b9, { 0xf5 });
        gbc.writeMem(0xe601, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xe601);
        EXPECT(gbc.pc(), 0x58ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe601), 0xf0);
        EXPECT(gbc.readMem(0xe602), 0x80);
        // F5 0248
        gbc.setState(0x3cf5, 0xe968, 0x6440, 0xfd9a, 0xbd94, 0x7ab, 0x0, 0x0);
        gbc.writeMem(0x3cf5, { 0xf5 });
        gbc.writeMem(0xe966, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe966);
        EXPECT(gbc.pc(), 0x3cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe966), 0x40);
        EXPECT(gbc.readMem(0xe967), 0x64);
        // F5 0249
        gbc.setState(0xbd41, 0xca67, 0xcb20, 0x82bc, 0xc969, 0x6583, 0x1, 0x1);
        gbc.writeMem(0xbd41, { 0xf5 });
        gbc.writeMem(0xca65, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xca65);
        EXPECT(gbc.pc(), 0xbd42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd41), 0xf5);
        EXPECT(gbc.readMem(0xca65), 0x20);
        EXPECT(gbc.readMem(0xca66), 0xcb);
        // F5 024A
        gbc.setState(0x9a66, 0x9669, 0x6490, 0xa086, 0x9eb9, 0x211e, 0x0, 0x1);
        gbc.writeMem(0x9667, { 0x0, 0x0 });
        gbc.writeMem(0x9a66, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9667);
        EXPECT(gbc.pc(), 0x9a67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9667), 0x90);
        EXPECT(gbc.readMem(0x9668), 0x64);
        EXPECT(gbc.readMem(0x9a66), 0xf5);
        // F5 024C
        gbc.setState(0xbc8b, 0x9aed, 0x1ea0, 0xfe5e, 0x81a9, 0xf247, 0x1, 0x0);
        gbc.writeMem(0x9aeb, { 0x0, 0x0 });
        gbc.writeMem(0xbc8b, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9aeb);
        EXPECT(gbc.pc(), 0xbc8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aeb), 0xa0);
        EXPECT(gbc.readMem(0x9aec), 0x1e);
        EXPECT(gbc.readMem(0xbc8b), 0xf5);
        // F5 024D
        gbc.setState(0xc57d, 0xba32, 0x6270, 0x851b, 0x337f, 0x2d15, 0x1, 0x0);
        gbc.writeMem(0xba30, { 0x0, 0x0 });
        gbc.writeMem(0xc57d, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xba30);
        EXPECT(gbc.pc(), 0xc57e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba30), 0x70);
        EXPECT(gbc.readMem(0xba31), 0x62);
        EXPECT(gbc.readMem(0xc57d), 0xf5);
        // F5 0252
        gbc.setState(0x4ef4, 0xdb20, 0x36c0, 0xf3e9, 0xb186, 0xeb53, 0x0, 0x0);
        gbc.writeMem(0x4ef4, { 0xf5 });
        gbc.writeMem(0xdb1e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xdb1e);
        EXPECT(gbc.pc(), 0x4ef5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb1e), 0xc0);
        EXPECT(gbc.readMem(0xdb1f), 0x36);
        // F5 0254
        gbc.setState(0x6fc5, 0xcbd4, 0x9a0, 0x4342, 0xbce3, 0x6944, 0x0, 0x1);
        gbc.writeMem(0x6fc5, { 0xf5 });
        gbc.writeMem(0xcbd2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcbd2);
        EXPECT(gbc.pc(), 0x6fc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd2), 0xa0);
        EXPECT(gbc.readMem(0xcbd3), 0x9);
        // F5 0256
        gbc.setState(0xde77, 0xedf2, 0xf770, 0xfa8d, 0xe18f, 0xf262, 0x1, 0x0);
        gbc.writeMem(0xde77, { 0xf5 });
        gbc.writeMem(0xedf0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xedf0);
        EXPECT(gbc.pc(), 0xde78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde77), 0xf5);
        EXPECT(gbc.readMem(0xedf0), 0x70);
        EXPECT(gbc.readMem(0xedf1), 0xf7);
        // F5 0257
        gbc.setState(0xc2db, 0x8052, 0xcde0, 0x81f7, 0x1b1, 0x1ba4, 0x0, 0x1);
        gbc.writeMem(0x8050, { 0x0, 0x0 });
        gbc.writeMem(0xc2db, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x8050);
        EXPECT(gbc.pc(), 0xc2dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8050), 0xe0);
        EXPECT(gbc.readMem(0x8051), 0xcd);
        EXPECT(gbc.readMem(0xc2db), 0xf5);
        // F5 025C
        gbc.setState(0x6b8f, 0x9607, 0x5d40, 0xafc5, 0x9ded, 0xc3c1, 0x1, 0x1);
        gbc.writeMem(0x6b8f, { 0xf5 });
        gbc.writeMem(0x9605, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x9605);
        EXPECT(gbc.pc(), 0x6b90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9605), 0x40);
        EXPECT(gbc.readMem(0x9606), 0x5d);
        // F5 025D
        gbc.setState(0x4379, 0x975b, 0x3c00, 0xf595, 0x673b, 0xacef, 0x1, 0x1);
        gbc.writeMem(0x4379, { 0xf5 });
        gbc.writeMem(0x9759, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9759);
        EXPECT(gbc.pc(), 0x437a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9759), 0x0);
        EXPECT(gbc.readMem(0x975a), 0x3c);
        // F5 025E
        gbc.setState(0xbc6, 0xb845, 0xee10, 0x5bea, 0x3761, 0x165f, 0x1, 0x1);
        gbc.writeMem(0xbc6, { 0xf5 });
        gbc.writeMem(0xb843, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb843);
        EXPECT(gbc.pc(), 0xbc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb843), 0x10);
        EXPECT(gbc.readMem(0xb844), 0xee);
        // F5 0260
        gbc.setState(0x9598, 0x9dc9, 0xc710, 0x7c82, 0x40f8, 0x3182, 0x1, 0x1);
        gbc.writeMem(0x9598, { 0xf5 });
        gbc.writeMem(0x9dc7, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x9dc7);
        EXPECT(gbc.pc(), 0x9599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9598), 0xf5);
        EXPECT(gbc.readMem(0x9dc7), 0x10);
        EXPECT(gbc.readMem(0x9dc8), 0xc7);
        // F5 0261
        gbc.setState(0xcd1b, 0xdc62, 0xae20, 0xb944, 0x45d3, 0x223, 0x0, 0x0);
        gbc.writeMem(0xcd1b, { 0xf5 });
        gbc.writeMem(0xdc60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xdc60);
        EXPECT(gbc.pc(), 0xcd1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd1b), 0xf5);
        EXPECT(gbc.readMem(0xdc60), 0x20);
        EXPECT(gbc.readMem(0xdc61), 0xae);
        // F5 0265
        gbc.setState(0x80a5, 0xce5b, 0x2fe0, 0x2c55, 0x4e86, 0xdec5, 0x1, 0x1);
        gbc.writeMem(0x80a5, { 0xf5 });
        gbc.writeMem(0xce59, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xce59);
        EXPECT(gbc.pc(), 0x80a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a5), 0xf5);
        EXPECT(gbc.readMem(0xce59), 0xe0);
        EXPECT(gbc.readMem(0xce5a), 0x2f);
        // F5 0269
        gbc.setState(0xec4f, 0xb5d1, 0x7e40, 0xfed8, 0x379a, 0x5723, 0x1, 0x0);
        gbc.writeMem(0xb5cf, { 0x0, 0x0 });
        gbc.writeMem(0xec4f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xb5cf);
        EXPECT(gbc.pc(), 0xec50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5cf), 0x40);
        EXPECT(gbc.readMem(0xb5d0), 0x7e);
        EXPECT(gbc.readMem(0xec4f), 0xf5);
        // F5 026A
        gbc.setState(0xca91, 0xebd2, 0xbb00, 0x7939, 0xaed8, 0xa973, 0x1, 0x0);
        gbc.writeMem(0xca91, { 0xf5 });
        gbc.writeMem(0xebd0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xebd0);
        EXPECT(gbc.pc(), 0xca92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca91), 0xf5);
        EXPECT(gbc.readMem(0xebd0), 0x0);
        EXPECT(gbc.readMem(0xebd1), 0xbb);
        // F5 026D
        gbc.setState(0xc593, 0xbc2a, 0xa470, 0xfabd, 0x98e, 0x94cf, 0x1, 0x0);
        gbc.writeMem(0xbc28, { 0x0, 0x0 });
        gbc.writeMem(0xc593, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xbc28);
        EXPECT(gbc.pc(), 0xc594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc28), 0x70);
        EXPECT(gbc.readMem(0xbc29), 0xa4);
        EXPECT(gbc.readMem(0xc593), 0xf5);
        // F5 026E
        gbc.setState(0x1136, 0xfcc4, 0x7050, 0xe57f, 0xf5e9, 0xa074, 0x1, 0x0);
        gbc.writeMem(0x1136, { 0xf5 });
        gbc.writeMem(0xfcc2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xfcc2);
        EXPECT(gbc.pc(), 0x1137);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfcc2), 0x50);
        EXPECT(gbc.readMem(0xfcc3), 0x70);
        // F5 026F
        gbc.setState(0x35ab, 0x9b63, 0xf890, 0xcd52, 0x87d9, 0x2f79, 0x1, 0x0);
        gbc.writeMem(0x35ab, { 0xf5 });
        gbc.writeMem(0x9b61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x9b61);
        EXPECT(gbc.pc(), 0x35ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b61), 0x90);
        EXPECT(gbc.readMem(0x9b62), 0xf8);
        // F5 0271
        gbc.setState(0xa135, 0xa397, 0xb280, 0x6eac, 0xcd05, 0xe50a, 0x1, 0x1);
        gbc.writeMem(0xa135, { 0xf5 });
        gbc.writeMem(0xa395, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xa395);
        EXPECT(gbc.pc(), 0xa136);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa135), 0xf5);
        EXPECT(gbc.readMem(0xa395), 0x80);
        EXPECT(gbc.readMem(0xa396), 0xb2);
        // F5 0273
        gbc.setState(0x439a, 0x8aaf, 0xfd0, 0xae02, 0xf98b, 0x6dee, 0x0, 0x1);
        gbc.writeMem(0x439a, { 0xf5 });
        gbc.writeMem(0x8aad, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x8aad);
        EXPECT(gbc.pc(), 0x439b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8aad), 0xd0);
        EXPECT(gbc.readMem(0x8aae), 0xf);
        // F5 0275
        gbc.setState(0x2b05, 0x8062, 0xf5b0, 0x563b, 0x2c20, 0x224f, 0x1, 0x1);
        gbc.writeMem(0x2b05, { 0xf5 });
        gbc.writeMem(0x8060, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x8060);
        EXPECT(gbc.pc(), 0x2b06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8060), 0xb0);
        EXPECT(gbc.readMem(0x8061), 0xf5);
        // F5 0276
        gbc.setState(0xc0f3, 0xb3a4, 0x150, 0xea79, 0xca34, 0x49c2, 0x0, 0x1);
        gbc.writeMem(0xb3a2, { 0x0, 0x0 });
        gbc.writeMem(0xc0f3, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xb3a2);
        EXPECT(gbc.pc(), 0xc0f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3a2), 0x50);
        EXPECT(gbc.readMem(0xb3a3), 0x1);
        EXPECT(gbc.readMem(0xc0f3), 0xf5);
        // F5 0278
        gbc.setState(0xcd48, 0xcf6a, 0x6b30, 0x9273, 0x3a77, 0x15e, 0x0, 0x1);
        gbc.writeMem(0xcd48, { 0xf5 });
        gbc.writeMem(0xcf68, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcf68);
        EXPECT(gbc.pc(), 0xcd49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd48), 0xf5);
        EXPECT(gbc.readMem(0xcf68), 0x30);
        EXPECT(gbc.readMem(0xcf69), 0x6b);
        // F5 0279
        gbc.setState(0xcf61, 0x892b, 0x67b0, 0x5a35, 0x7afa, 0x8fcf, 0x0, 0x1);
        gbc.writeMem(0x8929, { 0x0, 0x0 });
        gbc.writeMem(0xcf61, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8929);
        EXPECT(gbc.pc(), 0xcf62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8929), 0xb0);
        EXPECT(gbc.readMem(0x892a), 0x67);
        EXPECT(gbc.readMem(0xcf61), 0xf5);
        // F5 027A
        gbc.setState(0x6a15, 0xab4a, 0xbec0, 0xf323, 0xea3, 0xacfd, 0x1, 0x1);
        gbc.writeMem(0x6a15, { 0xf5 });
        gbc.writeMem(0xab48, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xab48);
        EXPECT(gbc.pc(), 0x6a16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab48), 0xc0);
        EXPECT(gbc.readMem(0xab49), 0xbe);
        // F5 027C
        gbc.setState(0x7ad4, 0xeb45, 0x4b90, 0x9abf, 0xbaba, 0xd2d4, 0x1, 0x1);
        gbc.writeMem(0x7ad4, { 0xf5 });
        gbc.writeMem(0xeb43, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xeb43);
        EXPECT(gbc.pc(), 0x7ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb43), 0x90);
        EXPECT(gbc.readMem(0xeb44), 0x4b);
        // F5 027D
        gbc.setState(0x6188, 0xa4bd, 0xa150, 0x44d5, 0x2cbf, 0x168a, 0x1, 0x0);
        gbc.writeMem(0x6188, { 0xf5 });
        gbc.writeMem(0xa4bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa4bb);
        EXPECT(gbc.pc(), 0x6189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bb), 0x50);
        EXPECT(gbc.readMem(0xa4bc), 0xa1);
        // F5 027F
        gbc.setState(0xe2d9, 0xe7f8, 0xd300, 0x49b3, 0x6df3, 0x25b1, 0x0, 0x1);
        gbc.writeMem(0xe2d9, { 0xf5 });
        gbc.writeMem(0xe7f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe7f6);
        EXPECT(gbc.pc(), 0xe2da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d9), 0xf5);
        EXPECT(gbc.readMem(0xe7f6), 0x0);
        EXPECT(gbc.readMem(0xe7f7), 0xd3);
        // F5 0280
        gbc.setState(0x844, 0x97e4, 0xb520, 0x6fbf, 0x7b24, 0x9d52, 0x0, 0x0);
        gbc.writeMem(0x844, { 0xf5 });
        gbc.writeMem(0x97e2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x97e2);
        EXPECT(gbc.pc(), 0x845);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97e2), 0x20);
        EXPECT(gbc.readMem(0x97e3), 0xb5);
        // F5 0281
        gbc.setState(0x4aae, 0x8610, 0x4630, 0xf0fb, 0x4095, 0xac2d, 0x1, 0x0);
        gbc.writeMem(0x4aae, { 0xf5 });
        gbc.writeMem(0x860e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x860e);
        EXPECT(gbc.pc(), 0x4aaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x860e), 0x30);
        EXPECT(gbc.readMem(0x860f), 0x46);
        // F5 0285
        gbc.setState(0x884a, 0xdf79, 0xe310, 0xf7ea, 0xb022, 0xc6d4, 0x0, 0x1);
        gbc.writeMem(0x884a, { 0xf5 });
        gbc.writeMem(0xdf77, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdf77);
        EXPECT(gbc.pc(), 0x884b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884a), 0xf5);
        EXPECT(gbc.readMem(0xdf77), 0x10);
        EXPECT(gbc.readMem(0xdf78), 0xe3);
        // F5 0286
        gbc.setState(0x3396, 0x8287, 0xc20, 0x42f1, 0x1d1, 0x53cd, 0x1, 0x0);
        gbc.writeMem(0x3396, { 0xf5 });
        gbc.writeMem(0x8285, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8285);
        EXPECT(gbc.pc(), 0x3397);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8285), 0x20);
        EXPECT(gbc.readMem(0x8286), 0xc);
        // F5 0287
        gbc.setState(0x9b6e, 0xc492, 0x6aa0, 0xa04f, 0xce59, 0x3f7d, 0x0, 0x1);
        gbc.writeMem(0x9b6e, { 0xf5 });
        gbc.writeMem(0xc490, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc490);
        EXPECT(gbc.pc(), 0x9b6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b6e), 0xf5);
        EXPECT(gbc.readMem(0xc490), 0xa0);
        EXPECT(gbc.readMem(0xc491), 0x6a);
        // F5 0289
        gbc.setState(0x9b4, 0x9375, 0x1290, 0x5d61, 0x32f6, 0xff83, 0x0, 0x1);
        gbc.writeMem(0x9b4, { 0xf5 });
        gbc.writeMem(0x9373, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9373);
        EXPECT(gbc.pc(), 0x9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9373), 0x90);
        EXPECT(gbc.readMem(0x9374), 0x12);
        // F5 028B
        gbc.setState(0x3070, 0xed66, 0xd000, 0x9dc6, 0x1e9a, 0x8fda, 0x1, 0x1);
        gbc.writeMem(0x3070, { 0xf5 });
        gbc.writeMem(0xed64, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xed64);
        EXPECT(gbc.pc(), 0x3071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed64), 0x0);
        EXPECT(gbc.readMem(0xed65), 0xd0);
        // F5 028F
        gbc.setState(0x8d55, 0x9aaf, 0x5870, 0x9791, 0x35ac, 0xecdb, 0x0, 0x0);
        gbc.writeMem(0x8d55, { 0xf5 });
        gbc.writeMem(0x9aad, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x9aad);
        EXPECT(gbc.pc(), 0x8d56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d55), 0xf5);
        EXPECT(gbc.readMem(0x9aad), 0x70);
        EXPECT(gbc.readMem(0x9aae), 0x58);
        // F5 0293
        gbc.setState(0x5ad2, 0xb27a, 0xa800, 0x1d9b, 0x4c55, 0xf6c0, 0x0, 0x1);
        gbc.writeMem(0x5ad2, { 0xf5 });
        gbc.writeMem(0xb278, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xb278);
        EXPECT(gbc.pc(), 0x5ad3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb278), 0x0);
        EXPECT(gbc.readMem(0xb279), 0xa8);
        // F5 0296
        gbc.setState(0xa3dd, 0xe60d, 0x5060, 0x3dbd, 0x5a54, 0x1a9b, 0x1, 0x1);
        gbc.writeMem(0xa3dd, { 0xf5 });
        gbc.writeMem(0xe60b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xe60b);
        EXPECT(gbc.pc(), 0xa3de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3dd), 0xf5);
        EXPECT(gbc.readMem(0xe60b), 0x60);
        EXPECT(gbc.readMem(0xe60c), 0x50);
        // F5 0297
        gbc.setState(0x4081, 0x9854, 0x3f40, 0x350e, 0x717a, 0xda5, 0x1, 0x0);
        gbc.writeMem(0x4081, { 0xf5 });
        gbc.writeMem(0x9852, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x9852);
        EXPECT(gbc.pc(), 0x4082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9852), 0x40);
        EXPECT(gbc.readMem(0x9853), 0x3f);
        // F5 0298
        gbc.setState(0x76e9, 0xebf1, 0x1bf0, 0x5898, 0xbe85, 0x3a11, 0x1, 0x0);
        gbc.writeMem(0x76e9, { 0xf5 });
        gbc.writeMem(0xebef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xebef);
        EXPECT(gbc.pc(), 0x76ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebef), 0xf0);
        EXPECT(gbc.readMem(0xebf0), 0x1b);
        // F5 029A
        gbc.setState(0x2d5b, 0xcb90, 0x75b0, 0x2890, 0x2215, 0x1668, 0x0, 0x0);
        gbc.writeMem(0x2d5b, { 0xf5 });
        gbc.writeMem(0xcb8e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xcb8e);
        EXPECT(gbc.pc(), 0x2d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb8e), 0xb0);
        EXPECT(gbc.readMem(0xcb8f), 0x75);
        // F5 029B
        gbc.setState(0x2817, 0xba24, 0x7160, 0x34e7, 0xab09, 0x465b, 0x1, 0x0);
        gbc.writeMem(0x2817, { 0xf5 });
        gbc.writeMem(0xba22, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xba22);
        EXPECT(gbc.pc(), 0x2818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba22), 0x60);
        EXPECT(gbc.readMem(0xba23), 0x71);
        // F5 029C
        gbc.setState(0x7741, 0x83f7, 0x6af0, 0xbb3b, 0x952d, 0xc387, 0x0, 0x0);
        gbc.writeMem(0x7741, { 0xf5 });
        gbc.writeMem(0x83f5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x83f5);
        EXPECT(gbc.pc(), 0x7742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f5), 0xf0);
        EXPECT(gbc.readMem(0x83f6), 0x6a);
        // F5 029E
        gbc.setState(0xddc1, 0xcfb6, 0x8c90, 0xada4, 0xa3b8, 0x77fd, 0x1, 0x1);
        gbc.writeMem(0xcfb4, { 0x0, 0x0 });
        gbc.writeMem(0xddc1, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xcfb4);
        EXPECT(gbc.pc(), 0xddc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb4), 0x90);
        EXPECT(gbc.readMem(0xcfb5), 0x8c);
        EXPECT(gbc.readMem(0xddc1), 0xf5);
        // F5 029F
        gbc.setState(0x35df, 0xbd86, 0xbcd0, 0x71ff, 0x85d1, 0xcd5f, 0x0, 0x1);
        gbc.writeMem(0x35df, { 0xf5 });
        gbc.writeMem(0xbd84, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbd84);
        EXPECT(gbc.pc(), 0x35e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd84), 0xd0);
        EXPECT(gbc.readMem(0xbd85), 0xbc);
        // F5 02A1
        gbc.setState(0x4b44, 0xed08, 0x3d60, 0xd530, 0x9d3a, 0xf351, 0x0, 0x0);
        gbc.writeMem(0x4b44, { 0xf5 });
        gbc.writeMem(0xed06, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xed06);
        EXPECT(gbc.pc(), 0x4b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed06), 0x60);
        EXPECT(gbc.readMem(0xed07), 0x3d);
        // F5 02A4
        gbc.setState(0xec66, 0x80f8, 0x9060, 0xcd0e, 0x3f5a, 0x3f60, 0x0, 0x0);
        gbc.writeMem(0x80f6, { 0x0, 0x0 });
        gbc.writeMem(0xec66, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x80f6);
        EXPECT(gbc.pc(), 0xec67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80f6), 0x60);
        EXPECT(gbc.readMem(0x80f7), 0x90);
        EXPECT(gbc.readMem(0xec66), 0xf5);
        // F5 02A5
        gbc.setState(0xe374, 0x95cd, 0xe030, 0x3391, 0x11ee, 0x1bb5, 0x1, 0x0);
        gbc.writeMem(0x95cb, { 0x0, 0x0 });
        gbc.writeMem(0xe374, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x95cb);
        EXPECT(gbc.pc(), 0xe375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95cb), 0x30);
        EXPECT(gbc.readMem(0x95cc), 0xe0);
        EXPECT(gbc.readMem(0xe374), 0xf5);
        // F5 02A6
        gbc.setState(0x5384, 0x9706, 0x47c0, 0x98ec, 0x9852, 0xab03, 0x0, 0x1);
        gbc.writeMem(0x5384, { 0xf5 });
        gbc.writeMem(0x9704, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9704);
        EXPECT(gbc.pc(), 0x5385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9704), 0xc0);
        EXPECT(gbc.readMem(0x9705), 0x47);
        // F5 02A8
        gbc.setState(0x5504, 0xfd4f, 0x310, 0x2077, 0x6388, 0x20b6, 0x1, 0x0);
        gbc.writeMem(0x5504, { 0xf5 });
        gbc.writeMem(0xfd4d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xfd4d);
        EXPECT(gbc.pc(), 0x5505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfd4d), 0x10);
        EXPECT(gbc.readMem(0xfd4e), 0x3);
        // F5 02AB
        gbc.setState(0xd861, 0xac9e, 0x3010, 0x8463, 0x2e6f, 0x9b59, 0x0, 0x0);
        gbc.writeMem(0xac9c, { 0x0, 0x0 });
        gbc.writeMem(0xd861, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xac9c);
        EXPECT(gbc.pc(), 0xd862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9c), 0x10);
        EXPECT(gbc.readMem(0xac9d), 0x30);
        EXPECT(gbc.readMem(0xd861), 0xf5);
        // F5 02AF
        gbc.setState(0x454, 0xef8c, 0xa020, 0x1516, 0x11ad, 0x7301, 0x0, 0x1);
        gbc.writeMem(0x454, { 0xf5 });
        gbc.writeMem(0xef8a, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xef8a);
        EXPECT(gbc.pc(), 0x455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef8a), 0x20);
        EXPECT(gbc.readMem(0xef8b), 0xa0);
        // F5 02B3
        gbc.setState(0x5a59, 0x9ef7, 0x4160, 0x582c, 0xdb36, 0xd0a4, 0x0, 0x1);
        gbc.writeMem(0x5a59, { 0xf5 });
        gbc.writeMem(0x9ef5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9ef5);
        EXPECT(gbc.pc(), 0x5a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef5), 0x60);
        EXPECT(gbc.readMem(0x9ef6), 0x41);
        // F5 02B4
        gbc.setState(0x43e7, 0x9819, 0x8a80, 0x7edb, 0xe61a, 0x5a4f, 0x1, 0x1);
        gbc.writeMem(0x43e7, { 0xf5 });
        gbc.writeMem(0x9817, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x9817);
        EXPECT(gbc.pc(), 0x43e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9817), 0x80);
        EXPECT(gbc.readMem(0x9818), 0x8a);
        // F5 02B6
        gbc.setState(0x55a7, 0xfaac, 0x3f60, 0x300e, 0xa48c, 0x65a, 0x1, 0x1);
        gbc.writeMem(0x55a7, { 0xf5 });
        gbc.writeMem(0xfaaa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfaaa);
        EXPECT(gbc.pc(), 0x55a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfaaa), 0x60);
        EXPECT(gbc.readMem(0xfaab), 0x3f);
        // F5 02BB
        gbc.setState(0xd9d9, 0xf6c5, 0xce80, 0xcc8b, 0x7b73, 0xb172, 0x1, 0x0);
        gbc.writeMem(0xd9d9, { 0xf5 });
        gbc.writeMem(0xf6c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf6c3);
        EXPECT(gbc.pc(), 0xd9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9d9), 0xf5);
        EXPECT(gbc.readMem(0xf6c3), 0x80);
        EXPECT(gbc.readMem(0xf6c4), 0xce);
        // F5 02BC
        gbc.setState(0xe680, 0xb152, 0x33d0, 0x199, 0xf4a5, 0x5b1d, 0x1, 0x0);
        gbc.writeMem(0xb150, { 0x0, 0x0 });
        gbc.writeMem(0xe680, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb150);
        EXPECT(gbc.pc(), 0xe681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb150), 0xd0);
        EXPECT(gbc.readMem(0xb151), 0x33);
        EXPECT(gbc.readMem(0xe680), 0xf5);
        // F5 02C1
        gbc.setState(0x2056, 0xaeff, 0xe5d0, 0xcaf7, 0xe22, 0x3ddd, 0x1, 0x0);
        gbc.writeMem(0x2056, { 0xf5 });
        gbc.writeMem(0xaefd, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xaefd);
        EXPECT(gbc.pc(), 0x2057);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaefd), 0xd0);
        EXPECT(gbc.readMem(0xaefe), 0xe5);
        // F5 02C3
        gbc.setState(0x6b18, 0xb6da, 0x6190, 0xb938, 0x6195, 0x3dc6, 0x0, 0x1);
        gbc.writeMem(0x6b18, { 0xf5 });
        gbc.writeMem(0xb6d8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb6d8);
        EXPECT(gbc.pc(), 0x6b19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d8), 0x90);
        EXPECT(gbc.readMem(0xb6d9), 0x61);
        // F5 02C5
        gbc.setState(0x8950, 0xacfa, 0xe950, 0x5337, 0xede0, 0x2b41, 0x0, 0x1);
        gbc.writeMem(0x8950, { 0xf5 });
        gbc.writeMem(0xacf8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xacf8);
        EXPECT(gbc.pc(), 0x8951);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8950), 0xf5);
        EXPECT(gbc.readMem(0xacf8), 0x50);
        EXPECT(gbc.readMem(0xacf9), 0xe9);
        // F5 02C6
        gbc.setState(0x6d72, 0xd784, 0xdb50, 0x1b7a, 0xfa24, 0xd898, 0x0, 0x1);
        gbc.writeMem(0x6d72, { 0xf5 });
        gbc.writeMem(0xd782, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xd782);
        EXPECT(gbc.pc(), 0x6d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd782), 0x50);
        EXPECT(gbc.readMem(0xd783), 0xdb);
        // F5 02C9
        gbc.setState(0x826d, 0xa3c5, 0x9290, 0xca5e, 0x4ec3, 0x140, 0x1, 0x0);
        gbc.writeMem(0x826d, { 0xf5 });
        gbc.writeMem(0xa3c3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa3c3);
        EXPECT(gbc.pc(), 0x826e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826d), 0xf5);
        EXPECT(gbc.readMem(0xa3c3), 0x90);
        EXPECT(gbc.readMem(0xa3c4), 0x92);
        // F5 02CA
        gbc.setState(0x625f, 0x86a5, 0xbdd0, 0xba1, 0x6a38, 0x3292, 0x1, 0x1);
        gbc.writeMem(0x625f, { 0xf5 });
        gbc.writeMem(0x86a3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x86a3);
        EXPECT(gbc.pc(), 0x6260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a3), 0xd0);
        EXPECT(gbc.readMem(0x86a4), 0xbd);
        // F5 02CB
        gbc.setState(0x1632, 0x9718, 0x7b60, 0x9389, 0x5cb8, 0x2eeb, 0x1, 0x0);
        gbc.writeMem(0x1632, { 0xf5 });
        gbc.writeMem(0x9716, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9716);
        EXPECT(gbc.pc(), 0x1633);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9716), 0x60);
        EXPECT(gbc.readMem(0x9717), 0x7b);
        // F5 02CF
        gbc.setState(0xe7b4, 0xe537, 0x80b0, 0x2056, 0x8221, 0x6fcf, 0x0, 0x0);
        gbc.writeMem(0xe535, { 0x0, 0x0 });
        gbc.writeMem(0xe7b4, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe535);
        EXPECT(gbc.pc(), 0xe7b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe535), 0xb0);
        EXPECT(gbc.readMem(0xe536), 0x80);
        EXPECT(gbc.readMem(0xe7b4), 0xf5);
        // F5 02D1
        gbc.setState(0x5590, 0xcf74, 0x7dc0, 0xd3f7, 0x9322, 0xdc24, 0x0, 0x0);
        gbc.writeMem(0x5590, { 0xf5 });
        gbc.writeMem(0xcf72, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcf72);
        EXPECT(gbc.pc(), 0x5591);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf72), 0xc0);
        EXPECT(gbc.readMem(0xcf73), 0x7d);
        // F5 02D4
        gbc.setState(0xdd87, 0xc2e1, 0x5180, 0x6ab2, 0x4c7d, 0x58be, 0x1, 0x1);
        gbc.writeMem(0xc2df, { 0x0, 0x0 });
        gbc.writeMem(0xdd87, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc2df);
        EXPECT(gbc.pc(), 0xdd88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2df), 0x80);
        EXPECT(gbc.readMem(0xc2e0), 0x51);
        EXPECT(gbc.readMem(0xdd87), 0xf5);
        // F5 02D9
        gbc.setState(0xc968, 0xa076, 0x55b0, 0xa168, 0xe144, 0xd42a, 0x0, 0x0);
        gbc.writeMem(0xa074, { 0x0, 0x0 });
        gbc.writeMem(0xc968, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa074);
        EXPECT(gbc.pc(), 0xc969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa074), 0xb0);
        EXPECT(gbc.readMem(0xa075), 0x55);
        EXPECT(gbc.readMem(0xc968), 0xf5);
        // F5 02DA
        gbc.setState(0x54da, 0xebac, 0xb9c0, 0x23f1, 0xfad, 0xa064, 0x0, 0x0);
        gbc.writeMem(0x54da, { 0xf5 });
        gbc.writeMem(0xebaa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xebaa);
        EXPECT(gbc.pc(), 0x54db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebaa), 0xc0);
        EXPECT(gbc.readMem(0xebab), 0xb9);
        // F5 02DC
        gbc.setState(0x9ab8, 0xac8e, 0xbc40, 0xbafc, 0x8672, 0x25ce, 0x0, 0x0);
        gbc.writeMem(0x9ab8, { 0xf5 });
        gbc.writeMem(0xac8c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xac8c);
        EXPECT(gbc.pc(), 0x9ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ab8), 0xf5);
        EXPECT(gbc.readMem(0xac8c), 0x40);
        EXPECT(gbc.readMem(0xac8d), 0xbc);
        // F5 02DD
        gbc.setState(0xc967, 0xba2a, 0x58f0, 0x881e, 0x8083, 0x1932, 0x1, 0x1);
        gbc.writeMem(0xba28, { 0x0, 0x0 });
        gbc.writeMem(0xc967, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xba28);
        EXPECT(gbc.pc(), 0xc968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba28), 0xf0);
        EXPECT(gbc.readMem(0xba29), 0x58);
        EXPECT(gbc.readMem(0xc967), 0xf5);
        // F5 02DF
        gbc.setState(0x24b3, 0xeeef, 0x72b0, 0xd91f, 0x791b, 0x7496, 0x0, 0x0);
        gbc.writeMem(0x24b3, { 0xf5 });
        gbc.writeMem(0xeeed, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xeeed);
        EXPECT(gbc.pc(), 0x24b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeed), 0xb0);
        EXPECT(gbc.readMem(0xeeee), 0x72);
        // F5 02E0
        gbc.setState(0xad38, 0xedc2, 0x4880, 0xaa97, 0x15bc, 0x3ccf, 0x0, 0x1);
        gbc.writeMem(0xad38, { 0xf5 });
        gbc.writeMem(0xedc0, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xedc0);
        EXPECT(gbc.pc(), 0xad39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad38), 0xf5);
        EXPECT(gbc.readMem(0xedc0), 0x80);
        EXPECT(gbc.readMem(0xedc1), 0x48);
        // F5 02E6
        gbc.setState(0xd3a7, 0xdd2d, 0xe060, 0x724, 0x5d37, 0xd34b, 0x1, 0x1);
        gbc.writeMem(0xd3a7, { 0xf5 });
        gbc.writeMem(0xdd2b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdd2b);
        EXPECT(gbc.pc(), 0xd3a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a7), 0xf5);
        EXPECT(gbc.readMem(0xdd2b), 0x60);
        EXPECT(gbc.readMem(0xdd2c), 0xe0);
        // F5 02EA
        gbc.setState(0xc6f4, 0x8ed6, 0xf8c0, 0x8fe8, 0xcd37, 0xfe86, 0x1, 0x1);
        gbc.writeMem(0x8ed4, { 0x0, 0x0 });
        gbc.writeMem(0xc6f4, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8ed4);
        EXPECT(gbc.pc(), 0xc6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed4), 0xc0);
        EXPECT(gbc.readMem(0x8ed5), 0xf8);
        EXPECT(gbc.readMem(0xc6f4), 0xf5);
        // F5 02F0
        gbc.setState(0x64e2, 0xc2ae, 0xb80, 0x34e2, 0x9e89, 0x4a88, 0x1, 0x1);
        gbc.writeMem(0x64e2, { 0xf5 });
        gbc.writeMem(0xc2ac, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc2ac);
        EXPECT(gbc.pc(), 0x64e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ac), 0x80);
        EXPECT(gbc.readMem(0xc2ad), 0xb);
        // F5 02F1
        gbc.setState(0x5978, 0x9875, 0x45c0, 0x7207, 0x1443, 0xe592, 0x0, 0x1);
        gbc.writeMem(0x5978, { 0xf5 });
        gbc.writeMem(0x9873, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x9873);
        EXPECT(gbc.pc(), 0x5979);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9873), 0xc0);
        EXPECT(gbc.readMem(0x9874), 0x45);
        // F5 02F2
        gbc.setState(0x1050, 0xa5d6, 0xe0a0, 0x89b, 0x2eb5, 0xee46, 0x1, 0x0);
        gbc.writeMem(0x1050, { 0xf5 });
        gbc.writeMem(0xa5d4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa5d4);
        EXPECT(gbc.pc(), 0x1051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5d4), 0xa0);
        EXPECT(gbc.readMem(0xa5d5), 0xe0);
        // F5 02F4
        gbc.setState(0xe4c, 0xd66a, 0xb250, 0xe825, 0xb00a, 0x8e72, 0x1, 0x1);
        gbc.writeMem(0xe4c, { 0xf5 });
        gbc.writeMem(0xd668, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd668);
        EXPECT(gbc.pc(), 0xe4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd668), 0x50);
        EXPECT(gbc.readMem(0xd669), 0xb2);
        // F5 02F5
        gbc.setState(0x35f5, 0xbeab, 0x5360, 0xdbe8, 0x67aa, 0xd161, 0x1, 0x1);
        gbc.writeMem(0x35f5, { 0xf5 });
        gbc.writeMem(0xbea9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbea9);
        EXPECT(gbc.pc(), 0x35f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea9), 0x60);
        EXPECT(gbc.readMem(0xbeaa), 0x53);
        // F5 02F6
        gbc.setState(0xa371, 0xe971, 0x2b40, 0xd68a, 0xdaff, 0x7246, 0x0, 0x0);
        gbc.writeMem(0xa371, { 0xf5 });
        gbc.writeMem(0xe96f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xe96f);
        EXPECT(gbc.pc(), 0xa372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa371), 0xf5);
        EXPECT(gbc.readMem(0xe96f), 0x40);
        EXPECT(gbc.readMem(0xe970), 0x2b);
        // F5 02F7
        gbc.setState(0x595f, 0xdea7, 0xd860, 0xbbee, 0x120c, 0x3912, 0x1, 0x0);
        gbc.writeMem(0x595f, { 0xf5 });
        gbc.writeMem(0xdea5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdea5);
        EXPECT(gbc.pc(), 0x5960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea5), 0x60);
        EXPECT(gbc.readMem(0xdea6), 0xd8);
        // F5 02FA
        gbc.setState(0x97f5, 0xd69b, 0xcf50, 0xc62b, 0xecd6, 0xb41, 0x1, 0x0);
        gbc.writeMem(0x97f5, { 0xf5 });
        gbc.writeMem(0xd699, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd699);
        EXPECT(gbc.pc(), 0x97f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f5), 0xf5);
        EXPECT(gbc.readMem(0xd699), 0x50);
        EXPECT(gbc.readMem(0xd69a), 0xcf);
        // F5 02FB
        gbc.setState(0x7f8, 0x9118, 0x77d0, 0x9964, 0x5984, 0x90e, 0x1, 0x0);
        gbc.writeMem(0x7f8, { 0xf5 });
        gbc.writeMem(0x9116, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9116);
        EXPECT(gbc.pc(), 0x7f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9116), 0xd0);
        EXPECT(gbc.readMem(0x9117), 0x77);
        // F5 02FE
        gbc.setState(0x589a, 0xc64a, 0x750, 0xc7f, 0x7e81, 0xfa, 0x0, 0x0);
        gbc.writeMem(0x589a, { 0xf5 });
        gbc.writeMem(0xc648, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc648);
        EXPECT(gbc.pc(), 0x589b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc648), 0x50);
        EXPECT(gbc.readMem(0xc649), 0x7);
        // F5 02FF
        gbc.setState(0x3854, 0x9f36, 0x37c0, 0xcfb4, 0xb61a, 0xd459, 0x0, 0x0);
        gbc.writeMem(0x3854, { 0xf5 });
        gbc.writeMem(0x9f34, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9f34);
        EXPECT(gbc.pc(), 0x3855);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f34), 0xc0);
        EXPECT(gbc.readMem(0x9f35), 0x37);
        // F5 0301
        gbc.setState(0x66af, 0xbd12, 0x15a0, 0x5352, 0xaae0, 0x72f6, 0x0, 0x0);
        gbc.writeMem(0x66af, { 0xf5 });
        gbc.writeMem(0xbd10, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbd10);
        EXPECT(gbc.pc(), 0x66b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd10), 0xa0);
        EXPECT(gbc.readMem(0xbd11), 0x15);
        // F5 0305
        gbc.setState(0xe561, 0xe5c6, 0xac60, 0xd861, 0xa4d6, 0xb425, 0x0, 0x0);
        gbc.writeMem(0xe561, { 0xf5 });
        gbc.writeMem(0xe5c4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xe5c4);
        EXPECT(gbc.pc(), 0xe562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe561), 0xf5);
        EXPECT(gbc.readMem(0xe5c4), 0x60);
        EXPECT(gbc.readMem(0xe5c5), 0xac);
        // F5 030D
        gbc.setState(0x416f, 0x9183, 0x4460, 0x509b, 0x113c, 0x9ab2, 0x1, 0x0);
        gbc.writeMem(0x416f, { 0xf5 });
        gbc.writeMem(0x9181, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x9181);
        EXPECT(gbc.pc(), 0x4170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9181), 0x60);
        EXPECT(gbc.readMem(0x9182), 0x44);
        // F5 030E
        gbc.setState(0x5d5b, 0xff4b, 0x54d0, 0x34e3, 0x900d, 0xdd7b, 0x1, 0x1);
        gbc.writeMem(0x5d5b, { 0xf5 });
        gbc.writeMem(0xff49, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xff49);
        EXPECT(gbc.pc(), 0x5d5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xff49), 0xd0);
        EXPECT(gbc.readMem(0xff4a), 0x54);
        // F5 030F
        gbc.setState(0x82a7, 0xa653, 0x5ab0, 0x77f3, 0xfc68, 0x43a8, 0x1, 0x0);
        gbc.writeMem(0x82a7, { 0xf5 });
        gbc.writeMem(0xa651, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa651);
        EXPECT(gbc.pc(), 0x82a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82a7), 0xf5);
        EXPECT(gbc.readMem(0xa651), 0xb0);
        EXPECT(gbc.readMem(0xa652), 0x5a);
        // F5 0311
        gbc.setState(0x5b20, 0xaa22, 0x5f10, 0x97, 0xf220, 0xcf8a, 0x1, 0x0);
        gbc.writeMem(0x5b20, { 0xf5 });
        gbc.writeMem(0xaa20, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xaa20);
        EXPECT(gbc.pc(), 0x5b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa20), 0x10);
        EXPECT(gbc.readMem(0xaa21), 0x5f);
        // F5 0314
        gbc.setState(0xc088, 0xfd62, 0x31f0, 0x5d6f, 0x2681, 0x4a68, 0x1, 0x1);
        gbc.writeMem(0xc088, { 0xf5 });
        gbc.writeMem(0xfd60, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfd60);
        EXPECT(gbc.pc(), 0xc089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc088), 0xf5);
        EXPECT(gbc.readMem(0xfd60), 0xf0);
        EXPECT(gbc.readMem(0xfd61), 0x31);
        // F5 0315
        gbc.setState(0x4c77, 0xb866, 0xe9c0, 0x9675, 0x9d19, 0xdbda, 0x1, 0x0);
        gbc.writeMem(0x4c77, { 0xf5 });
        gbc.writeMem(0xb864, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb864);
        EXPECT(gbc.pc(), 0x4c78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb864), 0xc0);
        EXPECT(gbc.readMem(0xb865), 0xe9);
        // F5 0318
        gbc.setState(0xe7a5, 0xe2a9, 0xa0f0, 0xeeff, 0x375f, 0x5bcc, 0x1, 0x0);
        gbc.writeMem(0xe2a7, { 0x0, 0x0 });
        gbc.writeMem(0xe7a5, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe2a7);
        EXPECT(gbc.pc(), 0xe7a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2a7), 0xf0);
        EXPECT(gbc.readMem(0xe2a8), 0xa0);
        EXPECT(gbc.readMem(0xe7a5), 0xf5);
        // F5 031D
        gbc.setState(0xad0d, 0xcd37, 0xa740, 0x2ded, 0xa2da, 0xfde5, 0x0, 0x0);
        gbc.writeMem(0xad0d, { 0xf5 });
        gbc.writeMem(0xcd35, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcd35);
        EXPECT(gbc.pc(), 0xad0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad0d), 0xf5);
        EXPECT(gbc.readMem(0xcd35), 0x40);
        EXPECT(gbc.readMem(0xcd36), 0xa7);
        // F5 031E
        gbc.setState(0x9386, 0xc8e7, 0x28f0, 0x8c12, 0xe3fe, 0x4682, 0x1, 0x1);
        gbc.writeMem(0x9386, { 0xf5 });
        gbc.writeMem(0xc8e5, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc8e5);
        EXPECT(gbc.pc(), 0x9387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9386), 0xf5);
        EXPECT(gbc.readMem(0xc8e5), 0xf0);
        EXPECT(gbc.readMem(0xc8e6), 0x28);
        // F5 031F
        gbc.setState(0x729b, 0xe607, 0xed00, 0xc124, 0x500e, 0x85ad, 0x1, 0x0);
        gbc.writeMem(0x729b, { 0xf5 });
        gbc.writeMem(0xe605, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xe605);
        EXPECT(gbc.pc(), 0x729c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe605), 0x0);
        EXPECT(gbc.readMem(0xe606), 0xed);
        // F5 0322
        gbc.setState(0xc12, 0xad8b, 0x3330, 0x6f2c, 0x2c3a, 0x8741, 0x1, 0x1);
        gbc.writeMem(0xc12, { 0xf5 });
        gbc.writeMem(0xad89, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xad89);
        EXPECT(gbc.pc(), 0xc13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad89), 0x30);
        EXPECT(gbc.readMem(0xad8a), 0x33);
        // F5 0324
        gbc.setState(0x7342, 0x8ef1, 0x94d0, 0x1bce, 0x3de3, 0x41, 0x0, 0x0);
        gbc.writeMem(0x7342, { 0xf5 });
        gbc.writeMem(0x8eef, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8eef);
        EXPECT(gbc.pc(), 0x7343);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eef), 0xd0);
        EXPECT(gbc.readMem(0x8ef0), 0x94);
        // F5 0328
        gbc.setState(0xe89d, 0xf1ca, 0x4a20, 0xe49d, 0x3062, 0x23ba, 0x1, 0x0);
        gbc.writeMem(0xe89d, { 0xf5 });
        gbc.writeMem(0xf1c8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xf1c8);
        EXPECT(gbc.pc(), 0xe89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89d), 0xf5);
        EXPECT(gbc.readMem(0xf1c8), 0x20);
        EXPECT(gbc.readMem(0xf1c9), 0x4a);
        // F5 032E
        gbc.setState(0xb08c, 0xf471, 0x5e60, 0x654a, 0xa5c9, 0xcc90, 0x0, 0x1);
        gbc.writeMem(0xb08c, { 0xf5 });
        gbc.writeMem(0xf46f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xf46f);
        EXPECT(gbc.pc(), 0xb08d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb08c), 0xf5);
        EXPECT(gbc.readMem(0xf46f), 0x60);
        EXPECT(gbc.readMem(0xf470), 0x5e);
        // F5 0334
        gbc.setState(0x14d4, 0xfa72, 0xc8d0, 0x5a27, 0xac9b, 0x441d, 0x1, 0x1);
        gbc.writeMem(0x14d4, { 0xf5 });
        gbc.writeMem(0xfa70, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfa70);
        EXPECT(gbc.pc(), 0x14d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfa70), 0xd0);
        EXPECT(gbc.readMem(0xfa71), 0xc8);
        // F5 0335
        gbc.setState(0x798d, 0x944b, 0xe120, 0x6d25, 0x5d74, 0x5335, 0x0, 0x1);
        gbc.writeMem(0x798d, { 0xf5 });
        gbc.writeMem(0x9449, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x9449);
        EXPECT(gbc.pc(), 0x798e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9449), 0x20);
        EXPECT(gbc.readMem(0x944a), 0xe1);
        // F5 0336
        gbc.setState(0x7a90, 0xd0c4, 0x4aa0, 0xb801, 0xa34, 0xefb2, 0x1, 0x0);
        gbc.writeMem(0x7a90, { 0xf5 });
        gbc.writeMem(0xd0c2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd0c2);
        EXPECT(gbc.pc(), 0x7a91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0c2), 0xa0);
        EXPECT(gbc.readMem(0xd0c3), 0x4a);
        // F5 0337
        gbc.setState(0xdea7, 0xaa14, 0xca60, 0xdb82, 0xbd44, 0x4412, 0x1, 0x1);
        gbc.writeMem(0xaa12, { 0x0, 0x0 });
        gbc.writeMem(0xdea7, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xaa12);
        EXPECT(gbc.pc(), 0xdea8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa12), 0x60);
        EXPECT(gbc.readMem(0xaa13), 0xca);
        EXPECT(gbc.readMem(0xdea7), 0xf5);
        // F5 0339
        gbc.setState(0x9f21, 0xe683, 0xbb30, 0x7a4b, 0xe53d, 0x225f, 0x1, 0x0);
        gbc.writeMem(0x9f21, { 0xf5 });
        gbc.writeMem(0xe681, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe681);
        EXPECT(gbc.pc(), 0x9f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f21), 0xf5);
        EXPECT(gbc.readMem(0xe681), 0x30);
        EXPECT(gbc.readMem(0xe682), 0xbb);
        // F5 033B
        gbc.setState(0xedb, 0xd1e5, 0x9d00, 0xdb32, 0xa881, 0xe49e, 0x1, 0x1);
        gbc.writeMem(0xedb, { 0xf5 });
        gbc.writeMem(0xd1e3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd1e3);
        EXPECT(gbc.pc(), 0xedc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e3), 0x0);
        EXPECT(gbc.readMem(0xd1e4), 0x9d);
        // F5 033F
        gbc.setState(0x8b22, 0xbc5d, 0x31a0, 0xdf1a, 0x46fa, 0x2ff, 0x0, 0x1);
        gbc.writeMem(0x8b22, { 0xf5 });
        gbc.writeMem(0xbc5b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xbc5b);
        EXPECT(gbc.pc(), 0x8b23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b22), 0xf5);
        EXPECT(gbc.readMem(0xbc5b), 0xa0);
        EXPECT(gbc.readMem(0xbc5c), 0x31);
        // F5 0340
        gbc.setState(0xed89, 0xbd3f, 0x4510, 0x5eac, 0x1b43, 0x60f8, 0x0, 0x0);
        gbc.writeMem(0xbd3d, { 0x0, 0x0 });
        gbc.writeMem(0xed89, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbd3d);
        EXPECT(gbc.pc(), 0xed8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd3d), 0x10);
        EXPECT(gbc.readMem(0xbd3e), 0x45);
        EXPECT(gbc.readMem(0xed89), 0xf5);
        // F5 0344
        gbc.setState(0x2456, 0xd73f, 0x5610, 0xa34f, 0x62b1, 0xb6e0, 0x1, 0x0);
        gbc.writeMem(0x2456, { 0xf5 });
        gbc.writeMem(0xd73d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd73d);
        EXPECT(gbc.pc(), 0x2457);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd73d), 0x10);
        EXPECT(gbc.readMem(0xd73e), 0x56);
        // F5 0346
        gbc.setState(0x7259, 0x9c63, 0x5cd0, 0xc923, 0xe63, 0x4d59, 0x1, 0x0);
        gbc.writeMem(0x7259, { 0xf5 });
        gbc.writeMem(0x9c61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9c61);
        EXPECT(gbc.pc(), 0x725a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c61), 0xd0);
        EXPECT(gbc.readMem(0x9c62), 0x5c);
        // F5 0347
        gbc.setState(0x2bd0, 0x8b7b, 0x7900, 0x4d76, 0x655f, 0x447e, 0x1, 0x1);
        gbc.writeMem(0x2bd0, { 0xf5 });
        gbc.writeMem(0x8b79, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x8b79);
        EXPECT(gbc.pc(), 0x2bd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b79), 0x0);
        EXPECT(gbc.readMem(0x8b7a), 0x79);
        // F5 0348
        gbc.setState(0x21c3, 0xbacc, 0xad60, 0x2b66, 0xa3cc, 0x54eb, 0x0, 0x0);
        gbc.writeMem(0x21c3, { 0xf5 });
        gbc.writeMem(0xbaca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xbaca);
        EXPECT(gbc.pc(), 0x21c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaca), 0x60);
        EXPECT(gbc.readMem(0xbacb), 0xad);
        // F5 034A
        gbc.setState(0xb6dc, 0x9031, 0xb5a0, 0xd836, 0x2e27, 0x77fe, 0x0, 0x1);
        gbc.writeMem(0x902f, { 0x0, 0x0 });
        gbc.writeMem(0xb6dc, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x902f);
        EXPECT(gbc.pc(), 0xb6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x902f), 0xa0);
        EXPECT(gbc.readMem(0x9030), 0xb5);
        EXPECT(gbc.readMem(0xb6dc), 0xf5);
        // F5 034B
        gbc.setState(0x3676, 0xdb5f, 0x8a60, 0x772f, 0x171, 0xbd63, 0x0, 0x1);
        gbc.writeMem(0x3676, { 0xf5 });
        gbc.writeMem(0xdb5d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xdb5d);
        EXPECT(gbc.pc(), 0x3677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5d), 0x60);
        EXPECT(gbc.readMem(0xdb5e), 0x8a);
        // F5 034C
        gbc.setState(0x7bdf, 0x942d, 0xe870, 0x12fc, 0xdd20, 0x27d4, 0x0, 0x1);
        gbc.writeMem(0x7bdf, { 0xf5 });
        gbc.writeMem(0x942b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x942b);
        EXPECT(gbc.pc(), 0x7be0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x942b), 0x70);
        EXPECT(gbc.readMem(0x942c), 0xe8);
        // F5 034D
        gbc.setState(0xa499, 0xde0a, 0x8dc0, 0xc33, 0xb05c, 0xab6b, 0x1, 0x1);
        gbc.writeMem(0xa499, { 0xf5 });
        gbc.writeMem(0xde08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xde08);
        EXPECT(gbc.pc(), 0xa49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa499), 0xf5);
        EXPECT(gbc.readMem(0xde08), 0xc0);
        EXPECT(gbc.readMem(0xde09), 0x8d);
        // F5 034E
        gbc.setState(0xbe02, 0xd64f, 0x5a30, 0x6161, 0xc471, 0x3a49, 0x0, 0x0);
        gbc.writeMem(0xbe02, { 0xf5 });
        gbc.writeMem(0xd64d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd64d);
        EXPECT(gbc.pc(), 0xbe03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe02), 0xf5);
        EXPECT(gbc.readMem(0xd64d), 0x30);
        EXPECT(gbc.readMem(0xd64e), 0x5a);
        // F5 0350
        gbc.setState(0x9f03, 0x8601, 0x4720, 0xbb65, 0xabc, 0xe7b2, 0x1, 0x1);
        gbc.writeMem(0x85ff, { 0x0, 0x0 });
        gbc.writeMem(0x9f03, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x85ff);
        EXPECT(gbc.pc(), 0x9f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ff), 0x20);
        EXPECT(gbc.readMem(0x8600), 0x47);
        EXPECT(gbc.readMem(0x9f03), 0xf5);
        // F5 0351
        gbc.setState(0xea1f, 0x8e5e, 0x1560, 0x65e1, 0x7b8d, 0x8833, 0x0, 0x1);
        gbc.writeMem(0x8e5c, { 0x0, 0x0 });
        gbc.writeMem(0xea1f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x8e5c);
        EXPECT(gbc.pc(), 0xea20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5c), 0x60);
        EXPECT(gbc.readMem(0x8e5d), 0x15);
        EXPECT(gbc.readMem(0xea1f), 0xf5);
        // F5 0356
        gbc.setState(0x6fd2, 0x9011, 0x2ad0, 0xcc15, 0x4c93, 0x7c82, 0x0, 0x0);
        gbc.writeMem(0x6fd2, { 0xf5 });
        gbc.writeMem(0x900f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x900f);
        EXPECT(gbc.pc(), 0x6fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x900f), 0xd0);
        EXPECT(gbc.readMem(0x9010), 0x2a);
        // F5 0357
        gbc.setState(0x687, 0xde52, 0x5490, 0xb427, 0x81a1, 0x88af, 0x0, 0x0);
        gbc.writeMem(0x687, { 0xf5 });
        gbc.writeMem(0xde50, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xde50);
        EXPECT(gbc.pc(), 0x688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde50), 0x90);
        EXPECT(gbc.readMem(0xde51), 0x54);
        // F5 035F
        gbc.setState(0x374d, 0xd965, 0x2de0, 0xe0e7, 0xffb7, 0xa8ce, 0x1, 0x1);
        gbc.writeMem(0x374d, { 0xf5 });
        gbc.writeMem(0xd963, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xd963);
        EXPECT(gbc.pc(), 0x374e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd963), 0xe0);
        EXPECT(gbc.readMem(0xd964), 0x2d);
        // F5 0363
        gbc.setState(0x4096, 0x845f, 0x6570, 0x4337, 0xd261, 0x4cd0, 0x0, 0x1);
        gbc.writeMem(0x4096, { 0xf5 });
        gbc.writeMem(0x845d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x845d);
        EXPECT(gbc.pc(), 0x4097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x845d), 0x70);
        EXPECT(gbc.readMem(0x845e), 0x65);
        // F5 0364
        gbc.setState(0x5d91, 0xada6, 0x94d0, 0x88c0, 0x3293, 0xd76f, 0x1, 0x0);
        gbc.writeMem(0x5d91, { 0xf5 });
        gbc.writeMem(0xada4, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xada4);
        EXPECT(gbc.pc(), 0x5d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada4), 0xd0);
        EXPECT(gbc.readMem(0xada5), 0x94);
        // F5 0367
        gbc.setState(0x9be0, 0xf962, 0x2550, 0xee39, 0xf2b, 0x4296, 0x0, 0x0);
        gbc.writeMem(0x9be0, { 0xf5 });
        gbc.writeMem(0xf960, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf960);
        EXPECT(gbc.pc(), 0x9be1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be0), 0xf5);
        EXPECT(gbc.readMem(0xf960), 0x50);
        EXPECT(gbc.readMem(0xf961), 0x25);
        // F5 036B
        gbc.setState(0xdd4c, 0x834e, 0xc370, 0x6465, 0xa23c, 0x4377, 0x1, 0x1);
        gbc.writeMem(0x834c, { 0x0, 0x0 });
        gbc.writeMem(0xdd4c, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x834c);
        EXPECT(gbc.pc(), 0xdd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x834c), 0x70);
        EXPECT(gbc.readMem(0x834d), 0xc3);
        EXPECT(gbc.readMem(0xdd4c), 0xf5);
        // F5 036C
        gbc.setState(0x31d0, 0xc66b, 0x9950, 0xdd1a, 0x7cf3, 0x1a37, 0x0, 0x0);
        gbc.writeMem(0x31d0, { 0xf5 });
        gbc.writeMem(0xc669, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc669);
        EXPECT(gbc.pc(), 0x31d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc669), 0x50);
        EXPECT(gbc.readMem(0xc66a), 0x99);
        // F5 036F
        gbc.setState(0x5e00, 0x878e, 0xa590, 0xc067, 0xb009, 0x61d6, 0x0, 0x1);
        gbc.writeMem(0x5e00, { 0xf5 });
        gbc.writeMem(0x878c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x878c);
        EXPECT(gbc.pc(), 0x5e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x878c), 0x90);
        EXPECT(gbc.readMem(0x878d), 0xa5);
        // F5 0377
        gbc.setState(0x14b0, 0x935e, 0x8a90, 0x2e2f, 0xdf6c, 0xb927, 0x1, 0x0);
        gbc.writeMem(0x14b0, { 0xf5 });
        gbc.writeMem(0x935c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x935c);
        EXPECT(gbc.pc(), 0x14b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x935c), 0x90);
        EXPECT(gbc.readMem(0x935d), 0x8a);
        // F5 037A
        gbc.setState(0xca16, 0xb7a5, 0x8110, 0xd915, 0x46e, 0x3217, 0x0, 0x0);
        gbc.writeMem(0xb7a3, { 0x0, 0x0 });
        gbc.writeMem(0xca16, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb7a3);
        EXPECT(gbc.pc(), 0xca17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7a3), 0x10);
        EXPECT(gbc.readMem(0xb7a4), 0x81);
        EXPECT(gbc.readMem(0xca16), 0xf5);
        // F5 037F
        gbc.setState(0xad23, 0xb74e, 0x1b20, 0xad84, 0x3b1e, 0x7e8c, 0x0, 0x0);
        gbc.writeMem(0xad23, { 0xf5 });
        gbc.writeMem(0xb74c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb74c);
        EXPECT(gbc.pc(), 0xad24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad23), 0xf5);
        EXPECT(gbc.readMem(0xb74c), 0x20);
        EXPECT(gbc.readMem(0xb74d), 0x1b);
        // F5 0382
        gbc.setState(0xead9, 0xa26e, 0x370, 0xe6b7, 0xb88f, 0x182, 0x0, 0x0);
        gbc.writeMem(0xa26c, { 0x0, 0x0 });
        gbc.writeMem(0xead9, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa26c);
        EXPECT(gbc.pc(), 0xeada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa26c), 0x70);
        EXPECT(gbc.readMem(0xa26d), 0x3);
        EXPECT(gbc.readMem(0xead9), 0xf5);
        // F5 0384
        gbc.setState(0xa31, 0xb903, 0x53e0, 0x3432, 0xf9c1, 0xe834, 0x0, 0x0);
        gbc.writeMem(0xa31, { 0xf5 });
        gbc.writeMem(0xb901, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb901);
        EXPECT(gbc.pc(), 0xa32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb901), 0xe0);
        EXPECT(gbc.readMem(0xb902), 0x53);
        // F5 0387
        gbc.setState(0xb5c3, 0xbfaa, 0xb050, 0xcfd4, 0x77d9, 0x5963, 0x0, 0x0);
        gbc.writeMem(0xb5c3, { 0xf5 });
        gbc.writeMem(0xbfa8, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbfa8);
        EXPECT(gbc.pc(), 0xb5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c3), 0xf5);
        EXPECT(gbc.readMem(0xbfa8), 0x50);
        EXPECT(gbc.readMem(0xbfa9), 0xb0);
        // F5 0389
        gbc.setState(0x8e81, 0xc5e0, 0x5450, 0xb297, 0xbd94, 0x56f5, 0x0, 0x1);
        gbc.writeMem(0x8e81, { 0xf5 });
        gbc.writeMem(0xc5de, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc5de);
        EXPECT(gbc.pc(), 0x8e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e81), 0xf5);
        EXPECT(gbc.readMem(0xc5de), 0x50);
        EXPECT(gbc.readMem(0xc5df), 0x54);
        // F5 038C
        gbc.setState(0x3542, 0x9976, 0xaaf0, 0x4931, 0x5380, 0x2b9e, 0x0, 0x0);
        gbc.writeMem(0x3542, { 0xf5 });
        gbc.writeMem(0x9974, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x9974);
        EXPECT(gbc.pc(), 0x3543);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9974), 0xf0);
        EXPECT(gbc.readMem(0x9975), 0xaa);
        // F5 038D
        gbc.setState(0x579b, 0xb02d, 0x6310, 0x890f, 0x48fc, 0xe001, 0x1, 0x1);
        gbc.writeMem(0x579b, { 0xf5 });
        gbc.writeMem(0xb02b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xb02b);
        EXPECT(gbc.pc(), 0x579c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb02b), 0x10);
        EXPECT(gbc.readMem(0xb02c), 0x63);
        // F5 038F
        gbc.setState(0x2321, 0xf8bd, 0x8f00, 0x95d, 0xccc3, 0xaa24, 0x0, 0x0);
        gbc.writeMem(0x2321, { 0xf5 });
        gbc.writeMem(0xf8bb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf8bb);
        EXPECT(gbc.pc(), 0x2322);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf8bb), 0x0);
        EXPECT(gbc.readMem(0xf8bc), 0x8f);
        // F5 0394
        gbc.setState(0xd02b, 0x9661, 0x27d0, 0x3803, 0xf859, 0xc8e8, 0x0, 0x0);
        gbc.writeMem(0x965f, { 0x0, 0x0 });
        gbc.writeMem(0xd02b, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x965f);
        EXPECT(gbc.pc(), 0xd02c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965f), 0xd0);
        EXPECT(gbc.readMem(0x9660), 0x27);
        EXPECT(gbc.readMem(0xd02b), 0xf5);
        // F5 0395
        gbc.setState(0xcd80, 0xa4e4, 0x22a0, 0xd403, 0x5d38, 0x4da8, 0x0, 0x0);
        gbc.writeMem(0xa4e2, { 0x0, 0x0 });
        gbc.writeMem(0xcd80, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa4e2);
        EXPECT(gbc.pc(), 0xcd81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e2), 0xa0);
        EXPECT(gbc.readMem(0xa4e3), 0x22);
        EXPECT(gbc.readMem(0xcd80), 0xf5);
        // F5 0397
        gbc.setState(0x335a, 0xed70, 0xd1e0, 0x4566, 0x9814, 0x76d4, 0x0, 0x1);
        gbc.writeMem(0x335a, { 0xf5 });
        gbc.writeMem(0xed6e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xed6e);
        EXPECT(gbc.pc(), 0x335b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6e), 0xe0);
        EXPECT(gbc.readMem(0xed6f), 0xd1);
        // F5 0398
        gbc.setState(0x4c23, 0xe4ac, 0x5790, 0x7365, 0xc934, 0x656d, 0x0, 0x1);
        gbc.writeMem(0x4c23, { 0xf5 });
        gbc.writeMem(0xe4aa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe4aa);
        EXPECT(gbc.pc(), 0x4c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4aa), 0x90);
        EXPECT(gbc.readMem(0xe4ab), 0x57);
        // F5 0399
        gbc.setState(0x6944, 0xc4fc, 0xb6e0, 0xfb53, 0x87ad, 0xbeab, 0x1, 0x0);
        gbc.writeMem(0x6944, { 0xf5 });
        gbc.writeMem(0xc4fa, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc4fa);
        EXPECT(gbc.pc(), 0x6945);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4fa), 0xe0);
        EXPECT(gbc.readMem(0xc4fb), 0xb6);
        // F5 039A
        gbc.setState(0x4069, 0xbb71, 0x9310, 0x380c, 0xb20f, 0xd58, 0x0, 0x0);
        gbc.writeMem(0x4069, { 0xf5 });
        gbc.writeMem(0xbb6f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbb6f);
        EXPECT(gbc.pc(), 0x406a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb6f), 0x10);
        EXPECT(gbc.readMem(0xbb70), 0x93);
        // F5 039D
        gbc.setState(0x4a55, 0x9212, 0xd160, 0x9733, 0x5229, 0xda09, 0x0, 0x0);
        gbc.writeMem(0x4a55, { 0xf5 });
        gbc.writeMem(0x9210, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9210);
        EXPECT(gbc.pc(), 0x4a56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9210), 0x60);
        EXPECT(gbc.readMem(0x9211), 0xd1);
        // F5 039E
        gbc.setState(0x643f, 0xb45d, 0xb110, 0xd7d1, 0xdcbf, 0xcc96, 0x0, 0x1);
        gbc.writeMem(0x643f, { 0xf5 });
        gbc.writeMem(0xb45b, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xb45b);
        EXPECT(gbc.pc(), 0x6440);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb45b), 0x10);
        EXPECT(gbc.readMem(0xb45c), 0xb1);
        // F5 03A2
        gbc.setState(0x1c89, 0xb8db, 0x5b90, 0x2ea1, 0x953d, 0xb5be, 0x0, 0x0);
        gbc.writeMem(0x1c89, { 0xf5 });
        gbc.writeMem(0xb8d9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb8d9);
        EXPECT(gbc.pc(), 0x1c8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8d9), 0x90);
        EXPECT(gbc.readMem(0xb8da), 0x5b);
        // F5 03A3
        gbc.setState(0xd983, 0x8b3d, 0xce10, 0x425a, 0x191e, 0x6696, 0x0, 0x1);
        gbc.writeMem(0x8b3b, { 0x0, 0x0 });
        gbc.writeMem(0xd983, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8b3b);
        EXPECT(gbc.pc(), 0xd984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b3b), 0x10);
        EXPECT(gbc.readMem(0x8b3c), 0xce);
        EXPECT(gbc.readMem(0xd983), 0xf5);
        // F5 03A5
        gbc.setState(0x5ca2, 0xafa4, 0x8470, 0xa413, 0xfa4c, 0xd5f0, 0x1, 0x0);
        gbc.writeMem(0x5ca2, { 0xf5 });
        gbc.writeMem(0xafa2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xafa2);
        EXPECT(gbc.pc(), 0x5ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafa2), 0x70);
        EXPECT(gbc.readMem(0xafa3), 0x84);
        // F5 03A6
        gbc.setState(0x7f29, 0xd8d5, 0x9900, 0x3c8f, 0xab2f, 0x555c, 0x1, 0x1);
        gbc.writeMem(0x7f29, { 0xf5 });
        gbc.writeMem(0xd8d3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd8d3);
        EXPECT(gbc.pc(), 0x7f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8d3), 0x0);
        EXPECT(gbc.readMem(0xd8d4), 0x99);
        // F5 03A8
        gbc.setState(0xd004, 0x9109, 0xaaa0, 0x52f8, 0x226, 0x4462, 0x1, 0x1);
        gbc.writeMem(0x9107, { 0x0, 0x0 });
        gbc.writeMem(0xd004, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x9107);
        EXPECT(gbc.pc(), 0xd005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9107), 0xa0);
        EXPECT(gbc.readMem(0x9108), 0xaa);
        EXPECT(gbc.readMem(0xd004), 0xf5);
        // F5 03AA
        gbc.setState(0x4ab8, 0xfc08, 0x10d0, 0xbd71, 0x9fc, 0x93ee, 0x0, 0x0);
        gbc.writeMem(0x4ab8, { 0xf5 });
        gbc.writeMem(0xfc06, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xfc06);
        EXPECT(gbc.pc(), 0x4ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xfc06), 0xd0);
        EXPECT(gbc.readMem(0xfc07), 0x10);
        // F5 03AC
        gbc.setState(0xb0a8, 0xe25b, 0xee30, 0xe87c, 0xe662, 0x2e95, 0x1, 0x1);
        gbc.writeMem(0xb0a8, { 0xf5 });
        gbc.writeMem(0xe259, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe259);
        EXPECT(gbc.pc(), 0xb0a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0a8), 0xf5);
        EXPECT(gbc.readMem(0xe259), 0x30);
        EXPECT(gbc.readMem(0xe25a), 0xee);
        // F5 03AD
        gbc.setState(0x1c72, 0x826e, 0x8830, 0x9c6a, 0x7dcb, 0xff00, 0x1, 0x0);
        gbc.writeMem(0x1c72, { 0xf5 });
        gbc.writeMem(0x826c, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x826c);
        EXPECT(gbc.pc(), 0x1c73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826c), 0x30);
        EXPECT(gbc.readMem(0x826d), 0x88);
        // F5 03AE
        gbc.setState(0x8e52, 0x88df, 0xef30, 0x7163, 0xda5, 0xa61e, 0x1, 0x1);
        gbc.writeMem(0x88dd, { 0x0, 0x0 });
        gbc.writeMem(0x8e52, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x88dd);
        EXPECT(gbc.pc(), 0x8e53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88dd), 0x30);
        EXPECT(gbc.readMem(0x88de), 0xef);
        EXPECT(gbc.readMem(0x8e52), 0xf5);
        // F5 03B6
        gbc.setState(0x92e0, 0xddab, 0x6f60, 0x5c21, 0xcca7, 0xe7fa, 0x0, 0x1);
        gbc.writeMem(0x92e0, { 0xf5 });
        gbc.writeMem(0xdda9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdda9);
        EXPECT(gbc.pc(), 0x92e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e0), 0xf5);
        EXPECT(gbc.readMem(0xdda9), 0x60);
        EXPECT(gbc.readMem(0xddaa), 0x6f);
        // F5 03B7
        gbc.setState(0x8971, 0xdd0a, 0x9b0, 0x3958, 0x7eed, 0x62c9, 0x0, 0x0);
        gbc.writeMem(0x8971, { 0xf5 });
        gbc.writeMem(0xdd08, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xdd08);
        EXPECT(gbc.pc(), 0x8972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8971), 0xf5);
        EXPECT(gbc.readMem(0xdd08), 0xb0);
        EXPECT(gbc.readMem(0xdd09), 0x9);
        // F5 03B9
        gbc.setState(0xd12f, 0xa6a3, 0x64d0, 0xa895, 0xf82c, 0x8b5b, 0x0, 0x1);
        gbc.writeMem(0xa6a1, { 0x0, 0x0 });
        gbc.writeMem(0xd12f, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa6a1);
        EXPECT(gbc.pc(), 0xd130);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a1), 0xd0);
        EXPECT(gbc.readMem(0xa6a2), 0x64);
        EXPECT(gbc.readMem(0xd12f), 0xf5);
        // F5 03BB
        gbc.setState(0x187c, 0xfac5, 0x4240, 0x7b9, 0x97e4, 0xa17, 0x1, 0x0);
        gbc.writeMem(0x187c, { 0xf5 });
        gbc.writeMem(0xfac3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xfac3);
        EXPECT(gbc.pc(), 0x187d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xfac3), 0x40);
        EXPECT(gbc.readMem(0xfac4), 0x42);
        // F5 03BE
        gbc.setState(0x2646, 0xa6cc, 0x3880, 0x3790, 0xe0fc, 0xf4da, 0x1, 0x1);
        gbc.writeMem(0x2646, { 0xf5 });
        gbc.writeMem(0xa6ca, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa6ca);
        EXPECT(gbc.pc(), 0x2647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ca), 0x80);
        EXPECT(gbc.readMem(0xa6cb), 0x38);
        // F5 03C6
        gbc.setState(0x58a7, 0xbd63, 0x75f0, 0xba18, 0x4d91, 0x8b5e, 0x0, 0x1);
        gbc.writeMem(0x58a7, { 0xf5 });
        gbc.writeMem(0xbd61, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xbd61);
        EXPECT(gbc.pc(), 0x58a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd61), 0xf0);
        EXPECT(gbc.readMem(0xbd62), 0x75);
        // F5 03C8
        gbc.setState(0x5b7d, 0xf340, 0x8a60, 0x479b, 0x43dc, 0x3624, 0x0, 0x0);
        gbc.writeMem(0x5b7d, { 0xf5 });
        gbc.writeMem(0xf33e, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf33e);
        EXPECT(gbc.pc(), 0x5b7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf33e), 0x60);
        EXPECT(gbc.readMem(0xf33f), 0x8a);
        // F5 03C9
        gbc.setState(0x24e9, 0xd7b4, 0x19b0, 0xc634, 0xf280, 0x9c6, 0x1, 0x0);
        gbc.writeMem(0x24e9, { 0xf5 });
        gbc.writeMem(0xd7b2, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd7b2);
        EXPECT(gbc.pc(), 0x24ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7b2), 0xb0);
        EXPECT(gbc.readMem(0xd7b3), 0x19);
        // F5 03CB
        gbc.setState(0x422b, 0xb941, 0xbd40, 0x9568, 0xe627, 0x9c75, 0x1, 0x0);
        gbc.writeMem(0x422b, { 0xf5 });
        gbc.writeMem(0xb93f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb93f);
        EXPECT(gbc.pc(), 0x422c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb93f), 0x40);
        EXPECT(gbc.readMem(0xb940), 0xbd);
        // F5 03CC
        gbc.setState(0x8f85, 0xc9cd, 0xe830, 0x2484, 0xc2d6, 0x21ae, 0x1, 0x0);
        gbc.writeMem(0x8f85, { 0xf5 });
        gbc.writeMem(0xc9cb, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xc9cb);
        EXPECT(gbc.pc(), 0x8f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f85), 0xf5);
        EXPECT(gbc.readMem(0xc9cb), 0x30);
        EXPECT(gbc.readMem(0xc9cc), 0xe8);
        // F5 03D0
        gbc.setState(0xb31f, 0xcf93, 0x8eb0, 0x4e2f, 0x39c0, 0xc4d9, 0x1, 0x1);
        gbc.writeMem(0xb31f, { 0xf5 });
        gbc.writeMem(0xcf91, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xcf91);
        EXPECT(gbc.pc(), 0xb320);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb31f), 0xf5);
        EXPECT(gbc.readMem(0xcf91), 0xb0);
        EXPECT(gbc.readMem(0xcf92), 0x8e);
        // F5 03D2
        gbc.setState(0x7815, 0xf233, 0x3b00, 0x76b6, 0xf092, 0x5a4, 0x1, 0x0);
        gbc.writeMem(0x7815, { 0xf5 });
        gbc.writeMem(0xf231, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf231);
        EXPECT(gbc.pc(), 0x7816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xf231), 0x0);
        EXPECT(gbc.readMem(0xf232), 0x3b);
        // F5 03D4
        gbc.setState(0xaa68, 0x9dd6, 0x4020, 0xd264, 0xa2a3, 0xdd39, 0x0, 0x0);
        gbc.writeMem(0x9dd4, { 0x0, 0x0 });
        gbc.writeMem(0xaa68, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9dd4);
        EXPECT(gbc.pc(), 0xaa69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dd4), 0x20);
        EXPECT(gbc.readMem(0x9dd5), 0x40);
        EXPECT(gbc.readMem(0xaa68), 0xf5);
        // F5 03D7
        gbc.setState(0xcb00, 0xc50d, 0xf430, 0x6ba2, 0xa8d5, 0x4c00, 0x0, 0x0);
        gbc.writeMem(0xc50b, { 0x0, 0x0 });
        gbc.writeMem(0xcb00, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc50b);
        EXPECT(gbc.pc(), 0xcb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc50b), 0x30);
        EXPECT(gbc.readMem(0xc50c), 0xf4);
        EXPECT(gbc.readMem(0xcb00), 0xf5);
        // F5 03D8
        gbc.setState(0xe7f1, 0xfed5, 0x5560, 0xde46, 0x440, 0xa698, 0x0, 0x0);
        gbc.writeMem(0xe7f1, { 0xf5 });
        gbc.writeMem(0xfed3, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfed3);
        EXPECT(gbc.pc(), 0xe7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f1), 0xf5);
        EXPECT(gbc.readMem(0xfed3), 0x60);
        EXPECT(gbc.readMem(0xfed4), 0x55);
        // F5 03D9
        gbc.setState(0x62b8, 0x9e1f, 0xbfd0, 0x6903, 0xb520, 0xe5de, 0x0, 0x0);
        gbc.writeMem(0x62b8, { 0xf5 });
        gbc.writeMem(0x9e1d, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x9e1d);
        EXPECT(gbc.pc(), 0x62b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e1d), 0xd0);
        EXPECT(gbc.readMem(0x9e1e), 0xbf);
        // F5 03DB
        gbc.setState(0x888, 0x99f8, 0x9ad0, 0xa4bf, 0xe1fe, 0x782f, 0x0, 0x0);
        gbc.writeMem(0x888, { 0xf5 });
        gbc.writeMem(0x99f6, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x99f6);
        EXPECT(gbc.pc(), 0x889);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99f6), 0xd0);
        EXPECT(gbc.readMem(0x99f7), 0x9a);
        // F5 03DC
        gbc.setState(0x5fee, 0xb857, 0x1480, 0x5c29, 0x65fe, 0xcf1f, 0x0, 0x0);
        gbc.writeMem(0x5fee, { 0xf5 });
        gbc.writeMem(0xb855, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xb855);
        EXPECT(gbc.pc(), 0x5fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb855), 0x80);
        EXPECT(gbc.readMem(0xb856), 0x14);
        // F5 03DE
        gbc.setState(0x1666, 0x8c61, 0xea50, 0xf323, 0xcf11, 0x57dc, 0x1, 0x1);
        gbc.writeMem(0x1666, { 0xf5 });
        gbc.writeMem(0x8c5f, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8c5f);
        EXPECT(gbc.pc(), 0x1667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c5f), 0x50);
        EXPECT(gbc.readMem(0x8c60), 0xea);
        // F5 03E1
        gbc.setState(0x65c0, 0x9ceb, 0x41d0, 0x8204, 0x7417, 0x1c5b, 0x1, 0x0);
        gbc.writeMem(0x65c0, { 0xf5 });
        gbc.writeMem(0x9ce9, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9ce9);
        EXPECT(gbc.pc(), 0x65c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce9), 0xd0);
        EXPECT(gbc.readMem(0x9cea), 0x41);
        // F5 03E3
        gbc.setState(0x7bf2, 0xd798, 0xbd10, 0xdaf3, 0x8f01, 0xab80, 0x0, 0x0);
        gbc.writeMem(0x7bf2, { 0xf5 });
        gbc.writeMem(0xd796, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd796);
        EXPECT(gbc.pc(), 0x7bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd796), 0x10);
        EXPECT(gbc.readMem(0xd797), 0xbd);
        // F5 03E6
        gbc.setState(0x43bb, 0x96b0, 0x49b0, 0x45c6, 0xc0e8, 0x78b5, 0x1, 0x0);
        gbc.writeMem(0x43bb, { 0xf5 });
        gbc.writeMem(0x96ae, { 0x0, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x96ae);
        EXPECT(gbc.pc(), 0x43bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ae), 0xb0);
        EXPECT(gbc.readMem(0x96af), 0x49);
        // F5 03E7
        gbc.setState(0x9ffc, 0x99b7, 0x960, 0x761d, 0x7503, 0x6b20, 0x1, 0x1);
        gbc.writeMem(0x99b5, { 0x0, 0x0 });
        gbc.writeMem(0x9ffc, { 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x99b5);
        EXPECT(gbc.pc(), 0x9ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99b5), 0x60);
        EXPECT(gbc.readMem(0x99b6), 0x9);
        EXPECT(gbc.readMem(0x9ffc), 0xf5);
    }
