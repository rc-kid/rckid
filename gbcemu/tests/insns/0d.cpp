#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_0d)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_0d) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 0D 0002
        gbc.setState(0x3964, 0x58f8, 0x6440, 0xaf3a, 0x269f, 0xf9f2, 0x0, 0x1);
        gbc.writeMem(0x3964, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x58f8);
        EXPECT(gbc.pc(), 0x3965);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0003
        gbc.setState(0x6882, 0x15d2, 0xca30, 0x8356, 0x71db, 0x335e, 0x1, 0x0);
        gbc.writeMem(0x6882, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0x6883);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0004
        gbc.setState(0x265d, 0x737c, 0x5160, 0x93b, 0x84ad, 0x828f, 0x1, 0x0);
        gbc.writeMem(0x265d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x737c);
        EXPECT(gbc.pc(), 0x265e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0005
        gbc.setState(0x5c0f, 0x18a4, 0x77c0, 0xa6a7, 0x6665, 0x4d9c, 0x0, 0x0);
        gbc.writeMem(0x5c0f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x18a4);
        EXPECT(gbc.pc(), 0x5c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0006
        gbc.setState(0xfc0, 0x5355, 0xb440, 0x2cd6, 0x62af, 0x829a, 0x1, 0x1);
        gbc.writeMem(0xfc0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5355);
        EXPECT(gbc.pc(), 0xfc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0007
        gbc.setState(0x748d, 0x8b61, 0x9e60, 0x1170, 0xb2ef, 0x8194, 0x1, 0x1);
        gbc.writeMem(0x748d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x8b61);
        EXPECT(gbc.pc(), 0x748e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 0008
        gbc.setState(0x1924, 0x3558, 0x74b0, 0x3dd6, 0x75ef, 0x1058, 0x0, 0x0);
        gbc.writeMem(0x1924, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3558);
        EXPECT(gbc.pc(), 0x1925);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0009
        gbc.setState(0xa817, 0xa008, 0x4920, 0x8061, 0x2ecf, 0x2992, 0x1, 0x1);
        gbc.writeMem(0xa817, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xa008);
        EXPECT(gbc.pc(), 0xa818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa817), 0xd);
        // 0D 000A
        gbc.setState(0xdd24, 0x309b, 0x5160, 0x4326, 0xa9a0, 0xa4e5, 0x0, 0x1);
        gbc.writeMem(0xdd24, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x309b);
        EXPECT(gbc.pc(), 0xdd25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd24), 0xd);
        // 0D 000B
        gbc.setState(0xd643, 0xe153, 0x5fa0, 0x7563, 0x7174, 0x8828, 0x0, 0x1);
        gbc.writeMem(0xd643, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe153);
        EXPECT(gbc.pc(), 0xd644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd643), 0xd);
        // 0D 000C
        gbc.setState(0xb0c1, 0x2f3c, 0x5fd0, 0xa5e8, 0x2f7, 0xab1b, 0x1, 0x1);
        gbc.writeMem(0xb0c1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x2f3c);
        EXPECT(gbc.pc(), 0xb0c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0c1), 0xd);
        // 0D 000D
        gbc.setState(0x5312, 0x2ac2, 0x86d0, 0xda6c, 0xd4f4, 0xc22e, 0x0, 0x1);
        gbc.writeMem(0x5312, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2ac2);
        EXPECT(gbc.pc(), 0x5313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 000E
        gbc.setState(0x3d5f, 0x2b21, 0xa360, 0x7e36, 0x758, 0xee99, 0x1, 0x0);
        gbc.writeMem(0x3d5f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x2b21);
        EXPECT(gbc.pc(), 0x3d60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 000F
        gbc.setState(0x5ac0, 0x5bfe, 0x83c0, 0xaac8, 0xd501, 0x9d3e, 0x1, 0x0);
        gbc.writeMem(0x5ac0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x5bfe);
        EXPECT(gbc.pc(), 0x5ac1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0011
        gbc.setState(0x666, 0x4876, 0x8250, 0x495c, 0x31e, 0xba5d, 0x1, 0x0);
        gbc.writeMem(0x666, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x4876);
        EXPECT(gbc.pc(), 0x667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0012
        gbc.setState(0xb3f0, 0xd926, 0x69d0, 0x5776, 0xd533, 0x2cac, 0x1, 0x1);
        gbc.writeMem(0xb3f0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd926);
        EXPECT(gbc.pc(), 0xb3f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3f0), 0xd);
        // 0D 0013
        gbc.setState(0x37a6, 0x806f, 0xf60, 0x678f, 0x485c, 0x6a1b, 0x1, 0x1);
        gbc.writeMem(0x37a6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x806f);
        EXPECT(gbc.pc(), 0x37a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0014
        gbc.setState(0xb119, 0x2806, 0x1740, 0x93f3, 0x1878, 0xfb0a, 0x1, 0x0);
        gbc.writeMem(0xb119, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x2806);
        EXPECT(gbc.pc(), 0xb11a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb119), 0xd);
        // 0D 0015
        gbc.setState(0x6e71, 0xead3, 0x480, 0x8315, 0x70b7, 0x7f27, 0x1, 0x1);
        gbc.writeMem(0x6e71, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xead3);
        EXPECT(gbc.pc(), 0x6e72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0016
        gbc.setState(0xcb76, 0xa23a, 0x6140, 0x480a, 0xe14a, 0xe7c2, 0x0, 0x0);
        gbc.writeMem(0xcb76, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xa23a);
        EXPECT(gbc.pc(), 0xcb77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb76), 0xd);
        // 0D 0017
        gbc.setState(0x33bc, 0x341b, 0x460, 0x40dd, 0x9563, 0xd5d2, 0x0, 0x0);
        gbc.writeMem(0x33bc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x341b);
        EXPECT(gbc.pc(), 0x33bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0018
        gbc.setState(0x135e, 0x21a4, 0xf8c0, 0xa8ee, 0xdde7, 0x8319, 0x1, 0x1);
        gbc.writeMem(0x135e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0x135f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0019
        gbc.setState(0x5f9f, 0xbf5, 0xfb20, 0x5cc0, 0x716b, 0x8c84, 0x0, 0x1);
        gbc.writeMem(0x5f9f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbf5);
        EXPECT(gbc.pc(), 0x5fa0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 001A
        gbc.setState(0x1892, 0x4644, 0xe440, 0x98d5, 0xd98b, 0xd255, 0x0, 0x1);
        gbc.writeMem(0x1892, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x4644);
        EXPECT(gbc.pc(), 0x1893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 001C
        gbc.setState(0x3349, 0xc901, 0x5250, 0x8403, 0x9c18, 0xcc8a, 0x0, 0x1);
        gbc.writeMem(0x3349, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc901);
        EXPECT(gbc.pc(), 0x334a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 001D
        gbc.setState(0x181d, 0xf30e, 0xa710, 0x3185, 0x1a0, 0xdfb6, 0x0, 0x1);
        gbc.writeMem(0x181d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf30e);
        EXPECT(gbc.pc(), 0x181e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 001E
        gbc.setState(0x94c1, 0x4801, 0xb730, 0xf321, 0xac2f, 0x9019, 0x1, 0x1);
        gbc.writeMem(0x94c1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4801);
        EXPECT(gbc.pc(), 0x94c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94c1), 0xd);
        // 0D 0020
        gbc.setState(0x2cfe, 0x6c30, 0x9ed0, 0x9533, 0xf6db, 0x485d, 0x0, 0x1);
        gbc.writeMem(0x2cfe, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6c30);
        EXPECT(gbc.pc(), 0x2cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0021
        gbc.setState(0xd497, 0xfd7e, 0xd180, 0xf24f, 0xf3e8, 0x32d0, 0x1, 0x0);
        gbc.writeMem(0xd497, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfd7e);
        EXPECT(gbc.pc(), 0xd498);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd497), 0xd);
        // 0D 0022
        gbc.setState(0x323b, 0xe9f2, 0xd2d0, 0x2dde, 0x1877, 0x24f3, 0x1, 0x0);
        gbc.writeMem(0x323b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe9f2);
        EXPECT(gbc.pc(), 0x323c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0023
        gbc.setState(0x3c27, 0x88d2, 0x59e0, 0x49ed, 0xee28, 0xf0a8, 0x0, 0x0);
        gbc.writeMem(0x3c27, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x88d2);
        EXPECT(gbc.pc(), 0x3c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0024
        gbc.setState(0x94ea, 0xbefd, 0xb020, 0xe205, 0xe1f, 0x5e4b, 0x1, 0x0);
        gbc.writeMem(0x94ea, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xbefd);
        EXPECT(gbc.pc(), 0x94eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94ea), 0xd);
        // 0D 0025
        gbc.setState(0x6ebb, 0xcedf, 0x6aa0, 0x4289, 0x220, 0x886e, 0x1, 0x1);
        gbc.writeMem(0x6ebb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcedf);
        EXPECT(gbc.pc(), 0x6ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0026
        gbc.setState(0x7c69, 0xae48, 0x15b0, 0x4de6, 0x2860, 0x25de, 0x0, 0x1);
        gbc.writeMem(0x7c69, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xae48);
        EXPECT(gbc.pc(), 0x7c6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0027
        gbc.setState(0xc918, 0x54b8, 0xec40, 0x5ec8, 0x7d91, 0xba11, 0x0, 0x1);
        gbc.writeMem(0xc918, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x54b8);
        EXPECT(gbc.pc(), 0xc919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc918), 0xd);
        // 0D 0028
        gbc.setState(0xa3ae, 0xbfa8, 0x20, 0x3fc3, 0xef5f, 0xfcef, 0x0, 0x0);
        gbc.writeMem(0xa3ae, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xbfa8);
        EXPECT(gbc.pc(), 0xa3af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ae), 0xd);
        // 0D 0029
        gbc.setState(0x943, 0x52f1, 0xbf00, 0xe77, 0x43, 0x66ec, 0x1, 0x0);
        gbc.writeMem(0x943, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x52f1);
        EXPECT(gbc.pc(), 0x944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 002A
        gbc.setState(0xab64, 0x48cb, 0xc960, 0x1076, 0x8985, 0xc699, 0x0, 0x1);
        gbc.writeMem(0xab64, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x48cb);
        EXPECT(gbc.pc(), 0xab65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab64), 0xd);
        // 0D 002B
        gbc.setState(0xc190, 0x27d3, 0x80a0, 0x9643, 0x7936, 0x70aa, 0x1, 0x0);
        gbc.writeMem(0xc190, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x27d3);
        EXPECT(gbc.pc(), 0xc191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc190), 0xd);
        // 0D 002C
        gbc.setState(0x4093, 0x5e42, 0xffc0, 0xd8c1, 0x20ce, 0xa324, 0x1, 0x1);
        gbc.writeMem(0x4093, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5e42);
        EXPECT(gbc.pc(), 0x4094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 002D
        gbc.setState(0x554e, 0x8877, 0x4f60, 0xe49d, 0xcb24, 0x5a25, 0x1, 0x0);
        gbc.writeMem(0x554e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8877);
        EXPECT(gbc.pc(), 0x554f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 002E
        gbc.setState(0x61d1, 0x4876, 0x4920, 0xadef, 0xd563, 0x8768, 0x1, 0x0);
        gbc.writeMem(0x61d1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4876);
        EXPECT(gbc.pc(), 0x61d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 002F
        gbc.setState(0x5f94, 0xb75c, 0xa3f0, 0xe3ef, 0x3428, 0xe146, 0x1, 0x0);
        gbc.writeMem(0x5f94, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb75c);
        EXPECT(gbc.pc(), 0x5f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0030
        gbc.setState(0xbf74, 0x539a, 0x3970, 0xeb43, 0xf7cb, 0xbe7e, 0x1, 0x0);
        gbc.writeMem(0xbf74, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x539a);
        EXPECT(gbc.pc(), 0xbf75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf74), 0xd);
        // 0D 0031
        gbc.setState(0x6674, 0x6315, 0xabd0, 0x75ce, 0x2a07, 0x29af, 0x1, 0x1);
        gbc.writeMem(0x6674, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6315);
        EXPECT(gbc.pc(), 0x6675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0033
        gbc.setState(0xadac, 0x8cec, 0x59f0, 0x3ccb, 0xa6c7, 0xa819, 0x0, 0x1);
        gbc.writeMem(0xadac, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8cec);
        EXPECT(gbc.pc(), 0xadad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadac), 0xd);
        // 0D 0034
        gbc.setState(0xa8bf, 0xf228, 0xf810, 0xd8e, 0xa789, 0xd7ab, 0x0, 0x1);
        gbc.writeMem(0xa8bf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf228);
        EXPECT(gbc.pc(), 0xa8c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8bf), 0xd);
        // 0D 0035
        gbc.setState(0x2fa2, 0x1a61, 0x8d00, 0x5e96, 0xb03d, 0xaeb5, 0x0, 0x0);
        gbc.writeMem(0x2fa2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1a61);
        EXPECT(gbc.pc(), 0x2fa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0037
        gbc.setState(0x5214, 0x865, 0x5940, 0x1802, 0x18b4, 0x1948, 0x1, 0x1);
        gbc.writeMem(0x5214, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x865);
        EXPECT(gbc.pc(), 0x5215);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0038
        gbc.setState(0x4bd2, 0x4f4, 0x5020, 0x3627, 0x2554, 0xee32, 0x1, 0x1);
        gbc.writeMem(0x4bd2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x4f4);
        EXPECT(gbc.pc(), 0x4bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0039
        gbc.setState(0x2246, 0x7285, 0xf590, 0xd9a6, 0xce0f, 0xa01f, 0x1, 0x1);
        gbc.writeMem(0x2246, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7285);
        EXPECT(gbc.pc(), 0x2247);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 003A
        gbc.setState(0x8273, 0x92cb, 0xf660, 0x85af, 0x8196, 0x17e0, 0x0, 0x0);
        gbc.writeMem(0x8273, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x92cb);
        EXPECT(gbc.pc(), 0x8274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8273), 0xd);
        // 0D 003B
        gbc.setState(0x2b29, 0xaeef, 0xf950, 0xe38e, 0x57d, 0xd774, 0x1, 0x1);
        gbc.writeMem(0x2b29, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xaeef);
        EXPECT(gbc.pc(), 0x2b2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 003C
        gbc.setState(0x9e29, 0x104f, 0xea90, 0x4e18, 0xdb55, 0x211a, 0x0, 0x0);
        gbc.writeMem(0x9e29, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x104f);
        EXPECT(gbc.pc(), 0x9e2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e29), 0xd);
        // 0D 003D
        gbc.setState(0xb265, 0xb9e9, 0x6e40, 0x54e, 0xd2f9, 0xbade, 0x0, 0x0);
        gbc.writeMem(0xb265, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb9e9);
        EXPECT(gbc.pc(), 0xb266);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb265), 0xd);
        // 0D 003E
        gbc.setState(0x6387, 0xbf02, 0x9a80, 0xd8c1, 0xaab1, 0xb39, 0x0, 0x0);
        gbc.writeMem(0x6387, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xbf02);
        EXPECT(gbc.pc(), 0x6388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 003F
        gbc.setState(0xd85d, 0x5c67, 0x9e60, 0xd301, 0x31ad, 0xc7cc, 0x1, 0x0);
        gbc.writeMem(0xd85d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x5c67);
        EXPECT(gbc.pc(), 0xd85e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd85d), 0xd);
        // 0D 0040
        gbc.setState(0x2582, 0x3162, 0x370, 0x3c2c, 0x5a4e, 0x704f, 0x0, 0x1);
        gbc.writeMem(0x2582, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3162);
        EXPECT(gbc.pc(), 0x2583);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0041
        gbc.setState(0x9762, 0xea30, 0xe400, 0xa5bd, 0xe6c2, 0xea54, 0x1, 0x0);
        gbc.writeMem(0x9762, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xea30);
        EXPECT(gbc.pc(), 0x9763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9762), 0xd);
        // 0D 0042
        gbc.setState(0x3460, 0xf115, 0x19a0, 0x24d5, 0xd638, 0x299d, 0x0, 0x0);
        gbc.writeMem(0x3460, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf115);
        EXPECT(gbc.pc(), 0x3461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0043
        gbc.setState(0xac12, 0x24f5, 0x4890, 0xa835, 0xe519, 0x2703, 0x1, 0x1);
        gbc.writeMem(0xac12, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x24f5);
        EXPECT(gbc.pc(), 0xac13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac12), 0xd);
        // 0D 0044
        gbc.setState(0xedd1, 0x3b76, 0xe80, 0x980e, 0x3c1c, 0x92a, 0x0, 0x0);
        gbc.writeMem(0xedd1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3b76);
        EXPECT(gbc.pc(), 0xedd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedd1), 0xd);
        // 0D 0045
        gbc.setState(0x63c9, 0xb1f6, 0x6190, 0x9d8b, 0x3c07, 0x1a13, 0x0, 0x0);
        gbc.writeMem(0x63c9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb1f6);
        EXPECT(gbc.pc(), 0x63ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0046
        gbc.setState(0xa9e6, 0xcfe0, 0xf630, 0x9133, 0xb98a, 0xd9ae, 0x0, 0x0);
        gbc.writeMem(0xa9e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcfe0);
        EXPECT(gbc.pc(), 0xa9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa9e6), 0xd);
        // 0D 0047
        gbc.setState(0x14d6, 0x2e8e, 0xc460, 0xe8fc, 0xb9d2, 0x5396, 0x0, 0x0);
        gbc.writeMem(0x14d6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2e8e);
        EXPECT(gbc.pc(), 0x14d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0048
        gbc.setState(0xaaaa, 0x356b, 0x5f70, 0x9247, 0x8388, 0x7c56, 0x1, 0x0);
        gbc.writeMem(0xaaaa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x356b);
        EXPECT(gbc.pc(), 0xaaab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaaa), 0xd);
        // 0D 0049
        gbc.setState(0x9c9d, 0x3e94, 0x7560, 0xc691, 0xcc46, 0x63bc, 0x1, 0x1);
        gbc.writeMem(0x9c9d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x3e94);
        EXPECT(gbc.pc(), 0x9c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c9d), 0xd);
        // 0D 004A
        gbc.setState(0x22ba, 0xb8de, 0x4d30, 0x5fff, 0x22c3, 0x354e, 0x0, 0x1);
        gbc.writeMem(0x22ba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xb8de);
        EXPECT(gbc.pc(), 0x22bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 004B
        gbc.setState(0x5bf7, 0xdc01, 0xa6a0, 0x3d9f, 0x844e, 0xdb22, 0x0, 0x1);
        gbc.writeMem(0x5bf7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdc01);
        EXPECT(gbc.pc(), 0x5bf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 004C
        gbc.setState(0x29a, 0xc91f, 0x5220, 0xf0f7, 0x8943, 0x3436, 0x1, 0x0);
        gbc.writeMem(0x29a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc91f);
        EXPECT(gbc.pc(), 0x29b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 004D
        gbc.setState(0xdc7f, 0xb801, 0xade0, 0x4879, 0x4751, 0xf2a0, 0x0, 0x1);
        gbc.writeMem(0xdc7f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb801);
        EXPECT(gbc.pc(), 0xdc80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc7f), 0xd);
        // 0D 004E
        gbc.setState(0x38, 0x272d, 0xf840, 0x6bb4, 0x8eae, 0x5361, 0x1, 0x0);
        gbc.writeMem(0x38, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x272d);
        EXPECT(gbc.pc(), 0x39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 004F
        gbc.setState(0x85f5, 0x1a42, 0xd6c0, 0x39b6, 0xa3c8, 0x7c66, 0x1, 0x1);
        gbc.writeMem(0x85f5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1a42);
        EXPECT(gbc.pc(), 0x85f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85f5), 0xd);
        // 0D 0050
        gbc.setState(0x3e62, 0x9c7f, 0x5630, 0x7df6, 0x8836, 0x82d0, 0x0, 0x0);
        gbc.writeMem(0x3e62, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x9c7f);
        EXPECT(gbc.pc(), 0x3e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0051
        gbc.setState(0xe5f9, 0x979f, 0x62a0, 0x3e96, 0x3a7e, 0xcbbb, 0x0, 0x1);
        gbc.writeMem(0xe5f9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x979f);
        EXPECT(gbc.pc(), 0xe5fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5f9), 0xd);
        // 0D 0052
        gbc.setState(0xc921, 0x2a05, 0xde50, 0xc61f, 0x5b45, 0x74f7, 0x1, 0x1);
        gbc.writeMem(0xc921, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2a05);
        EXPECT(gbc.pc(), 0xc922);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc921), 0xd);
        // 0D 0053
        gbc.setState(0xe12e, 0x3e9c, 0x9570, 0x90dd, 0xc8aa, 0x6f58, 0x0, 0x1);
        gbc.writeMem(0xe12e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3e9c);
        EXPECT(gbc.pc(), 0xe12f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe12e), 0xd);
        // 0D 0054
        gbc.setState(0x435d, 0xd118, 0x37c0, 0x5f94, 0xc9c, 0x14a8, 0x1, 0x1);
        gbc.writeMem(0x435d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd118);
        EXPECT(gbc.pc(), 0x435e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0055
        gbc.setState(0xb7d8, 0xc98e, 0x7820, 0x864c, 0x925e, 0x45b3, 0x1, 0x0);
        gbc.writeMem(0xb7d8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xc98e);
        EXPECT(gbc.pc(), 0xb7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d8), 0xd);
        // 0D 0056
        gbc.setState(0x6d90, 0x2fb9, 0xdd00, 0x5a5d, 0xb0b2, 0x234a, 0x1, 0x0);
        gbc.writeMem(0x6d90, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2fb9);
        EXPECT(gbc.pc(), 0x6d91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0057
        gbc.setState(0xd2a0, 0x1c1e, 0x9900, 0xdd4f, 0x187b, 0xfab5, 0x1, 0x1);
        gbc.writeMem(0xd2a0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1c1e);
        EXPECT(gbc.pc(), 0xd2a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a0), 0xd);
        // 0D 0058
        gbc.setState(0xb06e, 0xb344, 0xc940, 0xc743, 0xaf1c, 0xc511, 0x0, 0x0);
        gbc.writeMem(0xb06e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xb344);
        EXPECT(gbc.pc(), 0xb06f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb06e), 0xd);
        // 0D 0059
        gbc.setState(0x441b, 0x6ff3, 0x1580, 0xa1ac, 0x8eab, 0x17d9, 0x0, 0x1);
        gbc.writeMem(0x441b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x6ff3);
        EXPECT(gbc.pc(), 0x441c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 005A
        gbc.setState(0x4434, 0x9633, 0x5fe0, 0x9063, 0x1b7b, 0xfbf1, 0x0, 0x0);
        gbc.writeMem(0x4434, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9633);
        EXPECT(gbc.pc(), 0x4435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 005B
        gbc.setState(0x411f, 0x893a, 0xa260, 0x9640, 0x9b0a, 0x4f2c, 0x0, 0x0);
        gbc.writeMem(0x411f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x893a);
        EXPECT(gbc.pc(), 0x4120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 005C
        gbc.setState(0x6f1d, 0x130f, 0x92b0, 0x1058, 0x3444, 0xd098, 0x1, 0x0);
        gbc.writeMem(0x6f1d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x130f);
        EXPECT(gbc.pc(), 0x6f1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 005D
        gbc.setState(0xac8b, 0xaff3, 0x21f0, 0xc0fd, 0x83bb, 0xf33c, 0x1, 0x1);
        gbc.writeMem(0xac8b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xaff3);
        EXPECT(gbc.pc(), 0xac8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac8b), 0xd);
        // 0D 005E
        gbc.setState(0x6b33, 0xcf88, 0x12b0, 0x71ee, 0x7b0f, 0x2f3b, 0x1, 0x0);
        gbc.writeMem(0x6b33, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xcf88);
        EXPECT(gbc.pc(), 0x6b34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 005F
        gbc.setState(0x7c64, 0xe2c, 0x70f0, 0xfa5a, 0x5c2e, 0x359f, 0x0, 0x0);
        gbc.writeMem(0x7c64, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe2c);
        EXPECT(gbc.pc(), 0x7c65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0060
        gbc.setState(0xeba7, 0xcbfe, 0x43c0, 0x36d, 0xba5b, 0xf224, 0x1, 0x0);
        gbc.writeMem(0xeba7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xcbfe);
        EXPECT(gbc.pc(), 0xeba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeba7), 0xd);
        // 0D 0061
        gbc.setState(0x174e, 0x87af, 0xa420, 0xa0d7, 0x1fa0, 0x7d7a, 0x0, 0x1);
        gbc.writeMem(0x174e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x87af);
        EXPECT(gbc.pc(), 0x174f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0062
        gbc.setState(0xcf0b, 0x6fcf, 0x6840, 0x12d0, 0x66b9, 0x926f, 0x0, 0x1);
        gbc.writeMem(0xcf0b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6fcf);
        EXPECT(gbc.pc(), 0xcf0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf0b), 0xd);
        // 0D 0063
        gbc.setState(0x6b8d, 0xf30b, 0xfb80, 0x6299, 0x7163, 0xa6d, 0x1, 0x1);
        gbc.writeMem(0x6b8d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xf30b);
        EXPECT(gbc.pc(), 0x6b8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0065
        gbc.setState(0x483a, 0xd919, 0x2d10, 0xc136, 0x5b42, 0xd658, 0x0, 0x0);
        gbc.writeMem(0x483a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xd919);
        EXPECT(gbc.pc(), 0x483b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0066
        gbc.setState(0x83b0, 0xa789, 0xed40, 0x397c, 0x57e2, 0x74d8, 0x1, 0x1);
        gbc.writeMem(0x83b0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xa789);
        EXPECT(gbc.pc(), 0x83b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b0), 0xd);
        // 0D 0067
        gbc.setState(0xfaf, 0x4a10, 0x31d0, 0xeb95, 0x98e4, 0xcd93, 0x1, 0x0);
        gbc.writeMem(0xfaf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x4a10);
        EXPECT(gbc.pc(), 0xfb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0068
        gbc.setState(0xe039, 0x49ae, 0xb8c0, 0x3f12, 0x6009, 0x470c, 0x1, 0x0);
        gbc.writeMem(0xe039, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x49ae);
        EXPECT(gbc.pc(), 0xe03a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe039), 0xd);
        // 0D 0069
        gbc.setState(0x3743, 0x150d, 0x8460, 0xc188, 0x45d4, 0xee2a, 0x0, 0x1);
        gbc.writeMem(0x3743, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x150d);
        EXPECT(gbc.pc(), 0x3744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 006A
        gbc.setState(0x1eda, 0x1c80, 0x6080, 0x7788, 0xbd2e, 0xa459, 0x1, 0x1);
        gbc.writeMem(0x1eda, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x1c80);
        EXPECT(gbc.pc(), 0x1edb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 006B
        gbc.setState(0x552d, 0x875, 0x6430, 0xcba8, 0x74f3, 0x5dc8, 0x1, 0x1);
        gbc.writeMem(0x552d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x875);
        EXPECT(gbc.pc(), 0x552e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 006C
        gbc.setState(0x6318, 0xd146, 0x2650, 0x8f32, 0x9a09, 0x5e2b, 0x0, 0x0);
        gbc.writeMem(0x6318, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd146);
        EXPECT(gbc.pc(), 0x6319);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 006D
        gbc.setState(0x3dfc, 0xc2b6, 0x5290, 0x355c, 0x48f0, 0x96a3, 0x0, 0x0);
        gbc.writeMem(0x3dfc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc2b6);
        EXPECT(gbc.pc(), 0x3dfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 006E
        gbc.setState(0x135f, 0xaa62, 0x7030, 0xfe81, 0xd75, 0x9300, 0x0, 0x1);
        gbc.writeMem(0x135f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xaa62);
        EXPECT(gbc.pc(), 0x1360);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 006F
        gbc.setState(0x6686, 0x69ac, 0x8ad0, 0x9000, 0x5fe, 0xa55d, 0x0, 0x1);
        gbc.writeMem(0x6686, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x69ac);
        EXPECT(gbc.pc(), 0x6687);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0070
        gbc.setState(0x33d6, 0xd045, 0xe2e0, 0x7ff2, 0x14af, 0x30ea, 0x1, 0x0);
        gbc.writeMem(0x33d6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd045);
        EXPECT(gbc.pc(), 0x33d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0071
        gbc.setState(0x318c, 0x35c4, 0x74e0, 0x6cf3, 0xf430, 0x45df, 0x0, 0x0);
        gbc.writeMem(0x318c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x35c4);
        EXPECT(gbc.pc(), 0x318d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0072
        gbc.setState(0xcee9, 0x1211, 0xce70, 0x90de, 0x1492, 0x2437, 0x1, 0x1);
        gbc.writeMem(0xcee9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x1211);
        EXPECT(gbc.pc(), 0xceea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcee9), 0xd);
        // 0D 0074
        gbc.setState(0xe80f, 0xeaf2, 0xc140, 0x1eac, 0x1c7f, 0x3806, 0x1, 0x0);
        gbc.writeMem(0xe80f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xeaf2);
        EXPECT(gbc.pc(), 0xe810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe80f), 0xd);
        // 0D 0075
        gbc.setState(0x92d4, 0xfd97, 0x4380, 0xcebb, 0xd011, 0x81f3, 0x0, 0x0);
        gbc.writeMem(0x92d4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfd97);
        EXPECT(gbc.pc(), 0x92d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d4), 0xd);
        // 0D 0076
        gbc.setState(0xd1cf, 0xfaca, 0x38f0, 0x1894, 0x4af3, 0xfe02, 0x0, 0x1);
        gbc.writeMem(0xd1cf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xfaca);
        EXPECT(gbc.pc(), 0xd1d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1cf), 0xd);
        // 0D 0077
        gbc.setState(0xa8a8, 0xb92c, 0x8500, 0x8ea2, 0xe7aa, 0x6c34, 0x1, 0x1);
        gbc.writeMem(0xa8a8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb92c);
        EXPECT(gbc.pc(), 0xa8a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0xd);
        // 0D 0078
        gbc.setState(0x8ac4, 0x4b20, 0xc6e0, 0x8e73, 0x2ccf, 0xd147, 0x0, 0x1);
        gbc.writeMem(0x8ac4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4b20);
        EXPECT(gbc.pc(), 0x8ac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac4), 0xd);
        // 0D 0079
        gbc.setState(0x71c4, 0xc449, 0x21d0, 0x6185, 0x3c7, 0xdbfb, 0x1, 0x0);
        gbc.writeMem(0x71c4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc449);
        EXPECT(gbc.pc(), 0x71c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 007A
        gbc.setState(0x3ce8, 0x65f6, 0xcec0, 0x606b, 0x6391, 0xc400, 0x0, 0x1);
        gbc.writeMem(0x3ce8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x65f6);
        EXPECT(gbc.pc(), 0x3ce9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 007B
        gbc.setState(0xa647, 0x805c, 0x9b0, 0x9d6e, 0xd868, 0x37e, 0x1, 0x0);
        gbc.writeMem(0xa647, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x805c);
        EXPECT(gbc.pc(), 0xa648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa647), 0xd);
        // 0D 007C
        gbc.setState(0x7901, 0xe295, 0x8fd0, 0x837, 0xc8a0, 0x32ca, 0x0, 0x0);
        gbc.writeMem(0x7901, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xe295);
        EXPECT(gbc.pc(), 0x7902);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 007D
        gbc.setState(0x7406, 0x9266, 0xf470, 0x83ed, 0x73ef, 0xcd0e, 0x0, 0x0);
        gbc.writeMem(0x7406, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9266);
        EXPECT(gbc.pc(), 0x7407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 007E
        gbc.setState(0xa4d8, 0x49dd, 0x600, 0x8e96, 0x311d, 0x8f04, 0x1, 0x1);
        gbc.writeMem(0xa4d8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x49dd);
        EXPECT(gbc.pc(), 0xa4d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4d8), 0xd);
        // 0D 007F
        gbc.setState(0x3f7c, 0xeb84, 0x99e0, 0xc9b9, 0xfdf, 0x156d, 0x1, 0x0);
        gbc.writeMem(0x3f7c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xeb84);
        EXPECT(gbc.pc(), 0x3f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0080
        gbc.setState(0xa36c, 0xe2af, 0x4230, 0xba94, 0x94b, 0xc5, 0x0, 0x1);
        gbc.writeMem(0xa36c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe2af);
        EXPECT(gbc.pc(), 0xa36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa36c), 0xd);
        // 0D 0081
        gbc.setState(0x1e82, 0x9fed, 0xbd50, 0xac6d, 0x6f5e, 0xcb89, 0x0, 0x0);
        gbc.writeMem(0x1e82, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x9fed);
        EXPECT(gbc.pc(), 0x1e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0082
        gbc.setState(0x7a03, 0xefca, 0x96c0, 0x822b, 0x55ac, 0x4121, 0x1, 0x0);
        gbc.writeMem(0x7a03, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xefca);
        EXPECT(gbc.pc(), 0x7a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0083
        gbc.setState(0xdfe6, 0x9eb0, 0xdb90, 0x227c, 0xc5d8, 0xd47c, 0x0, 0x0);
        gbc.writeMem(0xdfe6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x9eb0);
        EXPECT(gbc.pc(), 0xdfe7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfe6), 0xd);
        // 0D 0085
        gbc.setState(0x10c2, 0xfcae, 0x8060, 0xd7f, 0x3f36, 0xbcda, 0x0, 0x0);
        gbc.writeMem(0x10c2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xfcae);
        EXPECT(gbc.pc(), 0x10c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0086
        gbc.setState(0x288, 0x8db2, 0x1680, 0xe127, 0x752, 0x2044, 0x1, 0x0);
        gbc.writeMem(0x288, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8db2);
        EXPECT(gbc.pc(), 0x289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0088
        gbc.setState(0xa76, 0xa0d3, 0x98a0, 0xb02, 0x4d3f, 0x4f1f, 0x1, 0x0);
        gbc.writeMem(0xa76, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa0d3);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0089
        gbc.setState(0x5078, 0xab2, 0xace0, 0xa4c2, 0x2ccd, 0x467, 0x0, 0x1);
        gbc.writeMem(0x5078, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xab2);
        EXPECT(gbc.pc(), 0x5079);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 008A
        gbc.setState(0x62c5, 0xbef7, 0x6dd0, 0xa0b9, 0x716, 0x3dd, 0x1, 0x1);
        gbc.writeMem(0x62c5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xbef7);
        EXPECT(gbc.pc(), 0x62c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 008B
        gbc.setState(0xc82, 0xf216, 0x67c0, 0x83f5, 0xded6, 0x54a, 0x1, 0x1);
        gbc.writeMem(0xc82, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf216);
        EXPECT(gbc.pc(), 0xc83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 008C
        gbc.setState(0x39d3, 0x73a6, 0xda80, 0x3930, 0x95d5, 0xe324, 0x0, 0x0);
        gbc.writeMem(0x39d3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x73a6);
        EXPECT(gbc.pc(), 0x39d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 008D
        gbc.setState(0x6c86, 0xeee6, 0xef40, 0xe1da, 0x3097, 0xd7ad, 0x1, 0x0);
        gbc.writeMem(0x6c86, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xeee6);
        EXPECT(gbc.pc(), 0x6c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 008E
        gbc.setState(0x7667, 0x919, 0x7740, 0x3a0a, 0xe403, 0x4c2, 0x1, 0x0);
        gbc.writeMem(0x7667, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x919);
        EXPECT(gbc.pc(), 0x7668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 008F
        gbc.setState(0x48b4, 0x3fc0, 0xe320, 0x7bd9, 0x38ff, 0xcadf, 0x0, 0x1);
        gbc.writeMem(0x48b4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3fc0);
        EXPECT(gbc.pc(), 0x48b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0090
        gbc.setState(0x505, 0x7ac2, 0xd930, 0xdb65, 0x6448, 0xd7ec, 0x0, 0x0);
        gbc.writeMem(0x505, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x7ac2);
        EXPECT(gbc.pc(), 0x506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0091
        gbc.setState(0xb1e2, 0xa59a, 0xb5e0, 0x6da4, 0x7b19, 0xbbe5, 0x1, 0x0);
        gbc.writeMem(0xb1e2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa59a);
        EXPECT(gbc.pc(), 0xb1e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1e2), 0xd);
        // 0D 0092
        gbc.setState(0x8e1, 0xf748, 0xe220, 0x72e1, 0x278, 0x8752, 0x0, 0x1);
        gbc.writeMem(0x8e1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf748);
        EXPECT(gbc.pc(), 0x8e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0093
        gbc.setState(0x92a, 0x74d3, 0xc950, 0x145a, 0xa257, 0xe70, 0x1, 0x1);
        gbc.writeMem(0x92a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x74d3);
        EXPECT(gbc.pc(), 0x92b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0094
        gbc.setState(0x86b1, 0xc0ba, 0x7b00, 0x41b1, 0x7b4f, 0xea82, 0x1, 0x0);
        gbc.writeMem(0x86b1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc0ba);
        EXPECT(gbc.pc(), 0x86b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86b1), 0xd);
        // 0D 0095
        gbc.setState(0x93e4, 0xafc2, 0x49a0, 0xd69b, 0xf0ee, 0xc374, 0x0, 0x1);
        gbc.writeMem(0x93e4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xafc2);
        EXPECT(gbc.pc(), 0x93e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e4), 0xd);
        // 0D 0096
        gbc.setState(0x20e5, 0xe3a5, 0x620, 0x8945, 0x1742, 0x6a62, 0x0, 0x0);
        gbc.writeMem(0x20e5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe3a5);
        EXPECT(gbc.pc(), 0x20e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0097
        gbc.setState(0x784b, 0x2f3c, 0x83d0, 0x2abe, 0xeb89, 0x4dc8, 0x0, 0x0);
        gbc.writeMem(0x784b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2f3c);
        EXPECT(gbc.pc(), 0x784c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0098
        gbc.setState(0x7969, 0x4a3d, 0xaae0, 0x63e6, 0xbf84, 0x6a7a, 0x1, 0x0);
        gbc.writeMem(0x7969, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4a3d);
        EXPECT(gbc.pc(), 0x796a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0099
        gbc.setState(0x371b, 0x1a16, 0x3ea0, 0xe9c9, 0x909e, 0x7342, 0x1, 0x1);
        gbc.writeMem(0x371b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1a16);
        EXPECT(gbc.pc(), 0x371c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 009A
        gbc.setState(0xa25, 0xf383, 0xed70, 0xd325, 0x53f9, 0x3de0, 0x0, 0x0);
        gbc.writeMem(0xa25, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf383);
        EXPECT(gbc.pc(), 0xa26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 009B
        gbc.setState(0x3f89, 0x6148, 0xb2e0, 0x540a, 0x4256, 0x86d4, 0x1, 0x0);
        gbc.writeMem(0x3f89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6148);
        EXPECT(gbc.pc(), 0x3f8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 009D
        gbc.setState(0xafc0, 0xaa89, 0xbc50, 0x49fd, 0x1018, 0x226d, 0x1, 0x0);
        gbc.writeMem(0xafc0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xaa89);
        EXPECT(gbc.pc(), 0xafc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafc0), 0xd);
        // 0D 009E
        gbc.setState(0x68ce, 0xa316, 0xaf00, 0x4efc, 0x1930, 0xb835, 0x1, 0x1);
        gbc.writeMem(0x68ce, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa316);
        EXPECT(gbc.pc(), 0x68cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 009F
        gbc.setState(0x663b, 0xe4f5, 0xe2f0, 0x78d2, 0x793b, 0x1cf3, 0x1, 0x0);
        gbc.writeMem(0x663b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe4f5);
        EXPECT(gbc.pc(), 0x663c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00A0
        gbc.setState(0x2038, 0x7be5, 0xb650, 0x78d6, 0x6412, 0xb962, 0x1, 0x1);
        gbc.writeMem(0x2038, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7be5);
        EXPECT(gbc.pc(), 0x2039);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00A1
        gbc.setState(0x3670, 0xcb06, 0x4280, 0x2123, 0x92d5, 0x5b16, 0x1, 0x0);
        gbc.writeMem(0x3670, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xcb06);
        EXPECT(gbc.pc(), 0x3671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00A2
        gbc.setState(0x4e79, 0x97b7, 0x1db0, 0x35ab, 0xf6ba, 0x52fa, 0x1, 0x0);
        gbc.writeMem(0x4e79, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x97b7);
        EXPECT(gbc.pc(), 0x4e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00A3
        gbc.setState(0xc8eb, 0xd9e1, 0x9fc0, 0x52b6, 0x287e, 0x93df, 0x0, 0x1);
        gbc.writeMem(0xc8eb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd9e1);
        EXPECT(gbc.pc(), 0xc8ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8eb), 0xd);
        // 0D 00A5
        gbc.setState(0x2b37, 0x7ca, 0xd30, 0xcf27, 0xdc38, 0xb012, 0x0, 0x0);
        gbc.writeMem(0x2b37, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x7ca);
        EXPECT(gbc.pc(), 0x2b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00A6
        gbc.setState(0xc67b, 0xfc45, 0xb920, 0x971d, 0x425f, 0x7f0a, 0x0, 0x1);
        gbc.writeMem(0xc67b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xfc45);
        EXPECT(gbc.pc(), 0xc67c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67b), 0xd);
        // 0D 00A7
        gbc.setState(0xb739, 0xe6b, 0x9f80, 0xaa25, 0xfe9c, 0x524f, 0x1, 0x0);
        gbc.writeMem(0xb739, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xe6b);
        EXPECT(gbc.pc(), 0xb73a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb739), 0xd);
        // 0D 00A8
        gbc.setState(0x19a, 0x6ec, 0x590, 0xf867, 0x2fcf, 0x45c, 0x0, 0x1);
        gbc.writeMem(0x19a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6ec);
        EXPECT(gbc.pc(), 0x19b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00A9
        gbc.setState(0xebdb, 0x86f6, 0xc310, 0x24f6, 0x8a81, 0x2ed0, 0x0, 0x1);
        gbc.writeMem(0xebdb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x86f6);
        EXPECT(gbc.pc(), 0xebdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebdb), 0xd);
        // 0D 00AA
        gbc.setState(0x76e5, 0x83e0, 0x8330, 0x8ef3, 0x942e, 0x6652, 0x0, 0x1);
        gbc.writeMem(0x76e5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x83e0);
        EXPECT(gbc.pc(), 0x76e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00AB
        gbc.setState(0x4db, 0xc6b4, 0xae10, 0x8962, 0x2446, 0x7682, 0x1, 0x1);
        gbc.writeMem(0x4db, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xc6b4);
        EXPECT(gbc.pc(), 0x4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00AC
        gbc.setState(0x7004, 0x3791, 0x2910, 0xa5e0, 0x2bcd, 0x28b9, 0x1, 0x1);
        gbc.writeMem(0x7004, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x3791);
        EXPECT(gbc.pc(), 0x7005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 00AD
        gbc.setState(0x69d2, 0x6efb, 0x2f0, 0x9a69, 0xe7e5, 0x2205, 0x1, 0x1);
        gbc.writeMem(0x69d2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x6efb);
        EXPECT(gbc.pc(), 0x69d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00AE
        gbc.setState(0xb8cf, 0x97f5, 0xb010, 0x1ef8, 0xc5b0, 0x17dd, 0x1, 0x0);
        gbc.writeMem(0xb8cf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x97f5);
        EXPECT(gbc.pc(), 0xb8d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8cf), 0xd);
        // 0D 00AF
        gbc.setState(0x5934, 0xd0e1, 0x4c70, 0x5b3a, 0xea5f, 0x85b2, 0x1, 0x0);
        gbc.writeMem(0x5934, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd0e1);
        EXPECT(gbc.pc(), 0x5935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00B0
        gbc.setState(0x22be, 0x578b, 0x5680, 0xeec6, 0x5ed0, 0x479d, 0x1, 0x0);
        gbc.writeMem(0x22be, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x578b);
        EXPECT(gbc.pc(), 0x22bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00B1
        gbc.setState(0xd523, 0x5158, 0x3c10, 0x3c07, 0x4d2a, 0xa055, 0x0, 0x1);
        gbc.writeMem(0xd523, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5158);
        EXPECT(gbc.pc(), 0xd524);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd523), 0xd);
        // 0D 00B2
        gbc.setState(0xc7aa, 0x5077, 0x2c0, 0x3ea3, 0xf263, 0x62a3, 0x0, 0x0);
        gbc.writeMem(0xc7aa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5077);
        EXPECT(gbc.pc(), 0xc7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7aa), 0xd);
        // 0D 00B3
        gbc.setState(0xcd18, 0xdffc, 0x2fb0, 0xb105, 0xce75, 0xc977, 0x0, 0x1);
        gbc.writeMem(0xcd18, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xdffc);
        EXPECT(gbc.pc(), 0xcd19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd18), 0xd);
        // 0D 00B5
        gbc.setState(0x2180, 0xa4fb, 0x6300, 0x534e, 0x4bc2, 0xab2b, 0x1, 0x1);
        gbc.writeMem(0x2180, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xa4fb);
        EXPECT(gbc.pc(), 0x2181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00B6
        gbc.setState(0x86a6, 0x8ea4, 0x4e50, 0xadad, 0x79e8, 0xa3de, 0x1, 0x0);
        gbc.writeMem(0x86a6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x8ea4);
        EXPECT(gbc.pc(), 0x86a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a6), 0xd);
        // 0D 00B7
        gbc.setState(0x777c, 0x3b55, 0x4a60, 0x9ce0, 0x5214, 0xc613, 0x1, 0x1);
        gbc.writeMem(0x777c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3b55);
        EXPECT(gbc.pc(), 0x777d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 00B8
        gbc.setState(0xea5f, 0x503d, 0x20, 0x16ee, 0x106d, 0xd7f4, 0x0, 0x0);
        gbc.writeMem(0xea5f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x503d);
        EXPECT(gbc.pc(), 0xea60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea5f), 0xd);
        // 0D 00B9
        gbc.setState(0x5c65, 0x744b, 0x2920, 0xfa4e, 0x14a8, 0xa58, 0x1, 0x1);
        gbc.writeMem(0x5c65, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x744b);
        EXPECT(gbc.pc(), 0x5c66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00BA
        gbc.setState(0x8805, 0x9abc, 0x9a0, 0x8624, 0x35a5, 0x587a, 0x1, 0x0);
        gbc.writeMem(0x8805, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9abc);
        EXPECT(gbc.pc(), 0x8806);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8805), 0xd);
        // 0D 00BB
        gbc.setState(0xdf41, 0x795d, 0xa5b0, 0x56fe, 0x9c80, 0xca0c, 0x0, 0x0);
        gbc.writeMem(0xdf41, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x795d);
        EXPECT(gbc.pc(), 0xdf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf41), 0xd);
        // 0D 00BC
        gbc.setState(0x1d90, 0xfba6, 0xea20, 0x510c, 0xf152, 0xc285, 0x0, 0x1);
        gbc.writeMem(0x1d90, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xfba6);
        EXPECT(gbc.pc(), 0x1d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00BD
        gbc.setState(0xb39d, 0x1de0, 0x9c50, 0xcac, 0x14a9, 0x95ea, 0x0, 0x0);
        gbc.writeMem(0xb39d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1de0);
        EXPECT(gbc.pc(), 0xb39e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb39d), 0xd);
        // 0D 00BE
        gbc.setState(0x7ae4, 0x9c01, 0xcd80, 0xea07, 0x7521, 0xac85, 0x1, 0x1);
        gbc.writeMem(0x7ae4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9c01);
        EXPECT(gbc.pc(), 0x7ae5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00BF
        gbc.setState(0xe78f, 0x45e, 0x120, 0x9fd2, 0x2c41, 0x2c75, 0x1, 0x0);
        gbc.writeMem(0xe78f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x45e);
        EXPECT(gbc.pc(), 0xe790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78f), 0xd);
        // 0D 00C1
        gbc.setState(0xeae0, 0xbed7, 0xee50, 0xfc92, 0x91c2, 0x3e46, 0x1, 0x0);
        gbc.writeMem(0xeae0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbed7);
        EXPECT(gbc.pc(), 0xeae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeae0), 0xd);
        // 0D 00C2
        gbc.setState(0xcbd3, 0x55e5, 0x4de0, 0xa1dc, 0xb0, 0x150d, 0x1, 0x1);
        gbc.writeMem(0xcbd3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x55e5);
        EXPECT(gbc.pc(), 0xcbd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd3), 0xd);
        // 0D 00C3
        gbc.setState(0xaa46, 0x87a4, 0x9930, 0xa0af, 0x4319, 0xe5ba, 0x0, 0x1);
        gbc.writeMem(0xaa46, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x87a4);
        EXPECT(gbc.pc(), 0xaa47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa46), 0xd);
        // 0D 00C4
        gbc.setState(0xcc7d, 0x1f50, 0x5060, 0xb24e, 0xcaac, 0x5e8d, 0x0, 0x1);
        gbc.writeMem(0xcc7d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1f50);
        EXPECT(gbc.pc(), 0xcc7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc7d), 0xd);
        // 0D 00C5
        gbc.setState(0x5c25, 0xa736, 0x8490, 0xd488, 0x69e1, 0x9bd5, 0x0, 0x1);
        gbc.writeMem(0x5c25, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xa736);
        EXPECT(gbc.pc(), 0x5c26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00C6
        gbc.setState(0x4cb9, 0x9f62, 0x3ee0, 0x930c, 0x9b6c, 0xa18, 0x1, 0x1);
        gbc.writeMem(0x4cb9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9f62);
        EXPECT(gbc.pc(), 0x4cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00C7
        gbc.setState(0x8bce, 0xc36, 0xc5c0, 0xc04a, 0xe58, 0x4c06, 0x1, 0x1);
        gbc.writeMem(0x8bce, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc36);
        EXPECT(gbc.pc(), 0x8bcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bce), 0xd);
        // 0D 00C8
        gbc.setState(0xa7d4, 0x5f96, 0xe770, 0xfa3c, 0x455f, 0x7170, 0x0, 0x1);
        gbc.writeMem(0xa7d4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5f96);
        EXPECT(gbc.pc(), 0xa7d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d4), 0xd);
        // 0D 00C9
        gbc.setState(0x240d, 0x1141, 0x99d0, 0xfa28, 0x7b54, 0x3dff, 0x1, 0x1);
        gbc.writeMem(0x240d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x1141);
        EXPECT(gbc.pc(), 0x240e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00CA
        gbc.setState(0x9bde, 0x9cec, 0x79f0, 0x6dad, 0x41af, 0x773f, 0x0, 0x0);
        gbc.writeMem(0x9bde, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x9cec);
        EXPECT(gbc.pc(), 0x9bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bde), 0xd);
        // 0D 00CB
        gbc.setState(0xd95d, 0x812d, 0x6250, 0xb61f, 0xb192, 0x3bf5, 0x1, 0x0);
        gbc.writeMem(0xd95d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x812d);
        EXPECT(gbc.pc(), 0xd95e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd95d), 0xd);
        // 0D 00CC
        gbc.setState(0x5bc7, 0x18af, 0x9c30, 0x53b0, 0x3b, 0xb03d, 0x1, 0x0);
        gbc.writeMem(0x5bc7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x18af);
        EXPECT(gbc.pc(), 0x5bc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 00CD
        gbc.setState(0xb4cf, 0x38ea, 0xaff0, 0x4c56, 0x60f0, 0x57f8, 0x0, 0x1);
        gbc.writeMem(0xb4cf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x38ea);
        EXPECT(gbc.pc(), 0xb4d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4cf), 0xd);
        // 0D 00CE
        gbc.setState(0x1586, 0xd079, 0xa8c0, 0x6dca, 0x5e67, 0x531a, 0x1, 0x1);
        gbc.writeMem(0x1586, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd079);
        EXPECT(gbc.pc(), 0x1587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00CF
        gbc.setState(0xd902, 0x4288, 0xa160, 0x866a, 0xa06d, 0x7f82, 0x1, 0x0);
        gbc.writeMem(0xd902, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x4288);
        EXPECT(gbc.pc(), 0xd903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd902), 0xd);
        // 0D 00D0
        gbc.setState(0xb889, 0x4e34, 0x7fa0, 0x734e, 0x29d5, 0x762, 0x1, 0x1);
        gbc.writeMem(0xb889, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x4e34);
        EXPECT(gbc.pc(), 0xb88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb889), 0xd);
        // 0D 00D1
        gbc.setState(0x8ff4, 0xa3f7, 0x57f0, 0x5a4d, 0x9e34, 0xab21, 0x1, 0x0);
        gbc.writeMem(0x8ff4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa3f7);
        EXPECT(gbc.pc(), 0x8ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ff4), 0xd);
        // 0D 00D2
        gbc.setState(0xb66f, 0x1a9, 0xe7d0, 0x7c38, 0x885e, 0x5506, 0x1, 0x1);
        gbc.writeMem(0xb66f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x1a9);
        EXPECT(gbc.pc(), 0xb670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb66f), 0xd);
        // 0D 00D3
        gbc.setState(0xbcba, 0x909, 0x1e90, 0x8a93, 0x5c6e, 0xee16, 0x0, 0x0);
        gbc.writeMem(0xbcba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x909);
        EXPECT(gbc.pc(), 0xbcbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcba), 0xd);
        // 0D 00D4
        gbc.setState(0x448e, 0x971, 0x50e0, 0x4871, 0x1a36, 0x4a25, 0x1, 0x1);
        gbc.writeMem(0x448e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x971);
        EXPECT(gbc.pc(), 0x448f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00D5
        gbc.setState(0x54, 0x70c1, 0x4500, 0x733f, 0x55ff, 0x4d8e, 0x0, 0x1);
        gbc.writeMem(0x54, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x70c1);
        EXPECT(gbc.pc(), 0x55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00D6
        gbc.setState(0xe6d, 0xd155, 0xec40, 0x5536, 0xb20f, 0xc662, 0x0, 0x1);
        gbc.writeMem(0xe6d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd155);
        EXPECT(gbc.pc(), 0xe6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00D7
        gbc.setState(0x84ae, 0x337c, 0x4420, 0x1bfd, 0x8ce4, 0x2e62, 0x0, 0x0);
        gbc.writeMem(0x84ae, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x337c);
        EXPECT(gbc.pc(), 0x84af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ae), 0xd);
        // 0D 00D8
        gbc.setState(0x462f, 0x452c, 0xf340, 0xe3d, 0x2b39, 0x3d1f, 0x1, 0x1);
        gbc.writeMem(0x462f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x452c);
        EXPECT(gbc.pc(), 0x4630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00D9
        gbc.setState(0xcc31, 0xabc5, 0x6c70, 0xaaa1, 0x36c9, 0x73c3, 0x0, 0x0);
        gbc.writeMem(0xcc31, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xabc5);
        EXPECT(gbc.pc(), 0xcc32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc31), 0xd);
        // 0D 00DA
        gbc.setState(0x490a, 0x6b51, 0xcce0, 0xfdd2, 0xd2ce, 0x2e1, 0x1, 0x0);
        gbc.writeMem(0x490a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6b51);
        EXPECT(gbc.pc(), 0x490b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00DB
        gbc.setState(0xc0d0, 0x5ff3, 0x41f0, 0xcd0b, 0x952, 0x5629, 0x1, 0x1);
        gbc.writeMem(0xc0d0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5ff3);
        EXPECT(gbc.pc(), 0xc0d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0d0), 0xd);
        // 0D 00DC
        gbc.setState(0xdc2f, 0x772e, 0x2670, 0x63e, 0x4794, 0xb8fe, 0x0, 0x0);
        gbc.writeMem(0xdc2f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x772e);
        EXPECT(gbc.pc(), 0xdc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2f), 0xd);
        // 0D 00DD
        gbc.setState(0x3dcb, 0xc962, 0xc180, 0xd951, 0x76a, 0xc8c4, 0x0, 0x0);
        gbc.writeMem(0x3dcb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc962);
        EXPECT(gbc.pc(), 0x3dcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00DE
        gbc.setState(0x9024, 0x174c, 0x9a10, 0x68e2, 0x97f6, 0xdcef, 0x0, 0x1);
        gbc.writeMem(0x9024, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x174c);
        EXPECT(gbc.pc(), 0x9025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9024), 0xd);
        // 0D 00DF
        gbc.setState(0x702d, 0xc451, 0xec90, 0xdc50, 0x6aaf, 0x8a08, 0x0, 0x1);
        gbc.writeMem(0x702d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xc451);
        EXPECT(gbc.pc(), 0x702e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 00E0
        gbc.setState(0xba30, 0x897f, 0x4da0, 0x54d0, 0xc4af, 0xa9a8, 0x0, 0x0);
        gbc.writeMem(0xba30, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x897f);
        EXPECT(gbc.pc(), 0xba31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba30), 0xd);
        // 0D 00E1
        gbc.setState(0x483e, 0x403, 0xe290, 0xde9d, 0x9c4, 0x1f8f, 0x1, 0x1);
        gbc.writeMem(0x483e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x403);
        EXPECT(gbc.pc(), 0x483f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00E2
        gbc.setState(0xa7b2, 0x75b5, 0x8ce0, 0x1e00, 0x5808, 0x8355, 0x0, 0x1);
        gbc.writeMem(0xa7b2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x75b5);
        EXPECT(gbc.pc(), 0xa7b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7b2), 0xd);
        // 0D 00E3
        gbc.setState(0x4714, 0x711e, 0x2720, 0xdfae, 0xd159, 0x8dbd, 0x1, 0x1);
        gbc.writeMem(0x4714, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x711e);
        EXPECT(gbc.pc(), 0x4715);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00E4
        gbc.setState(0xc67b, 0x92c7, 0xea20, 0xc0fe, 0xceb7, 0xa695, 0x0, 0x1);
        gbc.writeMem(0xc67b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x92c7);
        EXPECT(gbc.pc(), 0xc67c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc67b), 0xd);
        // 0D 00E5
        gbc.setState(0x689e, 0x4299, 0x54c0, 0x8c03, 0xfeb1, 0x23e4, 0x0, 0x1);
        gbc.writeMem(0x689e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x4299);
        EXPECT(gbc.pc(), 0x689f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00E6
        gbc.setState(0xdd6a, 0xeea3, 0x40a0, 0xf1f7, 0xecf3, 0x778b, 0x0, 0x0);
        gbc.writeMem(0xdd6a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xeea3);
        EXPECT(gbc.pc(), 0xdd6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6a), 0xd);
        // 0D 00E7
        gbc.setState(0xee11, 0x55cd, 0x8990, 0x12f5, 0xb05b, 0xd23c, 0x0, 0x0);
        gbc.writeMem(0xee11, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x55cd);
        EXPECT(gbc.pc(), 0xee12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee11), 0xd);
        // 0D 00E8
        gbc.setState(0xc1c7, 0x307c, 0x4000, 0x6dbb, 0xad89, 0x640f, 0x0, 0x0);
        gbc.writeMem(0xc1c7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x307c);
        EXPECT(gbc.pc(), 0xc1c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c7), 0xd);
        // 0D 00E9
        gbc.setState(0x66e9, 0x4854, 0xd450, 0x8ebe, 0x6a26, 0xa7fe, 0x1, 0x1);
        gbc.writeMem(0x66e9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x4854);
        EXPECT(gbc.pc(), 0x66ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00EA
        gbc.setState(0x2298, 0xfb2a, 0x7d10, 0x84fb, 0x6623, 0x8c58, 0x0, 0x0);
        gbc.writeMem(0x2298, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xfb2a);
        EXPECT(gbc.pc(), 0x2299);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00EB
        gbc.setState(0xd492, 0x37d4, 0x4d90, 0x8a29, 0x77dd, 0x62b1, 0x0, 0x0);
        gbc.writeMem(0xd492, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x37d4);
        EXPECT(gbc.pc(), 0xd493);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd492), 0xd);
        // 0D 00ED
        gbc.setState(0xb0b7, 0xd437, 0x5950, 0x1500, 0x5ddf, 0x8c6a, 0x0, 0x1);
        gbc.writeMem(0xb0b7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd437);
        EXPECT(gbc.pc(), 0xb0b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0b7), 0xd);
        // 0D 00EE
        gbc.setState(0xd7e3, 0xddc7, 0x3930, 0x5fcb, 0xf09a, 0x1cee, 0x0, 0x0);
        gbc.writeMem(0xd7e3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xddc7);
        EXPECT(gbc.pc(), 0xd7e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7e3), 0xd);
        // 0D 00EF
        gbc.setState(0xaf5, 0x162b, 0xc9e0, 0xceae, 0xab73, 0x944f, 0x1, 0x1);
        gbc.writeMem(0xaf5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x162b);
        EXPECT(gbc.pc(), 0xaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00F0
        gbc.setState(0xbd2b, 0x12e5, 0x8f40, 0xd31e, 0x9d08, 0xe5ba, 0x0, 0x1);
        gbc.writeMem(0xbd2b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x12e5);
        EXPECT(gbc.pc(), 0xbd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd2b), 0xd);
        // 0D 00F1
        gbc.setState(0xab9d, 0x115e, 0xcc10, 0x765c, 0xbbe2, 0x19e0, 0x0, 0x1);
        gbc.writeMem(0xab9d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x115e);
        EXPECT(gbc.pc(), 0xab9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab9d), 0xd);
        // 0D 00F2
        gbc.setState(0xd012, 0x67f3, 0x8a70, 0x5faf, 0xef6e, 0x8d14, 0x0, 0x1);
        gbc.writeMem(0xd012, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x67f3);
        EXPECT(gbc.pc(), 0xd013);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd012), 0xd);
        // 0D 00F3
        gbc.setState(0xed32, 0x872d, 0xaf0, 0xf793, 0xcffc, 0x370f, 0x1, 0x1);
        gbc.writeMem(0xed32, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x872d);
        EXPECT(gbc.pc(), 0xed33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed32), 0xd);
        // 0D 00F4
        gbc.setState(0x9b39, 0x1c67, 0xfee0, 0x93e2, 0x1855, 0x6def, 0x1, 0x0);
        gbc.writeMem(0x9b39, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1c67);
        EXPECT(gbc.pc(), 0x9b3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b39), 0xd);
        // 0D 00F5
        gbc.setState(0x32ba, 0x58f8, 0xa580, 0xf1c, 0x73ec, 0x3335, 0x1, 0x0);
        gbc.writeMem(0x32ba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x58f8);
        EXPECT(gbc.pc(), 0x32bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00F6
        gbc.setState(0x4112, 0xfc, 0xf540, 0x8ab6, 0x6972, 0xe2f6, 0x1, 0x0);
        gbc.writeMem(0x4112, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfc);
        EXPECT(gbc.pc(), 0x4113);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00F7
        gbc.setState(0xdc1f, 0x75f2, 0x4560, 0xb43, 0xa215, 0x85d3, 0x1, 0x1);
        gbc.writeMem(0xdc1f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x75f2);
        EXPECT(gbc.pc(), 0xdc20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1f), 0xd);
        // 0D 00F8
        gbc.setState(0xd89f, 0x1c7, 0xc9b0, 0xc243, 0x90d, 0xff95, 0x1, 0x0);
        gbc.writeMem(0xd89f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1c7);
        EXPECT(gbc.pc(), 0xd8a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd89f), 0xd);
        // 0D 00F9
        gbc.setState(0x2a98, 0x8caa, 0x51d0, 0x5b73, 0xb048, 0x2d77, 0x0, 0x0);
        gbc.writeMem(0x2a98, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x8caa);
        EXPECT(gbc.pc(), 0x2a99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00FA
        gbc.setState(0x3630, 0x7b13, 0xdeb0, 0xdbb9, 0xba1d, 0x5e0b, 0x0, 0x0);
        gbc.writeMem(0x3630, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7b13);
        EXPECT(gbc.pc(), 0x3631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 00FB
        gbc.setState(0x3ae9, 0x3899, 0xe360, 0x72b4, 0x4458, 0x925, 0x1, 0x0);
        gbc.writeMem(0x3ae9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3899);
        EXPECT(gbc.pc(), 0x3aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 00FC
        gbc.setState(0xeb59, 0x8d0a, 0x400, 0xa193, 0xf3aa, 0x778b, 0x0, 0x0);
        gbc.writeMem(0xeb59, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8d0a);
        EXPECT(gbc.pc(), 0xeb5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb59), 0xd);
        // 0D 00FD
        gbc.setState(0x4a20, 0x9306, 0xbac0, 0x6b50, 0x38eb, 0xcf19, 0x0, 0x0);
        gbc.writeMem(0x4a20, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9306);
        EXPECT(gbc.pc(), 0x4a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 00FE
        gbc.setState(0xda55, 0xa2fb, 0x73b0, 0x8a0c, 0x37fb, 0x2d35, 0x1, 0x1);
        gbc.writeMem(0xda55, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa2fb);
        EXPECT(gbc.pc(), 0xda56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda55), 0xd);
        // 0D 00FF
        gbc.setState(0x7f1c, 0x75b4, 0xedc0, 0x584, 0x57a1, 0x888d, 0x1, 0x0);
        gbc.writeMem(0x7f1c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x75b4);
        EXPECT(gbc.pc(), 0x7f1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0100
        gbc.setState(0x2805, 0xf8af, 0x7e10, 0x3234, 0x40bb, 0x4c7c, 0x0, 0x0);
        gbc.writeMem(0x2805, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf8af);
        EXPECT(gbc.pc(), 0x2806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0101
        gbc.setState(0x5c88, 0x9b15, 0x4aa0, 0x24cc, 0x43b8, 0xf1f6, 0x0, 0x0);
        gbc.writeMem(0x5c88, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9b15);
        EXPECT(gbc.pc(), 0x5c89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0102
        gbc.setState(0xa66b, 0xdaab, 0xf240, 0x6291, 0x86ca, 0x2101, 0x1, 0x1);
        gbc.writeMem(0xa66b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xdaab);
        EXPECT(gbc.pc(), 0xa66c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66b), 0xd);
        // 0D 0103
        gbc.setState(0xedf, 0xdf67, 0x9ac0, 0x1d18, 0xf406, 0x1d7, 0x1, 0x0);
        gbc.writeMem(0xedf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xdf67);
        EXPECT(gbc.pc(), 0xee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0106
        gbc.setState(0x20fa, 0x4a86, 0xa80, 0x74b5, 0x906b, 0x5d9c, 0x0, 0x1);
        gbc.writeMem(0x20fa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x4a86);
        EXPECT(gbc.pc(), 0x20fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0107
        gbc.setState(0xcb5a, 0x7ff1, 0x3dc0, 0x733f, 0x9380, 0x9aa9, 0x1, 0x0);
        gbc.writeMem(0xcb5a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7ff1);
        EXPECT(gbc.pc(), 0xcb5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb5a), 0xd);
        // 0D 0108
        gbc.setState(0xc852, 0x8497, 0x4970, 0xa70c, 0xbd4, 0x83e4, 0x1, 0x1);
        gbc.writeMem(0xc852, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8497);
        EXPECT(gbc.pc(), 0xc853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc852), 0xd);
        // 0D 0109
        gbc.setState(0x2666, 0x7b2e, 0x1340, 0xccd0, 0x1153, 0x3fbe, 0x0, 0x0);
        gbc.writeMem(0x2666, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7b2e);
        EXPECT(gbc.pc(), 0x2667);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 010A
        gbc.setState(0xc3d7, 0x991d, 0x6d20, 0x77c, 0xa303, 0x39d3, 0x0, 0x0);
        gbc.writeMem(0xc3d7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x991d);
        EXPECT(gbc.pc(), 0xc3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d7), 0xd);
        // 0D 010B
        gbc.setState(0x6d8a, 0x5fa8, 0x9e40, 0x4663, 0x8781, 0x592d, 0x1, 0x1);
        gbc.writeMem(0x6d8a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x5fa8);
        EXPECT(gbc.pc(), 0x6d8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 010D
        gbc.setState(0xef1e, 0xf13e, 0x4a0, 0xb115, 0xbfb, 0xd8e9, 0x0, 0x0);
        gbc.writeMem(0xef1e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xf13e);
        EXPECT(gbc.pc(), 0xef1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef1e), 0xd);
        // 0D 010E
        gbc.setState(0x208d, 0x8ae8, 0xc080, 0x1ea7, 0x9950, 0xf8ae, 0x1, 0x0);
        gbc.writeMem(0x208d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8ae8);
        EXPECT(gbc.pc(), 0x208e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 010F
        gbc.setState(0xa465, 0x5bbd, 0xf320, 0xaa8b, 0x1556, 0x3a08, 0x1, 0x0);
        gbc.writeMem(0xa465, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5bbd);
        EXPECT(gbc.pc(), 0xa466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa465), 0xd);
        // 0D 0110
        gbc.setState(0x4890, 0xfcd6, 0x93d0, 0xc710, 0x8f44, 0x576a, 0x0, 0x1);
        gbc.writeMem(0x4890, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xfcd6);
        EXPECT(gbc.pc(), 0x4891);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0111
        gbc.setState(0x98cd, 0x6f19, 0x4e00, 0xa500, 0x1597, 0xdca4, 0x0, 0x0);
        gbc.writeMem(0x98cd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x6f19);
        EXPECT(gbc.pc(), 0x98ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98cd), 0xd);
        // 0D 0112
        gbc.setState(0xe94a, 0xdea3, 0x5500, 0x318f, 0xa622, 0xd968, 0x0, 0x1);
        gbc.writeMem(0xe94a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xdea3);
        EXPECT(gbc.pc(), 0xe94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe94a), 0xd);
        // 0D 0113
        gbc.setState(0x36fb, 0xb329, 0x5630, 0x208a, 0xfbd3, 0xca30, 0x0, 0x0);
        gbc.writeMem(0x36fb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb329);
        EXPECT(gbc.pc(), 0x36fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0114
        gbc.setState(0xe37, 0xafa7, 0xa5a0, 0x1435, 0xf9d1, 0xae06, 0x0, 0x0);
        gbc.writeMem(0xe37, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xafa7);
        EXPECT(gbc.pc(), 0xe38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0115
        gbc.setState(0x35a1, 0xee45, 0x1bf0, 0xf360, 0x25b, 0x9fe3, 0x0, 0x1);
        gbc.writeMem(0x35a1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xee45);
        EXPECT(gbc.pc(), 0x35a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0116
        gbc.setState(0xce71, 0x8ca1, 0x6cb0, 0x707c, 0xf74a, 0x8e72, 0x1, 0x0);
        gbc.writeMem(0xce71, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x8ca1);
        EXPECT(gbc.pc(), 0xce72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce71), 0xd);
        // 0D 0117
        gbc.setState(0x5b7e, 0x458, 0x7a00, 0x7874, 0xfe14, 0x789b, 0x0, 0x0);
        gbc.writeMem(0x5b7e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x458);
        EXPECT(gbc.pc(), 0x5b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0118
        gbc.setState(0xed9b, 0x23b5, 0x2180, 0xe36e, 0xd22e, 0x1223, 0x1, 0x0);
        gbc.writeMem(0xed9b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x23b5);
        EXPECT(gbc.pc(), 0xed9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9b), 0xd);
        // 0D 0119
        gbc.setState(0x852a, 0x7511, 0xa9f0, 0xc17d, 0x646d, 0xe1b1, 0x0, 0x0);
        gbc.writeMem(0x852a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x7511);
        EXPECT(gbc.pc(), 0x852b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852a), 0xd);
        // 0D 011A
        gbc.setState(0x5692, 0xd31b, 0xb7e0, 0x344, 0xa1a6, 0xc2c9, 0x0, 0x0);
        gbc.writeMem(0x5692, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd31b);
        EXPECT(gbc.pc(), 0x5693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 011B
        gbc.setState(0x15, 0xd6b7, 0x6700, 0x2b93, 0xcbcd, 0xc8d2, 0x0, 0x0);
        gbc.writeMem(0x15, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd6b7);
        EXPECT(gbc.pc(), 0x16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 011C
        gbc.setState(0x77a9, 0xb9dc, 0xbad0, 0xccb, 0x93a0, 0x25b1, 0x1, 0x0);
        gbc.writeMem(0x77a9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb9dc);
        EXPECT(gbc.pc(), 0x77aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 011D
        gbc.setState(0x7c97, 0x1dc8, 0xb640, 0x69d2, 0x3fdd, 0xd74b, 0x1, 0x1);
        gbc.writeMem(0x7c97, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1dc8);
        EXPECT(gbc.pc(), 0x7c98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 011E
        gbc.setState(0xec6e, 0x66dd, 0x4820, 0xf442, 0x6142, 0xfb9f, 0x1, 0x1);
        gbc.writeMem(0xec6e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x66dd);
        EXPECT(gbc.pc(), 0xec6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec6e), 0xd);
        // 0D 0120
        gbc.setState(0xd9f, 0x44e0, 0x2aa0, 0x2587, 0xd491, 0x3d53, 0x1, 0x1);
        gbc.writeMem(0xd9f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x44e0);
        EXPECT(gbc.pc(), 0xda0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0121
        gbc.setState(0x6a17, 0x5f31, 0xb8e0, 0xf7b1, 0xf73d, 0x1d5d, 0x1, 0x1);
        gbc.writeMem(0x6a17, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5f31);
        EXPECT(gbc.pc(), 0x6a18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0122
        gbc.setState(0xc741, 0xc2ed, 0x870, 0xb122, 0xdd08, 0x5b04, 0x1, 0x1);
        gbc.writeMem(0xc741, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc2ed);
        EXPECT(gbc.pc(), 0xc742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc741), 0xd);
        // 0D 0123
        gbc.setState(0x7331, 0x20e9, 0xea20, 0x1e8e, 0xcc71, 0x4b7a, 0x0, 0x1);
        gbc.writeMem(0x7331, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x20e9);
        EXPECT(gbc.pc(), 0x7332);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0124
        gbc.setState(0x8a41, 0x1b73, 0x8800, 0x15a9, 0x3920, 0x3056, 0x1, 0x1);
        gbc.writeMem(0x8a41, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x1b73);
        EXPECT(gbc.pc(), 0x8a42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a41), 0xd);
        // 0D 0125
        gbc.setState(0x2f84, 0x7574, 0xa0e0, 0xb3f3, 0xf2dd, 0x226b, 0x0, 0x0);
        gbc.writeMem(0x2f84, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7574);
        EXPECT(gbc.pc(), 0x2f85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0126
        gbc.setState(0x436c, 0xb25e, 0xaf30, 0x5cd9, 0x1f57, 0x8338, 0x0, 0x1);
        gbc.writeMem(0x436c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb25e);
        EXPECT(gbc.pc(), 0x436d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0127
        gbc.setState(0xb695, 0x555d, 0x4a90, 0x15a1, 0x3438, 0x3142, 0x1, 0x0);
        gbc.writeMem(0xb695, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x555d);
        EXPECT(gbc.pc(), 0xb696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb695), 0xd);
        // 0D 0128
        gbc.setState(0x7ffc, 0xe588, 0xd1f0, 0x26d0, 0x935b, 0x598a, 0x0, 0x1);
        gbc.writeMem(0x7ffc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe588);
        EXPECT(gbc.pc(), 0x7ffd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 012A
        gbc.setState(0xd72d, 0x1ce3, 0x890, 0xb0fe, 0xa6c7, 0xcbf5, 0x1, 0x1);
        gbc.writeMem(0xd72d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1ce3);
        EXPECT(gbc.pc(), 0xd72e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd72d), 0xd);
        // 0D 012B
        gbc.setState(0xd691, 0x9ccf, 0x4c60, 0xa412, 0xafb4, 0x7b70, 0x1, 0x0);
        gbc.writeMem(0xd691, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9ccf);
        EXPECT(gbc.pc(), 0xd692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd691), 0xd);
        // 0D 012C
        gbc.setState(0xb866, 0xf937, 0xeb10, 0x4114, 0xbf6c, 0x5fff, 0x1, 0x0);
        gbc.writeMem(0xb866, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf937);
        EXPECT(gbc.pc(), 0xb867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb866), 0xd);
        // 0D 012D
        gbc.setState(0x5e2e, 0xa31, 0x3f90, 0x6721, 0xb666, 0x4839, 0x0, 0x1);
        gbc.writeMem(0x5e2e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0x5e2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 012E
        gbc.setState(0x4c90, 0xed5c, 0xf3c0, 0x896c, 0x77b, 0x3b31, 0x0, 0x1);
        gbc.writeMem(0x4c90, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xed5c);
        EXPECT(gbc.pc(), 0x4c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 012F
        gbc.setState(0xb37f, 0x4617, 0xa030, 0xd746, 0xe883, 0x9089, 0x1, 0x1);
        gbc.writeMem(0xb37f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4617);
        EXPECT(gbc.pc(), 0xb380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb37f), 0xd);
        // 0D 0130
        gbc.setState(0x3360, 0xabad, 0x7b90, 0x4a21, 0x31d3, 0x8c65, 0x0, 0x0);
        gbc.writeMem(0x3360, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xabad);
        EXPECT(gbc.pc(), 0x3361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0131
        gbc.setState(0x2918, 0x2fc1, 0xd7d0, 0xd4b9, 0x8e34, 0x859, 0x0, 0x0);
        gbc.writeMem(0x2918, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x2fc1);
        EXPECT(gbc.pc(), 0x2919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0132
        gbc.setState(0xad58, 0xbacd, 0x4de0, 0xb10, 0x6dd5, 0x1542, 0x0, 0x0);
        gbc.writeMem(0xad58, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xbacd);
        EXPECT(gbc.pc(), 0xad59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad58), 0xd);
        // 0D 0133
        gbc.setState(0x9aa9, 0x3614, 0x3c80, 0xbf5b, 0x4c4c, 0xe368, 0x1, 0x0);
        gbc.writeMem(0x9aa9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3614);
        EXPECT(gbc.pc(), 0x9aaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9aa9), 0xd);
        // 0D 0134
        gbc.setState(0x3f91, 0x2b5e, 0xbdc0, 0x2f80, 0x705b, 0xc90, 0x0, 0x0);
        gbc.writeMem(0x3f91, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2b5e);
        EXPECT(gbc.pc(), 0x3f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 0135
        gbc.setState(0x21c4, 0x539c, 0x1ab0, 0xa506, 0xed7b, 0x74d0, 0x0, 0x0);
        gbc.writeMem(0x21c4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x539c);
        EXPECT(gbc.pc(), 0x21c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0136
        gbc.setState(0x451c, 0xd1d6, 0xe980, 0x6184, 0x7e53, 0x17c9, 0x0, 0x1);
        gbc.writeMem(0x451c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0x451d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0137
        gbc.setState(0x13f7, 0xe58c, 0x6560, 0x7ea8, 0xe0fe, 0x10b7, 0x1, 0x0);
        gbc.writeMem(0x13f7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xe58c);
        EXPECT(gbc.pc(), 0x13f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0138
        gbc.setState(0x4875, 0xc2c2, 0xcfb0, 0xe47a, 0x730, 0x1bb0, 0x0, 0x0);
        gbc.writeMem(0x4875, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc2c2);
        EXPECT(gbc.pc(), 0x4876);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0139
        gbc.setState(0xe12c, 0x8d96, 0xfcc0, 0xe571, 0xbe83, 0xa0d, 0x0, 0x1);
        gbc.writeMem(0xe12c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8d96);
        EXPECT(gbc.pc(), 0xe12d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe12c), 0xd);
        // 0D 013A
        gbc.setState(0x82bd, 0x727f, 0x6850, 0x668, 0x1390, 0x4451, 0x1, 0x0);
        gbc.writeMem(0x82bd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x727f);
        EXPECT(gbc.pc(), 0x82be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82bd), 0xd);
        // 0D 013B
        gbc.setState(0x2ce5, 0x2fc7, 0xff80, 0x455c, 0xe85d, 0xdcfb, 0x1, 0x1);
        gbc.writeMem(0x2ce5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2fc7);
        EXPECT(gbc.pc(), 0x2ce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 013C
        gbc.setState(0xede8, 0xe1da, 0x7410, 0x76ff, 0x2342, 0x2bfb, 0x0, 0x1);
        gbc.writeMem(0xede8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe1da);
        EXPECT(gbc.pc(), 0xede9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede8), 0xd);
        // 0D 013D
        gbc.setState(0x425a, 0x26a5, 0xf430, 0xae39, 0xac52, 0xd50d, 0x1, 0x0);
        gbc.writeMem(0x425a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x26a5);
        EXPECT(gbc.pc(), 0x425b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 013E
        gbc.setState(0x3bf7, 0x2f59, 0x7e60, 0xbad4, 0x4c39, 0xa7e8, 0x1, 0x0);
        gbc.writeMem(0x3bf7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2f59);
        EXPECT(gbc.pc(), 0x3bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 013F
        gbc.setState(0x9978, 0xb283, 0x1780, 0x1d36, 0xe5ec, 0xfbff, 0x1, 0x1);
        gbc.writeMem(0x9978, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb283);
        EXPECT(gbc.pc(), 0x9979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9978), 0xd);
        // 0D 0140
        gbc.setState(0x6077, 0xbfb2, 0xa3a0, 0x5748, 0x3952, 0x442f, 0x0, 0x1);
        gbc.writeMem(0x6077, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbfb2);
        EXPECT(gbc.pc(), 0x6078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0141
        gbc.setState(0x3e8b, 0x82b4, 0x8640, 0x6ae1, 0x4711, 0x9b8e, 0x0, 0x0);
        gbc.writeMem(0x3e8b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x82b4);
        EXPECT(gbc.pc(), 0x3e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0142
        gbc.setState(0xb5a2, 0x55cc, 0x33e0, 0xdd37, 0xb161, 0xf4d4, 0x1, 0x0);
        gbc.writeMem(0xb5a2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x55cc);
        EXPECT(gbc.pc(), 0xb5a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5a2), 0xd);
        // 0D 0143
        gbc.setState(0xbabd, 0x4d71, 0xf270, 0xe4f0, 0x1d9, 0x7ad3, 0x0, 0x0);
        gbc.writeMem(0xbabd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x4d71);
        EXPECT(gbc.pc(), 0xbabe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbabd), 0xd);
        // 0D 0144
        gbc.setState(0xb8ab, 0xc6f6, 0xed10, 0xc77d, 0xe4a7, 0x4513, 0x1, 0x1);
        gbc.writeMem(0xb8ab, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc6f6);
        EXPECT(gbc.pc(), 0xb8ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ab), 0xd);
        // 0D 0145
        gbc.setState(0xdc6c, 0xc00a, 0xaa0, 0x766a, 0xc278, 0xcf43, 0x0, 0x0);
        gbc.writeMem(0xdc6c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc00a);
        EXPECT(gbc.pc(), 0xdc6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6c), 0xd);
        // 0D 0146
        gbc.setState(0x2f7, 0x59e9, 0x9530, 0x8af5, 0x6e83, 0x34e9, 0x1, 0x1);
        gbc.writeMem(0x2f7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x59e9);
        EXPECT(gbc.pc(), 0x2f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0147
        gbc.setState(0xde81, 0xe0c4, 0x660, 0xafe, 0x13cc, 0xd102, 0x0, 0x0);
        gbc.writeMem(0xde81, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xe0c4);
        EXPECT(gbc.pc(), 0xde82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde81), 0xd);
        // 0D 0148
        gbc.setState(0x37de, 0xb3c8, 0x9ef0, 0x1082, 0xb8e2, 0x427d, 0x0, 0x0);
        gbc.writeMem(0x37de, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb3c8);
        EXPECT(gbc.pc(), 0x37df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0149
        gbc.setState(0xeecc, 0x5e8, 0x1290, 0xbd40, 0x1981, 0x710, 0x0, 0x1);
        gbc.writeMem(0xeecc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5e8);
        EXPECT(gbc.pc(), 0xeecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeecc), 0xd);
        // 0D 014A
        gbc.setState(0x2aba, 0x439c, 0x5740, 0xaea4, 0x4338, 0x93b1, 0x0, 0x0);
        gbc.writeMem(0x2aba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x439c);
        EXPECT(gbc.pc(), 0x2abb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 014B
        gbc.setState(0xe765, 0xae13, 0xdb60, 0x779a, 0xe00f, 0x7bca, 0x0, 0x1);
        gbc.writeMem(0xe765, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xae13);
        EXPECT(gbc.pc(), 0xe766);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe765), 0xd);
        // 0D 014C
        gbc.setState(0x8bde, 0xfcab, 0x5050, 0x23e7, 0x7d2f, 0xde2b, 0x0, 0x1);
        gbc.writeMem(0x8bde, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfcab);
        EXPECT(gbc.pc(), 0x8bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bde), 0xd);
        // 0D 014D
        gbc.setState(0x313f, 0xb6f8, 0xe540, 0xb213, 0xa29b, 0x130a, 0x0, 0x1);
        gbc.writeMem(0x313f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xb6f8);
        EXPECT(gbc.pc(), 0x3140);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 014E
        gbc.setState(0xb265, 0x560a, 0xfe0, 0xdc98, 0x9ff0, 0x5196, 0x1, 0x1);
        gbc.writeMem(0xb265, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x560a);
        EXPECT(gbc.pc(), 0xb266);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb265), 0xd);
        // 0D 014F
        gbc.setState(0xeceb, 0xec08, 0xb300, 0x7c94, 0x6efa, 0x955c, 0x1, 0x1);
        gbc.writeMem(0xeceb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xec08);
        EXPECT(gbc.pc(), 0xecec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeceb), 0xd);
        // 0D 0150
        gbc.setState(0xe3b1, 0xd4de, 0x5fc0, 0xc11c, 0xf248, 0x9278, 0x0, 0x0);
        gbc.writeMem(0xe3b1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xd4de);
        EXPECT(gbc.pc(), 0xe3b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3b1), 0xd);
        // 0D 0151
        gbc.setState(0xb538, 0xe625, 0xd000, 0xc07f, 0xe581, 0x920b, 0x1, 0x1);
        gbc.writeMem(0xb538, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe625);
        EXPECT(gbc.pc(), 0xb539);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb538), 0xd);
        // 0D 0154
        gbc.setState(0xb16f, 0x2d80, 0xe8c0, 0x769d, 0x7097, 0x8c94, 0x1, 0x1);
        gbc.writeMem(0xb16f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2d80);
        EXPECT(gbc.pc(), 0xb170);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb16f), 0xd);
        // 0D 0155
        gbc.setState(0xeac4, 0xfc6f, 0x6110, 0xa6ea, 0x2dab, 0x469f, 0x0, 0x0);
        gbc.writeMem(0xeac4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xfc6f);
        EXPECT(gbc.pc(), 0xeac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeac4), 0xd);
        // 0D 0156
        gbc.setState(0x1a54, 0xfcec, 0xb680, 0x2bc4, 0x9132, 0x9998, 0x0, 0x1);
        gbc.writeMem(0x1a54, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xfcec);
        EXPECT(gbc.pc(), 0x1a55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0157
        gbc.setState(0x2db3, 0xb585, 0x63b0, 0x4b5a, 0xcacc, 0xf9d, 0x0, 0x1);
        gbc.writeMem(0x2db3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb585);
        EXPECT(gbc.pc(), 0x2db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0158
        gbc.setState(0x9ba0, 0x4dc9, 0xfe90, 0xaf83, 0x5e43, 0xc1f6, 0x1, 0x1);
        gbc.writeMem(0x9ba0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x4dc9);
        EXPECT(gbc.pc(), 0x9ba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ba0), 0xd);
        // 0D 0159
        gbc.setState(0x38f3, 0x2ab7, 0x56b0, 0x18c6, 0x7aa3, 0x7edc, 0x0, 0x1);
        gbc.writeMem(0x38f3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2ab7);
        EXPECT(gbc.pc(), 0x38f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 015A
        gbc.setState(0x5d6d, 0x9467, 0xfd0, 0x1b1d, 0x3bd5, 0x31eb, 0x1, 0x1);
        gbc.writeMem(0x5d6d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x9467);
        EXPECT(gbc.pc(), 0x5d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 015C
        gbc.setState(0x3849, 0xdfba, 0xff60, 0x4188, 0xbb54, 0xbdd9, 0x0, 0x0);
        gbc.writeMem(0x3849, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xdfba);
        EXPECT(gbc.pc(), 0x384a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 015D
        gbc.setState(0x87ad, 0xaf54, 0x890, 0xcee6, 0xd1f, 0x7a41, 0x1, 0x1);
        gbc.writeMem(0x87ad, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xaf54);
        EXPECT(gbc.pc(), 0x87ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87ad), 0xd);
        // 0D 015E
        gbc.setState(0xec2c, 0x5577, 0x4be0, 0xa325, 0x9522, 0x82cb, 0x0, 0x1);
        gbc.writeMem(0xec2c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5577);
        EXPECT(gbc.pc(), 0xec2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2c), 0xd);
        // 0D 015F
        gbc.setState(0x8f5c, 0xad48, 0x11f0, 0x18a, 0x9ef0, 0x78d7, 0x0, 0x0);
        gbc.writeMem(0x8f5c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xad48);
        EXPECT(gbc.pc(), 0x8f5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f5c), 0xd);
        // 0D 0160
        gbc.setState(0x886e, 0xc086, 0x2440, 0x14a0, 0x79e3, 0x5c64, 0x1, 0x0);
        gbc.writeMem(0x886e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc086);
        EXPECT(gbc.pc(), 0x886f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x886e), 0xd);
        // 0D 0161
        gbc.setState(0x8e9f, 0x3ba9, 0xe120, 0xf020, 0xd80b, 0x17a, 0x1, 0x0);
        gbc.writeMem(0x8e9f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x3ba9);
        EXPECT(gbc.pc(), 0x8ea0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e9f), 0xd);
        // 0D 0162
        gbc.setState(0x646, 0x5375, 0x1c90, 0x2e4c, 0xa746, 0x4a28, 0x1, 0x1);
        gbc.writeMem(0x646, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5375);
        EXPECT(gbc.pc(), 0x647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0163
        gbc.setState(0x35e7, 0x16b2, 0xa0, 0xb52, 0x55e5, 0x2cd1, 0x1, 0x1);
        gbc.writeMem(0x35e7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x16b2);
        EXPECT(gbc.pc(), 0x35e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0164
        gbc.setState(0x7286, 0xd9c6, 0xa360, 0x951, 0x8637, 0x9b34, 0x0, 0x0);
        gbc.writeMem(0x7286, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd9c6);
        EXPECT(gbc.pc(), 0x7287);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0165
        gbc.setState(0x40eb, 0x18b5, 0x5d40, 0x5657, 0x63f8, 0x29be, 0x0, 0x1);
        gbc.writeMem(0x40eb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x18b5);
        EXPECT(gbc.pc(), 0x40ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0166
        gbc.setState(0xb55b, 0x4ee0, 0x5120, 0xffa0, 0x3ca7, 0xaeb8, 0x0, 0x0);
        gbc.writeMem(0xb55b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4ee0);
        EXPECT(gbc.pc(), 0xb55c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb55b), 0xd);
        // 0D 0167
        gbc.setState(0x6f7, 0xd4df, 0xd620, 0x54ce, 0x80a8, 0x7256, 0x1, 0x1);
        gbc.writeMem(0x6f7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xd4df);
        EXPECT(gbc.pc(), 0x6f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0168
        gbc.setState(0x3578, 0x8653, 0xd2f0, 0xf06b, 0xf032, 0xa496, 0x1, 0x0);
        gbc.writeMem(0x3578, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8653);
        EXPECT(gbc.pc(), 0x3579);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0169
        gbc.setState(0x4a40, 0xa678, 0x4cf0, 0xf831, 0x65e2, 0xcf27, 0x1, 0x0);
        gbc.writeMem(0x4a40, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xa678);
        EXPECT(gbc.pc(), 0x4a41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 016A
        gbc.setState(0x6dd, 0xa77, 0xe690, 0x25e0, 0x1a6d, 0xeb19, 0x1, 0x1);
        gbc.writeMem(0x6dd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa77);
        EXPECT(gbc.pc(), 0x6de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 016B
        gbc.setState(0x214a, 0x2d7d, 0x7b80, 0x5f05, 0x9187, 0x8f5a, 0x0, 0x0);
        gbc.writeMem(0x214a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2d7d);
        EXPECT(gbc.pc(), 0x214b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 016C
        gbc.setState(0xcb54, 0x1b37, 0x2500, 0xbda0, 0xc1e, 0x532a, 0x1, 0x0);
        gbc.writeMem(0xcb54, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1b37);
        EXPECT(gbc.pc(), 0xcb55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb54), 0xd);
        // 0D 016D
        gbc.setState(0xb230, 0x6972, 0xb280, 0x3b4, 0xcef2, 0x15d3, 0x1, 0x0);
        gbc.writeMem(0xb230, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x6972);
        EXPECT(gbc.pc(), 0xb231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb230), 0xd);
        // 0D 016E
        gbc.setState(0x2034, 0x5673, 0xf920, 0xab2e, 0xdd8e, 0xa0e3, 0x1, 0x1);
        gbc.writeMem(0x2034, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x5673);
        EXPECT(gbc.pc(), 0x2035);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 016F
        gbc.setState(0xd72, 0xbebf, 0xc510, 0x527f, 0x8d6f, 0xbac0, 0x0, 0x1);
        gbc.writeMem(0xd72, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xbebf);
        EXPECT(gbc.pc(), 0xd73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0170
        gbc.setState(0x9100, 0xd3f2, 0x13e0, 0xf549, 0x7b2e, 0xd243, 0x1, 0x1);
        gbc.writeMem(0x9100, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd3f2);
        EXPECT(gbc.pc(), 0x9101);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9100), 0xd);
        // 0D 0171
        gbc.setState(0xe7ba, 0x587c, 0x6d40, 0xa373, 0x9b0e, 0xa643, 0x1, 0x0);
        gbc.writeMem(0xe7ba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x587c);
        EXPECT(gbc.pc(), 0xe7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ba), 0xd);
        // 0D 0172
        gbc.setState(0xe4d7, 0x3bb, 0x39d0, 0x1e20, 0xab84, 0xd6c0, 0x0, 0x1);
        gbc.writeMem(0xe4d7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3bb);
        EXPECT(gbc.pc(), 0xe4d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4d7), 0xd);
        // 0D 0173
        gbc.setState(0x5b68, 0x786e, 0x2af0, 0x665, 0x6194, 0xb425, 0x0, 0x0);
        gbc.writeMem(0x5b68, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x786e);
        EXPECT(gbc.pc(), 0x5b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0174
        gbc.setState(0xba15, 0x64cb, 0xa9d0, 0x21a1, 0xf472, 0xf3e6, 0x0, 0x1);
        gbc.writeMem(0xba15, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x64cb);
        EXPECT(gbc.pc(), 0xba16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba15), 0xd);
        // 0D 0176
        gbc.setState(0x49f, 0x1c98, 0xdcc0, 0xd6ef, 0x4182, 0x3f5d, 0x1, 0x0);
        gbc.writeMem(0x49f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x1c98);
        EXPECT(gbc.pc(), 0x4a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0177
        gbc.setState(0xede, 0xe5f3, 0x9dd0, 0x733c, 0x3c22, 0xe28e, 0x1, 0x1);
        gbc.writeMem(0xede, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe5f3);
        EXPECT(gbc.pc(), 0xedf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0178
        gbc.setState(0x8f8e, 0xcc, 0x7310, 0x9da7, 0xe750, 0xa9bb, 0x0, 0x0);
        gbc.writeMem(0x8f8e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcc);
        EXPECT(gbc.pc(), 0x8f8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f8e), 0xd);
        // 0D 017A
        gbc.setState(0xccbc, 0x962, 0x2580, 0xe9b0, 0xa909, 0x650e, 0x1, 0x0);
        gbc.writeMem(0xccbc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x962);
        EXPECT(gbc.pc(), 0xccbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccbc), 0xd);
        // 0D 017B
        gbc.setState(0x4b3a, 0x5089, 0xd460, 0x3686, 0x36f5, 0x865c, 0x0, 0x0);
        gbc.writeMem(0x4b3a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x5089);
        EXPECT(gbc.pc(), 0x4b3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 017C
        gbc.setState(0x8511, 0x36, 0xc350, 0xbfcc, 0xc6f8, 0x9496, 0x1, 0x0);
        gbc.writeMem(0x8511, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x36);
        EXPECT(gbc.pc(), 0x8512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8511), 0xd);
        // 0D 017D
        gbc.setState(0x89a9, 0x543a, 0x8d60, 0x1547, 0x8201, 0x6dfb, 0x1, 0x1);
        gbc.writeMem(0x89a9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x543a);
        EXPECT(gbc.pc(), 0x89aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89a9), 0xd);
        // 0D 017E
        gbc.setState(0x4af2, 0x6f3, 0xbd30, 0x2434, 0x1223, 0x28dd, 0x1, 0x0);
        gbc.writeMem(0x4af2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6f3);
        EXPECT(gbc.pc(), 0x4af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 017F
        gbc.setState(0x9e5a, 0xc1dc, 0xd200, 0x4b94, 0x31e8, 0xe3a3, 0x1, 0x1);
        gbc.writeMem(0x9e5a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc1dc);
        EXPECT(gbc.pc(), 0x9e5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e5a), 0xd);
        // 0D 0180
        gbc.setState(0xdf23, 0xf8d, 0x3b40, 0x9d2b, 0xd496, 0xcacd, 0x1, 0x1);
        gbc.writeMem(0xdf23, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf8d);
        EXPECT(gbc.pc(), 0xdf24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf23), 0xd);
        // 0D 0181
        gbc.setState(0xeaf6, 0x3377, 0x110, 0xbe18, 0xa248, 0xc2f1, 0x0, 0x1);
        gbc.writeMem(0xeaf6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3377);
        EXPECT(gbc.pc(), 0xeaf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf6), 0xd);
        // 0D 0184
        gbc.setState(0xcf50, 0xeced, 0xb300, 0x2173, 0xe419, 0xdcfc, 0x1, 0x1);
        gbc.writeMem(0xcf50, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xeced);
        EXPECT(gbc.pc(), 0xcf51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf50), 0xd);
        // 0D 0185
        gbc.setState(0x70d0, 0xf5d7, 0x7360, 0x6b70, 0x4f19, 0x39cc, 0x0, 0x1);
        gbc.writeMem(0x70d0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf5d7);
        EXPECT(gbc.pc(), 0x70d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 0186
        gbc.setState(0x99f8, 0x1621, 0x9ea0, 0xd6e7, 0xf539, 0x1d41, 0x0, 0x1);
        gbc.writeMem(0x99f8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1621);
        EXPECT(gbc.pc(), 0x99f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99f8), 0xd);
        // 0D 0187
        gbc.setState(0x6378, 0x8d0d, 0x5850, 0xcd36, 0xce8e, 0xf106, 0x0, 0x1);
        gbc.writeMem(0x6378, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8d0d);
        EXPECT(gbc.pc(), 0x6379);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0188
        gbc.setState(0x9c92, 0x6e81, 0x2100, 0x115b, 0x75b4, 0xf2b7, 0x1, 0x1);
        gbc.writeMem(0x9c92, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6e81);
        EXPECT(gbc.pc(), 0x9c93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c92), 0xd);
        // 0D 0189
        gbc.setState(0xa407, 0x8545, 0x4f90, 0x5fe6, 0x842b, 0xe3ae, 0x1, 0x0);
        gbc.writeMem(0xa407, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8545);
        EXPECT(gbc.pc(), 0xa408);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa407), 0xd);
        // 0D 018B
        gbc.setState(0x6dd7, 0xaaa, 0x1080, 0xe082, 0xba43, 0xcdb8, 0x1, 0x0);
        gbc.writeMem(0x6dd7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xaaa);
        EXPECT(gbc.pc(), 0x6dd8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 018C
        gbc.setState(0x4fe2, 0xfea4, 0x9840, 0xbf86, 0x9d4b, 0xcec8, 0x0, 0x0);
        gbc.writeMem(0x4fe2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfea4);
        EXPECT(gbc.pc(), 0x4fe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 018D
        gbc.setState(0x13dc, 0xf572, 0x5de0, 0x6b4d, 0x4a45, 0x75b, 0x1, 0x0);
        gbc.writeMem(0x13dc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf572);
        EXPECT(gbc.pc(), 0x13dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 018E
        gbc.setState(0x59b5, 0xed88, 0x3a80, 0x808a, 0x5171, 0x1464, 0x0, 0x1);
        gbc.writeMem(0x59b5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xed88);
        EXPECT(gbc.pc(), 0x59b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 018F
        gbc.setState(0x9872, 0x6f79, 0xc200, 0x6df5, 0x66d6, 0xd321, 0x0, 0x0);
        gbc.writeMem(0x9872, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x6f79);
        EXPECT(gbc.pc(), 0x9873);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9872), 0xd);
        // 0D 0191
        gbc.setState(0x104d, 0x6ad6, 0x60f0, 0x7634, 0xaecf, 0x351b, 0x1, 0x0);
        gbc.writeMem(0x104d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x6ad6);
        EXPECT(gbc.pc(), 0x104e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0192
        gbc.setState(0x5971, 0x99ee, 0x64f0, 0x206, 0xafb7, 0x3d4b, 0x1, 0x0);
        gbc.writeMem(0x5971, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x99ee);
        EXPECT(gbc.pc(), 0x5972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0193
        gbc.setState(0xcb55, 0xefd7, 0xfe40, 0xdd12, 0xb1f9, 0xbefc, 0x0, 0x1);
        gbc.writeMem(0xcb55, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xefd7);
        EXPECT(gbc.pc(), 0xcb56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb55), 0xd);
        // 0D 0194
        gbc.setState(0x460c, 0xfd22, 0xb2f0, 0x514b, 0xb67c, 0x9dac, 0x1, 0x1);
        gbc.writeMem(0x460c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfd22);
        EXPECT(gbc.pc(), 0x460d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0195
        gbc.setState(0xa9e7, 0x7868, 0xd7a0, 0x6d22, 0x9b7f, 0x7cce, 0x1, 0x1);
        gbc.writeMem(0xa9e7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7868);
        EXPECT(gbc.pc(), 0xa9e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9e7), 0xd);
        // 0D 0196
        gbc.setState(0xf83, 0x5999, 0xd6a0, 0x96a4, 0x9ef, 0x59fc, 0x0, 0x0);
        gbc.writeMem(0xf83, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5999);
        EXPECT(gbc.pc(), 0xf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0197
        gbc.setState(0x28ac, 0xeda0, 0xdbd0, 0xfd9c, 0xdc52, 0x64af, 0x0, 0x0);
        gbc.writeMem(0x28ac, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xeda0);
        EXPECT(gbc.pc(), 0x28ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0198
        gbc.setState(0x8cf6, 0x6ac, 0xefc0, 0x46a6, 0x26cb, 0x4bf3, 0x1, 0x1);
        gbc.writeMem(0x8cf6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x6ac);
        EXPECT(gbc.pc(), 0x8cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cf6), 0xd);
        // 0D 0199
        gbc.setState(0xd8f6, 0x303e, 0xa050, 0xab08, 0x89c1, 0x90a3, 0x0, 0x1);
        gbc.writeMem(0xd8f6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x303e);
        EXPECT(gbc.pc(), 0xd8f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f6), 0xd);
        // 0D 019A
        gbc.setState(0xbaf5, 0x15cb, 0x7c50, 0xce37, 0x56a9, 0x99a7, 0x1, 0x0);
        gbc.writeMem(0xbaf5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x15cb);
        EXPECT(gbc.pc(), 0xbaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf5), 0xd);
        // 0D 019B
        gbc.setState(0x4523, 0x27e6, 0x5500, 0x80a1, 0x3e89, 0x3d58, 0x1, 0x0);
        gbc.writeMem(0x4523, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x27e6);
        EXPECT(gbc.pc(), 0x4524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 019C
        gbc.setState(0x156d, 0x5a0e, 0xa7a0, 0x5889, 0xf8f5, 0x1050, 0x0, 0x1);
        gbc.writeMem(0x156d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5a0e);
        EXPECT(gbc.pc(), 0x156e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 019D
        gbc.setState(0xb25, 0x4446, 0x93f0, 0x59c, 0xa82f, 0xe9f0, 0x1, 0x1);
        gbc.writeMem(0xb25, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4446);
        EXPECT(gbc.pc(), 0xb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 019E
        gbc.setState(0xeb6f, 0x2006, 0x5c00, 0xcf80, 0x1cab, 0x2704, 0x0, 0x1);
        gbc.writeMem(0xeb6f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2006);
        EXPECT(gbc.pc(), 0xeb70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb6f), 0xd);
        // 0D 019F
        gbc.setState(0xa56c, 0x24b4, 0xfe90, 0x874, 0xc017, 0xabfb, 0x0, 0x0);
        gbc.writeMem(0xa56c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x24b4);
        EXPECT(gbc.pc(), 0xa56d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa56c), 0xd);
        // 0D 01A0
        gbc.setState(0xa902, 0x8ab2, 0x5ac0, 0x4da4, 0xb865, 0xd9d0, 0x0, 0x1);
        gbc.writeMem(0xa902, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8ab2);
        EXPECT(gbc.pc(), 0xa903);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa902), 0xd);
        // 0D 01A1
        gbc.setState(0x56c0, 0x6ce4, 0x9c40, 0xc23a, 0x3986, 0x7749, 0x1, 0x1);
        gbc.writeMem(0x56c0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6ce4);
        EXPECT(gbc.pc(), 0x56c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01A2
        gbc.setState(0xdb62, 0x3faa, 0xf0, 0x313, 0xe7e6, 0x2854, 0x0, 0x1);
        gbc.writeMem(0xdb62, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3faa);
        EXPECT(gbc.pc(), 0xdb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb62), 0xd);
        // 0D 01A3
        gbc.setState(0x9364, 0x4302, 0x29e0, 0xfa8b, 0xb292, 0x66c0, 0x0, 0x1);
        gbc.writeMem(0x9364, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x4302);
        EXPECT(gbc.pc(), 0x9365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9364), 0xd);
        // 0D 01A4
        gbc.setState(0x46c0, 0x1e8e, 0xd730, 0xd4b5, 0xc6c6, 0xabcd, 0x0, 0x1);
        gbc.writeMem(0x46c0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1e8e);
        EXPECT(gbc.pc(), 0x46c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01A5
        gbc.setState(0xd400, 0xef2c, 0xdc90, 0x567c, 0x87ac, 0xc7a6, 0x1, 0x1);
        gbc.writeMem(0xd400, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xef2c);
        EXPECT(gbc.pc(), 0xd401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd400), 0xd);
        // 0D 01A6
        gbc.setState(0x51a6, 0x3503, 0x3460, 0x3d5f, 0xf657, 0xe913, 0x1, 0x0);
        gbc.writeMem(0x51a6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3503);
        EXPECT(gbc.pc(), 0x51a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01A7
        gbc.setState(0xc5f5, 0x1f9d, 0xe5b0, 0x1ce2, 0xb2c, 0xf3e, 0x1, 0x0);
        gbc.writeMem(0xc5f5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1f9d);
        EXPECT(gbc.pc(), 0xc5f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5f5), 0xd);
        // 0D 01A8
        gbc.setState(0xbe3a, 0x7de0, 0xc830, 0xacc5, 0xf36a, 0x4391, 0x0, 0x0);
        gbc.writeMem(0xbe3a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x7de0);
        EXPECT(gbc.pc(), 0xbe3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe3a), 0xd);
        // 0D 01A9
        gbc.setState(0x2e4b, 0xc54, 0xc3c0, 0x72c1, 0x2820, 0x9ac2, 0x1, 0x0);
        gbc.writeMem(0x2e4b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xc54);
        EXPECT(gbc.pc(), 0x2e4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01AA
        gbc.setState(0x7037, 0xcacd, 0x63c0, 0x74ac, 0x5c0d, 0x2f, 0x0, 0x1);
        gbc.writeMem(0x7037, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xcacd);
        EXPECT(gbc.pc(), 0x7038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01AB
        gbc.setState(0x391c, 0xe822, 0x26e0, 0xaec3, 0x8b82, 0xb5b6, 0x1, 0x1);
        gbc.writeMem(0x391c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe822);
        EXPECT(gbc.pc(), 0x391d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01AC
        gbc.setState(0x392c, 0xa39, 0x2150, 0xdd9f, 0xa92e, 0x99a9, 0x0, 0x1);
        gbc.writeMem(0x392c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa39);
        EXPECT(gbc.pc(), 0x392d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01AD
        gbc.setState(0x4c5, 0x6182, 0xd5d0, 0x59d8, 0x59bc, 0xa5ac, 0x1, 0x0);
        gbc.writeMem(0x4c5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x6182);
        EXPECT(gbc.pc(), 0x4c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01AF
        gbc.setState(0x435d, 0x94e6, 0xc280, 0x198f, 0xae8f, 0x2989, 0x0, 0x1);
        gbc.writeMem(0x435d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x94e6);
        EXPECT(gbc.pc(), 0x435e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01B0
        gbc.setState(0x35f0, 0xd853, 0x10a0, 0xd5a, 0x7b78, 0x2a8, 0x1, 0x0);
        gbc.writeMem(0x35f0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xd853);
        EXPECT(gbc.pc(), 0x35f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01B1
        gbc.setState(0x66ab, 0x7dcf, 0xf8b0, 0x2058, 0x3dba, 0xfdc1, 0x0, 0x0);
        gbc.writeMem(0x66ab, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7dcf);
        EXPECT(gbc.pc(), 0x66ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01B2
        gbc.setState(0x5423, 0x1a1c, 0x2190, 0x6379, 0xb512, 0x8f3e, 0x0, 0x0);
        gbc.writeMem(0x5423, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1a1c);
        EXPECT(gbc.pc(), 0x5424);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01B4
        gbc.setState(0x4727, 0x512e, 0x3680, 0x7f64, 0xd228, 0xbb6b, 0x1, 0x1);
        gbc.writeMem(0x4727, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x512e);
        EXPECT(gbc.pc(), 0x4728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01B5
        gbc.setState(0xd658, 0xc1a, 0xc280, 0xad08, 0xd8e5, 0x7749, 0x0, 0x0);
        gbc.writeMem(0xd658, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc1a);
        EXPECT(gbc.pc(), 0xd659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd658), 0xd);
        // 0D 01B6
        gbc.setState(0x556f, 0x59ad, 0xf550, 0x8ea8, 0xf217, 0x3cac, 0x0, 0x0);
        gbc.writeMem(0x556f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x59ad);
        EXPECT(gbc.pc(), 0x5570);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01B7
        gbc.setState(0xc81f, 0x2ea1, 0xadd0, 0xbbb, 0xc342, 0xc6b5, 0x1, 0x0);
        gbc.writeMem(0xc81f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2ea1);
        EXPECT(gbc.pc(), 0xc820);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc81f), 0xd);
        // 0D 01B8
        gbc.setState(0x76b3, 0xb761, 0xca60, 0x3249, 0xd36, 0x16ea, 0x1, 0x1);
        gbc.writeMem(0x76b3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb761);
        EXPECT(gbc.pc(), 0x76b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01B9
        gbc.setState(0x5661, 0x9598, 0xcc30, 0x2d9, 0xcbfe, 0x327b, 0x0, 0x1);
        gbc.writeMem(0x5661, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9598);
        EXPECT(gbc.pc(), 0x5662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01BA
        gbc.setState(0xa510, 0x38b4, 0x7bd0, 0x7c0e, 0x7c6a, 0x74ab, 0x1, 0x0);
        gbc.writeMem(0xa510, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x38b4);
        EXPECT(gbc.pc(), 0xa511);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa510), 0xd);
        // 0D 01BB
        gbc.setState(0x8380, 0x4410, 0x60f0, 0xb6c3, 0x4a8e, 0xdb3d, 0x1, 0x0);
        gbc.writeMem(0x8380, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4410);
        EXPECT(gbc.pc(), 0x8381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8380), 0xd);
        // 0D 01BC
        gbc.setState(0xd46c, 0x741b, 0xa830, 0x531, 0xf95a, 0x3da0, 0x0, 0x1);
        gbc.writeMem(0xd46c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x741b);
        EXPECT(gbc.pc(), 0xd46d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd46c), 0xd);
        // 0D 01BD
        gbc.setState(0xefce, 0x3b81, 0x93c0, 0xb79c, 0x241a, 0x2137, 0x1, 0x0);
        gbc.writeMem(0xefce, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x3b81);
        EXPECT(gbc.pc(), 0xefcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefce), 0xd);
        // 0D 01BE
        gbc.setState(0xaa98, 0x3ad8, 0xe390, 0x839d, 0x2d10, 0x8def, 0x0, 0x0);
        gbc.writeMem(0xaa98, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x3ad8);
        EXPECT(gbc.pc(), 0xaa99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa98), 0xd);
        // 0D 01BF
        gbc.setState(0x44b7, 0x96e, 0x5ae0, 0xb541, 0xdcf8, 0xd5c9, 0x1, 0x1);
        gbc.writeMem(0x44b7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x96e);
        EXPECT(gbc.pc(), 0x44b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01C0
        gbc.setState(0x640c, 0xdf93, 0x39a0, 0xfad, 0xc0b0, 0x8457, 0x0, 0x0);
        gbc.writeMem(0x640c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xdf93);
        EXPECT(gbc.pc(), 0x640d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01C1
        gbc.setState(0x3e6b, 0x6a78, 0xe170, 0xff73, 0x113d, 0x95a7, 0x1, 0x1);
        gbc.writeMem(0x3e6b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6a78);
        EXPECT(gbc.pc(), 0x3e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01C2
        gbc.setState(0x1118, 0x3d76, 0x5e30, 0xa1fd, 0x872f, 0xfb75, 0x1, 0x0);
        gbc.writeMem(0x1118, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3d76);
        EXPECT(gbc.pc(), 0x1119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01C3
        gbc.setState(0x4eed, 0x1384, 0x66d0, 0x9d32, 0xb78f, 0x18d, 0x0, 0x1);
        gbc.writeMem(0x4eed, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1384);
        EXPECT(gbc.pc(), 0x4eee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01C4
        gbc.setState(0x24f0, 0x419e, 0x2ab0, 0xa70e, 0xbbda, 0x4371, 0x1, 0x0);
        gbc.writeMem(0x24f0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x419e);
        EXPECT(gbc.pc(), 0x24f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01C5
        gbc.setState(0xdc65, 0x5e6d, 0x140, 0xa47a, 0xef52, 0xb4bc, 0x0, 0x1);
        gbc.writeMem(0xdc65, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x5e6d);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc65), 0xd);
        // 0D 01C6
        gbc.setState(0x4a38, 0x503a, 0x7240, 0x29e8, 0xded3, 0xafad, 0x0, 0x1);
        gbc.writeMem(0x4a38, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x503a);
        EXPECT(gbc.pc(), 0x4a39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01C7
        gbc.setState(0x9af2, 0xd30f, 0xa9c0, 0x11ee, 0x40e5, 0x6140, 0x0, 0x1);
        gbc.writeMem(0x9af2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd30f);
        EXPECT(gbc.pc(), 0x9af3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9af2), 0xd);
        // 0D 01C8
        gbc.setState(0x4b44, 0x227e, 0xd820, 0x25b8, 0xc3b1, 0x598d, 0x1, 0x0);
        gbc.writeMem(0x4b44, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x227e);
        EXPECT(gbc.pc(), 0x4b45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01C9
        gbc.setState(0x183, 0x578e, 0x9fe0, 0xf4bd, 0x6f, 0xaedc, 0x0, 0x1);
        gbc.writeMem(0x183, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x578e);
        EXPECT(gbc.pc(), 0x184);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01CA
        gbc.setState(0x6f86, 0xb497, 0xaa80, 0x4add, 0x4125, 0x9924, 0x1, 0x1);
        gbc.writeMem(0x6f86, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb497);
        EXPECT(gbc.pc(), 0x6f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01CB
        gbc.setState(0xa769, 0xd039, 0x1990, 0x422a, 0xf407, 0xd3d8, 0x0, 0x1);
        gbc.writeMem(0xa769, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd039);
        EXPECT(gbc.pc(), 0xa76a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa769), 0xd);
        // 0D 01CD
        gbc.setState(0xc53c, 0xa235, 0xe40, 0xb3e9, 0x8769, 0x8eae, 0x0, 0x0);
        gbc.writeMem(0xc53c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa235);
        EXPECT(gbc.pc(), 0xc53d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc53c), 0xd);
        // 0D 01CE
        gbc.setState(0xd033, 0xb8e0, 0x9670, 0x78e0, 0xe01c, 0xf8a5, 0x0, 0x0);
        gbc.writeMem(0xd033, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb8e0);
        EXPECT(gbc.pc(), 0xd034);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd033), 0xd);
        // 0D 01CF
        gbc.setState(0xa056, 0x7315, 0x1c00, 0xcca3, 0x7861, 0xd55a, 0x0, 0x1);
        gbc.writeMem(0xa056, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7315);
        EXPECT(gbc.pc(), 0xa057);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa056), 0xd);
        // 0D 01D0
        gbc.setState(0xec1e, 0x4497, 0x5ad0, 0x304a, 0x3a10, 0x51bc, 0x1, 0x1);
        gbc.writeMem(0xec1e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x4497);
        EXPECT(gbc.pc(), 0xec1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1e), 0xd);
        // 0D 01D1
        gbc.setState(0x7874, 0xea32, 0x7ba0, 0xb82d, 0xa607, 0x340f, 0x1, 0x0);
        gbc.writeMem(0x7874, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xea32);
        EXPECT(gbc.pc(), 0x7875);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01D2
        gbc.setState(0xbd4c, 0x6db7, 0xb460, 0x160c, 0x6fda, 0x7343, 0x1, 0x0);
        gbc.writeMem(0xbd4c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x6db7);
        EXPECT(gbc.pc(), 0xbd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4c), 0xd);
        // 0D 01D3
        gbc.setState(0xbf9e, 0xc66e, 0xd9d0, 0x6479, 0xb7ca, 0x46, 0x0, 0x1);
        gbc.writeMem(0xbf9e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xc66e);
        EXPECT(gbc.pc(), 0xbf9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf9e), 0xd);
        // 0D 01D4
        gbc.setState(0x3f62, 0xbe5b, 0x9a0, 0x642, 0x1c89, 0x16f0, 0x1, 0x1);
        gbc.writeMem(0x3f62, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xbe5b);
        EXPECT(gbc.pc(), 0x3f63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01D5
        gbc.setState(0x64d5, 0xc465, 0x9190, 0xea4c, 0x45ca, 0xf813, 0x0, 0x1);
        gbc.writeMem(0x64d5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc465);
        EXPECT(gbc.pc(), 0x64d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01D6
        gbc.setState(0x8251, 0xcf13, 0x2060, 0xe5da, 0x2e07, 0x8e85, 0x1, 0x1);
        gbc.writeMem(0x8251, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xcf13);
        EXPECT(gbc.pc(), 0x8252);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8251), 0xd);
        // 0D 01D7
        gbc.setState(0xef60, 0x6b5e, 0x8b60, 0x4e13, 0xa631, 0x3259, 0x1, 0x1);
        gbc.writeMem(0xef60, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6b5e);
        EXPECT(gbc.pc(), 0xef61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef60), 0xd);
        // 0D 01D8
        gbc.setState(0x8b5b, 0xc68a, 0x3f20, 0x7b24, 0x6ce5, 0x382d, 0x1, 0x0);
        gbc.writeMem(0x8b5b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc68a);
        EXPECT(gbc.pc(), 0x8b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b5b), 0xd);
        // 0D 01D9
        gbc.setState(0xc4b2, 0xcecb, 0xcf40, 0x7043, 0x6101, 0xf3db, 0x1, 0x0);
        gbc.writeMem(0xc4b2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xcecb);
        EXPECT(gbc.pc(), 0xc4b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4b2), 0xd);
        // 0D 01DA
        gbc.setState(0xb805, 0x93dd, 0x28e0, 0x415a, 0x94f7, 0x1167, 0x0, 0x0);
        gbc.writeMem(0xb805, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x93dd);
        EXPECT(gbc.pc(), 0xb806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb805), 0xd);
        // 0D 01DB
        gbc.setState(0xa98b, 0x3215, 0xf840, 0xee64, 0x4e07, 0xf95, 0x0, 0x0);
        gbc.writeMem(0xa98b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3215);
        EXPECT(gbc.pc(), 0xa98c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98b), 0xd);
        // 0D 01DC
        gbc.setState(0x9be1, 0x4cbf, 0x45c0, 0x1fdb, 0x79b1, 0x5ef, 0x1, 0x0);
        gbc.writeMem(0x9be1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x4cbf);
        EXPECT(gbc.pc(), 0x9be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be1), 0xd);
        // 0D 01DD
        gbc.setState(0x1830, 0xb542, 0x3300, 0x2e76, 0x99f6, 0xef7, 0x0, 0x0);
        gbc.writeMem(0x1830, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xb542);
        EXPECT(gbc.pc(), 0x1831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01DE
        gbc.setState(0x194d, 0xcc90, 0x82f0, 0xe636, 0xe97a, 0xb93a, 0x1, 0x0);
        gbc.writeMem(0x194d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcc90);
        EXPECT(gbc.pc(), 0x194e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01E0
        gbc.setState(0x791c, 0xd5b2, 0x1cc0, 0x4912, 0x466e, 0x35ab, 0x0, 0x1);
        gbc.writeMem(0x791c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd5b2);
        EXPECT(gbc.pc(), 0x791d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01E1
        gbc.setState(0x7268, 0x2b57, 0x4840, 0xc384, 0x9f65, 0x20b, 0x1, 0x0);
        gbc.writeMem(0x7268, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2b57);
        EXPECT(gbc.pc(), 0x7269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01E2
        gbc.setState(0x3024, 0xc1d1, 0x5470, 0xa07c, 0xb38, 0x36ad, 0x0, 0x1);
        gbc.writeMem(0x3024, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc1d1);
        EXPECT(gbc.pc(), 0x3025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01E3
        gbc.setState(0x9f3c, 0x9edf, 0xb140, 0x6a9d, 0xa2f1, 0x8210, 0x0, 0x0);
        gbc.writeMem(0x9f3c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9edf);
        EXPECT(gbc.pc(), 0x9f3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f3c), 0xd);
        // 0D 01E4
        gbc.setState(0x13f1, 0x37f, 0xd090, 0x30b1, 0x4257, 0xb38f, 0x0, 0x0);
        gbc.writeMem(0x13f1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x37f);
        EXPECT(gbc.pc(), 0x13f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01E5
        gbc.setState(0x834b, 0x2905, 0xc8e0, 0x3787, 0xc98f, 0x6896, 0x0, 0x1);
        gbc.writeMem(0x834b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2905);
        EXPECT(gbc.pc(), 0x834c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834b), 0xd);
        // 0D 01E6
        gbc.setState(0x9c03, 0x7c60, 0xc70, 0x9dd2, 0x2537, 0x3269, 0x0, 0x1);
        gbc.writeMem(0x9c03, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7c60);
        EXPECT(gbc.pc(), 0x9c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c03), 0xd);
        // 0D 01E7
        gbc.setState(0x221f, 0x1df6, 0x1800, 0xffa4, 0xe402, 0x4cb3, 0x0, 0x1);
        gbc.writeMem(0x221f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1df6);
        EXPECT(gbc.pc(), 0x2220);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01E8
        gbc.setState(0x771b, 0x2949, 0xbe90, 0xfe11, 0xfa61, 0x20ae, 0x1, 0x1);
        gbc.writeMem(0x771b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x2949);
        EXPECT(gbc.pc(), 0x771c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01E9
        gbc.setState(0xde19, 0xa55d, 0x14e0, 0x14ac, 0x21de, 0x1c74, 0x1, 0x0);
        gbc.writeMem(0xde19, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xa55d);
        EXPECT(gbc.pc(), 0xde1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde19), 0xd);
        // 0D 01EA
        gbc.setState(0xdf5d, 0x4544, 0xfde0, 0x4a1, 0x6a78, 0x1696, 0x0, 0x0);
        gbc.writeMem(0xdf5d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4544);
        EXPECT(gbc.pc(), 0xdf5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf5d), 0xd);
        // 0D 01EB
        gbc.setState(0x1f98, 0x26b1, 0xcc80, 0x6e7b, 0x2bce, 0x3910, 0x0, 0x1);
        gbc.writeMem(0x1f98, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x26b1);
        EXPECT(gbc.pc(), 0x1f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01EC
        gbc.setState(0x3452, 0x5b62, 0xa0e0, 0xd26a, 0xb13c, 0x824a, 0x0, 0x0);
        gbc.writeMem(0x3452, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5b62);
        EXPECT(gbc.pc(), 0x3453);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01ED
        gbc.setState(0xf10, 0x6c60, 0xca10, 0xc135, 0xc800, 0x5c70, 0x1, 0x0);
        gbc.writeMem(0xf10, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6c60);
        EXPECT(gbc.pc(), 0xf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01EF
        gbc.setState(0x2003, 0x7337, 0x8a40, 0x5a33, 0x3880, 0x4cd, 0x0, 0x1);
        gbc.writeMem(0x2003, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7337);
        EXPECT(gbc.pc(), 0x2004);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 01F1
        gbc.setState(0x6b49, 0xb955, 0xee30, 0x74de, 0xa3c1, 0x577f, 0x0, 0x1);
        gbc.writeMem(0x6b49, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb955);
        EXPECT(gbc.pc(), 0x6b4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01F2
        gbc.setState(0x69a1, 0x4771, 0xbe10, 0x7689, 0xafd4, 0x5bbe, 0x0, 0x1);
        gbc.writeMem(0x69a1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4771);
        EXPECT(gbc.pc(), 0x69a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01F3
        gbc.setState(0x30fc, 0xdd51, 0x8e70, 0x49f4, 0xa0b6, 0x2aea, 0x0, 0x0);
        gbc.writeMem(0x30fc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdd51);
        EXPECT(gbc.pc(), 0x30fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01F4
        gbc.setState(0x95e, 0x2cee, 0x7b30, 0xda1e, 0x989e, 0x2cfa, 0x0, 0x0);
        gbc.writeMem(0x95e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2cee);
        EXPECT(gbc.pc(), 0x95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01F5
        gbc.setState(0x884e, 0x8d5d, 0x9510, 0xf8ba, 0xbf62, 0x1a5d, 0x0, 0x0);
        gbc.writeMem(0x884e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8d5d);
        EXPECT(gbc.pc(), 0x884f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x884e), 0xd);
        // 0D 01F6
        gbc.setState(0xd154, 0xc0ca, 0x440, 0x3688, 0xef72, 0xe98d, 0x1, 0x0);
        gbc.writeMem(0xd154, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc0ca);
        EXPECT(gbc.pc(), 0xd155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd154), 0xd);
        // 0D 01F7
        gbc.setState(0x66b6, 0x692f, 0xdd70, 0x65c9, 0x6821, 0x68b6, 0x1, 0x1);
        gbc.writeMem(0x66b6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x692f);
        EXPECT(gbc.pc(), 0x66b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01F9
        gbc.setState(0x1767, 0xbce0, 0xc8b0, 0x170e, 0x5b1f, 0x6a61, 0x1, 0x0);
        gbc.writeMem(0x1767, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbce0);
        EXPECT(gbc.pc(), 0x1768);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 01FA
        gbc.setState(0xcf57, 0xd778, 0xe170, 0x1351, 0x9131, 0xc3a0, 0x0, 0x0);
        gbc.writeMem(0xcf57, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xd778);
        EXPECT(gbc.pc(), 0xcf58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf57), 0xd);
        // 0D 01FB
        gbc.setState(0xb245, 0x566e, 0x7b70, 0x2c9b, 0x9f7e, 0x1d09, 0x1, 0x1);
        gbc.writeMem(0xb245, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x566e);
        EXPECT(gbc.pc(), 0xb246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb245), 0xd);
        // 0D 01FC
        gbc.setState(0x9486, 0x3614, 0x8660, 0x2160, 0xb6a9, 0xd3c0, 0x1, 0x1);
        gbc.writeMem(0x9486, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3614);
        EXPECT(gbc.pc(), 0x9487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9486), 0xd);
        // 0D 01FD
        gbc.setState(0xe5ca, 0x6bd5, 0xa720, 0x9093, 0x8dc4, 0x5af7, 0x0, 0x1);
        gbc.writeMem(0xe5ca, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6bd5);
        EXPECT(gbc.pc(), 0xe5cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ca), 0xd);
        // 0D 01FE
        gbc.setState(0xdd6f, 0xca25, 0x85b0, 0xe2aa, 0xe496, 0xb5a5, 0x0, 0x0);
        gbc.writeMem(0xdd6f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xca25);
        EXPECT(gbc.pc(), 0xdd70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd6f), 0xd);
        // 0D 01FF
        gbc.setState(0xbbc5, 0x1add, 0xd630, 0x8cd7, 0xa1, 0x2da5, 0x1, 0x0);
        gbc.writeMem(0xbbc5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1add);
        EXPECT(gbc.pc(), 0xbbc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc5), 0xd);
        // 0D 0200
        gbc.setState(0xafe2, 0x2436, 0x1ca0, 0x64c8, 0x47b1, 0x168, 0x1, 0x0);
        gbc.writeMem(0xafe2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2436);
        EXPECT(gbc.pc(), 0xafe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafe2), 0xd);
        // 0D 0201
        gbc.setState(0x6573, 0xe53a, 0xdb00, 0x4e56, 0xe421, 0x6348, 0x1, 0x1);
        gbc.writeMem(0x6573, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe53a);
        EXPECT(gbc.pc(), 0x6574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0202
        gbc.setState(0xdf15, 0xc66f, 0xe540, 0x9466, 0x7350, 0x5d99, 0x1, 0x0);
        gbc.writeMem(0xdf15, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc66f);
        EXPECT(gbc.pc(), 0xdf16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf15), 0xd);
        // 0D 0203
        gbc.setState(0xe0b5, 0xb58, 0x38a0, 0x1c06, 0x25c5, 0x7942, 0x1, 0x0);
        gbc.writeMem(0xe0b5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xb58);
        EXPECT(gbc.pc(), 0xe0b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b5), 0xd);
        // 0D 0204
        gbc.setState(0xe2d, 0x9ca8, 0x3a90, 0xde63, 0xbb21, 0xa87d, 0x0, 0x1);
        gbc.writeMem(0xe2d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9ca8);
        EXPECT(gbc.pc(), 0xe2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0205
        gbc.setState(0x80e8, 0x22d, 0x8110, 0x6a62, 0x5443, 0x6111, 0x1, 0x1);
        gbc.writeMem(0x80e8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x22d);
        EXPECT(gbc.pc(), 0x80e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80e8), 0xd);
        // 0D 0206
        gbc.setState(0x5c4a, 0x46c4, 0x6e10, 0xdf1, 0x90ee, 0x1f55, 0x1, 0x0);
        gbc.writeMem(0x5c4a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x46c4);
        EXPECT(gbc.pc(), 0x5c4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0207
        gbc.setState(0x2cd6, 0xd292, 0x230, 0xaccc, 0xa6f, 0xec4c, 0x0, 0x1);
        gbc.writeMem(0x2cd6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd292);
        EXPECT(gbc.pc(), 0x2cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0208
        gbc.setState(0xd2b3, 0x4cd8, 0xe710, 0x4962, 0x1577, 0x9569, 0x0, 0x1);
        gbc.writeMem(0xd2b3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x4cd8);
        EXPECT(gbc.pc(), 0xd2b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2b3), 0xd);
        // 0D 0209
        gbc.setState(0xcbd8, 0xf0cb, 0x4fc0, 0x630, 0xdc98, 0x564d, 0x0, 0x0);
        gbc.writeMem(0xcbd8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf0cb);
        EXPECT(gbc.pc(), 0xcbd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd8), 0xd);
        // 0D 020A
        gbc.setState(0x8fc1, 0x9734, 0x8690, 0xfc5e, 0x2854, 0xc5e, 0x0, 0x0);
        gbc.writeMem(0x8fc1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9734);
        EXPECT(gbc.pc(), 0x8fc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fc1), 0xd);
        // 0D 020B
        gbc.setState(0x60f, 0x69fa, 0x7b90, 0x74fa, 0x95ce, 0x58e6, 0x0, 0x1);
        gbc.writeMem(0x60f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x69fa);
        EXPECT(gbc.pc(), 0x610);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 020C
        gbc.setState(0x41f4, 0x39c6, 0xb310, 0x4b37, 0x8650, 0x75d5, 0x0, 0x1);
        gbc.writeMem(0x41f4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x39c6);
        EXPECT(gbc.pc(), 0x41f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 020D
        gbc.setState(0x5f9, 0xbdee, 0x13b0, 0xd57d, 0xef6e, 0xed44, 0x1, 0x1);
        gbc.writeMem(0x5f9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbdee);
        EXPECT(gbc.pc(), 0x5fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 020F
        gbc.setState(0x734e, 0x484b, 0x4b40, 0x5dac, 0xb296, 0xa106, 0x1, 0x0);
        gbc.writeMem(0x734e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x484b);
        EXPECT(gbc.pc(), 0x734f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0210
        gbc.setState(0xb8fe, 0x34a6, 0xe360, 0xa713, 0x7447, 0x1294, 0x0, 0x0);
        gbc.writeMem(0xb8fe, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x34a6);
        EXPECT(gbc.pc(), 0xb8ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8fe), 0xd);
        // 0D 0211
        gbc.setState(0x11a0, 0x3905, 0x2110, 0xe68b, 0xcee9, 0x8cd5, 0x0, 0x1);
        gbc.writeMem(0x11a0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3905);
        EXPECT(gbc.pc(), 0x11a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0212
        gbc.setState(0x6e6, 0x72d5, 0x7c50, 0x7ae2, 0x559f, 0x9387, 0x0, 0x1);
        gbc.writeMem(0x6e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x72d5);
        EXPECT(gbc.pc(), 0x6e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0213
        gbc.setState(0x343d, 0xf8ef, 0xd410, 0xe7ef, 0x71a8, 0x70fe, 0x1, 0x0);
        gbc.writeMem(0x343d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf8ef);
        EXPECT(gbc.pc(), 0x343e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0215
        gbc.setState(0xd846, 0xe326, 0x14b0, 0x6d53, 0x3f1c, 0x7962, 0x0, 0x0);
        gbc.writeMem(0xd846, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe326);
        EXPECT(gbc.pc(), 0xd847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd846), 0xd);
        // 0D 0216
        gbc.setState(0x9006, 0x933c, 0xb30, 0x7670, 0x92f3, 0xd2dd, 0x1, 0x0);
        gbc.writeMem(0x9006, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x933c);
        EXPECT(gbc.pc(), 0x9007);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9006), 0xd);
        // 0D 0217
        gbc.setState(0xc4e6, 0x4b6f, 0x8f70, 0xab50, 0x25c6, 0x92dd, 0x0, 0x0);
        gbc.writeMem(0xc4e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4b6f);
        EXPECT(gbc.pc(), 0xc4e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4e6), 0xd);
        // 0D 0218
        gbc.setState(0x271f, 0x9d74, 0x5570, 0xe42, 0xdb94, 0xef21, 0x0, 0x1);
        gbc.writeMem(0x271f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x9d74);
        EXPECT(gbc.pc(), 0x2720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0219
        gbc.setState(0xe5c4, 0x4b1f, 0x5560, 0x50ba, 0x8d47, 0x9f60, 0x0, 0x0);
        gbc.writeMem(0xe5c4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4b1f);
        EXPECT(gbc.pc(), 0xe5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c4), 0xd);
        // 0D 021A
        gbc.setState(0xe4de, 0x2ed2, 0xbc10, 0x8dad, 0x7eb9, 0x1d03, 0x1, 0x1);
        gbc.writeMem(0xe4de, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2ed2);
        EXPECT(gbc.pc(), 0xe4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4de), 0xd);
        // 0D 021B
        gbc.setState(0xdd4a, 0x1ae5, 0x2880, 0x1a26, 0x1f89, 0xdeb8, 0x1, 0x1);
        gbc.writeMem(0xdd4a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x1ae5);
        EXPECT(gbc.pc(), 0xdd4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd4a), 0xd);
        // 0D 021C
        gbc.setState(0xe89, 0xef1a, 0x3ff0, 0x9c8e, 0x184b, 0x8636, 0x0, 0x0);
        gbc.writeMem(0xe89, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xef1a);
        EXPECT(gbc.pc(), 0xe8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 021D
        gbc.setState(0x5501, 0xc52, 0x9740, 0xa19e, 0xfa82, 0x858a, 0x1, 0x0);
        gbc.writeMem(0x5501, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xc52);
        EXPECT(gbc.pc(), 0x5502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 021E
        gbc.setState(0x24e6, 0x340c, 0x1060, 0xa361, 0x67c0, 0xc01f, 0x0, 0x0);
        gbc.writeMem(0x24e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x340c);
        EXPECT(gbc.pc(), 0x24e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 021F
        gbc.setState(0x423c, 0x3b70, 0x2b70, 0x48b7, 0xe8a1, 0xbc4, 0x0, 0x1);
        gbc.writeMem(0x423c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x3b70);
        EXPECT(gbc.pc(), 0x423d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0220
        gbc.setState(0x8817, 0x3c88, 0x66a0, 0x37b0, 0xce9b, 0xcf88, 0x1, 0x1);
        gbc.writeMem(0x8817, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3c88);
        EXPECT(gbc.pc(), 0x8818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8817), 0xd);
        // 0D 0221
        gbc.setState(0x749c, 0xd017, 0x19c0, 0xeefe, 0xf572, 0xb86a, 0x1, 0x0);
        gbc.writeMem(0x749c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd017);
        EXPECT(gbc.pc(), 0x749d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0222
        gbc.setState(0xbb84, 0xb16d, 0xc3d0, 0xe73b, 0x5edb, 0x2a5, 0x0, 0x0);
        gbc.writeMem(0xbb84, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xb16d);
        EXPECT(gbc.pc(), 0xbb85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb84), 0xd);
        // 0D 0223
        gbc.setState(0x732a, 0xd50e, 0x2740, 0x8fda, 0xfe64, 0xaaef, 0x0, 0x1);
        gbc.writeMem(0x732a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xd50e);
        EXPECT(gbc.pc(), 0x732b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0224
        gbc.setState(0xb182, 0xcfd3, 0x8d30, 0xb874, 0xca25, 0x7990, 0x1, 0x0);
        gbc.writeMem(0xb182, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcfd3);
        EXPECT(gbc.pc(), 0xb183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb182), 0xd);
        // 0D 0225
        gbc.setState(0xe0bf, 0xe7b6, 0xe6f0, 0xf44a, 0x724c, 0x7499, 0x0, 0x0);
        gbc.writeMem(0xe0bf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xe7b6);
        EXPECT(gbc.pc(), 0xe0c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0bf), 0xd);
        // 0D 0226
        gbc.setState(0xca03, 0x66ed, 0x27b0, 0xd426, 0x6561, 0x9d83, 0x0, 0x0);
        gbc.writeMem(0xca03, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x66ed);
        EXPECT(gbc.pc(), 0xca04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca03), 0xd);
        // 0D 0227
        gbc.setState(0x98da, 0x7c62, 0x1d50, 0xc65c, 0x6836, 0x9671, 0x0, 0x0);
        gbc.writeMem(0x98da, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x7c62);
        EXPECT(gbc.pc(), 0x98db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98da), 0xd);
        // 0D 0228
        gbc.setState(0xc9c4, 0xda48, 0x3580, 0x2ba, 0x500d, 0x5005, 0x1, 0x1);
        gbc.writeMem(0xc9c4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xda48);
        EXPECT(gbc.pc(), 0xc9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c4), 0xd);
        // 0D 0229
        gbc.setState(0xb931, 0xc5fb, 0xe940, 0x1fdf, 0xfafb, 0x347b, 0x0, 0x1);
        gbc.writeMem(0xb931, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc5fb);
        EXPECT(gbc.pc(), 0xb932);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb931), 0xd);
        // 0D 022A
        gbc.setState(0xcac, 0xcce, 0xbb60, 0xbfbe, 0x5a8b, 0x29d2, 0x0, 0x1);
        gbc.writeMem(0xcac, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcce);
        EXPECT(gbc.pc(), 0xcad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 022B
        gbc.setState(0x322b, 0xec7, 0x2690, 0xdfef, 0x673f, 0x430b, 0x0, 0x0);
        gbc.writeMem(0x322b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xec7);
        EXPECT(gbc.pc(), 0x322c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 022C
        gbc.setState(0xb971, 0x6b5, 0x4380, 0x7494, 0xa2c1, 0x75af, 0x0, 0x1);
        gbc.writeMem(0xb971, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6b5);
        EXPECT(gbc.pc(), 0xb972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb971), 0xd);
        // 0D 022D
        gbc.setState(0xce7, 0x1985, 0xdc90, 0xdb6e, 0xe682, 0x3d2d, 0x1, 0x0);
        gbc.writeMem(0xce7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1985);
        EXPECT(gbc.pc(), 0xce8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 022E
        gbc.setState(0x399, 0x1896, 0xb0b0, 0x21e4, 0xc6c1, 0xd577, 0x1, 0x1);
        gbc.writeMem(0x399, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1896);
        EXPECT(gbc.pc(), 0x39a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 022F
        gbc.setState(0x44a6, 0x938b, 0xed00, 0xa4bb, 0x86f0, 0xd867, 0x1, 0x0);
        gbc.writeMem(0x44a6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x938b);
        EXPECT(gbc.pc(), 0x44a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0230
        gbc.setState(0xe6f9, 0x9837, 0x2ee0, 0x436e, 0x3419, 0x525a, 0x1, 0x0);
        gbc.writeMem(0xe6f9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9837);
        EXPECT(gbc.pc(), 0xe6fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6f9), 0xd);
        // 0D 0231
        gbc.setState(0x4627, 0x4bbd, 0x6a20, 0x5323, 0x6fdb, 0xc3e0, 0x1, 0x0);
        gbc.writeMem(0x4627, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4bbd);
        EXPECT(gbc.pc(), 0x4628);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0232
        gbc.setState(0x1f8c, 0xdd19, 0x93f0, 0xb595, 0x2fd0, 0x9c43, 0x0, 0x0);
        gbc.writeMem(0x1f8c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdd19);
        EXPECT(gbc.pc(), 0x1f8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0233
        gbc.setState(0x3be1, 0xdcd3, 0x3e40, 0xf5a5, 0x40f0, 0xc837, 0x1, 0x1);
        gbc.writeMem(0x3be1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdcd3);
        EXPECT(gbc.pc(), 0x3be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0234
        gbc.setState(0xa061, 0x8f1d, 0x5160, 0x3224, 0x61bb, 0x41c3, 0x0, 0x0);
        gbc.writeMem(0xa061, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8f1d);
        EXPECT(gbc.pc(), 0xa062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa061), 0xd);
        // 0D 0235
        gbc.setState(0x80e0, 0x8279, 0x9e20, 0xf099, 0xb4be, 0xe0bb, 0x0, 0x1);
        gbc.writeMem(0x80e0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8279);
        EXPECT(gbc.pc(), 0x80e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e0), 0xd);
        // 0D 0236
        gbc.setState(0x59f7, 0x1e94, 0xc330, 0x7782, 0xe3be, 0x9bc, 0x0, 0x1);
        gbc.writeMem(0x59f7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1e94);
        EXPECT(gbc.pc(), 0x59f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0237
        gbc.setState(0x5b72, 0x226e, 0xa950, 0xe3f4, 0xe856, 0x6ce9, 0x0, 0x0);
        gbc.writeMem(0x5b72, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x226e);
        EXPECT(gbc.pc(), 0x5b73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0238
        gbc.setState(0xad5, 0xc361, 0x58c0, 0xd5d7, 0x3157, 0x71bc, 0x0, 0x0);
        gbc.writeMem(0xad5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc361);
        EXPECT(gbc.pc(), 0xad6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 023A
        gbc.setState(0xbc0, 0x7b9e, 0x3180, 0x3360, 0x1d1b, 0xd9f3, 0x0, 0x0);
        gbc.writeMem(0xbc0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7b9e);
        EXPECT(gbc.pc(), 0xbc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 023B
        gbc.setState(0x7bb, 0xc7e0, 0xd4d0, 0x1226, 0x4890, 0xd8a9, 0x1, 0x0);
        gbc.writeMem(0x7bb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc7e0);
        EXPECT(gbc.pc(), 0x7bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 023C
        gbc.setState(0x4247, 0x4baa, 0x8ad0, 0xdc6b, 0xd083, 0x98d2, 0x0, 0x1);
        gbc.writeMem(0x4247, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4baa);
        EXPECT(gbc.pc(), 0x4248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 023D
        gbc.setState(0x528, 0x798e, 0x4fe0, 0xa3a3, 0x886f, 0x9f1a, 0x1, 0x0);
        gbc.writeMem(0x528, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x798e);
        EXPECT(gbc.pc(), 0x529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 023F
        gbc.setState(0x5584, 0x19eb, 0x2180, 0x5a41, 0x9b14, 0xd15f, 0x0, 0x0);
        gbc.writeMem(0x5584, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x19eb);
        EXPECT(gbc.pc(), 0x5585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0240
        gbc.setState(0x34e5, 0x58d9, 0x9930, 0x4241, 0x9c85, 0x6bac, 0x1, 0x1);
        gbc.writeMem(0x34e5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x58d9);
        EXPECT(gbc.pc(), 0x34e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0241
        gbc.setState(0x30b3, 0xf0cd, 0x6b70, 0x4ab4, 0x2930, 0xa2f5, 0x1, 0x0);
        gbc.writeMem(0x30b3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xf0cd);
        EXPECT(gbc.pc(), 0x30b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0242
        gbc.setState(0x541, 0x728a, 0xbed0, 0xfdcd, 0xc893, 0x3539, 0x0, 0x0);
        gbc.writeMem(0x541, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x728a);
        EXPECT(gbc.pc(), 0x542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0243
        gbc.setState(0xaa3f, 0x461a, 0x4f70, 0xa047, 0xa955, 0x1e1, 0x0, 0x0);
        gbc.writeMem(0xaa3f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x461a);
        EXPECT(gbc.pc(), 0xaa40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa3f), 0xd);
        // 0D 0244
        gbc.setState(0x5169, 0x8420, 0x4cf0, 0x66e2, 0x29e6, 0x6555, 0x0, 0x1);
        gbc.writeMem(0x5169, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8420);
        EXPECT(gbc.pc(), 0x516a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0245
        gbc.setState(0x943b, 0x1f11, 0x4a20, 0x9004, 0x7e0a, 0xd53a, 0x1, 0x1);
        gbc.writeMem(0x943b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1f11);
        EXPECT(gbc.pc(), 0x943c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x943b), 0xd);
        // 0D 0246
        gbc.setState(0x5b6a, 0x6483, 0xfff0, 0x6ef7, 0x32b2, 0x11d5, 0x1, 0x1);
        gbc.writeMem(0x5b6a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6483);
        EXPECT(gbc.pc(), 0x5b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0247
        gbc.setState(0xd439, 0xf9f3, 0x6470, 0xde48, 0x7921, 0x8461, 0x0, 0x0);
        gbc.writeMem(0xd439, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf9f3);
        EXPECT(gbc.pc(), 0xd43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd439), 0xd);
        // 0D 0248
        gbc.setState(0x5e7b, 0xf813, 0x95d0, 0xc388, 0xc50e, 0xc2eb, 0x1, 0x0);
        gbc.writeMem(0x5e7b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf813);
        EXPECT(gbc.pc(), 0x5e7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0249
        gbc.setState(0x6e48, 0x5e9e, 0x5d50, 0xc7cb, 0xa854, 0x6102, 0x1, 0x0);
        gbc.writeMem(0x6e48, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5e9e);
        EXPECT(gbc.pc(), 0x6e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 024A
        gbc.setState(0xb0ba, 0x5a46, 0x2040, 0xd313, 0xc17f, 0x3630, 0x0, 0x0);
        gbc.writeMem(0xb0ba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5a46);
        EXPECT(gbc.pc(), 0xb0bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ba), 0xd);
        // 0D 024B
        gbc.setState(0x6672, 0xb52c, 0xa610, 0xe037, 0x58b, 0x9c0d, 0x1, 0x0);
        gbc.writeMem(0x6672, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb52c);
        EXPECT(gbc.pc(), 0x6673);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 024C
        gbc.setState(0x75d8, 0xcc48, 0x5ba0, 0xf670, 0xad67, 0xa661, 0x0, 0x0);
        gbc.writeMem(0x75d8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xcc48);
        EXPECT(gbc.pc(), 0x75d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 024D
        gbc.setState(0xb6f4, 0x439e, 0xef50, 0x3212, 0x1bd6, 0x1436, 0x1, 0x0);
        gbc.writeMem(0xb6f4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x439e);
        EXPECT(gbc.pc(), 0xb6f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6f4), 0xd);
        // 0D 024E
        gbc.setState(0x6f52, 0xfc28, 0xdc0, 0xee12, 0xf600, 0xf905, 0x1, 0x0);
        gbc.writeMem(0x6f52, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xfc28);
        EXPECT(gbc.pc(), 0x6f53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 024F
        gbc.setState(0xeef7, 0xd792, 0xbc50, 0x601a, 0xd32d, 0x9ea1, 0x0, 0x1);
        gbc.writeMem(0xeef7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd792);
        EXPECT(gbc.pc(), 0xeef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeef7), 0xd);
        // 0D 0250
        gbc.setState(0x3a56, 0x1b09, 0x7ec0, 0xfa8f, 0x5f4a, 0x6319, 0x1, 0x1);
        gbc.writeMem(0x3a56, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x1b09);
        EXPECT(gbc.pc(), 0x3a57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0251
        gbc.setState(0x7a9e, 0xf341, 0xd1c0, 0x14eb, 0x3da1, 0x976e, 0x0, 0x0);
        gbc.writeMem(0x7a9e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf341);
        EXPECT(gbc.pc(), 0x7a9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0252
        gbc.setState(0x6b34, 0x9653, 0x1a80, 0xfa3b, 0x708a, 0xc4cb, 0x1, 0x1);
        gbc.writeMem(0x6b34, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9653);
        EXPECT(gbc.pc(), 0x6b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0253
        gbc.setState(0xe8d3, 0x8470, 0xfb80, 0xb9b3, 0x1993, 0xe2a9, 0x0, 0x1);
        gbc.writeMem(0xe8d3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x8470);
        EXPECT(gbc.pc(), 0xe8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d3), 0xd);
        // 0D 0254
        gbc.setState(0x7597, 0x731, 0xeb00, 0xff19, 0x1306, 0x3db9, 0x1, 0x1);
        gbc.writeMem(0x7597, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x731);
        EXPECT(gbc.pc(), 0x7598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0255
        gbc.setState(0x82d4, 0x423b, 0x9a0, 0x7304, 0xb24a, 0xbb, 0x0, 0x0);
        gbc.writeMem(0x82d4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x423b);
        EXPECT(gbc.pc(), 0x82d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82d4), 0xd);
        // 0D 0256
        gbc.setState(0x7133, 0xcfa8, 0xddd0, 0xcdd3, 0xf518, 0xe806, 0x0, 0x1);
        gbc.writeMem(0x7133, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xcfa8);
        EXPECT(gbc.pc(), 0x7134);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0257
        gbc.setState(0x41e7, 0xf5f3, 0xf490, 0xf392, 0xd3bd, 0x23b5, 0x0, 0x0);
        gbc.writeMem(0x41e7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf5f3);
        EXPECT(gbc.pc(), 0x41e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0258
        gbc.setState(0xcb74, 0xc59b, 0x1670, 0xcdca, 0xb558, 0x5a58, 0x1, 0x1);
        gbc.writeMem(0xcb74, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc59b);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb74), 0xd);
        // 0D 0259
        gbc.setState(0xc8a2, 0xf8d9, 0x5ca0, 0x229f, 0xc496, 0x6770, 0x0, 0x1);
        gbc.writeMem(0xc8a2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf8d9);
        EXPECT(gbc.pc(), 0xc8a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a2), 0xd);
        // 0D 025A
        gbc.setState(0x52, 0xcd3b, 0x9e70, 0xf8a1, 0xf86, 0xd3a2, 0x0, 0x0);
        gbc.writeMem(0x52, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xcd3b);
        EXPECT(gbc.pc(), 0x53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 025B
        gbc.setState(0x4095, 0x3ac7, 0x4cf0, 0xd281, 0xab57, 0xd66, 0x1, 0x0);
        gbc.writeMem(0x4095, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3ac7);
        EXPECT(gbc.pc(), 0x4096);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 025C
        gbc.setState(0xebbe, 0x19fb, 0x28e0, 0xd058, 0xdd72, 0xb250, 0x0, 0x1);
        gbc.writeMem(0xebbe, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x19fb);
        EXPECT(gbc.pc(), 0xebbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebbe), 0xd);
        // 0D 025E
        gbc.setState(0x5e24, 0x86b9, 0x5680, 0xf7d1, 0x1d16, 0x2463, 0x1, 0x1);
        gbc.writeMem(0x5e24, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x86b9);
        EXPECT(gbc.pc(), 0x5e25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 025F
        gbc.setState(0xc3fc, 0xc1a2, 0x2f30, 0xa280, 0xaf9a, 0x7de7, 0x1, 0x0);
        gbc.writeMem(0xc3fc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xc1a2);
        EXPECT(gbc.pc(), 0xc3fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3fc), 0xd);
        // 0D 0260
        gbc.setState(0x137c, 0xb4d8, 0x560, 0xe7a5, 0x9569, 0x744, 0x0, 0x0);
        gbc.writeMem(0x137c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb4d8);
        EXPECT(gbc.pc(), 0x137d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0261
        gbc.setState(0xd726, 0x7fa1, 0x6bd0, 0x2dc4, 0xc174, 0xc348, 0x1, 0x0);
        gbc.writeMem(0xd726, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7fa1);
        EXPECT(gbc.pc(), 0xd727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd726), 0xd);
        // 0D 0263
        gbc.setState(0x3748, 0x56ba, 0x1c10, 0x6541, 0xca7b, 0xf5da, 0x1, 0x0);
        gbc.writeMem(0x3748, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x56ba);
        EXPECT(gbc.pc(), 0x3749);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0264
        gbc.setState(0x9224, 0xdb51, 0x4070, 0x9aaa, 0x375f, 0xde39, 0x0, 0x0);
        gbc.writeMem(0x9224, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xdb51);
        EXPECT(gbc.pc(), 0x9225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9224), 0xd);
        // 0D 0265
        gbc.setState(0x6747, 0x3c53, 0xca00, 0xd6f5, 0xc303, 0xaa30, 0x0, 0x1);
        gbc.writeMem(0x6747, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3c53);
        EXPECT(gbc.pc(), 0x6748);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0266
        gbc.setState(0xa845, 0x157c, 0xaf30, 0xf2cc, 0xa6ed, 0xbc4d, 0x1, 0x1);
        gbc.writeMem(0xa845, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x157c);
        EXPECT(gbc.pc(), 0xa846);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa845), 0xd);
        // 0D 0267
        gbc.setState(0x1f00, 0xaddd, 0x1c90, 0x903, 0x6805, 0x23e7, 0x0, 0x0);
        gbc.writeMem(0x1f00, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xaddd);
        EXPECT(gbc.pc(), 0x1f01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0268
        gbc.setState(0xbbbb, 0xf477, 0x4a30, 0x39fe, 0xad0b, 0xdd23, 0x0, 0x0);
        gbc.writeMem(0xbbbb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf477);
        EXPECT(gbc.pc(), 0xbbbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbbb), 0xd);
        // 0D 0269
        gbc.setState(0xcc2d, 0x2cec, 0x8220, 0xdb4a, 0xdf9c, 0x7fd1, 0x0, 0x0);
        gbc.writeMem(0xcc2d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2cec);
        EXPECT(gbc.pc(), 0xcc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2d), 0xd);
        // 0D 026A
        gbc.setState(0x2aab, 0x3f0e, 0xce80, 0x8f14, 0xd569, 0x9d90, 0x1, 0x0);
        gbc.writeMem(0x2aab, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x3f0e);
        EXPECT(gbc.pc(), 0x2aac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 026B
        gbc.setState(0x8ece, 0x35e8, 0x9390, 0x41c8, 0x77de, 0x88e8, 0x1, 0x0);
        gbc.writeMem(0x8ece, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x35e8);
        EXPECT(gbc.pc(), 0x8ecf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ece), 0xd);
        // 0D 026D
        gbc.setState(0x76a3, 0x4302, 0x8010, 0x4e15, 0xd48c, 0xcc01, 0x0, 0x0);
        gbc.writeMem(0x76a3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4302);
        EXPECT(gbc.pc(), 0x76a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 026E
        gbc.setState(0x60a7, 0xa193, 0x9a70, 0x18ad, 0x9a38, 0x61ea, 0x0, 0x0);
        gbc.writeMem(0x60a7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa193);
        EXPECT(gbc.pc(), 0x60a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0270
        gbc.setState(0x6f37, 0x30e, 0xa250, 0x43d6, 0xafc9, 0x9bc6, 0x0, 0x1);
        gbc.writeMem(0x6f37, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x30e);
        EXPECT(gbc.pc(), 0x6f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0271
        gbc.setState(0x1fe4, 0x7f6f, 0x7cc0, 0x7884, 0x4050, 0xe881, 0x1, 0x0);
        gbc.writeMem(0x1fe4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x7f6f);
        EXPECT(gbc.pc(), 0x1fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0272
        gbc.setState(0x3d74, 0x4cde, 0x16f0, 0x5869, 0x2d43, 0x8f17, 0x0, 0x0);
        gbc.writeMem(0x3d74, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4cde);
        EXPECT(gbc.pc(), 0x3d75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0273
        gbc.setState(0x1105, 0x5efa, 0xf0f0, 0x919d, 0xc9a8, 0xef7d, 0x1, 0x1);
        gbc.writeMem(0x1105, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x5efa);
        EXPECT(gbc.pc(), 0x1106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0274
        gbc.setState(0x776d, 0x9a30, 0xe6e0, 0x3f9d, 0x3774, 0xd001, 0x0, 0x0);
        gbc.writeMem(0x776d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x9a30);
        EXPECT(gbc.pc(), 0x776e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0275
        gbc.setState(0xd8ef, 0xeefa, 0x1b50, 0xc767, 0x92d4, 0x9f67, 0x1, 0x0);
        gbc.writeMem(0xd8ef, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xeefa);
        EXPECT(gbc.pc(), 0xd8f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8ef), 0xd);
        // 0D 0276
        gbc.setState(0x59d4, 0xec2, 0xd690, 0x9510, 0xcf53, 0x97d5, 0x1, 0x1);
        gbc.writeMem(0x59d4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xec2);
        EXPECT(gbc.pc(), 0x59d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0277
        gbc.setState(0x51fd, 0x5d14, 0x48b0, 0x4353, 0x71c3, 0x3ffb, 0x1, 0x0);
        gbc.writeMem(0x51fd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5d14);
        EXPECT(gbc.pc(), 0x51fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0278
        gbc.setState(0x330c, 0x99f3, 0x3440, 0xb0eb, 0x5d7e, 0x5d33, 0x0, 0x1);
        gbc.writeMem(0x330c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x99f3);
        EXPECT(gbc.pc(), 0x330d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0279
        gbc.setState(0x2d50, 0x1bcd, 0x8e70, 0xca17, 0x9f5c, 0x463b, 0x1, 0x0);
        gbc.writeMem(0x2d50, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1bcd);
        EXPECT(gbc.pc(), 0x2d51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 027A
        gbc.setState(0xc0ca, 0x12ff, 0x60c0, 0xd619, 0x363e, 0x1b10, 0x0, 0x1);
        gbc.writeMem(0xc0ca, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x12ff);
        EXPECT(gbc.pc(), 0xc0cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0ca), 0xd);
        // 0D 027B
        gbc.setState(0x2dd3, 0x39d4, 0x93f0, 0xef29, 0xe789, 0x73fd, 0x1, 0x0);
        gbc.writeMem(0x2dd3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x39d4);
        EXPECT(gbc.pc(), 0x2dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 027C
        gbc.setState(0xca13, 0xb710, 0x56d0, 0x5b11, 0x3dcf, 0xb420, 0x0, 0x1);
        gbc.writeMem(0xca13, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb710);
        EXPECT(gbc.pc(), 0xca14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca13), 0xd);
        // 0D 027D
        gbc.setState(0xa46, 0x97cc, 0xa110, 0x8472, 0xa35a, 0x1b1e, 0x1, 0x0);
        gbc.writeMem(0xa46, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x97cc);
        EXPECT(gbc.pc(), 0xa47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 027E
        gbc.setState(0x36b, 0xb6be, 0xb600, 0x2bef, 0x261b, 0x890e, 0x0, 0x0);
        gbc.writeMem(0x36b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xb6be);
        EXPECT(gbc.pc(), 0x36c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 027F
        gbc.setState(0x4db5, 0xf147, 0xa040, 0xf6a2, 0x18a, 0xed96, 0x0, 0x0);
        gbc.writeMem(0x4db5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xf147);
        EXPECT(gbc.pc(), 0x4db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0280
        gbc.setState(0x7dcd, 0x3518, 0xdb10, 0x551c, 0x99b9, 0xa644, 0x1, 0x0);
        gbc.writeMem(0x7dcd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3518);
        EXPECT(gbc.pc(), 0x7dce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0281
        gbc.setState(0x6ff9, 0xe3b8, 0x9530, 0xaad2, 0xa2f6, 0xb165, 0x1, 0x1);
        gbc.writeMem(0x6ff9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe3b8);
        EXPECT(gbc.pc(), 0x6ffa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0282
        gbc.setState(0x3558, 0xf51, 0x3360, 0xf11f, 0x41f4, 0x341a, 0x1, 0x0);
        gbc.writeMem(0x3558, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xf51);
        EXPECT(gbc.pc(), 0x3559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0283
        gbc.setState(0x1daa, 0x39dd, 0x2170, 0x8a10, 0x1fda, 0x6bc1, 0x1, 0x0);
        gbc.writeMem(0x1daa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x39dd);
        EXPECT(gbc.pc(), 0x1dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0284
        gbc.setState(0xe63a, 0x4937, 0x1c50, 0x9c36, 0x1de6, 0xf57a, 0x1, 0x0);
        gbc.writeMem(0xe63a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4937);
        EXPECT(gbc.pc(), 0xe63b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe63a), 0xd);
        // 0D 0285
        gbc.setState(0x89ba, 0x4ce, 0xd200, 0x998b, 0xdf0, 0xac1c, 0x1, 0x0);
        gbc.writeMem(0x89ba, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4ce);
        EXPECT(gbc.pc(), 0x89bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89ba), 0xd);
        // 0D 0286
        gbc.setState(0xe14a, 0x2f8a, 0x8e60, 0xb192, 0x7dd1, 0x70a7, 0x1, 0x0);
        gbc.writeMem(0xe14a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2f8a);
        EXPECT(gbc.pc(), 0xe14b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe14a), 0xd);
        // 0D 0287
        gbc.setState(0x3049, 0xa190, 0x8260, 0x7925, 0x6a9d, 0xc75b, 0x0, 0x1);
        gbc.writeMem(0x3049, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa190);
        EXPECT(gbc.pc(), 0x304a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0288
        gbc.setState(0x667b, 0xd524, 0xc960, 0x3cae, 0x8f84, 0xabc, 0x1, 0x1);
        gbc.writeMem(0x667b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd524);
        EXPECT(gbc.pc(), 0x667c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0289
        gbc.setState(0x331d, 0x7737, 0xb010, 0xa1d8, 0xeb52, 0xdb21, 0x0, 0x1);
        gbc.writeMem(0x331d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7737);
        EXPECT(gbc.pc(), 0x331e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 028A
        gbc.setState(0xc2e6, 0xd168, 0x8e60, 0x77d4, 0x7317, 0x905f, 0x1, 0x1);
        gbc.writeMem(0xc2e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd168);
        EXPECT(gbc.pc(), 0xc2e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2e6), 0xd);
        // 0D 028B
        gbc.setState(0x9206, 0xa379, 0xaa40, 0xf94b, 0x55b0, 0xc8c, 0x1, 0x1);
        gbc.writeMem(0x9206, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0x9207);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9206), 0xd);
        // 0D 028C
        gbc.setState(0x865f, 0x8d83, 0x1a40, 0xe1ae, 0x73dc, 0x11ef, 0x1, 0x0);
        gbc.writeMem(0x865f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8d83);
        EXPECT(gbc.pc(), 0x8660);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x865f), 0xd);
        // 0D 028D
        gbc.setState(0x7f31, 0x13af, 0x85b0, 0x93de, 0x59f3, 0x5a54, 0x0, 0x0);
        gbc.writeMem(0x7f31, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x13af);
        EXPECT(gbc.pc(), 0x7f32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 028E
        gbc.setState(0xeb41, 0x19e, 0x9720, 0x8835, 0x3e80, 0x6e3c, 0x0, 0x0);
        gbc.writeMem(0xeb41, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x19e);
        EXPECT(gbc.pc(), 0xeb42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb41), 0xd);
        // 0D 028F
        gbc.setState(0x3db2, 0xc9c7, 0x4340, 0xe934, 0xdba2, 0xb6a2, 0x0, 0x1);
        gbc.writeMem(0x3db2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc9c7);
        EXPECT(gbc.pc(), 0x3db3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0290
        gbc.setState(0x83ab, 0x65c4, 0x6870, 0x7f7e, 0xd656, 0x2154, 0x0, 0x1);
        gbc.writeMem(0x83ab, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x65c4);
        EXPECT(gbc.pc(), 0x83ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83ab), 0xd);
        // 0D 0291
        gbc.setState(0x4d4a, 0xa0fb, 0xe590, 0xe853, 0x606b, 0x9f58, 0x0, 0x0);
        gbc.writeMem(0x4d4a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa0fb);
        EXPECT(gbc.pc(), 0x4d4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0292
        gbc.setState(0x7f04, 0x3fdc, 0x9c50, 0xd5bf, 0x4eee, 0x9efc, 0x1, 0x0);
        gbc.writeMem(0x7f04, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x3fdc);
        EXPECT(gbc.pc(), 0x7f05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0293
        gbc.setState(0x943c, 0xa038, 0xfd0, 0x67ff, 0x97f5, 0xdda4, 0x0, 0x0);
        gbc.writeMem(0x943c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xa038);
        EXPECT(gbc.pc(), 0x943d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x943c), 0xd);
        // 0D 0294
        gbc.setState(0x819b, 0x9275, 0x8120, 0x19c1, 0xa7e, 0x6380, 0x1, 0x1);
        gbc.writeMem(0x819b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9275);
        EXPECT(gbc.pc(), 0x819c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x819b), 0xd);
        // 0D 0295
        gbc.setState(0xe1b3, 0x96d3, 0xa3c0, 0x1b02, 0xb311, 0xd2a8, 0x0, 0x1);
        gbc.writeMem(0xe1b3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x96d3);
        EXPECT(gbc.pc(), 0xe1b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1b3), 0xd);
        // 0D 0296
        gbc.setState(0x4347, 0xd472, 0x9f00, 0x816c, 0x1e7, 0x4550, 0x0, 0x1);
        gbc.writeMem(0x4347, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd472);
        EXPECT(gbc.pc(), 0x4348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0297
        gbc.setState(0xdb6b, 0xa0e3, 0x2770, 0xbd16, 0xb3fe, 0x75a9, 0x0, 0x1);
        gbc.writeMem(0xdb6b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa0e3);
        EXPECT(gbc.pc(), 0xdb6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb6b), 0xd);
        // 0D 0298
        gbc.setState(0xca39, 0x57fd, 0x4a60, 0x5b8d, 0x946b, 0x5b99, 0x1, 0x0);
        gbc.writeMem(0xca39, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x57fd);
        EXPECT(gbc.pc(), 0xca3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca39), 0xd);
        // 0D 0299
        gbc.setState(0xbc7e, 0xfc69, 0x2c0, 0x7de, 0x5a15, 0xfca7, 0x1, 0x0);
        gbc.writeMem(0xbc7e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xfc69);
        EXPECT(gbc.pc(), 0xbc7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc7e), 0xd);
        // 0D 029A
        gbc.setState(0xd6ed, 0xf98b, 0x6290, 0x5c2d, 0xc6d1, 0xfbd8, 0x1, 0x1);
        gbc.writeMem(0xd6ed, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xf98b);
        EXPECT(gbc.pc(), 0xd6ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ed), 0xd);
        // 0D 029B
        gbc.setState(0x1d37, 0x2de0, 0x4320, 0xa819, 0xa06e, 0x34de, 0x0, 0x1);
        gbc.writeMem(0x1d37, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x2de0);
        EXPECT(gbc.pc(), 0x1d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 029C
        gbc.setState(0xeea9, 0xd04a, 0x37f0, 0xf0d6, 0xe236, 0x9728, 0x1, 0x0);
        gbc.writeMem(0xeea9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd04a);
        EXPECT(gbc.pc(), 0xeeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea9), 0xd);
        // 0D 029D
        gbc.setState(0x7ab, 0xe3e2, 0xce10, 0xfcf1, 0x3d9a, 0x23f, 0x1, 0x1);
        gbc.writeMem(0x7ab, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xe3e2);
        EXPECT(gbc.pc(), 0x7ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 029E
        gbc.setState(0x782d, 0x7e06, 0x6890, 0xdf94, 0xde48, 0xdd9, 0x1, 0x0);
        gbc.writeMem(0x782d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7e06);
        EXPECT(gbc.pc(), 0x782e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 029F
        gbc.setState(0x9dca, 0xf1dc, 0xb070, 0xe2ac, 0x90b0, 0x78fb, 0x0, 0x1);
        gbc.writeMem(0x9dca, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xf1dc);
        EXPECT(gbc.pc(), 0x9dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dca), 0xd);
        // 0D 02A0
        gbc.setState(0xfa4, 0x7fe8, 0xace0, 0x4c9, 0x4ea6, 0xa038, 0x0, 0x1);
        gbc.writeMem(0xfa4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7fe8);
        EXPECT(gbc.pc(), 0xfa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02A1
        gbc.setState(0xb3d9, 0x5f7a, 0xc3d0, 0x85ee, 0x1806, 0x86cf, 0x0, 0x1);
        gbc.writeMem(0xb3d9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5f7a);
        EXPECT(gbc.pc(), 0xb3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3d9), 0xd);
        // 0D 02A2
        gbc.setState(0x7cf5, 0x4df1, 0xcae0, 0xf57e, 0xa301, 0xfd33, 0x1, 0x0);
        gbc.writeMem(0x7cf5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x4df1);
        EXPECT(gbc.pc(), 0x7cf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02A3
        gbc.setState(0x3941, 0x106b, 0x4a0, 0x94ea, 0x7f3e, 0xe7b4, 0x1, 0x0);
        gbc.writeMem(0x3941, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x106b);
        EXPECT(gbc.pc(), 0x3942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02A4
        gbc.setState(0x8bd9, 0x8ebf, 0x6740, 0xa336, 0x465e, 0x130, 0x0, 0x0);
        gbc.writeMem(0x8bd9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8ebf);
        EXPECT(gbc.pc(), 0x8bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd9), 0xd);
        // 0D 02A5
        gbc.setState(0xe97c, 0x30bf, 0x7250, 0x492c, 0x5f55, 0x686f, 0x0, 0x1);
        gbc.writeMem(0xe97c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x30bf);
        EXPECT(gbc.pc(), 0xe97d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe97c), 0xd);
        // 0D 02A6
        gbc.setState(0xa891, 0xedc5, 0xd640, 0xd391, 0xe769, 0xdd97, 0x0, 0x0);
        gbc.writeMem(0xa891, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xedc5);
        EXPECT(gbc.pc(), 0xa892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa891), 0xd);
        // 0D 02A7
        gbc.setState(0xa840, 0x6114, 0x3ba0, 0xd5b0, 0x1529, 0xac81, 0x1, 0x0);
        gbc.writeMem(0xa840, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x6114);
        EXPECT(gbc.pc(), 0xa841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa840), 0xd);
        // 0D 02A8
        gbc.setState(0x57ff, 0x9ebf, 0xfa60, 0x40de, 0x1bac, 0xe451, 0x1, 0x1);
        gbc.writeMem(0x57ff, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9ebf);
        EXPECT(gbc.pc(), 0x5800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02A9
        gbc.setState(0x6e91, 0x6b67, 0x48a0, 0x2441, 0x84b0, 0xb73f, 0x1, 0x0);
        gbc.writeMem(0x6e91, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6b67);
        EXPECT(gbc.pc(), 0x6e92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02AA
        gbc.setState(0x2293, 0x668f, 0x1480, 0x6309, 0x7708, 0x2aa3, 0x0, 0x1);
        gbc.writeMem(0x2293, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x668f);
        EXPECT(gbc.pc(), 0x2294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02AC
        gbc.setState(0x64cd, 0xf20a, 0x150, 0xb740, 0xf9ab, 0xdc56, 0x1, 0x0);
        gbc.writeMem(0x64cd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xf20a);
        EXPECT(gbc.pc(), 0x64ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 02AD
        gbc.setState(0x741e, 0x24a2, 0xc0b0, 0xb28c, 0xcffc, 0x449e, 0x1, 0x1);
        gbc.writeMem(0x741e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x24a2);
        EXPECT(gbc.pc(), 0x741f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02AE
        gbc.setState(0x7744, 0x5fe0, 0xfe90, 0x361d, 0x1c52, 0xe3b6, 0x0, 0x1);
        gbc.writeMem(0x7744, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x5fe0);
        EXPECT(gbc.pc(), 0x7745);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02AF
        gbc.setState(0xa692, 0x6c50, 0xe040, 0x3c4d, 0xa3a2, 0xd9bd, 0x1, 0x1);
        gbc.writeMem(0xa692, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6c50);
        EXPECT(gbc.pc(), 0xa693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa692), 0xd);
        // 0D 02B0
        gbc.setState(0x2f6c, 0x7495, 0x81c0, 0x2e1d, 0x5dde, 0x621a, 0x1, 0x0);
        gbc.writeMem(0x2f6c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7495);
        EXPECT(gbc.pc(), 0x2f6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02B1
        gbc.setState(0x160c, 0x5aa0, 0xcf10, 0x1769, 0x4ee6, 0xa759, 0x0, 0x0);
        gbc.writeMem(0x160c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5aa0);
        EXPECT(gbc.pc(), 0x160d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02B3
        gbc.setState(0x3a34, 0x4d15, 0xaa00, 0xdaa1, 0x701e, 0x6b8c, 0x0, 0x1);
        gbc.writeMem(0x3a34, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x4d15);
        EXPECT(gbc.pc(), 0x3a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02B4
        gbc.setState(0xddb5, 0x31ea, 0x1b00, 0xf3f7, 0x890d, 0xf7ab, 0x1, 0x0);
        gbc.writeMem(0xddb5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x31ea);
        EXPECT(gbc.pc(), 0xddb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddb5), 0xd);
        // 0D 02B5
        gbc.setState(0xa2cd, 0x1932, 0x4620, 0x5093, 0x741a, 0x1c, 0x0, 0x0);
        gbc.writeMem(0xa2cd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x1932);
        EXPECT(gbc.pc(), 0xa2ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2cd), 0xd);
        // 0D 02B6
        gbc.setState(0x5cc9, 0x60a8, 0xff30, 0x6f3f, 0xcd65, 0x37a0, 0x0, 0x1);
        gbc.writeMem(0x5cc9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x60a8);
        EXPECT(gbc.pc(), 0x5cca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02B7
        gbc.setState(0xa439, 0x5e09, 0x5700, 0x91dc, 0xeebb, 0xf629, 0x0, 0x0);
        gbc.writeMem(0xa439, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5e09);
        EXPECT(gbc.pc(), 0xa43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa439), 0xd);
        // 0D 02B8
        gbc.setState(0x4400, 0x5b43, 0xd460, 0xca0b, 0x2b58, 0x4749, 0x0, 0x1);
        gbc.writeMem(0x4400, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5b43);
        EXPECT(gbc.pc(), 0x4401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02B9
        gbc.setState(0x66d7, 0x3107, 0x3460, 0xa85b, 0x7fc8, 0x2335, 0x0, 0x0);
        gbc.writeMem(0x66d7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3107);
        EXPECT(gbc.pc(), 0x66d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02BA
        gbc.setState(0xe33, 0x5ce2, 0x5480, 0x2f5e, 0x5fe, 0x99fe, 0x0, 0x0);
        gbc.writeMem(0xe33, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5ce2);
        EXPECT(gbc.pc(), 0xe34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02BB
        gbc.setState(0xe78f, 0x44b, 0xbda0, 0x9311, 0x712e, 0x68b0, 0x1, 0x1);
        gbc.writeMem(0xe78f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x44b);
        EXPECT(gbc.pc(), 0xe790);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78f), 0xd);
        // 0D 02BC
        gbc.setState(0xec52, 0x37f7, 0x5d0, 0xe445, 0xd8d3, 0xd10a, 0x0, 0x0);
        gbc.writeMem(0xec52, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x37f7);
        EXPECT(gbc.pc(), 0xec53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec52), 0xd);
        // 0D 02BD
        gbc.setState(0x2adc, 0xa516, 0xbe50, 0x25e5, 0xe4df, 0xf134, 0x0, 0x1);
        gbc.writeMem(0x2adc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xa516);
        EXPECT(gbc.pc(), 0x2add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02BE
        gbc.setState(0x2a1c, 0xf75b, 0x4ec0, 0x30d1, 0xc957, 0x88ad, 0x0, 0x0);
        gbc.writeMem(0x2a1c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xf75b);
        EXPECT(gbc.pc(), 0x2a1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02BF
        gbc.setState(0x5410, 0x7fdd, 0x69f0, 0x7bb, 0xcaf1, 0xcbcd, 0x1, 0x1);
        gbc.writeMem(0x5410, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7fdd);
        EXPECT(gbc.pc(), 0x5411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02C0
        gbc.setState(0x9952, 0xc7dc, 0x1920, 0x1110, 0x91e5, 0x6004, 0x0, 0x1);
        gbc.writeMem(0x9952, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xc7dc);
        EXPECT(gbc.pc(), 0x9953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9952), 0xd);
        // 0D 02C1
        gbc.setState(0x7fc9, 0x3088, 0x78c0, 0xbbe5, 0x50a2, 0x81ec, 0x1, 0x0);
        gbc.writeMem(0x7fc9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3088);
        EXPECT(gbc.pc(), 0x7fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02C2
        gbc.setState(0xce09, 0x5727, 0x5af0, 0x5a5b, 0x2a8e, 0xfc, 0x1, 0x0);
        gbc.writeMem(0xce09, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x5727);
        EXPECT(gbc.pc(), 0xce0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce09), 0xd);
        // 0D 02C3
        gbc.setState(0x82f5, 0x86e1, 0x9d20, 0xc440, 0xde5, 0x4b41, 0x0, 0x1);
        gbc.writeMem(0x82f5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x86e1);
        EXPECT(gbc.pc(), 0x82f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82f5), 0xd);
        // 0D 02C4
        gbc.setState(0x44a9, 0x5460, 0x87d0, 0x75a7, 0xefe3, 0x6e90, 0x1, 0x1);
        gbc.writeMem(0x44a9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5460);
        EXPECT(gbc.pc(), 0x44aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02C6
        gbc.setState(0xc91, 0x6b3d, 0xcf00, 0x77d0, 0x44dd, 0x53b2, 0x1, 0x1);
        gbc.writeMem(0xc91, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6b3d);
        EXPECT(gbc.pc(), 0xc92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 02C7
        gbc.setState(0x1625, 0x25e7, 0xb900, 0x1716, 0xe241, 0x7cf, 0x1, 0x1);
        gbc.writeMem(0x1625, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x25e7);
        EXPECT(gbc.pc(), 0x1626);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02C8
        gbc.setState(0x6af0, 0x6545, 0xe450, 0xb11, 0xe0c0, 0x52ef, 0x0, 0x0);
        gbc.writeMem(0x6af0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6545);
        EXPECT(gbc.pc(), 0x6af1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02CA
        gbc.setState(0x4b97, 0xdc98, 0xcca0, 0x76b0, 0x4227, 0xb09a, 0x1, 0x0);
        gbc.writeMem(0x4b97, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xdc98);
        EXPECT(gbc.pc(), 0x4b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 02CB
        gbc.setState(0x4f85, 0x64b4, 0x8c70, 0x586d, 0x9c31, 0x2882, 0x1, 0x0);
        gbc.writeMem(0x4f85, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x64b4);
        EXPECT(gbc.pc(), 0x4f86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02CC
        gbc.setState(0x99a3, 0x384c, 0x5610, 0x9225, 0xe4a8, 0x264e, 0x1, 0x0);
        gbc.writeMem(0x99a3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x384c);
        EXPECT(gbc.pc(), 0x99a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a3), 0xd);
        // 0D 02CD
        gbc.setState(0x9104, 0x5980, 0xb1c0, 0x6730, 0x9552, 0xe36d, 0x1, 0x0);
        gbc.writeMem(0x9104, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5980);
        EXPECT(gbc.pc(), 0x9105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9104), 0xd);
        // 0D 02CE
        gbc.setState(0xc151, 0x5cbd, 0xd770, 0xceca, 0x3b44, 0xe19, 0x0, 0x1);
        gbc.writeMem(0xc151, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5cbd);
        EXPECT(gbc.pc(), 0xc152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc151), 0xd);
        // 0D 02CF
        gbc.setState(0xe007, 0x2fd9, 0xf7c0, 0x73ad, 0xb8a3, 0x437a, 0x1, 0x1);
        gbc.writeMem(0xe007, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2fd9);
        EXPECT(gbc.pc(), 0xe008);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe007), 0xd);
        // 0D 02D0
        gbc.setState(0x7064, 0x1ba1, 0xbaa0, 0x1a2b, 0x3232, 0x543d, 0x1, 0x1);
        gbc.writeMem(0x7064, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1ba1);
        EXPECT(gbc.pc(), 0x7065);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D1
        gbc.setState(0x1fcd, 0x5865, 0xaaa0, 0xde3d, 0x2ce2, 0x88e7, 0x0, 0x1);
        gbc.writeMem(0x1fcd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x5865);
        EXPECT(gbc.pc(), 0x1fce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D2
        gbc.setState(0x3b31, 0xe1c4, 0x51f0, 0x6955, 0x9ac3, 0xf632, 0x1, 0x1);
        gbc.writeMem(0x3b31, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe1c4);
        EXPECT(gbc.pc(), 0x3b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02D3
        gbc.setState(0x5037, 0xc4b5, 0x7660, 0xbeae, 0x7c44, 0xc041, 0x0, 0x1);
        gbc.writeMem(0x5037, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc4b5);
        EXPECT(gbc.pc(), 0x5038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D4
        gbc.setState(0x2b5f, 0x30bb, 0x2360, 0x97f2, 0x972, 0xabe4, 0x0, 0x1);
        gbc.writeMem(0x2b5f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x30bb);
        EXPECT(gbc.pc(), 0x2b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D5
        gbc.setState(0x171b, 0x49f2, 0x9920, 0x274c, 0x37e6, 0xbd2f, 0x1, 0x0);
        gbc.writeMem(0x171b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x49f2);
        EXPECT(gbc.pc(), 0x171c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D6
        gbc.setState(0x5b0e, 0xe301, 0x2d20, 0x29b2, 0x2d31, 0xb664, 0x1, 0x0);
        gbc.writeMem(0x5b0e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe301);
        EXPECT(gbc.pc(), 0x5b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02D7
        gbc.setState(0x16d2, 0xab15, 0xae30, 0x25d0, 0xcff0, 0xcda2, 0x1, 0x0);
        gbc.writeMem(0x16d2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xab15);
        EXPECT(gbc.pc(), 0x16d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 02D8
        gbc.setState(0xc759, 0x76d7, 0xbfc0, 0x16d9, 0x8e27, 0xf074, 0x0, 0x0);
        gbc.writeMem(0xc759, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x76d7);
        EXPECT(gbc.pc(), 0xc75a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc759), 0xd);
        // 0D 02D9
        gbc.setState(0xb6ef, 0x1207, 0x2350, 0x526a, 0x2fde, 0xacc1, 0x0, 0x1);
        gbc.writeMem(0xb6ef, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1207);
        EXPECT(gbc.pc(), 0xb6f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ef), 0xd);
        // 0D 02DA
        gbc.setState(0xbd46, 0xa08c, 0xe760, 0x5bfa, 0x12eb, 0xb5a5, 0x1, 0x1);
        gbc.writeMem(0xbd46, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa08c);
        EXPECT(gbc.pc(), 0xbd47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd46), 0xd);
        // 0D 02DB
        gbc.setState(0x6bb9, 0x5e29, 0xd950, 0xaaa9, 0xb829, 0xaa2f, 0x0, 0x0);
        gbc.writeMem(0x6bb9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5e29);
        EXPECT(gbc.pc(), 0x6bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02DC
        gbc.setState(0xc61f, 0x38ef, 0x9f00, 0x7dcf, 0xe1ac, 0xdad5, 0x0, 0x1);
        gbc.writeMem(0xc61f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x38ef);
        EXPECT(gbc.pc(), 0xc620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61f), 0xd);
        // 0D 02DD
        gbc.setState(0x12d3, 0x1161, 0x5e40, 0x9cb0, 0xfe77, 0x1211, 0x0, 0x1);
        gbc.writeMem(0x12d3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x1161);
        EXPECT(gbc.pc(), 0x12d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 02E0
        gbc.setState(0x2dae, 0xada7, 0xb30, 0xb3f6, 0xfbcf, 0x7959, 0x0, 0x1);
        gbc.writeMem(0x2dae, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xada7);
        EXPECT(gbc.pc(), 0x2daf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02E1
        gbc.setState(0xe49a, 0xb80, 0x8a10, 0x8a7e, 0x163b, 0x304c, 0x1, 0x1);
        gbc.writeMem(0xe49a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb80);
        EXPECT(gbc.pc(), 0xe49b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe49a), 0xd);
        // 0D 02E3
        gbc.setState(0x8d36, 0x8ee4, 0x5d30, 0x8dc3, 0xfbc5, 0xfc84, 0x1, 0x1);
        gbc.writeMem(0x8d36, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8ee4);
        EXPECT(gbc.pc(), 0x8d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d36), 0xd);
        // 0D 02E4
        gbc.setState(0xae17, 0x3fb0, 0x3a60, 0x3c37, 0x6d, 0x1f66, 0x0, 0x1);
        gbc.writeMem(0xae17, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x3fb0);
        EXPECT(gbc.pc(), 0xae18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae17), 0xd);
        // 0D 02E5
        gbc.setState(0xdac8, 0xef1c, 0xa890, 0x86c4, 0x6fc5, 0x3fbd, 0x1, 0x1);
        gbc.writeMem(0xdac8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xef1c);
        EXPECT(gbc.pc(), 0xdac9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdac8), 0xd);
        // 0D 02E6
        gbc.setState(0xb1cd, 0xb959, 0x4330, 0x401b, 0xb772, 0x814c, 0x1, 0x1);
        gbc.writeMem(0xb1cd, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xb959);
        EXPECT(gbc.pc(), 0xb1ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1cd), 0xd);
        // 0D 02E7
        gbc.setState(0xb9c4, 0x4f03, 0x1420, 0xdf1f, 0x52dd, 0xa475, 0x1, 0x1);
        gbc.writeMem(0xb9c4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x4f03);
        EXPECT(gbc.pc(), 0xb9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9c4), 0xd);
        // 0D 02E8
        gbc.setState(0x26e7, 0xb495, 0x8840, 0xafae, 0xea80, 0x92cc, 0x0, 0x0);
        gbc.writeMem(0x26e7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xb495);
        EXPECT(gbc.pc(), 0x26e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02E9
        gbc.setState(0xd4ff, 0x2da9, 0x7930, 0xec13, 0xf928, 0x62ba, 0x0, 0x1);
        gbc.writeMem(0xd4ff, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2da9);
        EXPECT(gbc.pc(), 0xd500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ff), 0xd);
        // 0D 02EA
        gbc.setState(0x21dc, 0xec57, 0xe8f0, 0x5e8, 0x9797, 0xae4d, 0x1, 0x1);
        gbc.writeMem(0x21dc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xec57);
        EXPECT(gbc.pc(), 0x21dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02EB
        gbc.setState(0x2350, 0x598d, 0x6f30, 0x5645, 0x7813, 0xc839, 0x0, 0x0);
        gbc.writeMem(0x2350, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x598d);
        EXPECT(gbc.pc(), 0x2351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02EC
        gbc.setState(0xdbc4, 0x669e, 0x85e0, 0x141, 0xf380, 0x5d80, 0x1, 0x1);
        gbc.writeMem(0xdbc4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x669e);
        EXPECT(gbc.pc(), 0xdbc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbc4), 0xd);
        // 0D 02ED
        gbc.setState(0x6987, 0x1856, 0xae30, 0x1a92, 0x9c67, 0xa47b, 0x0, 0x1);
        gbc.writeMem(0x6987, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1856);
        EXPECT(gbc.pc(), 0x6988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02EE
        gbc.setState(0xe02e, 0x5c33, 0x460, 0x1275, 0x5379, 0xd7d4, 0x1, 0x0);
        gbc.writeMem(0xe02e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5c33);
        EXPECT(gbc.pc(), 0xe02f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02e), 0xd);
        // 0D 02EF
        gbc.setState(0xdb61, 0x2ca9, 0x910, 0x46c9, 0x4ffe, 0x1be4, 0x1, 0x0);
        gbc.writeMem(0xdb61, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2ca9);
        EXPECT(gbc.pc(), 0xdb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb61), 0xd);
        // 0D 02F0
        gbc.setState(0x23d1, 0x3f99, 0x5e50, 0xa1eb, 0x6aba, 0x1012, 0x0, 0x0);
        gbc.writeMem(0x23d1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3f99);
        EXPECT(gbc.pc(), 0x23d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02F1
        gbc.setState(0x46fc, 0x55b4, 0xbd40, 0xb24f, 0xfb38, 0xb085, 0x1, 0x1);
        gbc.writeMem(0x46fc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x55b4);
        EXPECT(gbc.pc(), 0x46fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02F2
        gbc.setState(0xdba3, 0x8bb7, 0xbf00, 0x344, 0x8024, 0x58b6, 0x0, 0x0);
        gbc.writeMem(0xdba3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8bb7);
        EXPECT(gbc.pc(), 0xdba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdba3), 0xd);
        // 0D 02F3
        gbc.setState(0x6379, 0x52cb, 0x4980, 0xee8b, 0xd1d9, 0x5226, 0x1, 0x0);
        gbc.writeMem(0x6379, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x52cb);
        EXPECT(gbc.pc(), 0x637a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02F4
        gbc.setState(0x6a4a, 0x3bab, 0xeb30, 0x3a6d, 0xaa40, 0x96fe, 0x1, 0x1);
        gbc.writeMem(0x6a4a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x3bab);
        EXPECT(gbc.pc(), 0x6a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02F5
        gbc.setState(0x9d28, 0xe227, 0x5250, 0x726b, 0xe470, 0x27b6, 0x0, 0x1);
        gbc.writeMem(0x9d28, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe227);
        EXPECT(gbc.pc(), 0x9d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d28), 0xd);
        // 0D 02F6
        gbc.setState(0xad6d, 0x1e09, 0xb400, 0x20bd, 0x1550, 0x93ac, 0x1, 0x0);
        gbc.writeMem(0xad6d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x1e09);
        EXPECT(gbc.pc(), 0xad6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad6d), 0xd);
        // 0D 02F7
        gbc.setState(0xd7ad, 0x44c3, 0xf90, 0x1ed8, 0x173d, 0xe7e0, 0x1, 0x1);
        gbc.writeMem(0xd7ad, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x44c3);
        EXPECT(gbc.pc(), 0xd7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7ad), 0xd);
        // 0D 02F8
        gbc.setState(0x885b, 0x4fab, 0x41d0, 0xb881, 0x4c56, 0x54a6, 0x0, 0x1);
        gbc.writeMem(0x885b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4fab);
        EXPECT(gbc.pc(), 0x885c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x885b), 0xd);
        // 0D 02F9
        gbc.setState(0x522c, 0xc4d2, 0x3ee0, 0xc139, 0xc56f, 0xb456, 0x1, 0x0);
        gbc.writeMem(0x522c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc4d2);
        EXPECT(gbc.pc(), 0x522d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 02FA
        gbc.setState(0x8013, 0x5cee, 0xb8c0, 0x4db2, 0x4d7b, 0xa0f9, 0x1, 0x1);
        gbc.writeMem(0x8013, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5cee);
        EXPECT(gbc.pc(), 0x8014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8013), 0xd);
        // 0D 02FB
        gbc.setState(0xb9f7, 0xffcf, 0xb0b0, 0xd370, 0x6e4d, 0xcc46, 0x0, 0x1);
        gbc.writeMem(0xb9f7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xffcf);
        EXPECT(gbc.pc(), 0xb9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f7), 0xd);
        // 0D 02FC
        gbc.setState(0x33ae, 0x6c48, 0x1fb0, 0x62dc, 0x5ae9, 0x8569, 0x1, 0x1);
        gbc.writeMem(0x33ae, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x6c48);
        EXPECT(gbc.pc(), 0x33af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02FD
        gbc.setState(0x9840, 0xebed, 0xc9e0, 0xa3b2, 0xc696, 0xc271, 0x1, 0x1);
        gbc.writeMem(0x9840, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xebed);
        EXPECT(gbc.pc(), 0x9841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9840), 0xd);
        // 0D 02FE
        gbc.setState(0x3445, 0x7dab, 0xa8d0, 0xd52b, 0xf6cd, 0x821f, 0x0, 0x0);
        gbc.writeMem(0x3445, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7dab);
        EXPECT(gbc.pc(), 0x3446);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 02FF
        gbc.setState(0x7fa7, 0x7f8e, 0x6950, 0xce51, 0x9b96, 0x3f8b, 0x1, 0x0);
        gbc.writeMem(0x7fa7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7f8e);
        EXPECT(gbc.pc(), 0x7fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0300
        gbc.setState(0x5172, 0x99a7, 0xc90, 0x3002, 0x348a, 0x885e, 0x1, 0x0);
        gbc.writeMem(0x5172, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x99a7);
        EXPECT(gbc.pc(), 0x5173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0301
        gbc.setState(0xa31f, 0xa6d3, 0x64d0, 0x4fe4, 0x4345, 0xb632, 0x0, 0x1);
        gbc.writeMem(0xa31f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa6d3);
        EXPECT(gbc.pc(), 0xa320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa31f), 0xd);
        // 0D 0302
        gbc.setState(0x50f, 0x965e, 0x5800, 0x6b50, 0x1158, 0xa022, 0x0, 0x0);
        gbc.writeMem(0x50f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x965e);
        EXPECT(gbc.pc(), 0x510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 0303
        gbc.setState(0x56d, 0x5fa9, 0xd590, 0xfd8d, 0x112b, 0x9e51, 0x0, 0x0);
        gbc.writeMem(0x56d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5fa9);
        EXPECT(gbc.pc(), 0x56e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0304
        gbc.setState(0x3747, 0x6c3f, 0xab00, 0x3bc5, 0x7efa, 0xfbe6, 0x1, 0x1);
        gbc.writeMem(0x3747, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6c3f);
        EXPECT(gbc.pc(), 0x3748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0305
        gbc.setState(0x5c3f, 0xc705, 0x80a0, 0x24d2, 0xc10, 0x25f1, 0x0, 0x1);
        gbc.writeMem(0x5c3f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc705);
        EXPECT(gbc.pc(), 0x5c40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0306
        gbc.setState(0xd14a, 0x2f3b, 0x2ee0, 0x48fa, 0x8927, 0xf01e, 0x0, 0x0);
        gbc.writeMem(0xd14a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2f3b);
        EXPECT(gbc.pc(), 0xd14b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd14a), 0xd);
        // 0D 0307
        gbc.setState(0x7c6b, 0x1501, 0xb790, 0x4842, 0x3b3e, 0x837c, 0x1, 0x1);
        gbc.writeMem(0x7c6b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1501);
        EXPECT(gbc.pc(), 0x7c6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0308
        gbc.setState(0xc184, 0x5457, 0x71d0, 0xc1b0, 0x9e5c, 0xcc6, 0x0, 0x0);
        gbc.writeMem(0xc184, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x5457);
        EXPECT(gbc.pc(), 0xc185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc184), 0xd);
        // 0D 0309
        gbc.setState(0x4d34, 0x1857, 0x5070, 0xc111, 0xdb27, 0xb5d7, 0x0, 0x1);
        gbc.writeMem(0x4d34, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1857);
        EXPECT(gbc.pc(), 0x4d35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 030A
        gbc.setState(0xc5c, 0x5181, 0x96a0, 0xca, 0xdd91, 0x78c, 0x1, 0x1);
        gbc.writeMem(0xc5c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5181);
        EXPECT(gbc.pc(), 0xc5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 030B
        gbc.setState(0xa7dc, 0xd525, 0xa390, 0xdfa, 0x8eb6, 0x6db3, 0x1, 0x1);
        gbc.writeMem(0xa7dc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd525);
        EXPECT(gbc.pc(), 0xa7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7dc), 0xd);
        // 0D 030C
        gbc.setState(0x11bf, 0x93b8, 0x2870, 0x49e8, 0xbb14, 0x8531, 0x1, 0x0);
        gbc.writeMem(0x11bf, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x93b8);
        EXPECT(gbc.pc(), 0x11c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 030E
        gbc.setState(0xd9c3, 0xa561, 0x7c70, 0xce45, 0xb19d, 0x3984, 0x1, 0x1);
        gbc.writeMem(0xd9c3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa561);
        EXPECT(gbc.pc(), 0xd9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9c3), 0xd);
        // 0D 030F
        gbc.setState(0x9a78, 0xfc4d, 0xaa80, 0x57df, 0xd419, 0x7204, 0x0, 0x1);
        gbc.writeMem(0x9a78, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfc4d);
        EXPECT(gbc.pc(), 0x9a79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a78), 0xd);
        // 0D 0310
        gbc.setState(0x132d, 0x6fe8, 0x4fc0, 0x56e4, 0xc972, 0x390a, 0x1, 0x1);
        gbc.writeMem(0x132d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6fe8);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0311
        gbc.setState(0x615a, 0xdfd, 0x9cf0, 0x351, 0xb754, 0x2db4, 0x0, 0x1);
        gbc.writeMem(0x615a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdfd);
        EXPECT(gbc.pc(), 0x615b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0312
        gbc.setState(0xd40d, 0x2219, 0x5b40, 0x9729, 0x2916, 0x61b1, 0x0, 0x1);
        gbc.writeMem(0xd40d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2219);
        EXPECT(gbc.pc(), 0xd40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd40d), 0xd);
        // 0D 0313
        gbc.setState(0xcf01, 0xefe, 0xe6f0, 0x144b, 0xd716, 0x22cb, 0x1, 0x0);
        gbc.writeMem(0xcf01, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xefe);
        EXPECT(gbc.pc(), 0xcf02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf01), 0xd);
        // 0D 0314
        gbc.setState(0x7c01, 0xd38e, 0x9ce0, 0xc328, 0x8492, 0x3748, 0x1, 0x1);
        gbc.writeMem(0x7c01, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd38e);
        EXPECT(gbc.pc(), 0x7c02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0315
        gbc.setState(0x9e09, 0x930c, 0xdeb0, 0x82b3, 0x53ee, 0x9a0c, 0x0, 0x0);
        gbc.writeMem(0x9e09, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x930c);
        EXPECT(gbc.pc(), 0x9e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e09), 0xd);
        // 0D 0316
        gbc.setState(0xbf1a, 0xf7f6, 0xcfe0, 0x3b8, 0xf40c, 0x4052, 0x0, 0x0);
        gbc.writeMem(0xbf1a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf7f6);
        EXPECT(gbc.pc(), 0xbf1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf1a), 0xd);
        // 0D 0318
        gbc.setState(0x50fe, 0x6241, 0xf4e0, 0x2597, 0x51e7, 0x259b, 0x0, 0x0);
        gbc.writeMem(0x50fe, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6241);
        EXPECT(gbc.pc(), 0x50ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0319
        gbc.setState(0x45ec, 0x7d1e, 0x8e70, 0xf3e3, 0x2f18, 0x4a32, 0x0, 0x1);
        gbc.writeMem(0x45ec, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7d1e);
        EXPECT(gbc.pc(), 0x45ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 031A
        gbc.setState(0x6b75, 0xe79e, 0x58a0, 0x39c2, 0xf91b, 0x2935, 0x0, 0x1);
        gbc.writeMem(0x6b75, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xe79e);
        EXPECT(gbc.pc(), 0x6b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 031B
        gbc.setState(0x6d54, 0xbf70, 0x5430, 0xf6b2, 0xaf48, 0x28a1, 0x1, 0x1);
        gbc.writeMem(0x6d54, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xbf70);
        EXPECT(gbc.pc(), 0x6d55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 031C
        gbc.setState(0xf8d, 0xdc4b, 0x96e0, 0x94dc, 0xc5d7, 0x9e8e, 0x1, 0x0);
        gbc.writeMem(0xf8d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdc4b);
        EXPECT(gbc.pc(), 0xf8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 031D
        gbc.setState(0x54e4, 0xef6b, 0xce00, 0x2239, 0x9e6c, 0xe580, 0x1, 0x0);
        gbc.writeMem(0x54e4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xef6b);
        EXPECT(gbc.pc(), 0x54e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 031E
        gbc.setState(0x4bc0, 0x8aec, 0x56e0, 0xc1a1, 0xd982, 0x641, 0x1, 0x1);
        gbc.writeMem(0x4bc0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8aec);
        EXPECT(gbc.pc(), 0x4bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 031F
        gbc.setState(0x9232, 0x8e1a, 0x40f0, 0xf513, 0x9d7d, 0x13d2, 0x0, 0x0);
        gbc.writeMem(0x9232, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8e1a);
        EXPECT(gbc.pc(), 0x9233);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9232), 0xd);
        // 0D 0320
        gbc.setState(0xe13b, 0x449e, 0xff30, 0x80df, 0x7f7d, 0xae7, 0x1, 0x1);
        gbc.writeMem(0xe13b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x449e);
        EXPECT(gbc.pc(), 0xe13c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe13b), 0xd);
        // 0D 0321
        gbc.setState(0x7a0e, 0x995f, 0xc340, 0x4535, 0x2af, 0xbdf1, 0x0, 0x1);
        gbc.writeMem(0x7a0e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x995f);
        EXPECT(gbc.pc(), 0x7a0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0322
        gbc.setState(0xb996, 0x837, 0x3c90, 0x657b, 0x36b9, 0xa5a0, 0x0, 0x1);
        gbc.writeMem(0xb996, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x837);
        EXPECT(gbc.pc(), 0xb997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb996), 0xd);
        // 0D 0323
        gbc.setState(0xb91f, 0xec1, 0xa930, 0xdb93, 0x5ef0, 0x52c, 0x0, 0x1);
        gbc.writeMem(0xb91f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xec1);
        EXPECT(gbc.pc(), 0xb920);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91f), 0xd);
        // 0D 0325
        gbc.setState(0x684f, 0xfcaa, 0x81d0, 0xdc18, 0x28b3, 0x4b36, 0x1, 0x1);
        gbc.writeMem(0x684f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfcaa);
        EXPECT(gbc.pc(), 0x6850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0326
        gbc.setState(0xe200, 0x947, 0xd040, 0x4716, 0xcf02, 0xc20d, 0x0, 0x1);
        gbc.writeMem(0xe200, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x947);
        EXPECT(gbc.pc(), 0xe201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe200), 0xd);
        // 0D 0327
        gbc.setState(0x6e19, 0x76a4, 0xbd90, 0xaf1f, 0x6bba, 0x948a, 0x1, 0x1);
        gbc.writeMem(0x6e19, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x76a4);
        EXPECT(gbc.pc(), 0x6e1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0328
        gbc.setState(0xc5c0, 0xa9ab, 0xb750, 0x79e7, 0x3e24, 0xea9b, 0x1, 0x0);
        gbc.writeMem(0xc5c0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa9ab);
        EXPECT(gbc.pc(), 0xc5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c0), 0xd);
        // 0D 0329
        gbc.setState(0x7f91, 0x5e71, 0xd6f0, 0xcb3b, 0x1c13, 0x4f9a, 0x0, 0x0);
        gbc.writeMem(0x7f91, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5e71);
        EXPECT(gbc.pc(), 0x7f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 032A
        gbc.setState(0x10a3, 0x5792, 0xdb0, 0xb91d, 0xd07e, 0x4178, 0x1, 0x1);
        gbc.writeMem(0x10a3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x5792);
        EXPECT(gbc.pc(), 0x10a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 032B
        gbc.setState(0x371a, 0xc766, 0x3f70, 0xb950, 0xf120, 0xee89, 0x1, 0x0);
        gbc.writeMem(0x371a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc766);
        EXPECT(gbc.pc(), 0x371b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 032C
        gbc.setState(0x5d69, 0xfb8, 0x4c50, 0x40f6, 0x6c37, 0xcd7, 0x0, 0x1);
        gbc.writeMem(0x5d69, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfb8);
        EXPECT(gbc.pc(), 0x5d6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 032D
        gbc.setState(0x15be, 0x4db1, 0xf5b0, 0xc8c, 0x8da2, 0x6853, 0x0, 0x1);
        gbc.writeMem(0x15be, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x4db1);
        EXPECT(gbc.pc(), 0x15bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 032E
        gbc.setState(0x579e, 0xc9c5, 0x36c0, 0xe56d, 0xed11, 0xcfb1, 0x1, 0x0);
        gbc.writeMem(0x579e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xc9c5);
        EXPECT(gbc.pc(), 0x579f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 032F
        gbc.setState(0x736c, 0xd4b6, 0x5ab0, 0xa3c0, 0xcab0, 0xdab4, 0x0, 0x0);
        gbc.writeMem(0x736c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd4b6);
        EXPECT(gbc.pc(), 0x736d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0330
        gbc.setState(0xe652, 0x14ef, 0xe3f0, 0x56d8, 0x247c, 0x8da2, 0x0, 0x1);
        gbc.writeMem(0xe652, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x14ef);
        EXPECT(gbc.pc(), 0xe653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe652), 0xd);
        // 0D 0331
        gbc.setState(0xa9c0, 0x7959, 0xfc00, 0x7063, 0x6218, 0x7f8e, 0x1, 0x1);
        gbc.writeMem(0xa9c0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7959);
        EXPECT(gbc.pc(), 0xa9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c0), 0xd);
        // 0D 0332
        gbc.setState(0xec45, 0x9979, 0x9240, 0x5da, 0x52ba, 0xe915, 0x1, 0x0);
        gbc.writeMem(0xec45, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9979);
        EXPECT(gbc.pc(), 0xec46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec45), 0xd);
        // 0D 0333
        gbc.setState(0xb3e6, 0x7d7a, 0x910, 0xe25, 0x8735, 0xd91c, 0x1, 0x1);
        gbc.writeMem(0xb3e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x7d7a);
        EXPECT(gbc.pc(), 0xb3e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3e6), 0xd);
        // 0D 0334
        gbc.setState(0x437e, 0xb2b5, 0x4a60, 0x5f40, 0xbd67, 0x9d15, 0x1, 0x0);
        gbc.writeMem(0x437e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xb2b5);
        EXPECT(gbc.pc(), 0x437f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 0335
        gbc.setState(0xcff6, 0x5400, 0x5cf0, 0x8316, 0x16bd, 0xb32a, 0x1, 0x0);
        gbc.writeMem(0xcff6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5400);
        EXPECT(gbc.pc(), 0xcff7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcff6), 0xd);
        // 0D 0336
        gbc.setState(0x1585, 0xc1d6, 0xe1a0, 0x806c, 0xeea7, 0x1219, 0x0, 0x0);
        gbc.writeMem(0x1585, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc1d6);
        EXPECT(gbc.pc(), 0x1586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0337
        gbc.setState(0xb71b, 0x27d6, 0xa560, 0x15c8, 0x5d34, 0x747f, 0x0, 0x0);
        gbc.writeMem(0xb71b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x27d6);
        EXPECT(gbc.pc(), 0xb71c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb71b), 0xd);
        // 0D 0338
        gbc.setState(0xe11e, 0xf9ed, 0xb580, 0x69a9, 0xf68e, 0x3baa, 0x0, 0x1);
        gbc.writeMem(0xe11e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xf9ed);
        EXPECT(gbc.pc(), 0xe11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11e), 0xd);
        // 0D 0339
        gbc.setState(0x883f, 0xd4f1, 0xee50, 0x2ceb, 0x2460, 0xb4e4, 0x0, 0x1);
        gbc.writeMem(0x883f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd4f1);
        EXPECT(gbc.pc(), 0x8840);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x883f), 0xd);
        // 0D 033A
        gbc.setState(0x7df3, 0xa823, 0xc10, 0x2d6f, 0xfc90, 0x796d, 0x1, 0x0);
        gbc.writeMem(0x7df3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa823);
        EXPECT(gbc.pc(), 0x7df4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 033B
        gbc.setState(0xeb53, 0x6a88, 0x9c30, 0x292a, 0x1a4c, 0xdea2, 0x0, 0x1);
        gbc.writeMem(0xeb53, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6a88);
        EXPECT(gbc.pc(), 0xeb54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb53), 0xd);
        // 0D 033C
        gbc.setState(0xcc10, 0x3679, 0xb60, 0xc31b, 0x5a06, 0xac96, 0x0, 0x1);
        gbc.writeMem(0xcc10, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3679);
        EXPECT(gbc.pc(), 0xcc11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc10), 0xd);
        // 0D 033D
        gbc.setState(0x8174, 0x96c2, 0x4550, 0x3ff8, 0xf454, 0x6abb, 0x0, 0x0);
        gbc.writeMem(0x8174, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x96c2);
        EXPECT(gbc.pc(), 0x8175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8174), 0xd);
        // 0D 033E
        gbc.setState(0x7798, 0xd1e4, 0x4a80, 0x7d75, 0x262c, 0x6370, 0x1, 0x1);
        gbc.writeMem(0x7798, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xd1e4);
        EXPECT(gbc.pc(), 0x7799);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 033F
        gbc.setState(0x829c, 0x6f57, 0xa2a0, 0x39cc, 0x2c92, 0x9212, 0x1, 0x1);
        gbc.writeMem(0x829c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x6f57);
        EXPECT(gbc.pc(), 0x829d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829c), 0xd);
        // 0D 0340
        gbc.setState(0x2146, 0xa4a2, 0x8b40, 0xadf5, 0x5206, 0x2dcb, 0x1, 0x0);
        gbc.writeMem(0x2146, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa4a2);
        EXPECT(gbc.pc(), 0x2147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0341
        gbc.setState(0xdf66, 0xd94b, 0xf060, 0x418a, 0x71c3, 0xe26f, 0x0, 0x1);
        gbc.writeMem(0xdf66, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd94b);
        EXPECT(gbc.pc(), 0xdf67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf66), 0xd);
        // 0D 0342
        gbc.setState(0x54cc, 0x67c6, 0xb160, 0xee91, 0x5e5b, 0xc85, 0x0, 0x0);
        gbc.writeMem(0x54cc, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x67c6);
        EXPECT(gbc.pc(), 0x54cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0343
        gbc.setState(0xc44e, 0x1338, 0x32c0, 0xc69b, 0x67e6, 0x6e32, 0x1, 0x1);
        gbc.writeMem(0xc44e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1338);
        EXPECT(gbc.pc(), 0xc44f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc44e), 0xd);
        // 0D 0344
        gbc.setState(0x5b10, 0xfe3b, 0x2070, 0xf9cd, 0xf859, 0x2699, 0x0, 0x0);
        gbc.writeMem(0x5b10, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xfe3b);
        EXPECT(gbc.pc(), 0x5b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0345
        gbc.setState(0xbfa7, 0xc9f7, 0x6470, 0xd466, 0xdae5, 0x837b, 0x1, 0x0);
        gbc.writeMem(0xbfa7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc9f7);
        EXPECT(gbc.pc(), 0xbfa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfa7), 0xd);
        // 0D 0346
        gbc.setState(0x3235, 0xe7ba, 0x3b50, 0xe16c, 0xdda7, 0x1989, 0x1, 0x1);
        gbc.writeMem(0x3235, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe7ba);
        EXPECT(gbc.pc(), 0x3236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0347
        gbc.setState(0xc210, 0x981d, 0xc960, 0x830a, 0x3542, 0x7144, 0x1, 0x1);
        gbc.writeMem(0xc210, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x981d);
        EXPECT(gbc.pc(), 0xc211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc210), 0xd);
        // 0D 0348
        gbc.setState(0x818d, 0xaeb0, 0x5570, 0x53ca, 0x7bd4, 0x392c, 0x0, 0x0);
        gbc.writeMem(0x818d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xaeb0);
        EXPECT(gbc.pc(), 0x818e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x818d), 0xd);
        // 0D 0349
        gbc.setState(0xe320, 0x330, 0x820, 0x4f27, 0xa24d, 0x7439, 0x0, 0x0);
        gbc.writeMem(0xe320, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x330);
        EXPECT(gbc.pc(), 0xe321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe320), 0xd);
        // 0D 034A
        gbc.setState(0xb00a, 0xe198, 0xe2b0, 0x85d3, 0x4eb3, 0x1741, 0x0, 0x0);
        gbc.writeMem(0xb00a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe198);
        EXPECT(gbc.pc(), 0xb00b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb00a), 0xd);
        // 0D 034C
        gbc.setState(0xb44e, 0xd1d4, 0x39f0, 0x22de, 0x12c0, 0xd4c5, 0x0, 0x0);
        gbc.writeMem(0xb44e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd1d4);
        EXPECT(gbc.pc(), 0xb44f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44e), 0xd);
        // 0D 034D
        gbc.setState(0x4d20, 0xa03f, 0xaa70, 0x4e67, 0x58c9, 0x817f, 0x1, 0x1);
        gbc.writeMem(0x4d20, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa03f);
        EXPECT(gbc.pc(), 0x4d21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 034E
        gbc.setState(0x61ec, 0x762d, 0x7270, 0xd29a, 0x920d, 0x92f1, 0x1, 0x1);
        gbc.writeMem(0x61ec, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x762d);
        EXPECT(gbc.pc(), 0x61ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0350
        gbc.setState(0x675, 0xb4f0, 0x4a90, 0xbe9b, 0x1ae9, 0x10d8, 0x0, 0x1);
        gbc.writeMem(0x675, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb4f0);
        EXPECT(gbc.pc(), 0x676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0351
        gbc.setState(0x2dad, 0xb0c7, 0x8670, 0xcbd1, 0xa39a, 0x2857, 0x0, 0x0);
        gbc.writeMem(0x2dad, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb0c7);
        EXPECT(gbc.pc(), 0x2dae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0352
        gbc.setState(0xd93a, 0x1c97, 0xcb60, 0xa203, 0xed50, 0x67e9, 0x0, 0x0);
        gbc.writeMem(0xd93a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1c97);
        EXPECT(gbc.pc(), 0xd93b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd93a), 0xd);
        // 0D 0353
        gbc.setState(0xc2c, 0x94b3, 0x7880, 0x503c, 0xc6e1, 0x5e52, 0x0, 0x1);
        gbc.writeMem(0xc2c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x94b3);
        EXPECT(gbc.pc(), 0xc2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0354
        gbc.setState(0x9a75, 0x44a2, 0x1530, 0xe2d7, 0xfb58, 0xcd89, 0x0, 0x1);
        gbc.writeMem(0x9a75, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x44a2);
        EXPECT(gbc.pc(), 0x9a76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a75), 0xd);
        // 0D 0355
        gbc.setState(0x3176, 0x74ee, 0xbc40, 0x851e, 0x699e, 0x1cad, 0x1, 0x0);
        gbc.writeMem(0x3176, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x74ee);
        EXPECT(gbc.pc(), 0x3177);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0356
        gbc.setState(0x26c9, 0x1dfb, 0x5740, 0x9579, 0x4a19, 0xecad, 0x0, 0x0);
        gbc.writeMem(0x26c9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1dfb);
        EXPECT(gbc.pc(), 0x26ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0357
        gbc.setState(0x402b, 0xc6c8, 0x8580, 0xeb2e, 0x2a7f, 0xc52a, 0x0, 0x0);
        gbc.writeMem(0x402b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xc6c8);
        EXPECT(gbc.pc(), 0x402c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0358
        gbc.setState(0x8626, 0x9761, 0x4ab0, 0xf334, 0xfd1e, 0xa484, 0x0, 0x0);
        gbc.writeMem(0x8626, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9761);
        EXPECT(gbc.pc(), 0x8627);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8626), 0xd);
        // 0D 0359
        gbc.setState(0xeb60, 0x2ea6, 0x2230, 0xbf6c, 0xa776, 0x228f, 0x1, 0x1);
        gbc.writeMem(0xeb60, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2ea6);
        EXPECT(gbc.pc(), 0xeb61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb60), 0xd);
        // 0D 035A
        gbc.setState(0xccea, 0x6baf, 0x3170, 0x4aad, 0x514d, 0x62aa, 0x0, 0x0);
        gbc.writeMem(0xccea, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6baf);
        EXPECT(gbc.pc(), 0xcceb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccea), 0xd);
        // 0D 035B
        gbc.setState(0x6872, 0xdf37, 0x45f0, 0x3f3b, 0x353f, 0x4a1d, 0x1, 0x1);
        gbc.writeMem(0x6872, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xdf37);
        EXPECT(gbc.pc(), 0x6873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 035C
        gbc.setState(0x64f8, 0xf2af, 0xbb80, 0x3edc, 0xd99d, 0xc1f8, 0x1, 0x0);
        gbc.writeMem(0x64f8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf2af);
        EXPECT(gbc.pc(), 0x64f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 035D
        gbc.setState(0xbb9b, 0x2a28, 0x6b70, 0x92b9, 0xcf65, 0xa4ea, 0x1, 0x1);
        gbc.writeMem(0xbb9b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2a28);
        EXPECT(gbc.pc(), 0xbb9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9b), 0xd);
        // 0D 035E
        gbc.setState(0x37a9, 0x6bcb, 0x5fd0, 0x1b9b, 0x95c9, 0xc7fc, 0x1, 0x1);
        gbc.writeMem(0x37a9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6bcb);
        EXPECT(gbc.pc(), 0x37aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 035F
        gbc.setState(0x7196, 0xdebe, 0x8a70, 0x564b, 0x1e40, 0x3e61, 0x0, 0x0);
        gbc.writeMem(0x7196, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdebe);
        EXPECT(gbc.pc(), 0x7197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0360
        gbc.setState(0x6190, 0x6c35, 0xc350, 0xa584, 0xda68, 0x32bf, 0x0, 0x1);
        gbc.writeMem(0x6190, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x6c35);
        EXPECT(gbc.pc(), 0x6191);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0361
        gbc.setState(0x7777, 0x7225, 0x80f0, 0xe876, 0xc58b, 0x1665, 0x0, 0x1);
        gbc.writeMem(0x7777, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x7225);
        EXPECT(gbc.pc(), 0x7778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0362
        gbc.setState(0xae9f, 0x2620, 0xc240, 0x66d, 0x5e65, 0xe190, 0x0, 0x0);
        gbc.writeMem(0xae9f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2620);
        EXPECT(gbc.pc(), 0xaea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9f), 0xd);
        // 0D 0363
        gbc.setState(0x7603, 0xfec8, 0x6dc0, 0xc53b, 0xe28f, 0x73ab, 0x0, 0x0);
        gbc.writeMem(0x7603, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xfec8);
        EXPECT(gbc.pc(), 0x7604);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0364
        gbc.setState(0x63b4, 0xfebb, 0x95c0, 0x569e, 0xf225, 0x8bde, 0x1, 0x0);
        gbc.writeMem(0x63b4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfebb);
        EXPECT(gbc.pc(), 0x63b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0365
        gbc.setState(0x9beb, 0xeb99, 0x3a10, 0xa8d3, 0xd150, 0xcba9, 0x1, 0x1);
        gbc.writeMem(0x9beb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xeb99);
        EXPECT(gbc.pc(), 0x9bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9beb), 0xd);
        // 0D 0366
        gbc.setState(0xc33e, 0xc9a6, 0xf420, 0x7ddf, 0xe5ed, 0x405, 0x0, 0x1);
        gbc.writeMem(0xc33e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc9a6);
        EXPECT(gbc.pc(), 0xc33f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33e), 0xd);
        // 0D 0367
        gbc.setState(0x7e81, 0x9eb3, 0x86c0, 0x4732, 0x1fd6, 0xab04, 0x0, 0x0);
        gbc.writeMem(0x7e81, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9eb3);
        EXPECT(gbc.pc(), 0x7e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0368
        gbc.setState(0xd398, 0xb13b, 0x5780, 0xb45f, 0xd149, 0x1ec5, 0x0, 0x0);
        gbc.writeMem(0xd398, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb13b);
        EXPECT(gbc.pc(), 0xd399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd398), 0xd);
        // 0D 0369
        gbc.setState(0x8e3a, 0x7025, 0x35d0, 0xfa33, 0xb600, 0x246f, 0x1, 0x1);
        gbc.writeMem(0x8e3a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7025);
        EXPECT(gbc.pc(), 0x8e3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e3a), 0xd);
        // 0D 036A
        gbc.setState(0x6f37, 0xe4c6, 0x5380, 0x923f, 0xd160, 0x89c1, 0x0, 0x0);
        gbc.writeMem(0x6f37, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe4c6);
        EXPECT(gbc.pc(), 0x6f38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 036B
        gbc.setState(0x6361, 0x7271, 0x6b70, 0xbe90, 0xda78, 0x87b2, 0x1, 0x0);
        gbc.writeMem(0x6361, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7271);
        EXPECT(gbc.pc(), 0x6362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 036D
        gbc.setState(0x2897, 0x7332, 0x7c40, 0xb68a, 0x5870, 0x6ff6, 0x1, 0x1);
        gbc.writeMem(0x2897, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x7332);
        EXPECT(gbc.pc(), 0x2898);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 036E
        gbc.setState(0xc0c8, 0xb6b6, 0xafd0, 0xd35e, 0x4948, 0x8bfa, 0x0, 0x0);
        gbc.writeMem(0xc0c8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb6b6);
        EXPECT(gbc.pc(), 0xc0c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0c8), 0xd);
        // 0D 036F
        gbc.setState(0x6489, 0x7a54, 0x2d60, 0x1b7a, 0xc179, 0x85ab, 0x1, 0x0);
        gbc.writeMem(0x6489, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7a54);
        EXPECT(gbc.pc(), 0x648a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0370
        gbc.setState(0x1bb9, 0x6092, 0x66b0, 0x184a, 0x8221, 0x55a7, 0x0, 0x0);
        gbc.writeMem(0x1bb9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6092);
        EXPECT(gbc.pc(), 0x1bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0371
        gbc.setState(0x28e6, 0x460, 0xfcb0, 0x7d4c, 0x6a8e, 0x108b, 0x1, 0x0);
        gbc.writeMem(0x28e6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x460);
        EXPECT(gbc.pc(), 0x28e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0373
        gbc.setState(0x2c8, 0xf73e, 0xf100, 0xd2f5, 0xd2f1, 0x89b8, 0x0, 0x1);
        gbc.writeMem(0x2c8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xf73e);
        EXPECT(gbc.pc(), 0x2c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0374
        gbc.setState(0xd708, 0xd647, 0xc8a0, 0xccec, 0xaffb, 0xa788, 0x1, 0x0);
        gbc.writeMem(0xd708, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xd647);
        EXPECT(gbc.pc(), 0xd709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd708), 0xd);
        // 0D 0375
        gbc.setState(0xd53a, 0xe087, 0x6870, 0x4346, 0x4ad3, 0x64f0, 0x0, 0x0);
        gbc.writeMem(0xd53a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe087);
        EXPECT(gbc.pc(), 0xd53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd53a), 0xd);
        // 0D 0376
        gbc.setState(0xb92b, 0xf30, 0xdde0, 0x861a, 0x6a99, 0x6f92, 0x1, 0x0);
        gbc.writeMem(0xb92b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf30);
        EXPECT(gbc.pc(), 0xb92c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb92b), 0xd);
        // 0D 0377
        gbc.setState(0xa2a3, 0xac5f, 0xb6f0, 0xef1a, 0x2b76, 0xa64a, 0x1, 0x1);
        gbc.writeMem(0xa2a3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xac5f);
        EXPECT(gbc.pc(), 0xa2a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a3), 0xd);
        // 0D 0378
        gbc.setState(0x9bb9, 0x5f9b, 0x6550, 0x7249, 0x4ebe, 0x87e1, 0x1, 0x1);
        gbc.writeMem(0x9bb9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5f9b);
        EXPECT(gbc.pc(), 0x9bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb9), 0xd);
        // 0D 0379
        gbc.setState(0x5b98, 0x529e, 0x4c10, 0x5b50, 0x8686, 0x407, 0x0, 0x1);
        gbc.writeMem(0x5b98, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x529e);
        EXPECT(gbc.pc(), 0x5b99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 037A
        gbc.setState(0x35fb, 0xc9a8, 0x2260, 0x1dd, 0x1ea3, 0xfc85, 0x1, 0x1);
        gbc.writeMem(0x35fb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc9a8);
        EXPECT(gbc.pc(), 0x35fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 037B
        gbc.setState(0xbb3b, 0x8e41, 0xbd00, 0x2d57, 0xfb3c, 0x3ef7, 0x0, 0x0);
        gbc.writeMem(0xbb3b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8e41);
        EXPECT(gbc.pc(), 0xbb3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3b), 0xd);
        // 0D 037C
        gbc.setState(0x5c73, 0x73b4, 0x6cb0, 0x3a01, 0x9b01, 0xf339, 0x1, 0x1);
        gbc.writeMem(0x5c73, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x73b4);
        EXPECT(gbc.pc(), 0x5c74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 037D
        gbc.setState(0x6c17, 0x8e42, 0x94e0, 0x41a2, 0x62ff, 0x7fc0, 0x0, 0x0);
        gbc.writeMem(0x6c17, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8e42);
        EXPECT(gbc.pc(), 0x6c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 037E
        gbc.setState(0x6a0d, 0x93b9, 0x4b00, 0x83d0, 0x3517, 0x94b5, 0x0, 0x0);
        gbc.writeMem(0x6a0d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x93b9);
        EXPECT(gbc.pc(), 0x6a0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 037F
        gbc.setState(0xaad5, 0xa843, 0xddb0, 0xb74d, 0x502b, 0xe2db, 0x1, 0x1);
        gbc.writeMem(0xaad5, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xa843);
        EXPECT(gbc.pc(), 0xaad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad5), 0xd);
        // 0D 0380
        gbc.setState(0x897f, 0x3adb, 0x9cc0, 0x5a8c, 0x13d7, 0x631, 0x1, 0x0);
        gbc.writeMem(0x897f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x3adb);
        EXPECT(gbc.pc(), 0x8980);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x897f), 0xd);
        // 0D 0381
        gbc.setState(0x36c3, 0x6836, 0x1910, 0x2460, 0x249a, 0x6f5c, 0x0, 0x0);
        gbc.writeMem(0x36c3, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6836);
        EXPECT(gbc.pc(), 0x36c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 0383
        gbc.setState(0xd060, 0xa2db, 0x1e40, 0xb53f, 0x4715, 0xf53e, 0x1, 0x1);
        gbc.writeMem(0xd060, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa2db);
        EXPECT(gbc.pc(), 0xd061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd060), 0xd);
        // 0D 0384
        gbc.setState(0xa5df, 0xb242, 0xb540, 0xc089, 0xceb3, 0x5794, 0x0, 0x1);
        gbc.writeMem(0xa5df, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb242);
        EXPECT(gbc.pc(), 0xa5e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5df), 0xd);
        // 0D 0385
        gbc.setState(0x2cb9, 0x885d, 0xb700, 0x5f0b, 0x17e5, 0xdce0, 0x0, 0x0);
        gbc.writeMem(0x2cb9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x885d);
        EXPECT(gbc.pc(), 0x2cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0387
        gbc.setState(0xd074, 0xd94a, 0x2d00, 0xc028, 0x1f9, 0x3ef1, 0x1, 0x1);
        gbc.writeMem(0xd074, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xd94a);
        EXPECT(gbc.pc(), 0xd075);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd074), 0xd);
        // 0D 0388
        gbc.setState(0x288a, 0x4128, 0x88e0, 0xdf74, 0xcda2, 0xd4ff, 0x1, 0x0);
        gbc.writeMem(0x288a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x4128);
        EXPECT(gbc.pc(), 0x288b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0389
        gbc.setState(0x81a9, 0x9deb, 0xc3a0, 0x63c2, 0xb467, 0xa246, 0x1, 0x1);
        gbc.writeMem(0x81a9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9deb);
        EXPECT(gbc.pc(), 0x81aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a9), 0xd);
        // 0D 038A
        gbc.setState(0x33b0, 0xd7d6, 0x1f80, 0x429a, 0x909f, 0x5190, 0x0, 0x1);
        gbc.writeMem(0x33b0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd7d6);
        EXPECT(gbc.pc(), 0x33b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 038B
        gbc.setState(0xe5d8, 0xfb26, 0x9f60, 0x2ad1, 0xbbe1, 0x714c, 0x1, 0x0);
        gbc.writeMem(0xe5d8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfb26);
        EXPECT(gbc.pc(), 0xe5d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d8), 0xd);
        // 0D 038C
        gbc.setState(0xe4fe, 0xc4f, 0x2950, 0xf73a, 0x2d4e, 0xf974, 0x1, 0x1);
        gbc.writeMem(0xe4fe, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc4f);
        EXPECT(gbc.pc(), 0xe4ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4fe), 0xd);
        // 0D 038D
        gbc.setState(0xc3d7, 0xe5, 0x9080, 0x35b5, 0x3892, 0x4ff3, 0x0, 0x1);
        gbc.writeMem(0xc3d7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe5);
        EXPECT(gbc.pc(), 0xc3d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3d7), 0xd);
        // 0D 038E
        gbc.setState(0xe2b2, 0x9e82, 0x7af0, 0x4cef, 0xe100, 0x7d9c, 0x1, 0x1);
        gbc.writeMem(0xe2b2, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x9e82);
        EXPECT(gbc.pc(), 0xe2b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2b2), 0xd);
        // 0D 038F
        gbc.setState(0x7c31, 0x5ef5, 0x1150, 0x63e1, 0x9fcf, 0xf255, 0x0, 0x0);
        gbc.writeMem(0x7c31, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x5ef5);
        EXPECT(gbc.pc(), 0x7c32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 0390
        gbc.setState(0x3e26, 0xa29d, 0xecc0, 0xda5a, 0xbe5d, 0xb669, 0x1, 0x1);
        gbc.writeMem(0x3e26, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xa29d);
        EXPECT(gbc.pc(), 0x3e27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0391
        gbc.setState(0x9f3d, 0x16de, 0x6f20, 0xeca1, 0xd210, 0x64d1, 0x1, 0x0);
        gbc.writeMem(0x9f3d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x16de);
        EXPECT(gbc.pc(), 0x9f3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f3d), 0xd);
        // 0D 0392
        gbc.setState(0x5ee9, 0xcf25, 0xe200, 0x2425, 0x9cde, 0x7f44, 0x1, 0x1);
        gbc.writeMem(0x5ee9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcf25);
        EXPECT(gbc.pc(), 0x5eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0393
        gbc.setState(0xa2da, 0x24b4, 0xb610, 0x6389, 0x2b4d, 0x856b, 0x1, 0x1);
        gbc.writeMem(0xa2da, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x24b4);
        EXPECT(gbc.pc(), 0xa2db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2da), 0xd);
        // 0D 0394
        gbc.setState(0xb1eb, 0x5fe1, 0xd680, 0x3f0f, 0xf4ab, 0x3666, 0x1, 0x0);
        gbc.writeMem(0xb1eb, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5fe1);
        EXPECT(gbc.pc(), 0xb1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1eb), 0xd);
        // 0D 0395
        gbc.setState(0xe269, 0x7c5f, 0xb870, 0x22ec, 0x205f, 0x37b7, 0x0, 0x0);
        gbc.writeMem(0xe269, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7c5f);
        EXPECT(gbc.pc(), 0xe26a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe269), 0xd);
        // 0D 0396
        gbc.setState(0x54f8, 0xfd8e, 0xf4e0, 0x359d, 0x2675, 0xefca, 0x0, 0x0);
        gbc.writeMem(0x54f8, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xfd8e);
        EXPECT(gbc.pc(), 0x54f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0397
        gbc.setState(0xe735, 0x1f74, 0x6890, 0xd7e5, 0xb542, 0xe043, 0x0, 0x1);
        gbc.writeMem(0xe735, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x1f74);
        EXPECT(gbc.pc(), 0xe736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe735), 0xd);
        // 0D 0398
        gbc.setState(0x2920, 0xf487, 0x680, 0xc41a, 0x7709, 0xe2e6, 0x1, 0x1);
        gbc.writeMem(0x2920, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf487);
        EXPECT(gbc.pc(), 0x2921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 0399
        gbc.setState(0xa1e, 0x6e9, 0x5e70, 0x43b9, 0x1442, 0x337e, 0x1, 0x1);
        gbc.writeMem(0xa1e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6e9);
        EXPECT(gbc.pc(), 0xa1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 039A
        gbc.setState(0x42db, 0xaccb, 0xef20, 0x99a7, 0xa210, 0x445c, 0x0, 0x1);
        gbc.writeMem(0x42db, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xaccb);
        EXPECT(gbc.pc(), 0x42dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 039B
        gbc.setState(0x79f9, 0x1788, 0xf390, 0x18af, 0xad58, 0xd7ba, 0x1, 0x1);
        gbc.writeMem(0x79f9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1788);
        EXPECT(gbc.pc(), 0x79fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 039C
        gbc.setState(0x2364, 0x158c, 0xbad0, 0xf98b, 0x793d, 0x80a8, 0x1, 0x1);
        gbc.writeMem(0x2364, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x158c);
        EXPECT(gbc.pc(), 0x2365);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 039D
        gbc.setState(0x7daa, 0x48b8, 0x4250, 0x4d4f, 0x9a5, 0xd77a, 0x1, 0x1);
        gbc.writeMem(0x7daa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x48b8);
        EXPECT(gbc.pc(), 0x7dab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 039E
        gbc.setState(0x6fa9, 0xa46d, 0xb440, 0xfd9, 0x9b75, 0x396, 0x1, 0x0);
        gbc.writeMem(0x6fa9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa46d);
        EXPECT(gbc.pc(), 0x6faa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 039F
        gbc.setState(0xd88e, 0xf290, 0x7a90, 0xb536, 0xf7a8, 0x95cc, 0x0, 0x0);
        gbc.writeMem(0xd88e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf290);
        EXPECT(gbc.pc(), 0xd88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd88e), 0xd);
        // 0D 03A0
        gbc.setState(0x7cb4, 0x71d1, 0x3c90, 0x4f41, 0xcbca, 0xc399, 0x0, 0x0);
        gbc.writeMem(0x7cb4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x71d1);
        EXPECT(gbc.pc(), 0x7cb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03A1
        gbc.setState(0x4af, 0x4777, 0x9540, 0xa626, 0xa1dc, 0x7351, 0x0, 0x1);
        gbc.writeMem(0x4af, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4777);
        EXPECT(gbc.pc(), 0x4b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03A2
        gbc.setState(0x9d29, 0xcc9a, 0x1440, 0x9fd4, 0xb10c, 0x3aff, 0x0, 0x0);
        gbc.writeMem(0x9d29, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xcc9a);
        EXPECT(gbc.pc(), 0x9d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d29), 0xd);
        // 0D 03A3
        gbc.setState(0xe8ad, 0xb473, 0x3360, 0x7d12, 0x45c5, 0x56a8, 0x1, 0x0);
        gbc.writeMem(0xe8ad, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xb473);
        EXPECT(gbc.pc(), 0xe8ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8ad), 0xd);
        // 0D 03A4
        gbc.setState(0x8869, 0x7a47, 0xbfa0, 0x7e18, 0xec25, 0xc8bd, 0x1, 0x1);
        gbc.writeMem(0x8869, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7a47);
        EXPECT(gbc.pc(), 0x886a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8869), 0xd);
        // 0D 03A5
        gbc.setState(0x290c, 0xe3c5, 0x2990, 0x76ec, 0x2e87, 0xa97d, 0x1, 0x1);
        gbc.writeMem(0x290c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe3c5);
        EXPECT(gbc.pc(), 0x290d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03A6
        gbc.setState(0x882d, 0xe539, 0x94d0, 0xaf95, 0xbbe9, 0x26fa, 0x1, 0x1);
        gbc.writeMem(0x882d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe539);
        EXPECT(gbc.pc(), 0x882e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x882d), 0xd);
        // 0D 03A8
        gbc.setState(0x409c, 0x38d9, 0xea0, 0xe7b6, 0x3dd4, 0xe779, 0x1, 0x0);
        gbc.writeMem(0x409c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x38d9);
        EXPECT(gbc.pc(), 0x409d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03A9
        gbc.setState(0xea29, 0x712d, 0x3130, 0x9bff, 0x6203, 0x623b, 0x1, 0x0);
        gbc.writeMem(0xea29, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x712d);
        EXPECT(gbc.pc(), 0xea2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea29), 0xd);
        // 0D 03AA
        gbc.setState(0x691e, 0x2a7f, 0x5d60, 0x3c6a, 0x7163, 0xc524, 0x1, 0x1);
        gbc.writeMem(0x691e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2a7f);
        EXPECT(gbc.pc(), 0x691f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03AB
        gbc.setState(0xd85e, 0xfa63, 0x2910, 0x65e0, 0xce12, 0xdce4, 0x1, 0x1);
        gbc.writeMem(0xd85e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfa63);
        EXPECT(gbc.pc(), 0xd85f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd85e), 0xd);
        // 0D 03AC
        gbc.setState(0x6a18, 0x25c7, 0xfbd0, 0x7a45, 0x9ddf, 0x10fd, 0x0, 0x0);
        gbc.writeMem(0x6a18, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x25c7);
        EXPECT(gbc.pc(), 0x6a19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03AD
        gbc.setState(0xbab0, 0x7313, 0x2060, 0x7930, 0x44c7, 0x2d8c, 0x1, 0x1);
        gbc.writeMem(0xbab0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7313);
        EXPECT(gbc.pc(), 0xbab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbab0), 0xd);
        // 0D 03AE
        gbc.setState(0xe26a, 0xb283, 0xd3e0, 0xe4, 0x3e1c, 0xdf4a, 0x1, 0x0);
        gbc.writeMem(0xe26a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb283);
        EXPECT(gbc.pc(), 0xe26b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe26a), 0xd);
        // 0D 03AF
        gbc.setState(0x6d9b, 0x9554, 0x6c20, 0x183b, 0xfafb, 0x191f, 0x0, 0x0);
        gbc.writeMem(0x6d9b, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9554);
        EXPECT(gbc.pc(), 0x6d9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B0
        gbc.setState(0x5434, 0xc8f1, 0x5210, 0xab10, 0xc727, 0x8ee, 0x0, 0x0);
        gbc.writeMem(0x5434, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc8f1);
        EXPECT(gbc.pc(), 0x5435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 0D 03B1
        gbc.setState(0x9662, 0x7219, 0x3740, 0xcdee, 0x4f4f, 0xc89b, 0x1, 0x1);
        gbc.writeMem(0x9662, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7219);
        EXPECT(gbc.pc(), 0x9663);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9662), 0xd);
        // 0D 03B2
        gbc.setState(0x1422, 0xa3df, 0xd520, 0xfa68, 0xef2b, 0x2dbd, 0x0, 0x1);
        gbc.writeMem(0x1422, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa3df);
        EXPECT(gbc.pc(), 0x1423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B3
        gbc.setState(0x156d, 0x4a87, 0x70e0, 0xd21e, 0xc668, 0x9328, 0x0, 0x0);
        gbc.writeMem(0x156d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4a87);
        EXPECT(gbc.pc(), 0x156e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B4
        gbc.setState(0xea9, 0x1add, 0x3a00, 0x7611, 0x1d51, 0x7f7f, 0x1, 0x1);
        gbc.writeMem(0xea9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x1add);
        EXPECT(gbc.pc(), 0xeaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B5
        gbc.setState(0x14b0, 0xcd76, 0x2100, 0x534d, 0x44fd, 0x24a, 0x1, 0x0);
        gbc.writeMem(0x14b0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcd76);
        EXPECT(gbc.pc(), 0x14b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B6
        gbc.setState(0xe355, 0x3b67, 0x9720, 0x391c, 0xab7e, 0xa4, 0x0, 0x0);
        gbc.writeMem(0xe355, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x3b67);
        EXPECT(gbc.pc(), 0xe356);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe355), 0xd);
        // 0D 03B7
        gbc.setState(0x5292, 0xd98, 0x53c0, 0xf252, 0xdd7b, 0xf63e, 0x0, 0x0);
        gbc.writeMem(0x5292, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xd98);
        EXPECT(gbc.pc(), 0x5293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03B8
        gbc.setState(0xc54f, 0xf82, 0x4a60, 0x619b, 0x1281, 0xf67f, 0x0, 0x1);
        gbc.writeMem(0xc54f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf82);
        EXPECT(gbc.pc(), 0xc550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc54f), 0xd);
        // 0D 03B9
        gbc.setState(0x9530, 0x344, 0x4e60, 0x4907, 0xf728, 0xee52, 0x1, 0x1);
        gbc.writeMem(0x9530, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x344);
        EXPECT(gbc.pc(), 0x9531);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9530), 0xd);
        // 0D 03BA
        gbc.setState(0x5e3c, 0xe1c3, 0xae80, 0xfefa, 0xd1f5, 0x455a, 0x1, 0x1);
        gbc.writeMem(0x5e3c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe1c3);
        EXPECT(gbc.pc(), 0x5e3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03BB
        gbc.setState(0x1172, 0x9689, 0xa670, 0xdffc, 0x4ece, 0x947e, 0x1, 0x0);
        gbc.writeMem(0x1172, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9689);
        EXPECT(gbc.pc(), 0x1173);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03BC
        gbc.setState(0x327c, 0x385, 0xb600, 0x4fc1, 0x3462, 0x2169, 0x1, 0x0);
        gbc.writeMem(0x327c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x385);
        EXPECT(gbc.pc(), 0x327d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03BD
        gbc.setState(0x72d0, 0x5499, 0xa510, 0xe3f5, 0x2a27, 0x4912, 0x1, 0x1);
        gbc.writeMem(0x72d0, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5499);
        EXPECT(gbc.pc(), 0x72d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03BE
        gbc.setState(0xa8da, 0x73b1, 0x7b60, 0x723a, 0x778c, 0x82e7, 0x1, 0x1);
        gbc.writeMem(0xa8da, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x73b1);
        EXPECT(gbc.pc(), 0xa8db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8da), 0xd);
        // 0D 03BF
        gbc.setState(0x6e85, 0x59a7, 0xd380, 0xee51, 0xf24a, 0x8538, 0x0, 0x1);
        gbc.writeMem(0x6e85, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x59a7);
        EXPECT(gbc.pc(), 0x6e86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03C0
        gbc.setState(0xc3af, 0x3fdf, 0x89e0, 0xf1c2, 0x8d9d, 0x2c00, 0x1, 0x0);
        gbc.writeMem(0xc3af, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3fdf);
        EXPECT(gbc.pc(), 0xc3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3af), 0xd);
        // 0D 03C1
        gbc.setState(0xa980, 0x2ce6, 0xa9b0, 0x69fa, 0xddad, 0x13ba, 0x1, 0x0);
        gbc.writeMem(0xa980, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2ce6);
        EXPECT(gbc.pc(), 0xa981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa980), 0xd);
        // 0D 03C2
        gbc.setState(0x453e, 0x3a95, 0xee40, 0xa13c, 0xddcf, 0x36d7, 0x1, 0x0);
        gbc.writeMem(0x453e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x3a95);
        EXPECT(gbc.pc(), 0x453f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03C3
        gbc.setState(0xab5c, 0xc8e4, 0x3c80, 0x7a2d, 0x7026, 0x7e1b, 0x0, 0x1);
        gbc.writeMem(0xab5c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc8e4);
        EXPECT(gbc.pc(), 0xab5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5c), 0xd);
        // 0D 03C4
        gbc.setState(0xbb3c, 0xf4d3, 0xfa90, 0x7971, 0xc594, 0xa5dc, 0x0, 0x1);
        gbc.writeMem(0xbb3c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf4d3);
        EXPECT(gbc.pc(), 0xbb3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb3c), 0xd);
        // 0D 03C5
        gbc.setState(0xab9, 0xe62c, 0x310, 0x81eb, 0xde03, 0xac2c, 0x0, 0x1);
        gbc.writeMem(0xab9, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe62c);
        EXPECT(gbc.pc(), 0xaba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03C6
        gbc.setState(0x5981, 0xb65e, 0x8e80, 0xe0ba, 0x7375, 0xc, 0x1, 0x0);
        gbc.writeMem(0x5981, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xb65e);
        EXPECT(gbc.pc(), 0x5982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03C7
        gbc.setState(0xd137, 0x384b, 0xee0, 0xa958, 0x4b49, 0x4a56, 0x0, 0x0);
        gbc.writeMem(0xd137, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x384b);
        EXPECT(gbc.pc(), 0xd138);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd137), 0xd);
        // 0D 03C8
        gbc.setState(0x1c8e, 0x6896, 0x8780, 0xf3d9, 0xa167, 0x3cbd, 0x1, 0x1);
        gbc.writeMem(0x1c8e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6896);
        EXPECT(gbc.pc(), 0x1c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03C9
        gbc.setState(0x17a7, 0xbe9c, 0x32c0, 0x8808, 0x3d4c, 0x888d, 0x1, 0x1);
        gbc.writeMem(0x17a7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xbe9c);
        EXPECT(gbc.pc(), 0x17a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03CA
        gbc.setState(0x5b83, 0x30c1, 0x72e0, 0x917e, 0xf2d7, 0x4412, 0x0, 0x0);
        gbc.writeMem(0x5b83, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x30c1);
        EXPECT(gbc.pc(), 0x5b84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03CB
        gbc.setState(0x4472, 0x59c3, 0x6280, 0x4eec, 0xd875, 0x890d, 0x1, 0x0);
        gbc.writeMem(0x4472, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x59c3);
        EXPECT(gbc.pc(), 0x4473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03CC
        gbc.setState(0x6e2d, 0xb1a5, 0x7320, 0xb040, 0xb2b, 0x98b8, 0x1, 0x1);
        gbc.writeMem(0x6e2d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xb1a5);
        EXPECT(gbc.pc(), 0x6e2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 0D 03CD
        gbc.setState(0x31e7, 0xf057, 0xe470, 0x4986, 0x6344, 0xe754, 0x1, 0x0);
        gbc.writeMem(0x31e7, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf057);
        EXPECT(gbc.pc(), 0x31e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03CE
        gbc.setState(0xc52d, 0x5e67, 0x2210, 0x8f59, 0x4ab9, 0x7701, 0x0, 0x1);
        gbc.writeMem(0xc52d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x5e67);
        EXPECT(gbc.pc(), 0xc52e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc52d), 0xd);
        // 0D 03CF
        gbc.setState(0x72b6, 0x6839, 0x3170, 0x2c35, 0xac30, 0xf3b6, 0x0, 0x1);
        gbc.writeMem(0x72b6, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6839);
        EXPECT(gbc.pc(), 0x72b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03D0
        gbc.setState(0x7c36, 0x36bf, 0x1f10, 0xc12, 0x2ef2, 0x9012, 0x1, 0x1);
        gbc.writeMem(0x7c36, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x36bf);
        EXPECT(gbc.pc(), 0x7c37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03D1
        gbc.setState(0xcc4d, 0xf835, 0xec30, 0x72c8, 0x3cf9, 0x8562, 0x1, 0x1);
        gbc.writeMem(0xcc4d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf835);
        EXPECT(gbc.pc(), 0xcc4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4d), 0xd);
        // 0D 03D2
        gbc.setState(0x3045, 0x11c6, 0x2540, 0x9665, 0x28b2, 0x415c, 0x1, 0x0);
        gbc.writeMem(0x3045, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x11c6);
        EXPECT(gbc.pc(), 0x3046);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03D4
        gbc.setState(0x9e4a, 0x54ca, 0x6c40, 0x84a5, 0x1c70, 0x9f5e, 0x0, 0x1);
        gbc.writeMem(0x9e4a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x54ca);
        EXPECT(gbc.pc(), 0x9e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e4a), 0xd);
        // 0D 03D5
        gbc.setState(0x49f, 0xfa93, 0x7eb0, 0x61ec, 0x72f, 0x9bc9, 0x0, 0x1);
        gbc.writeMem(0x49f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfa93);
        EXPECT(gbc.pc(), 0x4a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03D6
        gbc.setState(0x5101, 0xc169, 0x8c50, 0xd24b, 0xd6a6, 0xf35d, 0x0, 0x1);
        gbc.writeMem(0x5101, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xc169);
        EXPECT(gbc.pc(), 0x5102);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03D7
        gbc.setState(0xae1, 0x1c48, 0x7370, 0x7706, 0xb109, 0x3e6, 0x1, 0x1);
        gbc.writeMem(0xae1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1c48);
        EXPECT(gbc.pc(), 0xae2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03D8
        gbc.setState(0x8c02, 0x78cc, 0x7fe0, 0xeaaf, 0x2206, 0xc160, 0x1, 0x1);
        gbc.writeMem(0x8c02, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x78cc);
        EXPECT(gbc.pc(), 0x8c03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c02), 0xd);
        // 0D 03D9
        gbc.setState(0xe99, 0xfa9c, 0x7450, 0x821e, 0x4785, 0x51e3, 0x0, 0x0);
        gbc.writeMem(0xe99, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xfa9c);
        EXPECT(gbc.pc(), 0xe9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03DB
        gbc.setState(0x42f4, 0x258d, 0xd00, 0x9d0f, 0xe7a9, 0xf631, 0x1, 0x0);
        gbc.writeMem(0x42f4, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x258d);
        EXPECT(gbc.pc(), 0x42f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03DC
        gbc.setState(0xe10e, 0x33b9, 0xa420, 0xc3a, 0xac45, 0x2ddb, 0x0, 0x1);
        gbc.writeMem(0xe10e, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x33b9);
        EXPECT(gbc.pc(), 0xe10f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10e), 0xd);
        // 0D 03DD
        gbc.setState(0x342a, 0x2da7, 0xa200, 0xf1ff, 0x66d7, 0xba95, 0x0, 0x1);
        gbc.writeMem(0x342a, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2da7);
        EXPECT(gbc.pc(), 0x342b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03DE
        gbc.setState(0x497d, 0x862f, 0x2660, 0x7846, 0x8ce8, 0x19d1, 0x1, 0x1);
        gbc.writeMem(0x497d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x862f);
        EXPECT(gbc.pc(), 0x497e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03DF
        gbc.setState(0x806f, 0x721b, 0x8e00, 0xf959, 0xb143, 0xedf8, 0x0, 0x0);
        gbc.writeMem(0x806f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x721b);
        EXPECT(gbc.pc(), 0x8070);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x806f), 0xd);
        // 0D 03E0
        gbc.setState(0xe289, 0x549c, 0x3150, 0xf064, 0xd5b5, 0x1bd2, 0x0, 0x1);
        gbc.writeMem(0xe289, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x549c);
        EXPECT(gbc.pc(), 0xe28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe289), 0xd);
        // 0D 03E1
        gbc.setState(0x470d, 0x5b5c, 0x9f50, 0xb3dc, 0x6993, 0x7316, 0x0, 0x1);
        gbc.writeMem(0x470d, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5b5c);
        EXPECT(gbc.pc(), 0x470e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03E2
        gbc.setState(0x5029, 0xac4c, 0xf8e0, 0x5563, 0x68dd, 0xe2b, 0x0, 0x0);
        gbc.writeMem(0x5029, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xac4c);
        EXPECT(gbc.pc(), 0x502a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 0D 03E3
        gbc.setState(0xe94f, 0x1379, 0xa200, 0x8a0c, 0xbac3, 0xaefa, 0x0, 0x1);
        gbc.writeMem(0xe94f, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1379);
        EXPECT(gbc.pc(), 0xe950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe94f), 0xd);
        // 0D 03E4
        gbc.setState(0xe8d1, 0x9a2c, 0x12d0, 0x7c41, 0xa8e1, 0x3317, 0x0, 0x1);
        gbc.writeMem(0xe8d1, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9a2c);
        EXPECT(gbc.pc(), 0xe8d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8d1), 0xd);
        // 0D 03E5
        gbc.setState(0x574, 0xb40a, 0xf630, 0x654, 0xfe60, 0x315b, 0x0, 0x1);
        gbc.writeMem(0x574, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xb40a);
        EXPECT(gbc.pc(), 0x575);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 0D 03E6
        gbc.setState(0xcdaa, 0xf891, 0x1320, 0xe1b9, 0x8f73, 0xc04, 0x1, 0x1);
        gbc.writeMem(0xcdaa, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf891);
        EXPECT(gbc.pc(), 0xcdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdaa), 0xd);
        // 0D 03E7
        gbc.setState(0xab5c, 0x47fe, 0x4320, 0xbd2e, 0xc0ec, 0x6148, 0x0, 0x0);
        gbc.writeMem(0xab5c, { 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x47fe);
        EXPECT(gbc.pc(), 0xab5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab5c), 0xd);
    }
}
#endif
