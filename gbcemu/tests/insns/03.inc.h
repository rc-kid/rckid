    TEST(gbcemu, opcode_03) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 03 0000
        gbc.setState(0xbf86, 0xac41, 0x9700, 0xa564, 0xa221, 0x4202, 0x0, 0x0);
        gbc.writeMem(0xbf86, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xac41);
        EXPECT(gbc.pc(), 0xbf87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf86), 0x3);
        // 03 0001
        gbc.setState(0xe135, 0xe0ff, 0x1010, 0xd3e, 0xdd81, 0xc833, 0x0, 0x1);
        gbc.writeMem(0xe135, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xe0ff);
        EXPECT(gbc.pc(), 0xe136);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe135), 0x3);
        // 03 0002
        gbc.setState(0x6533, 0xf9de, 0xc710, 0xee30, 0x8f03, 0x89a3, 0x1, 0x0);
        gbc.writeMem(0x6533, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xf9de);
        EXPECT(gbc.pc(), 0x6534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0003
        gbc.setState(0xebcd, 0xfb2d, 0xb150, 0x5a3b, 0xc81b, 0xf500, 0x0, 0x1);
        gbc.writeMem(0xebcd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xfb2d);
        EXPECT(gbc.pc(), 0xebce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebcd), 0x3);
        // 03 0005
        gbc.setState(0xcf0, 0xeb3e, 0xeba0, 0x8128, 0x2328, 0xac9d, 0x0, 0x0);
        gbc.writeMem(0xcf0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xeb3e);
        EXPECT(gbc.pc(), 0xcf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0007
        gbc.setState(0x35fa, 0x55e, 0x1e90, 0x16d9, 0xf4ea, 0x25fa, 0x1, 0x0);
        gbc.writeMem(0x35fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x55e);
        EXPECT(gbc.pc(), 0x35fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0008
        gbc.setState(0xc81, 0x76ec, 0xd5e0, 0x321a, 0x35fa, 0x56b0, 0x1, 0x0);
        gbc.writeMem(0xc81, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x76ec);
        EXPECT(gbc.pc(), 0xc82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0009
        gbc.setState(0x15b6, 0xe976, 0x5b70, 0x7141, 0xc6b, 0xe3fb, 0x1, 0x1);
        gbc.writeMem(0x15b6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe976);
        EXPECT(gbc.pc(), 0x15b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 000A
        gbc.setState(0x1b10, 0xed99, 0x18b0, 0xb56b, 0x3037, 0xee47, 0x0, 0x1);
        gbc.writeMem(0x1b10, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xed99);
        EXPECT(gbc.pc(), 0x1b11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 000B
        gbc.setState(0x7a1d, 0xd0d, 0x40c0, 0xd73a, 0x5e48, 0x5b02, 0x0, 0x0);
        gbc.writeMem(0x7a1d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd0d);
        EXPECT(gbc.pc(), 0x7a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 000C
        gbc.setState(0xc2ab, 0xc668, 0xf640, 0xf82d, 0xcbc6, 0xbaaf, 0x0, 0x0);
        gbc.writeMem(0xc2ab, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xc668);
        EXPECT(gbc.pc(), 0xc2ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ab), 0x3);
        // 03 000D
        gbc.setState(0x82f2, 0x1095, 0xffe0, 0xb19, 0x698f, 0xaa23, 0x1, 0x0);
        gbc.writeMem(0x82f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1095);
        EXPECT(gbc.pc(), 0x82f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82f2), 0x3);
        // 03 000E
        gbc.setState(0x1329, 0xcc10, 0xe640, 0xb1e8, 0x6b66, 0xab8, 0x1, 0x0);
        gbc.writeMem(0x1329, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xcc10);
        EXPECT(gbc.pc(), 0x132a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 000F
        gbc.setState(0x65a6, 0xe3e1, 0xde10, 0x104f, 0xc324, 0x2e6d, 0x0, 0x1);
        gbc.writeMem(0x65a6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe3e1);
        EXPECT(gbc.pc(), 0x65a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0010
        gbc.setState(0x3d53, 0x430f, 0x1e10, 0x7f58, 0x1517, 0x584, 0x1, 0x0);
        gbc.writeMem(0x3d53, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x430f);
        EXPECT(gbc.pc(), 0x3d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0011
        gbc.setState(0x2e09, 0x46bd, 0x9c0, 0x53b9, 0xb2f9, 0xed24, 0x0, 0x1);
        gbc.writeMem(0x2e09, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x46bd);
        EXPECT(gbc.pc(), 0x2e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0012
        gbc.setState(0x9910, 0xcd17, 0xbb10, 0xc9d5, 0x29b2, 0xa7c1, 0x1, 0x0);
        gbc.writeMem(0x9910, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xcd17);
        EXPECT(gbc.pc(), 0x9911);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9910), 0x3);
        // 03 0013
        gbc.setState(0x303a, 0x9472, 0x5ff0, 0xc149, 0x8633, 0x24f2, 0x0, 0x1);
        gbc.writeMem(0x303a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9472);
        EXPECT(gbc.pc(), 0x303b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0014
        gbc.setState(0x7075, 0x87c, 0x1540, 0x347a, 0x5a, 0xe1ed, 0x1, 0x0);
        gbc.writeMem(0x7075, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x87c);
        EXPECT(gbc.pc(), 0x7076);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0015
        gbc.setState(0x1d28, 0xaa3f, 0x1eb0, 0xf800, 0xb3ee, 0x7939, 0x0, 0x1);
        gbc.writeMem(0x1d28, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xaa3f);
        EXPECT(gbc.pc(), 0x1d29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0016
        gbc.setState(0x92d7, 0x8b5d, 0xa6d0, 0xf57, 0x9e4a, 0x8520, 0x0, 0x0);
        gbc.writeMem(0x92d7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8b5d);
        EXPECT(gbc.pc(), 0x92d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92d7), 0x3);
        // 03 0017
        gbc.setState(0x3744, 0x1183, 0x1c00, 0xb75e, 0x3090, 0x5966, 0x1, 0x0);
        gbc.writeMem(0x3744, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1183);
        EXPECT(gbc.pc(), 0x3745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0018
        gbc.setState(0x5f7e, 0xf2ba, 0x8590, 0xb56, 0x884e, 0xe4d, 0x0, 0x0);
        gbc.writeMem(0x5f7e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xf2ba);
        EXPECT(gbc.pc(), 0x5f7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0019
        gbc.setState(0xaa1e, 0xe1ac, 0x1280, 0xa262, 0x16ab, 0xa9ff, 0x0, 0x0);
        gbc.writeMem(0xaa1e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe1ac);
        EXPECT(gbc.pc(), 0xaa1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa1e), 0x3);
        // 03 001B
        gbc.setState(0x7b2d, 0xa16a, 0x5c30, 0x246b, 0x97a1, 0x4f2c, 0x1, 0x1);
        gbc.writeMem(0x7b2d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xa16a);
        EXPECT(gbc.pc(), 0x7b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 001C
        gbc.setState(0x2ce6, 0xaa22, 0x3fa0, 0x530c, 0x64a7, 0xb3, 0x0, 0x1);
        gbc.writeMem(0x2ce6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xaa22);
        EXPECT(gbc.pc(), 0x2ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 001D
        gbc.setState(0x91f9, 0x7d00, 0x6450, 0x91ce, 0xc7a7, 0x4e43, 0x0, 0x0);
        gbc.writeMem(0x91f9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7d00);
        EXPECT(gbc.pc(), 0x91fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91f9), 0x3);
        // 03 001E
        gbc.setState(0x1510, 0xcbd9, 0xf90, 0xf241, 0xbb5d, 0x7a92, 0x0, 0x0);
        gbc.writeMem(0x1510, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcbd9);
        EXPECT(gbc.pc(), 0x1511);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 001F
        gbc.setState(0x5cdf, 0x1353, 0xf4b0, 0x1a2b, 0x80ea, 0xc463, 0x1, 0x1);
        gbc.writeMem(0x5cdf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x1353);
        EXPECT(gbc.pc(), 0x5ce0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0020
        gbc.setState(0x45a7, 0xf507, 0xeac0, 0x1f6e, 0xa1ae, 0x45bb, 0x0, 0x0);
        gbc.writeMem(0x45a7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xf507);
        EXPECT(gbc.pc(), 0x45a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0021
        gbc.setState(0x2b31, 0x3c9f, 0xfde0, 0x9a7f, 0xf648, 0xd392, 0x1, 0x1);
        gbc.writeMem(0x2b31, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3c9f);
        EXPECT(gbc.pc(), 0x2b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0022
        gbc.setState(0x8fb8, 0x7c6d, 0x92e0, 0xd794, 0x5d88, 0xabd5, 0x0, 0x0);
        gbc.writeMem(0x8fb8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7c6d);
        EXPECT(gbc.pc(), 0x8fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fb8), 0x3);
        // 03 0023
        gbc.setState(0xa209, 0x8c33, 0xa700, 0x4cdc, 0x457c, 0xf4a3, 0x0, 0x0);
        gbc.writeMem(0xa209, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x8c33);
        EXPECT(gbc.pc(), 0xa20a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa209), 0x3);
        // 03 0025
        gbc.setState(0xed5a, 0x90d4, 0x8520, 0x1c85, 0xfbac, 0xa32e, 0x0, 0x1);
        gbc.writeMem(0xed5a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x90d4);
        EXPECT(gbc.pc(), 0xed5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5a), 0x3);
        // 03 0026
        gbc.setState(0x60c5, 0xd681, 0x6f10, 0x8a90, 0xab5c, 0xf12c, 0x1, 0x0);
        gbc.writeMem(0x60c5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd681);
        EXPECT(gbc.pc(), 0x60c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0027
        gbc.setState(0xbe1f, 0xb952, 0xd2e0, 0x201b, 0x653e, 0xea7b, 0x0, 0x1);
        gbc.writeMem(0xbe1f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb952);
        EXPECT(gbc.pc(), 0xbe20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe1f), 0x3);
        // 03 0028
        gbc.setState(0xa297, 0x5157, 0xdd70, 0x2d6, 0xe73a, 0x6f9e, 0x0, 0x1);
        gbc.writeMem(0xa297, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5157);
        EXPECT(gbc.pc(), 0xa298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa297), 0x3);
        // 03 0029
        gbc.setState(0x56ad, 0xafad, 0x8900, 0x958e, 0x3944, 0x8b6c, 0x0, 0x0);
        gbc.writeMem(0x56ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xafad);
        EXPECT(gbc.pc(), 0x56ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 002A
        gbc.setState(0xa3a0, 0xf0c7, 0x1fa0, 0x361a, 0xdcb6, 0x36af, 0x0, 0x1);
        gbc.writeMem(0xa3a0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf0c7);
        EXPECT(gbc.pc(), 0xa3a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3a0), 0x3);
        // 03 002B
        gbc.setState(0x2aa7, 0x8ed7, 0x7f90, 0xa468, 0x32bd, 0x4bba, 0x1, 0x1);
        gbc.writeMem(0x2aa7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8ed7);
        EXPECT(gbc.pc(), 0x2aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 002C
        gbc.setState(0x1d87, 0x56b5, 0x2350, 0xd281, 0xec36, 0xef39, 0x1, 0x1);
        gbc.writeMem(0x1d87, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x56b5);
        EXPECT(gbc.pc(), 0x1d88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 002D
        gbc.setState(0xd40d, 0x9ce4, 0xbd90, 0xe333, 0xdfc6, 0xdf5b, 0x1, 0x0);
        gbc.writeMem(0xd40d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9ce4);
        EXPECT(gbc.pc(), 0xd40e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd40d), 0x3);
        // 03 002E
        gbc.setState(0x50ea, 0x60e0, 0x7100, 0x8448, 0x3215, 0xc75a, 0x1, 0x0);
        gbc.writeMem(0x50ea, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x60e0);
        EXPECT(gbc.pc(), 0x50eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 002F
        gbc.setState(0x58d3, 0xbb33, 0x7090, 0x6686, 0xe554, 0x2f22, 0x0, 0x0);
        gbc.writeMem(0x58d3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xbb33);
        EXPECT(gbc.pc(), 0x58d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0030
        gbc.setState(0x8c08, 0x6b60, 0xdb40, 0x51d9, 0xa47c, 0x250c, 0x0, 0x0);
        gbc.writeMem(0x8c08, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6b60);
        EXPECT(gbc.pc(), 0x8c09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c08), 0x3);
        // 03 0031
        gbc.setState(0x949f, 0x3025, 0x2f60, 0xdab7, 0xba2a, 0x65dc, 0x0, 0x0);
        gbc.writeMem(0x949f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3025);
        EXPECT(gbc.pc(), 0x94a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x949f), 0x3);
        // 03 0032
        gbc.setState(0x3dd, 0xc9c, 0x75c0, 0x9562, 0x593, 0x3ad7, 0x0, 0x0);
        gbc.writeMem(0x3dd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc9c);
        EXPECT(gbc.pc(), 0x3de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0033
        gbc.setState(0xcf50, 0xf0c9, 0x9290, 0xcd31, 0xadd6, 0x4c2e, 0x0, 0x1);
        gbc.writeMem(0xcf50, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf0c9);
        EXPECT(gbc.pc(), 0xcf51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf50), 0x3);
        // 03 0034
        gbc.setState(0xb9c9, 0x3461, 0x9f10, 0x9647, 0x5244, 0xa1f3, 0x1, 0x1);
        gbc.writeMem(0xb9c9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x3461);
        EXPECT(gbc.pc(), 0xb9ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9c9), 0x3);
        // 03 0035
        gbc.setState(0xd7a8, 0xddf6, 0x1840, 0xd6f, 0x3458, 0xcc60, 0x0, 0x0);
        gbc.writeMem(0xd7a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xddf6);
        EXPECT(gbc.pc(), 0xd7a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a8), 0x3);
        // 03 0036
        gbc.setState(0xc9dd, 0x7fcb, 0x8e70, 0x6668, 0x6edc, 0xc713, 0x1, 0x0);
        gbc.writeMem(0xc9dd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7fcb);
        EXPECT(gbc.pc(), 0xc9de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9dd), 0x3);
        // 03 0037
        gbc.setState(0x7199, 0xc34e, 0x6a90, 0xd15, 0xca5c, 0x4a1, 0x0, 0x1);
        gbc.writeMem(0x7199, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc34e);
        EXPECT(gbc.pc(), 0x719a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0038
        gbc.setState(0x17bf, 0x8f3e, 0xa570, 0x3463, 0xd4e0, 0x3bfd, 0x0, 0x0);
        gbc.writeMem(0x17bf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8f3e);
        EXPECT(gbc.pc(), 0x17c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0039
        gbc.setState(0x196b, 0xc0f9, 0xe8c0, 0xc3d7, 0x1582, 0x76db, 0x1, 0x0);
        gbc.writeMem(0x196b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xc0f9);
        EXPECT(gbc.pc(), 0x196c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 003A
        gbc.setState(0x49f1, 0x7b, 0x6e30, 0x183d, 0x861c, 0xbfed, 0x1, 0x1);
        gbc.writeMem(0x49f1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7b);
        EXPECT(gbc.pc(), 0x49f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 003B
        gbc.setState(0x2284, 0x2102, 0xac50, 0x381e, 0x6736, 0x20f7, 0x1, 0x0);
        gbc.writeMem(0x2284, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x2102);
        EXPECT(gbc.pc(), 0x2285);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 003C
        gbc.setState(0xa99d, 0xbde1, 0x37f0, 0x64aa, 0x9e75, 0x80ad, 0x1, 0x0);
        gbc.writeMem(0xa99d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xbde1);
        EXPECT(gbc.pc(), 0xa99e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa99d), 0x3);
        // 03 003D
        gbc.setState(0xce61, 0x41aa, 0xc3d0, 0xf0b9, 0xe39f, 0xb883, 0x0, 0x0);
        gbc.writeMem(0xce61, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x41aa);
        EXPECT(gbc.pc(), 0xce62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce61), 0x3);
        // 03 003E
        gbc.setState(0x9b1c, 0xbb9b, 0x2130, 0xcbbe, 0x9eab, 0x85e9, 0x1, 0x0);
        gbc.writeMem(0x9b1c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbb9b);
        EXPECT(gbc.pc(), 0x9b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b1c), 0x3);
        // 03 003F
        gbc.setState(0xc422, 0x2116, 0x8030, 0x2235, 0x8a2d, 0x1de6, 0x0, 0x0);
        gbc.writeMem(0xc422, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2116);
        EXPECT(gbc.pc(), 0xc423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc422), 0x3);
        // 03 0040
        gbc.setState(0x33fb, 0xcd0, 0xf390, 0x8826, 0xedf, 0xf365, 0x1, 0x1);
        gbc.writeMem(0x33fb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xcd0);
        EXPECT(gbc.pc(), 0x33fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0041
        gbc.setState(0xb5f7, 0x6de8, 0x9ba0, 0x9006, 0xf7c1, 0x4084, 0x1, 0x1);
        gbc.writeMem(0xb5f7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6de8);
        EXPECT(gbc.pc(), 0xb5f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5f7), 0x3);
        // 03 0042
        gbc.setState(0x29dd, 0x5965, 0x9680, 0x353, 0xef76, 0x556d, 0x1, 0x0);
        gbc.writeMem(0x29dd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5965);
        EXPECT(gbc.pc(), 0x29de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0043
        gbc.setState(0xce8b, 0xd719, 0xc7e0, 0x32e5, 0x21f5, 0x29f9, 0x0, 0x1);
        gbc.writeMem(0xce8b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd719);
        EXPECT(gbc.pc(), 0xce8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8b), 0x3);
        // 03 0044
        gbc.setState(0x37d5, 0x65e3, 0xa800, 0xe0, 0xdecd, 0x277b, 0x0, 0x0);
        gbc.writeMem(0x37d5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x65e3);
        EXPECT(gbc.pc(), 0x37d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0045
        gbc.setState(0xe7a7, 0xe96f, 0xa120, 0xf91e, 0xb9ee, 0x5261, 0x1, 0x1);
        gbc.writeMem(0xe7a7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe96f);
        EXPECT(gbc.pc(), 0xe7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a7), 0x3);
        // 03 0046
        gbc.setState(0xc38e, 0xcc3c, 0xb240, 0x4707, 0xcc87, 0x3e29, 0x0, 0x0);
        gbc.writeMem(0xc38e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xcc3c);
        EXPECT(gbc.pc(), 0xc38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38e), 0x3);
        // 03 0047
        gbc.setState(0x9edb, 0x8d7, 0xaa90, 0xfbba, 0xc7a0, 0xa2eb, 0x1, 0x1);
        gbc.writeMem(0x9edb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8d7);
        EXPECT(gbc.pc(), 0x9edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9edb), 0x3);
        // 03 0048
        gbc.setState(0xb15, 0x5548, 0x440, 0x34ca, 0x9a5f, 0x3fd8, 0x1, 0x0);
        gbc.writeMem(0xb15, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5548);
        EXPECT(gbc.pc(), 0xb16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0049
        gbc.setState(0x8687, 0xdd29, 0x82f0, 0x1606, 0xd9b2, 0x402e, 0x0, 0x0);
        gbc.writeMem(0x8687, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xdd29);
        EXPECT(gbc.pc(), 0x8688);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8687), 0x3);
        // 03 004A
        gbc.setState(0xd291, 0x90f9, 0x8800, 0xa7d2, 0xbb38, 0x54e6, 0x1, 0x0);
        gbc.writeMem(0xd291, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x90f9);
        EXPECT(gbc.pc(), 0xd292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd291), 0x3);
        // 03 004B
        gbc.setState(0xa140, 0xc1a4, 0x70, 0xcc28, 0x8c11, 0xf96f, 0x1, 0x0);
        gbc.writeMem(0xa140, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xc1a4);
        EXPECT(gbc.pc(), 0xa141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa140), 0x3);
        // 03 004C
        gbc.setState(0xeb8e, 0xe8dc, 0x71b0, 0xdcb3, 0x5b9, 0xfca8, 0x1, 0x1);
        gbc.writeMem(0xeb8e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0xeb8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb8e), 0x3);
        // 03 004D
        gbc.setState(0x5528, 0x2015, 0x2f0, 0xd0ac, 0xd05d, 0x2916, 0x1, 0x0);
        gbc.writeMem(0x5528, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x2015);
        EXPECT(gbc.pc(), 0x5529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 004E
        gbc.setState(0x36d4, 0xfdea, 0xd940, 0x2fb8, 0xeb9a, 0xe637, 0x0, 0x1);
        gbc.writeMem(0x36d4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xfdea);
        EXPECT(gbc.pc(), 0x36d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 004F
        gbc.setState(0x416e, 0x9ce8, 0xcf40, 0xca0b, 0x2f2c, 0x5008, 0x0, 0x0);
        gbc.writeMem(0x416e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x9ce8);
        EXPECT(gbc.pc(), 0x416f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0050
        gbc.setState(0x2a32, 0x7c2d, 0x7620, 0x10b1, 0x932c, 0xa95c, 0x0, 0x0);
        gbc.writeMem(0x2a32, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7c2d);
        EXPECT(gbc.pc(), 0x2a33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0051
        gbc.setState(0xead7, 0x1c94, 0x770, 0x52ae, 0xd76d, 0xa5bc, 0x1, 0x0);
        gbc.writeMem(0xead7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1c94);
        EXPECT(gbc.pc(), 0xead8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xead7), 0x3);
        // 03 0052
        gbc.setState(0x635c, 0x3e58, 0x5070, 0xb4cd, 0xb849, 0x71b3, 0x0, 0x0);
        gbc.writeMem(0x635c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3e58);
        EXPECT(gbc.pc(), 0x635d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0053
        gbc.setState(0x8e39, 0x3987, 0xfd0, 0xa9fd, 0x2c13, 0x916d, 0x1, 0x0);
        gbc.writeMem(0x8e39, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3987);
        EXPECT(gbc.pc(), 0x8e3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e39), 0x3);
        // 03 0054
        gbc.setState(0x321b, 0xf532, 0xe720, 0x7951, 0x553b, 0x76d2, 0x1, 0x0);
        gbc.writeMem(0x321b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf532);
        EXPECT(gbc.pc(), 0x321c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0055
        gbc.setState(0x4def, 0x178, 0xd1c0, 0x44e8, 0x7829, 0x51c1, 0x1, 0x1);
        gbc.writeMem(0x4def, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x178);
        EXPECT(gbc.pc(), 0x4df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0056
        gbc.setState(0xd5a0, 0xa66f, 0xa840, 0x13d2, 0x128a, 0x89c1, 0x0, 0x1);
        gbc.writeMem(0xd5a0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xa66f);
        EXPECT(gbc.pc(), 0xd5a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5a0), 0x3);
        // 03 0057
        gbc.setState(0xa03e, 0x7f95, 0xbfe0, 0x54a7, 0xa2f5, 0xef07, 0x1, 0x1);
        gbc.writeMem(0xa03e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7f95);
        EXPECT(gbc.pc(), 0xa03f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa03e), 0x3);
        // 03 0058
        gbc.setState(0x766b, 0x1268, 0xc80, 0x77f6, 0x60eb, 0xa75f, 0x0, 0x1);
        gbc.writeMem(0x766b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1268);
        EXPECT(gbc.pc(), 0x766c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0059
        gbc.setState(0x1abb, 0x7a0c, 0x8dd0, 0xb07a, 0x52c4, 0xca48, 0x0, 0x0);
        gbc.writeMem(0x1abb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7a0c);
        EXPECT(gbc.pc(), 0x1abc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 005A
        gbc.setState(0x98b7, 0xe018, 0x3ff0, 0xaf8d, 0x6af3, 0x10c9, 0x1, 0x0);
        gbc.writeMem(0x98b7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe018);
        EXPECT(gbc.pc(), 0x98b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b7), 0x3);
        // 03 005B
        gbc.setState(0x912b, 0xf9be, 0x8f40, 0x4e58, 0x44c2, 0xf7b3, 0x1, 0x0);
        gbc.writeMem(0x912b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xf9be);
        EXPECT(gbc.pc(), 0x912c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x912b), 0x3);
        // 03 005C
        gbc.setState(0x170, 0x71c7, 0x6e0, 0x60e6, 0x48c9, 0x8ca6, 0x0, 0x0);
        gbc.writeMem(0x170, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x71c7);
        EXPECT(gbc.pc(), 0x171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 005D
        gbc.setState(0x479c, 0x76f8, 0x35c0, 0xa049, 0xbd20, 0xc7c9, 0x0, 0x1);
        gbc.writeMem(0x479c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x76f8);
        EXPECT(gbc.pc(), 0x479d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 005E
        gbc.setState(0x3596, 0xe413, 0xbc70, 0xb18c, 0x3377, 0x6b89, 0x1, 0x0);
        gbc.writeMem(0x3596, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xe413);
        EXPECT(gbc.pc(), 0x3597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 005F
        gbc.setState(0x1ba8, 0x2e3e, 0xead0, 0x96, 0x3ddc, 0x470d, 0x0, 0x0);
        gbc.writeMem(0x1ba8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2e3e);
        EXPECT(gbc.pc(), 0x1ba9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0060
        gbc.setState(0xb324, 0x490f, 0xc210, 0xd4, 0x2f56, 0xf0c8, 0x0, 0x0);
        gbc.writeMem(0xb324, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x490f);
        EXPECT(gbc.pc(), 0xb325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb324), 0x3);
        // 03 0061
        gbc.setState(0xa9ec, 0x77a6, 0xe760, 0x5cc3, 0x761c, 0x7665, 0x1, 0x1);
        gbc.writeMem(0xa9ec, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x77a6);
        EXPECT(gbc.pc(), 0xa9ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ec), 0x3);
        // 03 0062
        gbc.setState(0x11, 0x7c80, 0x4c10, 0xb212, 0x54f, 0xf1c5, 0x0, 0x1);
        gbc.writeMem(0x11, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x7c80);
        EXPECT(gbc.pc(), 0x12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0063
        gbc.setState(0x5ff9, 0xf230, 0xe1a0, 0xb779, 0x8a18, 0xad98, 0x0, 0x0);
        gbc.writeMem(0x5ff9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf230);
        EXPECT(gbc.pc(), 0x5ffa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0064
        gbc.setState(0x2f57, 0xe58b, 0xf820, 0xa162, 0x33ad, 0xb6fa, 0x1, 0x0);
        gbc.writeMem(0x2f57, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xe58b);
        EXPECT(gbc.pc(), 0x2f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0065
        gbc.setState(0xc5dc, 0x6c5e, 0xf5b0, 0x825e, 0x7309, 0xc0a0, 0x1, 0x0);
        gbc.writeMem(0xc5dc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6c5e);
        EXPECT(gbc.pc(), 0xc5dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5dc), 0x3);
        // 03 0066
        gbc.setState(0xe3a8, 0x5cfe, 0xfdd0, 0xc211, 0xa938, 0x86b1, 0x1, 0x1);
        gbc.writeMem(0xe3a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5cfe);
        EXPECT(gbc.pc(), 0xe3a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3a8), 0x3);
        // 03 0067
        gbc.setState(0x2b0b, 0xe355, 0x5dd0, 0xd5e5, 0x5a18, 0x9af0, 0x1, 0x1);
        gbc.writeMem(0x2b0b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe355);
        EXPECT(gbc.pc(), 0x2b0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0069
        gbc.setState(0xa375, 0x63ef, 0xb10, 0xf805, 0xe1c3, 0x8430, 0x1, 0x1);
        gbc.writeMem(0xa375, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x63ef);
        EXPECT(gbc.pc(), 0xa376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa375), 0x3);
        // 03 006A
        gbc.setState(0x58b4, 0x2f72, 0xedd0, 0xcecd, 0xaac3, 0xaa72, 0x1, 0x1);
        gbc.writeMem(0x58b4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2f72);
        EXPECT(gbc.pc(), 0x58b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 006B
        gbc.setState(0xbf1e, 0x746c, 0xb930, 0x396c, 0xc231, 0xfdd7, 0x1, 0x1);
        gbc.writeMem(0xbf1e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x746c);
        EXPECT(gbc.pc(), 0xbf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf1e), 0x3);
        // 03 006C
        gbc.setState(0xb6e5, 0xae50, 0xdde0, 0x81f, 0x52d3, 0x33ba, 0x1, 0x0);
        gbc.writeMem(0xb6e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xae50);
        EXPECT(gbc.pc(), 0xb6e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6e5), 0x3);
        // 03 006D
        gbc.setState(0x1ba2, 0x6959, 0x6110, 0x7514, 0x1e35, 0x9d08, 0x1, 0x0);
        gbc.writeMem(0x1ba2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6959);
        EXPECT(gbc.pc(), 0x1ba3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 006E
        gbc.setState(0x14cd, 0xee24, 0x3290, 0xb4f2, 0x8815, 0xc0d3, 0x0, 0x0);
        gbc.writeMem(0x14cd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xee24);
        EXPECT(gbc.pc(), 0x14ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 006F
        gbc.setState(0xcd21, 0xb213, 0xe440, 0xd1af, 0x939c, 0x9740, 0x0, 0x0);
        gbc.writeMem(0xcd21, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xb213);
        EXPECT(gbc.pc(), 0xcd22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd21), 0x3);
        // 03 0070
        gbc.setState(0xab58, 0xbb45, 0x6a70, 0xd096, 0x292b, 0xcb69, 0x0, 0x0);
        gbc.writeMem(0xab58, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbb45);
        EXPECT(gbc.pc(), 0xab59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab58), 0x3);
        // 03 0071
        gbc.setState(0x739f, 0xd5c4, 0x4260, 0xa17e, 0x44ea, 0xab0d, 0x1, 0x0);
        gbc.writeMem(0x739f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd5c4);
        EXPECT(gbc.pc(), 0x73a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0072
        gbc.setState(0xb0c0, 0xcdee, 0x32f0, 0x3fc4, 0x1dce, 0x840a, 0x1, 0x1);
        gbc.writeMem(0xb0c0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcdee);
        EXPECT(gbc.pc(), 0xb0c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0c0), 0x3);
        // 03 0073
        gbc.setState(0x1482, 0x8ba9, 0xd4f0, 0x36a5, 0x96df, 0x6d, 0x1, 0x0);
        gbc.writeMem(0x1482, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8ba9);
        EXPECT(gbc.pc(), 0x1483);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0074
        gbc.setState(0x2df8, 0x815a, 0xec40, 0x80cd, 0xeae5, 0x9005, 0x0, 0x1);
        gbc.writeMem(0x2df8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x815a);
        EXPECT(gbc.pc(), 0x2df9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0076
        gbc.setState(0x436f, 0xd3fa, 0x5540, 0x5acc, 0x5a94, 0xbe36, 0x0, 0x0);
        gbc.writeMem(0x436f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xd3fa);
        EXPECT(gbc.pc(), 0x4370);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0077
        gbc.setState(0x5236, 0x62f2, 0x2a10, 0x9f59, 0x9f2a, 0x7d87, 0x1, 0x0);
        gbc.writeMem(0x5236, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x62f2);
        EXPECT(gbc.pc(), 0x5237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0078
        gbc.setState(0x2935, 0x2ea2, 0xd9e0, 0xa82e, 0x8559, 0x5a54, 0x1, 0x0);
        gbc.writeMem(0x2935, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x2ea2);
        EXPECT(gbc.pc(), 0x2936);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0079
        gbc.setState(0x558e, 0x3b53, 0x8570, 0x750d, 0xd24e, 0xd0b3, 0x1, 0x0);
        gbc.writeMem(0x558e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3b53);
        EXPECT(gbc.pc(), 0x558f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 007A
        gbc.setState(0x3f4d, 0xa315, 0x2520, 0xebb6, 0x99b7, 0x8087, 0x0, 0x1);
        gbc.writeMem(0x3f4d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa315);
        EXPECT(gbc.pc(), 0x3f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 007B
        gbc.setState(0x4e60, 0x4f3a, 0xfc40, 0x4345, 0xf9ed, 0x94a3, 0x1, 0x1);
        gbc.writeMem(0x4e60, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4f3a);
        EXPECT(gbc.pc(), 0x4e61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 007C
        gbc.setState(0x37de, 0xf820, 0x9810, 0x702e, 0xc48b, 0xe3c0, 0x1, 0x1);
        gbc.writeMem(0x37de, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xf820);
        EXPECT(gbc.pc(), 0x37df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 007D
        gbc.setState(0x1671, 0x3b3, 0x2d60, 0xd297, 0xac2c, 0x70bd, 0x0, 0x0);
        gbc.writeMem(0x1671, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3b3);
        EXPECT(gbc.pc(), 0x1672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 007E
        gbc.setState(0xb6a8, 0x65de, 0x86e0, 0x966b, 0x6d82, 0x719d, 0x1, 0x1);
        gbc.writeMem(0xb6a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x65de);
        EXPECT(gbc.pc(), 0xb6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a8), 0x3);
        // 03 007F
        gbc.setState(0x5d5d, 0xe180, 0xfef0, 0x24a7, 0x25df, 0x9ee1, 0x1, 0x1);
        gbc.writeMem(0x5d5d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xe180);
        EXPECT(gbc.pc(), 0x5d5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0080
        gbc.setState(0xe258, 0xd203, 0x8460, 0x9c43, 0x82f3, 0x1027, 0x0, 0x0);
        gbc.writeMem(0xe258, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd203);
        EXPECT(gbc.pc(), 0xe259);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe258), 0x3);
        // 03 0081
        gbc.setState(0x7e3f, 0x4858, 0xf600, 0xe105, 0xe0bf, 0xc48a, 0x1, 0x1);
        gbc.writeMem(0x7e3f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4858);
        EXPECT(gbc.pc(), 0x7e40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0082
        gbc.setState(0xc472, 0x7057, 0x9270, 0x5cbc, 0xcca8, 0x557a, 0x0, 0x1);
        gbc.writeMem(0xc472, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7057);
        EXPECT(gbc.pc(), 0xc473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc472), 0x3);
        // 03 0083
        gbc.setState(0xde15, 0x78fb, 0xaee0, 0x267, 0x9754, 0xfc37, 0x0, 0x1);
        gbc.writeMem(0xde15, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x78fb);
        EXPECT(gbc.pc(), 0xde16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde15), 0x3);
        // 03 0084
        gbc.setState(0x538e, 0x6426, 0x59b0, 0x5193, 0x754e, 0xe60, 0x0, 0x1);
        gbc.writeMem(0x538e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6426);
        EXPECT(gbc.pc(), 0x538f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0085
        gbc.setState(0xa508, 0x131, 0xf790, 0x10e5, 0xc045, 0xfd05, 0x1, 0x1);
        gbc.writeMem(0xa508, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x131);
        EXPECT(gbc.pc(), 0xa509);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa508), 0x3);
        // 03 0086
        gbc.setState(0x891d, 0x368e, 0xfb30, 0xf40b, 0x81c, 0x9021, 0x1, 0x0);
        gbc.writeMem(0x891d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x368e);
        EXPECT(gbc.pc(), 0x891e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x891d), 0x3);
        // 03 0087
        gbc.setState(0x1085, 0x6cf1, 0x7720, 0x4d6, 0xad5e, 0x9c60, 0x0, 0x1);
        gbc.writeMem(0x1085, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6cf1);
        EXPECT(gbc.pc(), 0x1086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0088
        gbc.setState(0x5d25, 0xccee, 0x7d90, 0x55cc, 0x3689, 0x3bbe, 0x0, 0x0);
        gbc.writeMem(0x5d25, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xccee);
        EXPECT(gbc.pc(), 0x5d26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0089
        gbc.setState(0x508, 0xcc0, 0x3810, 0xc8af, 0xca7c, 0xc08f, 0x0, 0x1);
        gbc.writeMem(0x508, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcc0);
        EXPECT(gbc.pc(), 0x509);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 008A
        gbc.setState(0x7785, 0x946e, 0xa500, 0xa984, 0x7551, 0xc243, 0x1, 0x0);
        gbc.writeMem(0x7785, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x946e);
        EXPECT(gbc.pc(), 0x7786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 008B
        gbc.setState(0x65dc, 0xfdfb, 0x98b0, 0x362a, 0x5745, 0x8638, 0x1, 0x0);
        gbc.writeMem(0x65dc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfdfb);
        EXPECT(gbc.pc(), 0x65dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 008C
        gbc.setState(0xd26b, 0xa8d8, 0x8d70, 0x39e2, 0x19, 0x2558, 0x0, 0x0);
        gbc.writeMem(0xd26b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xa8d8);
        EXPECT(gbc.pc(), 0xd26c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd26b), 0x3);
        // 03 008D
        gbc.setState(0x1ee3, 0x55b2, 0x6d70, 0xf7a8, 0xbeb1, 0x5ece, 0x1, 0x1);
        gbc.writeMem(0x1ee3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x55b2);
        EXPECT(gbc.pc(), 0x1ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 008E
        gbc.setState(0x153d, 0x3115, 0xf300, 0x1a6c, 0xced0, 0xe60a, 0x0, 0x1);
        gbc.writeMem(0x153d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x3115);
        EXPECT(gbc.pc(), 0x153e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 008F
        gbc.setState(0xdd4d, 0x9db0, 0x4e90, 0x99b1, 0x71e3, 0xa936, 0x0, 0x0);
        gbc.writeMem(0xdd4d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x9db0);
        EXPECT(gbc.pc(), 0xdd4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd4d), 0x3);
        // 03 0090
        gbc.setState(0x690, 0x1396, 0xb4f0, 0xed9d, 0xc3bd, 0xa076, 0x1, 0x1);
        gbc.writeMem(0x690, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1396);
        EXPECT(gbc.pc(), 0x691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0091
        gbc.setState(0xc5ec, 0x4f01, 0x7610, 0xb224, 0xa50e, 0xc1f8, 0x1, 0x1);
        gbc.writeMem(0xc5ec, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x4f01);
        EXPECT(gbc.pc(), 0xc5ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ec), 0x3);
        // 03 0092
        gbc.setState(0x39c3, 0x3a91, 0xbf80, 0x58e6, 0x4044, 0xd919, 0x1, 0x1);
        gbc.writeMem(0x39c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x3a91);
        EXPECT(gbc.pc(), 0x39c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0093
        gbc.setState(0xc0f2, 0x9925, 0xd990, 0x499b, 0xcf66, 0xceb8, 0x0, 0x1);
        gbc.writeMem(0xc0f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x9925);
        EXPECT(gbc.pc(), 0xc0f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc0f2), 0x3);
        // 03 0094
        gbc.setState(0xd252, 0x1424, 0xbd50, 0x64f5, 0x8ec0, 0x27ca, 0x0, 0x1);
        gbc.writeMem(0xd252, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1424);
        EXPECT(gbc.pc(), 0xd253);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd252), 0x3);
        // 03 0095
        gbc.setState(0xb285, 0xec25, 0x7b50, 0x2d5b, 0x2ab2, 0xc49a, 0x1, 0x1);
        gbc.writeMem(0xb285, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xec25);
        EXPECT(gbc.pc(), 0xb286);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb285), 0x3);
        // 03 0096
        gbc.setState(0x6506, 0x17cb, 0xadf0, 0xa020, 0xa09e, 0x2635, 0x0, 0x1);
        gbc.writeMem(0x6506, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x17cb);
        EXPECT(gbc.pc(), 0x6507);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0097
        gbc.setState(0xc290, 0x8d83, 0x5f20, 0x3f3, 0xf85, 0x92c8, 0x0, 0x1);
        gbc.writeMem(0xc290, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8d83);
        EXPECT(gbc.pc(), 0xc291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc290), 0x3);
        // 03 0098
        gbc.setState(0x2ed8, 0xef0d, 0x2750, 0x7a9d, 0x7457, 0xc238, 0x1, 0x0);
        gbc.writeMem(0x2ed8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xef0d);
        EXPECT(gbc.pc(), 0x2ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0099
        gbc.setState(0x7b75, 0x68c2, 0xb590, 0xc202, 0xb999, 0xba67, 0x0, 0x0);
        gbc.writeMem(0x7b75, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x68c2);
        EXPECT(gbc.pc(), 0x7b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 009A
        gbc.setState(0x39f2, 0xbc2d, 0x14c0, 0x93ba, 0x83ed, 0xa285, 0x0, 0x1);
        gbc.writeMem(0x39f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xbc2d);
        EXPECT(gbc.pc(), 0x39f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 009B
        gbc.setState(0x68c2, 0x4c11, 0x6280, 0xa57a, 0x539c, 0xd656, 0x1, 0x1);
        gbc.writeMem(0x68c2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4c11);
        EXPECT(gbc.pc(), 0x68c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 009C
        gbc.setState(0x1a04, 0x238c, 0xc9b0, 0x7110, 0xa793, 0x9c2, 0x0, 0x0);
        gbc.writeMem(0x1a04, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x238c);
        EXPECT(gbc.pc(), 0x1a05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 009D
        gbc.setState(0x56f9, 0xe803, 0x58e0, 0xbe1f, 0x1bce, 0x1bfb, 0x1, 0x0);
        gbc.writeMem(0x56f9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xe803);
        EXPECT(gbc.pc(), 0x56fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 009E
        gbc.setState(0xe114, 0x69cc, 0x6690, 0xa7e, 0x2e6d, 0x6ac7, 0x0, 0x1);
        gbc.writeMem(0xe114, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x69cc);
        EXPECT(gbc.pc(), 0xe115);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe114), 0x3);
        // 03 009F
        gbc.setState(0x92af, 0xbdf0, 0x7f40, 0xbcb7, 0x6bb3, 0xdc62, 0x0, 0x1);
        gbc.writeMem(0x92af, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xbdf0);
        EXPECT(gbc.pc(), 0x92b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92af), 0x3);
        // 03 00A0
        gbc.setState(0xed26, 0x8cf8, 0xbe30, 0xaee6, 0x5214, 0x75cf, 0x0, 0x1);
        gbc.writeMem(0xed26, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x8cf8);
        EXPECT(gbc.pc(), 0xed27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed26), 0x3);
        // 03 00A1
        gbc.setState(0x56b2, 0xcbc, 0xab40, 0x7fd1, 0xcf4b, 0xacb5, 0x1, 0x1);
        gbc.writeMem(0x56b2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xcbc);
        EXPECT(gbc.pc(), 0x56b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00A2
        gbc.setState(0x4a8d, 0x45c5, 0xa90, 0xf24f, 0xe8b4, 0x6c2c, 0x0, 0x0);
        gbc.writeMem(0x4a8d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x45c5);
        EXPECT(gbc.pc(), 0x4a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00A3
        gbc.setState(0x9259, 0x64b8, 0x5460, 0x7225, 0xd5b0, 0xda33, 0x0, 0x1);
        gbc.writeMem(0x9259, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x64b8);
        EXPECT(gbc.pc(), 0x925a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9259), 0x3);
        // 03 00A4
        gbc.setState(0x663f, 0xddc5, 0xcdb0, 0x8739, 0x1411, 0xaf51, 0x0, 0x1);
        gbc.writeMem(0x663f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xddc5);
        EXPECT(gbc.pc(), 0x6640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00A5
        gbc.setState(0xcc05, 0xbec8, 0x20e0, 0x14f2, 0xef61, 0x15f4, 0x0, 0x1);
        gbc.writeMem(0xcc05, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xbec8);
        EXPECT(gbc.pc(), 0xcc06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc05), 0x3);
        // 03 00A6
        gbc.setState(0x53e1, 0x4083, 0x9240, 0x19f3, 0x3a55, 0xea47, 0x0, 0x0);
        gbc.writeMem(0x53e1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4083);
        EXPECT(gbc.pc(), 0x53e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00A7
        gbc.setState(0xb70a, 0xf48d, 0x4a0, 0x523b, 0x8278, 0xec63, 0x1, 0x1);
        gbc.writeMem(0xb70a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf48d);
        EXPECT(gbc.pc(), 0xb70b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70a), 0x3);
        // 03 00A8
        gbc.setState(0x7ba3, 0x33c4, 0x9350, 0xadf1, 0x5a26, 0x808f, 0x1, 0x1);
        gbc.writeMem(0x7ba3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x33c4);
        EXPECT(gbc.pc(), 0x7ba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00AB
        gbc.setState(0x4cd8, 0x6c43, 0x9e30, 0xfe1d, 0xf784, 0xbe15, 0x1, 0x0);
        gbc.writeMem(0x4cd8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6c43);
        EXPECT(gbc.pc(), 0x4cd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00AC
        gbc.setState(0x9c03, 0x8764, 0x8eb0, 0xaa4a, 0x5e6, 0x8c55, 0x0, 0x0);
        gbc.writeMem(0x9c03, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8764);
        EXPECT(gbc.pc(), 0x9c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c03), 0x3);
        // 03 00AD
        gbc.setState(0x388c, 0xf00c, 0xadd0, 0xa75f, 0x73f4, 0xe045, 0x0, 0x0);
        gbc.writeMem(0x388c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xf00c);
        EXPECT(gbc.pc(), 0x388d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00AE
        gbc.setState(0x43e9, 0x1cd3, 0x2a90, 0xaca3, 0x66f5, 0x8f4c, 0x1, 0x0);
        gbc.writeMem(0x43e9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1cd3);
        EXPECT(gbc.pc(), 0x43ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00AF
        gbc.setState(0xdd54, 0x7a19, 0xbed0, 0x3772, 0x20ff, 0x3fe2, 0x1, 0x1);
        gbc.writeMem(0xdd54, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7a19);
        EXPECT(gbc.pc(), 0xdd55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd54), 0x3);
        // 03 00B0
        gbc.setState(0x2c3e, 0xf0b7, 0xc9f0, 0x898, 0x4d57, 0x678, 0x1, 0x0);
        gbc.writeMem(0x2c3e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xf0b7);
        EXPECT(gbc.pc(), 0x2c3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00B1
        gbc.setState(0x4053, 0x8993, 0x8010, 0xa3c, 0xe551, 0x6a32, 0x1, 0x1);
        gbc.writeMem(0x4053, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x8993);
        EXPECT(gbc.pc(), 0x4054);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00B2
        gbc.setState(0xbcfd, 0xea21, 0xfe30, 0x9f04, 0xe764, 0x2b7c, 0x1, 0x0);
        gbc.writeMem(0xbcfd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xea21);
        EXPECT(gbc.pc(), 0xbcfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcfd), 0x3);
        // 03 00B3
        gbc.setState(0xb22a, 0xb81b, 0xf130, 0xf1a9, 0x1c6, 0x108c, 0x0, 0x0);
        gbc.writeMem(0xb22a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb81b);
        EXPECT(gbc.pc(), 0xb22b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb22a), 0x3);
        // 03 00B4
        gbc.setState(0x9057, 0x6f22, 0xa960, 0xbf7e, 0x7bd5, 0xe4f9, 0x0, 0x1);
        gbc.writeMem(0x9057, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x6f22);
        EXPECT(gbc.pc(), 0x9058);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9057), 0x3);
        // 03 00B5
        gbc.setState(0x6829, 0xcfc6, 0x9710, 0x9244, 0xa13f, 0x7f0a, 0x0, 0x1);
        gbc.writeMem(0x6829, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xcfc6);
        EXPECT(gbc.pc(), 0x682a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00B6
        gbc.setState(0xef2b, 0xe978, 0xb870, 0x2069, 0x6abd, 0xff2, 0x1, 0x1);
        gbc.writeMem(0xef2b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe978);
        EXPECT(gbc.pc(), 0xef2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef2b), 0x3);
        // 03 00B7
        gbc.setState(0x73c3, 0x3aa7, 0xa1b0, 0x4101, 0x49d2, 0xdf16, 0x0, 0x0);
        gbc.writeMem(0x73c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3aa7);
        EXPECT(gbc.pc(), 0x73c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00B8
        gbc.setState(0xd7c2, 0x6ad0, 0x7830, 0xa06d, 0x2591, 0x4a98, 0x1, 0x1);
        gbc.writeMem(0xd7c2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6ad0);
        EXPECT(gbc.pc(), 0xd7c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c2), 0x3);
        // 03 00B9
        gbc.setState(0x44bc, 0x98d0, 0x2220, 0x4c77, 0x4735, 0xec01, 0x1, 0x1);
        gbc.writeMem(0x44bc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x98d0);
        EXPECT(gbc.pc(), 0x44bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00BA
        gbc.setState(0xecc0, 0x7f18, 0x8a30, 0xf11f, 0x7a30, 0x5dd6, 0x1, 0x0);
        gbc.writeMem(0xecc0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7f18);
        EXPECT(gbc.pc(), 0xecc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecc0), 0x3);
        // 03 00BB
        gbc.setState(0x575e, 0xaab2, 0xc9c0, 0x7f85, 0x15ae, 0xe1b1, 0x0, 0x0);
        gbc.writeMem(0x575e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xaab2);
        EXPECT(gbc.pc(), 0x575f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00BC
        gbc.setState(0x7813, 0xb9, 0xd980, 0x4ff5, 0xcea1, 0x86ca, 0x1, 0x0);
        gbc.writeMem(0x7813, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xb9);
        EXPECT(gbc.pc(), 0x7814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00BE
        gbc.setState(0xe7af, 0x1670, 0x8140, 0x43ce, 0x4d69, 0x5ef, 0x0, 0x0);
        gbc.writeMem(0xe7af, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1670);
        EXPECT(gbc.pc(), 0xe7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7af), 0x3);
        // 03 00BF
        gbc.setState(0xe1fc, 0xe302, 0xc070, 0xc686, 0x9f4c, 0xa716, 0x1, 0x0);
        gbc.writeMem(0xe1fc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe302);
        EXPECT(gbc.pc(), 0xe1fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1fc), 0x3);
        // 03 00C0
        gbc.setState(0x1429, 0xd908, 0x9410, 0xea2b, 0x509a, 0x1c2b, 0x1, 0x0);
        gbc.writeMem(0x1429, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd908);
        EXPECT(gbc.pc(), 0x142a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00C1
        gbc.setState(0xc5d, 0x54e7, 0x91b0, 0xcc04, 0xbfe, 0xeff2, 0x1, 0x0);
        gbc.writeMem(0xc5d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x54e7);
        EXPECT(gbc.pc(), 0xc5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00C2
        gbc.setState(0x59be, 0x94b8, 0x3da0, 0x6fbc, 0xd316, 0x89d4, 0x0, 0x1);
        gbc.writeMem(0x59be, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x94b8);
        EXPECT(gbc.pc(), 0x59bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00C3
        gbc.setState(0x2471, 0x569f, 0xc100, 0x9b46, 0x9f9d, 0x9c22, 0x1, 0x0);
        gbc.writeMem(0x2471, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x569f);
        EXPECT(gbc.pc(), 0x2472);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00C4
        gbc.setState(0x934a, 0x8e76, 0xa910, 0xf5a3, 0xadc8, 0x6f76, 0x0, 0x1);
        gbc.writeMem(0x934a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x8e76);
        EXPECT(gbc.pc(), 0x934b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x934a), 0x3);
        // 03 00C5
        gbc.setState(0x840b, 0x435c, 0xd850, 0xc99c, 0x44f6, 0xf2c6, 0x1, 0x0);
        gbc.writeMem(0x840b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x435c);
        EXPECT(gbc.pc(), 0x840c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x840b), 0x3);
        // 03 00C6
        gbc.setState(0x358b, 0x24b1, 0xe430, 0xcc31, 0x39aa, 0x11d7, 0x1, 0x1);
        gbc.writeMem(0x358b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x24b1);
        EXPECT(gbc.pc(), 0x358c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00C7
        gbc.setState(0xcdc6, 0x1752, 0x5090, 0x17c2, 0x58ff, 0xf4ec, 0x1, 0x0);
        gbc.writeMem(0xcdc6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x1752);
        EXPECT(gbc.pc(), 0xcdc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdc6), 0x3);
        // 03 00C9
        gbc.setState(0xe9d9, 0x7f4, 0x1740, 0xc781, 0xda6a, 0x75d5, 0x0, 0x0);
        gbc.writeMem(0xe9d9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7f4);
        EXPECT(gbc.pc(), 0xe9da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9d9), 0x3);
        // 03 00CA
        gbc.setState(0x9863, 0x8763, 0x21d0, 0x1497, 0x8c88, 0x66c9, 0x0, 0x1);
        gbc.writeMem(0x9863, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x8763);
        EXPECT(gbc.pc(), 0x9864);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9863), 0x3);
        // 03 00CB
        gbc.setState(0x405f, 0x1a5c, 0x86a0, 0x50d3, 0xdb84, 0x652e, 0x1, 0x0);
        gbc.writeMem(0x405f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1a5c);
        EXPECT(gbc.pc(), 0x4060);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00CD
        gbc.setState(0xaedb, 0xaf2e, 0x84c0, 0xbcc1, 0x5aff, 0x5459, 0x0, 0x1);
        gbc.writeMem(0xaedb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xaf2e);
        EXPECT(gbc.pc(), 0xaedc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaedb), 0x3);
        // 03 00CE
        gbc.setState(0x64e9, 0x356a, 0x11a0, 0xb21c, 0x73d3, 0x6c93, 0x1, 0x1);
        gbc.writeMem(0x64e9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x356a);
        EXPECT(gbc.pc(), 0x64ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00CF
        gbc.setState(0x21b0, 0x5f8f, 0xa890, 0xa396, 0xf9af, 0x498f, 0x0, 0x1);
        gbc.writeMem(0x21b0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x5f8f);
        EXPECT(gbc.pc(), 0x21b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00D0
        gbc.setState(0xa34c, 0x9c6e, 0x55a0, 0x8a79, 0xf95a, 0xa96d, 0x0, 0x1);
        gbc.writeMem(0xa34c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x9c6e);
        EXPECT(gbc.pc(), 0xa34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa34c), 0x3);
        // 03 00D1
        gbc.setState(0xb68c, 0x92cb, 0x44d0, 0xc10c, 0xa978, 0x383d, 0x0, 0x1);
        gbc.writeMem(0xb68c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x92cb);
        EXPECT(gbc.pc(), 0xb68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb68c), 0x3);
        // 03 00D3
        gbc.setState(0xb91c, 0xfe7f, 0x8630, 0x45ae, 0xebd5, 0x66c6, 0x0, 0x1);
        gbc.writeMem(0xb91c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xfe7f);
        EXPECT(gbc.pc(), 0xb91d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91c), 0x3);
        // 03 00D4
        gbc.setState(0x9965, 0x9f16, 0xfee0, 0xb0d0, 0xe05b, 0xb5f2, 0x1, 0x1);
        gbc.writeMem(0x9965, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9f16);
        EXPECT(gbc.pc(), 0x9966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9965), 0x3);
        // 03 00D5
        gbc.setState(0x7d99, 0x3ddc, 0x1070, 0xde8, 0x5dbf, 0x9329, 0x1, 0x1);
        gbc.writeMem(0x7d99, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x3ddc);
        EXPECT(gbc.pc(), 0x7d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00D6
        gbc.setState(0x8ab3, 0x63a, 0xb950, 0xa960, 0xc5e0, 0xe082, 0x0, 0x1);
        gbc.writeMem(0x8ab3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x63a);
        EXPECT(gbc.pc(), 0x8ab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab3), 0x3);
        // 03 00D7
        gbc.setState(0x826, 0x5e22, 0x5120, 0xedac, 0xb24d, 0xba2f, 0x1, 0x0);
        gbc.writeMem(0x826, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5e22);
        EXPECT(gbc.pc(), 0x827);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00D8
        gbc.setState(0xe219, 0x916a, 0xd7b0, 0x99e2, 0xbce1, 0xf3ac, 0x0, 0x1);
        gbc.writeMem(0xe219, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x916a);
        EXPECT(gbc.pc(), 0xe21a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe219), 0x3);
        // 03 00D9
        gbc.setState(0x8740, 0x9f96, 0x63b0, 0x2b3, 0x41f1, 0x9306, 0x0, 0x0);
        gbc.writeMem(0x8740, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9f96);
        EXPECT(gbc.pc(), 0x8741);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8740), 0x3);
        // 03 00DA
        gbc.setState(0x5acc, 0x3a2, 0x5800, 0xbbdd, 0xdba1, 0x1392, 0x1, 0x1);
        gbc.writeMem(0x5acc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3a2);
        EXPECT(gbc.pc(), 0x5acd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00DB
        gbc.setState(0x31fe, 0x6e43, 0xd6f0, 0xb3d0, 0x8361, 0x23ce, 0x1, 0x1);
        gbc.writeMem(0x31fe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x6e43);
        EXPECT(gbc.pc(), 0x31ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00DC
        gbc.setState(0xc84c, 0x79c, 0x1470, 0x9400, 0x9d5e, 0x43b3, 0x1, 0x0);
        gbc.writeMem(0xc84c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x79c);
        EXPECT(gbc.pc(), 0xc84d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc84c), 0x3);
        // 03 00DD
        gbc.setState(0x63e0, 0x7ba3, 0xad90, 0x4c11, 0x6726, 0x5907, 0x1, 0x0);
        gbc.writeMem(0x63e0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7ba3);
        EXPECT(gbc.pc(), 0x63e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00DE
        gbc.setState(0x92e0, 0x501b, 0xc090, 0x6c6, 0xe74f, 0xf095, 0x0, 0x0);
        gbc.writeMem(0x92e0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x501b);
        EXPECT(gbc.pc(), 0x92e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92e0), 0x3);
        // 03 00DF
        gbc.setState(0x30ea, 0x983f, 0x72a0, 0x6df2, 0xd554, 0xeaa5, 0x1, 0x1);
        gbc.writeMem(0x30ea, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x983f);
        EXPECT(gbc.pc(), 0x30eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00E0
        gbc.setState(0xd7c6, 0x7093, 0x7510, 0xa91a, 0x1f3a, 0xfaf7, 0x0, 0x1);
        gbc.writeMem(0xd7c6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7093);
        EXPECT(gbc.pc(), 0xd7c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c6), 0x3);
        // 03 00E1
        gbc.setState(0x819, 0x7ddb, 0x5100, 0xf809, 0xbb14, 0xc311, 0x1, 0x0);
        gbc.writeMem(0x819, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x7ddb);
        EXPECT(gbc.pc(), 0x81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00E2
        gbc.setState(0x40a1, 0x97bd, 0x9570, 0x324f, 0x779f, 0xdbec, 0x1, 0x1);
        gbc.writeMem(0x40a1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x97bd);
        EXPECT(gbc.pc(), 0x40a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00E3
        gbc.setState(0x372, 0xf2b1, 0x33a0, 0xe045, 0x8bf0, 0xd69d, 0x0, 0x1);
        gbc.writeMem(0x372, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xf2b1);
        EXPECT(gbc.pc(), 0x373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00E4
        gbc.setState(0x761d, 0x6d38, 0xec0, 0x6cd5, 0x6695, 0xc742, 0x0, 0x0);
        gbc.writeMem(0x761d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6d38);
        EXPECT(gbc.pc(), 0x761e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00E5
        gbc.setState(0xa257, 0xe61d, 0xaca0, 0xf221, 0x6763, 0xdbb8, 0x0, 0x1);
        gbc.writeMem(0xa257, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xe61d);
        EXPECT(gbc.pc(), 0xa258);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa257), 0x3);
        // 03 00E6
        gbc.setState(0x38b2, 0x1e90, 0x3400, 0x72ff, 0x3500, 0xe983, 0x0, 0x0);
        gbc.writeMem(0x38b2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x1e90);
        EXPECT(gbc.pc(), 0x38b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00E7
        gbc.setState(0x2b7c, 0x7ae9, 0x6fc0, 0x8726, 0x24d5, 0x2482, 0x0, 0x0);
        gbc.writeMem(0x2b7c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7ae9);
        EXPECT(gbc.pc(), 0x2b7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 00E8
        gbc.setState(0x86d1, 0x2a9d, 0x22d0, 0x4757, 0xb86a, 0x5651, 0x1, 0x0);
        gbc.writeMem(0x86d1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x2a9d);
        EXPECT(gbc.pc(), 0x86d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86d1), 0x3);
        // 03 00E9
        gbc.setState(0xe5b4, 0x18e3, 0x3bc0, 0xb7c5, 0x7f08, 0xb6cd, 0x1, 0x1);
        gbc.writeMem(0xe5b4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x18e3);
        EXPECT(gbc.pc(), 0xe5b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5b4), 0x3);
        // 03 00EA
        gbc.setState(0xeecb, 0xae2a, 0x6b60, 0xac8f, 0x2dab, 0x38cb, 0x0, 0x0);
        gbc.writeMem(0xeecb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xae2a);
        EXPECT(gbc.pc(), 0xeecc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeecb), 0x3);
        // 03 00EB
        gbc.setState(0x433e, 0x7aaf, 0x8af0, 0x6a84, 0x3af5, 0x2776, 0x0, 0x0);
        gbc.writeMem(0x433e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7aaf);
        EXPECT(gbc.pc(), 0x433f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00EC
        gbc.setState(0x4754, 0x6ba4, 0xe9e0, 0x4b29, 0x43fa, 0x994f, 0x0, 0x1);
        gbc.writeMem(0x4754, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x6ba4);
        EXPECT(gbc.pc(), 0x4755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00ED
        gbc.setState(0x417d, 0xb478, 0x8ab0, 0xa20d, 0xdae4, 0x2333, 0x1, 0x0);
        gbc.writeMem(0x417d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xb478);
        EXPECT(gbc.pc(), 0x417e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00EE
        gbc.setState(0x2b86, 0xc7af, 0x2d50, 0x3bd1, 0x1fa3, 0x32cb, 0x0, 0x1);
        gbc.writeMem(0x2b86, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc7af);
        EXPECT(gbc.pc(), 0x2b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00EF
        gbc.setState(0x791a, 0x174, 0x7c10, 0x220d, 0xff0d, 0xdc51, 0x0, 0x0);
        gbc.writeMem(0x791a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x174);
        EXPECT(gbc.pc(), 0x791b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00F0
        gbc.setState(0x866f, 0x20e3, 0xc8d0, 0x727e, 0x5e51, 0x1284, 0x1, 0x1);
        gbc.writeMem(0x866f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x20e3);
        EXPECT(gbc.pc(), 0x8670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x866f), 0x3);
        // 03 00F1
        gbc.setState(0x5170, 0x508f, 0xa610, 0xd650, 0x4b85, 0xc19a, 0x0, 0x1);
        gbc.writeMem(0x5170, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x508f);
        EXPECT(gbc.pc(), 0x5171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00F2
        gbc.setState(0x7b93, 0x94db, 0x65b0, 0x8ec2, 0x1d4b, 0x7ed7, 0x1, 0x0);
        gbc.writeMem(0x7b93, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x94db);
        EXPECT(gbc.pc(), 0x7b94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00F3
        gbc.setState(0x4532, 0x3921, 0x4870, 0xc565, 0xa3d7, 0x45d4, 0x1, 0x0);
        gbc.writeMem(0x4532, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x3921);
        EXPECT(gbc.pc(), 0x4533);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00F4
        gbc.setState(0x3532, 0xb6c2, 0x6f60, 0xc432, 0x29b8, 0x2a55, 0x0, 0x0);
        gbc.writeMem(0x3532, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb6c2);
        EXPECT(gbc.pc(), 0x3533);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00F5
        gbc.setState(0x20cb, 0x3cb7, 0xa490, 0xe2ac, 0x9c94, 0x1693, 0x1, 0x0);
        gbc.writeMem(0x20cb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x3cb7);
        EXPECT(gbc.pc(), 0x20cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 00F7
        gbc.setState(0x911d, 0x96e3, 0x4a0, 0xea37, 0xd405, 0x5818, 0x0, 0x1);
        gbc.writeMem(0x911d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x96e3);
        EXPECT(gbc.pc(), 0x911e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x911d), 0x3);
        // 03 00F9
        gbc.setState(0xde1b, 0x5569, 0xba10, 0x666b, 0xd6a7, 0x5e5, 0x0, 0x1);
        gbc.writeMem(0xde1b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5569);
        EXPECT(gbc.pc(), 0xde1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde1b), 0x3);
        // 03 00FA
        gbc.setState(0x51c5, 0xdc01, 0x8c30, 0x76a, 0xf6a6, 0xf73f, 0x0, 0x1);
        gbc.writeMem(0x51c5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xdc01);
        EXPECT(gbc.pc(), 0x51c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00FB
        gbc.setState(0x7234, 0x9575, 0xd9b0, 0x13bf, 0x76d5, 0x39e1, 0x0, 0x1);
        gbc.writeMem(0x7234, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x9575);
        EXPECT(gbc.pc(), 0x7235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 00FC
        gbc.setState(0x5af3, 0xf363, 0x92e0, 0xb2da, 0x8c5d, 0x674b, 0x1, 0x1);
        gbc.writeMem(0x5af3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xf363);
        EXPECT(gbc.pc(), 0x5af4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 00FD
        gbc.setState(0xda30, 0xd6c1, 0xc9b0, 0xc15, 0x81eb, 0x8df9, 0x1, 0x0);
        gbc.writeMem(0xda30, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd6c1);
        EXPECT(gbc.pc(), 0xda31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda30), 0x3);
        // 03 00FE
        gbc.setState(0xd169, 0x8516, 0x88a0, 0xa997, 0x9f04, 0x8846, 0x1, 0x0);
        gbc.writeMem(0xd169, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8516);
        EXPECT(gbc.pc(), 0xd16a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd169), 0x3);
        // 03 00FF
        gbc.setState(0x9e1b, 0xaaa2, 0x3b80, 0x6c11, 0x34cb, 0x4e8e, 0x0, 0x0);
        gbc.writeMem(0x9e1b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xaaa2);
        EXPECT(gbc.pc(), 0x9e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e1b), 0x3);
        // 03 0100
        gbc.setState(0x45c0, 0x23b9, 0xbec0, 0xa817, 0xfe3a, 0xd03a, 0x0, 0x0);
        gbc.writeMem(0x45c0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x23b9);
        EXPECT(gbc.pc(), 0x45c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0101
        gbc.setState(0xcf93, 0x2cd2, 0xaa60, 0xcd60, 0xe21d, 0xda5c, 0x0, 0x1);
        gbc.writeMem(0xcf93, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x2cd2);
        EXPECT(gbc.pc(), 0xcf94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf93), 0x3);
        // 03 0102
        gbc.setState(0xbebe, 0xa3de, 0xd010, 0xe208, 0xa96a, 0xc5e1, 0x0, 0x0);
        gbc.writeMem(0xbebe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa3de);
        EXPECT(gbc.pc(), 0xbebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbebe), 0x3);
        // 03 0103
        gbc.setState(0x2791, 0x720e, 0xef70, 0x6c35, 0xa3c7, 0xc289, 0x0, 0x0);
        gbc.writeMem(0x2791, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x720e);
        EXPECT(gbc.pc(), 0x2792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0104
        gbc.setState(0x2588, 0xa2a9, 0xa150, 0x23ac, 0xf69b, 0x5b9a, 0x1, 0x0);
        gbc.writeMem(0x2588, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa2a9);
        EXPECT(gbc.pc(), 0x2589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0105
        gbc.setState(0x1dd, 0x5fb5, 0x9ca0, 0x136, 0xfba, 0x2c12, 0x0, 0x0);
        gbc.writeMem(0x1dd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5fb5);
        EXPECT(gbc.pc(), 0x1de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0106
        gbc.setState(0xda1f, 0x245f, 0x7a30, 0xe1f8, 0x950e, 0xb45f, 0x0, 0x0);
        gbc.writeMem(0xda1f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x245f);
        EXPECT(gbc.pc(), 0xda20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda1f), 0x3);
        // 03 0107
        gbc.setState(0x1140, 0xa166, 0x10f0, 0x8979, 0x998c, 0x2d05, 0x0, 0x0);
        gbc.writeMem(0x1140, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xa166);
        EXPECT(gbc.pc(), 0x1141);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0108
        gbc.setState(0x603a, 0xebf0, 0x39f0, 0xf311, 0xc99e, 0xa885, 0x1, 0x1);
        gbc.writeMem(0x603a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xebf0);
        EXPECT(gbc.pc(), 0x603b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0109
        gbc.setState(0xe817, 0xdce0, 0x1160, 0xbdd0, 0x8dac, 0x657d, 0x1, 0x1);
        gbc.writeMem(0xe817, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdce0);
        EXPECT(gbc.pc(), 0xe818);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe817), 0x3);
        // 03 010A
        gbc.setState(0xebcf, 0x334d, 0x2580, 0x78d, 0x14fb, 0x6e64, 0x1, 0x0);
        gbc.writeMem(0xebcf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x334d);
        EXPECT(gbc.pc(), 0xebd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebcf), 0x3);
        // 03 010B
        gbc.setState(0x951c, 0xfb19, 0x4280, 0xff02, 0xb92b, 0x777f, 0x1, 0x0);
        gbc.writeMem(0x951c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xfb19);
        EXPECT(gbc.pc(), 0x951d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951c), 0x3);
        // 03 010C
        gbc.setState(0x24ab, 0x5daa, 0xcb50, 0x40ac, 0xdb43, 0x2472, 0x1, 0x0);
        gbc.writeMem(0x24ab, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5daa);
        EXPECT(gbc.pc(), 0x24ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 010D
        gbc.setState(0x2dab, 0xa7f5, 0xe40, 0xd255, 0x8356, 0x96dd, 0x0, 0x0);
        gbc.writeMem(0x2dab, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xa7f5);
        EXPECT(gbc.pc(), 0x2dac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 010E
        gbc.setState(0xa90d, 0xeab5, 0x9560, 0x9c84, 0x4be4, 0xf70, 0x1, 0x0);
        gbc.writeMem(0xa90d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xeab5);
        EXPECT(gbc.pc(), 0xa90e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa90d), 0x3);
        // 03 010F
        gbc.setState(0xc4f8, 0xbff0, 0x5cc0, 0xadd7, 0xed37, 0xfc29, 0x0, 0x0);
        gbc.writeMem(0xc4f8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xbff0);
        EXPECT(gbc.pc(), 0xc4f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4f8), 0x3);
        // 03 0110
        gbc.setState(0xad6e, 0x3aea, 0x41a0, 0x4af8, 0xff92, 0x26a8, 0x1, 0x1);
        gbc.writeMem(0xad6e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3aea);
        EXPECT(gbc.pc(), 0xad6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad6e), 0x3);
        // 03 0111
        gbc.setState(0xb9be, 0xc93d, 0xe5c0, 0x3483, 0xabcb, 0x6747, 0x0, 0x1);
        gbc.writeMem(0xb9be, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xc93d);
        EXPECT(gbc.pc(), 0xb9bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9be), 0x3);
        // 03 0112
        gbc.setState(0xcb84, 0x598e, 0xa020, 0x9db9, 0xdb38, 0xe03f, 0x0, 0x0);
        gbc.writeMem(0xcb84, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x598e);
        EXPECT(gbc.pc(), 0xcb85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb84), 0x3);
        // 03 0113
        gbc.setState(0xcd2b, 0xd59, 0x8ce0, 0x6f10, 0x81e0, 0x38d9, 0x0, 0x1);
        gbc.writeMem(0xcd2b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd59);
        EXPECT(gbc.pc(), 0xcd2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd2b), 0x3);
        // 03 0114
        gbc.setState(0x2f0f, 0x26ab, 0x9ad0, 0x3587, 0xa80, 0xcd52, 0x0, 0x0);
        gbc.writeMem(0x2f0f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x26ab);
        EXPECT(gbc.pc(), 0x2f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0115
        gbc.setState(0x6227, 0x5aa8, 0x5ad0, 0x38c1, 0x1bf9, 0xc93, 0x1, 0x0);
        gbc.writeMem(0x6227, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5aa8);
        EXPECT(gbc.pc(), 0x6228);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0116
        gbc.setState(0x622e, 0x41b1, 0xbae0, 0x1725, 0x68c7, 0x7369, 0x1, 0x0);
        gbc.writeMem(0x622e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x41b1);
        EXPECT(gbc.pc(), 0x622f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0118
        gbc.setState(0xd83, 0x5168, 0x52a0, 0x23b0, 0xeeb7, 0xe36a, 0x1, 0x0);
        gbc.writeMem(0xd83, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5168);
        EXPECT(gbc.pc(), 0xd84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 011A
        gbc.setState(0x1415, 0x609, 0x6320, 0x6033, 0xe2ec, 0x3a6b, 0x1, 0x1);
        gbc.writeMem(0x1415, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x609);
        EXPECT(gbc.pc(), 0x1416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 011B
        gbc.setState(0xdb70, 0x90a, 0x7b60, 0x9c26, 0x2834, 0xb48b, 0x1, 0x0);
        gbc.writeMem(0xdb70, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x90a);
        EXPECT(gbc.pc(), 0xdb71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb70), 0x3);
        // 03 011C
        gbc.setState(0xec55, 0x61ac, 0xb030, 0xd7cd, 0xd34, 0xc5e9, 0x0, 0x1);
        gbc.writeMem(0xec55, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x61ac);
        EXPECT(gbc.pc(), 0xec56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec55), 0x3);
        // 03 011D
        gbc.setState(0x614f, 0x30bc, 0x960, 0x1dfe, 0x35dc, 0x812b, 0x0, 0x0);
        gbc.writeMem(0x614f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x30bc);
        EXPECT(gbc.pc(), 0x6150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 011E
        gbc.setState(0x3e3b, 0x8eff, 0xf300, 0xfdba, 0x2cf0, 0xce95, 0x0, 0x1);
        gbc.writeMem(0x3e3b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8eff);
        EXPECT(gbc.pc(), 0x3e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 011F
        gbc.setState(0x9392, 0x9253, 0xfb00, 0x7706, 0x64b3, 0x743d, 0x0, 0x1);
        gbc.writeMem(0x9392, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9253);
        EXPECT(gbc.pc(), 0x9393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9392), 0x3);
        // 03 0121
        gbc.setState(0x630f, 0x3013, 0x4d00, 0xb9bc, 0x4e1a, 0x9688, 0x1, 0x0);
        gbc.writeMem(0x630f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3013);
        EXPECT(gbc.pc(), 0x6310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0122
        gbc.setState(0xd2cb, 0x9792, 0xe8c0, 0x922c, 0x1f50, 0x2077, 0x0, 0x1);
        gbc.writeMem(0xd2cb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9792);
        EXPECT(gbc.pc(), 0xd2cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2cb), 0x3);
        // 03 0123
        gbc.setState(0xdcbe, 0x2eb7, 0x9e50, 0xd859, 0x1a1f, 0xdda4, 0x1, 0x0);
        gbc.writeMem(0xdcbe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x2eb7);
        EXPECT(gbc.pc(), 0xdcbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcbe), 0x3);
        // 03 0124
        gbc.setState(0x7341, 0xd09e, 0x82b0, 0xc431, 0xe2e5, 0x944c, 0x0, 0x1);
        gbc.writeMem(0x7341, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd09e);
        EXPECT(gbc.pc(), 0x7342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0126
        gbc.setState(0x3ed8, 0x34f, 0x3dd0, 0x550f, 0x12e6, 0xb786, 0x1, 0x1);
        gbc.writeMem(0x3ed8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x34f);
        EXPECT(gbc.pc(), 0x3ed9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0127
        gbc.setState(0x7f34, 0xbf40, 0x59c0, 0x547f, 0xc2ac, 0xbd44, 0x1, 0x0);
        gbc.writeMem(0x7f34, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbf40);
        EXPECT(gbc.pc(), 0x7f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0128
        gbc.setState(0x9d79, 0xc6c2, 0x7100, 0x113c, 0x9c99, 0x4c12, 0x1, 0x1);
        gbc.writeMem(0x9d79, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc6c2);
        EXPECT(gbc.pc(), 0x9d7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d79), 0x3);
        // 03 0129
        gbc.setState(0xccdb, 0x3999, 0x6720, 0x5f6a, 0x61d9, 0x40e2, 0x0, 0x0);
        gbc.writeMem(0xccdb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3999);
        EXPECT(gbc.pc(), 0xccdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccdb), 0x3);
        // 03 012A
        gbc.setState(0x66fa, 0x3376, 0xe050, 0x4218, 0x351f, 0x5ef8, 0x1, 0x0);
        gbc.writeMem(0x66fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x3376);
        EXPECT(gbc.pc(), 0x66fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 012B
        gbc.setState(0x599e, 0xf307, 0x8210, 0xbf87, 0x1171, 0x8916, 0x1, 0x1);
        gbc.writeMem(0x599e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xf307);
        EXPECT(gbc.pc(), 0x599f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 012C
        gbc.setState(0x714c, 0xcd30, 0xa390, 0x22b5, 0x955a, 0xea2b, 0x1, 0x0);
        gbc.writeMem(0x714c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xcd30);
        EXPECT(gbc.pc(), 0x714d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 012D
        gbc.setState(0x4fe5, 0xfa7f, 0x17a0, 0x28b9, 0x26db, 0x18d0, 0x1, 0x0);
        gbc.writeMem(0x4fe5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfa7f);
        EXPECT(gbc.pc(), 0x4fe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 012E
        gbc.setState(0xc72f, 0xc687, 0xb590, 0xc7f7, 0x8b25, 0x37f2, 0x0, 0x0);
        gbc.writeMem(0xc72f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xc687);
        EXPECT(gbc.pc(), 0xc730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc72f), 0x3);
        // 03 012F
        gbc.setState(0xc40d, 0x7b03, 0x8420, 0x6da7, 0x542b, 0x4a83, 0x0, 0x0);
        gbc.writeMem(0xc40d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7b03);
        EXPECT(gbc.pc(), 0xc40e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc40d), 0x3);
        // 03 0130
        gbc.setState(0x2c1b, 0x8ec, 0xf3f0, 0x6a14, 0x7ce9, 0x655, 0x0, 0x0);
        gbc.writeMem(0x2c1b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x8ec);
        EXPECT(gbc.pc(), 0x2c1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0131
        gbc.setState(0x991c, 0x3727, 0x6480, 0x26f5, 0x61bd, 0x6a1, 0x0, 0x1);
        gbc.writeMem(0x991c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x3727);
        EXPECT(gbc.pc(), 0x991d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x991c), 0x3);
        // 03 0133
        gbc.setState(0x38a9, 0xacfb, 0x8770, 0x2e25, 0x96f9, 0x88a4, 0x0, 0x1);
        gbc.writeMem(0x38a9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xacfb);
        EXPECT(gbc.pc(), 0x38aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0134
        gbc.setState(0xe155, 0x3bcb, 0xeb90, 0x9593, 0xc8c9, 0x9f97, 0x1, 0x1);
        gbc.writeMem(0xe155, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x3bcb);
        EXPECT(gbc.pc(), 0xe156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe155), 0x3);
        // 03 0135
        gbc.setState(0x1dd0, 0xdf6a, 0x1400, 0x7eb4, 0xb6be, 0xb337, 0x0, 0x0);
        gbc.writeMem(0x1dd0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xdf6a);
        EXPECT(gbc.pc(), 0x1dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0136
        gbc.setState(0x9446, 0xe025, 0xe390, 0x7e56, 0x3803, 0x47ea, 0x1, 0x1);
        gbc.writeMem(0x9446, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xe025);
        EXPECT(gbc.pc(), 0x9447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9446), 0x3);
        // 03 0138
        gbc.setState(0x9823, 0x56d9, 0x1190, 0x5923, 0xb00, 0xe16, 0x0, 0x1);
        gbc.writeMem(0x9823, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x56d9);
        EXPECT(gbc.pc(), 0x9824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9823), 0x3);
        // 03 0139
        gbc.setState(0xad15, 0xcf7c, 0x3770, 0xa89e, 0xb1c4, 0x7acb, 0x0, 0x0);
        gbc.writeMem(0xad15, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xcf7c);
        EXPECT(gbc.pc(), 0xad16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad15), 0x3);
        // 03 013A
        gbc.setState(0xb9a1, 0xc750, 0xff90, 0x3d01, 0xf051, 0x4b2f, 0x0, 0x0);
        gbc.writeMem(0xb9a1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc750);
        EXPECT(gbc.pc(), 0xb9a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9a1), 0x3);
        // 03 013B
        gbc.setState(0xa98b, 0x8c2d, 0x9180, 0x33c5, 0x7d27, 0x2707, 0x1, 0x1);
        gbc.writeMem(0xa98b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8c2d);
        EXPECT(gbc.pc(), 0xa98c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98b), 0x3);
        // 03 013C
        gbc.setState(0x1847, 0x6480, 0x2750, 0xb483, 0xc8ed, 0xf0f4, 0x0, 0x0);
        gbc.writeMem(0x1847, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6480);
        EXPECT(gbc.pc(), 0x1848);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 013D
        gbc.setState(0xd3fc, 0x55ae, 0x9d30, 0xb0ed, 0x13a7, 0x72c5, 0x0, 0x0);
        gbc.writeMem(0xd3fc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x55ae);
        EXPECT(gbc.pc(), 0xd3fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3fc), 0x3);
        // 03 013E
        gbc.setState(0x8f7b, 0xae9d, 0x68b0, 0x8fec, 0xe312, 0x9851, 0x1, 0x0);
        gbc.writeMem(0x8f7b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xae9d);
        EXPECT(gbc.pc(), 0x8f7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f7b), 0x3);
        // 03 013F
        gbc.setState(0xda21, 0x4fc2, 0xa870, 0x8880, 0xc99a, 0xe542, 0x1, 0x1);
        gbc.writeMem(0xda21, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x4fc2);
        EXPECT(gbc.pc(), 0xda22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda21), 0x3);
        // 03 0140
        gbc.setState(0x754f, 0x11bd, 0x6b70, 0x7c50, 0x8eeb, 0x8eba, 0x0, 0x0);
        gbc.writeMem(0x754f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x11bd);
        EXPECT(gbc.pc(), 0x7550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0141
        gbc.setState(0xdf1c, 0xdfc9, 0x2a20, 0xfb66, 0xd57b, 0xb042, 0x0, 0x0);
        gbc.writeMem(0xdf1c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdfc9);
        EXPECT(gbc.pc(), 0xdf1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf1c), 0x3);
        // 03 0142
        gbc.setState(0x357c, 0xae44, 0x74f0, 0x6761, 0xddb3, 0xbde3, 0x0, 0x0);
        gbc.writeMem(0x357c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xae44);
        EXPECT(gbc.pc(), 0x357d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0143
        gbc.setState(0x8f27, 0x5e24, 0xa280, 0xac5b, 0x81f0, 0x9c24, 0x1, 0x0);
        gbc.writeMem(0x8f27, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5e24);
        EXPECT(gbc.pc(), 0x8f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f27), 0x3);
        // 03 0144
        gbc.setState(0x171, 0x72d5, 0x4290, 0xd106, 0x85cf, 0xf26b, 0x1, 0x1);
        gbc.writeMem(0x171, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x72d5);
        EXPECT(gbc.pc(), 0x172);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0145
        gbc.setState(0xd64d, 0xd0ee, 0xf600, 0x92b4, 0x150e, 0xd0de, 0x0, 0x0);
        gbc.writeMem(0xd64d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd0ee);
        EXPECT(gbc.pc(), 0xd64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64d), 0x3);
        // 03 0146
        gbc.setState(0xe00a, 0x125d, 0x7e40, 0xa286, 0xc205, 0x14e2, 0x0, 0x0);
        gbc.writeMem(0xe00a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x125d);
        EXPECT(gbc.pc(), 0xe00b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00a), 0x3);
        // 03 0147
        gbc.setState(0xb8bf, 0x5707, 0x21c0, 0x4d9, 0x6b22, 0xd12e, 0x1, 0x1);
        gbc.writeMem(0xb8bf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x5707);
        EXPECT(gbc.pc(), 0xb8c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8bf), 0x3);
        // 03 0148
        gbc.setState(0x27c9, 0xaa96, 0xfc10, 0x9906, 0x47bd, 0xfe44, 0x1, 0x0);
        gbc.writeMem(0x27c9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xaa96);
        EXPECT(gbc.pc(), 0x27ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0149
        gbc.setState(0x7565, 0x88aa, 0x45c0, 0xa72b, 0x852f, 0xdb3d, 0x0, 0x0);
        gbc.writeMem(0x7565, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x88aa);
        EXPECT(gbc.pc(), 0x7566);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 014B
        gbc.setState(0x5add, 0x67b9, 0x5e30, 0xf4a3, 0x5735, 0xa7eb, 0x0, 0x1);
        gbc.writeMem(0x5add, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x67b9);
        EXPECT(gbc.pc(), 0x5ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 014C
        gbc.setState(0x6c52, 0xf585, 0x64f0, 0x6c93, 0xb22c, 0xeff4, 0x0, 0x1);
        gbc.writeMem(0x6c52, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xf585);
        EXPECT(gbc.pc(), 0x6c53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 014D
        gbc.setState(0x6971, 0x2748, 0x3f0, 0x50f9, 0x307f, 0xf6a7, 0x0, 0x1);
        gbc.writeMem(0x6971, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2748);
        EXPECT(gbc.pc(), 0x6972);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 014E
        gbc.setState(0xe4a1, 0x446e, 0x1210, 0x5106, 0xf1b7, 0x77e8, 0x1, 0x0);
        gbc.writeMem(0xe4a1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x446e);
        EXPECT(gbc.pc(), 0xe4a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a1), 0x3);
        // 03 014F
        gbc.setState(0xd616, 0x7b85, 0xb150, 0x1d5, 0xf993, 0xf746, 0x1, 0x0);
        gbc.writeMem(0xd616, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x7b85);
        EXPECT(gbc.pc(), 0xd617);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd616), 0x3);
        // 03 0150
        gbc.setState(0x1f44, 0x54de, 0x5fd0, 0xe821, 0xd79b, 0xcff9, 0x1, 0x0);
        gbc.writeMem(0x1f44, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x54de);
        EXPECT(gbc.pc(), 0x1f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0151
        gbc.setState(0x15ca, 0xad95, 0x6c00, 0x37a6, 0x6a73, 0x34fb, 0x0, 0x1);
        gbc.writeMem(0x15ca, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xad95);
        EXPECT(gbc.pc(), 0x15cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0152
        gbc.setState(0xb720, 0x2092, 0xc30, 0x8fb5, 0x944f, 0x8057, 0x0, 0x1);
        gbc.writeMem(0xb720, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0xb721);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb720), 0x3);
        // 03 0153
        gbc.setState(0x7a8a, 0xa675, 0xa5a0, 0x8e16, 0xf9b5, 0x334b, 0x0, 0x1);
        gbc.writeMem(0x7a8a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa675);
        EXPECT(gbc.pc(), 0x7a8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0154
        gbc.setState(0x975b, 0x524e, 0xa170, 0xb6c0, 0xdbe0, 0xd103, 0x0, 0x1);
        gbc.writeMem(0x975b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x524e);
        EXPECT(gbc.pc(), 0x975c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975b), 0x3);
        // 03 0155
        gbc.setState(0xb816, 0xec29, 0x9310, 0x31e8, 0x4c53, 0x9be2, 0x0, 0x0);
        gbc.writeMem(0xb816, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xec29);
        EXPECT(gbc.pc(), 0xb817);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb816), 0x3);
        // 03 0156
        gbc.setState(0x84e0, 0xca03, 0xb430, 0x205c, 0x4841, 0xf2c5, 0x1, 0x0);
        gbc.writeMem(0x84e0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xca03);
        EXPECT(gbc.pc(), 0x84e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84e0), 0x3);
        // 03 0157
        gbc.setState(0x4923, 0x5be0, 0x9860, 0x17e6, 0x3ee, 0xeeed, 0x0, 0x0);
        gbc.writeMem(0x4923, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5be0);
        EXPECT(gbc.pc(), 0x4924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0158
        gbc.setState(0xece8, 0xa792, 0x5980, 0xb558, 0x7e71, 0xe295, 0x0, 0x1);
        gbc.writeMem(0xece8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa792);
        EXPECT(gbc.pc(), 0xece9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xece8), 0x3);
        // 03 0159
        gbc.setState(0xcc9a, 0x6e44, 0x7710, 0xe93c, 0xfd20, 0x95d5, 0x1, 0x0);
        gbc.writeMem(0xcc9a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x6e44);
        EXPECT(gbc.pc(), 0xcc9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc9a), 0x3);
        // 03 015A
        gbc.setState(0x77e5, 0x303c, 0x6510, 0x14ef, 0x967e, 0xe27d, 0x1, 0x1);
        gbc.writeMem(0x77e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x303c);
        EXPECT(gbc.pc(), 0x77e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 015B
        gbc.setState(0xc5ae, 0xd6e2, 0x8640, 0x7db, 0x247c, 0xb93a, 0x1, 0x1);
        gbc.writeMem(0xc5ae, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xd6e2);
        EXPECT(gbc.pc(), 0xc5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5ae), 0x3);
        // 03 015C
        gbc.setState(0x112c, 0x5360, 0x3e60, 0x91d3, 0xd1c3, 0x106f, 0x1, 0x1);
        gbc.writeMem(0x112c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5360);
        EXPECT(gbc.pc(), 0x112d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 015D
        gbc.setState(0x211c, 0xdd70, 0xa920, 0xefc1, 0x28c1, 0x651f, 0x1, 0x0);
        gbc.writeMem(0x211c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xdd70);
        EXPECT(gbc.pc(), 0x211d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 015F
        gbc.setState(0xce34, 0x6db0, 0xd3c0, 0x8898, 0x8c77, 0x8f7a, 0x1, 0x0);
        gbc.writeMem(0xce34, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x6db0);
        EXPECT(gbc.pc(), 0xce35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce34), 0x3);
        // 03 0160
        gbc.setState(0x6334, 0x4a20, 0x2af0, 0x5c2e, 0x6528, 0x425e, 0x0, 0x0);
        gbc.writeMem(0x6334, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4a20);
        EXPECT(gbc.pc(), 0x6335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0161
        gbc.setState(0x53f0, 0x553e, 0x4c20, 0xfac0, 0x43bf, 0x3c80, 0x0, 0x1);
        gbc.writeMem(0x53f0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x553e);
        EXPECT(gbc.pc(), 0x53f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0162
        gbc.setState(0x7eac, 0x5de1, 0x9b0, 0x8571, 0x512e, 0xd68b, 0x0, 0x0);
        gbc.writeMem(0x7eac, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5de1);
        EXPECT(gbc.pc(), 0x7ead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0163
        gbc.setState(0xd13c, 0xe630, 0xf10, 0x41c6, 0x59c9, 0xe086, 0x1, 0x1);
        gbc.writeMem(0xd13c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe630);
        EXPECT(gbc.pc(), 0xd13d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd13c), 0x3);
        // 03 0164
        gbc.setState(0x7c27, 0x16bd, 0xd9b0, 0x5a33, 0x33f4, 0x9eca, 0x0, 0x1);
        gbc.writeMem(0x7c27, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x16bd);
        EXPECT(gbc.pc(), 0x7c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0165
        gbc.setState(0x51e2, 0xb169, 0x5e50, 0xe45d, 0xd452, 0x8283, 0x0, 0x0);
        gbc.writeMem(0x51e2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb169);
        EXPECT(gbc.pc(), 0x51e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0166
        gbc.setState(0x30dc, 0x23a2, 0x25c0, 0xd0d0, 0x423f, 0x96f9, 0x1, 0x0);
        gbc.writeMem(0x30dc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x23a2);
        EXPECT(gbc.pc(), 0x30dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0167
        gbc.setState(0x13fa, 0xb599, 0x2db0, 0x4d03, 0x6c52, 0x43f4, 0x1, 0x1);
        gbc.writeMem(0x13fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb599);
        EXPECT(gbc.pc(), 0x13fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0168
        gbc.setState(0x3502, 0x7c93, 0x39f0, 0x993b, 0x614b, 0x9de2, 0x0, 0x0);
        gbc.writeMem(0x3502, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7c93);
        EXPECT(gbc.pc(), 0x3503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0169
        gbc.setState(0x31a, 0x703, 0xbaa0, 0x3ae7, 0xaf36, 0xe2ec, 0x0, 0x0);
        gbc.writeMem(0x31a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x703);
        EXPECT(gbc.pc(), 0x31b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 016A
        gbc.setState(0x9ddd, 0x6e0c, 0x7930, 0x3ca2, 0x1450, 0x2a99, 0x0, 0x1);
        gbc.writeMem(0x9ddd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6e0c);
        EXPECT(gbc.pc(), 0x9dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ddd), 0x3);
        // 03 016B
        gbc.setState(0x184f, 0xb0, 0x8de0, 0x6f08, 0xdd37, 0x5b35, 0x1, 0x1);
        gbc.writeMem(0x184f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb0);
        EXPECT(gbc.pc(), 0x1850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 016C
        gbc.setState(0x9cfc, 0x2035, 0xb1e0, 0xb6e7, 0x9094, 0x8549, 0x1, 0x0);
        gbc.writeMem(0x9cfc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2035);
        EXPECT(gbc.pc(), 0x9cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cfc), 0x3);
        // 03 016D
        gbc.setState(0xb9f3, 0xe266, 0x9e00, 0x2ce4, 0x5292, 0x7641, 0x1, 0x1);
        gbc.writeMem(0xb9f3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe266);
        EXPECT(gbc.pc(), 0xb9f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f3), 0x3);
        // 03 016E
        gbc.setState(0xef7, 0x5312, 0xb0b0, 0xe166, 0x31e7, 0xca39, 0x1, 0x1);
        gbc.writeMem(0xef7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5312);
        EXPECT(gbc.pc(), 0xef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 016F
        gbc.setState(0x70e7, 0xa1e1, 0xec70, 0x49a4, 0x57ad, 0xd1eb, 0x1, 0x1);
        gbc.writeMem(0x70e7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa1e1);
        EXPECT(gbc.pc(), 0x70e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0170
        gbc.setState(0xd40e, 0xf03f, 0x4080, 0xb432, 0x5ad, 0x9b82, 0x1, 0x0);
        gbc.writeMem(0xd40e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xf03f);
        EXPECT(gbc.pc(), 0xd40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd40e), 0x3);
        // 03 0173
        gbc.setState(0x3c8a, 0xee66, 0x3250, 0xa803, 0x7a0e, 0x7d37, 0x1, 0x1);
        gbc.writeMem(0x3c8a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xee66);
        EXPECT(gbc.pc(), 0x3c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0174
        gbc.setState(0xfce, 0xb1e4, 0xa3f0, 0x6d82, 0xea5d, 0x1556, 0x1, 0x0);
        gbc.writeMem(0xfce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xb1e4);
        EXPECT(gbc.pc(), 0xfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0175
        gbc.setState(0x6249, 0x4249, 0xe510, 0xaadf, 0x9ba, 0x9820, 0x0, 0x0);
        gbc.writeMem(0x6249, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4249);
        EXPECT(gbc.pc(), 0x624a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0176
        gbc.setState(0x6dd7, 0x2bd8, 0xce70, 0x514c, 0x78ae, 0x4123, 0x0, 0x1);
        gbc.writeMem(0x6dd7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x2bd8);
        EXPECT(gbc.pc(), 0x6dd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0177
        gbc.setState(0x960c, 0xdba5, 0xddf0, 0x9bb, 0x46bb, 0xb2dd, 0x0, 0x0);
        gbc.writeMem(0x960c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdba5);
        EXPECT(gbc.pc(), 0x960d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x960c), 0x3);
        // 03 0178
        gbc.setState(0x16b6, 0x388c, 0x8fd0, 0x7ae0, 0xf1c3, 0xcae2, 0x1, 0x0);
        gbc.writeMem(0x16b6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x388c);
        EXPECT(gbc.pc(), 0x16b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 017A
        gbc.setState(0x68a, 0xaa70, 0x530, 0xb1c6, 0x3ef8, 0x8c96, 0x0, 0x0);
        gbc.writeMem(0x68a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xaa70);
        EXPECT(gbc.pc(), 0x68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 017B
        gbc.setState(0x2a23, 0xd958, 0xe200, 0xe013, 0x4e95, 0x499a, 0x1, 0x0);
        gbc.writeMem(0x2a23, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd958);
        EXPECT(gbc.pc(), 0x2a24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 017D
        gbc.setState(0x97a7, 0x91d8, 0xb2f0, 0x2c31, 0xf582, 0xa25b, 0x1, 0x1);
        gbc.writeMem(0x97a7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x91d8);
        EXPECT(gbc.pc(), 0x97a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97a7), 0x3);
        // 03 017E
        gbc.setState(0xe69b, 0x5864, 0xf0c0, 0x166c, 0x2bb, 0xf49, 0x1, 0x0);
        gbc.writeMem(0xe69b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5864);
        EXPECT(gbc.pc(), 0xe69c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe69b), 0x3);
        // 03 017F
        gbc.setState(0xd593, 0xd2f0, 0xe350, 0x1061, 0x1e2e, 0x9083, 0x1, 0x1);
        gbc.writeMem(0xd593, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xd2f0);
        EXPECT(gbc.pc(), 0xd594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd593), 0x3);
        // 03 0180
        gbc.setState(0x65f8, 0x1555, 0xa310, 0xa1f5, 0x8c33, 0xa655, 0x0, 0x1);
        gbc.writeMem(0x65f8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x1555);
        EXPECT(gbc.pc(), 0x65f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0181
        gbc.setState(0x4679, 0x9fb2, 0x83d0, 0xb93c, 0x9792, 0x1a46, 0x0, 0x0);
        gbc.writeMem(0x4679, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x9fb2);
        EXPECT(gbc.pc(), 0x467a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0182
        gbc.setState(0x4dcf, 0x28c8, 0xc4b0, 0x10fb, 0xd77d, 0xf5ba, 0x1, 0x0);
        gbc.writeMem(0x4dcf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x28c8);
        EXPECT(gbc.pc(), 0x4dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0183
        gbc.setState(0xd4c5, 0x65eb, 0xba90, 0xe200, 0xee52, 0x923c, 0x1, 0x0);
        gbc.writeMem(0xd4c5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x65eb);
        EXPECT(gbc.pc(), 0xd4c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4c5), 0x3);
        // 03 0184
        gbc.setState(0xb9e0, 0x831f, 0x6c60, 0x584, 0x72be, 0x74d2, 0x1, 0x0);
        gbc.writeMem(0xb9e0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x831f);
        EXPECT(gbc.pc(), 0xb9e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9e0), 0x3);
        // 03 0185
        gbc.setState(0x75c5, 0xb442, 0x8920, 0x3191, 0xe762, 0x84b7, 0x0, 0x1);
        gbc.writeMem(0x75c5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb442);
        EXPECT(gbc.pc(), 0x75c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0186
        gbc.setState(0xcb44, 0x56a, 0x9ed0, 0xa4e2, 0x5b50, 0xb73e, 0x1, 0x1);
        gbc.writeMem(0xcb44, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x56a);
        EXPECT(gbc.pc(), 0xcb45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb44), 0x3);
        // 03 0187
        gbc.setState(0x34f6, 0xfc68, 0xd940, 0x3dfd, 0x1963, 0x9d3b, 0x0, 0x0);
        gbc.writeMem(0x34f6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xfc68);
        EXPECT(gbc.pc(), 0x34f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0189
        gbc.setState(0x62d6, 0xc83, 0x23e0, 0xf7a5, 0x3aca, 0x59bc, 0x0, 0x1);
        gbc.writeMem(0x62d6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc83);
        EXPECT(gbc.pc(), 0x62d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 018A
        gbc.setState(0x4ac, 0x4f37, 0x5940, 0x52b6, 0xd5da, 0x2e39, 0x1, 0x1);
        gbc.writeMem(0x4ac, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4f37);
        EXPECT(gbc.pc(), 0x4ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 018B
        gbc.setState(0xbc5b, 0x3ab0, 0x1000, 0x52cf, 0x7a8f, 0x48ff, 0x1, 0x0);
        gbc.writeMem(0xbc5b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3ab0);
        EXPECT(gbc.pc(), 0xbc5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5b), 0x3);
        // 03 018C
        gbc.setState(0x5ace, 0xb8b7, 0xb70, 0x3f87, 0x3c53, 0xf69d, 0x1, 0x0);
        gbc.writeMem(0x5ace, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb8b7);
        EXPECT(gbc.pc(), 0x5acf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 018D
        gbc.setState(0x5bd2, 0x4fe6, 0xf610, 0xc169, 0x4f4c, 0x1c6b, 0x1, 0x1);
        gbc.writeMem(0x5bd2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4fe6);
        EXPECT(gbc.pc(), 0x5bd3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 018E
        gbc.setState(0xcf2b, 0x1c80, 0x6940, 0xcf34, 0x7b84, 0xfec4, 0x1, 0x1);
        gbc.writeMem(0xcf2b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1c80);
        EXPECT(gbc.pc(), 0xcf2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf2b), 0x3);
        // 03 018F
        gbc.setState(0x869, 0xfeba, 0x7de0, 0xdbae, 0xe1c5, 0x185c, 0x0, 0x0);
        gbc.writeMem(0x869, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xfeba);
        EXPECT(gbc.pc(), 0x86a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0191
        gbc.setState(0x814f, 0x2368, 0x5a10, 0x3ae7, 0x9065, 0xab77, 0x0, 0x1);
        gbc.writeMem(0x814f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2368);
        EXPECT(gbc.pc(), 0x8150);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x814f), 0x3);
        // 03 0192
        gbc.setState(0x8fc, 0x946d, 0x5ab0, 0xb804, 0x2caf, 0x3a7e, 0x0, 0x0);
        gbc.writeMem(0x8fc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0x8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0193
        gbc.setState(0x33e9, 0x2316, 0xad0, 0xf50a, 0x73b5, 0x987c, 0x0, 0x0);
        gbc.writeMem(0x33e9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x2316);
        EXPECT(gbc.pc(), 0x33ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0194
        gbc.setState(0x8bb4, 0x29aa, 0xb060, 0x88a9, 0x1cab, 0x1c29, 0x0, 0x1);
        gbc.writeMem(0x8bb4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x29aa);
        EXPECT(gbc.pc(), 0x8bb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb4), 0x3);
        // 03 0195
        gbc.setState(0x9826, 0x7d7f, 0x4480, 0xf494, 0xdf4b, 0xc25a, 0x0, 0x1);
        gbc.writeMem(0x9826, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7d7f);
        EXPECT(gbc.pc(), 0x9827);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9826), 0x3);
        // 03 0196
        gbc.setState(0x7238, 0x2dd2, 0xcfd0, 0x1510, 0xc296, 0xa30f, 0x0, 0x0);
        gbc.writeMem(0x7238, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x2dd2);
        EXPECT(gbc.pc(), 0x7239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0198
        gbc.setState(0x55f2, 0x2982, 0xad50, 0x6896, 0xb597, 0x25e7, 0x0, 0x1);
        gbc.writeMem(0x55f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x2982);
        EXPECT(gbc.pc(), 0x55f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0199
        gbc.setState(0xc846, 0x67dd, 0x85b0, 0x3462, 0xaf92, 0x1dd5, 0x0, 0x1);
        gbc.writeMem(0xc846, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x67dd);
        EXPECT(gbc.pc(), 0xc847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc846), 0x3);
        // 03 019A
        gbc.setState(0x7291, 0xb865, 0x1150, 0x83c9, 0xfa95, 0x5df2, 0x0, 0x1);
        gbc.writeMem(0x7291, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb865);
        EXPECT(gbc.pc(), 0x7292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 019B
        gbc.setState(0x931c, 0x436b, 0x6910, 0xda85, 0xf7a7, 0x654b, 0x0, 0x1);
        gbc.writeMem(0x931c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x436b);
        EXPECT(gbc.pc(), 0x931d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931c), 0x3);
        // 03 019C
        gbc.setState(0x3891, 0xcc4, 0x1660, 0xbb90, 0xbb18, 0x8cba, 0x0, 0x1);
        gbc.writeMem(0x3891, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcc4);
        EXPECT(gbc.pc(), 0x3892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 019D
        gbc.setState(0xee8f, 0x4442, 0x5410, 0xb41f, 0xa161, 0xd4dc, 0x1, 0x1);
        gbc.writeMem(0xee8f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4442);
        EXPECT(gbc.pc(), 0xee90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee8f), 0x3);
        // 03 019E
        gbc.setState(0xe919, 0x462a, 0x9c50, 0x7f99, 0x46ce, 0xa965, 0x0, 0x1);
        gbc.writeMem(0xe919, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x462a);
        EXPECT(gbc.pc(), 0xe91a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe919), 0x3);
        // 03 019F
        gbc.setState(0x4903, 0xb3a1, 0xe750, 0x29d5, 0xce35, 0xb0ba, 0x0, 0x0);
        gbc.writeMem(0x4903, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb3a1);
        EXPECT(gbc.pc(), 0x4904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 01A0
        gbc.setState(0x7362, 0x5e08, 0xe2e0, 0x78a3, 0x7ff0, 0x274c, 0x1, 0x0);
        gbc.writeMem(0x7362, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5e08);
        EXPECT(gbc.pc(), 0x7363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01A1
        gbc.setState(0xb4b9, 0x2b30, 0xf450, 0x576d, 0xdcf3, 0xc237, 0x0, 0x1);
        gbc.writeMem(0xb4b9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2b30);
        EXPECT(gbc.pc(), 0xb4ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4b9), 0x3);
        // 03 01A2
        gbc.setState(0x24e, 0x40dd, 0xbfe0, 0xde5d, 0x87a, 0xaedf, 0x0, 0x0);
        gbc.writeMem(0x24e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x40dd);
        EXPECT(gbc.pc(), 0x24f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01A3
        gbc.setState(0x2a3f, 0x4376, 0x46a0, 0x507b, 0x2692, 0x491e, 0x1, 0x0);
        gbc.writeMem(0x2a3f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4376);
        EXPECT(gbc.pc(), 0x2a40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01A4
        gbc.setState(0x971d, 0x2ece, 0x60c0, 0x5d15, 0x8c66, 0xccd5, 0x1, 0x1);
        gbc.writeMem(0x971d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2ece);
        EXPECT(gbc.pc(), 0x971e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x971d), 0x3);
        // 03 01A5
        gbc.setState(0x4ebd, 0x121c, 0x1650, 0x9a6c, 0x9c89, 0x8a2, 0x1, 0x1);
        gbc.writeMem(0x4ebd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x121c);
        EXPECT(gbc.pc(), 0x4ebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 01A6
        gbc.setState(0x593c, 0x886f, 0x10e0, 0x5e3d, 0x3f90, 0x28b, 0x0, 0x1);
        gbc.writeMem(0x593c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x886f);
        EXPECT(gbc.pc(), 0x593d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01A7
        gbc.setState(0x1b68, 0xa9c3, 0xfba0, 0x115f, 0x3726, 0xd247, 0x0, 0x0);
        gbc.writeMem(0x1b68, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa9c3);
        EXPECT(gbc.pc(), 0x1b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01A8
        gbc.setState(0xe067, 0x1c6c, 0x2f00, 0x1013, 0x5337, 0x7588, 0x1, 0x1);
        gbc.writeMem(0xe067, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1c6c);
        EXPECT(gbc.pc(), 0xe068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe067), 0x3);
        // 03 01AA
        gbc.setState(0x3f1d, 0x2b6e, 0x8f20, 0x187e, 0x89a4, 0xff21, 0x0, 0x0);
        gbc.writeMem(0x3f1d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x2b6e);
        EXPECT(gbc.pc(), 0x3f1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01AB
        gbc.setState(0xca0c, 0x1c24, 0x90e0, 0xf28d, 0x8606, 0x9ba9, 0x0, 0x0);
        gbc.writeMem(0xca0c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1c24);
        EXPECT(gbc.pc(), 0xca0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca0c), 0x3);
        // 03 01AC
        gbc.setState(0x86c1, 0xc0f4, 0xb350, 0xa91a, 0xc5e6, 0xc5b0, 0x0, 0x1);
        gbc.writeMem(0x86c1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xc0f4);
        EXPECT(gbc.pc(), 0x86c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c1), 0x3);
        // 03 01AD
        gbc.setState(0x8c7f, 0x55c0, 0xe470, 0x9f09, 0x33b1, 0xcf7f, 0x0, 0x0);
        gbc.writeMem(0x8c7f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x55c0);
        EXPECT(gbc.pc(), 0x8c80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c7f), 0x3);
        // 03 01AE
        gbc.setState(0xc654, 0xea12, 0xc1d0, 0x7240, 0x3afb, 0x62a7, 0x1, 0x1);
        gbc.writeMem(0xc654, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xea12);
        EXPECT(gbc.pc(), 0xc655);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc654), 0x3);
        // 03 01AF
        gbc.setState(0x36ab, 0x3891, 0x2de0, 0x1c8f, 0x5f1, 0x60e9, 0x1, 0x1);
        gbc.writeMem(0x36ab, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3891);
        EXPECT(gbc.pc(), 0x36ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01B0
        gbc.setState(0xc27f, 0x3907, 0xf9f0, 0xd539, 0x3a7f, 0xdc4b, 0x1, 0x0);
        gbc.writeMem(0xc27f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x3907);
        EXPECT(gbc.pc(), 0xc280);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc27f), 0x3);
        // 03 01B1
        gbc.setState(0x33b9, 0xbf1b, 0x6020, 0x52da, 0xc4d9, 0xb16b, 0x0, 0x0);
        gbc.writeMem(0x33b9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xbf1b);
        EXPECT(gbc.pc(), 0x33ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01B2
        gbc.setState(0xd84d, 0xb331, 0xf280, 0xde1d, 0x4083, 0xd210, 0x0, 0x1);
        gbc.writeMem(0xd84d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xb331);
        EXPECT(gbc.pc(), 0xd84e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd84d), 0x3);
        // 03 01B3
        gbc.setState(0x5498, 0xf432, 0x80a0, 0xf2b, 0x8b8f, 0xe189, 0x0, 0x1);
        gbc.writeMem(0x5498, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf432);
        EXPECT(gbc.pc(), 0x5499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01B4
        gbc.setState(0xde99, 0x265a, 0x9f40, 0x67df, 0x96b9, 0x5c68, 0x1, 0x1);
        gbc.writeMem(0xde99, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x265a);
        EXPECT(gbc.pc(), 0xde9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde99), 0x3);
        // 03 01B5
        gbc.setState(0xaad0, 0x112b, 0xa430, 0xa4ad, 0x74c7, 0xd369, 0x0, 0x1);
        gbc.writeMem(0xaad0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x112b);
        EXPECT(gbc.pc(), 0xaad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad0), 0x3);
        // 03 01B6
        gbc.setState(0x68d0, 0xde4a, 0xd40, 0x2d4, 0x1ad1, 0x20c4, 0x0, 0x0);
        gbc.writeMem(0x68d0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xde4a);
        EXPECT(gbc.pc(), 0x68d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01B7
        gbc.setState(0x15d0, 0x7563, 0xdc80, 0x6b25, 0x9614, 0xa18f, 0x0, 0x0);
        gbc.writeMem(0x15d0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7563);
        EXPECT(gbc.pc(), 0x15d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01B8
        gbc.setState(0xb726, 0x60c0, 0xcec0, 0x3ad0, 0xe208, 0xe9a6, 0x1, 0x0);
        gbc.writeMem(0xb726, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x60c0);
        EXPECT(gbc.pc(), 0xb727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb726), 0x3);
        // 03 01BA
        gbc.setState(0x139b, 0xfb62, 0x4f30, 0xdb2e, 0x53e5, 0x8962, 0x1, 0x0);
        gbc.writeMem(0x139b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfb62);
        EXPECT(gbc.pc(), 0x139c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01BC
        gbc.setState(0xa180, 0xd725, 0x97c0, 0x6b21, 0x4f9d, 0xeffc, 0x0, 0x1);
        gbc.writeMem(0xa180, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xd725);
        EXPECT(gbc.pc(), 0xa181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa180), 0x3);
        // 03 01BD
        gbc.setState(0xbd8f, 0x11c7, 0xe910, 0x6470, 0xa289, 0x439e, 0x1, 0x1);
        gbc.writeMem(0xbd8f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x11c7);
        EXPECT(gbc.pc(), 0xbd90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd8f), 0x3);
        // 03 01BE
        gbc.setState(0xc873, 0xba30, 0xbee0, 0x7ff0, 0x2d19, 0x30ef, 0x1, 0x0);
        gbc.writeMem(0xc873, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xba30);
        EXPECT(gbc.pc(), 0xc874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc873), 0x3);
        // 03 01BF
        gbc.setState(0xc636, 0x73b1, 0x6530, 0xdff4, 0x788e, 0xc322, 0x0, 0x1);
        gbc.writeMem(0xc636, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x73b1);
        EXPECT(gbc.pc(), 0xc637);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc636), 0x3);
        // 03 01C0
        gbc.setState(0x92fd, 0x8926, 0xabb0, 0x1bb0, 0x57cb, 0xc973, 0x0, 0x1);
        gbc.writeMem(0x92fd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8926);
        EXPECT(gbc.pc(), 0x92fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92fd), 0x3);
        // 03 01C1
        gbc.setState(0xcdeb, 0x4e68, 0x9c10, 0x227a, 0x8e22, 0x533c, 0x1, 0x1);
        gbc.writeMem(0xcdeb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x4e68);
        EXPECT(gbc.pc(), 0xcdec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdeb), 0x3);
        // 03 01C2
        gbc.setState(0xccc9, 0x7550, 0xb110, 0x6b26, 0x3f10, 0x9f38, 0x1, 0x1);
        gbc.writeMem(0xccc9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7550);
        EXPECT(gbc.pc(), 0xccca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc9), 0x3);
        // 03 01C3
        gbc.setState(0x7d2c, 0x19b2, 0x4560, 0x1803, 0xb17a, 0x7da0, 0x0, 0x1);
        gbc.writeMem(0x7d2c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x19b2);
        EXPECT(gbc.pc(), 0x7d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01C4
        gbc.setState(0x8eb1, 0xa631, 0xb770, 0x810e, 0x56a9, 0x371e, 0x0, 0x1);
        gbc.writeMem(0x8eb1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xa631);
        EXPECT(gbc.pc(), 0x8eb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb1), 0x3);
        // 03 01C5
        gbc.setState(0x4cfd, 0x2e9a, 0x1820, 0x7348, 0xdde4, 0x10d4, 0x0, 0x0);
        gbc.writeMem(0x4cfd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2e9a);
        EXPECT(gbc.pc(), 0x4cfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01C6
        gbc.setState(0xd07e, 0xca02, 0x7e80, 0x4018, 0x59d8, 0x90a6, 0x0, 0x1);
        gbc.writeMem(0xd07e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xca02);
        EXPECT(gbc.pc(), 0xd07f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07e), 0x3);
        // 03 01C7
        gbc.setState(0x37ea, 0x6a3a, 0x3380, 0x4e6e, 0x8c1c, 0x2d1e, 0x1, 0x1);
        gbc.writeMem(0x37ea, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6a3a);
        EXPECT(gbc.pc(), 0x37eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01C8
        gbc.setState(0xa190, 0x1b67, 0xb1b0, 0x637, 0x897, 0x3b82, 0x1, 0x0);
        gbc.writeMem(0xa190, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1b67);
        EXPECT(gbc.pc(), 0xa191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa190), 0x3);
        // 03 01C9
        gbc.setState(0xa6d5, 0xb6bb, 0xad90, 0x49c7, 0x3fd2, 0xce88, 0x0, 0x0);
        gbc.writeMem(0xa6d5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb6bb);
        EXPECT(gbc.pc(), 0xa6d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6d5), 0x3);
        // 03 01CA
        gbc.setState(0x86f9, 0x622e, 0x7b90, 0x138d, 0xb695, 0x6c20, 0x1, 0x0);
        gbc.writeMem(0x86f9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x622e);
        EXPECT(gbc.pc(), 0x86fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f9), 0x3);
        // 03 01CB
        gbc.setState(0x4be5, 0x8f91, 0x7880, 0x4061, 0x36e3, 0x3b59, 0x1, 0x0);
        gbc.writeMem(0x4be5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8f91);
        EXPECT(gbc.pc(), 0x4be6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01CC
        gbc.setState(0x6375, 0x19c2, 0x2690, 0xf74e, 0x4b17, 0x45d7, 0x1, 0x1);
        gbc.writeMem(0x6375, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x19c2);
        EXPECT(gbc.pc(), 0x6376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 01CD
        gbc.setState(0x446b, 0xb9b2, 0x72f0, 0xcc6, 0xd033, 0xbc3, 0x0, 0x1);
        gbc.writeMem(0x446b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb9b2);
        EXPECT(gbc.pc(), 0x446c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01CE
        gbc.setState(0x88e, 0xed9d, 0x5000, 0x3f7a, 0xce9e, 0x7e90, 0x0, 0x0);
        gbc.writeMem(0x88e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xed9d);
        EXPECT(gbc.pc(), 0x88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01CF
        gbc.setState(0xa685, 0x9338, 0x14c0, 0x5442, 0xf994, 0xf139, 0x1, 0x0);
        gbc.writeMem(0xa685, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9338);
        EXPECT(gbc.pc(), 0xa686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa685), 0x3);
        // 03 01D0
        gbc.setState(0x1be6, 0x56a9, 0xe3f0, 0x55ab, 0xce4, 0x2c9d, 0x0, 0x1);
        gbc.writeMem(0x1be6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x56a9);
        EXPECT(gbc.pc(), 0x1be7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01D1
        gbc.setState(0x83b1, 0x7cfd, 0x4a00, 0x38ec, 0x7e32, 0xa724, 0x1, 0x1);
        gbc.writeMem(0x83b1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7cfd);
        EXPECT(gbc.pc(), 0x83b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b1), 0x3);
        // 03 01D3
        gbc.setState(0x8dde, 0xb9a7, 0xa270, 0x508c, 0xf579, 0x586f, 0x1, 0x0);
        gbc.writeMem(0x8dde, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb9a7);
        EXPECT(gbc.pc(), 0x8ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dde), 0x3);
        // 03 01D4
        gbc.setState(0x183a, 0xaf42, 0x8060, 0x4e70, 0x182b, 0x601f, 0x0, 0x0);
        gbc.writeMem(0x183a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xaf42);
        EXPECT(gbc.pc(), 0x183b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01D5
        gbc.setState(0x7d8c, 0xcab2, 0xad00, 0xfeef, 0xd95d, 0x2be5, 0x0, 0x0);
        gbc.writeMem(0x7d8c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcab2);
        EXPECT(gbc.pc(), 0x7d8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01D6
        gbc.setState(0xadc4, 0x9563, 0xaa60, 0xc1a7, 0xa484, 0x8884, 0x1, 0x1);
        gbc.writeMem(0xadc4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9563);
        EXPECT(gbc.pc(), 0xadc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc4), 0x3);
        // 03 01D7
        gbc.setState(0x722c, 0xaf38, 0x9980, 0x7527, 0x7b22, 0xeb2, 0x0, 0x1);
        gbc.writeMem(0x722c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xaf38);
        EXPECT(gbc.pc(), 0x722d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01D8
        gbc.setState(0xc4ef, 0xff44, 0x63c0, 0x8f2e, 0x7ae6, 0xafb0, 0x0, 0x0);
        gbc.writeMem(0xc4ef, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xff44);
        EXPECT(gbc.pc(), 0xc4f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4ef), 0x3);
        // 03 01D9
        gbc.setState(0xe4c8, 0xcdf3, 0x82e0, 0x6c1e, 0xd59c, 0xa55f, 0x1, 0x1);
        gbc.writeMem(0xe4c8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xcdf3);
        EXPECT(gbc.pc(), 0xe4c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c8), 0x3);
        // 03 01DA
        gbc.setState(0x90ef, 0x6f5a, 0xd970, 0x32bb, 0xd549, 0x45af, 0x1, 0x0);
        gbc.writeMem(0x90ef, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6f5a);
        EXPECT(gbc.pc(), 0x90f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90ef), 0x3);
        // 03 01DB
        gbc.setState(0x5c93, 0x1985, 0x5d70, 0xfca1, 0xa5ac, 0x8445, 0x0, 0x0);
        gbc.writeMem(0x5c93, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1985);
        EXPECT(gbc.pc(), 0x5c94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01DC
        gbc.setState(0x51c, 0xcd25, 0x4ca0, 0xb9ed, 0xd135, 0x9838, 0x0, 0x0);
        gbc.writeMem(0x51c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcd25);
        EXPECT(gbc.pc(), 0x51d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01DD
        gbc.setState(0x733e, 0xa7c6, 0x16c0, 0x24d0, 0x7450, 0x9741, 0x0, 0x0);
        gbc.writeMem(0x733e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xa7c6);
        EXPECT(gbc.pc(), 0x733f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01DE
        gbc.setState(0xefd4, 0xa048, 0x6c00, 0xccb8, 0xd3db, 0x332a, 0x1, 0x0);
        gbc.writeMem(0xefd4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa048);
        EXPECT(gbc.pc(), 0xefd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd4), 0x3);
        // 03 01DF
        gbc.setState(0x84c2, 0x9015, 0x6170, 0x9e07, 0xde2f, 0xcaaf, 0x0, 0x1);
        gbc.writeMem(0x84c2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x9015);
        EXPECT(gbc.pc(), 0x84c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c2), 0x3);
        // 03 01E0
        gbc.setState(0xd713, 0xe3f8, 0x3130, 0xa540, 0xdd6d, 0xf772, 0x1, 0x0);
        gbc.writeMem(0xd713, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe3f8);
        EXPECT(gbc.pc(), 0xd714);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd713), 0x3);
        // 03 01E1
        gbc.setState(0xdf97, 0x359f, 0xa550, 0xf4ad, 0x28d, 0x5b57, 0x0, 0x1);
        gbc.writeMem(0xdf97, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x359f);
        EXPECT(gbc.pc(), 0xdf98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf97), 0x3);
        // 03 01E3
        gbc.setState(0x9129, 0x897a, 0x2b90, 0xa22a, 0x9aa9, 0x10a0, 0x1, 0x0);
        gbc.writeMem(0x9129, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x897a);
        EXPECT(gbc.pc(), 0x912a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9129), 0x3);
        // 03 01E4
        gbc.setState(0x4d6b, 0x8ef, 0x1190, 0x7c0, 0x2248, 0x8687, 0x0, 0x0);
        gbc.writeMem(0x4d6b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8ef);
        EXPECT(gbc.pc(), 0x4d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 01E5
        gbc.setState(0xa8ff, 0x6300, 0x5940, 0xb032, 0xa7ac, 0xfc0a, 0x1, 0x1);
        gbc.writeMem(0xa8ff, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x6300);
        EXPECT(gbc.pc(), 0xa900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ff), 0x3);
        // 03 01E6
        gbc.setState(0x1378, 0x5fa3, 0x3680, 0xd762, 0xc78, 0xffb7, 0x1, 0x0);
        gbc.writeMem(0x1378, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5fa3);
        EXPECT(gbc.pc(), 0x1379);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01E7
        gbc.setState(0x3372, 0x15f5, 0x8450, 0xf392, 0x697c, 0xa94a, 0x0, 0x0);
        gbc.writeMem(0x3372, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x15f5);
        EXPECT(gbc.pc(), 0x3373);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 01E8
        gbc.setState(0x6032, 0x9740, 0x7030, 0x2ca6, 0xf0d3, 0x9f84, 0x1, 0x1);
        gbc.writeMem(0x6032, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9740);
        EXPECT(gbc.pc(), 0x6033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01E9
        gbc.setState(0x6661, 0x9257, 0x1330, 0x7e9b, 0x2131, 0xccae, 0x0, 0x0);
        gbc.writeMem(0x6661, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9257);
        EXPECT(gbc.pc(), 0x6662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01EA
        gbc.setState(0x40e6, 0xcbd6, 0xa070, 0x5da0, 0x9023, 0x783a, 0x0, 0x0);
        gbc.writeMem(0x40e6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcbd6);
        EXPECT(gbc.pc(), 0x40e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01EB
        gbc.setState(0x83af, 0x1e75, 0xa780, 0xbe05, 0x7419, 0x9b25, 0x0, 0x0);
        gbc.writeMem(0x83af, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1e75);
        EXPECT(gbc.pc(), 0x83b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83af), 0x3);
        // 03 01EC
        gbc.setState(0xe40e, 0xc309, 0xf0c0, 0xbf3c, 0xda34, 0x5b6c, 0x1, 0x0);
        gbc.writeMem(0xe40e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc309);
        EXPECT(gbc.pc(), 0xe40f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40e), 0x3);
        // 03 01ED
        gbc.setState(0x2390, 0x1145, 0x87b0, 0xb236, 0xeb9a, 0x6623, 0x0, 0x0);
        gbc.writeMem(0x2390, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1145);
        EXPECT(gbc.pc(), 0x2391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01EE
        gbc.setState(0x75e7, 0x391f, 0x7040, 0x57f, 0x130b, 0x3acb, 0x0, 0x0);
        gbc.writeMem(0x75e7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x391f);
        EXPECT(gbc.pc(), 0x75e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01EF
        gbc.setState(0x268, 0x69d8, 0xcdc0, 0x5abd, 0x1451, 0x82f5, 0x1, 0x0);
        gbc.writeMem(0x268, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x69d8);
        EXPECT(gbc.pc(), 0x269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01F0
        gbc.setState(0xcd3, 0x7448, 0x1460, 0x5ddb, 0x6536, 0x410, 0x1, 0x1);
        gbc.writeMem(0xcd3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7448);
        EXPECT(gbc.pc(), 0xcd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01F1
        gbc.setState(0x77cf, 0xce87, 0xfa00, 0xbf75, 0x35d, 0xcb24, 0x0, 0x0);
        gbc.writeMem(0x77cf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xce87);
        EXPECT(gbc.pc(), 0x77d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01F2
        gbc.setState(0xe7a3, 0xa789, 0x8f00, 0xb6d2, 0xe14e, 0x880c, 0x1, 0x0);
        gbc.writeMem(0xe7a3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xa789);
        EXPECT(gbc.pc(), 0xe7a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a3), 0x3);
        // 03 01F3
        gbc.setState(0x4760, 0x284e, 0x6880, 0xca2, 0x278b, 0x9048, 0x0, 0x1);
        gbc.writeMem(0x4760, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x284e);
        EXPECT(gbc.pc(), 0x4761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01F4
        gbc.setState(0xabbd, 0x4f8b, 0x3230, 0x3b26, 0x1b16, 0x393b, 0x0, 0x1);
        gbc.writeMem(0xabbd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4f8b);
        EXPECT(gbc.pc(), 0xabbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabbd), 0x3);
        // 03 01F5
        gbc.setState(0x8c0a, 0xd159, 0x4c50, 0xf3a, 0x6fc7, 0xf275, 0x1, 0x0);
        gbc.writeMem(0x8c0a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd159);
        EXPECT(gbc.pc(), 0x8c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c0a), 0x3);
        // 03 01F6
        gbc.setState(0xa1c3, 0xd5e3, 0xcb70, 0xd21, 0xa25f, 0x55b0, 0x1, 0x1);
        gbc.writeMem(0xa1c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd5e3);
        EXPECT(gbc.pc(), 0xa1c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1c3), 0x3);
        // 03 01F7
        gbc.setState(0x7caa, 0x47f6, 0xfb70, 0x9b09, 0xebe3, 0xea2b, 0x1, 0x0);
        gbc.writeMem(0x7caa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x47f6);
        EXPECT(gbc.pc(), 0x7cab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 01F8
        gbc.setState(0x3f32, 0xa0e0, 0xfbc0, 0x55db, 0xa6c4, 0xc66d, 0x1, 0x1);
        gbc.writeMem(0x3f32, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xa0e0);
        EXPECT(gbc.pc(), 0x3f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01F9
        gbc.setState(0x9cf, 0xc73, 0x2e20, 0x7d8c, 0x3e7f, 0x9011, 0x0, 0x0);
        gbc.writeMem(0x9cf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xc73);
        EXPECT(gbc.pc(), 0x9d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01FA
        gbc.setState(0xa81e, 0xccf3, 0x6470, 0x3efb, 0xed15, 0xe8a2, 0x0, 0x1);
        gbc.writeMem(0xa81e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xccf3);
        EXPECT(gbc.pc(), 0xa81f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa81e), 0x3);
        // 03 01FB
        gbc.setState(0x3780, 0x7c6, 0xbb20, 0x84d9, 0xb2bf, 0x3ceb, 0x1, 0x0);
        gbc.writeMem(0x3780, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x7c6);
        EXPECT(gbc.pc(), 0x3781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 01FC
        gbc.setState(0x2fc9, 0x1d40, 0xc440, 0x56ed, 0xa899, 0x49ef, 0x1, 0x1);
        gbc.writeMem(0x2fc9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1d40);
        EXPECT(gbc.pc(), 0x2fca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 01FE
        gbc.setState(0x8596, 0xd383, 0xe310, 0x1136, 0x51bd, 0xa495, 0x1, 0x0);
        gbc.writeMem(0x8596, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xd383);
        EXPECT(gbc.pc(), 0x8597);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8596), 0x3);
        // 03 01FF
        gbc.setState(0x2a6b, 0x5d6c, 0x3330, 0x5cd1, 0x530, 0x40d9, 0x1, 0x0);
        gbc.writeMem(0x2a6b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5d6c);
        EXPECT(gbc.pc(), 0x2a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0200
        gbc.setState(0xde14, 0x8555, 0x1a90, 0x596c, 0x9a46, 0x8e09, 0x0, 0x1);
        gbc.writeMem(0xde14, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8555);
        EXPECT(gbc.pc(), 0xde15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde14), 0x3);
        // 03 0201
        gbc.setState(0x40de, 0x99e4, 0xf2b0, 0xa319, 0x5eec, 0xa4be, 0x0, 0x0);
        gbc.writeMem(0x40de, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x99e4);
        EXPECT(gbc.pc(), 0x40df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0202
        gbc.setState(0xc77a, 0xfdd0, 0x4980, 0xded0, 0x839e, 0x1f2a, 0x0, 0x0);
        gbc.writeMem(0xc77a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfdd0);
        EXPECT(gbc.pc(), 0xc77b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77a), 0x3);
        // 03 0203
        gbc.setState(0x6321, 0xe429, 0xb290, 0x79d9, 0x53b7, 0xadf4, 0x1, 0x0);
        gbc.writeMem(0x6321, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe429);
        EXPECT(gbc.pc(), 0x6322);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0204
        gbc.setState(0x6ed3, 0x7b05, 0x9210, 0xe198, 0x38b8, 0xb3bb, 0x0, 0x1);
        gbc.writeMem(0x6ed3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7b05);
        EXPECT(gbc.pc(), 0x6ed4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0205
        gbc.setState(0x73c5, 0x61a9, 0xb170, 0x3fa1, 0xed2c, 0x9099, 0x1, 0x1);
        gbc.writeMem(0x73c5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x61a9);
        EXPECT(gbc.pc(), 0x73c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0206
        gbc.setState(0x3b13, 0xe799, 0xed20, 0xf9e, 0xe6a4, 0x1990, 0x0, 0x0);
        gbc.writeMem(0x3b13, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe799);
        EXPECT(gbc.pc(), 0x3b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0207
        gbc.setState(0x688, 0x1ef1, 0x9ab0, 0xb526, 0xa53b, 0x187, 0x1, 0x1);
        gbc.writeMem(0x688, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1ef1);
        EXPECT(gbc.pc(), 0x689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0208
        gbc.setState(0x1bd2, 0xb2c6, 0x4f50, 0x42c9, 0x3f56, 0x65d8, 0x0, 0x1);
        gbc.writeMem(0x1bd2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb2c6);
        EXPECT(gbc.pc(), 0x1bd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0209
        gbc.setState(0x9d58, 0x1e28, 0x9b40, 0x51e2, 0xc542, 0x2a6e, 0x0, 0x1);
        gbc.writeMem(0x9d58, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x1e28);
        EXPECT(gbc.pc(), 0x9d59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d58), 0x3);
        // 03 020A
        gbc.setState(0xed0a, 0xb2d2, 0xbf70, 0xd738, 0xa6b0, 0x311d, 0x0, 0x0);
        gbc.writeMem(0xed0a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb2d2);
        EXPECT(gbc.pc(), 0xed0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed0a), 0x3);
        // 03 020B
        gbc.setState(0x6094, 0x4cb8, 0x2f10, 0x58c3, 0xcc90, 0x6303, 0x0, 0x0);
        gbc.writeMem(0x6094, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4cb8);
        EXPECT(gbc.pc(), 0x6095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 020C
        gbc.setState(0xb182, 0x96d8, 0xd30, 0x3915, 0x41fd, 0x8e9d, 0x1, 0x1);
        gbc.writeMem(0xb182, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x96d8);
        EXPECT(gbc.pc(), 0xb183);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb182), 0x3);
        // 03 020D
        gbc.setState(0x1781, 0x7411, 0x9bc0, 0x4952, 0xd239, 0x65cb, 0x1, 0x0);
        gbc.writeMem(0x1781, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7411);
        EXPECT(gbc.pc(), 0x1782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 020E
        gbc.setState(0x7d85, 0x7294, 0xe610, 0x8feb, 0x9c12, 0x6153, 0x1, 0x0);
        gbc.writeMem(0x7d85, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7294);
        EXPECT(gbc.pc(), 0x7d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 020F
        gbc.setState(0x7894, 0x6e08, 0xfab0, 0x5d13, 0xa041, 0x7127, 0x0, 0x0);
        gbc.writeMem(0x7894, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6e08);
        EXPECT(gbc.pc(), 0x7895);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0210
        gbc.setState(0x5c53, 0xd623, 0x930, 0xee99, 0x944c, 0xbb84, 0x1, 0x1);
        gbc.writeMem(0x5c53, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd623);
        EXPECT(gbc.pc(), 0x5c54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0211
        gbc.setState(0x6145, 0x2e68, 0x1910, 0x4f8e, 0x95b7, 0x72b7, 0x0, 0x0);
        gbc.writeMem(0x6145, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2e68);
        EXPECT(gbc.pc(), 0x6146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0212
        gbc.setState(0x67ee, 0x5619, 0x1770, 0x3eb6, 0x20fe, 0x9444, 0x0, 0x1);
        gbc.writeMem(0x67ee, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x5619);
        EXPECT(gbc.pc(), 0x67ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0213
        gbc.setState(0x6e62, 0x225c, 0x7850, 0x49d1, 0xfbc3, 0xc660, 0x0, 0x1);
        gbc.writeMem(0x6e62, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x225c);
        EXPECT(gbc.pc(), 0x6e63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0214
        gbc.setState(0x45fe, 0x54e1, 0xa520, 0xa2b1, 0xff2d, 0xc93f, 0x1, 0x0);
        gbc.writeMem(0x45fe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x54e1);
        EXPECT(gbc.pc(), 0x45ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0215
        gbc.setState(0x1b87, 0xa219, 0x3700, 0x8363, 0x1dce, 0x6aae, 0x1, 0x1);
        gbc.writeMem(0x1b87, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xa219);
        EXPECT(gbc.pc(), 0x1b88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0216
        gbc.setState(0x9bd9, 0xea2c, 0x46f0, 0x8a6, 0xd19f, 0xe92a, 0x0, 0x1);
        gbc.writeMem(0x9bd9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xea2c);
        EXPECT(gbc.pc(), 0x9bda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bd9), 0x3);
        // 03 0217
        gbc.setState(0xcdd, 0xdd54, 0xb290, 0xb6f, 0x1f7b, 0x606, 0x0, 0x0);
        gbc.writeMem(0xcdd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xdd54);
        EXPECT(gbc.pc(), 0xcde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0218
        gbc.setState(0xa280, 0x3c15, 0xa420, 0x8622, 0xedad, 0xa7d2, 0x0, 0x0);
        gbc.writeMem(0xa280, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3c15);
        EXPECT(gbc.pc(), 0xa281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa280), 0x3);
        // 03 0219
        gbc.setState(0x77ef, 0x23f4, 0x2270, 0x8ab4, 0xd62e, 0x411, 0x0, 0x1);
        gbc.writeMem(0x77ef, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x23f4);
        EXPECT(gbc.pc(), 0x77f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 021A
        gbc.setState(0xd679, 0x5501, 0x3e80, 0x3bd0, 0x24f7, 0x9734, 0x1, 0x1);
        gbc.writeMem(0xd679, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5501);
        EXPECT(gbc.pc(), 0xd67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd679), 0x3);
        // 03 021B
        gbc.setState(0xd79f, 0xfaae, 0x62f0, 0x8ad, 0xea99, 0xfc75, 0x1, 0x1);
        gbc.writeMem(0xd79f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xfaae);
        EXPECT(gbc.pc(), 0xd7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd79f), 0x3);
        // 03 021C
        gbc.setState(0x8190, 0x6fbd, 0xb2f0, 0xe463, 0xa301, 0x484, 0x1, 0x0);
        gbc.writeMem(0x8190, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6fbd);
        EXPECT(gbc.pc(), 0x8191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8190), 0x3);
        // 03 021D
        gbc.setState(0x6f81, 0x8e18, 0x71a0, 0x947d, 0xba02, 0x44ed, 0x1, 0x0);
        gbc.writeMem(0x6f81, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8e18);
        EXPECT(gbc.pc(), 0x6f82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 021E
        gbc.setState(0xb05d, 0x3953, 0x7020, 0xa803, 0xb06c, 0xe2e1, 0x1, 0x0);
        gbc.writeMem(0xb05d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3953);
        EXPECT(gbc.pc(), 0xb05e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb05d), 0x3);
        // 03 021F
        gbc.setState(0xb076, 0xfcd4, 0x6230, 0x451, 0x9df7, 0x13de, 0x1, 0x0);
        gbc.writeMem(0xb076, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xfcd4);
        EXPECT(gbc.pc(), 0xb077);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb076), 0x3);
        // 03 0220
        gbc.setState(0xd347, 0x581b, 0xb810, 0x1181, 0x1f52, 0xff4c, 0x1, 0x0);
        gbc.writeMem(0xd347, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x581b);
        EXPECT(gbc.pc(), 0xd348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd347), 0x3);
        // 03 0222
        gbc.setState(0xd121, 0x371c, 0x640, 0x331, 0xcce9, 0x6885, 0x0, 0x1);
        gbc.writeMem(0xd121, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x371c);
        EXPECT(gbc.pc(), 0xd122);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd121), 0x3);
        // 03 0225
        gbc.setState(0xaeb5, 0x3d08, 0x8220, 0xda9d, 0x9926, 0x922a, 0x0, 0x0);
        gbc.writeMem(0xaeb5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x3d08);
        EXPECT(gbc.pc(), 0xaeb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaeb5), 0x3);
        // 03 0226
        gbc.setState(0x734c, 0x2841, 0x9330, 0xb398, 0x7f51, 0xb842, 0x1, 0x1);
        gbc.writeMem(0x734c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x2841);
        EXPECT(gbc.pc(), 0x734d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0227
        gbc.setState(0xe6c2, 0x7c6c, 0xb2d0, 0xb11f, 0xd827, 0xc968, 0x1, 0x0);
        gbc.writeMem(0xe6c2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7c6c);
        EXPECT(gbc.pc(), 0xe6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6c2), 0x3);
        // 03 0229
        gbc.setState(0x35cb, 0x8475, 0x4430, 0x2e39, 0xbe99, 0xa208, 0x0, 0x1);
        gbc.writeMem(0x35cb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8475);
        EXPECT(gbc.pc(), 0x35cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 022A
        gbc.setState(0xdfd3, 0x8ba0, 0xd970, 0x4c6b, 0xf820, 0xdb67, 0x1, 0x1);
        gbc.writeMem(0xdfd3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8ba0);
        EXPECT(gbc.pc(), 0xdfd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd3), 0x3);
        // 03 022B
        gbc.setState(0x3967, 0x8e69, 0x4210, 0x3f33, 0x2ac0, 0x2316, 0x1, 0x1);
        gbc.writeMem(0x3967, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x8e69);
        EXPECT(gbc.pc(), 0x3968);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 022C
        gbc.setState(0x81a8, 0xae40, 0xcea0, 0xe78c, 0x44a7, 0xd392, 0x0, 0x0);
        gbc.writeMem(0x81a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xae40);
        EXPECT(gbc.pc(), 0x81a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81a8), 0x3);
        // 03 022D
        gbc.setState(0xa8f, 0xa3de, 0x47e0, 0x2459, 0x553a, 0x17d9, 0x1, 0x0);
        gbc.writeMem(0xa8f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa3de);
        EXPECT(gbc.pc(), 0xa90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 022E
        gbc.setState(0x446c, 0xb460, 0x6090, 0xc592, 0xc099, 0xd958, 0x0, 0x1);
        gbc.writeMem(0x446c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb460);
        EXPECT(gbc.pc(), 0x446d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 022F
        gbc.setState(0x3e87, 0xa790, 0xa990, 0xbbaa, 0xddc9, 0xdac4, 0x1, 0x1);
        gbc.writeMem(0x3e87, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa790);
        EXPECT(gbc.pc(), 0x3e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0230
        gbc.setState(0x144d, 0x298e, 0x7d20, 0x64fd, 0x4a88, 0x850e, 0x0, 0x0);
        gbc.writeMem(0x144d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x298e);
        EXPECT(gbc.pc(), 0x144e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0231
        gbc.setState(0x9395, 0xe4f2, 0x4ea0, 0x6b55, 0x83b5, 0x74c8, 0x1, 0x1);
        gbc.writeMem(0x9395, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe4f2);
        EXPECT(gbc.pc(), 0x9396);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9395), 0x3);
        // 03 0232
        gbc.setState(0x7fb3, 0x5f, 0x4520, 0xb490, 0xc4b1, 0xae9d, 0x0, 0x0);
        gbc.writeMem(0x7fb3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5f);
        EXPECT(gbc.pc(), 0x7fb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0233
        gbc.setState(0xd9fa, 0xf03e, 0x6e00, 0x773c, 0x6dc0, 0x65d4, 0x1, 0x1);
        gbc.writeMem(0xd9fa, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf03e);
        EXPECT(gbc.pc(), 0xd9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9fa), 0x3);
        // 03 0234
        gbc.setState(0x9e2f, 0x2acd, 0x7c30, 0x7c46, 0x9a33, 0x15a3, 0x1, 0x1);
        gbc.writeMem(0x9e2f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2acd);
        EXPECT(gbc.pc(), 0x9e30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e2f), 0x3);
        // 03 0235
        gbc.setState(0x6305, 0xbe3, 0xd810, 0xc4d3, 0x7f8c, 0x162e, 0x0, 0x1);
        gbc.writeMem(0x6305, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbe3);
        EXPECT(gbc.pc(), 0x6306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0236
        gbc.setState(0x515a, 0xd55a, 0x4060, 0xd208, 0x2d65, 0xaad5, 0x1, 0x1);
        gbc.writeMem(0x515a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xd55a);
        EXPECT(gbc.pc(), 0x515b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0237
        gbc.setState(0xe404, 0x720a, 0xf1d0, 0x72de, 0x2c3, 0xa274, 0x0, 0x0);
        gbc.writeMem(0xe404, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x720a);
        EXPECT(gbc.pc(), 0xe405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe404), 0x3);
        // 03 0238
        gbc.setState(0xa76f, 0x7a09, 0x2ba0, 0xa433, 0x6b82, 0x4d45, 0x1, 0x0);
        gbc.writeMem(0xa76f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7a09);
        EXPECT(gbc.pc(), 0xa770);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa76f), 0x3);
        // 03 0239
        gbc.setState(0x8e1b, 0xb3ef, 0x3fa0, 0xce60, 0xcc, 0x2528, 0x0, 0x1);
        gbc.writeMem(0x8e1b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb3ef);
        EXPECT(gbc.pc(), 0x8e1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e1b), 0x3);
        // 03 023A
        gbc.setState(0x36ad, 0x5862, 0x8710, 0x7c66, 0x4b1a, 0xf32f, 0x0, 0x0);
        gbc.writeMem(0x36ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x5862);
        EXPECT(gbc.pc(), 0x36ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 023B
        gbc.setState(0x4fb8, 0x2031, 0x4b40, 0xe539, 0x2daa, 0xddbb, 0x0, 0x0);
        gbc.writeMem(0x4fb8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2031);
        EXPECT(gbc.pc(), 0x4fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 023C
        gbc.setState(0x27eb, 0x2f14, 0xd250, 0x1dc0, 0x75b2, 0xd15d, 0x1, 0x1);
        gbc.writeMem(0x27eb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x2f14);
        EXPECT(gbc.pc(), 0x27ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 023D
        gbc.setState(0x591b, 0x8337, 0x5c30, 0x8b56, 0xd883, 0xeb8c, 0x1, 0x0);
        gbc.writeMem(0x591b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8337);
        EXPECT(gbc.pc(), 0x591c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 023E
        gbc.setState(0x9f9e, 0x6436, 0x59d0, 0xfbaa, 0x5ade, 0x810b, 0x0, 0x0);
        gbc.writeMem(0x9f9e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x6436);
        EXPECT(gbc.pc(), 0x9f9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f9e), 0x3);
        // 03 023F
        gbc.setState(0x7a6b, 0xe6fa, 0xa870, 0xbe92, 0x1854, 0x99a2, 0x1, 0x0);
        gbc.writeMem(0x7a6b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xe6fa);
        EXPECT(gbc.pc(), 0x7a6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0240
        gbc.setState(0xb5c9, 0xb186, 0xce0, 0x5da0, 0xca63, 0x6d85, 0x0, 0x1);
        gbc.writeMem(0xb5c9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xb186);
        EXPECT(gbc.pc(), 0xb5ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5c9), 0x3);
        // 03 0241
        gbc.setState(0x5fd1, 0xff5c, 0x920, 0x3700, 0x46a9, 0x21a0, 0x0, 0x0);
        gbc.writeMem(0x5fd1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xff5c);
        EXPECT(gbc.pc(), 0x5fd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0242
        gbc.setState(0x2a3b, 0x39b, 0x6580, 0x5daf, 0x55eb, 0xdcc4, 0x1, 0x1);
        gbc.writeMem(0x2a3b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x39b);
        EXPECT(gbc.pc(), 0x2a3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0243
        gbc.setState(0x5fce, 0x55ce, 0x5330, 0x3ff9, 0xf46e, 0xfe24, 0x1, 0x0);
        gbc.writeMem(0x5fce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x55ce);
        EXPECT(gbc.pc(), 0x5fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0244
        gbc.setState(0x359, 0xaf69, 0x83c0, 0x5fdd, 0xb0be, 0x5b6a, 0x1, 0x1);
        gbc.writeMem(0x359, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaf69);
        EXPECT(gbc.pc(), 0x35a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0245
        gbc.setState(0x744d, 0xe634, 0x8d80, 0x1228, 0x2d83, 0xeb5f, 0x0, 0x1);
        gbc.writeMem(0x744d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe634);
        EXPECT(gbc.pc(), 0x744e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0246
        gbc.setState(0x8e31, 0x7aab, 0x2550, 0x2bd9, 0xe950, 0xaa1, 0x0, 0x1);
        gbc.writeMem(0x8e31, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x7aab);
        EXPECT(gbc.pc(), 0x8e32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e31), 0x3);
        // 03 0248
        gbc.setState(0x3c03, 0xb66e, 0x47b0, 0x3632, 0xb14f, 0x11c8, 0x1, 0x0);
        gbc.writeMem(0x3c03, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xb66e);
        EXPECT(gbc.pc(), 0x3c04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0249
        gbc.setState(0xa79a, 0x1718, 0x380, 0x6a28, 0x41ae, 0x7e29, 0x0, 0x1);
        gbc.writeMem(0xa79a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1718);
        EXPECT(gbc.pc(), 0xa79b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa79a), 0x3);
        // 03 024A
        gbc.setState(0x4888, 0x84cf, 0x5c10, 0xabab, 0x91b8, 0xe5d5, 0x1, 0x1);
        gbc.writeMem(0x4888, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x84cf);
        EXPECT(gbc.pc(), 0x4889);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 024C
        gbc.setState(0xd6fd, 0xa06c, 0x11e0, 0x5e33, 0xfabd, 0x8edc, 0x1, 0x1);
        gbc.writeMem(0xd6fd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa06c);
        EXPECT(gbc.pc(), 0xd6fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6fd), 0x3);
        // 03 024D
        gbc.setState(0x76ce, 0xe9a1, 0x49b0, 0xfaf7, 0xb35, 0xe0f6, 0x1, 0x0);
        gbc.writeMem(0x76ce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe9a1);
        EXPECT(gbc.pc(), 0x76cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 024E
        gbc.setState(0xa2ae, 0x1911, 0x750, 0xd87a, 0xdad4, 0x286, 0x0, 0x1);
        gbc.writeMem(0xa2ae, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1911);
        EXPECT(gbc.pc(), 0xa2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2ae), 0x3);
        // 03 024F
        gbc.setState(0x4852, 0x86a0, 0x3c70, 0x8792, 0x1960, 0x85ef, 0x1, 0x1);
        gbc.writeMem(0x4852, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x86a0);
        EXPECT(gbc.pc(), 0x4853);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0250
        gbc.setState(0x7bd7, 0x2b41, 0x1800, 0xd310, 0xbc6f, 0x62ef, 0x0, 0x1);
        gbc.writeMem(0x7bd7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2b41);
        EXPECT(gbc.pc(), 0x7bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0251
        gbc.setState(0xc93a, 0x45a8, 0xfbc0, 0xa8b8, 0x4c5a, 0x85be, 0x1, 0x1);
        gbc.writeMem(0xc93a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x45a8);
        EXPECT(gbc.pc(), 0xc93b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc93a), 0x3);
        // 03 0252
        gbc.setState(0x873f, 0xb21e, 0xd30, 0xdda7, 0x6a6f, 0xba12, 0x1, 0x0);
        gbc.writeMem(0x873f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xb21e);
        EXPECT(gbc.pc(), 0x8740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x873f), 0x3);
        // 03 0253
        gbc.setState(0x3db3, 0x6ee7, 0x12e0, 0x2d26, 0xfd57, 0x4c7, 0x0, 0x1);
        gbc.writeMem(0x3db3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x6ee7);
        EXPECT(gbc.pc(), 0x3db4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0255
        gbc.setState(0x374a, 0xea9c, 0xb10, 0x3f4d, 0xa619, 0x9f21, 0x0, 0x0);
        gbc.writeMem(0x374a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xea9c);
        EXPECT(gbc.pc(), 0x374b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0256
        gbc.setState(0x84e, 0xe9d6, 0xeea0, 0x416b, 0x66b3, 0x78f4, 0x0, 0x1);
        gbc.writeMem(0x84e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe9d6);
        EXPECT(gbc.pc(), 0x84f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0257
        gbc.setState(0x9cce, 0xc20f, 0xe9c0, 0x4617, 0xb1a3, 0x1ec0, 0x0, 0x0);
        gbc.writeMem(0x9cce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xc20f);
        EXPECT(gbc.pc(), 0x9ccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cce), 0x3);
        // 03 0258
        gbc.setState(0x4b86, 0xc97b, 0x3710, 0x7394, 0x3f70, 0xafb, 0x0, 0x1);
        gbc.writeMem(0x4b86, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc97b);
        EXPECT(gbc.pc(), 0x4b87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0259
        gbc.setState(0x6209, 0x3e77, 0x80e0, 0x1103, 0x7ada, 0x573b, 0x0, 0x1);
        gbc.writeMem(0x6209, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3e77);
        EXPECT(gbc.pc(), 0x620a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 025B
        gbc.setState(0xe8fc, 0x2f, 0x2000, 0x1b1c, 0x570a, 0x5fef, 0x0, 0x1);
        gbc.writeMem(0xe8fc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2f);
        EXPECT(gbc.pc(), 0xe8fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8fc), 0x3);
        // 03 025C
        gbc.setState(0xecba, 0x55ac, 0x7270, 0x99ed, 0xf8b9, 0xcf1a, 0x1, 0x1);
        gbc.writeMem(0xecba, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x55ac);
        EXPECT(gbc.pc(), 0xecbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecba), 0x3);
        // 03 025D
        gbc.setState(0xe998, 0xb0c9, 0x9510, 0x5dd1, 0x48bb, 0x71ef, 0x0, 0x0);
        gbc.writeMem(0xe998, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb0c9);
        EXPECT(gbc.pc(), 0xe999);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe998), 0x3);
        // 03 025E
        gbc.setState(0x4e, 0x48a9, 0x7c60, 0x7aa0, 0xcf96, 0xe7a7, 0x0, 0x0);
        gbc.writeMem(0x4e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x48a9);
        EXPECT(gbc.pc(), 0x4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 025F
        gbc.setState(0xba33, 0xd18f, 0x3340, 0x1936, 0x5c4c, 0x5a4c, 0x0, 0x1);
        gbc.writeMem(0xba33, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xd18f);
        EXPECT(gbc.pc(), 0xba34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba33), 0x3);
        // 03 0260
        gbc.setState(0x4c1f, 0x57e6, 0x1b10, 0x4492, 0x8274, 0x1fbc, 0x1, 0x0);
        gbc.writeMem(0x4c1f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x57e6);
        EXPECT(gbc.pc(), 0x4c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0261
        gbc.setState(0x7870, 0xb200, 0x2490, 0x4a26, 0x94de, 0xe18c, 0x0, 0x0);
        gbc.writeMem(0x7870, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xb200);
        EXPECT(gbc.pc(), 0x7871);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0262
        gbc.setState(0x19fc, 0x70, 0xfa50, 0x2b58, 0x94dd, 0x64ea, 0x1, 0x0);
        gbc.writeMem(0x19fc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x70);
        EXPECT(gbc.pc(), 0x19fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0263
        gbc.setState(0x7a5e, 0x5b94, 0x56d0, 0x1e0d, 0xc924, 0xedc, 0x1, 0x1);
        gbc.writeMem(0x7a5e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5b94);
        EXPECT(gbc.pc(), 0x7a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0264
        gbc.setState(0x721c, 0xce7, 0x9250, 0x43ee, 0x15a7, 0x1899, 0x1, 0x0);
        gbc.writeMem(0x721c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xce7);
        EXPECT(gbc.pc(), 0x721d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0265
        gbc.setState(0x7c9d, 0xaa0a, 0x64c0, 0x326b, 0xeb28, 0xe265, 0x0, 0x0);
        gbc.writeMem(0x7c9d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xaa0a);
        EXPECT(gbc.pc(), 0x7c9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0266
        gbc.setState(0xe70f, 0xf08d, 0xa090, 0x476e, 0xdff1, 0x273a, 0x1, 0x0);
        gbc.writeMem(0xe70f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf08d);
        EXPECT(gbc.pc(), 0xe710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe70f), 0x3);
        // 03 0267
        gbc.setState(0xc8fe, 0x648b, 0xb7a0, 0x8002, 0xf8db, 0x11c8, 0x1, 0x1);
        gbc.writeMem(0xc8fe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x648b);
        EXPECT(gbc.pc(), 0xc8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8fe), 0x3);
        // 03 0268
        gbc.setState(0xd97b, 0xef31, 0x8660, 0xfd0d, 0x19ba, 0x446a, 0x1, 0x1);
        gbc.writeMem(0xd97b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xef31);
        EXPECT(gbc.pc(), 0xd97c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97b), 0x3);
        // 03 0269
        gbc.setState(0xd213, 0xf807, 0x2e70, 0xaa4f, 0xb234, 0xa2a0, 0x1, 0x1);
        gbc.writeMem(0xd213, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf807);
        EXPECT(gbc.pc(), 0xd214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd213), 0x3);
        // 03 026A
        gbc.setState(0x3707, 0x28f5, 0xb7a0, 0xd238, 0x4960, 0xbef9, 0x0, 0x1);
        gbc.writeMem(0x3707, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x28f5);
        EXPECT(gbc.pc(), 0x3708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 026B
        gbc.setState(0x31ae, 0x3973, 0xcf40, 0x8c19, 0xa134, 0x7efb, 0x0, 0x1);
        gbc.writeMem(0x31ae, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3973);
        EXPECT(gbc.pc(), 0x31af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 026C
        gbc.setState(0x1cd6, 0x882f, 0xccf0, 0xacae, 0x33dc, 0xdf1b, 0x0, 0x1);
        gbc.writeMem(0x1cd6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x882f);
        EXPECT(gbc.pc(), 0x1cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 026D
        gbc.setState(0xe40f, 0x2ce6, 0xaea0, 0xbef5, 0xdda0, 0x3fb4, 0x1, 0x1);
        gbc.writeMem(0xe40f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x2ce6);
        EXPECT(gbc.pc(), 0xe410);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe40f), 0x3);
        // 03 026E
        gbc.setState(0xaf1e, 0x5ea1, 0x140, 0x4415, 0xcfb4, 0x70ae, 0x1, 0x0);
        gbc.writeMem(0xaf1e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x5ea1);
        EXPECT(gbc.pc(), 0xaf1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf1e), 0x3);
        // 03 026F
        gbc.setState(0xb134, 0x3368, 0x6dd0, 0x830f, 0xa046, 0x3c00, 0x1, 0x1);
        gbc.writeMem(0xb134, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x3368);
        EXPECT(gbc.pc(), 0xb135);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb134), 0x3);
        // 03 0270
        gbc.setState(0xc1dc, 0x33ca, 0x8c50, 0x8e19, 0x759a, 0xe588, 0x0, 0x1);
        gbc.writeMem(0xc1dc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x33ca);
        EXPECT(gbc.pc(), 0xc1dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1dc), 0x3);
        // 03 0271
        gbc.setState(0xe0e, 0xf92a, 0xa410, 0xe75d, 0x53d, 0xfdc9, 0x0, 0x1);
        gbc.writeMem(0xe0e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xf92a);
        EXPECT(gbc.pc(), 0xe0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0272
        gbc.setState(0x8e24, 0x5f73, 0x83d0, 0xe3b2, 0x9b2a, 0x3ca3, 0x0, 0x0);
        gbc.writeMem(0x8e24, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5f73);
        EXPECT(gbc.pc(), 0x8e25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e24), 0x3);
        // 03 0273
        gbc.setState(0x5a11, 0x4334, 0x5660, 0xe3bf, 0x4d71, 0xa4b8, 0x1, 0x1);
        gbc.writeMem(0x5a11, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x4334);
        EXPECT(gbc.pc(), 0x5a12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0275
        gbc.setState(0xe20b, 0x1b5b, 0x99b0, 0x3b6c, 0x2b90, 0xd014, 0x1, 0x0);
        gbc.writeMem(0xe20b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1b5b);
        EXPECT(gbc.pc(), 0xe20c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe20b), 0x3);
        // 03 0276
        gbc.setState(0x48e8, 0x44a9, 0x1010, 0x4d62, 0x4035, 0x9360, 0x0, 0x0);
        gbc.writeMem(0x48e8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x44a9);
        EXPECT(gbc.pc(), 0x48e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0277
        gbc.setState(0x7b1d, 0xddea, 0x97f0, 0x238c, 0xe46c, 0x19f8, 0x1, 0x0);
        gbc.writeMem(0x7b1d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xddea);
        EXPECT(gbc.pc(), 0x7b1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0278
        gbc.setState(0xacc9, 0x5f7d, 0x4520, 0x62b6, 0x8e48, 0x56bb, 0x0, 0x1);
        gbc.writeMem(0xacc9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5f7d);
        EXPECT(gbc.pc(), 0xacca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xacc9), 0x3);
        // 03 0279
        gbc.setState(0xd407, 0x5b67, 0x7dc0, 0xeec3, 0x344, 0x8f2c, 0x0, 0x1);
        gbc.writeMem(0xd407, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5b67);
        EXPECT(gbc.pc(), 0xd408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd407), 0x3);
        // 03 027B
        gbc.setState(0x238, 0xda2, 0xddb0, 0xbdc9, 0x3dac, 0x6b28, 0x0, 0x0);
        gbc.writeMem(0x238, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xda2);
        EXPECT(gbc.pc(), 0x239);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 027C
        gbc.setState(0x98d5, 0xc454, 0xc9e0, 0x305b, 0xbba7, 0x5225, 0x1, 0x1);
        gbc.writeMem(0x98d5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xc454);
        EXPECT(gbc.pc(), 0x98d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98d5), 0x3);
        // 03 027D
        gbc.setState(0x5be7, 0xe307, 0xcab0, 0xd028, 0xf396, 0x5aaa, 0x1, 0x0);
        gbc.writeMem(0x5be7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe307);
        EXPECT(gbc.pc(), 0x5be8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 027E
        gbc.setState(0x3941, 0x6938, 0x5010, 0xae2c, 0xff1, 0xb3e4, 0x1, 0x1);
        gbc.writeMem(0x3941, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6938);
        EXPECT(gbc.pc(), 0x3942);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 027F
        gbc.setState(0xf1e, 0x1c2d, 0x7010, 0x9a35, 0x8a5c, 0x9254, 0x0, 0x1);
        gbc.writeMem(0xf1e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1c2d);
        EXPECT(gbc.pc(), 0xf1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0280
        gbc.setState(0x9b6a, 0xe9ef, 0x6950, 0xc9e4, 0x5531, 0xb387, 0x0, 0x1);
        gbc.writeMem(0x9b6a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xe9ef);
        EXPECT(gbc.pc(), 0x9b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b6a), 0x3);
        // 03 0281
        gbc.setState(0xcc4e, 0xdddc, 0xf970, 0x3494, 0xe8b7, 0x6b7c, 0x1, 0x0);
        gbc.writeMem(0xcc4e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xdddc);
        EXPECT(gbc.pc(), 0xcc4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc4e), 0x3);
        // 03 0282
        gbc.setState(0xc5d, 0x3625, 0x43c0, 0xc0a6, 0xe45d, 0x850b, 0x0, 0x0);
        gbc.writeMem(0xc5d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3625);
        EXPECT(gbc.pc(), 0xc5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0283
        gbc.setState(0xe1db, 0x6e35, 0x7cd0, 0xe426, 0xe110, 0xfc87, 0x0, 0x0);
        gbc.writeMem(0xe1db, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6e35);
        EXPECT(gbc.pc(), 0xe1dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1db), 0x3);
        // 03 0284
        gbc.setState(0xde39, 0x53f0, 0x7a10, 0x78e9, 0x19f6, 0xa490, 0x0, 0x0);
        gbc.writeMem(0xde39, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x53f0);
        EXPECT(gbc.pc(), 0xde3a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde39), 0x3);
        // 03 0285
        gbc.setState(0x98b3, 0x674d, 0x9b90, 0x659d, 0x1ecc, 0x2475, 0x1, 0x1);
        gbc.writeMem(0x98b3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x674d);
        EXPECT(gbc.pc(), 0x98b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98b3), 0x3);
        // 03 0286
        gbc.setState(0x188e, 0xdb83, 0xdca0, 0xf94, 0x2e3e, 0xccef, 0x1, 0x1);
        gbc.writeMem(0x188e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xdb83);
        EXPECT(gbc.pc(), 0x188f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0287
        gbc.setState(0x9df6, 0xb1f1, 0x2d70, 0x4ced, 0xcc14, 0x65e, 0x0, 0x1);
        gbc.writeMem(0x9df6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xb1f1);
        EXPECT(gbc.pc(), 0x9df7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9df6), 0x3);
        // 03 0288
        gbc.setState(0x86c0, 0x6df0, 0x7a90, 0xb709, 0xf636, 0xb42e, 0x0, 0x0);
        gbc.writeMem(0x86c0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6df0);
        EXPECT(gbc.pc(), 0x86c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86c0), 0x3);
        // 03 0289
        gbc.setState(0xd077, 0xa4ec, 0x8610, 0xfeb7, 0xa946, 0x4d6f, 0x0, 0x1);
        gbc.writeMem(0xd077, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa4ec);
        EXPECT(gbc.pc(), 0xd078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd077), 0x3);
        // 03 028A
        gbc.setState(0x8cd5, 0xe6c9, 0x5430, 0xc67f, 0x5bf2, 0x97ae, 0x1, 0x0);
        gbc.writeMem(0x8cd5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe6c9);
        EXPECT(gbc.pc(), 0x8cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cd5), 0x3);
        // 03 028B
        gbc.setState(0xc369, 0x1676, 0x3ba0, 0xbadc, 0xd81, 0x6e1d, 0x1, 0x0);
        gbc.writeMem(0xc369, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1676);
        EXPECT(gbc.pc(), 0xc36a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc369), 0x3);
        // 03 028C
        gbc.setState(0xc7f4, 0x47fe, 0x3680, 0xa8b, 0xecf0, 0x2514, 0x1, 0x1);
        gbc.writeMem(0xc7f4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x47fe);
        EXPECT(gbc.pc(), 0xc7f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7f4), 0x3);
        // 03 028D
        gbc.setState(0x1c18, 0x6cf2, 0x7b00, 0x2bc0, 0x2627, 0x4542, 0x0, 0x0);
        gbc.writeMem(0x1c18, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x6cf2);
        EXPECT(gbc.pc(), 0x1c19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 028E
        gbc.setState(0x3365, 0x520a, 0xa400, 0x8aa9, 0xe39b, 0x9c35, 0x1, 0x1);
        gbc.writeMem(0x3365, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x520a);
        EXPECT(gbc.pc(), 0x3366);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 028F
        gbc.setState(0xc9b5, 0xe0ed, 0xddf0, 0xfacf, 0x5a99, 0xa6cf, 0x1, 0x1);
        gbc.writeMem(0xc9b5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xe0ed);
        EXPECT(gbc.pc(), 0xc9b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b5), 0x3);
        // 03 0290
        gbc.setState(0x1262, 0xa84b, 0x9ac0, 0xfa64, 0x6253, 0xa25b, 0x1, 0x1);
        gbc.writeMem(0x1262, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xa84b);
        EXPECT(gbc.pc(), 0x1263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0291
        gbc.setState(0x89b8, 0xde22, 0xbb00, 0xb9d2, 0x30d7, 0x488, 0x1, 0x0);
        gbc.writeMem(0x89b8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xde22);
        EXPECT(gbc.pc(), 0x89b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89b8), 0x3);
        // 03 0292
        gbc.setState(0x76de, 0x7b20, 0xa260, 0xe60e, 0x820e, 0xb1a9, 0x1, 0x0);
        gbc.writeMem(0x76de, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7b20);
        EXPECT(gbc.pc(), 0x76df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0294
        gbc.setState(0x8ed7, 0xbacc, 0xa770, 0x15b0, 0x42bf, 0xbd58, 0x0, 0x1);
        gbc.writeMem(0x8ed7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbacc);
        EXPECT(gbc.pc(), 0x8ed8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ed7), 0x3);
        // 03 0295
        gbc.setState(0xb2ed, 0xb17d, 0xa0c0, 0xbda9, 0x4fd, 0xdf34, 0x0, 0x1);
        gbc.writeMem(0xb2ed, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb17d);
        EXPECT(gbc.pc(), 0xb2ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2ed), 0x3);
        // 03 0296
        gbc.setState(0x2208, 0x501d, 0x4780, 0x389, 0xb375, 0xaf7a, 0x1, 0x1);
        gbc.writeMem(0x2208, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x501d);
        EXPECT(gbc.pc(), 0x2209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0297
        gbc.setState(0xc90d, 0x32e0, 0xff10, 0xc238, 0x1534, 0x3915, 0x1, 0x0);
        gbc.writeMem(0xc90d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x32e0);
        EXPECT(gbc.pc(), 0xc90e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc90d), 0x3);
        // 03 0298
        gbc.setState(0xa3d1, 0xaa46, 0x8e10, 0xbc55, 0xc37d, 0x9f06, 0x0, 0x0);
        gbc.writeMem(0xa3d1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xaa46);
        EXPECT(gbc.pc(), 0xa3d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3d1), 0x3);
        // 03 0299
        gbc.setState(0xda93, 0x9a83, 0xbed0, 0x6e53, 0x84e4, 0x7b97, 0x0, 0x0);
        gbc.writeMem(0xda93, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9a83);
        EXPECT(gbc.pc(), 0xda94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda93), 0x3);
        // 03 029A
        gbc.setState(0x2b5b, 0xed63, 0xe620, 0x6b2, 0x1eb5, 0xa637, 0x0, 0x0);
        gbc.writeMem(0x2b5b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xed63);
        EXPECT(gbc.pc(), 0x2b5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 029B
        gbc.setState(0xcfb1, 0x5f75, 0xd260, 0x9ed6, 0x8d22, 0xe72, 0x0, 0x1);
        gbc.writeMem(0xcfb1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5f75);
        EXPECT(gbc.pc(), 0xcfb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfb1), 0x3);
        // 03 029C
        gbc.setState(0x4d5e, 0x5285, 0x8bd0, 0x49fc, 0x77d5, 0x6d9a, 0x1, 0x1);
        gbc.writeMem(0x4d5e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5285);
        EXPECT(gbc.pc(), 0x4d5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 029D
        gbc.setState(0x1866, 0x5144, 0x2680, 0x4200, 0x57d3, 0x2082, 0x1, 0x0);
        gbc.writeMem(0x1866, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5144);
        EXPECT(gbc.pc(), 0x1867);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 029E
        gbc.setState(0x68f2, 0x5670, 0x70, 0xf5a7, 0xb7e, 0x3cfe, 0x0, 0x1);
        gbc.writeMem(0x68f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x5670);
        EXPECT(gbc.pc(), 0x68f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 029F
        gbc.setState(0x450a, 0xc387, 0xc330, 0xcd05, 0x8dc6, 0xc615, 0x0, 0x0);
        gbc.writeMem(0x450a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc387);
        EXPECT(gbc.pc(), 0x450b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02A1
        gbc.setState(0xba7, 0xbdaf, 0x78e0, 0x262b, 0x90, 0x36a0, 0x1, 0x0);
        gbc.writeMem(0xba7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xbdaf);
        EXPECT(gbc.pc(), 0xba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02A2
        gbc.setState(0x4914, 0x7f52, 0xe7e0, 0x6ee6, 0xc3c, 0x28e, 0x1, 0x0);
        gbc.writeMem(0x4914, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7f52);
        EXPECT(gbc.pc(), 0x4915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02A3
        gbc.setState(0x2986, 0xa070, 0xc280, 0x9300, 0x211e, 0x29fb, 0x1, 0x0);
        gbc.writeMem(0x2986, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xa070);
        EXPECT(gbc.pc(), 0x2987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 02A4
        gbc.setState(0x37c, 0x3489, 0xe1e0, 0x43ce, 0xe9bb, 0xec83, 0x0, 0x0);
        gbc.writeMem(0x37c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3489);
        EXPECT(gbc.pc(), 0x37d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02A5
        gbc.setState(0xbe84, 0xa886, 0x5b10, 0x9007, 0xf594, 0x88bb, 0x0, 0x1);
        gbc.writeMem(0xbe84, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa886);
        EXPECT(gbc.pc(), 0xbe85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe84), 0x3);
        // 03 02A6
        gbc.setState(0x5b74, 0xacef, 0x45c0, 0x1a2c, 0x888c, 0x63, 0x0, 0x1);
        gbc.writeMem(0x5b74, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xacef);
        EXPECT(gbc.pc(), 0x5b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 02A7
        gbc.setState(0xb451, 0xf933, 0xabd0, 0x7ef0, 0x365, 0xe4e8, 0x0, 0x1);
        gbc.writeMem(0xb451, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf933);
        EXPECT(gbc.pc(), 0xb452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb451), 0x3);
        // 03 02A8
        gbc.setState(0x50b1, 0xfce2, 0x8f70, 0x7527, 0xe89, 0xcf6e, 0x1, 0x1);
        gbc.writeMem(0x50b1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfce2);
        EXPECT(gbc.pc(), 0x50b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02A9
        gbc.setState(0xdf62, 0xd95c, 0xcf70, 0xac2b, 0x5fd1, 0xabec, 0x0, 0x0);
        gbc.writeMem(0xdf62, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd95c);
        EXPECT(gbc.pc(), 0xdf63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf62), 0x3);
        // 03 02AA
        gbc.setState(0xec52, 0x437f, 0x3970, 0xafd0, 0x8a52, 0x5f88, 0x1, 0x0);
        gbc.writeMem(0xec52, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x437f);
        EXPECT(gbc.pc(), 0xec53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec52), 0x3);
        // 03 02AB
        gbc.setState(0x91e5, 0xef96, 0xe40, 0xa642, 0x5d68, 0x192b, 0x0, 0x0);
        gbc.writeMem(0x91e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xef96);
        EXPECT(gbc.pc(), 0x91e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e5), 0x3);
        // 03 02AC
        gbc.setState(0xdf9b, 0xdfc, 0xd9a0, 0xa39f, 0x802b, 0xaeec, 0x1, 0x0);
        gbc.writeMem(0xdf9b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xdfc);
        EXPECT(gbc.pc(), 0xdf9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf9b), 0x3);
        // 03 02AD
        gbc.setState(0x26ba, 0x2240, 0xe580, 0xcd2e, 0xfe6c, 0x8306, 0x1, 0x0);
        gbc.writeMem(0x26ba, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x2240);
        EXPECT(gbc.pc(), 0x26bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 02AF
        gbc.setState(0x6c96, 0x7328, 0x5da0, 0x49bc, 0x1d6b, 0xbe16, 0x1, 0x0);
        gbc.writeMem(0x6c96, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7328);
        EXPECT(gbc.pc(), 0x6c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02B0
        gbc.setState(0x8164, 0xeee9, 0xee50, 0x883e, 0xfea5, 0x39ae, 0x1, 0x0);
        gbc.writeMem(0x8164, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xeee9);
        EXPECT(gbc.pc(), 0x8165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8164), 0x3);
        // 03 02B1
        gbc.setState(0x58a0, 0x6cb9, 0x6ce0, 0x5b9f, 0x46f6, 0xe57d, 0x0, 0x1);
        gbc.writeMem(0x58a0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6cb9);
        EXPECT(gbc.pc(), 0x58a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02B2
        gbc.setState(0x6527, 0xc2e9, 0xb160, 0xf617, 0x9d72, 0xc107, 0x0, 0x1);
        gbc.writeMem(0x6527, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc2e9);
        EXPECT(gbc.pc(), 0x6528);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02B3
        gbc.setState(0xa76, 0x28a7, 0x4b30, 0x87e5, 0xd3bd, 0x7873, 0x1, 0x1);
        gbc.writeMem(0xa76, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x28a7);
        EXPECT(gbc.pc(), 0xa77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02B4
        gbc.setState(0x7835, 0x64c8, 0xfba0, 0xedc9, 0x4cbd, 0x3910, 0x1, 0x1);
        gbc.writeMem(0x7835, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x64c8);
        EXPECT(gbc.pc(), 0x7836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02B5
        gbc.setState(0x906d, 0x3afe, 0x4540, 0x44aa, 0xef35, 0xde03, 0x0, 0x0);
        gbc.writeMem(0x906d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x3afe);
        EXPECT(gbc.pc(), 0x906e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x906d), 0x3);
        // 03 02B6
        gbc.setState(0xd4b7, 0x682f, 0x8ca0, 0x70b2, 0x9bcf, 0x3e3b, 0x1, 0x1);
        gbc.writeMem(0xd4b7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x682f);
        EXPECT(gbc.pc(), 0xd4b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b7), 0x3);
        // 03 02B7
        gbc.setState(0xef99, 0xd6e9, 0xc6a0, 0xc592, 0x722d, 0xa162, 0x1, 0x1);
        gbc.writeMem(0xef99, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xd6e9);
        EXPECT(gbc.pc(), 0xef9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef99), 0x3);
        // 03 02B8
        gbc.setState(0xe2e2, 0x1fc9, 0xbfa0, 0xf844, 0x17f1, 0x35e8, 0x1, 0x1);
        gbc.writeMem(0xe2e2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1fc9);
        EXPECT(gbc.pc(), 0xe2e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e2), 0x3);
        // 03 02B9
        gbc.setState(0x4ea5, 0xd06e, 0x5b80, 0x38c2, 0x54be, 0xceb1, 0x1, 0x1);
        gbc.writeMem(0x4ea5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd06e);
        EXPECT(gbc.pc(), 0x4ea6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 02BA
        gbc.setState(0xa88b, 0x96b1, 0x4f80, 0x2b1, 0x5b4d, 0xe56e, 0x1, 0x0);
        gbc.writeMem(0xa88b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x96b1);
        EXPECT(gbc.pc(), 0xa88c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa88b), 0x3);
        // 03 02BC
        gbc.setState(0xd6b4, 0x92ac, 0x10a0, 0x769, 0xda15, 0x5f89, 0x0, 0x0);
        gbc.writeMem(0xd6b4, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x92ac);
        EXPECT(gbc.pc(), 0xd6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b4), 0x3);
        // 03 02BD
        gbc.setState(0x68e0, 0x9e9a, 0x33e0, 0xec4, 0x9b2a, 0x6552, 0x0, 0x1);
        gbc.writeMem(0x68e0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x9e9a);
        EXPECT(gbc.pc(), 0x68e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02BE
        gbc.setState(0x5dd1, 0xe156, 0xe960, 0x53c5, 0x77a5, 0x160, 0x0, 0x1);
        gbc.writeMem(0x5dd1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe156);
        EXPECT(gbc.pc(), 0x5dd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02BF
        gbc.setState(0xc3d1, 0x9558, 0x77f0, 0xe0f3, 0x3ec2, 0x9686, 0x0, 0x1);
        gbc.writeMem(0xc3d1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x9558);
        EXPECT(gbc.pc(), 0xc3d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d1), 0x3);
        // 03 02C0
        gbc.setState(0x88b0, 0x229a, 0xca00, 0xe243, 0xd644, 0x85c5, 0x0, 0x0);
        gbc.writeMem(0x88b0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x229a);
        EXPECT(gbc.pc(), 0x88b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88b0), 0x3);
        // 03 02C1
        gbc.setState(0xcdb1, 0xfe2, 0xe4a0, 0xb80c, 0x7dbe, 0xc51d, 0x1, 0x0);
        gbc.writeMem(0xcdb1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xfe2);
        EXPECT(gbc.pc(), 0xcdb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdb1), 0x3);
        // 03 02C2
        gbc.setState(0xcfd7, 0xd2c8, 0x99a0, 0x641e, 0x727e, 0xf8a4, 0x0, 0x1);
        gbc.writeMem(0xcfd7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd2c8);
        EXPECT(gbc.pc(), 0xcfd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfd7), 0x3);
        // 03 02C4
        gbc.setState(0xd4ec, 0xeae6, 0xa7b0, 0x974f, 0x96e6, 0xaf63, 0x1, 0x1);
        gbc.writeMem(0xd4ec, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xeae6);
        EXPECT(gbc.pc(), 0xd4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4ec), 0x3);
        // 03 02C5
        gbc.setState(0xdd69, 0x2bfc, 0x2b70, 0xca34, 0xadb1, 0xc590, 0x0, 0x0);
        gbc.writeMem(0xdd69, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2bfc);
        EXPECT(gbc.pc(), 0xdd6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd69), 0x3);
        // 03 02C6
        gbc.setState(0xa452, 0x30f3, 0x5c50, 0x9c1d, 0x4a2d, 0x8201, 0x1, 0x1);
        gbc.writeMem(0xa452, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x30f3);
        EXPECT(gbc.pc(), 0xa453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa452), 0x3);
        // 03 02C7
        gbc.setState(0x8c15, 0x23ff, 0x4900, 0x5236, 0x6c5e, 0x7754, 0x0, 0x1);
        gbc.writeMem(0x8c15, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x23ff);
        EXPECT(gbc.pc(), 0x8c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c15), 0x3);
        // 03 02C8
        gbc.setState(0xaafe, 0x8499, 0xa5b0, 0xb92e, 0x9f64, 0x4a3c, 0x0, 0x1);
        gbc.writeMem(0xaafe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8499);
        EXPECT(gbc.pc(), 0xaaff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaafe), 0x3);
        // 03 02CA
        gbc.setState(0x9be8, 0xbf00, 0x3c50, 0x64a6, 0x8d24, 0xe6c1, 0x1, 0x0);
        gbc.writeMem(0x9be8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xbf00);
        EXPECT(gbc.pc(), 0x9be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be8), 0x3);
        // 03 02CB
        gbc.setState(0xe046, 0x94d9, 0xcf30, 0x4a4, 0x2115, 0x759f, 0x1, 0x1);
        gbc.writeMem(0xe046, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x94d9);
        EXPECT(gbc.pc(), 0xe047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe046), 0x3);
        // 03 02CC
        gbc.setState(0x6dff, 0x6276, 0xcaa0, 0xf0a0, 0x2677, 0x2ff6, 0x1, 0x1);
        gbc.writeMem(0x6dff, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6276);
        EXPECT(gbc.pc(), 0x6e00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02CD
        gbc.setState(0xc222, 0x729a, 0xedb0, 0x1580, 0x3224, 0xf92c, 0x0, 0x1);
        gbc.writeMem(0xc222, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x729a);
        EXPECT(gbc.pc(), 0xc223);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc222), 0x3);
        // 03 02CE
        gbc.setState(0x1ffe, 0xba87, 0xb8d0, 0x345f, 0x4c0a, 0x2fd8, 0x1, 0x0);
        gbc.writeMem(0x1ffe, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xba87);
        EXPECT(gbc.pc(), 0x1fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02CF
        gbc.setState(0xb974, 0x7d9a, 0xa120, 0x2125, 0x2022, 0x6a7b, 0x1, 0x1);
        gbc.writeMem(0xb974, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x7d9a);
        EXPECT(gbc.pc(), 0xb975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb974), 0x3);
        // 03 02D0
        gbc.setState(0x5ea9, 0xa9ec, 0xa0d0, 0xc124, 0x800, 0xe575, 0x0, 0x1);
        gbc.writeMem(0x5ea9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa9ec);
        EXPECT(gbc.pc(), 0x5eaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02D1
        gbc.setState(0xc0f9, 0xd5f6, 0x3900, 0x3269, 0xfd9c, 0x6d20, 0x1, 0x1);
        gbc.writeMem(0xc0f9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xd5f6);
        EXPECT(gbc.pc(), 0xc0fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0f9), 0x3);
        // 03 02D2
        gbc.setState(0x3cf9, 0xf1f5, 0x6b20, 0xbf6a, 0x7b64, 0xddc3, 0x1, 0x0);
        gbc.writeMem(0x3cf9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf1f5);
        EXPECT(gbc.pc(), 0x3cfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02D3
        gbc.setState(0x557c, 0x8f10, 0x4550, 0x2e1d, 0x675f, 0xae60, 0x1, 0x0);
        gbc.writeMem(0x557c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8f10);
        EXPECT(gbc.pc(), 0x557d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02D4
        gbc.setState(0x95e5, 0xe323, 0x43e0, 0x9065, 0xbf5c, 0x6e0, 0x1, 0x1);
        gbc.writeMem(0x95e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe323);
        EXPECT(gbc.pc(), 0x95e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e5), 0x3);
        // 03 02D5
        gbc.setState(0x8a54, 0xd5cb, 0xc400, 0x8f06, 0xbe99, 0xc1cd, 0x1, 0x1);
        gbc.writeMem(0x8a54, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xd5cb);
        EXPECT(gbc.pc(), 0x8a55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a54), 0x3);
        // 03 02D6
        gbc.setState(0xe934, 0x4b3e, 0x9ed0, 0x9739, 0xc34a, 0x9f29, 0x0, 0x1);
        gbc.writeMem(0xe934, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4b3e);
        EXPECT(gbc.pc(), 0xe935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe934), 0x3);
        // 03 02D7
        gbc.setState(0x4ee9, 0x8c88, 0xf560, 0xd9df, 0x2f21, 0x6dbb, 0x1, 0x1);
        gbc.writeMem(0x4ee9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x8c88);
        EXPECT(gbc.pc(), 0x4eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02D8
        gbc.setState(0xc3c3, 0xdaa1, 0xb870, 0x695f, 0xa6e9, 0x4402, 0x0, 0x0);
        gbc.writeMem(0xc3c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xdaa1);
        EXPECT(gbc.pc(), 0xc3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3c3), 0x3);
        // 03 02D9
        gbc.setState(0xbea3, 0x3fdf, 0xb2e0, 0x2d6c, 0x9fe5, 0xa59b, 0x1, 0x1);
        gbc.writeMem(0xbea3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x3fdf);
        EXPECT(gbc.pc(), 0xbea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbea3), 0x3);
        // 03 02DB
        gbc.setState(0x36c3, 0x336f, 0xcc50, 0xa2b4, 0x1a69, 0x4b2a, 0x0, 0x1);
        gbc.writeMem(0x36c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x336f);
        EXPECT(gbc.pc(), 0x36c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02DC
        gbc.setState(0x56e, 0xa388, 0x93d0, 0xea49, 0x8f26, 0x11be, 0x0, 0x1);
        gbc.writeMem(0x56e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xa388);
        EXPECT(gbc.pc(), 0x56f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02DD
        gbc.setState(0xdbf6, 0x3428, 0x82f0, 0x202e, 0xc26, 0xab7e, 0x0, 0x0);
        gbc.writeMem(0xdbf6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x3428);
        EXPECT(gbc.pc(), 0xdbf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbf6), 0x3);
        // 03 02DE
        gbc.setState(0x9d48, 0x5c6e, 0x18a0, 0x8256, 0xd816, 0xfca1, 0x1, 0x0);
        gbc.writeMem(0x9d48, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5c6e);
        EXPECT(gbc.pc(), 0x9d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d48), 0x3);
        // 03 02DF
        gbc.setState(0x613e, 0x3f8d, 0xfd60, 0x5901, 0xac4c, 0x8949, 0x1, 0x1);
        gbc.writeMem(0x613e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3f8d);
        EXPECT(gbc.pc(), 0x613f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02E0
        gbc.setState(0x2a81, 0xa8a6, 0x3b50, 0xc639, 0x8e4e, 0x22eb, 0x1, 0x1);
        gbc.writeMem(0x2a81, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa8a6);
        EXPECT(gbc.pc(), 0x2a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02E1
        gbc.setState(0xe043, 0x5bd7, 0x6e70, 0xc04, 0xaf26, 0xdf98, 0x0, 0x0);
        gbc.writeMem(0xe043, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x5bd7);
        EXPECT(gbc.pc(), 0xe044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe043), 0x3);
        // 03 02E2
        gbc.setState(0xd5c8, 0x6425, 0xb170, 0xd0a1, 0xeb30, 0x1390, 0x0, 0x0);
        gbc.writeMem(0xd5c8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6425);
        EXPECT(gbc.pc(), 0xd5c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5c8), 0x3);
        // 03 02E3
        gbc.setState(0xb815, 0xa30c, 0x2c90, 0x7a0, 0x26b7, 0xfcab, 0x1, 0x1);
        gbc.writeMem(0xb815, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xa30c);
        EXPECT(gbc.pc(), 0xb816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb815), 0x3);
        // 03 02E4
        gbc.setState(0x7ec3, 0x13a0, 0xcd70, 0x2976, 0xe266, 0x4bd9, 0x1, 0x0);
        gbc.writeMem(0x7ec3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x13a0);
        EXPECT(gbc.pc(), 0x7ec4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02E5
        gbc.setState(0xe89b, 0x870c, 0xa820, 0x4074, 0xa3ed, 0xa938, 0x0, 0x1);
        gbc.writeMem(0xe89b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x870c);
        EXPECT(gbc.pc(), 0xe89c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe89b), 0x3);
        // 03 02E6
        gbc.setState(0xe7a1, 0x31b4, 0x2460, 0xe22e, 0x3ad5, 0x6bf1, 0x1, 0x1);
        gbc.writeMem(0xe7a1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x31b4);
        EXPECT(gbc.pc(), 0xe7a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a1), 0x3);
        // 03 02E8
        gbc.setState(0x402c, 0xef9c, 0x9670, 0x50d5, 0x8dd4, 0xff29, 0x0, 0x1);
        gbc.writeMem(0x402c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xef9c);
        EXPECT(gbc.pc(), 0x402d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02E9
        gbc.setState(0x4d7e, 0xaf9b, 0xa3a0, 0xbdc4, 0x4867, 0xd762, 0x0, 0x0);
        gbc.writeMem(0x4d7e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xaf9b);
        EXPECT(gbc.pc(), 0x4d7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02EA
        gbc.setState(0x8a53, 0x787, 0xe060, 0x54bd, 0x504, 0x2ad2, 0x0, 0x0);
        gbc.writeMem(0x8a53, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x787);
        EXPECT(gbc.pc(), 0x8a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a53), 0x3);
        // 03 02EB
        gbc.setState(0x1cda, 0x2b37, 0x5390, 0x8075, 0xf395, 0x20ef, 0x1, 0x0);
        gbc.writeMem(0x1cda, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x2b37);
        EXPECT(gbc.pc(), 0x1cdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02ED
        gbc.setState(0x1c5c, 0x3556, 0x1eb0, 0xfb7e, 0x424c, 0x9ec5, 0x0, 0x1);
        gbc.writeMem(0x1c5c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3556);
        EXPECT(gbc.pc(), 0x1c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02EE
        gbc.setState(0xe772, 0xb044, 0xd380, 0x3f96, 0x7c93, 0xdce1, 0x1, 0x1);
        gbc.writeMem(0xe772, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb044);
        EXPECT(gbc.pc(), 0xe773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe772), 0x3);
        // 03 02EF
        gbc.setState(0x17ff, 0x7a36, 0x1bd0, 0xff6d, 0xd7f4, 0x2c23, 0x1, 0x1);
        gbc.writeMem(0x17ff, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7a36);
        EXPECT(gbc.pc(), 0x1800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02F0
        gbc.setState(0x47d8, 0xfcba, 0x7e30, 0x8fac, 0xd350, 0x202c, 0x0, 0x0);
        gbc.writeMem(0x47d8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xfcba);
        EXPECT(gbc.pc(), 0x47d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02F1
        gbc.setState(0x61b, 0x615b, 0x4710, 0x314e, 0x849d, 0x94d1, 0x0, 0x0);
        gbc.writeMem(0x61b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x615b);
        EXPECT(gbc.pc(), 0x61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02F3
        gbc.setState(0x78f2, 0x69ba, 0xb500, 0xb1a, 0x5f7e, 0x9452, 0x0, 0x0);
        gbc.writeMem(0x78f2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x69ba);
        EXPECT(gbc.pc(), 0x78f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 02F4
        gbc.setState(0x3453, 0x7e84, 0x9420, 0xd0b1, 0x36c5, 0x3607, 0x0, 0x0);
        gbc.writeMem(0x3453, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7e84);
        EXPECT(gbc.pc(), 0x3454);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 02F5
        gbc.setState(0x9969, 0x8149, 0xa6c0, 0x4d0a, 0x8d6f, 0x663, 0x1, 0x1);
        gbc.writeMem(0x9969, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8149);
        EXPECT(gbc.pc(), 0x996a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9969), 0x3);
        // 03 02F6
        gbc.setState(0xdbc1, 0x6498, 0x9df0, 0x9efd, 0xf779, 0x22fa, 0x0, 0x1);
        gbc.writeMem(0xdbc1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x6498);
        EXPECT(gbc.pc(), 0xdbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbc1), 0x3);
        // 03 02F7
        gbc.setState(0x83c8, 0x4630, 0xfb30, 0xdc54, 0x6d68, 0x557e, 0x1, 0x1);
        gbc.writeMem(0x83c8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4630);
        EXPECT(gbc.pc(), 0x83c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83c8), 0x3);
        // 03 02F8
        gbc.setState(0x4d84, 0x9ee0, 0x3d90, 0x7328, 0x627e, 0x21f, 0x0, 0x0);
        gbc.writeMem(0x4d84, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9ee0);
        EXPECT(gbc.pc(), 0x4d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02F9
        gbc.setState(0x9a6b, 0x7264, 0xca70, 0x45da, 0x8e68, 0x3d80, 0x0, 0x0);
        gbc.writeMem(0x9a6b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7264);
        EXPECT(gbc.pc(), 0x9a6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a6b), 0x3);
        // 03 02FA
        gbc.setState(0x3ba9, 0x4595, 0xe4d0, 0x35e3, 0x6db8, 0x4f05, 0x0, 0x0);
        gbc.writeMem(0x3ba9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4595);
        EXPECT(gbc.pc(), 0x3baa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02FB
        gbc.setState(0x831, 0x2b8, 0x38b0, 0x8c06, 0x28f0, 0x670c, 0x0, 0x1);
        gbc.writeMem(0x831, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2b8);
        EXPECT(gbc.pc(), 0x832);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02FC
        gbc.setState(0xd14, 0xc66b, 0x9cf0, 0x8bbf, 0xd731, 0x5d7a, 0x0, 0x1);
        gbc.writeMem(0xd14, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc66b);
        EXPECT(gbc.pc(), 0xd15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 02FE
        gbc.setState(0x19a2, 0x9f1e, 0xe750, 0x9d92, 0xddae, 0xa43e, 0x1, 0x0);
        gbc.writeMem(0x19a2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9f1e);
        EXPECT(gbc.pc(), 0x19a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 02FF
        gbc.setState(0x35c2, 0x4125, 0x4660, 0xead6, 0xf06d, 0xdec2, 0x1, 0x0);
        gbc.writeMem(0x35c2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x4125);
        EXPECT(gbc.pc(), 0x35c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0300
        gbc.setState(0x36b9, 0xd9ee, 0x38f0, 0x90ab, 0x8a33, 0x8eac, 0x0, 0x0);
        gbc.writeMem(0x36b9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xd9ee);
        EXPECT(gbc.pc(), 0x36ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0301
        gbc.setState(0x4af2, 0x7d34, 0x13a0, 0x79a1, 0x87dd, 0x871f, 0x1, 0x0);
        gbc.writeMem(0x4af2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x7d34);
        EXPECT(gbc.pc(), 0x4af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0303
        gbc.setState(0xcb10, 0x3023, 0x1ce0, 0x6700, 0xf8, 0x6a91, 0x0, 0x0);
        gbc.writeMem(0xcb10, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x3023);
        EXPECT(gbc.pc(), 0xcb11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb10), 0x3);
        // 03 0304
        gbc.setState(0x3a67, 0x1d08, 0xe0d0, 0x62a6, 0x5378, 0x8f76, 0x0, 0x1);
        gbc.writeMem(0x3a67, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1d08);
        EXPECT(gbc.pc(), 0x3a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0305
        gbc.setState(0x8368, 0x7773, 0xcfe0, 0xad5e, 0x9e1b, 0x6222, 0x1, 0x1);
        gbc.writeMem(0x8368, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7773);
        EXPECT(gbc.pc(), 0x8369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8368), 0x3);
        // 03 0306
        gbc.setState(0xe50e, 0xc68d, 0x2f30, 0x7e76, 0x2549, 0xfef9, 0x0, 0x1);
        gbc.writeMem(0xe50e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xc68d);
        EXPECT(gbc.pc(), 0xe50f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe50e), 0x3);
        // 03 0307
        gbc.setState(0xb03d, 0xe41b, 0x2320, 0xad8c, 0xcb52, 0xe63e, 0x0, 0x1);
        gbc.writeMem(0xb03d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe41b);
        EXPECT(gbc.pc(), 0xb03e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03d), 0x3);
        // 03 0308
        gbc.setState(0x2797, 0x9371, 0x4230, 0x8bca, 0x35b3, 0xd642, 0x1, 0x0);
        gbc.writeMem(0x2797, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x9371);
        EXPECT(gbc.pc(), 0x2798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0309
        gbc.setState(0xbe47, 0x524d, 0xe830, 0x69fb, 0xe4a4, 0x9db5, 0x1, 0x1);
        gbc.writeMem(0xbe47, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x524d);
        EXPECT(gbc.pc(), 0xbe48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe47), 0x3);
        // 03 030A
        gbc.setState(0x7b14, 0x14c, 0x44e0, 0xc5c9, 0x5d79, 0xa1c1, 0x0, 0x0);
        gbc.writeMem(0x7b14, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x14c);
        EXPECT(gbc.pc(), 0x7b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 030B
        gbc.setState(0xec1e, 0x124a, 0xd690, 0xf62, 0xd8e7, 0x8b66, 0x0, 0x0);
        gbc.writeMem(0xec1e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x124a);
        EXPECT(gbc.pc(), 0xec1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1e), 0x3);
        // 03 030C
        gbc.setState(0x4108, 0x387e, 0x7ce0, 0xff8d, 0xe435, 0xdc03, 0x0, 0x0);
        gbc.writeMem(0x4108, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x387e);
        EXPECT(gbc.pc(), 0x4109);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 030D
        gbc.setState(0xa906, 0xf042, 0x9af0, 0x3a97, 0x7818, 0x3af3, 0x1, 0x0);
        gbc.writeMem(0xa906, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf042);
        EXPECT(gbc.pc(), 0xa907);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa906), 0x3);
        // 03 030E
        gbc.setState(0xd66f, 0x8c3a, 0xe0f0, 0x3085, 0x3a3, 0x3835, 0x1, 0x1);
        gbc.writeMem(0xd66f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x8c3a);
        EXPECT(gbc.pc(), 0xd670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd66f), 0x3);
        // 03 030F
        gbc.setState(0xb99d, 0x10d6, 0x9ae0, 0x4e37, 0xa021, 0x3e2d, 0x0, 0x0);
        gbc.writeMem(0xb99d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x10d6);
        EXPECT(gbc.pc(), 0xb99e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb99d), 0x3);
        // 03 0310
        gbc.setState(0x5b1c, 0x41ab, 0x91b0, 0x9cda, 0x99fd, 0xf598, 0x1, 0x1);
        gbc.writeMem(0x5b1c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x41ab);
        EXPECT(gbc.pc(), 0x5b1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0311
        gbc.setState(0x50ad, 0x9345, 0x6420, 0x724d, 0x2f80, 0x1cd1, 0x1, 0x0);
        gbc.writeMem(0x50ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x9345);
        EXPECT(gbc.pc(), 0x50ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0312
        gbc.setState(0x4c8a, 0xb812, 0xaae0, 0xccbf, 0xcf12, 0x70a7, 0x1, 0x1);
        gbc.writeMem(0x4c8a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb812);
        EXPECT(gbc.pc(), 0x4c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0313
        gbc.setState(0xb191, 0x1355, 0x3d50, 0x9d5d, 0xd168, 0x62a9, 0x0, 0x0);
        gbc.writeMem(0xb191, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1355);
        EXPECT(gbc.pc(), 0xb192);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb191), 0x3);
        // 03 0314
        gbc.setState(0x1ee1, 0xe2e2, 0xc050, 0x53b4, 0x4b58, 0x7aee, 0x0, 0x0);
        gbc.writeMem(0x1ee1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe2e2);
        EXPECT(gbc.pc(), 0x1ee2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0315
        gbc.setState(0x22b6, 0x72db, 0x7c20, 0x5c, 0xd6bf, 0xfec8, 0x0, 0x0);
        gbc.writeMem(0x22b6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x72db);
        EXPECT(gbc.pc(), 0x22b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0316
        gbc.setState(0x8200, 0xb989, 0x3320, 0xb893, 0x6fe6, 0xbfc3, 0x1, 0x0);
        gbc.writeMem(0x8200, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xb989);
        EXPECT(gbc.pc(), 0x8201);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8200), 0x3);
        // 03 0317
        gbc.setState(0xbc25, 0xf396, 0x1ea0, 0xac27, 0xb437, 0xd2df, 0x1, 0x0);
        gbc.writeMem(0xbc25, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf396);
        EXPECT(gbc.pc(), 0xbc26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc25), 0x3);
        // 03 0319
        gbc.setState(0x4c8e, 0x25ec, 0x98b0, 0x57b8, 0xec33, 0xa82c, 0x0, 0x1);
        gbc.writeMem(0x4c8e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x25ec);
        EXPECT(gbc.pc(), 0x4c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 031A
        gbc.setState(0x3232, 0xe00d, 0x1f80, 0xa3c0, 0x63a0, 0x5784, 0x1, 0x1);
        gbc.writeMem(0x3232, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xe00d);
        EXPECT(gbc.pc(), 0x3233);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 031B
        gbc.setState(0xd6e9, 0xb1f, 0x59d0, 0xfdf9, 0x1e59, 0x886b, 0x1, 0x1);
        gbc.writeMem(0xd6e9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb1f);
        EXPECT(gbc.pc(), 0xd6ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6e9), 0x3);
        // 03 031C
        gbc.setState(0x8e64, 0xddb1, 0x77c0, 0x541c, 0x69b1, 0x2281, 0x0, 0x1);
        gbc.writeMem(0x8e64, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xddb1);
        EXPECT(gbc.pc(), 0x8e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e64), 0x3);
        // 03 031D
        gbc.setState(0x8891, 0x2c63, 0xacc0, 0xe7a6, 0x672e, 0x3262, 0x0, 0x1);
        gbc.writeMem(0x8891, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2c63);
        EXPECT(gbc.pc(), 0x8892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8891), 0x3);
        // 03 031E
        gbc.setState(0x6a8, 0x7b7f, 0xe490, 0x14ca, 0x2d30, 0x99d0, 0x0, 0x1);
        gbc.writeMem(0x6a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7b7f);
        EXPECT(gbc.pc(), 0x6a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 031F
        gbc.setState(0x7fe1, 0x662a, 0x23c0, 0xeffe, 0x3d87, 0x7835, 0x1, 0x1);
        gbc.writeMem(0x7fe1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x662a);
        EXPECT(gbc.pc(), 0x7fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0320
        gbc.setState(0x4b4b, 0x63cc, 0x4ef0, 0x9a44, 0x3461, 0xb41c, 0x1, 0x0);
        gbc.writeMem(0x4b4b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x63cc);
        EXPECT(gbc.pc(), 0x4b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0322
        gbc.setState(0x724a, 0xfd34, 0xca80, 0x1a5c, 0xc3aa, 0xa325, 0x0, 0x1);
        gbc.writeMem(0x724a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xfd34);
        EXPECT(gbc.pc(), 0x724b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0323
        gbc.setState(0xb897, 0x17ec, 0x4480, 0xa0a7, 0xb0ac, 0xce02, 0x0, 0x1);
        gbc.writeMem(0xb897, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x17ec);
        EXPECT(gbc.pc(), 0xb898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb897), 0x3);
        // 03 0324
        gbc.setState(0x347e, 0x74c, 0xd60, 0xd75, 0xcde3, 0x9bf8, 0x0, 0x0);
        gbc.writeMem(0x347e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x74c);
        EXPECT(gbc.pc(), 0x347f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0326
        gbc.setState(0x98d8, 0x69a2, 0x4cf0, 0x8d64, 0xe441, 0x83be, 0x1, 0x0);
        gbc.writeMem(0x98d8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x69a2);
        EXPECT(gbc.pc(), 0x98d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d8), 0x3);
        // 03 0327
        gbc.setState(0xa98e, 0xeea7, 0xcf40, 0x91cf, 0x57c7, 0x45a, 0x0, 0x0);
        gbc.writeMem(0xa98e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xeea7);
        EXPECT(gbc.pc(), 0xa98f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98e), 0x3);
        // 03 0328
        gbc.setState(0xe68c, 0xbc52, 0x49c0, 0x57f1, 0xf534, 0xb2ca, 0x0, 0x1);
        gbc.writeMem(0xe68c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xbc52);
        EXPECT(gbc.pc(), 0xe68d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe68c), 0x3);
        // 03 0329
        gbc.setState(0xd6cf, 0x4894, 0x920, 0xfd47, 0x446b, 0x7194, 0x1, 0x0);
        gbc.writeMem(0xd6cf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4894);
        EXPECT(gbc.pc(), 0xd6d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6cf), 0x3);
        // 03 032A
        gbc.setState(0x1737, 0x7883, 0xcdb0, 0x4804, 0x5575, 0x31f5, 0x0, 0x0);
        gbc.writeMem(0x1737, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7883);
        EXPECT(gbc.pc(), 0x1738);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 032B
        gbc.setState(0x8d4d, 0x6366, 0xdfe0, 0x54ee, 0x21ab, 0xe38b, 0x1, 0x1);
        gbc.writeMem(0x8d4d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6366);
        EXPECT(gbc.pc(), 0x8d4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4d), 0x3);
        // 03 032C
        gbc.setState(0x9ccd, 0x2f7a, 0x30a0, 0xd696, 0x28b3, 0xa732, 0x1, 0x0);
        gbc.writeMem(0x9ccd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2f7a);
        EXPECT(gbc.pc(), 0x9cce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ccd), 0x3);
        // 03 032D
        gbc.setState(0x9122, 0x2afe, 0x6e20, 0xcab5, 0xd4e1, 0x2bfa, 0x0, 0x0);
        gbc.writeMem(0x9122, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x2afe);
        EXPECT(gbc.pc(), 0x9123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9122), 0x3);
        // 03 032E
        gbc.setState(0x153c, 0x13c6, 0x5890, 0x2aab, 0xc00b, 0xad6b, 0x0, 0x0);
        gbc.writeMem(0x153c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x13c6);
        EXPECT(gbc.pc(), 0x153d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 032F
        gbc.setState(0xc2c9, 0x4f60, 0x50f0, 0x4b08, 0x860d, 0x8e2d, 0x1, 0x0);
        gbc.writeMem(0xc2c9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4f60);
        EXPECT(gbc.pc(), 0xc2ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2c9), 0x3);
        // 03 0330
        gbc.setState(0x3446, 0x850f, 0xd1a0, 0x43a0, 0xb78e, 0xf041, 0x0, 0x1);
        gbc.writeMem(0x3446, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x850f);
        EXPECT(gbc.pc(), 0x3447);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0331
        gbc.setState(0x309a, 0x6893, 0xfe30, 0xd375, 0xe284, 0xd459, 0x0, 0x1);
        gbc.writeMem(0x309a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6893);
        EXPECT(gbc.pc(), 0x309b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0332
        gbc.setState(0xe1a5, 0xb4bc, 0xf330, 0x7043, 0x994e, 0x3e9, 0x1, 0x1);
        gbc.writeMem(0xe1a5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb4bc);
        EXPECT(gbc.pc(), 0xe1a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1a5), 0x3);
        // 03 0333
        gbc.setState(0x2f53, 0x781d, 0x92e0, 0xc0a3, 0x842c, 0xad2c, 0x0, 0x0);
        gbc.writeMem(0x2f53, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x781d);
        EXPECT(gbc.pc(), 0x2f54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0334
        gbc.setState(0x8c9e, 0x71b6, 0x8800, 0x4df8, 0xad59, 0xddde, 0x0, 0x1);
        gbc.writeMem(0x8c9e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x71b6);
        EXPECT(gbc.pc(), 0x8c9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c9e), 0x3);
        // 03 0335
        gbc.setState(0x359c, 0x8e0c, 0xeb90, 0x1c76, 0x2987, 0x9eb2, 0x1, 0x0);
        gbc.writeMem(0x359c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x8e0c);
        EXPECT(gbc.pc(), 0x359d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0337
        gbc.setState(0x48a6, 0x4a63, 0x47c0, 0xe13c, 0x607b, 0xeb6d, 0x0, 0x1);
        gbc.writeMem(0x48a6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4a63);
        EXPECT(gbc.pc(), 0x48a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0338
        gbc.setState(0xcaf, 0xd4e5, 0x9bb0, 0xb38, 0xc24e, 0xef0b, 0x1, 0x0);
        gbc.writeMem(0xcaf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd4e5);
        EXPECT(gbc.pc(), 0xcb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 033A
        gbc.setState(0x4d3, 0xdc43, 0xcb10, 0x7e24, 0x8cfb, 0x91c6, 0x0, 0x1);
        gbc.writeMem(0x4d3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xdc43);
        EXPECT(gbc.pc(), 0x4d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 033B
        gbc.setState(0x27ad, 0x6df5, 0x7740, 0x7a7c, 0x77e3, 0xff8e, 0x1, 0x1);
        gbc.writeMem(0x27ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6df5);
        EXPECT(gbc.pc(), 0x27ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 033C
        gbc.setState(0x78f9, 0xf58b, 0xc350, 0x37a, 0xaa32, 0x20e6, 0x1, 0x1);
        gbc.writeMem(0x78f9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf58b);
        EXPECT(gbc.pc(), 0x78fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 033D
        gbc.setState(0xac3d, 0x40e9, 0xa080, 0x1414, 0x4762, 0x6f99, 0x1, 0x1);
        gbc.writeMem(0xac3d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x40e9);
        EXPECT(gbc.pc(), 0xac3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac3d), 0x3);
        // 03 033E
        gbc.setState(0x81ce, 0x9ff8, 0x8e60, 0x426f, 0xa2db, 0x59a2, 0x0, 0x1);
        gbc.writeMem(0x81ce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x9ff8);
        EXPECT(gbc.pc(), 0x81cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81ce), 0x3);
        // 03 033F
        gbc.setState(0x6e12, 0x1ee3, 0x5bb0, 0xa511, 0xf6b9, 0x58cd, 0x0, 0x1);
        gbc.writeMem(0x6e12, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1ee3);
        EXPECT(gbc.pc(), 0x6e13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0340
        gbc.setState(0x4705, 0x311, 0xa90, 0x392a, 0xa440, 0xd861, 0x1, 0x0);
        gbc.writeMem(0x4705, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x311);
        EXPECT(gbc.pc(), 0x4706);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0341
        gbc.setState(0xa873, 0x7ad8, 0x17d0, 0x71aa, 0x4d35, 0x1729, 0x1, 0x1);
        gbc.writeMem(0xa873, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x7ad8);
        EXPECT(gbc.pc(), 0xa874);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa873), 0x3);
        // 03 0342
        gbc.setState(0x2bb3, 0x4e93, 0x6920, 0x3b99, 0x71dc, 0x3eeb, 0x1, 0x0);
        gbc.writeMem(0x2bb3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x4e93);
        EXPECT(gbc.pc(), 0x2bb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0343
        gbc.setState(0x3e78, 0x77d5, 0xd9a0, 0xb042, 0x2898, 0xabe, 0x1, 0x1);
        gbc.writeMem(0x3e78, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x77d5);
        EXPECT(gbc.pc(), 0x3e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0344
        gbc.setState(0xbf0d, 0xfec2, 0xb070, 0x669e, 0x6c3c, 0x7ca9, 0x1, 0x1);
        gbc.writeMem(0xbf0d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xfec2);
        EXPECT(gbc.pc(), 0xbf0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf0d), 0x3);
        // 03 0345
        gbc.setState(0x5355, 0x1391, 0x8930, 0x56ab, 0xa08, 0xd4d6, 0x1, 0x1);
        gbc.writeMem(0x5355, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1391);
        EXPECT(gbc.pc(), 0x5356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0346
        gbc.setState(0xa7a, 0x7017, 0x6750, 0xd80a, 0x4bf2, 0xee89, 0x0, 0x1);
        gbc.writeMem(0xa7a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7017);
        EXPECT(gbc.pc(), 0xa7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0347
        gbc.setState(0xe856, 0x996a, 0xcfa0, 0xa06b, 0x18b0, 0xdf90, 0x0, 0x0);
        gbc.writeMem(0xe856, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x996a);
        EXPECT(gbc.pc(), 0xe857);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe856), 0x3);
        // 03 0348
        gbc.setState(0x544e, 0x3c7, 0xb840, 0xbc54, 0xa9a5, 0x2ad, 0x1, 0x1);
        gbc.writeMem(0x544e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3c7);
        EXPECT(gbc.pc(), 0x544f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0349
        gbc.setState(0x75fd, 0x58b4, 0x3b80, 0xe3c4, 0xdb1e, 0x185c, 0x0, 0x0);
        gbc.writeMem(0x75fd, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x58b4);
        EXPECT(gbc.pc(), 0x75fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 034A
        gbc.setState(0x9d09, 0x2c55, 0xff60, 0x5d1f, 0x5611, 0xf8b3, 0x0, 0x0);
        gbc.writeMem(0x9d09, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x2c55);
        EXPECT(gbc.pc(), 0x9d0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d09), 0x3);
        // 03 034B
        gbc.setState(0xa36d, 0x2e78, 0xff0, 0x2159, 0x3743, 0xb56a, 0x1, 0x1);
        gbc.writeMem(0xa36d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2e78);
        EXPECT(gbc.pc(), 0xa36e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa36d), 0x3);
        // 03 034C
        gbc.setState(0xe24, 0x95ce, 0x2cf0, 0x147b, 0x68f3, 0xb0f7, 0x1, 0x0);
        gbc.writeMem(0xe24, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x95ce);
        EXPECT(gbc.pc(), 0xe25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 034D
        gbc.setState(0x1b80, 0x1d91, 0x97d0, 0x9a7c, 0x9b30, 0x99ef, 0x0, 0x0);
        gbc.writeMem(0x1b80, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x1d91);
        EXPECT(gbc.pc(), 0x1b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 034E
        gbc.setState(0x4860, 0x1517, 0x68c0, 0xa9ac, 0x4196, 0x1abd, 0x0, 0x1);
        gbc.writeMem(0x4860, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x1517);
        EXPECT(gbc.pc(), 0x4861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 034F
        gbc.setState(0x95d6, 0x7183, 0x1720, 0x3f6e, 0x4478, 0x2800, 0x0, 0x0);
        gbc.writeMem(0x95d6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x7183);
        EXPECT(gbc.pc(), 0x95d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95d6), 0x3);
        // 03 0350
        gbc.setState(0xd028, 0xe61d, 0x2330, 0xabc7, 0x496e, 0xb804, 0x1, 0x0);
        gbc.writeMem(0xd028, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe61d);
        EXPECT(gbc.pc(), 0xd029);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd028), 0x3);
        // 03 0351
        gbc.setState(0x3843, 0x457b, 0x1210, 0x9710, 0xd0ad, 0xc488, 0x0, 0x0);
        gbc.writeMem(0x3843, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x457b);
        EXPECT(gbc.pc(), 0x3844);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0352
        gbc.setState(0xcb74, 0xd112, 0x1430, 0x4598, 0x3db1, 0xc2b3, 0x0, 0x1);
        gbc.writeMem(0xcb74, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd112);
        EXPECT(gbc.pc(), 0xcb75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb74), 0x3);
        // 03 0353
        gbc.setState(0x52c, 0xc390, 0xb580, 0x1d83, 0x2430, 0xad9e, 0x1, 0x1);
        gbc.writeMem(0x52c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc390);
        EXPECT(gbc.pc(), 0x52d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0354
        gbc.setState(0x4f0a, 0x5cd3, 0x64e0, 0xabd3, 0x720a, 0xbeb0, 0x1, 0x0);
        gbc.writeMem(0x4f0a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x5cd3);
        EXPECT(gbc.pc(), 0x4f0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0355
        gbc.setState(0x2995, 0x961c, 0xe590, 0x7ded, 0xb29f, 0xab2c, 0x1, 0x1);
        gbc.writeMem(0x2995, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x961c);
        EXPECT(gbc.pc(), 0x2996);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0356
        gbc.setState(0x425f, 0xe01b, 0x58b0, 0xaa67, 0xcf4a, 0x416e, 0x1, 0x0);
        gbc.writeMem(0x425f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe01b);
        EXPECT(gbc.pc(), 0x4260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0357
        gbc.setState(0xeace, 0xa442, 0xb720, 0x2e31, 0xf862, 0x7d3, 0x1, 0x1);
        gbc.writeMem(0xeace, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xa442);
        EXPECT(gbc.pc(), 0xeacf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeace), 0x3);
        // 03 0359
        gbc.setState(0x7d3d, 0x6a63, 0xde90, 0x1035, 0xbf2c, 0x371f, 0x0, 0x0);
        gbc.writeMem(0x7d3d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x6a63);
        EXPECT(gbc.pc(), 0x7d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 035A
        gbc.setState(0x9b1d, 0x9582, 0x2d00, 0xb8c0, 0x7ff7, 0x121b, 0x0, 0x0);
        gbc.writeMem(0x9b1d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9582);
        EXPECT(gbc.pc(), 0x9b1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b1d), 0x3);
        // 03 035B
        gbc.setState(0xdc0b, 0x23a6, 0xe690, 0x23f5, 0x89ca, 0xc97a, 0x0, 0x1);
        gbc.writeMem(0xdc0b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x23a6);
        EXPECT(gbc.pc(), 0xdc0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc0b), 0x3);
        // 03 035C
        gbc.setState(0x5a9b, 0x8a5a, 0x4680, 0x6e17, 0x4cb0, 0x39ca, 0x0, 0x0);
        gbc.writeMem(0x5a9b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8a5a);
        EXPECT(gbc.pc(), 0x5a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 035D
        gbc.setState(0xede9, 0x3ec3, 0xacb0, 0xab1d, 0xdb5, 0xe2d2, 0x0, 0x0);
        gbc.writeMem(0xede9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x3ec3);
        EXPECT(gbc.pc(), 0xedea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xede9), 0x3);
        // 03 035E
        gbc.setState(0x5e0d, 0x9399, 0x7a0, 0xd38c, 0x7db6, 0x31a1, 0x1, 0x1);
        gbc.writeMem(0x5e0d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x9399);
        EXPECT(gbc.pc(), 0x5e0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 035F
        gbc.setState(0x1a0e, 0x619, 0x6350, 0x16b4, 0xe550, 0x67e1, 0x1, 0x1);
        gbc.writeMem(0x1a0e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x619);
        EXPECT(gbc.pc(), 0x1a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0360
        gbc.setState(0xc233, 0x7e9b, 0x1dd0, 0x818f, 0x6ef6, 0xf2b, 0x1, 0x1);
        gbc.writeMem(0xc233, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7e9b);
        EXPECT(gbc.pc(), 0xc234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc233), 0x3);
        // 03 0362
        gbc.setState(0x783d, 0x4b1b, 0xa5a0, 0x3e42, 0xc93f, 0xf3c3, 0x1, 0x1);
        gbc.writeMem(0x783d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4b1b);
        EXPECT(gbc.pc(), 0x783e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0363
        gbc.setState(0xa4bf, 0x2466, 0x5130, 0x5beb, 0x9bc, 0x9af6, 0x1, 0x0);
        gbc.writeMem(0xa4bf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2466);
        EXPECT(gbc.pc(), 0xa4c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4bf), 0x3);
        // 03 0364
        gbc.setState(0x8879, 0x5067, 0xf6d0, 0x59ec, 0xf305, 0x5990, 0x1, 0x1);
        gbc.writeMem(0x8879, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x5067);
        EXPECT(gbc.pc(), 0x887a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8879), 0x3);
        // 03 0365
        gbc.setState(0xbab7, 0xb1ed, 0x7dd0, 0x8bb0, 0xa1ff, 0x915c, 0x1, 0x1);
        gbc.writeMem(0xbab7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xb1ed);
        EXPECT(gbc.pc(), 0xbab8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbab7), 0x3);
        // 03 0366
        gbc.setState(0x37e5, 0x589d, 0x1100, 0x52a5, 0x8f3f, 0x33fe, 0x1, 0x0);
        gbc.writeMem(0x37e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x589d);
        EXPECT(gbc.pc(), 0x37e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0367
        gbc.setState(0x2e69, 0xe0a, 0xe7e0, 0xd61f, 0xc5d8, 0xdd61, 0x0, 0x1);
        gbc.writeMem(0x2e69, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xe0a);
        EXPECT(gbc.pc(), 0x2e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0368
        gbc.setState(0xb0d, 0x490, 0xecd0, 0x7909, 0xc4ae, 0x5118, 0x1, 0x0);
        gbc.writeMem(0xb0d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x490);
        EXPECT(gbc.pc(), 0xb0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0369
        gbc.setState(0x9e37, 0x31fc, 0xfff0, 0x965e, 0x5bb3, 0xd4d3, 0x1, 0x1);
        gbc.writeMem(0x9e37, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x31fc);
        EXPECT(gbc.pc(), 0x9e38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e37), 0x3);
        // 03 036A
        gbc.setState(0x6853, 0x4780, 0x1d40, 0xe85f, 0xf974, 0xbd9a, 0x1, 0x0);
        gbc.writeMem(0x6853, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4780);
        EXPECT(gbc.pc(), 0x6854);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 036B
        gbc.setState(0xc7db, 0xc794, 0x9860, 0xdd56, 0x3701, 0x91d9, 0x1, 0x1);
        gbc.writeMem(0xc7db, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc794);
        EXPECT(gbc.pc(), 0xc7dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7db), 0x3);
        // 03 036C
        gbc.setState(0xfd0, 0x963d, 0x2b70, 0xbbf1, 0x2816, 0x7e33, 0x1, 0x1);
        gbc.writeMem(0xfd0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x963d);
        EXPECT(gbc.pc(), 0xfd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 036D
        gbc.setState(0xc096, 0xd9fc, 0xa9a0, 0x13ee, 0xbd5, 0x37b2, 0x0, 0x0);
        gbc.writeMem(0xc096, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xd9fc);
        EXPECT(gbc.pc(), 0xc097);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc096), 0x3);
        // 03 036E
        gbc.setState(0x78c3, 0x5ffc, 0x5a10, 0x7c79, 0x619d, 0xbca4, 0x1, 0x0);
        gbc.writeMem(0x78c3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5ffc);
        EXPECT(gbc.pc(), 0x78c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 036F
        gbc.setState(0x5b8d, 0xe178, 0xe180, 0x42b4, 0x2da1, 0x8b31, 0x0, 0x1);
        gbc.writeMem(0x5b8d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe178);
        EXPECT(gbc.pc(), 0x5b8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0371
        gbc.setState(0x29a8, 0x3b61, 0x5000, 0xd4a8, 0x2519, 0x2072, 0x1, 0x1);
        gbc.writeMem(0x29a8, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x3b61);
        EXPECT(gbc.pc(), 0x29a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0372
        gbc.setState(0x49ec, 0x53c2, 0x55a0, 0x70fc, 0x1802, 0x1228, 0x0, 0x1);
        gbc.writeMem(0x49ec, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x53c2);
        EXPECT(gbc.pc(), 0x49ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0373
        gbc.setState(0x246f, 0x4e6c, 0x3490, 0x939a, 0xd5ca, 0xfe39, 0x1, 0x1);
        gbc.writeMem(0x246f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4e6c);
        EXPECT(gbc.pc(), 0x2470);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0374
        gbc.setState(0x3801, 0x546d, 0xa7e0, 0xfc05, 0x32d, 0xaee6, 0x0, 0x0);
        gbc.writeMem(0x3801, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x546d);
        EXPECT(gbc.pc(), 0x3802);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0376
        gbc.setState(0x6ff6, 0x124c, 0x3bb0, 0xd910, 0x70a8, 0x7cff, 0x0, 0x0);
        gbc.writeMem(0x6ff6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x124c);
        EXPECT(gbc.pc(), 0x6ff7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0377
        gbc.setState(0xa61b, 0x5f79, 0xe40, 0xa71a, 0xa7e9, 0x2832, 0x0, 0x0);
        gbc.writeMem(0xa61b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5f79);
        EXPECT(gbc.pc(), 0xa61c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa61b), 0x3);
        // 03 0378
        gbc.setState(0xee26, 0x2b96, 0x9f40, 0xef3e, 0xa32f, 0x2a11, 0x0, 0x0);
        gbc.writeMem(0xee26, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2b96);
        EXPECT(gbc.pc(), 0xee27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee26), 0x3);
        // 03 0379
        gbc.setState(0xdf29, 0xebce, 0x5df0, 0xa556, 0xcd5, 0x19ba, 0x1, 0x1);
        gbc.writeMem(0xdf29, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xebce);
        EXPECT(gbc.pc(), 0xdf2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf29), 0x3);
        // 03 037A
        gbc.setState(0xd3a9, 0x2011, 0x38e0, 0x270a, 0x6afb, 0xd51a, 0x0, 0x0);
        gbc.writeMem(0xd3a9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2011);
        EXPECT(gbc.pc(), 0xd3aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3a9), 0x3);
        // 03 037B
        gbc.setState(0x9b0c, 0x36c3, 0xdfa0, 0xe17f, 0xfdf3, 0xe558, 0x0, 0x1);
        gbc.writeMem(0x9b0c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x36c3);
        EXPECT(gbc.pc(), 0x9b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b0c), 0x3);
        // 03 037C
        gbc.setState(0xda3b, 0xa58e, 0xec0, 0x1eff, 0x4139, 0x4bad, 0x1, 0x0);
        gbc.writeMem(0xda3b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa58e);
        EXPECT(gbc.pc(), 0xda3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3b), 0x3);
        // 03 037D
        gbc.setState(0xc692, 0xe881, 0x7680, 0x58ce, 0x9154, 0xa14a, 0x0, 0x1);
        gbc.writeMem(0xc692, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe881);
        EXPECT(gbc.pc(), 0xc693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc692), 0x3);
        // 03 037E
        gbc.setState(0x75ee, 0xd0ae, 0x1410, 0xccff, 0x3b01, 0x9189, 0x1, 0x0);
        gbc.writeMem(0x75ee, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd0ae);
        EXPECT(gbc.pc(), 0x75ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 037F
        gbc.setState(0x9656, 0x2e4a, 0xe660, 0x75c1, 0x5383, 0xe07d, 0x0, 0x0);
        gbc.writeMem(0x9656, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x2e4a);
        EXPECT(gbc.pc(), 0x9657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9656), 0x3);
        // 03 0380
        gbc.setState(0xbfed, 0x227b, 0xde60, 0x7752, 0xe588, 0x944f, 0x1, 0x0);
        gbc.writeMem(0xbfed, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x227b);
        EXPECT(gbc.pc(), 0xbfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfed), 0x3);
        // 03 0381
        gbc.setState(0x1886, 0x1286, 0xfee0, 0x511c, 0xdc20, 0xc09f, 0x1, 0x0);
        gbc.writeMem(0x1886, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1286);
        EXPECT(gbc.pc(), 0x1887);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0382
        gbc.setState(0x8d4e, 0x49d3, 0x7500, 0xf936, 0x17b2, 0xc4f5, 0x1, 0x1);
        gbc.writeMem(0x8d4e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x49d3);
        EXPECT(gbc.pc(), 0x8d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4e), 0x3);
        // 03 0383
        gbc.setState(0xef9f, 0xeb84, 0xb7d0, 0xd05, 0xf66c, 0xbba3, 0x1, 0x0);
        gbc.writeMem(0xef9f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xeb84);
        EXPECT(gbc.pc(), 0xefa0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef9f), 0x3);
        // 03 0384
        gbc.setState(0x5ccf, 0x32fe, 0x9730, 0x9fae, 0xdaa8, 0x7f9e, 0x1, 0x0);
        gbc.writeMem(0x5ccf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x32fe);
        EXPECT(gbc.pc(), 0x5cd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 0385
        gbc.setState(0xd610, 0xccbc, 0x5550, 0x1572, 0x101c, 0x4e44, 0x1, 0x1);
        gbc.writeMem(0xd610, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xccbc);
        EXPECT(gbc.pc(), 0xd611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd610), 0x3);
        // 03 0386
        gbc.setState(0x4d30, 0x4fa9, 0x3310, 0x3f73, 0x5e7, 0x96f9, 0x0, 0x0);
        gbc.writeMem(0x4d30, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4fa9);
        EXPECT(gbc.pc(), 0x4d31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0387
        gbc.setState(0xa1ad, 0xd6fa, 0x1a0, 0xc31b, 0xbad3, 0xbb10, 0x1, 0x0);
        gbc.writeMem(0xa1ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xd6fa);
        EXPECT(gbc.pc(), 0xa1ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ad), 0x3);
        // 03 0388
        gbc.setState(0xeb42, 0xea7c, 0x5040, 0x7687, 0x8319, 0xd94b, 0x0, 0x0);
        gbc.writeMem(0xeb42, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xea7c);
        EXPECT(gbc.pc(), 0xeb43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb42), 0x3);
        // 03 0389
        gbc.setState(0xc9ac, 0xb0e, 0x1ad0, 0xb290, 0xf820, 0x44ff, 0x0, 0x0);
        gbc.writeMem(0xc9ac, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xb0e);
        EXPECT(gbc.pc(), 0xc9ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9ac), 0x3);
        // 03 038A
        gbc.setState(0x85ed, 0x53bd, 0x9f20, 0xdda5, 0xc93f, 0xf8d0, 0x0, 0x1);
        gbc.writeMem(0x85ed, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x53bd);
        EXPECT(gbc.pc(), 0x85ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85ed), 0x3);
        // 03 038B
        gbc.setState(0x6339, 0x2a45, 0x1660, 0x6bb0, 0xa334, 0x832a, 0x1, 0x0);
        gbc.writeMem(0x6339, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x2a45);
        EXPECT(gbc.pc(), 0x633a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 038C
        gbc.setState(0x859a, 0x6a7d, 0xb6e0, 0xe60b, 0xd10e, 0xc12d, 0x0, 0x1);
        gbc.writeMem(0x859a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x6a7d);
        EXPECT(gbc.pc(), 0x859b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x859a), 0x3);
        // 03 038D
        gbc.setState(0xa09a, 0x16de, 0xfdd0, 0xc1c0, 0x4433, 0x249f, 0x0, 0x1);
        gbc.writeMem(0xa09a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x16de);
        EXPECT(gbc.pc(), 0xa09b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa09a), 0x3);
        // 03 038E
        gbc.setState(0x87a9, 0xc4d8, 0xfa50, 0x888a, 0xb192, 0x54ff, 0x1, 0x1);
        gbc.writeMem(0x87a9, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc4d8);
        EXPECT(gbc.pc(), 0x87aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a9), 0x3);
        // 03 038F
        gbc.setState(0x7714, 0xfcac, 0x8ce0, 0xce88, 0x3f2f, 0x9d94, 0x0, 0x0);
        gbc.writeMem(0x7714, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xfcac);
        EXPECT(gbc.pc(), 0x7715);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 0391
        gbc.setState(0x6455, 0xcb9e, 0x4a80, 0x96e0, 0xf68f, 0x2f9e, 0x1, 0x1);
        gbc.writeMem(0x6455, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcb9e);
        EXPECT(gbc.pc(), 0x6456);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0392
        gbc.setState(0x3a0e, 0x3688, 0xad0, 0xc0d1, 0x81c7, 0x2e1d, 0x1, 0x0);
        gbc.writeMem(0x3a0e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3688);
        EXPECT(gbc.pc(), 0x3a0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 0393
        gbc.setState(0xb392, 0x9464, 0xd720, 0x63f, 0x2ba1, 0x93ae, 0x1, 0x1);
        gbc.writeMem(0xb392, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9464);
        EXPECT(gbc.pc(), 0xb393);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb392), 0x3);
        // 03 0394
        gbc.setState(0x94b6, 0x9702, 0x3050, 0xf6d1, 0xeac7, 0x4ef1, 0x0, 0x1);
        gbc.writeMem(0x94b6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x9702);
        EXPECT(gbc.pc(), 0x94b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94b6), 0x3);
        // 03 0395
        gbc.setState(0x132d, 0xeb81, 0x9bc0, 0xe8c1, 0x49f8, 0x867e, 0x0, 0x0);
        gbc.writeMem(0x132d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xeb81);
        EXPECT(gbc.pc(), 0x132e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 0396
        gbc.setState(0x98b6, 0x6dea, 0x3700, 0xe7f9, 0x39fd, 0x97f5, 0x0, 0x0);
        gbc.writeMem(0x98b6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6dea);
        EXPECT(gbc.pc(), 0x98b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b6), 0x3);
        // 03 0397
        gbc.setState(0x96ea, 0x2a7, 0x6540, 0x1c9a, 0x9f9a, 0xcd3c, 0x0, 0x1);
        gbc.writeMem(0x96ea, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2a7);
        EXPECT(gbc.pc(), 0x96eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96ea), 0x3);
        // 03 0398
        gbc.setState(0x8036, 0xe01e, 0x5920, 0x9501, 0xa3fa, 0x317a, 0x0, 0x0);
        gbc.writeMem(0x8036, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe01e);
        EXPECT(gbc.pc(), 0x8037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8036), 0x3);
        // 03 0399
        gbc.setState(0xe040, 0x4cba, 0xd680, 0x96d, 0x84e0, 0x8348, 0x0, 0x0);
        gbc.writeMem(0xe040, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x4cba);
        EXPECT(gbc.pc(), 0xe041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe040), 0x3);
        // 03 039A
        gbc.setState(0x4949, 0x53f4, 0xfd90, 0xeac3, 0x1c6b, 0xd661, 0x0, 0x0);
        gbc.writeMem(0x4949, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x53f4);
        EXPECT(gbc.pc(), 0x494a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 039B
        gbc.setState(0x91db, 0xbf40, 0x7480, 0xfd65, 0x712c, 0xe709, 0x0, 0x1);
        gbc.writeMem(0x91db, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xbf40);
        EXPECT(gbc.pc(), 0x91dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91db), 0x3);
        // 03 039D
        gbc.setState(0x1675, 0xd952, 0x9610, 0x7081, 0xc0ff, 0x6834, 0x1, 0x0);
        gbc.writeMem(0x1675, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xd952);
        EXPECT(gbc.pc(), 0x1676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 039E
        gbc.setState(0x97db, 0xa2c8, 0x42d0, 0xa6fe, 0x6b6f, 0x6132, 0x0, 0x0);
        gbc.writeMem(0x97db, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa2c8);
        EXPECT(gbc.pc(), 0x97dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97db), 0x3);
        // 03 039F
        gbc.setState(0x149, 0x6934, 0xb90, 0x28f8, 0x82cb, 0x90c9, 0x0, 0x0);
        gbc.writeMem(0x149, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x6934);
        EXPECT(gbc.pc(), 0x14a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03A0
        gbc.setState(0x47de, 0x3f3e, 0xeac0, 0x1e30, 0x1cf5, 0xc652, 0x1, 0x0);
        gbc.writeMem(0x47de, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x3f3e);
        EXPECT(gbc.pc(), 0x47df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03A1
        gbc.setState(0x8194, 0x519a, 0x4420, 0xdeaa, 0xcb2c, 0x6e8e, 0x1, 0x1);
        gbc.writeMem(0x8194, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x519a);
        EXPECT(gbc.pc(), 0x8195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8194), 0x3);
        // 03 03A2
        gbc.setState(0x79e2, 0x8941, 0x120, 0xcd8d, 0xbd0b, 0xd561, 0x0, 0x1);
        gbc.writeMem(0x79e2, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0x79e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03A3
        gbc.setState(0xbdc0, 0xa181, 0x5320, 0x798c, 0xdfe8, 0x91c8, 0x1, 0x0);
        gbc.writeMem(0xbdc0, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xa181);
        EXPECT(gbc.pc(), 0xbdc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdc0), 0x3);
        // 03 03A4
        gbc.setState(0x7ec7, 0xfb55, 0xf930, 0xa98d, 0x90d, 0xa0d9, 0x1, 0x0);
        gbc.writeMem(0x7ec7, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xfb55);
        EXPECT(gbc.pc(), 0x7ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03A5
        gbc.setState(0xa7ad, 0x1921, 0xba00, 0x4b68, 0x5d66, 0x5aa5, 0x1, 0x0);
        gbc.writeMem(0xa7ad, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1921);
        EXPECT(gbc.pc(), 0xa7ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ad), 0x3);
        // 03 03A6
        gbc.setState(0x2a7f, 0x39f2, 0x2ea0, 0xb636, 0x2a49, 0x5239, 0x0, 0x0);
        gbc.writeMem(0x2a7f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x39f2);
        EXPECT(gbc.pc(), 0x2a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03A7
        gbc.setState(0x588a, 0x8f47, 0x5880, 0x5161, 0xf58d, 0x36d, 0x1, 0x0);
        gbc.writeMem(0x588a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8f47);
        EXPECT(gbc.pc(), 0x588b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03A8
        gbc.setState(0x134c, 0x8fe9, 0xb830, 0xf24b, 0x62ed, 0x5ad3, 0x0, 0x0);
        gbc.writeMem(0x134c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x8fe9);
        EXPECT(gbc.pc(), 0x134d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03A9
        gbc.setState(0x26a1, 0xc8d6, 0xc7b0, 0x2779, 0x9527, 0x1ed9, 0x1, 0x0);
        gbc.writeMem(0x26a1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc8d6);
        EXPECT(gbc.pc(), 0x26a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03AA
        gbc.setState(0xc34c, 0xb908, 0x7e80, 0x568d, 0x2a3a, 0x1bee, 0x0, 0x0);
        gbc.writeMem(0xc34c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb908);
        EXPECT(gbc.pc(), 0xc34d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc34c), 0x3);
        // 03 03AB
        gbc.setState(0xc707, 0x78f9, 0xc7a0, 0x1c8c, 0x578d, 0x125e, 0x1, 0x0);
        gbc.writeMem(0xc707, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x78f9);
        EXPECT(gbc.pc(), 0xc708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc707), 0x3);
        // 03 03AC
        gbc.setState(0xd3ee, 0xad03, 0x3b40, 0xb66, 0x5dbb, 0x1754, 0x1, 0x0);
        gbc.writeMem(0xd3ee, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xad03);
        EXPECT(gbc.pc(), 0xd3ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ee), 0x3);
        // 03 03AD
        gbc.setState(0x4dde, 0xb76a, 0x4bd0, 0xa2ee, 0x259b, 0x2202, 0x1, 0x1);
        gbc.writeMem(0x4dde, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb76a);
        EXPECT(gbc.pc(), 0x4ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03AE
        gbc.setState(0xbc48, 0xc3ca, 0x19d0, 0x8f72, 0xa1e6, 0x4aab, 0x1, 0x0);
        gbc.writeMem(0xbc48, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xc3ca);
        EXPECT(gbc.pc(), 0xbc49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc48), 0x3);
        // 03 03AF
        gbc.setState(0x21a, 0xa39e, 0x4a80, 0xd05c, 0x53e1, 0x90da, 0x0, 0x0);
        gbc.writeMem(0x21a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xa39e);
        EXPECT(gbc.pc(), 0x21b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03B0
        gbc.setState(0xa57c, 0x8b4c, 0x4290, 0x9161, 0xf002, 0x28eb, 0x0, 0x0);
        gbc.writeMem(0xa57c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x8b4c);
        EXPECT(gbc.pc(), 0xa57d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa57c), 0x3);
        // 03 03B1
        gbc.setState(0x61e1, 0xe672, 0xa5f0, 0x3e2d, 0xd0ff, 0x1de0, 0x1, 0x1);
        gbc.writeMem(0x61e1, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe672);
        EXPECT(gbc.pc(), 0x61e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03B3
        gbc.setState(0xd623, 0x3ea, 0x2870, 0x78dd, 0x4561, 0xd930, 0x1, 0x0);
        gbc.writeMem(0xd623, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3ea);
        EXPECT(gbc.pc(), 0xd624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd623), 0x3);
        // 03 03B4
        gbc.setState(0x742, 0x250f, 0x80, 0x99b6, 0xce43, 0xefa3, 0x0, 0x1);
        gbc.writeMem(0x742, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x250f);
        EXPECT(gbc.pc(), 0x743);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03B5
        gbc.setState(0xeb6e, 0xbc5c, 0xdac0, 0xab4f, 0x37f5, 0x1a61, 0x1, 0x1);
        gbc.writeMem(0xeb6e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xbc5c);
        EXPECT(gbc.pc(), 0xeb6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb6e), 0x3);
        // 03 03B6
        gbc.setState(0x9ef6, 0xfbc5, 0xc6a0, 0xe6ea, 0xd0d3, 0x3259, 0x0, 0x1);
        gbc.writeMem(0x9ef6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfbc5);
        EXPECT(gbc.pc(), 0x9ef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef6), 0x3);
        // 03 03B7
        gbc.setState(0x79cc, 0x3087, 0xee60, 0x794e, 0x56ba, 0x6161, 0x0, 0x1);
        gbc.writeMem(0x79cc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3087);
        EXPECT(gbc.pc(), 0x79cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03B9
        gbc.setState(0x8c43, 0x7f0e, 0x3ce0, 0xc249, 0xf01, 0x704, 0x0, 0x1);
        gbc.writeMem(0x8c43, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x7f0e);
        EXPECT(gbc.pc(), 0x8c44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c43), 0x3);
        // 03 03BA
        gbc.setState(0x924a, 0xd08f, 0xe670, 0xdae2, 0x389f, 0xf1e0, 0x1, 0x0);
        gbc.writeMem(0x924a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xd08f);
        EXPECT(gbc.pc(), 0x924b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x924a), 0x3);
        // 03 03BB
        gbc.setState(0xe4eb, 0xa006, 0x2030, 0x23cc, 0x24cd, 0xca86, 0x1, 0x0);
        gbc.writeMem(0xe4eb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xa006);
        EXPECT(gbc.pc(), 0xe4ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4eb), 0x3);
        // 03 03BC
        gbc.setState(0x852d, 0xae12, 0x9b90, 0x6a2b, 0x8a6b, 0xeeb1, 0x0, 0x1);
        gbc.writeMem(0x852d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xae12);
        EXPECT(gbc.pc(), 0x852e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x852d), 0x3);
        // 03 03BD
        gbc.setState(0xc887, 0xae77, 0x8610, 0xb618, 0xae91, 0x6b3, 0x1, 0x1);
        gbc.writeMem(0xc887, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xae77);
        EXPECT(gbc.pc(), 0xc888);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc887), 0x3);
        // 03 03BE
        gbc.setState(0xd036, 0x6420, 0xb070, 0xee66, 0x7b5c, 0xb183, 0x0, 0x1);
        gbc.writeMem(0xd036, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6420);
        EXPECT(gbc.pc(), 0xd037);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd036), 0x3);
        // 03 03BF
        gbc.setState(0xebed, 0xd8e2, 0x590, 0x406a, 0x56f9, 0x9975, 0x0, 0x1);
        gbc.writeMem(0xebed, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd8e2);
        EXPECT(gbc.pc(), 0xebee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebed), 0x3);
        // 03 03C0
        gbc.setState(0xb952, 0xac04, 0xf750, 0x7a65, 0x3acb, 0x35fc, 0x0, 0x1);
        gbc.writeMem(0xb952, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xac04);
        EXPECT(gbc.pc(), 0xb953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb952), 0x3);
        // 03 03C1
        gbc.setState(0xe07a, 0x53f6, 0x3f00, 0xa0d1, 0xcac1, 0x4c59, 0x1, 0x0);
        gbc.writeMem(0xe07a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x53f6);
        EXPECT(gbc.pc(), 0xe07b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07a), 0x3);
        // 03 03C2
        gbc.setState(0x2be6, 0x6dc2, 0x9960, 0x4d84, 0xdd73, 0x4863, 0x1, 0x0);
        gbc.writeMem(0x2be6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6dc2);
        EXPECT(gbc.pc(), 0x2be7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03C3
        gbc.setState(0xc242, 0xb9e5, 0x2d90, 0x5c70, 0xe948, 0x6ef, 0x1, 0x0);
        gbc.writeMem(0xc242, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb9e5);
        EXPECT(gbc.pc(), 0xc243);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc242), 0x3);
        // 03 03C4
        gbc.setState(0xebdf, 0x353b, 0x9de0, 0x720f, 0x1261, 0x6e91, 0x0, 0x0);
        gbc.writeMem(0xebdf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x353b);
        EXPECT(gbc.pc(), 0xebe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebdf), 0x3);
        // 03 03C5
        gbc.setState(0xb7ba, 0xd4cc, 0x9b90, 0x3648, 0xce64, 0x1da5, 0x0, 0x0);
        gbc.writeMem(0xb7ba, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xd4cc);
        EXPECT(gbc.pc(), 0xb7bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ba), 0x3);
        // 03 03C6
        gbc.setState(0x3daf, 0xf511, 0xdd20, 0xcde0, 0x4b7, 0x29e2, 0x0, 0x1);
        gbc.writeMem(0x3daf, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xf511);
        EXPECT(gbc.pc(), 0x3db0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03C7
        gbc.setState(0x4adc, 0x2214, 0x9880, 0x5cb4, 0x67cd, 0x3dc2, 0x0, 0x1);
        gbc.writeMem(0x4adc, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2214);
        EXPECT(gbc.pc(), 0x4add);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03C8
        gbc.setState(0x11ab, 0x5c34, 0x7f10, 0xd15c, 0xf756, 0x9071, 0x0, 0x0);
        gbc.writeMem(0x11ab, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x5c34);
        EXPECT(gbc.pc(), 0x11ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03C9
        gbc.setState(0x345a, 0x80be, 0x73f0, 0x8cc6, 0x67e9, 0x9117, 0x0, 0x0);
        gbc.writeMem(0x345a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x80be);
        EXPECT(gbc.pc(), 0x345b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03CA
        gbc.setState(0xa57, 0x31af, 0xf390, 0x16b9, 0x8871, 0xe85d, 0x0, 0x1);
        gbc.writeMem(0xa57, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x31af);
        EXPECT(gbc.pc(), 0xa58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03CB
        gbc.setState(0x4445, 0xb610, 0xa890, 0xa77e, 0xbed7, 0x7e25, 0x1, 0x0);
        gbc.writeMem(0x4445, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb610);
        EXPECT(gbc.pc(), 0x4446);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03CC
        gbc.setState(0xc8ce, 0x462b, 0x96c0, 0xc146, 0x25c8, 0xb1d8, 0x1, 0x1);
        gbc.writeMem(0xc8ce, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x462b);
        EXPECT(gbc.pc(), 0xc8cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ce), 0x3);
        // 03 03CD
        gbc.setState(0xa6a6, 0xde7c, 0x36a0, 0x2daf, 0x5292, 0x59b5, 0x0, 0x0);
        gbc.writeMem(0xa6a6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xde7c);
        EXPECT(gbc.pc(), 0xa6a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a6), 0x3);
        // 03 03CE
        gbc.setState(0x917c, 0xef72, 0x4990, 0xe323, 0xf392, 0x5325, 0x0, 0x0);
        gbc.writeMem(0x917c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xef72);
        EXPECT(gbc.pc(), 0x917d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x917c), 0x3);
        // 03 03CF
        gbc.setState(0xa64d, 0x8e88, 0x4640, 0xffcc, 0xfd06, 0xc7b8, 0x0, 0x1);
        gbc.writeMem(0xa64d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8e88);
        EXPECT(gbc.pc(), 0xa64e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa64d), 0x3);
        // 03 03D0
        gbc.setState(0xe4ec, 0x54fe, 0x5b40, 0x684d, 0x761, 0x3aca, 0x1, 0x0);
        gbc.writeMem(0xe4ec, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x54fe);
        EXPECT(gbc.pc(), 0xe4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ec), 0x3);
        // 03 03D1
        gbc.setState(0x51a, 0xca7f, 0xc00, 0x1a61, 0x393, 0x7180, 0x0, 0x0);
        gbc.writeMem(0x51a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xca7f);
        EXPECT(gbc.pc(), 0x51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03D2
        gbc.setState(0x442f, 0xd447, 0xf940, 0x927f, 0xdb26, 0x2aca, 0x0, 0x1);
        gbc.writeMem(0x442f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd447);
        EXPECT(gbc.pc(), 0x4430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03D3
        gbc.setState(0x268, 0x69b7, 0x2880, 0x32de, 0xe25c, 0x1bd3, 0x0, 0x0);
        gbc.writeMem(0x268, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x69b7);
        EXPECT(gbc.pc(), 0x269);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03D4
        gbc.setState(0xaf6a, 0x2273, 0x8bd0, 0x243d, 0x174a, 0x1545, 0x0, 0x1);
        gbc.writeMem(0xaf6a, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x2273);
        EXPECT(gbc.pc(), 0xaf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf6a), 0x3);
        // 03 03D5
        gbc.setState(0x571b, 0x5d6d, 0x7870, 0x42a9, 0x5e8a, 0x8124, 0x0, 0x1);
        gbc.writeMem(0x571b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5d6d);
        EXPECT(gbc.pc(), 0x571c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 03 03D6
        gbc.setState(0x846b, 0xaf6d, 0xbca0, 0x53a3, 0x49ff, 0xc6a2, 0x1, 0x1);
        gbc.writeMem(0x846b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xaf6d);
        EXPECT(gbc.pc(), 0x846c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x846b), 0x3);
        // 03 03D7
        gbc.setState(0x992f, 0x60d6, 0xf780, 0xde98, 0xf9c8, 0x4134, 0x1, 0x1);
        gbc.writeMem(0x992f, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x60d6);
        EXPECT(gbc.pc(), 0x9930);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x992f), 0x3);
        // 03 03D8
        gbc.setState(0x8b0e, 0x9844, 0xf060, 0x4fa3, 0x53e0, 0xa7c4, 0x1, 0x1);
        gbc.writeMem(0x8b0e, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9844);
        EXPECT(gbc.pc(), 0x8b0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b0e), 0x3);
        // 03 03D9
        gbc.setState(0xad3, 0x5135, 0x41d0, 0xfbbd, 0x3db9, 0xb6f, 0x0, 0x1);
        gbc.writeMem(0xad3, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5135);
        EXPECT(gbc.pc(), 0xad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 03 03DB
        gbc.setState(0x40b, 0xb942, 0x8d00, 0xcd65, 0xdb9c, 0x857b, 0x0, 0x1);
        gbc.writeMem(0x40b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xb942);
        EXPECT(gbc.pc(), 0x40c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03DC
        gbc.setState(0x2b5b, 0x37e4, 0x90a0, 0x36fe, 0x8707, 0xed42, 0x1, 0x0);
        gbc.writeMem(0x2b5b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x37e4);
        EXPECT(gbc.pc(), 0x2b5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03DD
        gbc.setState(0x575c, 0xf256, 0xe8e0, 0x3f7c, 0xd65c, 0xa0fd, 0x1, 0x1);
        gbc.writeMem(0x575c, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf256);
        EXPECT(gbc.pc(), 0x575d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03DE
        gbc.setState(0xd6bb, 0xf2aa, 0xeb70, 0x60db, 0xe54, 0xa5cd, 0x0, 0x1);
        gbc.writeMem(0xd6bb, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf2aa);
        EXPECT(gbc.pc(), 0xd6bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6bb), 0x3);
        // 03 03DF
        gbc.setState(0x3048, 0xba8b, 0x9f20, 0xb06c, 0x5ffa, 0x9e4e, 0x1, 0x1);
        gbc.writeMem(0x3048, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xba8b);
        EXPECT(gbc.pc(), 0x3049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 03 03E0
        gbc.setState(0x2d46, 0xb443, 0x4d40, 0x60ce, 0x5640, 0x8d5d, 0x1, 0x0);
        gbc.writeMem(0x2d46, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xb443);
        EXPECT(gbc.pc(), 0x2d47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 03 03E1
        gbc.setState(0x9458, 0x7e02, 0x2db0, 0xff87, 0x6f17, 0xb6b5, 0x1, 0x0);
        gbc.writeMem(0x9458, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x7e02);
        EXPECT(gbc.pc(), 0x9459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9458), 0x3);
        // 03 03E2
        gbc.setState(0xd1e5, 0xc0a8, 0x1e0, 0x23f2, 0xe4d8, 0xa877, 0x1, 0x0);
        gbc.writeMem(0xd1e5, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc0a8);
        EXPECT(gbc.pc(), 0xd1e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e5), 0x3);
        // 03 03E4
        gbc.setState(0xe24b, 0x14e3, 0xa1c0, 0xf2f4, 0x9363, 0xddb8, 0x0, 0x1);
        gbc.writeMem(0xe24b, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x14e3);
        EXPECT(gbc.pc(), 0xe24c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe24b), 0x3);
        // 03 03E5
        gbc.setState(0x9d37, 0xd8de, 0x81b0, 0xd403, 0xf934, 0x2c0f, 0x0, 0x0);
        gbc.writeMem(0x9d37, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd8de);
        EXPECT(gbc.pc(), 0x9d38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d37), 0x3);
        // 03 03E6
        gbc.setState(0x829d, 0xc6d8, 0xe8b0, 0xd8c, 0x1be1, 0x162f, 0x1, 0x0);
        gbc.writeMem(0x829d, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xc6d8);
        EXPECT(gbc.pc(), 0x829e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x829d), 0x3);
        // 03 03E7
        gbc.setState(0xd4a6, 0x1024, 0xf4d0, 0x2612, 0x764b, 0xb4c2, 0x0, 0x0);
        gbc.writeMem(0xd4a6, { 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x1024);
        EXPECT(gbc.pc(), 0xd4a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4a6), 0x3);
    }
