#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_a2)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_a2) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // A2 0001
        gbc.setState(0xa1a7, 0xbd17, 0xce30, 0xcf71, 0x8927, 0xcc44, 0x1, 0x1);
        gbc.writeMem(0xa1a7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xbd17);
        EXPECT(gbc.pc(), 0xa1a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1a7), 0xa2);
        // A2 0002
        gbc.setState(0x51f4, 0xfd1a, 0xee60, 0xf908, 0xf408, 0x9956, 0x0, 0x0);
        gbc.writeMem(0x51f4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xfd1a);
        EXPECT(gbc.pc(), 0x51f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0003
        gbc.setState(0x286a, 0x1bb8, 0xd00, 0xbcda, 0xe282, 0xea41, 0x0, 0x0);
        gbc.writeMem(0x286a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x1bb8);
        EXPECT(gbc.pc(), 0x286b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0004
        gbc.setState(0x1704, 0x3aa5, 0xa250, 0x6632, 0xca46, 0x1af9, 0x1, 0x1);
        gbc.writeMem(0x1704, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3aa5);
        EXPECT(gbc.pc(), 0x1705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0005
        gbc.setState(0xd2d9, 0xf3f3, 0x2ea0, 0x12cb, 0xda73, 0x6b53, 0x0, 0x0);
        gbc.writeMem(0xd2d9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf3f3);
        EXPECT(gbc.pc(), 0xd2da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2d9), 0xa2);
        // A2 0006
        gbc.setState(0xcc88, 0xe37c, 0x9d80, 0x5e13, 0x1ba6, 0x87d, 0x0, 0x1);
        gbc.writeMem(0xcc88, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe37c);
        EXPECT(gbc.pc(), 0xcc89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc88), 0xa2);
        // A2 0007
        gbc.setState(0xac4, 0x4d39, 0x1a0, 0x656a, 0x5b8f, 0xcd00, 0x0, 0x0);
        gbc.writeMem(0xac4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4d39);
        EXPECT(gbc.pc(), 0xac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0008
        gbc.setState(0x28d8, 0xac6b, 0x2190, 0xb9dc, 0x8f9, 0xc59, 0x1, 0x1);
        gbc.writeMem(0x28d8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xac6b);
        EXPECT(gbc.pc(), 0x28d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0009
        gbc.setState(0x4e8e, 0x9dd, 0xad70, 0x704a, 0x1331, 0x7fbf, 0x0, 0x0);
        gbc.writeMem(0x4e8e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9dd);
        EXPECT(gbc.pc(), 0x4e8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 000A
        gbc.setState(0xbbab, 0x6417, 0x54c0, 0x4ac4, 0xd519, 0x6979, 0x1, 0x1);
        gbc.writeMem(0xbbab, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x6417);
        EXPECT(gbc.pc(), 0xbbac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbab), 0xa2);
        // A2 000C
        gbc.setState(0x86e7, 0x8c03, 0xe880, 0x6917, 0x9563, 0x304c, 0x1, 0x0);
        gbc.writeMem(0x86e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8c03);
        EXPECT(gbc.pc(), 0x86e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86e7), 0xa2);
        // A2 000D
        gbc.setState(0x4b95, 0x568d, 0x21b0, 0x7030, 0x53e6, 0xbef4, 0x1, 0x0);
        gbc.writeMem(0x4b95, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x568d);
        EXPECT(gbc.pc(), 0x4b96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 000E
        gbc.setState(0xe407, 0xc4b3, 0x2ec0, 0x935a, 0x1009, 0x164b, 0x0, 0x0);
        gbc.writeMem(0xe407, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc4b3);
        EXPECT(gbc.pc(), 0xe408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe407), 0xa2);
        // A2 000F
        gbc.setState(0x2f8b, 0x9689, 0xd060, 0x3bb2, 0x9016, 0x1ff4, 0x1, 0x0);
        gbc.writeMem(0x2f8b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9689);
        EXPECT(gbc.pc(), 0x2f8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0010
        gbc.setState(0xbc25, 0x30cc, 0x4a20, 0x7acb, 0xbd83, 0x8433, 0x0, 0x1);
        gbc.writeMem(0xbc25, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x30cc);
        EXPECT(gbc.pc(), 0xbc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc25), 0xa2);
        // A2 0011
        gbc.setState(0x7cc1, 0x695a, 0x77c0, 0xbb56, 0x362f, 0x10ca, 0x1, 0x0);
        gbc.writeMem(0x7cc1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x695a);
        EXPECT(gbc.pc(), 0x7cc2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0012
        gbc.setState(0x707a, 0x96fa, 0x86d0, 0xaee0, 0x2c1c, 0x8a6c, 0x1, 0x0);
        gbc.writeMem(0x707a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x96fa);
        EXPECT(gbc.pc(), 0x707b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0013
        gbc.setState(0x6ca2, 0xa8de, 0x5c60, 0x88fa, 0xf628, 0x5143, 0x1, 0x1);
        gbc.writeMem(0x6ca2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xa8de);
        EXPECT(gbc.pc(), 0x6ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0014
        gbc.setState(0x5503, 0x6971, 0x6380, 0x314d, 0xedde, 0xd30c, 0x1, 0x1);
        gbc.writeMem(0x5503, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6971);
        EXPECT(gbc.pc(), 0x5504);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0015
        gbc.setState(0x2fc0, 0xd945, 0xfe0, 0x5f83, 0x103b, 0xfdf8, 0x0, 0x1);
        gbc.writeMem(0x2fc0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xd945);
        EXPECT(gbc.pc(), 0x2fc1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0016
        gbc.setState(0x9584, 0x721e, 0x10f0, 0x1a7d, 0xdb21, 0xf414, 0x1, 0x1);
        gbc.writeMem(0x9584, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x721e);
        EXPECT(gbc.pc(), 0x9585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9584), 0xa2);
        // A2 0017
        gbc.setState(0x5184, 0xb49b, 0x84b0, 0xba29, 0x56d, 0xeb17, 0x0, 0x0);
        gbc.writeMem(0x5184, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0x5185);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0018
        gbc.setState(0x6e13, 0x6774, 0xd540, 0xd55b, 0x94f5, 0xdcfb, 0x0, 0x0);
        gbc.writeMem(0x6e13, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6774);
        EXPECT(gbc.pc(), 0x6e14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0019
        gbc.setState(0x9549, 0xd734, 0xcca0, 0x5d17, 0x782a, 0xc59f, 0x0, 0x0);
        gbc.writeMem(0x9549, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xd734);
        EXPECT(gbc.pc(), 0x954a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9549), 0xa2);
        // A2 001A
        gbc.setState(0x6404, 0x5e3f, 0x4780, 0x9501, 0x92f0, 0xdf85, 0x0, 0x0);
        gbc.writeMem(0x6404, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5e3f);
        EXPECT(gbc.pc(), 0x6405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 001B
        gbc.setState(0x1ef7, 0xc573, 0xd450, 0xa41f, 0xd8b0, 0x21ff, 0x0, 0x1);
        gbc.writeMem(0x1ef7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc573);
        EXPECT(gbc.pc(), 0x1ef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 001C
        gbc.setState(0x53cf, 0xd432, 0x8f50, 0xfe3e, 0xaf3a, 0x7fdd, 0x1, 0x1);
        gbc.writeMem(0x53cf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd432);
        EXPECT(gbc.pc(), 0x53d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 001D
        gbc.setState(0xa38a, 0xe0d3, 0xc280, 0x67ee, 0xe497, 0xb70a, 0x1, 0x1);
        gbc.writeMem(0xa38a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xe0d3);
        EXPECT(gbc.pc(), 0xa38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa38a), 0xa2);
        // A2 001E
        gbc.setState(0x86fb, 0x57c9, 0xf880, 0x4ee2, 0xffc3, 0x611e, 0x1, 0x1);
        gbc.writeMem(0x86fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x57c9);
        EXPECT(gbc.pc(), 0x86fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86fb), 0xa2);
        // A2 001F
        gbc.setState(0xa7ae, 0x9355, 0x6660, 0xa8da, 0xd096, 0x981, 0x0, 0x1);
        gbc.writeMem(0xa7ae, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9355);
        EXPECT(gbc.pc(), 0xa7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ae), 0xa2);
        // A2 0020
        gbc.setState(0x431c, 0xce0c, 0x5f20, 0x42c7, 0x8896, 0x5c9a, 0x0, 0x0);
        gbc.writeMem(0x431c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xce0c);
        EXPECT(gbc.pc(), 0x431d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0021
        gbc.setState(0xca88, 0xd7c7, 0x6cc0, 0x5760, 0x1dd8, 0x8b16, 0x1, 0x1);
        gbc.writeMem(0xca88, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xd7c7);
        EXPECT(gbc.pc(), 0xca89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca88), 0xa2);
        // A2 0022
        gbc.setState(0x60c9, 0x7f55, 0xf010, 0x3711, 0x40da, 0x96e5, 0x1, 0x0);
        gbc.writeMem(0x60c9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7f55);
        EXPECT(gbc.pc(), 0x60ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0023
        gbc.setState(0xda50, 0x21ca, 0x7db0, 0x22b5, 0xc9ea, 0xe7ec, 0x0, 0x0);
        gbc.writeMem(0xda50, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x21ca);
        EXPECT(gbc.pc(), 0xda51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda50), 0xa2);
        // A2 0024
        gbc.setState(0x4ad0, 0x755d, 0x3a40, 0xa03, 0xc4c9, 0x2e26, 0x1, 0x1);
        gbc.writeMem(0x4ad0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x755d);
        EXPECT(gbc.pc(), 0x4ad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0025
        gbc.setState(0xd328, 0x922a, 0xaf10, 0xffda, 0xe6db, 0xdc57, 0x1, 0x1);
        gbc.writeMem(0xd328, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x922a);
        EXPECT(gbc.pc(), 0xd329);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd328), 0xa2);
        // A2 0026
        gbc.setState(0x14ca, 0xdde9, 0x9340, 0x5bbb, 0x6eed, 0x4380, 0x1, 0x1);
        gbc.writeMem(0x14ca, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xdde9);
        EXPECT(gbc.pc(), 0x14cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0027
        gbc.setState(0xaf0a, 0x40f1, 0xba80, 0x7b91, 0xa89e, 0x5ab9, 0x1, 0x1);
        gbc.writeMem(0xaf0a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x40f1);
        EXPECT(gbc.pc(), 0xaf0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf0a), 0xa2);
        // A2 0028
        gbc.setState(0x3a4c, 0xf857, 0x3ce0, 0x75c5, 0xd16b, 0x770d, 0x0, 0x1);
        gbc.writeMem(0x3a4c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf857);
        EXPECT(gbc.pc(), 0x3a4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0029
        gbc.setState(0xd17c, 0x6683, 0x5400, 0xdc4b, 0x8f64, 0x314e, 0x1, 0x0);
        gbc.writeMem(0xd17c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x6683);
        EXPECT(gbc.pc(), 0xd17d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17c), 0xa2);
        // A2 002A
        gbc.setState(0x2b7c, 0x7508, 0x3770, 0xc45d, 0x7ef7, 0xb638, 0x1, 0x0);
        gbc.writeMem(0x2b7c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7508);
        EXPECT(gbc.pc(), 0x2b7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 002C
        gbc.setState(0x8123, 0x9f94, 0x22f0, 0x4182, 0xeb97, 0x2cb1, 0x0, 0x0);
        gbc.writeMem(0x8123, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9f94);
        EXPECT(gbc.pc(), 0x8124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8123), 0xa2);
        // A2 002D
        gbc.setState(0xc16b, 0x26a7, 0x92b0, 0xa63d, 0xd537, 0xeec0, 0x1, 0x1);
        gbc.writeMem(0xc16b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x26a7);
        EXPECT(gbc.pc(), 0xc16c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16b), 0xa2);
        // A2 002E
        gbc.setState(0x6495, 0x6c60, 0xd290, 0x4e8d, 0x4503, 0xd137, 0x1, 0x0);
        gbc.writeMem(0x6495, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6c60);
        EXPECT(gbc.pc(), 0x6496);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 002F
        gbc.setState(0x4475, 0xdc3d, 0xda00, 0xfe47, 0xc3bc, 0xde1c, 0x1, 0x1);
        gbc.writeMem(0x4475, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xdc3d);
        EXPECT(gbc.pc(), 0x4476);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0030
        gbc.setState(0x2466, 0x16cb, 0x6700, 0xb046, 0xaa0, 0x86e, 0x0, 0x0);
        gbc.writeMem(0x2466, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x16cb);
        EXPECT(gbc.pc(), 0x2467);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0031
        gbc.setState(0xb20f, 0x98ed, 0xd010, 0x5dd3, 0xdcea, 0xb9a1, 0x1, 0x1);
        gbc.writeMem(0xb20f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x98ed);
        EXPECT(gbc.pc(), 0xb210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20f), 0xa2);
        // A2 0032
        gbc.setState(0xee7d, 0x1d35, 0xd0f0, 0xd09f, 0xfa03, 0x2800, 0x0, 0x1);
        gbc.writeMem(0xee7d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x1d35);
        EXPECT(gbc.pc(), 0xee7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee7d), 0xa2);
        // A2 0033
        gbc.setState(0xba20, 0x58c6, 0x2630, 0x3c11, 0xed07, 0xf286, 0x0, 0x1);
        gbc.writeMem(0xba20, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x58c6);
        EXPECT(gbc.pc(), 0xba21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba20), 0xa2);
        // A2 0034
        gbc.setState(0x916c, 0xd333, 0x9840, 0xfb25, 0xb149, 0xd069, 0x0, 0x1);
        gbc.writeMem(0x916c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd333);
        EXPECT(gbc.pc(), 0x916d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x916c), 0xa2);
        // A2 0035
        gbc.setState(0xb9d9, 0x97a4, 0x1f70, 0x8ec9, 0x5e49, 0xbd06, 0x1, 0x0);
        gbc.writeMem(0xb9d9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x97a4);
        EXPECT(gbc.pc(), 0xb9da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9d9), 0xa2);
        // A2 0036
        gbc.setState(0x4dac, 0xaccc, 0x9ab0, 0x9aac, 0xa6c8, 0xf582, 0x0, 0x1);
        gbc.writeMem(0x4dac, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xaccc);
        EXPECT(gbc.pc(), 0x4dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0037
        gbc.setState(0xbe64, 0x85a3, 0x70, 0x441, 0xba2f, 0x728a, 0x0, 0x0);
        gbc.writeMem(0xbe64, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x85a3);
        EXPECT(gbc.pc(), 0xbe65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe64), 0xa2);
        // A2 0038
        gbc.setState(0x3976, 0x64be, 0x7e80, 0x3a9, 0x93ce, 0x41a2, 0x1, 0x1);
        gbc.writeMem(0x3976, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x64be);
        EXPECT(gbc.pc(), 0x3977);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 003A
        gbc.setState(0xc1, 0x343, 0xd0, 0x7830, 0x6fdf, 0x7dab, 0x0, 0x1);
        gbc.writeMem(0xc1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x343);
        EXPECT(gbc.pc(), 0xc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 003B
        gbc.setState(0x7047, 0xc7f2, 0x9760, 0x5f0f, 0x4fd3, 0x9f73, 0x0, 0x1);
        gbc.writeMem(0x7047, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc7f2);
        EXPECT(gbc.pc(), 0x7048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 003C
        gbc.setState(0xa4ae, 0x2014, 0x2100, 0xb397, 0x5c4, 0x76b5, 0x1, 0x1);
        gbc.writeMem(0xa4ae, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2014);
        EXPECT(gbc.pc(), 0xa4af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4ae), 0xa2);
        // A2 003D
        gbc.setState(0x254a, 0x8b5b, 0x30a0, 0x62d9, 0x1553, 0xdb2d, 0x0, 0x0);
        gbc.writeMem(0x254a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x8b5b);
        EXPECT(gbc.pc(), 0x254b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 003E
        gbc.setState(0x7f84, 0xe0cd, 0x2ad0, 0xb176, 0x1081, 0x6228, 0x1, 0x0);
        gbc.writeMem(0x7f84, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xe0cd);
        EXPECT(gbc.pc(), 0x7f85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 003F
        gbc.setState(0xcb2f, 0x346d, 0x2ea0, 0x1f46, 0xd43, 0x5209, 0x1, 0x0);
        gbc.writeMem(0xcb2f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x346d);
        EXPECT(gbc.pc(), 0xcb30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb2f), 0xa2);
        // A2 0040
        gbc.setState(0x7105, 0x8db0, 0xa300, 0xfe43, 0x6177, 0xefdc, 0x1, 0x0);
        gbc.writeMem(0x7105, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x8db0);
        EXPECT(gbc.pc(), 0x7106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0041
        gbc.setState(0xd5b4, 0x63d4, 0xaa20, 0x9339, 0xd068, 0x8051, 0x1, 0x1);
        gbc.writeMem(0xd5b4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x63d4);
        EXPECT(gbc.pc(), 0xd5b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b4), 0xa2);
        // A2 0042
        gbc.setState(0x19e7, 0x25c2, 0xf5c0, 0x8426, 0x30ae, 0x60d0, 0x1, 0x1);
        gbc.writeMem(0x19e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x25c2);
        EXPECT(gbc.pc(), 0x19e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0043
        gbc.setState(0x1741, 0xeea, 0x90f0, 0xa863, 0x4ae9, 0xb617, 0x1, 0x1);
        gbc.writeMem(0x1741, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xeea);
        EXPECT(gbc.pc(), 0x1742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0044
        gbc.setState(0x52ef, 0xd6dc, 0x710, 0x7a1a, 0xf83b, 0xe764, 0x0, 0x0);
        gbc.writeMem(0x52ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd6dc);
        EXPECT(gbc.pc(), 0x52f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0045
        gbc.setState(0x2bf8, 0x590, 0x4d70, 0x679c, 0xe641, 0xe758, 0x1, 0x0);
        gbc.writeMem(0x2bf8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x590);
        EXPECT(gbc.pc(), 0x2bf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0046
        gbc.setState(0xc07d, 0x5bf5, 0x35d0, 0x6121, 0xa1fc, 0x3ca1, 0x1, 0x0);
        gbc.writeMem(0xc07d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5bf5);
        EXPECT(gbc.pc(), 0xc07e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc07d), 0xa2);
        // A2 0047
        gbc.setState(0x1074, 0xbdb5, 0x9780, 0xc295, 0x114f, 0x6669, 0x0, 0x1);
        gbc.writeMem(0x1074, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbdb5);
        EXPECT(gbc.pc(), 0x1075);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0048
        gbc.setState(0xaace, 0x6ce7, 0xfaf0, 0x7ad3, 0xa6d, 0x73fb, 0x0, 0x0);
        gbc.writeMem(0xaace, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6ce7);
        EXPECT(gbc.pc(), 0xaacf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaace), 0xa2);
        // A2 0049
        gbc.setState(0x7456, 0x7fb3, 0x1820, 0xfe25, 0x82c4, 0x735f, 0x0, 0x1);
        gbc.writeMem(0x7456, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7fb3);
        EXPECT(gbc.pc(), 0x7457);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 004A
        gbc.setState(0xe0fc, 0xe6fc, 0x43f0, 0x436a, 0x141f, 0x9f5d, 0x0, 0x1);
        gbc.writeMem(0xe0fc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe6fc);
        EXPECT(gbc.pc(), 0xe0fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0fc), 0xa2);
        // A2 004B
        gbc.setState(0xaaf1, 0xafe3, 0x2df0, 0xeaf9, 0x14e8, 0x4d03, 0x0, 0x0);
        gbc.writeMem(0xaaf1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xafe3);
        EXPECT(gbc.pc(), 0xaaf2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaaf1), 0xa2);
        // A2 004C
        gbc.setState(0x7179, 0xe994, 0x3890, 0xefef, 0x3722, 0xbb05, 0x1, 0x1);
        gbc.writeMem(0x7179, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xe994);
        EXPECT(gbc.pc(), 0x717a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 004D
        gbc.setState(0x9b94, 0x1392, 0x15d0, 0x4e71, 0x5891, 0xcbfd, 0x1, 0x1);
        gbc.writeMem(0x9b94, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1392);
        EXPECT(gbc.pc(), 0x9b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b94), 0xa2);
        // A2 004E
        gbc.setState(0x43a1, 0xd59c, 0xfd40, 0xb65a, 0xf79, 0x966b, 0x1, 0x0);
        gbc.writeMem(0x43a1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd59c);
        EXPECT(gbc.pc(), 0x43a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 004F
        gbc.setState(0xd7f8, 0x1fa5, 0x320, 0x52ad, 0xb770, 0xb178, 0x0, 0x0);
        gbc.writeMem(0xd7f8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1fa5);
        EXPECT(gbc.pc(), 0xd7f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f8), 0xa2);
        // A2 0050
        gbc.setState(0xc42f, 0x31eb, 0x47a0, 0x91fa, 0x2246, 0xf230, 0x0, 0x0);
        gbc.writeMem(0xc42f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x31eb);
        EXPECT(gbc.pc(), 0xc430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42f), 0xa2);
        // A2 0051
        gbc.setState(0xb20d, 0xb990, 0x9c0, 0x17e2, 0xbc3a, 0xa8da, 0x1, 0x1);
        gbc.writeMem(0xb20d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xb990);
        EXPECT(gbc.pc(), 0xb20e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb20d), 0xa2);
        // A2 0052
        gbc.setState(0x6935, 0xef8b, 0xf7e0, 0x451e, 0xf2ad, 0x88de, 0x0, 0x1);
        gbc.writeMem(0x6935, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xef8b);
        EXPECT(gbc.pc(), 0x6936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0053
        gbc.setState(0x58be, 0xe8a9, 0x7af0, 0x290c, 0xc8a2, 0xf6f3, 0x1, 0x0);
        gbc.writeMem(0x58be, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xe8a9);
        EXPECT(gbc.pc(), 0x58bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0054
        gbc.setState(0x845f, 0xdda6, 0xbda0, 0xf708, 0x1c46, 0xc93c, 0x0, 0x0);
        gbc.writeMem(0x845f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdda6);
        EXPECT(gbc.pc(), 0x8460);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x845f), 0xa2);
        // A2 0055
        gbc.setState(0xc77a, 0xd5, 0x3b00, 0x320b, 0x87b, 0x2c2e, 0x1, 0x0);
        gbc.writeMem(0xc77a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xd5);
        EXPECT(gbc.pc(), 0xc77b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc77a), 0xa2);
        // A2 0056
        gbc.setState(0x7810, 0xb4c2, 0xd500, 0x11f5, 0xf900, 0x2d8b, 0x0, 0x1);
        gbc.writeMem(0x7810, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb4c2);
        EXPECT(gbc.pc(), 0x7811);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0057
        gbc.setState(0x4a1e, 0x3de9, 0xb3b0, 0x88c9, 0x4b15, 0xe857, 0x0, 0x0);
        gbc.writeMem(0x4a1e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3de9);
        EXPECT(gbc.pc(), 0x4a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0058
        gbc.setState(0x946, 0x8aaf, 0x79f0, 0x340c, 0xc4f9, 0x4aed, 0x0, 0x0);
        gbc.writeMem(0x946, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x8aaf);
        EXPECT(gbc.pc(), 0x947);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0059
        gbc.setState(0xae4f, 0x447f, 0xb6e0, 0xcce, 0xe6dd, 0xb7f0, 0x0, 0x0);
        gbc.writeMem(0xae4f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x447f);
        EXPECT(gbc.pc(), 0xae50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4f), 0xa2);
        // A2 005A
        gbc.setState(0x33ce, 0xd542, 0x3200, 0x696, 0xed8b, 0x618c, 0x0, 0x0);
        gbc.writeMem(0x33ce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xd542);
        EXPECT(gbc.pc(), 0x33cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 005B
        gbc.setState(0xa7cb, 0xcdb8, 0xe020, 0x80bc, 0xe1a9, 0xd1c4, 0x1, 0x1);
        gbc.writeMem(0xa7cb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xcdb8);
        EXPECT(gbc.pc(), 0xa7cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7cb), 0xa2);
        // A2 005C
        gbc.setState(0xe44b, 0xab82, 0x990, 0xd973, 0xe0a7, 0x954e, 0x1, 0x0);
        gbc.writeMem(0xe44b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xab82);
        EXPECT(gbc.pc(), 0xe44c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44b), 0xa2);
        // A2 005D
        gbc.setState(0x7530, 0x6f08, 0xec60, 0x51da, 0xaf90, 0x5f33, 0x0, 0x1);
        gbc.writeMem(0x7530, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6f08);
        EXPECT(gbc.pc(), 0x7531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 005E
        gbc.setState(0x2e65, 0x3260, 0xa8e0, 0x1299, 0x8f31, 0xd9e6, 0x0, 0x0);
        gbc.writeMem(0x2e65, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x3260);
        EXPECT(gbc.pc(), 0x2e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 005F
        gbc.setState(0xb343, 0x8797, 0x9b30, 0x7ec4, 0xa810, 0x2ef8, 0x1, 0x0);
        gbc.writeMem(0xb343, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x8797);
        EXPECT(gbc.pc(), 0xb344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb343), 0xa2);
        // A2 0060
        gbc.setState(0xa733, 0x77ff, 0x26d0, 0x7b4c, 0xbc3b, 0xb8d8, 0x0, 0x1);
        gbc.writeMem(0xa733, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x77ff);
        EXPECT(gbc.pc(), 0xa734);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa733), 0xa2);
        // A2 0061
        gbc.setState(0x7dd0, 0x74e8, 0x2810, 0x82e5, 0x402, 0x6708, 0x1, 0x1);
        gbc.writeMem(0x7dd0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x74e8);
        EXPECT(gbc.pc(), 0x7dd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0062
        gbc.setState(0xdfd, 0x26ff, 0xfdb0, 0xea19, 0x8c3b, 0xc61b, 0x0, 0x1);
        gbc.writeMem(0xdfd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x26ff);
        EXPECT(gbc.pc(), 0xdfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0064
        gbc.setState(0x5a5, 0xb72d, 0xd3a0, 0xc284, 0xab75, 0xb5bd, 0x0, 0x0);
        gbc.writeMem(0x5a5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb72d);
        EXPECT(gbc.pc(), 0x5a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0066
        gbc.setState(0x199a, 0xd115, 0xfd30, 0x781e, 0x6cdf, 0xf5ec, 0x0, 0x1);
        gbc.writeMem(0x199a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xd115);
        EXPECT(gbc.pc(), 0x199b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0067
        gbc.setState(0x4647, 0x7157, 0x40f0, 0xbe97, 0x9b3e, 0x81e, 0x1, 0x0);
        gbc.writeMem(0x4647, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7157);
        EXPECT(gbc.pc(), 0x4648);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0068
        gbc.setState(0x46e8, 0x9ad0, 0xa600, 0xcb8f, 0x9e1e, 0xd22c, 0x1, 0x0);
        gbc.writeMem(0x46e8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9ad0);
        EXPECT(gbc.pc(), 0x46e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0069
        gbc.setState(0xa79f, 0x9a7b, 0x8d60, 0x9d13, 0x876b, 0x8a29, 0x1, 0x0);
        gbc.writeMem(0xa79f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9a7b);
        EXPECT(gbc.pc(), 0xa7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa79f), 0xa2);
        // A2 006A
        gbc.setState(0xd565, 0x6713, 0xde50, 0x15df, 0x90ef, 0x8b84, 0x1, 0x0);
        gbc.writeMem(0xd565, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6713);
        EXPECT(gbc.pc(), 0xd566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd565), 0xa2);
        // A2 006B
        gbc.setState(0xa73c, 0xdd88, 0xa7b0, 0xfdb3, 0x45b9, 0xe246, 0x1, 0x0);
        gbc.writeMem(0xa73c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdd88);
        EXPECT(gbc.pc(), 0xa73d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa73c), 0xa2);
        // A2 006C
        gbc.setState(0xe370, 0xa1cc, 0xf9a0, 0xb63f, 0x5e33, 0x7b66, 0x0, 0x0);
        gbc.writeMem(0xe370, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xa1cc);
        EXPECT(gbc.pc(), 0xe371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe370), 0xa2);
        // A2 006D
        gbc.setState(0x8ccc, 0x2364, 0x360, 0x93ed, 0x66ff, 0x9f9f, 0x1, 0x1);
        gbc.writeMem(0x8ccc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2364);
        EXPECT(gbc.pc(), 0x8ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ccc), 0xa2);
        // A2 006E
        gbc.setState(0xdf15, 0x625b, 0xc810, 0x3e66, 0xd9d2, 0x211e, 0x0, 0x1);
        gbc.writeMem(0xdf15, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x625b);
        EXPECT(gbc.pc(), 0xdf16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf15), 0xa2);
        // A2 006F
        gbc.setState(0x4022, 0x1248, 0x2400, 0x9b83, 0x378b, 0xd12a, 0x1, 0x1);
        gbc.writeMem(0x4022, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x1248);
        EXPECT(gbc.pc(), 0x4023);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0070
        gbc.setState(0xa17a, 0x4874, 0x6a60, 0x4034, 0x6843, 0x31a6, 0x1, 0x1);
        gbc.writeMem(0xa17a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x4874);
        EXPECT(gbc.pc(), 0xa17b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa17a), 0xa2);
        // A2 0071
        gbc.setState(0xdd70, 0x2655, 0x3030, 0xf746, 0xc403, 0x357b, 0x1, 0x1);
        gbc.writeMem(0xdd70, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x2655);
        EXPECT(gbc.pc(), 0xdd71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd70), 0xa2);
        // A2 0072
        gbc.setState(0xe9bf, 0x39a, 0x59f0, 0x5e9c, 0x39df, 0x4dbd, 0x0, 0x1);
        gbc.writeMem(0xe9bf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x39a);
        EXPECT(gbc.pc(), 0xe9c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9bf), 0xa2);
        // A2 0073
        gbc.setState(0xa29f, 0xc819, 0xdda0, 0x1071, 0x9e6a, 0x2635, 0x0, 0x1);
        gbc.writeMem(0xa29f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xc819);
        EXPECT(gbc.pc(), 0xa2a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa29f), 0xa2);
        // A2 0074
        gbc.setState(0x9a80, 0xa23e, 0x43e0, 0xde6e, 0xbbe9, 0x9b3f, 0x1, 0x0);
        gbc.writeMem(0x9a80, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa23e);
        EXPECT(gbc.pc(), 0x9a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a80), 0xa2);
        // A2 0075
        gbc.setState(0xc388, 0x4f57, 0x8080, 0xb98e, 0x95f0, 0x11e8, 0x0, 0x1);
        gbc.writeMem(0xc388, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4f57);
        EXPECT(gbc.pc(), 0xc389);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc388), 0xa2);
        // A2 0076
        gbc.setState(0xc138, 0xccd0, 0x95f0, 0x8426, 0x1239, 0x6c7, 0x1, 0x1);
        gbc.writeMem(0xc138, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xccd0);
        EXPECT(gbc.pc(), 0xc139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc138), 0xa2);
        // A2 0077
        gbc.setState(0x80c1, 0x2c3c, 0x1d0, 0xd7bc, 0x9d9c, 0xea8c, 0x0, 0x0);
        gbc.writeMem(0x80c1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x2c3c);
        EXPECT(gbc.pc(), 0x80c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c1), 0xa2);
        // A2 0078
        gbc.setState(0x8547, 0x7b28, 0x4d60, 0x706d, 0xdab6, 0x8f89, 0x0, 0x0);
        gbc.writeMem(0x8547, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7b28);
        EXPECT(gbc.pc(), 0x8548);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8547), 0xa2);
        // A2 0079
        gbc.setState(0xa5e0, 0x16e1, 0x8220, 0xb1af, 0xe9bb, 0x303e, 0x0, 0x0);
        gbc.writeMem(0xa5e0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x16e1);
        EXPECT(gbc.pc(), 0xa5e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e0), 0xa2);
        // A2 007A
        gbc.setState(0x2dff, 0xa873, 0x20, 0x54af, 0x7a53, 0x4e9c, 0x1, 0x1);
        gbc.writeMem(0x2dff, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa873);
        EXPECT(gbc.pc(), 0x2e00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 007B
        gbc.setState(0x2813, 0x4d16, 0x2520, 0x2efa, 0x2585, 0xab31, 0x1, 0x1);
        gbc.writeMem(0x2813, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x4d16);
        EXPECT(gbc.pc(), 0x2814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 007C
        gbc.setState(0xa08b, 0x764, 0x9510, 0xb620, 0x55ee, 0x18d2, 0x1, 0x0);
        gbc.writeMem(0xa08b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x764);
        EXPECT(gbc.pc(), 0xa08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08b), 0xa2);
        // A2 007D
        gbc.setState(0x9d5, 0x9382, 0xdc30, 0x8964, 0x639c, 0xff19, 0x1, 0x1);
        gbc.writeMem(0x9d5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9382);
        EXPECT(gbc.pc(), 0x9d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 007E
        gbc.setState(0x2bf9, 0x5f6a, 0xa9f0, 0x4a5c, 0x8286, 0x1748, 0x1, 0x0);
        gbc.writeMem(0x2bf9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5f6a);
        EXPECT(gbc.pc(), 0x2bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 007F
        gbc.setState(0x97ab, 0x284d, 0x14a0, 0xdb15, 0x5a09, 0xb895, 0x0, 0x1);
        gbc.writeMem(0x97ab, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x284d);
        EXPECT(gbc.pc(), 0x97ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97ab), 0xa2);
        // A2 0080
        gbc.setState(0xad91, 0x2517, 0xbfe0, 0xbd5, 0xa9d6, 0xa2f0, 0x1, 0x1);
        gbc.writeMem(0xad91, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x2517);
        EXPECT(gbc.pc(), 0xad92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad91), 0xa2);
        // A2 0081
        gbc.setState(0x759d, 0x782c, 0x60, 0xfe4b, 0xee97, 0x3392, 0x1, 0x1);
        gbc.writeMem(0x759d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x782c);
        EXPECT(gbc.pc(), 0x759e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0082
        gbc.setState(0x4368, 0xe88b, 0x9030, 0xe5a4, 0xf146, 0x833a, 0x1, 0x0);
        gbc.writeMem(0x4368, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe88b);
        EXPECT(gbc.pc(), 0x4369);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0083
        gbc.setState(0x6066, 0x697, 0x2470, 0xddbb, 0x268, 0xb062, 0x0, 0x1);
        gbc.writeMem(0x6066, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x697);
        EXPECT(gbc.pc(), 0x6067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0084
        gbc.setState(0x5576, 0x9e92, 0x9fd0, 0x77b5, 0x45e9, 0xf4e2, 0x0, 0x0);
        gbc.writeMem(0x5576, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x9e92);
        EXPECT(gbc.pc(), 0x5577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0085
        gbc.setState(0x28bf, 0x5bd4, 0xa220, 0xa756, 0xb25b, 0x35f7, 0x1, 0x0);
        gbc.writeMem(0x28bf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x5bd4);
        EXPECT(gbc.pc(), 0x28c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0086
        gbc.setState(0x3b92, 0xf34d, 0xaa10, 0x6d11, 0x484, 0xecdd, 0x1, 0x1);
        gbc.writeMem(0x3b92, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf34d);
        EXPECT(gbc.pc(), 0x3b93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0087
        gbc.setState(0x80c2, 0x6702, 0xe590, 0xeb7c, 0x8c7c, 0x3c1a, 0x1, 0x1);
        gbc.writeMem(0x80c2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6702);
        EXPECT(gbc.pc(), 0x80c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80c2), 0xa2);
        // A2 0088
        gbc.setState(0xf16, 0xcb83, 0x3200, 0xc14e, 0x9244, 0xe549, 0x1, 0x0);
        gbc.writeMem(0xf16, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xcb83);
        EXPECT(gbc.pc(), 0xf17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0089
        gbc.setState(0x84ef, 0x1a51, 0xd510, 0x5176, 0x3cd4, 0x4af7, 0x0, 0x1);
        gbc.writeMem(0x84ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x1a51);
        EXPECT(gbc.pc(), 0x84f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ef), 0xa2);
        // A2 008A
        gbc.setState(0x648a, 0xe343, 0x5800, 0x1e7a, 0x3a74, 0xdc4a, 0x1, 0x1);
        gbc.writeMem(0x648a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xe343);
        EXPECT(gbc.pc(), 0x648b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 008B
        gbc.setState(0x71d, 0x83dd, 0x98c0, 0x34ff, 0x5e50, 0x9070, 0x1, 0x0);
        gbc.writeMem(0x71d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x83dd);
        EXPECT(gbc.pc(), 0x71e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 008C
        gbc.setState(0x1a45, 0x13cc, 0x3690, 0xe078, 0xc12a, 0x59c3, 0x0, 0x1);
        gbc.writeMem(0x1a45, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x13cc);
        EXPECT(gbc.pc(), 0x1a46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 008D
        gbc.setState(0x1fec, 0xc134, 0x1f80, 0xec4c, 0x651e, 0x3253, 0x0, 0x1);
        gbc.writeMem(0x1fec, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc134);
        EXPECT(gbc.pc(), 0x1fed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 008E
        gbc.setState(0xa486, 0x2ada, 0xb570, 0x7ace, 0x9eb7, 0xac56, 0x1, 0x1);
        gbc.writeMem(0xa486, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x2ada);
        EXPECT(gbc.pc(), 0xa487);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa486), 0xa2);
        // A2 008F
        gbc.setState(0xd4b1, 0xba6d, 0xd220, 0x1de0, 0xdbc5, 0xbca5, 0x1, 0x0);
        gbc.writeMem(0xd4b1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xba6d);
        EXPECT(gbc.pc(), 0xd4b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4b1), 0xa2);
        // A2 0090
        gbc.setState(0x5065, 0x1049, 0x350, 0xe46e, 0x63d2, 0x78d7, 0x0, 0x0);
        gbc.writeMem(0x5065, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x1049);
        EXPECT(gbc.pc(), 0x5066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0091
        gbc.setState(0x9a80, 0x410b, 0x8260, 0x6251, 0xdd91, 0xf8c1, 0x1, 0x1);
        gbc.writeMem(0x9a80, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x410b);
        EXPECT(gbc.pc(), 0x9a81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a80), 0xa2);
        // A2 0092
        gbc.setState(0x3006, 0xdd9b, 0x4730, 0xb941, 0x66b3, 0x5112, 0x0, 0x1);
        gbc.writeMem(0x3006, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xdd9b);
        EXPECT(gbc.pc(), 0x3007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0093
        gbc.setState(0x5a44, 0x7c11, 0xfab0, 0x155a, 0xb3db, 0x35c7, 0x0, 0x0);
        gbc.writeMem(0x5a44, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7c11);
        EXPECT(gbc.pc(), 0x5a45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0094
        gbc.setState(0x1f4b, 0x4bc0, 0xeb80, 0x8cc7, 0xf166, 0x49f, 0x0, 0x0);
        gbc.writeMem(0x1f4b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4bc0);
        EXPECT(gbc.pc(), 0x1f4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0095
        gbc.setState(0x2f74, 0xd900, 0x76a0, 0x9b4c, 0x4b3c, 0xdbbe, 0x1, 0x0);
        gbc.writeMem(0x2f74, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd900);
        EXPECT(gbc.pc(), 0x2f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0096
        gbc.setState(0x6ff3, 0x15b7, 0x9380, 0xd2f5, 0x1671, 0x88d1, 0x0, 0x1);
        gbc.writeMem(0x6ff3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x15b7);
        EXPECT(gbc.pc(), 0x6ff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0097
        gbc.setState(0x35af, 0x45ee, 0xee0, 0x48ef, 0x391d, 0x10a0, 0x1, 0x1);
        gbc.writeMem(0x35af, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x45ee);
        EXPECT(gbc.pc(), 0x35b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0098
        gbc.setState(0xad16, 0xe7c1, 0x37c0, 0x466f, 0x6e00, 0xa868, 0x0, 0x0);
        gbc.writeMem(0xad16, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe7c1);
        EXPECT(gbc.pc(), 0xad17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad16), 0xa2);
        // A2 0099
        gbc.setState(0xc7cc, 0x3287, 0xf940, 0xb537, 0x3899, 0xdb30, 0x0, 0x1);
        gbc.writeMem(0xc7cc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x3287);
        EXPECT(gbc.pc(), 0xc7cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7cc), 0xa2);
        // A2 009A
        gbc.setState(0xe01c, 0x1390, 0xfdb0, 0xa1a8, 0xc9fb, 0x9709, 0x0, 0x0);
        gbc.writeMem(0xe01c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1390);
        EXPECT(gbc.pc(), 0xe01d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe01c), 0xa2);
        // A2 009B
        gbc.setState(0x68bd, 0x48c7, 0x2ee0, 0x741f, 0xab46, 0x1513, 0x0, 0x0);
        gbc.writeMem(0x68bd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x48c7);
        EXPECT(gbc.pc(), 0x68be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 009E
        gbc.setState(0xcade, 0xadb2, 0x670, 0xba1a, 0x1b36, 0xb186, 0x0, 0x1);
        gbc.writeMem(0xcade, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xadb2);
        EXPECT(gbc.pc(), 0xcadf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcade), 0xa2);
        // A2 009F
        gbc.setState(0x7b80, 0x3ac5, 0x53e0, 0x4cde, 0x27c7, 0xb22d, 0x0, 0x0);
        gbc.writeMem(0x7b80, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3ac5);
        EXPECT(gbc.pc(), 0x7b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00A0
        gbc.setState(0xd077, 0x4c27, 0xdb0, 0x673e, 0xca4, 0xaeba, 0x0, 0x1);
        gbc.writeMem(0xd077, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x4c27);
        EXPECT(gbc.pc(), 0xd078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd077), 0xa2);
        // A2 00A1
        gbc.setState(0x4325, 0x7142, 0x3030, 0xf448, 0x68b, 0xf78c, 0x0, 0x1);
        gbc.writeMem(0x4325, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7142);
        EXPECT(gbc.pc(), 0x4326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00A2
        gbc.setState(0x80ea, 0xd285, 0x6540, 0x2e19, 0x7549, 0x636b, 0x1, 0x1);
        gbc.writeMem(0x80ea, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd285);
        EXPECT(gbc.pc(), 0x80eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80ea), 0xa2);
        // A2 00A3
        gbc.setState(0xbe33, 0x37aa, 0xd970, 0x155c, 0x7d47, 0xb663, 0x1, 0x0);
        gbc.writeMem(0xbe33, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x37aa);
        EXPECT(gbc.pc(), 0xbe34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe33), 0xa2);
        // A2 00A4
        gbc.setState(0xee89, 0x5618, 0x8230, 0x3328, 0xe0c6, 0x68d2, 0x1, 0x0);
        gbc.writeMem(0xee89, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5618);
        EXPECT(gbc.pc(), 0xee8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee89), 0xa2);
        // A2 00A5
        gbc.setState(0x605d, 0xb09, 0xce10, 0xc31b, 0x88eb, 0x2e13, 0x0, 0x1);
        gbc.writeMem(0x605d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xb09);
        EXPECT(gbc.pc(), 0x605e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00A6
        gbc.setState(0x1a8a, 0xa98, 0x56c0, 0xc58a, 0xf2b5, 0x4a3e, 0x0, 0x0);
        gbc.writeMem(0x1a8a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa98);
        EXPECT(gbc.pc(), 0x1a8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00A7
        gbc.setState(0xde24, 0x9e8f, 0xd9d0, 0xe72e, 0x8504, 0xad7f, 0x1, 0x1);
        gbc.writeMem(0xde24, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x9e8f);
        EXPECT(gbc.pc(), 0xde25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde24), 0xa2);
        // A2 00A8
        gbc.setState(0x5337, 0x59a1, 0xaa10, 0x479f, 0x6978, 0x34f9, 0x0, 0x0);
        gbc.writeMem(0x5337, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x59a1);
        EXPECT(gbc.pc(), 0x5338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00A9
        gbc.setState(0x7376, 0x50df, 0xe550, 0x4968, 0xf9c1, 0x3d18, 0x0, 0x1);
        gbc.writeMem(0x7376, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x50df);
        EXPECT(gbc.pc(), 0x7377);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00AA
        gbc.setState(0xae4b, 0xcab7, 0xf520, 0xf16d, 0x4db, 0x66c7, 0x0, 0x0);
        gbc.writeMem(0xae4b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xcab7);
        EXPECT(gbc.pc(), 0xae4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae4b), 0xa2);
        // A2 00AC
        gbc.setState(0x12ec, 0xf72e, 0x15d0, 0xf6d8, 0xb5, 0x2677, 0x1, 0x0);
        gbc.writeMem(0x12ec, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xf72e);
        EXPECT(gbc.pc(), 0x12ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00AD
        gbc.setState(0xa22, 0xbaba, 0xa480, 0x2e54, 0xd72b, 0xf0c, 0x1, 0x1);
        gbc.writeMem(0xa22, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbaba);
        EXPECT(gbc.pc(), 0xa23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00AE
        gbc.setState(0x222c, 0x81e2, 0x2d90, 0xc872, 0x4502, 0x203d, 0x1, 0x0);
        gbc.writeMem(0x222c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x81e2);
        EXPECT(gbc.pc(), 0x222d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00AF
        gbc.setState(0xcce6, 0xc79a, 0x5350, 0xf051, 0xa377, 0x377, 0x0, 0x1);
        gbc.writeMem(0xcce6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc79a);
        EXPECT(gbc.pc(), 0xcce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcce6), 0xa2);
        // A2 00B0
        gbc.setState(0x9d04, 0x9b22, 0x1f80, 0x78e3, 0x47d, 0x1976, 0x0, 0x0);
        gbc.writeMem(0x9d04, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9b22);
        EXPECT(gbc.pc(), 0x9d05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d04), 0xa2);
        // A2 00B1
        gbc.setState(0xad3a, 0x2cf, 0xa9f0, 0x1756, 0xb377, 0xf86, 0x1, 0x0);
        gbc.writeMem(0xad3a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2cf);
        EXPECT(gbc.pc(), 0xad3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad3a), 0xa2);
        // A2 00B2
        gbc.setState(0x297d, 0x227c, 0x3dd0, 0x1af9, 0xa56b, 0x1e18, 0x1, 0x1);
        gbc.writeMem(0x297d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x227c);
        EXPECT(gbc.pc(), 0x297e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00B3
        gbc.setState(0x17e8, 0x21a4, 0xe480, 0x28e8, 0x4505, 0x5cbc, 0x0, 0x1);
        gbc.writeMem(0x17e8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x21a4);
        EXPECT(gbc.pc(), 0x17e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00B4
        gbc.setState(0x29d2, 0x15f5, 0xa680, 0xbd49, 0x1462, 0x6195, 0x0, 0x0);
        gbc.writeMem(0x29d2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x15f5);
        EXPECT(gbc.pc(), 0x29d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00B5
        gbc.setState(0xe109, 0xe8e5, 0xd650, 0x4c98, 0xf745, 0x698a, 0x1, 0x0);
        gbc.writeMem(0xe109, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xe8e5);
        EXPECT(gbc.pc(), 0xe10a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe109), 0xa2);
        // A2 00B7
        gbc.setState(0xb029, 0xb737, 0x6880, 0x4cb2, 0x826a, 0xe78e, 0x0, 0x0);
        gbc.writeMem(0xb029, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb737);
        EXPECT(gbc.pc(), 0xb02a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb029), 0xa2);
        // A2 00B8
        gbc.setState(0x94a8, 0x4009, 0xa430, 0x81ad, 0x1dae, 0x68bb, 0x0, 0x0);
        gbc.writeMem(0x94a8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4009);
        EXPECT(gbc.pc(), 0x94a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a8), 0xa2);
        // A2 00B9
        gbc.setState(0x51b4, 0x6b0a, 0x8cc0, 0xcf02, 0x7c15, 0xd6be, 0x1, 0x0);
        gbc.writeMem(0x51b4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x6b0a);
        EXPECT(gbc.pc(), 0x51b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00BA
        gbc.setState(0x78fb, 0x9755, 0xd830, 0x8aa7, 0x8cda, 0x2a02, 0x1, 0x0);
        gbc.writeMem(0x78fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x9755);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00BB
        gbc.setState(0xc9e7, 0xf08b, 0xba0, 0x9c24, 0x7872, 0x680b, 0x1, 0x0);
        gbc.writeMem(0xc9e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf08b);
        EXPECT(gbc.pc(), 0xc9e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9e7), 0xa2);
        // A2 00BC
        gbc.setState(0x71a, 0x1325, 0xb810, 0x8b42, 0x7651, 0x56c, 0x0, 0x0);
        gbc.writeMem(0x71a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1325);
        EXPECT(gbc.pc(), 0x71b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00BD
        gbc.setState(0x62c6, 0xe471, 0x7400, 0x9f8e, 0x9613, 0xe90d, 0x0, 0x0);
        gbc.writeMem(0x62c6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe471);
        EXPECT(gbc.pc(), 0x62c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00BE
        gbc.setState(0x31d, 0x6c3c, 0xbc10, 0x98b5, 0x4b19, 0x627b, 0x0, 0x0);
        gbc.writeMem(0x31d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x6c3c);
        EXPECT(gbc.pc(), 0x31e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00BF
        gbc.setState(0xa3b7, 0xcd6d, 0x6910, 0xeb84, 0x43cb, 0x250f, 0x1, 0x0);
        gbc.writeMem(0xa3b7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xcd6d);
        EXPECT(gbc.pc(), 0xa3b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3b7), 0xa2);
        // A2 00C0
        gbc.setState(0x1fda, 0xc387, 0x88c0, 0x85fd, 0x2f51, 0x57c4, 0x1, 0x0);
        gbc.writeMem(0x1fda, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc387);
        EXPECT(gbc.pc(), 0x1fdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C1
        gbc.setState(0x8a87, 0xd698, 0x2770, 0x43f, 0xce74, 0xb038, 0x1, 0x1);
        gbc.writeMem(0x8a87, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xd698);
        EXPECT(gbc.pc(), 0x8a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a87), 0xa2);
        // A2 00C2
        gbc.setState(0x561c, 0x36e6, 0xb080, 0x619, 0x6389, 0x2a4f, 0x0, 0x1);
        gbc.writeMem(0x561c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x36e6);
        EXPECT(gbc.pc(), 0x561d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C3
        gbc.setState(0xe630, 0x3a49, 0xeb90, 0xfb33, 0xcd11, 0xa9f1, 0x0, 0x1);
        gbc.writeMem(0xe630, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3a49);
        EXPECT(gbc.pc(), 0xe631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe630), 0xa2);
        // A2 00C4
        gbc.setState(0x5de3, 0x26f, 0xd100, 0xae57, 0x1540, 0x3fca, 0x0, 0x0);
        gbc.writeMem(0x5de3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x26f);
        EXPECT(gbc.pc(), 0x5de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C5
        gbc.setState(0x5c27, 0xb87c, 0x3310, 0xcfbf, 0x458a, 0x8fe0, 0x0, 0x0);
        gbc.writeMem(0x5c27, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xb87c);
        EXPECT(gbc.pc(), 0x5c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C6
        gbc.setState(0xe557, 0x2ca4, 0x4a30, 0xc5ab, 0x6204, 0x7c44, 0x0, 0x1);
        gbc.writeMem(0xe557, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2ca4);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe557), 0xa2);
        // A2 00C7
        gbc.setState(0x5b25, 0x547, 0x79c0, 0x1e1a, 0x966d, 0xc343, 0x1, 0x1);
        gbc.writeMem(0x5b25, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x547);
        EXPECT(gbc.pc(), 0x5b26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C8
        gbc.setState(0x1e87, 0x44c2, 0xdcb0, 0x8923, 0xbd34, 0x47d1, 0x1, 0x1);
        gbc.writeMem(0x1e87, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x44c2);
        EXPECT(gbc.pc(), 0x1e88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00C9
        gbc.setState(0x9975, 0x33f6, 0xf330, 0x4115, 0xe11c, 0x514a, 0x0, 0x1);
        gbc.writeMem(0x9975, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x33f6);
        EXPECT(gbc.pc(), 0x9976);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9975), 0xa2);
        // A2 00CA
        gbc.setState(0x5ee2, 0x579b, 0x590, 0x2f61, 0xb5f3, 0xb9e6, 0x1, 0x1);
        gbc.writeMem(0x5ee2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x579b);
        EXPECT(gbc.pc(), 0x5ee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00CB
        gbc.setState(0xe07c, 0xa97, 0x9b20, 0xde7c, 0xe13e, 0x83f5, 0x0, 0x0);
        gbc.writeMem(0xe07c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xa97);
        EXPECT(gbc.pc(), 0xe07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe07c), 0xa2);
        // A2 00CC
        gbc.setState(0xa5e1, 0x3b64, 0xb960, 0x47d9, 0xf9e9, 0x9ad9, 0x1, 0x0);
        gbc.writeMem(0xa5e1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3b64);
        EXPECT(gbc.pc(), 0xa5e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5e1), 0xa2);
        // A2 00CD
        gbc.setState(0x6fdb, 0x62c4, 0xe620, 0x3d85, 0xf11c, 0x2289, 0x1, 0x0);
        gbc.writeMem(0x6fdb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x62c4);
        EXPECT(gbc.pc(), 0x6fdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D0
        gbc.setState(0x8404, 0x67e5, 0xc3d0, 0xd152, 0x596, 0xa867, 0x0, 0x0);
        gbc.writeMem(0x8404, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x67e5);
        EXPECT(gbc.pc(), 0x8405);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8404), 0xa2);
        // A2 00D1
        gbc.setState(0x71f4, 0xd320, 0x6590, 0xdb77, 0xa1ed, 0x772b, 0x1, 0x0);
        gbc.writeMem(0x71f4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xd320);
        EXPECT(gbc.pc(), 0x71f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D2
        gbc.setState(0x6bed, 0xc6ca, 0x6180, 0x6805, 0x5f4f, 0x3fb2, 0x1, 0x0);
        gbc.writeMem(0x6bed, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xc6ca);
        EXPECT(gbc.pc(), 0x6bee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D3
        gbc.setState(0xc62e, 0xeba2, 0x3640, 0xc1ff, 0x5fc5, 0x8240, 0x0, 0x1);
        gbc.writeMem(0xc62e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xeba2);
        EXPECT(gbc.pc(), 0xc62f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62e), 0xa2);
        // A2 00D4
        gbc.setState(0x74fb, 0xf892, 0x63e0, 0xa276, 0x1247, 0x41b7, 0x1, 0x0);
        gbc.writeMem(0x74fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf892);
        EXPECT(gbc.pc(), 0x74fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D5
        gbc.setState(0x295, 0x229d, 0x9060, 0x2c7a, 0x6c3d, 0xa0e, 0x0, 0x1);
        gbc.writeMem(0x295, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x229d);
        EXPECT(gbc.pc(), 0x296);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D6
        gbc.setState(0xb664, 0x8939, 0x6aa0, 0x47f0, 0x43f5, 0xa230, 0x1, 0x1);
        gbc.writeMem(0xb664, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x8939);
        EXPECT(gbc.pc(), 0xb665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb664), 0xa2);
        // A2 00D7
        gbc.setState(0x5c93, 0x16, 0x2890, 0x96f5, 0x39a0, 0xf18d, 0x1, 0x0);
        gbc.writeMem(0x5c93, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x16);
        EXPECT(gbc.pc(), 0x5c94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D8
        gbc.setState(0x1ded, 0xe13, 0xdcc0, 0xbe9e, 0x74e5, 0x8498, 0x1, 0x1);
        gbc.writeMem(0x1ded, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe13);
        EXPECT(gbc.pc(), 0x1dee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00D9
        gbc.setState(0x5478, 0xa2d9, 0x3100, 0x59ae, 0xf558, 0xc62e, 0x0, 0x0);
        gbc.writeMem(0x5478, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xa2d9);
        EXPECT(gbc.pc(), 0x5479);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00DA
        gbc.setState(0xcf57, 0x62ae, 0x81d0, 0x4aac, 0x23ea, 0x5334, 0x1, 0x0);
        gbc.writeMem(0xcf57, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x62ae);
        EXPECT(gbc.pc(), 0xcf58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf57), 0xa2);
        // A2 00DB
        gbc.setState(0x6412, 0x447, 0x40d0, 0x7f12, 0x5820, 0x5839, 0x1, 0x0);
        gbc.writeMem(0x6412, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x447);
        EXPECT(gbc.pc(), 0x6413);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00DC
        gbc.setState(0x46b0, 0xfa8b, 0x8a0, 0x8fe0, 0xea0c, 0xe19d, 0x0, 0x1);
        gbc.writeMem(0x46b0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xfa8b);
        EXPECT(gbc.pc(), 0x46b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00DD
        gbc.setState(0xecd, 0xfa8e, 0x1740, 0x634e, 0x871, 0x89c8, 0x1, 0x1);
        gbc.writeMem(0xecd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xfa8e);
        EXPECT(gbc.pc(), 0xece);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00DE
        gbc.setState(0xdb0a, 0xe485, 0x76c0, 0x2c08, 0x65ca, 0xb6f0, 0x0, 0x0);
        gbc.writeMem(0xdb0a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xe485);
        EXPECT(gbc.pc(), 0xdb0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb0a), 0xa2);
        // A2 00DF
        gbc.setState(0xebbb, 0xc4ff, 0xbd50, 0x916c, 0xa037, 0x2a01, 0x1, 0x0);
        gbc.writeMem(0xebbb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc4ff);
        EXPECT(gbc.pc(), 0xebbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebbb), 0xa2);
        // A2 00E0
        gbc.setState(0xd9c8, 0x7624, 0x87d0, 0xcf0b, 0xe326, 0xcf64, 0x1, 0x1);
        gbc.writeMem(0xd9c8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7624);
        EXPECT(gbc.pc(), 0xd9c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9c8), 0xa2);
        // A2 00E1
        gbc.setState(0xc223, 0x6aef, 0xd9d0, 0x6dd8, 0x9303, 0xddf8, 0x0, 0x0);
        gbc.writeMem(0xc223, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x6aef);
        EXPECT(gbc.pc(), 0xc224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc223), 0xa2);
        // A2 00E2
        gbc.setState(0x6cf0, 0x543d, 0x3480, 0x995f, 0x8c93, 0x217d, 0x0, 0x1);
        gbc.writeMem(0x6cf0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x543d);
        EXPECT(gbc.pc(), 0x6cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00E3
        gbc.setState(0x3e70, 0x133a, 0x5c40, 0xcc33, 0xcf75, 0xbe00, 0x0, 0x0);
        gbc.writeMem(0x3e70, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x133a);
        EXPECT(gbc.pc(), 0x3e71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00E4
        gbc.setState(0xde84, 0x69db, 0xc2c0, 0x2010, 0x3c66, 0xd00, 0x0, 0x1);
        gbc.writeMem(0xde84, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x69db);
        EXPECT(gbc.pc(), 0xde85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde84), 0xa2);
        // A2 00E5
        gbc.setState(0xcf3d, 0x8b69, 0x6300, 0xaf7b, 0xbc28, 0xb66c, 0x0, 0x0);
        gbc.writeMem(0xcf3d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x8b69);
        EXPECT(gbc.pc(), 0xcf3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf3d), 0xa2);
        // A2 00E6
        gbc.setState(0x84f1, 0x6597, 0x4d30, 0x9853, 0x70db, 0xe8e5, 0x1, 0x1);
        gbc.writeMem(0x84f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6597);
        EXPECT(gbc.pc(), 0x84f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f1), 0xa2);
        // A2 00E7
        gbc.setState(0x2893, 0x650c, 0x5ae0, 0x565f, 0x25e1, 0x826d, 0x0, 0x1);
        gbc.writeMem(0x2893, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x650c);
        EXPECT(gbc.pc(), 0x2894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00E8
        gbc.setState(0x816d, 0xbb4a, 0x5d20, 0xa9cd, 0x1e23, 0xa3df, 0x1, 0x0);
        gbc.writeMem(0x816d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xbb4a);
        EXPECT(gbc.pc(), 0x816e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x816d), 0xa2);
        // A2 00E9
        gbc.setState(0xa144, 0xed96, 0x9cf0, 0x5e73, 0xf1f0, 0xd42b, 0x0, 0x0);
        gbc.writeMem(0xa144, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xed96);
        EXPECT(gbc.pc(), 0xa145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa144), 0xa2);
        // A2 00EA
        gbc.setState(0xbe3a, 0x1977, 0x2a40, 0xb824, 0x4270, 0xbc5a, 0x1, 0x1);
        gbc.writeMem(0xbe3a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x1977);
        EXPECT(gbc.pc(), 0xbe3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3a), 0xa2);
        // A2 00EB
        gbc.setState(0x5bfc, 0x7c6, 0xde20, 0x7420, 0x2046, 0x3ffe, 0x1, 0x0);
        gbc.writeMem(0x5bfc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7c6);
        EXPECT(gbc.pc(), 0x5bfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00ED
        gbc.setState(0x3484, 0x8b04, 0xabb0, 0x6033, 0x94d6, 0x9cf5, 0x1, 0x0);
        gbc.writeMem(0x3484, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8b04);
        EXPECT(gbc.pc(), 0x3485);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00EE
        gbc.setState(0x1966, 0x56a5, 0x15a0, 0x3a58, 0xfc8f, 0x3cb6, 0x0, 0x1);
        gbc.writeMem(0x1966, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x56a5);
        EXPECT(gbc.pc(), 0x1967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00EF
        gbc.setState(0x7802, 0xafae, 0xb980, 0x4132, 0x464c, 0x8f1d, 0x0, 0x0);
        gbc.writeMem(0x7802, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xafae);
        EXPECT(gbc.pc(), 0x7803);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F0
        gbc.setState(0x3337, 0x34ce, 0x9c30, 0x465e, 0xfbf8, 0x61d, 0x0, 0x0);
        gbc.writeMem(0x3337, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x34ce);
        EXPECT(gbc.pc(), 0x3338);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F1
        gbc.setState(0xe719, 0xaf5d, 0x6e10, 0x9463, 0x9da8, 0x8681, 0x0, 0x0);
        gbc.writeMem(0xe719, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xaf5d);
        EXPECT(gbc.pc(), 0xe71a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe719), 0xa2);
        // A2 00F2
        gbc.setState(0x92e3, 0x77d8, 0x92d0, 0xaafb, 0x2985, 0x29ef, 0x1, 0x0);
        gbc.writeMem(0x92e3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x77d8);
        EXPECT(gbc.pc(), 0x92e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e3), 0xa2);
        // A2 00F3
        gbc.setState(0xaf7c, 0x2d75, 0x13d0, 0xc588, 0xbb35, 0x7522, 0x1, 0x0);
        gbc.writeMem(0xaf7c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x2d75);
        EXPECT(gbc.pc(), 0xaf7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf7c), 0xa2);
        // A2 00F4
        gbc.setState(0x95e5, 0xada3, 0x1ed0, 0x7740, 0xaf50, 0xd19b, 0x1, 0x0);
        gbc.writeMem(0x95e5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xada3);
        EXPECT(gbc.pc(), 0x95e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e5), 0xa2);
        // A2 00F5
        gbc.setState(0x2900, 0x7b82, 0xebc0, 0x1ce2, 0xa662, 0xbab, 0x1, 0x1);
        gbc.writeMem(0x2900, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7b82);
        EXPECT(gbc.pc(), 0x2901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F6
        gbc.setState(0x8e7, 0x10a7, 0x2fb0, 0x6f94, 0xf978, 0x977c, 0x0, 0x0);
        gbc.writeMem(0x8e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x10a7);
        EXPECT(gbc.pc(), 0x8e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F7
        gbc.setState(0x1082, 0xe887, 0x8c20, 0xc4e5, 0x2273, 0x724c, 0x1, 0x0);
        gbc.writeMem(0x1082, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe887);
        EXPECT(gbc.pc(), 0x1083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F8
        gbc.setState(0x1b16, 0x72bc, 0xe870, 0xdcad, 0xfd33, 0xdd02, 0x0, 0x1);
        gbc.writeMem(0x1b16, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x72bc);
        EXPECT(gbc.pc(), 0x1b17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00F9
        gbc.setState(0xe558, 0x89f, 0xb050, 0x4acb, 0x3e02, 0x6b88, 0x1, 0x0);
        gbc.writeMem(0xe558, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x89f);
        EXPECT(gbc.pc(), 0xe559);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe558), 0xa2);
        // A2 00FA
        gbc.setState(0x8dc8, 0x331b, 0x9aa0, 0x20d8, 0x1c5c, 0x8b0e, 0x0, 0x0);
        gbc.writeMem(0x8dc8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x331b);
        EXPECT(gbc.pc(), 0x8dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dc8), 0xa2);
        // A2 00FB
        gbc.setState(0x1d8e, 0x6f70, 0xa040, 0x7375, 0xc40, 0xf5b9, 0x1, 0x1);
        gbc.writeMem(0x1d8e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x6f70);
        EXPECT(gbc.pc(), 0x1d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00FC
        gbc.setState(0x4ee6, 0x6c6b, 0xf3a0, 0xcb75, 0x6460, 0x3437, 0x0, 0x0);
        gbc.writeMem(0x4ee6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6c6b);
        EXPECT(gbc.pc(), 0x4ee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00FD
        gbc.setState(0x34b1, 0x1922, 0x1a50, 0xa37a, 0xbf1, 0xe392, 0x1, 0x1);
        gbc.writeMem(0x34b1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x1922);
        EXPECT(gbc.pc(), 0x34b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00FE
        gbc.setState(0x7f2a, 0xe67b, 0x31e0, 0x1b30, 0xb7a5, 0xaccd, 0x0, 0x1);
        gbc.writeMem(0x7f2a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe67b);
        EXPECT(gbc.pc(), 0x7f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 00FF
        gbc.setState(0xdfd4, 0x2f50, 0x22b0, 0xdd12, 0xdf0b, 0xbdf6, 0x0, 0x0);
        gbc.writeMem(0xdfd4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x2f50);
        EXPECT(gbc.pc(), 0xdfd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd4), 0xa2);
        // A2 0100
        gbc.setState(0x8e8b, 0x4464, 0x1bc0, 0xb950, 0x5481, 0x53b5, 0x0, 0x1);
        gbc.writeMem(0x8e8b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x4464);
        EXPECT(gbc.pc(), 0x8e8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e8b), 0xa2);
        // A2 0101
        gbc.setState(0x21b2, 0xca74, 0xdbb0, 0xf6ac, 0x43e8, 0x2d5b, 0x0, 0x0);
        gbc.writeMem(0x21b2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xca74);
        EXPECT(gbc.pc(), 0x21b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0102
        gbc.setState(0x37a2, 0xd137, 0x43c0, 0x59f, 0x4934, 0x2cd0, 0x0, 0x0);
        gbc.writeMem(0x37a2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd137);
        EXPECT(gbc.pc(), 0x37a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0103
        gbc.setState(0x33bc, 0xc863, 0xb7e0, 0x1eb6, 0xa108, 0xea00, 0x0, 0x0);
        gbc.writeMem(0x33bc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc863);
        EXPECT(gbc.pc(), 0x33bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0104
        gbc.setState(0x1204, 0x8388, 0x3990, 0x8d17, 0x703c, 0x1bc2, 0x0, 0x0);
        gbc.writeMem(0x1204, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x8388);
        EXPECT(gbc.pc(), 0x1205);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0105
        gbc.setState(0xed6a, 0xe9a8, 0x5200, 0x80d2, 0xad37, 0x2b39, 0x0, 0x1);
        gbc.writeMem(0xed6a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe9a8);
        EXPECT(gbc.pc(), 0xed6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed6a), 0xa2);
        // A2 0106
        gbc.setState(0xc1e6, 0x1a34, 0x1660, 0xdb2d, 0x12b9, 0xd4f4, 0x0, 0x0);
        gbc.writeMem(0xc1e6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1a34);
        EXPECT(gbc.pc(), 0xc1e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1e6), 0xa2);
        // A2 0107
        gbc.setState(0xa519, 0x2036, 0xc9b0, 0xe9c0, 0xd2b6, 0x83d5, 0x0, 0x0);
        gbc.writeMem(0xa519, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2036);
        EXPECT(gbc.pc(), 0xa51a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa519), 0xa2);
        // A2 0108
        gbc.setState(0x3379, 0x186e, 0x840, 0x28cb, 0x4ed4, 0xad9e, 0x0, 0x1);
        gbc.writeMem(0x3379, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x186e);
        EXPECT(gbc.pc(), 0x337a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0109
        gbc.setState(0xc9c2, 0x5ac6, 0x7f40, 0xa0d6, 0x114d, 0x464e, 0x0, 0x1);
        gbc.writeMem(0xc9c2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5ac6);
        EXPECT(gbc.pc(), 0xc9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c2), 0xa2);
        // A2 010A
        gbc.setState(0x7c38, 0x2038, 0x4170, 0xe458, 0x88ee, 0xd8c4, 0x1, 0x1);
        gbc.writeMem(0x7c38, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x2038);
        EXPECT(gbc.pc(), 0x7c39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 010B
        gbc.setState(0x686c, 0x7f41, 0x850, 0xfc6d, 0x49c1, 0x6098, 0x1, 0x1);
        gbc.writeMem(0x686c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7f41);
        EXPECT(gbc.pc(), 0x686d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 010C
        gbc.setState(0x328d, 0x63f4, 0xe450, 0x9786, 0x367c, 0xd71, 0x0, 0x1);
        gbc.writeMem(0x328d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x63f4);
        EXPECT(gbc.pc(), 0x328e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 010D
        gbc.setState(0x7855, 0xc5d8, 0x2f20, 0xed58, 0x991f, 0xe2c, 0x1, 0x0);
        gbc.writeMem(0x7855, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc5d8);
        EXPECT(gbc.pc(), 0x7856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 010E
        gbc.setState(0x498d, 0xdc84, 0x3500, 0xaca3, 0xb2e5, 0x4709, 0x1, 0x1);
        gbc.writeMem(0x498d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xdc84);
        EXPECT(gbc.pc(), 0x498e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0111
        gbc.setState(0x8f84, 0x58b7, 0x2840, 0xaeff, 0xf8e8, 0x1c5e, 0x1, 0x1);
        gbc.writeMem(0x8f84, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x58b7);
        EXPECT(gbc.pc(), 0x8f85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f84), 0xa2);
        // A2 0112
        gbc.setState(0x73c5, 0xc82, 0x3600, 0x13e3, 0x1b3c, 0x6df4, 0x1, 0x1);
        gbc.writeMem(0x73c5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc82);
        EXPECT(gbc.pc(), 0x73c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0113
        gbc.setState(0x77b6, 0x9f67, 0x4340, 0xb10e, 0xb95c, 0x4c5e, 0x0, 0x1);
        gbc.writeMem(0x77b6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x9f67);
        EXPECT(gbc.pc(), 0x77b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0114
        gbc.setState(0xdab, 0xe7f, 0x840, 0x4329, 0x9428, 0xcb78, 0x1, 0x1);
        gbc.writeMem(0xdab, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe7f);
        EXPECT(gbc.pc(), 0xdac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0115
        gbc.setState(0xbbb3, 0xf78, 0xb8a0, 0x549f, 0x823, 0x5e0b, 0x0, 0x0);
        gbc.writeMem(0xbbb3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf78);
        EXPECT(gbc.pc(), 0xbbb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbb3), 0xa2);
        // A2 0117
        gbc.setState(0x5760, 0x5425, 0x9af0, 0x4dbe, 0xf268, 0x6988, 0x0, 0x1);
        gbc.writeMem(0x5760, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5425);
        EXPECT(gbc.pc(), 0x5761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0118
        gbc.setState(0x121, 0x6962, 0x4380, 0x1760, 0xa136, 0xb1cd, 0x1, 0x0);
        gbc.writeMem(0x121, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6962);
        EXPECT(gbc.pc(), 0x122);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0119
        gbc.setState(0x160a, 0x1627, 0x5060, 0x3e39, 0x7c40, 0x8368, 0x1, 0x1);
        gbc.writeMem(0x160a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x1627);
        EXPECT(gbc.pc(), 0x160b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 011A
        gbc.setState(0x33bb, 0xcc88, 0xf650, 0xc65c, 0x2b43, 0xc054, 0x1, 0x1);
        gbc.writeMem(0x33bb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcc88);
        EXPECT(gbc.pc(), 0x33bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 011B
        gbc.setState(0x1316, 0xceca, 0x85f0, 0x607b, 0x77aa, 0x269d, 0x0, 0x1);
        gbc.writeMem(0x1316, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xceca);
        EXPECT(gbc.pc(), 0x1317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 011C
        gbc.setState(0xa380, 0xd0cc, 0x8690, 0xa3bb, 0x3ec6, 0xbe5f, 0x1, 0x0);
        gbc.writeMem(0xa380, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xd0cc);
        EXPECT(gbc.pc(), 0xa381);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa380), 0xa2);
        // A2 011D
        gbc.setState(0xa9f8, 0xcfaa, 0x6450, 0xa43, 0x8c40, 0xd85c, 0x0, 0x1);
        gbc.writeMem(0xa9f8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xcfaa);
        EXPECT(gbc.pc(), 0xa9f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f8), 0xa2);
        // A2 011E
        gbc.setState(0xb000, 0xf4e9, 0xa00, 0xe7e6, 0xf47a, 0x7fa2, 0x1, 0x0);
        gbc.writeMem(0xb000, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf4e9);
        EXPECT(gbc.pc(), 0xb001);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb000), 0xa2);
        // A2 011F
        gbc.setState(0x30a4, 0x3eb4, 0x47d0, 0x569b, 0x5dfb, 0x7ac, 0x1, 0x0);
        gbc.writeMem(0x30a4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x3eb4);
        EXPECT(gbc.pc(), 0x30a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0120
        gbc.setState(0x11f, 0x2fca, 0xb1b0, 0x5d19, 0x8057, 0x67ff, 0x1, 0x0);
        gbc.writeMem(0x11f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2fca);
        EXPECT(gbc.pc(), 0x120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0121
        gbc.setState(0xdfb9, 0xdc5, 0xbac0, 0x393b, 0x3607, 0x47a0, 0x1, 0x0);
        gbc.writeMem(0xdfb9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xdc5);
        EXPECT(gbc.pc(), 0xdfba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfb9), 0xa2);
        // A2 0122
        gbc.setState(0xcb7c, 0x207d, 0xeee0, 0x6e02, 0x7b7b, 0x75e1, 0x0, 0x1);
        gbc.writeMem(0xcb7c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x207d);
        EXPECT(gbc.pc(), 0xcb7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0xa2);
        // A2 0123
        gbc.setState(0x1ebc, 0x131, 0xaaa0, 0xc45e, 0xaf3f, 0x84e8, 0x1, 0x1);
        gbc.writeMem(0x1ebc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x131);
        EXPECT(gbc.pc(), 0x1ebd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0124
        gbc.setState(0x9b21, 0xf25c, 0xc7f0, 0x6cdb, 0x3335, 0x191b, 0x1, 0x1);
        gbc.writeMem(0x9b21, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xf25c);
        EXPECT(gbc.pc(), 0x9b22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b21), 0xa2);
        // A2 0125
        gbc.setState(0x87e5, 0xf0fc, 0x7ce0, 0x416, 0x4604, 0x690e, 0x0, 0x1);
        gbc.writeMem(0x87e5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xf0fc);
        EXPECT(gbc.pc(), 0x87e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87e5), 0xa2);
        // A2 0126
        gbc.setState(0xe849, 0x32fd, 0xba60, 0x31fa, 0xe85, 0x5dc9, 0x0, 0x1);
        gbc.writeMem(0xe849, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x32fd);
        EXPECT(gbc.pc(), 0xe84a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe849), 0xa2);
        // A2 0128
        gbc.setState(0xaa68, 0x67ed, 0x1d40, 0x19a2, 0x138e, 0xfe07, 0x0, 0x0);
        gbc.writeMem(0xaa68, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x67ed);
        EXPECT(gbc.pc(), 0xaa69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa68), 0xa2);
        // A2 0129
        gbc.setState(0x600a, 0xadf1, 0x64a0, 0xf2d2, 0x8215, 0x8afc, 0x0, 0x1);
        gbc.writeMem(0x600a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xadf1);
        EXPECT(gbc.pc(), 0x600b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 012A
        gbc.setState(0x3701, 0x2bef, 0x3ed0, 0x15db, 0xa22, 0x4d76, 0x0, 0x0);
        gbc.writeMem(0x3701, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2bef);
        EXPECT(gbc.pc(), 0x3702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 012C
        gbc.setState(0x1b7f, 0x604e, 0x91b0, 0xcf28, 0x435a, 0xcbb9, 0x1, 0x1);
        gbc.writeMem(0x1b7f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x604e);
        EXPECT(gbc.pc(), 0x1b80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 012D
        gbc.setState(0x144d, 0xf279, 0x6760, 0x2361, 0xdd6a, 0xb931, 0x0, 0x1);
        gbc.writeMem(0x144d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf279);
        EXPECT(gbc.pc(), 0x144e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 012E
        gbc.setState(0x4af1, 0xed86, 0x3670, 0xfb6f, 0x241d, 0xcc5, 0x0, 0x1);
        gbc.writeMem(0x4af1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xed86);
        EXPECT(gbc.pc(), 0x4af2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 012F
        gbc.setState(0x325, 0xe4f8, 0x8430, 0x800a, 0x9bf9, 0x3a2f, 0x0, 0x1);
        gbc.writeMem(0x325, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe4f8);
        EXPECT(gbc.pc(), 0x326);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0130
        gbc.setState(0xb33d, 0xd0cd, 0x3c00, 0x7aad, 0x4e5c, 0xb02c, 0x1, 0x0);
        gbc.writeMem(0xb33d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd0cd);
        EXPECT(gbc.pc(), 0xb33e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb33d), 0xa2);
        // A2 0131
        gbc.setState(0x4768, 0xdc57, 0x2b90, 0xc91c, 0x5804, 0x889e, 0x1, 0x0);
        gbc.writeMem(0x4768, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdc57);
        EXPECT(gbc.pc(), 0x4769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0132
        gbc.setState(0x767a, 0xd48c, 0xfde0, 0x5c77, 0x687e, 0x655c, 0x0, 0x1);
        gbc.writeMem(0x767a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd48c);
        EXPECT(gbc.pc(), 0x767b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0133
        gbc.setState(0x167d, 0xcdbe, 0xbe00, 0x3650, 0x81e3, 0x6fba, 0x0, 0x0);
        gbc.writeMem(0x167d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcdbe);
        EXPECT(gbc.pc(), 0x167e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0134
        gbc.setState(0x10e4, 0x8617, 0xaf40, 0x819e, 0x6295, 0x5148, 0x0, 0x0);
        gbc.writeMem(0x10e4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x8617);
        EXPECT(gbc.pc(), 0x10e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0135
        gbc.setState(0x55ef, 0x5c39, 0x5ad0, 0xe724, 0x7096, 0xc36c, 0x0, 0x1);
        gbc.writeMem(0x55ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5c39);
        EXPECT(gbc.pc(), 0x55f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0136
        gbc.setState(0xc05, 0x6da4, 0x9f10, 0x99ad, 0x5bac, 0x90f7, 0x1, 0x1);
        gbc.writeMem(0xc05, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x6da4);
        EXPECT(gbc.pc(), 0xc06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0138
        gbc.setState(0x76c, 0xf159, 0x8f40, 0xf549, 0xe864, 0xe161, 0x0, 0x0);
        gbc.writeMem(0x76c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf159);
        EXPECT(gbc.pc(), 0x76d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0139
        gbc.setState(0x2437, 0xfadf, 0x72e0, 0x3ae5, 0xf640, 0xe663, 0x0, 0x1);
        gbc.writeMem(0x2437, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xfadf);
        EXPECT(gbc.pc(), 0x2438);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 013A
        gbc.setState(0x9364, 0x7414, 0x4890, 0x2b2d, 0x9a1, 0x2720, 0x0, 0x0);
        gbc.writeMem(0x9364, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x7414);
        EXPECT(gbc.pc(), 0x9365);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9364), 0xa2);
        // A2 013B
        gbc.setState(0x9878, 0x4cc8, 0x8e10, 0x8d5b, 0x8733, 0x15c8, 0x0, 0x0);
        gbc.writeMem(0x9878, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4cc8);
        EXPECT(gbc.pc(), 0x9879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9878), 0xa2);
        // A2 013C
        gbc.setState(0x5ee3, 0x9bb3, 0x3380, 0x9e1c, 0xf80f, 0x126f, 0x1, 0x0);
        gbc.writeMem(0x5ee3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x9bb3);
        EXPECT(gbc.pc(), 0x5ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 013D
        gbc.setState(0x3fc2, 0x5c86, 0x1fa0, 0x534e, 0x60fc, 0x59dc, 0x0, 0x1);
        gbc.writeMem(0x3fc2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x5c86);
        EXPECT(gbc.pc(), 0x3fc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 013E
        gbc.setState(0xe517, 0xcf52, 0x2c10, 0x3612, 0xa759, 0x3177, 0x1, 0x0);
        gbc.writeMem(0xe517, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xcf52);
        EXPECT(gbc.pc(), 0xe518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe517), 0xa2);
        // A2 013F
        gbc.setState(0x61ad, 0x67e4, 0x7d40, 0x70c5, 0x3f08, 0x9185, 0x0, 0x1);
        gbc.writeMem(0x61ad, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x67e4);
        EXPECT(gbc.pc(), 0x61ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0140
        gbc.setState(0x26ca, 0x80ed, 0x90f0, 0x4b9, 0xa096, 0x8fdf, 0x0, 0x0);
        gbc.writeMem(0x26ca, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x80ed);
        EXPECT(gbc.pc(), 0x26cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0141
        gbc.setState(0x3294, 0x922, 0x14a0, 0xaa7c, 0x8076, 0x3ce0, 0x0, 0x0);
        gbc.writeMem(0x3294, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x922);
        EXPECT(gbc.pc(), 0x3295);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0142
        gbc.setState(0xd78a, 0x964f, 0x6500, 0x5fbc, 0x61eb, 0x2f94, 0x0, 0x0);
        gbc.writeMem(0xd78a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x964f);
        EXPECT(gbc.pc(), 0xd78b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd78a), 0xa2);
        // A2 0143
        gbc.setState(0x2250, 0xe3cc, 0x9cf0, 0xd7ca, 0x57ca, 0x6306, 0x0, 0x0);
        gbc.writeMem(0x2250, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xe3cc);
        EXPECT(gbc.pc(), 0x2251);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0144
        gbc.setState(0x9670, 0x6621, 0xa330, 0x9d3a, 0xf357, 0xa4f0, 0x1, 0x0);
        gbc.writeMem(0x9670, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6621);
        EXPECT(gbc.pc(), 0x9671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9670), 0xa2);
        // A2 0145
        gbc.setState(0x759c, 0xd7e7, 0xc230, 0x4745, 0xa960, 0x4c64, 0x1, 0x1);
        gbc.writeMem(0x759c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd7e7);
        EXPECT(gbc.pc(), 0x759d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0147
        gbc.setState(0x429a, 0x1fb8, 0x9a40, 0x28f, 0x9c6e, 0xa93d, 0x1, 0x1);
        gbc.writeMem(0x429a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1fb8);
        EXPECT(gbc.pc(), 0x429b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0148
        gbc.setState(0x2b6a, 0xeb36, 0x4070, 0xabeb, 0x3751, 0x3bf4, 0x0, 0x0);
        gbc.writeMem(0x2b6a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xeb36);
        EXPECT(gbc.pc(), 0x2b6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0149
        gbc.setState(0x46d6, 0x4941, 0xa8a0, 0xafd1, 0x433d, 0x50e0, 0x0, 0x0);
        gbc.writeMem(0x46d6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4941);
        EXPECT(gbc.pc(), 0x46d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 014A
        gbc.setState(0x56fe, 0xf580, 0x10f0, 0x3e18, 0x38b9, 0xf4ab, 0x0, 0x0);
        gbc.writeMem(0x56fe, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf580);
        EXPECT(gbc.pc(), 0x56ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 014B
        gbc.setState(0x3a7f, 0xf599, 0xd260, 0xe81a, 0xfef3, 0xc066, 0x1, 0x1);
        gbc.writeMem(0x3a7f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xf599);
        EXPECT(gbc.pc(), 0x3a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 014C
        gbc.setState(0xaa8f, 0x52f1, 0x9480, 0x3b91, 0x3d68, 0xb6a9, 0x0, 0x0);
        gbc.writeMem(0xaa8f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x52f1);
        EXPECT(gbc.pc(), 0xaa90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8f), 0xa2);
        // A2 014D
        gbc.setState(0x17f7, 0xc7b8, 0xcba0, 0x1267, 0x9cbb, 0x8b27, 0x0, 0x0);
        gbc.writeMem(0x17f7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc7b8);
        EXPECT(gbc.pc(), 0x17f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 014E
        gbc.setState(0x70d, 0x5ff6, 0x8810, 0xd866, 0xab8d, 0x351, 0x1, 0x1);
        gbc.writeMem(0x70d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5ff6);
        EXPECT(gbc.pc(), 0x70e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0150
        gbc.setState(0x49bd, 0x558f, 0x4d60, 0x30c5, 0x7233, 0x901d, 0x1, 0x0);
        gbc.writeMem(0x49bd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x558f);
        EXPECT(gbc.pc(), 0x49be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0151
        gbc.setState(0x1fd5, 0x6fbb, 0x5570, 0xe972, 0x2c4, 0x6099, 0x0, 0x1);
        gbc.writeMem(0x1fd5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6fbb);
        EXPECT(gbc.pc(), 0x1fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0152
        gbc.setState(0xd96b, 0xc280, 0x8e90, 0x648a, 0x5771, 0x42a2, 0x0, 0x0);
        gbc.writeMem(0xd96b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc280);
        EXPECT(gbc.pc(), 0xd96c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd96b), 0xa2);
        // A2 0153
        gbc.setState(0xa581, 0x5829, 0x5580, 0x8716, 0xa2c, 0x7743, 0x0, 0x1);
        gbc.writeMem(0xa581, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x5829);
        EXPECT(gbc.pc(), 0xa582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa581), 0xa2);
        // A2 0154
        gbc.setState(0xd7d8, 0x1f87, 0x9a0, 0xb2d4, 0x5431, 0x4acb, 0x1, 0x1);
        gbc.writeMem(0xd7d8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1f87);
        EXPECT(gbc.pc(), 0xd7d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7d8), 0xa2);
        // A2 0155
        gbc.setState(0x9c58, 0xf9e2, 0x4f60, 0xe07, 0x414b, 0x622c, 0x1, 0x0);
        gbc.writeMem(0x9c58, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf9e2);
        EXPECT(gbc.pc(), 0x9c59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c58), 0xa2);
        // A2 0156
        gbc.setState(0x1692, 0x6398, 0x2d30, 0x51c5, 0xe582, 0xbae1, 0x1, 0x0);
        gbc.writeMem(0x1692, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6398);
        EXPECT(gbc.pc(), 0x1693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0158
        gbc.setState(0xd20c, 0x5d27, 0xe580, 0x3b92, 0x4ffb, 0x4a37, 0x0, 0x0);
        gbc.writeMem(0xd20c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5d27);
        EXPECT(gbc.pc(), 0xd20d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd20c), 0xa2);
        // A2 015A
        gbc.setState(0x5aa4, 0x5787, 0x8b90, 0xc08b, 0x77f0, 0x5f79, 0x1, 0x1);
        gbc.writeMem(0x5aa4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5787);
        EXPECT(gbc.pc(), 0x5aa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 015B
        gbc.setState(0xdb23, 0x540, 0xeba0, 0xa75d, 0x8384, 0x4f2f, 0x1, 0x1);
        gbc.writeMem(0xdb23, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x540);
        EXPECT(gbc.pc(), 0xdb24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb23), 0xa2);
        // A2 015C
        gbc.setState(0x3628, 0x4825, 0x5c10, 0x3279, 0x48cd, 0xba8f, 0x0, 0x1);
        gbc.writeMem(0x3628, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x4825);
        EXPECT(gbc.pc(), 0x3629);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 015D
        gbc.setState(0x3b17, 0x8771, 0x15a0, 0x6aba, 0x9678, 0xd43a, 0x1, 0x0);
        gbc.writeMem(0x3b17, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8771);
        EXPECT(gbc.pc(), 0x3b18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 015E
        gbc.setState(0x6afa, 0x9f7b, 0xfab0, 0xf14d, 0x15a6, 0x94e7, 0x1, 0x1);
        gbc.writeMem(0x6afa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9f7b);
        EXPECT(gbc.pc(), 0x6afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 015F
        gbc.setState(0xb89d, 0xe0d2, 0xe130, 0xb59c, 0xf970, 0x4222, 0x1, 0x1);
        gbc.writeMem(0xb89d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe0d2);
        EXPECT(gbc.pc(), 0xb89e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89d), 0xa2);
        // A2 0160
        gbc.setState(0xa6c0, 0xab1d, 0x87d0, 0x1950, 0x7c0e, 0x3e40, 0x1, 0x0);
        gbc.writeMem(0xa6c0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xab1d);
        EXPECT(gbc.pc(), 0xa6c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c0), 0xa2);
        // A2 0161
        gbc.setState(0xd081, 0x3836, 0x5a90, 0x5218, 0xb580, 0x9d05, 0x1, 0x1);
        gbc.writeMem(0xd081, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3836);
        EXPECT(gbc.pc(), 0xd082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd081), 0xa2);
        // A2 0162
        gbc.setState(0xd86c, 0xd03c, 0x4a40, 0xdc9d, 0xf0da, 0xcf31, 0x1, 0x1);
        gbc.writeMem(0xd86c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xd03c);
        EXPECT(gbc.pc(), 0xd86d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd86c), 0xa2);
        // A2 0163
        gbc.setState(0x8ab6, 0x1d23, 0xe80, 0x2c61, 0x1c96, 0xe542, 0x0, 0x1);
        gbc.writeMem(0x8ab6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x1d23);
        EXPECT(gbc.pc(), 0x8ab7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ab6), 0xa2);
        // A2 0164
        gbc.setState(0x7549, 0x8ddd, 0xacb0, 0x2f38, 0xa73, 0x9dac, 0x1, 0x1);
        gbc.writeMem(0x7549, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8ddd);
        EXPECT(gbc.pc(), 0x754a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0165
        gbc.setState(0x702b, 0xe375, 0xcf80, 0xcc9f, 0xcbd9, 0x93f8, 0x0, 0x1);
        gbc.writeMem(0x702b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xe375);
        EXPECT(gbc.pc(), 0x702c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0166
        gbc.setState(0x6294, 0x92e0, 0x5980, 0x9880, 0xdc8a, 0x5d0, 0x1, 0x1);
        gbc.writeMem(0x6294, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x92e0);
        EXPECT(gbc.pc(), 0x6295);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0167
        gbc.setState(0x2ed5, 0xf37d, 0x3030, 0x197f, 0x956f, 0xfb67, 0x0, 0x1);
        gbc.writeMem(0x2ed5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf37d);
        EXPECT(gbc.pc(), 0x2ed6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0168
        gbc.setState(0x24aa, 0xcb28, 0xab90, 0x9511, 0x386, 0xb9eb, 0x1, 0x0);
        gbc.writeMem(0x24aa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xcb28);
        EXPECT(gbc.pc(), 0x24ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0169
        gbc.setState(0x79ec, 0x4166, 0x74b0, 0x3cec, 0xc1ff, 0x9e0, 0x1, 0x0);
        gbc.writeMem(0x79ec, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x4166);
        EXPECT(gbc.pc(), 0x79ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 016A
        gbc.setState(0x8d94, 0x7348, 0xa900, 0xd9ea, 0xe2bb, 0x63cf, 0x0, 0x0);
        gbc.writeMem(0x8d94, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x7348);
        EXPECT(gbc.pc(), 0x8d95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d94), 0xa2);
        // A2 016B
        gbc.setState(0x176d, 0x2549, 0xea0, 0x38bd, 0x8bfd, 0x4266, 0x0, 0x1);
        gbc.writeMem(0x176d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2549);
        EXPECT(gbc.pc(), 0x176e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 016C
        gbc.setState(0x5d78, 0xfdac, 0xa750, 0xb227, 0x3d93, 0xaa59, 0x0, 0x0);
        gbc.writeMem(0x5d78, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfdac);
        EXPECT(gbc.pc(), 0x5d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 016D
        gbc.setState(0x1617, 0x860, 0x4210, 0xd24a, 0xf49f, 0xc4ac, 0x1, 0x1);
        gbc.writeMem(0x1617, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x860);
        EXPECT(gbc.pc(), 0x1618);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 016E
        gbc.setState(0x4615, 0x6ff6, 0xf1a0, 0x622b, 0xd6eb, 0xb284, 0x1, 0x1);
        gbc.writeMem(0x4615, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6ff6);
        EXPECT(gbc.pc(), 0x4616);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 016F
        gbc.setState(0xc62d, 0xd80f, 0x3c60, 0x709c, 0xb9b0, 0x93e9, 0x0, 0x0);
        gbc.writeMem(0xc62d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd80f);
        EXPECT(gbc.pc(), 0xc62e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62d), 0xa2);
        // A2 0170
        gbc.setState(0xe44a, 0xdb94, 0xf560, 0xa024, 0x4f43, 0xb805, 0x1, 0x0);
        gbc.writeMem(0xe44a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xdb94);
        EXPECT(gbc.pc(), 0xe44b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe44a), 0xa2);
        // A2 0171
        gbc.setState(0x5af4, 0xa9bb, 0xd070, 0x5fab, 0xf045, 0xd67f, 0x1, 0x0);
        gbc.writeMem(0x5af4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa9bb);
        EXPECT(gbc.pc(), 0x5af5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0173
        gbc.setState(0xb5e0, 0xe7a2, 0xebd0, 0xb140, 0x606d, 0x1fa6, 0x0, 0x1);
        gbc.writeMem(0xb5e0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe7a2);
        EXPECT(gbc.pc(), 0xb5e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e0), 0xa2);
        // A2 0174
        gbc.setState(0x678e, 0x519c, 0xc530, 0x65a8, 0x11c7, 0x70e, 0x0, 0x0);
        gbc.writeMem(0x678e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x519c);
        EXPECT(gbc.pc(), 0x678f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0175
        gbc.setState(0x3a8b, 0xcbdb, 0xb170, 0x8a7b, 0x5d3f, 0xe3b0, 0x1, 0x0);
        gbc.writeMem(0x3a8b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcbdb);
        EXPECT(gbc.pc(), 0x3a8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0176
        gbc.setState(0xd054, 0x46e4, 0x2ad0, 0x2027, 0xff62, 0xa322, 0x1, 0x0);
        gbc.writeMem(0xd054, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x46e4);
        EXPECT(gbc.pc(), 0xd055);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd054), 0xa2);
        // A2 0177
        gbc.setState(0xb631, 0xd1da, 0xa970, 0xb6b6, 0xc68, 0x76b3, 0x0, 0x0);
        gbc.writeMem(0xb631, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd1da);
        EXPECT(gbc.pc(), 0xb632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb631), 0xa2);
        // A2 0178
        gbc.setState(0xe986, 0x98e8, 0xacc0, 0x8f66, 0xa732, 0x54b0, 0x1, 0x1);
        gbc.writeMem(0xe986, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x98e8);
        EXPECT(gbc.pc(), 0xe987);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe986), 0xa2);
        // A2 0179
        gbc.setState(0xa288, 0x3c7e, 0x7f50, 0xe556, 0xc1ce, 0xbf15, 0x1, 0x1);
        gbc.writeMem(0xa288, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3c7e);
        EXPECT(gbc.pc(), 0xa289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa288), 0xa2);
        // A2 017A
        gbc.setState(0xd4d6, 0xb58, 0x9be0, 0xc5c8, 0xe74f, 0x83f2, 0x1, 0x1);
        gbc.writeMem(0xd4d6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xb58);
        EXPECT(gbc.pc(), 0xd4d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d6), 0xa2);
        // A2 017B
        gbc.setState(0x2c56, 0xd865, 0xa950, 0x836c, 0xb71a, 0x3ed2, 0x1, 0x0);
        gbc.writeMem(0x2c56, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xd865);
        EXPECT(gbc.pc(), 0x2c57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 017C
        gbc.setState(0x9be1, 0xd423, 0xc180, 0xff27, 0xb7b4, 0x38b9, 0x1, 0x1);
        gbc.writeMem(0x9be1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd423);
        EXPECT(gbc.pc(), 0x9be2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9be1), 0xa2);
        // A2 017D
        gbc.setState(0x8534, 0x2eca, 0xf140, 0x54d2, 0xbb35, 0xb01f, 0x1, 0x0);
        gbc.writeMem(0x8534, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2eca);
        EXPECT(gbc.pc(), 0x8535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8534), 0xa2);
        // A2 017E
        gbc.setState(0x92d9, 0x72ac, 0xa8e0, 0x14d9, 0x80e6, 0x398d, 0x1, 0x0);
        gbc.writeMem(0x92d9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x72ac);
        EXPECT(gbc.pc(), 0x92da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92d9), 0xa2);
        // A2 0180
        gbc.setState(0xa9d2, 0x486e, 0xa5f0, 0xd323, 0xb066, 0x344e, 0x1, 0x0);
        gbc.writeMem(0xa9d2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x486e);
        EXPECT(gbc.pc(), 0xa9d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9d2), 0xa2);
        // A2 0181
        gbc.setState(0x3868, 0xa45c, 0x5e00, 0x188a, 0x745c, 0xfe19, 0x1, 0x1);
        gbc.writeMem(0x3868, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xa45c);
        EXPECT(gbc.pc(), 0x3869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0182
        gbc.setState(0x7b63, 0x85e1, 0x270, 0x6ccc, 0xd2bb, 0x7d67, 0x0, 0x0);
        gbc.writeMem(0x7b63, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x85e1);
        EXPECT(gbc.pc(), 0x7b64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0183
        gbc.setState(0xd1a0, 0x24d4, 0x5470, 0x3540, 0x9492, 0xb40e, 0x0, 0x0);
        gbc.writeMem(0xd1a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x24d4);
        EXPECT(gbc.pc(), 0xd1a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a0), 0xa2);
        // A2 0184
        gbc.setState(0x1b4d, 0xfebc, 0x1560, 0x2f29, 0xe6d6, 0x7736, 0x0, 0x1);
        gbc.writeMem(0x1b4d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xfebc);
        EXPECT(gbc.pc(), 0x1b4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0186
        gbc.setState(0xa9b5, 0x3c54, 0xdb50, 0xdadf, 0x2a0a, 0xc0ce, 0x0, 0x1);
        gbc.writeMem(0xa9b5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x3c54);
        EXPECT(gbc.pc(), 0xa9b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9b5), 0xa2);
        // A2 0188
        gbc.setState(0xaa8d, 0x759e, 0x13e0, 0x567d, 0x7793, 0xe3d, 0x0, 0x1);
        gbc.writeMem(0xaa8d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x759e);
        EXPECT(gbc.pc(), 0xaa8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa8d), 0xa2);
        // A2 0189
        gbc.setState(0x6eac, 0xcd40, 0x9d00, 0x25a4, 0xfc0d, 0x5851, 0x0, 0x0);
        gbc.writeMem(0x6eac, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xcd40);
        EXPECT(gbc.pc(), 0x6ead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 018A
        gbc.setState(0x3bc2, 0x5abe, 0x23b0, 0x95bc, 0xc181, 0xec26, 0x0, 0x0);
        gbc.writeMem(0x3bc2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x5abe);
        EXPECT(gbc.pc(), 0x3bc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 018B
        gbc.setState(0x914d, 0x3f63, 0xabb0, 0x3770, 0x1d4e, 0xe307, 0x1, 0x0);
        gbc.writeMem(0x914d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x3f63);
        EXPECT(gbc.pc(), 0x914e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914d), 0xa2);
        // A2 018C
        gbc.setState(0xab05, 0x1a83, 0xda40, 0xdd4f, 0x5300, 0x8e7c, 0x0, 0x1);
        gbc.writeMem(0xab05, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1a83);
        EXPECT(gbc.pc(), 0xab06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab05), 0xa2);
        // A2 018D
        gbc.setState(0xc3e6, 0x6e1, 0xf4a0, 0xabcf, 0x3c21, 0xe525, 0x0, 0x1);
        gbc.writeMem(0xc3e6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6e1);
        EXPECT(gbc.pc(), 0xc3e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3e6), 0xa2);
        // A2 018E
        gbc.setState(0xb14b, 0x72fe, 0x2fb0, 0x5ec3, 0x50a4, 0x774c, 0x1, 0x1);
        gbc.writeMem(0xb14b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x72fe);
        EXPECT(gbc.pc(), 0xb14c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb14b), 0xa2);
        // A2 018F
        gbc.setState(0x2388, 0x61d, 0xc650, 0x26a6, 0xe78f, 0xeab8, 0x1, 0x1);
        gbc.writeMem(0x2388, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x61d);
        EXPECT(gbc.pc(), 0x2389);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0190
        gbc.setState(0xaf85, 0x3fe7, 0xa7c0, 0x7c73, 0x2c92, 0x2b82, 0x0, 0x0);
        gbc.writeMem(0xaf85, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3fe7);
        EXPECT(gbc.pc(), 0xaf86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf85), 0xa2);
        // A2 0191
        gbc.setState(0xda70, 0xe364, 0xc40, 0xfbc7, 0xd158, 0x8022, 0x1, 0x0);
        gbc.writeMem(0xda70, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe364);
        EXPECT(gbc.pc(), 0xda71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda70), 0xa2);
        // A2 0192
        gbc.setState(0x78e3, 0x20b9, 0x7dd0, 0x1e, 0xdefc, 0xb6d, 0x1, 0x0);
        gbc.writeMem(0x78e3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x20b9);
        EXPECT(gbc.pc(), 0x78e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0193
        gbc.setState(0xbd35, 0xd061, 0xff0, 0xc879, 0x746a, 0x1127, 0x0, 0x0);
        gbc.writeMem(0xbd35, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xd061);
        EXPECT(gbc.pc(), 0xbd36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd35), 0xa2);
        // A2 0194
        gbc.setState(0x3331, 0xbdb1, 0x950, 0x5fe7, 0xdade, 0x4b91, 0x1, 0x0);
        gbc.writeMem(0x3331, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xbdb1);
        EXPECT(gbc.pc(), 0x3332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0195
        gbc.setState(0xa59b, 0x7811, 0xbe40, 0xe3c8, 0xbd71, 0x1d80, 0x0, 0x1);
        gbc.writeMem(0xa59b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7811);
        EXPECT(gbc.pc(), 0xa59c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa59b), 0xa2);
        // A2 0196
        gbc.setState(0xb726, 0x3358, 0x14a0, 0x2794, 0xab2c, 0x952d, 0x1, 0x0);
        gbc.writeMem(0xb726, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x3358);
        EXPECT(gbc.pc(), 0xb727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb726), 0xa2);
        // A2 0197
        gbc.setState(0x7fd, 0x626e, 0x510, 0x234e, 0xbde5, 0x763c, 0x0, 0x1);
        gbc.writeMem(0x7fd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x626e);
        EXPECT(gbc.pc(), 0x7fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0198
        gbc.setState(0xb701, 0xfe9d, 0x2ad0, 0xdfc, 0x4483, 0x27dc, 0x1, 0x1);
        gbc.writeMem(0xb701, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfe9d);
        EXPECT(gbc.pc(), 0xb702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb701), 0xa2);
        // A2 0199
        gbc.setState(0x467d, 0x5abd, 0x9750, 0xa51f, 0x6eaa, 0x7a56, 0x1, 0x1);
        gbc.writeMem(0x467d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x5abd);
        EXPECT(gbc.pc(), 0x467e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 019B
        gbc.setState(0xd4bd, 0xea14, 0x3ec0, 0xc59e, 0x7ed0, 0xde78, 0x1, 0x0);
        gbc.writeMem(0xd4bd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xea14);
        EXPECT(gbc.pc(), 0xd4be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4bd), 0xa2);
        // A2 019C
        gbc.setState(0xb66f, 0x27f6, 0xb970, 0x9832, 0xcf55, 0xb99e, 0x0, 0x0);
        gbc.writeMem(0xb66f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x27f6);
        EXPECT(gbc.pc(), 0xb670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb66f), 0xa2);
        // A2 019D
        gbc.setState(0x3a50, 0xfe08, 0x3880, 0xa453, 0x80b, 0x8153, 0x1, 0x1);
        gbc.writeMem(0x3a50, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfe08);
        EXPECT(gbc.pc(), 0x3a51);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 019E
        gbc.setState(0x797, 0xef85, 0xf0b0, 0x48be, 0xae22, 0x8410, 0x0, 0x1);
        gbc.writeMem(0x797, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xef85);
        EXPECT(gbc.pc(), 0x798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 019F
        gbc.setState(0xbcc1, 0xe252, 0xa790, 0xec5e, 0x1d57, 0xed30, 0x0, 0x0);
        gbc.writeMem(0xbcc1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe252);
        EXPECT(gbc.pc(), 0xbcc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcc1), 0xa2);
        // A2 01A0
        gbc.setState(0xd9, 0xe201, 0x4150, 0xf8ae, 0xa04, 0x21a4, 0x0, 0x1);
        gbc.writeMem(0xd9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xe201);
        EXPECT(gbc.pc(), 0xda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01A1
        gbc.setState(0x8a72, 0xc295, 0xe000, 0xf1f, 0x292c, 0x350c, 0x0, 0x0);
        gbc.writeMem(0x8a72, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc295);
        EXPECT(gbc.pc(), 0x8a73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a72), 0xa2);
        // A2 01A2
        gbc.setState(0x1d83, 0x1280, 0x5f60, 0x4256, 0xc4da, 0xb945, 0x0, 0x1);
        gbc.writeMem(0x1d83, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x1280);
        EXPECT(gbc.pc(), 0x1d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01A3
        gbc.setState(0x181b, 0xd212, 0xf7c0, 0x21d6, 0xd8e8, 0xd3c9, 0x0, 0x1);
        gbc.writeMem(0x181b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd212);
        EXPECT(gbc.pc(), 0x181c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01A4
        gbc.setState(0xb12c, 0x98bd, 0x6f60, 0x380c, 0x850, 0x6ee3, 0x1, 0x1);
        gbc.writeMem(0xb12c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x98bd);
        EXPECT(gbc.pc(), 0xb12d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb12c), 0xa2);
        // A2 01A5
        gbc.setState(0xdbc, 0x673e, 0x3190, 0x225d, 0x211c, 0xdd1c, 0x0, 0x0);
        gbc.writeMem(0xdbc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x673e);
        EXPECT(gbc.pc(), 0xdbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01A6
        gbc.setState(0x932, 0x2549, 0x4d90, 0x8680, 0x6a94, 0x74f8, 0x0, 0x1);
        gbc.writeMem(0x932, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2549);
        EXPECT(gbc.pc(), 0x933);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01A7
        gbc.setState(0xce29, 0x3340, 0x8870, 0x4bc0, 0xba4d, 0xacb7, 0x1, 0x0);
        gbc.writeMem(0xce29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x3340);
        EXPECT(gbc.pc(), 0xce2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce29), 0xa2);
        // A2 01A9
        gbc.setState(0x73b0, 0x76db, 0x4bf0, 0x5efa, 0x7620, 0x1286, 0x1, 0x0);
        gbc.writeMem(0x73b0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x76db);
        EXPECT(gbc.pc(), 0x73b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01AA
        gbc.setState(0x7eeb, 0xa42, 0x4fb0, 0x3425, 0x9c47, 0xb652, 0x0, 0x0);
        gbc.writeMem(0x7eeb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xa42);
        EXPECT(gbc.pc(), 0x7eec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01AB
        gbc.setState(0xb269, 0x65e7, 0x4530, 0xdb29, 0x4348, 0x8c65, 0x0, 0x1);
        gbc.writeMem(0xb269, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x65e7);
        EXPECT(gbc.pc(), 0xb26a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb269), 0xa2);
        // A2 01AC
        gbc.setState(0x30e2, 0xdecb, 0x7e70, 0xc983, 0x62c0, 0xfa3c, 0x0, 0x0);
        gbc.writeMem(0x30e2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdecb);
        EXPECT(gbc.pc(), 0x30e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01AD
        gbc.setState(0x9032, 0xd5ca, 0x5510, 0x9a41, 0xc7ee, 0x74ca, 0x1, 0x0);
        gbc.writeMem(0x9032, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd5ca);
        EXPECT(gbc.pc(), 0x9033);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9032), 0xa2);
        // A2 01AE
        gbc.setState(0x6e6c, 0x795d, 0xaad0, 0x2b4, 0x8e09, 0xa12d, 0x1, 0x0);
        gbc.writeMem(0x6e6c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x795d);
        EXPECT(gbc.pc(), 0x6e6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01B0
        gbc.setState(0xce8c, 0xc4e, 0x7950, 0xe64c, 0xc9dc, 0xf7f7, 0x1, 0x1);
        gbc.writeMem(0xce8c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc4e);
        EXPECT(gbc.pc(), 0xce8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8c), 0xa2);
        // A2 01B1
        gbc.setState(0x3899, 0xea87, 0xa120, 0xd97b, 0xc341, 0xbb50, 0x1, 0x1);
        gbc.writeMem(0x3899, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xea87);
        EXPECT(gbc.pc(), 0x389a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01B2
        gbc.setState(0x930f, 0x94f4, 0x43f0, 0xae71, 0xb3a0, 0xff52, 0x0, 0x0);
        gbc.writeMem(0x930f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x94f4);
        EXPECT(gbc.pc(), 0x9310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930f), 0xa2);
        // A2 01B3
        gbc.setState(0xa7a0, 0x944f, 0xd610, 0x4ed9, 0x534c, 0x4fcc, 0x1, 0x1);
        gbc.writeMem(0xa7a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x944f);
        EXPECT(gbc.pc(), 0xa7a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a0), 0xa2);
        // A2 01B4
        gbc.setState(0x71e1, 0xdd35, 0xe410, 0xe736, 0xc87b, 0xcc4b, 0x1, 0x0);
        gbc.writeMem(0x71e1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xdd35);
        EXPECT(gbc.pc(), 0x71e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01B5
        gbc.setState(0x83a5, 0x71ba, 0xd1a0, 0x7cc7, 0x1e8c, 0xcabd, 0x1, 0x1);
        gbc.writeMem(0x83a5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x71ba);
        EXPECT(gbc.pc(), 0x83a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a5), 0xa2);
        // A2 01B6
        gbc.setState(0xc4e6, 0xed5b, 0xf510, 0x21bb, 0x460d, 0x99be, 0x1, 0x0);
        gbc.writeMem(0xc4e6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xed5b);
        EXPECT(gbc.pc(), 0xc4e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4e6), 0xa2);
        // A2 01B7
        gbc.setState(0x2afe, 0x4e3b, 0x78e0, 0x5e35, 0xc601, 0x65a5, 0x0, 0x1);
        gbc.writeMem(0x2afe, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4e3b);
        EXPECT(gbc.pc(), 0x2aff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01B8
        gbc.setState(0x9a9b, 0x2933, 0x440, 0x1ca6, 0xaa5e, 0xdb35, 0x1, 0x0);
        gbc.writeMem(0x9a9b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2933);
        EXPECT(gbc.pc(), 0x9a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a9b), 0xa2);
        // A2 01B9
        gbc.setState(0x95d, 0x5a65, 0x160, 0x4239, 0x91a9, 0xc824, 0x0, 0x0);
        gbc.writeMem(0x95d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5a65);
        EXPECT(gbc.pc(), 0x95e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01BA
        gbc.setState(0x58e7, 0x8b4d, 0x45d0, 0x8428, 0x44c3, 0x8b, 0x1, 0x1);
        gbc.writeMem(0x58e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8b4d);
        EXPECT(gbc.pc(), 0x58e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01BB
        gbc.setState(0x3f2d, 0x474b, 0x8d90, 0xaf79, 0x3a67, 0x4071, 0x0, 0x1);
        gbc.writeMem(0x3f2d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x474b);
        EXPECT(gbc.pc(), 0x3f2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01BC
        gbc.setState(0x41da, 0xae14, 0xc7d0, 0x4051, 0x5ee1, 0x469a, 0x1, 0x0);
        gbc.writeMem(0x41da, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xae14);
        EXPECT(gbc.pc(), 0x41db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01BD
        gbc.setState(0xa092, 0xb462, 0x14f0, 0x847e, 0x20d, 0xe3ef, 0x0, 0x0);
        gbc.writeMem(0xa092, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb462);
        EXPECT(gbc.pc(), 0xa093);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa092), 0xa2);
        // A2 01BE
        gbc.setState(0xda26, 0xbf6f, 0xd950, 0x84ad, 0x2b00, 0xc6e4, 0x1, 0x1);
        gbc.writeMem(0xda26, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xbf6f);
        EXPECT(gbc.pc(), 0xda27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda26), 0xa2);
        // A2 01BF
        gbc.setState(0x37e0, 0x37de, 0xf490, 0x788b, 0x64e9, 0xc4a, 0x1, 0x1);
        gbc.writeMem(0x37e0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x37de);
        EXPECT(gbc.pc(), 0x37e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C0
        gbc.setState(0x9772, 0x60d7, 0xb3e0, 0xfa2a, 0xa049, 0xd1f8, 0x1, 0x0);
        gbc.writeMem(0x9772, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x60d7);
        EXPECT(gbc.pc(), 0x9773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9772), 0xa2);
        // A2 01C1
        gbc.setState(0xaec4, 0xb2aa, 0x9400, 0x93b1, 0x5ad1, 0x48f1, 0x0, 0x1);
        gbc.writeMem(0xaec4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb2aa);
        EXPECT(gbc.pc(), 0xaec5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaec4), 0xa2);
        // A2 01C2
        gbc.setState(0x55a6, 0xcd3, 0x9e60, 0xcbf8, 0x2eb3, 0x63ff, 0x0, 0x0);
        gbc.writeMem(0x55a6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xcd3);
        EXPECT(gbc.pc(), 0x55a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C3
        gbc.setState(0x3ed8, 0x890, 0x8520, 0x1ddd, 0x3c08, 0x155b, 0x0, 0x0);
        gbc.writeMem(0x3ed8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x890);
        EXPECT(gbc.pc(), 0x3ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C4
        gbc.setState(0x739c, 0xa0af, 0x6950, 0x49ac, 0x4e44, 0x9829, 0x1, 0x0);
        gbc.writeMem(0x739c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa0af);
        EXPECT(gbc.pc(), 0x739d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C5
        gbc.setState(0xb3f1, 0x3072, 0xfad0, 0xa873, 0x4277, 0x95b4, 0x0, 0x0);
        gbc.writeMem(0xb3f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3072);
        EXPECT(gbc.pc(), 0xb3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3f1), 0xa2);
        // A2 01C6
        gbc.setState(0x64f5, 0x7a0e, 0x1370, 0xe92c, 0x90e1, 0x7e3c, 0x0, 0x1);
        gbc.writeMem(0x64f5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7a0e);
        EXPECT(gbc.pc(), 0x64f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C7
        gbc.setState(0x2e4b, 0xbba6, 0x3dd0, 0x7f9e, 0x2cae, 0xb0f, 0x1, 0x0);
        gbc.writeMem(0x2e4b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbba6);
        EXPECT(gbc.pc(), 0x2e4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01C8
        gbc.setState(0x8842, 0x436a, 0xf0f0, 0x71a1, 0xb6df, 0xce79, 0x0, 0x1);
        gbc.writeMem(0x8842, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x436a);
        EXPECT(gbc.pc(), 0x8843);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8842), 0xa2);
        // A2 01C9
        gbc.setState(0x203c, 0x94c6, 0x8cb0, 0x2386, 0x5825, 0x59d9, 0x0, 0x1);
        gbc.writeMem(0x203c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x94c6);
        EXPECT(gbc.pc(), 0x203d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01CA
        gbc.setState(0x1589, 0xd971, 0xecf0, 0x3d54, 0xa015, 0x10f7, 0x0, 0x0);
        gbc.writeMem(0x1589, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd971);
        EXPECT(gbc.pc(), 0x158a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01CB
        gbc.setState(0xafc1, 0x697d, 0x8f30, 0xe809, 0x3117, 0x7c4f, 0x0, 0x1);
        gbc.writeMem(0xafc1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x697d);
        EXPECT(gbc.pc(), 0xafc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafc1), 0xa2);
        // A2 01CC
        gbc.setState(0xaa14, 0xe690, 0xc0e0, 0xa1dc, 0x2c03, 0xb820, 0x1, 0x0);
        gbc.writeMem(0xaa14, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe690);
        EXPECT(gbc.pc(), 0xaa15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa14), 0xa2);
        // A2 01CD
        gbc.setState(0x63fe, 0xca18, 0x72a0, 0xaac5, 0x42a7, 0xf71c, 0x0, 0x0);
        gbc.writeMem(0x63fe, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xca18);
        EXPECT(gbc.pc(), 0x63ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01CE
        gbc.setState(0x3fbb, 0x7da9, 0x6d40, 0x70fb, 0x93af, 0x92b, 0x0, 0x0);
        gbc.writeMem(0x3fbb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7da9);
        EXPECT(gbc.pc(), 0x3fbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01CF
        gbc.setState(0xda71, 0x5bad, 0x7a60, 0x6252, 0x6577, 0x4c39, 0x1, 0x0);
        gbc.writeMem(0xda71, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5bad);
        EXPECT(gbc.pc(), 0xda72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda71), 0xa2);
        // A2 01D0
        gbc.setState(0xb799, 0x5cba, 0x26a0, 0x3086, 0xad96, 0xa6d8, 0x0, 0x0);
        gbc.writeMem(0xb799, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5cba);
        EXPECT(gbc.pc(), 0xb79a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb799), 0xa2);
        // A2 01D1
        gbc.setState(0xcc1d, 0xdc58, 0xbc10, 0x5463, 0x406a, 0xfa98, 0x0, 0x1);
        gbc.writeMem(0xcc1d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xdc58);
        EXPECT(gbc.pc(), 0xcc1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc1d), 0xa2);
        // A2 01D2
        gbc.setState(0x66d3, 0xf68, 0xfdc0, 0xc97, 0xd07, 0xf7, 0x0, 0x0);
        gbc.writeMem(0x66d3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xf68);
        EXPECT(gbc.pc(), 0x66d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01D3
        gbc.setState(0xd629, 0x8858, 0xd640, 0xe24f, 0xb3b2, 0xaf95, 0x0, 0x0);
        gbc.writeMem(0xd629, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8858);
        EXPECT(gbc.pc(), 0xd62a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd629), 0xa2);
        // A2 01D4
        gbc.setState(0x1096, 0x9667, 0x97b0, 0x4a00, 0x23c8, 0xb655, 0x1, 0x0);
        gbc.writeMem(0x1096, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9667);
        EXPECT(gbc.pc(), 0x1097);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01D5
        gbc.setState(0x9db5, 0xecc, 0xc690, 0x932, 0x2d2f, 0x153e, 0x1, 0x1);
        gbc.writeMem(0x9db5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xecc);
        EXPECT(gbc.pc(), 0x9db6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9db5), 0xa2);
        // A2 01D6
        gbc.setState(0x8f6e, 0x1542, 0x1980, 0x4650, 0xda6, 0xeaed, 0x0, 0x0);
        gbc.writeMem(0x8f6e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1542);
        EXPECT(gbc.pc(), 0x8f6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f6e), 0xa2);
        // A2 01D7
        gbc.setState(0x22f2, 0x88cc, 0x1620, 0x5bb4, 0x601d, 0xb600, 0x0, 0x1);
        gbc.writeMem(0x22f2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x88cc);
        EXPECT(gbc.pc(), 0x22f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01D8
        gbc.setState(0xeb08, 0xd0e1, 0x5170, 0x148b, 0x9c0f, 0xc85c, 0x1, 0x1);
        gbc.writeMem(0xeb08, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd0e1);
        EXPECT(gbc.pc(), 0xeb09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb08), 0xa2);
        // A2 01D9
        gbc.setState(0x76d6, 0x82fc, 0x7460, 0x781c, 0x35a, 0xaf89, 0x1, 0x1);
        gbc.writeMem(0x76d6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x82fc);
        EXPECT(gbc.pc(), 0x76d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01DA
        gbc.setState(0xaca6, 0x6e2a, 0x8540, 0xc171, 0x62df, 0x1e8, 0x0, 0x1);
        gbc.writeMem(0xaca6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x6e2a);
        EXPECT(gbc.pc(), 0xaca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaca6), 0xa2);
        // A2 01DB
        gbc.setState(0x11ed, 0xfe29, 0x5d90, 0xa3f6, 0xb8ef, 0xc16b, 0x0, 0x0);
        gbc.writeMem(0x11ed, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfe29);
        EXPECT(gbc.pc(), 0x11ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01DC
        gbc.setState(0x31a1, 0xba3, 0xdc30, 0x6e29, 0x9be0, 0x2e25, 0x1, 0x0);
        gbc.writeMem(0x31a1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xba3);
        EXPECT(gbc.pc(), 0x31a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01DD
        gbc.setState(0x23a4, 0x8c06, 0xfe40, 0xd2a1, 0xa17e, 0x39b6, 0x0, 0x0);
        gbc.writeMem(0x23a4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x8c06);
        EXPECT(gbc.pc(), 0x23a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01DE
        gbc.setState(0x4d0c, 0x7bb7, 0xf7d0, 0x5da5, 0x3acd, 0x7256, 0x0, 0x1);
        gbc.writeMem(0x4d0c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7bb7);
        EXPECT(gbc.pc(), 0x4d0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01DF
        gbc.setState(0x5c87, 0x6697, 0xffd0, 0x973, 0x80f6, 0xafc, 0x1, 0x0);
        gbc.writeMem(0x5c87, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6697);
        EXPECT(gbc.pc(), 0x5c88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E0
        gbc.setState(0xa9a6, 0xaab1, 0xe20, 0x815b, 0xc3eb, 0x7423, 0x1, 0x1);
        gbc.writeMem(0xa9a6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaab1);
        EXPECT(gbc.pc(), 0xa9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a6), 0xa2);
        // A2 01E1
        gbc.setState(0x8ad5, 0x19f3, 0x3f00, 0xf81d, 0x9b0f, 0x4d48, 0x1, 0x0);
        gbc.writeMem(0x8ad5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x19f3);
        EXPECT(gbc.pc(), 0x8ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ad5), 0xa2);
        // A2 01E2
        gbc.setState(0x7de3, 0x2ced, 0x8930, 0xa9a6, 0xb4b8, 0xf2df, 0x0, 0x0);
        gbc.writeMem(0x7de3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2ced);
        EXPECT(gbc.pc(), 0x7de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E3
        gbc.setState(0x5ffa, 0x1eff, 0xa870, 0x8e3a, 0x122f, 0x3564, 0x1, 0x0);
        gbc.writeMem(0x5ffa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x1eff);
        EXPECT(gbc.pc(), 0x5ffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E4
        gbc.setState(0x92e, 0x3fea, 0x80b0, 0x3e63, 0xda47, 0x85e1, 0x0, 0x0);
        gbc.writeMem(0x92e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3fea);
        EXPECT(gbc.pc(), 0x92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E5
        gbc.setState(0x5b2b, 0xf91a, 0x1680, 0x1fae, 0x536a, 0xdf6b, 0x1, 0x1);
        gbc.writeMem(0x5b2b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf91a);
        EXPECT(gbc.pc(), 0x5b2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E7
        gbc.setState(0x9955, 0x1790, 0x5f40, 0xe9fd, 0xeb3b, 0x4e98, 0x1, 0x0);
        gbc.writeMem(0x9955, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1790);
        EXPECT(gbc.pc(), 0x9956);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9955), 0xa2);
        // A2 01E8
        gbc.setState(0x38e, 0x918c, 0x5a20, 0x3507, 0xe89e, 0x89e4, 0x0, 0x1);
        gbc.writeMem(0x38e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x918c);
        EXPECT(gbc.pc(), 0x38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01E9
        gbc.setState(0x98ef, 0x1b5d, 0xcba0, 0x4f92, 0x421d, 0xd948, 0x0, 0x0);
        gbc.writeMem(0x98ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1b5d);
        EXPECT(gbc.pc(), 0x98f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ef), 0xa2);
        // A2 01EA
        gbc.setState(0xc2fd, 0xa4ff, 0x50f0, 0xf3f2, 0x5b0e, 0xae5d, 0x1, 0x1);
        gbc.writeMem(0xc2fd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa4ff);
        EXPECT(gbc.pc(), 0xc2fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2fd), 0xa2);
        // A2 01EB
        gbc.setState(0x1a08, 0x2321, 0x11a0, 0x1eac, 0x5b69, 0xaad6, 0x1, 0x0);
        gbc.writeMem(0x1a08, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2321);
        EXPECT(gbc.pc(), 0x1a09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01EC
        gbc.setState(0x3226, 0x8f1d, 0x1170, 0x9131, 0xf4da, 0xb858, 0x1, 0x1);
        gbc.writeMem(0x3226, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8f1d);
        EXPECT(gbc.pc(), 0x3227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01ED
        gbc.setState(0x2109, 0x825a, 0x8d00, 0xd6a, 0x9443, 0x999d, 0x1, 0x1);
        gbc.writeMem(0x2109, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x825a);
        EXPECT(gbc.pc(), 0x210a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01EE
        gbc.setState(0x9726, 0x1144, 0xf8a0, 0x1e6d, 0x4455, 0x391, 0x1, 0x1);
        gbc.writeMem(0x9726, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x1144);
        EXPECT(gbc.pc(), 0x9727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9726), 0xa2);
        // A2 01EF
        gbc.setState(0xe422, 0x2d52, 0xfc40, 0xd77e, 0x252, 0xde4b, 0x1, 0x0);
        gbc.writeMem(0xe422, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2d52);
        EXPECT(gbc.pc(), 0xe423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe422), 0xa2);
        // A2 01F0
        gbc.setState(0xbfb4, 0xc0a2, 0x6d70, 0xa2e5, 0x5e18, 0xeb91, 0x0, 0x1);
        gbc.writeMem(0xbfb4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc0a2);
        EXPECT(gbc.pc(), 0xbfb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfb4), 0xa2);
        // A2 01F1
        gbc.setState(0xed9b, 0xb27f, 0x6e60, 0x6e94, 0x5ffb, 0x4828, 0x1, 0x1);
        gbc.writeMem(0xed9b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb27f);
        EXPECT(gbc.pc(), 0xed9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed9b), 0xa2);
        // A2 01F2
        gbc.setState(0xedf4, 0xd6e0, 0xab60, 0xdef4, 0xcc77, 0xa15d, 0x0, 0x0);
        gbc.writeMem(0xedf4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xd6e0);
        EXPECT(gbc.pc(), 0xedf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf4), 0xa2);
        // A2 01F3
        gbc.setState(0x6051, 0x3426, 0xbeb0, 0xf18, 0x1d44, 0x52e0, 0x1, 0x1);
        gbc.writeMem(0x6051, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3426);
        EXPECT(gbc.pc(), 0x6052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01F4
        gbc.setState(0x60c5, 0x7ec9, 0x4f70, 0x190a, 0xfa59, 0x2458, 0x1, 0x0);
        gbc.writeMem(0x60c5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7ec9);
        EXPECT(gbc.pc(), 0x60c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01F5
        gbc.setState(0x1f09, 0xecc2, 0x4a40, 0x369d, 0x7b9d, 0x269e, 0x1, 0x1);
        gbc.writeMem(0x1f09, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xecc2);
        EXPECT(gbc.pc(), 0x1f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01F6
        gbc.setState(0x52d3, 0x55ae, 0x9eb0, 0xb002, 0x4018, 0xc66a, 0x0, 0x0);
        gbc.writeMem(0x52d3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x55ae);
        EXPECT(gbc.pc(), 0x52d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01F7
        gbc.setState(0x3e77, 0xb50d, 0xfa0, 0xc545, 0xc16c, 0x9ec6, 0x0, 0x0);
        gbc.writeMem(0x3e77, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb50d);
        EXPECT(gbc.pc(), 0x3e78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01F8
        gbc.setState(0xbda7, 0xd7e3, 0xb010, 0x5b68, 0xa17f, 0x68d1, 0x0, 0x1);
        gbc.writeMem(0xbda7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xd7e3);
        EXPECT(gbc.pc(), 0xbda8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbda7), 0xa2);
        // A2 01F9
        gbc.setState(0x423c, 0x451e, 0xf00, 0x1126, 0x7737, 0xef0b, 0x0, 0x0);
        gbc.writeMem(0x423c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x451e);
        EXPECT(gbc.pc(), 0x423d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01FA
        gbc.setState(0xb079, 0x2581, 0xb2b0, 0xb2a4, 0xdbe3, 0x4b52, 0x0, 0x1);
        gbc.writeMem(0xb079, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x2581);
        EXPECT(gbc.pc(), 0xb07a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb079), 0xa2);
        // A2 01FB
        gbc.setState(0xafa8, 0x9875, 0xb8a0, 0x8e4a, 0xb885, 0xc790, 0x1, 0x0);
        gbc.writeMem(0xafa8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x9875);
        EXPECT(gbc.pc(), 0xafa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafa8), 0xa2);
        // A2 01FC
        gbc.setState(0x2b6a, 0x7a70, 0xf8c0, 0x6500, 0x7db0, 0x538d, 0x1, 0x1);
        gbc.writeMem(0x2b6a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7a70);
        EXPECT(gbc.pc(), 0x2b6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01FD
        gbc.setState(0x3471, 0xed26, 0x6ef0, 0xb564, 0x275e, 0xbb85, 0x0, 0x0);
        gbc.writeMem(0x3471, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xed26);
        EXPECT(gbc.pc(), 0x3472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 01FE
        gbc.setState(0xa7d3, 0x7f26, 0x8070, 0x12f8, 0xe1af, 0x3ce7, 0x1, 0x0);
        gbc.writeMem(0xa7d3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7f26);
        EXPECT(gbc.pc(), 0xa7d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7d3), 0xa2);
        // A2 01FF
        gbc.setState(0x1258, 0xdab2, 0x3e20, 0x1140, 0xc1ea, 0x951f, 0x1, 0x1);
        gbc.writeMem(0x1258, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xdab2);
        EXPECT(gbc.pc(), 0x1259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0200
        gbc.setState(0x11f6, 0xcbf5, 0xf540, 0x8e9e, 0x3ad4, 0xa4c8, 0x0, 0x0);
        gbc.writeMem(0x11f6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xcbf5);
        EXPECT(gbc.pc(), 0x11f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0201
        gbc.setState(0x53ce, 0x36f9, 0xa000, 0x628e, 0xe3a6, 0x4b29, 0x0, 0x1);
        gbc.writeMem(0x53ce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x36f9);
        EXPECT(gbc.pc(), 0x53cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0202
        gbc.setState(0x1421, 0x4c4, 0xc4d0, 0x7817, 0xe4d5, 0x3c73, 0x1, 0x1);
        gbc.writeMem(0x1421, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4c4);
        EXPECT(gbc.pc(), 0x1422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0203
        gbc.setState(0x6281, 0x504c, 0x2260, 0x5e52, 0x610b, 0x2eda, 0x1, 0x0);
        gbc.writeMem(0x6281, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x504c);
        EXPECT(gbc.pc(), 0x6282);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0204
        gbc.setState(0x745b, 0xbd27, 0x2200, 0x93c9, 0x20e1, 0x6530, 0x0, 0x0);
        gbc.writeMem(0x745b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xbd27);
        EXPECT(gbc.pc(), 0x745c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0205
        gbc.setState(0xe6c6, 0x6a8b, 0xb530, 0xba44, 0xa13c, 0xee96, 0x1, 0x0);
        gbc.writeMem(0xe6c6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x6a8b);
        EXPECT(gbc.pc(), 0xe6c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c6), 0xa2);
        // A2 0207
        gbc.setState(0x6cfb, 0x28a3, 0x31f0, 0x771d, 0xfcb4, 0x99ca, 0x0, 0x0);
        gbc.writeMem(0x6cfb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x28a3);
        EXPECT(gbc.pc(), 0x6cfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0208
        gbc.setState(0x23c7, 0xc435, 0xe3e0, 0xf2bd, 0x368d, 0xdb91, 0x1, 0x0);
        gbc.writeMem(0x23c7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc435);
        EXPECT(gbc.pc(), 0x23c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0209
        gbc.setState(0x5b7b, 0x7646, 0xdb90, 0x41ba, 0xbd72, 0x6ee1, 0x0, 0x0);
        gbc.writeMem(0x5b7b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7646);
        EXPECT(gbc.pc(), 0x5b7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 020A
        gbc.setState(0xbe8a, 0xcd9b, 0x7870, 0x9dd7, 0xd7cc, 0x7390, 0x1, 0x0);
        gbc.writeMem(0xbe8a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcd9b);
        EXPECT(gbc.pc(), 0xbe8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8a), 0xa2);
        // A2 020B
        gbc.setState(0xbd6b, 0x2b6e, 0xabc0, 0x2357, 0x9bf1, 0xebdc, 0x0, 0x1);
        gbc.writeMem(0xbd6b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2b6e);
        EXPECT(gbc.pc(), 0xbd6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd6b), 0xa2);
        // A2 020C
        gbc.setState(0xb672, 0x2461, 0xe3d0, 0x5476, 0x80e1, 0x8a20, 0x0, 0x1);
        gbc.writeMem(0xb672, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2461);
        EXPECT(gbc.pc(), 0xb673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb672), 0xa2);
        // A2 020D
        gbc.setState(0x23b5, 0xa029, 0x8f80, 0xcd94, 0x4c9b, 0xeceb, 0x1, 0x1);
        gbc.writeMem(0x23b5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa029);
        EXPECT(gbc.pc(), 0x23b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 020E
        gbc.setState(0x240b, 0x2bee, 0x10c0, 0x5e07, 0x76b0, 0xeb1a, 0x0, 0x1);
        gbc.writeMem(0x240b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2bee);
        EXPECT(gbc.pc(), 0x240c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0210
        gbc.setState(0x1585, 0x8cd0, 0x5780, 0x6e45, 0xc9ca, 0x4e97, 0x1, 0x1);
        gbc.writeMem(0x1585, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8cd0);
        EXPECT(gbc.pc(), 0x1586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0211
        gbc.setState(0x84a3, 0x73b2, 0x9430, 0x230f, 0x161a, 0xa3ca, 0x1, 0x1);
        gbc.writeMem(0x84a3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x73b2);
        EXPECT(gbc.pc(), 0x84a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84a3), 0xa2);
        // A2 0212
        gbc.setState(0xe0e9, 0xb8f7, 0x3890, 0xef44, 0xd38d, 0x5d9, 0x1, 0x1);
        gbc.writeMem(0xe0e9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xb8f7);
        EXPECT(gbc.pc(), 0xe0ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e9), 0xa2);
        // A2 0213
        gbc.setState(0x75f, 0xff2f, 0xa9b0, 0xbabc, 0x4de0, 0xdfc1, 0x0, 0x1);
        gbc.writeMem(0x75f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xff2f);
        EXPECT(gbc.pc(), 0x760);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0214
        gbc.setState(0x2ba4, 0xcc9f, 0x71d0, 0x2827, 0x6c3, 0x6090, 0x1, 0x1);
        gbc.writeMem(0x2ba4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcc9f);
        EXPECT(gbc.pc(), 0x2ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0215
        gbc.setState(0x35c, 0x42e6, 0x3580, 0xb201, 0x1f93, 0xd7fa, 0x1, 0x1);
        gbc.writeMem(0x35c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x42e6);
        EXPECT(gbc.pc(), 0x35d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0216
        gbc.setState(0x6ca4, 0x7006, 0x8b80, 0xfb3a, 0x3f7a, 0xc79a, 0x0, 0x1);
        gbc.writeMem(0x6ca4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x7006);
        EXPECT(gbc.pc(), 0x6ca5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0217
        gbc.setState(0xe498, 0x9e12, 0x2110, 0xf013, 0xe722, 0xfe5f, 0x1, 0x1);
        gbc.writeMem(0xe498, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x9e12);
        EXPECT(gbc.pc(), 0xe499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe498), 0xa2);
        // A2 0218
        gbc.setState(0x9725, 0xf891, 0xf870, 0x234d, 0x4aa7, 0xf6a4, 0x1, 0x0);
        gbc.writeMem(0x9725, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xf891);
        EXPECT(gbc.pc(), 0x9726);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9725), 0xa2);
        // A2 0219
        gbc.setState(0x96f1, 0x75ea, 0xa180, 0xe3a, 0x67a5, 0xb651, 0x0, 0x0);
        gbc.writeMem(0x96f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x75ea);
        EXPECT(gbc.pc(), 0x96f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96f1), 0xa2);
        // A2 021A
        gbc.setState(0x51ae, 0x8ced, 0xcfa0, 0x1907, 0x5313, 0xc725, 0x0, 0x1);
        gbc.writeMem(0x51ae, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8ced);
        EXPECT(gbc.pc(), 0x51af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 021B
        gbc.setState(0xd730, 0xdc22, 0x4cd0, 0xcb81, 0x73ba, 0xc3, 0x0, 0x0);
        gbc.writeMem(0xd730, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdc22);
        EXPECT(gbc.pc(), 0xd731);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd730), 0xa2);
        // A2 021C
        gbc.setState(0x7235, 0x690d, 0xa020, 0xda4b, 0xe976, 0xd7dc, 0x1, 0x0);
        gbc.writeMem(0x7235, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x690d);
        EXPECT(gbc.pc(), 0x7236);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 021D
        gbc.setState(0x9f12, 0xd12a, 0x5f30, 0xb9e2, 0x42d8, 0xdac9, 0x0, 0x0);
        gbc.writeMem(0x9f12, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xd12a);
        EXPECT(gbc.pc(), 0x9f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f12), 0xa2);
        // A2 021E
        gbc.setState(0xe10b, 0x90a7, 0xc510, 0x99f4, 0xe516, 0x31fd, 0x1, 0x0);
        gbc.writeMem(0xe10b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x90a7);
        EXPECT(gbc.pc(), 0xe10c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10b), 0xa2);
        // A2 021F
        gbc.setState(0x5f75, 0x6e8f, 0xe270, 0x4b6e, 0x3ba1, 0x75d7, 0x1, 0x0);
        gbc.writeMem(0x5f75, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6e8f);
        EXPECT(gbc.pc(), 0x5f76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0220
        gbc.setState(0x52f, 0xb01a, 0x52a0, 0xc837, 0x33d7, 0x70bf, 0x1, 0x0);
        gbc.writeMem(0x52f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xb01a);
        EXPECT(gbc.pc(), 0x530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0221
        gbc.setState(0x9d24, 0xf209, 0x9e30, 0x4a00, 0xa126, 0x5521, 0x1, 0x0);
        gbc.writeMem(0x9d24, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf209);
        EXPECT(gbc.pc(), 0x9d25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d24), 0xa2);
        // A2 0222
        gbc.setState(0x7fbd, 0xe849, 0x2dc0, 0xe3cc, 0xdd16, 0x6839, 0x1, 0x0);
        gbc.writeMem(0x7fbd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xe849);
        EXPECT(gbc.pc(), 0x7fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0223
        gbc.setState(0x4349, 0x8209, 0xd680, 0xb132, 0x32df, 0xa3f0, 0x1, 0x1);
        gbc.writeMem(0x4349, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8209);
        EXPECT(gbc.pc(), 0x434a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0224
        gbc.setState(0x4004, 0x4e95, 0xaff0, 0x72aa, 0x4d9f, 0xd065, 0x0, 0x1);
        gbc.writeMem(0x4004, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4e95);
        EXPECT(gbc.pc(), 0x4005);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0225
        gbc.setState(0x6d6d, 0xf3a8, 0xa7c0, 0x567d, 0x8415, 0x2318, 0x0, 0x0);
        gbc.writeMem(0x6d6d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xf3a8);
        EXPECT(gbc.pc(), 0x6d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0226
        gbc.setState(0xe99c, 0xdf9a, 0xc8a0, 0x304, 0x6344, 0x738e, 0x0, 0x1);
        gbc.writeMem(0xe99c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xdf9a);
        EXPECT(gbc.pc(), 0xe99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99c), 0xa2);
        // A2 0227
        gbc.setState(0x8083, 0x7cf1, 0x6840, 0x5e91, 0x9618, 0x8535, 0x0, 0x1);
        gbc.writeMem(0x8083, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x7cf1);
        EXPECT(gbc.pc(), 0x8084);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8083), 0xa2);
        // A2 0228
        gbc.setState(0xecc1, 0xa0aa, 0xc4c0, 0xae6a, 0x1c59, 0xa4eb, 0x0, 0x0);
        gbc.writeMem(0xecc1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xa0aa);
        EXPECT(gbc.pc(), 0xecc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecc1), 0xa2);
        // A2 0229
        gbc.setState(0xac84, 0x83b4, 0x23f0, 0xcd32, 0xb476, 0xc985, 0x0, 0x0);
        gbc.writeMem(0xac84, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x83b4);
        EXPECT(gbc.pc(), 0xac85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac84), 0xa2);
        // A2 022A
        gbc.setState(0x6f7f, 0xaa8a, 0xb6d0, 0xee5f, 0x205c, 0x5ff5, 0x1, 0x1);
        gbc.writeMem(0x6f7f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xaa8a);
        EXPECT(gbc.pc(), 0x6f80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 022B
        gbc.setState(0xe049, 0xbd70, 0xebc0, 0x8b4b, 0x17de, 0xd25a, 0x0, 0x1);
        gbc.writeMem(0xe049, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xbd70);
        EXPECT(gbc.pc(), 0xe04a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe049), 0xa2);
        // A2 022C
        gbc.setState(0x2d04, 0x3944, 0x2030, 0xcacf, 0x7e1b, 0x47c5, 0x1, 0x0);
        gbc.writeMem(0x2d04, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x3944);
        EXPECT(gbc.pc(), 0x2d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 022D
        gbc.setState(0xdcf7, 0xc92f, 0xe090, 0x69f6, 0x76ff, 0x9554, 0x0, 0x0);
        gbc.writeMem(0xdcf7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc92f);
        EXPECT(gbc.pc(), 0xdcf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf7), 0xa2);
        // A2 022E
        gbc.setState(0xd7bf, 0xd3c2, 0xd4f0, 0x796e, 0xb4dc, 0x72e6, 0x1, 0x0);
        gbc.writeMem(0xd7bf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd3c2);
        EXPECT(gbc.pc(), 0xd7c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7bf), 0xa2);
        // A2 022F
        gbc.setState(0xb84c, 0xb8d7, 0x9190, 0x6968, 0xc046, 0xb5f9, 0x0, 0x0);
        gbc.writeMem(0xb84c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb8d7);
        EXPECT(gbc.pc(), 0xb84d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb84c), 0xa2);
        // A2 0230
        gbc.setState(0x807a, 0x14b0, 0x6290, 0xa35, 0xc88a, 0x56e0, 0x0, 0x0);
        gbc.writeMem(0x807a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x14b0);
        EXPECT(gbc.pc(), 0x807b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x807a), 0xa2);
        // A2 0231
        gbc.setState(0xdb5a, 0x9b6, 0x550, 0xbf2e, 0x741e, 0x5b77, 0x0, 0x0);
        gbc.writeMem(0xdb5a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x9b6);
        EXPECT(gbc.pc(), 0xdb5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5a), 0xa2);
        // A2 0232
        gbc.setState(0x39c2, 0x6639, 0x84b0, 0x319d, 0x9615, 0xf814, 0x0, 0x1);
        gbc.writeMem(0x39c2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6639);
        EXPECT(gbc.pc(), 0x39c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0233
        gbc.setState(0x4be9, 0x561a, 0xeae0, 0xcfa9, 0xb6a4, 0xbeec, 0x0, 0x1);
        gbc.writeMem(0x4be9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x561a);
        EXPECT(gbc.pc(), 0x4bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0234
        gbc.setState(0xcf91, 0xcfdb, 0x6ac0, 0x6201, 0xa776, 0x54c3, 0x0, 0x0);
        gbc.writeMem(0xcf91, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xcfdb);
        EXPECT(gbc.pc(), 0xcf92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf91), 0xa2);
        // A2 0235
        gbc.setState(0x6792, 0x4935, 0x9100, 0x3f43, 0x9acb, 0xa8be, 0x0, 0x1);
        gbc.writeMem(0x6792, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4935);
        EXPECT(gbc.pc(), 0x6793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0236
        gbc.setState(0x42ee, 0xb294, 0x9180, 0xbb7a, 0x19c3, 0x3044, 0x0, 0x0);
        gbc.writeMem(0x42ee, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb294);
        EXPECT(gbc.pc(), 0x42ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0237
        gbc.setState(0x5f2b, 0xa719, 0x3720, 0xaa5b, 0xb55, 0xf176, 0x0, 0x0);
        gbc.writeMem(0x5f2b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa719);
        EXPECT(gbc.pc(), 0x5f2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0238
        gbc.setState(0x951b, 0x4d7c, 0x5890, 0x4b71, 0xd411, 0x4b27, 0x1, 0x1);
        gbc.writeMem(0x951b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x4d7c);
        EXPECT(gbc.pc(), 0x951c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951b), 0xa2);
        // A2 0239
        gbc.setState(0x85e6, 0x93a9, 0x5210, 0x1ac9, 0xd9b1, 0xf3a4, 0x0, 0x0);
        gbc.writeMem(0x85e6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x93a9);
        EXPECT(gbc.pc(), 0x85e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e6), 0xa2);
        // A2 023A
        gbc.setState(0x720c, 0x9a48, 0x89c0, 0xe97f, 0xcbd2, 0x728, 0x0, 0x0);
        gbc.writeMem(0x720c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9a48);
        EXPECT(gbc.pc(), 0x720d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 023C
        gbc.setState(0x404e, 0xf769, 0x840, 0x9cb5, 0x414d, 0xf92b, 0x0, 0x1);
        gbc.writeMem(0x404e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf769);
        EXPECT(gbc.pc(), 0x404f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 023D
        gbc.setState(0x7159, 0x8d20, 0x8150, 0xfef1, 0x5c66, 0xd2b, 0x1, 0x0);
        gbc.writeMem(0x7159, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8d20);
        EXPECT(gbc.pc(), 0x715a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 023E
        gbc.setState(0x2125, 0x676, 0x810, 0x52f8, 0x7ba5, 0x8fcf, 0x0, 0x1);
        gbc.writeMem(0x2125, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x676);
        EXPECT(gbc.pc(), 0x2126);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 023F
        gbc.setState(0xd17f, 0x7a23, 0x5350, 0x85e6, 0xc0a3, 0xe59f, 0x0, 0x1);
        gbc.writeMem(0xd17f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7a23);
        EXPECT(gbc.pc(), 0xd180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17f), 0xa2);
        // A2 0240
        gbc.setState(0xc5b, 0x2a5, 0x9b50, 0x2bd7, 0x147d, 0x7515, 0x0, 0x1);
        gbc.writeMem(0xc5b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2a5);
        EXPECT(gbc.pc(), 0xc5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0241
        gbc.setState(0x798d, 0x6c56, 0xaac0, 0xf2c8, 0x662a, 0x1c90, 0x0, 0x1);
        gbc.writeMem(0x798d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6c56);
        EXPECT(gbc.pc(), 0x798e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0242
        gbc.setState(0xdfc2, 0xaceb, 0x82d0, 0x5f3f, 0x6b47, 0xd148, 0x1, 0x0);
        gbc.writeMem(0xdfc2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xaceb);
        EXPECT(gbc.pc(), 0xdfc3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfc2), 0xa2);
        // A2 0243
        gbc.setState(0xcf34, 0x1e35, 0xa410, 0x10e8, 0xabea, 0x1ac8, 0x1, 0x0);
        gbc.writeMem(0xcf34, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x1e35);
        EXPECT(gbc.pc(), 0xcf35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf34), 0xa2);
        // A2 0244
        gbc.setState(0x6ba7, 0xc52, 0x4020, 0x1f2b, 0xabe, 0x621c, 0x1, 0x1);
        gbc.writeMem(0x6ba7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xc52);
        EXPECT(gbc.pc(), 0x6ba8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0245
        gbc.setState(0xb0ce, 0xf433, 0x9590, 0x1850, 0xb841, 0x35f0, 0x0, 0x0);
        gbc.writeMem(0xb0ce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xf433);
        EXPECT(gbc.pc(), 0xb0cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0ce), 0xa2);
        // A2 0246
        gbc.setState(0xba0, 0x7e22, 0xd250, 0xb1e8, 0x8d26, 0x48ed, 0x1, 0x0);
        gbc.writeMem(0xba0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x7e22);
        EXPECT(gbc.pc(), 0xba1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0247
        gbc.setState(0xe7a7, 0x1a8e, 0xbb0, 0xc32f, 0xca04, 0x6e04, 0x1, 0x0);
        gbc.writeMem(0xe7a7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1a8e);
        EXPECT(gbc.pc(), 0xe7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a7), 0xa2);
        // A2 0248
        gbc.setState(0x728c, 0xa400, 0x9450, 0x28f5, 0x1910, 0xaeb5, 0x0, 0x0);
        gbc.writeMem(0x728c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa400);
        EXPECT(gbc.pc(), 0x728d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0249
        gbc.setState(0x7fe, 0xdaa6, 0xa270, 0x914, 0x4629, 0x627e, 0x0, 0x0);
        gbc.writeMem(0x7fe, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xdaa6);
        EXPECT(gbc.pc(), 0x7ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 024A
        gbc.setState(0xdccb, 0xa881, 0xdb30, 0x231a, 0x717e, 0x2de3, 0x0, 0x1);
        gbc.writeMem(0xdccb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xa881);
        EXPECT(gbc.pc(), 0xdccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdccb), 0xa2);
        // A2 024B
        gbc.setState(0xdae7, 0xfdbd, 0x8bd0, 0xcd6e, 0xbaba, 0x754d, 0x0, 0x1);
        gbc.writeMem(0xdae7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xfdbd);
        EXPECT(gbc.pc(), 0xdae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdae7), 0xa2);
        // A2 024C
        gbc.setState(0x30bd, 0x9080, 0xb120, 0xc9d9, 0xbcd0, 0x4684, 0x1, 0x1);
        gbc.writeMem(0x30bd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x9080);
        EXPECT(gbc.pc(), 0x30be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 024D
        gbc.setState(0xa743, 0xd597, 0xd6c0, 0x3ef0, 0x4777, 0x1b51, 0x0, 0x0);
        gbc.writeMem(0xa743, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xd597);
        EXPECT(gbc.pc(), 0xa744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa743), 0xa2);
        // A2 024E
        gbc.setState(0x7f4d, 0xacf6, 0x1d30, 0x97c6, 0x1336, 0xd985, 0x0, 0x0);
        gbc.writeMem(0x7f4d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xacf6);
        EXPECT(gbc.pc(), 0x7f4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 024F
        gbc.setState(0xef10, 0xbe73, 0x8700, 0x9b34, 0x4097, 0x2d6a, 0x0, 0x0);
        gbc.writeMem(0xef10, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xbe73);
        EXPECT(gbc.pc(), 0xef11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef10), 0xa2);
        // A2 0250
        gbc.setState(0xef94, 0xc745, 0x5ad0, 0x36b7, 0xd6af, 0x5e4a, 0x0, 0x0);
        gbc.writeMem(0xef94, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xc745);
        EXPECT(gbc.pc(), 0xef95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef94), 0xa2);
        // A2 0251
        gbc.setState(0xb0a0, 0xed6b, 0x52c0, 0x582a, 0x8522, 0xf380, 0x0, 0x1);
        gbc.writeMem(0xb0a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xed6b);
        EXPECT(gbc.pc(), 0xb0a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a0), 0xa2);
        // A2 0253
        gbc.setState(0xbc5d, 0x493, 0xfe90, 0x6388, 0xe425, 0x581a, 0x1, 0x0);
        gbc.writeMem(0xbc5d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x493);
        EXPECT(gbc.pc(), 0xbc5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5d), 0xa2);
        // A2 0254
        gbc.setState(0xe29b, 0x6455, 0x4e70, 0x3e1d, 0x2551, 0x3adb, 0x1, 0x0);
        gbc.writeMem(0xe29b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x6455);
        EXPECT(gbc.pc(), 0xe29c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe29b), 0xa2);
        // A2 0255
        gbc.setState(0x8292, 0xe0dd, 0x7730, 0x45e5, 0x489f, 0x72c1, 0x0, 0x1);
        gbc.writeMem(0x8292, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe0dd);
        EXPECT(gbc.pc(), 0x8293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8292), 0xa2);
        // A2 0256
        gbc.setState(0xd477, 0xe451, 0xa620, 0xeb38, 0xfb81, 0x1312, 0x0, 0x0);
        gbc.writeMem(0xd477, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe451);
        EXPECT(gbc.pc(), 0xd478);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd477), 0xa2);
        // A2 0257
        gbc.setState(0xe335, 0xe3eb, 0xf8f0, 0xeb55, 0x28bb, 0xb65d, 0x0, 0x1);
        gbc.writeMem(0xe335, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe3eb);
        EXPECT(gbc.pc(), 0xe336);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe335), 0xa2);
        // A2 0258
        gbc.setState(0xc7de, 0x7218, 0x1ce0, 0x77c, 0x4969, 0x6623, 0x0, 0x1);
        gbc.writeMem(0xc7de, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x7218);
        EXPECT(gbc.pc(), 0xc7df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7de), 0xa2);
        // A2 0259
        gbc.setState(0x5f7d, 0xfbab, 0x6620, 0xacb8, 0x9001, 0xb865, 0x0, 0x1);
        gbc.writeMem(0x5f7d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfbab);
        EXPECT(gbc.pc(), 0x5f7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 025A
        gbc.setState(0xc0b3, 0xd8ca, 0x73c0, 0x68a2, 0x5324, 0x31d6, 0x0, 0x1);
        gbc.writeMem(0xc0b3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xd8ca);
        EXPECT(gbc.pc(), 0xc0b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b3), 0xa2);
        // A2 025B
        gbc.setState(0xd9a0, 0x294e, 0x2070, 0xc2f, 0x1715, 0xff7b, 0x0, 0x0);
        gbc.writeMem(0xd9a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x294e);
        EXPECT(gbc.pc(), 0xd9a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9a0), 0xa2);
        // A2 025C
        gbc.setState(0x5d39, 0x70f1, 0x7a20, 0x9378, 0xcb41, 0xc4f1, 0x1, 0x1);
        gbc.writeMem(0x5d39, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x70f1);
        EXPECT(gbc.pc(), 0x5d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 025D
        gbc.setState(0xf51, 0xf848, 0x3a40, 0x7072, 0xea35, 0xb56e, 0x0, 0x1);
        gbc.writeMem(0xf51, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf848);
        EXPECT(gbc.pc(), 0xf52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 025E
        gbc.setState(0xefb1, 0xd162, 0x3300, 0x2531, 0xd9ff, 0xdfca, 0x0, 0x1);
        gbc.writeMem(0xefb1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xd162);
        EXPECT(gbc.pc(), 0xefb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefb1), 0xa2);
        // A2 025F
        gbc.setState(0x8e88, 0xd78a, 0xf870, 0x4aa5, 0x84b8, 0x53e4, 0x0, 0x0);
        gbc.writeMem(0x8e88, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd78a);
        EXPECT(gbc.pc(), 0x8e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e88), 0xa2);
        // A2 0260
        gbc.setState(0xe8b5, 0x98ee, 0x22c0, 0x74b5, 0xa62c, 0xbc41, 0x0, 0x1);
        gbc.writeMem(0xe8b5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x98ee);
        EXPECT(gbc.pc(), 0xe8b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b5), 0xa2);
        // A2 0261
        gbc.setState(0x565f, 0x4979, 0x3f80, 0xd00a, 0x95f6, 0xe640, 0x0, 0x1);
        gbc.writeMem(0x565f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4979);
        EXPECT(gbc.pc(), 0x5660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0262
        gbc.setState(0x6cf1, 0x1ff7, 0xd680, 0xdbb7, 0x4bf2, 0x28ca, 0x1, 0x1);
        gbc.writeMem(0x6cf1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x1ff7);
        EXPECT(gbc.pc(), 0x6cf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0263
        gbc.setState(0xbcff, 0x5c5b, 0xf1a0, 0x5b95, 0xa874, 0xcd6f, 0x1, 0x0);
        gbc.writeMem(0xbcff, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5c5b);
        EXPECT(gbc.pc(), 0xbd00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcff), 0xa2);
        // A2 0264
        gbc.setState(0x9629, 0xab1f, 0x3c30, 0xca3b, 0x9fb, 0xeaa8, 0x1, 0x1);
        gbc.writeMem(0x9629, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xab1f);
        EXPECT(gbc.pc(), 0x962a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9629), 0xa2);
        // A2 0265
        gbc.setState(0x7a14, 0xf28a, 0xf990, 0xaabe, 0x61e5, 0x8540, 0x1, 0x1);
        gbc.writeMem(0x7a14, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xf28a);
        EXPECT(gbc.pc(), 0x7a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0266
        gbc.setState(0x47f0, 0x8012, 0xee00, 0x93c6, 0x8e31, 0x5088, 0x0, 0x1);
        gbc.writeMem(0x47f0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x8012);
        EXPECT(gbc.pc(), 0x47f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0267
        gbc.setState(0xa336, 0xe959, 0x3820, 0x32cb, 0xabec, 0xa54, 0x1, 0x1);
        gbc.writeMem(0xa336, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe959);
        EXPECT(gbc.pc(), 0xa337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa336), 0xa2);
        // A2 0268
        gbc.setState(0xa4e2, 0xbe34, 0xa6d0, 0xd06f, 0x3b41, 0x527a, 0x1, 0x0);
        gbc.writeMem(0xa4e2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xbe34);
        EXPECT(gbc.pc(), 0xa4e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4e2), 0xa2);
        // A2 0269
        gbc.setState(0x302d, 0x6c24, 0xdd0, 0x1a43, 0x5651, 0xdcd0, 0x1, 0x1);
        gbc.writeMem(0x302d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x6c24);
        EXPECT(gbc.pc(), 0x302e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 026A
        gbc.setState(0xd8, 0xa023, 0x38a0, 0x1392, 0x316e, 0xc0ac, 0x1, 0x1);
        gbc.writeMem(0xd8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa023);
        EXPECT(gbc.pc(), 0xd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 026B
        gbc.setState(0xdb8b, 0x6f15, 0xd680, 0xc5f6, 0x204e, 0x1ec2, 0x0, 0x0);
        gbc.writeMem(0xdb8b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x6f15);
        EXPECT(gbc.pc(), 0xdb8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb8b), 0xa2);
        // A2 026C
        gbc.setState(0x9f79, 0x4086, 0x82a0, 0x3a7d, 0x252a, 0xb96d, 0x1, 0x0);
        gbc.writeMem(0x9f79, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4086);
        EXPECT(gbc.pc(), 0x9f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f79), 0xa2);
        // A2 026D
        gbc.setState(0x94e6, 0x3b8a, 0xdac0, 0xa74a, 0xe8c4, 0x7641, 0x0, 0x0);
        gbc.writeMem(0x94e6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3b8a);
        EXPECT(gbc.pc(), 0x94e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e6), 0xa2);
        // A2 026E
        gbc.setState(0x3b6b, 0xe289, 0x1d70, 0x9807, 0x3a87, 0x6cf4, 0x0, 0x0);
        gbc.writeMem(0x3b6b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe289);
        EXPECT(gbc.pc(), 0x3b6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 026F
        gbc.setState(0x96e2, 0x4532, 0xbe70, 0xf5e, 0x5750, 0xaed8, 0x1, 0x1);
        gbc.writeMem(0x96e2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x4532);
        EXPECT(gbc.pc(), 0x96e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96e2), 0xa2);
        // A2 0270
        gbc.setState(0xd6b7, 0x7fb7, 0x1b00, 0xee9, 0xa066, 0xa153, 0x1, 0x0);
        gbc.writeMem(0xd6b7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x7fb7);
        EXPECT(gbc.pc(), 0xd6b8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6b7), 0xa2);
        // A2 0271
        gbc.setState(0xb542, 0x5bfe, 0xef0, 0x8d21, 0x4ff4, 0x325b, 0x1, 0x1);
        gbc.writeMem(0xb542, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5bfe);
        EXPECT(gbc.pc(), 0xb543);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb542), 0xa2);
        // A2 0272
        gbc.setState(0x2feb, 0xe63d, 0xe520, 0xfdd7, 0x79bc, 0x5dd8, 0x0, 0x1);
        gbc.writeMem(0x2feb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe63d);
        EXPECT(gbc.pc(), 0x2fec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0273
        gbc.setState(0x40a0, 0x4ad8, 0xd610, 0xc263, 0x5a70, 0x2a25, 0x1, 0x1);
        gbc.writeMem(0x40a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4ad8);
        EXPECT(gbc.pc(), 0x40a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0274
        gbc.setState(0x6db8, 0x4954, 0x5b20, 0xc787, 0x14fb, 0x5264, 0x0, 0x0);
        gbc.writeMem(0x6db8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x4954);
        EXPECT(gbc.pc(), 0x6db9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0275
        gbc.setState(0x332e, 0xa100, 0xf470, 0x19fa, 0xde1b, 0x51e2, 0x0, 0x1);
        gbc.writeMem(0x332e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa100);
        EXPECT(gbc.pc(), 0x332f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0276
        gbc.setState(0xb2f8, 0x578f, 0x2a10, 0xc056, 0x734e, 0x7aa7, 0x0, 0x1);
        gbc.writeMem(0xb2f8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x578f);
        EXPECT(gbc.pc(), 0xb2f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2f8), 0xa2);
        // A2 0277
        gbc.setState(0xe0d9, 0x5d21, 0x1fc0, 0x8776, 0x70dd, 0xdad8, 0x1, 0x1);
        gbc.writeMem(0xe0d9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5d21);
        EXPECT(gbc.pc(), 0xe0da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0d9), 0xa2);
        // A2 0278
        gbc.setState(0xb315, 0x5d18, 0x3850, 0x1306, 0xc18, 0x3bc7, 0x0, 0x1);
        gbc.writeMem(0xb315, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5d18);
        EXPECT(gbc.pc(), 0xb316);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb315), 0xa2);
        // A2 0279
        gbc.setState(0xde27, 0x9dc, 0xbdd0, 0x702e, 0x20ca, 0x5f2f, 0x1, 0x1);
        gbc.writeMem(0xde27, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x9dc);
        EXPECT(gbc.pc(), 0xde28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde27), 0xa2);
        // A2 027A
        gbc.setState(0xcb35, 0x1eac, 0xf830, 0x5059, 0x9b69, 0xd2f, 0x0, 0x0);
        gbc.writeMem(0xcb35, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1eac);
        EXPECT(gbc.pc(), 0xcb36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb35), 0xa2);
        // A2 027C
        gbc.setState(0x7771, 0x9044, 0xe3b0, 0x6b10, 0x678, 0x597d, 0x1, 0x1);
        gbc.writeMem(0x7771, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9044);
        EXPECT(gbc.pc(), 0x7772);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 027D
        gbc.setState(0xb85a, 0x2c32, 0x4850, 0x3811, 0x9d39, 0x5c1f, 0x0, 0x0);
        gbc.writeMem(0xb85a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2c32);
        EXPECT(gbc.pc(), 0xb85b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb85a), 0xa2);
        // A2 027E
        gbc.setState(0xa02c, 0x1daa, 0x48a0, 0x7e14, 0x8337, 0x3eba, 0x1, 0x0);
        gbc.writeMem(0xa02c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x1daa);
        EXPECT(gbc.pc(), 0xa02d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa02c), 0xa2);
        // A2 027F
        gbc.setState(0xe7d2, 0x5206, 0x8ba0, 0xe7fd, 0x4cbf, 0x4fb, 0x0, 0x0);
        gbc.writeMem(0xe7d2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5206);
        EXPECT(gbc.pc(), 0xe7d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7d2), 0xa2);
        // A2 0280
        gbc.setState(0x3e7a, 0x7a30, 0x350, 0x8e38, 0x17ba, 0x147a, 0x1, 0x1);
        gbc.writeMem(0x3e7a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x7a30);
        EXPECT(gbc.pc(), 0x3e7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0281
        gbc.setState(0x5d97, 0xe84d, 0x1490, 0xdbbc, 0xb375, 0x2c1f, 0x1, 0x0);
        gbc.writeMem(0x5d97, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe84d);
        EXPECT(gbc.pc(), 0x5d98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0282
        gbc.setState(0x797f, 0xc39c, 0x4a30, 0x3ec0, 0x9f3d, 0xcd0e, 0x0, 0x1);
        gbc.writeMem(0x797f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc39c);
        EXPECT(gbc.pc(), 0x7980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0283
        gbc.setState(0xd7fa, 0x498f, 0x8320, 0x1e92, 0x4b11, 0xed5a, 0x0, 0x1);
        gbc.writeMem(0xd7fa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x498f);
        EXPECT(gbc.pc(), 0xd7fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7fa), 0xa2);
        // A2 0284
        gbc.setState(0x65d5, 0x593d, 0x72a0, 0xd0a7, 0xe4c, 0x2c46, 0x0, 0x1);
        gbc.writeMem(0x65d5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x593d);
        EXPECT(gbc.pc(), 0x65d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0285
        gbc.setState(0xc59, 0xd533, 0x29f0, 0xf7be, 0x497c, 0x91f9, 0x0, 0x1);
        gbc.writeMem(0xc59, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xd533);
        EXPECT(gbc.pc(), 0xc5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0286
        gbc.setState(0xc3f9, 0x42f8, 0xdfb0, 0xf091, 0x56e, 0x10e1, 0x1, 0x0);
        gbc.writeMem(0xc3f9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x42f8);
        EXPECT(gbc.pc(), 0xc3fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f9), 0xa2);
        // A2 0287
        gbc.setState(0x2d83, 0x318b, 0x4420, 0x669f, 0x4724, 0xb391, 0x1, 0x1);
        gbc.writeMem(0x2d83, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x318b);
        EXPECT(gbc.pc(), 0x2d84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0288
        gbc.setState(0x9fac, 0x20b5, 0x7920, 0x521a, 0x3313, 0xadb, 0x1, 0x0);
        gbc.writeMem(0x9fac, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x20b5);
        EXPECT(gbc.pc(), 0x9fad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fac), 0xa2);
        // A2 0289
        gbc.setState(0x255d, 0xc35a, 0x42e0, 0xdbfc, 0xb7e5, 0x1fb8, 0x0, 0x0);
        gbc.writeMem(0x255d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc35a);
        EXPECT(gbc.pc(), 0x255e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 028B
        gbc.setState(0x4094, 0x15c3, 0x8070, 0x3342, 0x927b, 0xd4e9, 0x1, 0x0);
        gbc.writeMem(0x4094, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x15c3);
        EXPECT(gbc.pc(), 0x4095);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 028C
        gbc.setState(0xc556, 0x2133, 0x6ac0, 0x1ff7, 0xc3f0, 0x6780, 0x1, 0x1);
        gbc.writeMem(0xc556, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x2133);
        EXPECT(gbc.pc(), 0xc557);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc556), 0xa2);
        // A2 028D
        gbc.setState(0x184b, 0x2f90, 0x4a00, 0x5da0, 0xe39e, 0xfdb7, 0x0, 0x1);
        gbc.writeMem(0x184b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x2f90);
        EXPECT(gbc.pc(), 0x184c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 028E
        gbc.setState(0xe3bc, 0x10ab, 0x97b0, 0x1ce2, 0xbcbc, 0x3a2d, 0x1, 0x0);
        gbc.writeMem(0xe3bc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x10ab);
        EXPECT(gbc.pc(), 0xe3bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3bc), 0xa2);
        // A2 028F
        gbc.setState(0x99c3, 0xb626, 0x5f0, 0xdf89, 0x14f3, 0x8072, 0x1, 0x1);
        gbc.writeMem(0x99c3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb626);
        EXPECT(gbc.pc(), 0x99c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99c3), 0xa2);
        // A2 0290
        gbc.setState(0x673a, 0x258b, 0xb0d0, 0xe136, 0x996f, 0x10a6, 0x1, 0x0);
        gbc.writeMem(0x673a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x258b);
        EXPECT(gbc.pc(), 0x673b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0291
        gbc.setState(0x3fa8, 0xc492, 0x36d0, 0x176d, 0x374e, 0xaa50, 0x1, 0x1);
        gbc.writeMem(0x3fa8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc492);
        EXPECT(gbc.pc(), 0x3fa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0292
        gbc.setState(0x2088, 0xfe7, 0xac0, 0xa28, 0xbbb7, 0x43b8, 0x0, 0x1);
        gbc.writeMem(0x2088, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xfe7);
        EXPECT(gbc.pc(), 0x2089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0293
        gbc.setState(0x6c2e, 0x2ce6, 0x1f0, 0x762d, 0xd217, 0xe962, 0x1, 0x1);
        gbc.writeMem(0x6c2e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2ce6);
        EXPECT(gbc.pc(), 0x6c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0294
        gbc.setState(0x4b64, 0x6b02, 0x2c60, 0xf6bb, 0x94b0, 0x5caf, 0x0, 0x0);
        gbc.writeMem(0x4b64, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0x4b65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0295
        gbc.setState(0x83b0, 0x890, 0x1940, 0x5cec, 0xbc18, 0xf88c, 0x0, 0x1);
        gbc.writeMem(0x83b0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x890);
        EXPECT(gbc.pc(), 0x83b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b0), 0xa2);
        // A2 0296
        gbc.setState(0xaf5, 0x8674, 0x4170, 0xf1f6, 0x849f, 0xbef0, 0x0, 0x0);
        gbc.writeMem(0xaf5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8674);
        EXPECT(gbc.pc(), 0xaf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0297
        gbc.setState(0xb30f, 0xda0e, 0x5200, 0x5ae5, 0x5ff, 0xcc1c, 0x1, 0x0);
        gbc.writeMem(0xb30f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xda0e);
        EXPECT(gbc.pc(), 0xb310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb30f), 0xa2);
        // A2 029A
        gbc.setState(0x3d77, 0x5483, 0x5660, 0x32bc, 0x54c, 0xbd5f, 0x0, 0x0);
        gbc.writeMem(0x3d77, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5483);
        EXPECT(gbc.pc(), 0x3d78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 029B
        gbc.setState(0xc2ce, 0xcbd7, 0xaea0, 0xb987, 0x431b, 0x4d90, 0x0, 0x0);
        gbc.writeMem(0xc2ce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcbd7);
        EXPECT(gbc.pc(), 0xc2cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ce), 0xa2);
        // A2 029C
        gbc.setState(0xa332, 0x1c19, 0xbb0, 0xa1a9, 0x7764, 0xcb2f, 0x1, 0x1);
        gbc.writeMem(0xa332, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1c19);
        EXPECT(gbc.pc(), 0xa333);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa332), 0xa2);
        // A2 029D
        gbc.setState(0xd125, 0x3c60, 0x85f0, 0x688d, 0x53b4, 0x2f68, 0x1, 0x1);
        gbc.writeMem(0xd125, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3c60);
        EXPECT(gbc.pc(), 0xd126);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd125), 0xa2);
        // A2 029E
        gbc.setState(0x5fb0, 0x6568, 0x3c0, 0x9b30, 0x19c7, 0x91b7, 0x1, 0x1);
        gbc.writeMem(0x5fb0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x6568);
        EXPECT(gbc.pc(), 0x5fb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 029F
        gbc.setState(0xe158, 0xe7ab, 0x380, 0x58a6, 0x2314, 0x9e08, 0x0, 0x0);
        gbc.writeMem(0xe158, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xe7ab);
        EXPECT(gbc.pc(), 0xe159);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe158), 0xa2);
        // A2 02A0
        gbc.setState(0x2ae7, 0x1acc, 0x3440, 0xea61, 0xe2b6, 0x4699, 0x1, 0x0);
        gbc.writeMem(0x2ae7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1acc);
        EXPECT(gbc.pc(), 0x2ae8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02A1
        gbc.setState(0x65c8, 0xaa7d, 0x1150, 0xb1ba, 0x62e4, 0x588b, 0x0, 0x1);
        gbc.writeMem(0x65c8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xaa7d);
        EXPECT(gbc.pc(), 0x65c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02A2
        gbc.setState(0x308, 0xaaad, 0x97c0, 0xa903, 0x8525, 0xa32d, 0x0, 0x0);
        gbc.writeMem(0x308, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xaaad);
        EXPECT(gbc.pc(), 0x309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02A3
        gbc.setState(0xabbb, 0x2b08, 0xb890, 0x9805, 0x60a5, 0xff9f, 0x1, 0x1);
        gbc.writeMem(0xabbb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2b08);
        EXPECT(gbc.pc(), 0xabbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabbb), 0xa2);
        // A2 02A4
        gbc.setState(0xb1f7, 0xeefa, 0x5120, 0xeefe, 0x69d, 0x9174, 0x0, 0x1);
        gbc.writeMem(0xb1f7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xeefa);
        EXPECT(gbc.pc(), 0xb1f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f7), 0xa2);
        // A2 02A5
        gbc.setState(0xb1a2, 0x9c72, 0x2f50, 0x7555, 0xa8ec, 0xa6be, 0x0, 0x1);
        gbc.writeMem(0xb1a2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9c72);
        EXPECT(gbc.pc(), 0xb1a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1a2), 0xa2);
        // A2 02A7
        gbc.setState(0xa13c, 0x31a2, 0xc850, 0xa280, 0x9e43, 0xce6f, 0x0, 0x0);
        gbc.writeMem(0xa13c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x31a2);
        EXPECT(gbc.pc(), 0xa13d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa13c), 0xa2);
        // A2 02A8
        gbc.setState(0x64f1, 0xa31, 0xc7e0, 0x88, 0x5375, 0x35df, 0x0, 0x1);
        gbc.writeMem(0x64f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa31);
        EXPECT(gbc.pc(), 0x64f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02A9
        gbc.setState(0x60b6, 0xd821, 0x3510, 0x5bad, 0x6861, 0x43a4, 0x1, 0x0);
        gbc.writeMem(0x60b6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd821);
        EXPECT(gbc.pc(), 0x60b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02AA
        gbc.setState(0xae9d, 0x88c2, 0xb980, 0x33bc, 0xdc64, 0xd26a, 0x0, 0x1);
        gbc.writeMem(0xae9d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x88c2);
        EXPECT(gbc.pc(), 0xae9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae9d), 0xa2);
        // A2 02AB
        gbc.setState(0x8fb, 0xb006, 0x5560, 0x6ae5, 0x7914, 0x91de, 0x1, 0x1);
        gbc.writeMem(0x8fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb006);
        EXPECT(gbc.pc(), 0x8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02AC
        gbc.setState(0xa066, 0x753f, 0xe9b0, 0x7fda, 0xce37, 0x9413, 0x1, 0x0);
        gbc.writeMem(0xa066, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x753f);
        EXPECT(gbc.pc(), 0xa067);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa066), 0xa2);
        // A2 02AD
        gbc.setState(0x73, 0x55c2, 0x3eb0, 0xf4b2, 0x69b6, 0xa4b9, 0x0, 0x0);
        gbc.writeMem(0x73, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x55c2);
        EXPECT(gbc.pc(), 0x74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02AE
        gbc.setState(0xdab6, 0x76b6, 0xa070, 0xba0c, 0x73b8, 0x59e8, 0x1, 0x0);
        gbc.writeMem(0xdab6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x76b6);
        EXPECT(gbc.pc(), 0xdab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdab6), 0xa2);
        // A2 02AF
        gbc.setState(0x7005, 0xccd7, 0xbc90, 0x7c80, 0xd630, 0x38f3, 0x0, 0x0);
        gbc.writeMem(0x7005, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xccd7);
        EXPECT(gbc.pc(), 0x7006);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B0
        gbc.setState(0xd17a, 0x309e, 0xa980, 0x522e, 0x147, 0xa48a, 0x1, 0x0);
        gbc.writeMem(0xd17a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x309e);
        EXPECT(gbc.pc(), 0xd17b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17a), 0xa2);
        // A2 02B1
        gbc.setState(0x3047, 0x5751, 0x36f0, 0x3626, 0xa414, 0xd35a, 0x1, 0x1);
        gbc.writeMem(0x3047, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5751);
        EXPECT(gbc.pc(), 0x3048);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B2
        gbc.setState(0xe820, 0x7a02, 0xe30, 0xb4d1, 0x5193, 0xf189, 0x1, 0x1);
        gbc.writeMem(0xe820, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x7a02);
        EXPECT(gbc.pc(), 0xe821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe820), 0xa2);
        // A2 02B3
        gbc.setState(0x4b9f, 0xc7c1, 0xf070, 0x7147, 0xe78f, 0x85ec, 0x0, 0x0);
        gbc.writeMem(0x4b9f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xc7c1);
        EXPECT(gbc.pc(), 0x4ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B4
        gbc.setState(0x9c7, 0x41ea, 0x57f0, 0x80e5, 0x31b7, 0x808a, 0x0, 0x1);
        gbc.writeMem(0x9c7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x41ea);
        EXPECT(gbc.pc(), 0x9c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B5
        gbc.setState(0xb1f5, 0x2472, 0xcd60, 0x9847, 0x54bb, 0x6cc9, 0x1, 0x1);
        gbc.writeMem(0xb1f5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2472);
        EXPECT(gbc.pc(), 0xb1f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f5), 0xa2);
        // A2 02B6
        gbc.setState(0x23d7, 0x3506, 0x3650, 0x4610, 0x77d1, 0xcd5, 0x1, 0x1);
        gbc.writeMem(0x23d7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x3506);
        EXPECT(gbc.pc(), 0x23d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B8
        gbc.setState(0x12ae, 0x488a, 0x35e0, 0x2c3, 0xd522, 0xb314, 0x1, 0x0);
        gbc.writeMem(0x12ae, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x488a);
        EXPECT(gbc.pc(), 0x12af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02B9
        gbc.setState(0x8d62, 0x9c7d, 0x3e20, 0x5ff, 0x822d, 0xe1b9, 0x1, 0x1);
        gbc.writeMem(0x8d62, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x9c7d);
        EXPECT(gbc.pc(), 0x8d63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d62), 0xa2);
        // A2 02BA
        gbc.setState(0xa406, 0x983f, 0xa6e0, 0xb7fe, 0x2939, 0xec30, 0x1, 0x0);
        gbc.writeMem(0xa406, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x983f);
        EXPECT(gbc.pc(), 0xa407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa406), 0xa2);
        // A2 02BB
        gbc.setState(0x4901, 0x1b50, 0xd690, 0x61bf, 0x58ea, 0xecf4, 0x1, 0x1);
        gbc.writeMem(0x4901, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x1b50);
        EXPECT(gbc.pc(), 0x4902);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02BC
        gbc.setState(0xe03d, 0xf975, 0xeea0, 0x2c58, 0xc6b0, 0xcccc, 0x1, 0x1);
        gbc.writeMem(0xe03d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf975);
        EXPECT(gbc.pc(), 0xe03e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe03d), 0xa2);
        // A2 02BD
        gbc.setState(0x1ddb, 0x4ffb, 0x5dc0, 0xf598, 0xfed8, 0x9a76, 0x1, 0x1);
        gbc.writeMem(0x1ddb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4ffb);
        EXPECT(gbc.pc(), 0x1ddc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02BE
        gbc.setState(0x879e, 0xbe27, 0x7720, 0xb681, 0xa2c, 0x6e78, 0x0, 0x0);
        gbc.writeMem(0x879e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbe27);
        EXPECT(gbc.pc(), 0x879f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x879e), 0xa2);
        // A2 02BF
        gbc.setState(0x54b3, 0x8fd8, 0x90f0, 0x8deb, 0xe7e2, 0xbfbd, 0x1, 0x0);
        gbc.writeMem(0x54b3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x8fd8);
        EXPECT(gbc.pc(), 0x54b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02C0
        gbc.setState(0x26a7, 0x5f5b, 0x7ff0, 0x4e97, 0xcb51, 0xe606, 0x1, 0x1);
        gbc.writeMem(0x26a7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5f5b);
        EXPECT(gbc.pc(), 0x26a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02C1
        gbc.setState(0x2ddc, 0x72d3, 0x8370, 0x7fa1, 0x469a, 0x2f26, 0x0, 0x0);
        gbc.writeMem(0x2ddc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x72d3);
        EXPECT(gbc.pc(), 0x2ddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02C3
        gbc.setState(0xeee0, 0x8a78, 0x5b00, 0x7a3c, 0xce21, 0xe24, 0x1, 0x0);
        gbc.writeMem(0xeee0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8a78);
        EXPECT(gbc.pc(), 0xeee1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee0), 0xa2);
        // A2 02C4
        gbc.setState(0xea33, 0x358c, 0x45b0, 0x1ee6, 0xfbe3, 0xca68, 0x1, 0x1);
        gbc.writeMem(0xea33, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x358c);
        EXPECT(gbc.pc(), 0xea34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea33), 0xa2);
        // A2 02C5
        gbc.setState(0xc734, 0x9b49, 0x4aa0, 0x559f, 0x8bed, 0x115b, 0x1, 0x1);
        gbc.writeMem(0xc734, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9b49);
        EXPECT(gbc.pc(), 0xc735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc734), 0xa2);
        // A2 02C6
        gbc.setState(0x65cc, 0x6a5f, 0xd5a0, 0x5aec, 0x7c1c, 0x2c85, 0x1, 0x0);
        gbc.writeMem(0x65cc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x6a5f);
        EXPECT(gbc.pc(), 0x65cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02C7
        gbc.setState(0xea32, 0xd595, 0x8a70, 0xc3d, 0xa878, 0x2f5b, 0x1, 0x0);
        gbc.writeMem(0xea32, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd595);
        EXPECT(gbc.pc(), 0xea33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea32), 0xa2);
        // A2 02C8
        gbc.setState(0xc0da, 0x5791, 0x63d0, 0x1531, 0x2da9, 0xa0cf, 0x0, 0x0);
        gbc.writeMem(0xc0da, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x5791);
        EXPECT(gbc.pc(), 0xc0db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0da), 0xa2);
        // A2 02C9
        gbc.setState(0xe2f5, 0x1c8c, 0x240, 0x40c2, 0x1b24, 0xbe93, 0x1, 0x1);
        gbc.writeMem(0xe2f5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1c8c);
        EXPECT(gbc.pc(), 0xe2f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2f5), 0xa2);
        // A2 02CA
        gbc.setState(0x9a5e, 0x1a43, 0xed50, 0x9c0b, 0x1ea4, 0xebfa, 0x0, 0x0);
        gbc.writeMem(0x9a5e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1a43);
        EXPECT(gbc.pc(), 0x9a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a5e), 0xa2);
        // A2 02CB
        gbc.setState(0xd2c5, 0x86e8, 0xb650, 0xff5c, 0xdce, 0x749f, 0x0, 0x0);
        gbc.writeMem(0xd2c5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x86e8);
        EXPECT(gbc.pc(), 0xd2c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2c5), 0xa2);
        // A2 02CC
        gbc.setState(0x818f, 0x1b70, 0x5c60, 0xbebf, 0x202b, 0x483d, 0x1, 0x1);
        gbc.writeMem(0x818f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x1b70);
        EXPECT(gbc.pc(), 0x8190);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818f), 0xa2);
        // A2 02CD
        gbc.setState(0xc592, 0xf17b, 0xa9a0, 0xe53a, 0xc36e, 0xd135, 0x1, 0x1);
        gbc.writeMem(0xc592, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf17b);
        EXPECT(gbc.pc(), 0xc593);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc592), 0xa2);
        // A2 02CE
        gbc.setState(0x3011, 0x5476, 0xaf40, 0x7f1f, 0xbdf7, 0x7c45, 0x1, 0x1);
        gbc.writeMem(0x3011, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5476);
        EXPECT(gbc.pc(), 0x3012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02CF
        gbc.setState(0x63bf, 0xd3a0, 0x8180, 0x983, 0x8107, 0x99a, 0x0, 0x0);
        gbc.writeMem(0x63bf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd3a0);
        EXPECT(gbc.pc(), 0x63c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02D0
        gbc.setState(0xac51, 0x5299, 0x9440, 0xbdc8, 0x5835, 0xce89, 0x0, 0x0);
        gbc.writeMem(0xac51, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5299);
        EXPECT(gbc.pc(), 0xac52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac51), 0xa2);
        // A2 02D2
        gbc.setState(0x9804, 0x8883, 0xb30, 0x4a78, 0xb0d, 0xe547, 0x1, 0x1);
        gbc.writeMem(0x9804, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x8883);
        EXPECT(gbc.pc(), 0x9805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9804), 0xa2);
        // A2 02D3
        gbc.setState(0x508c, 0x9b44, 0x72d0, 0x527d, 0xb4ab, 0xf20e, 0x0, 0x1);
        gbc.writeMem(0x508c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x9b44);
        EXPECT(gbc.pc(), 0x508d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02D4
        gbc.setState(0xe7e, 0x642, 0x2290, 0x7a1d, 0x709a, 0x267c, 0x1, 0x0);
        gbc.writeMem(0xe7e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x642);
        EXPECT(gbc.pc(), 0xe7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02D5
        gbc.setState(0x82cd, 0x58ed, 0xc460, 0x53ed, 0xb996, 0xcb06, 0x1, 0x1);
        gbc.writeMem(0x82cd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x58ed);
        EXPECT(gbc.pc(), 0x82ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82cd), 0xa2);
        // A2 02D6
        gbc.setState(0x31f0, 0xc18d, 0x9370, 0x3823, 0x6aff, 0x134e, 0x1, 0x0);
        gbc.writeMem(0x31f0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xc18d);
        EXPECT(gbc.pc(), 0x31f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02D7
        gbc.setState(0xd471, 0x5e05, 0xb810, 0x42d3, 0xe537, 0x7d1b, 0x0, 0x0);
        gbc.writeMem(0xd471, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5e05);
        EXPECT(gbc.pc(), 0xd472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd471), 0xa2);
        // A2 02D8
        gbc.setState(0x50f1, 0x4d71, 0x8b80, 0xf12b, 0x2c7e, 0x3d70, 0x1, 0x0);
        gbc.writeMem(0x50f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4d71);
        EXPECT(gbc.pc(), 0x50f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02DA
        gbc.setState(0xe434, 0x7658, 0xb2a0, 0x7450, 0x884c, 0xa573, 0x1, 0x1);
        gbc.writeMem(0xe434, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7658);
        EXPECT(gbc.pc(), 0xe435);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe434), 0xa2);
        // A2 02DB
        gbc.setState(0xe476, 0x9ba6, 0xdde0, 0xbe24, 0x5048, 0xe2fc, 0x1, 0x0);
        gbc.writeMem(0xe476, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x9ba6);
        EXPECT(gbc.pc(), 0xe477);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe476), 0xa2);
        // A2 02DC
        gbc.setState(0x65bd, 0xa61f, 0x6a0, 0x4261, 0x28e7, 0x3079, 0x0, 0x1);
        gbc.writeMem(0x65bd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xa61f);
        EXPECT(gbc.pc(), 0x65be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02DD
        gbc.setState(0x1fd, 0xfa32, 0x87b0, 0x808, 0x5800, 0x6b, 0x0, 0x1);
        gbc.writeMem(0x1fd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfa32);
        EXPECT(gbc.pc(), 0x1fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02DE
        gbc.setState(0x4f9b, 0x2508, 0x67b0, 0xbfaa, 0xca83, 0xb93b, 0x1, 0x1);
        gbc.writeMem(0x4f9b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x2508);
        EXPECT(gbc.pc(), 0x4f9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02DF
        gbc.setState(0x1ebb, 0xca28, 0x4d60, 0xb63f, 0x570c, 0x9333, 0x1, 0x0);
        gbc.writeMem(0x1ebb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xca28);
        EXPECT(gbc.pc(), 0x1ebc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02E0
        gbc.setState(0x908b, 0xb800, 0xa510, 0x549e, 0x939, 0x138, 0x0, 0x1);
        gbc.writeMem(0x908b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb800);
        EXPECT(gbc.pc(), 0x908c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x908b), 0xa2);
        // A2 02E1
        gbc.setState(0x76fd, 0xda9b, 0x4ac0, 0xf12d, 0x5982, 0x8a, 0x1, 0x1);
        gbc.writeMem(0x76fd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xda9b);
        EXPECT(gbc.pc(), 0x76fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02E2
        gbc.setState(0x8063, 0x6307, 0xd830, 0x6762, 0x5f14, 0x8939, 0x1, 0x0);
        gbc.writeMem(0x8063, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x6307);
        EXPECT(gbc.pc(), 0x8064);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8063), 0xa2);
        // A2 02E3
        gbc.setState(0xc075, 0x2eb9, 0x6cf0, 0xea95, 0x392e, 0x9975, 0x0, 0x1);
        gbc.writeMem(0xc075, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2eb9);
        EXPECT(gbc.pc(), 0xc076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc075), 0xa2);
        // A2 02E4
        gbc.setState(0x83c2, 0xb3da, 0xe060, 0x1d59, 0x97f8, 0xdcec, 0x1, 0x1);
        gbc.writeMem(0x83c2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xb3da);
        EXPECT(gbc.pc(), 0x83c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83c2), 0xa2);
        // A2 02E5
        gbc.setState(0x54da, 0x48ca, 0x58e0, 0x9d3b, 0x5188, 0xb804, 0x0, 0x0);
        gbc.writeMem(0x54da, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x48ca);
        EXPECT(gbc.pc(), 0x54db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02E7
        gbc.setState(0xed0e, 0xc0ea, 0xd540, 0x1aae, 0x519b, 0x10bb, 0x1, 0x0);
        gbc.writeMem(0xed0e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xc0ea);
        EXPECT(gbc.pc(), 0xed0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed0e), 0xa2);
        // A2 02E8
        gbc.setState(0x5c6, 0x2c79, 0x3620, 0x3ab8, 0xd2da, 0x8a9d, 0x0, 0x0);
        gbc.writeMem(0x5c6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x2c79);
        EXPECT(gbc.pc(), 0x5c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02EA
        gbc.setState(0x2d04, 0x2250, 0xeae0, 0x108, 0x7174, 0x5f04, 0x1, 0x0);
        gbc.writeMem(0x2d04, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x2250);
        EXPECT(gbc.pc(), 0x2d05);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02EB
        gbc.setState(0x79d1, 0xb851, 0xe4c0, 0x6536, 0x6b01, 0xbe25, 0x0, 0x0);
        gbc.writeMem(0x79d1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb851);
        EXPECT(gbc.pc(), 0x79d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02EC
        gbc.setState(0xcefa, 0xa731, 0x8680, 0x1cb6, 0xb2b0, 0x852d, 0x0, 0x1);
        gbc.writeMem(0xcefa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa731);
        EXPECT(gbc.pc(), 0xcefb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcefa), 0xa2);
        // A2 02ED
        gbc.setState(0xee41, 0x1cc9, 0x36b0, 0xceba, 0x9fdc, 0xe2d2, 0x0, 0x1);
        gbc.writeMem(0xee41, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1cc9);
        EXPECT(gbc.pc(), 0xee42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee41), 0xa2);
        // A2 02EE
        gbc.setState(0xaac5, 0x9cbf, 0xce80, 0x9b87, 0x4c6b, 0x5038, 0x1, 0x1);
        gbc.writeMem(0xaac5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9cbf);
        EXPECT(gbc.pc(), 0xaac6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaac5), 0xa2);
        // A2 02EF
        gbc.setState(0xd3f1, 0x8e89, 0xef00, 0xdf74, 0x903a, 0x1ca2, 0x0, 0x0);
        gbc.writeMem(0xd3f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8e89);
        EXPECT(gbc.pc(), 0xd3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f1), 0xa2);
        // A2 02F0
        gbc.setState(0xc1c4, 0x45b5, 0x97e0, 0x9ca0, 0x296c, 0xf592, 0x0, 0x1);
        gbc.writeMem(0xc1c4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x45b5);
        EXPECT(gbc.pc(), 0xc1c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1c4), 0xa2);
        // A2 02F1
        gbc.setState(0x4385, 0x622b, 0x4cb0, 0x783d, 0x6204, 0xeaf1, 0x0, 0x0);
        gbc.writeMem(0x4385, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x622b);
        EXPECT(gbc.pc(), 0x4386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F2
        gbc.setState(0x180d, 0xc31e, 0xf140, 0x890d, 0xa0d7, 0xb397, 0x1, 0x1);
        gbc.writeMem(0x180d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xc31e);
        EXPECT(gbc.pc(), 0x180e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F3
        gbc.setState(0x102b, 0xacef, 0x6760, 0x8f8f, 0xfd9a, 0x6a58, 0x1, 0x1);
        gbc.writeMem(0x102b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xacef);
        EXPECT(gbc.pc(), 0x102c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F4
        gbc.setState(0xc638, 0x2e33, 0x3ee0, 0x1580, 0xc2e6, 0x2ceb, 0x0, 0x0);
        gbc.writeMem(0xc638, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2e33);
        EXPECT(gbc.pc(), 0xc639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc638), 0xa2);
        // A2 02F5
        gbc.setState(0x386b, 0x2d86, 0xef70, 0xf8bd, 0x46e0, 0x4b29, 0x0, 0x1);
        gbc.writeMem(0x386b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2d86);
        EXPECT(gbc.pc(), 0x386c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F6
        gbc.setState(0x668c, 0xf399, 0x6f40, 0xecc4, 0xebf, 0x5405, 0x1, 0x1);
        gbc.writeMem(0x668c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xf399);
        EXPECT(gbc.pc(), 0x668d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F7
        gbc.setState(0x7501, 0x1ba2, 0x9e90, 0xe57e, 0x4da1, 0xdb9b, 0x1, 0x1);
        gbc.writeMem(0x7501, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x1ba2);
        EXPECT(gbc.pc(), 0x7502);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F8
        gbc.setState(0x629a, 0x4a4d, 0xabb0, 0xed43, 0xcfc8, 0xee36, 0x0, 0x0);
        gbc.writeMem(0x629a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4a4d);
        EXPECT(gbc.pc(), 0x629b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02F9
        gbc.setState(0x83a3, 0x79e4, 0x1cf0, 0x9149, 0x10ec, 0x6f2f, 0x1, 0x0);
        gbc.writeMem(0x83a3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x79e4);
        EXPECT(gbc.pc(), 0x83a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a3), 0xa2);
        // A2 02FA
        gbc.setState(0x7af9, 0xfaab, 0xe100, 0xcb95, 0xa7f2, 0x44f4, 0x1, 0x1);
        gbc.writeMem(0x7af9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfaab);
        EXPECT(gbc.pc(), 0x7afa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 02FB
        gbc.setState(0xac71, 0xec9a, 0xa6c0, 0xc45f, 0xb242, 0x87f6, 0x1, 0x0);
        gbc.writeMem(0xac71, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xec9a);
        EXPECT(gbc.pc(), 0xac72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac71), 0xa2);
        // A2 02FC
        gbc.setState(0xb8de, 0xb836, 0x73d0, 0x6e18, 0xc85f, 0x7ee6, 0x0, 0x1);
        gbc.writeMem(0xb8de, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb836);
        EXPECT(gbc.pc(), 0xb8df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8de), 0xa2);
        // A2 02FD
        gbc.setState(0xc70b, 0xcc3f, 0xb430, 0x5364, 0xc049, 0x32d2, 0x0, 0x1);
        gbc.writeMem(0xc70b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcc3f);
        EXPECT(gbc.pc(), 0xc70c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc70b), 0xa2);
        // A2 02FE
        gbc.setState(0xab21, 0xe2a0, 0xf870, 0xfe6b, 0x243c, 0x9c07, 0x1, 0x0);
        gbc.writeMem(0xab21, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe2a0);
        EXPECT(gbc.pc(), 0xab22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab21), 0xa2);
        // A2 02FF
        gbc.setState(0xe02f, 0xba45, 0x94c0, 0x7095, 0x7843, 0xb5a3, 0x1, 0x1);
        gbc.writeMem(0xe02f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xba45);
        EXPECT(gbc.pc(), 0xe030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe02f), 0xa2);
        // A2 0300
        gbc.setState(0x4465, 0xaf6, 0xdf80, 0x8c90, 0x4e05, 0xaa42, 0x0, 0x0);
        gbc.writeMem(0x4465, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaf6);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0301
        gbc.setState(0x9c96, 0xd176, 0x4540, 0x75f4, 0xae9b, 0x240b, 0x1, 0x0);
        gbc.writeMem(0x9c96, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd176);
        EXPECT(gbc.pc(), 0x9c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c96), 0xa2);
        // A2 0302
        gbc.setState(0x3118, 0xa2e8, 0x1af0, 0xcd09, 0x180b, 0xa2a5, 0x1, 0x0);
        gbc.writeMem(0x3118, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa2e8);
        EXPECT(gbc.pc(), 0x3119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0304
        gbc.setState(0x8cb1, 0x1e0e, 0xe570, 0xee21, 0xfa27, 0xaab1, 0x1, 0x1);
        gbc.writeMem(0x8cb1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1e0e);
        EXPECT(gbc.pc(), 0x8cb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb1), 0xa2);
        // A2 0305
        gbc.setState(0x19c4, 0x4846, 0x450, 0xb907, 0x8744, 0x1245, 0x1, 0x0);
        gbc.writeMem(0x19c4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x4846);
        EXPECT(gbc.pc(), 0x19c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0306
        gbc.setState(0xbb1d, 0xe610, 0xc5e0, 0xae6d, 0x3a03, 0xf63a, 0x0, 0x1);
        gbc.writeMem(0xbb1d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe610);
        EXPECT(gbc.pc(), 0xbb1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1d), 0xa2);
        // A2 0307
        gbc.setState(0x9c55, 0x173c, 0xea40, 0x8619, 0x38cf, 0xc4cd, 0x0, 0x1);
        gbc.writeMem(0x9c55, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x173c);
        EXPECT(gbc.pc(), 0x9c56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c55), 0xa2);
        // A2 0308
        gbc.setState(0xd4ac, 0x2cc2, 0xc410, 0x9f9a, 0xb559, 0x629a, 0x0, 0x0);
        gbc.writeMem(0xd4ac, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2cc2);
        EXPECT(gbc.pc(), 0xd4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4ac), 0xa2);
        // A2 0309
        gbc.setState(0x7580, 0x63ea, 0x3d50, 0xf364, 0x492e, 0xf640, 0x1, 0x0);
        gbc.writeMem(0x7580, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x63ea);
        EXPECT(gbc.pc(), 0x7581);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 030A
        gbc.setState(0xb3fb, 0xa7bf, 0x8a70, 0x26ac, 0x1e38, 0xc2e6, 0x1, 0x0);
        gbc.writeMem(0xb3fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa7bf);
        EXPECT(gbc.pc(), 0xb3fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3fb), 0xa2);
        // A2 030B
        gbc.setState(0x5d08, 0x8820, 0x39b0, 0x58e1, 0x15a8, 0x3358, 0x0, 0x1);
        gbc.writeMem(0x5d08, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8820);
        EXPECT(gbc.pc(), 0x5d09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 030C
        gbc.setState(0x946b, 0x631a, 0xf2f0, 0xb938, 0xa0c0, 0x9868, 0x1, 0x0);
        gbc.writeMem(0x946b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x631a);
        EXPECT(gbc.pc(), 0x946c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x946b), 0xa2);
        // A2 030D
        gbc.setState(0xc63b, 0x9aa4, 0xe150, 0x5db7, 0xcd91, 0x3013, 0x0, 0x1);
        gbc.writeMem(0xc63b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x9aa4);
        EXPECT(gbc.pc(), 0xc63c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc63b), 0xa2);
        // A2 030E
        gbc.setState(0xe823, 0xb904, 0x8c40, 0xc388, 0x18f1, 0x6cd, 0x1, 0x0);
        gbc.writeMem(0xe823, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb904);
        EXPECT(gbc.pc(), 0xe824);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe823), 0xa2);
        // A2 030F
        gbc.setState(0x60f4, 0xe5a0, 0xb550, 0xe80b, 0xed16, 0x43cb, 0x1, 0x0);
        gbc.writeMem(0x60f4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xe5a0);
        EXPECT(gbc.pc(), 0x60f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0310
        gbc.setState(0xe883, 0x7989, 0xb830, 0xb704, 0xdf2d, 0xe6f1, 0x0, 0x0);
        gbc.writeMem(0xe883, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7989);
        EXPECT(gbc.pc(), 0xe884);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe883), 0xa2);
        // A2 0311
        gbc.setState(0x55e, 0xd921, 0xba60, 0x5812, 0xa037, 0xd6bc, 0x0, 0x1);
        gbc.writeMem(0x55e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd921);
        EXPECT(gbc.pc(), 0x55f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0312
        gbc.setState(0x74ef, 0x39d7, 0xd0f0, 0xff58, 0x3b34, 0x70a0, 0x0, 0x0);
        gbc.writeMem(0x74ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x39d7);
        EXPECT(gbc.pc(), 0x74f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0313
        gbc.setState(0x16d5, 0xca23, 0xce50, 0xffa9, 0x70aa, 0x7131, 0x0, 0x0);
        gbc.writeMem(0x16d5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xca23);
        EXPECT(gbc.pc(), 0x16d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0314
        gbc.setState(0xe91b, 0x3887, 0xf330, 0xc088, 0x822d, 0x79be, 0x0, 0x0);
        gbc.writeMem(0xe91b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x3887);
        EXPECT(gbc.pc(), 0xe91c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91b), 0xa2);
        // A2 0315
        gbc.setState(0x8911, 0x58e3, 0x4c10, 0x528c, 0x19de, 0xb548, 0x0, 0x1);
        gbc.writeMem(0x8911, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x58e3);
        EXPECT(gbc.pc(), 0x8912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8911), 0xa2);
        // A2 0316
        gbc.setState(0x44f2, 0x51f8, 0x130, 0xad99, 0xda15, 0x7484, 0x1, 0x1);
        gbc.writeMem(0x44f2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x51f8);
        EXPECT(gbc.pc(), 0x44f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0317
        gbc.setState(0xca6f, 0x8681, 0xc080, 0x7f39, 0x42b2, 0x251b, 0x1, 0x1);
        gbc.writeMem(0xca6f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8681);
        EXPECT(gbc.pc(), 0xca70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca6f), 0xa2);
        // A2 0318
        gbc.setState(0xdf57, 0xea0f, 0xf660, 0x68e5, 0x6e3, 0x59b5, 0x1, 0x1);
        gbc.writeMem(0xdf57, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xea0f);
        EXPECT(gbc.pc(), 0xdf58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf57), 0xa2);
        // A2 0319
        gbc.setState(0xc05f, 0x7546, 0xc890, 0x8fcf, 0x45f4, 0x1631, 0x1, 0x0);
        gbc.writeMem(0xc05f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7546);
        EXPECT(gbc.pc(), 0xc060);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc05f), 0xa2);
        // A2 031A
        gbc.setState(0xe934, 0xb6d6, 0x6450, 0x4c73, 0x9d77, 0xf8b, 0x0, 0x0);
        gbc.writeMem(0xe934, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb6d6);
        EXPECT(gbc.pc(), 0xe935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe934), 0xa2);
        // A2 031B
        gbc.setState(0xcd21, 0x5ccb, 0xd060, 0x13fb, 0x898d, 0x22b5, 0x1, 0x1);
        gbc.writeMem(0xcd21, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5ccb);
        EXPECT(gbc.pc(), 0xcd22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd21), 0xa2);
        // A2 031C
        gbc.setState(0x7bf3, 0xe3cf, 0x18e0, 0x8e4c, 0x6c96, 0xd777, 0x0, 0x0);
        gbc.writeMem(0x7bf3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xe3cf);
        EXPECT(gbc.pc(), 0x7bf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 031D
        gbc.setState(0x73e9, 0x31db, 0xf850, 0xf9ad, 0x75f8, 0x770b, 0x0, 0x0);
        gbc.writeMem(0x73e9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x31db);
        EXPECT(gbc.pc(), 0x73ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 031E
        gbc.setState(0x43ec, 0xbd08, 0xa580, 0x75be, 0x4df1, 0xfe54, 0x1, 0x0);
        gbc.writeMem(0x43ec, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xbd08);
        EXPECT(gbc.pc(), 0x43ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 031F
        gbc.setState(0x92cb, 0x99ea, 0x3610, 0xd4c, 0x732b, 0xa4fa, 0x0, 0x1);
        gbc.writeMem(0x92cb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x99ea);
        EXPECT(gbc.pc(), 0x92cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92cb), 0xa2);
        // A2 0320
        gbc.setState(0x836d, 0x537d, 0xbad0, 0xf0ab, 0x7b07, 0x990e, 0x0, 0x0);
        gbc.writeMem(0x836d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x537d);
        EXPECT(gbc.pc(), 0x836e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x836d), 0xa2);
        // A2 0321
        gbc.setState(0x25f9, 0x858, 0xaa90, 0x789f, 0xd408, 0x80a9, 0x1, 0x0);
        gbc.writeMem(0x25f9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x858);
        EXPECT(gbc.pc(), 0x25fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0322
        gbc.setState(0x5499, 0x18cb, 0xc150, 0x4878, 0xc0c5, 0xdae4, 0x1, 0x1);
        gbc.writeMem(0x5499, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x18cb);
        EXPECT(gbc.pc(), 0x549a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0323
        gbc.setState(0x29aa, 0xb997, 0x7a40, 0xab77, 0xd138, 0x3d99, 0x0, 0x1);
        gbc.writeMem(0x29aa, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb997);
        EXPECT(gbc.pc(), 0x29ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0324
        gbc.setState(0xedda, 0xe893, 0x560, 0x3401, 0x6d3a, 0xbf1f, 0x0, 0x1);
        gbc.writeMem(0xedda, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe893);
        EXPECT(gbc.pc(), 0xeddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedda), 0xa2);
        // A2 0326
        gbc.setState(0x8f51, 0x6b9, 0x270, 0x8a31, 0xb274, 0xa210, 0x1, 0x1);
        gbc.writeMem(0x8f51, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x6b9);
        EXPECT(gbc.pc(), 0x8f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f51), 0xa2);
        // A2 0327
        gbc.setState(0xe38a, 0xb094, 0xec90, 0x3919, 0x8097, 0xc4b1, 0x1, 0x1);
        gbc.writeMem(0xe38a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb094);
        EXPECT(gbc.pc(), 0xe38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38a), 0xa2);
        // A2 0328
        gbc.setState(0x1c8e, 0xcbec, 0x9c40, 0xbc21, 0xbc2f, 0x2b03, 0x0, 0x0);
        gbc.writeMem(0x1c8e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xcbec);
        EXPECT(gbc.pc(), 0x1c8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0329
        gbc.setState(0x70af, 0x1673, 0x21e0, 0x1654, 0x7ccc, 0x5de6, 0x0, 0x0);
        gbc.writeMem(0x70af, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1673);
        EXPECT(gbc.pc(), 0x70b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 032A
        gbc.setState(0x3fe6, 0x8d63, 0x14e0, 0xbf67, 0x9f24, 0xf519, 0x1, 0x0);
        gbc.writeMem(0x3fe6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8d63);
        EXPECT(gbc.pc(), 0x3fe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 032B
        gbc.setState(0x2c30, 0xfe3b, 0x32f0, 0x4d64, 0xa959, 0x5a5a, 0x0, 0x1);
        gbc.writeMem(0x2c30, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfe3b);
        EXPECT(gbc.pc(), 0x2c31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 032C
        gbc.setState(0x1bdb, 0x8495, 0xbcc0, 0xe86, 0xe418, 0x886, 0x1, 0x1);
        gbc.writeMem(0x1bdb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8495);
        EXPECT(gbc.pc(), 0x1bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 032D
        gbc.setState(0x1a57, 0xe587, 0x26b0, 0x4547, 0xdc4, 0x4b65, 0x1, 0x0);
        gbc.writeMem(0x1a57, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xe587);
        EXPECT(gbc.pc(), 0x1a58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 032E
        gbc.setState(0xd189, 0x18fd, 0xa9d0, 0xb534, 0x3c43, 0xb45a, 0x0, 0x1);
        gbc.writeMem(0xd189, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x18fd);
        EXPECT(gbc.pc(), 0xd18a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd189), 0xa2);
        // A2 032F
        gbc.setState(0xe455, 0x87ab, 0xe0c0, 0x31c0, 0x4f74, 0xa605, 0x0, 0x1);
        gbc.writeMem(0xe455, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x87ab);
        EXPECT(gbc.pc(), 0xe456);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe455), 0xa2);
        // A2 0330
        gbc.setState(0x6151, 0xec38, 0xd860, 0x7794, 0x1a6c, 0xfc0d, 0x0, 0x1);
        gbc.writeMem(0x6151, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xec38);
        EXPECT(gbc.pc(), 0x6152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0331
        gbc.setState(0xcde, 0x473a, 0xa330, 0x7eee, 0x9078, 0x2e4c, 0x0, 0x1);
        gbc.writeMem(0xcde, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x473a);
        EXPECT(gbc.pc(), 0xcdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0332
        gbc.setState(0x977c, 0xf68a, 0x35d0, 0xaf19, 0x4d04, 0x12c6, 0x1, 0x1);
        gbc.writeMem(0x977c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf68a);
        EXPECT(gbc.pc(), 0x977d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x977c), 0xa2);
        // A2 0333
        gbc.setState(0xa757, 0xdae5, 0xce20, 0xdb32, 0xdb0c, 0xbe07, 0x1, 0x1);
        gbc.writeMem(0xa757, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xdae5);
        EXPECT(gbc.pc(), 0xa758);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa757), 0xa2);
        // A2 0334
        gbc.setState(0x2f94, 0x916d, 0x83d0, 0x6abb, 0x2be6, 0xc633, 0x1, 0x1);
        gbc.writeMem(0x2f94, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x916d);
        EXPECT(gbc.pc(), 0x2f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0335
        gbc.setState(0xc2d4, 0x279a, 0xcfe0, 0xdf9e, 0xbeac, 0x3e97, 0x1, 0x1);
        gbc.writeMem(0xc2d4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x279a);
        EXPECT(gbc.pc(), 0xc2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2d4), 0xa2);
        // A2 0336
        gbc.setState(0x870f, 0x291, 0x5ac0, 0xd0d6, 0xdab4, 0xc45, 0x0, 0x1);
        gbc.writeMem(0x870f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x291);
        EXPECT(gbc.pc(), 0x8710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870f), 0xa2);
        // A2 0337
        gbc.setState(0xae07, 0x8b9c, 0x7b60, 0xf013, 0x8110, 0xd881, 0x0, 0x1);
        gbc.writeMem(0xae07, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8b9c);
        EXPECT(gbc.pc(), 0xae08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae07), 0xa2);
        // A2 0338
        gbc.setState(0x3f1, 0x3ea5, 0x3880, 0xa33b, 0xdf16, 0x42d9, 0x0, 0x0);
        gbc.writeMem(0x3f1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x3ea5);
        EXPECT(gbc.pc(), 0x3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0339
        gbc.setState(0x6326, 0xa826, 0xbd70, 0x1c61, 0x205d, 0x5dc9, 0x0, 0x0);
        gbc.writeMem(0x6326, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa826);
        EXPECT(gbc.pc(), 0x6327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 033A
        gbc.setState(0xb78c, 0x2737, 0xc3e0, 0x72d4, 0xe4e2, 0x3337, 0x1, 0x0);
        gbc.writeMem(0xb78c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2737);
        EXPECT(gbc.pc(), 0xb78d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78c), 0xa2);
        // A2 033B
        gbc.setState(0x1361, 0x5cd6, 0xf580, 0xad08, 0xd650, 0xb2dd, 0x1, 0x1);
        gbc.writeMem(0x1361, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5cd6);
        EXPECT(gbc.pc(), 0x1362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 033C
        gbc.setState(0x4479, 0x1f19, 0x4500, 0x7ec6, 0x5903, 0x536c, 0x1, 0x1);
        gbc.writeMem(0x4479, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1f19);
        EXPECT(gbc.pc(), 0x447a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 033D
        gbc.setState(0x2eaf, 0x90d0, 0x6a50, 0xdfb4, 0x2c06, 0xc27d, 0x1, 0x1);
        gbc.writeMem(0x2eaf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x90d0);
        EXPECT(gbc.pc(), 0x2eb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 033E
        gbc.setState(0xa7ff, 0x932b, 0xbcc0, 0x806e, 0xc53a, 0x4380, 0x0, 0x1);
        gbc.writeMem(0xa7ff, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x932b);
        EXPECT(gbc.pc(), 0xa800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ff), 0xa2);
        // A2 033F
        gbc.setState(0x5ab, 0x2124, 0xd630, 0xbfa4, 0x8666, 0x2cff, 0x1, 0x0);
        gbc.writeMem(0x5ab, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x2124);
        EXPECT(gbc.pc(), 0x5ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0340
        gbc.setState(0xab29, 0x3bd8, 0x36f0, 0x8423, 0x48b8, 0x5dcf, 0x0, 0x1);
        gbc.writeMem(0xab29, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3bd8);
        EXPECT(gbc.pc(), 0xab2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab29), 0xa2);
        // A2 0341
        gbc.setState(0xccd1, 0x9eb6, 0xa010, 0x93e5, 0xcc93, 0xe170, 0x1, 0x0);
        gbc.writeMem(0xccd1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x9eb6);
        EXPECT(gbc.pc(), 0xccd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccd1), 0xa2);
        // A2 0343
        gbc.setState(0x3687, 0xf32d, 0xc130, 0xa25e, 0x2811, 0x7b2e, 0x1, 0x1);
        gbc.writeMem(0x3687, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xf32d);
        EXPECT(gbc.pc(), 0x3688);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0344
        gbc.setState(0x43c9, 0x2af8, 0x6a70, 0x8ec3, 0xe1cd, 0xd93a, 0x0, 0x1);
        gbc.writeMem(0x43c9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2af8);
        EXPECT(gbc.pc(), 0x43ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0346
        gbc.setState(0x2dad, 0x8ab1, 0x73a0, 0x78b9, 0x9f61, 0xb57f, 0x1, 0x1);
        gbc.writeMem(0x2dad, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8ab1);
        EXPECT(gbc.pc(), 0x2dae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0347
        gbc.setState(0xbbbf, 0x86a4, 0xd5b0, 0x52a8, 0x6ace, 0xc3b8, 0x0, 0x0);
        gbc.writeMem(0xbbbf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x86a4);
        EXPECT(gbc.pc(), 0xbbc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbbf), 0xa2);
        // A2 0348
        gbc.setState(0x7f0e, 0xf2e4, 0x10a0, 0x4240, 0xbe0, 0x92e0, 0x1, 0x1);
        gbc.writeMem(0x7f0e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf2e4);
        EXPECT(gbc.pc(), 0x7f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0349
        gbc.setState(0x9e9d, 0x9d2a, 0xb0f0, 0x8046, 0xabc3, 0x8c3c, 0x1, 0x0);
        gbc.writeMem(0x9e9d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x9d2a);
        EXPECT(gbc.pc(), 0x9e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9d), 0xa2);
        // A2 034A
        gbc.setState(0x23e3, 0xa68, 0x5c80, 0xde5b, 0x9a5, 0x3e8d, 0x0, 0x0);
        gbc.writeMem(0x23e3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xa68);
        EXPECT(gbc.pc(), 0x23e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 034B
        gbc.setState(0x2ffb, 0x7ace, 0xff40, 0xaff1, 0xa9be, 0x77c2, 0x1, 0x1);
        gbc.writeMem(0x2ffb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7ace);
        EXPECT(gbc.pc(), 0x2ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 034C
        gbc.setState(0xcd0a, 0x4ae5, 0xf2b0, 0xd5c1, 0x3291, 0xa254, 0x1, 0x1);
        gbc.writeMem(0xcd0a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x4ae5);
        EXPECT(gbc.pc(), 0xcd0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0a), 0xa2);
        // A2 034D
        gbc.setState(0xd59, 0x43b5, 0xbe80, 0x633e, 0x7bea, 0x9e61, 0x1, 0x0);
        gbc.writeMem(0xd59, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x43b5);
        EXPECT(gbc.pc(), 0xd5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 034E
        gbc.setState(0xb96d, 0x8763, 0x8370, 0x1c1d, 0x3389, 0x8f0, 0x1, 0x1);
        gbc.writeMem(0xb96d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8763);
        EXPECT(gbc.pc(), 0xb96e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96d), 0xa2);
        // A2 034F
        gbc.setState(0x4110, 0x1563, 0x4240, 0xd881, 0xcb57, 0x2a49, 0x1, 0x1);
        gbc.writeMem(0x4110, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1563);
        EXPECT(gbc.pc(), 0x4111);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0350
        gbc.setState(0x99ce, 0x96b4, 0xdde0, 0xd6fa, 0xb62a, 0x839b, 0x0, 0x0);
        gbc.writeMem(0x99ce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x96b4);
        EXPECT(gbc.pc(), 0x99cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ce), 0xa2);
        // A2 0351
        gbc.setState(0xa56, 0x31e, 0xba70, 0x4b1a, 0xfc7e, 0xbdb5, 0x1, 0x1);
        gbc.writeMem(0xa56, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x31e);
        EXPECT(gbc.pc(), 0xa57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0352
        gbc.setState(0x6e9a, 0x338c, 0x14b0, 0xacc5, 0x8057, 0xa13f, 0x0, 0x1);
        gbc.writeMem(0x6e9a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x338c);
        EXPECT(gbc.pc(), 0x6e9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0353
        gbc.setState(0x950a, 0x744e, 0xb9e0, 0x7c5f, 0xfd53, 0xf9bb, 0x0, 0x1);
        gbc.writeMem(0x950a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x744e);
        EXPECT(gbc.pc(), 0x950b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x950a), 0xa2);
        // A2 0354
        gbc.setState(0x39a9, 0xd93a, 0x5da0, 0x5f1d, 0x50d7, 0x2b1, 0x1, 0x1);
        gbc.writeMem(0x39a9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xd93a);
        EXPECT(gbc.pc(), 0x39aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0355
        gbc.setState(0x989, 0x1f1d, 0x5090, 0x5b48, 0x98cb, 0x1640, 0x0, 0x1);
        gbc.writeMem(0x989, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x1f1d);
        EXPECT(gbc.pc(), 0x98a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0356
        gbc.setState(0x3420, 0xa83d, 0xb8a0, 0xde76, 0x7d53, 0xddf2, 0x0, 0x1);
        gbc.writeMem(0x3420, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xa83d);
        EXPECT(gbc.pc(), 0x3421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0357
        gbc.setState(0xab9d, 0xf74e, 0x5830, 0x5469, 0x7483, 0x16e7, 0x0, 0x0);
        gbc.writeMem(0xab9d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xf74e);
        EXPECT(gbc.pc(), 0xab9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab9d), 0xa2);
        // A2 0358
        gbc.setState(0x8569, 0x918b, 0x950, 0xa8a3, 0x2971, 0x7aca, 0x1, 0x0);
        gbc.writeMem(0x8569, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x918b);
        EXPECT(gbc.pc(), 0x856a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8569), 0xa2);
        // A2 0359
        gbc.setState(0x1d09, 0x5acf, 0x4740, 0x188, 0x22d8, 0xf3c7, 0x1, 0x1);
        gbc.writeMem(0x1d09, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x5acf);
        EXPECT(gbc.pc(), 0x1d0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 035A
        gbc.setState(0x9576, 0x2172, 0x96c0, 0x8781, 0x6904, 0xa002, 0x1, 0x0);
        gbc.writeMem(0x9576, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2172);
        EXPECT(gbc.pc(), 0x9577);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9576), 0xa2);
        // A2 035B
        gbc.setState(0xb61a, 0xc82f, 0x9030, 0x4b8c, 0x5186, 0xf54d, 0x0, 0x1);
        gbc.writeMem(0xb61a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc82f);
        EXPECT(gbc.pc(), 0xb61b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb61a), 0xa2);
        // A2 035C
        gbc.setState(0x52ff, 0xf261, 0xeb20, 0x85ba, 0x32e7, 0x705c, 0x1, 0x0);
        gbc.writeMem(0x52ff, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf261);
        EXPECT(gbc.pc(), 0x5300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 035D
        gbc.setState(0xbd4f, 0xf642, 0x9ba0, 0x4186, 0xd442, 0xe8d4, 0x0, 0x1);
        gbc.writeMem(0xbd4f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xf642);
        EXPECT(gbc.pc(), 0xbd50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd4f), 0xa2);
        // A2 035E
        gbc.setState(0xb8ee, 0x1e4e, 0xad80, 0xed61, 0xa887, 0x2274, 0x1, 0x1);
        gbc.writeMem(0xb8ee, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1e4e);
        EXPECT(gbc.pc(), 0xb8ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8ee), 0xa2);
        // A2 0360
        gbc.setState(0x47ad, 0xe794, 0xe050, 0x4684, 0xc484, 0x4e71, 0x0, 0x1);
        gbc.writeMem(0x47ad, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xe794);
        EXPECT(gbc.pc(), 0x47ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0362
        gbc.setState(0xdd48, 0xe333, 0xe610, 0xde28, 0x9d3, 0x8d12, 0x1, 0x1);
        gbc.writeMem(0xdd48, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xe333);
        EXPECT(gbc.pc(), 0xdd49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd48), 0xa2);
        // A2 0363
        gbc.setState(0xe2d1, 0xaaf3, 0x7720, 0x53d5, 0xcda2, 0x4904, 0x1, 0x0);
        gbc.writeMem(0xe2d1, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xaaf3);
        EXPECT(gbc.pc(), 0xe2d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d1), 0xa2);
        // A2 0364
        gbc.setState(0x958c, 0x2c12, 0x4460, 0xa31e, 0x3a98, 0x12c1, 0x0, 0x1);
        gbc.writeMem(0x958c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2c12);
        EXPECT(gbc.pc(), 0x958d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x958c), 0xa2);
        // A2 0365
        gbc.setState(0xedce, 0x70d1, 0x9990, 0x69ff, 0xf1b8, 0xc389, 0x1, 0x1);
        gbc.writeMem(0xedce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x70d1);
        EXPECT(gbc.pc(), 0xedcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedce), 0xa2);
        // A2 0366
        gbc.setState(0x8316, 0xde4c, 0x1c00, 0x3a34, 0xc078, 0xd3db, 0x0, 0x0);
        gbc.writeMem(0x8316, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xde4c);
        EXPECT(gbc.pc(), 0x8317);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8316), 0xa2);
        // A2 0367
        gbc.setState(0x6433, 0x7bfe, 0xae40, 0x9991, 0xb71c, 0x5688, 0x1, 0x0);
        gbc.writeMem(0x6433, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7bfe);
        EXPECT(gbc.pc(), 0x6434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0368
        gbc.setState(0xda44, 0xab71, 0xe0c0, 0xd6b3, 0x5249, 0xca74, 0x0, 0x1);
        gbc.writeMem(0xda44, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xab71);
        EXPECT(gbc.pc(), 0xda45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda44), 0xa2);
        // A2 0369
        gbc.setState(0x6fe6, 0xe7c0, 0xf260, 0xd17e, 0x5a16, 0xfcc8, 0x1, 0x0);
        gbc.writeMem(0x6fe6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe7c0);
        EXPECT(gbc.pc(), 0x6fe7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 036A
        gbc.setState(0x23ef, 0x3557, 0xf2e0, 0xa160, 0xe6f8, 0x400c, 0x0, 0x0);
        gbc.writeMem(0x23ef, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x3557);
        EXPECT(gbc.pc(), 0x23f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 036B
        gbc.setState(0x254e, 0xe512, 0xf490, 0x120c, 0x8d27, 0x4420, 0x0, 0x1);
        gbc.writeMem(0x254e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xe512);
        EXPECT(gbc.pc(), 0x254f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 036C
        gbc.setState(0x5c7d, 0xad5, 0xfce0, 0x28f5, 0x5d04, 0xb2a8, 0x1, 0x1);
        gbc.writeMem(0x5c7d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xad5);
        EXPECT(gbc.pc(), 0x5c7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 036D
        gbc.setState(0xc391, 0xd151, 0x6f30, 0x5a54, 0x8e5b, 0x32b4, 0x0, 0x0);
        gbc.writeMem(0xc391, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xd151);
        EXPECT(gbc.pc(), 0xc392);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc391), 0xa2);
        // A2 036E
        gbc.setState(0x6420, 0x7269, 0x4610, 0x9e3a, 0x5234, 0x73a0, 0x0, 0x1);
        gbc.writeMem(0x6420, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7269);
        EXPECT(gbc.pc(), 0x6421);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 036F
        gbc.setState(0x26a5, 0x818c, 0xb1a0, 0x8a12, 0x8342, 0xca06, 0x0, 0x0);
        gbc.writeMem(0x26a5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x818c);
        EXPECT(gbc.pc(), 0x26a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0370
        gbc.setState(0x4925, 0x2464, 0xc650, 0x1c60, 0x13e7, 0xdba7, 0x0, 0x0);
        gbc.writeMem(0x4925, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x2464);
        EXPECT(gbc.pc(), 0x4926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0371
        gbc.setState(0x6fde, 0x4095, 0xd350, 0x3ae5, 0xb21f, 0xad83, 0x1, 0x0);
        gbc.writeMem(0x6fde, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x4095);
        EXPECT(gbc.pc(), 0x6fdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0372
        gbc.setState(0xb70e, 0x4126, 0x6330, 0x3932, 0xeb0f, 0x52ec, 0x0, 0x0);
        gbc.writeMem(0xb70e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x4126);
        EXPECT(gbc.pc(), 0xb70f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb70e), 0xa2);
        // A2 0374
        gbc.setState(0x49a0, 0xe5e7, 0x5cf0, 0xe94f, 0xe8a3, 0x1dd, 0x0, 0x1);
        gbc.writeMem(0x49a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe5e7);
        EXPECT(gbc.pc(), 0x49a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0375
        gbc.setState(0xc11e, 0x872d, 0x3910, 0x5849, 0xb1bb, 0xc6b4, 0x0, 0x1);
        gbc.writeMem(0xc11e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x872d);
        EXPECT(gbc.pc(), 0xc11f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc11e), 0xa2);
        // A2 0376
        gbc.setState(0x2104, 0x2c48, 0xc570, 0xd315, 0x7e7d, 0xbec5, 0x1, 0x1);
        gbc.writeMem(0x2104, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2c48);
        EXPECT(gbc.pc(), 0x2105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0377
        gbc.setState(0x22e7, 0xa39d, 0x6610, 0xa01a, 0x6292, 0x8dfd, 0x1, 0x1);
        gbc.writeMem(0x22e7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa39d);
        EXPECT(gbc.pc(), 0x22e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0378
        gbc.setState(0x3065, 0x24b4, 0xb9b0, 0x3563, 0x3776, 0x4c78, 0x0, 0x1);
        gbc.writeMem(0x3065, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x24b4);
        EXPECT(gbc.pc(), 0x3066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0379
        gbc.setState(0xcf5f, 0x8c86, 0x5720, 0x2704, 0x6805, 0x9729, 0x1, 0x0);
        gbc.writeMem(0xcf5f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x8c86);
        EXPECT(gbc.pc(), 0xcf60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf5f), 0xa2);
        // A2 037A
        gbc.setState(0xaa40, 0x9bd, 0x5a50, 0x8d79, 0x3d2e, 0xa55a, 0x0, 0x1);
        gbc.writeMem(0xaa40, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x9bd);
        EXPECT(gbc.pc(), 0xaa41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa40), 0xa2);
        // A2 037B
        gbc.setState(0xe791, 0x787, 0x1670, 0xe3fd, 0x398f, 0xe6c9, 0x0, 0x0);
        gbc.writeMem(0xe791, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x787);
        EXPECT(gbc.pc(), 0xe792);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe791), 0xa2);
        // A2 037C
        gbc.setState(0xd84b, 0x84b7, 0xcb0, 0xbbee, 0x57b6, 0x2633, 0x0, 0x1);
        gbc.writeMem(0xd84b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x84b7);
        EXPECT(gbc.pc(), 0xd84c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd84b), 0xa2);
        // A2 037D
        gbc.setState(0x38c0, 0x6dbb, 0xc110, 0x88da, 0x2f50, 0x5789, 0x0, 0x0);
        gbc.writeMem(0x38c0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x6dbb);
        EXPECT(gbc.pc(), 0x38c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 037F
        gbc.setState(0x9d60, 0xe0da, 0x630, 0xa90, 0x60c2, 0x2f90, 0x0, 0x1);
        gbc.writeMem(0x9d60, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe0da);
        EXPECT(gbc.pc(), 0x9d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d60), 0xa2);
        // A2 0380
        gbc.setState(0x4320, 0x535f, 0x6840, 0xd6f7, 0x5613, 0xe083, 0x0, 0x1);
        gbc.writeMem(0x4320, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x535f);
        EXPECT(gbc.pc(), 0x4321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0381
        gbc.setState(0x6c5, 0x29f5, 0x790, 0xcb9e, 0x312, 0xdb56, 0x0, 0x1);
        gbc.writeMem(0x6c5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x29f5);
        EXPECT(gbc.pc(), 0x6c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0382
        gbc.setState(0x38f8, 0x18d0, 0xc350, 0x1862, 0x7b48, 0xfeb3, 0x1, 0x1);
        gbc.writeMem(0x38f8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x18d0);
        EXPECT(gbc.pc(), 0x38f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0383
        gbc.setState(0x5556, 0x939e, 0x110, 0x50cc, 0xb68c, 0xee9d, 0x0, 0x0);
        gbc.writeMem(0x5556, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x939e);
        EXPECT(gbc.pc(), 0x5557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0384
        gbc.setState(0xeb50, 0xda23, 0xf850, 0x53cc, 0xb22f, 0xed32, 0x0, 0x0);
        gbc.writeMem(0xeb50, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xda23);
        EXPECT(gbc.pc(), 0xeb51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb50), 0xa2);
        // A2 0385
        gbc.setState(0x52d3, 0xeb5c, 0x2500, 0x14c8, 0xc306, 0x1465, 0x0, 0x0);
        gbc.writeMem(0x52d3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xeb5c);
        EXPECT(gbc.pc(), 0x52d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0386
        gbc.setState(0xb63b, 0xd533, 0xec50, 0x8b3b, 0x641a, 0x707b, 0x1, 0x1);
        gbc.writeMem(0xb63b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd533);
        EXPECT(gbc.pc(), 0xb63c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb63b), 0xa2);
        // A2 0387
        gbc.setState(0xcc2c, 0xfd61, 0xc4d0, 0x7c2f, 0x3e3, 0x2f60, 0x1, 0x1);
        gbc.writeMem(0xcc2c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfd61);
        EXPECT(gbc.pc(), 0xcc2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2c), 0xa2);
        // A2 0388
        gbc.setState(0xecfe, 0x5276, 0x7c0, 0x91f, 0x7dfe, 0x25eb, 0x0, 0x1);
        gbc.writeMem(0xecfe, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5276);
        EXPECT(gbc.pc(), 0xecff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecfe), 0xa2);
        // A2 0389
        gbc.setState(0x43c2, 0x9e1f, 0x5060, 0x3284, 0xe814, 0x36fb, 0x0, 0x1);
        gbc.writeMem(0x43c2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x9e1f);
        EXPECT(gbc.pc(), 0x43c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 038A
        gbc.setState(0x3cb0, 0xe221, 0x3470, 0x9e96, 0xce5b, 0x4d6a, 0x1, 0x1);
        gbc.writeMem(0x3cb0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe221);
        EXPECT(gbc.pc(), 0x3cb1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 038B
        gbc.setState(0xc1bb, 0x8aa3, 0x9200, 0x4ebe, 0xc1f5, 0x621b, 0x0, 0x0);
        gbc.writeMem(0xc1bb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x8aa3);
        EXPECT(gbc.pc(), 0xc1bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1bb), 0xa2);
        // A2 038C
        gbc.setState(0x2327, 0xa900, 0x3ed0, 0xfd44, 0xad51, 0x4683, 0x0, 0x0);
        gbc.writeMem(0x2327, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa900);
        EXPECT(gbc.pc(), 0x2328);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 038D
        gbc.setState(0xd233, 0xce0c, 0xec40, 0x1cc1, 0xc5a3, 0x144a, 0x1, 0x1);
        gbc.writeMem(0xd233, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xce0c);
        EXPECT(gbc.pc(), 0xd234);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd233), 0xa2);
        // A2 038E
        gbc.setState(0xbc65, 0xc2dd, 0x69e0, 0x552e, 0x87d0, 0xa3cb, 0x1, 0x1);
        gbc.writeMem(0xbc65, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xc2dd);
        EXPECT(gbc.pc(), 0xbc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc65), 0xa2);
        // A2 038F
        gbc.setState(0x4df6, 0x1cfd, 0x14e0, 0x9685, 0xdd3e, 0x7a79, 0x1, 0x0);
        gbc.writeMem(0x4df6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x1cfd);
        EXPECT(gbc.pc(), 0x4df7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0390
        gbc.setState(0x9ce8, 0x421f, 0x4ac0, 0x4aec, 0x7b5b, 0x7a9c, 0x1, 0x1);
        gbc.writeMem(0x9ce8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x421f);
        EXPECT(gbc.pc(), 0x9ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ce8), 0xa2);
        // A2 0391
        gbc.setState(0xa6ed, 0x7cf6, 0x6720, 0xd1d7, 0x91f, 0xc65c, 0x0, 0x1);
        gbc.writeMem(0xa6ed, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7cf6);
        EXPECT(gbc.pc(), 0xa6ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6ed), 0xa2);
        // A2 0392
        gbc.setState(0x5ad3, 0x90f1, 0xf40, 0xa426, 0x7afb, 0x4e41, 0x1, 0x0);
        gbc.writeMem(0x5ad3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x90f1);
        EXPECT(gbc.pc(), 0x5ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0394
        gbc.setState(0x6a5e, 0x754a, 0x7c60, 0xab6f, 0x2d82, 0xddc3, 0x0, 0x0);
        gbc.writeMem(0x6a5e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x754a);
        EXPECT(gbc.pc(), 0x6a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0395
        gbc.setState(0xc12e, 0xf185, 0x16a0, 0xa937, 0x608, 0x9526, 0x0, 0x0);
        gbc.writeMem(0xc12e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xf185);
        EXPECT(gbc.pc(), 0xc12f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc12e), 0xa2);
        // A2 0396
        gbc.setState(0xdece, 0x4d1f, 0x1360, 0xa745, 0x77a8, 0xe239, 0x0, 0x1);
        gbc.writeMem(0xdece, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x4d1f);
        EXPECT(gbc.pc(), 0xdecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdece), 0xa2);
        // A2 0397
        gbc.setState(0x98b7, 0xd95f, 0x4800, 0x43ce, 0x8a14, 0xccf5, 0x0, 0x0);
        gbc.writeMem(0x98b7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd95f);
        EXPECT(gbc.pc(), 0x98b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98b7), 0xa2);
        // A2 0398
        gbc.setState(0x5138, 0xbf74, 0x9c30, 0x42b5, 0xe679, 0x7c87, 0x0, 0x1);
        gbc.writeMem(0x5138, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xbf74);
        EXPECT(gbc.pc(), 0x5139);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 0399
        gbc.setState(0x5145, 0x4398, 0x9100, 0xcf6d, 0x2953, 0xc13a, 0x0, 0x1);
        gbc.writeMem(0x5145, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4398);
        EXPECT(gbc.pc(), 0x5146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 039A
        gbc.setState(0x69fd, 0xfc60, 0xcdf0, 0x480e, 0xd396, 0x3d67, 0x0, 0x0);
        gbc.writeMem(0x69fd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfc60);
        EXPECT(gbc.pc(), 0x69fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 039B
        gbc.setState(0xe49b, 0xa35f, 0x810, 0x3c62, 0x7a73, 0x6be0, 0x1, 0x1);
        gbc.writeMem(0xe49b, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa35f);
        EXPECT(gbc.pc(), 0xe49c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe49b), 0xa2);
        // A2 039C
        gbc.setState(0x8646, 0x9cf9, 0xffb0, 0x39dd, 0xe41f, 0xa228, 0x1, 0x0);
        gbc.writeMem(0x8646, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x9cf9);
        EXPECT(gbc.pc(), 0x8647);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8646), 0xa2);
        // A2 039D
        gbc.setState(0x4abf, 0xf873, 0x35b0, 0x35c2, 0x96d8, 0x9ab2, 0x1, 0x1);
        gbc.writeMem(0x4abf, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf873);
        EXPECT(gbc.pc(), 0x4ac0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 039E
        gbc.setState(0x3f7, 0xab58, 0x12b0, 0x35e2, 0x6a4d, 0x6361, 0x1, 0x1);
        gbc.writeMem(0x3f7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xab58);
        EXPECT(gbc.pc(), 0x3f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 039F
        gbc.setState(0x6089, 0xcfa0, 0xf230, 0x95a7, 0x65d3, 0x68ea, 0x0, 0x1);
        gbc.writeMem(0x6089, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xcfa0);
        EXPECT(gbc.pc(), 0x608a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03A0
        gbc.setState(0xbb2c, 0x39e7, 0xb530, 0xe6aa, 0x4344, 0x4e0e, 0x1, 0x1);
        gbc.writeMem(0xbb2c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x39e7);
        EXPECT(gbc.pc(), 0xbb2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb2c), 0xa2);
        // A2 03A1
        gbc.setState(0x36a0, 0xd662, 0xecb0, 0xe5f4, 0xc746, 0x53f4, 0x0, 0x0);
        gbc.writeMem(0x36a0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd662);
        EXPECT(gbc.pc(), 0x36a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03A2
        gbc.setState(0x327e, 0xb467, 0x9120, 0xf493, 0xebae, 0x6f64, 0x0, 0x1);
        gbc.writeMem(0x327e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb467);
        EXPECT(gbc.pc(), 0x327f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03A4
        gbc.setState(0x7d4e, 0xb94c, 0x9600, 0x4cdd, 0x1ee9, 0xd247, 0x1, 0x1);
        gbc.writeMem(0x7d4e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xb94c);
        EXPECT(gbc.pc(), 0x7d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03A6
        gbc.setState(0xd493, 0x819c, 0x4270, 0x879e, 0xb338, 0x6726, 0x1, 0x1);
        gbc.writeMem(0xd493, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x819c);
        EXPECT(gbc.pc(), 0xd494);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd493), 0xa2);
        // A2 03A7
        gbc.setState(0x254f, 0xc280, 0xc570, 0x7d1e, 0x24ba, 0x7ed8, 0x0, 0x0);
        gbc.writeMem(0x254f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xc280);
        EXPECT(gbc.pc(), 0x2550);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03A8
        gbc.setState(0xe62f, 0x8fd0, 0x86c0, 0xe041, 0x57fc, 0x70af, 0x1, 0x0);
        gbc.writeMem(0xe62f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8fd0);
        EXPECT(gbc.pc(), 0xe630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe62f), 0xa2);
        // A2 03A9
        gbc.setState(0x8fd8, 0x5bc0, 0xc880, 0x7439, 0xc7c1, 0xe347, 0x1, 0x1);
        gbc.writeMem(0x8fd8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x5bc0);
        EXPECT(gbc.pc(), 0x8fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd8), 0xa2);
        // A2 03AA
        gbc.setState(0x323a, 0xddb, 0xf110, 0xccce, 0xef4, 0x33a0, 0x0, 0x1);
        gbc.writeMem(0x323a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xddb);
        EXPECT(gbc.pc(), 0x323b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03AB
        gbc.setState(0xde4c, 0x2169, 0x9fd0, 0x5462, 0x36e4, 0x1613, 0x0, 0x0);
        gbc.writeMem(0xde4c, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2169);
        EXPECT(gbc.pc(), 0xde4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde4c), 0xa2);
        // A2 03AC
        gbc.setState(0x672, 0x1bb0, 0xb6b0, 0x7c87, 0x87b7, 0x9a08, 0x0, 0x0);
        gbc.writeMem(0x672, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1bb0);
        EXPECT(gbc.pc(), 0x673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03AD
        gbc.setState(0x5e9e, 0xe6ff, 0x27e0, 0xf35f, 0x8e70, 0x45c8, 0x1, 0x0);
        gbc.writeMem(0x5e9e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe6ff);
        EXPECT(gbc.pc(), 0x5e9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03AE
        gbc.setState(0xdb5d, 0x235, 0x2030, 0x5a10, 0x2f75, 0x5f32, 0x1, 0x1);
        gbc.writeMem(0xdb5d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x235);
        EXPECT(gbc.pc(), 0xdb5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb5d), 0xa2);
        // A2 03AF
        gbc.setState(0x9a83, 0xcb58, 0xda40, 0x7947, 0x86e, 0x5164, 0x0, 0x0);
        gbc.writeMem(0x9a83, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xcb58);
        EXPECT(gbc.pc(), 0x9a84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a83), 0xa2);
        // A2 03B0
        gbc.setState(0x2ce6, 0x8004, 0x230, 0xdfbe, 0xbf9f, 0x73c4, 0x0, 0x0);
        gbc.writeMem(0x2ce6, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8004);
        EXPECT(gbc.pc(), 0x2ce7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B1
        gbc.setState(0x1dd3, 0x6ec8, 0xfc50, 0x5021, 0xdb34, 0xebeb, 0x0, 0x1);
        gbc.writeMem(0x1dd3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6ec8);
        EXPECT(gbc.pc(), 0x1dd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B3
        gbc.setState(0xb216, 0x15f2, 0x78d0, 0xc02e, 0x5941, 0xdafc, 0x0, 0x1);
        gbc.writeMem(0xb216, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x15f2);
        EXPECT(gbc.pc(), 0xb217);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb216), 0xa2);
        // A2 03B4
        gbc.setState(0x6cb9, 0x42b5, 0x3630, 0x3340, 0x92d3, 0xdb87, 0x1, 0x0);
        gbc.writeMem(0x6cb9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x42b5);
        EXPECT(gbc.pc(), 0x6cba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B5
        gbc.setState(0x78b9, 0x3ea2, 0xf2f0, 0xc675, 0x4e68, 0x7762, 0x1, 0x0);
        gbc.writeMem(0x78b9, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x3ea2);
        EXPECT(gbc.pc(), 0x78ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B6
        gbc.setState(0x3389, 0xd07, 0xeb60, 0x42bc, 0x9966, 0x9ff5, 0x0, 0x1);
        gbc.writeMem(0x3389, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd07);
        EXPECT(gbc.pc(), 0x338a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B8
        gbc.setState(0xea4, 0x593c, 0x9280, 0x98ce, 0x9b44, 0x5990, 0x1, 0x0);
        gbc.writeMem(0xea4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x593c);
        EXPECT(gbc.pc(), 0xea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03B9
        gbc.setState(0x47dd, 0xce06, 0xff50, 0x5fa4, 0xe526, 0xd581, 0x0, 0x1);
        gbc.writeMem(0x47dd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xce06);
        EXPECT(gbc.pc(), 0x47de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03BA
        gbc.setState(0x1051, 0x9bc2, 0x3e40, 0x49f1, 0x33a9, 0x9dc2, 0x1, 0x0);
        gbc.writeMem(0x1051, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9bc2);
        EXPECT(gbc.pc(), 0x1052);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03BB
        gbc.setState(0xae7e, 0xf98a, 0xceb0, 0x4153, 0x3481, 0x31d3, 0x1, 0x0);
        gbc.writeMem(0xae7e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf98a);
        EXPECT(gbc.pc(), 0xae7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae7e), 0xa2);
        // A2 03BC
        gbc.setState(0x4e25, 0x368b, 0x1430, 0xf15c, 0xc25, 0xb1ad, 0x1, 0x1);
        gbc.writeMem(0x4e25, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x368b);
        EXPECT(gbc.pc(), 0x4e26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03BD
        gbc.setState(0x949a, 0xf6c6, 0xccf0, 0x61c9, 0x7e12, 0xbe9c, 0x0, 0x1);
        gbc.writeMem(0x949a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf6c6);
        EXPECT(gbc.pc(), 0x949b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x949a), 0xa2);
        // A2 03BE
        gbc.setState(0x3226, 0x6a8d, 0xaef0, 0x953b, 0x395a, 0xa0e1, 0x1, 0x1);
        gbc.writeMem(0x3226, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6a8d);
        EXPECT(gbc.pc(), 0x3227);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03BF
        gbc.setState(0x22ac, 0x4894, 0xde90, 0xc471, 0x9cc5, 0x9474, 0x0, 0x0);
        gbc.writeMem(0x22ac, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4894);
        EXPECT(gbc.pc(), 0x22ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C0
        gbc.setState(0x1658, 0x9c44, 0x8630, 0x85bb, 0xcaa2, 0xa618, 0x0, 0x1);
        gbc.writeMem(0x1658, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x9c44);
        EXPECT(gbc.pc(), 0x1659);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C1
        gbc.setState(0x230a, 0x327, 0xd080, 0x68c1, 0x9b02, 0xc8f1, 0x0, 0x1);
        gbc.writeMem(0x230a, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x327);
        EXPECT(gbc.pc(), 0x230b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C2
        gbc.setState(0xd118, 0xf276, 0xca20, 0xf6d0, 0xa509, 0xc414, 0x0, 0x1);
        gbc.writeMem(0xd118, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xf276);
        EXPECT(gbc.pc(), 0xd119);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd118), 0xa2);
        // A2 03C3
        gbc.setState(0x1333, 0x85c6, 0x180, 0x3480, 0xbc87, 0xf92d, 0x0, 0x1);
        gbc.writeMem(0x1333, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x85c6);
        EXPECT(gbc.pc(), 0x1334);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C4
        gbc.setState(0x3559, 0x8062, 0xefe0, 0x6399, 0x3aca, 0xe534, 0x0, 0x1);
        gbc.writeMem(0x3559, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8062);
        EXPECT(gbc.pc(), 0x355a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C5
        gbc.setState(0xbe32, 0x190e, 0xb130, 0x2877, 0xc584, 0x7144, 0x1, 0x1);
        gbc.writeMem(0xbe32, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x190e);
        EXPECT(gbc.pc(), 0xbe33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe32), 0xa2);
        // A2 03C6
        gbc.setState(0x6954, 0x4960, 0x1f00, 0x4459, 0x2bcc, 0x496, 0x1, 0x0);
        gbc.writeMem(0x6954, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4960);
        EXPECT(gbc.pc(), 0x6955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C7
        gbc.setState(0x2030, 0x282b, 0xced0, 0x70ec, 0x4ac7, 0x8b49, 0x1, 0x1);
        gbc.writeMem(0x2030, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x282b);
        EXPECT(gbc.pc(), 0x2031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C8
        gbc.setState(0x18b2, 0x2350, 0x90a0, 0x17fe, 0xf590, 0xf02f, 0x1, 0x1);
        gbc.writeMem(0x18b2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2350);
        EXPECT(gbc.pc(), 0x18b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03C9
        gbc.setState(0x9ff4, 0x15d6, 0xba50, 0xa790, 0x5316, 0x3e65, 0x1, 0x0);
        gbc.writeMem(0x9ff4, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x15d6);
        EXPECT(gbc.pc(), 0x9ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ff4), 0xa2);
        // A2 03CA
        gbc.setState(0xc86f, 0x338e, 0x4410, 0x83d, 0xe4d2, 0x53db, 0x0, 0x1);
        gbc.writeMem(0xc86f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x338e);
        EXPECT(gbc.pc(), 0xc870);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc86f), 0xa2);
        // A2 03CB
        gbc.setState(0xb4e3, 0xca00, 0xc090, 0x4bbb, 0xf067, 0xb8a, 0x0, 0x1);
        gbc.writeMem(0xb4e3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xca00);
        EXPECT(gbc.pc(), 0xb4e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4e3), 0xa2);
        // A2 03CC
        gbc.setState(0x4387, 0x32d1, 0xcec0, 0xbd08, 0xb6b3, 0xac65, 0x0, 0x1);
        gbc.writeMem(0x4387, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x32d1);
        EXPECT(gbc.pc(), 0x4388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03CD
        gbc.setState(0x5bd2, 0x9dfa, 0xa7e0, 0xbe76, 0xdbe4, 0x7165, 0x0, 0x1);
        gbc.writeMem(0x5bd2, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x9dfa);
        EXPECT(gbc.pc(), 0x5bd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03CF
        gbc.setState(0xe575, 0x3a09, 0x8350, 0x3173, 0xccde, 0xe9e5, 0x1, 0x0);
        gbc.writeMem(0xe575, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x3a09);
        EXPECT(gbc.pc(), 0xe576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe575), 0xa2);
        // A2 03D0
        gbc.setState(0x38e, 0x878d, 0x3420, 0x4f92, 0x7d78, 0x52e, 0x1, 0x0);
        gbc.writeMem(0x38e, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x878d);
        EXPECT(gbc.pc(), 0x38f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03D1
        gbc.setState(0x64fb, 0x3455, 0xc600, 0x3b98, 0x7a1d, 0xb8b6, 0x0, 0x0);
        gbc.writeMem(0x64fb, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3455);
        EXPECT(gbc.pc(), 0x64fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03D2
        gbc.setState(0x5181, 0x8cf4, 0x9f00, 0xdde4, 0x2c07, 0xbdfc, 0x1, 0x0);
        gbc.writeMem(0x5181, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x8cf4);
        EXPECT(gbc.pc(), 0x5182);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03D3
        gbc.setState(0x96df, 0x1a54, 0xe460, 0x6ce7, 0x6373, 0xb6f5, 0x0, 0x0);
        gbc.writeMem(0x96df, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1a54);
        EXPECT(gbc.pc(), 0x96e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96df), 0xa2);
        // A2 03D4
        gbc.setState(0x2f75, 0x4deb, 0x93a0, 0x869b, 0xf815, 0xc35f, 0x0, 0x0);
        gbc.writeMem(0x2f75, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x4deb);
        EXPECT(gbc.pc(), 0x2f76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03D5
        gbc.setState(0xe4e8, 0xa828, 0x3de0, 0x4504, 0x7441, 0x23e9, 0x1, 0x1);
        gbc.writeMem(0xe4e8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa828);
        EXPECT(gbc.pc(), 0xe4e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4e8), 0xa2);
        // A2 03D6
        gbc.setState(0x2a98, 0xa146, 0xbe40, 0xd518, 0xb4a6, 0x59d2, 0x1, 0x1);
        gbc.writeMem(0x2a98, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa146);
        EXPECT(gbc.pc(), 0x2a99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03D7
        gbc.setState(0xa2b0, 0xf432, 0x21e0, 0x6b9d, 0xce12, 0xc0b7, 0x1, 0x1);
        gbc.writeMem(0xa2b0, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xf432);
        EXPECT(gbc.pc(), 0xa2b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2b0), 0xa2);
        // A2 03D9
        gbc.setState(0x5efd, 0xaac0, 0xd870, 0xa553, 0x5167, 0xb643, 0x1, 0x1);
        gbc.writeMem(0x5efd, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xaac0);
        EXPECT(gbc.pc(), 0x5efe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03DA
        gbc.setState(0x9d65, 0x1599, 0x7b10, 0x5b88, 0xeff, 0x9877, 0x1, 0x1);
        gbc.writeMem(0x9d65, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x1599);
        EXPECT(gbc.pc(), 0x9d66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d65), 0xa2);
        // A2 03DB
        gbc.setState(0xc622, 0x1848, 0x92b0, 0x17df, 0x8d90, 0xe6ce, 0x1, 0x1);
        gbc.writeMem(0xc622, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x1848);
        EXPECT(gbc.pc(), 0xc623);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc622), 0xa2);
        // A2 03DC
        gbc.setState(0xe7b5, 0x777b, 0xb950, 0xcd66, 0xe6d7, 0x75b5, 0x0, 0x0);
        gbc.writeMem(0xe7b5, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x777b);
        EXPECT(gbc.pc(), 0xe7b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7b5), 0xa2);
        // A2 03DD
        gbc.setState(0x1a53, 0x5b79, 0x85d0, 0xb0c8, 0xca9e, 0x241c, 0x0, 0x0);
        gbc.writeMem(0x1a53, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5b79);
        EXPECT(gbc.pc(), 0x1a54);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03DE
        gbc.setState(0xfce, 0x7b27, 0xc880, 0x2c0f, 0x153f, 0x7680, 0x0, 0x0);
        gbc.writeMem(0xfce, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7b27);
        EXPECT(gbc.pc(), 0xfcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03DF
        gbc.setState(0xfb8, 0xd3ab, 0x49d0, 0xc010, 0x3821, 0x5860, 0x1, 0x0);
        gbc.writeMem(0xfb8, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xd3ab);
        EXPECT(gbc.pc(), 0xfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03E0
        gbc.setState(0xbf69, 0xfa27, 0xa930, 0x951e, 0x9bd0, 0x73fc, 0x1, 0x1);
        gbc.writeMem(0xbf69, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xfa27);
        EXPECT(gbc.pc(), 0xbf6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf69), 0xa2);
        // A2 03E1
        gbc.setState(0x93c3, 0x8a85, 0x500, 0xc0ab, 0x2ac8, 0xe0e0, 0x0, 0x1);
        gbc.writeMem(0x93c3, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8a85);
        EXPECT(gbc.pc(), 0x93c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93c3), 0xa2);
        // A2 03E2
        gbc.setState(0xb6a7, 0x45a1, 0x1cc0, 0x9e8e, 0x8332, 0x898, 0x0, 0x0);
        gbc.writeMem(0xb6a7, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x45a1);
        EXPECT(gbc.pc(), 0xb6a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6a7), 0xa2);
        // A2 03E3
        gbc.setState(0xb41d, 0x5dad, 0x710, 0xbe80, 0x8c5, 0x3c50, 0x0, 0x1);
        gbc.writeMem(0xb41d, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5dad);
        EXPECT(gbc.pc(), 0xb41e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41d), 0xa2);
        // A2 03E5
        gbc.setState(0x23df, 0xb79a, 0x6010, 0x4543, 0x9046, 0x36b1, 0x1, 0x0);
        gbc.writeMem(0x23df, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb79a);
        EXPECT(gbc.pc(), 0x23e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // A2 03E6
        gbc.setState(0xc5bc, 0xc1b6, 0x3650, 0xf521, 0xa2ee, 0x5f31, 0x0, 0x1);
        gbc.writeMem(0xc5bc, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xc1b6);
        EXPECT(gbc.pc(), 0xc5bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5bc), 0xa2);
        // A2 03E7
        gbc.setState(0xcd5f, 0xc9, 0x5160, 0x28c1, 0xc6f, 0xfea3, 0x0, 0x1);
        gbc.writeMem(0xcd5f, { 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc9);
        EXPECT(gbc.pc(), 0xcd60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5f), 0xa2);
    }
}
#endif
