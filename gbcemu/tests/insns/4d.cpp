#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_4d)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_4d) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 4D 0000
        gbc.setState(0x976e, 0xc8a4, 0x890, 0xa7c, 0x5402, 0x71dd, 0x1, 0x1);
        gbc.writeMem(0x976e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc8a4);
        EXPECT(gbc.pc(), 0x976f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x976e), 0x4d);
        // 4D 0001
        gbc.setState(0xbe3e, 0xd92b, 0x7f0, 0xafc8, 0x4eea, 0x3b41, 0x0, 0x0);
        gbc.writeMem(0xbe3e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xd92b);
        EXPECT(gbc.pc(), 0xbe3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe3e), 0x4d);
        // 4D 0002
        gbc.setState(0x64b, 0x6df, 0xa130, 0xbcb3, 0x282, 0xdc94, 0x1, 0x1);
        gbc.writeMem(0x64b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6df);
        EXPECT(gbc.pc(), 0x64c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0004
        gbc.setState(0xa501, 0x349e, 0x2e30, 0x38f4, 0xa1c9, 0x6a23, 0x0, 0x0);
        gbc.writeMem(0xa501, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x349e);
        EXPECT(gbc.pc(), 0xa502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa501), 0x4d);
        // 4D 0005
        gbc.setState(0x870f, 0xde90, 0x9d90, 0xb76c, 0x3810, 0xfc9c, 0x0, 0x0);
        gbc.writeMem(0x870f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xde90);
        EXPECT(gbc.pc(), 0x8710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x870f), 0x4d);
        // 4D 0006
        gbc.setState(0xaf75, 0x157d, 0x3fb0, 0x6505, 0xb7b8, 0xea98, 0x0, 0x0);
        gbc.writeMem(0xaf75, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x157d);
        EXPECT(gbc.pc(), 0xaf76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf75), 0x4d);
        // 4D 0007
        gbc.setState(0xc9b2, 0xac9f, 0x6520, 0x95b2, 0xe28d, 0xdaa0, 0x0, 0x0);
        gbc.writeMem(0xc9b2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xac9f);
        EXPECT(gbc.pc(), 0xc9b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b2), 0x4d);
        // 4D 0008
        gbc.setState(0x534e, 0xdb1a, 0x5330, 0xe857, 0x2cb2, 0x5dd0, 0x0, 0x1);
        gbc.writeMem(0x534e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xdb1a);
        EXPECT(gbc.pc(), 0x534f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0009
        gbc.setState(0x10d2, 0x3ef0, 0x14c0, 0xc233, 0xc2bf, 0x6dad, 0x0, 0x0);
        gbc.writeMem(0x10d2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3ef0);
        EXPECT(gbc.pc(), 0x10d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 000A
        gbc.setState(0x97d2, 0xaa2a, 0xf8d0, 0x2faa, 0xcb05, 0x743, 0x1, 0x0);
        gbc.writeMem(0x97d2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xaa2a);
        EXPECT(gbc.pc(), 0x97d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97d2), 0x4d);
        // 4D 000B
        gbc.setState(0x1909, 0xac9a, 0xecb0, 0x2aef, 0x17df, 0xecb8, 0x1, 0x1);
        gbc.writeMem(0x1909, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xac9a);
        EXPECT(gbc.pc(), 0x190a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 000C
        gbc.setState(0x7032, 0x97e, 0x3900, 0x6502, 0x51ff, 0x4fab, 0x0, 0x0);
        gbc.writeMem(0x7032, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x97e);
        EXPECT(gbc.pc(), 0x7033);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 000D
        gbc.setState(0x3059, 0x6087, 0xf40, 0x2e19, 0x6497, 0xd377, 0x1, 0x0);
        gbc.writeMem(0x3059, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6087);
        EXPECT(gbc.pc(), 0x305a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 000E
        gbc.setState(0x7386, 0x89d8, 0xf610, 0xb0fd, 0xfd4, 0x17e0, 0x1, 0x1);
        gbc.writeMem(0x7386, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x89d8);
        EXPECT(gbc.pc(), 0x7387);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 000F
        gbc.setState(0x1247, 0xfa49, 0xe660, 0x91ba, 0xa596, 0x6f31, 0x0, 0x1);
        gbc.writeMem(0x1247, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfa49);
        EXPECT(gbc.pc(), 0x1248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0012
        gbc.setState(0x89c5, 0x17e9, 0x8610, 0x4318, 0x94ab, 0xd62c, 0x1, 0x0);
        gbc.writeMem(0x89c5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x17e9);
        EXPECT(gbc.pc(), 0x89c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89c5), 0x4d);
        // 4D 0013
        gbc.setState(0xc148, 0x9e3d, 0xe700, 0x525a, 0xefc3, 0xc500, 0x1, 0x1);
        gbc.writeMem(0xc148, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x9e3d);
        EXPECT(gbc.pc(), 0xc149);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc148), 0x4d);
        // 4D 0014
        gbc.setState(0x8bb9, 0x60a0, 0x52c0, 0x99d5, 0xcaff, 0x4903, 0x1, 0x1);
        gbc.writeMem(0x8bb9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x60a0);
        EXPECT(gbc.pc(), 0x8bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bb9), 0x4d);
        // 4D 0015
        gbc.setState(0x272e, 0xfc35, 0x4200, 0x9a03, 0x28ff, 0xca97, 0x0, 0x1);
        gbc.writeMem(0x272e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xfc35);
        EXPECT(gbc.pc(), 0x272f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0016
        gbc.setState(0x34f8, 0xcb0, 0x2240, 0xe82b, 0x5d47, 0x71af, 0x1, 0x1);
        gbc.writeMem(0x34f8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcb0);
        EXPECT(gbc.pc(), 0x34f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0017
        gbc.setState(0x16cc, 0xac60, 0x8ad0, 0x4282, 0xdebc, 0x235d, 0x1, 0x1);
        gbc.writeMem(0x16cc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xac60);
        EXPECT(gbc.pc(), 0x16cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0018
        gbc.setState(0x218, 0x909, 0x9f40, 0xc842, 0x4a50, 0xaac8, 0x0, 0x0);
        gbc.writeMem(0x218, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x909);
        EXPECT(gbc.pc(), 0x219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0019
        gbc.setState(0xc3ce, 0x75ce, 0xc630, 0xf99, 0xe336, 0xe4d9, 0x0, 0x0);
        gbc.writeMem(0xc3ce, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x75ce);
        EXPECT(gbc.pc(), 0xc3cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3ce), 0x4d);
        // 4D 001A
        gbc.setState(0xc302, 0xc975, 0xb570, 0xaad5, 0x6687, 0xe66a, 0x1, 0x0);
        gbc.writeMem(0xc302, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xc975);
        EXPECT(gbc.pc(), 0xc303);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc302), 0x4d);
        // 4D 001C
        gbc.setState(0x24ef, 0xe428, 0xa790, 0x91ce, 0xf6b6, 0xc10b, 0x0, 0x1);
        gbc.writeMem(0x24ef, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe428);
        EXPECT(gbc.pc(), 0x24f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 001D
        gbc.setState(0x4f59, 0xf72c, 0xf5b0, 0xd7a4, 0x19fa, 0x667d, 0x1, 0x1);
        gbc.writeMem(0x4f59, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf72c);
        EXPECT(gbc.pc(), 0x4f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 001E
        gbc.setState(0xb8ab, 0x9933, 0x5a10, 0x17ec, 0x1ecf, 0xd8e8, 0x0, 0x1);
        gbc.writeMem(0xb8ab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9933);
        EXPECT(gbc.pc(), 0xb8ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8ab), 0x4d);
        // 4D 001F
        gbc.setState(0xcdd8, 0x2ae4, 0xd020, 0xcdf, 0x7af1, 0x8d1f, 0x1, 0x1);
        gbc.writeMem(0xcdd8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2ae4);
        EXPECT(gbc.pc(), 0xcdd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdd8), 0x4d);
        // 4D 0020
        gbc.setState(0x1ea5, 0xfbb1, 0xf3d0, 0x31dd, 0xdd48, 0xbf07, 0x0, 0x1);
        gbc.writeMem(0x1ea5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xfbb1);
        EXPECT(gbc.pc(), 0x1ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0021
        gbc.setState(0x6dbc, 0xd6f, 0x29a0, 0xd906, 0x2e96, 0xe763, 0x1, 0x1);
        gbc.writeMem(0x6dbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd6f);
        EXPECT(gbc.pc(), 0x6dbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0023
        gbc.setState(0x55d4, 0x304e, 0xf640, 0xbd94, 0x90ba, 0xc806, 0x1, 0x1);
        gbc.writeMem(0x55d4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x304e);
        EXPECT(gbc.pc(), 0x55d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0024
        gbc.setState(0x4571, 0x91b7, 0x4c40, 0x38e6, 0xb16, 0x542a, 0x0, 0x1);
        gbc.writeMem(0x4571, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x91b7);
        EXPECT(gbc.pc(), 0x4572);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0025
        gbc.setState(0x9fb7, 0x3afa, 0x9700, 0x5de2, 0x364c, 0x96d, 0x1, 0x0);
        gbc.writeMem(0x9fb7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x3afa);
        EXPECT(gbc.pc(), 0x9fb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb7), 0x4d);
        // 4D 0026
        gbc.setState(0x5739, 0x5e79, 0x5330, 0x1a5d, 0x98d1, 0xfdf1, 0x1, 0x1);
        gbc.writeMem(0x5739, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x5e79);
        EXPECT(gbc.pc(), 0x573a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0027
        gbc.setState(0x34c0, 0x52dd, 0xe510, 0x3db1, 0xf1e9, 0xed52, 0x1, 0x0);
        gbc.writeMem(0x34c0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x52dd);
        EXPECT(gbc.pc(), 0x34c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0028
        gbc.setState(0xb816, 0x824c, 0xee20, 0x2801, 0x1fa8, 0x9eee, 0x1, 0x1);
        gbc.writeMem(0xb816, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x824c);
        EXPECT(gbc.pc(), 0xb817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb816), 0x4d);
        // 4D 0029
        gbc.setState(0x7331, 0x9d68, 0x37d0, 0x4363, 0xcb4a, 0x3e8f, 0x1, 0x0);
        gbc.writeMem(0x7331, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x9d68);
        EXPECT(gbc.pc(), 0x7332);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 002A
        gbc.setState(0x4dfa, 0x995e, 0xc4c0, 0x807c, 0xe0c8, 0x4b9f, 0x1, 0x1);
        gbc.writeMem(0x4dfa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x995e);
        EXPECT(gbc.pc(), 0x4dfb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 002B
        gbc.setState(0xb033, 0x7b73, 0x630, 0x26da, 0xa67f, 0xb6e8, 0x1, 0x0);
        gbc.writeMem(0xb033, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x7b73);
        EXPECT(gbc.pc(), 0xb034);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb033), 0x4d);
        // 4D 002C
        gbc.setState(0xa814, 0x9f5, 0xb8c0, 0xcfa8, 0x27a7, 0x6eff, 0x1, 0x0);
        gbc.writeMem(0xa814, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x9f5);
        EXPECT(gbc.pc(), 0xa815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa814), 0x4d);
        // 4D 002D
        gbc.setState(0x9b35, 0x35ea, 0x8390, 0xe12e, 0x214b, 0x4dd6, 0x0, 0x0);
        gbc.writeMem(0x9b35, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x35ea);
        EXPECT(gbc.pc(), 0x9b36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b35), 0x4d);
        // 4D 002E
        gbc.setState(0x93f2, 0x5445, 0x1b70, 0xf985, 0x7f19, 0xc66b, 0x0, 0x1);
        gbc.writeMem(0x93f2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5445);
        EXPECT(gbc.pc(), 0x93f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f2), 0x4d);
        // 4D 002F
        gbc.setState(0x177c, 0x6f48, 0x85d0, 0xcc3f, 0xf07b, 0xcca3, 0x1, 0x0);
        gbc.writeMem(0x177c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6f48);
        EXPECT(gbc.pc(), 0x177d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0030
        gbc.setState(0x2840, 0x646f, 0x48e0, 0x6d1c, 0xd704, 0xdc73, 0x1, 0x1);
        gbc.writeMem(0x2840, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x646f);
        EXPECT(gbc.pc(), 0x2841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0031
        gbc.setState(0x27ce, 0xde16, 0xe130, 0x92a3, 0xee95, 0xd57c, 0x0, 0x0);
        gbc.writeMem(0x27ce, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xde16);
        EXPECT(gbc.pc(), 0x27cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0032
        gbc.setState(0x3efb, 0x8941, 0x68e0, 0xf7a, 0x93c4, 0xf609, 0x1, 0x0);
        gbc.writeMem(0x3efb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0x3efc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0033
        gbc.setState(0x389b, 0xd5e0, 0x6c20, 0x19fb, 0x3722, 0x6e11, 0x0, 0x0);
        gbc.writeMem(0x389b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xd5e0);
        EXPECT(gbc.pc(), 0x389c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0035
        gbc.setState(0x515f, 0x6e0f, 0x14b0, 0x5cb, 0x8eeb, 0xef41, 0x0, 0x1);
        gbc.writeMem(0x515f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x6e0f);
        EXPECT(gbc.pc(), 0x5160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0036
        gbc.setState(0x79bb, 0x279b, 0x6ac0, 0x7c5e, 0x64ad, 0xd716, 0x1, 0x0);
        gbc.writeMem(0x79bb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x279b);
        EXPECT(gbc.pc(), 0x79bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0037
        gbc.setState(0xa73c, 0x328, 0xf820, 0x3a40, 0x4e23, 0x59fd, 0x0, 0x0);
        gbc.writeMem(0xa73c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x328);
        EXPECT(gbc.pc(), 0xa73d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa73c), 0x4d);
        // 4D 0038
        gbc.setState(0x2186, 0xb596, 0x5be0, 0xf054, 0x9995, 0xf5cb, 0x1, 0x0);
        gbc.writeMem(0x2186, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb596);
        EXPECT(gbc.pc(), 0x2187);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 003A
        gbc.setState(0x531a, 0x5650, 0x6ae0, 0xee33, 0x104b, 0xe49b, 0x0, 0x0);
        gbc.writeMem(0x531a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5650);
        EXPECT(gbc.pc(), 0x531b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 003B
        gbc.setState(0x5a0b, 0xfecc, 0x5fe0, 0x3395, 0x8dd2, 0xbbc1, 0x0, 0x1);
        gbc.writeMem(0x5a0b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xfecc);
        EXPECT(gbc.pc(), 0x5a0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 003C
        gbc.setState(0x6987, 0x4d67, 0x5cf0, 0xad61, 0x4871, 0x16a7, 0x0, 0x0);
        gbc.writeMem(0x6987, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4d67);
        EXPECT(gbc.pc(), 0x6988);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 003D
        gbc.setState(0x7106, 0x627f, 0x4ce0, 0x74c6, 0x596e, 0x501e, 0x1, 0x1);
        gbc.writeMem(0x7106, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x627f);
        EXPECT(gbc.pc(), 0x7107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 003E
        gbc.setState(0x4a8, 0x3199, 0x99c0, 0xb3e2, 0x62a0, 0xa9c3, 0x1, 0x0);
        gbc.writeMem(0x4a8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3199);
        EXPECT(gbc.pc(), 0x4a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 003F
        gbc.setState(0xa5bd, 0x9a8b, 0xfef0, 0x5e3f, 0xfa6e, 0x95b6, 0x1, 0x1);
        gbc.writeMem(0xa5bd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x9a8b);
        EXPECT(gbc.pc(), 0xa5be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5bd), 0x4d);
        // 4D 0040
        gbc.setState(0xce1f, 0x9bce, 0xc7b0, 0xa3c, 0xd7db, 0x2a7d, 0x1, 0x0);
        gbc.writeMem(0xce1f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9bce);
        EXPECT(gbc.pc(), 0xce20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce1f), 0x4d);
        // 4D 0041
        gbc.setState(0x894f, 0x381, 0xf580, 0xe547, 0x3f57, 0x9c7e, 0x1, 0x0);
        gbc.writeMem(0x894f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x381);
        EXPECT(gbc.pc(), 0x8950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894f), 0x4d);
        // 4D 0042
        gbc.setState(0xc1b1, 0xae9c, 0xba30, 0xcf5f, 0x695c, 0x6b5d, 0x1, 0x0);
        gbc.writeMem(0xc1b1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xae9c);
        EXPECT(gbc.pc(), 0xc1b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1b1), 0x4d);
        // 4D 0043
        gbc.setState(0x554, 0xd1a9, 0xd4d0, 0x11de, 0x3f6b, 0xee02, 0x0, 0x1);
        gbc.writeMem(0x554, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd1a9);
        EXPECT(gbc.pc(), 0x555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0044
        gbc.setState(0x1904, 0x5885, 0xb4d0, 0x5be6, 0x9b68, 0xb993, 0x0, 0x0);
        gbc.writeMem(0x1904, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5885);
        EXPECT(gbc.pc(), 0x1905);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0045
        gbc.setState(0x2e28, 0x1775, 0x690, 0x4cc3, 0xe753, 0x1d51, 0x1, 0x0);
        gbc.writeMem(0x2e28, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1775);
        EXPECT(gbc.pc(), 0x2e29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0046
        gbc.setState(0x1de2, 0xff51, 0x850, 0x2c64, 0xe10c, 0x130f, 0x0, 0x1);
        gbc.writeMem(0x1de2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xff51);
        EXPECT(gbc.pc(), 0x1de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0047
        gbc.setState(0x6da0, 0x5ff3, 0x16c0, 0xd6f4, 0xd1a2, 0x50e8, 0x0, 0x0);
        gbc.writeMem(0x6da0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5ff3);
        EXPECT(gbc.pc(), 0x6da1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0049
        gbc.setState(0x627e, 0x962f, 0x630, 0x59bc, 0xafe, 0x1b3f, 0x0, 0x0);
        gbc.writeMem(0x627e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x962f);
        EXPECT(gbc.pc(), 0x627f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 004A
        gbc.setState(0x1014, 0x10e0, 0x8d90, 0xc25e, 0x50cd, 0x5af9, 0x1, 0x1);
        gbc.writeMem(0x1014, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x10e0);
        EXPECT(gbc.pc(), 0x1015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 004C
        gbc.setState(0xb618, 0xfed6, 0x8ee0, 0x5929, 0xf9b4, 0xf423, 0x0, 0x1);
        gbc.writeMem(0xb618, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xfed6);
        EXPECT(gbc.pc(), 0xb619);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb618), 0x4d);
        // 4D 004D
        gbc.setState(0x1c9f, 0x1cd, 0xbb50, 0x9839, 0xfd18, 0x8eb3, 0x1, 0x0);
        gbc.writeMem(0x1c9f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x1cd);
        EXPECT(gbc.pc(), 0x1ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 004E
        gbc.setState(0xa8e0, 0x304b, 0x3650, 0xd92d, 0x7bc2, 0xe6cd, 0x0, 0x0);
        gbc.writeMem(0xa8e0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x304b);
        EXPECT(gbc.pc(), 0xa8e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8e0), 0x4d);
        // 4D 004F
        gbc.setState(0x657b, 0x2862, 0x8630, 0x26d5, 0xdf9d, 0xd312, 0x1, 0x0);
        gbc.writeMem(0x657b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x2862);
        EXPECT(gbc.pc(), 0x657c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0050
        gbc.setState(0x38b3, 0x404a, 0x4dc0, 0xc034, 0xb1dc, 0xf294, 0x0, 0x0);
        gbc.writeMem(0x38b3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x404a);
        EXPECT(gbc.pc(), 0x38b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0051
        gbc.setState(0x51b8, 0x6a86, 0xd0e0, 0x83f6, 0x88ff, 0xd02a, 0x1, 0x1);
        gbc.writeMem(0x51b8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6a86);
        EXPECT(gbc.pc(), 0x51b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0052
        gbc.setState(0x408, 0x80af, 0x4bc0, 0x9a70, 0x5be3, 0x9ddf, 0x0, 0x1);
        gbc.writeMem(0x408, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x80af);
        EXPECT(gbc.pc(), 0x409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0053
        gbc.setState(0x797e, 0x4ed9, 0xaf40, 0x56f2, 0xd992, 0x122e, 0x0, 0x0);
        gbc.writeMem(0x797e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4ed9);
        EXPECT(gbc.pc(), 0x797f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0054
        gbc.setState(0xdfd0, 0x5082, 0x9580, 0xf09b, 0x8a11, 0xa3eb, 0x0, 0x1);
        gbc.writeMem(0xdfd0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5082);
        EXPECT(gbc.pc(), 0xdfd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfd0), 0x4d);
        // 4D 0055
        gbc.setState(0x9bf2, 0xe35c, 0xc160, 0xf56c, 0xe82e, 0x34c7, 0x0, 0x0);
        gbc.writeMem(0x9bf2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe35c);
        EXPECT(gbc.pc(), 0x9bf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf2), 0x4d);
        // 4D 0056
        gbc.setState(0x2d44, 0x6bd3, 0xafc0, 0x80ce, 0xf5d9, 0x4aab, 0x0, 0x1);
        gbc.writeMem(0x2d44, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6bd3);
        EXPECT(gbc.pc(), 0x2d45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0057
        gbc.setState(0x25e9, 0x75c4, 0x1df0, 0x89d2, 0x28, 0x684d, 0x0, 0x0);
        gbc.writeMem(0x25e9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x75c4);
        EXPECT(gbc.pc(), 0x25ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0058
        gbc.setState(0x22af, 0x853e, 0xdb80, 0x815d, 0x58ea, 0x9a8a, 0x1, 0x1);
        gbc.writeMem(0x22af, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x853e);
        EXPECT(gbc.pc(), 0x22b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0059
        gbc.setState(0xa401, 0x6a9f, 0xcbf0, 0x942a, 0xb4fa, 0x4db4, 0x1, 0x0);
        gbc.writeMem(0xa401, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x6a9f);
        EXPECT(gbc.pc(), 0xa402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa401), 0x4d);
        // 4D 005A
        gbc.setState(0xa495, 0xa771, 0xad10, 0x89f4, 0x8310, 0xaa84, 0x0, 0x1);
        gbc.writeMem(0xa495, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa771);
        EXPECT(gbc.pc(), 0xa496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa495), 0x4d);
        // 4D 005C
        gbc.setState(0x84b3, 0xb28c, 0x5530, 0x91f1, 0xb5d9, 0xf4, 0x1, 0x1);
        gbc.writeMem(0x84b3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb28c);
        EXPECT(gbc.pc(), 0x84b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84b3), 0x4d);
        // 4D 005D
        gbc.setState(0x837f, 0x46e6, 0x1480, 0x86fc, 0x2f14, 0x6034, 0x1, 0x0);
        gbc.writeMem(0x837f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x46e6);
        EXPECT(gbc.pc(), 0x8380);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x837f), 0x4d);
        // 4D 005E
        gbc.setState(0xbd2a, 0x8f66, 0x81a0, 0x1e82, 0x2410, 0xa358, 0x1, 0x0);
        gbc.writeMem(0xbd2a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8f66);
        EXPECT(gbc.pc(), 0xbd2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd2a), 0x4d);
        // 4D 005F
        gbc.setState(0x510c, 0x789f, 0x9da0, 0x4bf4, 0x88e4, 0xf0c1, 0x0, 0x1);
        gbc.writeMem(0x510c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x789f);
        EXPECT(gbc.pc(), 0x510d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0060
        gbc.setState(0x3e98, 0xf61a, 0xcba0, 0xaee8, 0x6ebc, 0x4adc, 0x1, 0x1);
        gbc.writeMem(0x3e98, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf61a);
        EXPECT(gbc.pc(), 0x3e99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0061
        gbc.setState(0x33bc, 0xda45, 0xe5e0, 0xc2c3, 0x1eb9, 0xb432, 0x1, 0x0);
        gbc.writeMem(0x33bc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xda45);
        EXPECT(gbc.pc(), 0x33bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0062
        gbc.setState(0xe0d8, 0x8268, 0x79b0, 0xd0d, 0x4660, 0x7ef9, 0x0, 0x1);
        gbc.writeMem(0xe0d8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8268);
        EXPECT(gbc.pc(), 0xe0d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d8), 0x4d);
        // 4D 0063
        gbc.setState(0x2b37, 0xa79, 0xb340, 0xf0c2, 0x18be, 0xb68a, 0x0, 0x0);
        gbc.writeMem(0x2b37, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa79);
        EXPECT(gbc.pc(), 0x2b38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0064
        gbc.setState(0x64be, 0xe93f, 0x6ec0, 0x6c64, 0x69f, 0x39b5, 0x0, 0x1);
        gbc.writeMem(0x64be, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xe93f);
        EXPECT(gbc.pc(), 0x64bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0065
        gbc.setState(0x38c4, 0x7b21, 0x1a50, 0x59b, 0xa83e, 0xfb48, 0x1, 0x0);
        gbc.writeMem(0x38c4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x7b21);
        EXPECT(gbc.pc(), 0x38c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0066
        gbc.setState(0xc1ca, 0xedab, 0x6a0, 0xa436, 0xe4ad, 0x338d, 0x0, 0x0);
        gbc.writeMem(0xc1ca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xedab);
        EXPECT(gbc.pc(), 0xc1cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc1ca), 0x4d);
        // 4D 0067
        gbc.setState(0x50b2, 0x1908, 0x2290, 0xac8, 0x5a9a, 0x37cd, 0x0, 0x0);
        gbc.writeMem(0x50b2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x1908);
        EXPECT(gbc.pc(), 0x50b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0068
        gbc.setState(0x2a59, 0xd333, 0xe20, 0xfbf0, 0xa1cf, 0x9f50, 0x1, 0x0);
        gbc.writeMem(0x2a59, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd333);
        EXPECT(gbc.pc(), 0x2a5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0069
        gbc.setState(0x4b, 0x4469, 0x8560, 0xd22f, 0xe73e, 0xbb56, 0x1, 0x0);
        gbc.writeMem(0x4b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4469);
        EXPECT(gbc.pc(), 0x4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 006A
        gbc.setState(0x411d, 0x950f, 0xf6a0, 0xb364, 0xb2c4, 0x318f, 0x0, 0x1);
        gbc.writeMem(0x411d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x950f);
        EXPECT(gbc.pc(), 0x411e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 006B
        gbc.setState(0x99a3, 0xc797, 0x9df0, 0x81f1, 0xef97, 0x755a, 0x0, 0x0);
        gbc.writeMem(0x99a3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc797);
        EXPECT(gbc.pc(), 0x99a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99a3), 0x4d);
        // 4D 006C
        gbc.setState(0x14d7, 0x5cbc, 0x3540, 0x462c, 0x7ad7, 0x3575, 0x1, 0x1);
        gbc.writeMem(0x14d7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5cbc);
        EXPECT(gbc.pc(), 0x14d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 006D
        gbc.setState(0x3b91, 0xba7b, 0xcd80, 0x27d8, 0x6ca2, 0xcba3, 0x0, 0x0);
        gbc.writeMem(0x3b91, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xba7b);
        EXPECT(gbc.pc(), 0x3b92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 006E
        gbc.setState(0xafbe, 0xad09, 0x2770, 0x3da7, 0x5a9, 0x8746, 0x0, 0x0);
        gbc.writeMem(0xafbe, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xad09);
        EXPECT(gbc.pc(), 0xafbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbe), 0x4d);
        // 4D 006F
        gbc.setState(0x4e00, 0x3f30, 0x7980, 0x6b2e, 0x9ba9, 0x362e, 0x0, 0x0);
        gbc.writeMem(0x4e00, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3f30);
        EXPECT(gbc.pc(), 0x4e01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0070
        gbc.setState(0x9d8f, 0xd35c, 0x6e90, 0xd6b3, 0x93c9, 0x4576, 0x0, 0x0);
        gbc.writeMem(0x9d8f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd35c);
        EXPECT(gbc.pc(), 0x9d90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8f), 0x4d);
        // 4D 0071
        gbc.setState(0x6846, 0xfa88, 0xbff0, 0xe217, 0xaf79, 0x8a18, 0x0, 0x1);
        gbc.writeMem(0x6846, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xfa88);
        EXPECT(gbc.pc(), 0x6847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0072
        gbc.setState(0x2086, 0xa2dc, 0x4a50, 0xadd8, 0xe8da, 0x9a, 0x1, 0x0);
        gbc.writeMem(0x2086, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xa2dc);
        EXPECT(gbc.pc(), 0x2087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0073
        gbc.setState(0x6f67, 0x25e2, 0x2e90, 0x8145, 0x5392, 0xdc1d, 0x0, 0x1);
        gbc.writeMem(0x6f67, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x25e2);
        EXPECT(gbc.pc(), 0x6f68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0074
        gbc.setState(0x2f2e, 0xfc24, 0xf230, 0x577b, 0xdd44, 0xd0d2, 0x0, 0x1);
        gbc.writeMem(0x2f2e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xfc24);
        EXPECT(gbc.pc(), 0x2f2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0075
        gbc.setState(0xa766, 0x4b33, 0xe570, 0x72da, 0x9e3f, 0xfc05, 0x0, 0x0);
        gbc.writeMem(0xa766, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4b33);
        EXPECT(gbc.pc(), 0xa767);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa766), 0x4d);
        // 4D 0076
        gbc.setState(0x243b, 0x574, 0x8f50, 0xe8ef, 0xc2ab, 0xea31, 0x1, 0x1);
        gbc.writeMem(0x243b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x574);
        EXPECT(gbc.pc(), 0x243c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0077
        gbc.setState(0x5d4d, 0x31e, 0xf9b0, 0x412, 0xa3df, 0xf77, 0x0, 0x0);
        gbc.writeMem(0x5d4d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x31e);
        EXPECT(gbc.pc(), 0x5d4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0078
        gbc.setState(0x39eb, 0x2886, 0xa4b0, 0x55f4, 0x79d, 0x2c0d, 0x1, 0x0);
        gbc.writeMem(0x39eb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x2886);
        EXPECT(gbc.pc(), 0x39ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0079
        gbc.setState(0x4723, 0x2894, 0x2cf0, 0xd967, 0x6f1e, 0xd8df, 0x1, 0x1);
        gbc.writeMem(0x4723, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x2894);
        EXPECT(gbc.pc(), 0x4724);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 007A
        gbc.setState(0xea40, 0x6ccf, 0x8320, 0xd451, 0x6962, 0x476e, 0x1, 0x0);
        gbc.writeMem(0xea40, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6ccf);
        EXPECT(gbc.pc(), 0xea41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea40), 0x4d);
        // 4D 007B
        gbc.setState(0x99bb, 0x2317, 0x14e0, 0x72d7, 0xa9cf, 0xba72, 0x0, 0x1);
        gbc.writeMem(0x99bb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2317);
        EXPECT(gbc.pc(), 0x99bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99bb), 0x4d);
        // 4D 007D
        gbc.setState(0xb91d, 0x4221, 0xcf50, 0x7fa2, 0x1651, 0xa99a, 0x1, 0x1);
        gbc.writeMem(0xb91d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4221);
        EXPECT(gbc.pc(), 0xb91e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb91d), 0x4d);
        // 4D 007E
        gbc.setState(0x8599, 0xc928, 0x6210, 0x685e, 0x11e8, 0xae02, 0x0, 0x0);
        gbc.writeMem(0x8599, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc928);
        EXPECT(gbc.pc(), 0x859a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8599), 0x4d);
        // 4D 007F
        gbc.setState(0xe6cc, 0x8967, 0x9050, 0xff49, 0x8d03, 0xda34, 0x1, 0x0);
        gbc.writeMem(0xe6cc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8967);
        EXPECT(gbc.pc(), 0xe6cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6cc), 0x4d);
        // 4D 0080
        gbc.setState(0xcfe7, 0xea57, 0xd680, 0xc30c, 0xafe6, 0x6a5e, 0x1, 0x0);
        gbc.writeMem(0xcfe7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xea57);
        EXPECT(gbc.pc(), 0xcfe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfe7), 0x4d);
        // 4D 0081
        gbc.setState(0x392b, 0xfbc, 0x9bf0, 0xfdb0, 0x8354, 0x18ea, 0x1, 0x0);
        gbc.writeMem(0x392b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xfbc);
        EXPECT(gbc.pc(), 0x392c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0082
        gbc.setState(0x4154, 0x5ec8, 0x24b0, 0x5ba, 0x77d8, 0xee5e, 0x0, 0x1);
        gbc.writeMem(0x4154, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x5ec8);
        EXPECT(gbc.pc(), 0x4155);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0083
        gbc.setState(0x1d67, 0xd61f, 0xedf0, 0x35cf, 0xff1, 0xbbbd, 0x0, 0x0);
        gbc.writeMem(0x1d67, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd61f);
        EXPECT(gbc.pc(), 0x1d68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0084
        gbc.setState(0x2436, 0x9517, 0xa020, 0xa2db, 0x7cf0, 0x77f8, 0x1, 0x0);
        gbc.writeMem(0x2436, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9517);
        EXPECT(gbc.pc(), 0x2437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0085
        gbc.setState(0x99ce, 0x8d2c, 0x2660, 0xccb0, 0xb785, 0x1352, 0x0, 0x0);
        gbc.writeMem(0x99ce, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8d2c);
        EXPECT(gbc.pc(), 0x99cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ce), 0x4d);
        // 4D 0086
        gbc.setState(0x3cee, 0x4745, 0x4f60, 0xd713, 0x4fbf, 0x6c95, 0x0, 0x0);
        gbc.writeMem(0x3cee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4745);
        EXPECT(gbc.pc(), 0x3cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0087
        gbc.setState(0x8e2a, 0x4cf9, 0x8620, 0x1cda, 0xd83b, 0x1d92, 0x0, 0x0);
        gbc.writeMem(0x8e2a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4cf9);
        EXPECT(gbc.pc(), 0x8e2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2a), 0x4d);
        // 4D 0088
        gbc.setState(0x69ae, 0x586b, 0xa6d0, 0xdfb1, 0x84f0, 0x9a5d, 0x0, 0x0);
        gbc.writeMem(0x69ae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x586b);
        EXPECT(gbc.pc(), 0x69af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0089
        gbc.setState(0x36f5, 0x899a, 0x2570, 0x9fb0, 0xaf68, 0x86cc, 0x1, 0x0);
        gbc.writeMem(0x36f5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x899a);
        EXPECT(gbc.pc(), 0x36f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 008A
        gbc.setState(0x51ca, 0x371c, 0xed70, 0x1071, 0xc7a, 0xdac4, 0x1, 0x1);
        gbc.writeMem(0x51ca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x371c);
        EXPECT(gbc.pc(), 0x51cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 008B
        gbc.setState(0xbf65, 0x458d, 0x42c0, 0x5bfd, 0xca9a, 0x4839, 0x1, 0x0);
        gbc.writeMem(0xbf65, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x458d);
        EXPECT(gbc.pc(), 0xbf66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf65), 0x4d);
        // 4D 008C
        gbc.setState(0x6863, 0x9982, 0xcfa0, 0x4923, 0x354b, 0x88e7, 0x1, 0x0);
        gbc.writeMem(0x6863, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x9982);
        EXPECT(gbc.pc(), 0x6864);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 008D
        gbc.setState(0x8bcc, 0xf35e, 0x3c90, 0x2cef, 0xa80e, 0xd346, 0x1, 0x1);
        gbc.writeMem(0x8bcc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf35e);
        EXPECT(gbc.pc(), 0x8bcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bcc), 0x4d);
        // 4D 008E
        gbc.setState(0x86db, 0x2c50, 0x7fc0, 0x6bf2, 0x421c, 0xab40, 0x0, 0x1);
        gbc.writeMem(0x86db, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2c50);
        EXPECT(gbc.pc(), 0x86dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86db), 0x4d);
        // 4D 008F
        gbc.setState(0x5a06, 0x62e7, 0xffd0, 0xde8c, 0x9495, 0x8ea2, 0x0, 0x0);
        gbc.writeMem(0x5a06, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x62e7);
        EXPECT(gbc.pc(), 0x5a07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0090
        gbc.setState(0x113d, 0xf63d, 0x21b0, 0x4436, 0x6c4e, 0x2795, 0x0, 0x0);
        gbc.writeMem(0x113d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf63d);
        EXPECT(gbc.pc(), 0x113e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0091
        gbc.setState(0x76ab, 0x2814, 0x8910, 0xe29, 0x3912, 0xa6d1, 0x1, 0x1);
        gbc.writeMem(0x76ab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2814);
        EXPECT(gbc.pc(), 0x76ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0092
        gbc.setState(0xec4d, 0x56cf, 0x58c0, 0x3269, 0xac28, 0xc2e0, 0x0, 0x0);
        gbc.writeMem(0xec4d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x56cf);
        EXPECT(gbc.pc(), 0xec4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec4d), 0x4d);
        // 4D 0093
        gbc.setState(0xdad7, 0x1acf, 0x2f40, 0x9882, 0x19d4, 0x49f1, 0x0, 0x1);
        gbc.writeMem(0xdad7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1acf);
        EXPECT(gbc.pc(), 0xdad8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdad7), 0x4d);
        // 4D 0094
        gbc.setState(0x174b, 0x9fd5, 0xb890, 0x9d25, 0x5984, 0x6634, 0x1, 0x0);
        gbc.writeMem(0x174b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9fd5);
        EXPECT(gbc.pc(), 0x174c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0096
        gbc.setState(0xe91d, 0xfe44, 0x5bf0, 0x4046, 0xc6d, 0x6968, 0x1, 0x1);
        gbc.writeMem(0xe91d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xfe44);
        EXPECT(gbc.pc(), 0xe91e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe91d), 0x4d);
        // 4D 0097
        gbc.setState(0xab5, 0x5389, 0x91e0, 0xfdbf, 0x3bcf, 0x7979, 0x0, 0x0);
        gbc.writeMem(0xab5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5389);
        EXPECT(gbc.pc(), 0xab6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0098
        gbc.setState(0xad1, 0x4f66, 0xa6c0, 0x4e6, 0x2e40, 0x72fc, 0x0, 0x1);
        gbc.writeMem(0xad1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4f66);
        EXPECT(gbc.pc(), 0xad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0099
        gbc.setState(0x165a, 0x529b, 0xa930, 0xd35d, 0x7ff5, 0x4af9, 0x1, 0x0);
        gbc.writeMem(0x165a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x529b);
        EXPECT(gbc.pc(), 0x165b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 009B
        gbc.setState(0xc635, 0xfa0a, 0x91d0, 0x2448, 0xe19a, 0x5bec, 0x1, 0x1);
        gbc.writeMem(0xc635, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfa0a);
        EXPECT(gbc.pc(), 0xc636);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc635), 0x4d);
        // 4D 009C
        gbc.setState(0x86dc, 0x1524, 0x6bd0, 0x92b4, 0xa591, 0x15e8, 0x0, 0x1);
        gbc.writeMem(0x86dc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1524);
        EXPECT(gbc.pc(), 0x86dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86dc), 0x4d);
        // 4D 009D
        gbc.setState(0x56dd, 0xdeab, 0x3380, 0x78ef, 0xb140, 0xdc6e, 0x0, 0x0);
        gbc.writeMem(0x56dd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdeab);
        EXPECT(gbc.pc(), 0x56de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 009E
        gbc.setState(0x182d, 0x4cf6, 0xf770, 0xb2ae, 0x66f0, 0xc21c, 0x0, 0x0);
        gbc.writeMem(0x182d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4cf6);
        EXPECT(gbc.pc(), 0x182e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 009F
        gbc.setState(0x840, 0x67, 0x5560, 0xf147, 0x954c, 0xe4ad, 0x0, 0x0);
        gbc.writeMem(0x840, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x67);
        EXPECT(gbc.pc(), 0x841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00A0
        gbc.setState(0x9cae, 0xfd2e, 0xfec0, 0xeba1, 0xcaf9, 0x2049, 0x1, 0x1);
        gbc.writeMem(0x9cae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xfd2e);
        EXPECT(gbc.pc(), 0x9caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cae), 0x4d);
        // 4D 00A1
        gbc.setState(0x190, 0x3e5c, 0xc8d0, 0x3822, 0x2bd3, 0x85c3, 0x1, 0x1);
        gbc.writeMem(0x190, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3e5c);
        EXPECT(gbc.pc(), 0x191);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00A2
        gbc.setState(0x4b5d, 0x669a, 0x76e0, 0x2e05, 0xd74e, 0xcf18, 0x0, 0x1);
        gbc.writeMem(0x4b5d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x669a);
        EXPECT(gbc.pc(), 0x4b5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00A3
        gbc.setState(0x6684, 0x349d, 0x1070, 0x79f7, 0xc903, 0xc1d4, 0x0, 0x1);
        gbc.writeMem(0x6684, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x349d);
        EXPECT(gbc.pc(), 0x6685);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00A4
        gbc.setState(0x1dee, 0xf71b, 0x80f0, 0x8258, 0x4681, 0xedfd, 0x0, 0x0);
        gbc.writeMem(0x1dee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf71b);
        EXPECT(gbc.pc(), 0x1def);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00A5
        gbc.setState(0x3ee9, 0x89e5, 0x97b0, 0x11bb, 0xc3cb, 0x50c8, 0x1, 0x0);
        gbc.writeMem(0x3ee9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x89e5);
        EXPECT(gbc.pc(), 0x3eea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00A6
        gbc.setState(0x758f, 0x48e0, 0x11f0, 0x5e23, 0xd490, 0x8cd7, 0x0, 0x0);
        gbc.writeMem(0x758f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x48e0);
        EXPECT(gbc.pc(), 0x7590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00A7
        gbc.setState(0x2276, 0x4f70, 0xaf00, 0xfbf7, 0xe278, 0xf23b, 0x0, 0x1);
        gbc.writeMem(0x2276, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4f70);
        EXPECT(gbc.pc(), 0x2277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00A8
        gbc.setState(0xc5b1, 0xecd3, 0xf9d0, 0x3978, 0x2ee2, 0x1563, 0x0, 0x1);
        gbc.writeMem(0xc5b1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xecd3);
        EXPECT(gbc.pc(), 0xc5b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b1), 0x4d);
        // 4D 00AA
        gbc.setState(0x9391, 0xc23c, 0x2210, 0xf29a, 0x78cf, 0x592c, 0x1, 0x1);
        gbc.writeMem(0x9391, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc23c);
        EXPECT(gbc.pc(), 0x9392);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9391), 0x4d);
        // 4D 00AB
        gbc.setState(0xda19, 0x842d, 0xbd00, 0xa837, 0xbda6, 0x3b17, 0x1, 0x1);
        gbc.writeMem(0xda19, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x842d);
        EXPECT(gbc.pc(), 0xda1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda19), 0x4d);
        // 4D 00AD
        gbc.setState(0x6683, 0x5322, 0xc930, 0xee0b, 0x8368, 0x8ad4, 0x1, 0x1);
        gbc.writeMem(0x6683, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5322);
        EXPECT(gbc.pc(), 0x6684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00AE
        gbc.setState(0xdeb8, 0x2250, 0x47b0, 0x62af, 0xd53d, 0x18d6, 0x1, 0x0);
        gbc.writeMem(0xdeb8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2250);
        EXPECT(gbc.pc(), 0xdeb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeb8), 0x4d);
        // 4D 00AF
        gbc.setState(0xba94, 0x83c0, 0xd8a0, 0x9b, 0x9f8c, 0xbccc, 0x1, 0x1);
        gbc.writeMem(0xba94, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x83c0);
        EXPECT(gbc.pc(), 0xba95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba94), 0x4d);
        // 4D 00B0
        gbc.setState(0x4a0b, 0x17a2, 0x2460, 0xdde8, 0x5089, 0xc13e, 0x0, 0x1);
        gbc.writeMem(0x4a0b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x17a2);
        EXPECT(gbc.pc(), 0x4a0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00B1
        gbc.setState(0xdc85, 0xb901, 0x17c0, 0xba63, 0xe64b, 0xb1b1, 0x0, 0x1);
        gbc.writeMem(0xdc85, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb901);
        EXPECT(gbc.pc(), 0xdc86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc85), 0x4d);
        // 4D 00B2
        gbc.setState(0xc92e, 0x2fdd, 0xaad0, 0x7daf, 0x64b, 0x6f5, 0x0, 0x1);
        gbc.writeMem(0xc92e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2fdd);
        EXPECT(gbc.pc(), 0xc92f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc92e), 0x4d);
        // 4D 00B3
        gbc.setState(0x18d5, 0xf1c1, 0xf820, 0x3cfc, 0x19d, 0xda61, 0x0, 0x0);
        gbc.writeMem(0x18d5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf1c1);
        EXPECT(gbc.pc(), 0x18d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00B4
        gbc.setState(0x1bc3, 0x9254, 0xfbd0, 0xe75c, 0xe78b, 0xe857, 0x0, 0x0);
        gbc.writeMem(0x1bc3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9254);
        EXPECT(gbc.pc(), 0x1bc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00B5
        gbc.setState(0xdfd8, 0x13c, 0xbd10, 0x89c2, 0x7fb2, 0xe807, 0x0, 0x0);
        gbc.writeMem(0xdfd8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x13c);
        EXPECT(gbc.pc(), 0xdfd9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd8), 0x4d);
        // 4D 00B6
        gbc.setState(0x503c, 0x5a3f, 0x6d30, 0x4e96, 0x430e, 0xecc9, 0x1, 0x0);
        gbc.writeMem(0x503c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x5a3f);
        EXPECT(gbc.pc(), 0x503d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00B7
        gbc.setState(0xc16f, 0x5fa, 0x5460, 0xa046, 0xa0e4, 0x50f9, 0x0, 0x1);
        gbc.writeMem(0xc16f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x5fa);
        EXPECT(gbc.pc(), 0xc170);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16f), 0x4d);
        // 4D 00B9
        gbc.setState(0x2b76, 0xdee2, 0xcb30, 0xf6e4, 0x3009, 0x75ed, 0x1, 0x0);
        gbc.writeMem(0x2b76, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdee2);
        EXPECT(gbc.pc(), 0x2b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00BA
        gbc.setState(0x524, 0x52a4, 0xdb0, 0xb7db, 0x387f, 0x6a34, 0x1, 0x1);
        gbc.writeMem(0x524, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x52a4);
        EXPECT(gbc.pc(), 0x525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00BB
        gbc.setState(0x231c, 0xf0b9, 0xbbe0, 0x363c, 0x52b2, 0x1e8e, 0x0, 0x1);
        gbc.writeMem(0x231c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xf0b9);
        EXPECT(gbc.pc(), 0x231d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00BC
        gbc.setState(0x1795, 0x5a69, 0xbf80, 0xc259, 0xa66d, 0xa052, 0x0, 0x1);
        gbc.writeMem(0x1795, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5a69);
        EXPECT(gbc.pc(), 0x1796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00BD
        gbc.setState(0xae91, 0xd9bc, 0x4f80, 0x22f1, 0x47de, 0x1bc7, 0x1, 0x0);
        gbc.writeMem(0xae91, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd9bc);
        EXPECT(gbc.pc(), 0xae92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae91), 0x4d);
        // 4D 00BE
        gbc.setState(0x2d00, 0x2167, 0x4770, 0xbdcc, 0x24d, 0xce57, 0x0, 0x1);
        gbc.writeMem(0x2d00, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2167);
        EXPECT(gbc.pc(), 0x2d01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00BF
        gbc.setState(0x38c2, 0x9d52, 0x5120, 0xc32f, 0x8e46, 0x61f0, 0x1, 0x0);
        gbc.writeMem(0x38c2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x9d52);
        EXPECT(gbc.pc(), 0x38c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C0
        gbc.setState(0xe8d3, 0x60b2, 0xb9a0, 0xb8f5, 0x1ba6, 0x685d, 0x1, 0x0);
        gbc.writeMem(0xe8d3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x60b2);
        EXPECT(gbc.pc(), 0xe8d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d3), 0x4d);
        // 4D 00C1
        gbc.setState(0xd8f9, 0x72e3, 0xcc10, 0x3eb0, 0x1d51, 0x5599, 0x1, 0x0);
        gbc.writeMem(0xd8f9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x72e3);
        EXPECT(gbc.pc(), 0xd8fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8f9), 0x4d);
        // 4D 00C2
        gbc.setState(0xab32, 0x94d0, 0xdc60, 0x33b6, 0xa026, 0x79e2, 0x0, 0x1);
        gbc.writeMem(0xab32, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x94d0);
        EXPECT(gbc.pc(), 0xab33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab32), 0x4d);
        // 4D 00C3
        gbc.setState(0x62fa, 0xc0f0, 0xa3e0, 0x5b58, 0x5c0f, 0x24f3, 0x1, 0x0);
        gbc.writeMem(0x62fa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc0f0);
        EXPECT(gbc.pc(), 0x62fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C4
        gbc.setState(0x675d, 0xeb99, 0xb6e0, 0x7ea4, 0xb3c5, 0xecff, 0x0, 0x0);
        gbc.writeMem(0x675d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xeb99);
        EXPECT(gbc.pc(), 0x675e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C5
        gbc.setState(0x364b, 0xd5be, 0x8340, 0xdd6, 0x3121, 0xba82, 0x0, 0x1);
        gbc.writeMem(0x364b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xd5be);
        EXPECT(gbc.pc(), 0x364c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C6
        gbc.setState(0xc65, 0x8adc, 0x3940, 0x7cad, 0xeb78, 0x46ea, 0x1, 0x0);
        gbc.writeMem(0xc65, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8adc);
        EXPECT(gbc.pc(), 0xc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C7
        gbc.setState(0x3259, 0x8ca3, 0xa8d0, 0x2db6, 0xcb53, 0x4bab, 0x1, 0x0);
        gbc.writeMem(0x3259, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8ca3);
        EXPECT(gbc.pc(), 0x325a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00C8
        gbc.setState(0x2be9, 0x1e5e, 0x8320, 0x2fb9, 0xc41c, 0xe4aa, 0x0, 0x0);
        gbc.writeMem(0x2be9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x1e5e);
        EXPECT(gbc.pc(), 0x2bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00C9
        gbc.setState(0xd5e1, 0x7eb2, 0x4c80, 0x2b2d, 0x75f0, 0xc530, 0x0, 0x1);
        gbc.writeMem(0xd5e1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x7eb2);
        EXPECT(gbc.pc(), 0xd5e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e1), 0x4d);
        // 4D 00CA
        gbc.setState(0x2895, 0x4df2, 0x4960, 0x13a3, 0x58b2, 0x363, 0x0, 0x1);
        gbc.writeMem(0x2895, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x4df2);
        EXPECT(gbc.pc(), 0x2896);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00CB
        gbc.setState(0x9ecc, 0x228d, 0xeae0, 0x6bb7, 0xf79c, 0xba9f, 0x0, 0x0);
        gbc.writeMem(0x9ecc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x228d);
        EXPECT(gbc.pc(), 0x9ecd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ecc), 0x4d);
        // 4D 00CC
        gbc.setState(0xd7a1, 0xa3b6, 0xefb0, 0x2fd2, 0x553e, 0xeb35, 0x0, 0x1);
        gbc.writeMem(0xd7a1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xa3b6);
        EXPECT(gbc.pc(), 0xd7a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7a1), 0x4d);
        // 4D 00CD
        gbc.setState(0xaf54, 0x234, 0x3480, 0xfa5, 0x7d74, 0x974, 0x0, 0x0);
        gbc.writeMem(0xaf54, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x234);
        EXPECT(gbc.pc(), 0xaf55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf54), 0x4d);
        // 4D 00CE
        gbc.setState(0x7347, 0x3670, 0x3bb0, 0xe816, 0xd2aa, 0xed35, 0x1, 0x1);
        gbc.writeMem(0x7347, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3670);
        EXPECT(gbc.pc(), 0x7348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00CF
        gbc.setState(0xeee0, 0x2c6, 0x5ec0, 0x8f39, 0x1802, 0xb50e, 0x0, 0x0);
        gbc.writeMem(0xeee0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2c6);
        EXPECT(gbc.pc(), 0xeee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeee0), 0x4d);
        // 4D 00D0
        gbc.setState(0xdb25, 0x7dbf, 0x46f0, 0x944f, 0x374c, 0x5afd, 0x1, 0x0);
        gbc.writeMem(0xdb25, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7dbf);
        EXPECT(gbc.pc(), 0xdb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb25), 0x4d);
        // 4D 00D1
        gbc.setState(0xde77, 0x76db, 0xf7e0, 0x452d, 0xc2ed, 0xdbb2, 0x0, 0x1);
        gbc.writeMem(0xde77, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x76db);
        EXPECT(gbc.pc(), 0xde78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde77), 0x4d);
        // 4D 00D2
        gbc.setState(0x8de7, 0xd4aa, 0x1c20, 0x4a1c, 0xdc0b, 0x7794, 0x1, 0x1);
        gbc.writeMem(0x8de7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xd4aa);
        EXPECT(gbc.pc(), 0x8de8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8de7), 0x4d);
        // 4D 00D3
        gbc.setState(0xe917, 0xdb53, 0x240, 0x872, 0x3200, 0xf989, 0x0, 0x0);
        gbc.writeMem(0xe917, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xdb53);
        EXPECT(gbc.pc(), 0xe918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe917), 0x4d);
        // 4D 00D4
        gbc.setState(0x37cc, 0x88da, 0xc4e0, 0x7586, 0xfb19, 0xbe67, 0x0, 0x1);
        gbc.writeMem(0x37cc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x88da);
        EXPECT(gbc.pc(), 0x37cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00D5
        gbc.setState(0xd20e, 0xaca9, 0x22f0, 0xf457, 0xa89, 0x2f40, 0x0, 0x1);
        gbc.writeMem(0xd20e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xaca9);
        EXPECT(gbc.pc(), 0xd20f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd20e), 0x4d);
        // 4D 00D6
        gbc.setState(0xabb6, 0x7319, 0xdbf0, 0x3aaa, 0x3f0c, 0x89f0, 0x1, 0x1);
        gbc.writeMem(0xabb6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7319);
        EXPECT(gbc.pc(), 0xabb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabb6), 0x4d);
        // 4D 00D7
        gbc.setState(0x9566, 0xe69b, 0x6600, 0x35f5, 0xccf8, 0xd3d1, 0x1, 0x0);
        gbc.writeMem(0x9566, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xe69b);
        EXPECT(gbc.pc(), 0x9567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9566), 0x4d);
        // 4D 00D8
        gbc.setState(0x99e5, 0xcd59, 0xed80, 0xee23, 0x786c, 0xe069, 0x1, 0x0);
        gbc.writeMem(0x99e5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcd59);
        EXPECT(gbc.pc(), 0x99e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e5), 0x4d);
        // 4D 00D9
        gbc.setState(0xcee8, 0x7d7a, 0x12c0, 0x60e8, 0xec3e, 0x28e2, 0x0, 0x0);
        gbc.writeMem(0xcee8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7d7a);
        EXPECT(gbc.pc(), 0xcee9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcee8), 0x4d);
        // 4D 00DA
        gbc.setState(0x3bb9, 0x4cc4, 0x2720, 0x1d22, 0x2a57, 0xf5a, 0x1, 0x1);
        gbc.writeMem(0x3bb9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4cc4);
        EXPECT(gbc.pc(), 0x3bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00DB
        gbc.setState(0xa638, 0x46f4, 0xfa50, 0x634b, 0xacba, 0xa46d, 0x0, 0x1);
        gbc.writeMem(0xa638, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x46f4);
        EXPECT(gbc.pc(), 0xa639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa638), 0x4d);
        // 4D 00DC
        gbc.setState(0x8c6, 0xa90f, 0x73e0, 0xf285, 0x6522, 0x8531, 0x0, 0x0);
        gbc.writeMem(0x8c6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa90f);
        EXPECT(gbc.pc(), 0x8c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00DD
        gbc.setState(0x3262, 0xc89b, 0x8500, 0x99c7, 0x18a0, 0x84d7, 0x0, 0x0);
        gbc.writeMem(0x3262, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc89b);
        EXPECT(gbc.pc(), 0x3263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00DF
        gbc.setState(0x2b08, 0xcdce, 0x69c0, 0xfd46, 0xc230, 0x95ef, 0x1, 0x1);
        gbc.writeMem(0x2b08, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xcdce);
        EXPECT(gbc.pc(), 0x2b09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00E0
        gbc.setState(0xcf03, 0x488b, 0x2420, 0x5aad, 0x6897, 0xbff5, 0x1, 0x1);
        gbc.writeMem(0xcf03, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x488b);
        EXPECT(gbc.pc(), 0xcf04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf03), 0x4d);
        // 4D 00E1
        gbc.setState(0xcda0, 0xc873, 0x3b30, 0x7bb9, 0x626c, 0x240d, 0x1, 0x1);
        gbc.writeMem(0xcda0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc873);
        EXPECT(gbc.pc(), 0xcda1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda0), 0x4d);
        // 4D 00E2
        gbc.setState(0x1554, 0xddab, 0x70f0, 0x415a, 0xf0ae, 0xf806, 0x0, 0x1);
        gbc.writeMem(0x1554, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xddab);
        EXPECT(gbc.pc(), 0x1555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00E3
        gbc.setState(0x6df8, 0xd351, 0xdb0, 0xa8f2, 0xa5e4, 0x58eb, 0x1, 0x0);
        gbc.writeMem(0x6df8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd351);
        EXPECT(gbc.pc(), 0x6df9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00E4
        gbc.setState(0x5505, 0x5ff, 0x51c0, 0x300a, 0xedec, 0xedfb, 0x0, 0x0);
        gbc.writeMem(0x5505, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5ff);
        EXPECT(gbc.pc(), 0x5506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00E5
        gbc.setState(0x4505, 0x8bfe, 0x17e0, 0x12f, 0x8b, 0xf746, 0x1, 0x0);
        gbc.writeMem(0x4505, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x8bfe);
        EXPECT(gbc.pc(), 0x4506);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00E6
        gbc.setState(0x6bae, 0xd105, 0x8660, 0x4944, 0x1e8d, 0xa014, 0x1, 0x1);
        gbc.writeMem(0x6bae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd105);
        EXPECT(gbc.pc(), 0x6baf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00E7
        gbc.setState(0x1bf4, 0xff76, 0xd0a0, 0xe93f, 0xf445, 0xa03f, 0x1, 0x1);
        gbc.writeMem(0x1bf4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xff76);
        EXPECT(gbc.pc(), 0x1bf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00E8
        gbc.setState(0xb286, 0x3c83, 0xe3c0, 0xbcbf, 0xcec5, 0x60bd, 0x1, 0x1);
        gbc.writeMem(0xb286, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3c83);
        EXPECT(gbc.pc(), 0xb287);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb286), 0x4d);
        // 4D 00EA
        gbc.setState(0xac6d, 0x2f1a, 0xffc0, 0x8c08, 0xbbe5, 0xf3d8, 0x0, 0x0);
        gbc.writeMem(0xac6d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2f1a);
        EXPECT(gbc.pc(), 0xac6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac6d), 0x4d);
        // 4D 00EB
        gbc.setState(0x347e, 0x2cdc, 0xf1c0, 0xbcf3, 0xa772, 0xbc62, 0x0, 0x0);
        gbc.writeMem(0x347e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2cdc);
        EXPECT(gbc.pc(), 0x347f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00EC
        gbc.setState(0xe448, 0x4ed9, 0xea80, 0x1a5c, 0x6dd0, 0xc11a, 0x1, 0x0);
        gbc.writeMem(0xe448, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4ed9);
        EXPECT(gbc.pc(), 0xe449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe448), 0x4d);
        // 4D 00ED
        gbc.setState(0x7b64, 0x7532, 0xf660, 0xb3ef, 0x4e56, 0xf08d, 0x1, 0x1);
        gbc.writeMem(0x7b64, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x7532);
        EXPECT(gbc.pc(), 0x7b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00EE
        gbc.setState(0x3ca1, 0xc574, 0xc380, 0x887b, 0xd7d0, 0x2b0c, 0x1, 0x1);
        gbc.writeMem(0x3ca1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xc574);
        EXPECT(gbc.pc(), 0x3ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 00EF
        gbc.setState(0xddb5, 0xbbc1, 0x690, 0xd044, 0x8089, 0x29c4, 0x1, 0x0);
        gbc.writeMem(0xddb5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xbbc1);
        EXPECT(gbc.pc(), 0xddb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddb5), 0x4d);
        // 4D 00F0
        gbc.setState(0x33ca, 0xedad, 0x8220, 0xac8b, 0xc96a, 0xb6b4, 0x1, 0x0);
        gbc.writeMem(0x33ca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xedad);
        EXPECT(gbc.pc(), 0x33cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 00F1
        gbc.setState(0x517d, 0x6554, 0xf150, 0x6dee, 0x9f11, 0x5455, 0x0, 0x0);
        gbc.writeMem(0x517d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6554);
        EXPECT(gbc.pc(), 0x517e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00F2
        gbc.setState(0x70ef, 0x40b0, 0x3470, 0xf679, 0x911b, 0xef62, 0x1, 0x0);
        gbc.writeMem(0x70ef, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x40b0);
        EXPECT(gbc.pc(), 0x70f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00F3
        gbc.setState(0xcdf3, 0x9127, 0xedb0, 0x320d, 0xcb58, 0x430d, 0x0, 0x1);
        gbc.writeMem(0xcdf3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9127);
        EXPECT(gbc.pc(), 0xcdf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf3), 0x4d);
        // 4D 00F4
        gbc.setState(0x1b26, 0xcee7, 0x1050, 0xf7fe, 0x9356, 0xcd6f, 0x0, 0x1);
        gbc.writeMem(0x1b26, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcee7);
        EXPECT(gbc.pc(), 0x1b27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00F5
        gbc.setState(0xc6a3, 0x6a89, 0xbc90, 0xf116, 0x91f7, 0x2930, 0x1, 0x1);
        gbc.writeMem(0xc6a3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x6a89);
        EXPECT(gbc.pc(), 0xc6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6a3), 0x4d);
        // 4D 00F6
        gbc.setState(0x9925, 0xdea8, 0x1e90, 0xda6f, 0xc2d8, 0x4541, 0x0, 0x1);
        gbc.writeMem(0x9925, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xdea8);
        EXPECT(gbc.pc(), 0x9926);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9925), 0x4d);
        // 4D 00F7
        gbc.setState(0xde3e, 0x887e, 0xead0, 0x2920, 0x9598, 0xa79b, 0x1, 0x1);
        gbc.writeMem(0xde3e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x887e);
        EXPECT(gbc.pc(), 0xde3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde3e), 0x4d);
        // 4D 00F8
        gbc.setState(0x744b, 0x87d7, 0x4570, 0x52ef, 0x88ab, 0xb1e3, 0x0, 0x1);
        gbc.writeMem(0x744b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x87d7);
        EXPECT(gbc.pc(), 0x744c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00F9
        gbc.setState(0x2d6d, 0xeddf, 0x4130, 0x6e6a, 0xca99, 0x25d2, 0x1, 0x1);
        gbc.writeMem(0x2d6d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xeddf);
        EXPECT(gbc.pc(), 0x2d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 00FA
        gbc.setState(0x9006, 0xff5d, 0x3f40, 0xece0, 0x83d9, 0x8a17, 0x0, 0x0);
        gbc.writeMem(0x9006, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xff5d);
        EXPECT(gbc.pc(), 0x9007);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9006), 0x4d);
        // 4D 00FB
        gbc.setState(0x83b5, 0xca33, 0xf000, 0x7bb3, 0xcd7a, 0xb392, 0x1, 0x1);
        gbc.writeMem(0x83b5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xca33);
        EXPECT(gbc.pc(), 0x83b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83b5), 0x4d);
        // 4D 00FC
        gbc.setState(0xe11a, 0x1215, 0x9b40, 0xc3c2, 0xb1bd, 0x5808, 0x1, 0x0);
        gbc.writeMem(0xe11a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x1215);
        EXPECT(gbc.pc(), 0xe11b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe11a), 0x4d);
        // 4D 00FD
        gbc.setState(0x808a, 0x889e, 0x5960, 0xd47e, 0x9a71, 0x9176, 0x1, 0x1);
        gbc.writeMem(0x808a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x889e);
        EXPECT(gbc.pc(), 0x808b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x808a), 0x4d);
        // 4D 00FE
        gbc.setState(0xbb3, 0xe45e, 0x9590, 0xb3a6, 0x5602, 0x2d2d, 0x0, 0x1);
        gbc.writeMem(0xbb3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe45e);
        EXPECT(gbc.pc(), 0xbb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 00FF
        gbc.setState(0x140b, 0x7403, 0x2360, 0xba57, 0x35a7, 0x3982, 0x0, 0x0);
        gbc.writeMem(0x140b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7403);
        EXPECT(gbc.pc(), 0x140c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0100
        gbc.setState(0xce92, 0xdb71, 0xa770, 0x25f4, 0xbf25, 0xe390, 0x1, 0x1);
        gbc.writeMem(0xce92, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdb71);
        EXPECT(gbc.pc(), 0xce93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce92), 0x4d);
        // 4D 0101
        gbc.setState(0x2b07, 0xbaf6, 0x540, 0x45ba, 0x6d6a, 0xe146, 0x0, 0x0);
        gbc.writeMem(0x2b07, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbaf6);
        EXPECT(gbc.pc(), 0x2b08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0102
        gbc.setState(0xb4f6, 0xb21d, 0x4870, 0x9884, 0x14fc, 0xb3cf, 0x0, 0x1);
        gbc.writeMem(0xb4f6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb21d);
        EXPECT(gbc.pc(), 0xb4f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4f6), 0x4d);
        // 4D 0103
        gbc.setState(0xad52, 0xe783, 0x5dd0, 0x14c7, 0x815e, 0x953e, 0x1, 0x0);
        gbc.writeMem(0xad52, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xe783);
        EXPECT(gbc.pc(), 0xad53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad52), 0x4d);
        // 4D 0104
        gbc.setState(0xb1b8, 0x491a, 0x7000, 0x2792, 0x3f20, 0x3bd0, 0x1, 0x0);
        gbc.writeMem(0xb1b8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x491a);
        EXPECT(gbc.pc(), 0xb1b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1b8), 0x4d);
        // 4D 0106
        gbc.setState(0x7dda, 0xcfb7, 0x4200, 0x9f01, 0x5edd, 0x7eb1, 0x0, 0x1);
        gbc.writeMem(0x7dda, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xcfb7);
        EXPECT(gbc.pc(), 0x7ddb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0107
        gbc.setState(0x7e73, 0x62ca, 0xc490, 0x77c7, 0x5278, 0x702d, 0x1, 0x1);
        gbc.writeMem(0x7e73, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x62ca);
        EXPECT(gbc.pc(), 0x7e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0108
        gbc.setState(0x3631, 0x1a8d, 0x9f70, 0xc9ab, 0x4e66, 0xe29c, 0x0, 0x1);
        gbc.writeMem(0x3631, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1a8d);
        EXPECT(gbc.pc(), 0x3632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0109
        gbc.setState(0x99f, 0x29aa, 0xe3d0, 0xccd6, 0x15f3, 0xee9e, 0x1, 0x0);
        gbc.writeMem(0x99f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x29aa);
        EXPECT(gbc.pc(), 0x9a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 010A
        gbc.setState(0xa078, 0x96ab, 0x4df0, 0x24c9, 0x242a, 0x68f4, 0x1, 0x1);
        gbc.writeMem(0xa078, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x96ab);
        EXPECT(gbc.pc(), 0xa079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa078), 0x4d);
        // 4D 010B
        gbc.setState(0x54dd, 0xbb5d, 0x6f0, 0xabc4, 0xbe47, 0x250c, 0x0, 0x1);
        gbc.writeMem(0x54dd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xbb5d);
        EXPECT(gbc.pc(), 0x54de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 010C
        gbc.setState(0x3417, 0x3b77, 0xa690, 0x4767, 0xf7d6, 0x9b9d, 0x1, 0x1);
        gbc.writeMem(0x3417, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3b77);
        EXPECT(gbc.pc(), 0x3418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 010D
        gbc.setState(0x8d52, 0x7bca, 0x4c60, 0x3945, 0x36c6, 0x2c, 0x0, 0x1);
        gbc.writeMem(0x8d52, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7bca);
        EXPECT(gbc.pc(), 0x8d53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d52), 0x4d);
        // 4D 010E
        gbc.setState(0x2320, 0xd89d, 0xfd60, 0xa485, 0x6a9a, 0xf5be, 0x0, 0x0);
        gbc.writeMem(0x2320, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd89d);
        EXPECT(gbc.pc(), 0x2321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 010F
        gbc.setState(0x49cb, 0x1f04, 0xbe20, 0x7454, 0xe91, 0x8a02, 0x1, 0x1);
        gbc.writeMem(0x49cb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1f04);
        EXPECT(gbc.pc(), 0x49cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0110
        gbc.setState(0x3d08, 0x2d58, 0x4d60, 0xf79c, 0xc2b8, 0xcac3, 0x1, 0x1);
        gbc.writeMem(0x3d08, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2d58);
        EXPECT(gbc.pc(), 0x3d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0111
        gbc.setState(0x520d, 0x16b4, 0x1840, 0xb7b7, 0x4f68, 0x6af4, 0x1, 0x0);
        gbc.writeMem(0x520d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x16b4);
        EXPECT(gbc.pc(), 0x520e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0112
        gbc.setState(0x703, 0xd603, 0xeb0, 0x968a, 0xd35f, 0x35e8, 0x0, 0x0);
        gbc.writeMem(0x703, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd603);
        EXPECT(gbc.pc(), 0x704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0113
        gbc.setState(0xcfc5, 0x9fac, 0xdc60, 0x4fb2, 0xa2e3, 0xcd3d, 0x0, 0x1);
        gbc.writeMem(0xcfc5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9fac);
        EXPECT(gbc.pc(), 0xcfc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc5), 0x4d);
        // 4D 0114
        gbc.setState(0x9075, 0x2fe1, 0x8c60, 0x7424, 0x555e, 0x159f, 0x0, 0x1);
        gbc.writeMem(0x9075, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2fe1);
        EXPECT(gbc.pc(), 0x9076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9075), 0x4d);
        // 4D 0115
        gbc.setState(0xc805, 0x8cc1, 0x9280, 0xf08d, 0x374, 0x362f, 0x0, 0x0);
        gbc.writeMem(0xc805, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x8cc1);
        EXPECT(gbc.pc(), 0xc806);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc805), 0x4d);
        // 4D 0116
        gbc.setState(0xc6d8, 0x2a74, 0xbfd0, 0x51b8, 0xfd9a, 0xc496, 0x1, 0x0);
        gbc.writeMem(0xc6d8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2a74);
        EXPECT(gbc.pc(), 0xc6d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6d8), 0x4d);
        // 4D 0117
        gbc.setState(0xa55, 0x55e9, 0x76a0, 0xd549, 0x9f63, 0x1436, 0x0, 0x0);
        gbc.writeMem(0xa55, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x55e9);
        EXPECT(gbc.pc(), 0xa56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0118
        gbc.setState(0x50be, 0x75a6, 0x9be0, 0x21e7, 0x7bd, 0x945b, 0x0, 0x1);
        gbc.writeMem(0x50be, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x75a6);
        EXPECT(gbc.pc(), 0x50bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0119
        gbc.setState(0x768e, 0x803a, 0xe4f0, 0xeea5, 0xf6c5, 0x92e7, 0x0, 0x1);
        gbc.writeMem(0x768e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x803a);
        EXPECT(gbc.pc(), 0x768f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 011A
        gbc.setState(0x4ac0, 0xed19, 0xecc0, 0xfc3, 0xa006, 0x5101, 0x0, 0x1);
        gbc.writeMem(0x4ac0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xed19);
        EXPECT(gbc.pc(), 0x4ac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 011C
        gbc.setState(0xcc2f, 0x4979, 0xce20, 0xfa90, 0x7051, 0x5d72, 0x1, 0x0);
        gbc.writeMem(0xcc2f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x4979);
        EXPECT(gbc.pc(), 0xcc30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2f), 0x4d);
        // 4D 011D
        gbc.setState(0xbe8e, 0xc70c, 0xc8a0, 0x8e62, 0x9529, 0x409d, 0x1, 0x0);
        gbc.writeMem(0xbe8e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc70c);
        EXPECT(gbc.pc(), 0xbe8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe8e), 0x4d);
        // 4D 011E
        gbc.setState(0xde1a, 0x2148, 0x1a40, 0xd35c, 0xb989, 0x41e6, 0x1, 0x0);
        gbc.writeMem(0xde1a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x2148);
        EXPECT(gbc.pc(), 0xde1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde1a), 0x4d);
        // 4D 011F
        gbc.setState(0x789f, 0x5e0a, 0x8c10, 0x600f, 0x30b4, 0x14c2, 0x1, 0x0);
        gbc.writeMem(0x789f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5e0a);
        EXPECT(gbc.pc(), 0x78a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0120
        gbc.setState(0xa87, 0x24d8, 0x8280, 0xc9a9, 0xc31e, 0x4785, 0x1, 0x1);
        gbc.writeMem(0xa87, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x24d8);
        EXPECT(gbc.pc(), 0xa88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0121
        gbc.setState(0x905e, 0xe313, 0xec60, 0x4b8e, 0x85f2, 0xfc14, 0x1, 0x0);
        gbc.writeMem(0x905e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xe313);
        EXPECT(gbc.pc(), 0x905f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x905e), 0x4d);
        // 4D 0122
        gbc.setState(0xa08, 0xdd1d, 0xbb00, 0x9d9c, 0x7ae6, 0xf0aa, 0x1, 0x0);
        gbc.writeMem(0xa08, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdd1d);
        EXPECT(gbc.pc(), 0xa09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0123
        gbc.setState(0xe99b, 0xff56, 0xa8e0, 0xb3ee, 0xe6b7, 0xb993, 0x0, 0x1);
        gbc.writeMem(0xe99b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xff56);
        EXPECT(gbc.pc(), 0xe99c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe99b), 0x4d);
        // 4D 0124
        gbc.setState(0xcfa7, 0xe051, 0xe080, 0x3b4f, 0xf9c9, 0x4192, 0x0, 0x1);
        gbc.writeMem(0xcfa7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe051);
        EXPECT(gbc.pc(), 0xcfa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfa7), 0x4d);
        // 4D 0127
        gbc.setState(0xae3f, 0xb4d8, 0x5e00, 0x5891, 0xbe8c, 0x3c69, 0x1, 0x1);
        gbc.writeMem(0xae3f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb4d8);
        EXPECT(gbc.pc(), 0xae40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae3f), 0x4d);
        // 4D 0128
        gbc.setState(0x14f7, 0xa9f4, 0x8510, 0x2dc2, 0x33fd, 0xd1bf, 0x1, 0x0);
        gbc.writeMem(0x14f7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xa9f4);
        EXPECT(gbc.pc(), 0x14f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0129
        gbc.setState(0x4412, 0x482b, 0xc6c0, 0x4ea8, 0x6feb, 0x5c74, 0x0, 0x1);
        gbc.writeMem(0x4412, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x482b);
        EXPECT(gbc.pc(), 0x4413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 012A
        gbc.setState(0x5e6b, 0x6ee3, 0x1fd0, 0x6003, 0xf138, 0x3d7, 0x1, 0x0);
        gbc.writeMem(0x5e6b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x6ee3);
        EXPECT(gbc.pc(), 0x5e6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 012B
        gbc.setState(0x1eab, 0x5881, 0x3070, 0x535a, 0x3814, 0xb122, 0x1, 0x0);
        gbc.writeMem(0x1eab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x5881);
        EXPECT(gbc.pc(), 0x1eac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 012C
        gbc.setState(0x9b8d, 0x15d2, 0x8d60, 0xba45, 0xe7d0, 0x2c55, 0x0, 0x1);
        gbc.writeMem(0x9b8d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x15d2);
        EXPECT(gbc.pc(), 0x9b8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b8d), 0x4d);
        // 4D 012D
        gbc.setState(0x4d64, 0x6617, 0x700, 0x5af5, 0xf5a, 0x2f27, 0x0, 0x0);
        gbc.writeMem(0x4d64, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6617);
        EXPECT(gbc.pc(), 0x4d65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 012E
        gbc.setState(0x129e, 0x5ac1, 0xd0a0, 0xfd57, 0xfa82, 0x2310, 0x0, 0x1);
        gbc.writeMem(0x129e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5ac1);
        EXPECT(gbc.pc(), 0x129f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 012F
        gbc.setState(0x11f0, 0x1986, 0xce20, 0xae8d, 0xff89, 0xd3fb, 0x0, 0x0);
        gbc.writeMem(0x11f0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1986);
        EXPECT(gbc.pc(), 0x11f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0130
        gbc.setState(0x7d05, 0x97e, 0x10f0, 0x84f7, 0xa2a4, 0xe204, 0x1, 0x0);
        gbc.writeMem(0x7d05, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x97e);
        EXPECT(gbc.pc(), 0x7d06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0131
        gbc.setState(0x6058, 0x1c76, 0xe540, 0xb06a, 0xad4d, 0x8f67, 0x0, 0x0);
        gbc.writeMem(0x6058, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x1c76);
        EXPECT(gbc.pc(), 0x6059);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0132
        gbc.setState(0x6f55, 0xf099, 0x6d90, 0x1d9c, 0x7604, 0x6a50, 0x1, 0x0);
        gbc.writeMem(0x6f55, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xf099);
        EXPECT(gbc.pc(), 0x6f56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0133
        gbc.setState(0xd5e, 0xf89c, 0x6620, 0xfa9b, 0x9bd6, 0x2bac, 0x0, 0x1);
        gbc.writeMem(0xd5e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf89c);
        EXPECT(gbc.pc(), 0xd5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0134
        gbc.setState(0x846c, 0xcabc, 0x4eb0, 0x2949, 0x5050, 0x7e25, 0x0, 0x0);
        gbc.writeMem(0x846c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xcabc);
        EXPECT(gbc.pc(), 0x846d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x846c), 0x4d);
        // 4D 0135
        gbc.setState(0xb392, 0xa97d, 0x8af0, 0x61e7, 0x4572, 0xdf30, 0x0, 0x1);
        gbc.writeMem(0xb392, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xa97d);
        EXPECT(gbc.pc(), 0xb393);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb392), 0x4d);
        // 4D 0136
        gbc.setState(0x19a3, 0x3ab4, 0x310, 0x74c2, 0x5194, 0x9159, 0x1, 0x1);
        gbc.writeMem(0x19a3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x3ab4);
        EXPECT(gbc.pc(), 0x19a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0137
        gbc.setState(0x9f56, 0xfe18, 0x770, 0x5671, 0xb2c2, 0x54be, 0x1, 0x1);
        gbc.writeMem(0x9f56, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xfe18);
        EXPECT(gbc.pc(), 0x9f57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f56), 0x4d);
        // 4D 0139
        gbc.setState(0xeab3, 0x1aed, 0x5e80, 0xe4b, 0x7b4e, 0x9ca9, 0x0, 0x1);
        gbc.writeMem(0xeab3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1aed);
        EXPECT(gbc.pc(), 0xeab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab3), 0x4d);
        // 4D 013A
        gbc.setState(0xfa4, 0x8c10, 0x69a0, 0x10f6, 0xb866, 0xa525, 0x1, 0x1);
        gbc.writeMem(0xfa4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8c10);
        EXPECT(gbc.pc(), 0xfa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 013B
        gbc.setState(0x5878, 0xe3b6, 0x1020, 0x6d87, 0xa65b, 0x6ad9, 0x0, 0x1);
        gbc.writeMem(0x5878, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xe3b6);
        EXPECT(gbc.pc(), 0x5879);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 013C
        gbc.setState(0xecf7, 0xdf94, 0x5b60, 0xf2ee, 0x2850, 0x4e3b, 0x1, 0x1);
        gbc.writeMem(0xecf7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xdf94);
        EXPECT(gbc.pc(), 0xecf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecf7), 0x4d);
        // 4D 013D
        gbc.setState(0x2b9e, 0x584, 0xfa60, 0x8a60, 0x5efc, 0xb8d7, 0x1, 0x0);
        gbc.writeMem(0x2b9e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x584);
        EXPECT(gbc.pc(), 0x2b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 013E
        gbc.setState(0x9e01, 0xb5a9, 0xa380, 0x287f, 0x257a, 0x1f54, 0x0, 0x1);
        gbc.writeMem(0x9e01, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb5a9);
        EXPECT(gbc.pc(), 0x9e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e01), 0x4d);
        // 4D 013F
        gbc.setState(0x8606, 0xb553, 0x4330, 0x382a, 0x9852, 0x5c45, 0x1, 0x0);
        gbc.writeMem(0x8606, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb553);
        EXPECT(gbc.pc(), 0x8607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8606), 0x4d);
        // 4D 0140
        gbc.setState(0x59db, 0xabed, 0xbf40, 0xa318, 0x12c4, 0x3bea, 0x0, 0x1);
        gbc.writeMem(0x59db, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xabed);
        EXPECT(gbc.pc(), 0x59dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0141
        gbc.setState(0xb33b, 0x31ec, 0x11b0, 0x300a, 0x4ca7, 0x4205, 0x1, 0x0);
        gbc.writeMem(0xb33b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x31ec);
        EXPECT(gbc.pc(), 0xb33c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb33b), 0x4d);
        // 4D 0142
        gbc.setState(0x1dba, 0x3631, 0xf040, 0x8682, 0x1fc3, 0xda3b, 0x0, 0x0);
        gbc.writeMem(0x1dba, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x3631);
        EXPECT(gbc.pc(), 0x1dbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0143
        gbc.setState(0xa567, 0x8236, 0x2220, 0xea6e, 0x7727, 0xcf5d, 0x0, 0x0);
        gbc.writeMem(0xa567, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8236);
        EXPECT(gbc.pc(), 0xa568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa567), 0x4d);
        // 4D 0144
        gbc.setState(0xe8d, 0x1f27, 0x9130, 0x3a35, 0x5996, 0x54a9, 0x1, 0x0);
        gbc.writeMem(0xe8d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1f27);
        EXPECT(gbc.pc(), 0xe8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0145
        gbc.setState(0xcbdb, 0xa370, 0x3940, 0x8e79, 0x1b92, 0x714e, 0x1, 0x0);
        gbc.writeMem(0xcbdb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa370);
        EXPECT(gbc.pc(), 0xcbdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbdb), 0x4d);
        // 4D 0146
        gbc.setState(0xd0b1, 0x7700, 0x200, 0x2e85, 0x1208, 0x71f1, 0x1, 0x1);
        gbc.writeMem(0xd0b1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x7700);
        EXPECT(gbc.pc(), 0xd0b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b1), 0x4d);
        // 4D 0147
        gbc.setState(0x6e54, 0xe81e, 0xc110, 0x9d4d, 0xeecf, 0xcffc, 0x1, 0x1);
        gbc.writeMem(0x6e54, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe81e);
        EXPECT(gbc.pc(), 0x6e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0148
        gbc.setState(0x1c66, 0xfc3d, 0x5da0, 0xa0cd, 0x682d, 0x58b0, 0x0, 0x1);
        gbc.writeMem(0x1c66, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xfc3d);
        EXPECT(gbc.pc(), 0x1c67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0149
        gbc.setState(0x56ba, 0x4b2c, 0x6b50, 0xbf5a, 0x6b11, 0xf9e7, 0x1, 0x1);
        gbc.writeMem(0x56ba, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4b2c);
        EXPECT(gbc.pc(), 0x56bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 014A
        gbc.setState(0xa6cd, 0x789b, 0x9880, 0xfe0f, 0xc3c7, 0x9e9e, 0x1, 0x0);
        gbc.writeMem(0xa6cd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x789b);
        EXPECT(gbc.pc(), 0xa6ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6cd), 0x4d);
        // 4D 014B
        gbc.setState(0x5f5d, 0xd065, 0xfa10, 0x690, 0x18ef, 0xef90, 0x0, 0x0);
        gbc.writeMem(0x5f5d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd065);
        EXPECT(gbc.pc(), 0x5f5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 014C
        gbc.setState(0xd9f6, 0x3599, 0xcda0, 0xacfe, 0xf44d, 0x876, 0x0, 0x0);
        gbc.writeMem(0xd9f6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x3599);
        EXPECT(gbc.pc(), 0xd9f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9f6), 0x4d);
        // 4D 014E
        gbc.setState(0xdc00, 0xa496, 0x9f00, 0x9493, 0xb6c3, 0x3460, 0x1, 0x1);
        gbc.writeMem(0xdc00, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xa496);
        EXPECT(gbc.pc(), 0xdc01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc00), 0x4d);
        // 4D 014F
        gbc.setState(0xda9d, 0xf361, 0x82e0, 0xf6e5, 0xd8a2, 0x8779, 0x0, 0x1);
        gbc.writeMem(0xda9d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf361);
        EXPECT(gbc.pc(), 0xda9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda9d), 0x4d);
        // 4D 0150
        gbc.setState(0x69ae, 0x41d6, 0x4e70, 0x98ff, 0xa674, 0x48f5, 0x1, 0x1);
        gbc.writeMem(0x69ae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x41d6);
        EXPECT(gbc.pc(), 0x69af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0151
        gbc.setState(0x462f, 0xb872, 0xd310, 0x40c1, 0x9b8b, 0xca46, 0x1, 0x1);
        gbc.writeMem(0x462f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xb872);
        EXPECT(gbc.pc(), 0x4630);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0152
        gbc.setState(0x84ca, 0x7343, 0xffc0, 0xba9a, 0xfaae, 0x85e1, 0x1, 0x1);
        gbc.writeMem(0x84ca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x7343);
        EXPECT(gbc.pc(), 0x84cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84ca), 0x4d);
        // 4D 0153
        gbc.setState(0x1b02, 0xf413, 0x52c0, 0xf2ac, 0x48d1, 0x2481, 0x1, 0x1);
        gbc.writeMem(0x1b02, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xf413);
        EXPECT(gbc.pc(), 0x1b03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0154
        gbc.setState(0xa170, 0xbd14, 0x7ba0, 0xa0b4, 0xac9f, 0x8fb8, 0x0, 0x1);
        gbc.writeMem(0xa170, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xbd14);
        EXPECT(gbc.pc(), 0xa171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa170), 0x4d);
        // 4D 0155
        gbc.setState(0xa9f6, 0x60cf, 0x3460, 0x6738, 0x9e9c, 0x286, 0x1, 0x0);
        gbc.writeMem(0xa9f6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x60cf);
        EXPECT(gbc.pc(), 0xa9f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f6), 0x4d);
        // 4D 0156
        gbc.setState(0xb43e, 0xa637, 0x8360, 0xe2c1, 0x67b, 0xa11d, 0x0, 0x0);
        gbc.writeMem(0xb43e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa637);
        EXPECT(gbc.pc(), 0xb43f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb43e), 0x4d);
        // 4D 0157
        gbc.setState(0x198e, 0x8ded, 0x32d0, 0x8464, 0x4f8b, 0xdf59, 0x1, 0x0);
        gbc.writeMem(0x198e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8ded);
        EXPECT(gbc.pc(), 0x198f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0158
        gbc.setState(0x2111, 0xb6c8, 0xb120, 0x904, 0x848f, 0x7881, 0x1, 0x0);
        gbc.writeMem(0x2111, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb6c8);
        EXPECT(gbc.pc(), 0x2112);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0159
        gbc.setState(0x2954, 0xc702, 0x90f0, 0xd40a, 0xdc77, 0x9548, 0x1, 0x0);
        gbc.writeMem(0x2954, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc702);
        EXPECT(gbc.pc(), 0x2955);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 015A
        gbc.setState(0xdfda, 0xeba6, 0xfa00, 0x3c64, 0x67d1, 0x9ad6, 0x0, 0x1);
        gbc.writeMem(0xdfda, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xeba6);
        EXPECT(gbc.pc(), 0xdfdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfda), 0x4d);
        // 4D 015B
        gbc.setState(0xb4d9, 0xcc7f, 0x8030, 0xaff3, 0x1ccd, 0xbf76, 0x1, 0x1);
        gbc.writeMem(0xb4d9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xcc7f);
        EXPECT(gbc.pc(), 0xb4da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4d9), 0x4d);
        // 4D 015C
        gbc.setState(0x2342, 0x99b6, 0x1380, 0x12d, 0x5132, 0x20b4, 0x1, 0x1);
        gbc.writeMem(0x2342, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x99b6);
        EXPECT(gbc.pc(), 0x2343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 015D
        gbc.setState(0x59ea, 0x7dc0, 0xf400, 0x517d, 0x5e93, 0x5b8, 0x1, 0x0);
        gbc.writeMem(0x59ea, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x7dc0);
        EXPECT(gbc.pc(), 0x59eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 015E
        gbc.setState(0xd6ba, 0x9293, 0x5370, 0xc139, 0x32fa, 0x9651, 0x0, 0x0);
        gbc.writeMem(0xd6ba, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x9293);
        EXPECT(gbc.pc(), 0xd6bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6ba), 0x4d);
        // 4D 015F
        gbc.setState(0xbb61, 0x547f, 0x2840, 0x830c, 0xbbd4, 0xefec, 0x1, 0x0);
        gbc.writeMem(0xbb61, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x547f);
        EXPECT(gbc.pc(), 0xbb62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb61), 0x4d);
        // 4D 0160
        gbc.setState(0xe635, 0x31bc, 0x5bd0, 0xc5fd, 0xb88d, 0x786d, 0x0, 0x0);
        gbc.writeMem(0xe635, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x31bc);
        EXPECT(gbc.pc(), 0xe636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe635), 0x4d);
        // 4D 0161
        gbc.setState(0x9f49, 0x208, 0xdd60, 0xcf09, 0x6344, 0x205c, 0x0, 0x1);
        gbc.writeMem(0x9f49, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x208);
        EXPECT(gbc.pc(), 0x9f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f49), 0x4d);
        // 4D 0162
        gbc.setState(0x56b7, 0xdba8, 0xbfc0, 0xfe90, 0x7744, 0xf5bf, 0x0, 0x1);
        gbc.writeMem(0x56b7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdba8);
        EXPECT(gbc.pc(), 0x56b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0163
        gbc.setState(0x70f1, 0xf476, 0x6530, 0x43b5, 0xfbf3, 0x28d0, 0x0, 0x0);
        gbc.writeMem(0x70f1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf476);
        EXPECT(gbc.pc(), 0x70f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0164
        gbc.setState(0xb5a1, 0x2caa, 0xe5b0, 0xb9ba, 0x8d6c, 0x713e, 0x1, 0x0);
        gbc.writeMem(0xb5a1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2caa);
        EXPECT(gbc.pc(), 0xb5a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5a1), 0x4d);
        // 4D 0165
        gbc.setState(0x50e8, 0x665a, 0x3700, 0x79bf, 0x27d8, 0x8421, 0x0, 0x0);
        gbc.writeMem(0x50e8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x665a);
        EXPECT(gbc.pc(), 0x50e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0166
        gbc.setState(0x914b, 0x7470, 0x2760, 0xe4c1, 0x7ad9, 0x3126, 0x0, 0x0);
        gbc.writeMem(0x914b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7470);
        EXPECT(gbc.pc(), 0x914c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x914b), 0x4d);
        // 4D 0167
        gbc.setState(0x5ac, 0x4d55, 0xec20, 0xa45d, 0x53a9, 0xebfd, 0x0, 0x0);
        gbc.writeMem(0x5ac, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4d55);
        EXPECT(gbc.pc(), 0x5ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0168
        gbc.setState(0x4acc, 0x6316, 0x4050, 0x2dbc, 0xa7f2, 0x9a75, 0x0, 0x0);
        gbc.writeMem(0x4acc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6316);
        EXPECT(gbc.pc(), 0x4acd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0169
        gbc.setState(0x4579, 0xdca8, 0x8ab0, 0x5745, 0x685f, 0x7a51, 0x1, 0x0);
        gbc.writeMem(0x4579, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xdca8);
        EXPECT(gbc.pc(), 0x457a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 016A
        gbc.setState(0x6505, 0xa7fd, 0x20a0, 0x7fbd, 0x290d, 0x8657, 0x0, 0x1);
        gbc.writeMem(0x6505, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xa7fd);
        EXPECT(gbc.pc(), 0x6506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 016B
        gbc.setState(0x8ce1, 0xd802, 0x2400, 0xbda0, 0xaa0e, 0xaf66, 0x1, 0x0);
        gbc.writeMem(0x8ce1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xd802);
        EXPECT(gbc.pc(), 0x8ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce1), 0x4d);
        // 4D 016C
        gbc.setState(0xccb2, 0xd22, 0x14f0, 0x86ec, 0x2ddc, 0x8c52, 0x0, 0x0);
        gbc.writeMem(0xccb2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xd22);
        EXPECT(gbc.pc(), 0xccb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb2), 0x4d);
        // 4D 016D
        gbc.setState(0x772d, 0xfd18, 0xea90, 0x7494, 0xb3e5, 0x6231, 0x0, 0x0);
        gbc.writeMem(0x772d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfd18);
        EXPECT(gbc.pc(), 0x772e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 016E
        gbc.setState(0x7d91, 0xdbde, 0x8330, 0x17bb, 0x9971, 0xbd1, 0x0, 0x0);
        gbc.writeMem(0x7d91, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xdbde);
        EXPECT(gbc.pc(), 0x7d92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 016F
        gbc.setState(0xeaf7, 0xa7fb, 0xc850, 0xd863, 0x9cc7, 0x909e, 0x1, 0x1);
        gbc.writeMem(0xeaf7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa7fb);
        EXPECT(gbc.pc(), 0xeaf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeaf7), 0x4d);
        // 4D 0170
        gbc.setState(0xb53f, 0xc189, 0x2730, 0xfeac, 0xc403, 0xb8d3, 0x0, 0x1);
        gbc.writeMem(0xb53f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xc189);
        EXPECT(gbc.pc(), 0xb540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb53f), 0x4d);
        // 4D 0171
        gbc.setState(0x1060, 0x8e8c, 0xe350, 0x3a55, 0xdfe8, 0xa5aa, 0x0, 0x1);
        gbc.writeMem(0x1060, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x8e8c);
        EXPECT(gbc.pc(), 0x1061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0172
        gbc.setState(0x755c, 0x4ea6, 0x4490, 0xfeab, 0xa8ee, 0x19a3, 0x0, 0x0);
        gbc.writeMem(0x755c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4ea6);
        EXPECT(gbc.pc(), 0x755d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0173
        gbc.setState(0xcd4c, 0xec5e, 0xfb90, 0x2008, 0xbcda, 0xfb43, 0x1, 0x1);
        gbc.writeMem(0xcd4c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xec5e);
        EXPECT(gbc.pc(), 0xcd4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd4c), 0x4d);
        // 4D 0174
        gbc.setState(0xe9a9, 0x2df9, 0x1680, 0x7366, 0x9d23, 0xf73, 0x0, 0x1);
        gbc.writeMem(0xe9a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x2df9);
        EXPECT(gbc.pc(), 0xe9aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9a9), 0x4d);
        // 4D 0175
        gbc.setState(0x9ce9, 0xb6ae, 0x70d0, 0x7492, 0xe47a, 0xebab, 0x1, 0x0);
        gbc.writeMem(0x9ce9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xb6ae);
        EXPECT(gbc.pc(), 0x9cea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ce9), 0x4d);
        // 4D 0176
        gbc.setState(0x6d59, 0xca, 0x7b40, 0xb5b, 0xae4d, 0x8a74, 0x1, 0x1);
        gbc.writeMem(0x6d59, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xca);
        EXPECT(gbc.pc(), 0x6d5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0177
        gbc.setState(0xa8d5, 0xf323, 0x82f0, 0x2f69, 0x92fd, 0x8a5e, 0x0, 0x1);
        gbc.writeMem(0xa8d5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf323);
        EXPECT(gbc.pc(), 0xa8d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d5), 0x4d);
        // 4D 0178
        gbc.setState(0x1b07, 0x9c8b, 0x85e0, 0xe927, 0x41c4, 0xda48, 0x1, 0x1);
        gbc.writeMem(0x1b07, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x9c8b);
        EXPECT(gbc.pc(), 0x1b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0179
        gbc.setState(0xad59, 0xa68a, 0x9360, 0xe108, 0x3376, 0x7f4c, 0x0, 0x0);
        gbc.writeMem(0xad59, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa68a);
        EXPECT(gbc.pc(), 0xad5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad59), 0x4d);
        // 4D 017A
        gbc.setState(0xe748, 0x34aa, 0x93b0, 0xc621, 0x7590, 0xfff, 0x0, 0x1);
        gbc.writeMem(0xe748, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x34aa);
        EXPECT(gbc.pc(), 0xe749);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe748), 0x4d);
        // 4D 017B
        gbc.setState(0x5304, 0xcda1, 0x6920, 0x6541, 0x89d4, 0xff9b, 0x0, 0x1);
        gbc.writeMem(0x5304, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xcda1);
        EXPECT(gbc.pc(), 0x5305);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 017C
        gbc.setState(0xa41e, 0xbb3d, 0xa3c0, 0x4720, 0xaa1e, 0x5646, 0x0, 0x0);
        gbc.writeMem(0xa41e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbb3d);
        EXPECT(gbc.pc(), 0xa41f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa41e), 0x4d);
        // 4D 017D
        gbc.setState(0x8e8d, 0xef8c, 0x2a10, 0x5f63, 0x1d98, 0x33ba, 0x1, 0x0);
        gbc.writeMem(0x8e8d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xef8c);
        EXPECT(gbc.pc(), 0x8e8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e8d), 0x4d);
        // 4D 017E
        gbc.setState(0xc7d9, 0xcc75, 0x70d0, 0xc0c2, 0x1f4d, 0x8acd, 0x1, 0x0);
        gbc.writeMem(0xc7d9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xcc75);
        EXPECT(gbc.pc(), 0xc7da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7d9), 0x4d);
        // 4D 017F
        gbc.setState(0x7204, 0xc29b, 0x44b0, 0x9c53, 0x4440, 0x5de, 0x1, 0x0);
        gbc.writeMem(0x7204, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xc29b);
        EXPECT(gbc.pc(), 0x7205);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0180
        gbc.setState(0xe7a, 0x2bb6, 0x7540, 0x33f7, 0x1be4, 0x9974, 0x1, 0x1);
        gbc.writeMem(0xe7a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2bb6);
        EXPECT(gbc.pc(), 0xe7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0182
        gbc.setState(0xeb32, 0x5607, 0xa560, 0xca5c, 0xeb93, 0xe2a2, 0x1, 0x0);
        gbc.writeMem(0xeb32, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5607);
        EXPECT(gbc.pc(), 0xeb33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb32), 0x4d);
        // 4D 0183
        gbc.setState(0xced3, 0xe237, 0xe0, 0x1cb2, 0x39f3, 0xe8b6, 0x0, 0x1);
        gbc.writeMem(0xced3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe237);
        EXPECT(gbc.pc(), 0xced4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xced3), 0x4d);
        // 4D 0184
        gbc.setState(0x46e8, 0x762b, 0x2b50, 0xe78c, 0xe8a3, 0x977e, 0x1, 0x0);
        gbc.writeMem(0x46e8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x762b);
        EXPECT(gbc.pc(), 0x46e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0185
        gbc.setState(0x6dde, 0x7e5c, 0x6180, 0x907b, 0x1c56, 0x3974, 0x1, 0x1);
        gbc.writeMem(0x6dde, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7e5c);
        EXPECT(gbc.pc(), 0x6ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0186
        gbc.setState(0xb7ae, 0x3e71, 0x5e00, 0x7a3, 0xc93, 0xd489, 0x0, 0x0);
        gbc.writeMem(0xb7ae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3e71);
        EXPECT(gbc.pc(), 0xb7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ae), 0x4d);
        // 4D 0187
        gbc.setState(0xab3, 0x285e, 0x52b0, 0x8f14, 0x753b, 0x4718, 0x0, 0x1);
        gbc.writeMem(0xab3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x285e);
        EXPECT(gbc.pc(), 0xab4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0188
        gbc.setState(0x31f3, 0xbf22, 0xbf70, 0x9f6b, 0x2499, 0x60bf, 0x1, 0x0);
        gbc.writeMem(0x31f3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xbf22);
        EXPECT(gbc.pc(), 0x31f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0189
        gbc.setState(0xe45, 0xbddb, 0xb9f0, 0xb1c2, 0x930c, 0xb375, 0x1, 0x1);
        gbc.writeMem(0xe45, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xbddb);
        EXPECT(gbc.pc(), 0xe46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 018B
        gbc.setState(0x2fe8, 0xb7bb, 0xb080, 0xc1d7, 0xf4e, 0x2df0, 0x1, 0x1);
        gbc.writeMem(0x2fe8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb7bb);
        EXPECT(gbc.pc(), 0x2fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 018C
        gbc.setState(0x5789, 0x99a1, 0xeb70, 0x2fa2, 0x89c4, 0x1a04, 0x0, 0x1);
        gbc.writeMem(0x5789, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x99a1);
        EXPECT(gbc.pc(), 0x578a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 018D
        gbc.setState(0xa43, 0xad36, 0x73b0, 0xfc0c, 0xbb06, 0x27eb, 0x1, 0x0);
        gbc.writeMem(0xa43, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xad36);
        EXPECT(gbc.pc(), 0xa44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 018E
        gbc.setState(0x4e03, 0xa530, 0x1e70, 0x2257, 0xd0a3, 0xfa5, 0x1, 0x0);
        gbc.writeMem(0x4e03, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa530);
        EXPECT(gbc.pc(), 0x4e04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 018F
        gbc.setState(0xb225, 0x1021, 0x3000, 0x477e, 0xa53d, 0x1351, 0x1, 0x1);
        gbc.writeMem(0xb225, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x1021);
        EXPECT(gbc.pc(), 0xb226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb225), 0x4d);
        // 4D 0190
        gbc.setState(0xd86a, 0xf9ef, 0x45c0, 0x5c80, 0xaf4c, 0xeb62, 0x1, 0x1);
        gbc.writeMem(0xd86a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf9ef);
        EXPECT(gbc.pc(), 0xd86b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd86a), 0x4d);
        // 4D 0191
        gbc.setState(0xbd35, 0x3d76, 0x940, 0xfbde, 0x3662, 0x5c7, 0x1, 0x1);
        gbc.writeMem(0xbd35, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3d76);
        EXPECT(gbc.pc(), 0xbd36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd35), 0x4d);
        // 4D 0192
        gbc.setState(0x424e, 0xd12f, 0xce70, 0xbb60, 0x614b, 0x39de, 0x0, 0x1);
        gbc.writeMem(0x424e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd12f);
        EXPECT(gbc.pc(), 0x424f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0193
        gbc.setState(0xacc5, 0xbbcf, 0xcfd0, 0xd4b0, 0x2bea, 0x9cdb, 0x1, 0x0);
        gbc.writeMem(0xacc5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xbbcf);
        EXPECT(gbc.pc(), 0xacc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacc5), 0x4d);
        // 4D 0195
        gbc.setState(0x3f, 0xa1c6, 0x4ee0, 0x281b, 0x236c, 0x37d4, 0x1, 0x0);
        gbc.writeMem(0x3f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xa1c6);
        EXPECT(gbc.pc(), 0x40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0196
        gbc.setState(0xb512, 0x13fa, 0x830, 0x5657, 0xfb1b, 0x9dd8, 0x1, 0x0);
        gbc.writeMem(0xb512, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x13fa);
        EXPECT(gbc.pc(), 0xb513);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb512), 0x4d);
        // 4D 0197
        gbc.setState(0x6c31, 0x8b1e, 0x5720, 0xca2e, 0x5ec4, 0xf745, 0x1, 0x1);
        gbc.writeMem(0x6c31, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8b1e);
        EXPECT(gbc.pc(), 0x6c32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0198
        gbc.setState(0x76ed, 0x98b3, 0x6fd0, 0xaaf3, 0x3d1f, 0x4a87, 0x0, 0x0);
        gbc.writeMem(0x76ed, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x98b3);
        EXPECT(gbc.pc(), 0x76ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0199
        gbc.setState(0x8671, 0xaff2, 0x14f0, 0x996e, 0x4fb8, 0xe67, 0x0, 0x1);
        gbc.writeMem(0x8671, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xaff2);
        EXPECT(gbc.pc(), 0x8672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8671), 0x4d);
        // 4D 019A
        gbc.setState(0xa736, 0x4ba1, 0x9d00, 0x7ed5, 0x1894, 0x890d, 0x1, 0x0);
        gbc.writeMem(0xa736, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x4ba1);
        EXPECT(gbc.pc(), 0xa737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa736), 0x4d);
        // 4D 019B
        gbc.setState(0x92e7, 0xb658, 0x85a0, 0x757a, 0x6272, 0x906c, 0x0, 0x0);
        gbc.writeMem(0x92e7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb658);
        EXPECT(gbc.pc(), 0x92e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e7), 0x4d);
        // 4D 019C
        gbc.setState(0x54a9, 0xe9b6, 0xa450, 0xdf78, 0x89b0, 0x838e, 0x0, 0x0);
        gbc.writeMem(0x54a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xe9b6);
        EXPECT(gbc.pc(), 0x54aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 019D
        gbc.setState(0x6524, 0x22aa, 0xf1b0, 0x9f9f, 0xf45a, 0x3122, 0x1, 0x1);
        gbc.writeMem(0x6524, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x22aa);
        EXPECT(gbc.pc(), 0x6525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 019E
        gbc.setState(0xc83e, 0x7e3d, 0x3e70, 0xb1b9, 0xc10b, 0x8726, 0x1, 0x0);
        gbc.writeMem(0xc83e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x7e3d);
        EXPECT(gbc.pc(), 0xc83f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc83e), 0x4d);
        // 4D 019F
        gbc.setState(0xebe1, 0xdf30, 0xb390, 0xf97, 0xbe27, 0x36bf, 0x0, 0x0);
        gbc.writeMem(0xebe1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xdf30);
        EXPECT(gbc.pc(), 0xebe2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebe1), 0x4d);
        // 4D 01A0
        gbc.setState(0xa5a9, 0xf19f, 0xcea0, 0x13b, 0x33b1, 0xd3f3, 0x1, 0x0);
        gbc.writeMem(0xa5a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf19f);
        EXPECT(gbc.pc(), 0xa5aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa5a9), 0x4d);
        // 4D 01A1
        gbc.setState(0x4b89, 0x7cb7, 0xce70, 0x2837, 0x7926, 0xdc05, 0x0, 0x0);
        gbc.writeMem(0x4b89, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x7cb7);
        EXPECT(gbc.pc(), 0x4b8a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01A2
        gbc.setState(0x2076, 0x1fa6, 0x6140, 0xf5a4, 0xd20a, 0xb00a, 0x0, 0x0);
        gbc.writeMem(0x2076, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1fa6);
        EXPECT(gbc.pc(), 0x2077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01A3
        gbc.setState(0x31e, 0x3c19, 0x99b0, 0x535, 0x5ef1, 0x3508, 0x1, 0x0);
        gbc.writeMem(0x31e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x3c19);
        EXPECT(gbc.pc(), 0x31f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01A4
        gbc.setState(0xbce2, 0x4e7e, 0x3500, 0xfdca, 0x655c, 0xbe67, 0x0, 0x0);
        gbc.writeMem(0xbce2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4e7e);
        EXPECT(gbc.pc(), 0xbce3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbce2), 0x4d);
        // 4D 01A5
        gbc.setState(0x8541, 0xaa65, 0x35e0, 0x3f0, 0x783, 0xfd23, 0x0, 0x1);
        gbc.writeMem(0x8541, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xaa65);
        EXPECT(gbc.pc(), 0x8542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8541), 0x4d);
        // 4D 01A6
        gbc.setState(0xa6e3, 0x120b, 0x7480, 0x46db, 0x44f8, 0x2b6, 0x0, 0x0);
        gbc.writeMem(0xa6e3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x120b);
        EXPECT(gbc.pc(), 0xa6e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e3), 0x4d);
        // 4D 01A7
        gbc.setState(0xbe23, 0x5d61, 0x5aa0, 0xad67, 0x65ab, 0xe663, 0x0, 0x0);
        gbc.writeMem(0xbe23, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x5d61);
        EXPECT(gbc.pc(), 0xbe24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe23), 0x4d);
        // 4D 01A8
        gbc.setState(0x23ed, 0x9945, 0x36d0, 0x4780, 0x56bb, 0xaec4, 0x0, 0x0);
        gbc.writeMem(0x23ed, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9945);
        EXPECT(gbc.pc(), 0x23ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01A9
        gbc.setState(0x361f, 0x8071, 0x4710, 0x6b0a, 0xd93d, 0x2be0, 0x0, 0x0);
        gbc.writeMem(0x361f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x8071);
        EXPECT(gbc.pc(), 0x3620);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01AA
        gbc.setState(0xeb02, 0xed52, 0xb3a0, 0x33a4, 0x15cf, 0xe82, 0x1, 0x0);
        gbc.writeMem(0xeb02, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xed52);
        EXPECT(gbc.pc(), 0xeb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb02), 0x4d);
        // 4D 01AB
        gbc.setState(0xbe6d, 0x8a83, 0xd300, 0x9fb2, 0x2186, 0xa2df, 0x0, 0x1);
        gbc.writeMem(0xbe6d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x8a83);
        EXPECT(gbc.pc(), 0xbe6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe6d), 0x4d);
        // 4D 01AC
        gbc.setState(0x979b, 0xb877, 0xfbf0, 0x5f70, 0x6ac9, 0xfb91, 0x0, 0x1);
        gbc.writeMem(0x979b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb877);
        EXPECT(gbc.pc(), 0x979c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979b), 0x4d);
        // 4D 01AD
        gbc.setState(0x97c1, 0x68ef, 0x2b10, 0x4cc, 0x4f6a, 0x8899, 0x1, 0x0);
        gbc.writeMem(0x97c1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x68ef);
        EXPECT(gbc.pc(), 0x97c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97c1), 0x4d);
        // 4D 01AE
        gbc.setState(0x6d2c, 0x14c2, 0x84c0, 0x1c96, 0x888b, 0x60f8, 0x1, 0x0);
        gbc.writeMem(0x6d2c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x14c2);
        EXPECT(gbc.pc(), 0x6d2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01AF
        gbc.setState(0xb412, 0x1022, 0x23e0, 0xc53f, 0xb7c6, 0x6d30, 0x0, 0x1);
        gbc.writeMem(0xb412, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x1022);
        EXPECT(gbc.pc(), 0xb413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb412), 0x4d);
        // 4D 01B0
        gbc.setState(0x6c8, 0x3c6e, 0x1020, 0xb38e, 0xf9c, 0x878b, 0x0, 0x0);
        gbc.writeMem(0x6c8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x3c6e);
        EXPECT(gbc.pc(), 0x6c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01B1
        gbc.setState(0x434, 0x36ea, 0x79d0, 0xc866, 0xd5b9, 0xec37, 0x0, 0x1);
        gbc.writeMem(0x434, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x36ea);
        EXPECT(gbc.pc(), 0x435);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01B2
        gbc.setState(0x5991, 0x314f, 0x99c0, 0xd0b9, 0xe267, 0x6dc1, 0x1, 0x1);
        gbc.writeMem(0x5991, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x314f);
        EXPECT(gbc.pc(), 0x5992);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01B3
        gbc.setState(0xb50c, 0x562e, 0xc830, 0x2caa, 0x902, 0xf11b, 0x1, 0x0);
        gbc.writeMem(0xb50c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x562e);
        EXPECT(gbc.pc(), 0xb50d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb50c), 0x4d);
        // 4D 01B4
        gbc.setState(0x1a9, 0xd5b5, 0xc7d0, 0x1784, 0x4566, 0xd44, 0x1, 0x1);
        gbc.writeMem(0x1a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd5b5);
        EXPECT(gbc.pc(), 0x1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01B5
        gbc.setState(0x8566, 0x5f0a, 0xfd70, 0x49cb, 0xac20, 0xa8e1, 0x1, 0x1);
        gbc.writeMem(0x8566, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x5f0a);
        EXPECT(gbc.pc(), 0x8567);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8566), 0x4d);
        // 4D 01B6
        gbc.setState(0x3bc, 0x5ed, 0xea00, 0x6748, 0x2546, 0xb995, 0x0, 0x1);
        gbc.writeMem(0x3bc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5ed);
        EXPECT(gbc.pc(), 0x3bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01B7
        gbc.setState(0x1850, 0xe315, 0xc7c0, 0xa402, 0x2e0c, 0xc595, 0x1, 0x1);
        gbc.writeMem(0x1850, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe315);
        EXPECT(gbc.pc(), 0x1851);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01B8
        gbc.setState(0xeb57, 0x1e84, 0x9b40, 0x2f10, 0xd118, 0x593a, 0x0, 0x0);
        gbc.writeMem(0xeb57, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x1e84);
        EXPECT(gbc.pc(), 0xeb58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb57), 0x4d);
        // 4D 01B9
        gbc.setState(0x1716, 0xc4c1, 0xa630, 0xae3d, 0x1f10, 0xbe56, 0x1, 0x1);
        gbc.writeMem(0x1716, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc4c1);
        EXPECT(gbc.pc(), 0x1717);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01BA
        gbc.setState(0x11aa, 0x942e, 0xca20, 0x847c, 0xcca3, 0x214c, 0x1, 0x1);
        gbc.writeMem(0x11aa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x942e);
        EXPECT(gbc.pc(), 0x11ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01BB
        gbc.setState(0x6f1e, 0xf0a2, 0xd3c0, 0x784b, 0x805, 0xcdf, 0x0, 0x1);
        gbc.writeMem(0x6f1e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf0a2);
        EXPECT(gbc.pc(), 0x6f1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01BC
        gbc.setState(0xe561, 0x2138, 0x7e90, 0x735d, 0x4ac0, 0x6bee, 0x0, 0x0);
        gbc.writeMem(0xe561, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2138);
        EXPECT(gbc.pc(), 0xe562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe561), 0x4d);
        // 4D 01BD
        gbc.setState(0x4af1, 0xb1a4, 0x8290, 0x1322, 0x5896, 0x2f2c, 0x1, 0x1);
        gbc.writeMem(0x4af1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb1a4);
        EXPECT(gbc.pc(), 0x4af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01BE
        gbc.setState(0x4e2b, 0x722, 0x3c70, 0xfe94, 0x7f64, 0xecdf, 0x0, 0x0);
        gbc.writeMem(0x4e2b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x722);
        EXPECT(gbc.pc(), 0x4e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01BF
        gbc.setState(0x13d9, 0xc2b6, 0xc5f0, 0x97ce, 0x373b, 0x1d81, 0x0, 0x0);
        gbc.writeMem(0x13d9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xc2b6);
        EXPECT(gbc.pc(), 0x13da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01C0
        gbc.setState(0x2a63, 0x6b3a, 0xbf0, 0x56fb, 0x5346, 0xb9bd, 0x0, 0x0);
        gbc.writeMem(0x2a63, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6b3a);
        EXPECT(gbc.pc(), 0x2a64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01C1
        gbc.setState(0xabae, 0x4af8, 0x40f0, 0x57f, 0x84a5, 0x9840, 0x1, 0x0);
        gbc.writeMem(0xabae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x4af8);
        EXPECT(gbc.pc(), 0xabaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabae), 0x4d);
        // 4D 01C2
        gbc.setState(0xd36c, 0x1287, 0xdda0, 0x34db, 0x6dcd, 0x5854, 0x0, 0x1);
        gbc.writeMem(0xd36c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x1287);
        EXPECT(gbc.pc(), 0xd36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd36c), 0x4d);
        // 4D 01C3
        gbc.setState(0x68c0, 0xabba, 0xf1a0, 0xdd5b, 0x38e7, 0x6830, 0x1, 0x0);
        gbc.writeMem(0x68c0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xabba);
        EXPECT(gbc.pc(), 0x68c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01C5
        gbc.setState(0xed06, 0x4647, 0x1e30, 0x65a3, 0x81d3, 0x77be, 0x1, 0x1);
        gbc.writeMem(0xed06, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4647);
        EXPECT(gbc.pc(), 0xed07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed06), 0x4d);
        // 4D 01C6
        gbc.setState(0x5633, 0x18ff, 0x7e60, 0xec9, 0x6b38, 0x2640, 0x1, 0x0);
        gbc.writeMem(0x5633, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x18ff);
        EXPECT(gbc.pc(), 0x5634);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01C7
        gbc.setState(0x2c8e, 0x43ea, 0xc9b0, 0xc035, 0x738c, 0x460f, 0x1, 0x0);
        gbc.writeMem(0x2c8e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x43ea);
        EXPECT(gbc.pc(), 0x2c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01C8
        gbc.setState(0xc4d1, 0x6e8e, 0x81a0, 0x3ff7, 0x5c95, 0x4154, 0x0, 0x0);
        gbc.writeMem(0xc4d1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x6e8e);
        EXPECT(gbc.pc(), 0xc4d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4d1), 0x4d);
        // 4D 01C9
        gbc.setState(0xeaab, 0x1f04, 0xdf00, 0x1661, 0xa605, 0xa427, 0x1, 0x0);
        gbc.writeMem(0xeaab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1f04);
        EXPECT(gbc.pc(), 0xeaac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaab), 0x4d);
        // 4D 01CA
        gbc.setState(0x9584, 0xac19, 0x9500, 0x1cea, 0x1811, 0xadf6, 0x0, 0x1);
        gbc.writeMem(0x9584, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xac19);
        EXPECT(gbc.pc(), 0x9585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9584), 0x4d);
        // 4D 01CB
        gbc.setState(0x54a, 0x1091, 0x410, 0x74ee, 0x1be4, 0xa339, 0x1, 0x0);
        gbc.writeMem(0x54a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1091);
        EXPECT(gbc.pc(), 0x54b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01CC
        gbc.setState(0x9ae8, 0xf3c0, 0xe6b0, 0x3873, 0x365b, 0x8461, 0x0, 0x0);
        gbc.writeMem(0x9ae8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xf3c0);
        EXPECT(gbc.pc(), 0x9ae9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ae8), 0x4d);
        // 4D 01CD
        gbc.setState(0xceca, 0x2107, 0x2620, 0x7ccb, 0xb534, 0x9933, 0x1, 0x0);
        gbc.writeMem(0xceca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2107);
        EXPECT(gbc.pc(), 0xcecb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xceca), 0x4d);
        // 4D 01CE
        gbc.setState(0x6473, 0xdcb5, 0x40d0, 0x213a, 0x1fb5, 0x4a14, 0x1, 0x0);
        gbc.writeMem(0x6473, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdcb5);
        EXPECT(gbc.pc(), 0x6474);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01CF
        gbc.setState(0x4d66, 0x5e21, 0x76f0, 0x9547, 0xa44c, 0x8b12, 0x1, 0x1);
        gbc.writeMem(0x4d66, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5e21);
        EXPECT(gbc.pc(), 0x4d67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01D0
        gbc.setState(0x6058, 0xcfee, 0x58d0, 0x4a1, 0xe86e, 0x7cf9, 0x1, 0x1);
        gbc.writeMem(0x6058, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcfee);
        EXPECT(gbc.pc(), 0x6059);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01D1
        gbc.setState(0x296d, 0xc064, 0x6fe0, 0x39f1, 0x854f, 0x83f0, 0x1, 0x1);
        gbc.writeMem(0x296d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xc064);
        EXPECT(gbc.pc(), 0x296e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01D2
        gbc.setState(0xdeb8, 0xfec1, 0xc7e0, 0xa6c3, 0xf20e, 0x6d8a, 0x0, 0x1);
        gbc.writeMem(0xdeb8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfec1);
        EXPECT(gbc.pc(), 0xdeb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdeb8), 0x4d);
        // 4D 01D3
        gbc.setState(0xd856, 0xcb2d, 0xa820, 0x2536, 0x368, 0x1b56, 0x1, 0x0);
        gbc.writeMem(0xd856, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcb2d);
        EXPECT(gbc.pc(), 0xd857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd856), 0x4d);
        // 4D 01D4
        gbc.setState(0xc2f1, 0xd9a4, 0xe040, 0x62d9, 0xe71e, 0xa201, 0x0, 0x1);
        gbc.writeMem(0xc2f1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd9a4);
        EXPECT(gbc.pc(), 0xc2f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2f1), 0x4d);
        // 4D 01D5
        gbc.setState(0x7ac9, 0x1fb, 0xee0, 0xb964, 0x1621, 0xf361, 0x1, 0x1);
        gbc.writeMem(0x7ac9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0x7aca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01D6
        gbc.setState(0x6933, 0x7cf5, 0xc600, 0x70c1, 0xa7b4, 0x7a44, 0x1, 0x1);
        gbc.writeMem(0x6933, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7cf5);
        EXPECT(gbc.pc(), 0x6934);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01D7
        gbc.setState(0xd538, 0xd795, 0x2eb0, 0x956d, 0xd8da, 0x27f4, 0x0, 0x1);
        gbc.writeMem(0xd538, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd795);
        EXPECT(gbc.pc(), 0xd539);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd538), 0x4d);
        // 4D 01D8
        gbc.setState(0x7196, 0x9436, 0x2ad0, 0x834b, 0x487a, 0xab8c, 0x1, 0x1);
        gbc.writeMem(0x7196, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9436);
        EXPECT(gbc.pc(), 0x7197);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01D9
        gbc.setState(0x2689, 0x77e9, 0x160, 0x6f2b, 0x5dc8, 0xeeaa, 0x1, 0x0);
        gbc.writeMem(0x2689, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x77e9);
        EXPECT(gbc.pc(), 0x268a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01DA
        gbc.setState(0xa8a9, 0xb282, 0xfc90, 0xf2c3, 0x5083, 0x75b1, 0x0, 0x1);
        gbc.writeMem(0xa8a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb282);
        EXPECT(gbc.pc(), 0xa8aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8a9), 0x4d);
        // 4D 01DB
        gbc.setState(0x70c4, 0x13ca, 0xcbf0, 0xf31c, 0xbfc3, 0x92fe, 0x1, 0x1);
        gbc.writeMem(0x70c4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x13ca);
        EXPECT(gbc.pc(), 0x70c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01DC
        gbc.setState(0x7d7f, 0x946d, 0xfcb0, 0x6aea, 0x31f4, 0xa83e, 0x1, 0x0);
        gbc.writeMem(0x7d7f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0x7d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01DD
        gbc.setState(0xd1f7, 0x14d, 0x9e80, 0x5dff, 0x67cf, 0x99c3, 0x0, 0x0);
        gbc.writeMem(0xd1f7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x14d);
        EXPECT(gbc.pc(), 0xd1f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f7), 0x4d);
        // 4D 01DE
        gbc.setState(0xae43, 0x6409, 0x1080, 0x547b, 0x8ce0, 0x8066, 0x1, 0x1);
        gbc.writeMem(0xae43, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6409);
        EXPECT(gbc.pc(), 0xae44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae43), 0x4d);
        // 4D 01DF
        gbc.setState(0xbd23, 0x708d, 0x62c0, 0x689b, 0xb49f, 0x3a0, 0x1, 0x0);
        gbc.writeMem(0xbd23, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x708d);
        EXPECT(gbc.pc(), 0xbd24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd23), 0x4d);
        // 4D 01E0
        gbc.setState(0x71fd, 0xd513, 0xc370, 0x1348, 0x7477, 0x7845, 0x0, 0x0);
        gbc.writeMem(0x71fd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xd513);
        EXPECT(gbc.pc(), 0x71fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01E1
        gbc.setState(0x557f, 0xabef, 0xd5a0, 0x8af0, 0x37ef, 0x71e, 0x0, 0x0);
        gbc.writeMem(0x557f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xabef);
        EXPECT(gbc.pc(), 0x5580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01E2
        gbc.setState(0xc667, 0x2aa4, 0xcd80, 0x6734, 0x4215, 0x3996, 0x0, 0x1);
        gbc.writeMem(0xc667, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2aa4);
        EXPECT(gbc.pc(), 0xc668);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc667), 0x4d);
        // 4D 01E3
        gbc.setState(0x3a1f, 0x7fd0, 0xb40, 0xbc6e, 0x7349, 0x607f, 0x0, 0x1);
        gbc.writeMem(0x3a1f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7fd0);
        EXPECT(gbc.pc(), 0x3a20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01E5
        gbc.setState(0x4e43, 0x173f, 0x55b0, 0xc934, 0xf047, 0xc1db, 0x0, 0x1);
        gbc.writeMem(0x4e43, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x173f);
        EXPECT(gbc.pc(), 0x4e44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01E6
        gbc.setState(0x516b, 0x28ea, 0xd810, 0x6d81, 0x64a9, 0xc066, 0x0, 0x1);
        gbc.writeMem(0x516b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x28ea);
        EXPECT(gbc.pc(), 0x516c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01E7
        gbc.setState(0x6169, 0x597a, 0xfd30, 0xd6a8, 0x532d, 0x2d8c, 0x0, 0x1);
        gbc.writeMem(0x6169, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x597a);
        EXPECT(gbc.pc(), 0x616a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01E8
        gbc.setState(0x8, 0xdbd4, 0x4990, 0xdbc9, 0xaec, 0xeb6e, 0x0, 0x1);
        gbc.writeMem(0x8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xdbd4);
        EXPECT(gbc.pc(), 0x9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01E9
        gbc.setState(0xd5bd, 0xd0f1, 0xea0, 0x3c75, 0x51da, 0x7bea, 0x1, 0x1);
        gbc.writeMem(0xd5bd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd0f1);
        EXPECT(gbc.pc(), 0xd5be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5bd), 0x4d);
        // 4D 01EA
        gbc.setState(0x3123, 0xf3a2, 0x5c10, 0x582e, 0xf70d, 0x811f, 0x0, 0x0);
        gbc.writeMem(0x3123, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xf3a2);
        EXPECT(gbc.pc(), 0x3124);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01EB
        gbc.setState(0xe90a, 0x598f, 0x2040, 0x8b8, 0xbd5a, 0x7d65, 0x1, 0x1);
        gbc.writeMem(0xe90a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x598f);
        EXPECT(gbc.pc(), 0xe90b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe90a), 0x4d);
        // 4D 01EC
        gbc.setState(0xd947, 0x4b5f, 0xb510, 0x7e83, 0x4c98, 0xc741, 0x0, 0x0);
        gbc.writeMem(0xd947, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4b5f);
        EXPECT(gbc.pc(), 0xd948);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd947), 0x4d);
        // 4D 01ED
        gbc.setState(0x7b3e, 0x511b, 0xb0c0, 0xaa1e, 0x7d1e, 0x31a6, 0x0, 0x0);
        gbc.writeMem(0x7b3e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x511b);
        EXPECT(gbc.pc(), 0x7b3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 01EE
        gbc.setState(0x8f59, 0x5038, 0xe30, 0x19ce, 0xb1a5, 0x5b6f, 0x1, 0x1);
        gbc.writeMem(0x8f59, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5038);
        EXPECT(gbc.pc(), 0x8f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f59), 0x4d);
        // 4D 01EF
        gbc.setState(0xcf33, 0xae66, 0xeb00, 0x3390, 0x6064, 0xf918, 0x1, 0x0);
        gbc.writeMem(0xcf33, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xae66);
        EXPECT(gbc.pc(), 0xcf34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf33), 0x4d);
        // 4D 01F0
        gbc.setState(0x60a0, 0xbf2, 0x98d0, 0x26d5, 0xa2d5, 0x1c9f, 0x1, 0x1);
        gbc.writeMem(0x60a0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xbf2);
        EXPECT(gbc.pc(), 0x60a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01F2
        gbc.setState(0xdd6d, 0xb2e1, 0x60e0, 0xb735, 0xd0ca, 0xf2ef, 0x0, 0x0);
        gbc.writeMem(0xdd6d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb2e1);
        EXPECT(gbc.pc(), 0xdd6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd6d), 0x4d);
        // 4D 01F3
        gbc.setState(0x427e, 0xa60f, 0x68f0, 0xcd51, 0xdd91, 0x5593, 0x1, 0x0);
        gbc.writeMem(0x427e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa60f);
        EXPECT(gbc.pc(), 0x427f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 01F4
        gbc.setState(0x10af, 0xeee9, 0xdb60, 0x9ef1, 0xcdbd, 0xc720, 0x1, 0x1);
        gbc.writeMem(0x10af, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xeee9);
        EXPECT(gbc.pc(), 0x10b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01F5
        gbc.setState(0xd107, 0x8046, 0xaed0, 0x3cb4, 0x4e90, 0xcb44, 0x0, 0x0);
        gbc.writeMem(0xd107, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8046);
        EXPECT(gbc.pc(), 0xd108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd107), 0x4d);
        // 4D 01F7
        gbc.setState(0x2b77, 0x2c8f, 0x1fe0, 0xa9a8, 0xf37e, 0xae1d, 0x1, 0x0);
        gbc.writeMem(0x2b77, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2c8f);
        EXPECT(gbc.pc(), 0x2b78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01F8
        gbc.setState(0xef70, 0x4ffa, 0xfc0, 0x2608, 0x6d4d, 0xff89, 0x0, 0x0);
        gbc.writeMem(0xef70, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x4ffa);
        EXPECT(gbc.pc(), 0xef71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef70), 0x4d);
        // 4D 01F9
        gbc.setState(0x856a, 0x5da0, 0xb880, 0xf2ca, 0x1e90, 0x2d5f, 0x1, 0x0);
        gbc.writeMem(0x856a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5da0);
        EXPECT(gbc.pc(), 0x856b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x856a), 0x4d);
        // 4D 01FA
        gbc.setState(0x9739, 0x6c3, 0x61d0, 0x883c, 0xe90, 0x3caa, 0x1, 0x0);
        gbc.writeMem(0x9739, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6c3);
        EXPECT(gbc.pc(), 0x973a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9739), 0x4d);
        // 4D 01FB
        gbc.setState(0xd13f, 0xf5fe, 0x6b80, 0xe25f, 0xa335, 0x2b35, 0x1, 0x0);
        gbc.writeMem(0xd13f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf5fe);
        EXPECT(gbc.pc(), 0xd140);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd13f), 0x4d);
        // 4D 01FC
        gbc.setState(0x5ec9, 0xa8d6, 0xe660, 0xd1b3, 0x28e, 0xf538, 0x1, 0x1);
        gbc.writeMem(0x5ec9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa8d6);
        EXPECT(gbc.pc(), 0x5eca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 01FD
        gbc.setState(0xb669, 0xe34d, 0x8f40, 0x2d75, 0xd14, 0x258f, 0x0, 0x0);
        gbc.writeMem(0xb669, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe34d);
        EXPECT(gbc.pc(), 0xb66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb669), 0x4d);
        // 4D 01FE
        gbc.setState(0x5505, 0xe050, 0x8390, 0x10d7, 0x5473, 0x2afc, 0x0, 0x1);
        gbc.writeMem(0x5505, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xe050);
        EXPECT(gbc.pc(), 0x5506);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 01FF
        gbc.setState(0x191a, 0x98c7, 0xdf50, 0xe198, 0xc93f, 0x10a6, 0x1, 0x0);
        gbc.writeMem(0x191a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x98c7);
        EXPECT(gbc.pc(), 0x191b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0200
        gbc.setState(0xbcd, 0x9e3d, 0xb6b0, 0x1c60, 0x1371, 0x6ff2, 0x1, 0x0);
        gbc.writeMem(0xbcd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x9e3d);
        EXPECT(gbc.pc(), 0xbce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0201
        gbc.setState(0x29ad, 0x5018, 0xea50, 0x412c, 0x6b6, 0x98b5, 0x1, 0x1);
        gbc.writeMem(0x29ad, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5018);
        EXPECT(gbc.pc(), 0x29ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0203
        gbc.setState(0xb2ff, 0x6db1, 0xa4d0, 0x2cf0, 0x7ca5, 0x58a5, 0x1, 0x1);
        gbc.writeMem(0xb2ff, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6db1);
        EXPECT(gbc.pc(), 0xb300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ff), 0x4d);
        // 4D 0204
        gbc.setState(0xdc44, 0x9998, 0xdff0, 0x4a36, 0x8583, 0x5312, 0x1, 0x0);
        gbc.writeMem(0xdc44, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x9998);
        EXPECT(gbc.pc(), 0xdc45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc44), 0x4d);
        // 4D 0205
        gbc.setState(0xc6f7, 0x68a0, 0xd730, 0xba8a, 0x2905, 0x9ca1, 0x0, 0x0);
        gbc.writeMem(0xc6f7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x68a0);
        EXPECT(gbc.pc(), 0xc6f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc6f7), 0x4d);
        // 4D 0206
        gbc.setState(0x4b1a, 0xa2de, 0xe230, 0xca9f, 0x9bb2, 0x4838, 0x0, 0x0);
        gbc.writeMem(0x4b1a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xa2de);
        EXPECT(gbc.pc(), 0x4b1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0207
        gbc.setState(0xd1e0, 0x38ad, 0xa6a0, 0x334, 0x6396, 0x6d3c, 0x1, 0x1);
        gbc.writeMem(0xd1e0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x38ad);
        EXPECT(gbc.pc(), 0xd1e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1e0), 0x4d);
        // 4D 0208
        gbc.setState(0x6261, 0x80c3, 0xd880, 0x75b9, 0x50c8, 0x3684, 0x1, 0x0);
        gbc.writeMem(0x6261, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x80c3);
        EXPECT(gbc.pc(), 0x6262);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0209
        gbc.setState(0xdf10, 0x5b0c, 0xfb40, 0xb81, 0x1925, 0x8ed9, 0x0, 0x1);
        gbc.writeMem(0xdf10, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x5b0c);
        EXPECT(gbc.pc(), 0xdf11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf10), 0x4d);
        // 4D 020A
        gbc.setState(0xe6c6, 0xf55b, 0x9720, 0x90e8, 0x3b44, 0x7b79, 0x1, 0x0);
        gbc.writeMem(0xe6c6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf55b);
        EXPECT(gbc.pc(), 0xe6c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6c6), 0x4d);
        // 4D 020B
        gbc.setState(0xd80f, 0xf448, 0x2210, 0xbebf, 0x5005, 0x9830, 0x1, 0x1);
        gbc.writeMem(0xd80f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xf448);
        EXPECT(gbc.pc(), 0xd810);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd80f), 0x4d);
        // 4D 020C
        gbc.setState(0x65fa, 0x5714, 0x7960, 0x5ad5, 0xd0c5, 0x8aa2, 0x1, 0x1);
        gbc.writeMem(0x65fa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x5714);
        EXPECT(gbc.pc(), 0x65fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 020D
        gbc.setState(0x4fdc, 0x6bfa, 0xb530, 0xed, 0xcb3c, 0xf5a1, 0x0, 0x1);
        gbc.writeMem(0x4fdc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6bfa);
        EXPECT(gbc.pc(), 0x4fdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 020F
        gbc.setState(0x2170, 0x6d48, 0x80b0, 0x3961, 0xcdca, 0xb8f6, 0x1, 0x1);
        gbc.writeMem(0x2170, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6d48);
        EXPECT(gbc.pc(), 0x2171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0210
        gbc.setState(0xa49e, 0xc97b, 0x9480, 0xf633, 0xef09, 0x4a12, 0x0, 0x1);
        gbc.writeMem(0xa49e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc97b);
        EXPECT(gbc.pc(), 0xa49f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa49e), 0x4d);
        // 4D 0211
        gbc.setState(0x3ee5, 0x5b2b, 0x9cc0, 0xbce9, 0xa0d8, 0x8546, 0x1, 0x1);
        gbc.writeMem(0x3ee5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x5b2b);
        EXPECT(gbc.pc(), 0x3ee6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0212
        gbc.setState(0x4893, 0xce85, 0xbec0, 0xdf3e, 0x8ce9, 0x6015, 0x1, 0x1);
        gbc.writeMem(0x4893, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xce85);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0213
        gbc.setState(0xe308, 0xecc4, 0x9200, 0xc24d, 0xa99e, 0x5719, 0x1, 0x1);
        gbc.writeMem(0xe308, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xecc4);
        EXPECT(gbc.pc(), 0xe309);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe308), 0x4d);
        // 4D 0214
        gbc.setState(0x2433, 0x8448, 0x120, 0x441d, 0xeff7, 0x9862, 0x0, 0x1);
        gbc.writeMem(0x2433, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8448);
        EXPECT(gbc.pc(), 0x2434);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0215
        gbc.setState(0x2757, 0x47cb, 0x670, 0x8874, 0xa459, 0x7b46, 0x0, 0x1);
        gbc.writeMem(0x2757, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x47cb);
        EXPECT(gbc.pc(), 0x2758);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0216
        gbc.setState(0x9648, 0xff1e, 0x1870, 0x5d64, 0xa5c7, 0x79be, 0x1, 0x0);
        gbc.writeMem(0x9648, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xff1e);
        EXPECT(gbc.pc(), 0x9649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9648), 0x4d);
        // 4D 0218
        gbc.setState(0xaa3, 0x8376, 0x15a0, 0x589d, 0x3629, 0x2b0, 0x1, 0x1);
        gbc.writeMem(0xaa3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x8376);
        EXPECT(gbc.pc(), 0xaa4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0219
        gbc.setState(0xd6a8, 0xc88b, 0x8d00, 0x9469, 0xb0cd, 0x1c98, 0x1, 0x0);
        gbc.writeMem(0xd6a8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xc88b);
        EXPECT(gbc.pc(), 0xd6a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a8), 0x4d);
        // 4D 021A
        gbc.setState(0x4287, 0xaad, 0x9860, 0xb599, 0xec4b, 0x2cd6, 0x0, 0x1);
        gbc.writeMem(0x4287, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xaad);
        EXPECT(gbc.pc(), 0x4288);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 021B
        gbc.setState(0xb4c7, 0xef9e, 0x30b0, 0xb720, 0xcccd, 0x5846, 0x1, 0x1);
        gbc.writeMem(0xb4c7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xef9e);
        EXPECT(gbc.pc(), 0xb4c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb4c7), 0x4d);
        // 4D 021C
        gbc.setState(0x2d9e, 0x44b, 0xa900, 0x4efd, 0xe3e9, 0xce17, 0x1, 0x0);
        gbc.writeMem(0x2d9e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x44b);
        EXPECT(gbc.pc(), 0x2d9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 021D
        gbc.setState(0x41df, 0x30fc, 0x7980, 0x6031, 0xff6f, 0xbbcd, 0x0, 0x1);
        gbc.writeMem(0x41df, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x30fc);
        EXPECT(gbc.pc(), 0x41e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 021E
        gbc.setState(0x9d77, 0xb5e2, 0xe4b0, 0x9de1, 0x5686, 0xaae5, 0x1, 0x1);
        gbc.writeMem(0x9d77, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb5e2);
        EXPECT(gbc.pc(), 0x9d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d77), 0x4d);
        // 4D 021F
        gbc.setState(0x5426, 0xa334, 0xf770, 0x189, 0x4b0f, 0xaf9c, 0x1, 0x1);
        gbc.writeMem(0x5426, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa334);
        EXPECT(gbc.pc(), 0x5427);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0220
        gbc.setState(0x6966, 0x1648, 0xc50, 0x408f, 0x1c16, 0xc939, 0x0, 0x1);
        gbc.writeMem(0x6966, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1648);
        EXPECT(gbc.pc(), 0x6967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0221
        gbc.setState(0xbd01, 0x152c, 0x1e90, 0xd2e5, 0x8d9b, 0x5bb, 0x0, 0x0);
        gbc.writeMem(0xbd01, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x152c);
        EXPECT(gbc.pc(), 0xbd02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd01), 0x4d);
        // 4D 0222
        gbc.setState(0x1309, 0x5236, 0xbbc0, 0x20c1, 0x8733, 0xd369, 0x1, 0x0);
        gbc.writeMem(0x1309, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x5236);
        EXPECT(gbc.pc(), 0x130a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0223
        gbc.setState(0xa1eb, 0x1057, 0x1a60, 0x6ba, 0x9413, 0xafe1, 0x1, 0x0);
        gbc.writeMem(0xa1eb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1057);
        EXPECT(gbc.pc(), 0xa1ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1eb), 0x4d);
        // 4D 0224
        gbc.setState(0x833e, 0x56c9, 0xd830, 0x7dc2, 0xf360, 0xd5c, 0x0, 0x0);
        gbc.writeMem(0x833e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x56c9);
        EXPECT(gbc.pc(), 0x833f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x833e), 0x4d);
        // 4D 0225
        gbc.setState(0xa771, 0xc14b, 0x5da0, 0x5841, 0x502, 0x5afd, 0x0, 0x0);
        gbc.writeMem(0xa771, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc14b);
        EXPECT(gbc.pc(), 0xa772);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa771), 0x4d);
        // 4D 0226
        gbc.setState(0x6bdb, 0xab5e, 0x6c90, 0xfeec, 0xec78, 0x101d, 0x1, 0x0);
        gbc.writeMem(0x6bdb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xab5e);
        EXPECT(gbc.pc(), 0x6bdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0227
        gbc.setState(0xcc61, 0x2a1b, 0xb4f0, 0x84d6, 0x6cda, 0x3b75, 0x1, 0x0);
        gbc.writeMem(0xcc61, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2a1b);
        EXPECT(gbc.pc(), 0xcc62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc61), 0x4d);
        // 4D 0228
        gbc.setState(0xcb38, 0x1c67, 0x5d30, 0xca0f, 0xbc3a, 0x4682, 0x0, 0x0);
        gbc.writeMem(0xcb38, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x1c67);
        EXPECT(gbc.pc(), 0xcb39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb38), 0x4d);
        // 4D 0229
        gbc.setState(0x9e95, 0xb1fd, 0xd370, 0x9a3f, 0xa661, 0xabf0, 0x1, 0x1);
        gbc.writeMem(0x9e95, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xb1fd);
        EXPECT(gbc.pc(), 0x9e96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e95), 0x4d);
        // 4D 022A
        gbc.setState(0xcab0, 0x53d2, 0xd60, 0x90c, 0xd9f5, 0x9486, 0x1, 0x0);
        gbc.writeMem(0xcab0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x53d2);
        EXPECT(gbc.pc(), 0xcab1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab0), 0x4d);
        // 4D 022B
        gbc.setState(0xd983, 0xf471, 0xef30, 0xd66e, 0x5001, 0xbbd9, 0x0, 0x1);
        gbc.writeMem(0xd983, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xf471);
        EXPECT(gbc.pc(), 0xd984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd983), 0x4d);
        // 4D 022C
        gbc.setState(0x4729, 0xa29a, 0x3dc0, 0x993f, 0x1126, 0x284e, 0x0, 0x1);
        gbc.writeMem(0x4729, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa29a);
        EXPECT(gbc.pc(), 0x472a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 022D
        gbc.setState(0xd857, 0xb28f, 0x5990, 0x6962, 0xcf9, 0x77b7, 0x1, 0x0);
        gbc.writeMem(0xd857, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb28f);
        EXPECT(gbc.pc(), 0xd858);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd857), 0x4d);
        // 4D 022F
        gbc.setState(0xe82c, 0x7d29, 0x52b0, 0x69a6, 0xbbd8, 0x7c78, 0x1, 0x1);
        gbc.writeMem(0xe82c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7d29);
        EXPECT(gbc.pc(), 0xe82d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe82c), 0x4d);
        // 4D 0230
        gbc.setState(0x36, 0x74b3, 0x2d20, 0x6bf5, 0x2683, 0xc330, 0x1, 0x1);
        gbc.writeMem(0x36, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x74b3);
        EXPECT(gbc.pc(), 0x37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0231
        gbc.setState(0xe7ee, 0xde06, 0x9c20, 0xcc34, 0x8247, 0xc25d, 0x1, 0x0);
        gbc.writeMem(0xe7ee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xde06);
        EXPECT(gbc.pc(), 0xe7ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7ee), 0x4d);
        // 4D 0233
        gbc.setState(0xb8, 0x9522, 0xeb50, 0xf993, 0xc463, 0x123a, 0x0, 0x1);
        gbc.writeMem(0xb8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x9522);
        EXPECT(gbc.pc(), 0xb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0234
        gbc.setState(0x9bcb, 0xd2fd, 0x7f50, 0x8762, 0xe593, 0x9023, 0x1, 0x1);
        gbc.writeMem(0x9bcb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd2fd);
        EXPECT(gbc.pc(), 0x9bcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bcb), 0x4d);
        // 4D 0235
        gbc.setState(0xddec, 0x6cbb, 0x9d20, 0xac60, 0x6ca8, 0x2d2c, 0x1, 0x0);
        gbc.writeMem(0xddec, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x6cbb);
        EXPECT(gbc.pc(), 0xdded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddec), 0x4d);
        // 4D 0236
        gbc.setState(0xd1bb, 0x7d1a, 0x1840, 0xf011, 0x22c0, 0x2d52, 0x0, 0x1);
        gbc.writeMem(0xd1bb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x7d1a);
        EXPECT(gbc.pc(), 0xd1bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1bb), 0x4d);
        // 4D 0237
        gbc.setState(0xa6a9, 0x733e, 0x4ea0, 0x344d, 0xac84, 0x3992, 0x0, 0x1);
        gbc.writeMem(0xa6a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x733e);
        EXPECT(gbc.pc(), 0xa6aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6a9), 0x4d);
        // 4D 0238
        gbc.setState(0xaf20, 0x4dc3, 0x1f30, 0x4ad, 0x96c9, 0x54fc, 0x0, 0x0);
        gbc.writeMem(0xaf20, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x4dc3);
        EXPECT(gbc.pc(), 0xaf21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf20), 0x4d);
        // 4D 0239
        gbc.setState(0xa50d, 0x9855, 0x6770, 0x2355, 0xb9af, 0xb7b7, 0x1, 0x1);
        gbc.writeMem(0xa50d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x9855);
        EXPECT(gbc.pc(), 0xa50e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa50d), 0x4d);
        // 4D 023A
        gbc.setState(0x7b75, 0x9727, 0xd310, 0x388a, 0x194e, 0x8bcc, 0x1, 0x0);
        gbc.writeMem(0x7b75, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x9727);
        EXPECT(gbc.pc(), 0x7b76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 023B
        gbc.setState(0x222f, 0xa35, 0x9470, 0x149c, 0x6e46, 0xa57f, 0x1, 0x0);
        gbc.writeMem(0x222f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa35);
        EXPECT(gbc.pc(), 0x2230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 023C
        gbc.setState(0x29e, 0x639a, 0x9d00, 0x71fd, 0xe91e, 0xe3f5, 0x0, 0x1);
        gbc.writeMem(0x29e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x639a);
        EXPECT(gbc.pc(), 0x29f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 023D
        gbc.setState(0xefc9, 0x2418, 0xe740, 0xc3b3, 0x5475, 0x17c8, 0x0, 0x1);
        gbc.writeMem(0xefc9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2418);
        EXPECT(gbc.pc(), 0xefca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc9), 0x4d);
        // 4D 023E
        gbc.setState(0x7d, 0xaa07, 0xf920, 0x3fe7, 0xe27c, 0x1b06, 0x0, 0x0);
        gbc.writeMem(0x7d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xaa07);
        EXPECT(gbc.pc(), 0x7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 023F
        gbc.setState(0x3e8e, 0xee72, 0x4ad0, 0x825f, 0xa517, 0xc71, 0x0, 0x0);
        gbc.writeMem(0x3e8e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xee72);
        EXPECT(gbc.pc(), 0x3e8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0240
        gbc.setState(0x4d01, 0x1fae, 0xdeb0, 0xb701, 0xdaa2, 0x5ee4, 0x1, 0x1);
        gbc.writeMem(0x4d01, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x1fae);
        EXPECT(gbc.pc(), 0x4d02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0241
        gbc.setState(0xb2, 0xe027, 0x71c0, 0x2e5e, 0x40cc, 0xc232, 0x0, 0x0);
        gbc.writeMem(0xb2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe027);
        EXPECT(gbc.pc(), 0xb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0242
        gbc.setState(0xdd0d, 0x537d, 0x83e0, 0xccfa, 0xde16, 0x4266, 0x1, 0x1);
        gbc.writeMem(0xdd0d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x537d);
        EXPECT(gbc.pc(), 0xdd0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd0d), 0x4d);
        // 4D 0243
        gbc.setState(0x7e48, 0x41b5, 0x2300, 0x5b89, 0xfeb5, 0x3c4, 0x1, 0x1);
        gbc.writeMem(0x7e48, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x41b5);
        EXPECT(gbc.pc(), 0x7e49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0244
        gbc.setState(0xc1e0, 0xce92, 0xa730, 0xa2cf, 0x93b2, 0xecf, 0x1, 0x0);
        gbc.writeMem(0xc1e0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xce92);
        EXPECT(gbc.pc(), 0xc1e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc1e0), 0x4d);
        // 4D 0245
        gbc.setState(0xa472, 0xd4ab, 0xf800, 0xbdd3, 0xc11e, 0xeef6, 0x1, 0x1);
        gbc.writeMem(0xa472, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xd4ab);
        EXPECT(gbc.pc(), 0xa473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa472), 0x4d);
        // 4D 0247
        gbc.setState(0x5638, 0xa6ac, 0xf010, 0x7ef2, 0xe514, 0xa0ac, 0x0, 0x0);
        gbc.writeMem(0x5638, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xa6ac);
        EXPECT(gbc.pc(), 0x5639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0248
        gbc.setState(0x1122, 0x4d6a, 0x50a0, 0x790c, 0xd917, 0xd1bf, 0x1, 0x1);
        gbc.writeMem(0x1122, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x4d6a);
        EXPECT(gbc.pc(), 0x1123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0249
        gbc.setState(0x3fa3, 0x40f2, 0x7700, 0xcbd4, 0x986, 0xb88b, 0x0, 0x1);
        gbc.writeMem(0x3fa3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x40f2);
        EXPECT(gbc.pc(), 0x3fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 024A
        gbc.setState(0xcada, 0x8719, 0xb400, 0x3332, 0xb8b6, 0xb469, 0x1, 0x1);
        gbc.writeMem(0xcada, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x8719);
        EXPECT(gbc.pc(), 0xcadb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcada), 0x4d);
        // 4D 024B
        gbc.setState(0xc5d0, 0x3be3, 0x1010, 0x20d0, 0xd601, 0x343f, 0x1, 0x1);
        gbc.writeMem(0xc5d0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x3be3);
        EXPECT(gbc.pc(), 0xc5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5d0), 0x4d);
        // 4D 024C
        gbc.setState(0xb487, 0x8fb5, 0xe160, 0x810a, 0xa613, 0x98af, 0x0, 0x1);
        gbc.writeMem(0xb487, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x8fb5);
        EXPECT(gbc.pc(), 0xb488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb487), 0x4d);
        // 4D 024D
        gbc.setState(0x3b86, 0xe0b2, 0x5f0, 0x4fc, 0x79b3, 0xbcbb, 0x1, 0x1);
        gbc.writeMem(0x3b86, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe0b2);
        EXPECT(gbc.pc(), 0x3b87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 024F
        gbc.setState(0xa85d, 0x2c7a, 0xf5d0, 0xb4bb, 0xe47f, 0x1ed1, 0x0, 0x0);
        gbc.writeMem(0xa85d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x2c7a);
        EXPECT(gbc.pc(), 0xa85e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa85d), 0x4d);
        // 4D 0250
        gbc.setState(0xa0af, 0x62c4, 0x670, 0x3465, 0x2f5, 0x7021, 0x1, 0x1);
        gbc.writeMem(0xa0af, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x62c4);
        EXPECT(gbc.pc(), 0xa0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0af), 0x4d);
        // 4D 0251
        gbc.setState(0x9836, 0xd525, 0xc980, 0x39b6, 0x4c47, 0x5140, 0x1, 0x1);
        gbc.writeMem(0x9836, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xd525);
        EXPECT(gbc.pc(), 0x9837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9836), 0x4d);
        // 4D 0252
        gbc.setState(0xbc50, 0xeb60, 0x5c90, 0xab5d, 0x58ab, 0x7f90, 0x0, 0x0);
        gbc.writeMem(0xbc50, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xeb60);
        EXPECT(gbc.pc(), 0xbc51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc50), 0x4d);
        // 4D 0253
        gbc.setState(0x24ea, 0xf90e, 0xa5e0, 0xf5d, 0x370e, 0x1a29, 0x1, 0x0);
        gbc.writeMem(0x24ea, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf90e);
        EXPECT(gbc.pc(), 0x24eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0254
        gbc.setState(0x5217, 0x4fc7, 0xe0a0, 0x5cc2, 0xeedb, 0xe156, 0x0, 0x1);
        gbc.writeMem(0x5217, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4fc7);
        EXPECT(gbc.pc(), 0x5218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0255
        gbc.setState(0xb89c, 0x171a, 0x5e40, 0xaa92, 0x6730, 0xdb78, 0x1, 0x0);
        gbc.writeMem(0xb89c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x171a);
        EXPECT(gbc.pc(), 0xb89d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb89c), 0x4d);
        // 4D 0256
        gbc.setState(0x31b1, 0x6d5f, 0xacc0, 0xea33, 0xd0c2, 0x393f, 0x0, 0x1);
        gbc.writeMem(0x31b1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x6d5f);
        EXPECT(gbc.pc(), 0x31b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0257
        gbc.setState(0x5b15, 0x422a, 0x2d20, 0xb926, 0xeed8, 0x3237, 0x0, 0x1);
        gbc.writeMem(0x5b15, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x422a);
        EXPECT(gbc.pc(), 0x5b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0258
        gbc.setState(0x3cd7, 0xc3e9, 0xfcc0, 0xd1e6, 0x6f29, 0x1951, 0x0, 0x0);
        gbc.writeMem(0x3cd7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc3e9);
        EXPECT(gbc.pc(), 0x3cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0259
        gbc.setState(0x5494, 0x2beb, 0x12b0, 0xe493, 0xc550, 0xbbeb, 0x0, 0x0);
        gbc.writeMem(0x5494, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2beb);
        EXPECT(gbc.pc(), 0x5495);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 025A
        gbc.setState(0x6320, 0x8083, 0xba20, 0xd8d6, 0x787b, 0x1361, 0x1, 0x1);
        gbc.writeMem(0x6320, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x8083);
        EXPECT(gbc.pc(), 0x6321);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 025B
        gbc.setState(0xb734, 0x227c, 0x350, 0xe633, 0x238a, 0x453a, 0x0, 0x0);
        gbc.writeMem(0xb734, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x227c);
        EXPECT(gbc.pc(), 0xb735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb734), 0x4d);
        // 4D 025C
        gbc.setState(0xb6ad, 0x665c, 0x80d0, 0x4094, 0xa036, 0x2691, 0x1, 0x1);
        gbc.writeMem(0xb6ad, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x665c);
        EXPECT(gbc.pc(), 0xb6ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6ad), 0x4d);
        // 4D 025D
        gbc.setState(0x267a, 0x9da6, 0xe780, 0x73ec, 0xa59a, 0x73c8, 0x0, 0x0);
        gbc.writeMem(0x267a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x9da6);
        EXPECT(gbc.pc(), 0x267b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 025E
        gbc.setState(0x430d, 0x1539, 0x60, 0x874, 0x3660, 0xe212, 0x0, 0x0);
        gbc.writeMem(0x430d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x1539);
        EXPECT(gbc.pc(), 0x430e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 025F
        gbc.setState(0x269f, 0xd0f5, 0x2650, 0x393, 0xe01c, 0x93bd, 0x0, 0x0);
        gbc.writeMem(0x269f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd0f5);
        EXPECT(gbc.pc(), 0x26a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0260
        gbc.setState(0xcf45, 0xd829, 0xfd30, 0xf3fa, 0x21ff, 0x706f, 0x1, 0x1);
        gbc.writeMem(0xcf45, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd829);
        EXPECT(gbc.pc(), 0xcf46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf45), 0x4d);
        // 4D 0261
        gbc.setState(0xd4db, 0xebf3, 0x5b40, 0x7b80, 0xca95, 0x1f71, 0x1, 0x1);
        gbc.writeMem(0xd4db, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xebf3);
        EXPECT(gbc.pc(), 0xd4dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4db), 0x4d);
        // 4D 0262
        gbc.setState(0xe4da, 0x9330, 0x6820, 0xfc3f, 0x648, 0x9315, 0x0, 0x0);
        gbc.writeMem(0xe4da, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9330);
        EXPECT(gbc.pc(), 0xe4db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4da), 0x4d);
        // 4D 0263
        gbc.setState(0x4e6c, 0xd2cb, 0xc940, 0xb893, 0x93f0, 0xde53, 0x0, 0x0);
        gbc.writeMem(0x4e6c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd2cb);
        EXPECT(gbc.pc(), 0x4e6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0264
        gbc.setState(0x98a4, 0x7e66, 0x6e50, 0x6105, 0xc904, 0x51af, 0x0, 0x0);
        gbc.writeMem(0x98a4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7e66);
        EXPECT(gbc.pc(), 0x98a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98a4), 0x4d);
        // 4D 0265
        gbc.setState(0x4ffe, 0xf594, 0x4f0, 0xa784, 0x41fa, 0xe53a, 0x1, 0x0);
        gbc.writeMem(0x4ffe, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf594);
        EXPECT(gbc.pc(), 0x4fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0268
        gbc.setState(0x16d8, 0x3341, 0xd9d0, 0x8b8, 0x90bb, 0xf0c8, 0x1, 0x0);
        gbc.writeMem(0x16d8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3341);
        EXPECT(gbc.pc(), 0x16d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0269
        gbc.setState(0x7215, 0x58b, 0x10c0, 0xcd09, 0xb895, 0x887, 0x1, 0x0);
        gbc.writeMem(0x7215, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x58b);
        EXPECT(gbc.pc(), 0x7216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 026A
        gbc.setState(0x1a83, 0x53f, 0x5c80, 0x78c0, 0x959b, 0x573f, 0x1, 0x1);
        gbc.writeMem(0x1a83, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x53f);
        EXPECT(gbc.pc(), 0x1a84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 026B
        gbc.setState(0x2e83, 0x410b, 0x7b70, 0x6400, 0x74a3, 0xa4c, 0x1, 0x1);
        gbc.writeMem(0x2e83, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x410b);
        EXPECT(gbc.pc(), 0x2e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 026C
        gbc.setState(0x3d60, 0x1f56, 0x210, 0x4cfe, 0x48f7, 0x4349, 0x0, 0x1);
        gbc.writeMem(0x3d60, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1f56);
        EXPECT(gbc.pc(), 0x3d61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 026D
        gbc.setState(0xb001, 0x281d, 0x5fc0, 0x7bd0, 0x8369, 0x94b9, 0x1, 0x0);
        gbc.writeMem(0xb001, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x281d);
        EXPECT(gbc.pc(), 0xb002);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb001), 0x4d);
        // 4D 026E
        gbc.setState(0x4b4b, 0xa4fc, 0xf670, 0x2a08, 0xe5ad, 0x4e53, 0x1, 0x1);
        gbc.writeMem(0x4b4b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xa4fc);
        EXPECT(gbc.pc(), 0x4b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 026F
        gbc.setState(0x66aa, 0xf5fc, 0xe280, 0x42bf, 0x1a0c, 0xa5ea, 0x0, 0x0);
        gbc.writeMem(0x66aa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf5fc);
        EXPECT(gbc.pc(), 0x66ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0270
        gbc.setState(0x70d6, 0x1b39, 0xd470, 0xab50, 0x4d3d, 0xc793, 0x1, 0x0);
        gbc.writeMem(0x70d6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1b39);
        EXPECT(gbc.pc(), 0x70d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0271
        gbc.setState(0x1d73, 0xec9e, 0xe8f0, 0x5660, 0x4a23, 0x1867, 0x1, 0x0);
        gbc.writeMem(0x1d73, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xec9e);
        EXPECT(gbc.pc(), 0x1d74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0272
        gbc.setState(0x3883, 0x9322, 0x470, 0x1e2e, 0x3285, 0xb96e, 0x1, 0x0);
        gbc.writeMem(0x3883, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9322);
        EXPECT(gbc.pc(), 0x3884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0273
        gbc.setState(0x2184, 0xa821, 0xeec0, 0xd744, 0x4c4a, 0xe8cc, 0x1, 0x0);
        gbc.writeMem(0x2184, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa821);
        EXPECT(gbc.pc(), 0x2185);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0274
        gbc.setState(0xcc25, 0x933a, 0xe010, 0x2d8e, 0xa47d, 0x742e, 0x0, 0x1);
        gbc.writeMem(0xcc25, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x933a);
        EXPECT(gbc.pc(), 0xcc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc25), 0x4d);
        // 4D 0275
        gbc.setState(0x412b, 0x4465, 0x3b00, 0x984c, 0x1e01, 0x2ae6, 0x1, 0x1);
        gbc.writeMem(0x412b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4465);
        EXPECT(gbc.pc(), 0x412c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0276
        gbc.setState(0x11bb, 0x2fd6, 0x3a30, 0x7045, 0xf7d0, 0x6b9b, 0x1, 0x0);
        gbc.writeMem(0x11bb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x2fd6);
        EXPECT(gbc.pc(), 0x11bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0277
        gbc.setState(0x4d5d, 0xac1f, 0x6750, 0x805a, 0xd394, 0xd96b, 0x0, 0x1);
        gbc.writeMem(0x4d5d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xac1f);
        EXPECT(gbc.pc(), 0x4d5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0278
        gbc.setState(0x4e35, 0x3e76, 0xacc0, 0x5952, 0xa631, 0xfab0, 0x0, 0x0);
        gbc.writeMem(0x4e35, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x3e76);
        EXPECT(gbc.pc(), 0x4e36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0279
        gbc.setState(0x9a4d, 0xe1cb, 0x2d70, 0xcc0d, 0xc1c8, 0xe12f, 0x0, 0x0);
        gbc.writeMem(0x9a4d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe1cb);
        EXPECT(gbc.pc(), 0x9a4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4d), 0x4d);
        // 4D 027A
        gbc.setState(0x5bde, 0x87f5, 0xccd0, 0xc9d1, 0xb34a, 0x3b8a, 0x0, 0x1);
        gbc.writeMem(0x5bde, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x87f5);
        EXPECT(gbc.pc(), 0x5bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 027B
        gbc.setState(0x1fe2, 0x2d01, 0x5250, 0x8f2, 0xc0a6, 0xf97a, 0x1, 0x1);
        gbc.writeMem(0x1fe2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x2d01);
        EXPECT(gbc.pc(), 0x1fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 027D
        gbc.setState(0xd2af, 0xc844, 0x4f0, 0x6b31, 0xba67, 0x3dfc, 0x1, 0x0);
        gbc.writeMem(0xd2af, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc844);
        EXPECT(gbc.pc(), 0xd2b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2af), 0x4d);
        // 4D 027E
        gbc.setState(0x7ea6, 0x6f60, 0x62b0, 0x814c, 0x1672, 0xaff0, 0x0, 0x0);
        gbc.writeMem(0x7ea6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6f60);
        EXPECT(gbc.pc(), 0x7ea7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 027F
        gbc.setState(0x541f, 0xa2e, 0x4b90, 0x5d99, 0xa9cb, 0x4d84, 0x0, 0x0);
        gbc.writeMem(0x541f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xa2e);
        EXPECT(gbc.pc(), 0x5420);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0280
        gbc.setState(0xdda9, 0x9f28, 0xfa30, 0x6513, 0x3a2, 0xff39, 0x1, 0x1);
        gbc.writeMem(0xdda9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x9f28);
        EXPECT(gbc.pc(), 0xddaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdda9), 0x4d);
        // 4D 0281
        gbc.setState(0x82de, 0xc214, 0xea50, 0xe8fa, 0x675f, 0x69b7, 0x1, 0x0);
        gbc.writeMem(0x82de, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xc214);
        EXPECT(gbc.pc(), 0x82df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82de), 0x4d);
        // 4D 0282
        gbc.setState(0x1ee6, 0x3a51, 0x6bc0, 0x87e3, 0xace7, 0xac04, 0x0, 0x1);
        gbc.writeMem(0x1ee6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3a51);
        EXPECT(gbc.pc(), 0x1ee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0283
        gbc.setState(0x5913, 0x7ae0, 0xfec0, 0x1e6e, 0x8394, 0xe50f, 0x0, 0x0);
        gbc.writeMem(0x5913, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7ae0);
        EXPECT(gbc.pc(), 0x5914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0284
        gbc.setState(0xa271, 0x9379, 0x47a0, 0x5e70, 0x19b3, 0x843d, 0x1, 0x1);
        gbc.writeMem(0xa271, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9379);
        EXPECT(gbc.pc(), 0xa272);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa271), 0x4d);
        // 4D 0285
        gbc.setState(0xca6d, 0x97a3, 0x4b90, 0x5c0a, 0x97c4, 0xb6b6, 0x1, 0x1);
        gbc.writeMem(0xca6d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x97a3);
        EXPECT(gbc.pc(), 0xca6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca6d), 0x4d);
        // 4D 0286
        gbc.setState(0xdca1, 0x27f1, 0x3ae0, 0x7dda, 0x9949, 0xf581, 0x1, 0x0);
        gbc.writeMem(0xdca1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x27f1);
        EXPECT(gbc.pc(), 0xdca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca1), 0x4d);
        // 4D 0287
        gbc.setState(0x6a04, 0x113b, 0x82b0, 0xcec6, 0xecc7, 0xb5a7, 0x0, 0x1);
        gbc.writeMem(0x6a04, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x113b);
        EXPECT(gbc.pc(), 0x6a05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0288
        gbc.setState(0xa517, 0x1063, 0x7f70, 0x4c42, 0x669b, 0x949f, 0x0, 0x1);
        gbc.writeMem(0xa517, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1063);
        EXPECT(gbc.pc(), 0xa518);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa517), 0x4d);
        // 4D 0289
        gbc.setState(0x52d9, 0x12ca, 0xc600, 0x16ff, 0xe56a, 0xaf6b, 0x1, 0x1);
        gbc.writeMem(0x52d9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x12ca);
        EXPECT(gbc.pc(), 0x52da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 028A
        gbc.setState(0x42e9, 0xd105, 0x31f0, 0xddfc, 0x9017, 0xa60f, 0x0, 0x0);
        gbc.writeMem(0x42e9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd105);
        EXPECT(gbc.pc(), 0x42ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 028B
        gbc.setState(0x42a4, 0x8f72, 0xb020, 0x3e7, 0xb8bd, 0x14ad, 0x1, 0x1);
        gbc.writeMem(0x42a4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x8f72);
        EXPECT(gbc.pc(), 0x42a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 028C
        gbc.setState(0x50fe, 0xb56c, 0x61a0, 0x369c, 0xae63, 0x5b02, 0x1, 0x0);
        gbc.writeMem(0x50fe, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb56c);
        EXPECT(gbc.pc(), 0x50ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 028D
        gbc.setState(0xbf63, 0x5ca8, 0x400, 0x4bc7, 0xd48a, 0xe11f, 0x0, 0x0);
        gbc.writeMem(0xbf63, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5ca8);
        EXPECT(gbc.pc(), 0xbf64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf63), 0x4d);
        // 4D 028E
        gbc.setState(0x197f, 0x629d, 0xace0, 0x27d6, 0xcfea, 0x6c1, 0x0, 0x1);
        gbc.writeMem(0x197f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x629d);
        EXPECT(gbc.pc(), 0x1980);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 028F
        gbc.setState(0x9177, 0x67e, 0xbd50, 0x5d2b, 0x484, 0x7197, 0x1, 0x0);
        gbc.writeMem(0x9177, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x67e);
        EXPECT(gbc.pc(), 0x9178);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9177), 0x4d);
        // 4D 0290
        gbc.setState(0x7f28, 0xbf86, 0xbaa0, 0x7a40, 0x68b3, 0x85d, 0x0, 0x1);
        gbc.writeMem(0x7f28, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xbf86);
        EXPECT(gbc.pc(), 0x7f29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0291
        gbc.setState(0x53f1, 0xd0c6, 0xdd10, 0xce9a, 0xac5c, 0xf5, 0x0, 0x0);
        gbc.writeMem(0x53f1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xd0c6);
        EXPECT(gbc.pc(), 0x53f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0292
        gbc.setState(0x3956, 0xc535, 0x1200, 0xe7bc, 0x17a0, 0xbb89, 0x0, 0x1);
        gbc.writeMem(0x3956, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xc535);
        EXPECT(gbc.pc(), 0x3957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0293
        gbc.setState(0x3cca, 0x8ded, 0x7650, 0xaafc, 0xe98a, 0x9d7b, 0x0, 0x1);
        gbc.writeMem(0x3cca, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x8ded);
        EXPECT(gbc.pc(), 0x3ccb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0294
        gbc.setState(0x2a82, 0x23c4, 0x2330, 0x128a, 0x217c, 0x4a7c, 0x1, 0x0);
        gbc.writeMem(0x2a82, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x23c4);
        EXPECT(gbc.pc(), 0x2a83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0295
        gbc.setState(0x4c38, 0xaef0, 0x7e30, 0x5129, 0xac9c, 0x3b0, 0x0, 0x1);
        gbc.writeMem(0x4c38, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xaef0);
        EXPECT(gbc.pc(), 0x4c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0296
        gbc.setState(0x48e8, 0x26e7, 0x24e0, 0xaa97, 0xca7c, 0x41a3, 0x0, 0x0);
        gbc.writeMem(0x48e8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x26e7);
        EXPECT(gbc.pc(), 0x48e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0297
        gbc.setState(0xd927, 0x7cf5, 0x3350, 0x51ec, 0x9dad, 0x14bb, 0x0, 0x0);
        gbc.writeMem(0xd927, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7cf5);
        EXPECT(gbc.pc(), 0xd928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd927), 0x4d);
        // 4D 0298
        gbc.setState(0xdfba, 0xf6ce, 0x9b10, 0x4997, 0x4f09, 0x8b6, 0x0, 0x0);
        gbc.writeMem(0xdfba, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xf6ce);
        EXPECT(gbc.pc(), 0xdfbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfba), 0x4d);
        // 4D 0299
        gbc.setState(0x80be, 0x3c17, 0xf030, 0x2cc4, 0xfb95, 0xafc1, 0x0, 0x1);
        gbc.writeMem(0x80be, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x3c17);
        EXPECT(gbc.pc(), 0x80bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80be), 0x4d);
        // 4D 029A
        gbc.setState(0x336c, 0x6fc3, 0x51b0, 0x3bad, 0xca03, 0x4f02, 0x0, 0x1);
        gbc.writeMem(0x336c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x6fc3);
        EXPECT(gbc.pc(), 0x336d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 029B
        gbc.setState(0xd049, 0xe7be, 0x9110, 0xc60e, 0xddc4, 0x4d45, 0x1, 0x0);
        gbc.writeMem(0xd049, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe7be);
        EXPECT(gbc.pc(), 0xd04a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd049), 0x4d);
        // 4D 029C
        gbc.setState(0xbc0a, 0x655c, 0x4f80, 0xb7ab, 0xfab3, 0x6724, 0x1, 0x1);
        gbc.writeMem(0xbc0a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x655c);
        EXPECT(gbc.pc(), 0xbc0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc0a), 0x4d);
        // 4D 029D
        gbc.setState(0x947e, 0xb2c3, 0xea10, 0x7726, 0x8390, 0xe99b, 0x0, 0x0);
        gbc.writeMem(0x947e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xb2c3);
        EXPECT(gbc.pc(), 0x947f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x947e), 0x4d);
        // 4D 029E
        gbc.setState(0x5d91, 0x84fa, 0xf150, 0x4d85, 0xb21c, 0xe6d0, 0x1, 0x1);
        gbc.writeMem(0x5d91, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x84fa);
        EXPECT(gbc.pc(), 0x5d92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 029F
        gbc.setState(0x522b, 0xc6d0, 0x8d70, 0x4b83, 0x3204, 0xaa8e, 0x0, 0x0);
        gbc.writeMem(0x522b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xc6d0);
        EXPECT(gbc.pc(), 0x522c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02A0
        gbc.setState(0x166c, 0x364, 0x61a0, 0x6473, 0xcff6, 0x3ebe, 0x0, 0x1);
        gbc.writeMem(0x166c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x364);
        EXPECT(gbc.pc(), 0x166d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02A1
        gbc.setState(0xd0d8, 0x29cf, 0x9fe0, 0x2aeb, 0xd90c, 0x51cf, 0x0, 0x0);
        gbc.writeMem(0xd0d8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x29cf);
        EXPECT(gbc.pc(), 0xd0d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0d8), 0x4d);
        // 4D 02A2
        gbc.setState(0x758, 0xff0a, 0x38a0, 0x41c4, 0x4452, 0x275c, 0x1, 0x0);
        gbc.writeMem(0x758, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xff0a);
        EXPECT(gbc.pc(), 0x759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02A3
        gbc.setState(0xd6e7, 0x626a, 0x7450, 0x29d0, 0xe408, 0xf563, 0x0, 0x1);
        gbc.writeMem(0xd6e7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x626a);
        EXPECT(gbc.pc(), 0xd6e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6e7), 0x4d);
        // 4D 02A4
        gbc.setState(0xe999, 0x6f02, 0x17a0, 0x16b9, 0xe710, 0x2bf6, 0x1, 0x1);
        gbc.writeMem(0xe999, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x6f02);
        EXPECT(gbc.pc(), 0xe99a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe999), 0x4d);
        // 4D 02A6
        gbc.setState(0x2b34, 0xcca6, 0xe370, 0x8797, 0x6caf, 0xbd42, 0x1, 0x0);
        gbc.writeMem(0x2b34, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcca6);
        EXPECT(gbc.pc(), 0x2b35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02A7
        gbc.setState(0x14c, 0x5bab, 0x9a30, 0xe2cb, 0x6233, 0xdb42, 0x1, 0x1);
        gbc.writeMem(0x14c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x5bab);
        EXPECT(gbc.pc(), 0x14d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02A8
        gbc.setState(0x4080, 0x19d0, 0x1c80, 0x2863, 0x8250, 0xad5, 0x1, 0x1);
        gbc.writeMem(0x4080, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x19d0);
        EXPECT(gbc.pc(), 0x4081);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02A9
        gbc.setState(0x9123, 0x6fb4, 0x7280, 0x511b, 0xed8a, 0x4d62, 0x1, 0x0);
        gbc.writeMem(0x9123, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x6fb4);
        EXPECT(gbc.pc(), 0x9124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9123), 0x4d);
        // 4D 02AA
        gbc.setState(0x59cc, 0x4ebf, 0x3370, 0x4329, 0xa361, 0x211, 0x1, 0x0);
        gbc.writeMem(0x59cc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4ebf);
        EXPECT(gbc.pc(), 0x59cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02AB
        gbc.setState(0xa09, 0xd78a, 0x73b0, 0xa966, 0x7737, 0x8c2c, 0x1, 0x0);
        gbc.writeMem(0xa09, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xd78a);
        EXPECT(gbc.pc(), 0xa0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02AC
        gbc.setState(0x1463, 0x561b, 0x2370, 0x1868, 0x621b, 0x7d67, 0x0, 0x1);
        gbc.writeMem(0x1463, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x561b);
        EXPECT(gbc.pc(), 0x1464);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02AD
        gbc.setState(0x81db, 0x8a08, 0x3a70, 0x9e40, 0x7a0d, 0xa13, 0x0, 0x0);
        gbc.writeMem(0x81db, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8a08);
        EXPECT(gbc.pc(), 0x81dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81db), 0x4d);
        // 4D 02AE
        gbc.setState(0x3b93, 0x557c, 0x2570, 0x6a83, 0x1fdf, 0x37b6, 0x0, 0x1);
        gbc.writeMem(0x3b93, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x557c);
        EXPECT(gbc.pc(), 0x3b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02AF
        gbc.setState(0x48c, 0x4644, 0x1910, 0xa72d, 0x7e1f, 0x592d, 0x1, 0x1);
        gbc.writeMem(0x48c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4644);
        EXPECT(gbc.pc(), 0x48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02B0
        gbc.setState(0xc8e0, 0xa5f3, 0x98d0, 0x2f95, 0xad0d, 0xd396, 0x0, 0x1);
        gbc.writeMem(0xc8e0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa5f3);
        EXPECT(gbc.pc(), 0xc8e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8e0), 0x4d);
        // 4D 02B1
        gbc.setState(0xc9d5, 0x107c, 0x1a20, 0xe0cd, 0xfa, 0x7daa, 0x1, 0x1);
        gbc.writeMem(0xc9d5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x107c);
        EXPECT(gbc.pc(), 0xc9d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d5), 0x4d);
        // 4D 02B2
        gbc.setState(0xefda, 0x3fba, 0x7bf0, 0xcf15, 0x493c, 0xf1ae, 0x0, 0x1);
        gbc.writeMem(0xefda, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3fba);
        EXPECT(gbc.pc(), 0xefdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefda), 0x4d);
        // 4D 02B4
        gbc.setState(0x6d53, 0xaafe, 0x680, 0x3706, 0x21bb, 0x42b, 0x1, 0x0);
        gbc.writeMem(0x6d53, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaafe);
        EXPECT(gbc.pc(), 0x6d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02B5
        gbc.setState(0x7224, 0x8ecf, 0x2670, 0xc44c, 0xd4b4, 0x8587, 0x0, 0x1);
        gbc.writeMem(0x7224, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8ecf);
        EXPECT(gbc.pc(), 0x7225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02B6
        gbc.setState(0x395d, 0x7139, 0x52f0, 0xd06, 0xbad1, 0x9a0, 0x1, 0x1);
        gbc.writeMem(0x395d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7139);
        EXPECT(gbc.pc(), 0x395e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02B7
        gbc.setState(0x5e40, 0xdf25, 0xc6c0, 0x6ee2, 0xe671, 0xf7ba, 0x1, 0x0);
        gbc.writeMem(0x5e40, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xdf25);
        EXPECT(gbc.pc(), 0x5e41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02B8
        gbc.setState(0x630b, 0x42d1, 0xf520, 0xac1a, 0xf90, 0x7585, 0x0, 0x1);
        gbc.writeMem(0x630b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x42d1);
        EXPECT(gbc.pc(), 0x630c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02B9
        gbc.setState(0xdef0, 0x9fb1, 0xa830, 0x11f4, 0xb8a4, 0xa5d2, 0x1, 0x0);
        gbc.writeMem(0xdef0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9fb1);
        EXPECT(gbc.pc(), 0xdef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef0), 0x4d);
        // 4D 02BA
        gbc.setState(0x6d0d, 0xb678, 0xb130, 0x4486, 0x6fd9, 0xde28, 0x1, 0x1);
        gbc.writeMem(0x6d0d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xb678);
        EXPECT(gbc.pc(), 0x6d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02BB
        gbc.setState(0x2f7c, 0xc855, 0xc490, 0x9770, 0xa886, 0xabb5, 0x1, 0x1);
        gbc.writeMem(0x2f7c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xc855);
        EXPECT(gbc.pc(), 0x2f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02BC
        gbc.setState(0xd91e, 0xecbf, 0x3ac0, 0x7d7b, 0x269a, 0x636, 0x1, 0x1);
        gbc.writeMem(0xd91e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xecbf);
        EXPECT(gbc.pc(), 0xd91f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd91e), 0x4d);
        // 4D 02BD
        gbc.setState(0xb9f5, 0x330f, 0x1370, 0xf783, 0x1ad9, 0x4d97, 0x0, 0x0);
        gbc.writeMem(0xb9f5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x330f);
        EXPECT(gbc.pc(), 0xb9f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f5), 0x4d);
        // 4D 02BE
        gbc.setState(0xa4a2, 0xc314, 0x8250, 0xc4ee, 0xc88, 0xcabc, 0x1, 0x1);
        gbc.writeMem(0xa4a2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xc314);
        EXPECT(gbc.pc(), 0xa4a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4a2), 0x4d);
        // 4D 02BF
        gbc.setState(0x6103, 0xe0cc, 0x470, 0x9a4e, 0x236a, 0xcf58, 0x0, 0x1);
        gbc.writeMem(0x6103, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xe0cc);
        EXPECT(gbc.pc(), 0x6104);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02C0
        gbc.setState(0xd127, 0xfaf0, 0x4eb0, 0xa8d5, 0xd5e5, 0x6a04, 0x1, 0x0);
        gbc.writeMem(0xd127, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfaf0);
        EXPECT(gbc.pc(), 0xd128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd127), 0x4d);
        // 4D 02C1
        gbc.setState(0x2585, 0x47b2, 0x9060, 0x7db5, 0xb0d, 0xcafb, 0x1, 0x1);
        gbc.writeMem(0x2585, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x47b2);
        EXPECT(gbc.pc(), 0x2586);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02C3
        gbc.setState(0x766f, 0x454f, 0x560, 0xff30, 0x1f3b, 0x820d, 0x0, 0x0);
        gbc.writeMem(0x766f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x454f);
        EXPECT(gbc.pc(), 0x7670);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02C4
        gbc.setState(0x6858, 0xd610, 0xc150, 0x1b1f, 0xe64f, 0x1bd3, 0x0, 0x0);
        gbc.writeMem(0x6858, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd610);
        EXPECT(gbc.pc(), 0x6859);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02C5
        gbc.setState(0x74a9, 0x3ee6, 0x7f50, 0xe9a0, 0x1db0, 0xeadc, 0x0, 0x0);
        gbc.writeMem(0x74a9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x3ee6);
        EXPECT(gbc.pc(), 0x74aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02C7
        gbc.setState(0x623e, 0xffcf, 0x8880, 0x1a03, 0x1847, 0x70bf, 0x0, 0x0);
        gbc.writeMem(0x623e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xffcf);
        EXPECT(gbc.pc(), 0x623f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02C8
        gbc.setState(0xa371, 0xb043, 0x8890, 0xdf42, 0xe7b7, 0xbb77, 0x1, 0x1);
        gbc.writeMem(0xa371, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xb043);
        EXPECT(gbc.pc(), 0xa372);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa371), 0x4d);
        // 4D 02C9
        gbc.setState(0xcbd4, 0x7431, 0xe760, 0x145d, 0xdcb8, 0x2aaa, 0x0, 0x1);
        gbc.writeMem(0xcbd4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7431);
        EXPECT(gbc.pc(), 0xcbd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbd4), 0x4d);
        // 4D 02CA
        gbc.setState(0x23ff, 0x169, 0xde60, 0x6caa, 0xd230, 0xff35, 0x1, 0x1);
        gbc.writeMem(0x23ff, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x169);
        EXPECT(gbc.pc(), 0x2400);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02CB
        gbc.setState(0xeb37, 0x553f, 0x2000, 0x74e3, 0x6a1f, 0x12a4, 0x1, 0x1);
        gbc.writeMem(0xeb37, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x553f);
        EXPECT(gbc.pc(), 0xeb38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb37), 0x4d);
        // 4D 02CC
        gbc.setState(0x4f57, 0xe3f0, 0xd5c0, 0xa6fa, 0x3f42, 0x49a5, 0x1, 0x0);
        gbc.writeMem(0x4f57, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe3f0);
        EXPECT(gbc.pc(), 0x4f58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02CD
        gbc.setState(0x8a49, 0xd0ef, 0x2b20, 0xeaed, 0xacfa, 0xf33, 0x1, 0x1);
        gbc.writeMem(0x8a49, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xd0ef);
        EXPECT(gbc.pc(), 0x8a4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a49), 0x4d);
        // 4D 02CE
        gbc.setState(0x4d12, 0x6283, 0xf810, 0x9c21, 0xc3f9, 0xb436, 0x0, 0x0);
        gbc.writeMem(0x4d12, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x6283);
        EXPECT(gbc.pc(), 0x4d13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02CF
        gbc.setState(0x4728, 0x74fa, 0x5010, 0x7c4f, 0xdc6c, 0x132, 0x0, 0x1);
        gbc.writeMem(0x4728, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x74fa);
        EXPECT(gbc.pc(), 0x4729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02D0
        gbc.setState(0x834d, 0xa7e2, 0x1d40, 0x950b, 0x2d8b, 0xf1e1, 0x0, 0x1);
        gbc.writeMem(0x834d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa7e2);
        EXPECT(gbc.pc(), 0x834e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x834d), 0x4d);
        // 4D 02D1
        gbc.setState(0xd16c, 0xb50d, 0x5620, 0xb096, 0xaba2, 0x4a63, 0x0, 0x1);
        gbc.writeMem(0xd16c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xb50d);
        EXPECT(gbc.pc(), 0xd16d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd16c), 0x4d);
        // 4D 02D2
        gbc.setState(0x3516, 0x7751, 0x2610, 0x179f, 0x345f, 0x4fc, 0x1, 0x1);
        gbc.writeMem(0x3516, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7751);
        EXPECT(gbc.pc(), 0x3517);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02D4
        gbc.setState(0xad91, 0xb007, 0xfe30, 0xa557, 0x4161, 0x5b8e, 0x0, 0x1);
        gbc.writeMem(0xad91, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb007);
        EXPECT(gbc.pc(), 0xad92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad91), 0x4d);
        // 4D 02D5
        gbc.setState(0x3a89, 0xde75, 0x4450, 0x7628, 0x3b82, 0x854c, 0x1, 0x0);
        gbc.writeMem(0x3a89, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xde75);
        EXPECT(gbc.pc(), 0x3a8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02D6
        gbc.setState(0x2fef, 0x8a34, 0x7ad0, 0xaebb, 0xc60a, 0xe015, 0x1, 0x0);
        gbc.writeMem(0x2fef, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8a34);
        EXPECT(gbc.pc(), 0x2ff0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02D7
        gbc.setState(0x663e, 0x8ea7, 0xb400, 0x3130, 0x202f, 0x4bdd, 0x0, 0x0);
        gbc.writeMem(0x663e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8ea7);
        EXPECT(gbc.pc(), 0x663f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02D8
        gbc.setState(0x9530, 0x428e, 0x90d0, 0xcd70, 0x468e, 0x21dd, 0x0, 0x1);
        gbc.writeMem(0x9530, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x428e);
        EXPECT(gbc.pc(), 0x9531);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9530), 0x4d);
        // 4D 02D9
        gbc.setState(0x635e, 0x7d36, 0x9710, 0x5f4d, 0x439d, 0x8d4e, 0x1, 0x1);
        gbc.writeMem(0x635e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x7d36);
        EXPECT(gbc.pc(), 0x635f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02DA
        gbc.setState(0xe211, 0x62a8, 0x56c0, 0x95f, 0x56b5, 0x6804, 0x1, 0x1);
        gbc.writeMem(0xe211, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x62a8);
        EXPECT(gbc.pc(), 0xe212);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe211), 0x4d);
        // 4D 02DB
        gbc.setState(0x82f2, 0x8290, 0x8290, 0xed68, 0x7462, 0xf6ca, 0x1, 0x1);
        gbc.writeMem(0x82f2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x8290);
        EXPECT(gbc.pc(), 0x82f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82f2), 0x4d);
        // 4D 02DC
        gbc.setState(0x8fbf, 0x7ec7, 0x3c20, 0xf4a4, 0xf88, 0xa5a7, 0x0, 0x0);
        gbc.writeMem(0x8fbf, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x7ec7);
        EXPECT(gbc.pc(), 0x8fc0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fbf), 0x4d);
        // 4D 02DD
        gbc.setState(0x3a88, 0x2801, 0x3380, 0xb617, 0xfccf, 0xcb1e, 0x0, 0x0);
        gbc.writeMem(0x3a88, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2801);
        EXPECT(gbc.pc(), 0x3a89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02DE
        gbc.setState(0x7406, 0x608d, 0x1b90, 0x8198, 0xfcff, 0x967b, 0x0, 0x1);
        gbc.writeMem(0x7406, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x608d);
        EXPECT(gbc.pc(), 0x7407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02DF
        gbc.setState(0xd770, 0x36a7, 0x75b0, 0x3862, 0xea6b, 0xf8df, 0x1, 0x0);
        gbc.writeMem(0xd770, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x36a7);
        EXPECT(gbc.pc(), 0xd771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd770), 0x4d);
        // 4D 02E0
        gbc.setState(0x7ce, 0xe651, 0xc010, 0xea22, 0x5200, 0x90ec, 0x0, 0x0);
        gbc.writeMem(0x7ce, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xe651);
        EXPECT(gbc.pc(), 0x7cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02E1
        gbc.setState(0x6e88, 0xd261, 0x7ff0, 0xbc70, 0xd00, 0x5d92, 0x0, 0x1);
        gbc.writeMem(0x6e88, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xd261);
        EXPECT(gbc.pc(), 0x6e89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02E2
        gbc.setState(0x870e, 0x2f64, 0x37c0, 0xe4af, 0x83ac, 0x7250, 0x0, 0x0);
        gbc.writeMem(0x870e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2f64);
        EXPECT(gbc.pc(), 0x870f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x870e), 0x4d);
        // 4D 02E3
        gbc.setState(0xe2e8, 0x236b, 0xd40, 0x151b, 0x5f20, 0x2e57, 0x1, 0x0);
        gbc.writeMem(0xe2e8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x236b);
        EXPECT(gbc.pc(), 0xe2e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2e8), 0x4d);
        // 4D 02E4
        gbc.setState(0x92e7, 0x252d, 0x2fa0, 0x6579, 0xcda, 0xbece, 0x0, 0x1);
        gbc.writeMem(0x92e7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x252d);
        EXPECT(gbc.pc(), 0x92e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e7), 0x4d);
        // 4D 02E5
        gbc.setState(0x63a, 0x38e1, 0x6840, 0xab7c, 0xa023, 0x3344, 0x1, 0x0);
        gbc.writeMem(0x63a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x38e1);
        EXPECT(gbc.pc(), 0x63b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02E6
        gbc.setState(0x5f29, 0x899c, 0x7720, 0xb222, 0x34c1, 0x28d0, 0x1, 0x0);
        gbc.writeMem(0x5f29, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x899c);
        EXPECT(gbc.pc(), 0x5f2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02E7
        gbc.setState(0x402a, 0x8c47, 0xd730, 0xf65e, 0x48a, 0xd934, 0x0, 0x1);
        gbc.writeMem(0x402a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8c47);
        EXPECT(gbc.pc(), 0x402b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02E8
        gbc.setState(0x1b5a, 0xae40, 0x4200, 0xec85, 0xc41b, 0x9e0a, 0x0, 0x0);
        gbc.writeMem(0x1b5a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xae40);
        EXPECT(gbc.pc(), 0x1b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02E9
        gbc.setState(0xd876, 0x853d, 0xb540, 0x5998, 0xd43a, 0x228, 0x1, 0x0);
        gbc.writeMem(0xd876, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x853d);
        EXPECT(gbc.pc(), 0xd877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd876), 0x4d);
        // 4D 02EA
        gbc.setState(0xa7a7, 0xc66, 0xd620, 0x7c0, 0x6076, 0xf67a, 0x1, 0x1);
        gbc.writeMem(0xa7a7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc66);
        EXPECT(gbc.pc(), 0xa7a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a7), 0x4d);
        // 4D 02EB
        gbc.setState(0xa7ba, 0x98a0, 0x88c0, 0xc6f8, 0x1af6, 0xb8b0, 0x1, 0x0);
        gbc.writeMem(0xa7ba, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x98a0);
        EXPECT(gbc.pc(), 0xa7bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7ba), 0x4d);
        // 4D 02ED
        gbc.setState(0x668, 0xfa08, 0x6590, 0x169, 0xcb5, 0x2e1b, 0x0, 0x0);
        gbc.writeMem(0x668, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xfa08);
        EXPECT(gbc.pc(), 0x669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02EE
        gbc.setState(0x1d8f, 0x9ac6, 0xe360, 0x1291, 0x1c88, 0xdd44, 0x1, 0x1);
        gbc.writeMem(0x1d8f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9ac6);
        EXPECT(gbc.pc(), 0x1d90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02EF
        gbc.setState(0xc2f, 0x82cf, 0x1e50, 0x2e5b, 0x8035, 0x33d1, 0x0, 0x0);
        gbc.writeMem(0xc2f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x82cf);
        EXPECT(gbc.pc(), 0xc30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02F0
        gbc.setState(0xa67c, 0x9fe6, 0x9ee0, 0xef63, 0x3841, 0xe20, 0x0, 0x0);
        gbc.writeMem(0xa67c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9fe6);
        EXPECT(gbc.pc(), 0xa67d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67c), 0x4d);
        // 4D 02F1
        gbc.setState(0xde21, 0xb36c, 0x9a40, 0x7dfc, 0xdc3d, 0x3e8e, 0x1, 0x1);
        gbc.writeMem(0xde21, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb36c);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde21), 0x4d);
        // 4D 02F2
        gbc.setState(0x9923, 0x9407, 0x8c90, 0x447b, 0x380b, 0x2df9, 0x1, 0x0);
        gbc.writeMem(0x9923, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9407);
        EXPECT(gbc.pc(), 0x9924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9923), 0x4d);
        // 4D 02F3
        gbc.setState(0x99f, 0x8930, 0x5820, 0x17a8, 0xaf20, 0x344e, 0x0, 0x1);
        gbc.writeMem(0x99f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8930);
        EXPECT(gbc.pc(), 0x9a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02F4
        gbc.setState(0x6b76, 0x1db1, 0x4b80, 0x39e8, 0xbdc, 0xd92b, 0x1, 0x0);
        gbc.writeMem(0x6b76, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1db1);
        EXPECT(gbc.pc(), 0x6b77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 02F5
        gbc.setState(0x59c9, 0x7113, 0x9fb0, 0x8fa8, 0x3b29, 0x5421, 0x1, 0x1);
        gbc.writeMem(0x59c9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7113);
        EXPECT(gbc.pc(), 0x59ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02F6
        gbc.setState(0x9923, 0x7e36, 0x6620, 0x63c7, 0x5b9c, 0x51e5, 0x1, 0x1);
        gbc.writeMem(0x9923, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x7e36);
        EXPECT(gbc.pc(), 0x9924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9923), 0x4d);
        // 4D 02F7
        gbc.setState(0xe918, 0x2c3d, 0x8bc0, 0xf3f7, 0xa12d, 0x5b2c, 0x1, 0x1);
        gbc.writeMem(0xe918, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x2c3d);
        EXPECT(gbc.pc(), 0xe919);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe918), 0x4d);
        // 4D 02F8
        gbc.setState(0x25b3, 0x350c, 0x22a0, 0x7b0, 0x458a, 0xfc81, 0x0, 0x0);
        gbc.writeMem(0x25b3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x350c);
        EXPECT(gbc.pc(), 0x25b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02F9
        gbc.setState(0x4790, 0xc6e8, 0xdbe0, 0x80ac, 0x4a80, 0xa6d, 0x1, 0x1);
        gbc.writeMem(0x4790, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc6e8);
        EXPECT(gbc.pc(), 0x4791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02FA
        gbc.setState(0x8084, 0x62af, 0xc070, 0xbb02, 0xddb, 0xd0d6, 0x0, 0x0);
        gbc.writeMem(0x8084, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x62af);
        EXPECT(gbc.pc(), 0x8085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8084), 0x4d);
        // 4D 02FB
        gbc.setState(0x5485, 0x3471, 0xf3a0, 0x729c, 0x9920, 0x8458, 0x1, 0x1);
        gbc.writeMem(0x5485, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x3471);
        EXPECT(gbc.pc(), 0x5486);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02FC
        gbc.setState(0x15d4, 0xfce, 0xd7e0, 0xa334, 0x5d48, 0xc60f, 0x0, 0x0);
        gbc.writeMem(0x15d4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfce);
        EXPECT(gbc.pc(), 0x15d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 02FD
        gbc.setState(0x42f6, 0x643b, 0x5190, 0xf215, 0x371d, 0xaaf2, 0x0, 0x1);
        gbc.writeMem(0x42f6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x643b);
        EXPECT(gbc.pc(), 0x42f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 02FE
        gbc.setState(0x63cd, 0x1883, 0x60b0, 0x2b82, 0xef2, 0x88cb, 0x0, 0x0);
        gbc.writeMem(0x63cd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x1883);
        EXPECT(gbc.pc(), 0x63ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 02FF
        gbc.setState(0x2093, 0xfd08, 0x43b0, 0xe17b, 0xdfd, 0x389, 0x1, 0x0);
        gbc.writeMem(0x2093, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xfd08);
        EXPECT(gbc.pc(), 0x2094);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0300
        gbc.setState(0x1048, 0xe26f, 0x5300, 0x4cf4, 0xab51, 0xee74, 0x0, 0x1);
        gbc.writeMem(0x1048, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe26f);
        EXPECT(gbc.pc(), 0x1049);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0301
        gbc.setState(0x4601, 0x1951, 0x8b0, 0x976a, 0x3e5a, 0x709f, 0x0, 0x1);
        gbc.writeMem(0x4601, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x1951);
        EXPECT(gbc.pc(), 0x4602);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0302
        gbc.setState(0x480a, 0x12a5, 0xf9e0, 0xe0bf, 0xb8b7, 0xbe97, 0x0, 0x1);
        gbc.writeMem(0x480a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x12a5);
        EXPECT(gbc.pc(), 0x480b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0303
        gbc.setState(0x4de, 0x940d, 0x6d80, 0x7e56, 0x9d92, 0xc51c, 0x1, 0x0);
        gbc.writeMem(0x4de, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x940d);
        EXPECT(gbc.pc(), 0x4df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0304
        gbc.setState(0xd1af, 0x61d1, 0xd5c0, 0x22db, 0x8887, 0xd048, 0x1, 0x1);
        gbc.writeMem(0xd1af, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x61d1);
        EXPECT(gbc.pc(), 0xd1b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1af), 0x4d);
        // 4D 0305
        gbc.setState(0x77dd, 0x9cb4, 0xdab0, 0x22a1, 0xc355, 0x56e8, 0x0, 0x0);
        gbc.writeMem(0x77dd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x9cb4);
        EXPECT(gbc.pc(), 0x77de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0306
        gbc.setState(0xcde8, 0x3031, 0x8d0, 0xa81a, 0x4d0d, 0x9f1f, 0x0, 0x1);
        gbc.writeMem(0xcde8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3031);
        EXPECT(gbc.pc(), 0xcde9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcde8), 0x4d);
        // 4D 0307
        gbc.setState(0xa77, 0x793a, 0x7500, 0x63ca, 0x50d8, 0x7706, 0x1, 0x1);
        gbc.writeMem(0xa77, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x793a);
        EXPECT(gbc.pc(), 0xa78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0308
        gbc.setState(0xa406, 0x12d8, 0x2220, 0xd737, 0x877d, 0xbbd1, 0x0, 0x1);
        gbc.writeMem(0xa406, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x12d8);
        EXPECT(gbc.pc(), 0xa407);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa406), 0x4d);
        // 4D 0309
        gbc.setState(0x3b80, 0x312c, 0x21b0, 0x8735, 0x28fd, 0xa98f, 0x0, 0x1);
        gbc.writeMem(0x3b80, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x312c);
        EXPECT(gbc.pc(), 0x3b81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 030A
        gbc.setState(0x4357, 0x1aa9, 0xcdb0, 0xce48, 0xf889, 0xaa2d, 0x1, 0x1);
        gbc.writeMem(0x4357, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x1aa9);
        EXPECT(gbc.pc(), 0x4358);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 030B
        gbc.setState(0x31bc, 0x54a0, 0x7a70, 0xfbc4, 0xb367, 0x9620, 0x0, 0x0);
        gbc.writeMem(0x31bc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x54a0);
        EXPECT(gbc.pc(), 0x31bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 030C
        gbc.setState(0xd981, 0xb0ac, 0xca70, 0x7ddd, 0x5ebc, 0xde9d, 0x1, 0x1);
        gbc.writeMem(0xd981, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb0ac);
        EXPECT(gbc.pc(), 0xd982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd981), 0x4d);
        // 4D 030D
        gbc.setState(0x4d3b, 0xc50d, 0xc550, 0x8fa8, 0x8b99, 0xc2ba, 0x1, 0x0);
        gbc.writeMem(0x4d3b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc50d);
        EXPECT(gbc.pc(), 0x4d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 030F
        gbc.setState(0x327c, 0x705d, 0x6db0, 0xf85b, 0x5122, 0x2455, 0x1, 0x1);
        gbc.writeMem(0x327c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x705d);
        EXPECT(gbc.pc(), 0x327d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0310
        gbc.setState(0xd1a3, 0xa20d, 0x88f0, 0x43f7, 0x54d, 0x3b73, 0x0, 0x1);
        gbc.writeMem(0xd1a3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa20d);
        EXPECT(gbc.pc(), 0xd1a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1a3), 0x4d);
        // 4D 0311
        gbc.setState(0xb9e4, 0x201d, 0xfb50, 0xdea9, 0xc388, 0xa41a, 0x0, 0x0);
        gbc.writeMem(0xb9e4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x201d);
        EXPECT(gbc.pc(), 0xb9e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9e4), 0x4d);
        // 4D 0312
        gbc.setState(0x61e3, 0xcb47, 0x9e50, 0x94fd, 0x732c, 0x11d, 0x0, 0x1);
        gbc.writeMem(0x61e3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcb47);
        EXPECT(gbc.pc(), 0x61e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0313
        gbc.setState(0xb340, 0xdfed, 0x5640, 0xbf22, 0xa266, 0xb07d, 0x0, 0x1);
        gbc.writeMem(0xb340, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdfed);
        EXPECT(gbc.pc(), 0xb341);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb340), 0x4d);
        // 4D 0314
        gbc.setState(0x5a6, 0x8c52, 0xe050, 0x258d, 0xd0d9, 0xa919, 0x0, 0x0);
        gbc.writeMem(0x5a6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8c52);
        EXPECT(gbc.pc(), 0x5a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0315
        gbc.setState(0x1d42, 0xc71a, 0xa2c0, 0x6a65, 0x83c6, 0x23b4, 0x1, 0x0);
        gbc.writeMem(0x1d42, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xc71a);
        EXPECT(gbc.pc(), 0x1d43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0316
        gbc.setState(0xd5b5, 0x2750, 0x4880, 0x9382, 0xef70, 0x9102, 0x1, 0x1);
        gbc.writeMem(0xd5b5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x2750);
        EXPECT(gbc.pc(), 0xd5b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5b5), 0x4d);
        // 4D 0317
        gbc.setState(0x101e, 0x4038, 0xb7a0, 0x5c16, 0x76c4, 0x70ac, 0x0, 0x1);
        gbc.writeMem(0x101e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4038);
        EXPECT(gbc.pc(), 0x101f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0318
        gbc.setState(0x5e73, 0x5d17, 0x6f30, 0x311, 0xc95, 0x271c, 0x1, 0x1);
        gbc.writeMem(0x5e73, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x5d17);
        EXPECT(gbc.pc(), 0x5e74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0319
        gbc.setState(0x6f2a, 0xe26, 0x30b0, 0xb3c0, 0x2f13, 0x4f51, 0x0, 0x1);
        gbc.writeMem(0x6f2a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe26);
        EXPECT(gbc.pc(), 0x6f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 031A
        gbc.setState(0x7347, 0x36a, 0x2af0, 0xab05, 0xd7b5, 0xb2fd, 0x1, 0x1);
        gbc.writeMem(0x7347, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x36a);
        EXPECT(gbc.pc(), 0x7348);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 031B
        gbc.setState(0x9fb9, 0xa80d, 0xc7f0, 0x7e35, 0x21b8, 0x50ba, 0x0, 0x1);
        gbc.writeMem(0x9fb9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa80d);
        EXPECT(gbc.pc(), 0x9fba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fb9), 0x4d);
        // 4D 031C
        gbc.setState(0xd469, 0x14f0, 0xb0, 0xce6c, 0x2066, 0xcef3, 0x0, 0x1);
        gbc.writeMem(0xd469, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x14f0);
        EXPECT(gbc.pc(), 0xd46a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd469), 0x4d);
        // 4D 031D
        gbc.setState(0x469d, 0x61ce, 0x9c90, 0xc133, 0x22d5, 0xbb7f, 0x1, 0x0);
        gbc.writeMem(0x469d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x61ce);
        EXPECT(gbc.pc(), 0x469e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 031E
        gbc.setState(0xa6a7, 0x2a, 0x8610, 0xe8, 0x9be8, 0x915a, 0x1, 0x1);
        gbc.writeMem(0xa6a7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2a);
        EXPECT(gbc.pc(), 0xa6a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6a7), 0x4d);
        // 4D 031F
        gbc.setState(0x283b, 0x59f2, 0xf520, 0xdd3, 0x70fc, 0xe76d, 0x1, 0x1);
        gbc.writeMem(0x283b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x59f2);
        EXPECT(gbc.pc(), 0x283c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0320
        gbc.setState(0xa472, 0x710a, 0x1530, 0xc3a7, 0x310b, 0x437b, 0x0, 0x1);
        gbc.writeMem(0xa472, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x710a);
        EXPECT(gbc.pc(), 0xa473);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa472), 0x4d);
        // 4D 0321
        gbc.setState(0xe0b2, 0x8525, 0x9fa0, 0x3fab, 0xbb36, 0x7442, 0x1, 0x1);
        gbc.writeMem(0xe0b2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8525);
        EXPECT(gbc.pc(), 0xe0b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b2), 0x4d);
        // 4D 0322
        gbc.setState(0xcbc6, 0xaf68, 0x5930, 0x1222, 0x65ca, 0xeb18, 0x1, 0x0);
        gbc.writeMem(0xcbc6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xaf68);
        EXPECT(gbc.pc(), 0xcbc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbc6), 0x4d);
        // 4D 0323
        gbc.setState(0xe57f, 0x7996, 0xdd60, 0x36e6, 0x15b6, 0x4ed3, 0x0, 0x0);
        gbc.writeMem(0xe57f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7996);
        EXPECT(gbc.pc(), 0xe580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe57f), 0x4d);
        // 4D 0324
        gbc.setState(0xeca9, 0xc899, 0x2b30, 0x97de, 0xd79f, 0x7e7b, 0x1, 0x0);
        gbc.writeMem(0xeca9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc899);
        EXPECT(gbc.pc(), 0xecaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca9), 0x4d);
        // 4D 0325
        gbc.setState(0xbce3, 0xad2c, 0x17d0, 0xdad4, 0xea77, 0x4cbc, 0x1, 0x1);
        gbc.writeMem(0xbce3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xad2c);
        EXPECT(gbc.pc(), 0xbce4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbce3), 0x4d);
        // 4D 0326
        gbc.setState(0x2f37, 0x54e7, 0xed20, 0x81d0, 0xd6, 0x1132, 0x1, 0x1);
        gbc.writeMem(0x2f37, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x54e7);
        EXPECT(gbc.pc(), 0x2f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0327
        gbc.setState(0x64bf, 0x63db, 0xc620, 0x7778, 0xe6f7, 0x80c3, 0x0, 0x0);
        gbc.writeMem(0x64bf, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x63db);
        EXPECT(gbc.pc(), 0x64c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0328
        gbc.setState(0xa655, 0x1c96, 0xd690, 0x14c0, 0xd0ef, 0xf689, 0x0, 0x1);
        gbc.writeMem(0xa655, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x1c96);
        EXPECT(gbc.pc(), 0xa656);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa655), 0x4d);
        // 4D 0329
        gbc.setState(0x2bc, 0xa84c, 0xd770, 0x91bf, 0x2a33, 0xf904, 0x1, 0x1);
        gbc.writeMem(0x2bc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa84c);
        EXPECT(gbc.pc(), 0x2bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 032A
        gbc.setState(0xe574, 0x6c22, 0xb760, 0xd1a5, 0x4434, 0xc2a7, 0x1, 0x0);
        gbc.writeMem(0xe574, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x6c22);
        EXPECT(gbc.pc(), 0xe575);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe574), 0x4d);
        // 4D 032B
        gbc.setState(0xdb75, 0xe9e3, 0x33b0, 0x460d, 0xbb69, 0x3581, 0x1, 0x0);
        gbc.writeMem(0xdb75, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xe9e3);
        EXPECT(gbc.pc(), 0xdb76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb75), 0x4d);
        // 4D 032D
        gbc.setState(0x4f74, 0x4982, 0xfda0, 0x98fe, 0x3067, 0xa361, 0x1, 0x0);
        gbc.writeMem(0x4f74, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4982);
        EXPECT(gbc.pc(), 0x4f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 032E
        gbc.setState(0xaa36, 0xc42b, 0x3cd0, 0x27d3, 0xf7c2, 0x32cd, 0x1, 0x0);
        gbc.writeMem(0xaa36, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xc42b);
        EXPECT(gbc.pc(), 0xaa37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa36), 0x4d);
        // 4D 032F
        gbc.setState(0x9969, 0x6171, 0xabf0, 0xaca8, 0x7be7, 0x1fe4, 0x0, 0x0);
        gbc.writeMem(0x9969, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x6171);
        EXPECT(gbc.pc(), 0x996a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9969), 0x4d);
        // 4D 0330
        gbc.setState(0xd498, 0x8e46, 0x7d0, 0x98df, 0x37, 0x8645, 0x0, 0x1);
        gbc.writeMem(0xd498, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8e46);
        EXPECT(gbc.pc(), 0xd499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd498), 0x4d);
        // 4D 0331
        gbc.setState(0xa94b, 0x9f89, 0x24d0, 0xa428, 0xafc5, 0x2668, 0x0, 0x1);
        gbc.writeMem(0xa94b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9f89);
        EXPECT(gbc.pc(), 0xa94c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94b), 0x4d);
        // 4D 0332
        gbc.setState(0x5459, 0x546d, 0x51c0, 0xf69e, 0xdef, 0xab24, 0x0, 0x0);
        gbc.writeMem(0x5459, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x546d);
        EXPECT(gbc.pc(), 0x545a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0333
        gbc.setState(0x13e0, 0x7661, 0x8f70, 0x7a30, 0x9365, 0x8d44, 0x1, 0x1);
        gbc.writeMem(0x13e0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7661);
        EXPECT(gbc.pc(), 0x13e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0334
        gbc.setState(0xdf56, 0xc71f, 0x8db0, 0xc434, 0x30be, 0x3802, 0x1, 0x1);
        gbc.writeMem(0xdf56, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc71f);
        EXPECT(gbc.pc(), 0xdf57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf56), 0x4d);
        // 4D 0335
        gbc.setState(0x7075, 0x6734, 0x15a0, 0x3493, 0xe515, 0xc525, 0x0, 0x1);
        gbc.writeMem(0x7075, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6734);
        EXPECT(gbc.pc(), 0x7076);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0336
        gbc.setState(0xae5e, 0x4af3, 0xac00, 0xcb0d, 0x89e8, 0x6676, 0x0, 0x0);
        gbc.writeMem(0xae5e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x4af3);
        EXPECT(gbc.pc(), 0xae5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae5e), 0x4d);
        // 4D 0337
        gbc.setState(0x70a5, 0x1b04, 0xf3f0, 0x8a21, 0x59dc, 0x8276, 0x1, 0x0);
        gbc.writeMem(0x70a5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x1b04);
        EXPECT(gbc.pc(), 0x70a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0338
        gbc.setState(0x2b42, 0xffb8, 0x1e60, 0xfa44, 0x350c, 0x4d64, 0x1, 0x1);
        gbc.writeMem(0x2b42, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xffb8);
        EXPECT(gbc.pc(), 0x2b43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0339
        gbc.setState(0x5397, 0xfed, 0xd260, 0xe16, 0x56d5, 0x1ee9, 0x0, 0x0);
        gbc.writeMem(0x5397, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xfed);
        EXPECT(gbc.pc(), 0x5398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 033A
        gbc.setState(0x3ef4, 0x4a22, 0x78a0, 0xcb74, 0x7119, 0xffe6, 0x1, 0x0);
        gbc.writeMem(0x3ef4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x4a22);
        EXPECT(gbc.pc(), 0x3ef5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 033B
        gbc.setState(0x2bea, 0xc880, 0x3e40, 0xc8eb, 0x2da, 0xf9c4, 0x1, 0x0);
        gbc.writeMem(0x2bea, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc880);
        EXPECT(gbc.pc(), 0x2beb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 033C
        gbc.setState(0x2abd, 0x4de0, 0xf7e0, 0xb455, 0xc2f4, 0x29c4, 0x0, 0x0);
        gbc.writeMem(0x2abd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x4de0);
        EXPECT(gbc.pc(), 0x2abe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 033D
        gbc.setState(0x1dbb, 0xfb1d, 0x29b0, 0xa14e, 0x1f21, 0x6040, 0x0, 0x0);
        gbc.writeMem(0x1dbb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xfb1d);
        EXPECT(gbc.pc(), 0x1dbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 033E
        gbc.setState(0x8665, 0x1428, 0x7570, 0xc0cd, 0x7ab6, 0xc6ed, 0x0, 0x1);
        gbc.writeMem(0x8665, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1428);
        EXPECT(gbc.pc(), 0x8666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8665), 0x4d);
        // 4D 0340
        gbc.setState(0xe87e, 0x5ce5, 0x60d0, 0x55ed, 0x76a8, 0x41a0, 0x1, 0x1);
        gbc.writeMem(0xe87e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x5ce5);
        EXPECT(gbc.pc(), 0xe87f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe87e), 0x4d);
        // 4D 0341
        gbc.setState(0x3363, 0x7ba1, 0x79d0, 0x8183, 0x54ef, 0x87d9, 0x0, 0x0);
        gbc.writeMem(0x3363, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7ba1);
        EXPECT(gbc.pc(), 0x3364);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0342
        gbc.setState(0x5a7e, 0x2a3b, 0x9e00, 0x70f5, 0x4ce7, 0xd3a5, 0x0, 0x0);
        gbc.writeMem(0x5a7e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x2a3b);
        EXPECT(gbc.pc(), 0x5a7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0343
        gbc.setState(0xd9ee, 0x9175, 0x2ee0, 0x44d7, 0x3812, 0xc64, 0x0, 0x0);
        gbc.writeMem(0xd9ee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9175);
        EXPECT(gbc.pc(), 0xd9ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ee), 0x4d);
        // 4D 0344
        gbc.setState(0xd62b, 0x217e, 0x2800, 0xe31d, 0xf10b, 0x5867, 0x1, 0x1);
        gbc.writeMem(0xd62b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x217e);
        EXPECT(gbc.pc(), 0xd62c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd62b), 0x4d);
        // 4D 0345
        gbc.setState(0x79f9, 0x8a68, 0x22d0, 0x624e, 0x136f, 0x30dd, 0x1, 0x1);
        gbc.writeMem(0x79f9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8a68);
        EXPECT(gbc.pc(), 0x79fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0346
        gbc.setState(0x7eb1, 0x32db, 0x53a0, 0x22cc, 0x2b5e, 0x52ac, 0x0, 0x0);
        gbc.writeMem(0x7eb1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x32db);
        EXPECT(gbc.pc(), 0x7eb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0348
        gbc.setState(0x97b3, 0xcee7, 0xbed0, 0x70d8, 0xcd2c, 0x8354, 0x0, 0x0);
        gbc.writeMem(0x97b3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xcee7);
        EXPECT(gbc.pc(), 0x97b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97b3), 0x4d);
        // 4D 0349
        gbc.setState(0xa6c2, 0xdd84, 0x7f80, 0x8547, 0xb509, 0x6fd8, 0x0, 0x0);
        gbc.writeMem(0xa6c2, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xdd84);
        EXPECT(gbc.pc(), 0xa6c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6c2), 0x4d);
        // 4D 034A
        gbc.setState(0x48a6, 0x353, 0x70a0, 0x53d4, 0xb341, 0xfb78, 0x1, 0x1);
        gbc.writeMem(0x48a6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x353);
        EXPECT(gbc.pc(), 0x48a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 034B
        gbc.setState(0x42f1, 0xdd8c, 0x7f10, 0x2207, 0x9820, 0xc0e1, 0x1, 0x0);
        gbc.writeMem(0x42f1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xdd8c);
        EXPECT(gbc.pc(), 0x42f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 034C
        gbc.setState(0x88b4, 0x2fdc, 0x1cd0, 0xc737, 0x552a, 0xd103, 0x0, 0x1);
        gbc.writeMem(0x88b4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x2fdc);
        EXPECT(gbc.pc(), 0x88b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88b4), 0x4d);
        // 4D 034D
        gbc.setState(0xdea4, 0x2129, 0xb360, 0x6081, 0x65a, 0xb0, 0x1, 0x1);
        gbc.writeMem(0xdea4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2129);
        EXPECT(gbc.pc(), 0xdea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdea4), 0x4d);
        // 4D 034E
        gbc.setState(0x18e9, 0x21cd, 0x60a0, 0x5e1, 0x454f, 0x7171, 0x1, 0x1);
        gbc.writeMem(0x18e9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x21cd);
        EXPECT(gbc.pc(), 0x18ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 034F
        gbc.setState(0x2983, 0xc70a, 0x4180, 0x99dc, 0x1405, 0xb186, 0x0, 0x0);
        gbc.writeMem(0x2983, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xc70a);
        EXPECT(gbc.pc(), 0x2984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0350
        gbc.setState(0x2cfc, 0xd92a, 0x7480, 0x7f50, 0x4e11, 0x732a, 0x1, 0x1);
        gbc.writeMem(0x2cfc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd92a);
        EXPECT(gbc.pc(), 0x2cfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0351
        gbc.setState(0x26e5, 0xbcbb, 0x34b0, 0x9fd5, 0x3a86, 0xc214, 0x0, 0x1);
        gbc.writeMem(0x26e5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xbcbb);
        EXPECT(gbc.pc(), 0x26e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0352
        gbc.setState(0xea23, 0xb027, 0x11f0, 0x5109, 0x5c3f, 0x7c6c, 0x0, 0x1);
        gbc.writeMem(0xea23, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xb027);
        EXPECT(gbc.pc(), 0xea24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea23), 0x4d);
        // 4D 0353
        gbc.setState(0x31a4, 0x946d, 0xaf10, 0x5e47, 0x3002, 0x34af, 0x0, 0x1);
        gbc.writeMem(0x31a4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x946d);
        EXPECT(gbc.pc(), 0x31a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0354
        gbc.setState(0x54a7, 0x73c, 0x8d50, 0xc461, 0xb87c, 0xf01e, 0x0, 0x0);
        gbc.writeMem(0x54a7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x73c);
        EXPECT(gbc.pc(), 0x54a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0355
        gbc.setState(0x8f89, 0xaa24, 0xd3a0, 0xc5e2, 0x21eb, 0xa213, 0x1, 0x1);
        gbc.writeMem(0x8f89, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xaa24);
        EXPECT(gbc.pc(), 0x8f8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f89), 0x4d);
        // 4D 0357
        gbc.setState(0x6fb1, 0x2b7f, 0xced0, 0xcdfe, 0xacf7, 0x1cce, 0x1, 0x1);
        gbc.writeMem(0x6fb1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x2b7f);
        EXPECT(gbc.pc(), 0x6fb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0358
        gbc.setState(0x98ab, 0x4cb9, 0x4d00, 0x5476, 0xa667, 0xccc1, 0x1, 0x1);
        gbc.writeMem(0x98ab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4cb9);
        EXPECT(gbc.pc(), 0x98ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98ab), 0x4d);
        // 4D 0359
        gbc.setState(0x194b, 0x83b7, 0x2770, 0x68ea, 0x404b, 0xc0fc, 0x0, 0x0);
        gbc.writeMem(0x194b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x83b7);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 035A
        gbc.setState(0xa18f, 0x35af, 0x9d20, 0xd208, 0x596c, 0xf000, 0x0, 0x1);
        gbc.writeMem(0xa18f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x35af);
        EXPECT(gbc.pc(), 0xa190);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa18f), 0x4d);
        // 4D 035C
        gbc.setState(0x3099, 0xeba9, 0x9740, 0xc3d5, 0x7, 0xc8ea, 0x1, 0x0);
        gbc.writeMem(0x3099, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xeba9);
        EXPECT(gbc.pc(), 0x309a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 035D
        gbc.setState(0xa45e, 0x832a, 0x3b00, 0x91d4, 0xcfa1, 0x1a00, 0x1, 0x0);
        gbc.writeMem(0xa45e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x832a);
        EXPECT(gbc.pc(), 0xa45f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45e), 0x4d);
        // 4D 035E
        gbc.setState(0x712e, 0x85da, 0xea00, 0x2b99, 0xf237, 0xa3b8, 0x0, 0x1);
        gbc.writeMem(0x712e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x85da);
        EXPECT(gbc.pc(), 0x712f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 035F
        gbc.setState(0x173, 0x2831, 0xdf00, 0x2b77, 0x74dc, 0x4035, 0x0, 0x1);
        gbc.writeMem(0x173, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2831);
        EXPECT(gbc.pc(), 0x174);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0360
        gbc.setState(0xdd15, 0x2200, 0x1fb0, 0xca77, 0x902, 0xc665, 0x1, 0x1);
        gbc.writeMem(0xdd15, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2200);
        EXPECT(gbc.pc(), 0xdd16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd15), 0x4d);
        // 4D 0361
        gbc.setState(0x6846, 0xcc72, 0x91b0, 0x848e, 0x80fe, 0x7650, 0x0, 0x1);
        gbc.writeMem(0x6846, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xcc72);
        EXPECT(gbc.pc(), 0x6847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0362
        gbc.setState(0x243b, 0x67be, 0x24f0, 0xb9a7, 0x24ba, 0x8354, 0x0, 0x1);
        gbc.writeMem(0x243b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x67be);
        EXPECT(gbc.pc(), 0x243c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0363
        gbc.setState(0x7f12, 0xe6a1, 0x60c0, 0x9f2f, 0x7fcf, 0xf1aa, 0x1, 0x0);
        gbc.writeMem(0x7f12, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe6a1);
        EXPECT(gbc.pc(), 0x7f13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0364
        gbc.setState(0x10f3, 0x982b, 0xc950, 0x9861, 0xd216, 0x2a65, 0x1, 0x0);
        gbc.writeMem(0x10f3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x982b);
        EXPECT(gbc.pc(), 0x10f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0365
        gbc.setState(0xb57f, 0x6107, 0xc860, 0x65cf, 0x1fe1, 0xde33, 0x0, 0x1);
        gbc.writeMem(0xb57f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6107);
        EXPECT(gbc.pc(), 0xb580);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb57f), 0x4d);
        // 4D 0366
        gbc.setState(0xbe24, 0x3605, 0x560, 0xacb4, 0x5248, 0xff1, 0x0, 0x1);
        gbc.writeMem(0xbe24, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3605);
        EXPECT(gbc.pc(), 0xbe25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe24), 0x4d);
        // 4D 0367
        gbc.setState(0x8a40, 0x5994, 0x1a0, 0xf5a6, 0x36e8, 0xbec2, 0x0, 0x0);
        gbc.writeMem(0x8a40, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x5994);
        EXPECT(gbc.pc(), 0x8a41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a40), 0x4d);
        // 4D 0368
        gbc.setState(0xcaa, 0x2070, 0x9720, 0x5b, 0x89d0, 0x21dc, 0x0, 0x0);
        gbc.writeMem(0xcaa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2070);
        EXPECT(gbc.pc(), 0xcab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0369
        gbc.setState(0x5266, 0xf0dc, 0x1990, 0xa5e6, 0x6f74, 0x84e8, 0x1, 0x1);
        gbc.writeMem(0x5266, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xf0dc);
        EXPECT(gbc.pc(), 0x5267);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 036A
        gbc.setState(0x911f, 0x59fb, 0xa0b0, 0x66a, 0x4bea, 0xa009, 0x1, 0x1);
        gbc.writeMem(0x911f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x59fb);
        EXPECT(gbc.pc(), 0x9120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x911f), 0x4d);
        // 4D 036B
        gbc.setState(0xee84, 0xe60f, 0xa6f0, 0x6df4, 0xaba0, 0xd25a, 0x0, 0x1);
        gbc.writeMem(0xee84, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe60f);
        EXPECT(gbc.pc(), 0xee85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee84), 0x4d);
        // 4D 036C
        gbc.setState(0x2fb4, 0x5137, 0x4470, 0x2a42, 0xf693, 0x3d51, 0x0, 0x0);
        gbc.writeMem(0x2fb4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5137);
        EXPECT(gbc.pc(), 0x2fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 036D
        gbc.setState(0x4b0, 0x7678, 0xf9b0, 0x2d08, 0xa876, 0x8ef5, 0x0, 0x0);
        gbc.writeMem(0x4b0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x7678);
        EXPECT(gbc.pc(), 0x4b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 036E
        gbc.setState(0xaad0, 0x9214, 0x100, 0x3a3c, 0xb4c9, 0xaeec, 0x1, 0x1);
        gbc.writeMem(0xaad0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9214);
        EXPECT(gbc.pc(), 0xaad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad0), 0x4d);
        // 4D 036F
        gbc.setState(0xd963, 0x42ac, 0x9f00, 0x75f1, 0xa723, 0x4abd, 0x1, 0x0);
        gbc.writeMem(0xd963, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x42ac);
        EXPECT(gbc.pc(), 0xd964);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd963), 0x4d);
        // 4D 0370
        gbc.setState(0xe061, 0xcc02, 0x8370, 0x9203, 0x6421, 0x1af, 0x0, 0x1);
        gbc.writeMem(0xe061, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xcc02);
        EXPECT(gbc.pc(), 0xe062);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe061), 0x4d);
        // 4D 0371
        gbc.setState(0x3319, 0x91b5, 0x8b20, 0x2791, 0x1032, 0xe930, 0x0, 0x1);
        gbc.writeMem(0x3319, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x91b5);
        EXPECT(gbc.pc(), 0x331a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0372
        gbc.setState(0x38ce, 0xa111, 0x6eb0, 0xf942, 0xd889, 0xb696, 0x0, 0x1);
        gbc.writeMem(0x38ce, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa111);
        EXPECT(gbc.pc(), 0x38cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0373
        gbc.setState(0xae25, 0xc609, 0x4850, 0xaffd, 0x606a, 0x5154, 0x0, 0x0);
        gbc.writeMem(0xae25, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xc609);
        EXPECT(gbc.pc(), 0xae26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae25), 0x4d);
        // 4D 0374
        gbc.setState(0x9ab, 0xb712, 0xcb10, 0x37c5, 0x8cdc, 0xb2df, 0x1, 0x0);
        gbc.writeMem(0x9ab, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xb712);
        EXPECT(gbc.pc(), 0x9ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0375
        gbc.setState(0x5195, 0x14e8, 0x3b30, 0x2a29, 0xc758, 0xfa46, 0x1, 0x0);
        gbc.writeMem(0x5195, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x14e8);
        EXPECT(gbc.pc(), 0x5196);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0376
        gbc.setState(0x20f, 0x821, 0xcde0, 0x358a, 0xa222, 0x988d, 0x1, 0x0);
        gbc.writeMem(0x20f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x821);
        EXPECT(gbc.pc(), 0x210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0377
        gbc.setState(0x61d, 0x47ad, 0xa60, 0x32f9, 0x532a, 0xaff7, 0x1, 0x1);
        gbc.writeMem(0x61d, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x47ad);
        EXPECT(gbc.pc(), 0x61e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0378
        gbc.setState(0x3122, 0xeed3, 0x5fc0, 0xbfc9, 0x2d75, 0xe80, 0x0, 0x1);
        gbc.writeMem(0x3122, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xeed3);
        EXPECT(gbc.pc(), 0x3123);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0379
        gbc.setState(0x5b65, 0x383d, 0xfe60, 0x20d1, 0xbf69, 0xd581, 0x1, 0x1);
        gbc.writeMem(0x5b65, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x383d);
        EXPECT(gbc.pc(), 0x5b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 037A
        gbc.setState(0xd0, 0xda56, 0x3bf0, 0xdb2e, 0x9845, 0xed35, 0x0, 0x1);
        gbc.writeMem(0xd0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xda56);
        EXPECT(gbc.pc(), 0xd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 037B
        gbc.setState(0xbef7, 0x5919, 0x8020, 0xdcb7, 0x3e9d, 0xeb6e, 0x0, 0x1);
        gbc.writeMem(0xbef7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5919);
        EXPECT(gbc.pc(), 0xbef8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef7), 0x4d);
        // 4D 037C
        gbc.setState(0xa354, 0x3edf, 0x6930, 0xb016, 0x5311, 0x9ca6, 0x0, 0x0);
        gbc.writeMem(0xa354, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3edf);
        EXPECT(gbc.pc(), 0xa355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa354), 0x4d);
        // 4D 037D
        gbc.setState(0x2e85, 0x14a0, 0x89d0, 0xc8be, 0x804c, 0x9055, 0x1, 0x0);
        gbc.writeMem(0x2e85, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x14a0);
        EXPECT(gbc.pc(), 0x2e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 037E
        gbc.setState(0x59b6, 0xd94e, 0x6d30, 0xb15e, 0x85ab, 0x65b3, 0x1, 0x1);
        gbc.writeMem(0x59b6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd94e);
        EXPECT(gbc.pc(), 0x59b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 037F
        gbc.setState(0x82fd, 0x4bb4, 0x4f0, 0x511a, 0x2e2a, 0x28a1, 0x0, 0x1);
        gbc.writeMem(0x82fd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4bb4);
        EXPECT(gbc.pc(), 0x82fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fd), 0x4d);
        // 4D 0380
        gbc.setState(0xc432, 0xbaf7, 0xb600, 0x96e, 0xa283, 0xf82e, 0x0, 0x0);
        gbc.writeMem(0xc432, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbaf7);
        EXPECT(gbc.pc(), 0xc433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc432), 0x4d);
        // 4D 0382
        gbc.setState(0xad6, 0x3704, 0xde00, 0xffd4, 0x69ad, 0x2e92, 0x0, 0x1);
        gbc.writeMem(0xad6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3704);
        EXPECT(gbc.pc(), 0xad7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 0383
        gbc.setState(0x9769, 0x82ce, 0x5f10, 0xef43, 0x1aa1, 0x8f9b, 0x0, 0x0);
        gbc.writeMem(0x9769, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x82ce);
        EXPECT(gbc.pc(), 0x976a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9769), 0x4d);
        // 4D 0384
        gbc.setState(0x9cf6, 0x9281, 0x4ad0, 0x779d, 0xe9a6, 0x82cb, 0x1, 0x0);
        gbc.writeMem(0x9cf6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x9281);
        EXPECT(gbc.pc(), 0x9cf7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cf6), 0x4d);
        // 4D 0385
        gbc.setState(0xbfe1, 0xd05, 0x9a40, 0xacc5, 0xbe5a, 0x5228, 0x1, 0x1);
        gbc.writeMem(0xbfe1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xd05);
        EXPECT(gbc.pc(), 0xbfe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfe1), 0x4d);
        // 4D 0386
        gbc.setState(0xe810, 0x39b, 0xd080, 0xdf34, 0x5459, 0x10c7, 0x1, 0x1);
        gbc.writeMem(0xe810, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x39b);
        EXPECT(gbc.pc(), 0xe811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe810), 0x4d);
        // 4D 0387
        gbc.setState(0xe7fa, 0xe9a6, 0xe590, 0x1733, 0xb919, 0x16cd, 0x0, 0x0);
        gbc.writeMem(0xe7fa, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe9a6);
        EXPECT(gbc.pc(), 0xe7fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7fa), 0x4d);
        // 4D 0388
        gbc.setState(0xbeee, 0x7976, 0x9f10, 0xbfc1, 0x3d76, 0xdd7e, 0x1, 0x1);
        gbc.writeMem(0xbeee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7976);
        EXPECT(gbc.pc(), 0xbeef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeee), 0x4d);
        // 4D 0389
        gbc.setState(0x22f, 0x6219, 0x22b0, 0x702, 0x3ae6, 0x91e1, 0x1, 0x0);
        gbc.writeMem(0x22f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x6219);
        EXPECT(gbc.pc(), 0x230);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 038A
        gbc.setState(0x56a0, 0x83a3, 0xd750, 0xd61d, 0xac9e, 0x8da, 0x1, 0x0);
        gbc.writeMem(0x56a0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x83a3);
        EXPECT(gbc.pc(), 0x56a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 038B
        gbc.setState(0xdd46, 0x64a4, 0x95e0, 0x6ff2, 0x607a, 0x1e56, 0x0, 0x1);
        gbc.writeMem(0xdd46, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x64a4);
        EXPECT(gbc.pc(), 0xdd47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd46), 0x4d);
        // 4D 038C
        gbc.setState(0x2b94, 0xc14e, 0x8210, 0x7337, 0xc804, 0x2fa2, 0x1, 0x0);
        gbc.writeMem(0x2b94, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xc14e);
        EXPECT(gbc.pc(), 0x2b95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 038D
        gbc.setState(0xae67, 0x3a34, 0x6aa0, 0xad4e, 0xfea2, 0x3f13, 0x0, 0x1);
        gbc.writeMem(0xae67, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x3a34);
        EXPECT(gbc.pc(), 0xae68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae67), 0x4d);
        // 4D 038E
        gbc.setState(0x294f, 0xccbb, 0x7210, 0x9b10, 0x23fb, 0x92ab, 0x1, 0x0);
        gbc.writeMem(0x294f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xccbb);
        EXPECT(gbc.pc(), 0x2950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 038F
        gbc.setState(0xeef3, 0xb378, 0x67a0, 0xc5b0, 0x27fc, 0x51c, 0x0, 0x1);
        gbc.writeMem(0xeef3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb378);
        EXPECT(gbc.pc(), 0xeef4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeef3), 0x4d);
        // 4D 0390
        gbc.setState(0x7290, 0x6350, 0x860, 0xd50b, 0x32a1, 0xc170, 0x0, 0x1);
        gbc.writeMem(0x7290, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6350);
        EXPECT(gbc.pc(), 0x7291);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0392
        gbc.setState(0x8a74, 0x55fc, 0x1a70, 0x782c, 0x7197, 0x1f11, 0x1, 0x0);
        gbc.writeMem(0x8a74, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x55fc);
        EXPECT(gbc.pc(), 0x8a75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a74), 0x4d);
        // 4D 0393
        gbc.setState(0x1e3a, 0x3a52, 0xf0b0, 0x51cc, 0x61c8, 0x37ca, 0x0, 0x1);
        gbc.writeMem(0x1e3a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x3a52);
        EXPECT(gbc.pc(), 0x1e3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 0394
        gbc.setState(0x74b, 0x1206, 0xaca0, 0xd152, 0x44d, 0x507b, 0x0, 0x0);
        gbc.writeMem(0x74b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x1206);
        EXPECT(gbc.pc(), 0x74c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 0395
        gbc.setState(0x9dbc, 0x4e37, 0x7df0, 0x8ddf, 0xa5fe, 0x8cf9, 0x0, 0x1);
        gbc.writeMem(0x9dbc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x4e37);
        EXPECT(gbc.pc(), 0x9dbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dbc), 0x4d);
        // 4D 0396
        gbc.setState(0xd1cb, 0x6b02, 0x9e20, 0xd0a7, 0xc132, 0x1f83, 0x1, 0x1);
        gbc.writeMem(0xd1cb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x6b02);
        EXPECT(gbc.pc(), 0xd1cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1cb), 0x4d);
        // 4D 0397
        gbc.setState(0x8a06, 0x8a33, 0x3e10, 0x2850, 0x4a97, 0xd5e2, 0x1, 0x1);
        gbc.writeMem(0x8a06, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8a33);
        EXPECT(gbc.pc(), 0x8a07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a06), 0x4d);
        // 4D 0398
        gbc.setState(0x2291, 0x5223, 0xec50, 0x8e49, 0x3949, 0x3351, 0x1, 0x0);
        gbc.writeMem(0x2291, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x5223);
        EXPECT(gbc.pc(), 0x2292);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 0399
        gbc.setState(0xe639, 0xb07d, 0x6d0, 0x2006, 0x4f5e, 0x4b52, 0x0, 0x1);
        gbc.writeMem(0xe639, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb07d);
        EXPECT(gbc.pc(), 0xe63a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe639), 0x4d);
        // 4D 039A
        gbc.setState(0xa311, 0xa969, 0xb150, 0x70d2, 0xca95, 0xdab4, 0x0, 0x1);
        gbc.writeMem(0xa311, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa969);
        EXPECT(gbc.pc(), 0xa312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa311), 0x4d);
        // 4D 039B
        gbc.setState(0x2727, 0xdfbb, 0x9a10, 0x789a, 0x5ab0, 0xa30e, 0x1, 0x1);
        gbc.writeMem(0x2727, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xdfbb);
        EXPECT(gbc.pc(), 0x2728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 039C
        gbc.setState(0x72e9, 0x35d8, 0xbfa0, 0xf9be, 0xbaa8, 0x8f0d, 0x0, 0x1);
        gbc.writeMem(0x72e9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x35d8);
        EXPECT(gbc.pc(), 0x72ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 039D
        gbc.setState(0x78fb, 0xa6b5, 0x6480, 0x9c2b, 0x7f47, 0xab5e, 0x1, 0x0);
        gbc.writeMem(0x78fb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xa6b5);
        EXPECT(gbc.pc(), 0x78fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 039E
        gbc.setState(0x9651, 0xdf41, 0x7450, 0x69f7, 0x4d68, 0xb157, 0x0, 0x0);
        gbc.writeMem(0x9651, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xdf41);
        EXPECT(gbc.pc(), 0x9652);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9651), 0x4d);
        // 4D 039F
        gbc.setState(0x7d72, 0xde0a, 0xac80, 0x4ce2, 0x7e60, 0xfbdd, 0x0, 0x1);
        gbc.writeMem(0x7d72, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xde0a);
        EXPECT(gbc.pc(), 0x7d73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03A0
        gbc.setState(0x6d5c, 0x3024, 0x2a0, 0xb3f9, 0xa3c9, 0xb0db, 0x1, 0x1);
        gbc.writeMem(0x6d5c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3024);
        EXPECT(gbc.pc(), 0x6d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03A1
        gbc.setState(0x6b0c, 0x2dae, 0xd4d0, 0x87ae, 0x6cbe, 0x2268, 0x0, 0x1);
        gbc.writeMem(0x6b0c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2dae);
        EXPECT(gbc.pc(), 0x6b0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03A2
        gbc.setState(0x4ffc, 0x8a36, 0x9d90, 0x4e88, 0xc507, 0x4a1, 0x1, 0x1);
        gbc.writeMem(0x4ffc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x8a36);
        EXPECT(gbc.pc(), 0x4ffd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03A3
        gbc.setState(0x465, 0x7fb8, 0xde90, 0xf734, 0x4256, 0x40a0, 0x1, 0x0);
        gbc.writeMem(0x465, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7fb8);
        EXPECT(gbc.pc(), 0x466);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03A5
        gbc.setState(0xc394, 0xc653, 0xec70, 0x49fc, 0x257e, 0x6c9f, 0x1, 0x1);
        gbc.writeMem(0xc394, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xc653);
        EXPECT(gbc.pc(), 0xc395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc394), 0x4d);
        // 4D 03A6
        gbc.setState(0x35c9, 0x410e, 0xd900, 0x9118, 0x46d3, 0x18c4, 0x1, 0x1);
        gbc.writeMem(0x35c9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x410e);
        EXPECT(gbc.pc(), 0x35ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03A7
        gbc.setState(0x43fc, 0x1dfc, 0xad0, 0x9024, 0x28dc, 0x83f5, 0x0, 0x1);
        gbc.writeMem(0x43fc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x1dfc);
        EXPECT(gbc.pc(), 0x43fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03A8
        gbc.setState(0xe9b4, 0x995e, 0x5d0, 0x38c6, 0xab17, 0x282b, 0x1, 0x0);
        gbc.writeMem(0xe9b4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x995e);
        EXPECT(gbc.pc(), 0xe9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b4), 0x4d);
        // 4D 03A9
        gbc.setState(0xd27b, 0xaaa, 0xddc0, 0x52c0, 0x2b8a, 0x6b24, 0x0, 0x0);
        gbc.writeMem(0xd27b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xaaa);
        EXPECT(gbc.pc(), 0xd27c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd27b), 0x4d);
        // 4D 03AA
        gbc.setState(0x43d0, 0x94d9, 0xe350, 0x9aed, 0xd24b, 0xe388, 0x0, 0x0);
        gbc.writeMem(0x43d0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x94d9);
        EXPECT(gbc.pc(), 0x43d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03AB
        gbc.setState(0x4ba1, 0xde9c, 0xc110, 0x6e0d, 0x54b, 0xae58, 0x1, 0x1);
        gbc.writeMem(0x4ba1, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xde9c);
        EXPECT(gbc.pc(), 0x4ba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03AC
        gbc.setState(0x8021, 0x5507, 0x8900, 0x90f8, 0xb855, 0x6a3b, 0x1, 0x0);
        gbc.writeMem(0x8021, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5507);
        EXPECT(gbc.pc(), 0x8022);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8021), 0x4d);
        // 4D 03AD
        gbc.setState(0xccb5, 0xdd4c, 0xe4f0, 0xa7ec, 0x2ada, 0x5d28, 0x0, 0x0);
        gbc.writeMem(0xccb5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdd4c);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb5), 0x4d);
        // 4D 03AE
        gbc.setState(0xd3c9, 0xcbee, 0x8700, 0x93a4, 0x9acb, 0xcec0, 0x0, 0x1);
        gbc.writeMem(0xd3c9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xcbee);
        EXPECT(gbc.pc(), 0xd3ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c9), 0x4d);
        // 4D 03AF
        gbc.setState(0x8268, 0x3bbf, 0x90e0, 0xf673, 0x2b92, 0x211, 0x1, 0x0);
        gbc.writeMem(0x8268, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x3bbf);
        EXPECT(gbc.pc(), 0x8269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8268), 0x4d);
        // 4D 03B0
        gbc.setState(0x6b9c, 0xae8d, 0xb750, 0xc3bd, 0x5afb, 0x9374, 0x1, 0x0);
        gbc.writeMem(0x6b9c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xae8d);
        EXPECT(gbc.pc(), 0x6b9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03B1
        gbc.setState(0x624b, 0xafa9, 0xec70, 0xb531, 0x447c, 0x5afd, 0x0, 0x0);
        gbc.writeMem(0x624b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xafa9);
        EXPECT(gbc.pc(), 0x624c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03B2
        gbc.setState(0x1dd5, 0x1f65, 0xa1b0, 0xf097, 0x5de5, 0x4c34, 0x0, 0x0);
        gbc.writeMem(0x1dd5, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1f65);
        EXPECT(gbc.pc(), 0x1dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03B3
        gbc.setState(0x9a09, 0xf5d0, 0xf5c0, 0xf28, 0x8418, 0x7633, 0x1, 0x1);
        gbc.writeMem(0x9a09, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xf5d0);
        EXPECT(gbc.pc(), 0x9a0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a09), 0x4d);
        // 4D 03B4
        gbc.setState(0x39f0, 0xdd46, 0x90e0, 0x2da3, 0x345a, 0xf2dd, 0x0, 0x0);
        gbc.writeMem(0x39f0, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xdd46);
        EXPECT(gbc.pc(), 0x39f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03B5
        gbc.setState(0x69fe, 0xa0ed, 0x3520, 0x3de3, 0x96d, 0xfd6e, 0x1, 0x0);
        gbc.writeMem(0x69fe, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa0ed);
        EXPECT(gbc.pc(), 0x69ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03B7
        gbc.setState(0xdc03, 0x7a50, 0x3370, 0x6857, 0xd1fa, 0x224a, 0x0, 0x0);
        gbc.writeMem(0xdc03, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x7a50);
        EXPECT(gbc.pc(), 0xdc04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc03), 0x4d);
        // 4D 03B8
        gbc.setState(0x4dc3, 0xd3f, 0x1160, 0xc8b1, 0x614e, 0xfaa4, 0x0, 0x1);
        gbc.writeMem(0x4dc3, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd3f);
        EXPECT(gbc.pc(), 0x4dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03B9
        gbc.setState(0x7c6, 0x69ef, 0x1d0, 0xd4ea, 0xacf9, 0xafd2, 0x1, 0x1);
        gbc.writeMem(0x7c6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x69ef);
        EXPECT(gbc.pc(), 0x7c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03BA
        gbc.setState(0xddfb, 0xf238, 0xab40, 0x9f51, 0x4780, 0x495b, 0x0, 0x1);
        gbc.writeMem(0xddfb, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xf238);
        EXPECT(gbc.pc(), 0xddfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddfb), 0x4d);
        // 4D 03BB
        gbc.setState(0x8dc6, 0x5f72, 0x3630, 0x7519, 0x771e, 0xeb49, 0x0, 0x1);
        gbc.writeMem(0x8dc6, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x5f72);
        EXPECT(gbc.pc(), 0x8dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dc6), 0x4d);
        // 4D 03BC
        gbc.setState(0x8855, 0xfe7e, 0x9f10, 0xd710, 0x3bd0, 0xa9f3, 0x1, 0x0);
        gbc.writeMem(0x8855, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfe7e);
        EXPECT(gbc.pc(), 0x8856);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8855), 0x4d);
        // 4D 03BD
        gbc.setState(0x6d8b, 0x433c, 0x61d0, 0xdb68, 0x9a34, 0x68cb, 0x0, 0x1);
        gbc.writeMem(0x6d8b, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x433c);
        EXPECT(gbc.pc(), 0x6d8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03BE
        gbc.setState(0xda81, 0x4ce, 0xcb10, 0xd40, 0x558d, 0x4c5a, 0x0, 0x0);
        gbc.writeMem(0xda81, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x4ce);
        EXPECT(gbc.pc(), 0xda82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda81), 0x4d);
        // 4D 03BF
        gbc.setState(0xb142, 0x578e, 0xa550, 0xa15e, 0x1134, 0x335c, 0x1, 0x0);
        gbc.writeMem(0xb142, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x578e);
        EXPECT(gbc.pc(), 0xb143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb142), 0x4d);
        // 4D 03C0
        gbc.setState(0xe78e, 0xd3b2, 0x4840, 0x2401, 0x8b92, 0x36b6, 0x0, 0x1);
        gbc.writeMem(0xe78e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xd3b2);
        EXPECT(gbc.pc(), 0xe78f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe78e), 0x4d);
        // 4D 03C1
        gbc.setState(0x47ee, 0xe95f, 0x6a60, 0x282b, 0x73c4, 0x83b6, 0x1, 0x1);
        gbc.writeMem(0x47ee, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xe95f);
        EXPECT(gbc.pc(), 0x47ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03C2
        gbc.setState(0x304c, 0x9289, 0x5df0, 0x6274, 0x802f, 0x81a4, 0x1, 0x1);
        gbc.writeMem(0x304c, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x9289);
        EXPECT(gbc.pc(), 0x304d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03C3
        gbc.setState(0x52dc, 0x46d3, 0x9b10, 0xde67, 0xbb44, 0xf92b, 0x1, 0x0);
        gbc.writeMem(0x52dc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x46d3);
        EXPECT(gbc.pc(), 0x52dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03C4
        gbc.setState(0x5b85, 0x46c6, 0x31e0, 0x1398, 0x183d, 0x1d9e, 0x0, 0x1);
        gbc.writeMem(0x5b85, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x46c6);
        EXPECT(gbc.pc(), 0x5b86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03C5
        gbc.setState(0x35ff, 0xc5b0, 0x510, 0xd222, 0xca8e, 0x482d, 0x1, 0x0);
        gbc.writeMem(0x35ff, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xc5b0);
        EXPECT(gbc.pc(), 0x3600);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03C6
        gbc.setState(0xa52f, 0x1cb5, 0x6a10, 0xbda7, 0x6664, 0xffde, 0x1, 0x0);
        gbc.writeMem(0xa52f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1cb5);
        EXPECT(gbc.pc(), 0xa530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52f), 0x4d);
        // 4D 03C7
        gbc.setState(0x4986, 0x2c87, 0x9f50, 0x7b90, 0x799c, 0x4af, 0x0, 0x1);
        gbc.writeMem(0x4986, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x2c87);
        EXPECT(gbc.pc(), 0x4987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03C8
        gbc.setState(0x1baf, 0xf81a, 0x7380, 0xd3f8, 0x7381, 0x93b5, 0x0, 0x0);
        gbc.writeMem(0x1baf, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf81a);
        EXPECT(gbc.pc(), 0x1bb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03C9
        gbc.setState(0x152a, 0x8dc3, 0xcd0, 0x2fc8, 0xe750, 0x9a7, 0x1, 0x0);
        gbc.writeMem(0x152a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8dc3);
        EXPECT(gbc.pc(), 0x152b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03CA
        gbc.setState(0xbbe7, 0x62f5, 0xe410, 0xe554, 0xf534, 0x6227, 0x1, 0x0);
        gbc.writeMem(0xbbe7, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x62f5);
        EXPECT(gbc.pc(), 0xbbe8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe7), 0x4d);
        // 4D 03CB
        gbc.setState(0x6d26, 0xab93, 0x790, 0x2957, 0xd20, 0x159c, 0x0, 0x0);
        gbc.writeMem(0x6d26, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xab93);
        EXPECT(gbc.pc(), 0x6d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03CC
        gbc.setState(0x8551, 0x9dd4, 0x2230, 0x4179, 0xd56f, 0x48d2, 0x1, 0x0);
        gbc.writeMem(0x8551, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9dd4);
        EXPECT(gbc.pc(), 0x8552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8551), 0x4d);
        // 4D 03CD
        gbc.setState(0xbb62, 0xfd4f, 0xa740, 0xc309, 0x9463, 0x2b35, 0x0, 0x0);
        gbc.writeMem(0xbb62, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xfd4f);
        EXPECT(gbc.pc(), 0xbb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb62), 0x4d);
        // 4D 03CE
        gbc.setState(0x2ea4, 0xad68, 0x92c0, 0x5256, 0xfc31, 0xc921, 0x1, 0x1);
        gbc.writeMem(0x2ea4, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xad68);
        EXPECT(gbc.pc(), 0x2ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03CF
        gbc.setState(0x9ada, 0x7e04, 0xc060, 0x9ab6, 0x9d95, 0xb108, 0x0, 0x0);
        gbc.writeMem(0x9ada, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x7e04);
        EXPECT(gbc.pc(), 0x9adb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ada), 0x4d);
        // 4D 03D1
        gbc.setState(0xaf67, 0x4d81, 0x5f40, 0x8bb2, 0x33a7, 0xb28e, 0x0, 0x1);
        gbc.writeMem(0xaf67, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4d81);
        EXPECT(gbc.pc(), 0xaf68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf67), 0x4d);
        // 4D 03D2
        gbc.setState(0xe769, 0xd987, 0x3a50, 0xc590, 0xe505, 0xdd01, 0x0, 0x1);
        gbc.writeMem(0xe769, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd987);
        EXPECT(gbc.pc(), 0xe76a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe769), 0x4d);
        // 4D 03D3
        gbc.setState(0x9c71, 0xcefa, 0xc310, 0xc37c, 0xf30b, 0xa592, 0x1, 0x0);
        gbc.writeMem(0x9c71, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xcefa);
        EXPECT(gbc.pc(), 0x9c72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c71), 0x4d);
        // 4D 03D4
        gbc.setState(0xa13e, 0x78c, 0xe8d0, 0xff93, 0x12d, 0xdf12, 0x0, 0x0);
        gbc.writeMem(0xa13e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x78c);
        EXPECT(gbc.pc(), 0xa13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa13e), 0x4d);
        // 4D 03D6
        gbc.setState(0xe71e, 0x96ff, 0xac70, 0x1d57, 0x49e8, 0xd0f2, 0x0, 0x0);
        gbc.writeMem(0xe71e, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x96ff);
        EXPECT(gbc.pc(), 0xe71f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe71e), 0x4d);
        // 4D 03D7
        gbc.setState(0x8446, 0x528a, 0x9970, 0x38b8, 0x374a, 0x8ff7, 0x1, 0x1);
        gbc.writeMem(0x8446, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x528a);
        EXPECT(gbc.pc(), 0x8447);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8446), 0x4d);
        // 4D 03D8
        gbc.setState(0xefa9, 0x5498, 0xc930, 0x8b6b, 0x9bc6, 0xca17, 0x0, 0x1);
        gbc.writeMem(0xefa9, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5498);
        EXPECT(gbc.pc(), 0xefaa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefa9), 0x4d);
        // 4D 03D9
        gbc.setState(0x7b28, 0xd257, 0x2be0, 0xc355, 0x9636, 0xb6e5, 0x1, 0x1);
        gbc.writeMem(0x7b28, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0x7b29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03DA
        gbc.setState(0xc38f, 0x11dd, 0x6c10, 0x563e, 0x27f9, 0x22a0, 0x1, 0x1);
        gbc.writeMem(0xc38f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x11dd);
        EXPECT(gbc.pc(), 0xc390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38f), 0x4d);
        // 4D 03DB
        gbc.setState(0x931f, 0xdedf, 0xd1d0, 0x4938, 0x57bd, 0xf0d3, 0x1, 0x1);
        gbc.writeMem(0x931f, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xdedf);
        EXPECT(gbc.pc(), 0x9320);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931f), 0x4d);
        // 4D 03DC
        gbc.setState(0x5f24, 0xb40b, 0x7420, 0x48bd, 0xf0fe, 0xf5e6, 0x0, 0x0);
        gbc.writeMem(0x5f24, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb40b);
        EXPECT(gbc.pc(), 0x5f25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03DD
        gbc.setState(0xc7dc, 0xfc08, 0xfbe0, 0x9eb8, 0x658c, 0x88f1, 0x1, 0x1);
        gbc.writeMem(0xc7dc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xfc08);
        EXPECT(gbc.pc(), 0xc7dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7dc), 0x4d);
        // 4D 03DE
        gbc.setState(0x65fd, 0x59d3, 0x69f0, 0x9409, 0x6af3, 0x3d82, 0x1, 0x1);
        gbc.writeMem(0x65fd, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x59d3);
        EXPECT(gbc.pc(), 0x65fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03DF
        gbc.setState(0x4bae, 0xbb1a, 0x22b0, 0x3d6c, 0x610d, 0xae84, 0x0, 0x0);
        gbc.writeMem(0x4bae, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xbb1a);
        EXPECT(gbc.pc(), 0x4baf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03E0
        gbc.setState(0x5239, 0x37bb, 0x6480, 0x19f, 0xd5d3, 0x93e8, 0x1, 0x1);
        gbc.writeMem(0x5239, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x37bb);
        EXPECT(gbc.pc(), 0x523a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03E1
        gbc.setState(0x476a, 0x52e2, 0x2b20, 0x11b9, 0xcc7c, 0x1ba3, 0x0, 0x0);
        gbc.writeMem(0x476a, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x52e2);
        EXPECT(gbc.pc(), 0x476b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4D 03E2
        gbc.setState(0x38c8, 0x9a2c, 0x5b40, 0x7078, 0x1194, 0xd295, 0x1, 0x0);
        gbc.writeMem(0x38c8, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9a2c);
        EXPECT(gbc.pc(), 0x38c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03E3
        gbc.setState(0x64ac, 0x7516, 0x8830, 0xc663, 0xf9b8, 0xf20b, 0x1, 0x0);
        gbc.writeMem(0x64ac, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7516);
        EXPECT(gbc.pc(), 0x64ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4D 03E4
        gbc.setState(0x489, 0x7e49, 0x1750, 0xd2ba, 0x60dd, 0x1485, 0x1, 0x0);
        gbc.writeMem(0x489, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x7e49);
        EXPECT(gbc.pc(), 0x48a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4D 03E5
        gbc.setState(0x4edc, 0x6194, 0xcf00, 0x8f81, 0x179e, 0xdbc0, 0x1, 0x0);
        gbc.writeMem(0x4edc, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6194);
        EXPECT(gbc.pc(), 0x4edd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4D 03E6
        gbc.setState(0xa925, 0x6729, 0x95b0, 0x41e0, 0xd338, 0xe37d, 0x1, 0x0);
        gbc.writeMem(0xa925, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x6729);
        EXPECT(gbc.pc(), 0xa926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa925), 0x4d);
        // 4D 03E7
        gbc.setState(0x4721, 0xec3b, 0x9890, 0x112e, 0x2e08, 0x8349, 0x0, 0x0);
        gbc.writeMem(0x4721, { 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xec3b);
        EXPECT(gbc.pc(), 0x4722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
