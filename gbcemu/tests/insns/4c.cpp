#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_4c)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_4c) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 4C 0000
        gbc.setState(0xd0fb, 0x16ed, 0x3d80, 0xe7f0, 0x79ad, 0xb2f7, 0x1, 0x1);
        gbc.writeMem(0xd0fb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x16ed);
        EXPECT(gbc.pc(), 0xd0fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0fb), 0x4c);
        // 4C 0001
        gbc.setState(0x520a, 0x97e3, 0x1930, 0xc654, 0xfada, 0xecee, 0x0, 0x0);
        gbc.writeMem(0x520a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x97e3);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0002
        gbc.setState(0xbc2d, 0xc621, 0x3de0, 0x5094, 0x40a2, 0x4241, 0x0, 0x0);
        gbc.writeMem(0xbc2d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc621);
        EXPECT(gbc.pc(), 0xbc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc2d), 0x4c);
        // 4C 0003
        gbc.setState(0x2bf6, 0xcfdb, 0x5710, 0xf83d, 0x28cb, 0x60f3, 0x0, 0x1);
        gbc.writeMem(0x2bf6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xcfdb);
        EXPECT(gbc.pc(), 0x2bf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0004
        gbc.setState(0x1511, 0xf750, 0x24b0, 0x7500, 0xa3ca, 0x4bc3, 0x1, 0x0);
        gbc.writeMem(0x1511, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf750);
        EXPECT(gbc.pc(), 0x1512);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0005
        gbc.setState(0x2573, 0x1fbb, 0x3240, 0x44a8, 0xf0cd, 0x6525, 0x0, 0x0);
        gbc.writeMem(0x2573, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1fbb);
        EXPECT(gbc.pc(), 0x2574);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0006
        gbc.setState(0x6e3b, 0x6f31, 0x4180, 0xd69e, 0xb231, 0x609f, 0x0, 0x1);
        gbc.writeMem(0x6e3b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6f31);
        EXPECT(gbc.pc(), 0x6e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0007
        gbc.setState(0x3938, 0x5c68, 0x20a0, 0x30f6, 0x1d4e, 0x2ca4, 0x1, 0x1);
        gbc.writeMem(0x3938, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x5c68);
        EXPECT(gbc.pc(), 0x3939);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0008
        gbc.setState(0xc0b0, 0xe1eb, 0x2e80, 0xe418, 0x55cd, 0x3916, 0x0, 0x1);
        gbc.writeMem(0xc0b0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xe1eb);
        EXPECT(gbc.pc(), 0xc0b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b0), 0x4c);
        // 4C 0009
        gbc.setState(0xe8ee, 0xb510, 0x4a10, 0xd6cb, 0x71ab, 0x7c21, 0x1, 0x1);
        gbc.writeMem(0xe8ee, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb510);
        EXPECT(gbc.pc(), 0xe8ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8ee), 0x4c);
        // 4C 000A
        gbc.setState(0x4155, 0x2ae, 0x8b00, 0x96ba, 0x427b, 0xa7bb, 0x1, 0x1);
        gbc.writeMem(0x4155, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x2ae);
        EXPECT(gbc.pc(), 0x4156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 000B
        gbc.setState(0x4ad1, 0xbeb8, 0xa530, 0xedc2, 0x9de, 0x6363, 0x0, 0x0);
        gbc.writeMem(0x4ad1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xbeb8);
        EXPECT(gbc.pc(), 0x4ad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 000C
        gbc.setState(0x14ff, 0x88e9, 0xe60, 0x5a4f, 0xe864, 0x504f, 0x1, 0x0);
        gbc.writeMem(0x14ff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x88e9);
        EXPECT(gbc.pc(), 0x1500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 000D
        gbc.setState(0xb9b9, 0xfb02, 0x11f0, 0xfabb, 0x4b2f, 0x12e7, 0x1, 0x0);
        gbc.writeMem(0xb9b9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xfb02);
        EXPECT(gbc.pc(), 0xb9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b9), 0x4c);
        // 4C 000E
        gbc.setState(0xd439, 0x17f9, 0x2bd0, 0x54bf, 0x92f5, 0xb242, 0x0, 0x0);
        gbc.writeMem(0xd439, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x17f9);
        EXPECT(gbc.pc(), 0xd43a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd439), 0x4c);
        // 4C 000F
        gbc.setState(0x510b, 0x4d59, 0xc170, 0x6d69, 0xec8c, 0xff0, 0x1, 0x1);
        gbc.writeMem(0x510b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x4d59);
        EXPECT(gbc.pc(), 0x510c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0010
        gbc.setState(0xee93, 0x12cb, 0x9190, 0x4601, 0x8634, 0x1ef7, 0x1, 0x1);
        gbc.writeMem(0xee93, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x12cb);
        EXPECT(gbc.pc(), 0xee94);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee93), 0x4c);
        // 4C 0011
        gbc.setState(0x23a0, 0x3f76, 0x7160, 0xe50, 0x7595, 0xc3ec, 0x0, 0x0);
        gbc.writeMem(0x23a0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3f76);
        EXPECT(gbc.pc(), 0x23a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0012
        gbc.setState(0x4af2, 0xef01, 0xdb80, 0xb5, 0xbb3d, 0xd9d8, 0x1, 0x0);
        gbc.writeMem(0x4af2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xef01);
        EXPECT(gbc.pc(), 0x4af3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0013
        gbc.setState(0xd95b, 0xbaac, 0x1260, 0xb294, 0x4d29, 0x3351, 0x0, 0x1);
        gbc.writeMem(0xd95b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xbaac);
        EXPECT(gbc.pc(), 0xd95c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd95b), 0x4c);
        // 4C 0014
        gbc.setState(0x2736, 0x73d8, 0x53c0, 0xa9f7, 0x1dec, 0xc4bf, 0x1, 0x1);
        gbc.writeMem(0x2736, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x73d8);
        EXPECT(gbc.pc(), 0x2737);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0015
        gbc.setState(0xe557, 0xb1bf, 0xb150, 0xdcf9, 0xbd6d, 0xf25, 0x1, 0x0);
        gbc.writeMem(0xe557, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xb1bf);
        EXPECT(gbc.pc(), 0xe558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe557), 0x4c);
        // 4C 0016
        gbc.setState(0x7c75, 0xff2d, 0xbde0, 0xd0c6, 0x739, 0xea46, 0x0, 0x0);
        gbc.writeMem(0x7c75, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xff2d);
        EXPECT(gbc.pc(), 0x7c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0017
        gbc.setState(0xda00, 0x1039, 0x1af0, 0x3b6f, 0x720a, 0x9dc1, 0x0, 0x1);
        gbc.writeMem(0xda00, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1039);
        EXPECT(gbc.pc(), 0xda01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda00), 0x4c);
        // 4C 0018
        gbc.setState(0x38ea, 0xae13, 0x2b30, 0x58dc, 0x3770, 0x2ab6, 0x0, 0x0);
        gbc.writeMem(0x38ea, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xae13);
        EXPECT(gbc.pc(), 0x38eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 001A
        gbc.setState(0xd98e, 0x9c3b, 0x3d10, 0xfcb3, 0x6f37, 0xd810, 0x1, 0x0);
        gbc.writeMem(0xd98e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9c3b);
        EXPECT(gbc.pc(), 0xd98f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd98e), 0x4c);
        // 4C 001B
        gbc.setState(0x8f98, 0x5bc9, 0x7650, 0xfa97, 0xb243, 0xbe17, 0x0, 0x1);
        gbc.writeMem(0x8f98, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5bc9);
        EXPECT(gbc.pc(), 0x8f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f98), 0x4c);
        // 4C 001C
        gbc.setState(0xd02f, 0x4dca, 0x7e40, 0x9c83, 0x623b, 0x54b1, 0x1, 0x1);
        gbc.writeMem(0xd02f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4dca);
        EXPECT(gbc.pc(), 0xd030);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd02f), 0x4c);
        // 4C 001D
        gbc.setState(0xa468, 0xfa00, 0x55c0, 0xf9d8, 0x74bf, 0xfb11, 0x0, 0x0);
        gbc.writeMem(0xa468, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xfa00);
        EXPECT(gbc.pc(), 0xa469);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa468), 0x4c);
        // 4C 001E
        gbc.setState(0x38ba, 0xf285, 0x63e0, 0x220f, 0x574f, 0xb398, 0x1, 0x0);
        gbc.writeMem(0x38ba, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xf285);
        EXPECT(gbc.pc(), 0x38bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 001F
        gbc.setState(0x6c64, 0x6ffd, 0x91b0, 0xfac7, 0x2b2e, 0x93d8, 0x1, 0x0);
        gbc.writeMem(0x6c64, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6ffd);
        EXPECT(gbc.pc(), 0x6c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0020
        gbc.setState(0xd00f, 0x9611, 0xef60, 0xedfe, 0xac61, 0x257e, 0x0, 0x0);
        gbc.writeMem(0xd00f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9611);
        EXPECT(gbc.pc(), 0xd010);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd00f), 0x4c);
        // 4C 0021
        gbc.setState(0xa6e6, 0xd08d, 0xd820, 0x3ea0, 0xfae6, 0x6d9d, 0x1, 0x1);
        gbc.writeMem(0xa6e6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xd08d);
        EXPECT(gbc.pc(), 0xa6e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6e6), 0x4c);
        // 4C 0022
        gbc.setState(0xd7ec, 0xf579, 0x7700, 0x211, 0xe187, 0x9d3, 0x0, 0x0);
        gbc.writeMem(0xd7ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf579);
        EXPECT(gbc.pc(), 0xd7ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7ec), 0x4c);
        // 4C 0023
        gbc.setState(0x1141, 0x5fc3, 0xfe30, 0x5b1e, 0x8d4a, 0xd33f, 0x0, 0x0);
        gbc.writeMem(0x1141, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5fc3);
        EXPECT(gbc.pc(), 0x1142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0024
        gbc.setState(0x762d, 0x6a77, 0x8c70, 0xa1ff, 0x9cb2, 0x3a5, 0x1, 0x0);
        gbc.writeMem(0x762d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6a77);
        EXPECT(gbc.pc(), 0x762e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0025
        gbc.setState(0x6531, 0xfef2, 0x97f0, 0x1b22, 0x1877, 0xbce5, 0x1, 0x1);
        gbc.writeMem(0x6531, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xfef2);
        EXPECT(gbc.pc(), 0x6532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0026
        gbc.setState(0x8e95, 0x6a9, 0xd7e0, 0x2dd7, 0xbabd, 0x96fb, 0x0, 0x1);
        gbc.writeMem(0x8e95, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x6a9);
        EXPECT(gbc.pc(), 0x8e96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e95), 0x4c);
        // 4C 0027
        gbc.setState(0x2437, 0x6a1e, 0x75e0, 0x9641, 0xaa80, 0xf9c4, 0x1, 0x1);
        gbc.writeMem(0x2437, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x6a1e);
        EXPECT(gbc.pc(), 0x2438);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0028
        gbc.setState(0xabeb, 0xffd1, 0x4df0, 0x3442, 0xd75e, 0xa76b, 0x0, 0x1);
        gbc.writeMem(0xabeb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xffd1);
        EXPECT(gbc.pc(), 0xabec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabeb), 0x4c);
        // 4C 0029
        gbc.setState(0xc318, 0x1769, 0xc940, 0x850, 0xfb58, 0x8607, 0x1, 0x1);
        gbc.writeMem(0xc318, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x1769);
        EXPECT(gbc.pc(), 0xc319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc318), 0x4c);
        // 4C 002A
        gbc.setState(0xdad0, 0x6535, 0x20b0, 0x7985, 0x4e1c, 0x7525, 0x0, 0x1);
        gbc.writeMem(0xdad0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6535);
        EXPECT(gbc.pc(), 0xdad1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdad0), 0x4c);
        // 4C 002B
        gbc.setState(0xcef6, 0x1d04, 0x2fc0, 0x1837, 0x8ccb, 0xdb80, 0x1, 0x0);
        gbc.writeMem(0xcef6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x1d04);
        EXPECT(gbc.pc(), 0xcef7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcef6), 0x4c);
        // 4C 002C
        gbc.setState(0xd2a8, 0x33b7, 0x82b0, 0xa44a, 0x1e8b, 0x12dd, 0x1, 0x0);
        gbc.writeMem(0xd2a8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x33b7);
        EXPECT(gbc.pc(), 0xd2a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2a8), 0x4c);
        // 4C 002D
        gbc.setState(0xabf0, 0xfa18, 0x7bd0, 0xc6df, 0x18, 0x53a0, 0x1, 0x0);
        gbc.writeMem(0xabf0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfa18);
        EXPECT(gbc.pc(), 0xabf1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabf0), 0x4c);
        // 4C 002E
        gbc.setState(0x3c, 0x3a15, 0x78b0, 0x26b1, 0x7dd8, 0x3915, 0x1, 0x1);
        gbc.writeMem(0x3c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3a15);
        EXPECT(gbc.pc(), 0x3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 002F
        gbc.setState(0xd9ea, 0xfdf4, 0xecc0, 0x198c, 0x2441, 0xad19, 0x0, 0x1);
        gbc.writeMem(0xd9ea, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xfdf4);
        EXPECT(gbc.pc(), 0xd9eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9ea), 0x4c);
        // 4C 0031
        gbc.setState(0x7f12, 0x93c7, 0x2410, 0x9ff2, 0xdcdc, 0xbfcf, 0x0, 0x1);
        gbc.writeMem(0x7f12, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x93c7);
        EXPECT(gbc.pc(), 0x7f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0032
        gbc.setState(0xd781, 0xd98f, 0x720, 0xdc96, 0x6d1, 0xefb0, 0x1, 0x1);
        gbc.writeMem(0xd781, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xd98f);
        EXPECT(gbc.pc(), 0xd782);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd781), 0x4c);
        // 4C 0033
        gbc.setState(0xc751, 0x70a8, 0xf380, 0xfd1c, 0x7b7e, 0x1957, 0x1, 0x1);
        gbc.writeMem(0xc751, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x70a8);
        EXPECT(gbc.pc(), 0xc752);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc751), 0x4c);
        // 4C 0034
        gbc.setState(0x9890, 0x7da7, 0xfdb0, 0x487e, 0x8af9, 0xd5af, 0x1, 0x0);
        gbc.writeMem(0x9890, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7da7);
        EXPECT(gbc.pc(), 0x9891);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9890), 0x4c);
        // 4C 0035
        gbc.setState(0x9377, 0xfafd, 0x1e70, 0x6f91, 0xaa01, 0x2df7, 0x1, 0x1);
        gbc.writeMem(0x9377, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xfafd);
        EXPECT(gbc.pc(), 0x9378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9377), 0x4c);
        // 4C 0036
        gbc.setState(0x2557, 0x660f, 0x320, 0x9a77, 0x42da, 0x3e64, 0x0, 0x1);
        gbc.writeMem(0x2557, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x660f);
        EXPECT(gbc.pc(), 0x2558);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0037
        gbc.setState(0x2d85, 0xa036, 0xf180, 0xe0f0, 0x9acb, 0xc140, 0x1, 0x0);
        gbc.writeMem(0x2d85, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa036);
        EXPECT(gbc.pc(), 0x2d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0038
        gbc.setState(0x421a, 0x6ae7, 0xca0, 0xbd84, 0x1920, 0x92d8, 0x0, 0x1);
        gbc.writeMem(0x421a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6ae7);
        EXPECT(gbc.pc(), 0x421b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 003A
        gbc.setState(0x1f95, 0x6511, 0x47a0, 0xbf8d, 0x3896, 0x8ce6, 0x0, 0x0);
        gbc.writeMem(0x1f95, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6511);
        EXPECT(gbc.pc(), 0x1f96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 003B
        gbc.setState(0x8243, 0xbc43, 0x9570, 0xb37f, 0x2859, 0x7965, 0x1, 0x0);
        gbc.writeMem(0x8243, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xbc43);
        EXPECT(gbc.pc(), 0x8244);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8243), 0x4c);
        // 4C 003C
        gbc.setState(0x25e, 0x69ea, 0x5680, 0xe1e9, 0x7f, 0x55a, 0x0, 0x0);
        gbc.writeMem(0x25e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x69ea);
        EXPECT(gbc.pc(), 0x25f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 003D
        gbc.setState(0x1d2d, 0x6c8b, 0x3960, 0x73fa, 0x13ad, 0xca29, 0x0, 0x1);
        gbc.writeMem(0x1d2d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6c8b);
        EXPECT(gbc.pc(), 0x1d2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 003E
        gbc.setState(0xfad, 0x2421, 0xb480, 0x891d, 0xc1a6, 0x7350, 0x0, 0x1);
        gbc.writeMem(0xfad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2421);
        EXPECT(gbc.pc(), 0xfae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 003F
        gbc.setState(0x418, 0xf7b7, 0xc460, 0x82cd, 0x3ed8, 0x6a46, 0x1, 0x0);
        gbc.writeMem(0x418, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf7b7);
        EXPECT(gbc.pc(), 0x419);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0040
        gbc.setState(0x54f4, 0xdba9, 0xc3d0, 0x163b, 0xc9f8, 0x6bf2, 0x1, 0x0);
        gbc.writeMem(0x54f4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xdba9);
        EXPECT(gbc.pc(), 0x54f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0041
        gbc.setState(0xcfe5, 0x22af, 0xfbf0, 0xce71, 0x668, 0xfbae, 0x1, 0x1);
        gbc.writeMem(0xcfe5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x22af);
        EXPECT(gbc.pc(), 0xcfe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfe5), 0x4c);
        // 4C 0042
        gbc.setState(0xb780, 0xda49, 0x8850, 0x7aac, 0x940a, 0x6a23, 0x0, 0x0);
        gbc.writeMem(0xb780, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xda49);
        EXPECT(gbc.pc(), 0xb781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb780), 0x4c);
        // 4C 0043
        gbc.setState(0x75b7, 0x3890, 0x7180, 0x5aad, 0x6c7a, 0xd2a3, 0x0, 0x0);
        gbc.writeMem(0x75b7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x3890);
        EXPECT(gbc.pc(), 0x75b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0044
        gbc.setState(0x8d9e, 0x7df9, 0xef0, 0x66dd, 0xf187, 0x34b2, 0x0, 0x1);
        gbc.writeMem(0x8d9e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7df9);
        EXPECT(gbc.pc(), 0x8d9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d9e), 0x4c);
        // 4C 0045
        gbc.setState(0xe8bd, 0x9277, 0xf480, 0x2a6b, 0x23e9, 0x9619, 0x0, 0x0);
        gbc.writeMem(0xe8bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x9277);
        EXPECT(gbc.pc(), 0xe8be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8bd), 0x4c);
        // 4C 0046
        gbc.setState(0xcaca, 0xe09d, 0xad80, 0x66b7, 0x2e06, 0xc90d, 0x0, 0x0);
        gbc.writeMem(0xcaca, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe09d);
        EXPECT(gbc.pc(), 0xcacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaca), 0x4c);
        // 4C 0047
        gbc.setState(0xbdce, 0x65d6, 0x9170, 0xc788, 0x7f31, 0xe90, 0x0, 0x0);
        gbc.writeMem(0xbdce, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x65d6);
        EXPECT(gbc.pc(), 0xbdcf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdce), 0x4c);
        // 4C 0048
        gbc.setState(0xc484, 0xc318, 0x2270, 0x9f20, 0x9ad8, 0x8b9b, 0x0, 0x0);
        gbc.writeMem(0xc484, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc318);
        EXPECT(gbc.pc(), 0xc485);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc484), 0x4c);
        // 4C 0049
        gbc.setState(0x34da, 0x35bc, 0x6cc0, 0xc12f, 0x9ac, 0x5be1, 0x1, 0x0);
        gbc.writeMem(0x34da, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x35bc);
        EXPECT(gbc.pc(), 0x34db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 004A
        gbc.setState(0xf3, 0x20e1, 0x8030, 0xd2c5, 0x5666, 0xf902, 0x1, 0x0);
        gbc.writeMem(0xf3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x20e1);
        EXPECT(gbc.pc(), 0xf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 004B
        gbc.setState(0xeb80, 0x6600, 0x5210, 0x9046, 0xb590, 0xb488, 0x0, 0x0);
        gbc.writeMem(0xeb80, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6600);
        EXPECT(gbc.pc(), 0xeb81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb80), 0x4c);
        // 4C 004D
        gbc.setState(0x5d71, 0x8498, 0x2ef0, 0x5b60, 0xe1c8, 0x924d, 0x1, 0x1);
        gbc.writeMem(0x5d71, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x8498);
        EXPECT(gbc.pc(), 0x5d72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 004E
        gbc.setState(0x432f, 0x63eb, 0xa780, 0xc4be, 0x754d, 0xd95c, 0x1, 0x0);
        gbc.writeMem(0x432f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x63eb);
        EXPECT(gbc.pc(), 0x4330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 004F
        gbc.setState(0x8bfe, 0x23d5, 0xf420, 0xabfa, 0xaf3, 0x671b, 0x0, 0x1);
        gbc.writeMem(0x8bfe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x23d5);
        EXPECT(gbc.pc(), 0x8bff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bfe), 0x4c);
        // 4C 0050
        gbc.setState(0x8600, 0xc314, 0xde90, 0xc5bc, 0xebd1, 0xa1fa, 0x0, 0x0);
        gbc.writeMem(0x8600, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc314);
        EXPECT(gbc.pc(), 0x8601);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8600), 0x4c);
        // 4C 0051
        gbc.setState(0x9913, 0x956, 0x91a0, 0xbf2e, 0x8ced, 0xe273, 0x0, 0x0);
        gbc.writeMem(0x9913, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x956);
        EXPECT(gbc.pc(), 0x9914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9913), 0x4c);
        // 4C 0052
        gbc.setState(0x1744, 0xd6f8, 0xc780, 0xdd33, 0x4952, 0xbf75, 0x1, 0x1);
        gbc.writeMem(0x1744, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd6f8);
        EXPECT(gbc.pc(), 0x1745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0053
        gbc.setState(0xa726, 0x3670, 0xbac0, 0xfd9a, 0xd6d0, 0x253, 0x1, 0x1);
        gbc.writeMem(0xa726, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x3670);
        EXPECT(gbc.pc(), 0xa727);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa726), 0x4c);
        // 4C 0054
        gbc.setState(0xac9f, 0xf966, 0x8710, 0xa922, 0x3747, 0xc36c, 0x0, 0x0);
        gbc.writeMem(0xac9f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf966);
        EXPECT(gbc.pc(), 0xaca0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9f), 0x4c);
        // 4C 0055
        gbc.setState(0xcf4d, 0xb4a4, 0x2a40, 0xc8ed, 0x2d08, 0x49ae, 0x0, 0x1);
        gbc.writeMem(0xcf4d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xb4a4);
        EXPECT(gbc.pc(), 0xcf4e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf4d), 0x4c);
        // 4C 0056
        gbc.setState(0xe9b8, 0x3d79, 0x2670, 0xf881, 0xe492, 0xb995, 0x1, 0x0);
        gbc.writeMem(0xe9b8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3d79);
        EXPECT(gbc.pc(), 0xe9b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b8), 0x4c);
        // 4C 0057
        gbc.setState(0xc7d6, 0x32c2, 0x8140, 0x460b, 0x5551, 0x83b, 0x1, 0x1);
        gbc.writeMem(0xc7d6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x32c2);
        EXPECT(gbc.pc(), 0xc7d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc7d6), 0x4c);
        // 4C 0059
        gbc.setState(0x17bd, 0x214a, 0x190, 0xe2a8, 0x4f9c, 0xaf42, 0x1, 0x0);
        gbc.writeMem(0x17bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x214a);
        EXPECT(gbc.pc(), 0x17be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 005A
        gbc.setState(0xb7b1, 0x58e8, 0x5200, 0x50b0, 0xfcd9, 0x2b9b, 0x1, 0x1);
        gbc.writeMem(0xb7b1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x58e8);
        EXPECT(gbc.pc(), 0xb7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7b1), 0x4c);
        // 4C 005B
        gbc.setState(0xcdd3, 0xd9da, 0xb3f0, 0x7095, 0x619f, 0xabba, 0x0, 0x0);
        gbc.writeMem(0xcdd3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd9da);
        EXPECT(gbc.pc(), 0xcdd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdd3), 0x4c);
        // 4C 005C
        gbc.setState(0x1a43, 0x9b0c, 0x8b50, 0xe55, 0xe5d5, 0xacef, 0x0, 0x0);
        gbc.writeMem(0x1a43, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x9b0c);
        EXPECT(gbc.pc(), 0x1a44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 005D
        gbc.setState(0x93fa, 0x435f, 0x46a0, 0xe207, 0xd2b5, 0x61e9, 0x1, 0x1);
        gbc.writeMem(0x93fa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x435f);
        EXPECT(gbc.pc(), 0x93fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93fa), 0x4c);
        // 4C 005E
        gbc.setState(0x9ffa, 0x9a17, 0xaa80, 0x69ef, 0x16cd, 0x44da, 0x1, 0x1);
        gbc.writeMem(0x9ffa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9a17);
        EXPECT(gbc.pc(), 0x9ffb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ffa), 0x4c);
        // 4C 005F
        gbc.setState(0xc248, 0x6a5c, 0x5e20, 0x462f, 0x8b20, 0x614a, 0x0, 0x0);
        gbc.writeMem(0xc248, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x6a5c);
        EXPECT(gbc.pc(), 0xc249);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc248), 0x4c);
        // 4C 0060
        gbc.setState(0x49f6, 0xfd70, 0x9910, 0x74ec, 0xf12c, 0x3b0f, 0x1, 0x1);
        gbc.writeMem(0x49f6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfd70);
        EXPECT(gbc.pc(), 0x49f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0061
        gbc.setState(0x2b3d, 0xb280, 0x5b20, 0xf8e, 0x71e, 0x7538, 0x0, 0x1);
        gbc.writeMem(0x2b3d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb280);
        EXPECT(gbc.pc(), 0x2b3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0062
        gbc.setState(0xef40, 0xa19e, 0xcdc0, 0x6b9f, 0xef05, 0x2ca8, 0x1, 0x1);
        gbc.writeMem(0xef40, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa19e);
        EXPECT(gbc.pc(), 0xef41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef40), 0x4c);
        // 4C 0063
        gbc.setState(0x73bc, 0x7eb7, 0xb1e0, 0xa32f, 0x6e4d, 0x4783, 0x1, 0x0);
        gbc.writeMem(0x73bc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x7eb7);
        EXPECT(gbc.pc(), 0x73bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0064
        gbc.setState(0xafb, 0x1b3, 0xe9c0, 0x3838, 0xcc39, 0xe674, 0x1, 0x1);
        gbc.writeMem(0xafb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1b3);
        EXPECT(gbc.pc(), 0xafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0065
        gbc.setState(0xc343, 0x48a3, 0x9cc0, 0x7dfb, 0xe9f, 0xa27, 0x1, 0x0);
        gbc.writeMem(0xc343, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x48a3);
        EXPECT(gbc.pc(), 0xc344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc343), 0x4c);
        // 4C 0066
        gbc.setState(0xe99c, 0x7a0b, 0x8250, 0x4198, 0x65b3, 0x95fe, 0x0, 0x0);
        gbc.writeMem(0xe99c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x7a0b);
        EXPECT(gbc.pc(), 0xe99d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe99c), 0x4c);
        // 4C 0067
        gbc.setState(0x1834, 0x7174, 0xb300, 0x79e5, 0xa97c, 0x8e1d, 0x1, 0x0);
        gbc.writeMem(0x1834, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x7174);
        EXPECT(gbc.pc(), 0x1835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0068
        gbc.setState(0x184e, 0x3134, 0x3a80, 0xdac7, 0x5fe, 0xc224, 0x0, 0x0);
        gbc.writeMem(0x184e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3134);
        EXPECT(gbc.pc(), 0x184f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0069
        gbc.setState(0xa194, 0x8d3, 0xf200, 0xf661, 0x15bb, 0x8a86, 0x1, 0x0);
        gbc.writeMem(0xa194, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8d3);
        EXPECT(gbc.pc(), 0xa195);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa194), 0x4c);
        // 4C 006A
        gbc.setState(0x1a12, 0x931a, 0xe20, 0x3b86, 0x9463, 0x87da, 0x1, 0x1);
        gbc.writeMem(0x1a12, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x931a);
        EXPECT(gbc.pc(), 0x1a13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 006B
        gbc.setState(0x5ba0, 0x3ab7, 0xad10, 0x17d2, 0xc647, 0x4e4c, 0x0, 0x0);
        gbc.writeMem(0x5ba0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3ab7);
        EXPECT(gbc.pc(), 0x5ba1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 006D
        gbc.setState(0xea8c, 0xa912, 0x4fb0, 0x44cc, 0xab07, 0x3ec9, 0x0, 0x0);
        gbc.writeMem(0xea8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xa912);
        EXPECT(gbc.pc(), 0xea8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8c), 0x4c);
        // 4C 006E
        gbc.setState(0xa596, 0x1cb4, 0x7170, 0x2993, 0x86c3, 0xbb88, 0x0, 0x0);
        gbc.writeMem(0xa596, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x1cb4);
        EXPECT(gbc.pc(), 0xa597);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa596), 0x4c);
        // 4C 006F
        gbc.setState(0x1e09, 0xb45f, 0x2d70, 0x9f7, 0xcfdf, 0x5839, 0x0, 0x0);
        gbc.writeMem(0x1e09, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb45f);
        EXPECT(gbc.pc(), 0x1e0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0070
        gbc.setState(0x80aa, 0xea8f, 0xd230, 0xf51a, 0x9ff0, 0xbaeb, 0x0, 0x1);
        gbc.writeMem(0x80aa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xea8f);
        EXPECT(gbc.pc(), 0x80ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80aa), 0x4c);
        // 4C 0071
        gbc.setState(0xdd62, 0x1d72, 0x7820, 0x652c, 0x3ec7, 0x74f0, 0x0, 0x1);
        gbc.writeMem(0xdd62, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x1d72);
        EXPECT(gbc.pc(), 0xdd63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd62), 0x4c);
        // 4C 0072
        gbc.setState(0xf73, 0xc6a, 0x2e80, 0xdf7f, 0x8ff5, 0x28a0, 0x1, 0x0);
        gbc.writeMem(0xf73, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xc6a);
        EXPECT(gbc.pc(), 0xf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0073
        gbc.setState(0x45ff, 0x3270, 0x9190, 0xdedc, 0x5f56, 0x6fad, 0x0, 0x0);
        gbc.writeMem(0x45ff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3270);
        EXPECT(gbc.pc(), 0x4600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0074
        gbc.setState(0xaf83, 0xb92f, 0x680, 0x9ff8, 0xeeea, 0xd4b4, 0x0, 0x1);
        gbc.writeMem(0xaf83, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xb92f);
        EXPECT(gbc.pc(), 0xaf84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf83), 0x4c);
        // 4C 0075
        gbc.setState(0xdfb6, 0x678d, 0x4e20, 0xf239, 0xe593, 0xb9b4, 0x1, 0x0);
        gbc.writeMem(0xdfb6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x678d);
        EXPECT(gbc.pc(), 0xdfb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfb6), 0x4c);
        // 4C 0076
        gbc.setState(0x9e3e, 0x8636, 0xe350, 0x4f10, 0x7e3c, 0x4dd6, 0x0, 0x1);
        gbc.writeMem(0x9e3e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x8636);
        EXPECT(gbc.pc(), 0x9e3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3e), 0x4c);
        // 4C 0077
        gbc.setState(0x60d5, 0x86c9, 0x4000, 0x18c7, 0xed5c, 0x38d2, 0x0, 0x1);
        gbc.writeMem(0x60d5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x86c9);
        EXPECT(gbc.pc(), 0x60d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0078
        gbc.setState(0x3509, 0x98f5, 0xe170, 0xfa99, 0x9b43, 0xda96, 0x1, 0x1);
        gbc.writeMem(0x3509, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x98f5);
        EXPECT(gbc.pc(), 0x350a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0079
        gbc.setState(0x7b73, 0xea3e, 0x1d00, 0x1760, 0x39a, 0xe23a, 0x0, 0x0);
        gbc.writeMem(0x7b73, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xea3e);
        EXPECT(gbc.pc(), 0x7b74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 007B
        gbc.setState(0xe040, 0x8501, 0x68d0, 0x911d, 0xb22a, 0x196, 0x0, 0x0);
        gbc.writeMem(0xe040, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x8501);
        EXPECT(gbc.pc(), 0xe041);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe040), 0x4c);
        // 4C 007C
        gbc.setState(0xd19, 0xceef, 0x7c90, 0x1ed1, 0x8e13, 0xa170, 0x1, 0x0);
        gbc.writeMem(0xd19, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xceef);
        EXPECT(gbc.pc(), 0xd1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 007D
        gbc.setState(0x8d5c, 0x3733, 0x89d0, 0x82ad, 0x5ab, 0xe31e, 0x1, 0x0);
        gbc.writeMem(0x8d5c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x3733);
        EXPECT(gbc.pc(), 0x8d5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d5c), 0x4c);
        // 4C 007E
        gbc.setState(0x24fe, 0xa47d, 0x6f90, 0xc69b, 0x7287, 0x3ac4, 0x1, 0x0);
        gbc.writeMem(0x24fe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa47d);
        EXPECT(gbc.pc(), 0x24ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 007F
        gbc.setState(0xb346, 0x39a1, 0x9ad0, 0x2e84, 0xa21, 0x62e8, 0x0, 0x0);
        gbc.writeMem(0xb346, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x39a1);
        EXPECT(gbc.pc(), 0xb347);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb346), 0x4c);
        // 4C 0080
        gbc.setState(0xbdba, 0x46f8, 0xba90, 0x5f04, 0x558c, 0x4c73, 0x1, 0x1);
        gbc.writeMem(0xbdba, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x46f8);
        EXPECT(gbc.pc(), 0xbdbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbdba), 0x4c);
        // 4C 0081
        gbc.setState(0x21ef, 0x4ae5, 0xc4b0, 0xbb63, 0x2e5d, 0x8260, 0x0, 0x1);
        gbc.writeMem(0x21ef, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4ae5);
        EXPECT(gbc.pc(), 0x21f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0082
        gbc.setState(0x733e, 0x8709, 0x8290, 0xe6d3, 0xf2eb, 0x12f0, 0x0, 0x0);
        gbc.writeMem(0x733e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x8709);
        EXPECT(gbc.pc(), 0x733f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0083
        gbc.setState(0x5e13, 0xc068, 0xc8e0, 0x2138, 0x68ab, 0xa1fd, 0x0, 0x1);
        gbc.writeMem(0x5e13, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc068);
        EXPECT(gbc.pc(), 0x5e14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0084
        gbc.setState(0xe7c9, 0x3e6, 0x6b00, 0xc182, 0x3b5b, 0x41cf, 0x0, 0x0);
        gbc.writeMem(0xe7c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x3e6);
        EXPECT(gbc.pc(), 0xe7ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c9), 0x4c);
        // 4C 0085
        gbc.setState(0x14a5, 0x4c62, 0x90d0, 0x2c29, 0x1f77, 0x78c5, 0x1, 0x0);
        gbc.writeMem(0x14a5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x4c62);
        EXPECT(gbc.pc(), 0x14a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0086
        gbc.setState(0xe024, 0xd123, 0x4e40, 0x6ed8, 0xe638, 0x77f4, 0x0, 0x0);
        gbc.writeMem(0xe024, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xd123);
        EXPECT(gbc.pc(), 0xe025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe024), 0x4c);
        // 4C 0088
        gbc.setState(0xd35d, 0x6f4e, 0xd9e0, 0xa52d, 0x4b28, 0xeea0, 0x1, 0x0);
        gbc.writeMem(0xd35d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x6f4e);
        EXPECT(gbc.pc(), 0xd35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd35d), 0x4c);
        // 4C 0089
        gbc.setState(0xe8c8, 0xf4ce, 0x1400, 0x9f39, 0xc2f2, 0x36b0, 0x0, 0x1);
        gbc.writeMem(0xe8c8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xf4ce);
        EXPECT(gbc.pc(), 0xe8c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c8), 0x4c);
        // 4C 008A
        gbc.setState(0x53a6, 0xe885, 0x6430, 0x7bb2, 0x4ee1, 0x6730, 0x1, 0x0);
        gbc.writeMem(0x53a6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe885);
        EXPECT(gbc.pc(), 0x53a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 008B
        gbc.setState(0xee76, 0x9066, 0x2d40, 0xd416, 0x9283, 0xb433, 0x1, 0x1);
        gbc.writeMem(0xee76, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x9066);
        EXPECT(gbc.pc(), 0xee77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee76), 0x4c);
        // 4C 008C
        gbc.setState(0x24d3, 0x46d4, 0xcd30, 0xdb3, 0x9461, 0xe6d2, 0x0, 0x1);
        gbc.writeMem(0x24d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x46d4);
        EXPECT(gbc.pc(), 0x24d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 008D
        gbc.setState(0x3fce, 0x88fb, 0xc550, 0x8f50, 0x1e26, 0xa79b, 0x1, 0x1);
        gbc.writeMem(0x3fce, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x88fb);
        EXPECT(gbc.pc(), 0x3fcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 008E
        gbc.setState(0xdbe7, 0x3823, 0xaf70, 0x2df0, 0xa04e, 0xa55e, 0x0, 0x1);
        gbc.writeMem(0xdbe7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x3823);
        EXPECT(gbc.pc(), 0xdbe8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe7), 0x4c);
        // 4C 008F
        gbc.setState(0x186b, 0x4383, 0xf0d0, 0xb378, 0xabf4, 0x4400, 0x0, 0x0);
        gbc.writeMem(0x186b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4383);
        EXPECT(gbc.pc(), 0x186c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0090
        gbc.setState(0x8669, 0xfad1, 0x8800, 0xdd2d, 0xeb7e, 0xb42b, 0x1, 0x0);
        gbc.writeMem(0x8669, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfad1);
        EXPECT(gbc.pc(), 0x866a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8669), 0x4c);
        // 4C 0091
        gbc.setState(0x7390, 0x87ef, 0x9d70, 0xc0db, 0x600f, 0xdb80, 0x0, 0x1);
        gbc.writeMem(0x7390, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x87ef);
        EXPECT(gbc.pc(), 0x7391);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0092
        gbc.setState(0xdc8d, 0x282b, 0x92c0, 0xd93c, 0xbf4f, 0x4045, 0x1, 0x1);
        gbc.writeMem(0xdc8d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x282b);
        EXPECT(gbc.pc(), 0xdc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc8d), 0x4c);
        // 4C 0093
        gbc.setState(0xa421, 0xa47c, 0x2da0, 0x3fd6, 0x9b3b, 0xcfe7, 0x1, 0x0);
        gbc.writeMem(0xa421, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa47c);
        EXPECT(gbc.pc(), 0xa422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa421), 0x4c);
        // 4C 0094
        gbc.setState(0xec5a, 0x8b34, 0x8620, 0x5b43, 0xec26, 0xa112, 0x1, 0x0);
        gbc.writeMem(0xec5a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x8b34);
        EXPECT(gbc.pc(), 0xec5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec5a), 0x4c);
        // 4C 0095
        gbc.setState(0x65f1, 0x6f37, 0x3a0, 0x50b6, 0x413b, 0x920, 0x1, 0x0);
        gbc.writeMem(0x65f1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6f37);
        EXPECT(gbc.pc(), 0x65f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0097
        gbc.setState(0x6212, 0x4260, 0x1b60, 0x59f7, 0xeac2, 0x7646, 0x0, 0x0);
        gbc.writeMem(0x6212, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x4260);
        EXPECT(gbc.pc(), 0x6213);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0098
        gbc.setState(0xcc8c, 0xdce7, 0xa130, 0x6891, 0xafe8, 0xdd6c, 0x1, 0x0);
        gbc.writeMem(0xcc8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xdce7);
        EXPECT(gbc.pc(), 0xcc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8c), 0x4c);
        // 4C 0099
        gbc.setState(0x7b15, 0x36aa, 0x510, 0xe596, 0xc2bb, 0x8c6, 0x0, 0x1);
        gbc.writeMem(0x7b15, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x36aa);
        EXPECT(gbc.pc(), 0x7b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 009A
        gbc.setState(0x1980, 0xc315, 0xde30, 0x9eae, 0xa4af, 0x90df, 0x1, 0x0);
        gbc.writeMem(0x1980, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc315);
        EXPECT(gbc.pc(), 0x1981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 009B
        gbc.setState(0xdae0, 0x5c03, 0xed0, 0x7776, 0xa753, 0x32ec, 0x1, 0x1);
        gbc.writeMem(0xdae0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5c03);
        EXPECT(gbc.pc(), 0xdae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdae0), 0x4c);
        // 4C 009C
        gbc.setState(0x3430, 0xca9a, 0x7b90, 0xb6e5, 0xbc1, 0xbe43, 0x1, 0x0);
        gbc.writeMem(0x3430, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xca9a);
        EXPECT(gbc.pc(), 0x3431);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 009D
        gbc.setState(0x993d, 0x75c8, 0x69d0, 0x5107, 0x3418, 0x94c5, 0x0, 0x1);
        gbc.writeMem(0x993d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x75c8);
        EXPECT(gbc.pc(), 0x993e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x993d), 0x4c);
        // 4C 009E
        gbc.setState(0x400a, 0x5a68, 0xb7b0, 0x44ed, 0x9ad0, 0x325a, 0x1, 0x1);
        gbc.writeMem(0x400a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x5a68);
        EXPECT(gbc.pc(), 0x400b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 009F
        gbc.setState(0xa45b, 0xcccf, 0xd970, 0xcbf4, 0x11bb, 0xee42, 0x0, 0x1);
        gbc.writeMem(0xa45b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xcccf);
        EXPECT(gbc.pc(), 0xa45c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa45b), 0x4c);
        // 4C 00A0
        gbc.setState(0x3014, 0x65a5, 0xb2d0, 0x8bd6, 0xf6e4, 0x9b8, 0x1, 0x1);
        gbc.writeMem(0x3014, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x65a5);
        EXPECT(gbc.pc(), 0x3015);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00A1
        gbc.setState(0xb6af, 0x8255, 0xd790, 0x7717, 0xf784, 0x2fe6, 0x0, 0x1);
        gbc.writeMem(0xb6af, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8255);
        EXPECT(gbc.pc(), 0xb6b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6af), 0x4c);
        // 4C 00A2
        gbc.setState(0x811b, 0x8268, 0x4240, 0xbfca, 0x1727, 0x548c, 0x1, 0x1);
        gbc.writeMem(0x811b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x8268);
        EXPECT(gbc.pc(), 0x811c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x811b), 0x4c);
        // 4C 00A3
        gbc.setState(0xa8ec, 0xcb1f, 0x6c0, 0xf1ee, 0x6e03, 0xb23a, 0x1, 0x0);
        gbc.writeMem(0xa8ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xcb1f);
        EXPECT(gbc.pc(), 0xa8ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ec), 0x4c);
        // 4C 00A4
        gbc.setState(0x2500, 0xbe2d, 0x5fb0, 0x55cf, 0xca74, 0x289a, 0x0, 0x0);
        gbc.writeMem(0x2500, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xbe2d);
        EXPECT(gbc.pc(), 0x2501);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00A5
        gbc.setState(0x6b88, 0xf82a, 0x5bd0, 0x4b60, 0x9eca, 0x5569, 0x1, 0x1);
        gbc.writeMem(0x6b88, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xf82a);
        EXPECT(gbc.pc(), 0x6b89);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00A6
        gbc.setState(0xe4ad, 0xe8a, 0xd6d0, 0xcaef, 0x898c, 0xb9b1, 0x1, 0x1);
        gbc.writeMem(0xe4ad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xe8a);
        EXPECT(gbc.pc(), 0xe4ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4ad), 0x4c);
        // 4C 00A7
        gbc.setState(0xbcce, 0xc6, 0xe470, 0x7729, 0xff7, 0x68cf, 0x0, 0x1);
        gbc.writeMem(0xbcce, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xc6);
        EXPECT(gbc.pc(), 0xbccf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcce), 0x4c);
        // 4C 00A8
        gbc.setState(0xa85, 0x3ae0, 0x2f20, 0x60e, 0xe776, 0x74de, 0x0, 0x1);
        gbc.writeMem(0xa85, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x3ae0);
        EXPECT(gbc.pc(), 0xa86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00A9
        gbc.setState(0x4450, 0xbd6b, 0x4f30, 0x5d71, 0xa602, 0x7573, 0x0, 0x1);
        gbc.writeMem(0x4450, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xbd6b);
        EXPECT(gbc.pc(), 0x4451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00AA
        gbc.setState(0x1849, 0x8874, 0xba50, 0x6b58, 0xc9d3, 0x85a8, 0x0, 0x1);
        gbc.writeMem(0x1849, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8874);
        EXPECT(gbc.pc(), 0x184a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00AB
        gbc.setState(0xb8d8, 0xcff8, 0x3cf0, 0x57d9, 0xc71a, 0x1bbb, 0x1, 0x1);
        gbc.writeMem(0xb8d8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xcff8);
        EXPECT(gbc.pc(), 0xb8d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8d8), 0x4c);
        // 4C 00AC
        gbc.setState(0x650e, 0x84f2, 0xbf80, 0x97d1, 0x59c2, 0x944a, 0x0, 0x0);
        gbc.writeMem(0x650e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x84f2);
        EXPECT(gbc.pc(), 0x650f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00AE
        gbc.setState(0xed8d, 0x7be5, 0xe4a0, 0x8a0a, 0x80c7, 0x4fc, 0x1, 0x0);
        gbc.writeMem(0xed8d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7be5);
        EXPECT(gbc.pc(), 0xed8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed8d), 0x4c);
        // 4C 00AF
        gbc.setState(0xdbc6, 0xbdb0, 0xaaf0, 0xc361, 0x6a28, 0x74e, 0x0, 0x0);
        gbc.writeMem(0xdbc6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xbdb0);
        EXPECT(gbc.pc(), 0xdbc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbc6), 0x4c);
        // 4C 00B0
        gbc.setState(0xdd17, 0x6fc2, 0xe50, 0xe76f, 0xa199, 0x9ea1, 0x0, 0x0);
        gbc.writeMem(0xdd17, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6fc2);
        EXPECT(gbc.pc(), 0xdd18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd17), 0x4c);
        // 4C 00B2
        gbc.setState(0x428e, 0xb98f, 0x9830, 0x905b, 0x10ff, 0xd637, 0x0, 0x1);
        gbc.writeMem(0x428e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xb98f);
        EXPECT(gbc.pc(), 0x428f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00B3
        gbc.setState(0xf2b, 0x2ab3, 0x82c0, 0xc2cc, 0xddbf, 0x5dbd, 0x1, 0x1);
        gbc.writeMem(0xf2b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2ab3);
        EXPECT(gbc.pc(), 0xf2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00B4
        gbc.setState(0x5727, 0xeeb3, 0xf6a0, 0x1b24, 0x9313, 0x91de, 0x1, 0x1);
        gbc.writeMem(0x5727, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xeeb3);
        EXPECT(gbc.pc(), 0x5728);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00B7
        gbc.setState(0xc5db, 0xee7a, 0xb920, 0x6437, 0x9de9, 0xbe6e, 0x1, 0x0);
        gbc.writeMem(0xc5db, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xee7a);
        EXPECT(gbc.pc(), 0xc5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5db), 0x4c);
        // 4C 00B8
        gbc.setState(0x9b4, 0x4d59, 0xc030, 0xba98, 0x8b7b, 0x1e18, 0x1, 0x1);
        gbc.writeMem(0x9b4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4d59);
        EXPECT(gbc.pc(), 0x9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00BA
        gbc.setState(0x3502, 0xce49, 0x4d80, 0x5ba8, 0xac50, 0xe4ef, 0x0, 0x0);
        gbc.writeMem(0x3502, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xce49);
        EXPECT(gbc.pc(), 0x3503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00BB
        gbc.setState(0x81af, 0x9f63, 0x33c0, 0x8557, 0x7412, 0x48f3, 0x0, 0x0);
        gbc.writeMem(0x81af, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x9f63);
        EXPECT(gbc.pc(), 0x81b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81af), 0x4c);
        // 4C 00BC
        gbc.setState(0x5ba3, 0x7f66, 0xf840, 0x5557, 0xd465, 0xea50, 0x0, 0x1);
        gbc.writeMem(0x5ba3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x7f66);
        EXPECT(gbc.pc(), 0x5ba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00BD
        gbc.setState(0xc61b, 0x202e, 0x6f60, 0x1ea, 0xfb2d, 0x4ca, 0x1, 0x1);
        gbc.writeMem(0xc61b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x202e);
        EXPECT(gbc.pc(), 0xc61c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc61b), 0x4c);
        // 4C 00BE
        gbc.setState(0xe291, 0xe6f6, 0xc060, 0x596b, 0xd628, 0xff68, 0x0, 0x0);
        gbc.writeMem(0xe291, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xe6f6);
        EXPECT(gbc.pc(), 0xe292);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe291), 0x4c);
        // 4C 00C0
        gbc.setState(0xb0a5, 0xe1f6, 0x5900, 0xc2c, 0xa71a, 0xa253, 0x1, 0x1);
        gbc.writeMem(0xb0a5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xe1f6);
        EXPECT(gbc.pc(), 0xb0a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb0a5), 0x4c);
        // 4C 00C1
        gbc.setState(0xd680, 0xe2bd, 0x97d0, 0x5b30, 0xd499, 0xb266, 0x0, 0x0);
        gbc.writeMem(0xd680, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xe2bd);
        EXPECT(gbc.pc(), 0xd681);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd680), 0x4c);
        // 4C 00C2
        gbc.setState(0xa07c, 0x165a, 0x380, 0x5a66, 0x317b, 0xd1c2, 0x1, 0x0);
        gbc.writeMem(0xa07c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x165a);
        EXPECT(gbc.pc(), 0xa07d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa07c), 0x4c);
        // 4C 00C3
        gbc.setState(0x4ba6, 0x2c92, 0xa120, 0x6106, 0xe7ef, 0xc03f, 0x0, 0x1);
        gbc.writeMem(0x4ba6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x2c92);
        EXPECT(gbc.pc(), 0x4ba7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00C4
        gbc.setState(0xcdf5, 0x830e, 0xb6e0, 0xbfa8, 0xeadf, 0x5323, 0x0, 0x0);
        gbc.writeMem(0xcdf5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x830e);
        EXPECT(gbc.pc(), 0xcdf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf5), 0x4c);
        // 4C 00C5
        gbc.setState(0x380d, 0x6124, 0x4ac0, 0x26b7, 0x766c, 0x9e50, 0x1, 0x1);
        gbc.writeMem(0x380d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6124);
        EXPECT(gbc.pc(), 0x380e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00C6
        gbc.setState(0x1d9a, 0xc5ec, 0xa130, 0xd047, 0xfc81, 0x49df, 0x0, 0x1);
        gbc.writeMem(0x1d9a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xc5ec);
        EXPECT(gbc.pc(), 0x1d9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00C7
        gbc.setState(0x1d12, 0x76dd, 0xe100, 0x3991, 0x26f7, 0x43dd, 0x1, 0x1);
        gbc.writeMem(0x1d12, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x76dd);
        EXPECT(gbc.pc(), 0x1d13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00C8
        gbc.setState(0x2a0f, 0xbe08, 0x17e0, 0xcf77, 0x7700, 0x603c, 0x0, 0x1);
        gbc.writeMem(0x2a0f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbe08);
        EXPECT(gbc.pc(), 0x2a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00C9
        gbc.setState(0x323a, 0x9e46, 0xa3c0, 0x347b, 0x4261, 0x2103, 0x0, 0x0);
        gbc.writeMem(0x323a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9e46);
        EXPECT(gbc.pc(), 0x323b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00CA
        gbc.setState(0x17ea, 0x5aad, 0xc1e0, 0xa1a7, 0x6500, 0x1614, 0x0, 0x1);
        gbc.writeMem(0x17ea, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5aad);
        EXPECT(gbc.pc(), 0x17eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00CB
        gbc.setState(0xbb41, 0xae9a, 0xcef0, 0x1e05, 0x7ea8, 0x534, 0x1, 0x0);
        gbc.writeMem(0xbb41, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xae9a);
        EXPECT(gbc.pc(), 0xbb42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb41), 0x4c);
        // 4C 00CC
        gbc.setState(0x5550, 0xb427, 0x3610, 0x208c, 0xc9c7, 0x12fa, 0x1, 0x0);
        gbc.writeMem(0x5550, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb427);
        EXPECT(gbc.pc(), 0x5551);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00CD
        gbc.setState(0xabd3, 0xd9b4, 0x4540, 0xbba7, 0x3708, 0x5eab, 0x0, 0x0);
        gbc.writeMem(0xabd3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd9b4);
        EXPECT(gbc.pc(), 0xabd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabd3), 0x4c);
        // 4C 00CE
        gbc.setState(0x48ec, 0x53c9, 0x4000, 0x698a, 0x3321, 0xb668, 0x0, 0x0);
        gbc.writeMem(0x48ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x53c9);
        EXPECT(gbc.pc(), 0x48ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00CF
        gbc.setState(0xcf5, 0xdeec, 0x6880, 0xa442, 0xa555, 0x9fb4, 0x1, 0x1);
        gbc.writeMem(0xcf5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdeec);
        EXPECT(gbc.pc(), 0xcf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00D0
        gbc.setState(0xed13, 0x7814, 0xd220, 0x8c0c, 0xcab9, 0x3107, 0x0, 0x1);
        gbc.writeMem(0xed13, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7814);
        EXPECT(gbc.pc(), 0xed14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed13), 0x4c);
        // 4C 00D1
        gbc.setState(0xc8f3, 0x92b6, 0x5370, 0x6de7, 0x785f, 0xdc09, 0x1, 0x0);
        gbc.writeMem(0xc8f3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x92b6);
        EXPECT(gbc.pc(), 0xc8f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8f3), 0x4c);
        // 4C 00D2
        gbc.setState(0x2002, 0x6cd2, 0xf370, 0x818f, 0x41c7, 0x3dc3, 0x1, 0x0);
        gbc.writeMem(0x2002, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6cd2);
        EXPECT(gbc.pc(), 0x2003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00D3
        gbc.setState(0x3801, 0x941, 0xf0e0, 0x497e, 0x31d9, 0xdd5f, 0x1, 0x0);
        gbc.writeMem(0x3801, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x941);
        EXPECT(gbc.pc(), 0x3802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00D4
        gbc.setState(0xba40, 0xc39c, 0x780, 0xfd0e, 0x5605, 0x5078, 0x0, 0x1);
        gbc.writeMem(0xba40, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc39c);
        EXPECT(gbc.pc(), 0xba41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba40), 0x4c);
        // 4C 00D5
        gbc.setState(0x4b27, 0xdca, 0x6d0, 0x8347, 0xab4a, 0xb5ff, 0x1, 0x1);
        gbc.writeMem(0x4b27, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xdca);
        EXPECT(gbc.pc(), 0x4b28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00D6
        gbc.setState(0xad1d, 0x8760, 0x63c0, 0xc567, 0x5af3, 0xf16e, 0x1, 0x0);
        gbc.writeMem(0xad1d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x8760);
        EXPECT(gbc.pc(), 0xad1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1d), 0x4c);
        // 4C 00D7
        gbc.setState(0xbd24, 0xd83c, 0x4020, 0x96a7, 0xb4cb, 0xf632, 0x0, 0x0);
        gbc.writeMem(0xbd24, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xd83c);
        EXPECT(gbc.pc(), 0xbd25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd24), 0x4c);
        // 4C 00D8
        gbc.setState(0x9e9e, 0xb581, 0xd0e0, 0x873c, 0x64, 0xab2f, 0x1, 0x1);
        gbc.writeMem(0x9e9e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xb581);
        EXPECT(gbc.pc(), 0x9e9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e9e), 0x4c);
        // 4C 00D9
        gbc.setState(0xdb48, 0xfaa4, 0x2a20, 0xd932, 0xd4c8, 0xc95d, 0x1, 0x1);
        gbc.writeMem(0xdb48, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xfaa4);
        EXPECT(gbc.pc(), 0xdb49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb48), 0x4c);
        // 4C 00DA
        gbc.setState(0x686b, 0x7adc, 0x9130, 0xcfb0, 0xb415, 0x9431, 0x0, 0x1);
        gbc.writeMem(0x686b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x7adc);
        EXPECT(gbc.pc(), 0x686c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00DB
        gbc.setState(0x795e, 0xc5c4, 0xe5b0, 0x56a1, 0x4253, 0xa6d5, 0x0, 0x0);
        gbc.writeMem(0x795e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc5c4);
        EXPECT(gbc.pc(), 0x795f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00DC
        gbc.setState(0xa6f7, 0xf961, 0x39e0, 0x6100, 0x24ab, 0x6d67, 0x1, 0x0);
        gbc.writeMem(0xa6f7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xf961);
        EXPECT(gbc.pc(), 0xa6f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6f7), 0x4c);
        // 4C 00DD
        gbc.setState(0x1e3d, 0xc1b, 0xbc70, 0x962d, 0xefae, 0x5c37, 0x0, 0x1);
        gbc.writeMem(0x1e3d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc1b);
        EXPECT(gbc.pc(), 0x1e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00DE
        gbc.setState(0x6330, 0x94ee, 0x3400, 0x33c0, 0xe719, 0xb22e, 0x0, 0x1);
        gbc.writeMem(0x6330, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x94ee);
        EXPECT(gbc.pc(), 0x6331);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00DF
        gbc.setState(0x1de2, 0x4ab7, 0xc6d0, 0xfd15, 0xb25b, 0x70c1, 0x1, 0x1);
        gbc.writeMem(0x1de2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4ab7);
        EXPECT(gbc.pc(), 0x1de3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00E0
        gbc.setState(0xc929, 0x2eb1, 0xaff0, 0xd9fc, 0x72f4, 0x66, 0x1, 0x1);
        gbc.writeMem(0xc929, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2eb1);
        EXPECT(gbc.pc(), 0xc92a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc929), 0x4c);
        // 4C 00E1
        gbc.setState(0xa63d, 0xfb8a, 0x2cd0, 0x99f2, 0x94ea, 0x3888, 0x1, 0x1);
        gbc.writeMem(0xa63d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfb8a);
        EXPECT(gbc.pc(), 0xa63e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa63d), 0x4c);
        // 4C 00E2
        gbc.setState(0x1470, 0x6a5c, 0xfaa0, 0x64bb, 0xf9d2, 0x8eb6, 0x1, 0x1);
        gbc.writeMem(0x1470, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6a5c);
        EXPECT(gbc.pc(), 0x1471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00E3
        gbc.setState(0xb3c4, 0x508f, 0xa4f0, 0xdcd6, 0x992a, 0xf88a, 0x0, 0x0);
        gbc.writeMem(0xb3c4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x508f);
        EXPECT(gbc.pc(), 0xb3c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3c4), 0x4c);
        // 4C 00E4
        gbc.setState(0x6e03, 0x5f96, 0xd4e0, 0x94e4, 0xf2a3, 0x7534, 0x0, 0x1);
        gbc.writeMem(0x6e03, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x5f96);
        EXPECT(gbc.pc(), 0x6e04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00E5
        gbc.setState(0x97fb, 0xb52, 0xa30, 0x161e, 0x715f, 0x8ff3, 0x0, 0x1);
        gbc.writeMem(0x97fb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xb52);
        EXPECT(gbc.pc(), 0x97fc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97fb), 0x4c);
        // 4C 00E6
        gbc.setState(0xadf3, 0x67b3, 0x6150, 0x79c3, 0x20c1, 0xd45c, 0x0, 0x0);
        gbc.writeMem(0xadf3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x67b3);
        EXPECT(gbc.pc(), 0xadf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf3), 0x4c);
        // 4C 00E8
        gbc.setState(0xcd7f, 0xfc5c, 0x2c60, 0xf390, 0x200c, 0x1f6, 0x0, 0x0);
        gbc.writeMem(0xcd7f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfc5c);
        EXPECT(gbc.pc(), 0xcd80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd7f), 0x4c);
        // 4C 00E9
        gbc.setState(0x38e3, 0x24c, 0x3490, 0x24e, 0x37e5, 0x911b, 0x0, 0x1);
        gbc.writeMem(0x38e3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x24c);
        EXPECT(gbc.pc(), 0x38e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00EA
        gbc.setState(0x9ee6, 0x77af, 0xadf0, 0xa1ce, 0xd548, 0x579c, 0x1, 0x1);
        gbc.writeMem(0x9ee6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x77af);
        EXPECT(gbc.pc(), 0x9ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ee6), 0x4c);
        // 4C 00EB
        gbc.setState(0x1b4f, 0x98f8, 0x39a0, 0xc061, 0x2bad, 0x9f5a, 0x1, 0x0);
        gbc.writeMem(0x1b4f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x98f8);
        EXPECT(gbc.pc(), 0x1b50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00EC
        gbc.setState(0x579a, 0x13e9, 0xabc0, 0x19b5, 0x3c2d, 0x4672, 0x0, 0x1);
        gbc.writeMem(0x579a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x13e9);
        EXPECT(gbc.pc(), 0x579b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00ED
        gbc.setState(0x5f51, 0xe23b, 0xeda0, 0x8b30, 0xcdd1, 0x4d2b, 0x1, 0x0);
        gbc.writeMem(0x5f51, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe23b);
        EXPECT(gbc.pc(), 0x5f52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00EE
        gbc.setState(0xe1d6, 0xb5a2, 0x6af0, 0x93, 0x9eaa, 0x5602, 0x0, 0x0);
        gbc.writeMem(0xe1d6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb5a2);
        EXPECT(gbc.pc(), 0xe1d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe1d6), 0x4c);
        // 4C 00EF
        gbc.setState(0x9bd2, 0x9127, 0xc580, 0xc14c, 0x33be, 0xcb16, 0x0, 0x1);
        gbc.writeMem(0x9bd2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9127);
        EXPECT(gbc.pc(), 0x9bd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bd2), 0x4c);
        // 4C 00F0
        gbc.setState(0x3a92, 0x27e4, 0x8b80, 0x1314, 0x8740, 0xaa57, 0x1, 0x0);
        gbc.writeMem(0x3a92, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x27e4);
        EXPECT(gbc.pc(), 0x3a93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00F1
        gbc.setState(0x35a5, 0x2675, 0x5180, 0xa52d, 0x8538, 0x3ec8, 0x0, 0x0);
        gbc.writeMem(0x35a5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x2675);
        EXPECT(gbc.pc(), 0x35a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 00F2
        gbc.setState(0xbb27, 0x83e5, 0x4420, 0xe82, 0xe901, 0x7032, 0x0, 0x1);
        gbc.writeMem(0xbb27, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x83e5);
        EXPECT(gbc.pc(), 0xbb28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb27), 0x4c);
        // 4C 00F3
        gbc.setState(0xb755, 0x5513, 0x54e0, 0xa87, 0xacfa, 0x8675, 0x0, 0x0);
        gbc.writeMem(0xb755, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x5513);
        EXPECT(gbc.pc(), 0xb756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb755), 0x4c);
        // 4C 00F4
        gbc.setState(0x3e99, 0x732f, 0x85e0, 0x282d, 0xf3fa, 0x5a80, 0x1, 0x1);
        gbc.writeMem(0x3e99, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x732f);
        EXPECT(gbc.pc(), 0x3e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 00F7
        gbc.setState(0x9060, 0x1dd6, 0x2470, 0x7576, 0xb2c5, 0x1ff3, 0x0, 0x0);
        gbc.writeMem(0x9060, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1dd6);
        EXPECT(gbc.pc(), 0x9061);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9060), 0x4c);
        // 4C 00F8
        gbc.setState(0x18ec, 0xf383, 0x3370, 0xa7a9, 0xb26f, 0xe3dd, 0x1, 0x1);
        gbc.writeMem(0x18ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf383);
        EXPECT(gbc.pc(), 0x18ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 00F9
        gbc.setState(0x8523, 0x463a, 0x11a0, 0x4ad2, 0x1c8f, 0x6e34, 0x1, 0x1);
        gbc.writeMem(0x8523, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x463a);
        EXPECT(gbc.pc(), 0x8524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8523), 0x4c);
        // 4C 00FA
        gbc.setState(0xcf58, 0xbdf4, 0x6cf0, 0xa48d, 0x7a29, 0x581a, 0x0, 0x0);
        gbc.writeMem(0xcf58, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbdf4);
        EXPECT(gbc.pc(), 0xcf59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf58), 0x4c);
        // 4C 00FB
        gbc.setState(0xe767, 0xe87c, 0x2040, 0xc93d, 0xa47f, 0x5a56, 0x0, 0x0);
        gbc.writeMem(0xe767, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe87c);
        EXPECT(gbc.pc(), 0xe768);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe767), 0x4c);
        // 4C 00FC
        gbc.setState(0x7199, 0xafe1, 0x8950, 0x9ddc, 0x9fe1, 0x49f7, 0x1, 0x1);
        gbc.writeMem(0x7199, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xafe1);
        EXPECT(gbc.pc(), 0x719a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00FD
        gbc.setState(0xec5, 0x49c7, 0xbf50, 0xebad, 0xf4d7, 0xcc65, 0x1, 0x0);
        gbc.writeMem(0xec5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x49c7);
        EXPECT(gbc.pc(), 0xec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 00FE
        gbc.setState(0x9533, 0xc4ee, 0x79a0, 0x2af0, 0xf4dd, 0x1678, 0x1, 0x0);
        gbc.writeMem(0x9533, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xc4ee);
        EXPECT(gbc.pc(), 0x9534);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9533), 0x4c);
        // 4C 00FF
        gbc.setState(0x611b, 0xb62c, 0x4da0, 0x509b, 0xc8a1, 0xeac4, 0x1, 0x1);
        gbc.writeMem(0x611b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xb62c);
        EXPECT(gbc.pc(), 0x611c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0100
        gbc.setState(0xdef, 0xa5bc, 0x63c0, 0xa174, 0x77c2, 0x8201, 0x1, 0x0);
        gbc.writeMem(0xdef, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xa5bc);
        EXPECT(gbc.pc(), 0xdf0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0101
        gbc.setState(0x914b, 0x8d51, 0xae10, 0xce62, 0x8ae5, 0x81d0, 0x0, 0x1);
        gbc.writeMem(0x914b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8d51);
        EXPECT(gbc.pc(), 0x914c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x914b), 0x4c);
        // 4C 0102
        gbc.setState(0x127, 0x20f6, 0x1190, 0x9486, 0x1660, 0xcb45, 0x1, 0x1);
        gbc.writeMem(0x127, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x20f6);
        EXPECT(gbc.pc(), 0x128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0103
        gbc.setState(0xaaad, 0xb155, 0x3170, 0xdbc8, 0x1ee2, 0xa58, 0x1, 0x0);
        gbc.writeMem(0xaaad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb155);
        EXPECT(gbc.pc(), 0xaaae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaad), 0x4c);
        // 4C 0105
        gbc.setState(0x85b3, 0x1d2f, 0x89a0, 0x7638, 0xe565, 0x5731, 0x0, 0x0);
        gbc.writeMem(0x85b3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1d2f);
        EXPECT(gbc.pc(), 0x85b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85b3), 0x4c);
        // 4C 0106
        gbc.setState(0x52d8, 0xce5c, 0x2fa0, 0x7c34, 0x385d, 0x6366, 0x1, 0x1);
        gbc.writeMem(0x52d8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xce5c);
        EXPECT(gbc.pc(), 0x52d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0108
        gbc.setState(0xe5ff, 0x2fac, 0x3580, 0x93e6, 0xae04, 0xa437, 0x0, 0x1);
        gbc.writeMem(0xe5ff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x2fac);
        EXPECT(gbc.pc(), 0xe600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ff), 0x4c);
        // 4C 0109
        gbc.setState(0x43a9, 0xb4e9, 0xec60, 0xf9a5, 0xa6c0, 0xe3d2, 0x0, 0x1);
        gbc.writeMem(0x43a9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb4e9);
        EXPECT(gbc.pc(), 0x43aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 010A
        gbc.setState(0x7025, 0x444a, 0x44d0, 0xe1e7, 0x7275, 0x8f63, 0x1, 0x1);
        gbc.writeMem(0x7025, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x444a);
        EXPECT(gbc.pc(), 0x7026);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 010B
        gbc.setState(0x4253, 0x8468, 0x230, 0xe8de, 0x4cdc, 0xc88f, 0x0, 0x1);
        gbc.writeMem(0x4253, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x8468);
        EXPECT(gbc.pc(), 0x4254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 010C
        gbc.setState(0xc9ad, 0x2887, 0x4e40, 0x3553, 0xd5fe, 0x5533, 0x1, 0x0);
        gbc.writeMem(0xc9ad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x2887);
        EXPECT(gbc.pc(), 0xc9ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9ad), 0x4c);
        // 4C 010D
        gbc.setState(0xe637, 0x2092, 0x89e0, 0xf5e, 0xce78, 0xa178, 0x1, 0x1);
        gbc.writeMem(0xe637, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2092);
        EXPECT(gbc.pc(), 0xe638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe637), 0x4c);
        // 4C 010E
        gbc.setState(0xc102, 0x1072, 0x4620, 0x37db, 0x6e92, 0x35f1, 0x1, 0x1);
        gbc.writeMem(0xc102, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1072);
        EXPECT(gbc.pc(), 0xc103);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc102), 0x4c);
        // 4C 010F
        gbc.setState(0xae8d, 0x5bef, 0xdcd0, 0x1712, 0x657b, 0xb5fb, 0x0, 0x1);
        gbc.writeMem(0xae8d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x5bef);
        EXPECT(gbc.pc(), 0xae8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae8d), 0x4c);
        // 4C 0110
        gbc.setState(0xa515, 0xa719, 0xa840, 0x34a5, 0x2bf2, 0xda88, 0x1, 0x1);
        gbc.writeMem(0xa515, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa719);
        EXPECT(gbc.pc(), 0xa516);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa515), 0x4c);
        // 4C 0111
        gbc.setState(0xad85, 0x25a9, 0x4ed0, 0xf341, 0xa796, 0xd8a8, 0x0, 0x0);
        gbc.writeMem(0xad85, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x25a9);
        EXPECT(gbc.pc(), 0xad86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad85), 0x4c);
        // 4C 0112
        gbc.setState(0x1914, 0x93e, 0xfc80, 0x2bec, 0x1269, 0x7b6c, 0x0, 0x1);
        gbc.writeMem(0x1914, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x93e);
        EXPECT(gbc.pc(), 0x1915);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0113
        gbc.setState(0x66, 0xd002, 0x9df0, 0xdf7b, 0x3293, 0x8db8, 0x1, 0x1);
        gbc.writeMem(0x66, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd002);
        EXPECT(gbc.pc(), 0x67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0114
        gbc.setState(0xa8ee, 0x7e71, 0xe760, 0x5814, 0x8f48, 0xb6a5, 0x1, 0x0);
        gbc.writeMem(0xa8ee, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x7e71);
        EXPECT(gbc.pc(), 0xa8ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8ee), 0x4c);
        // 4C 0115
        gbc.setState(0x8245, 0x27c0, 0x6f0, 0xb828, 0xda47, 0x17c2, 0x1, 0x1);
        gbc.writeMem(0x8245, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x27c0);
        EXPECT(gbc.pc(), 0x8246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8245), 0x4c);
        // 4C 0116
        gbc.setState(0x2235, 0xbea3, 0x8260, 0x8ad2, 0x8cdb, 0x7a32, 0x0, 0x1);
        gbc.writeMem(0x2235, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xbea3);
        EXPECT(gbc.pc(), 0x2236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0117
        gbc.setState(0x8a1e, 0x997a, 0x6d40, 0xc306, 0x7988, 0x25f1, 0x0, 0x0);
        gbc.writeMem(0x8a1e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x997a);
        EXPECT(gbc.pc(), 0x8a1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a1e), 0x4c);
        // 4C 0119
        gbc.setState(0x840e, 0x49f1, 0x4300, 0x79c1, 0x9628, 0x6b, 0x0, 0x0);
        gbc.writeMem(0x840e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x49f1);
        EXPECT(gbc.pc(), 0x840f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x840e), 0x4c);
        // 4C 011A
        gbc.setState(0x3886, 0x8a41, 0xd560, 0xc3b3, 0x2365, 0x3d60, 0x0, 0x0);
        gbc.writeMem(0x3886, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x8a41);
        EXPECT(gbc.pc(), 0x3887);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 011B
        gbc.setState(0xa692, 0xaf35, 0xb820, 0x9493, 0x633e, 0xcfde, 0x1, 0x0);
        gbc.writeMem(0xa692, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xaf35);
        EXPECT(gbc.pc(), 0xa693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa692), 0x4c);
        // 4C 011C
        gbc.setState(0xe402, 0x86a3, 0xf700, 0x6090, 0xd45a, 0x27b4, 0x0, 0x1);
        gbc.writeMem(0xe402, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x86a3);
        EXPECT(gbc.pc(), 0xe403);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe402), 0x4c);
        // 4C 011D
        gbc.setState(0x258c, 0x1e7b, 0x3250, 0xf365, 0x8e47, 0x66df, 0x1, 0x1);
        gbc.writeMem(0x258c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x1e7b);
        EXPECT(gbc.pc(), 0x258d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 011E
        gbc.setState(0xafd0, 0xcfee, 0xc4f0, 0x123d, 0x43ea, 0xe3e4, 0x1, 0x1);
        gbc.writeMem(0xafd0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xcfee);
        EXPECT(gbc.pc(), 0xafd1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafd0), 0x4c);
        // 4C 011F
        gbc.setState(0x75a9, 0x821, 0x70f0, 0x5983, 0xea96, 0x65d2, 0x1, 0x1);
        gbc.writeMem(0x75a9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x821);
        EXPECT(gbc.pc(), 0x75aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0122
        gbc.setState(0xac4c, 0x5f4d, 0x5f40, 0x6472, 0xa1c4, 0x8482, 0x1, 0x0);
        gbc.writeMem(0xac4c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5f4d);
        EXPECT(gbc.pc(), 0xac4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac4c), 0x4c);
        // 4C 0123
        gbc.setState(0x4171, 0xe6bc, 0xbdf0, 0x961d, 0xbb16, 0x7dbe, 0x0, 0x0);
        gbc.writeMem(0x4171, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xe6bc);
        EXPECT(gbc.pc(), 0x4172);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0124
        gbc.setState(0x412, 0xccab, 0xeb40, 0xbfe0, 0x82bb, 0x29aa, 0x0, 0x1);
        gbc.writeMem(0x412, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xccab);
        EXPECT(gbc.pc(), 0x413);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0125
        gbc.setState(0xc2e, 0x824c, 0x6790, 0xa01, 0xd7b7, 0x712d, 0x1, 0x1);
        gbc.writeMem(0xc2e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x824c);
        EXPECT(gbc.pc(), 0xc2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0126
        gbc.setState(0xa20d, 0x4a93, 0xffa0, 0x46ec, 0xa7ff, 0x21e, 0x1, 0x0);
        gbc.writeMem(0xa20d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x4a93);
        EXPECT(gbc.pc(), 0xa20e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20d), 0x4c);
        // 4C 0127
        gbc.setState(0x10c9, 0xbc16, 0x5ac0, 0x7207, 0xa6f1, 0x3cd8, 0x0, 0x0);
        gbc.writeMem(0x10c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbc16);
        EXPECT(gbc.pc(), 0x10ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0128
        gbc.setState(0xcc0a, 0x4343, 0xb450, 0xb61b, 0xbf1, 0x1b7e, 0x1, 0x0);
        gbc.writeMem(0xcc0a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x4343);
        EXPECT(gbc.pc(), 0xcc0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc0a), 0x4c);
        // 4C 0129
        gbc.setState(0x84ed, 0x9c0b, 0xa8d0, 0x3b1c, 0xb464, 0x5e6c, 0x1, 0x1);
        gbc.writeMem(0x84ed, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x9c0b);
        EXPECT(gbc.pc(), 0x84ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ed), 0x4c);
        // 4C 012A
        gbc.setState(0xe528, 0xed03, 0x1f80, 0x901b, 0x6845, 0xf637, 0x1, 0x1);
        gbc.writeMem(0xe528, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xed03);
        EXPECT(gbc.pc(), 0xe529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe528), 0x4c);
        // 4C 012B
        gbc.setState(0xa913, 0x2ce7, 0x1af0, 0xf3f6, 0x833a, 0x25ab, 0x0, 0x0);
        gbc.writeMem(0xa913, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2ce7);
        EXPECT(gbc.pc(), 0xa914);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa913), 0x4c);
        // 4C 012C
        gbc.setState(0x472b, 0x3f68, 0xeec0, 0x4b3f, 0x86f1, 0x93d3, 0x1, 0x1);
        gbc.writeMem(0x472b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x3f68);
        EXPECT(gbc.pc(), 0x472c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 012D
        gbc.setState(0x2d34, 0x7291, 0x7510, 0xd6a6, 0x662f, 0x40dc, 0x1, 0x1);
        gbc.writeMem(0x2d34, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x7291);
        EXPECT(gbc.pc(), 0x2d35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 012E
        gbc.setState(0xbd5b, 0x1efc, 0x6ac0, 0xa01d, 0xe1b4, 0x18d, 0x1, 0x1);
        gbc.writeMem(0xbd5b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1efc);
        EXPECT(gbc.pc(), 0xbd5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd5b), 0x4c);
        // 4C 012F
        gbc.setState(0xae17, 0xca70, 0xfaf0, 0x2ceb, 0x3d12, 0xf023, 0x0, 0x1);
        gbc.writeMem(0xae17, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xca70);
        EXPECT(gbc.pc(), 0xae18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae17), 0x4c);
        // 4C 0130
        gbc.setState(0xa088, 0x37d4, 0x35f0, 0xa04f, 0x9e65, 0xd14a, 0x1, 0x0);
        gbc.writeMem(0xa088, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x37d4);
        EXPECT(gbc.pc(), 0xa089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa088), 0x4c);
        // 4C 0132
        gbc.setState(0xba57, 0x7062, 0xb9b0, 0x9644, 0x9a17, 0xe9c4, 0x0, 0x0);
        gbc.writeMem(0xba57, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x7062);
        EXPECT(gbc.pc(), 0xba58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba57), 0x4c);
        // 4C 0133
        gbc.setState(0x3ad4, 0x9543, 0x2f70, 0xe27, 0xdd97, 0xb20d, 0x0, 0x0);
        gbc.writeMem(0x3ad4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x9543);
        EXPECT(gbc.pc(), 0x3ad5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0134
        gbc.setState(0xd6d2, 0xee70, 0x5e30, 0x3486, 0x4e3c, 0xa2b1, 0x1, 0x0);
        gbc.writeMem(0xd6d2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xee70);
        EXPECT(gbc.pc(), 0xd6d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d2), 0x4c);
        // 4C 0135
        gbc.setState(0x4471, 0x7d75, 0x36e0, 0x9ced, 0x217a, 0x7441, 0x0, 0x1);
        gbc.writeMem(0x4471, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7d75);
        EXPECT(gbc.pc(), 0x4472);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0136
        gbc.setState(0xbe71, 0x4744, 0x5300, 0x935, 0xfd2, 0x62e7, 0x0, 0x1);
        gbc.writeMem(0xbe71, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4744);
        EXPECT(gbc.pc(), 0xbe72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe71), 0x4c);
        // 4C 0137
        gbc.setState(0x8830, 0x94e9, 0x3000, 0xfdd3, 0x3094, 0x1dac, 0x0, 0x0);
        gbc.writeMem(0x8830, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x94e9);
        EXPECT(gbc.pc(), 0x8831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8830), 0x4c);
        // 4C 0138
        gbc.setState(0x2c91, 0xda26, 0x4ac0, 0x71f3, 0xfcd, 0xa8e, 0x0, 0x1);
        gbc.writeMem(0x2c91, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xda26);
        EXPECT(gbc.pc(), 0x2c92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0139
        gbc.setState(0x9462, 0x5d0a, 0x7b10, 0xb72e, 0xbdcf, 0x1105, 0x0, 0x1);
        gbc.writeMem(0x9462, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5d0a);
        EXPECT(gbc.pc(), 0x9463);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9462), 0x4c);
        // 4C 013B
        gbc.setState(0x257e, 0x4cfc, 0xede0, 0x5f9a, 0x7a58, 0xa69e, 0x0, 0x1);
        gbc.writeMem(0x257e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4cfc);
        EXPECT(gbc.pc(), 0x257f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 013C
        gbc.setState(0x6ae0, 0x7472, 0x9d50, 0x5f30, 0x8789, 0x312b, 0x0, 0x1);
        gbc.writeMem(0x6ae0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x7472);
        EXPECT(gbc.pc(), 0x6ae1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 013D
        gbc.setState(0x365c, 0xc465, 0x2b60, 0x1889, 0x480f, 0xfb93, 0x1, 0x0);
        gbc.writeMem(0x365c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xc465);
        EXPECT(gbc.pc(), 0x365d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 013E
        gbc.setState(0xa64a, 0x89f0, 0x6df0, 0x37e1, 0xaafd, 0x3c37, 0x1, 0x1);
        gbc.writeMem(0xa64a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x89f0);
        EXPECT(gbc.pc(), 0xa64b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa64a), 0x4c);
        // 4C 013F
        gbc.setState(0x37be, 0xa384, 0xe430, 0x2492, 0x4c7a, 0xa345, 0x0, 0x1);
        gbc.writeMem(0x37be, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa384);
        EXPECT(gbc.pc(), 0x37bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0140
        gbc.setState(0xca56, 0xbac4, 0xefe0, 0xc073, 0x2582, 0xa8f8, 0x0, 0x0);
        gbc.writeMem(0xca56, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbac4);
        EXPECT(gbc.pc(), 0xca57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca56), 0x4c);
        // 4C 0141
        gbc.setState(0xb144, 0x6a0a, 0x89b0, 0x8f38, 0x396, 0x5af2, 0x0, 0x1);
        gbc.writeMem(0xb144, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x6a0a);
        EXPECT(gbc.pc(), 0xb145);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb144), 0x4c);
        // 4C 0142
        gbc.setState(0xd34a, 0x9263, 0x7990, 0x7e06, 0xd7e1, 0xfc47, 0x0, 0x1);
        gbc.writeMem(0xd34a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x9263);
        EXPECT(gbc.pc(), 0xd34b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd34a), 0x4c);
        // 4C 0143
        gbc.setState(0xc50e, 0x7645, 0xba70, 0xefb7, 0x27bb, 0x821e, 0x1, 0x0);
        gbc.writeMem(0xc50e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x7645);
        EXPECT(gbc.pc(), 0xc50f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc50e), 0x4c);
        // 4C 0144
        gbc.setState(0x94e8, 0x73d0, 0x51c0, 0xb86d, 0x41d0, 0xe3a6, 0x0, 0x1);
        gbc.writeMem(0x94e8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x73d0);
        EXPECT(gbc.pc(), 0x94e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94e8), 0x4c);
        // 4C 0145
        gbc.setState(0xc6b9, 0x64ef, 0xe00, 0x6d85, 0xa367, 0x458d, 0x1, 0x1);
        gbc.writeMem(0xc6b9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x64ef);
        EXPECT(gbc.pc(), 0xc6ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b9), 0x4c);
        // 4C 0146
        gbc.setState(0x1cf8, 0x4e0, 0x1560, 0xf6c6, 0x4622, 0x1a9b, 0x1, 0x0);
        gbc.writeMem(0x1cf8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4e0);
        EXPECT(gbc.pc(), 0x1cf9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0147
        gbc.setState(0x9435, 0x55e8, 0x74c0, 0x538d, 0x4e36, 0x5299, 0x0, 0x1);
        gbc.writeMem(0x9435, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x55e8);
        EXPECT(gbc.pc(), 0x9436);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9435), 0x4c);
        // 4C 0149
        gbc.setState(0x638f, 0x418a, 0x5180, 0xfe27, 0xcc26, 0xa266, 0x1, 0x1);
        gbc.writeMem(0x638f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x418a);
        EXPECT(gbc.pc(), 0x6390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 014A
        gbc.setState(0x68dd, 0x70db, 0x3c0, 0x6646, 0x78f6, 0xaa66, 0x0, 0x0);
        gbc.writeMem(0x68dd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x70db);
        EXPECT(gbc.pc(), 0x68de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 014B
        gbc.setState(0x4fa3, 0x91ac, 0x1250, 0x9545, 0x47e3, 0x8836, 0x0, 0x0);
        gbc.writeMem(0x4fa3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x91ac);
        EXPECT(gbc.pc(), 0x4fa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 014C
        gbc.setState(0x84ac, 0xeb92, 0x4910, 0xe302, 0x2a81, 0x41a1, 0x1, 0x1);
        gbc.writeMem(0x84ac, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xeb92);
        EXPECT(gbc.pc(), 0x84ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84ac), 0x4c);
        // 4C 014D
        gbc.setState(0x7fc, 0xaeee, 0xfbb0, 0x310c, 0x432b, 0x8b30, 0x1, 0x0);
        gbc.writeMem(0x7fc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xaeee);
        EXPECT(gbc.pc(), 0x7fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 014E
        gbc.setState(0xc38c, 0x8403, 0xdc10, 0x3530, 0x6591, 0x4d0a, 0x0, 0x1);
        gbc.writeMem(0xc38c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8403);
        EXPECT(gbc.pc(), 0xc38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc38c), 0x4c);
        // 4C 0150
        gbc.setState(0xeba1, 0x27e3, 0x5cd0, 0xec2b, 0xc781, 0x122, 0x1, 0x1);
        gbc.writeMem(0xeba1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x27e3);
        EXPECT(gbc.pc(), 0xeba2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeba1), 0x4c);
        // 4C 0151
        gbc.setState(0xee02, 0xef45, 0x740, 0x2001, 0x7bd4, 0xfa6b, 0x1, 0x0);
        gbc.writeMem(0xee02, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xef45);
        EXPECT(gbc.pc(), 0xee03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee02), 0x4c);
        // 4C 0152
        gbc.setState(0xe5ec, 0x9c55, 0x8460, 0xa5c5, 0x34d6, 0xe52d, 0x0, 0x0);
        gbc.writeMem(0xe5ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x9c55);
        EXPECT(gbc.pc(), 0xe5ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ec), 0x4c);
        // 4C 0153
        gbc.setState(0xd25b, 0x4d12, 0x1340, 0xfd2a, 0xa17f, 0x5874, 0x0, 0x0);
        gbc.writeMem(0xd25b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x4d12);
        EXPECT(gbc.pc(), 0xd25c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd25b), 0x4c);
        // 4C 0154
        gbc.setState(0x3ffd, 0xdf74, 0x2a40, 0x2756, 0x2b0f, 0xae59, 0x0, 0x0);
        gbc.writeMem(0x3ffd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xdf74);
        EXPECT(gbc.pc(), 0x3ffe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0155
        gbc.setState(0x2d8e, 0xdbed, 0x7290, 0xa606, 0xce27, 0xe3ee, 0x0, 0x0);
        gbc.writeMem(0x2d8e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xdbed);
        EXPECT(gbc.pc(), 0x2d8f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0156
        gbc.setState(0xa5c2, 0x83aa, 0x3250, 0x55bc, 0xbf3b, 0x522, 0x0, 0x0);
        gbc.writeMem(0xa5c2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x83aa);
        EXPECT(gbc.pc(), 0xa5c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5c2), 0x4c);
        // 4C 0157
        gbc.setState(0x71a3, 0x8f15, 0x7a40, 0x1c8d, 0x1960, 0x4023, 0x0, 0x1);
        gbc.writeMem(0x71a3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x8f15);
        EXPECT(gbc.pc(), 0x71a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0158
        gbc.setState(0x394f, 0x3719, 0x61e0, 0x4c13, 0x6754, 0xf198, 0x1, 0x0);
        gbc.writeMem(0x394f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3719);
        EXPECT(gbc.pc(), 0x3950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0159
        gbc.setState(0xbdf2, 0xe16, 0x4e0, 0xda62, 0x626b, 0xd672, 0x1, 0x0);
        gbc.writeMem(0xbdf2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xe16);
        EXPECT(gbc.pc(), 0xbdf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbdf2), 0x4c);
        // 4C 015A
        gbc.setState(0xdc11, 0xc5b8, 0x3730, 0x167e, 0x5a43, 0x24f3, 0x1, 0x0);
        gbc.writeMem(0xdc11, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xc5b8);
        EXPECT(gbc.pc(), 0xdc12);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc11), 0x4c);
        // 4C 015B
        gbc.setState(0xac9b, 0x6fd1, 0x59f0, 0x2691, 0x86f3, 0x8ea, 0x1, 0x0);
        gbc.writeMem(0xac9b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6fd1);
        EXPECT(gbc.pc(), 0xac9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9b), 0x4c);
        // 4C 015C
        gbc.setState(0x92a5, 0xb118, 0xc8f0, 0x51ad, 0x5087, 0x3c, 0x1, 0x0);
        gbc.writeMem(0x92a5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xb118);
        EXPECT(gbc.pc(), 0x92a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92a5), 0x4c);
        // 4C 015D
        gbc.setState(0xcc8d, 0xef1, 0x530, 0xa1f9, 0x1b6c, 0x191, 0x1, 0x0);
        gbc.writeMem(0xcc8d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xef1);
        EXPECT(gbc.pc(), 0xcc8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc8d), 0x4c);
        // 4C 015E
        gbc.setState(0x1bf9, 0xa888, 0xb560, 0x5147, 0x7410, 0x93e4, 0x0, 0x1);
        gbc.writeMem(0x1bf9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xa888);
        EXPECT(gbc.pc(), 0x1bfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 015F
        gbc.setState(0x76c6, 0x6f83, 0xaf50, 0x34a6, 0xbaab, 0x2d3b, 0x1, 0x0);
        gbc.writeMem(0x76c6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x6f83);
        EXPECT(gbc.pc(), 0x76c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0160
        gbc.setState(0x4472, 0x61f9, 0x2e00, 0x2ca5, 0xed88, 0x2e54, 0x1, 0x0);
        gbc.writeMem(0x4472, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x61f9);
        EXPECT(gbc.pc(), 0x4473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0161
        gbc.setState(0xb8d6, 0xb05, 0x2810, 0xe037, 0x3ea0, 0x3157, 0x1, 0x0);
        gbc.writeMem(0xb8d6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb05);
        EXPECT(gbc.pc(), 0xb8d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8d6), 0x4c);
        // 4C 0162
        gbc.setState(0x1efe, 0xe9fc, 0x1a40, 0xa66b, 0x2cbb, 0xffd8, 0x1, 0x1);
        gbc.writeMem(0x1efe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xe9fc);
        EXPECT(gbc.pc(), 0x1eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0163
        gbc.setState(0x9b94, 0xbd46, 0xc960, 0x9c1a, 0xdab7, 0xa646, 0x0, 0x0);
        gbc.writeMem(0x9b94, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbd46);
        EXPECT(gbc.pc(), 0x9b95);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b94), 0x4c);
        // 4C 0164
        gbc.setState(0x7ff4, 0xd0b2, 0xe4e0, 0x7274, 0xcb08, 0xc33d, 0x1, 0x0);
        gbc.writeMem(0x7ff4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd0b2);
        EXPECT(gbc.pc(), 0x7ff5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0165
        gbc.setState(0x5af, 0xe66f, 0xb810, 0xcc12, 0xe395, 0xabda, 0x1, 0x0);
        gbc.writeMem(0x5af, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe66f);
        EXPECT(gbc.pc(), 0x5b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0166
        gbc.setState(0x4f0f, 0xf86c, 0xa920, 0xfd9a, 0x3464, 0xb006, 0x0, 0x0);
        gbc.writeMem(0x4f0f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf86c);
        EXPECT(gbc.pc(), 0x4f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0167
        gbc.setState(0x76e3, 0x3fb3, 0xf4e0, 0x80a5, 0x767e, 0xdd73, 0x1, 0x0);
        gbc.writeMem(0x76e3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x3fb3);
        EXPECT(gbc.pc(), 0x76e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0168
        gbc.setState(0x909a, 0x7bdc, 0xc460, 0xf306, 0x3c70, 0xa1ce, 0x1, 0x0);
        gbc.writeMem(0x909a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x7bdc);
        EXPECT(gbc.pc(), 0x909b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x909a), 0x4c);
        // 4C 0169
        gbc.setState(0x6785, 0x99f7, 0x73b0, 0xa58d, 0xaaa4, 0x4e6e, 0x0, 0x0);
        gbc.writeMem(0x6785, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x99f7);
        EXPECT(gbc.pc(), 0x6786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 016A
        gbc.setState(0x4607, 0xe4a, 0xa8c0, 0x3e8f, 0x8523, 0x6467, 0x1, 0x0);
        gbc.writeMem(0x4607, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe4a);
        EXPECT(gbc.pc(), 0x4608);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 016B
        gbc.setState(0x6217, 0x4cfc, 0xe9f0, 0xea3d, 0x8249, 0x65, 0x0, 0x1);
        gbc.writeMem(0x6217, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4cfc);
        EXPECT(gbc.pc(), 0x6218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 016C
        gbc.setState(0x437b, 0x256, 0x44a0, 0x7bc3, 0x4f93, 0x6dd4, 0x1, 0x1);
        gbc.writeMem(0x437b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x256);
        EXPECT(gbc.pc(), 0x437c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 016D
        gbc.setState(0x3341, 0x7359, 0x5e30, 0xd497, 0xd0dd, 0xd02c, 0x1, 0x1);
        gbc.writeMem(0x3341, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x7359);
        EXPECT(gbc.pc(), 0x3342);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 016E
        gbc.setState(0x134a, 0x1dc1, 0xb300, 0x3d7d, 0x51d0, 0xecbc, 0x0, 0x0);
        gbc.writeMem(0x134a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1dc1);
        EXPECT(gbc.pc(), 0x134b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 016F
        gbc.setState(0x9f87, 0xda4d, 0x4800, 0x837f, 0x4e3, 0x74dc, 0x1, 0x1);
        gbc.writeMem(0x9f87, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xda4d);
        EXPECT(gbc.pc(), 0x9f88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f87), 0x4c);
        // 4C 0170
        gbc.setState(0xa313, 0x5785, 0x3ab0, 0x357e, 0xb173, 0x826b, 0x1, 0x1);
        gbc.writeMem(0xa313, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x5785);
        EXPECT(gbc.pc(), 0xa314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa313), 0x4c);
        // 4C 0172
        gbc.setState(0x3814, 0x222d, 0x5ed0, 0xad3f, 0xcc95, 0x55be, 0x1, 0x0);
        gbc.writeMem(0x3814, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x222d);
        EXPECT(gbc.pc(), 0x3815);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0173
        gbc.setState(0xa2a9, 0xc41e, 0xacd0, 0xb0b, 0x714e, 0x8b64, 0x0, 0x0);
        gbc.writeMem(0xa2a9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xc41e);
        EXPECT(gbc.pc(), 0xa2aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2a9), 0x4c);
        // 4C 0174
        gbc.setState(0x4d3b, 0xdb4e, 0x3240, 0x4772, 0x483f, 0xcf87, 0x1, 0x0);
        gbc.writeMem(0x4d3b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xdb4e);
        EXPECT(gbc.pc(), 0x4d3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0175
        gbc.setState(0xa731, 0x9ee0, 0xaf00, 0x9541, 0x59cb, 0x256e, 0x0, 0x1);
        gbc.writeMem(0xa731, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9ee0);
        EXPECT(gbc.pc(), 0xa732);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa731), 0x4c);
        // 4C 0176
        gbc.setState(0x7305, 0x6edd, 0xb940, 0x2776, 0xa838, 0x3133, 0x1, 0x0);
        gbc.writeMem(0x7305, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x6edd);
        EXPECT(gbc.pc(), 0x7306);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0177
        gbc.setState(0x9c01, 0x4dde, 0x9f10, 0x226, 0xfd60, 0x6a17, 0x0, 0x1);
        gbc.writeMem(0x9c01, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4dde);
        EXPECT(gbc.pc(), 0x9c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c01), 0x4c);
        // 4C 0178
        gbc.setState(0x9e46, 0xd694, 0x3d60, 0x352c, 0x8cba, 0x79ab, 0x1, 0x0);
        gbc.writeMem(0x9e46, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd694);
        EXPECT(gbc.pc(), 0x9e47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e46), 0x4c);
        // 4C 0179
        gbc.setState(0x10f3, 0x8514, 0x9360, 0x5c1f, 0xa6b7, 0xb07, 0x1, 0x0);
        gbc.writeMem(0x10f3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x8514);
        EXPECT(gbc.pc(), 0x10f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 017A
        gbc.setState(0x5213, 0x3a02, 0x8430, 0xa0ef, 0xd861, 0x3f75, 0x1, 0x0);
        gbc.writeMem(0x5213, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x3a02);
        EXPECT(gbc.pc(), 0x5214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 017B
        gbc.setState(0x3abd, 0xa13a, 0xdb50, 0x7cbf, 0x17ce, 0xb3e6, 0x0, 0x0);
        gbc.writeMem(0x3abd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa13a);
        EXPECT(gbc.pc(), 0x3abe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 017C
        gbc.setState(0xcf10, 0xf76d, 0xbde0, 0x8fb8, 0xfa5a, 0x4734, 0x1, 0x0);
        gbc.writeMem(0xcf10, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xf76d);
        EXPECT(gbc.pc(), 0xcf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf10), 0x4c);
        // 4C 017D
        gbc.setState(0x6af0, 0x8440, 0x1a70, 0x5d37, 0xc5e9, 0x5415, 0x1, 0x0);
        gbc.writeMem(0x6af0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8440);
        EXPECT(gbc.pc(), 0x6af1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 017E
        gbc.setState(0x4e32, 0x7bbd, 0x6740, 0x6, 0x654d, 0xd017, 0x1, 0x1);
        gbc.writeMem(0x4e32, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7bbd);
        EXPECT(gbc.pc(), 0x4e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 017F
        gbc.setState(0x9902, 0xad4c, 0x8ac0, 0x2120, 0x166f, 0x9792, 0x1, 0x0);
        gbc.writeMem(0x9902, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xad4c);
        EXPECT(gbc.pc(), 0x9903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9902), 0x4c);
        // 4C 0181
        gbc.setState(0xc044, 0xf8b, 0xc1b0, 0xedc4, 0x8a19, 0xb37f, 0x0, 0x0);
        gbc.writeMem(0xc044, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xf8b);
        EXPECT(gbc.pc(), 0xc045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc044), 0x4c);
        // 4C 0182
        gbc.setState(0x7ead, 0xd0ba, 0x10c0, 0xe54b, 0xcfbb, 0xc96b, 0x1, 0x0);
        gbc.writeMem(0x7ead, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd0ba);
        EXPECT(gbc.pc(), 0x7eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0183
        gbc.setState(0xaeb6, 0x5a07, 0x9390, 0xedc5, 0x26fc, 0x74d8, 0x0, 0x1);
        gbc.writeMem(0xaeb6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x5a07);
        EXPECT(gbc.pc(), 0xaeb7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaeb6), 0x4c);
        // 4C 0185
        gbc.setState(0x41d3, 0xaf2a, 0x16f0, 0x6170, 0xcece, 0x3cab, 0x0, 0x1);
        gbc.writeMem(0x41d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xaf2a);
        EXPECT(gbc.pc(), 0x41d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0186
        gbc.setState(0x6564, 0xde9d, 0xa510, 0x207c, 0x19ee, 0x95e9, 0x1, 0x0);
        gbc.writeMem(0x6564, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xde9d);
        EXPECT(gbc.pc(), 0x6565);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0187
        gbc.setState(0xa5db, 0x1aba, 0x5eb0, 0x3176, 0x4227, 0x664d, 0x1, 0x1);
        gbc.writeMem(0xa5db, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x1aba);
        EXPECT(gbc.pc(), 0xa5dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5db), 0x4c);
        // 4C 0188
        gbc.setState(0x3ad9, 0xcd08, 0xea30, 0xf16, 0x6ee3, 0xf5ec, 0x0, 0x0);
        gbc.writeMem(0x3ad9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xcd08);
        EXPECT(gbc.pc(), 0x3ada);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0189
        gbc.setState(0x6b7a, 0x1936, 0x7940, 0x48b1, 0x58a1, 0x313e, 0x0, 0x1);
        gbc.writeMem(0x6b7a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x1936);
        EXPECT(gbc.pc(), 0x6b7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 018A
        gbc.setState(0x1e08, 0xf90e, 0xf690, 0xae6b, 0x7f48, 0xc0b, 0x0, 0x0);
        gbc.writeMem(0x1e08, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf90e);
        EXPECT(gbc.pc(), 0x1e09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 018B
        gbc.setState(0x1966, 0x2963, 0xf6b0, 0xd06f, 0x243e, 0xa471, 0x0, 0x1);
        gbc.writeMem(0x1966, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x2963);
        EXPECT(gbc.pc(), 0x1967);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 018C
        gbc.setState(0x6545, 0x1b6d, 0x1780, 0x3f20, 0xaddb, 0x1cfc, 0x0, 0x1);
        gbc.writeMem(0x6545, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x1b6d);
        EXPECT(gbc.pc(), 0x6546);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 018D
        gbc.setState(0xe42d, 0xf73c, 0x54c0, 0xd3dc, 0xd855, 0xf429, 0x0, 0x0);
        gbc.writeMem(0xe42d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xf73c);
        EXPECT(gbc.pc(), 0xe42e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42d), 0x4c);
        // 4C 018E
        gbc.setState(0x2a8c, 0x849, 0x9510, 0xb579, 0x2373, 0xbf9f, 0x0, 0x0);
        gbc.writeMem(0x2a8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x849);
        EXPECT(gbc.pc(), 0x2a8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 018F
        gbc.setState(0x5528, 0xf8ad, 0x2730, 0x61f2, 0xb8d8, 0x8de4, 0x1, 0x0);
        gbc.writeMem(0x5528, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf8ad);
        EXPECT(gbc.pc(), 0x5529);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0190
        gbc.setState(0x549f, 0xe777, 0x66c0, 0x231c, 0x5e09, 0x24e0, 0x0, 0x0);
        gbc.writeMem(0x549f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe777);
        EXPECT(gbc.pc(), 0x54a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0191
        gbc.setState(0x8b64, 0xcf33, 0xcc0, 0x1070, 0x1e6d, 0x24d9, 0x1, 0x0);
        gbc.writeMem(0x8b64, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xcf33);
        EXPECT(gbc.pc(), 0x8b65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b64), 0x4c);
        // 4C 0192
        gbc.setState(0x100e, 0x61bd, 0x2240, 0x4b12, 0x7a85, 0xabc3, 0x1, 0x1);
        gbc.writeMem(0x100e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x61bd);
        EXPECT(gbc.pc(), 0x100f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0194
        gbc.setState(0x565a, 0xce17, 0x5f0, 0xdf64, 0xf3ab, 0x91f7, 0x0, 0x0);
        gbc.writeMem(0x565a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xce17);
        EXPECT(gbc.pc(), 0x565b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0195
        gbc.setState(0x9fdc, 0x5a4a, 0x170, 0xe04d, 0x2ece, 0xa0b4, 0x1, 0x0);
        gbc.writeMem(0x9fdc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x5a4a);
        EXPECT(gbc.pc(), 0x9fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fdc), 0x4c);
        // 4C 0196
        gbc.setState(0x79a6, 0x5f12, 0xb100, 0xe663, 0x42cb, 0xc972, 0x1, 0x0);
        gbc.writeMem(0x79a6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x5f12);
        EXPECT(gbc.pc(), 0x79a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0197
        gbc.setState(0x332f, 0x5c18, 0xcd40, 0xb0bb, 0x89bd, 0x8fef, 0x0, 0x1);
        gbc.writeMem(0x332f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5c18);
        EXPECT(gbc.pc(), 0x3330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0198
        gbc.setState(0x22d, 0xdaba, 0xc050, 0x3e9e, 0xa406, 0xb813, 0x0, 0x0);
        gbc.writeMem(0x22d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xdaba);
        EXPECT(gbc.pc(), 0x22e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0199
        gbc.setState(0x561e, 0x43ec, 0xbf70, 0xac16, 0xf4af, 0xdcbb, 0x1, 0x0);
        gbc.writeMem(0x561e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x43ec);
        EXPECT(gbc.pc(), 0x561f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 019B
        gbc.setState(0x2879, 0x39d4, 0x64e0, 0xe40, 0x90b0, 0xdae7, 0x0, 0x1);
        gbc.writeMem(0x2879, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x39d4);
        EXPECT(gbc.pc(), 0x287a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 019C
        gbc.setState(0xaf30, 0x9f0b, 0xedf0, 0x54b6, 0x3a71, 0x8d0c, 0x1, 0x1);
        gbc.writeMem(0xaf30, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9f0b);
        EXPECT(gbc.pc(), 0xaf31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf30), 0x4c);
        // 4C 019D
        gbc.setState(0x3a7f, 0xf919, 0x7dd0, 0x40f0, 0x4575, 0xa2f2, 0x1, 0x0);
        gbc.writeMem(0x3a7f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xf919);
        EXPECT(gbc.pc(), 0x3a80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 019E
        gbc.setState(0xb39d, 0xa0ef, 0xdbf0, 0xc942, 0xb3a5, 0x1c9f, 0x0, 0x1);
        gbc.writeMem(0xb39d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xa0ef);
        EXPECT(gbc.pc(), 0xb39e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb39d), 0x4c);
        // 4C 019F
        gbc.setState(0x3dec, 0x930, 0xf210, 0x99a7, 0xe78f, 0x9da, 0x1, 0x0);
        gbc.writeMem(0x3dec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x930);
        EXPECT(gbc.pc(), 0x3ded);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01A0
        gbc.setState(0xd790, 0x819b, 0x3340, 0xfb99, 0xa68f, 0xf293, 0x1, 0x1);
        gbc.writeMem(0xd790, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x819b);
        EXPECT(gbc.pc(), 0xd791);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd790), 0x4c);
        // 4C 01A1
        gbc.setState(0xa106, 0x4025, 0x6b50, 0x694a, 0x2094, 0x3fc8, 0x1, 0x0);
        gbc.writeMem(0xa106, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x4025);
        EXPECT(gbc.pc(), 0xa107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa106), 0x4c);
        // 4C 01A2
        gbc.setState(0x3c90, 0x3e44, 0xa3d0, 0x95f6, 0x4caf, 0x6592, 0x0, 0x0);
        gbc.writeMem(0x3c90, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3e44);
        EXPECT(gbc.pc(), 0x3c91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01A3
        gbc.setState(0x7ca1, 0x5320, 0x11e0, 0x5824, 0xc043, 0x32b5, 0x1, 0x1);
        gbc.writeMem(0x7ca1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x5320);
        EXPECT(gbc.pc(), 0x7ca2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01A4
        gbc.setState(0x540e, 0xe759, 0x8380, 0x7284, 0x90e9, 0x4d5c, 0x1, 0x1);
        gbc.writeMem(0x540e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe759);
        EXPECT(gbc.pc(), 0x540f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01A5
        gbc.setState(0x65bf, 0x2214, 0x9530, 0xed2c, 0x46f5, 0x4f6c, 0x1, 0x1);
        gbc.writeMem(0x65bf, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2214);
        EXPECT(gbc.pc(), 0x65c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01A6
        gbc.setState(0xc4ec, 0xae31, 0x3d30, 0x90c8, 0xf1f4, 0xaccd, 0x1, 0x0);
        gbc.writeMem(0xc4ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xae31);
        EXPECT(gbc.pc(), 0xc4ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ec), 0x4c);
        // 4C 01A7
        gbc.setState(0x16fa, 0xc6d5, 0xdf60, 0xd8b3, 0x6c83, 0x906c, 0x1, 0x1);
        gbc.writeMem(0x16fa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xc6d5);
        EXPECT(gbc.pc(), 0x16fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01A8
        gbc.setState(0xb956, 0x2c04, 0xac60, 0xa4b7, 0xfba5, 0x849, 0x1, 0x1);
        gbc.writeMem(0xb956, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x2c04);
        EXPECT(gbc.pc(), 0xb957);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb956), 0x4c);
        // 4C 01A9
        gbc.setState(0xd18d, 0x4988, 0x4330, 0xcf59, 0xdda1, 0x2fcf, 0x0, 0x1);
        gbc.writeMem(0xd18d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x4988);
        EXPECT(gbc.pc(), 0xd18e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd18d), 0x4c);
        // 4C 01AA
        gbc.setState(0x3e2e, 0x8efb, 0xbca0, 0xda9b, 0x5b7f, 0xff8b, 0x0, 0x0);
        gbc.writeMem(0x3e2e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8efb);
        EXPECT(gbc.pc(), 0x3e2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01AB
        gbc.setState(0x3e29, 0x2b55, 0xfa50, 0x99b0, 0x2a42, 0xa401, 0x1, 0x1);
        gbc.writeMem(0x3e29, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2b55);
        EXPECT(gbc.pc(), 0x3e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01AC
        gbc.setState(0x7a0f, 0xc443, 0x87c0, 0x9a0c, 0x7c0f, 0x6b40, 0x0, 0x1);
        gbc.writeMem(0x7a0f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc443);
        EXPECT(gbc.pc(), 0x7a10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01AD
        gbc.setState(0xa28c, 0x3349, 0xbe60, 0xdca, 0x6a7e, 0xe98, 0x1, 0x1);
        gbc.writeMem(0xa28c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x3349);
        EXPECT(gbc.pc(), 0xa28d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28c), 0x4c);
        // 4C 01AE
        gbc.setState(0x3277, 0x9f, 0x4520, 0xd764, 0x7bce, 0x6157, 0x0, 0x0);
        gbc.writeMem(0x3277, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x9f);
        EXPECT(gbc.pc(), 0x3278);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01AF
        gbc.setState(0x93e4, 0xbc3e, 0x40e0, 0xd7e, 0xe007, 0xd12f, 0x1, 0x1);
        gbc.writeMem(0x93e4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xbc3e);
        EXPECT(gbc.pc(), 0x93e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93e4), 0x4c);
        // 4C 01B0
        gbc.setState(0x7e28, 0x89b8, 0x24c0, 0xf05f, 0xc280, 0xe7ae, 0x0, 0x0);
        gbc.writeMem(0x7e28, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x89b8);
        EXPECT(gbc.pc(), 0x7e29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01B1
        gbc.setState(0x382a, 0xa8c3, 0x8240, 0x56aa, 0x189a, 0xf433, 0x0, 0x0);
        gbc.writeMem(0x382a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa8c3);
        EXPECT(gbc.pc(), 0x382b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01B2
        gbc.setState(0xa323, 0x3330, 0x3ee0, 0x34d6, 0xdc8c, 0x4341, 0x1, 0x0);
        gbc.writeMem(0xa323, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3330);
        EXPECT(gbc.pc(), 0xa324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa323), 0x4c);
        // 4C 01B3
        gbc.setState(0xaa18, 0xc36f, 0x2490, 0xf7bb, 0x2ab4, 0xfd05, 0x0, 0x1);
        gbc.writeMem(0xaa18, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc36f);
        EXPECT(gbc.pc(), 0xaa19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa18), 0x4c);
        // 4C 01B4
        gbc.setState(0x3b57, 0x3c5e, 0xb7d0, 0x6d51, 0x5fe8, 0x9cf1, 0x1, 0x1);
        gbc.writeMem(0x3b57, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3c5e);
        EXPECT(gbc.pc(), 0x3b58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01B5
        gbc.setState(0x336d, 0xc0f, 0x22a0, 0xee4e, 0xdea1, 0xfe9e, 0x0, 0x0);
        gbc.writeMem(0x336d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xc0f);
        EXPECT(gbc.pc(), 0x336e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01B6
        gbc.setState(0x9339, 0x3338, 0x5f20, 0xe02d, 0x2303, 0x33dd, 0x1, 0x1);
        gbc.writeMem(0x9339, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x3338);
        EXPECT(gbc.pc(), 0x933a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9339), 0x4c);
        // 4C 01B7
        gbc.setState(0x3f38, 0x1d58, 0xdad0, 0xdded, 0x35a8, 0x8304, 0x0, 0x1);
        gbc.writeMem(0x3f38, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1d58);
        EXPECT(gbc.pc(), 0x3f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01B8
        gbc.setState(0xdff0, 0x5f35, 0x9e00, 0x7d98, 0x9e38, 0x6139, 0x1, 0x1);
        gbc.writeMem(0xdff0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5f35);
        EXPECT(gbc.pc(), 0xdff1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdff0), 0x4c);
        // 4C 01B9
        gbc.setState(0xace8, 0xd1d7, 0xd850, 0x4f4a, 0x885b, 0xe350, 0x0, 0x1);
        gbc.writeMem(0xace8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd1d7);
        EXPECT(gbc.pc(), 0xace9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace8), 0x4c);
        // 4C 01BA
        gbc.setState(0xe680, 0x2b1a, 0x4870, 0x8d0a, 0xf803, 0x73d5, 0x1, 0x0);
        gbc.writeMem(0xe680, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2b1a);
        EXPECT(gbc.pc(), 0xe681);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe680), 0x4c);
        // 4C 01BB
        gbc.setState(0xa440, 0x10d8, 0xa020, 0x5f65, 0xdbd0, 0x8751, 0x0, 0x1);
        gbc.writeMem(0xa440, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x10d8);
        EXPECT(gbc.pc(), 0xa441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa440), 0x4c);
        // 4C 01BC
        gbc.setState(0xdbc7, 0x9d45, 0x79a0, 0xcbff, 0xe998, 0xb0c0, 0x1, 0x1);
        gbc.writeMem(0xdbc7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x9d45);
        EXPECT(gbc.pc(), 0xdbc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbc7), 0x4c);
        // 4C 01BD
        gbc.setState(0x2d6c, 0x68bb, 0x2c20, 0x3816, 0xa143, 0x6b71, 0x0, 0x0);
        gbc.writeMem(0x2d6c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x68bb);
        EXPECT(gbc.pc(), 0x2d6d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01BE
        gbc.setState(0x72bc, 0x935c, 0xa4d0, 0x2aab, 0x720e, 0xbfb5, 0x1, 0x0);
        gbc.writeMem(0x72bc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x935c);
        EXPECT(gbc.pc(), 0x72bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01BF
        gbc.setState(0xd3e3, 0xdedc, 0xf20, 0xf524, 0xf21e, 0xc5b4, 0x0, 0x0);
        gbc.writeMem(0xd3e3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xdedc);
        EXPECT(gbc.pc(), 0xd3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3e3), 0x4c);
        // 4C 01C0
        gbc.setState(0xc271, 0xf2a7, 0xc680, 0x573b, 0x6da6, 0x5f7e, 0x0, 0x0);
        gbc.writeMem(0xc271, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf2a7);
        EXPECT(gbc.pc(), 0xc272);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc271), 0x4c);
        // 4C 01C1
        gbc.setState(0xb815, 0xb8dc, 0x70e0, 0xf494, 0x3307, 0x8120, 0x0, 0x1);
        gbc.writeMem(0xb815, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xb8dc);
        EXPECT(gbc.pc(), 0xb816);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb815), 0x4c);
        // 4C 01C2
        gbc.setState(0xc3bd, 0xfea8, 0x46a0, 0xe7b5, 0xa534, 0xff9a, 0x0, 0x0);
        gbc.writeMem(0xc3bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xfea8);
        EXPECT(gbc.pc(), 0xc3be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3bd), 0x4c);
        // 4C 01C3
        gbc.setState(0x4dc1, 0xe7be, 0x9680, 0xaab5, 0xde89, 0x42e4, 0x0, 0x0);
        gbc.writeMem(0x4dc1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe7be);
        EXPECT(gbc.pc(), 0x4dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01C4
        gbc.setState(0xefea, 0x883c, 0x49c0, 0x6147, 0xb25d, 0xcaa6, 0x1, 0x0);
        gbc.writeMem(0xefea, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x883c);
        EXPECT(gbc.pc(), 0xefeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefea), 0x4c);
        // 4C 01C5
        gbc.setState(0xcb95, 0x106f, 0xef20, 0x2577, 0xfd64, 0x1a4f, 0x0, 0x0);
        gbc.writeMem(0xcb95, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x106f);
        EXPECT(gbc.pc(), 0xcb96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb95), 0x4c);
        // 4C 01C6
        gbc.setState(0x9d9f, 0xa3c0, 0xc810, 0xe335, 0x4814, 0x3c56, 0x0, 0x1);
        gbc.writeMem(0x9d9f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xa3c0);
        EXPECT(gbc.pc(), 0x9da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d9f), 0x4c);
        // 4C 01C7
        gbc.setState(0xcdd9, 0x5650, 0xacc0, 0x7637, 0x7fef, 0x95ea, 0x0, 0x0);
        gbc.writeMem(0xcdd9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x5650);
        EXPECT(gbc.pc(), 0xcdda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdd9), 0x4c);
        // 4C 01C8
        gbc.setState(0x4409, 0xe16d, 0x1130, 0x8aa5, 0x95d1, 0x48b3, 0x1, 0x1);
        gbc.writeMem(0x4409, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xe16d);
        EXPECT(gbc.pc(), 0x440a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01CC
        gbc.setState(0x1aee, 0x4b95, 0x8b50, 0x3b1d, 0x5d08, 0x5992, 0x0, 0x0);
        gbc.writeMem(0x1aee, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4b95);
        EXPECT(gbc.pc(), 0x1aef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01CD
        gbc.setState(0x8f64, 0xe4f4, 0x3f90, 0x3529, 0x390b, 0x70ab, 0x0, 0x0);
        gbc.writeMem(0x8f64, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xe4f4);
        EXPECT(gbc.pc(), 0x8f65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f64), 0x4c);
        // 4C 01CE
        gbc.setState(0xb48f, 0xebc, 0x3030, 0x8ba2, 0x6cba, 0x6c59, 0x1, 0x1);
        gbc.writeMem(0xb48f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xebc);
        EXPECT(gbc.pc(), 0xb490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb48f), 0x4c);
        // 4C 01CF
        gbc.setState(0x72be, 0x525c, 0xcc20, 0xe8da, 0x66cc, 0x60ba, 0x1, 0x1);
        gbc.writeMem(0x72be, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x525c);
        EXPECT(gbc.pc(), 0x72bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01D1
        gbc.setState(0x7128, 0xd3c4, 0xeaf0, 0xc3a1, 0xee2b, 0xf72d, 0x1, 0x0);
        gbc.writeMem(0x7128, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xd3c4);
        EXPECT(gbc.pc(), 0x7129);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01D2
        gbc.setState(0xcb6b, 0x97bf, 0xc730, 0x63ea, 0x1162, 0xa7ea, 0x1, 0x1);
        gbc.writeMem(0xcb6b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x97bf);
        EXPECT(gbc.pc(), 0xcb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb6b), 0x4c);
        // 4C 01D3
        gbc.setState(0x68e8, 0x615, 0x64e0, 0x32f9, 0xe438, 0xf6bd, 0x1, 0x1);
        gbc.writeMem(0x68e8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x615);
        EXPECT(gbc.pc(), 0x68e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01D4
        gbc.setState(0x779d, 0xb15b, 0x1110, 0x9321, 0x815d, 0x3629, 0x1, 0x0);
        gbc.writeMem(0x779d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xb15b);
        EXPECT(gbc.pc(), 0x779e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01D5
        gbc.setState(0xaf68, 0xf516, 0xe190, 0x49f6, 0xd5f4, 0x6c1d, 0x0, 0x1);
        gbc.writeMem(0xaf68, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf516);
        EXPECT(gbc.pc(), 0xaf69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf68), 0x4c);
        // 4C 01D6
        gbc.setState(0x468e, 0x9f7d, 0xf800, 0xed1d, 0x28fd, 0x3f4a, 0x1, 0x1);
        gbc.writeMem(0x468e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x9f7d);
        EXPECT(gbc.pc(), 0x468f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01D7
        gbc.setState(0x978c, 0xb80d, 0x9b50, 0x268c, 0x89bb, 0x5117, 0x0, 0x1);
        gbc.writeMem(0x978c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb80d);
        EXPECT(gbc.pc(), 0x978d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978c), 0x4c);
        // 4C 01D8
        gbc.setState(0xe64e, 0x1576, 0xc70, 0xd07f, 0x8e63, 0x9cdc, 0x1, 0x1);
        gbc.writeMem(0xe64e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1576);
        EXPECT(gbc.pc(), 0xe64f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe64e), 0x4c);
        // 4C 01D9
        gbc.setState(0xbcff, 0xf4dd, 0xc780, 0x7079, 0x8217, 0x71da, 0x1, 0x0);
        gbc.writeMem(0xbcff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xf4dd);
        EXPECT(gbc.pc(), 0xbd00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcff), 0x4c);
        // 4C 01DA
        gbc.setState(0x31eb, 0x4989, 0x1540, 0x3415, 0x2a3f, 0x10a1, 0x1, 0x0);
        gbc.writeMem(0x31eb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x4989);
        EXPECT(gbc.pc(), 0x31ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01DB
        gbc.setState(0xda78, 0xb94a, 0x8320, 0x3987, 0xc93c, 0xe3db, 0x0, 0x0);
        gbc.writeMem(0xda78, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb94a);
        EXPECT(gbc.pc(), 0xda79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda78), 0x4c);
        // 4C 01DC
        gbc.setState(0xea21, 0x778, 0x9110, 0x774a, 0xafc5, 0xa642, 0x0, 0x1);
        gbc.writeMem(0xea21, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x778);
        EXPECT(gbc.pc(), 0xea22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea21), 0x4c);
        // 4C 01DE
        gbc.setState(0x755a, 0x961f, 0xb800, 0xa1ee, 0xe0b1, 0x13e6, 0x1, 0x0);
        gbc.writeMem(0x755a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x961f);
        EXPECT(gbc.pc(), 0x755b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01DF
        gbc.setState(0x49fd, 0x162, 0xa4d0, 0xdc86, 0xcee6, 0x40d1, 0x1, 0x1);
        gbc.writeMem(0x49fd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x162);
        EXPECT(gbc.pc(), 0x49fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01E0
        gbc.setState(0xe747, 0x51ef, 0x6360, 0x60ad, 0x231e, 0xd2e5, 0x1, 0x0);
        gbc.writeMem(0xe747, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x51ef);
        EXPECT(gbc.pc(), 0xe748);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe747), 0x4c);
        // 4C 01E1
        gbc.setState(0x47c4, 0x6395, 0x7670, 0x61b8, 0x9744, 0x7384, 0x0, 0x0);
        gbc.writeMem(0x47c4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x6395);
        EXPECT(gbc.pc(), 0x47c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01E2
        gbc.setState(0x6619, 0x113c, 0x5640, 0xc474, 0x6525, 0xa03e, 0x0, 0x1);
        gbc.writeMem(0x6619, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x113c);
        EXPECT(gbc.pc(), 0x661a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01E3
        gbc.setState(0x13e, 0x7260, 0xacc0, 0xc707, 0x122c, 0x13d5, 0x0, 0x0);
        gbc.writeMem(0x13e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x7260);
        EXPECT(gbc.pc(), 0x13f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01E4
        gbc.setState(0xaa32, 0x15cd, 0x9840, 0x3940, 0x5040, 0x5613, 0x0, 0x0);
        gbc.writeMem(0xaa32, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x15cd);
        EXPECT(gbc.pc(), 0xaa33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa32), 0x4c);
        // 4C 01E5
        gbc.setState(0x254d, 0xfb27, 0x56a0, 0x9c33, 0x4467, 0x805a, 0x1, 0x0);
        gbc.writeMem(0x254d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xfb27);
        EXPECT(gbc.pc(), 0x254e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01E6
        gbc.setState(0x382c, 0xd4d0, 0xe1b0, 0xabfb, 0xd8fa, 0x3d43, 0x1, 0x1);
        gbc.writeMem(0x382c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xd4d0);
        EXPECT(gbc.pc(), 0x382d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01E7
        gbc.setState(0x1741, 0xe102, 0xf7b0, 0x6e25, 0xe392, 0x6de8, 0x0, 0x0);
        gbc.writeMem(0x1741, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xe102);
        EXPECT(gbc.pc(), 0x1742);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01E8
        gbc.setState(0xdd37, 0x3f03, 0xe790, 0xe66d, 0xba81, 0x55a5, 0x0, 0x1);
        gbc.writeMem(0xdd37, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x3f03);
        EXPECT(gbc.pc(), 0xdd38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd37), 0x4c);
        // 4C 01E9
        gbc.setState(0x55f1, 0xa00, 0x3880, 0xd9c3, 0x62e8, 0x8232, 0x1, 0x0);
        gbc.writeMem(0x55f1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xa00);
        EXPECT(gbc.pc(), 0x55f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01EA
        gbc.setState(0x7e3b, 0x6848, 0xee0, 0x14ec, 0x424f, 0xda24, 0x0, 0x1);
        gbc.writeMem(0x7e3b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x6848);
        EXPECT(gbc.pc(), 0x7e3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01EB
        gbc.setState(0x2957, 0x7371, 0x55f0, 0x6357, 0x382e, 0x906a, 0x0, 0x1);
        gbc.writeMem(0x2957, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x7371);
        EXPECT(gbc.pc(), 0x2958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01EC
        gbc.setState(0x2ba8, 0xd5ae, 0xc420, 0xb869, 0xf72c, 0x8290, 0x1, 0x1);
        gbc.writeMem(0x2ba8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd5ae);
        EXPECT(gbc.pc(), 0x2ba9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01ED
        gbc.setState(0x9bf4, 0x9ce3, 0x4380, 0x37cf, 0xa705, 0xe445, 0x1, 0x0);
        gbc.writeMem(0x9bf4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x9ce3);
        EXPECT(gbc.pc(), 0x9bf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf4), 0x4c);
        // 4C 01EE
        gbc.setState(0x8a6f, 0xdfc4, 0x3230, 0x3a6e, 0xf8c2, 0x1746, 0x0, 0x0);
        gbc.writeMem(0x8a6f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdfc4);
        EXPECT(gbc.pc(), 0x8a70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a6f), 0x4c);
        // 4C 01EF
        gbc.setState(0x71ea, 0x991b, 0x64c0, 0x56b7, 0xb874, 0xc691, 0x1, 0x1);
        gbc.writeMem(0x71ea, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x991b);
        EXPECT(gbc.pc(), 0x71eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01F0
        gbc.setState(0x153d, 0x24e7, 0x4b50, 0x5c38, 0x2a97, 0x8277, 0x0, 0x0);
        gbc.writeMem(0x153d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x24e7);
        EXPECT(gbc.pc(), 0x153e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01F1
        gbc.setState(0x519f, 0x531e, 0xd5a0, 0x7447, 0xc3e5, 0x73a7, 0x0, 0x1);
        gbc.writeMem(0x519f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x531e);
        EXPECT(gbc.pc(), 0x51a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01F2
        gbc.setState(0xcb29, 0xcb40, 0x7990, 0xd41d, 0xd13f, 0xfd43, 0x1, 0x1);
        gbc.writeMem(0xcb29, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcb40);
        EXPECT(gbc.pc(), 0xcb2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb29), 0x4c);
        // 4C 01F3
        gbc.setState(0x5044, 0xe33c, 0x93b0, 0xe31, 0xfa48, 0xc3c3, 0x0, 0x0);
        gbc.writeMem(0x5044, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xe33c);
        EXPECT(gbc.pc(), 0x5045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 01F4
        gbc.setState(0xb755, 0xc80f, 0x9da0, 0xd8da, 0x4a5a, 0xdf56, 0x0, 0x1);
        gbc.writeMem(0xb755, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc80f);
        EXPECT(gbc.pc(), 0xb756);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb755), 0x4c);
        // 4C 01F5
        gbc.setState(0xc39c, 0xb7a5, 0x3c0, 0xf90a, 0x7687, 0x89e, 0x1, 0x1);
        gbc.writeMem(0xc39c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xb7a5);
        EXPECT(gbc.pc(), 0xc39d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc39c), 0x4c);
        // 4C 01F6
        gbc.setState(0x27fd, 0x3925, 0xb490, 0x15bd, 0x5f39, 0x578e, 0x0, 0x0);
        gbc.writeMem(0x27fd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x3925);
        EXPECT(gbc.pc(), 0x27fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 01F7
        gbc.setState(0xbc8c, 0x6f61, 0xeeb0, 0x33e4, 0xa65d, 0x9eca, 0x1, 0x0);
        gbc.writeMem(0xbc8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x6f61);
        EXPECT(gbc.pc(), 0xbc8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc8c), 0x4c);
        // 4C 01F8
        gbc.setState(0xafab, 0x574a, 0x4b10, 0x8579, 0x3c8a, 0xd153, 0x0, 0x0);
        gbc.writeMem(0xafab, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x574a);
        EXPECT(gbc.pc(), 0xafac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafab), 0x4c);
        // 4C 01F9
        gbc.setState(0xa886, 0xc97b, 0xc8b0, 0xd814, 0xaee6, 0xb8c5, 0x1, 0x0);
        gbc.writeMem(0xa886, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xc97b);
        EXPECT(gbc.pc(), 0xa887);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa886), 0x4c);
        // 4C 01FA
        gbc.setState(0x18e4, 0x754a, 0xfe20, 0x443c, 0x2a1, 0x5aa8, 0x1, 0x0);
        gbc.writeMem(0x18e4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x754a);
        EXPECT(gbc.pc(), 0x18e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 01FB
        gbc.setState(0xba2e, 0xf627, 0xabd0, 0x27d8, 0x2190, 0x1721, 0x1, 0x0);
        gbc.writeMem(0xba2e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xf627);
        EXPECT(gbc.pc(), 0xba2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba2e), 0x4c);
        // 4C 01FC
        gbc.setState(0xcefd, 0x907d, 0xe5d0, 0x33c4, 0xad1f, 0xb63f, 0x0, 0x0);
        gbc.writeMem(0xcefd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x907d);
        EXPECT(gbc.pc(), 0xcefe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcefd), 0x4c);
        // 4C 01FD
        gbc.setState(0x831c, 0x4283, 0x2150, 0xa70, 0x77fb, 0xc547, 0x0, 0x0);
        gbc.writeMem(0x831c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4283);
        EXPECT(gbc.pc(), 0x831d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x831c), 0x4c);
        // 4C 01FE
        gbc.setState(0x1661, 0xf285, 0xd540, 0xa0d1, 0xfb8f, 0x2cae, 0x0, 0x1);
        gbc.writeMem(0x1661, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf285);
        EXPECT(gbc.pc(), 0x1662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 01FF
        gbc.setState(0x4f24, 0x5362, 0x8c60, 0x3d55, 0x6de5, 0x7b7b, 0x1, 0x1);
        gbc.writeMem(0x4f24, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5362);
        EXPECT(gbc.pc(), 0x4f25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0200
        gbc.setState(0xd303, 0x110, 0xb080, 0x38a3, 0x745a, 0xbf67, 0x1, 0x0);
        gbc.writeMem(0xd303, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x110);
        EXPECT(gbc.pc(), 0xd304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd303), 0x4c);
        // 4C 0201
        gbc.setState(0x6442, 0x21f2, 0x3ab0, 0x5062, 0x980d, 0xc548, 0x0, 0x0);
        gbc.writeMem(0x6442, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x21f2);
        EXPECT(gbc.pc(), 0x6443);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0202
        gbc.setState(0xae7a, 0x5421, 0x6af0, 0x6e19, 0xacde, 0xa8c3, 0x1, 0x1);
        gbc.writeMem(0xae7a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x5421);
        EXPECT(gbc.pc(), 0xae7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae7a), 0x4c);
        // 4C 0203
        gbc.setState(0x24fd, 0x162a, 0x5c10, 0xb16b, 0x58e0, 0x3912, 0x0, 0x0);
        gbc.writeMem(0x24fd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x162a);
        EXPECT(gbc.pc(), 0x24fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0204
        gbc.setState(0xcd82, 0x6861, 0x8620, 0x3579, 0x119e, 0x126e, 0x1, 0x1);
        gbc.writeMem(0xcd82, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x6861);
        EXPECT(gbc.pc(), 0xcd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd82), 0x4c);
        // 4C 0205
        gbc.setState(0x93f8, 0xa6f, 0xd210, 0xc23b, 0xe801, 0x714b, 0x1, 0x0);
        gbc.writeMem(0x93f8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa6f);
        EXPECT(gbc.pc(), 0x93f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93f8), 0x4c);
        // 4C 0206
        gbc.setState(0x5c86, 0xd1c4, 0x6460, 0x9e19, 0x1ca7, 0x4902, 0x0, 0x1);
        gbc.writeMem(0x5c86, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xd1c4);
        EXPECT(gbc.pc(), 0x5c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0207
        gbc.setState(0x45c9, 0x3d89, 0xc2c0, 0x44f9, 0xc4d2, 0x7a4f, 0x1, 0x0);
        gbc.writeMem(0x45c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3d89);
        EXPECT(gbc.pc(), 0x45ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0208
        gbc.setState(0x9f40, 0x3886, 0x4f20, 0x35c, 0x5d28, 0x76fb, 0x1, 0x0);
        gbc.writeMem(0x9f40, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x3886);
        EXPECT(gbc.pc(), 0x9f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f40), 0x4c);
        // 4C 0209
        gbc.setState(0xa1ef, 0x26de, 0x72f0, 0x78d5, 0x2128, 0x8478, 0x1, 0x1);
        gbc.writeMem(0xa1ef, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x26de);
        EXPECT(gbc.pc(), 0xa1f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1ef), 0x4c);
        // 4C 020A
        gbc.setState(0x71db, 0xf5fb, 0x4050, 0x639c, 0xd932, 0xad7b, 0x1, 0x0);
        gbc.writeMem(0x71db, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf5fb);
        EXPECT(gbc.pc(), 0x71dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 020B
        gbc.setState(0x8e8c, 0x3811, 0x5d00, 0x145f, 0xcfe6, 0x3d16, 0x0, 0x1);
        gbc.writeMem(0x8e8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x3811);
        EXPECT(gbc.pc(), 0x8e8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e8c), 0x4c);
        // 4C 020C
        gbc.setState(0x1976, 0xc2ff, 0x4730, 0xa580, 0xecfd, 0x3348, 0x0, 0x0);
        gbc.writeMem(0x1976, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc2ff);
        EXPECT(gbc.pc(), 0x1977);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 020D
        gbc.setState(0xc2fe, 0xb2d, 0xfd30, 0xd9cf, 0x61ee, 0xaf82, 0x1, 0x0);
        gbc.writeMem(0xc2fe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb2d);
        EXPECT(gbc.pc(), 0xc2ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2fe), 0x4c);
        // 4C 020E
        gbc.setState(0xd043, 0x1d7b, 0x6440, 0x760d, 0x40ec, 0xabc7, 0x0, 0x1);
        gbc.writeMem(0xd043, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1d7b);
        EXPECT(gbc.pc(), 0xd044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd043), 0x4c);
        // 4C 020F
        gbc.setState(0x1a2a, 0xae14, 0xdbb0, 0x3f5b, 0xf38c, 0x4eec, 0x0, 0x0);
        gbc.writeMem(0x1a2a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xae14);
        EXPECT(gbc.pc(), 0x1a2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0210
        gbc.setState(0xe9e8, 0x5334, 0x4110, 0x51ce, 0x688e, 0x77c5, 0x1, 0x0);
        gbc.writeMem(0xe9e8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5334);
        EXPECT(gbc.pc(), 0xe9e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e8), 0x4c);
        // 4C 0211
        gbc.setState(0x4763, 0x6d5a, 0x9ba0, 0xc513, 0x57de, 0x5a97, 0x0, 0x0);
        gbc.writeMem(0x4763, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x6d5a);
        EXPECT(gbc.pc(), 0x4764);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0213
        gbc.setState(0x9107, 0xdb7f, 0x3200, 0xdf93, 0x4b28, 0x10c3, 0x0, 0x0);
        gbc.writeMem(0x9107, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xdb7f);
        EXPECT(gbc.pc(), 0x9108);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9107), 0x4c);
        // 4C 0214
        gbc.setState(0xa569, 0xa8b5, 0xe280, 0x906d, 0x595, 0x1649, 0x1, 0x0);
        gbc.writeMem(0xa569, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xa8b5);
        EXPECT(gbc.pc(), 0xa56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa569), 0x4c);
        // 4C 0215
        gbc.setState(0x8ffb, 0x4698, 0x8b30, 0x82f8, 0xfb4, 0xb1c3, 0x1, 0x0);
        gbc.writeMem(0x8ffb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4698);
        EXPECT(gbc.pc(), 0x8ffc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ffb), 0x4c);
        // 4C 0216
        gbc.setState(0xbac9, 0xdf58, 0xb1b0, 0xd71f, 0xf1b0, 0xf546, 0x0, 0x1);
        gbc.writeMem(0xbac9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xdf58);
        EXPECT(gbc.pc(), 0xbaca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbac9), 0x4c);
        // 4C 0217
        gbc.setState(0xa616, 0x8552, 0x3ee0, 0x24b, 0xf67f, 0x5a45, 0x0, 0x0);
        gbc.writeMem(0xa616, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8552);
        EXPECT(gbc.pc(), 0xa617);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa616), 0x4c);
        // 4C 0218
        gbc.setState(0x200f, 0x8cfc, 0x1510, 0x5826, 0x4f62, 0x83a, 0x1, 0x1);
        gbc.writeMem(0x200f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x8cfc);
        EXPECT(gbc.pc(), 0x2010);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0219
        gbc.setState(0x2489, 0x2cd1, 0x48a0, 0xc82, 0xb1ac, 0xf51c, 0x0, 0x1);
        gbc.writeMem(0x2489, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x2cd1);
        EXPECT(gbc.pc(), 0x248a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 021A
        gbc.setState(0x8dc, 0x773e, 0xb450, 0xdd90, 0x89f, 0x658b, 0x0, 0x0);
        gbc.writeMem(0x8dc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x773e);
        EXPECT(gbc.pc(), 0x8dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 021B
        gbc.setState(0x8eeb, 0x5479, 0x17e0, 0x45b0, 0xb1ee, 0xaf33, 0x1, 0x0);
        gbc.writeMem(0x8eeb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5479);
        EXPECT(gbc.pc(), 0x8eec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8eeb), 0x4c);
        // 4C 021C
        gbc.setState(0xa08c, 0xbe5d, 0xa740, 0x9fb9, 0xdd24, 0xa2e9, 0x1, 0x1);
        gbc.writeMem(0xa08c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xbe5d);
        EXPECT(gbc.pc(), 0xa08d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa08c), 0x4c);
        // 4C 021D
        gbc.setState(0xa45b, 0xd9c2, 0x9a90, 0xaee3, 0x1b6b, 0xec37, 0x1, 0x0);
        gbc.writeMem(0xa45b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xd9c2);
        EXPECT(gbc.pc(), 0xa45c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa45b), 0x4c);
        // 4C 021E
        gbc.setState(0xadf9, 0x6533, 0xd0b0, 0x10f7, 0x30d4, 0x852e, 0x0, 0x1);
        gbc.writeMem(0xadf9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x6533);
        EXPECT(gbc.pc(), 0xadfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadf9), 0x4c);
        // 4C 021F
        gbc.setState(0x1780, 0x2ce6, 0x3570, 0xbb49, 0x8880, 0xee34, 0x0, 0x1);
        gbc.writeMem(0x1780, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2ce6);
        EXPECT(gbc.pc(), 0x1781);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0220
        gbc.setState(0x2f32, 0x4f14, 0x5cf0, 0x211e, 0x3a51, 0x7ff7, 0x1, 0x0);
        gbc.writeMem(0x2f32, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4f14);
        EXPECT(gbc.pc(), 0x2f33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0221
        gbc.setState(0x56e0, 0xc09f, 0x7770, 0x53d2, 0xf431, 0xbde2, 0x0, 0x1);
        gbc.writeMem(0x56e0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc09f);
        EXPECT(gbc.pc(), 0x56e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0222
        gbc.setState(0x478c, 0x81a, 0xd280, 0xcbcd, 0xf954, 0x8a34, 0x1, 0x0);
        gbc.writeMem(0x478c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x81a);
        EXPECT(gbc.pc(), 0x478d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0223
        gbc.setState(0x78ab, 0x25c5, 0xb760, 0x55, 0xdbc3, 0xf32d, 0x1, 0x1);
        gbc.writeMem(0x78ab, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x25c5);
        EXPECT(gbc.pc(), 0x78ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0224
        gbc.setState(0x83f7, 0xb3be, 0xc8d0, 0x572d, 0x55f5, 0xe435, 0x0, 0x0);
        gbc.writeMem(0x83f7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xb3be);
        EXPECT(gbc.pc(), 0x83f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83f7), 0x4c);
        // 4C 0225
        gbc.setState(0x285e, 0xa63, 0xdd20, 0x955e, 0xe7f4, 0x5a0f, 0x0, 0x0);
        gbc.writeMem(0x285e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xa63);
        EXPECT(gbc.pc(), 0x285f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0226
        gbc.setState(0x2cc7, 0x9f72, 0xaf20, 0x7f64, 0x68d7, 0xd415, 0x1, 0x0);
        gbc.writeMem(0x2cc7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9f72);
        EXPECT(gbc.pc(), 0x2cc8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0227
        gbc.setState(0x8d0e, 0x3e70, 0x2ef0, 0x8666, 0xe033, 0x3474, 0x1, 0x1);
        gbc.writeMem(0x8d0e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3e70);
        EXPECT(gbc.pc(), 0x8d0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d0e), 0x4c);
        // 4C 0228
        gbc.setState(0xb785, 0xb852, 0xe120, 0x35cd, 0xe6e6, 0x1054, 0x1, 0x1);
        gbc.writeMem(0xb785, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xb852);
        EXPECT(gbc.pc(), 0xb786);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb785), 0x4c);
        // 4C 0229
        gbc.setState(0xb037, 0x7e0f, 0x32d0, 0x1040, 0x3a87, 0x1ac8, 0x0, 0x0);
        gbc.writeMem(0xb037, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x7e0f);
        EXPECT(gbc.pc(), 0xb038);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb037), 0x4c);
        // 4C 022A
        gbc.setState(0x94c, 0x7f48, 0x2100, 0x3cd0, 0x22a4, 0x5506, 0x0, 0x0);
        gbc.writeMem(0x94c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7f48);
        EXPECT(gbc.pc(), 0x94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 022B
        gbc.setState(0xc054, 0xf3bb, 0x420, 0x93a4, 0xa407, 0x6f8b, 0x0, 0x1);
        gbc.writeMem(0xc054, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xf3bb);
        EXPECT(gbc.pc(), 0xc055);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc054), 0x4c);
        // 4C 022D
        gbc.setState(0x17f9, 0xfcea, 0x9bd0, 0x5cb, 0x3de7, 0x7b6e, 0x0, 0x0);
        gbc.writeMem(0x17f9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xfcea);
        EXPECT(gbc.pc(), 0x17fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 022E
        gbc.setState(0xcb33, 0x37ee, 0xa380, 0xd04e, 0x4f4f, 0xc708, 0x0, 0x1);
        gbc.writeMem(0xcb33, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x37ee);
        EXPECT(gbc.pc(), 0xcb34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb33), 0x4c);
        // 4C 022F
        gbc.setState(0xa1f6, 0xd75, 0xa780, 0x817e, 0x5f2d, 0xdac6, 0x1, 0x0);
        gbc.writeMem(0xa1f6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xd75);
        EXPECT(gbc.pc(), 0xa1f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f6), 0x4c);
        // 4C 0230
        gbc.setState(0x2381, 0x4eb8, 0x3ef0, 0x2482, 0xedcf, 0x76b, 0x0, 0x1);
        gbc.writeMem(0x2381, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x4eb8);
        EXPECT(gbc.pc(), 0x2382);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0231
        gbc.setState(0xe13, 0x7218, 0x63b0, 0xc5b1, 0xe7a0, 0x6c76, 0x1, 0x0);
        gbc.writeMem(0xe13, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7218);
        EXPECT(gbc.pc(), 0xe14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0232
        gbc.setState(0x3151, 0xeda3, 0xd620, 0x74cf, 0xc81, 0x746b, 0x0, 0x1);
        gbc.writeMem(0x3151, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xeda3);
        EXPECT(gbc.pc(), 0x3152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0233
        gbc.setState(0x74c7, 0x9528, 0x1fc0, 0x7f02, 0x3992, 0x22b1, 0x0, 0x0);
        gbc.writeMem(0x74c7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9528);
        EXPECT(gbc.pc(), 0x74c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0234
        gbc.setState(0xb0fa, 0x5b05, 0x88d0, 0xa220, 0xd, 0xff5b, 0x1, 0x1);
        gbc.writeMem(0xb0fa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x5b05);
        EXPECT(gbc.pc(), 0xb0fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0fa), 0x4c);
        // 4C 0235
        gbc.setState(0x348f, 0xd853, 0xe840, 0xf936, 0xd985, 0xab57, 0x0, 0x0);
        gbc.writeMem(0x348f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xd853);
        EXPECT(gbc.pc(), 0x3490);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0236
        gbc.setState(0xa5ab, 0xf8ec, 0xae30, 0x4e0, 0x8f51, 0x5a46, 0x0, 0x1);
        gbc.writeMem(0xa5ab, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf8ec);
        EXPECT(gbc.pc(), 0xa5ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5ab), 0x4c);
        // 4C 0237
        gbc.setState(0x6ec8, 0xd7c4, 0x750, 0x1258, 0x2d7a, 0xc4e, 0x0, 0x1);
        gbc.writeMem(0x6ec8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xd7c4);
        EXPECT(gbc.pc(), 0x6ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0238
        gbc.setState(0x7e03, 0x86d9, 0x7bb0, 0x7396, 0xffa5, 0xce62, 0x1, 0x1);
        gbc.writeMem(0x7e03, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x86d9);
        EXPECT(gbc.pc(), 0x7e04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0239
        gbc.setState(0xbcf4, 0x5dd8, 0x5ce0, 0x2cce, 0x2667, 0xb6b7, 0x0, 0x1);
        gbc.writeMem(0xbcf4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x5dd8);
        EXPECT(gbc.pc(), 0xbcf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcf4), 0x4c);
        // 4C 023A
        gbc.setState(0xa30a, 0xe6c, 0x2750, 0xdef3, 0xc97f, 0xbf88, 0x0, 0x1);
        gbc.writeMem(0xa30a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe6c);
        EXPECT(gbc.pc(), 0xa30b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa30a), 0x4c);
        // 4C 023B
        gbc.setState(0x7353, 0xffd0, 0x89f0, 0x7da3, 0x954f, 0x9a3e, 0x1, 0x0);
        gbc.writeMem(0x7353, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xffd0);
        EXPECT(gbc.pc(), 0x7354);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 023C
        gbc.setState(0x50e8, 0xc80f, 0x7290, 0x13ca, 0xac14, 0xca53, 0x0, 0x1);
        gbc.writeMem(0x50e8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xc80f);
        EXPECT(gbc.pc(), 0x50e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 023E
        gbc.setState(0x4d89, 0x4409, 0x9ec0, 0x7e0b, 0x1ed1, 0x65f5, 0x1, 0x1);
        gbc.writeMem(0x4d89, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x4409);
        EXPECT(gbc.pc(), 0x4d8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 023F
        gbc.setState(0xbf63, 0xe3f5, 0xa7a0, 0x6e0, 0x5f36, 0xebee, 0x1, 0x1);
        gbc.writeMem(0xbf63, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe3f5);
        EXPECT(gbc.pc(), 0xbf64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf63), 0x4c);
        // 4C 0240
        gbc.setState(0x93a2, 0xc2ab, 0x4190, 0xee61, 0xe62e, 0x6451, 0x0, 0x0);
        gbc.writeMem(0x93a2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xc2ab);
        EXPECT(gbc.pc(), 0x93a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a2), 0x4c);
        // 4C 0241
        gbc.setState(0x33f2, 0x7fec, 0x9a00, 0xbbf2, 0x281d, 0xc019, 0x0, 0x1);
        gbc.writeMem(0x33f2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7fec);
        EXPECT(gbc.pc(), 0x33f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0242
        gbc.setState(0x8f74, 0x3e0d, 0xb460, 0x5b7, 0xd2e0, 0xf546, 0x1, 0x1);
        gbc.writeMem(0x8f74, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x3e0d);
        EXPECT(gbc.pc(), 0x8f75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f74), 0x4c);
        // 4C 0243
        gbc.setState(0xa523, 0xf27a, 0xda90, 0xf303, 0xa7af, 0x6e00, 0x1, 0x0);
        gbc.writeMem(0xa523, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf27a);
        EXPECT(gbc.pc(), 0xa524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa523), 0x4c);
        // 4C 0245
        gbc.setState(0xbf22, 0x68f2, 0xf160, 0xc908, 0x5c86, 0x177, 0x0, 0x1);
        gbc.writeMem(0xbf22, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x68f2);
        EXPECT(gbc.pc(), 0xbf23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf22), 0x4c);
        // 4C 0246
        gbc.setState(0xc5c0, 0x8e23, 0xcb90, 0xdd55, 0x770b, 0xc979, 0x1, 0x0);
        gbc.writeMem(0xc5c0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x8e23);
        EXPECT(gbc.pc(), 0xc5c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c0), 0x4c);
        // 4C 0247
        gbc.setState(0x7f7c, 0x759, 0x6110, 0xe431, 0x303d, 0x6f4c, 0x0, 0x1);
        gbc.writeMem(0x7f7c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x759);
        EXPECT(gbc.pc(), 0x7f7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0248
        gbc.setState(0xe3e3, 0xc123, 0x7520, 0x4e82, 0x4311, 0x94f6, 0x0, 0x1);
        gbc.writeMem(0xe3e3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc123);
        EXPECT(gbc.pc(), 0xe3e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3e3), 0x4c);
        // 4C 0249
        gbc.setState(0x89fa, 0x605c, 0x1200, 0xf3a7, 0x3951, 0x1252, 0x1, 0x0);
        gbc.writeMem(0x89fa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x605c);
        EXPECT(gbc.pc(), 0x89fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89fa), 0x4c);
        // 4C 024A
        gbc.setState(0x71b0, 0x7ceb, 0x1ff0, 0x2c8a, 0x9bd7, 0xb8ee, 0x1, 0x1);
        gbc.writeMem(0x71b0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7ceb);
        EXPECT(gbc.pc(), 0x71b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 024B
        gbc.setState(0x94a9, 0x4d7c, 0xee60, 0xb812, 0x5fa1, 0xd58e, 0x1, 0x0);
        gbc.writeMem(0x94a9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4d7c);
        EXPECT(gbc.pc(), 0x94aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94a9), 0x4c);
        // 4C 024C
        gbc.setState(0x99c6, 0xd6fd, 0x7690, 0x3690, 0xc80d, 0xda8d, 0x0, 0x0);
        gbc.writeMem(0x99c6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xd6fd);
        EXPECT(gbc.pc(), 0x99c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c6), 0x4c);
        // 4C 024D
        gbc.setState(0x8d3, 0x86b8, 0xe820, 0x9a19, 0x5d0, 0x9f77, 0x0, 0x0);
        gbc.writeMem(0x8d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x86b8);
        EXPECT(gbc.pc(), 0x8d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 024E
        gbc.setState(0x1657, 0xe595, 0x53d0, 0x576e, 0x1231, 0x58d7, 0x1, 0x1);
        gbc.writeMem(0x1657, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe595);
        EXPECT(gbc.pc(), 0x1658);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 024F
        gbc.setState(0xa768, 0xdc37, 0xfb00, 0xc7da, 0xdeb9, 0xc3b7, 0x0, 0x1);
        gbc.writeMem(0xa768, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xdc37);
        EXPECT(gbc.pc(), 0xa769);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa768), 0x4c);
        // 4C 0250
        gbc.setState(0x25f1, 0xa2bc, 0xa470, 0xf818, 0xbb14, 0x25bd, 0x0, 0x0);
        gbc.writeMem(0x25f1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xa2bc);
        EXPECT(gbc.pc(), 0x25f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0251
        gbc.setState(0xcc21, 0xe7bd, 0xee10, 0x791b, 0xef0b, 0x837, 0x1, 0x1);
        gbc.writeMem(0xcc21, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xe7bd);
        EXPECT(gbc.pc(), 0xcc22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc21), 0x4c);
        // 4C 0252
        gbc.setState(0x171b, 0xff16, 0xaf00, 0x704e, 0xa609, 0x61dc, 0x1, 0x1);
        gbc.writeMem(0x171b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xff16);
        EXPECT(gbc.pc(), 0x171c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0253
        gbc.setState(0xc45, 0xebb9, 0x68a0, 0xeaba, 0x59c3, 0xa109, 0x0, 0x0);
        gbc.writeMem(0xc45, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xebb9);
        EXPECT(gbc.pc(), 0xc46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0254
        gbc.setState(0xa9c9, 0x9c8a, 0x31a0, 0xa6ed, 0xf9d6, 0xf629, 0x1, 0x0);
        gbc.writeMem(0xa9c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9c8a);
        EXPECT(gbc.pc(), 0xa9ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c9), 0x4c);
        // 4C 0255
        gbc.setState(0x673f, 0x7825, 0x14d0, 0xa791, 0x21ab, 0xeb8e, 0x0, 0x0);
        gbc.writeMem(0x673f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7825);
        EXPECT(gbc.pc(), 0x6740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0256
        gbc.setState(0x4413, 0xcbf, 0x4800, 0x4c85, 0x1054, 0x2a6f, 0x1, 0x0);
        gbc.writeMem(0x4413, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xcbf);
        EXPECT(gbc.pc(), 0x4414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0257
        gbc.setState(0xa7f2, 0x4bd0, 0xbbb0, 0xc2bd, 0xebc7, 0xb995, 0x0, 0x1);
        gbc.writeMem(0xa7f2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4bd0);
        EXPECT(gbc.pc(), 0xa7f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f2), 0x4c);
        // 4C 0258
        gbc.setState(0x1fdc, 0x70fd, 0xdfa0, 0x4818, 0xc76c, 0x5431, 0x1, 0x0);
        gbc.writeMem(0x1fdc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x70fd);
        EXPECT(gbc.pc(), 0x1fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0259
        gbc.setState(0xcc11, 0x33b8, 0xe630, 0x1ddf, 0xdc4e, 0xbb6b, 0x0, 0x1);
        gbc.writeMem(0xcc11, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x33b8);
        EXPECT(gbc.pc(), 0xcc12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc11), 0x4c);
        // 4C 025A
        gbc.setState(0xee30, 0xf4ce, 0x18c0, 0x748b, 0xa006, 0xf72b, 0x1, 0x0);
        gbc.writeMem(0xee30, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xf4ce);
        EXPECT(gbc.pc(), 0xee31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee30), 0x4c);
        // 4C 025C
        gbc.setState(0x935a, 0x1f88, 0x11c0, 0x9a53, 0x3c42, 0x8d6b, 0x1, 0x0);
        gbc.writeMem(0x935a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x1f88);
        EXPECT(gbc.pc(), 0x935b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x935a), 0x4c);
        // 4C 025D
        gbc.setState(0xefc4, 0x27c5, 0x6640, 0x8363, 0xc927, 0xa665, 0x0, 0x0);
        gbc.writeMem(0xefc4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x27c5);
        EXPECT(gbc.pc(), 0xefc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc4), 0x4c);
        // 4C 025E
        gbc.setState(0x7e81, 0x2c85, 0xd6e0, 0xe383, 0x44b, 0xaefb, 0x0, 0x0);
        gbc.writeMem(0x7e81, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x2c85);
        EXPECT(gbc.pc(), 0x7e82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 025F
        gbc.setState(0xd2a7, 0x2511, 0xd660, 0xfaa7, 0x60e9, 0x5d57, 0x1, 0x1);
        gbc.writeMem(0xd2a7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x2511);
        EXPECT(gbc.pc(), 0xd2a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2a7), 0x4c);
        // 4C 0261
        gbc.setState(0xa43d, 0x647d, 0x60a0, 0xd3f7, 0x1e20, 0xf825, 0x0, 0x1);
        gbc.writeMem(0xa43d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x647d);
        EXPECT(gbc.pc(), 0xa43e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa43d), 0x4c);
        // 4C 0262
        gbc.setState(0xa98d, 0xfc33, 0xefc0, 0x592b, 0x29ca, 0xe0ce, 0x1, 0x1);
        gbc.writeMem(0xa98d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfc33);
        EXPECT(gbc.pc(), 0xa98e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98d), 0x4c);
        // 4C 0263
        gbc.setState(0x7963, 0x88ef, 0x48a0, 0xafb4, 0x453f, 0xe13a, 0x0, 0x1);
        gbc.writeMem(0x7963, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x88ef);
        EXPECT(gbc.pc(), 0x7964);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0264
        gbc.setState(0xaf32, 0x4c95, 0x7da0, 0xc3a6, 0x604, 0x139e, 0x0, 0x1);
        gbc.writeMem(0xaf32, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x4c95);
        EXPECT(gbc.pc(), 0xaf33);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf32), 0x4c);
        // 4C 0265
        gbc.setState(0x1f96, 0x3f5b, 0x7dd0, 0xae20, 0x843, 0x9c0b, 0x1, 0x0);
        gbc.writeMem(0x1f96, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3f5b);
        EXPECT(gbc.pc(), 0x1f97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0266
        gbc.setState(0xcb3, 0x403d, 0x75f0, 0xff8c, 0x5c57, 0x44c8, 0x1, 0x0);
        gbc.writeMem(0xcb3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x403d);
        EXPECT(gbc.pc(), 0xcb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0267
        gbc.setState(0x90d1, 0xd816, 0x8830, 0x8a1c, 0x1cce, 0x64f7, 0x1, 0x1);
        gbc.writeMem(0x90d1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xd816);
        EXPECT(gbc.pc(), 0x90d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90d1), 0x4c);
        // 4C 0268
        gbc.setState(0xa3e5, 0x68c1, 0xb2f0, 0x74fb, 0xf85, 0x1cb2, 0x1, 0x1);
        gbc.writeMem(0xa3e5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x68c1);
        EXPECT(gbc.pc(), 0xa3e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3e5), 0x4c);
        // 4C 0269
        gbc.setState(0xef30, 0x1db5, 0xe850, 0x712c, 0xd08b, 0x7073, 0x1, 0x1);
        gbc.writeMem(0xef30, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1db5);
        EXPECT(gbc.pc(), 0xef31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef30), 0x4c);
        // 4C 026A
        gbc.setState(0xafcf, 0x6a, 0xa350, 0xc8a5, 0x2128, 0xd5f0, 0x0, 0x0);
        gbc.writeMem(0xafcf, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x6a);
        EXPECT(gbc.pc(), 0xafd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafcf), 0x4c);
        // 4C 026B
        gbc.setState(0x8d90, 0x3e14, 0x6e00, 0xfa16, 0xd120, 0xfe87, 0x0, 0x1);
        gbc.writeMem(0x8d90, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x3e14);
        EXPECT(gbc.pc(), 0x8d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d90), 0x4c);
        // 4C 026C
        gbc.setState(0xb5ee, 0x8bd4, 0xfa20, 0xfdcc, 0xe9ab, 0x2175, 0x0, 0x1);
        gbc.writeMem(0xb5ee, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x8bd4);
        EXPECT(gbc.pc(), 0xb5ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5ee), 0x4c);
        // 4C 026D
        gbc.setState(0xbf41, 0x5c84, 0x1750, 0x8545, 0x4ec2, 0x27cb, 0x1, 0x0);
        gbc.writeMem(0xbf41, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x5c84);
        EXPECT(gbc.pc(), 0xbf42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf41), 0x4c);
        // 4C 026E
        gbc.setState(0x9ef1, 0x3144, 0xf290, 0x5e29, 0xadf9, 0x36ad, 0x0, 0x0);
        gbc.writeMem(0x9ef1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3144);
        EXPECT(gbc.pc(), 0x9ef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ef1), 0x4c);
        // 4C 026F
        gbc.setState(0x1cd1, 0x6fd1, 0x6f60, 0x80a4, 0xa2e9, 0xa811, 0x1, 0x1);
        gbc.writeMem(0x1cd1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x6fd1);
        EXPECT(gbc.pc(), 0x1cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0271
        gbc.setState(0x40b, 0xa5ee, 0x66a0, 0xa443, 0xf511, 0xf26f, 0x1, 0x0);
        gbc.writeMem(0x40b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xa5ee);
        EXPECT(gbc.pc(), 0x40c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0272
        gbc.setState(0xd0bd, 0xbbb5, 0x96d0, 0xd7a1, 0x3c64, 0xee21, 0x0, 0x1);
        gbc.writeMem(0xd0bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xbbb5);
        EXPECT(gbc.pc(), 0xd0be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0bd), 0x4c);
        // 4C 0273
        gbc.setState(0x5f21, 0x8dc8, 0xe3b0, 0xad45, 0x5797, 0xfe0c, 0x1, 0x0);
        gbc.writeMem(0x5f21, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8dc8);
        EXPECT(gbc.pc(), 0x5f22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0274
        gbc.setState(0xbcd1, 0x64d, 0x53d0, 0x2105, 0x2f5, 0x5c84, 0x0, 0x0);
        gbc.writeMem(0xbcd1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x64d);
        EXPECT(gbc.pc(), 0xbcd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcd1), 0x4c);
        // 4C 0275
        gbc.setState(0x38c2, 0x160, 0xd780, 0x2ac6, 0x2014, 0x574b, 0x0, 0x0);
        gbc.writeMem(0x38c2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x160);
        EXPECT(gbc.pc(), 0x38c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0276
        gbc.setState(0xc5b6, 0x2853, 0xc570, 0xf6bb, 0xa68, 0xa029, 0x1, 0x0);
        gbc.writeMem(0xc5b6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2853);
        EXPECT(gbc.pc(), 0xc5b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5b6), 0x4c);
        // 4C 0277
        gbc.setState(0x5595, 0x5db7, 0xdb90, 0x717b, 0xfd48, 0x1964, 0x0, 0x1);
        gbc.writeMem(0x5595, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5db7);
        EXPECT(gbc.pc(), 0x5596);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0278
        gbc.setState(0xe7cd, 0xc54e, 0x43a0, 0xdad9, 0xc372, 0xe8f6, 0x1, 0x1);
        gbc.writeMem(0xe7cd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xc54e);
        EXPECT(gbc.pc(), 0xe7ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7cd), 0x4c);
        // 4C 0279
        gbc.setState(0xb8c7, 0x6484, 0xb4b0, 0x13da, 0xaba6, 0x809, 0x0, 0x1);
        gbc.writeMem(0xb8c7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x6484);
        EXPECT(gbc.pc(), 0xb8c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8c7), 0x4c);
        // 4C 027B
        gbc.setState(0x80e6, 0x1130, 0xa680, 0x247f, 0x7f2c, 0x721b, 0x0, 0x1);
        gbc.writeMem(0x80e6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1130);
        EXPECT(gbc.pc(), 0x80e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80e6), 0x4c);
        // 4C 027C
        gbc.setState(0xb35b, 0x5c1d, 0x54d0, 0xf5d0, 0x2a06, 0xf787, 0x1, 0x0);
        gbc.writeMem(0xb35b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5c1d);
        EXPECT(gbc.pc(), 0xb35c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35b), 0x4c);
        // 4C 027D
        gbc.setState(0x8325, 0x82d5, 0x9380, 0x5598, 0x9c07, 0x2c4, 0x1, 0x1);
        gbc.writeMem(0x8325, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x82d5);
        EXPECT(gbc.pc(), 0x8326);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8325), 0x4c);
        // 4C 027E
        gbc.setState(0x7f09, 0x63d0, 0x6700, 0x6bfe, 0xaadd, 0x39f2, 0x0, 0x1);
        gbc.writeMem(0x7f09, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x63d0);
        EXPECT(gbc.pc(), 0x7f0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 027F
        gbc.setState(0x4c67, 0x9d71, 0x21b0, 0x7757, 0x2249, 0x8a8c, 0x0, 0x1);
        gbc.writeMem(0x4c67, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x9d71);
        EXPECT(gbc.pc(), 0x4c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0280
        gbc.setState(0x34b1, 0xd66f, 0x7450, 0xa921, 0x90ef, 0x44eb, 0x0, 0x1);
        gbc.writeMem(0x34b1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xd66f);
        EXPECT(gbc.pc(), 0x34b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0281
        gbc.setState(0x16d3, 0x4d6a, 0xcae0, 0x61d6, 0x6dba, 0x312a, 0x0, 0x1);
        gbc.writeMem(0x16d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4d6a);
        EXPECT(gbc.pc(), 0x16d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0283
        gbc.setState(0x84c, 0x1362, 0x1580, 0x7c6c, 0x7769, 0x2e95, 0x0, 0x0);
        gbc.writeMem(0x84c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x1362);
        EXPECT(gbc.pc(), 0x84d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0284
        gbc.setState(0x751d, 0x7f1b, 0x9990, 0x8181, 0x8391, 0x402e, 0x1, 0x1);
        gbc.writeMem(0x751d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x7f1b);
        EXPECT(gbc.pc(), 0x751e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0285
        gbc.setState(0x45d8, 0x23e4, 0x4d80, 0xe842, 0x1a0c, 0xbaca, 0x0, 0x0);
        gbc.writeMem(0x45d8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x23e4);
        EXPECT(gbc.pc(), 0x45d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0286
        gbc.setState(0xb140, 0x72d2, 0x1740, 0x497b, 0xef28, 0x5f07, 0x1, 0x0);
        gbc.writeMem(0xb140, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x72d2);
        EXPECT(gbc.pc(), 0xb141);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb140), 0x4c);
        // 4C 0287
        gbc.setState(0x69d7, 0x5c86, 0x31f0, 0xff49, 0x12ff, 0xc81f, 0x0, 0x0);
        gbc.writeMem(0x69d7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5c86);
        EXPECT(gbc.pc(), 0x69d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0288
        gbc.setState(0x3776, 0x6624, 0x2330, 0xcf63, 0x9e15, 0x3ae6, 0x1, 0x1);
        gbc.writeMem(0x3776, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6624);
        EXPECT(gbc.pc(), 0x3777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0289
        gbc.setState(0x2088, 0x5a57, 0x7280, 0x15f3, 0xfbf8, 0x83ed, 0x1, 0x0);
        gbc.writeMem(0x2088, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x5a57);
        EXPECT(gbc.pc(), 0x2089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 028A
        gbc.setState(0xa83c, 0x394d, 0xa1d0, 0x6709, 0x5880, 0x296d, 0x0, 0x0);
        gbc.writeMem(0xa83c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x394d);
        EXPECT(gbc.pc(), 0xa83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa83c), 0x4c);
        // 4C 028B
        gbc.setState(0xbe97, 0x71bd, 0x4ef0, 0x4f, 0xeaf7, 0x250f, 0x0, 0x1);
        gbc.writeMem(0xbe97, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x71bd);
        EXPECT(gbc.pc(), 0xbe98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe97), 0x4c);
        // 4C 028C
        gbc.setState(0xbf15, 0x3db6, 0x94e0, 0xac37, 0xa42d, 0x7d36, 0x1, 0x0);
        gbc.writeMem(0xbf15, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3db6);
        EXPECT(gbc.pc(), 0xbf16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf15), 0x4c);
        // 4C 028D
        gbc.setState(0xb6c9, 0x2127, 0x3af0, 0x68e2, 0x59a6, 0x251e, 0x0, 0x0);
        gbc.writeMem(0xb6c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x2127);
        EXPECT(gbc.pc(), 0xb6ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6c9), 0x4c);
        // 4C 028E
        gbc.setState(0xa04a, 0xa73c, 0x7670, 0x4773, 0x4c3c, 0x5878, 0x0, 0x1);
        gbc.writeMem(0xa04a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xa73c);
        EXPECT(gbc.pc(), 0xa04b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa04a), 0x4c);
        // 4C 028F
        gbc.setState(0x985d, 0x2ddd, 0xe560, 0xca9c, 0xee5d, 0x6984, 0x1, 0x0);
        gbc.writeMem(0x985d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x2ddd);
        EXPECT(gbc.pc(), 0x985e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x985d), 0x4c);
        // 4C 0290
        gbc.setState(0x483b, 0x5cc7, 0x2960, 0x496a, 0xc6d6, 0xa416, 0x1, 0x1);
        gbc.writeMem(0x483b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0x483c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0291
        gbc.setState(0x8db7, 0x30bc, 0x6130, 0x1726, 0x6868, 0x86d6, 0x0, 0x0);
        gbc.writeMem(0x8db7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x30bc);
        EXPECT(gbc.pc(), 0x8db8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db7), 0x4c);
        // 4C 0292
        gbc.setState(0xd827, 0x95d4, 0x7cb0, 0x7c1d, 0x4f8b, 0x92c1, 0x0, 0x1);
        gbc.writeMem(0xd827, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x95d4);
        EXPECT(gbc.pc(), 0xd828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd827), 0x4c);
        // 4C 0293
        gbc.setState(0xe627, 0xb41e, 0x580, 0x11d9, 0xe614, 0x77d, 0x0, 0x1);
        gbc.writeMem(0xe627, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb41e);
        EXPECT(gbc.pc(), 0xe628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe627), 0x4c);
        // 4C 0294
        gbc.setState(0x9afa, 0xff74, 0xf720, 0x75bd, 0x7193, 0x8219, 0x1, 0x1);
        gbc.writeMem(0x9afa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xff74);
        EXPECT(gbc.pc(), 0x9afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afa), 0x4c);
        // 4C 0295
        gbc.setState(0xb80d, 0xe27e, 0xf4a0, 0xc65c, 0xf722, 0x56b, 0x0, 0x1);
        gbc.writeMem(0xb80d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe27e);
        EXPECT(gbc.pc(), 0xb80e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb80d), 0x4c);
        // 4C 0296
        gbc.setState(0xb4b1, 0xbe0, 0xe0a0, 0xd8fd, 0x5b88, 0xd110, 0x0, 0x1);
        gbc.writeMem(0xb4b1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xbe0);
        EXPECT(gbc.pc(), 0xb4b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb4b1), 0x4c);
        // 4C 0297
        gbc.setState(0x5624, 0xc8d4, 0xa2a0, 0x1fb8, 0x587b, 0x2b8d, 0x1, 0x0);
        gbc.writeMem(0x5624, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc8d4);
        EXPECT(gbc.pc(), 0x5625);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0299
        gbc.setState(0x2e34, 0xf108, 0x93e0, 0x3dbe, 0xf595, 0xf402, 0x1, 0x1);
        gbc.writeMem(0x2e34, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf108);
        EXPECT(gbc.pc(), 0x2e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 029A
        gbc.setState(0x5c79, 0x3da2, 0x9c60, 0xe2d1, 0x9bfc, 0x2770, 0x1, 0x0);
        gbc.writeMem(0x5c79, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3da2);
        EXPECT(gbc.pc(), 0x5c7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 029B
        gbc.setState(0x7584, 0x3ad6, 0x88d0, 0x1d9e, 0x25c5, 0xd838, 0x1, 0x1);
        gbc.writeMem(0x7584, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x3ad6);
        EXPECT(gbc.pc(), 0x7585);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 029C
        gbc.setState(0xc62d, 0x1344, 0x2080, 0xb84e, 0xf933, 0xf2f1, 0x1, 0x1);
        gbc.writeMem(0xc62d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x1344);
        EXPECT(gbc.pc(), 0xc62e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc62d), 0x4c);
        // 4C 029D
        gbc.setState(0x325f, 0x91fd, 0x83b0, 0xaa0d, 0x5891, 0xc0f3, 0x1, 0x1);
        gbc.writeMem(0x325f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x91fd);
        EXPECT(gbc.pc(), 0x3260);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 029E
        gbc.setState(0xc5ae, 0x1a83, 0xff10, 0x75fa, 0x6b4e, 0x2e4c, 0x1, 0x1);
        gbc.writeMem(0xc5ae, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1a83);
        EXPECT(gbc.pc(), 0xc5af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5ae), 0x4c);
        // 4C 029F
        gbc.setState(0xbc57, 0x4cfc, 0xbfe0, 0x3eee, 0x72a5, 0xdaaf, 0x1, 0x1);
        gbc.writeMem(0xbc57, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x4cfc);
        EXPECT(gbc.pc(), 0xbc58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc57), 0x4c);
        // 4C 02A0
        gbc.setState(0xeb89, 0x7865, 0xe120, 0x4fdd, 0x90f0, 0x83b6, 0x1, 0x0);
        gbc.writeMem(0xeb89, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7865);
        EXPECT(gbc.pc(), 0xeb8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb89), 0x4c);
        // 4C 02A1
        gbc.setState(0x1301, 0xd54f, 0x4150, 0x1e7, 0xf9c7, 0x330d, 0x1, 0x0);
        gbc.writeMem(0x1301, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd54f);
        EXPECT(gbc.pc(), 0x1302);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02A3
        gbc.setState(0xc936, 0xec3b, 0x2160, 0xc497, 0x27d3, 0xbfd8, 0x0, 0x1);
        gbc.writeMem(0xc936, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xec3b);
        EXPECT(gbc.pc(), 0xc937);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc936), 0x4c);
        // 4C 02A4
        gbc.setState(0x7253, 0x3c1b, 0xb6d0, 0x7c65, 0xef36, 0x518c, 0x0, 0x0);
        gbc.writeMem(0x7253, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x3c1b);
        EXPECT(gbc.pc(), 0x7254);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02A5
        gbc.setState(0x6324, 0x4aaa, 0xbf80, 0x1bd5, 0x98e9, 0x7f16, 0x0, 0x0);
        gbc.writeMem(0x6324, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4aaa);
        EXPECT(gbc.pc(), 0x6325);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02A6
        gbc.setState(0x1209, 0x9357, 0x6750, 0x59fa, 0xaeb5, 0x2217, 0x1, 0x0);
        gbc.writeMem(0x1209, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9357);
        EXPECT(gbc.pc(), 0x120a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02A8
        gbc.setState(0x922d, 0x1ad6, 0x1100, 0xe069, 0x4c67, 0x9b36, 0x1, 0x1);
        gbc.writeMem(0x922d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x1ad6);
        EXPECT(gbc.pc(), 0x922e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x922d), 0x4c);
        // 4C 02A9
        gbc.setState(0x9e01, 0xe2d0, 0xd640, 0xa15d, 0x4bd5, 0x981c, 0x0, 0x1);
        gbc.writeMem(0x9e01, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe2d0);
        EXPECT(gbc.pc(), 0x9e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e01), 0x4c);
        // 4C 02AA
        gbc.setState(0x6f2d, 0xc515, 0x2ab0, 0xdde7, 0x700, 0xebac, 0x1, 0x1);
        gbc.writeMem(0x6f2d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc515);
        EXPECT(gbc.pc(), 0x6f2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02AB
        gbc.setState(0x36cd, 0xcfa3, 0xe8d0, 0x6861, 0x15dd, 0x8bf9, 0x1, 0x1);
        gbc.writeMem(0x36cd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xcfa3);
        EXPECT(gbc.pc(), 0x36ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02AC
        gbc.setState(0xbe35, 0x7eb6, 0xfd30, 0x2023, 0x6921, 0x97e0, 0x0, 0x1);
        gbc.writeMem(0xbe35, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x7eb6);
        EXPECT(gbc.pc(), 0xbe36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe35), 0x4c);
        // 4C 02AD
        gbc.setState(0x4646, 0xde9a, 0x37d0, 0x9980, 0xc689, 0xd413, 0x0, 0x1);
        gbc.writeMem(0x4646, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xde9a);
        EXPECT(gbc.pc(), 0x4647);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02AE
        gbc.setState(0xef40, 0x611d, 0x26d0, 0x73c5, 0x71c3, 0x76b7, 0x1, 0x1);
        gbc.writeMem(0xef40, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x611d);
        EXPECT(gbc.pc(), 0xef41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef40), 0x4c);
        // 4C 02AF
        gbc.setState(0x23ec, 0xfec7, 0x3220, 0xee0d, 0xa6c2, 0xc8d, 0x0, 0x1);
        gbc.writeMem(0x23ec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xfec7);
        EXPECT(gbc.pc(), 0x23ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02B0
        gbc.setState(0xdb90, 0x3955, 0x75b0, 0x3d9, 0x2eeb, 0x2f46, 0x1, 0x0);
        gbc.writeMem(0xdb90, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x3955);
        EXPECT(gbc.pc(), 0xdb91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb90), 0x4c);
        // 4C 02B1
        gbc.setState(0x9869, 0x6e80, 0xe710, 0x4c4f, 0x98aa, 0x8b9e, 0x1, 0x0);
        gbc.writeMem(0x9869, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x6e80);
        EXPECT(gbc.pc(), 0x986a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9869), 0x4c);
        // 4C 02B2
        gbc.setState(0x53a2, 0x1ddd, 0x8ab0, 0xfd9b, 0xaa4e, 0x880c, 0x1, 0x1);
        gbc.writeMem(0x53a2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x1ddd);
        EXPECT(gbc.pc(), 0x53a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02B4
        gbc.setState(0x4c78, 0xebd4, 0x1d20, 0xefed, 0x719f, 0x23c7, 0x1, 0x1);
        gbc.writeMem(0x4c78, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xebd4);
        EXPECT(gbc.pc(), 0x4c79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02B5
        gbc.setState(0x99e1, 0x5120, 0x37a0, 0xee6f, 0xd3d0, 0xe582, 0x0, 0x0);
        gbc.writeMem(0x99e1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x5120);
        EXPECT(gbc.pc(), 0x99e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e1), 0x4c);
        // 4C 02B6
        gbc.setState(0x5050, 0x24d5, 0xa690, 0x9174, 0xde6b, 0x199f, 0x1, 0x1);
        gbc.writeMem(0x5050, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x24d5);
        EXPECT(gbc.pc(), 0x5051);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02B7
        gbc.setState(0x8cdf, 0xf882, 0x5fe0, 0x12b9, 0x278b, 0xec75, 0x0, 0x0);
        gbc.writeMem(0x8cdf, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xf882);
        EXPECT(gbc.pc(), 0x8ce0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cdf), 0x4c);
        // 4C 02B8
        gbc.setState(0xd1a4, 0xcb4a, 0xe100, 0xf35d, 0x4fe1, 0xb880, 0x0, 0x0);
        gbc.writeMem(0xd1a4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xcb4a);
        EXPECT(gbc.pc(), 0xd1a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1a4), 0x4c);
        // 4C 02B9
        gbc.setState(0x139b, 0x8bfb, 0x58a0, 0x7d9a, 0x8100, 0x5e73, 0x1, 0x0);
        gbc.writeMem(0x139b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8bfb);
        EXPECT(gbc.pc(), 0x139c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02BB
        gbc.setState(0x7dfe, 0x4be7, 0x3090, 0xf5c2, 0xaa0e, 0x1cdc, 0x1, 0x0);
        gbc.writeMem(0x7dfe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x4be7);
        EXPECT(gbc.pc(), 0x7dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02BC
        gbc.setState(0x2387, 0xe69c, 0xb5e0, 0xd7d3, 0xb84b, 0x7cd2, 0x0, 0x1);
        gbc.writeMem(0x2387, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xe69c);
        EXPECT(gbc.pc(), 0x2388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02BD
        gbc.setState(0x5bd, 0x8974, 0x16a0, 0x7bc0, 0xd4a8, 0x8759, 0x0, 0x0);
        gbc.writeMem(0x5bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8974);
        EXPECT(gbc.pc(), 0x5be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02BE
        gbc.setState(0x9e, 0x8e4f, 0x2140, 0x9635, 0xe9e3, 0x42d2, 0x1, 0x0);
        gbc.writeMem(0x9e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8e4f);
        EXPECT(gbc.pc(), 0x9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02BF
        gbc.setState(0x94d3, 0xa1d, 0xc300, 0x9b66, 0xb539, 0x23a9, 0x0, 0x0);
        gbc.writeMem(0x94d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa1d);
        EXPECT(gbc.pc(), 0x94d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94d3), 0x4c);
        // 4C 02C0
        gbc.setState(0xe1f0, 0xa379, 0x2600, 0x68f6, 0x7835, 0x18f, 0x0, 0x0);
        gbc.writeMem(0xe1f0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xa379);
        EXPECT(gbc.pc(), 0xe1f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1f0), 0x4c);
        // 4C 02C1
        gbc.setState(0xc208, 0x3c96, 0xdf10, 0x6f28, 0x29fd, 0xa89a, 0x1, 0x0);
        gbc.writeMem(0xc208, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3c96);
        EXPECT(gbc.pc(), 0xc209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc208), 0x4c);
        // 4C 02C2
        gbc.setState(0xbfb0, 0x4e46, 0xd530, 0x9175, 0x2c7e, 0x55f1, 0x0, 0x1);
        gbc.writeMem(0xbfb0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4e46);
        EXPECT(gbc.pc(), 0xbfb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb0), 0x4c);
        // 4C 02C3
        gbc.setState(0xe2d3, 0x1df0, 0x19c0, 0xfa01, 0xb56d, 0x1462, 0x1, 0x1);
        gbc.writeMem(0xe2d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x1df0);
        EXPECT(gbc.pc(), 0xe2d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2d3), 0x4c);
        // 4C 02C4
        gbc.setState(0x6eee, 0x50af, 0xd50, 0x5ddc, 0x9612, 0x87b5, 0x0, 0x0);
        gbc.writeMem(0x6eee, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x50af);
        EXPECT(gbc.pc(), 0x6eef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02C5
        gbc.setState(0xe470, 0xfdd6, 0x6dd0, 0x20d5, 0xa2e5, 0x262, 0x0, 0x1);
        gbc.writeMem(0xe470, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfdd6);
        EXPECT(gbc.pc(), 0xe471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe470), 0x4c);
        // 4C 02C7
        gbc.setState(0x8c0f, 0xcb98, 0xa010, 0xef24, 0x523a, 0x40e5, 0x0, 0x1);
        gbc.writeMem(0x8c0f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xcb98);
        EXPECT(gbc.pc(), 0x8c10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c0f), 0x4c);
        // 4C 02C8
        gbc.setState(0xb254, 0x7587, 0xdab0, 0xb26e, 0x7cba, 0xb996, 0x0, 0x0);
        gbc.writeMem(0xb254, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x7587);
        EXPECT(gbc.pc(), 0xb255);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb254), 0x4c);
        // 4C 02C9
        gbc.setState(0x225b, 0x3baa, 0x1800, 0x606a, 0xe6e0, 0xa612, 0x1, 0x0);
        gbc.writeMem(0x225b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3baa);
        EXPECT(gbc.pc(), 0x225c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02CA
        gbc.setState(0xc94d, 0x198c, 0x77c0, 0xa186, 0x44a6, 0x6d2d, 0x0, 0x1);
        gbc.writeMem(0xc94d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x198c);
        EXPECT(gbc.pc(), 0xc94e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94d), 0x4c);
        // 4C 02CB
        gbc.setState(0x496d, 0xb64f, 0xe380, 0xc92b, 0x5ac, 0x69c5, 0x0, 0x0);
        gbc.writeMem(0x496d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xb64f);
        EXPECT(gbc.pc(), 0x496e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02CC
        gbc.setState(0xd4d1, 0x9fcb, 0x6be0, 0xc12e, 0x9160, 0x8934, 0x0, 0x0);
        gbc.writeMem(0xd4d1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9fcb);
        EXPECT(gbc.pc(), 0xd4d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d1), 0x4c);
        // 4C 02CD
        gbc.setState(0x128c, 0x3986, 0x7c90, 0xd136, 0x1186, 0x43af, 0x1, 0x0);
        gbc.writeMem(0x128c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x3986);
        EXPECT(gbc.pc(), 0x128d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02CE
        gbc.setState(0xc892, 0xf28a, 0x3220, 0x93a5, 0xe1e9, 0x29ca, 0x0, 0x0);
        gbc.writeMem(0xc892, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0xf28a);
        EXPECT(gbc.pc(), 0xc893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc892), 0x4c);
        // 4C 02CF
        gbc.setState(0x9045, 0xbe7, 0xeec0, 0xed3f, 0xbd2d, 0x2059, 0x0, 0x0);
        gbc.writeMem(0x9045, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbe7);
        EXPECT(gbc.pc(), 0x9046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9045), 0x4c);
        // 4C 02D0
        gbc.setState(0xc27a, 0x459d, 0x8380, 0x541e, 0x979c, 0x1095, 0x1, 0x0);
        gbc.writeMem(0xc27a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x459d);
        EXPECT(gbc.pc(), 0xc27b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc27a), 0x4c);
        // 4C 02D1
        gbc.setState(0x5ed5, 0xbab8, 0xbb0, 0xf63, 0xc1cd, 0x73e3, 0x1, 0x0);
        gbc.writeMem(0x5ed5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xbab8);
        EXPECT(gbc.pc(), 0x5ed6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02D2
        gbc.setState(0x75cd, 0x2ca3, 0xd960, 0xbd61, 0x439e, 0x8f0c, 0x0, 0x1);
        gbc.writeMem(0x75cd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x2ca3);
        EXPECT(gbc.pc(), 0x75ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02D3
        gbc.setState(0x42e3, 0xb53, 0xff30, 0x6ce3, 0x8a34, 0xb526, 0x1, 0x1);
        gbc.writeMem(0x42e3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb53);
        EXPECT(gbc.pc(), 0x42e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02D4
        gbc.setState(0x372f, 0xc947, 0x1c0, 0x6743, 0xf9b5, 0x8a39, 0x1, 0x1);
        gbc.writeMem(0x372f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xc947);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02D5
        gbc.setState(0xc934, 0x6f96, 0xfc10, 0x5508, 0x39e7, 0xdd18, 0x0, 0x1);
        gbc.writeMem(0xc934, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x6f96);
        EXPECT(gbc.pc(), 0xc935);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc934), 0x4c);
        // 4C 02D6
        gbc.setState(0x47fb, 0x5079, 0x7fd0, 0xc272, 0x4595, 0xb0a6, 0x1, 0x0);
        gbc.writeMem(0x47fb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x5079);
        EXPECT(gbc.pc(), 0x47fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02D7
        gbc.setState(0xb431, 0x6078, 0x13c0, 0x3988, 0x65cc, 0xe966, 0x1, 0x0);
        gbc.writeMem(0xb431, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x6078);
        EXPECT(gbc.pc(), 0xb432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb431), 0x4c);
        // 4C 02D8
        gbc.setState(0x52bd, 0x7898, 0x32c0, 0x40c2, 0x1b04, 0x81a, 0x1, 0x1);
        gbc.writeMem(0x52bd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x7898);
        EXPECT(gbc.pc(), 0x52be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02D9
        gbc.setState(0x4b8b, 0x1a25, 0x5050, 0x7bed, 0xe002, 0xab2c, 0x0, 0x1);
        gbc.writeMem(0x4b8b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1a25);
        EXPECT(gbc.pc(), 0x4b8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02DA
        gbc.setState(0xa808, 0xa2eb, 0xa360, 0xf8f9, 0x2358, 0x4333, 0x1, 0x0);
        gbc.writeMem(0xa808, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xa2eb);
        EXPECT(gbc.pc(), 0xa809);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa808), 0x4c);
        // 4C 02DB
        gbc.setState(0xaf68, 0x85f9, 0xcd40, 0xd720, 0x65f, 0x1bba, 0x1, 0x0);
        gbc.writeMem(0xaf68, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x85f9);
        EXPECT(gbc.pc(), 0xaf69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf68), 0x4c);
        // 4C 02DC
        gbc.setState(0xa961, 0x84cf, 0x8d70, 0x4ad7, 0x4a8a, 0x211b, 0x0, 0x1);
        gbc.writeMem(0xa961, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x84cf);
        EXPECT(gbc.pc(), 0xa962);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa961), 0x4c);
        // 4C 02DD
        gbc.setState(0xce37, 0xce51, 0x1780, 0x1a07, 0x2df5, 0x8f37, 0x0, 0x0);
        gbc.writeMem(0xce37, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xce51);
        EXPECT(gbc.pc(), 0xce38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce37), 0x4c);
        // 4C 02DE
        gbc.setState(0x3425, 0xeb43, 0x8430, 0x1227, 0xfd9d, 0xe627, 0x1, 0x0);
        gbc.writeMem(0x3425, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xeb43);
        EXPECT(gbc.pc(), 0x3426);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02DF
        gbc.setState(0xad72, 0x8f3e, 0x41c0, 0xcd95, 0x8e6c, 0x29f5, 0x1, 0x0);
        gbc.writeMem(0xad72, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x8f3e);
        EXPECT(gbc.pc(), 0xad73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad72), 0x4c);
        // 4C 02E0
        gbc.setState(0x1a00, 0x7646, 0xbe40, 0xb45d, 0x83c3, 0x158e, 0x1, 0x1);
        gbc.writeMem(0x1a00, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7646);
        EXPECT(gbc.pc(), 0x1a01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02E1
        gbc.setState(0x3be7, 0x20da, 0x7f80, 0xc5f5, 0xaa2b, 0xb66f, 0x0, 0x0);
        gbc.writeMem(0x3be7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x20da);
        EXPECT(gbc.pc(), 0x3be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02E2
        gbc.setState(0xe93e, 0x38fd, 0x9b30, 0x2e15, 0x3758, 0x40fd, 0x0, 0x0);
        gbc.writeMem(0xe93e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x38fd);
        EXPECT(gbc.pc(), 0xe93f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe93e), 0x4c);
        // 4C 02E3
        gbc.setState(0xdfd2, 0x8cd8, 0xb070, 0xd092, 0x64a4, 0xb608, 0x0, 0x0);
        gbc.writeMem(0xdfd2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x8cd8);
        EXPECT(gbc.pc(), 0xdfd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdfd2), 0x4c);
        // 4C 02E4
        gbc.setState(0xa2f0, 0x3f91, 0x6110, 0x5966, 0xf1b8, 0x3a3a, 0x1, 0x1);
        gbc.writeMem(0xa2f0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3f91);
        EXPECT(gbc.pc(), 0xa2f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2f0), 0x4c);
        // 4C 02E5
        gbc.setState(0x98f9, 0x535a, 0x2d70, 0x836c, 0x6c14, 0x99e5, 0x1, 0x1);
        gbc.writeMem(0x98f9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x535a);
        EXPECT(gbc.pc(), 0x98fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98f9), 0x4c);
        // 4C 02E6
        gbc.setState(0x21e8, 0xd68e, 0x7fd0, 0x2136, 0xdf99, 0xa500, 0x0, 0x0);
        gbc.writeMem(0x21e8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd68e);
        EXPECT(gbc.pc(), 0x21e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02E7
        gbc.setState(0x92c5, 0x66f1, 0x27e0, 0xb279, 0x301, 0x3f15, 0x1, 0x0);
        gbc.writeMem(0x92c5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x66f1);
        EXPECT(gbc.pc(), 0x92c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92c5), 0x4c);
        // 4C 02E8
        gbc.setState(0x59f2, 0xea8e, 0xa440, 0xab6e, 0xf1b0, 0xb880, 0x1, 0x0);
        gbc.writeMem(0x59f2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xea8e);
        EXPECT(gbc.pc(), 0x59f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02E9
        gbc.setState(0x649e, 0xa727, 0x7760, 0xd597, 0xa51a, 0xb3a0, 0x1, 0x1);
        gbc.writeMem(0x649e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa727);
        EXPECT(gbc.pc(), 0x649f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02EA
        gbc.setState(0xdbe2, 0x861b, 0xadb0, 0x397c, 0x88df, 0xc0ce, 0x1, 0x0);
        gbc.writeMem(0xdbe2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x861b);
        EXPECT(gbc.pc(), 0xdbe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe2), 0x4c);
        // 4C 02EB
        gbc.setState(0xe2c8, 0xfe03, 0x5430, 0xbea5, 0xbcf1, 0xa4ce, 0x1, 0x0);
        gbc.writeMem(0xe2c8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0xe2c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe2c8), 0x4c);
        // 4C 02EC
        gbc.setState(0x5d27, 0x1774, 0xb10, 0x1427, 0x984, 0x202, 0x1, 0x0);
        gbc.writeMem(0x5d27, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1774);
        EXPECT(gbc.pc(), 0x5d28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02EE
        gbc.setState(0x58e7, 0xe0eb, 0xf700, 0xd18f, 0xbc01, 0xf48, 0x1, 0x1);
        gbc.writeMem(0x58e7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xe0eb);
        EXPECT(gbc.pc(), 0x58e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02EF
        gbc.setState(0x5465, 0x8903, 0xb130, 0x313e, 0x6a65, 0x44e, 0x0, 0x1);
        gbc.writeMem(0x5465, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8903);
        EXPECT(gbc.pc(), 0x5466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02F0
        gbc.setState(0x2e4e, 0x4264, 0x1290, 0x443f, 0x1a2, 0x4e95, 0x0, 0x0);
        gbc.writeMem(0x2e4e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x4264);
        EXPECT(gbc.pc(), 0x2e4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02F1
        gbc.setState(0x5ea8, 0xe35b, 0x7910, 0x36e5, 0x8edb, 0x3f62, 0x1, 0x0);
        gbc.writeMem(0x5ea8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xe35b);
        EXPECT(gbc.pc(), 0x5ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02F2
        gbc.setState(0xd24b, 0xad62, 0x24d0, 0x455, 0xd17e, 0xbf8a, 0x1, 0x0);
        gbc.writeMem(0xd24b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xad62);
        EXPECT(gbc.pc(), 0xd24c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd24b), 0x4c);
        // 4C 02F3
        gbc.setState(0x9385, 0x8949, 0x1100, 0xfb8d, 0xb3e4, 0x2868, 0x0, 0x1);
        gbc.writeMem(0x9385, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x8949);
        EXPECT(gbc.pc(), 0x9386);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9385), 0x4c);
        // 4C 02F4
        gbc.setState(0x6257, 0x43c, 0xf6a0, 0x6dd, 0xb46e, 0xfc62, 0x1, 0x0);
        gbc.writeMem(0x6257, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x43c);
        EXPECT(gbc.pc(), 0x6258);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02F5
        gbc.setState(0xdddc, 0xf3d2, 0x1790, 0x172e, 0xad27, 0xbddc, 0x0, 0x1);
        gbc.writeMem(0xdddc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf3d2);
        EXPECT(gbc.pc(), 0xdddd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdddc), 0x4c);
        // 4C 02F6
        gbc.setState(0x3bc5, 0x9ff3, 0xe370, 0xe940, 0x7442, 0xd3a9, 0x1, 0x1);
        gbc.writeMem(0x3bc5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x9ff3);
        EXPECT(gbc.pc(), 0x3bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 02F8
        gbc.setState(0xe98f, 0xbbaf, 0x8f60, 0x8ea9, 0x18ec, 0x662d, 0x0, 0x1);
        gbc.writeMem(0xe98f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xbbaf);
        EXPECT(gbc.pc(), 0xe990);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe98f), 0x4c);
        // 4C 02F9
        gbc.setState(0x6728, 0xfc96, 0x820, 0x321, 0x6deb, 0xf272, 0x0, 0x1);
        gbc.writeMem(0x6728, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xfc96);
        EXPECT(gbc.pc(), 0x6729);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02FA
        gbc.setState(0x4f73, 0xc4e4, 0x70c0, 0xb09d, 0x9879, 0xbd37, 0x1, 0x0);
        gbc.writeMem(0x4f73, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc4e4);
        EXPECT(gbc.pc(), 0x4f74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 02FB
        gbc.setState(0x7261, 0x532e, 0x69a0, 0xb673, 0xeadb, 0xb276, 0x0, 0x1);
        gbc.writeMem(0x7261, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x532e);
        EXPECT(gbc.pc(), 0x7262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 02FC
        gbc.setState(0x8667, 0xac1d, 0xf330, 0x1f3b, 0xc395, 0x3869, 0x1, 0x1);
        gbc.writeMem(0x8667, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xac1d);
        EXPECT(gbc.pc(), 0x8668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8667), 0x4c);
        // 4C 02FD
        gbc.setState(0x183, 0x5c1e, 0xf050, 0x9e03, 0x23d3, 0xd6e8, 0x0, 0x0);
        gbc.writeMem(0x183, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x5c1e);
        EXPECT(gbc.pc(), 0x184);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 02FE
        gbc.setState(0xd5ff, 0x4bab, 0xb550, 0xc8b1, 0xd464, 0xb196, 0x0, 0x1);
        gbc.writeMem(0xd5ff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4bab);
        EXPECT(gbc.pc(), 0xd600);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5ff), 0x4c);
        // 4C 02FF
        gbc.setState(0x794d, 0x329b, 0x9510, 0x48b1, 0x49dd, 0xd32d, 0x0, 0x0);
        gbc.writeMem(0x794d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x329b);
        EXPECT(gbc.pc(), 0x794e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0300
        gbc.setState(0x298d, 0x673e, 0x9be0, 0x8533, 0x7b2, 0x7647, 0x0, 0x1);
        gbc.writeMem(0x298d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x673e);
        EXPECT(gbc.pc(), 0x298e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0301
        gbc.setState(0x3a03, 0x6a0a, 0x7dc0, 0xfde0, 0x90c2, 0x2028, 0x1, 0x0);
        gbc.writeMem(0x3a03, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6a0a);
        EXPECT(gbc.pc(), 0x3a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0302
        gbc.setState(0x820e, 0x53ad, 0xf2d0, 0x24d3, 0x46ef, 0x89cf, 0x1, 0x1);
        gbc.writeMem(0x820e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x53ad);
        EXPECT(gbc.pc(), 0x820f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x820e), 0x4c);
        // 4C 0303
        gbc.setState(0x4465, 0xe748, 0xbd40, 0xb9b8, 0x21a4, 0x83c7, 0x0, 0x1);
        gbc.writeMem(0x4465, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe748);
        EXPECT(gbc.pc(), 0x4466);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0304
        gbc.setState(0x750d, 0x8d, 0x9c90, 0xf171, 0x9977, 0x646d, 0x0, 0x1);
        gbc.writeMem(0x750d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x8d);
        EXPECT(gbc.pc(), 0x750e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0305
        gbc.setState(0xba7a, 0xefae, 0x7a20, 0x98c8, 0xbea7, 0x6aaa, 0x1, 0x1);
        gbc.writeMem(0xba7a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xefae);
        EXPECT(gbc.pc(), 0xba7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7a), 0x4c);
        // 4C 0306
        gbc.setState(0x699f, 0x817e, 0xa0e0, 0x9054, 0x4ca3, 0xbe44, 0x1, 0x1);
        gbc.writeMem(0x699f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x817e);
        EXPECT(gbc.pc(), 0x69a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0307
        gbc.setState(0x6940, 0x8732, 0xeb10, 0xf8a3, 0x4f51, 0xbc3, 0x0, 0x0);
        gbc.writeMem(0x6940, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8732);
        EXPECT(gbc.pc(), 0x6941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0308
        gbc.setState(0x50b1, 0xcf8c, 0xa450, 0x8c1c, 0x4e25, 0xdf2e, 0x1, 0x1);
        gbc.writeMem(0x50b1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xcf8c);
        EXPECT(gbc.pc(), 0x50b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0309
        gbc.setState(0xc626, 0x68c8, 0x9b40, 0x778b, 0xf547, 0xefdb, 0x1, 0x0);
        gbc.writeMem(0xc626, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x68c8);
        EXPECT(gbc.pc(), 0xc627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc626), 0x4c);
        // 4C 030A
        gbc.setState(0xabe1, 0xf8f0, 0xe1d0, 0x29ce, 0x4e2e, 0x115c, 0x1, 0x0);
        gbc.writeMem(0xabe1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xf8f0);
        EXPECT(gbc.pc(), 0xabe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabe1), 0x4c);
        // 4C 030B
        gbc.setState(0xbb7f, 0x71b0, 0x9040, 0x8db, 0x8db9, 0x3736, 0x1, 0x1);
        gbc.writeMem(0xbb7f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x71b0);
        EXPECT(gbc.pc(), 0xbb80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb7f), 0x4c);
        // 4C 030C
        gbc.setState(0x7776, 0xb227, 0x34e0, 0x2424, 0x7c45, 0x61b1, 0x1, 0x0);
        gbc.writeMem(0x7776, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb227);
        EXPECT(gbc.pc(), 0x7777);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 030D
        gbc.setState(0x2c86, 0xe256, 0x750, 0xbc75, 0xc19c, 0xf774, 0x1, 0x1);
        gbc.writeMem(0x2c86, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe256);
        EXPECT(gbc.pc(), 0x2c87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 030F
        gbc.setState(0xbcba, 0x2450, 0x6370, 0x6076, 0xad77, 0xa594, 0x0, 0x1);
        gbc.writeMem(0xbcba, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2450);
        EXPECT(gbc.pc(), 0xbcbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcba), 0x4c);
        // 4C 0310
        gbc.setState(0x4569, 0xfb85, 0xc120, 0xe9ba, 0xd076, 0x499c, 0x0, 0x0);
        gbc.writeMem(0x4569, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xfb85);
        EXPECT(gbc.pc(), 0x456a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0311
        gbc.setState(0x8ae7, 0x68cd, 0xbf0, 0x5b89, 0x5b34, 0x124b, 0x0, 0x1);
        gbc.writeMem(0x8ae7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x68cd);
        EXPECT(gbc.pc(), 0x8ae8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ae7), 0x4c);
        // 4C 0312
        gbc.setState(0xaefd, 0xbc6, 0x2e50, 0x3283, 0xcfa7, 0xf3f8, 0x1, 0x1);
        gbc.writeMem(0xaefd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xbc6);
        EXPECT(gbc.pc(), 0xaefe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaefd), 0x4c);
        // 4C 0313
        gbc.setState(0x6c8c, 0x501a, 0x6a80, 0x7124, 0x76ee, 0xa184, 0x1, 0x1);
        gbc.writeMem(0x6c8c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x501a);
        EXPECT(gbc.pc(), 0x6c8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0314
        gbc.setState(0x8bdf, 0x2d30, 0x4480, 0x6d3d, 0xb31f, 0x324a, 0x1, 0x1);
        gbc.writeMem(0x8bdf, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2d30);
        EXPECT(gbc.pc(), 0x8be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bdf), 0x4c);
        // 4C 0315
        gbc.setState(0x5fad, 0xc1c5, 0x6030, 0x19cf, 0xf0a1, 0xf596, 0x1, 0x1);
        gbc.writeMem(0x5fad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xc1c5);
        EXPECT(gbc.pc(), 0x5fae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0316
        gbc.setState(0x15f, 0xe96a, 0xb7f0, 0x6e26, 0x2a97, 0xc275, 0x1, 0x1);
        gbc.writeMem(0x15f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xe96a);
        EXPECT(gbc.pc(), 0x160);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0318
        gbc.setState(0x73af, 0x3d79, 0x2350, 0xf50c, 0x2feb, 0x76e9, 0x0, 0x1);
        gbc.writeMem(0x73af, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3d79);
        EXPECT(gbc.pc(), 0x73b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0319
        gbc.setState(0xb203, 0x5bc1, 0x9230, 0x6115, 0x7df2, 0x563c, 0x1, 0x1);
        gbc.writeMem(0xb203, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x5bc1);
        EXPECT(gbc.pc(), 0xb204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb203), 0x4c);
        // 4C 031A
        gbc.setState(0xba3a, 0xe5cd, 0x7330, 0x3711, 0x7df8, 0x1560, 0x0, 0x1);
        gbc.writeMem(0xba3a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe5cd);
        EXPECT(gbc.pc(), 0xba3b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba3a), 0x4c);
        // 4C 031B
        gbc.setState(0xb80c, 0x63cd, 0x64a0, 0x5659, 0xd5f1, 0xf5b, 0x0, 0x1);
        gbc.writeMem(0xb80c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x63cd);
        EXPECT(gbc.pc(), 0xb80d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb80c), 0x4c);
        // 4C 031C
        gbc.setState(0x54, 0xa16a, 0x470, 0x5ea7, 0x4e17, 0xb714, 0x1, 0x0);
        gbc.writeMem(0x54, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa16a);
        EXPECT(gbc.pc(), 0x55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 031D
        gbc.setState(0xc235, 0xf462, 0x7cd0, 0x1bae, 0x6d12, 0x76ee, 0x0, 0x0);
        gbc.writeMem(0xc235, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xf462);
        EXPECT(gbc.pc(), 0xc236);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc235), 0x4c);
        // 4C 031E
        gbc.setState(0x973c, 0x60df, 0xccc0, 0x8d93, 0xda04, 0x8e07, 0x0, 0x0);
        gbc.writeMem(0x973c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x60df);
        EXPECT(gbc.pc(), 0x973d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x973c), 0x4c);
        // 4C 031F
        gbc.setState(0xee94, 0x5cea, 0x4920, 0xcf6b, 0xe66, 0x2400, 0x1, 0x0);
        gbc.writeMem(0xee94, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5cea);
        EXPECT(gbc.pc(), 0xee95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee94), 0x4c);
        // 4C 0320
        gbc.setState(0x36ff, 0x7d92, 0x1b50, 0xf44f, 0xef58, 0xc38b, 0x0, 0x1);
        gbc.writeMem(0x36ff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7d92);
        EXPECT(gbc.pc(), 0x3700);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0321
        gbc.setState(0xcdf3, 0x847b, 0xcf40, 0x3d2a, 0x7a5c, 0x8294, 0x1, 0x1);
        gbc.writeMem(0xcdf3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x847b);
        EXPECT(gbc.pc(), 0xcdf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdf3), 0x4c);
        // 4C 0322
        gbc.setState(0xaffb, 0x3217, 0xa080, 0x1f7e, 0xe0c, 0x3a4f, 0x0, 0x0);
        gbc.writeMem(0xaffb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x3217);
        EXPECT(gbc.pc(), 0xaffc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaffb), 0x4c);
        // 4C 0323
        gbc.setState(0x7834, 0xfdf4, 0x6a40, 0xdfde, 0x3018, 0xf4b2, 0x0, 0x1);
        gbc.writeMem(0x7834, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xfdf4);
        EXPECT(gbc.pc(), 0x7835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0324
        gbc.setState(0x9a6, 0xaf6, 0x5b0, 0xc1e4, 0xadcf, 0xc511, 0x1, 0x0);
        gbc.writeMem(0x9a6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xaf6);
        EXPECT(gbc.pc(), 0x9a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0325
        gbc.setState(0xed38, 0xf112, 0x2020, 0x286b, 0x455b, 0x4b54, 0x1, 0x1);
        gbc.writeMem(0xed38, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf112);
        EXPECT(gbc.pc(), 0xed39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed38), 0x4c);
        // 4C 0326
        gbc.setState(0x951a, 0x8346, 0xac40, 0xfbe4, 0x69b0, 0xe010, 0x1, 0x1);
        gbc.writeMem(0x951a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8346);
        EXPECT(gbc.pc(), 0x951b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951a), 0x4c);
        // 4C 0327
        gbc.setState(0x7ef1, 0xa525, 0x88d0, 0x3799, 0x36a, 0xfeb9, 0x0, 0x1);
        gbc.writeMem(0x7ef1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xa525);
        EXPECT(gbc.pc(), 0x7ef2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0328
        gbc.setState(0x8ebd, 0x240b, 0x38b0, 0x820d, 0x593b, 0x2471, 0x0, 0x0);
        gbc.writeMem(0x8ebd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x240b);
        EXPECT(gbc.pc(), 0x8ebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ebd), 0x4c);
        // 4C 0329
        gbc.setState(0x8d6d, 0xe4f4, 0x27c0, 0xe280, 0x534b, 0xb6a6, 0x1, 0x0);
        gbc.writeMem(0x8d6d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe4f4);
        EXPECT(gbc.pc(), 0x8d6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d6d), 0x4c);
        // 4C 032A
        gbc.setState(0xa469, 0x1582, 0xf680, 0x34fe, 0xe290, 0xb747, 0x1, 0x1);
        gbc.writeMem(0xa469, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x1582);
        EXPECT(gbc.pc(), 0xa46a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa469), 0x4c);
        // 4C 032B
        gbc.setState(0x605a, 0x8daa, 0x59f0, 0x5ff1, 0xaf16, 0xd8c3, 0x1, 0x1);
        gbc.writeMem(0x605a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x8daa);
        EXPECT(gbc.pc(), 0x605b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 032C
        gbc.setState(0x6d67, 0x768, 0x6d90, 0x7355, 0x8516, 0x59e, 0x0, 0x0);
        gbc.writeMem(0x6d67, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x768);
        EXPECT(gbc.pc(), 0x6d68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 032D
        gbc.setState(0x38a3, 0xfc45, 0x7b90, 0xefb5, 0xb3e2, 0xfb69, 0x1, 0x0);
        gbc.writeMem(0x38a3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xfc45);
        EXPECT(gbc.pc(), 0x38a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 032E
        gbc.setState(0xea54, 0x464e, 0x8860, 0xf5e0, 0x7fa0, 0xc9a7, 0x0, 0x1);
        gbc.writeMem(0xea54, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x464e);
        EXPECT(gbc.pc(), 0xea55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea54), 0x4c);
        // 4C 032F
        gbc.setState(0xa9a9, 0xad91, 0x84c0, 0xcda0, 0x8541, 0x3e32, 0x0, 0x0);
        gbc.writeMem(0xa9a9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xad91);
        EXPECT(gbc.pc(), 0xa9aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9a9), 0x4c);
        // 4C 0330
        gbc.setState(0x8ac7, 0xa105, 0x860, 0x994a, 0xcb0b, 0x3046, 0x0, 0x0);
        gbc.writeMem(0x8ac7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa105);
        EXPECT(gbc.pc(), 0x8ac8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ac7), 0x4c);
        // 4C 0331
        gbc.setState(0xab20, 0x3444, 0x37a0, 0x40e1, 0xb1b1, 0xff51, 0x0, 0x0);
        gbc.writeMem(0xab20, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x3444);
        EXPECT(gbc.pc(), 0xab21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab20), 0x4c);
        // 4C 0332
        gbc.setState(0xaee9, 0xcf6d, 0x1060, 0x6438, 0x1df3, 0x436e, 0x0, 0x0);
        gbc.writeMem(0xaee9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcf6d);
        EXPECT(gbc.pc(), 0xaeea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaee9), 0x4c);
        // 4C 0333
        gbc.setState(0x7407, 0xb58f, 0xa750, 0x7ec7, 0xfaf6, 0x5ee6, 0x0, 0x0);
        gbc.writeMem(0x7407, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xb58f);
        EXPECT(gbc.pc(), 0x7408);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0334
        gbc.setState(0x2c15, 0xc1ae, 0xa450, 0x7e73, 0x8afd, 0x6028, 0x0, 0x1);
        gbc.writeMem(0x2c15, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xc1ae);
        EXPECT(gbc.pc(), 0x2c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0335
        gbc.setState(0x5dd, 0x4d9c, 0x1700, 0x25d4, 0x2fd5, 0xd5dd, 0x1, 0x0);
        gbc.writeMem(0x5dd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x4d9c);
        EXPECT(gbc.pc(), 0x5de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0336
        gbc.setState(0x1690, 0xd985, 0x6e00, 0x18f7, 0xe91d, 0xf0ea, 0x0, 0x1);
        gbc.writeMem(0x1690, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd985);
        EXPECT(gbc.pc(), 0x1691);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0337
        gbc.setState(0x50b0, 0x47fa, 0xd000, 0xc137, 0xf10f, 0x612c, 0x0, 0x0);
        gbc.writeMem(0x50b0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x47fa);
        EXPECT(gbc.pc(), 0x50b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0338
        gbc.setState(0x4b9b, 0xe9ba, 0xc920, 0x93d5, 0x82ce, 0x841e, 0x0, 0x0);
        gbc.writeMem(0x4b9b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xe9ba);
        EXPECT(gbc.pc(), 0x4b9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0339
        gbc.setState(0x2b58, 0x72d9, 0x2300, 0x2924, 0x80e0, 0xbc74, 0x1, 0x0);
        gbc.writeMem(0x2b58, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x72d9);
        EXPECT(gbc.pc(), 0x2b59);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 033A
        gbc.setState(0x5e7b, 0xefbb, 0xa300, 0xaf0b, 0x4fe5, 0xa93, 0x0, 0x0);
        gbc.writeMem(0x5e7b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xefbb);
        EXPECT(gbc.pc(), 0x5e7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 033B
        gbc.setState(0x9ea4, 0xdfdd, 0xa060, 0x9e65, 0x57c8, 0x586a, 0x1, 0x0);
        gbc.writeMem(0x9ea4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xdfdd);
        EXPECT(gbc.pc(), 0x9ea5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ea4), 0x4c);
        // 4C 033D
        gbc.setState(0x466c, 0x6fcd, 0xb140, 0x1175, 0xaa3d, 0x3cee, 0x1, 0x1);
        gbc.writeMem(0x466c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x6fcd);
        EXPECT(gbc.pc(), 0x466d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 033E
        gbc.setState(0xd840, 0x2ca6, 0x9050, 0x153a, 0x721c, 0x1b61, 0x0, 0x1);
        gbc.writeMem(0xd840, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2ca6);
        EXPECT(gbc.pc(), 0xd841);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd840), 0x4c);
        // 4C 0340
        gbc.setState(0x9b24, 0xa26c, 0xf130, 0x34f2, 0x99e8, 0x8198, 0x1, 0x0);
        gbc.writeMem(0x9b24, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa26c);
        EXPECT(gbc.pc(), 0x9b25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b24), 0x4c);
        // 4C 0341
        gbc.setState(0x53fd, 0xfd09, 0x1af0, 0x4bc4, 0x9d6e, 0x5047, 0x1, 0x1);
        gbc.writeMem(0x53fd, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xfd09);
        EXPECT(gbc.pc(), 0x53fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0342
        gbc.setState(0xfa, 0xe0a1, 0xfc10, 0xe634, 0x233c, 0xcda1, 0x0, 0x0);
        gbc.writeMem(0xfa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xe0a1);
        EXPECT(gbc.pc(), 0xfb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0343
        gbc.setState(0x2f41, 0x588d, 0x38f0, 0xfb31, 0xdcc, 0xece3, 0x1, 0x0);
        gbc.writeMem(0x2f41, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x588d);
        EXPECT(gbc.pc(), 0x2f42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0344
        gbc.setState(0xcfed, 0x85c0, 0x1c60, 0xd21d, 0x95d2, 0x7af6, 0x1, 0x1);
        gbc.writeMem(0xcfed, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x85c0);
        EXPECT(gbc.pc(), 0xcfee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfed), 0x4c);
        // 4C 0345
        gbc.setState(0x9e69, 0xef27, 0x3120, 0xe571, 0xc393, 0xf46d, 0x0, 0x0);
        gbc.writeMem(0x9e69, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xef27);
        EXPECT(gbc.pc(), 0x9e6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e69), 0x4c);
        // 4C 0347
        gbc.setState(0xd88d, 0xc482, 0x6ee0, 0x3c96, 0x2f4c, 0xb658, 0x0, 0x0);
        gbc.writeMem(0xd88d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc482);
        EXPECT(gbc.pc(), 0xd88e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88d), 0x4c);
        // 4C 0348
        gbc.setState(0xbf9d, 0x4f17, 0xb420, 0xe72e, 0x5613, 0xc63b, 0x0, 0x0);
        gbc.writeMem(0xbf9d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4f17);
        EXPECT(gbc.pc(), 0xbf9e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf9d), 0x4c);
        // 4C 034A
        gbc.setState(0x455d, 0xe0a8, 0x5260, 0x59f2, 0xab88, 0x6b29, 0x0, 0x0);
        gbc.writeMem(0x455d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe0a8);
        EXPECT(gbc.pc(), 0x455e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 034B
        gbc.setState(0x64cf, 0x33e6, 0x1e10, 0x8ad7, 0xb01c, 0xc573, 0x1, 0x1);
        gbc.writeMem(0x64cf, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x33e6);
        EXPECT(gbc.pc(), 0x64d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 034D
        gbc.setState(0xad2a, 0xb52b, 0x4a40, 0xbee3, 0xa681, 0xa51e, 0x0, 0x0);
        gbc.writeMem(0xad2a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xb52b);
        EXPECT(gbc.pc(), 0xad2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2a), 0x4c);
        // 4C 034E
        gbc.setState(0x5cf2, 0x5e2d, 0xe900, 0x6a4, 0xdcc0, 0xdd9a, 0x0, 0x0);
        gbc.writeMem(0x5cf2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x5e2d);
        EXPECT(gbc.pc(), 0x5cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 034F
        gbc.setState(0x388b, 0x8d61, 0xce90, 0xdcba, 0x650d, 0x620e, 0x1, 0x1);
        gbc.writeMem(0x388b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8d61);
        EXPECT(gbc.pc(), 0x388c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0350
        gbc.setState(0x919a, 0x884f, 0xd260, 0xa0f3, 0x27da, 0x13a3, 0x1, 0x1);
        gbc.writeMem(0x919a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x884f);
        EXPECT(gbc.pc(), 0x919b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x919a), 0x4c);
        // 4C 0351
        gbc.setState(0x3df0, 0x60f4, 0x6bb0, 0x19ba, 0xab00, 0xa31c, 0x0, 0x1);
        gbc.writeMem(0x3df0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x60f4);
        EXPECT(gbc.pc(), 0x3df1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0352
        gbc.setState(0x38b2, 0xf1e3, 0x6ac0, 0xe227, 0xd221, 0x2904, 0x0, 0x1);
        gbc.writeMem(0x38b2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xf1e3);
        EXPECT(gbc.pc(), 0x38b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0353
        gbc.setState(0x546c, 0x8873, 0x1840, 0xee12, 0xf332, 0xc43e, 0x0, 0x0);
        gbc.writeMem(0x546c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8873);
        EXPECT(gbc.pc(), 0x546d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0354
        gbc.setState(0x4410, 0xe8ee, 0x2dc0, 0x399a, 0xfb69, 0xe44e, 0x1, 0x1);
        gbc.writeMem(0x4410, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe8ee);
        EXPECT(gbc.pc(), 0x4411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0355
        gbc.setState(0xb3ce, 0x41bd, 0xd730, 0xef46, 0xdfa5, 0xb49c, 0x1, 0x0);
        gbc.writeMem(0xb3ce, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x41bd);
        EXPECT(gbc.pc(), 0xb3cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3ce), 0x4c);
        // 4C 0356
        gbc.setState(0xc9c3, 0x2864, 0x8fa0, 0x372f, 0xb5cf, 0xd261, 0x1, 0x1);
        gbc.writeMem(0xc9c3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2864);
        EXPECT(gbc.pc(), 0xc9c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9c3), 0x4c);
        // 4C 0357
        gbc.setState(0x8a8a, 0x19b8, 0xf7c0, 0x6b0a, 0x7941, 0xe93b, 0x0, 0x0);
        gbc.writeMem(0x8a8a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x19b8);
        EXPECT(gbc.pc(), 0x8a8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a8a), 0x4c);
        // 4C 0358
        gbc.setState(0x5d95, 0xc6b0, 0xdb50, 0x2145, 0xda96, 0x2af1, 0x1, 0x1);
        gbc.writeMem(0x5d95, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc6b0);
        EXPECT(gbc.pc(), 0x5d96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0359
        gbc.setState(0x693f, 0xe86e, 0x35a0, 0x110a, 0xe292, 0x4673, 0x0, 0x0);
        gbc.writeMem(0x693f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xe86e);
        EXPECT(gbc.pc(), 0x6940);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 035A
        gbc.setState(0xdc39, 0x8f76, 0xd360, 0xb591, 0x778a, 0x869f, 0x1, 0x0);
        gbc.writeMem(0xdc39, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8f76);
        EXPECT(gbc.pc(), 0xdc3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc39), 0x4c);
        // 4C 035B
        gbc.setState(0xd016, 0x10fa, 0x3be0, 0xd7f, 0x27f0, 0xdc58, 0x1, 0x0);
        gbc.writeMem(0xd016, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x10fa);
        EXPECT(gbc.pc(), 0xd017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd016), 0x4c);
        // 4C 035C
        gbc.setState(0xa8ab, 0xadfa, 0x9530, 0xa850, 0x22d4, 0xa802, 0x1, 0x0);
        gbc.writeMem(0xa8ab, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xadfa);
        EXPECT(gbc.pc(), 0xa8ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ab), 0x4c);
        // 4C 035D
        gbc.setState(0xc608, 0x1e93, 0x8240, 0x2199, 0x8799, 0x99c4, 0x1, 0x1);
        gbc.writeMem(0xc608, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1e93);
        EXPECT(gbc.pc(), 0xc609);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc608), 0x4c);
        // 4C 035E
        gbc.setState(0x8128, 0xdafb, 0x1400, 0x383c, 0x6ef5, 0x7a2c, 0x0, 0x1);
        gbc.writeMem(0x8128, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xdafb);
        EXPECT(gbc.pc(), 0x8129);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8128), 0x4c);
        // 4C 035F
        gbc.setState(0x7b4b, 0xd2ba, 0xe6a0, 0x64f4, 0xd73a, 0xb049, 0x1, 0x0);
        gbc.writeMem(0x7b4b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xd2ba);
        EXPECT(gbc.pc(), 0x7b4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0360
        gbc.setState(0x5e44, 0x2a6e, 0x60b0, 0xee59, 0x45e5, 0x27eb, 0x1, 0x0);
        gbc.writeMem(0x5e44, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x2a6e);
        EXPECT(gbc.pc(), 0x5e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0361
        gbc.setState(0x9986, 0x4808, 0x1200, 0x50a, 0xb96f, 0xacb2, 0x0, 0x0);
        gbc.writeMem(0x9986, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4808);
        EXPECT(gbc.pc(), 0x9987);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9986), 0x4c);
        // 4C 0362
        gbc.setState(0xcd0d, 0x116a, 0x260, 0x9a18, 0xe347, 0xe8cc, 0x1, 0x0);
        gbc.writeMem(0xcd0d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x116a);
        EXPECT(gbc.pc(), 0xcd0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd0d), 0x4c);
        // 4C 0363
        gbc.setState(0x8f57, 0xe8a7, 0x3a20, 0x2ea2, 0xea05, 0xe2ff, 0x0, 0x0);
        gbc.writeMem(0x8f57, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xe8a7);
        EXPECT(gbc.pc(), 0x8f58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f57), 0x4c);
        // 4C 0364
        gbc.setState(0x79f7, 0x1f90, 0x3730, 0xb5be, 0x2234, 0xaa1, 0x0, 0x0);
        gbc.writeMem(0x79f7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1f90);
        EXPECT(gbc.pc(), 0x79f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0365
        gbc.setState(0x5c5c, 0x21c8, 0xbcf0, 0xe776, 0xc96e, 0xaba8, 0x0, 0x0);
        gbc.writeMem(0x5c5c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x21c8);
        EXPECT(gbc.pc(), 0x5c5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0366
        gbc.setState(0x344b, 0xb0b2, 0xae70, 0xf6c6, 0x3068, 0x7ae4, 0x0, 0x1);
        gbc.writeMem(0x344b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xb0b2);
        EXPECT(gbc.pc(), 0x344c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0367
        gbc.setState(0xde27, 0x5598, 0xe8b0, 0x605e, 0x24b8, 0x86f, 0x1, 0x1);
        gbc.writeMem(0xde27, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5598);
        EXPECT(gbc.pc(), 0xde28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde27), 0x4c);
        // 4C 0368
        gbc.setState(0x7ee0, 0x16c3, 0x1870, 0x352e, 0xfa98, 0xb0e6, 0x0, 0x0);
        gbc.writeMem(0x7ee0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x16c3);
        EXPECT(gbc.pc(), 0x7ee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0369
        gbc.setState(0x3e20, 0x8619, 0xa250, 0xdd2, 0xa6a6, 0x7fe4, 0x1, 0x0);
        gbc.writeMem(0x3e20, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x8619);
        EXPECT(gbc.pc(), 0x3e21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 036A
        gbc.setState(0xbac7, 0xb4f1, 0x2270, 0xd712, 0x6537, 0x61e9, 0x1, 0x1);
        gbc.writeMem(0xbac7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb4f1);
        EXPECT(gbc.pc(), 0xbac8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbac7), 0x4c);
        // 4C 036B
        gbc.setState(0x659f, 0xa10d, 0x2380, 0xe3e1, 0xc90e, 0xdefd, 0x0, 0x0);
        gbc.writeMem(0x659f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xa10d);
        EXPECT(gbc.pc(), 0x65a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 036C
        gbc.setState(0xef84, 0x3537, 0x3370, 0xcac7, 0x94db, 0x29e4, 0x0, 0x0);
        gbc.writeMem(0xef84, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3537);
        EXPECT(gbc.pc(), 0xef85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef84), 0x4c);
        // 4C 036D
        gbc.setState(0xeda2, 0xa53b, 0x99e0, 0x227, 0x77af, 0x2fb3, 0x1, 0x1);
        gbc.writeMem(0xeda2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xa53b);
        EXPECT(gbc.pc(), 0xeda3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeda2), 0x4c);
        // 4C 036E
        gbc.setState(0x59e4, 0x997e, 0xfe0, 0x6d79, 0x6150, 0x4b3b, 0x0, 0x0);
        gbc.writeMem(0x59e4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x997e);
        EXPECT(gbc.pc(), 0x59e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 036F
        gbc.setState(0xe408, 0x454f, 0xfa20, 0xf9a0, 0x3a91, 0xb7a2, 0x0, 0x1);
        gbc.writeMem(0xe408, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x454f);
        EXPECT(gbc.pc(), 0xe409);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe408), 0x4c);
        // 4C 0370
        gbc.setState(0x8753, 0x17a2, 0xb80, 0x78b0, 0x1158, 0x73a4, 0x0, 0x0);
        gbc.writeMem(0x8753, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x17a2);
        EXPECT(gbc.pc(), 0x8754);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8753), 0x4c);
        // 4C 0371
        gbc.setState(0xaf7b, 0x4925, 0x7ff0, 0xeaf0, 0xb0bd, 0xf24f, 0x1, 0x1);
        gbc.writeMem(0xaf7b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x4925);
        EXPECT(gbc.pc(), 0xaf7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf7b), 0x4c);
        // 4C 0372
        gbc.setState(0xea8b, 0x293c, 0xdef0, 0x9322, 0x232, 0x828b, 0x1, 0x1);
        gbc.writeMem(0xea8b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x293c);
        EXPECT(gbc.pc(), 0xea8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea8b), 0x4c);
        // 4C 0373
        gbc.setState(0xefc5, 0xfa3, 0x1720, 0x1b8e, 0x8603, 0xc0fb, 0x0, 0x0);
        gbc.writeMem(0xefc5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xfa3);
        EXPECT(gbc.pc(), 0xefc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefc5), 0x4c);
        // 4C 0374
        gbc.setState(0x4a6, 0x5249, 0xdf00, 0x52a1, 0xfff7, 0x5228, 0x1, 0x1);
        gbc.writeMem(0x4a6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x5249);
        EXPECT(gbc.pc(), 0x4a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0375
        gbc.setState(0x53b0, 0xefa4, 0x110, 0xcab6, 0xc030, 0x4749, 0x0, 0x0);
        gbc.writeMem(0x53b0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xefa4);
        EXPECT(gbc.pc(), 0x53b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0376
        gbc.setState(0x901f, 0xff3b, 0x7a90, 0x5d7e, 0x42a9, 0x8387, 0x0, 0x1);
        gbc.writeMem(0x901f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xff3b);
        EXPECT(gbc.pc(), 0x9020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x901f), 0x4c);
        // 4C 0377
        gbc.setState(0x4722, 0x460f, 0x1da0, 0x7c10, 0xd0f7, 0xb672, 0x0, 0x0);
        gbc.writeMem(0x4722, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x460f);
        EXPECT(gbc.pc(), 0x4723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 0379
        gbc.setState(0x688b, 0x792, 0x16d0, 0xaeee, 0x6b29, 0x1435, 0x0, 0x0);
        gbc.writeMem(0x688b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x792);
        EXPECT(gbc.pc(), 0x688c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 037A
        gbc.setState(0x834, 0x7fef, 0xd0c0, 0x4a30, 0x915b, 0xb45b, 0x1, 0x1);
        gbc.writeMem(0x834, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7fef);
        EXPECT(gbc.pc(), 0x835);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 037B
        gbc.setState(0x4951, 0x91c7, 0x5020, 0xaa5b, 0xc2d3, 0x7376, 0x1, 0x0);
        gbc.writeMem(0x4951, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x91c7);
        EXPECT(gbc.pc(), 0x4952);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 037C
        gbc.setState(0xd22f, 0x3891, 0xcc00, 0x26c2, 0x3d61, 0xa2c8, 0x0, 0x0);
        gbc.writeMem(0xd22f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3891);
        EXPECT(gbc.pc(), 0xd230);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd22f), 0x4c);
        // 4C 037D
        gbc.setState(0xccae, 0x130, 0x9c60, 0xf377, 0x9f5, 0x31bb, 0x1, 0x0);
        gbc.writeMem(0xccae, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x130);
        EXPECT(gbc.pc(), 0xccaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccae), 0x4c);
        // 4C 037E
        gbc.setState(0x63d5, 0xf4ae, 0xe040, 0x57fc, 0x3729, 0x43b4, 0x1, 0x1);
        gbc.writeMem(0x63d5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xf4ae);
        EXPECT(gbc.pc(), 0x63d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 037F
        gbc.setState(0xc70f, 0xb421, 0x9d10, 0x5e4d, 0x9780, 0x1c82, 0x0, 0x1);
        gbc.writeMem(0xc70f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb421);
        EXPECT(gbc.pc(), 0xc710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc70f), 0x4c);
        // 4C 0380
        gbc.setState(0xc9d3, 0x7469, 0x7c00, 0x4a72, 0xc90b, 0x77be, 0x1, 0x0);
        gbc.writeMem(0xc9d3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7469);
        EXPECT(gbc.pc(), 0xc9d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9d3), 0x4c);
        // 4C 0381
        gbc.setState(0x2fac, 0x976d, 0x6430, 0xf924, 0x53fe, 0xeccf, 0x1, 0x1);
        gbc.writeMem(0x2fac, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x976d);
        EXPECT(gbc.pc(), 0x2fad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0382
        gbc.setState(0x94fa, 0x8c97, 0xe600, 0x68e, 0x6e56, 0x1d9e, 0x0, 0x0);
        gbc.writeMem(0x94fa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x8c97);
        EXPECT(gbc.pc(), 0x94fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fa), 0x4c);
        // 4C 0383
        gbc.setState(0xbb4b, 0x2fc3, 0x95b0, 0x4e9b, 0x25e1, 0x738, 0x1, 0x1);
        gbc.writeMem(0xbb4b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2fc3);
        EXPECT(gbc.pc(), 0xbb4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb4b), 0x4c);
        // 4C 0384
        gbc.setState(0xb177, 0x4062, 0x1d60, 0xb00, 0x7dd2, 0x4a8b, 0x0, 0x0);
        gbc.writeMem(0xb177, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4062);
        EXPECT(gbc.pc(), 0xb178);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb177), 0x4c);
        // 4C 0385
        gbc.setState(0x73c2, 0xa250, 0x34c0, 0x2f4a, 0x9bb3, 0x98c3, 0x1, 0x0);
        gbc.writeMem(0x73c2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xa250);
        EXPECT(gbc.pc(), 0x73c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0386
        gbc.setState(0xa1d7, 0x94bb, 0x850, 0x331b, 0xc236, 0xebfd, 0x1, 0x0);
        gbc.writeMem(0xa1d7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x94bb);
        EXPECT(gbc.pc(), 0xa1d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d7), 0x4c);
        // 4C 0387
        gbc.setState(0xada5, 0x66d5, 0xcc70, 0x99d7, 0x276b, 0xfff, 0x1, 0x1);
        gbc.writeMem(0xada5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x66d5);
        EXPECT(gbc.pc(), 0xada6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xada5), 0x4c);
        // 4C 0388
        gbc.setState(0x6278, 0x4f4c, 0x8780, 0x1fb3, 0xcbb3, 0xe4e8, 0x1, 0x1);
        gbc.writeMem(0x6278, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x4f4c);
        EXPECT(gbc.pc(), 0x6279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 0389
        gbc.setState(0x795b, 0xfd46, 0x89e0, 0x6471, 0xd733, 0xf28a, 0x1, 0x1);
        gbc.writeMem(0x795b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xfd46);
        EXPECT(gbc.pc(), 0x795c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 038A
        gbc.setState(0x2452, 0xbca0, 0xf7d0, 0x86a3, 0x2ae2, 0x9e38, 0x1, 0x1);
        gbc.writeMem(0x2452, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xbca0);
        EXPECT(gbc.pc(), 0x2453);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 038B
        gbc.setState(0xadd3, 0x7009, 0xd6c0, 0xada2, 0xf923, 0x3eab, 0x1, 0x0);
        gbc.writeMem(0xadd3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x7009);
        EXPECT(gbc.pc(), 0xadd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadd3), 0x4c);
        // 4C 038C
        gbc.setState(0xb9aa, 0xaf95, 0xe7b0, 0x8376, 0xed8e, 0x264c, 0x1, 0x1);
        gbc.writeMem(0xb9aa, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xaf95);
        EXPECT(gbc.pc(), 0xb9ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9aa), 0x4c);
        // 4C 038D
        gbc.setState(0x45c, 0x6cfe, 0x31d0, 0xad02, 0xc3fa, 0xdde3, 0x1, 0x0);
        gbc.writeMem(0x45c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x6cfe);
        EXPECT(gbc.pc(), 0x45d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0390
        gbc.setState(0x70c9, 0x6a33, 0x2670, 0xd756, 0x1eb2, 0x89b3, 0x0, 0x1);
        gbc.writeMem(0x70c9, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x6a33);
        EXPECT(gbc.pc(), 0x70ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0391
        gbc.setState(0x466d, 0x7311, 0xc510, 0x3f35, 0x6770, 0xce19, 0x0, 0x1);
        gbc.writeMem(0x466d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7311);
        EXPECT(gbc.pc(), 0x466e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0392
        gbc.setState(0xac38, 0x13c0, 0x81d0, 0x807e, 0xff6d, 0x957f, 0x1, 0x0);
        gbc.writeMem(0xac38, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x13c0);
        EXPECT(gbc.pc(), 0xac39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac38), 0x4c);
        // 4C 0393
        gbc.setState(0x2600, 0x42ad, 0x58b0, 0x3cfe, 0xc739, 0x7ba1, 0x1, 0x0);
        gbc.writeMem(0x2600, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x42ad);
        EXPECT(gbc.pc(), 0x2601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 0394
        gbc.setState(0xc819, 0x72b7, 0x1f20, 0xf290, 0xb108, 0xe930, 0x1, 0x1);
        gbc.writeMem(0xc819, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x72b7);
        EXPECT(gbc.pc(), 0xc81a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc819), 0x4c);
        // 4C 0395
        gbc.setState(0x864b, 0xef6a, 0xf160, 0xf358, 0x6adc, 0x2f22, 0x0, 0x1);
        gbc.writeMem(0x864b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xef6a);
        EXPECT(gbc.pc(), 0x864c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x864b), 0x4c);
        // 4C 0396
        gbc.setState(0xd9b8, 0x8da4, 0xce40, 0x55d5, 0x1c68, 0x39d0, 0x0, 0x1);
        gbc.writeMem(0xd9b8, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x8da4);
        EXPECT(gbc.pc(), 0xd9b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b8), 0x4c);
        // 4C 0397
        gbc.setState(0x4e85, 0x74e, 0x6850, 0x834a, 0x3726, 0x3e57, 0x1, 0x1);
        gbc.writeMem(0x4e85, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x74e);
        EXPECT(gbc.pc(), 0x4e86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 0398
        gbc.setState(0xa37c, 0xb215, 0x9c50, 0x7725, 0xb9cb, 0x92ed, 0x1, 0x1);
        gbc.writeMem(0xa37c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xb215);
        EXPECT(gbc.pc(), 0xa37d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa37c), 0x4c);
        // 4C 0399
        gbc.setState(0x31ad, 0x981f, 0xcc60, 0x414b, 0x51ed, 0xfab7, 0x0, 0x1);
        gbc.writeMem(0x31ad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x981f);
        EXPECT(gbc.pc(), 0x31ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 039A
        gbc.setState(0xdb24, 0x3b53, 0x5c50, 0x9288, 0x386a, 0xae54, 0x0, 0x1);
        gbc.writeMem(0xdb24, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x3b53);
        EXPECT(gbc.pc(), 0xdb25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb24), 0x4c);
        // 4C 039B
        gbc.setState(0x73f7, 0x9ef7, 0x58c0, 0x5ecd, 0xf723, 0x67c4, 0x1, 0x1);
        gbc.writeMem(0x73f7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x9ef7);
        EXPECT(gbc.pc(), 0x73f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 039C
        gbc.setState(0xaa0a, 0xdf4a, 0x4e30, 0x1c15, 0x4efc, 0x4014, 0x1, 0x0);
        gbc.writeMem(0xaa0a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xdf4a);
        EXPECT(gbc.pc(), 0xaa0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa0a), 0x4c);
        // 4C 039D
        gbc.setState(0x1638, 0x3afa, 0x9760, 0x5971, 0xdf8d, 0xbd92, 0x1, 0x1);
        gbc.writeMem(0x1638, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x3afa);
        EXPECT(gbc.pc(), 0x1639);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 039E
        gbc.setState(0x8c80, 0xf985, 0x1c10, 0x2574, 0x89a4, 0x847d, 0x0, 0x1);
        gbc.writeMem(0x8c80, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xf985);
        EXPECT(gbc.pc(), 0x8c81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c80), 0x4c);
        // 4C 039F
        gbc.setState(0xc010, 0xba4f, 0x8090, 0x43fc, 0x9086, 0x3cfb, 0x1, 0x1);
        gbc.writeMem(0xc010, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xba4f);
        EXPECT(gbc.pc(), 0xc011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc010), 0x4c);
        // 4C 03A0
        gbc.setState(0x17d0, 0x1b6c, 0x6390, 0xa79f, 0xfe6b, 0xfd4c, 0x0, 0x1);
        gbc.writeMem(0x17d0, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x1b6c);
        EXPECT(gbc.pc(), 0x17d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03A1
        gbc.setState(0x5c96, 0x694c, 0x5b20, 0xc35a, 0x6f5, 0x6542, 0x1, 0x1);
        gbc.writeMem(0x5c96, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x694c);
        EXPECT(gbc.pc(), 0x5c97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03A2
        gbc.setState(0xa298, 0x34aa, 0x7440, 0x97a3, 0xa711, 0x599c, 0x1, 0x0);
        gbc.writeMem(0xa298, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x34aa);
        EXPECT(gbc.pc(), 0xa299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa298), 0x4c);
        // 4C 03A3
        gbc.setState(0x8cb4, 0xd41a, 0x4640, 0xf75, 0xa5a8, 0x6cc7, 0x1, 0x1);
        gbc.writeMem(0x8cb4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd41a);
        EXPECT(gbc.pc(), 0x8cb5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cb4), 0x4c);
        // 4C 03A4
        gbc.setState(0x8584, 0x86b4, 0x4830, 0x6470, 0x7190, 0x35c9, 0x0, 0x1);
        gbc.writeMem(0x8584, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x86b4);
        EXPECT(gbc.pc(), 0x8585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8584), 0x4c);
        // 4C 03A5
        gbc.setState(0x1622, 0xd0b9, 0xe020, 0xdaef, 0x43a2, 0x90d8, 0x0, 0x1);
        gbc.writeMem(0x1622, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd0b9);
        EXPECT(gbc.pc(), 0x1623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03A6
        gbc.setState(0x6c1, 0x7326, 0xd950, 0x2f73, 0x9234, 0x4656, 0x0, 0x1);
        gbc.writeMem(0x6c1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x7326);
        EXPECT(gbc.pc(), 0x6c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03A7
        gbc.setState(0x80be, 0x628a, 0x5ab0, 0xfd45, 0xe8c4, 0xc447, 0x1, 0x0);
        gbc.writeMem(0x80be, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x628a);
        EXPECT(gbc.pc(), 0x80bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80be), 0x4c);
        // 4C 03A8
        gbc.setState(0xb03a, 0x2271, 0xd280, 0x560e, 0x35b5, 0xe734, 0x1, 0x0);
        gbc.writeMem(0xb03a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x2271);
        EXPECT(gbc.pc(), 0xb03b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb03a), 0x4c);
        // 4C 03A9
        gbc.setState(0x3d63, 0xd816, 0x3190, 0x1c55, 0x3c1c, 0xa565, 0x0, 0x1);
        gbc.writeMem(0x3d63, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd816);
        EXPECT(gbc.pc(), 0x3d64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03AA
        gbc.setState(0xd75a, 0xfd15, 0xa680, 0x5f2f, 0x62a7, 0xb5f3, 0x1, 0x1);
        gbc.writeMem(0xd75a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xfd15);
        EXPECT(gbc.pc(), 0xd75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd75a), 0x4c);
        // 4C 03AB
        gbc.setState(0x1451, 0xf182, 0x9f60, 0x2eab, 0x8b76, 0xae35, 0x1, 0x0);
        gbc.writeMem(0x1451, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf182);
        EXPECT(gbc.pc(), 0x1452);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03AC
        gbc.setState(0x47c4, 0x7e79, 0xcee0, 0x399b, 0x767d, 0x49d3, 0x0, 0x0);
        gbc.writeMem(0x47c4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x7e79);
        EXPECT(gbc.pc(), 0x47c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03AD
        gbc.setState(0xe38b, 0xf10e, 0xe5e0, 0xc76f, 0x2a3d, 0xe07e, 0x1, 0x1);
        gbc.writeMem(0xe38b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xf10e);
        EXPECT(gbc.pc(), 0xe38c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe38b), 0x4c);
        // 4C 03AE
        gbc.setState(0xf44, 0x1e1d, 0xf660, 0x3835, 0xbee8, 0x609c, 0x1, 0x0);
        gbc.writeMem(0xf44, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x1e1d);
        EXPECT(gbc.pc(), 0xf45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03AF
        gbc.setState(0x419b, 0xc98f, 0x7750, 0xe9a4, 0x615e, 0x77d, 0x0, 0x0);
        gbc.writeMem(0x419b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc98f);
        EXPECT(gbc.pc(), 0x419c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03B0
        gbc.setState(0xdaec, 0x19fd, 0x9720, 0x91e2, 0xff75, 0x5706, 0x1, 0x1);
        gbc.writeMem(0xdaec, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x19fd);
        EXPECT(gbc.pc(), 0xdaed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaec), 0x4c);
        // 4C 03B1
        gbc.setState(0x5d30, 0x737b, 0x8560, 0xd663, 0x6704, 0xd101, 0x1, 0x1);
        gbc.writeMem(0x5d30, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x737b);
        EXPECT(gbc.pc(), 0x5d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03B2
        gbc.setState(0x23f5, 0x2a15, 0x89a0, 0xe64, 0x82ab, 0xb331, 0x1, 0x1);
        gbc.writeMem(0x23f5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x2a15);
        EXPECT(gbc.pc(), 0x23f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03B3
        gbc.setState(0x4c3d, 0x51b5, 0x4670, 0x2c18, 0x44d, 0x170b, 0x0, 0x0);
        gbc.writeMem(0x4c3d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x51b5);
        EXPECT(gbc.pc(), 0x4c3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03B4
        gbc.setState(0xa9ca, 0xeb3d, 0x1c00, 0x9761, 0x1a57, 0x7558, 0x1, 0x0);
        gbc.writeMem(0xa9ca, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xeb3d);
        EXPECT(gbc.pc(), 0xa9cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9ca), 0x4c);
        // 4C 03B5
        gbc.setState(0x728, 0x76bb, 0x6820, 0xa927, 0x1173, 0x95c2, 0x1, 0x1);
        gbc.writeMem(0x728, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x76bb);
        EXPECT(gbc.pc(), 0x729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03B6
        gbc.setState(0x2252, 0x5b8c, 0x8070, 0x3bde, 0xc975, 0x791a, 0x1, 0x1);
        gbc.writeMem(0x2252, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5b8c);
        EXPECT(gbc.pc(), 0x2253);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03B7
        gbc.setState(0x7f88, 0xee1b, 0x98f0, 0x26b0, 0xb30e, 0xeb74, 0x0, 0x0);
        gbc.writeMem(0x7f88, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xee1b);
        EXPECT(gbc.pc(), 0x7f89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03B8
        gbc.setState(0xdca4, 0xf370, 0xf720, 0x67ed, 0x3565, 0xd163, 0x1, 0x0);
        gbc.writeMem(0xdca4, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xf370);
        EXPECT(gbc.pc(), 0xdca5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdca4), 0x4c);
        // 4C 03B9
        gbc.setState(0x61f6, 0x3d01, 0x33b0, 0x2338, 0x363d, 0x3f6, 0x0, 0x1);
        gbc.writeMem(0x61f6, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x3d01);
        EXPECT(gbc.pc(), 0x61f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03BA
        gbc.setState(0x2f3f, 0xcdb4, 0x38b0, 0x62a6, 0x84ff, 0x3d4d, 0x0, 0x1);
        gbc.writeMem(0x2f3f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xcdb4);
        EXPECT(gbc.pc(), 0x2f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03BB
        gbc.setState(0x18ac, 0x501b, 0xb900, 0x20ae, 0x2ac4, 0xe209, 0x1, 0x0);
        gbc.writeMem(0x18ac, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x501b);
        EXPECT(gbc.pc(), 0x18ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03BC
        gbc.setState(0x66a, 0x1a9a, 0xfdd0, 0x7629, 0x879, 0xc7d9, 0x0, 0x0);
        gbc.writeMem(0x66a, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x1a9a);
        EXPECT(gbc.pc(), 0x66b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03BD
        gbc.setState(0x745c, 0x6f2, 0xb470, 0x70a8, 0x2193, 0x73ef, 0x1, 0x1);
        gbc.writeMem(0x745c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x6f2);
        EXPECT(gbc.pc(), 0x745d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03BE
        gbc.setState(0x6dff, 0x212a, 0x3e00, 0xf084, 0xbf5c, 0xda80, 0x0, 0x0);
        gbc.writeMem(0x6dff, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x212a);
        EXPECT(gbc.pc(), 0x6e00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03BF
        gbc.setState(0x1102, 0x790, 0x1fc0, 0x7cea, 0xcf02, 0x4cc5, 0x0, 0x0);
        gbc.writeMem(0x1102, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x790);
        EXPECT(gbc.pc(), 0x1103);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03C0
        gbc.setState(0x7ae1, 0x7503, 0x63d0, 0x7d10, 0xfea9, 0x46d6, 0x0, 0x1);
        gbc.writeMem(0x7ae1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7503);
        EXPECT(gbc.pc(), 0x7ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03C1
        gbc.setState(0xb13c, 0xa082, 0x7cf0, 0xbcb0, 0x3f78, 0xb57a, 0x0, 0x0);
        gbc.writeMem(0xb13c, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xa082);
        EXPECT(gbc.pc(), 0xb13d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb13c), 0x4c);
        // 4C 03C2
        gbc.setState(0xb358, 0x43c6, 0x9160, 0xb4c3, 0x1841, 0x76d7, 0x0, 0x0);
        gbc.writeMem(0xb358, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x43c6);
        EXPECT(gbc.pc(), 0xb359);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb358), 0x4c);
        // 4C 03C3
        gbc.setState(0x9f6f, 0xea3e, 0xe2e0, 0x71c3, 0xe5e2, 0xacee, 0x0, 0x0);
        gbc.writeMem(0x9f6f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xea3e);
        EXPECT(gbc.pc(), 0x9f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f6f), 0x4c);
        // 4C 03C4
        gbc.setState(0x94fc, 0x682d, 0xe540, 0x764c, 0x59a8, 0xdd34, 0x0, 0x1);
        gbc.writeMem(0x94fc, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x682d);
        EXPECT(gbc.pc(), 0x94fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fc), 0x4c);
        // 4C 03C5
        gbc.setState(0xd8fe, 0xbc31, 0x97d0, 0x8729, 0x3a92, 0x978, 0x1, 0x1);
        gbc.writeMem(0xd8fe, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xbc31);
        EXPECT(gbc.pc(), 0xd8ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8fe), 0x4c);
        // 4C 03C6
        gbc.setState(0xccb7, 0xf732, 0x1850, 0x9c95, 0x3120, 0x29ea, 0x0, 0x0);
        gbc.writeMem(0xccb7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf732);
        EXPECT(gbc.pc(), 0xccb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb7), 0x4c);
        // 4C 03C7
        gbc.setState(0x4846, 0xc6bb, 0xa300, 0x58e9, 0x792a, 0x4592, 0x1, 0x0);
        gbc.writeMem(0x4846, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc6bb);
        EXPECT(gbc.pc(), 0x4847);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03C8
        gbc.setState(0x7268, 0xe09f, 0x8860, 0x5305, 0x69c7, 0x8abb, 0x0, 0x0);
        gbc.writeMem(0x7268, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xe09f);
        EXPECT(gbc.pc(), 0x7269);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03C9
        gbc.setState(0x4623, 0x6e7d, 0x2e00, 0xea54, 0xd364, 0x20c, 0x1, 0x0);
        gbc.writeMem(0x4623, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x6e7d);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03CA
        gbc.setState(0x4f5e, 0xe2c2, 0x8b60, 0xa371, 0xeab1, 0x4074, 0x0, 0x1);
        gbc.writeMem(0x4f5e, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe2c2);
        EXPECT(gbc.pc(), 0x4f5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03CB
        gbc.setState(0x515f, 0x907e, 0x5d20, 0xd2a8, 0x56cb, 0x7b0c, 0x0, 0x0);
        gbc.writeMem(0x515f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x907e);
        EXPECT(gbc.pc(), 0x5160);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03CC
        gbc.setState(0x9d90, 0xf468, 0x6890, 0xdd73, 0x46f7, 0x42a, 0x0, 0x1);
        gbc.writeMem(0x9d90, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf468);
        EXPECT(gbc.pc(), 0x9d91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d90), 0x4c);
        // 4C 03CD
        gbc.setState(0xd5df, 0x4ba6, 0xaa40, 0x9f29, 0x902c, 0xd63f, 0x0, 0x1);
        gbc.writeMem(0xd5df, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x4ba6);
        EXPECT(gbc.pc(), 0xd5e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5df), 0x4c);
        // 4C 03CE
        gbc.setState(0x8af3, 0xd96, 0x1600, 0x8ef, 0x487a, 0xc24b, 0x0, 0x1);
        gbc.writeMem(0x8af3, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd96);
        EXPECT(gbc.pc(), 0x8af4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8af3), 0x4c);
        // 4C 03CF
        gbc.setState(0x510d, 0x8a3f, 0x7720, 0x9e92, 0xd12e, 0xa8f9, 0x1, 0x0);
        gbc.writeMem(0x510d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8a3f);
        EXPECT(gbc.pc(), 0x510e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D0
        gbc.setState(0xbb02, 0x1727, 0x8ac0, 0x3f28, 0x783c, 0xa21a, 0x1, 0x1);
        gbc.writeMem(0xbb02, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1727);
        EXPECT(gbc.pc(), 0xbb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb02), 0x4c);
        // 4C 03D1
        gbc.setState(0x3dc1, 0xddce, 0x97a0, 0xb52c, 0xe430, 0x2e1, 0x0, 0x1);
        gbc.writeMem(0x3dc1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xddce);
        EXPECT(gbc.pc(), 0x3dc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D2
        gbc.setState(0xda02, 0xeb5e, 0x6110, 0x284f, 0x4a2b, 0x14df, 0x0, 0x0);
        gbc.writeMem(0xda02, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xeb5e);
        EXPECT(gbc.pc(), 0xda03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda02), 0x4c);
        // 4C 03D3
        gbc.setState(0xee5f, 0x837c, 0xfd50, 0xf824, 0x8c0d, 0xb06, 0x0, 0x1);
        gbc.writeMem(0xee5f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x837c);
        EXPECT(gbc.pc(), 0xee60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee5f), 0x4c);
        // 4C 03D4
        gbc.setState(0x7355, 0x3bed, 0xb080, 0x448e, 0xf75d, 0x1f2e, 0x1, 0x1);
        gbc.writeMem(0x7355, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3bed);
        EXPECT(gbc.pc(), 0x7356);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D5
        gbc.setState(0x6d52, 0xe981, 0x1980, 0xb96b, 0x70ce, 0xf0cd, 0x1, 0x0);
        gbc.writeMem(0x6d52, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe981);
        EXPECT(gbc.pc(), 0x6d53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D6
        gbc.setState(0x4ff1, 0xcc36, 0xd6f0, 0xad90, 0x41a7, 0x9741, 0x0, 0x1);
        gbc.writeMem(0x4ff1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xcc36);
        EXPECT(gbc.pc(), 0x4ff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03D7
        gbc.setState(0x2dd7, 0x9e52, 0x40c0, 0xd464, 0x6e7f, 0x347b, 0x0, 0x1);
        gbc.writeMem(0x2dd7, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x9e52);
        EXPECT(gbc.pc(), 0x2dd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D8
        gbc.setState(0x7261, 0xc5aa, 0xa8c0, 0xe9a4, 0xf2c3, 0x28e1, 0x0, 0x0);
        gbc.writeMem(0x7261, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xc5aa);
        EXPECT(gbc.pc(), 0x7262);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03D9
        gbc.setState(0x9fad, 0x7be8, 0xc770, 0x90c0, 0x9ee6, 0x4a19, 0x1, 0x1);
        gbc.writeMem(0x9fad, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x7be8);
        EXPECT(gbc.pc(), 0x9fae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9fad), 0x4c);
        // 4C 03DA
        gbc.setState(0x3b2d, 0x1c05, 0x37b0, 0xfc5f, 0x8ba8, 0xbfdc, 0x0, 0x1);
        gbc.writeMem(0x3b2d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1c05);
        EXPECT(gbc.pc(), 0x3b2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03DB
        gbc.setState(0x1f76, 0xe6cf, 0xdc10, 0x7bdd, 0x5db7, 0xc411, 0x0, 0x0);
        gbc.writeMem(0x1f76, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xe6cf);
        EXPECT(gbc.pc(), 0x1f77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03DC
        gbc.setState(0xb82d, 0x3fc9, 0x9410, 0xf6d4, 0x9380, 0x816b, 0x0, 0x1);
        gbc.writeMem(0xb82d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x3fc9);
        EXPECT(gbc.pc(), 0xb82e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb82d), 0x4c);
        // 4C 03DD
        gbc.setState(0xcdf5, 0xd949, 0x7d90, 0xcc8e, 0x1163, 0x6e7b, 0x1, 0x0);
        gbc.writeMem(0xcdf5, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd949);
        EXPECT(gbc.pc(), 0xcdf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdf5), 0x4c);
        // 4C 03DE
        gbc.setState(0x3a14, 0xe38b, 0x3d60, 0xce65, 0x332b, 0x2970, 0x1, 0x0);
        gbc.writeMem(0x3a14, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe38b);
        EXPECT(gbc.pc(), 0x3a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 4C 03DF
        gbc.setState(0x98fb, 0x2f4d, 0xdb00, 0x8e2a, 0x916a, 0xe0b5, 0x1, 0x1);
        gbc.writeMem(0x98fb, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2f4d);
        EXPECT(gbc.pc(), 0x98fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98fb), 0x4c);
        // 4C 03E0
        gbc.setState(0x6915, 0x17d7, 0x1750, 0x23e5, 0xb070, 0x6a0b, 0x1, 0x0);
        gbc.writeMem(0x6915, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x17d7);
        EXPECT(gbc.pc(), 0x6916);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03E1
        gbc.setState(0x342f, 0x5c4b, 0xaa10, 0x469d, 0xb478, 0x9231, 0x0, 0x0);
        gbc.writeMem(0x342f, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5c4b);
        EXPECT(gbc.pc(), 0x3430);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03E2
        gbc.setState(0x1ea1, 0x1466, 0x8df0, 0x38d4, 0xacaf, 0x9933, 0x1, 0x1);
        gbc.writeMem(0x1ea1, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1466);
        EXPECT(gbc.pc(), 0x1ea2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 4C 03E3
        gbc.setState(0x8c15, 0xeaf1, 0xf950, 0x59a9, 0x3d8f, 0x34bb, 0x0, 0x1);
        gbc.writeMem(0x8c15, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xeaf1);
        EXPECT(gbc.pc(), 0x8c16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c15), 0x4c);
        // 4C 03E4
        gbc.setState(0xace2, 0x75e, 0x2e90, 0xc076, 0x36b2, 0xb2f3, 0x1, 0x1);
        gbc.writeMem(0xace2, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x75e);
        EXPECT(gbc.pc(), 0xace3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace2), 0x4c);
        // 4C 03E5
        gbc.setState(0x4c5b, 0x9fdf, 0x5300, 0x72cf, 0xc64c, 0x5441, 0x0, 0x0);
        gbc.writeMem(0x4c5b, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9fdf);
        EXPECT(gbc.pc(), 0x4c5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 4C 03E6
        gbc.setState(0x1bca, 0x97ca, 0xe790, 0x71d5, 0xbc74, 0xd3fb, 0x1, 0x0);
        gbc.writeMem(0x1bca, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x97ca);
        EXPECT(gbc.pc(), 0x1bcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 4C 03E7
        gbc.setState(0xb78d, 0x36e6, 0x7840, 0x8d5e, 0xe4a7, 0x3f10, 0x1, 0x0);
        gbc.writeMem(0xb78d, { 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x36e6);
        EXPECT(gbc.pc(), 0xb78e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb78d), 0x4c);
    }
}
#endif
