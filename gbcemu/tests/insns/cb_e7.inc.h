    TEST(gbcemu, opcode_cb_e7) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB E7 0000
        gbc.setState(0x1e69, 0xee70, 0xa1d0, 0x835, 0xea, 0xebc, 0x1, 0x1);
        gbc.writeMem(0x1e69, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xee70);
        EXPECT(gbc.pc(), 0x1e6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0001
        gbc.setState(0xee36, 0xfc88, 0xdfb0, 0xd261, 0xa974, 0x9ea8, 0x0, 0x0);
        gbc.writeMem(0xee36, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xfc88);
        EXPECT(gbc.pc(), 0xee38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee36), 0xcb);
        EXPECT(gbc.readMem(0xee37), 0xe7);
        // CB E7 0002
        gbc.setState(0x9b30, 0xf3fb, 0xfd50, 0x9cd6, 0x65bc, 0x6494, 0x1, 0x1);
        gbc.writeMem(0x9b30, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xf3fb);
        EXPECT(gbc.pc(), 0x9b32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b30), 0xcb);
        EXPECT(gbc.readMem(0x9b31), 0xe7);
        // CB E7 0003
        gbc.setState(0x84f2, 0x3d34, 0xf800, 0x2b97, 0x1aae, 0x689d, 0x0, 0x0);
        gbc.writeMem(0x84f2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x3d34);
        EXPECT(gbc.pc(), 0x84f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x84f2), 0xcb);
        EXPECT(gbc.readMem(0x84f3), 0xe7);
        // CB E7 0004
        gbc.setState(0xe0e8, 0xf565, 0xde20, 0x78ec, 0x66b5, 0x6f95, 0x1, 0x0);
        gbc.writeMem(0xe0e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf565);
        EXPECT(gbc.pc(), 0xe0ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e8), 0xcb);
        EXPECT(gbc.readMem(0xe0e9), 0xe7);
        // CB E7 0005
        gbc.setState(0x6f03, 0x184f, 0x8340, 0x598f, 0x55aa, 0xeab7, 0x0, 0x1);
        gbc.writeMem(0x6f03, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x184f);
        EXPECT(gbc.pc(), 0x6f05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0006
        gbc.setState(0xc6af, 0x7bf9, 0xc320, 0x9405, 0x8bc9, 0xa275, 0x1, 0x0);
        gbc.writeMem(0xc6af, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x7bf9);
        EXPECT(gbc.pc(), 0xc6b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6af), 0xcb);
        EXPECT(gbc.readMem(0xc6b0), 0xe7);
        // CB E7 0008
        gbc.setState(0x2df0, 0x170f, 0x6210, 0xf334, 0xb88f, 0x3007, 0x0, 0x0);
        gbc.writeMem(0x2df0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x170f);
        EXPECT(gbc.pc(), 0x2df2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0009
        gbc.setState(0x72e8, 0x9082, 0xd960, 0x93e9, 0x92f5, 0x16da, 0x1, 0x0);
        gbc.writeMem(0x72e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9082);
        EXPECT(gbc.pc(), 0x72ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 000A
        gbc.setState(0xd47c, 0x9669, 0xddb0, 0x26b2, 0xb979, 0xcb93, 0x1, 0x1);
        gbc.writeMem(0xd47c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x9669);
        EXPECT(gbc.pc(), 0xd47e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd47c), 0xcb);
        EXPECT(gbc.readMem(0xd47d), 0xe7);
        // CB E7 000B
        gbc.setState(0xdfba, 0x236b, 0xf440, 0x3392, 0x6714, 0x5c9e, 0x0, 0x1);
        gbc.writeMem(0xdfba, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x236b);
        EXPECT(gbc.pc(), 0xdfbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfba), 0xcb);
        EXPECT(gbc.readMem(0xdfbb), 0xe7);
        // CB E7 000C
        gbc.setState(0x6cfc, 0xb575, 0x7520, 0xf0a3, 0x7c41, 0xd2f8, 0x0, 0x1);
        gbc.writeMem(0x6cfc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xb575);
        EXPECT(gbc.pc(), 0x6cfe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 000D
        gbc.setState(0x40b3, 0xc4b, 0x2510, 0xae0c, 0x6798, 0x25fd, 0x0, 0x1);
        gbc.writeMem(0x40b3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc4b);
        EXPECT(gbc.pc(), 0x40b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 000E
        gbc.setState(0x4d33, 0x4ff1, 0xd3e0, 0xe749, 0x6a0d, 0xa1c9, 0x0, 0x1);
        gbc.writeMem(0x4d33, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4ff1);
        EXPECT(gbc.pc(), 0x4d35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 000F
        gbc.setState(0x1f32, 0x94cb, 0x2a0, 0x39b7, 0x9e2a, 0xcf38, 0x1, 0x0);
        gbc.writeMem(0x1f32, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x94cb);
        EXPECT(gbc.pc(), 0x1f34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0010
        gbc.setState(0xa3e4, 0x9eda, 0xb7e0, 0x859a, 0x9bde, 0x7dec, 0x1, 0x0);
        gbc.writeMem(0xa3e4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x9eda);
        EXPECT(gbc.pc(), 0xa3e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e4), 0xcb);
        EXPECT(gbc.readMem(0xa3e5), 0xe7);
        // CB E7 0011
        gbc.setState(0x98d5, 0x7ef8, 0x4530, 0x5732, 0xc2a7, 0xd4d6, 0x0, 0x0);
        gbc.writeMem(0x98d5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7ef8);
        EXPECT(gbc.pc(), 0x98d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98d5), 0xcb);
        EXPECT(gbc.readMem(0x98d6), 0xe7);
        // CB E7 0013
        gbc.setState(0xcfc7, 0x1ea1, 0x1f80, 0xc529, 0x5694, 0xa92b, 0x1, 0x0);
        gbc.writeMem(0xcfc7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x1ea1);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc7), 0xcb);
        EXPECT(gbc.readMem(0xcfc8), 0xe7);
        // CB E7 0014
        gbc.setState(0x6a9b, 0xb5e2, 0x33b0, 0x7333, 0xb9d2, 0x8d64, 0x1, 0x1);
        gbc.writeMem(0x6a9b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb5e2);
        EXPECT(gbc.pc(), 0x6a9d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0015
        gbc.setState(0x2b75, 0x4d86, 0x4820, 0x2ebb, 0xfc14, 0x3c36, 0x0, 0x0);
        gbc.writeMem(0x2b75, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x4d86);
        EXPECT(gbc.pc(), 0x2b77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0018
        gbc.setState(0xaaab, 0x1cb9, 0x2950, 0x2e0d, 0xbe0b, 0x7a74, 0x1, 0x1);
        gbc.writeMem(0xaaab, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1cb9);
        EXPECT(gbc.pc(), 0xaaad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaab), 0xcb);
        EXPECT(gbc.readMem(0xaaac), 0xe7);
        // CB E7 0019
        gbc.setState(0x3fde, 0xa228, 0x1d0, 0x9ef6, 0x38e7, 0x5572, 0x0, 0x0);
        gbc.writeMem(0x3fde, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa228);
        EXPECT(gbc.pc(), 0x3fe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 001A
        gbc.setState(0x547a, 0x622d, 0xa00, 0x2d9a, 0x7443, 0xf301, 0x1, 0x1);
        gbc.writeMem(0x547a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x622d);
        EXPECT(gbc.pc(), 0x547c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 001B
        gbc.setState(0x3603, 0x2b99, 0xf860, 0xf72b, 0xa5d2, 0x379e, 0x1, 0x1);
        gbc.writeMem(0x3603, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x2b99);
        EXPECT(gbc.pc(), 0x3605);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 001C
        gbc.setState(0x78f9, 0x5e2b, 0xbd00, 0xb1c4, 0x7bf5, 0x4f89, 0x1, 0x1);
        gbc.writeMem(0x78f9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5e2b);
        EXPECT(gbc.pc(), 0x78fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 001D
        gbc.setState(0x580, 0x94e9, 0xc110, 0xe393, 0x6470, 0x3538, 0x1, 0x1);
        gbc.writeMem(0x580, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x94e9);
        EXPECT(gbc.pc(), 0x582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 001E
        gbc.setState(0xdd0f, 0x67ca, 0x1e50, 0xdf16, 0xf657, 0x8637, 0x0, 0x0);
        gbc.writeMem(0xdd0f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x67ca);
        EXPECT(gbc.pc(), 0xdd11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd0f), 0xcb);
        EXPECT(gbc.readMem(0xdd10), 0xe7);
        // CB E7 001F
        gbc.setState(0x7ca8, 0x5acd, 0x20f0, 0x47b4, 0x2c37, 0x55dd, 0x0, 0x1);
        gbc.writeMem(0x7ca8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x5acd);
        EXPECT(gbc.pc(), 0x7caa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0020
        gbc.setState(0x5ddc, 0x5ea0, 0x170, 0x78b9, 0x670a, 0x1c52, 0x0, 0x0);
        gbc.writeMem(0x5ddc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5ea0);
        EXPECT(gbc.pc(), 0x5dde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0021
        gbc.setState(0x1cba, 0x5914, 0x110, 0xb14e, 0x37eb, 0x281b, 0x0, 0x1);
        gbc.writeMem(0x1cba, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5914);
        EXPECT(gbc.pc(), 0x1cbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0022
        gbc.setState(0x665e, 0x8922, 0x6080, 0x5dad, 0x481e, 0xfd5d, 0x0, 0x0);
        gbc.writeMem(0x665e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x8922);
        EXPECT(gbc.pc(), 0x6660);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0023
        gbc.setState(0x4530, 0x660, 0x2a90, 0xe500, 0x469f, 0x964e, 0x1, 0x0);
        gbc.writeMem(0x4530, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x660);
        EXPECT(gbc.pc(), 0x4532);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0024
        gbc.setState(0x69c, 0xd8cf, 0xbe0, 0x7331, 0xa7c3, 0x20d7, 0x1, 0x1);
        gbc.writeMem(0x69c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd8cf);
        EXPECT(gbc.pc(), 0x69e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0025
        gbc.setState(0xd76e, 0x3b2b, 0x9820, 0x40a6, 0xe98d, 0x2bff, 0x0, 0x0);
        gbc.writeMem(0xd76e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x3b2b);
        EXPECT(gbc.pc(), 0xd770);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd76e), 0xcb);
        EXPECT(gbc.readMem(0xd76f), 0xe7);
        // CB E7 0026
        gbc.setState(0x3ce, 0x607d, 0x1640, 0x24cc, 0x66f5, 0x139a, 0x0, 0x1);
        gbc.writeMem(0x3ce, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x607d);
        EXPECT(gbc.pc(), 0x3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0027
        gbc.setState(0x3ec7, 0x9134, 0x3990, 0x8987, 0x7308, 0xd375, 0x0, 0x0);
        gbc.writeMem(0x3ec7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x9134);
        EXPECT(gbc.pc(), 0x3ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0028
        gbc.setState(0xaa3e, 0xc216, 0x9a10, 0x9a31, 0x4316, 0x412c, 0x1, 0x0);
        gbc.writeMem(0xaa3e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xc216);
        EXPECT(gbc.pc(), 0xaa40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa3e), 0xcb);
        EXPECT(gbc.readMem(0xaa3f), 0xe7);
        // CB E7 0029
        gbc.setState(0x78c9, 0xf59e, 0xd790, 0x9507, 0x5a1d, 0x335, 0x1, 0x1);
        gbc.writeMem(0x78c9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xf59e);
        EXPECT(gbc.pc(), 0x78cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 002A
        gbc.setState(0x5703, 0x2592, 0x8ae0, 0x3e6d, 0xd540, 0xa035, 0x1, 0x1);
        gbc.writeMem(0x5703, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x2592);
        EXPECT(gbc.pc(), 0x5705);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 002B
        gbc.setState(0x32bc, 0xe67a, 0x5f60, 0xfcec, 0x3a76, 0x7dba, 0x0, 0x1);
        gbc.writeMem(0x32bc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xe67a);
        EXPECT(gbc.pc(), 0x32be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 002C
        gbc.setState(0x26a5, 0xfa81, 0xfdf0, 0x6082, 0x441c, 0x2d24, 0x1, 0x0);
        gbc.writeMem(0x26a5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfa81);
        EXPECT(gbc.pc(), 0x26a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 002D
        gbc.setState(0xc9b8, 0xab1d, 0x2af0, 0x6020, 0xd89, 0xd12b, 0x1, 0x0);
        gbc.writeMem(0xc9b8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xab1d);
        EXPECT(gbc.pc(), 0xc9ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b8), 0xcb);
        EXPECT(gbc.readMem(0xc9b9), 0xe7);
        // CB E7 002E
        gbc.setState(0xacdd, 0x632, 0xc2b0, 0x59ce, 0x9e71, 0x143e, 0x0, 0x0);
        gbc.writeMem(0xacdd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x632);
        EXPECT(gbc.pc(), 0xacdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacdd), 0xcb);
        EXPECT(gbc.readMem(0xacde), 0xe7);
        // CB E7 002F
        gbc.setState(0x8b52, 0x7daf, 0x1630, 0x6939, 0x8556, 0x17, 0x1, 0x0);
        gbc.writeMem(0x8b52, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x7daf);
        EXPECT(gbc.pc(), 0x8b54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b52), 0xcb);
        EXPECT(gbc.readMem(0x8b53), 0xe7);
        // CB E7 0030
        gbc.setState(0x2646, 0x5455, 0x5330, 0xfec6, 0x21d6, 0x711f, 0x0, 0x1);
        gbc.writeMem(0x2646, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x5455);
        EXPECT(gbc.pc(), 0x2648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0031
        gbc.setState(0x8f76, 0x65db, 0x4ec0, 0xdf49, 0x7d59, 0x53b5, 0x1, 0x1);
        gbc.writeMem(0x8f76, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x65db);
        EXPECT(gbc.pc(), 0x8f78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f76), 0xcb);
        EXPECT(gbc.readMem(0x8f77), 0xe7);
        // CB E7 0032
        gbc.setState(0x5121, 0x9f20, 0xcc30, 0xb0fc, 0x6a73, 0x7b49, 0x1, 0x0);
        gbc.writeMem(0x5121, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x9f20);
        EXPECT(gbc.pc(), 0x5123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0033
        gbc.setState(0xd6de, 0x4319, 0xaa50, 0xb3eb, 0x673a, 0x1552, 0x0, 0x1);
        gbc.writeMem(0xd6de, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4319);
        EXPECT(gbc.pc(), 0xd6e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6de), 0xcb);
        EXPECT(gbc.readMem(0xd6df), 0xe7);
        // CB E7 0034
        gbc.setState(0x6d98, 0x859f, 0x7090, 0xbb30, 0x1697, 0xea3b, 0x1, 0x1);
        gbc.writeMem(0x6d98, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x859f);
        EXPECT(gbc.pc(), 0x6d9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0036
        gbc.setState(0xd9b3, 0x4da7, 0x7360, 0x3506, 0xdfa2, 0x4d7c, 0x0, 0x0);
        gbc.writeMem(0xd9b3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x4da7);
        EXPECT(gbc.pc(), 0xd9b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd9b3), 0xcb);
        EXPECT(gbc.readMem(0xd9b4), 0xe7);
        // CB E7 0037
        gbc.setState(0xe4bf, 0xff7e, 0x27f0, 0x2816, 0xcb33, 0xd934, 0x1, 0x1);
        gbc.writeMem(0xe4bf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xff7e);
        EXPECT(gbc.pc(), 0xe4c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4bf), 0xcb);
        EXPECT(gbc.readMem(0xe4c0), 0xe7);
        // CB E7 0038
        gbc.setState(0x95e5, 0x130c, 0xb4e0, 0xabde, 0x5e8f, 0x815d, 0x1, 0x0);
        gbc.writeMem(0x95e5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x130c);
        EXPECT(gbc.pc(), 0x95e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95e5), 0xcb);
        EXPECT(gbc.readMem(0x95e6), 0xe7);
        // CB E7 0039
        gbc.setState(0xaaba, 0xfe90, 0xd7b0, 0xb8bd, 0x5ebc, 0x46cd, 0x1, 0x1);
        gbc.writeMem(0xaaba, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xfe90);
        EXPECT(gbc.pc(), 0xaabc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaaba), 0xcb);
        EXPECT(gbc.readMem(0xaabb), 0xe7);
        // CB E7 003A
        gbc.setState(0x21c1, 0x24df, 0x5020, 0x6ce0, 0x7d4f, 0xfb0d, 0x1, 0x1);
        gbc.writeMem(0x21c1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x24df);
        EXPECT(gbc.pc(), 0x21c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 003B
        gbc.setState(0x14db, 0xafc9, 0x4390, 0x38a7, 0xed3, 0xce0a, 0x0, 0x1);
        gbc.writeMem(0x14db, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xafc9);
        EXPECT(gbc.pc(), 0x14dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 003D
        gbc.setState(0x97cd, 0x8236, 0xf610, 0xc132, 0x83, 0xfc7a, 0x0, 0x1);
        gbc.writeMem(0x97cd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x8236);
        EXPECT(gbc.pc(), 0x97cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97cd), 0xcb);
        EXPECT(gbc.readMem(0x97ce), 0xe7);
        // CB E7 003E
        gbc.setState(0x1625, 0x79a5, 0x9350, 0xcf16, 0x2f5d, 0x3610, 0x1, 0x1);
        gbc.writeMem(0x1625, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x79a5);
        EXPECT(gbc.pc(), 0x1627);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 003F
        gbc.setState(0x9bdb, 0x973, 0x1530, 0x2eec, 0xab36, 0x4f15, 0x0, 0x1);
        gbc.writeMem(0x9bdb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x973);
        EXPECT(gbc.pc(), 0x9bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bdb), 0xcb);
        EXPECT(gbc.readMem(0x9bdc), 0xe7);
        // CB E7 0040
        gbc.setState(0x2261, 0x785d, 0x3d10, 0xae6, 0x9a6f, 0x87b7, 0x1, 0x0);
        gbc.writeMem(0x2261, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x785d);
        EXPECT(gbc.pc(), 0x2263);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0041
        gbc.setState(0x685c, 0x35c3, 0x5ab0, 0x3ee, 0x5095, 0xde01, 0x1, 0x1);
        gbc.writeMem(0x685c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x35c3);
        EXPECT(gbc.pc(), 0x685e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0042
        gbc.setState(0x88e5, 0x35ae, 0xa120, 0x2f4, 0x6782, 0xba, 0x1, 0x0);
        gbc.writeMem(0x88e5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x35ae);
        EXPECT(gbc.pc(), 0x88e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88e5), 0xcb);
        EXPECT(gbc.readMem(0x88e6), 0xe7);
        // CB E7 0044
        gbc.setState(0x51d7, 0x9671, 0x1970, 0x4e71, 0x7ea1, 0x6516, 0x0, 0x0);
        gbc.writeMem(0x51d7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9671);
        EXPECT(gbc.pc(), 0x51d9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0045
        gbc.setState(0x9e2b, 0xa957, 0x8fa0, 0xea5e, 0xb77b, 0xc2df, 0x0, 0x1);
        gbc.writeMem(0x9e2b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa957);
        EXPECT(gbc.pc(), 0x9e2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e2b), 0xcb);
        EXPECT(gbc.readMem(0x9e2c), 0xe7);
        // CB E7 0046
        gbc.setState(0xadfc, 0xf687, 0x2310, 0x64a9, 0xa3c4, 0x855e, 0x1, 0x0);
        gbc.writeMem(0xadfc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf687);
        EXPECT(gbc.pc(), 0xadfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xadfc), 0xcb);
        EXPECT(gbc.readMem(0xadfd), 0xe7);
        // CB E7 0047
        gbc.setState(0xcc18, 0x65ff, 0x4510, 0xb194, 0xc953, 0xe849, 0x1, 0x0);
        gbc.writeMem(0xcc18, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x65ff);
        EXPECT(gbc.pc(), 0xcc1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc18), 0xcb);
        EXPECT(gbc.readMem(0xcc19), 0xe7);
        // CB E7 0048
        gbc.setState(0x4a3b, 0x9097, 0x68a0, 0x3550, 0x6490, 0x85aa, 0x0, 0x1);
        gbc.writeMem(0x4a3b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x9097);
        EXPECT(gbc.pc(), 0x4a3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0049
        gbc.setState(0x9c21, 0x7457, 0x15e0, 0x3a0f, 0x6998, 0x7b42, 0x0, 0x1);
        gbc.writeMem(0x9c21, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x7457);
        EXPECT(gbc.pc(), 0x9c23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c21), 0xcb);
        EXPECT(gbc.readMem(0x9c22), 0xe7);
        // CB E7 004A
        gbc.setState(0xa0ec, 0xa5c0, 0x7580, 0x9738, 0x6742, 0xa41a, 0x1, 0x0);
        gbc.writeMem(0xa0ec, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xa5c0);
        EXPECT(gbc.pc(), 0xa0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ec), 0xcb);
        EXPECT(gbc.readMem(0xa0ed), 0xe7);
        // CB E7 004B
        gbc.setState(0x2b96, 0x325f, 0xb240, 0x9da2, 0x386f, 0xc9be, 0x1, 0x1);
        gbc.writeMem(0x2b96, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x325f);
        EXPECT(gbc.pc(), 0x2b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 004E
        gbc.setState(0x515, 0x30df, 0x9bb0, 0xf5e9, 0x85bb, 0xb44b, 0x0, 0x0);
        gbc.writeMem(0x515, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x30df);
        EXPECT(gbc.pc(), 0x517);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 004F
        gbc.setState(0x741b, 0xa4a9, 0x33c0, 0x6919, 0x58b, 0xc83, 0x1, 0x1);
        gbc.writeMem(0x741b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xa4a9);
        EXPECT(gbc.pc(), 0x741d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0050
        gbc.setState(0xbf3e, 0xd06a, 0xf060, 0x2678, 0xfd8b, 0xeba7, 0x1, 0x0);
        gbc.writeMem(0xbf3e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd06a);
        EXPECT(gbc.pc(), 0xbf40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf3e), 0xcb);
        EXPECT(gbc.readMem(0xbf3f), 0xe7);
        // CB E7 0051
        gbc.setState(0xdd9b, 0x398c, 0xdad0, 0x25d7, 0x7505, 0xa432, 0x0, 0x0);
        gbc.writeMem(0xdd9b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x398c);
        EXPECT(gbc.pc(), 0xdd9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd9b), 0xcb);
        EXPECT(gbc.readMem(0xdd9c), 0xe7);
        // CB E7 0052
        gbc.setState(0x1c2c, 0x4cb8, 0x60e0, 0xd445, 0xff46, 0x3a9b, 0x1, 0x1);
        gbc.writeMem(0x1c2c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4cb8);
        EXPECT(gbc.pc(), 0x1c2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0053
        gbc.setState(0x5ce7, 0x32dc, 0xa970, 0x453d, 0xe80b, 0xbc0, 0x1, 0x0);
        gbc.writeMem(0x5ce7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x32dc);
        EXPECT(gbc.pc(), 0x5ce9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0054
        gbc.setState(0x4988, 0xc099, 0x26a0, 0xe4a3, 0xab26, 0x2a02, 0x0, 0x0);
        gbc.writeMem(0x4988, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc099);
        EXPECT(gbc.pc(), 0x498a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0055
        gbc.setState(0xa5e2, 0x84b7, 0xa9b0, 0x2035, 0x29be, 0x2868, 0x0, 0x1);
        gbc.writeMem(0xa5e2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x84b7);
        EXPECT(gbc.pc(), 0xa5e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5e2), 0xcb);
        EXPECT(gbc.readMem(0xa5e3), 0xe7);
        // CB E7 0056
        gbc.setState(0x57d9, 0x8470, 0xa7e0, 0x9137, 0xcb08, 0xf131, 0x1, 0x1);
        gbc.writeMem(0x57d9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8470);
        EXPECT(gbc.pc(), 0x57db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0057
        gbc.setState(0x93ef, 0xb45e, 0xcf70, 0xe3aa, 0x82f8, 0x26b2, 0x0, 0x1);
        gbc.writeMem(0x93ef, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xb45e);
        EXPECT(gbc.pc(), 0x93f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ef), 0xcb);
        EXPECT(gbc.readMem(0x93f0), 0xe7);
        // CB E7 0058
        gbc.setState(0x152b, 0x299e, 0x6d90, 0x9692, 0x947a, 0x88d5, 0x1, 0x0);
        gbc.writeMem(0x152b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x299e);
        EXPECT(gbc.pc(), 0x152d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0059
        gbc.setState(0x48e5, 0x9484, 0x1660, 0x69ae, 0x82d7, 0x8a20, 0x1, 0x1);
        gbc.writeMem(0x48e5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9484);
        EXPECT(gbc.pc(), 0x48e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 005A
        gbc.setState(0xb425, 0x3df3, 0x7d60, 0xd512, 0xbc0d, 0x6a82, 0x0, 0x1);
        gbc.writeMem(0xb425, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x3df3);
        EXPECT(gbc.pc(), 0xb427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb425), 0xcb);
        EXPECT(gbc.readMem(0xb426), 0xe7);
        // CB E7 005B
        gbc.setState(0xcb76, 0x8cb7, 0xcee0, 0x26e8, 0xdc97, 0x4465, 0x1, 0x0);
        gbc.writeMem(0xcb76, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x8cb7);
        EXPECT(gbc.pc(), 0xcb78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb76), 0xcb);
        EXPECT(gbc.readMem(0xcb77), 0xe7);
        // CB E7 005C
        gbc.setState(0x6b73, 0x495d, 0x6a40, 0xe6af, 0xd2e9, 0x5d42, 0x0, 0x0);
        gbc.writeMem(0x6b73, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x495d);
        EXPECT(gbc.pc(), 0x6b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 005D
        gbc.setState(0x306d, 0x200e, 0x99f0, 0xa4ee, 0xc8db, 0x17c6, 0x1, 0x1);
        gbc.writeMem(0x306d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x200e);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 005E
        gbc.setState(0xd548, 0xba95, 0x68c0, 0x80d2, 0x2072, 0x69ee, 0x0, 0x1);
        gbc.writeMem(0xd548, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xba95);
        EXPECT(gbc.pc(), 0xd54a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd548), 0xcb);
        EXPECT(gbc.readMem(0xd549), 0xe7);
        // CB E7 005F
        gbc.setState(0xed1d, 0x113d, 0x7f70, 0x142a, 0x967d, 0x93e, 0x1, 0x0);
        gbc.writeMem(0xed1d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x113d);
        EXPECT(gbc.pc(), 0xed1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed1d), 0xcb);
        EXPECT(gbc.readMem(0xed1e), 0xe7);
        // CB E7 0060
        gbc.setState(0xa79d, 0x8251, 0xb8f0, 0x682f, 0x2eca, 0x88c6, 0x0, 0x1);
        gbc.writeMem(0xa79d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8251);
        EXPECT(gbc.pc(), 0xa79f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79d), 0xcb);
        EXPECT(gbc.readMem(0xa79e), 0xe7);
        // CB E7 0061
        gbc.setState(0xb6fc, 0x1796, 0xa20, 0x8241, 0xe4e7, 0xc6e1, 0x0, 0x1);
        gbc.writeMem(0xb6fc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x1796);
        EXPECT(gbc.pc(), 0xb6fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fc), 0xcb);
        EXPECT(gbc.readMem(0xb6fd), 0xe7);
        // CB E7 0062
        gbc.setState(0x2554, 0x378c, 0x76f0, 0x5bd9, 0x5f5e, 0xc63f, 0x1, 0x0);
        gbc.writeMem(0x2554, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x378c);
        EXPECT(gbc.pc(), 0x2556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0063
        gbc.setState(0xb62, 0x495b, 0xd3b0, 0xebc5, 0xc284, 0x5503, 0x0, 0x0);
        gbc.writeMem(0xb62, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x495b);
        EXPECT(gbc.pc(), 0xb64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0064
        gbc.setState(0x124a, 0x183d, 0xeb20, 0xa1e4, 0x8faf, 0xe89e, 0x0, 0x0);
        gbc.writeMem(0x124a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x183d);
        EXPECT(gbc.pc(), 0x124c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0065
        gbc.setState(0xabfe, 0x9cb2, 0x76c0, 0x1d8, 0xaaf3, 0x19f6, 0x0, 0x0);
        gbc.writeMem(0xabfe, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x9cb2);
        EXPECT(gbc.pc(), 0xac00);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabfe), 0xcb);
        EXPECT(gbc.readMem(0xabff), 0xe7);
        // CB E7 0066
        gbc.setState(0x9193, 0xd1fb, 0x570, 0xf140, 0xae98, 0x1144, 0x0, 0x1);
        gbc.writeMem(0x9193, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xd1fb);
        EXPECT(gbc.pc(), 0x9195);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9193), 0xcb);
        EXPECT(gbc.readMem(0x9194), 0xe7);
        // CB E7 0067
        gbc.setState(0x6e21, 0x4b6d, 0xf1a0, 0x6a67, 0xbb30, 0x3e5e, 0x1, 0x1);
        gbc.writeMem(0x6e21, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4b6d);
        EXPECT(gbc.pc(), 0x6e23);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0068
        gbc.setState(0x87ba, 0x4cd7, 0x2510, 0xdec3, 0x3e6c, 0x5d1d, 0x1, 0x0);
        gbc.writeMem(0x87ba, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4cd7);
        EXPECT(gbc.pc(), 0x87bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87ba), 0xcb);
        EXPECT(gbc.readMem(0x87bb), 0xe7);
        // CB E7 0069
        gbc.setState(0x5d2b, 0x94b, 0x3e20, 0xc94d, 0x4708, 0x4111, 0x0, 0x0);
        gbc.writeMem(0x5d2b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x94b);
        EXPECT(gbc.pc(), 0x5d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 006A
        gbc.setState(0x2d45, 0x357b, 0xb590, 0xef7c, 0x2ab0, 0xb1de, 0x1, 0x1);
        gbc.writeMem(0x2d45, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x357b);
        EXPECT(gbc.pc(), 0x2d47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 006B
        gbc.setState(0x66ef, 0xaf0b, 0x86d0, 0xa3b7, 0x6b0d, 0x44c8, 0x0, 0x1);
        gbc.writeMem(0x66ef, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xaf0b);
        EXPECT(gbc.pc(), 0x66f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 006C
        gbc.setState(0xc7cb, 0x3a6d, 0xb150, 0xc72f, 0xbd2d, 0x875f, 0x1, 0x1);
        gbc.writeMem(0xc7cb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x3a6d);
        EXPECT(gbc.pc(), 0xc7cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc7cb), 0xcb);
        EXPECT(gbc.readMem(0xc7cc), 0xe7);
        // CB E7 006D
        gbc.setState(0xbeff, 0xdf85, 0x2c90, 0x1875, 0xea11, 0x8c22, 0x0, 0x1);
        gbc.writeMem(0xbeff, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xdf85);
        EXPECT(gbc.pc(), 0xbf01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbeff), 0xcb);
        EXPECT(gbc.readMem(0xbf00), 0xe7);
        // CB E7 006E
        gbc.setState(0x470e, 0x28d3, 0x7b40, 0xcbe7, 0x560e, 0x8968, 0x0, 0x1);
        gbc.writeMem(0x470e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x28d3);
        EXPECT(gbc.pc(), 0x4710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 006F
        gbc.setState(0x63e, 0xedd4, 0x58f0, 0x43bf, 0x41e7, 0x614b, 0x0, 0x1);
        gbc.writeMem(0x63e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xedd4);
        EXPECT(gbc.pc(), 0x640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0070
        gbc.setState(0x5a5a, 0xecd9, 0xf6e0, 0xe53c, 0xbc3f, 0xf345, 0x1, 0x0);
        gbc.writeMem(0x5a5a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xecd9);
        EXPECT(gbc.pc(), 0x5a5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0071
        gbc.setState(0xc99a, 0x57b8, 0x3010, 0xf7c8, 0x2ff7, 0x4aea, 0x0, 0x0);
        gbc.writeMem(0xc99a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x57b8);
        EXPECT(gbc.pc(), 0xc99c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc99a), 0xcb);
        EXPECT(gbc.readMem(0xc99b), 0xe7);
        // CB E7 0072
        gbc.setState(0xe296, 0x1a8, 0x220, 0xb05, 0x213a, 0xd4c7, 0x0, 0x1);
        gbc.writeMem(0xe296, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1a8);
        EXPECT(gbc.pc(), 0xe298);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe296), 0xcb);
        EXPECT(gbc.readMem(0xe297), 0xe7);
        // CB E7 0073
        gbc.setState(0x17ef, 0xad6b, 0x5590, 0x82ea, 0xf580, 0xdc6b, 0x1, 0x1);
        gbc.writeMem(0x17ef, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xad6b);
        EXPECT(gbc.pc(), 0x17f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0074
        gbc.setState(0xd02, 0x6c7a, 0x1b70, 0x3954, 0x828a, 0x9b64, 0x1, 0x1);
        gbc.writeMem(0xd02, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x6c7a);
        EXPECT(gbc.pc(), 0xd04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0075
        gbc.setState(0xdc64, 0x19fe, 0x47c0, 0xbcbf, 0xa919, 0xa892, 0x1, 0x0);
        gbc.writeMem(0xdc64, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x19fe);
        EXPECT(gbc.pc(), 0xdc66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc64), 0xcb);
        EXPECT(gbc.readMem(0xdc65), 0xe7);
        // CB E7 0076
        gbc.setState(0x4edb, 0xaf47, 0x2680, 0x52d9, 0xd64b, 0xb36c, 0x0, 0x1);
        gbc.writeMem(0x4edb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xaf47);
        EXPECT(gbc.pc(), 0x4edd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0078
        gbc.setState(0xd353, 0x7832, 0xebb0, 0xd364, 0xd7f0, 0xf02a, 0x0, 0x1);
        gbc.writeMem(0xd353, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7832);
        EXPECT(gbc.pc(), 0xd355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd353), 0xcb);
        EXPECT(gbc.readMem(0xd354), 0xe7);
        // CB E7 0079
        gbc.setState(0x3d64, 0x4347, 0xe400, 0xe887, 0xd6a1, 0xe34, 0x0, 0x0);
        gbc.writeMem(0x3d64, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x4347);
        EXPECT(gbc.pc(), 0x3d66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 007B
        gbc.setState(0x8f65, 0xddb, 0xbea0, 0x72a6, 0x38a0, 0x6edf, 0x0, 0x0);
        gbc.writeMem(0x8f65, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xddb);
        EXPECT(gbc.pc(), 0x8f67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f65), 0xcb);
        EXPECT(gbc.readMem(0x8f66), 0xe7);
        // CB E7 007C
        gbc.setState(0x5e82, 0x8498, 0xf810, 0xc42b, 0xe9ec, 0x2742, 0x0, 0x0);
        gbc.writeMem(0x5e82, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x8498);
        EXPECT(gbc.pc(), 0x5e84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 007D
        gbc.setState(0x2e9, 0x837a, 0xa800, 0xcc51, 0xaba9, 0xc039, 0x1, 0x0);
        gbc.writeMem(0x2e9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x837a);
        EXPECT(gbc.pc(), 0x2eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 007E
        gbc.setState(0x6e9, 0x1490, 0xedc0, 0x28ee, 0x85, 0x6470, 0x1, 0x0);
        gbc.writeMem(0x6e9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1490);
        EXPECT(gbc.pc(), 0x6eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 007F
        gbc.setState(0xc67c, 0x8ddb, 0x6450, 0x732a, 0xb812, 0xceef, 0x1, 0x1);
        gbc.writeMem(0xc67c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x8ddb);
        EXPECT(gbc.pc(), 0xc67e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc67c), 0xcb);
        EXPECT(gbc.readMem(0xc67d), 0xe7);
        // CB E7 0080
        gbc.setState(0xd1e8, 0x5a40, 0xd530, 0x781d, 0x3294, 0x6502, 0x0, 0x1);
        gbc.writeMem(0xd1e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x5a40);
        EXPECT(gbc.pc(), 0xd1ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1e8), 0xcb);
        EXPECT(gbc.readMem(0xd1e9), 0xe7);
        // CB E7 0081
        gbc.setState(0x43d3, 0x4d7c, 0x96f0, 0xfdc, 0x7a0, 0x92f1, 0x0, 0x0);
        gbc.writeMem(0x43d3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4d7c);
        EXPECT(gbc.pc(), 0x43d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0083
        gbc.setState(0x4196, 0x2d21, 0xf1a0, 0xec9c, 0xd70a, 0xfa60, 0x1, 0x0);
        gbc.writeMem(0x4196, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x2d21);
        EXPECT(gbc.pc(), 0x4198);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0085
        gbc.setState(0xcf24, 0x1b90, 0x4660, 0x496e, 0x6648, 0xbe49, 0x1, 0x0);
        gbc.writeMem(0xcf24, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1b90);
        EXPECT(gbc.pc(), 0xcf26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf24), 0xcb);
        EXPECT(gbc.readMem(0xcf25), 0xe7);
        // CB E7 0087
        gbc.setState(0x303a, 0x7ba0, 0x7e30, 0xed53, 0x8ed6, 0xfe76, 0x0, 0x0);
        gbc.writeMem(0x303a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x7ba0);
        EXPECT(gbc.pc(), 0x303c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0088
        gbc.setState(0x93f3, 0x2f44, 0xcbe0, 0xee78, 0xfba1, 0x9bab, 0x1, 0x1);
        gbc.writeMem(0x93f3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2f44);
        EXPECT(gbc.pc(), 0x93f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93f3), 0xcb);
        EXPECT(gbc.readMem(0x93f4), 0xe7);
        // CB E7 0089
        gbc.setState(0x398, 0x35c9, 0xc560, 0x766c, 0xc92f, 0x46ba, 0x0, 0x0);
        gbc.writeMem(0x398, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x35c9);
        EXPECT(gbc.pc(), 0x39a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 008A
        gbc.setState(0x8717, 0xfdd7, 0x7d50, 0x87c6, 0xe69c, 0x193f, 0x1, 0x0);
        gbc.writeMem(0x8717, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xfdd7);
        EXPECT(gbc.pc(), 0x8719);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8717), 0xcb);
        EXPECT(gbc.readMem(0x8718), 0xe7);
        // CB E7 008B
        gbc.setState(0x3bb1, 0x3f33, 0x14f0, 0xf701, 0x8e4b, 0xeb63, 0x1, 0x0);
        gbc.writeMem(0x3bb1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x3f33);
        EXPECT(gbc.pc(), 0x3bb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 008C
        gbc.setState(0x627, 0x92f, 0xd0a0, 0x5244, 0xf2e1, 0x34e0, 0x1, 0x1);
        gbc.writeMem(0x627, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x92f);
        EXPECT(gbc.pc(), 0x629);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 008D
        gbc.setState(0x4421, 0x6ad2, 0xf2d0, 0xc8b6, 0xbb70, 0x408b, 0x0, 0x0);
        gbc.writeMem(0x4421, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x6ad2);
        EXPECT(gbc.pc(), 0x4423);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 008E
        gbc.setState(0x52a2, 0x14f6, 0xa5c0, 0x8e8a, 0x94f1, 0xf8ba, 0x1, 0x1);
        gbc.writeMem(0x52a2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x14f6);
        EXPECT(gbc.pc(), 0x52a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0090
        gbc.setState(0x7677, 0x3bc1, 0x2510, 0xcf34, 0xf0fa, 0x6e05, 0x1, 0x1);
        gbc.writeMem(0x7677, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x3bc1);
        EXPECT(gbc.pc(), 0x7679);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0091
        gbc.setState(0x70a1, 0x6f75, 0x62a0, 0x9887, 0x5b4f, 0xf27, 0x0, 0x1);
        gbc.writeMem(0x70a1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6f75);
        EXPECT(gbc.pc(), 0x70a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0092
        gbc.setState(0xb803, 0x4537, 0x9350, 0x3f6e, 0xcbee, 0xfdea, 0x0, 0x0);
        gbc.writeMem(0xb803, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x4537);
        EXPECT(gbc.pc(), 0xb805);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb803), 0xcb);
        EXPECT(gbc.readMem(0xb804), 0xe7);
        // CB E7 0093
        gbc.setState(0x5129, 0x8849, 0x28c0, 0xbcf4, 0x36bb, 0x1686, 0x0, 0x0);
        gbc.writeMem(0x5129, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x8849);
        EXPECT(gbc.pc(), 0x512b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0094
        gbc.setState(0x3c02, 0xca8a, 0x8630, 0xc86, 0xefaf, 0xb9b5, 0x0, 0x1);
        gbc.writeMem(0x3c02, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xca8a);
        EXPECT(gbc.pc(), 0x3c04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0095
        gbc.setState(0x31c1, 0xd0bb, 0xe450, 0x7bba, 0xb402, 0x3c15, 0x0, 0x1);
        gbc.writeMem(0x31c1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xd0bb);
        EXPECT(gbc.pc(), 0x31c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0096
        gbc.setState(0xa3e3, 0xce90, 0xc880, 0x672f, 0xc721, 0x6abb, 0x1, 0x0);
        gbc.writeMem(0xa3e3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xce90);
        EXPECT(gbc.pc(), 0xa3e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3e3), 0xcb);
        EXPECT(gbc.readMem(0xa3e4), 0xe7);
        // CB E7 0097
        gbc.setState(0x7598, 0xbb37, 0x5a00, 0x23ed, 0xd746, 0x3cec, 0x0, 0x0);
        gbc.writeMem(0x7598, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xbb37);
        EXPECT(gbc.pc(), 0x759a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0098
        gbc.setState(0xd74, 0x9ba1, 0x48b0, 0xdc9a, 0xa10d, 0x7d0c, 0x0, 0x0);
        gbc.writeMem(0xd74, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9ba1);
        EXPECT(gbc.pc(), 0xd76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0099
        gbc.setState(0x2cad, 0x500f, 0x8b70, 0x4f38, 0x2b87, 0xbc96, 0x0, 0x0);
        gbc.writeMem(0x2cad, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x500f);
        EXPECT(gbc.pc(), 0x2caf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 009A
        gbc.setState(0xe43b, 0xca62, 0x3850, 0x16bc, 0x2096, 0x3309, 0x1, 0x0);
        gbc.writeMem(0xe43b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xca62);
        EXPECT(gbc.pc(), 0xe43d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe43b), 0xcb);
        EXPECT(gbc.readMem(0xe43c), 0xe7);
        // CB E7 009B
        gbc.setState(0xaa68, 0x7c14, 0xf290, 0x4807, 0x1816, 0xb3f4, 0x0, 0x0);
        gbc.writeMem(0xaa68, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x7c14);
        EXPECT(gbc.pc(), 0xaa6a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa68), 0xcb);
        EXPECT(gbc.readMem(0xaa69), 0xe7);
        // CB E7 009C
        gbc.setState(0xd0dc, 0x1405, 0x67f0, 0x8907, 0x1033, 0x21f2, 0x1, 0x0);
        gbc.writeMem(0xd0dc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1405);
        EXPECT(gbc.pc(), 0xd0de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0dc), 0xcb);
        EXPECT(gbc.readMem(0xd0dd), 0xe7);
        // CB E7 009D
        gbc.setState(0x69c3, 0xb2a8, 0x1810, 0xb5a0, 0x6442, 0x7e91, 0x1, 0x0);
        gbc.writeMem(0x69c3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb2a8);
        EXPECT(gbc.pc(), 0x69c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 009E
        gbc.setState(0x68a1, 0xf990, 0x5ef0, 0xcb58, 0xc88e, 0x9ab5, 0x0, 0x1);
        gbc.writeMem(0x68a1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xf990);
        EXPECT(gbc.pc(), 0x68a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 009F
        gbc.setState(0xf71, 0xb3f2, 0xb340, 0x579a, 0x8932, 0x78ba, 0x1, 0x0);
        gbc.writeMem(0xf71, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xb3f2);
        EXPECT(gbc.pc(), 0xf73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00A0
        gbc.setState(0x262b, 0xcc40, 0x440, 0x4796, 0x9b80, 0xe802, 0x1, 0x0);
        gbc.writeMem(0x262b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xcc40);
        EXPECT(gbc.pc(), 0x262d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00A1
        gbc.setState(0x8798, 0xf95c, 0xc9b0, 0xd51f, 0x7396, 0x76af, 0x0, 0x1);
        gbc.writeMem(0x8798, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xf95c);
        EXPECT(gbc.pc(), 0x879a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8798), 0xcb);
        EXPECT(gbc.readMem(0x8799), 0xe7);
        // CB E7 00A2
        gbc.setState(0xb3b, 0xfb74, 0x7a50, 0x44ab, 0xca25, 0xc518, 0x1, 0x1);
        gbc.writeMem(0xb3b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xfb74);
        EXPECT(gbc.pc(), 0xb3d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00A4
        gbc.setState(0x1bd, 0xc525, 0xf6c0, 0x65fd, 0xc1d0, 0xa836, 0x0, 0x0);
        gbc.writeMem(0x1bd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xc525);
        EXPECT(gbc.pc(), 0x1bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00A5
        gbc.setState(0x5761, 0x9b32, 0xe030, 0x67c8, 0x6657, 0xcaa0, 0x1, 0x1);
        gbc.writeMem(0x5761, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x9b32);
        EXPECT(gbc.pc(), 0x5763);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00A6
        gbc.setState(0xd220, 0xaa84, 0xd8e0, 0x9437, 0x81ef, 0xc2e9, 0x1, 0x1);
        gbc.writeMem(0xd220, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xaa84);
        EXPECT(gbc.pc(), 0xd222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd220), 0xcb);
        EXPECT(gbc.readMem(0xd221), 0xe7);
        // CB E7 00A8
        gbc.setState(0x9c84, 0xc6b6, 0x9390, 0xdec7, 0x2cb5, 0x7287, 0x0, 0x1);
        gbc.writeMem(0x9c84, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc6b6);
        EXPECT(gbc.pc(), 0x9c86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c84), 0xcb);
        EXPECT(gbc.readMem(0x9c85), 0xe7);
        // CB E7 00AA
        gbc.setState(0x8c26, 0xad43, 0x85d0, 0x7e9d, 0xb7b2, 0x4dd4, 0x0, 0x0);
        gbc.writeMem(0x8c26, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xad43);
        EXPECT(gbc.pc(), 0x8c28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c26), 0xcb);
        EXPECT(gbc.readMem(0x8c27), 0xe7);
        // CB E7 00AB
        gbc.setState(0x5678, 0xc9bd, 0x51c0, 0xb24d, 0xfa0e, 0x2bef, 0x0, 0x0);
        gbc.writeMem(0x5678, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc9bd);
        EXPECT(gbc.pc(), 0x567a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00AC
        gbc.setState(0xbf8, 0x5eb5, 0xed40, 0xa34e, 0x6521, 0x25ee, 0x0, 0x0);
        gbc.writeMem(0xbf8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5eb5);
        EXPECT(gbc.pc(), 0xbfa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00AD
        gbc.setState(0x88ef, 0xf7bc, 0x1a80, 0xf49c, 0x50e9, 0x5cd3, 0x0, 0x0);
        gbc.writeMem(0x88ef, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xf7bc);
        EXPECT(gbc.pc(), 0x88f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ef), 0xcb);
        EXPECT(gbc.readMem(0x88f0), 0xe7);
        // CB E7 00AE
        gbc.setState(0x1c2d, 0x44fe, 0x8120, 0x5648, 0xe498, 0x8eb5, 0x1, 0x1);
        gbc.writeMem(0x1c2d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x44fe);
        EXPECT(gbc.pc(), 0x1c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00AF
        gbc.setState(0x3c50, 0xd68b, 0xfc0, 0xf365, 0xdddc, 0x1ea, 0x1, 0x1);
        gbc.writeMem(0x3c50, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xd68b);
        EXPECT(gbc.pc(), 0x3c52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00B0
        gbc.setState(0x9629, 0x62f9, 0x7840, 0xa429, 0xa639, 0x1186, 0x1, 0x0);
        gbc.writeMem(0x9629, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x62f9);
        EXPECT(gbc.pc(), 0x962b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9629), 0xcb);
        EXPECT(gbc.readMem(0x962a), 0xe7);
        // CB E7 00B1
        gbc.setState(0x9b70, 0x7095, 0x6250, 0x2054, 0x4272, 0x413c, 0x1, 0x1);
        gbc.writeMem(0x9b70, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7095);
        EXPECT(gbc.pc(), 0x9b72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b70), 0xcb);
        EXPECT(gbc.readMem(0x9b71), 0xe7);
        // CB E7 00B2
        gbc.setState(0x9ec5, 0x385d, 0xfb10, 0xc81b, 0xb734, 0x1fce, 0x0, 0x0);
        gbc.writeMem(0x9ec5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x385d);
        EXPECT(gbc.pc(), 0x9ec7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ec5), 0xcb);
        EXPECT(gbc.readMem(0x9ec6), 0xe7);
        // CB E7 00B3
        gbc.setState(0xc34, 0x4527, 0x7260, 0xa2b8, 0x121f, 0xec0b, 0x0, 0x0);
        gbc.writeMem(0xc34, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4527);
        EXPECT(gbc.pc(), 0xc36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00B4
        gbc.setState(0x3c3d, 0xd9c2, 0x14f0, 0x13f2, 0x4e1f, 0xc080, 0x0, 0x0);
        gbc.writeMem(0x3c3d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xd9c2);
        EXPECT(gbc.pc(), 0x3c3f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00B5
        gbc.setState(0x2caf, 0xa880, 0xa10, 0x2a54, 0x51b1, 0x2806, 0x0, 0x1);
        gbc.writeMem(0x2caf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xa880);
        EXPECT(gbc.pc(), 0x2cb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00B6
        gbc.setState(0x8aa9, 0x1133, 0xf7e0, 0xa9af, 0xc06e, 0x322c, 0x0, 0x0);
        gbc.writeMem(0x8aa9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x1133);
        EXPECT(gbc.pc(), 0x8aab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8aa9), 0xcb);
        EXPECT(gbc.readMem(0x8aaa), 0xe7);
        // CB E7 00B7
        gbc.setState(0x27ac, 0xde1f, 0xb380, 0x4740, 0x9438, 0xd738, 0x1, 0x1);
        gbc.writeMem(0x27ac, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xde1f);
        EXPECT(gbc.pc(), 0x27ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00B8
        gbc.setState(0x18a0, 0x9894, 0x4fe0, 0x8364, 0xfced, 0x15d3, 0x1, 0x1);
        gbc.writeMem(0x18a0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x9894);
        EXPECT(gbc.pc(), 0x18a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00B9
        gbc.setState(0x162a, 0x3717, 0xcbc0, 0x45bc, 0x400, 0x8b4, 0x1, 0x1);
        gbc.writeMem(0x162a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3717);
        EXPECT(gbc.pc(), 0x162c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00BA
        gbc.setState(0xa68f, 0x624e, 0xb100, 0x18b, 0xa4c1, 0x1f8f, 0x1, 0x0);
        gbc.writeMem(0xa68f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x624e);
        EXPECT(gbc.pc(), 0xa691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68f), 0xcb);
        EXPECT(gbc.readMem(0xa690), 0xe7);
        // CB E7 00BB
        gbc.setState(0x6fbd, 0x4af2, 0xbce0, 0xc73b, 0xb58d, 0x98c9, 0x1, 0x1);
        gbc.writeMem(0x6fbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x4af2);
        EXPECT(gbc.pc(), 0x6fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00BD
        gbc.setState(0xdbeb, 0x9a81, 0xf260, 0xd999, 0x601c, 0xf21d, 0x0, 0x0);
        gbc.writeMem(0xdbeb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x9a81);
        EXPECT(gbc.pc(), 0xdbed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdbeb), 0xcb);
        EXPECT(gbc.readMem(0xdbec), 0xe7);
        // CB E7 00BE
        gbc.setState(0x322d, 0xbac0, 0x9290, 0x2b72, 0xa390, 0x4b13, 0x1, 0x1);
        gbc.writeMem(0x322d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xbac0);
        EXPECT(gbc.pc(), 0x322f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00BF
        gbc.setState(0x55e7, 0xc4a, 0xc30, 0xdf07, 0xaf54, 0x789d, 0x1, 0x1);
        gbc.writeMem(0x55e7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xc4a);
        EXPECT(gbc.pc(), 0x55e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00C0
        gbc.setState(0x9cb0, 0x120f, 0xfad0, 0x9b0d, 0x8eb8, 0xd629, 0x0, 0x1);
        gbc.writeMem(0x9cb0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x120f);
        EXPECT(gbc.pc(), 0x9cb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cb0), 0xcb);
        EXPECT(gbc.readMem(0x9cb1), 0xe7);
        // CB E7 00C1
        gbc.setState(0x6956, 0x3f32, 0xd000, 0xa560, 0x108e, 0xc48f, 0x1, 0x1);
        gbc.writeMem(0x6956, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3f32);
        EXPECT(gbc.pc(), 0x6958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00C2
        gbc.setState(0x361b, 0x462a, 0x4470, 0x7d1e, 0xe6c6, 0xf0bf, 0x1, 0x1);
        gbc.writeMem(0x361b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x462a);
        EXPECT(gbc.pc(), 0x361d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00C3
        gbc.setState(0x6cc3, 0x1258, 0x5970, 0x2d4b, 0xc10c, 0xed4b, 0x0, 0x1);
        gbc.writeMem(0x6cc3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1258);
        EXPECT(gbc.pc(), 0x6cc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00C4
        gbc.setState(0xa30b, 0xf186, 0x3300, 0x56e, 0x42d3, 0xf954, 0x1, 0x0);
        gbc.writeMem(0xa30b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf186);
        EXPECT(gbc.pc(), 0xa30d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30b), 0xcb);
        EXPECT(gbc.readMem(0xa30c), 0xe7);
        // CB E7 00C5
        gbc.setState(0x87d6, 0xb9a, 0xc030, 0x76b, 0x3938, 0x10bc, 0x1, 0x0);
        gbc.writeMem(0x87d6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb9a);
        EXPECT(gbc.pc(), 0x87d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d6), 0xcb);
        EXPECT(gbc.readMem(0x87d7), 0xe7);
        // CB E7 00C6
        gbc.setState(0x931, 0x4251, 0x3a70, 0x94bb, 0x86c4, 0xd62c, 0x1, 0x0);
        gbc.writeMem(0x931, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4251);
        EXPECT(gbc.pc(), 0x933);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00C7
        gbc.setState(0x43d6, 0xc473, 0x44f0, 0x1599, 0x7d21, 0xcd10, 0x1, 0x0);
        gbc.writeMem(0x43d6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc473);
        EXPECT(gbc.pc(), 0x43d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00C8
        gbc.setState(0xa57e, 0x2c94, 0x30d0, 0x26f6, 0xf4cc, 0xe5fc, 0x1, 0x1);
        gbc.writeMem(0xa57e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x2c94);
        EXPECT(gbc.pc(), 0xa580);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa57e), 0xcb);
        EXPECT(gbc.readMem(0xa57f), 0xe7);
        // CB E7 00C9
        gbc.setState(0xbeb6, 0x1391, 0xad60, 0x4d25, 0x448d, 0xf12f, 0x1, 0x0);
        gbc.writeMem(0xbeb6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x1391);
        EXPECT(gbc.pc(), 0xbeb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeb6), 0xcb);
        EXPECT(gbc.readMem(0xbeb7), 0xe7);
        // CB E7 00CA
        gbc.setState(0x5ece, 0x90a7, 0xb3b0, 0xcf75, 0x3510, 0x5a95, 0x0, 0x1);
        gbc.writeMem(0x5ece, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x90a7);
        EXPECT(gbc.pc(), 0x5ed0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00CB
        gbc.setState(0x75a9, 0x39a2, 0x59c0, 0x2ee1, 0xaeca, 0x872e, 0x1, 0x0);
        gbc.writeMem(0x75a9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x39a2);
        EXPECT(gbc.pc(), 0x75ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00CC
        gbc.setState(0xef2d, 0x55e8, 0x4210, 0x40b9, 0x23df, 0x351f, 0x1, 0x0);
        gbc.writeMem(0xef2d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x55e8);
        EXPECT(gbc.pc(), 0xef2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef2d), 0xcb);
        EXPECT(gbc.readMem(0xef2e), 0xe7);
        // CB E7 00CD
        gbc.setState(0xac1f, 0x4a40, 0xd690, 0x1e49, 0x6ef3, 0x1b3b, 0x1, 0x1);
        gbc.writeMem(0xac1f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4a40);
        EXPECT(gbc.pc(), 0xac21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac1f), 0xcb);
        EXPECT(gbc.readMem(0xac20), 0xe7);
        // CB E7 00CE
        gbc.setState(0x9cd3, 0xe56, 0x2ea0, 0xb56e, 0x36ee, 0x40e4, 0x0, 0x1);
        gbc.writeMem(0x9cd3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe56);
        EXPECT(gbc.pc(), 0x9cd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd3), 0xcb);
        EXPECT(gbc.readMem(0x9cd4), 0xe7);
        // CB E7 00D0
        gbc.setState(0xb585, 0xe87e, 0x3dc0, 0x2d95, 0xd638, 0x9a5f, 0x1, 0x0);
        gbc.writeMem(0xb585, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xe87e);
        EXPECT(gbc.pc(), 0xb587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb585), 0xcb);
        EXPECT(gbc.readMem(0xb586), 0xe7);
        // CB E7 00D1
        gbc.setState(0x25d5, 0xf8f8, 0x6b0, 0x6d73, 0xb596, 0xba3b, 0x0, 0x1);
        gbc.writeMem(0x25d5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf8f8);
        EXPECT(gbc.pc(), 0x25d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00D2
        gbc.setState(0xb939, 0x6250, 0x8c80, 0x9479, 0xa15b, 0x7e73, 0x0, 0x0);
        gbc.writeMem(0xb939, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6250);
        EXPECT(gbc.pc(), 0xb93b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb939), 0xcb);
        EXPECT(gbc.readMem(0xb93a), 0xe7);
        // CB E7 00D4
        gbc.setState(0xa141, 0xe29, 0x56a0, 0x8b35, 0x1f12, 0x391a, 0x1, 0x0);
        gbc.writeMem(0xa141, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xe29);
        EXPECT(gbc.pc(), 0xa143);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa141), 0xcb);
        EXPECT(gbc.readMem(0xa142), 0xe7);
        // CB E7 00D5
        gbc.setState(0xd2ac, 0x976f, 0x9b40, 0xe358, 0x5c, 0x1895, 0x1, 0x1);
        gbc.writeMem(0xd2ac, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x976f);
        EXPECT(gbc.pc(), 0xd2ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ac), 0xcb);
        EXPECT(gbc.readMem(0xd2ad), 0xe7);
        // CB E7 00D6
        gbc.setState(0xbe46, 0x2c72, 0xbb30, 0xcdea, 0xc4a3, 0xbca, 0x1, 0x1);
        gbc.writeMem(0xbe46, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x2c72);
        EXPECT(gbc.pc(), 0xbe48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe46), 0xcb);
        EXPECT(gbc.readMem(0xbe47), 0xe7);
        // CB E7 00D7
        gbc.setState(0x3025, 0x1455, 0x7b20, 0x44dc, 0xfe7b, 0x5b2e, 0x1, 0x1);
        gbc.writeMem(0x3025, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x1455);
        EXPECT(gbc.pc(), 0x3027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00D8
        gbc.setState(0xa434, 0x7e6a, 0x6c70, 0xe887, 0xf0bb, 0x8f87, 0x1, 0x0);
        gbc.writeMem(0xa434, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7e6a);
        EXPECT(gbc.pc(), 0xa436);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa434), 0xcb);
        EXPECT(gbc.readMem(0xa435), 0xe7);
        // CB E7 00D9
        gbc.setState(0x209b, 0xa471, 0xe40, 0xa22b, 0xddf, 0x9d5f, 0x0, 0x1);
        gbc.writeMem(0x209b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xa471);
        EXPECT(gbc.pc(), 0x209d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00DA
        gbc.setState(0x41b1, 0xf0a5, 0xaed0, 0xa2ef, 0x61ed, 0x8958, 0x0, 0x0);
        gbc.writeMem(0x41b1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf0a5);
        EXPECT(gbc.pc(), 0x41b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00DB
        gbc.setState(0x8fd1, 0x9c28, 0xcb50, 0x7a0e, 0x78f8, 0xac10, 0x0, 0x0);
        gbc.writeMem(0x8fd1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x9c28);
        EXPECT(gbc.pc(), 0x8fd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8fd1), 0xcb);
        EXPECT(gbc.readMem(0x8fd2), 0xe7);
        // CB E7 00DC
        gbc.setState(0xd5c4, 0x7720, 0x1c80, 0x7f63, 0x6695, 0x3349, 0x1, 0x1);
        gbc.writeMem(0xd5c4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7720);
        EXPECT(gbc.pc(), 0xd5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5c4), 0xcb);
        EXPECT(gbc.readMem(0xd5c5), 0xe7);
        // CB E7 00DD
        gbc.setState(0xa95d, 0xb2a7, 0x4b30, 0xacec, 0x1514, 0x87ef, 0x0, 0x0);
        gbc.writeMem(0xa95d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xb2a7);
        EXPECT(gbc.pc(), 0xa95f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa95d), 0xcb);
        EXPECT(gbc.readMem(0xa95e), 0xe7);
        // CB E7 00DF
        gbc.setState(0x9e55, 0x4a37, 0xe6b0, 0x96b4, 0x2c9b, 0x8f67, 0x1, 0x1);
        gbc.writeMem(0x9e55, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4a37);
        EXPECT(gbc.pc(), 0x9e57);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e55), 0xcb);
        EXPECT(gbc.readMem(0x9e56), 0xe7);
        // CB E7 00E0
        gbc.setState(0x2647, 0x6c37, 0xe3b0, 0xb656, 0xa02a, 0xb225, 0x0, 0x0);
        gbc.writeMem(0x2647, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x6c37);
        EXPECT(gbc.pc(), 0x2649);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00E1
        gbc.setState(0x77e2, 0x15ab, 0x8310, 0x9f8f, 0x427c, 0x1dd7, 0x1, 0x1);
        gbc.writeMem(0x77e2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x15ab);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00E2
        gbc.setState(0x1a64, 0x2595, 0x5e40, 0xbf71, 0xf25c, 0x1867, 0x0, 0x0);
        gbc.writeMem(0x1a64, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x2595);
        EXPECT(gbc.pc(), 0x1a66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00E3
        gbc.setState(0xee37, 0xee39, 0xcf30, 0x85d2, 0x35b, 0xcf89, 0x0, 0x1);
        gbc.writeMem(0xee37, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xee39);
        EXPECT(gbc.pc(), 0xee39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee37), 0xcb);
        EXPECT(gbc.readMem(0xee38), 0xe7);
        // CB E7 00E4
        gbc.setState(0x5d77, 0xd1a8, 0xc4b0, 0x5794, 0xd698, 0xae48, 0x0, 0x1);
        gbc.writeMem(0x5d77, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd1a8);
        EXPECT(gbc.pc(), 0x5d79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00E5
        gbc.setState(0xd718, 0xcca9, 0x56f0, 0xefa5, 0xaf16, 0x8a8b, 0x0, 0x1);
        gbc.writeMem(0xd718, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xcca9);
        EXPECT(gbc.pc(), 0xd71a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd718), 0xcb);
        EXPECT(gbc.readMem(0xd719), 0xe7);
        // CB E7 00E6
        gbc.setState(0x6cda, 0x1b2a, 0x2570, 0x1099, 0x3bd3, 0x5adc, 0x1, 0x0);
        gbc.writeMem(0x6cda, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x1b2a);
        EXPECT(gbc.pc(), 0x6cdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00E7
        gbc.setState(0x2e01, 0x3bb0, 0x8000, 0x632, 0xf9fc, 0x1389, 0x1, 0x1);
        gbc.writeMem(0x2e01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3bb0);
        EXPECT(gbc.pc(), 0x2e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00E8
        gbc.setState(0xdd8b, 0x99bd, 0xc490, 0x7906, 0xd820, 0xdb6f, 0x0, 0x0);
        gbc.writeMem(0xdd8b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x99bd);
        EXPECT(gbc.pc(), 0xdd8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd8b), 0xcb);
        EXPECT(gbc.readMem(0xdd8c), 0xe7);
        // CB E7 00E9
        gbc.setState(0xcbf3, 0xd7e6, 0xdd10, 0x10a2, 0x3d3b, 0x1801, 0x0, 0x0);
        gbc.writeMem(0xcbf3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xd7e6);
        EXPECT(gbc.pc(), 0xcbf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbf3), 0xcb);
        EXPECT(gbc.readMem(0xcbf4), 0xe7);
        // CB E7 00EA
        gbc.setState(0x16af, 0xfea6, 0xb680, 0x91d9, 0x501d, 0x8512, 0x0, 0x0);
        gbc.writeMem(0x16af, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xfea6);
        EXPECT(gbc.pc(), 0x16b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00EB
        gbc.setState(0x6a0d, 0xd0f1, 0x6540, 0x9276, 0x7f07, 0xf693, 0x0, 0x0);
        gbc.writeMem(0x6a0d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xd0f1);
        EXPECT(gbc.pc(), 0x6a0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00EC
        gbc.setState(0x51ff, 0x562f, 0x5830, 0x63b2, 0xe6c9, 0x3469, 0x0, 0x1);
        gbc.writeMem(0x51ff, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x562f);
        EXPECT(gbc.pc(), 0x5201);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00ED
        gbc.setState(0xea6c, 0x5fab, 0x580, 0xcf9f, 0xf1bd, 0x1ce4, 0x1, 0x0);
        gbc.writeMem(0xea6c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x5fab);
        EXPECT(gbc.pc(), 0xea6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea6c), 0xcb);
        EXPECT(gbc.readMem(0xea6d), 0xe7);
        // CB E7 00EE
        gbc.setState(0xa140, 0x7298, 0xa4e0, 0xc498, 0xc543, 0xe1fa, 0x0, 0x0);
        gbc.writeMem(0xa140, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7298);
        EXPECT(gbc.pc(), 0xa142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa140), 0xcb);
        EXPECT(gbc.readMem(0xa141), 0xe7);
        // CB E7 00EF
        gbc.setState(0xe869, 0xb1ce, 0x7ec0, 0xc867, 0x715f, 0x8159, 0x0, 0x1);
        gbc.writeMem(0xe869, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb1ce);
        EXPECT(gbc.pc(), 0xe86b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe869), 0xcb);
        EXPECT(gbc.readMem(0xe86a), 0xe7);
        // CB E7 00F0
        gbc.setState(0x721, 0xf09d, 0x9000, 0xe2d1, 0xac61, 0x4302, 0x0, 0x0);
        gbc.writeMem(0x721, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xf09d);
        EXPECT(gbc.pc(), 0x723);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00F1
        gbc.setState(0x7827, 0xc62b, 0xe720, 0x525d, 0x6ce8, 0x7c74, 0x1, 0x1);
        gbc.writeMem(0x7827, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc62b);
        EXPECT(gbc.pc(), 0x7829);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00F2
        gbc.setState(0x3b60, 0x9e1d, 0x1930, 0x897c, 0x3d78, 0x2e17, 0x1, 0x0);
        gbc.writeMem(0x3b60, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x9e1d);
        EXPECT(gbc.pc(), 0x3b62);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00F3
        gbc.setState(0x8634, 0x7fcd, 0x1de0, 0x8fdb, 0xfc77, 0x7934, 0x0, 0x0);
        gbc.writeMem(0x8634, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x7fcd);
        EXPECT(gbc.pc(), 0x8636);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8634), 0xcb);
        EXPECT(gbc.readMem(0x8635), 0xe7);
        // CB E7 00F4
        gbc.setState(0x1789, 0x3572, 0x8850, 0xeeec, 0xd553, 0x34cc, 0x0, 0x1);
        gbc.writeMem(0x1789, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x3572);
        EXPECT(gbc.pc(), 0x178b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00F5
        gbc.setState(0xbba2, 0xfcfc, 0x1070, 0x5fa3, 0x9792, 0x9b65, 0x0, 0x1);
        gbc.writeMem(0xbba2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfcfc);
        EXPECT(gbc.pc(), 0xbba4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbba2), 0xcb);
        EXPECT(gbc.readMem(0xbba3), 0xe7);
        // CB E7 00F7
        gbc.setState(0x696b, 0x81d1, 0x1060, 0xa806, 0x32c7, 0x4cf4, 0x1, 0x0);
        gbc.writeMem(0x696b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x81d1);
        EXPECT(gbc.pc(), 0x696d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00F8
        gbc.setState(0x8420, 0x48c5, 0xaee0, 0x5d, 0xec3f, 0x5092, 0x0, 0x1);
        gbc.writeMem(0x8420, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x48c5);
        EXPECT(gbc.pc(), 0x8422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8420), 0xcb);
        EXPECT(gbc.readMem(0x8421), 0xe7);
        // CB E7 00F9
        gbc.setState(0x5933, 0x8e63, 0x10, 0xc3bc, 0xc015, 0x49cd, 0x1, 0x1);
        gbc.writeMem(0x5933, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8e63);
        EXPECT(gbc.pc(), 0x5935);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 00FA
        gbc.setState(0xa9f2, 0xe95b, 0x99a0, 0x759f, 0x77be, 0xa531, 0x0, 0x0);
        gbc.writeMem(0xa9f2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe95b);
        EXPECT(gbc.pc(), 0xa9f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9f2), 0xcb);
        EXPECT(gbc.readMem(0xa9f3), 0xe7);
        // CB E7 00FB
        gbc.setState(0x5167, 0xf408, 0x8ac0, 0x12c1, 0xa31b, 0x979c, 0x1, 0x0);
        gbc.writeMem(0x5167, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf408);
        EXPECT(gbc.pc(), 0x5169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00FC
        gbc.setState(0x9cc, 0x931b, 0x2a60, 0x6314, 0x5d78, 0xfac, 0x1, 0x1);
        gbc.writeMem(0x9cc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x931b);
        EXPECT(gbc.pc(), 0x9ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 00FD
        gbc.setState(0x8592, 0xfe77, 0x1800, 0x29d5, 0xf705, 0xf031, 0x1, 0x1);
        gbc.writeMem(0x8592, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfe77);
        EXPECT(gbc.pc(), 0x8594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8592), 0xcb);
        EXPECT(gbc.readMem(0x8593), 0xe7);
        // CB E7 00FF
        gbc.setState(0x3a6d, 0x19d6, 0xcd0, 0x3a16, 0x151b, 0xdfce, 0x1, 0x0);
        gbc.writeMem(0x3a6d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x19d6);
        EXPECT(gbc.pc(), 0x3a6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0100
        gbc.setState(0x395b, 0xc364, 0x1370, 0xda45, 0xb610, 0x1306, 0x0, 0x0);
        gbc.writeMem(0x395b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc364);
        EXPECT(gbc.pc(), 0x395d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0101
        gbc.setState(0xb310, 0x4fd8, 0x74d0, 0x5bb5, 0xbb5e, 0x6f0f, 0x0, 0x1);
        gbc.writeMem(0xb310, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4fd8);
        EXPECT(gbc.pc(), 0xb312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb310), 0xcb);
        EXPECT(gbc.readMem(0xb311), 0xe7);
        // CB E7 0102
        gbc.setState(0x5a23, 0x5d9c, 0x5f70, 0xd13, 0x5fe9, 0x5287, 0x0, 0x0);
        gbc.writeMem(0x5a23, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x5d9c);
        EXPECT(gbc.pc(), 0x5a25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0103
        gbc.setState(0x6723, 0x7e5, 0x5370, 0x7be2, 0x429b, 0xa2f0, 0x0, 0x1);
        gbc.writeMem(0x6723, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7e5);
        EXPECT(gbc.pc(), 0x6725);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0104
        gbc.setState(0x8d64, 0x1151, 0x6fa0, 0x44c1, 0x127d, 0x8971, 0x0, 0x1);
        gbc.writeMem(0x8d64, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1151);
        EXPECT(gbc.pc(), 0x8d66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d64), 0xcb);
        EXPECT(gbc.readMem(0x8d65), 0xe7);
        // CB E7 0105
        gbc.setState(0xafbf, 0x8f1c, 0x4e0, 0xa336, 0xa402, 0x61f9, 0x1, 0x0);
        gbc.writeMem(0xafbf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x8f1c);
        EXPECT(gbc.pc(), 0xafc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafbf), 0xcb);
        EXPECT(gbc.readMem(0xafc0), 0xe7);
        // CB E7 0106
        gbc.setState(0x24b4, 0x4f6b, 0x3ac0, 0xbe28, 0x875, 0xe325, 0x1, 0x1);
        gbc.writeMem(0x24b4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x4f6b);
        EXPECT(gbc.pc(), 0x24b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0107
        gbc.setState(0xeb27, 0xf62f, 0xa910, 0xcee, 0x3563, 0xe3d7, 0x0, 0x0);
        gbc.writeMem(0xeb27, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xf62f);
        EXPECT(gbc.pc(), 0xeb29);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb27), 0xcb);
        EXPECT(gbc.readMem(0xeb28), 0xe7);
        // CB E7 0108
        gbc.setState(0x50b5, 0x62c1, 0x7c70, 0xe989, 0xeba9, 0x795a, 0x0, 0x0);
        gbc.writeMem(0x50b5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x62c1);
        EXPECT(gbc.pc(), 0x50b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0109
        gbc.setState(0xee4e, 0x7478, 0x9d20, 0xd125, 0x4698, 0xad60, 0x1, 0x0);
        gbc.writeMem(0xee4e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x7478);
        EXPECT(gbc.pc(), 0xee50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee4e), 0xcb);
        EXPECT(gbc.readMem(0xee4f), 0xe7);
        // CB E7 010A
        gbc.setState(0x5b90, 0x2284, 0x2640, 0xa8ad, 0x5f73, 0x1ce4, 0x1, 0x1);
        gbc.writeMem(0x5b90, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2284);
        EXPECT(gbc.pc(), 0x5b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 010B
        gbc.setState(0x8a66, 0xb6f2, 0x2850, 0xefd3, 0x6439, 0x264, 0x0, 0x0);
        gbc.writeMem(0x8a66, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb6f2);
        EXPECT(gbc.pc(), 0x8a68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a66), 0xcb);
        EXPECT(gbc.readMem(0x8a67), 0xe7);
        // CB E7 010C
        gbc.setState(0x4bb8, 0xf689, 0x1500, 0x7725, 0x6d2a, 0x3395, 0x1, 0x0);
        gbc.writeMem(0x4bb8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xf689);
        EXPECT(gbc.pc(), 0x4bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 010D
        gbc.setState(0x67c1, 0xabc3, 0xafd0, 0xf2ed, 0xcfc9, 0xdba7, 0x0, 0x1);
        gbc.writeMem(0x67c1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xabc3);
        EXPECT(gbc.pc(), 0x67c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 010E
        gbc.setState(0x8e28, 0xf7ce, 0x4730, 0xa4dd, 0xe7dd, 0xf286, 0x1, 0x1);
        gbc.writeMem(0x8e28, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xf7ce);
        EXPECT(gbc.pc(), 0x8e2a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e28), 0xcb);
        EXPECT(gbc.readMem(0x8e29), 0xe7);
        // CB E7 010F
        gbc.setState(0x4d74, 0x5e7d, 0xd2a0, 0xadf9, 0x6456, 0x6b67, 0x1, 0x0);
        gbc.writeMem(0x4d74, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x5e7d);
        EXPECT(gbc.pc(), 0x4d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0110
        gbc.setState(0x59d8, 0xaeb, 0x3010, 0x354b, 0x4fb9, 0xab96, 0x1, 0x0);
        gbc.writeMem(0x59d8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xaeb);
        EXPECT(gbc.pc(), 0x59da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0111
        gbc.setState(0x2501, 0x4cbd, 0x86e0, 0x1faf, 0x73ad, 0x682c, 0x0, 0x0);
        gbc.writeMem(0x2501, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x4cbd);
        EXPECT(gbc.pc(), 0x2503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0112
        gbc.setState(0x1c1a, 0x551b, 0x3f70, 0x51dc, 0xaa35, 0x8681, 0x0, 0x0);
        gbc.writeMem(0x1c1a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x551b);
        EXPECT(gbc.pc(), 0x1c1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0113
        gbc.setState(0x6337, 0xe449, 0xd010, 0x60e1, 0x2454, 0xe36e, 0x0, 0x1);
        gbc.writeMem(0x6337, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xe449);
        EXPECT(gbc.pc(), 0x6339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0114
        gbc.setState(0xb24c, 0xd537, 0xa410, 0xf101, 0x68c1, 0x8fde, 0x0, 0x1);
        gbc.writeMem(0xb24c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd537);
        EXPECT(gbc.pc(), 0xb24e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb24c), 0xcb);
        EXPECT(gbc.readMem(0xb24d), 0xe7);
        // CB E7 0115
        gbc.setState(0x8f6a, 0xdf83, 0x28e0, 0x4edd, 0xc40c, 0x9f7d, 0x1, 0x0);
        gbc.writeMem(0x8f6a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xdf83);
        EXPECT(gbc.pc(), 0x8f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f6a), 0xcb);
        EXPECT(gbc.readMem(0x8f6b), 0xe7);
        // CB E7 0116
        gbc.setState(0x6d4d, 0x567a, 0xaed0, 0xd014, 0xa655, 0x18dd, 0x0, 0x1);
        gbc.writeMem(0x6d4d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x567a);
        EXPECT(gbc.pc(), 0x6d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0118
        gbc.setState(0x5f9b, 0x2c19, 0xcb30, 0x391c, 0x2adc, 0x6f79, 0x0, 0x0);
        gbc.writeMem(0x5f9b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x2c19);
        EXPECT(gbc.pc(), 0x5f9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0119
        gbc.setState(0x1faf, 0x8192, 0xacf0, 0x174b, 0x4478, 0x29f, 0x0, 0x1);
        gbc.writeMem(0x1faf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8192);
        EXPECT(gbc.pc(), 0x1fb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 011B
        gbc.setState(0x2c8e, 0xbec1, 0x6210, 0xb299, 0x269e, 0x1635, 0x0, 0x0);
        gbc.writeMem(0x2c8e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0xbec1);
        EXPECT(gbc.pc(), 0x2c90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 011C
        gbc.setState(0x89e1, 0xb435, 0x5b70, 0xfbbe, 0x7d13, 0x2ac9, 0x1, 0x0);
        gbc.writeMem(0x89e1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xb435);
        EXPECT(gbc.pc(), 0x89e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e1), 0xcb);
        EXPECT(gbc.readMem(0x89e2), 0xe7);
        // CB E7 011D
        gbc.setState(0xdb83, 0x834c, 0xbd40, 0x4541, 0x85d1, 0x4a3a, 0x1, 0x0);
        gbc.writeMem(0xdb83, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x834c);
        EXPECT(gbc.pc(), 0xdb85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdb83), 0xcb);
        EXPECT(gbc.readMem(0xdb84), 0xe7);
        // CB E7 011E
        gbc.setState(0x6002, 0xf687, 0xf090, 0xcb36, 0x5861, 0xa9db, 0x1, 0x1);
        gbc.writeMem(0x6002, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xf687);
        EXPECT(gbc.pc(), 0x6004);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 011F
        gbc.setState(0x9383, 0x3331, 0xddf0, 0xfd9a, 0xaa48, 0xae61, 0x0, 0x1);
        gbc.writeMem(0x9383, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x3331);
        EXPECT(gbc.pc(), 0x9385);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9383), 0xcb);
        EXPECT(gbc.readMem(0x9384), 0xe7);
        // CB E7 0120
        gbc.setState(0xb6c1, 0x7401, 0x2580, 0xe4e0, 0xdb98, 0x7c1, 0x1, 0x0);
        gbc.writeMem(0xb6c1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7401);
        EXPECT(gbc.pc(), 0xb6c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6c1), 0xcb);
        EXPECT(gbc.readMem(0xb6c2), 0xe7);
        // CB E7 0121
        gbc.setState(0x5322, 0x8f89, 0xcb0, 0x3e1c, 0xcf9e, 0x1859, 0x1, 0x1);
        gbc.writeMem(0x5322, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x8f89);
        EXPECT(gbc.pc(), 0x5324);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0122
        gbc.setState(0x8a5c, 0x6012, 0xc8a0, 0x46e0, 0xb02, 0x6fde, 0x1, 0x1);
        gbc.writeMem(0x8a5c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6012);
        EXPECT(gbc.pc(), 0x8a5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a5c), 0xcb);
        EXPECT(gbc.readMem(0x8a5d), 0xe7);
        // CB E7 0123
        gbc.setState(0xa6ef, 0x5496, 0x4310, 0xa4e2, 0x73b0, 0x6961, 0x0, 0x0);
        gbc.writeMem(0xa6ef, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x5496);
        EXPECT(gbc.pc(), 0xa6f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6ef), 0xcb);
        EXPECT(gbc.readMem(0xa6f0), 0xe7);
        // CB E7 0124
        gbc.setState(0x89f2, 0xf172, 0x1340, 0x3b35, 0x339d, 0x97e4, 0x0, 0x0);
        gbc.writeMem(0x89f2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf172);
        EXPECT(gbc.pc(), 0x89f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89f2), 0xcb);
        EXPECT(gbc.readMem(0x89f3), 0xe7);
        // CB E7 0125
        gbc.setState(0x9126, 0x4630, 0xab40, 0x9e96, 0x994e, 0x8cb1, 0x1, 0x0);
        gbc.writeMem(0x9126, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4630);
        EXPECT(gbc.pc(), 0x9128);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9126), 0xcb);
        EXPECT(gbc.readMem(0x9127), 0xe7);
        // CB E7 0126
        gbc.setState(0x2fe3, 0x96de, 0x8540, 0xff49, 0x26f4, 0xbe15, 0x1, 0x1);
        gbc.writeMem(0x2fe3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x96de);
        EXPECT(gbc.pc(), 0x2fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0127
        gbc.setState(0xa7bd, 0x20fd, 0xa5b0, 0x1639, 0x3241, 0x28d0, 0x0, 0x0);
        gbc.writeMem(0xa7bd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x20fd);
        EXPECT(gbc.pc(), 0xa7bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7bd), 0xcb);
        EXPECT(gbc.readMem(0xa7be), 0xe7);
        // CB E7 0128
        gbc.setState(0x9fd4, 0x9077, 0xe20, 0xa6db, 0xea73, 0x51b1, 0x1, 0x0);
        gbc.writeMem(0x9fd4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9077);
        EXPECT(gbc.pc(), 0x9fd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fd4), 0xcb);
        EXPECT(gbc.readMem(0x9fd5), 0xe7);
        // CB E7 0129
        gbc.setState(0x827b, 0x1e06, 0xb3f0, 0x8747, 0x7750, 0x9dbc, 0x1, 0x0);
        gbc.writeMem(0x827b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1e06);
        EXPECT(gbc.pc(), 0x827d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x827b), 0xcb);
        EXPECT(gbc.readMem(0x827c), 0xe7);
        // CB E7 012A
        gbc.setState(0x4bbc, 0x2cb6, 0x1f60, 0x202b, 0x37ad, 0xa2e, 0x0, 0x1);
        gbc.writeMem(0x4bbc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2cb6);
        EXPECT(gbc.pc(), 0x4bbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 012B
        gbc.setState(0x8cc0, 0xcf0, 0xf4c0, 0x6309, 0x17da, 0x1791, 0x0, 0x1);
        gbc.writeMem(0x8cc0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xcf0);
        EXPECT(gbc.pc(), 0x8cc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cc0), 0xcb);
        EXPECT(gbc.readMem(0x8cc1), 0xe7);
        // CB E7 012C
        gbc.setState(0xda44, 0x6d61, 0x8960, 0x8a81, 0x19c3, 0xad49, 0x0, 0x0);
        gbc.writeMem(0xda44, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6d61);
        EXPECT(gbc.pc(), 0xda46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda44), 0xcb);
        EXPECT(gbc.readMem(0xda45), 0xe7);
        // CB E7 012D
        gbc.setState(0xbd77, 0x38b2, 0x7960, 0xac94, 0x6319, 0x1d1d, 0x0, 0x0);
        gbc.writeMem(0xbd77, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x38b2);
        EXPECT(gbc.pc(), 0xbd79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd77), 0xcb);
        EXPECT(gbc.readMem(0xbd78), 0xe7);
        // CB E7 012E
        gbc.setState(0x2a71, 0xcd, 0xb420, 0xaad7, 0xbc21, 0xc2b0, 0x1, 0x1);
        gbc.writeMem(0x2a71, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xcd);
        EXPECT(gbc.pc(), 0x2a73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 012F
        gbc.setState(0x9a16, 0x47b1, 0xf6d0, 0xdfe, 0x3d3b, 0xfb24, 0x0, 0x0);
        gbc.writeMem(0x9a16, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x47b1);
        EXPECT(gbc.pc(), 0x9a18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a16), 0xcb);
        EXPECT(gbc.readMem(0x9a17), 0xe7);
        // CB E7 0130
        gbc.setState(0xc88a, 0xf5cb, 0x8440, 0x319b, 0xe057, 0x4ca2, 0x1, 0x1);
        gbc.writeMem(0xc88a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xf5cb);
        EXPECT(gbc.pc(), 0xc88c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc88a), 0xcb);
        EXPECT(gbc.readMem(0xc88b), 0xe7);
        // CB E7 0131
        gbc.setState(0x9834, 0x4c39, 0x6990, 0x663a, 0xae04, 0xc758, 0x1, 0x0);
        gbc.writeMem(0x9834, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4c39);
        EXPECT(gbc.pc(), 0x9836);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9834), 0xcb);
        EXPECT(gbc.readMem(0x9835), 0xe7);
        // CB E7 0132
        gbc.setState(0x798d, 0x6275, 0x3920, 0x5c2e, 0xa72e, 0x6652, 0x1, 0x0);
        gbc.writeMem(0x798d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x6275);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0133
        gbc.setState(0x930c, 0xf236, 0xf8e0, 0x827, 0xb4e4, 0x384a, 0x1, 0x0);
        gbc.writeMem(0x930c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xf236);
        EXPECT(gbc.pc(), 0x930e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930c), 0xcb);
        EXPECT(gbc.readMem(0x930d), 0xe7);
        // CB E7 0134
        gbc.setState(0x9177, 0x9245, 0x9d00, 0xc751, 0x1040, 0x183e, 0x0, 0x0);
        gbc.writeMem(0x9177, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x9245);
        EXPECT(gbc.pc(), 0x9179);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9177), 0xcb);
        EXPECT(gbc.readMem(0x9178), 0xe7);
        // CB E7 0135
        gbc.setState(0xe420, 0x5b19, 0xe5c0, 0x8d52, 0xeec2, 0x13d2, 0x0, 0x0);
        gbc.writeMem(0xe420, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5b19);
        EXPECT(gbc.pc(), 0xe422);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe420), 0xcb);
        EXPECT(gbc.readMem(0xe421), 0xe7);
        // CB E7 0136
        gbc.setState(0x9e5c, 0x5ed4, 0x3720, 0x4ab8, 0x605, 0xae6e, 0x0, 0x0);
        gbc.writeMem(0x9e5c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x5ed4);
        EXPECT(gbc.pc(), 0x9e5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e5c), 0xcb);
        EXPECT(gbc.readMem(0x9e5d), 0xe7);
        // CB E7 0137
        gbc.setState(0x4ac8, 0x58f2, 0x6c90, 0x2e80, 0x7d4d, 0x20f1, 0x0, 0x1);
        gbc.writeMem(0x4ac8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x58f2);
        EXPECT(gbc.pc(), 0x4aca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0138
        gbc.setState(0x8004, 0xc0b0, 0x16d0, 0x3204, 0x90b6, 0x4c34, 0x1, 0x1);
        gbc.writeMem(0x8004, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xc0b0);
        EXPECT(gbc.pc(), 0x8006);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8004), 0xcb);
        EXPECT(gbc.readMem(0x8005), 0xe7);
        // CB E7 0139
        gbc.setState(0x36c8, 0xb1ef, 0x3680, 0x461f, 0xd489, 0xa826, 0x0, 0x0);
        gbc.writeMem(0x36c8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb1ef);
        EXPECT(gbc.pc(), 0x36ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 013A
        gbc.setState(0x9978, 0x5358, 0xbfc0, 0x58b9, 0x5756, 0x10a8, 0x0, 0x1);
        gbc.writeMem(0x9978, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x5358);
        EXPECT(gbc.pc(), 0x997a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9978), 0xcb);
        EXPECT(gbc.readMem(0x9979), 0xe7);
        // CB E7 013B
        gbc.setState(0xea82, 0x2268, 0x2660, 0xcc31, 0x6347, 0xbf0b, 0x1, 0x0);
        gbc.writeMem(0xea82, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x2268);
        EXPECT(gbc.pc(), 0xea84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea82), 0xcb);
        EXPECT(gbc.readMem(0xea83), 0xe7);
        // CB E7 013C
        gbc.setState(0x32d5, 0xfe95, 0x8850, 0xf61f, 0x1509, 0xf8e2, 0x0, 0x1);
        gbc.writeMem(0x32d5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xfe95);
        EXPECT(gbc.pc(), 0x32d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 013D
        gbc.setState(0x268e, 0x2a36, 0x8870, 0xd23a, 0xa53f, 0xfd6f, 0x1, 0x0);
        gbc.writeMem(0x268e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x2a36);
        EXPECT(gbc.pc(), 0x2690);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 013E
        gbc.setState(0x494, 0x1398, 0x1d30, 0xd84e, 0x3675, 0xadb0, 0x0, 0x0);
        gbc.writeMem(0x494, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1398);
        EXPECT(gbc.pc(), 0x496);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 013F
        gbc.setState(0x4f33, 0xe5b6, 0xf980, 0x5448, 0x3cc4, 0xe6dd, 0x1, 0x1);
        gbc.writeMem(0x4f33, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe5b6);
        EXPECT(gbc.pc(), 0x4f35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0140
        gbc.setState(0xbd1, 0xc604, 0xc4c0, 0xcd5c, 0xb69f, 0x7b87, 0x0, 0x1);
        gbc.writeMem(0xbd1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xc604);
        EXPECT(gbc.pc(), 0xbd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0141
        gbc.setState(0xe945, 0xa80c, 0x3dd0, 0x3790, 0x1bc7, 0x63b2, 0x1, 0x1);
        gbc.writeMem(0xe945, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xa80c);
        EXPECT(gbc.pc(), 0xe947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe945), 0xcb);
        EXPECT(gbc.readMem(0xe946), 0xe7);
        // CB E7 0142
        gbc.setState(0xa675, 0x2223, 0x92e0, 0x1ab9, 0x3b78, 0xb468, 0x0, 0x1);
        gbc.writeMem(0xa675, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x2223);
        EXPECT(gbc.pc(), 0xa677);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa675), 0xcb);
        EXPECT(gbc.readMem(0xa676), 0xe7);
        // CB E7 0143
        gbc.setState(0xe7c4, 0xe906, 0xa0e0, 0x3c92, 0x44db, 0x9a04, 0x1, 0x0);
        gbc.writeMem(0xe7c4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xe906);
        EXPECT(gbc.pc(), 0xe7c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7c4), 0xcb);
        EXPECT(gbc.readMem(0xe7c5), 0xe7);
        // CB E7 0144
        gbc.setState(0x8ed7, 0x8785, 0xf2e0, 0x7812, 0x34a8, 0x52ea, 0x0, 0x0);
        gbc.writeMem(0x8ed7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8785);
        EXPECT(gbc.pc(), 0x8ed9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ed7), 0xcb);
        EXPECT(gbc.readMem(0x8ed8), 0xe7);
        // CB E7 0145
        gbc.setState(0x84c8, 0x1dc1, 0xc9d0, 0xeebe, 0x73, 0xc26c, 0x1, 0x1);
        gbc.writeMem(0x84c8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1dc1);
        EXPECT(gbc.pc(), 0x84ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84c8), 0xcb);
        EXPECT(gbc.readMem(0x84c9), 0xe7);
        // CB E7 0146
        gbc.setState(0x395c, 0x7c3b, 0xf830, 0x6cdf, 0x1cba, 0x2993, 0x1, 0x1);
        gbc.writeMem(0x395c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7c3b);
        EXPECT(gbc.pc(), 0x395e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0147
        gbc.setState(0x6166, 0xc2db, 0xad20, 0x8d8c, 0x6841, 0x1bbe, 0x0, 0x1);
        gbc.writeMem(0x6166, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc2db);
        EXPECT(gbc.pc(), 0x6168);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0148
        gbc.setState(0x427a, 0x7f2c, 0x1180, 0xbb34, 0x6276, 0x325a, 0x0, 0x0);
        gbc.writeMem(0x427a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7f2c);
        EXPECT(gbc.pc(), 0x427c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0149
        gbc.setState(0xc773, 0xc570, 0x300, 0x33c0, 0x118, 0x93f, 0x1, 0x0);
        gbc.writeMem(0xc773, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc570);
        EXPECT(gbc.pc(), 0xc775);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc773), 0xcb);
        EXPECT(gbc.readMem(0xc774), 0xe7);
        // CB E7 014A
        gbc.setState(0x5905, 0x22cb, 0xb3c0, 0xe5fe, 0xb36, 0x787, 0x0, 0x0);
        gbc.writeMem(0x5905, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x22cb);
        EXPECT(gbc.pc(), 0x5907);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 014B
        gbc.setState(0x4a70, 0x69e4, 0x410, 0x6d30, 0x1f38, 0xb3c6, 0x1, 0x0);
        gbc.writeMem(0x4a70, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x69e4);
        EXPECT(gbc.pc(), 0x4a72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 014C
        gbc.setState(0xdc30, 0xcbf7, 0xd200, 0xc456, 0xb5bb, 0x4b07, 0x0, 0x1);
        gbc.writeMem(0xdc30, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xcbf7);
        EXPECT(gbc.pc(), 0xdc32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc30), 0xcb);
        EXPECT(gbc.readMem(0xdc31), 0xe7);
        // CB E7 014D
        gbc.setState(0xdc9a, 0xb8f1, 0x3cd0, 0x9941, 0xca40, 0xa1cd, 0x0, 0x1);
        gbc.writeMem(0xdc9a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xb8f1);
        EXPECT(gbc.pc(), 0xdc9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc9a), 0xcb);
        EXPECT(gbc.readMem(0xdc9b), 0xe7);
        // CB E7 014E
        gbc.setState(0x5b45, 0x9cef, 0x85a0, 0x5201, 0x3f2d, 0x80e0, 0x1, 0x0);
        gbc.writeMem(0x5b45, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x9cef);
        EXPECT(gbc.pc(), 0x5b47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 014F
        gbc.setState(0x8c79, 0x3c44, 0x9990, 0xb585, 0x5940, 0xc389, 0x1, 0x0);
        gbc.writeMem(0x8c79, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3c44);
        EXPECT(gbc.pc(), 0x8c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c79), 0xcb);
        EXPECT(gbc.readMem(0x8c7a), 0xe7);
        // CB E7 0150
        gbc.setState(0x2f6, 0x2f96, 0x74e0, 0x3834, 0x272c, 0xb78d, 0x0, 0x0);
        gbc.writeMem(0x2f6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x2f96);
        EXPECT(gbc.pc(), 0x2f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0151
        gbc.setState(0x6778, 0xf303, 0x7ed0, 0xc1e3, 0x4a96, 0xce19, 0x0, 0x1);
        gbc.writeMem(0x6778, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xf303);
        EXPECT(gbc.pc(), 0x677a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0152
        gbc.setState(0xd263, 0x7af6, 0xa9c0, 0xc05b, 0x220e, 0x82af, 0x0, 0x1);
        gbc.writeMem(0xd263, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7af6);
        EXPECT(gbc.pc(), 0xd265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd263), 0xcb);
        EXPECT(gbc.readMem(0xd264), 0xe7);
        // CB E7 0153
        gbc.setState(0x6d6a, 0x23b6, 0x6120, 0x1acf, 0xf906, 0x1192, 0x0, 0x1);
        gbc.writeMem(0x6d6a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x23b6);
        EXPECT(gbc.pc(), 0x6d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0154
        gbc.setState(0x12e3, 0x47c2, 0x1390, 0x6d55, 0xfed9, 0xe0b7, 0x1, 0x1);
        gbc.writeMem(0x12e3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x47c2);
        EXPECT(gbc.pc(), 0x12e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0155
        gbc.setState(0x535d, 0x5e21, 0x21e0, 0xe305, 0x7544, 0xf50, 0x1, 0x1);
        gbc.writeMem(0x535d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5e21);
        EXPECT(gbc.pc(), 0x535f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0156
        gbc.setState(0x6412, 0x9f18, 0x8f40, 0xaaf5, 0xbc7e, 0x5dca, 0x0, 0x1);
        gbc.writeMem(0x6412, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x9f18);
        EXPECT(gbc.pc(), 0x6414);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0157
        gbc.setState(0x67dd, 0xaffc, 0x5410, 0x9626, 0xd643, 0x9d18, 0x1, 0x1);
        gbc.writeMem(0x67dd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xaffc);
        EXPECT(gbc.pc(), 0x67df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0158
        gbc.setState(0xa056, 0x8ab9, 0xb240, 0x1cd1, 0x9d59, 0x7f63, 0x1, 0x1);
        gbc.writeMem(0xa056, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x8ab9);
        EXPECT(gbc.pc(), 0xa058);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa056), 0xcb);
        EXPECT(gbc.readMem(0xa057), 0xe7);
        // CB E7 015A
        gbc.setState(0xe8f9, 0x40e3, 0x24c0, 0x3456, 0x1d63, 0x20bf, 0x0, 0x1);
        gbc.writeMem(0xe8f9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x40e3);
        EXPECT(gbc.pc(), 0xe8fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8f9), 0xcb);
        EXPECT(gbc.readMem(0xe8fa), 0xe7);
        // CB E7 015B
        gbc.setState(0x8a19, 0xcb72, 0x82b0, 0x71a7, 0xe7eb, 0x91f1, 0x0, 0x1);
        gbc.writeMem(0x8a19, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcb72);
        EXPECT(gbc.pc(), 0x8a1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a19), 0xcb);
        EXPECT(gbc.readMem(0x8a1a), 0xe7);
        // CB E7 015C
        gbc.setState(0x70a5, 0xbbf7, 0x2320, 0x8b5, 0xb0c, 0xf6f2, 0x0, 0x1);
        gbc.writeMem(0x70a5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xbbf7);
        EXPECT(gbc.pc(), 0x70a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 015E
        gbc.setState(0x3049, 0x1c82, 0x1f00, 0x523c, 0x2349, 0xad8a, 0x0, 0x0);
        gbc.writeMem(0x3049, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x1c82);
        EXPECT(gbc.pc(), 0x304b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 015F
        gbc.setState(0xcbc6, 0x8468, 0xb580, 0x573a, 0x40b, 0xd3a2, 0x0, 0x0);
        gbc.writeMem(0xcbc6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x8468);
        EXPECT(gbc.pc(), 0xcbc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbc6), 0xcb);
        EXPECT(gbc.readMem(0xcbc7), 0xe7);
        // CB E7 0160
        gbc.setState(0xbddc, 0x1d76, 0xb2b0, 0x5ed9, 0x1c55, 0xed01, 0x1, 0x1);
        gbc.writeMem(0xbddc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1d76);
        EXPECT(gbc.pc(), 0xbdde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbddc), 0xcb);
        EXPECT(gbc.readMem(0xbddd), 0xe7);
        // CB E7 0161
        gbc.setState(0x1f59, 0x3b89, 0xb260, 0x108, 0x95e, 0x7d28, 0x0, 0x0);
        gbc.writeMem(0x1f59, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3b89);
        EXPECT(gbc.pc(), 0x1f5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0162
        gbc.setState(0x1e86, 0x1638, 0x49c0, 0x2b0c, 0x7166, 0x5e1d, 0x0, 0x0);
        gbc.writeMem(0x1e86, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x1638);
        EXPECT(gbc.pc(), 0x1e88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0163
        gbc.setState(0x4f90, 0x992a, 0x7550, 0xf68a, 0xf8ac, 0x7f3e, 0x0, 0x1);
        gbc.writeMem(0x4f90, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x992a);
        EXPECT(gbc.pc(), 0x4f92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0164
        gbc.setState(0xd83c, 0xdaa4, 0x5270, 0xea65, 0xd6a, 0xaa8a, 0x0, 0x0);
        gbc.writeMem(0xd83c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xdaa4);
        EXPECT(gbc.pc(), 0xd83e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd83c), 0xcb);
        EXPECT(gbc.readMem(0xd83d), 0xe7);
        // CB E7 0165
        gbc.setState(0xeb7f, 0x2f5, 0xdbc0, 0x5597, 0x73a2, 0xbc0, 0x1, 0x1);
        gbc.writeMem(0xeb7f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2f5);
        EXPECT(gbc.pc(), 0xeb81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb7f), 0xcb);
        EXPECT(gbc.readMem(0xeb80), 0xe7);
        // CB E7 0166
        gbc.setState(0x8bde, 0xcdef, 0xc750, 0x13b7, 0x135, 0x2ead, 0x1, 0x1);
        gbc.writeMem(0x8bde, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xcdef);
        EXPECT(gbc.pc(), 0x8be0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bde), 0xcb);
        EXPECT(gbc.readMem(0x8bdf), 0xe7);
        // CB E7 0167
        gbc.setState(0xdc19, 0xc4aa, 0x7a70, 0x50ee, 0xb9cc, 0x761b, 0x0, 0x1);
        gbc.writeMem(0xdc19, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xc4aa);
        EXPECT(gbc.pc(), 0xdc1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc19), 0xcb);
        EXPECT(gbc.readMem(0xdc1a), 0xe7);
        // CB E7 0168
        gbc.setState(0x77dc, 0x29b1, 0x2af0, 0x62d2, 0xacf7, 0xcf3c, 0x0, 0x0);
        gbc.writeMem(0x77dc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x29b1);
        EXPECT(gbc.pc(), 0x77de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0169
        gbc.setState(0xa98c, 0x6dc3, 0xba0, 0x77eb, 0x87c5, 0xb001, 0x0, 0x0);
        gbc.writeMem(0xa98c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x6dc3);
        EXPECT(gbc.pc(), 0xa98e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98c), 0xcb);
        EXPECT(gbc.readMem(0xa98d), 0xe7);
        // CB E7 016A
        gbc.setState(0x42f4, 0xbf0d, 0x88d0, 0x2b57, 0xb155, 0xe76, 0x0, 0x1);
        gbc.writeMem(0x42f4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xbf0d);
        EXPECT(gbc.pc(), 0x42f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 016B
        gbc.setState(0x62ff, 0xd922, 0x8090, 0xc20c, 0xdfbe, 0xd51b, 0x1, 0x1);
        gbc.writeMem(0x62ff, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd922);
        EXPECT(gbc.pc(), 0x6301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 016C
        gbc.setState(0x9729, 0xcf1e, 0xf720, 0x97c1, 0x8311, 0x926e, 0x0, 0x1);
        gbc.writeMem(0x9729, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xcf1e);
        EXPECT(gbc.pc(), 0x972b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9729), 0xcb);
        EXPECT(gbc.readMem(0x972a), 0xe7);
        // CB E7 016D
        gbc.setState(0x436b, 0xfc93, 0x69d0, 0xbed0, 0x512f, 0x9344, 0x1, 0x0);
        gbc.writeMem(0x436b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xfc93);
        EXPECT(gbc.pc(), 0x436d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 016E
        gbc.setState(0x566f, 0x64bf, 0x4d90, 0x6803, 0xb7c1, 0xe669, 0x1, 0x0);
        gbc.writeMem(0x566f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x64bf);
        EXPECT(gbc.pc(), 0x5671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 016F
        gbc.setState(0x7bce, 0x2bc1, 0x80c0, 0xc2a0, 0x3a7d, 0x58c6, 0x1, 0x1);
        gbc.writeMem(0x7bce, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x2bc1);
        EXPECT(gbc.pc(), 0x7bd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0170
        gbc.setState(0x7866, 0xdd6b, 0xbce0, 0x8f6f, 0xb5ed, 0xe52e, 0x1, 0x0);
        gbc.writeMem(0x7866, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xdd6b);
        EXPECT(gbc.pc(), 0x7868);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0171
        gbc.setState(0xdf5b, 0xc846, 0xba10, 0x6db2, 0xcdb9, 0xf063, 0x0, 0x0);
        gbc.writeMem(0xdf5b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xc846);
        EXPECT(gbc.pc(), 0xdf5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5b), 0xcb);
        EXPECT(gbc.readMem(0xdf5c), 0xe7);
        // CB E7 0172
        gbc.setState(0x3738, 0x7c08, 0x59f0, 0x58ba, 0x1ec3, 0x4cc1, 0x0, 0x1);
        gbc.writeMem(0x3738, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7c08);
        EXPECT(gbc.pc(), 0x373a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0173
        gbc.setState(0x989c, 0xd988, 0xee80, 0x6964, 0x4611, 0xb37e, 0x1, 0x1);
        gbc.writeMem(0x989c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xd988);
        EXPECT(gbc.pc(), 0x989e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x989c), 0xcb);
        EXPECT(gbc.readMem(0x989d), 0xe7);
        // CB E7 0174
        gbc.setState(0x9597, 0x5ac9, 0x2990, 0x9800, 0x102, 0x7b80, 0x1, 0x1);
        gbc.writeMem(0x9597, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5ac9);
        EXPECT(gbc.pc(), 0x9599);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9597), 0xcb);
        EXPECT(gbc.readMem(0x9598), 0xe7);
        // CB E7 0175
        gbc.setState(0x3b9d, 0x772b, 0x1b70, 0x440c, 0x91f9, 0xdcf5, 0x1, 0x0);
        gbc.writeMem(0x3b9d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x772b);
        EXPECT(gbc.pc(), 0x3b9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0176
        gbc.setState(0xc36b, 0x8f3a, 0x58b0, 0x63ad, 0xca78, 0x6b3b, 0x0, 0x1);
        gbc.writeMem(0xc36b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x8f3a);
        EXPECT(gbc.pc(), 0xc36d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc36b), 0xcb);
        EXPECT(gbc.readMem(0xc36c), 0xe7);
        // CB E7 0177
        gbc.setState(0x894e, 0x28e7, 0xfa80, 0x2949, 0x2732, 0xc1aa, 0x0, 0x0);
        gbc.writeMem(0x894e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x28e7);
        EXPECT(gbc.pc(), 0x8950);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x894e), 0xcb);
        EXPECT(gbc.readMem(0x894f), 0xe7);
        // CB E7 0178
        gbc.setState(0x4151, 0xe898, 0xb6e0, 0xb3ac, 0xe861, 0xe8ee, 0x1, 0x1);
        gbc.writeMem(0x4151, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xe898);
        EXPECT(gbc.pc(), 0x4153);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0179
        gbc.setState(0x5209, 0x21e6, 0xd170, 0xee55, 0x19e5, 0x75a9, 0x0, 0x0);
        gbc.writeMem(0x5209, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x21e6);
        EXPECT(gbc.pc(), 0x520b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 017A
        gbc.setState(0x9f37, 0x29fd, 0x5460, 0x319, 0xb771, 0xd91e, 0x1, 0x0);
        gbc.writeMem(0x9f37, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x29fd);
        EXPECT(gbc.pc(), 0x9f39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f37), 0xcb);
        EXPECT(gbc.readMem(0x9f38), 0xe7);
        // CB E7 017B
        gbc.setState(0xb557, 0x6d5d, 0x7650, 0x3741, 0x64e5, 0x186c, 0x0, 0x1);
        gbc.writeMem(0xb557, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6d5d);
        EXPECT(gbc.pc(), 0xb559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb557), 0xcb);
        EXPECT(gbc.readMem(0xb558), 0xe7);
        // CB E7 017C
        gbc.setState(0x304d, 0xd85b, 0x86b0, 0xfb88, 0x9bc5, 0xeba4, 0x1, 0x0);
        gbc.writeMem(0x304d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xd85b);
        EXPECT(gbc.pc(), 0x304f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 017D
        gbc.setState(0x109d, 0x89a0, 0xf650, 0xc8fc, 0x5be0, 0x183a, 0x0, 0x0);
        gbc.writeMem(0x109d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x89a0);
        EXPECT(gbc.pc(), 0x109f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 017E
        gbc.setState(0xd983, 0xb5a8, 0x7540, 0x5dd7, 0x7a39, 0x9881, 0x0, 0x0);
        gbc.writeMem(0xd983, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb5a8);
        EXPECT(gbc.pc(), 0xd985);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd983), 0xcb);
        EXPECT(gbc.readMem(0xd984), 0xe7);
        // CB E7 017F
        gbc.setState(0x393c, 0xdeb7, 0x7ce0, 0x1a84, 0x39b6, 0x443c, 0x1, 0x1);
        gbc.writeMem(0x393c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xdeb7);
        EXPECT(gbc.pc(), 0x393e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0180
        gbc.setState(0xd687, 0xfb65, 0x8b0, 0x4c5f, 0x6708, 0x83f0, 0x0, 0x1);
        gbc.writeMem(0xd687, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xfb65);
        EXPECT(gbc.pc(), 0xd689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd687), 0xcb);
        EXPECT(gbc.readMem(0xd688), 0xe7);
        // CB E7 0181
        gbc.setState(0x2dc8, 0x7e68, 0x60e0, 0xa24a, 0x9058, 0x15f0, 0x0, 0x1);
        gbc.writeMem(0x2dc8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7e68);
        EXPECT(gbc.pc(), 0x2dca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0183
        gbc.setState(0xe986, 0xf81f, 0xb00, 0xe375, 0xaa04, 0x38ab, 0x1, 0x1);
        gbc.writeMem(0xe986, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xf81f);
        EXPECT(gbc.pc(), 0xe988);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe986), 0xcb);
        EXPECT(gbc.readMem(0xe987), 0xe7);
        // CB E7 0184
        gbc.setState(0x9b64, 0x6f35, 0xf110, 0xf4c6, 0x1a68, 0xb307, 0x1, 0x0);
        gbc.writeMem(0x9b64, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x6f35);
        EXPECT(gbc.pc(), 0x9b66);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b64), 0xcb);
        EXPECT(gbc.readMem(0x9b65), 0xe7);
        // CB E7 0185
        gbc.setState(0x7cbd, 0xbb49, 0x98f0, 0x3dfd, 0x496c, 0x7446, 0x0, 0x0);
        gbc.writeMem(0x7cbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xbb49);
        EXPECT(gbc.pc(), 0x7cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0186
        gbc.setState(0x8adc, 0x4e14, 0xea30, 0x5ae0, 0x3d4a, 0x9c29, 0x0, 0x0);
        gbc.writeMem(0x8adc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x4e14);
        EXPECT(gbc.pc(), 0x8ade);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8adc), 0xcb);
        EXPECT(gbc.readMem(0x8add), 0xe7);
        // CB E7 0187
        gbc.setState(0x357, 0xb96e, 0x9160, 0xfd46, 0xd1f6, 0xb838, 0x1, 0x1);
        gbc.writeMem(0x357, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb96e);
        EXPECT(gbc.pc(), 0x359);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0188
        gbc.setState(0xc19a, 0x2905, 0xad10, 0xed99, 0x520c, 0xaa50, 0x1, 0x1);
        gbc.writeMem(0xc19a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x2905);
        EXPECT(gbc.pc(), 0xc19c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc19a), 0xcb);
        EXPECT(gbc.readMem(0xc19b), 0xe7);
        // CB E7 0189
        gbc.setState(0x9e3b, 0x8515, 0x7b0, 0x431, 0xac6, 0x1cf7, 0x0, 0x0);
        gbc.writeMem(0x9e3b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8515);
        EXPECT(gbc.pc(), 0x9e3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3b), 0xcb);
        EXPECT(gbc.readMem(0x9e3c), 0xe7);
        // CB E7 018A
        gbc.setState(0x7ddd, 0x7f8e, 0xc320, 0xcc1, 0x84d1, 0xd5a0, 0x1, 0x1);
        gbc.writeMem(0x7ddd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x7f8e);
        EXPECT(gbc.pc(), 0x7ddf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 018B
        gbc.setState(0x65d8, 0x1806, 0xb460, 0x8151, 0x2195, 0xa1ed, 0x0, 0x1);
        gbc.writeMem(0x65d8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1806);
        EXPECT(gbc.pc(), 0x65da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 018C
        gbc.setState(0xac9f, 0x1444, 0xfbf0, 0x1b47, 0x951d, 0x69a5, 0x0, 0x0);
        gbc.writeMem(0xac9f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x1444);
        EXPECT(gbc.pc(), 0xaca1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac9f), 0xcb);
        EXPECT(gbc.readMem(0xaca0), 0xe7);
        // CB E7 018D
        gbc.setState(0x276d, 0x30fb, 0xb930, 0x89e3, 0xaca5, 0x8540, 0x1, 0x0);
        gbc.writeMem(0x276d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x30fb);
        EXPECT(gbc.pc(), 0x276f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 018F
        gbc.setState(0x855b, 0x7a6e, 0xde70, 0x2d20, 0x113b, 0xe93c, 0x0, 0x0);
        gbc.writeMem(0x855b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x7a6e);
        EXPECT(gbc.pc(), 0x855d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x855b), 0xcb);
        EXPECT(gbc.readMem(0x855c), 0xe7);
        // CB E7 0190
        gbc.setState(0x110c, 0x6551, 0x2120, 0x2b3e, 0xb8ba, 0x45fc, 0x0, 0x0);
        gbc.writeMem(0x110c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x6551);
        EXPECT(gbc.pc(), 0x110e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0192
        gbc.setState(0x4a78, 0xf7f2, 0x7930, 0x4223, 0xc20a, 0x7cdd, 0x1, 0x1);
        gbc.writeMem(0x4a78, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xf7f2);
        EXPECT(gbc.pc(), 0x4a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0193
        gbc.setState(0xe889, 0xfe5c, 0x1e80, 0x9a9f, 0x7e7c, 0x6660, 0x0, 0x1);
        gbc.writeMem(0xe889, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xfe5c);
        EXPECT(gbc.pc(), 0xe88b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe889), 0xcb);
        EXPECT(gbc.readMem(0xe88a), 0xe7);
        // CB E7 0194
        gbc.setState(0xc2d6, 0x4cef, 0x5150, 0x8408, 0xd6af, 0x3960, 0x0, 0x1);
        gbc.writeMem(0xc2d6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x4cef);
        EXPECT(gbc.pc(), 0xc2d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2d6), 0xcb);
        EXPECT(gbc.readMem(0xc2d7), 0xe7);
        // CB E7 0195
        gbc.setState(0xbe1, 0x1b69, 0x6fb0, 0x525, 0x1134, 0x4fa8, 0x0, 0x1);
        gbc.writeMem(0xbe1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x1b69);
        EXPECT(gbc.pc(), 0xbe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0196
        gbc.setState(0x3fa3, 0x704b, 0xc5a0, 0x7df6, 0x68ea, 0xd22b, 0x1, 0x1);
        gbc.writeMem(0x3fa3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x704b);
        EXPECT(gbc.pc(), 0x3fa5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0197
        gbc.setState(0x276, 0xc2c6, 0x76b0, 0x30c2, 0xc4d9, 0x417b, 0x1, 0x0);
        gbc.writeMem(0x276, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xc2c6);
        EXPECT(gbc.pc(), 0x278);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0198
        gbc.setState(0xe090, 0x5927, 0xb900, 0x7f1d, 0x846, 0x9abf, 0x0, 0x1);
        gbc.writeMem(0xe090, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x5927);
        EXPECT(gbc.pc(), 0xe092);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe090), 0xcb);
        EXPECT(gbc.readMem(0xe091), 0xe7);
        // CB E7 0199
        gbc.setState(0xdfcc, 0x8d5b, 0x2900, 0xdcb2, 0x1729, 0xc341, 0x0, 0x0);
        gbc.writeMem(0xdfcc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x8d5b);
        EXPECT(gbc.pc(), 0xdfce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdfcc), 0xcb);
        EXPECT(gbc.readMem(0xdfcd), 0xe7);
        // CB E7 019A
        gbc.setState(0xce2e, 0xb296, 0xc350, 0xfbb8, 0x3e04, 0x5421, 0x1, 0x1);
        gbc.writeMem(0xce2e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xb296);
        EXPECT(gbc.pc(), 0xce30);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce2e), 0xcb);
        EXPECT(gbc.readMem(0xce2f), 0xe7);
        // CB E7 019B
        gbc.setState(0x1ee2, 0x25c2, 0xb3a0, 0x7e7c, 0x821f, 0x674f, 0x1, 0x0);
        gbc.writeMem(0x1ee2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x25c2);
        EXPECT(gbc.pc(), 0x1ee4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 019C
        gbc.setState(0x5a58, 0x7c72, 0x1e00, 0xccc7, 0x7ccd, 0xcff3, 0x1, 0x1);
        gbc.writeMem(0x5a58, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x7c72);
        EXPECT(gbc.pc(), 0x5a5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 019E
        gbc.setState(0xc65c, 0x6459, 0xae80, 0xda1, 0xa00e, 0xf814, 0x0, 0x0);
        gbc.writeMem(0xc65c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x6459);
        EXPECT(gbc.pc(), 0xc65e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc65c), 0xcb);
        EXPECT(gbc.readMem(0xc65d), 0xe7);
        // CB E7 019F
        gbc.setState(0xdc1f, 0xcce4, 0xe520, 0xc657, 0xaf6, 0x90bd, 0x1, 0x1);
        gbc.writeMem(0xdc1f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xcce4);
        EXPECT(gbc.pc(), 0xdc21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc1f), 0xcb);
        EXPECT(gbc.readMem(0xdc20), 0xe7);
        // CB E7 01A0
        gbc.setState(0x8e5e, 0x2de3, 0x92f0, 0x5511, 0xff89, 0xe964, 0x0, 0x1);
        gbc.writeMem(0x8e5e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x2de3);
        EXPECT(gbc.pc(), 0x8e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e5e), 0xcb);
        EXPECT(gbc.readMem(0x8e5f), 0xe7);
        // CB E7 01A2
        gbc.setState(0x812, 0x167f, 0x6680, 0xa523, 0x28c8, 0x12c7, 0x1, 0x1);
        gbc.writeMem(0x812, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x167f);
        EXPECT(gbc.pc(), 0x814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01A3
        gbc.setState(0xd04a, 0x1db9, 0x56a0, 0xee2c, 0xd74c, 0x6b8e, 0x1, 0x0);
        gbc.writeMem(0xd04a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1db9);
        EXPECT(gbc.pc(), 0xd04c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd04a), 0xcb);
        EXPECT(gbc.readMem(0xd04b), 0xe7);
        // CB E7 01A4
        gbc.setState(0xa819, 0x587f, 0xf510, 0x4990, 0x19c6, 0xb786, 0x0, 0x1);
        gbc.writeMem(0xa819, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x587f);
        EXPECT(gbc.pc(), 0xa81b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa819), 0xcb);
        EXPECT(gbc.readMem(0xa81a), 0xe7);
        // CB E7 01A5
        gbc.setState(0xca3c, 0xbed3, 0xcb20, 0xc69b, 0x8b0, 0x9d69, 0x0, 0x1);
        gbc.writeMem(0xca3c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xbed3);
        EXPECT(gbc.pc(), 0xca3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca3c), 0xcb);
        EXPECT(gbc.readMem(0xca3d), 0xe7);
        // CB E7 01A6
        gbc.setState(0x5e98, 0xb98a, 0x1a80, 0x41ea, 0xc2e1, 0xe3bc, 0x1, 0x1);
        gbc.writeMem(0x5e98, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb98a);
        EXPECT(gbc.pc(), 0x5e9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01A7
        gbc.setState(0xcfbd, 0xb06c, 0xa2d0, 0x9bfb, 0x2f9f, 0xac75, 0x1, 0x1);
        gbc.writeMem(0xcfbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xb06c);
        EXPECT(gbc.pc(), 0xcfbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfbd), 0xcb);
        EXPECT(gbc.readMem(0xcfbe), 0xe7);
        // CB E7 01A8
        gbc.setState(0x2a6c, 0x9239, 0x1d0, 0x6726, 0x57ff, 0xf63d, 0x1, 0x1);
        gbc.writeMem(0x2a6c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9239);
        EXPECT(gbc.pc(), 0x2a6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01A9
        gbc.setState(0x620d, 0x27f1, 0x6dd0, 0x7055, 0x551d, 0x7c6d, 0x0, 0x1);
        gbc.writeMem(0x620d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x27f1);
        EXPECT(gbc.pc(), 0x620f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01AA
        gbc.setState(0x8e05, 0x56aa, 0xacd0, 0xaa86, 0xceca, 0xb2bd, 0x0, 0x0);
        gbc.writeMem(0x8e05, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x56aa);
        EXPECT(gbc.pc(), 0x8e07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e05), 0xcb);
        EXPECT(gbc.readMem(0x8e06), 0xe7);
        // CB E7 01AB
        gbc.setState(0x1b4a, 0x8170, 0xd100, 0x6e4e, 0x5961, 0xa319, 0x0, 0x1);
        gbc.writeMem(0x1b4a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x8170);
        EXPECT(gbc.pc(), 0x1b4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01AC
        gbc.setState(0x91c0, 0x974a, 0xe920, 0x6db0, 0x6cb5, 0x1cbb, 0x1, 0x1);
        gbc.writeMem(0x91c0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x974a);
        EXPECT(gbc.pc(), 0x91c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c0), 0xcb);
        EXPECT(gbc.readMem(0x91c1), 0xe7);
        // CB E7 01AD
        gbc.setState(0x2a8e, 0x420, 0x3890, 0xe533, 0xe528, 0x46e0, 0x1, 0x0);
        gbc.writeMem(0x2a8e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x420);
        EXPECT(gbc.pc(), 0x2a90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01AE
        gbc.setState(0x4791, 0xbcb7, 0xa4c0, 0x7044, 0x4f3, 0xe840, 0x1, 0x0);
        gbc.writeMem(0x4791, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbcb7);
        EXPECT(gbc.pc(), 0x4793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01AF
        gbc.setState(0xeed8, 0xd44d, 0x8870, 0x30b7, 0x157e, 0x1de3, 0x0, 0x0);
        gbc.writeMem(0xeed8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xd44d);
        EXPECT(gbc.pc(), 0xeeda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeed8), 0xcb);
        EXPECT(gbc.readMem(0xeed9), 0xe7);
        // CB E7 01B0
        gbc.setState(0x2af7, 0x7d47, 0x8d0, 0xa2ca, 0x6e6a, 0x3b5f, 0x0, 0x1);
        gbc.writeMem(0x2af7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x7d47);
        EXPECT(gbc.pc(), 0x2af9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01B2
        gbc.setState(0x393f, 0x9846, 0x9b0, 0x3202, 0xadf0, 0x66ab, 0x0, 0x1);
        gbc.writeMem(0x393f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x9846);
        EXPECT(gbc.pc(), 0x3941);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01B3
        gbc.setState(0x10d1, 0xf141, 0xa880, 0x3f3, 0x3d49, 0xc9cd, 0x1, 0x0);
        gbc.writeMem(0x10d1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xf141);
        EXPECT(gbc.pc(), 0x10d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01B4
        gbc.setState(0x302c, 0xe0b5, 0x4800, 0x7f34, 0x5bc4, 0x868c, 0x0, 0x1);
        gbc.writeMem(0x302c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xe0b5);
        EXPECT(gbc.pc(), 0x302e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01B5
        gbc.setState(0x8658, 0xee2, 0x7d30, 0x4a9f, 0x1792, 0x4475, 0x1, 0x0);
        gbc.writeMem(0x8658, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xee2);
        EXPECT(gbc.pc(), 0x865a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8658), 0xcb);
        EXPECT(gbc.readMem(0x8659), 0xe7);
        // CB E7 01B6
        gbc.setState(0x5f97, 0x844d, 0x9040, 0x13c5, 0x9140, 0xfd43, 0x1, 0x0);
        gbc.writeMem(0x5f97, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x844d);
        EXPECT(gbc.pc(), 0x5f99);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01B7
        gbc.setState(0xbbbb, 0xaafa, 0x1a30, 0x3e6f, 0x1910, 0x326a, 0x1, 0x1);
        gbc.writeMem(0xbbbb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xaafa);
        EXPECT(gbc.pc(), 0xbbbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbbb), 0xcb);
        EXPECT(gbc.readMem(0xbbbc), 0xe7);
        // CB E7 01B9
        gbc.setState(0x523f, 0xbdc8, 0x2500, 0xdabb, 0xdf01, 0xc911, 0x0, 0x0);
        gbc.writeMem(0x523f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xbdc8);
        EXPECT(gbc.pc(), 0x5241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01BA
        gbc.setState(0x9c22, 0x98b7, 0x86d0, 0xaaf7, 0x9da7, 0xbea9, 0x1, 0x1);
        gbc.writeMem(0x9c22, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x98b7);
        EXPECT(gbc.pc(), 0x9c24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c22), 0xcb);
        EXPECT(gbc.readMem(0x9c23), 0xe7);
        // CB E7 01BB
        gbc.setState(0xa7c3, 0x2fb7, 0x2ab0, 0x9eb5, 0xcd35, 0x69bd, 0x0, 0x1);
        gbc.writeMem(0xa7c3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x2fb7);
        EXPECT(gbc.pc(), 0xa7c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7c3), 0xcb);
        EXPECT(gbc.readMem(0xa7c4), 0xe7);
        // CB E7 01BC
        gbc.setState(0x12a5, 0xdb23, 0x7050, 0x189f, 0x471d, 0x8711, 0x0, 0x0);
        gbc.writeMem(0x12a5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xdb23);
        EXPECT(gbc.pc(), 0x12a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01BD
        gbc.setState(0x76ed, 0x9026, 0x13f0, 0x3a02, 0x4cde, 0x6158, 0x0, 0x0);
        gbc.writeMem(0x76ed, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9026);
        EXPECT(gbc.pc(), 0x76ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01BE
        gbc.setState(0x516a, 0xfe03, 0x3de0, 0x397d, 0x708d, 0xf17d, 0x1, 0x0);
        gbc.writeMem(0x516a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xfe03);
        EXPECT(gbc.pc(), 0x516c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01BF
        gbc.setState(0x159a, 0xae6f, 0x98f0, 0x2152, 0xe269, 0xa725, 0x1, 0x0);
        gbc.writeMem(0x159a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xae6f);
        EXPECT(gbc.pc(), 0x159c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01C0
        gbc.setState(0x750e, 0xc243, 0x56c0, 0xa2e6, 0x9268, 0x3f37, 0x1, 0x1);
        gbc.writeMem(0x750e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc243);
        EXPECT(gbc.pc(), 0x7510);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01C1
        gbc.setState(0xd19c, 0xdf56, 0x4e60, 0x49d1, 0x71d6, 0x2921, 0x1, 0x1);
        gbc.writeMem(0xd19c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xdf56);
        EXPECT(gbc.pc(), 0xd19e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd19c), 0xcb);
        EXPECT(gbc.readMem(0xd19d), 0xe7);
        // CB E7 01C2
        gbc.setState(0x2f06, 0x3f0c, 0x7d20, 0xba09, 0xb387, 0xd777, 0x0, 0x1);
        gbc.writeMem(0x2f06, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x3f0c);
        EXPECT(gbc.pc(), 0x2f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01C3
        gbc.setState(0x3ccf, 0x8a24, 0xddf0, 0xcae1, 0xb51e, 0xede6, 0x0, 0x1);
        gbc.writeMem(0x3ccf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x8a24);
        EXPECT(gbc.pc(), 0x3cd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01C4
        gbc.setState(0x47e9, 0x4b95, 0xfc40, 0x9082, 0x6333, 0x87cb, 0x0, 0x0);
        gbc.writeMem(0x47e9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x4b95);
        EXPECT(gbc.pc(), 0x47eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01C5
        gbc.setState(0x7508, 0x5259, 0x3630, 0x165b, 0x2f25, 0x6368, 0x1, 0x1);
        gbc.writeMem(0x7508, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5259);
        EXPECT(gbc.pc(), 0x750a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01C6
        gbc.setState(0x2671, 0x4bce, 0xacb0, 0xde5f, 0x6f47, 0xcbca, 0x0, 0x0);
        gbc.writeMem(0x2671, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x4bce);
        EXPECT(gbc.pc(), 0x2673);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01C7
        gbc.setState(0x2a13, 0x97e7, 0xaad0, 0x5a48, 0xa4ee, 0x39d, 0x1, 0x0);
        gbc.writeMem(0x2a13, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x97e7);
        EXPECT(gbc.pc(), 0x2a15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01C8
        gbc.setState(0xc9eb, 0x1ccd, 0x1790, 0x267d, 0x6175, 0x315, 0x1, 0x0);
        gbc.writeMem(0xc9eb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1ccd);
        EXPECT(gbc.pc(), 0xc9ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9eb), 0xcb);
        EXPECT(gbc.readMem(0xc9ec), 0xe7);
        // CB E7 01C9
        gbc.setState(0x682b, 0xce57, 0xd240, 0x428c, 0xeed2, 0x6861, 0x1, 0x0);
        gbc.writeMem(0x682b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xce57);
        EXPECT(gbc.pc(), 0x682d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01CA
        gbc.setState(0x9fb7, 0x6882, 0x72a0, 0x9c98, 0x4f20, 0xb792, 0x0, 0x1);
        gbc.writeMem(0x9fb7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x6882);
        EXPECT(gbc.pc(), 0x9fb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb7), 0xcb);
        EXPECT(gbc.readMem(0x9fb8), 0xe7);
        // CB E7 01CB
        gbc.setState(0x8b5b, 0x4362, 0x3bc0, 0xac90, 0x7766, 0x848b, 0x0, 0x0);
        gbc.writeMem(0x8b5b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x4362);
        EXPECT(gbc.pc(), 0x8b5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b5b), 0xcb);
        EXPECT(gbc.readMem(0x8b5c), 0xe7);
        // CB E7 01CC
        gbc.setState(0x5cf3, 0xcafb, 0x1120, 0xf6b6, 0x8b06, 0x8922, 0x0, 0x1);
        gbc.writeMem(0x5cf3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xcafb);
        EXPECT(gbc.pc(), 0x5cf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01CD
        gbc.setState(0x4b59, 0x4423, 0x90a0, 0x3543, 0xad7, 0xf488, 0x0, 0x0);
        gbc.writeMem(0x4b59, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4423);
        EXPECT(gbc.pc(), 0x4b5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01CE
        gbc.setState(0x9243, 0x5c62, 0xd090, 0xaf3c, 0xd77b, 0x5205, 0x1, 0x0);
        gbc.writeMem(0x9243, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5c62);
        EXPECT(gbc.pc(), 0x9245);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9243), 0xcb);
        EXPECT(gbc.readMem(0x9244), 0xe7);
        // CB E7 01CF
        gbc.setState(0x963a, 0x3f9b, 0x320, 0x34fa, 0x937b, 0x4b3d, 0x1, 0x1);
        gbc.writeMem(0x963a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x3f9b);
        EXPECT(gbc.pc(), 0x963c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963a), 0xcb);
        EXPECT(gbc.readMem(0x963b), 0xe7);
        // CB E7 01D0
        gbc.setState(0x6222, 0xbae7, 0x55f0, 0x975a, 0xb30, 0x75f6, 0x1, 0x1);
        gbc.writeMem(0x6222, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xbae7);
        EXPECT(gbc.pc(), 0x6224);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01D2
        gbc.setState(0x6afb, 0xbee2, 0x1480, 0x1745, 0x1c42, 0x3fae, 0x1, 0x1);
        gbc.writeMem(0x6afb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xbee2);
        EXPECT(gbc.pc(), 0x6afd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01D3
        gbc.setState(0xbe42, 0xff0c, 0x3a70, 0x236b, 0x522a, 0xbbf6, 0x1, 0x0);
        gbc.writeMem(0xbe42, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xff0c);
        EXPECT(gbc.pc(), 0xbe44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe42), 0xcb);
        EXPECT(gbc.readMem(0xbe43), 0xe7);
        // CB E7 01D4
        gbc.setState(0x76c5, 0xfeba, 0xc0, 0x61c, 0xb598, 0xe1c, 0x0, 0x1);
        gbc.writeMem(0x76c5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xfeba);
        EXPECT(gbc.pc(), 0x76c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01D5
        gbc.setState(0x2c58, 0xe960, 0x37e0, 0x189b, 0x6551, 0x52a, 0x0, 0x0);
        gbc.writeMem(0x2c58, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xe960);
        EXPECT(gbc.pc(), 0x2c5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01D6
        gbc.setState(0xe23b, 0xb473, 0xb8f0, 0xb434, 0x803d, 0x5fa, 0x1, 0x0);
        gbc.writeMem(0xe23b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xb473);
        EXPECT(gbc.pc(), 0xe23d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe23b), 0xcb);
        EXPECT(gbc.readMem(0xe23c), 0xe7);
        // CB E7 01D7
        gbc.setState(0x11ec, 0xf18d, 0x4060, 0x3d7e, 0x9124, 0xf331, 0x1, 0x1);
        gbc.writeMem(0x11ec, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf18d);
        EXPECT(gbc.pc(), 0x11ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01D8
        gbc.setState(0x3619, 0x789, 0xde60, 0xcc50, 0x6d6d, 0xbab1, 0x0, 0x0);
        gbc.writeMem(0x3619, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x789);
        EXPECT(gbc.pc(), 0x361b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01D9
        gbc.setState(0x4f18, 0xaf06, 0xb920, 0x25ca, 0xd7bf, 0x4778, 0x0, 0x0);
        gbc.writeMem(0x4f18, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xaf06);
        EXPECT(gbc.pc(), 0x4f1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01DA
        gbc.setState(0x7ae4, 0xf228, 0x7220, 0x602, 0x1519, 0x75b9, 0x1, 0x0);
        gbc.writeMem(0x7ae4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf228);
        EXPECT(gbc.pc(), 0x7ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01DB
        gbc.setState(0x9b06, 0x6788, 0x8b0, 0x8cb9, 0x7966, 0x69b8, 0x1, 0x0);
        gbc.writeMem(0x9b06, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6788);
        EXPECT(gbc.pc(), 0x9b08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b06), 0xcb);
        EXPECT(gbc.readMem(0x9b07), 0xe7);
        // CB E7 01DC
        gbc.setState(0x377d, 0x6cc3, 0x1bc0, 0xfc8, 0xc65b, 0x6590, 0x1, 0x0);
        gbc.writeMem(0x377d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x6cc3);
        EXPECT(gbc.pc(), 0x377f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01DD
        gbc.setState(0xe2bf, 0x152c, 0xb900, 0xe8fe, 0xddb4, 0xa3c0, 0x0, 0x1);
        gbc.writeMem(0xe2bf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x152c);
        EXPECT(gbc.pc(), 0xe2c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2bf), 0xcb);
        EXPECT(gbc.readMem(0xe2c0), 0xe7);
        // CB E7 01DE
        gbc.setState(0x516f, 0x458c, 0x4c60, 0xbbe8, 0x917, 0x4628, 0x0, 0x0);
        gbc.writeMem(0x516f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x458c);
        EXPECT(gbc.pc(), 0x5171);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01DF
        gbc.setState(0x49e8, 0x404e, 0xe170, 0x5f66, 0xe4d5, 0xcecb, 0x1, 0x1);
        gbc.writeMem(0x49e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x404e);
        EXPECT(gbc.pc(), 0x49ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01E0
        gbc.setState(0xc3f2, 0xc362, 0xefa0, 0xff2, 0x7528, 0x756, 0x1, 0x0);
        gbc.writeMem(0xc3f2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xc362);
        EXPECT(gbc.pc(), 0xc3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3f2), 0xcb);
        EXPECT(gbc.readMem(0xc3f3), 0xe7);
        // CB E7 01E1
        gbc.setState(0x32cf, 0xf64e, 0xfb90, 0x7a4, 0xc029, 0x6d42, 0x1, 0x1);
        gbc.writeMem(0x32cf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf64e);
        EXPECT(gbc.pc(), 0x32d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01E2
        gbc.setState(0x5edc, 0xed8, 0x2ca0, 0xc9a, 0xec54, 0x9e96, 0x0, 0x1);
        gbc.writeMem(0x5edc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xed8);
        EXPECT(gbc.pc(), 0x5ede);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01E3
        gbc.setState(0x963f, 0xe033, 0xb8e0, 0x936e, 0xf062, 0x29f9, 0x0, 0x1);
        gbc.writeMem(0x963f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe033);
        EXPECT(gbc.pc(), 0x9641);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x963f), 0xcb);
        EXPECT(gbc.readMem(0x9640), 0xe7);
        // CB E7 01E4
        gbc.setState(0xcdbd, 0x7edb, 0x5370, 0x688d, 0xaea5, 0x53c1, 0x1, 0x0);
        gbc.writeMem(0xcdbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7edb);
        EXPECT(gbc.pc(), 0xcdbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcdbd), 0xcb);
        EXPECT(gbc.readMem(0xcdbe), 0xe7);
        // CB E7 01E5
        gbc.setState(0x9980, 0x44ab, 0x83d0, 0x75b4, 0xa6f2, 0x62d0, 0x1, 0x0);
        gbc.writeMem(0x9980, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x44ab);
        EXPECT(gbc.pc(), 0x9982);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9980), 0xcb);
        EXPECT(gbc.readMem(0x9981), 0xe7);
        // CB E7 01E6
        gbc.setState(0x8ab8, 0xf1f2, 0xc3b0, 0xb57c, 0x8f97, 0xd4a8, 0x0, 0x1);
        gbc.writeMem(0x8ab8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf1f2);
        EXPECT(gbc.pc(), 0x8aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ab8), 0xcb);
        EXPECT(gbc.readMem(0x8ab9), 0xe7);
        // CB E7 01E7
        gbc.setState(0x1810, 0xdd, 0x680, 0x68ea, 0x6e1, 0x9f24, 0x0, 0x1);
        gbc.writeMem(0x1810, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xdd);
        EXPECT(gbc.pc(), 0x1812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01E8
        gbc.setState(0x1d18, 0xae0f, 0xeaf0, 0x7157, 0x4e47, 0x52b0, 0x0, 0x0);
        gbc.writeMem(0x1d18, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xae0f);
        EXPECT(gbc.pc(), 0x1d1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01E9
        gbc.setState(0x29f3, 0x9451, 0xc100, 0x2b83, 0x7d85, 0x51b5, 0x1, 0x1);
        gbc.writeMem(0x29f3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9451);
        EXPECT(gbc.pc(), 0x29f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01EA
        gbc.setState(0xac01, 0x6279, 0xecb0, 0x1c72, 0xf2b3, 0x219b, 0x0, 0x0);
        gbc.writeMem(0xac01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x6279);
        EXPECT(gbc.pc(), 0xac03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac01), 0xcb);
        EXPECT(gbc.readMem(0xac02), 0xe7);
        // CB E7 01EB
        gbc.setState(0xe4a8, 0xe47, 0xbad0, 0x3c93, 0x8e32, 0xd927, 0x1, 0x0);
        gbc.writeMem(0xe4a8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe47);
        EXPECT(gbc.pc(), 0xe4aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4a8), 0xcb);
        EXPECT(gbc.readMem(0xe4a9), 0xe7);
        // CB E7 01EC
        gbc.setState(0xca87, 0xb41c, 0xb4c0, 0xabad, 0x6fa4, 0xd694, 0x0, 0x1);
        gbc.writeMem(0xca87, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb41c);
        EXPECT(gbc.pc(), 0xca89);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca87), 0xcb);
        EXPECT(gbc.readMem(0xca88), 0xe7);
        // CB E7 01ED
        gbc.setState(0x6a67, 0x3a47, 0x7ca0, 0xbf56, 0x6a40, 0xc894, 0x0, 0x1);
        gbc.writeMem(0x6a67, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x3a47);
        EXPECT(gbc.pc(), 0x6a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01EE
        gbc.setState(0xdc5c, 0xcbc5, 0x77b0, 0xd467, 0xd538, 0x46f4, 0x0, 0x0);
        gbc.writeMem(0xdc5c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcbc5);
        EXPECT(gbc.pc(), 0xdc5e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc5c), 0xcb);
        EXPECT(gbc.readMem(0xdc5d), 0xe7);
        // CB E7 01EF
        gbc.setState(0x6e3c, 0x418c, 0x2d20, 0xbf44, 0xac2f, 0xa820, 0x0, 0x0);
        gbc.writeMem(0x6e3c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x418c);
        EXPECT(gbc.pc(), 0x6e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01F0
        gbc.setState(0x1736, 0x43aa, 0x68e0, 0xa543, 0x8eb2, 0x8a9b, 0x1, 0x1);
        gbc.writeMem(0x1736, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x43aa);
        EXPECT(gbc.pc(), 0x1738);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01F1
        gbc.setState(0xcb0, 0x5c40, 0x25d0, 0xa522, 0xbdbf, 0x3354, 0x1, 0x1);
        gbc.writeMem(0xcb0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5c40);
        EXPECT(gbc.pc(), 0xcb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01F3
        gbc.setState(0x6922, 0xbacf, 0x3280, 0xa491, 0x4798, 0xf2a9, 0x1, 0x1);
        gbc.writeMem(0x6922, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xbacf);
        EXPECT(gbc.pc(), 0x6924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01F4
        gbc.setState(0xc691, 0xd7a2, 0xb6f0, 0xf76a, 0xacc4, 0x31be, 0x0, 0x1);
        gbc.writeMem(0xc691, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xd7a2);
        EXPECT(gbc.pc(), 0xc693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc691), 0xcb);
        EXPECT(gbc.readMem(0xc692), 0xe7);
        // CB E7 01F5
        gbc.setState(0x30cd, 0x1e17, 0x4c60, 0x9115, 0x4570, 0x66c1, 0x1, 0x0);
        gbc.writeMem(0x30cd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x1e17);
        EXPECT(gbc.pc(), 0x30cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 01F6
        gbc.setState(0x8eb1, 0x91ff, 0x1cf0, 0x2b11, 0x3487, 0x7077, 0x1, 0x0);
        gbc.writeMem(0x8eb1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x91ff);
        EXPECT(gbc.pc(), 0x8eb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb1), 0xcb);
        EXPECT(gbc.readMem(0x8eb2), 0xe7);
        // CB E7 01F7
        gbc.setState(0x5f0e, 0x55e2, 0xfa70, 0x7c2c, 0x1fbe, 0x7f4f, 0x0, 0x0);
        gbc.writeMem(0x5f0e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x55e2);
        EXPECT(gbc.pc(), 0x5f10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01F8
        gbc.setState(0xd64a, 0x63c6, 0xb8e0, 0xcfdd, 0x9d04, 0x9ee3, 0x1, 0x0);
        gbc.writeMem(0xd64a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x63c6);
        EXPECT(gbc.pc(), 0xd64c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd64a), 0xcb);
        EXPECT(gbc.readMem(0xd64b), 0xe7);
        // CB E7 01F9
        gbc.setState(0xdf08, 0xb443, 0x2830, 0xf363, 0xffa8, 0xc6e1, 0x1, 0x0);
        gbc.writeMem(0xdf08, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xb443);
        EXPECT(gbc.pc(), 0xdf0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf08), 0xcb);
        EXPECT(gbc.readMem(0xdf09), 0xe7);
        // CB E7 01FA
        gbc.setState(0x2fd8, 0x30c2, 0x5110, 0x62b, 0x25f6, 0x960, 0x1, 0x1);
        gbc.writeMem(0x2fd8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x30c2);
        EXPECT(gbc.pc(), 0x2fda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 01FB
        gbc.setState(0x9fb1, 0x4fc1, 0xcf60, 0x4941, 0xa974, 0x57c3, 0x1, 0x0);
        gbc.writeMem(0x9fb1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x4fc1);
        EXPECT(gbc.pc(), 0x9fb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fb1), 0xcb);
        EXPECT(gbc.readMem(0x9fb2), 0xe7);
        // CB E7 01FC
        gbc.setState(0x9a4a, 0x7acf, 0x1c10, 0xaa28, 0x19cd, 0x52bc, 0x0, 0x0);
        gbc.writeMem(0x9a4a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7acf);
        EXPECT(gbc.pc(), 0x9a4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4a), 0xcb);
        EXPECT(gbc.readMem(0x9a4b), 0xe7);
        // CB E7 01FD
        gbc.setState(0x93ae, 0xb671, 0xd010, 0xf9fb, 0x85cc, 0x419a, 0x0, 0x0);
        gbc.writeMem(0x93ae, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xb671);
        EXPECT(gbc.pc(), 0x93b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93ae), 0xcb);
        EXPECT(gbc.readMem(0x93af), 0xe7);
        // CB E7 01FE
        gbc.setState(0xc5b9, 0xd71d, 0xa0, 0xfe19, 0xa2c6, 0x989e, 0x1, 0x1);
        gbc.writeMem(0xc5b9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xd71d);
        EXPECT(gbc.pc(), 0xc5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc5b9), 0xcb);
        EXPECT(gbc.readMem(0xc5ba), 0xe7);
        // CB E7 01FF
        gbc.setState(0x228e, 0x6e67, 0x89e0, 0x9d37, 0xbabb, 0xc28f, 0x0, 0x0);
        gbc.writeMem(0x228e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x6e67);
        EXPECT(gbc.pc(), 0x2290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0200
        gbc.setState(0x3910, 0x84b3, 0x4100, 0xe05e, 0xe63d, 0xf1c0, 0x1, 0x1);
        gbc.writeMem(0x3910, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x84b3);
        EXPECT(gbc.pc(), 0x3912);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0201
        gbc.setState(0x174, 0x85, 0x6bb0, 0x5478, 0x1e57, 0x5c57, 0x1, 0x0);
        gbc.writeMem(0x174, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x85);
        EXPECT(gbc.pc(), 0x176);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0202
        gbc.setState(0x4f7b, 0xa632, 0x10b0, 0x7ea3, 0x6208, 0xcc65, 0x1, 0x0);
        gbc.writeMem(0x4f7b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xa632);
        EXPECT(gbc.pc(), 0x4f7d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0203
        gbc.setState(0xc598, 0x1a07, 0x83c0, 0x2256, 0xeaed, 0xaaed, 0x1, 0x0);
        gbc.writeMem(0xc598, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x1a07);
        EXPECT(gbc.pc(), 0xc59a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc598), 0xcb);
        EXPECT(gbc.readMem(0xc599), 0xe7);
        // CB E7 0204
        gbc.setState(0x7486, 0x169a, 0xa210, 0x7164, 0xd1e6, 0x82c3, 0x0, 0x1);
        gbc.writeMem(0x7486, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x169a);
        EXPECT(gbc.pc(), 0x7488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0205
        gbc.setState(0x6df8, 0xea69, 0x3f20, 0x642a, 0xaced, 0x1d5a, 0x1, 0x1);
        gbc.writeMem(0x6df8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xea69);
        EXPECT(gbc.pc(), 0x6dfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0206
        gbc.setState(0x2d2a, 0x140d, 0x4f40, 0xab18, 0xae4, 0x6df6, 0x0, 0x0);
        gbc.writeMem(0x2d2a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x140d);
        EXPECT(gbc.pc(), 0x2d2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0208
        gbc.setState(0x4010, 0xa61a, 0x50c0, 0xc762, 0x7584, 0x9672, 0x1, 0x0);
        gbc.writeMem(0x4010, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa61a);
        EXPECT(gbc.pc(), 0x4012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0209
        gbc.setState(0xb27d, 0xa150, 0x7d80, 0x9613, 0x8c63, 0xe5b7, 0x1, 0x0);
        gbc.writeMem(0xb27d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xa150);
        EXPECT(gbc.pc(), 0xb27f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb27d), 0xcb);
        EXPECT(gbc.readMem(0xb27e), 0xe7);
        // CB E7 020A
        gbc.setState(0xbc77, 0x8532, 0x1d80, 0xc9f2, 0x780d, 0xd30c, 0x0, 0x0);
        gbc.writeMem(0xbc77, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8532);
        EXPECT(gbc.pc(), 0xbc79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc77), 0xcb);
        EXPECT(gbc.readMem(0xbc78), 0xe7);
        // CB E7 020B
        gbc.setState(0x69f3, 0xbc26, 0xda40, 0x6b1f, 0xee9f, 0x962e, 0x0, 0x1);
        gbc.writeMem(0x69f3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbc26);
        EXPECT(gbc.pc(), 0x69f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 020C
        gbc.setState(0x72c9, 0xfb95, 0x14b0, 0xb4df, 0x4d4a, 0x3b88, 0x0, 0x1);
        gbc.writeMem(0x72c9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xfb95);
        EXPECT(gbc.pc(), 0x72cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 020D
        gbc.setState(0xeab4, 0x39dc, 0xb7c0, 0xab75, 0x36b3, 0xeaaa, 0x1, 0x1);
        gbc.writeMem(0xeab4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x39dc);
        EXPECT(gbc.pc(), 0xeab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeab4), 0xcb);
        EXPECT(gbc.readMem(0xeab5), 0xe7);
        // CB E7 020E
        gbc.setState(0x5339, 0x57fa, 0x11d0, 0xfd9b, 0xef63, 0x1747, 0x0, 0x1);
        gbc.writeMem(0x5339, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x57fa);
        EXPECT(gbc.pc(), 0x533b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 020F
        gbc.setState(0x6fa6, 0xa020, 0xbc90, 0x8ffc, 0x7628, 0xd3a5, 0x1, 0x1);
        gbc.writeMem(0x6fa6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xa020);
        EXPECT(gbc.pc(), 0x6fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0210
        gbc.setState(0x157e, 0x2df5, 0xb860, 0xf935, 0xae80, 0x2fea, 0x1, 0x1);
        gbc.writeMem(0x157e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x2df5);
        EXPECT(gbc.pc(), 0x1580);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0211
        gbc.setState(0x6580, 0x3296, 0x7f70, 0xf19a, 0xb5b3, 0x7e21, 0x1, 0x0);
        gbc.writeMem(0x6580, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x3296);
        EXPECT(gbc.pc(), 0x6582);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0212
        gbc.setState(0x2b15, 0x54dc, 0xbc10, 0x5ae3, 0x49ea, 0x7525, 0x1, 0x0);
        gbc.writeMem(0x2b15, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x54dc);
        EXPECT(gbc.pc(), 0x2b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0214
        gbc.setState(0x6af5, 0x11a8, 0xf6e0, 0xdbe9, 0x8217, 0x8f7e, 0x1, 0x0);
        gbc.writeMem(0x6af5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x11a8);
        EXPECT(gbc.pc(), 0x6af7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0215
        gbc.setState(0x62bc, 0xa345, 0x6f00, 0x611f, 0x8bc4, 0x5423, 0x1, 0x1);
        gbc.writeMem(0x62bc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xa345);
        EXPECT(gbc.pc(), 0x62be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0216
        gbc.setState(0x719, 0xe3ab, 0x27d0, 0x9d18, 0x91bb, 0x6556, 0x1, 0x1);
        gbc.writeMem(0x719, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xe3ab);
        EXPECT(gbc.pc(), 0x71b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0217
        gbc.setState(0x34da, 0xba51, 0xf290, 0xec7b, 0xd9dc, 0x8a47, 0x0, 0x0);
        gbc.writeMem(0x34da, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xba51);
        EXPECT(gbc.pc(), 0x34dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0218
        gbc.setState(0xb702, 0x1054, 0x6960, 0xccd1, 0x9ad0, 0xddb9, 0x0, 0x1);
        gbc.writeMem(0xb702, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1054);
        EXPECT(gbc.pc(), 0xb704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb702), 0xcb);
        EXPECT(gbc.readMem(0xb703), 0xe7);
        // CB E7 0219
        gbc.setState(0x16e9, 0xec6d, 0xa4b0, 0x9c5a, 0xf4c, 0x159, 0x1, 0x0);
        gbc.writeMem(0x16e9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xec6d);
        EXPECT(gbc.pc(), 0x16eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 021A
        gbc.setState(0xd52c, 0xf26c, 0xab50, 0xf3e0, 0x3dc3, 0x54d5, 0x0, 0x0);
        gbc.writeMem(0xd52c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xf26c);
        EXPECT(gbc.pc(), 0xd52e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd52c), 0xcb);
        EXPECT(gbc.readMem(0xd52d), 0xe7);
        // CB E7 021B
        gbc.setState(0xd113, 0xa05e, 0x70f0, 0x9368, 0xe2d4, 0x7650, 0x1, 0x1);
        gbc.writeMem(0xd113, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xa05e);
        EXPECT(gbc.pc(), 0xd115);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd113), 0xcb);
        EXPECT(gbc.readMem(0xd114), 0xe7);
        // CB E7 021C
        gbc.setState(0x9d0c, 0x68b5, 0x6e20, 0x6150, 0x1a56, 0xc842, 0x1, 0x0);
        gbc.writeMem(0x9d0c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x68b5);
        EXPECT(gbc.pc(), 0x9d0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d0c), 0xcb);
        EXPECT(gbc.readMem(0x9d0d), 0xe7);
        // CB E7 021D
        gbc.setState(0x9950, 0x174d, 0x8fc0, 0x1e5f, 0x6972, 0xea8c, 0x0, 0x0);
        gbc.writeMem(0x9950, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x174d);
        EXPECT(gbc.pc(), 0x9952);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9950), 0xcb);
        EXPECT(gbc.readMem(0x9951), 0xe7);
        // CB E7 021E
        gbc.setState(0x6c31, 0x834a, 0xaba0, 0x5f33, 0x3d7e, 0x4856, 0x1, 0x1);
        gbc.writeMem(0x6c31, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x834a);
        EXPECT(gbc.pc(), 0x6c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 021F
        gbc.setState(0x48a6, 0x786d, 0x2000, 0xee26, 0x4ee4, 0xdc65, 0x1, 0x1);
        gbc.writeMem(0x48a6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x786d);
        EXPECT(gbc.pc(), 0x48a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0220
        gbc.setState(0xaef5, 0x7030, 0xa020, 0xd4bc, 0x9457, 0x9898, 0x0, 0x1);
        gbc.writeMem(0xaef5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7030);
        EXPECT(gbc.pc(), 0xaef7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaef5), 0xcb);
        EXPECT(gbc.readMem(0xaef6), 0xe7);
        // CB E7 0221
        gbc.setState(0xeb65, 0x26d0, 0x2280, 0x7da7, 0x1661, 0x3b1b, 0x0, 0x1);
        gbc.writeMem(0xeb65, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x26d0);
        EXPECT(gbc.pc(), 0xeb67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb65), 0xcb);
        EXPECT(gbc.readMem(0xeb66), 0xe7);
        // CB E7 0222
        gbc.setState(0x4c65, 0xf092, 0x70c0, 0x5b3b, 0xc03e, 0xba00, 0x1, 0x1);
        gbc.writeMem(0x4c65, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xf092);
        EXPECT(gbc.pc(), 0x4c67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0223
        gbc.setState(0x1c51, 0x7543, 0xca70, 0x9c5e, 0x75a, 0x6a8e, 0x1, 0x1);
        gbc.writeMem(0x1c51, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x7543);
        EXPECT(gbc.pc(), 0x1c53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0224
        gbc.setState(0xbc5a, 0xf135, 0x5da0, 0xf4b9, 0x24e2, 0x5991, 0x0, 0x1);
        gbc.writeMem(0xbc5a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf135);
        EXPECT(gbc.pc(), 0xbc5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5a), 0xcb);
        EXPECT(gbc.readMem(0xbc5b), 0xe7);
        // CB E7 0225
        gbc.setState(0x612, 0xd120, 0x28a0, 0x30e5, 0x35e8, 0xa108, 0x1, 0x0);
        gbc.writeMem(0x612, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xd120);
        EXPECT(gbc.pc(), 0x614);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0226
        gbc.setState(0x2a72, 0xce84, 0x7840, 0xd6ea, 0x864b, 0xb9f5, 0x0, 0x1);
        gbc.writeMem(0x2a72, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xce84);
        EXPECT(gbc.pc(), 0x2a74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0227
        gbc.setState(0xd970, 0xb2d0, 0xef80, 0xef74, 0x395d, 0x75f, 0x1, 0x0);
        gbc.writeMem(0xd970, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb2d0);
        EXPECT(gbc.pc(), 0xd972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd970), 0xcb);
        EXPECT(gbc.readMem(0xd971), 0xe7);
        // CB E7 0228
        gbc.setState(0xafab, 0xcc2, 0xec0, 0xed21, 0xe13c, 0xc5fc, 0x1, 0x0);
        gbc.writeMem(0xafab, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xcc2);
        EXPECT(gbc.pc(), 0xafad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafab), 0xcb);
        EXPECT(gbc.readMem(0xafac), 0xe7);
        // CB E7 0229
        gbc.setState(0xc42d, 0x1dad, 0x4ac0, 0xcba2, 0x7e4a, 0x85e9, 0x0, 0x1);
        gbc.writeMem(0xc42d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x1dad);
        EXPECT(gbc.pc(), 0xc42f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc42d), 0xcb);
        EXPECT(gbc.readMem(0xc42e), 0xe7);
        // CB E7 022A
        gbc.setState(0x5802, 0xaf89, 0x1b20, 0x5951, 0x553f, 0x8c2b, 0x1, 0x0);
        gbc.writeMem(0x5802, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaf89);
        EXPECT(gbc.pc(), 0x5804);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 022B
        gbc.setState(0x4859, 0x2a96, 0x8210, 0x2d18, 0x79c6, 0x1db8, 0x1, 0x1);
        gbc.writeMem(0x4859, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x2a96);
        EXPECT(gbc.pc(), 0x485b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 022C
        gbc.setState(0x6897, 0x936f, 0x8950, 0xc5cd, 0x48aa, 0xbac6, 0x1, 0x0);
        gbc.writeMem(0x6897, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x936f);
        EXPECT(gbc.pc(), 0x6899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 022D
        gbc.setState(0x2336, 0xa09, 0x45d0, 0x1adf, 0x75a2, 0x5175, 0x1, 0x1);
        gbc.writeMem(0x2336, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xa09);
        EXPECT(gbc.pc(), 0x2338);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 022E
        gbc.setState(0x6b25, 0xda19, 0x79f0, 0xf7ce, 0x21f8, 0xa8a1, 0x1, 0x1);
        gbc.writeMem(0x6b25, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xda19);
        EXPECT(gbc.pc(), 0x6b27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 022F
        gbc.setState(0x523e, 0xd48, 0x45a0, 0xd704, 0x6a00, 0xa723, 0x1, 0x0);
        gbc.writeMem(0x523e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xd48);
        EXPECT(gbc.pc(), 0x5240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0230
        gbc.setState(0xc526, 0xaf50, 0x3450, 0x3fb4, 0x45fc, 0x9bd3, 0x1, 0x1);
        gbc.writeMem(0xc526, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaf50);
        EXPECT(gbc.pc(), 0xc528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc526), 0xcb);
        EXPECT(gbc.readMem(0xc527), 0xe7);
        // CB E7 0231
        gbc.setState(0xe331, 0x6e7c, 0xac40, 0x8260, 0x2988, 0xf42f, 0x0, 0x0);
        gbc.writeMem(0xe331, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x6e7c);
        EXPECT(gbc.pc(), 0xe333);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe331), 0xcb);
        EXPECT(gbc.readMem(0xe332), 0xe7);
        // CB E7 0232
        gbc.setState(0xacdf, 0xfb71, 0x11b0, 0x2385, 0xe5c0, 0x935e, 0x0, 0x1);
        gbc.writeMem(0xacdf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfb71);
        EXPECT(gbc.pc(), 0xace1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacdf), 0xcb);
        EXPECT(gbc.readMem(0xace0), 0xe7);
        // CB E7 0233
        gbc.setState(0xe0ee, 0xb367, 0x910, 0x38f0, 0x5108, 0x7845, 0x0, 0x0);
        gbc.writeMem(0xe0ee, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xb367);
        EXPECT(gbc.pc(), 0xe0f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0ee), 0xcb);
        EXPECT(gbc.readMem(0xe0ef), 0xe7);
        // CB E7 0234
        gbc.setState(0xb7e0, 0x7cad, 0x4e90, 0xbd0f, 0x166b, 0xebfc, 0x0, 0x1);
        gbc.writeMem(0xb7e0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x7cad);
        EXPECT(gbc.pc(), 0xb7e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7e0), 0xcb);
        EXPECT(gbc.readMem(0xb7e1), 0xe7);
        // CB E7 0235
        gbc.setState(0x49b9, 0xbafd, 0xe470, 0xb60d, 0xa7d9, 0xafb2, 0x0, 0x1);
        gbc.writeMem(0x49b9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xbafd);
        EXPECT(gbc.pc(), 0x49bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0236
        gbc.setState(0x30ce, 0xb2eb, 0x5590, 0x9a6e, 0xc989, 0xaa95, 0x1, 0x1);
        gbc.writeMem(0x30ce, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb2eb);
        EXPECT(gbc.pc(), 0x30d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0237
        gbc.setState(0xc283, 0x3375, 0x810, 0xf6de, 0xf18d, 0xf370, 0x0, 0x1);
        gbc.writeMem(0xc283, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x3375);
        EXPECT(gbc.pc(), 0xc285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc283), 0xcb);
        EXPECT(gbc.readMem(0xc284), 0xe7);
        // CB E7 0238
        gbc.setState(0x33f7, 0x9eaa, 0xa040, 0x415, 0x5f66, 0x4730, 0x0, 0x1);
        gbc.writeMem(0x33f7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x9eaa);
        EXPECT(gbc.pc(), 0x33f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0239
        gbc.setState(0x6a5, 0xa636, 0x5e50, 0xd874, 0xb1bc, 0x3db4, 0x1, 0x1);
        gbc.writeMem(0x6a5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa636);
        EXPECT(gbc.pc(), 0x6a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 023A
        gbc.setState(0x6f0d, 0xaf66, 0x58b0, 0xebbe, 0x2c21, 0x4479, 0x0, 0x0);
        gbc.writeMem(0x6f0d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xaf66);
        EXPECT(gbc.pc(), 0x6f0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 023B
        gbc.setState(0x2bca, 0xc311, 0xbf40, 0x1374, 0xdd1f, 0x6250, 0x0, 0x0);
        gbc.writeMem(0x2bca, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc311);
        EXPECT(gbc.pc(), 0x2bcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 023D
        gbc.setState(0x8360, 0x21e4, 0xf40, 0x5155, 0x3184, 0xd56c, 0x1, 0x0);
        gbc.writeMem(0x8360, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x21e4);
        EXPECT(gbc.pc(), 0x8362);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8360), 0xcb);
        EXPECT(gbc.readMem(0x8361), 0xe7);
        // CB E7 023E
        gbc.setState(0x99a2, 0xf20e, 0xbf80, 0xa5a, 0xb050, 0x9562, 0x0, 0x0);
        gbc.writeMem(0x99a2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xf20e);
        EXPECT(gbc.pc(), 0x99a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99a2), 0xcb);
        EXPECT(gbc.readMem(0x99a3), 0xe7);
        // CB E7 023F
        gbc.setState(0x8187, 0x55df, 0xdc70, 0x8234, 0x23d0, 0xb45f, 0x1, 0x0);
        gbc.writeMem(0x8187, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x55df);
        EXPECT(gbc.pc(), 0x8189);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8187), 0xcb);
        EXPECT(gbc.readMem(0x8188), 0xe7);
        // CB E7 0240
        gbc.setState(0x3d6a, 0x6887, 0x6d50, 0xf47b, 0x32ae, 0xd7b6, 0x0, 0x1);
        gbc.writeMem(0x3d6a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x6887);
        EXPECT(gbc.pc(), 0x3d6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0241
        gbc.setState(0xd062, 0xe4fe, 0x86b0, 0xf735, 0x7244, 0x130d, 0x0, 0x1);
        gbc.writeMem(0xd062, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xe4fe);
        EXPECT(gbc.pc(), 0xd064);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd062), 0xcb);
        EXPECT(gbc.readMem(0xd063), 0xe7);
        // CB E7 0242
        gbc.setState(0xdd73, 0x3392, 0x1b70, 0xa938, 0x5923, 0x61ea, 0x1, 0x0);
        gbc.writeMem(0xdd73, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x3392);
        EXPECT(gbc.pc(), 0xdd75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd73), 0xcb);
        EXPECT(gbc.readMem(0xdd74), 0xe7);
        // CB E7 0243
        gbc.setState(0xd435, 0x7e78, 0xc080, 0x3fd6, 0x1669, 0x7b2, 0x1, 0x1);
        gbc.writeMem(0xd435, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x7e78);
        EXPECT(gbc.pc(), 0xd437);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd435), 0xcb);
        EXPECT(gbc.readMem(0xd436), 0xe7);
        // CB E7 0244
        gbc.setState(0x8ce5, 0x42a9, 0xcce0, 0x5523, 0x60a4, 0x7ca8, 0x1, 0x0);
        gbc.writeMem(0x8ce5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x42a9);
        EXPECT(gbc.pc(), 0x8ce7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce5), 0xcb);
        EXPECT(gbc.readMem(0x8ce6), 0xe7);
        // CB E7 0245
        gbc.setState(0x8b22, 0x66ba, 0x1690, 0x1440, 0x7ca, 0xd75e, 0x1, 0x0);
        gbc.writeMem(0x8b22, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x66ba);
        EXPECT(gbc.pc(), 0x8b24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b22), 0xcb);
        EXPECT(gbc.readMem(0x8b23), 0xe7);
        // CB E7 0246
        gbc.setState(0xc1f, 0xb4ac, 0x6400, 0x1fb, 0xb83b, 0xaf07, 0x0, 0x0);
        gbc.writeMem(0xc1f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xb4ac);
        EXPECT(gbc.pc(), 0xc21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0247
        gbc.setState(0x2359, 0x495b, 0x8590, 0x4550, 0xf404, 0x54bd, 0x1, 0x1);
        gbc.writeMem(0x2359, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x495b);
        EXPECT(gbc.pc(), 0x235b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0248
        gbc.setState(0x896d, 0xf7cb, 0x6f40, 0x63ad, 0x3b1d, 0x68f6, 0x1, 0x1);
        gbc.writeMem(0x896d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xf7cb);
        EXPECT(gbc.pc(), 0x896f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x896d), 0xcb);
        EXPECT(gbc.readMem(0x896e), 0xe7);
        // CB E7 024A
        gbc.setState(0x51f1, 0x5b66, 0xc160, 0xb22e, 0xee6, 0x397e, 0x1, 0x1);
        gbc.writeMem(0x51f1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5b66);
        EXPECT(gbc.pc(), 0x51f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 024B
        gbc.setState(0x5737, 0x2175, 0x4510, 0x5c0a, 0xcd9, 0x2666, 0x1, 0x0);
        gbc.writeMem(0x5737, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2175);
        EXPECT(gbc.pc(), 0x5739);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 024C
        gbc.setState(0xde74, 0x693f, 0x17a0, 0x8f8f, 0xc5b9, 0x73ee, 0x0, 0x1);
        gbc.writeMem(0xde74, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x693f);
        EXPECT(gbc.pc(), 0xde76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde74), 0xcb);
        EXPECT(gbc.readMem(0xde75), 0xe7);
        // CB E7 024D
        gbc.setState(0x8a4, 0x6ff2, 0x380, 0xb3b2, 0xf441, 0x624b, 0x1, 0x1);
        gbc.writeMem(0x8a4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x6ff2);
        EXPECT(gbc.pc(), 0x8a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 024E
        gbc.setState(0xa71, 0x8245, 0x6f60, 0x2fc3, 0x157d, 0x668d, 0x1, 0x1);
        gbc.writeMem(0xa71, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8245);
        EXPECT(gbc.pc(), 0xa73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 024F
        gbc.setState(0x35e, 0x81cf, 0x4190, 0xa34, 0x5872, 0x9a01, 0x1, 0x0);
        gbc.writeMem(0x35e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x81cf);
        EXPECT(gbc.pc(), 0x360);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0250
        gbc.setState(0xd7c3, 0xe3f0, 0x39b0, 0xbc0a, 0x7b31, 0xe53c, 0x1, 0x0);
        gbc.writeMem(0xd7c3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe3f0);
        EXPECT(gbc.pc(), 0xd7c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd7c3), 0xcb);
        EXPECT(gbc.readMem(0xd7c4), 0xe7);
        // CB E7 0251
        gbc.setState(0x47b8, 0x3105, 0x5840, 0xd3db, 0x4de, 0xfbc8, 0x0, 0x1);
        gbc.writeMem(0x47b8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x3105);
        EXPECT(gbc.pc(), 0x47ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0252
        gbc.setState(0x8bf6, 0x635f, 0x63a0, 0xb8c2, 0x19dd, 0x1640, 0x1, 0x0);
        gbc.writeMem(0x8bf6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x635f);
        EXPECT(gbc.pc(), 0x8bf8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bf6), 0xcb);
        EXPECT(gbc.readMem(0x8bf7), 0xe7);
        // CB E7 0253
        gbc.setState(0x1e01, 0xd1cd, 0x8300, 0xe9a2, 0x77e2, 0xaa0d, 0x0, 0x0);
        gbc.writeMem(0x1e01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xd1cd);
        EXPECT(gbc.pc(), 0x1e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0254
        gbc.setState(0x3f3e, 0x5c52, 0xcdd0, 0x980b, 0xbb9a, 0xe929, 0x0, 0x1);
        gbc.writeMem(0x3f3e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5c52);
        EXPECT(gbc.pc(), 0x3f40);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0255
        gbc.setState(0x3586, 0x7c22, 0x87e0, 0x6a8e, 0x4e6, 0x6b57, 0x1, 0x0);
        gbc.writeMem(0x3586, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7c22);
        EXPECT(gbc.pc(), 0x3588);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0256
        gbc.setState(0x4b42, 0x4887, 0x7570, 0x84d3, 0x3ce8, 0x56c7, 0x1, 0x0);
        gbc.writeMem(0x4b42, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x4887);
        EXPECT(gbc.pc(), 0x4b44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0257
        gbc.setState(0xd51f, 0xa7ce, 0xc60, 0xdff7, 0x2e38, 0x6021, 0x0, 0x0);
        gbc.writeMem(0xd51f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa7ce);
        EXPECT(gbc.pc(), 0xd521);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd51f), 0xcb);
        EXPECT(gbc.readMem(0xd520), 0xe7);
        // CB E7 0258
        gbc.setState(0x6646, 0xb19f, 0xcdd0, 0x9b09, 0xf36, 0x38a6, 0x0, 0x1);
        gbc.writeMem(0x6646, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb19f);
        EXPECT(gbc.pc(), 0x6648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0259
        gbc.setState(0xa689, 0xccc, 0x3790, 0xc951, 0xfcd, 0xcc2c, 0x0, 0x1);
        gbc.writeMem(0xa689, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xccc);
        EXPECT(gbc.pc(), 0xa68b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa689), 0xcb);
        EXPECT(gbc.readMem(0xa68a), 0xe7);
        // CB E7 025A
        gbc.setState(0xaf30, 0x1e9a, 0x3100, 0x45be, 0x2aea, 0x6449, 0x0, 0x0);
        gbc.writeMem(0xaf30, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1e9a);
        EXPECT(gbc.pc(), 0xaf32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf30), 0xcb);
        EXPECT(gbc.readMem(0xaf31), 0xe7);
        // CB E7 025B
        gbc.setState(0x61c9, 0xc56, 0x92b0, 0x8af, 0x22f, 0x4d27, 0x1, 0x1);
        gbc.writeMem(0x61c9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc56);
        EXPECT(gbc.pc(), 0x61cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 025C
        gbc.setState(0x8dd2, 0xb6cf, 0x1670, 0x40a4, 0x1959, 0xa430, 0x1, 0x1);
        gbc.writeMem(0x8dd2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xb6cf);
        EXPECT(gbc.pc(), 0x8dd4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8dd2), 0xcb);
        EXPECT(gbc.readMem(0x8dd3), 0xe7);
        // CB E7 025D
        gbc.setState(0xec81, 0x925c, 0xc8b0, 0xf9ec, 0x6939, 0xdd85, 0x0, 0x0);
        gbc.writeMem(0xec81, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x925c);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec81), 0xcb);
        EXPECT(gbc.readMem(0xec82), 0xe7);
        // CB E7 025E
        gbc.setState(0xad90, 0xcacb, 0x710, 0x80d8, 0x5b85, 0xf5ae, 0x1, 0x1);
        gbc.writeMem(0xad90, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcacb);
        EXPECT(gbc.pc(), 0xad92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad90), 0xcb);
        EXPECT(gbc.readMem(0xad91), 0xe7);
        // CB E7 025F
        gbc.setState(0xeb4e, 0x8941, 0x2710, 0x236, 0x33ce, 0x9543, 0x0, 0x1);
        gbc.writeMem(0xeb4e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8941);
        EXPECT(gbc.pc(), 0xeb50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb4e), 0xcb);
        EXPECT(gbc.readMem(0xeb4f), 0xe7);
        // CB E7 0260
        gbc.setState(0x1f99, 0x6a5c, 0x64a0, 0xeea0, 0x50be, 0xb193, 0x0, 0x1);
        gbc.writeMem(0x1f99, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6a5c);
        EXPECT(gbc.pc(), 0x1f9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0261
        gbc.setState(0x4dfb, 0x3ec5, 0xf720, 0x3bd0, 0x5c8d, 0xdf39, 0x1, 0x1);
        gbc.writeMem(0x4dfb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x3ec5);
        EXPECT(gbc.pc(), 0x4dfd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0262
        gbc.setState(0x41fc, 0xb7aa, 0xecd0, 0x32f5, 0xb542, 0x2779, 0x1, 0x1);
        gbc.writeMem(0x41fc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xb7aa);
        EXPECT(gbc.pc(), 0x41fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0263
        gbc.setState(0x6f73, 0x2f28, 0x85c0, 0x708e, 0x3b0e, 0xfef1, 0x0, 0x0);
        gbc.writeMem(0x6f73, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2f28);
        EXPECT(gbc.pc(), 0x6f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0264
        gbc.setState(0x1fbb, 0x8083, 0x85e0, 0x3cb0, 0xe210, 0x63ae, 0x0, 0x0);
        gbc.writeMem(0x1fbb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x8083);
        EXPECT(gbc.pc(), 0x1fbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0265
        gbc.setState(0x2c65, 0x2330, 0x3700, 0xa625, 0xfba5, 0xf94f, 0x1, 0x1);
        gbc.writeMem(0x2c65, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x2330);
        EXPECT(gbc.pc(), 0x2c67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0266
        gbc.setState(0xbe67, 0x484b, 0x2300, 0xbda4, 0xfbdb, 0x428c, 0x1, 0x1);
        gbc.writeMem(0xbe67, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x484b);
        EXPECT(gbc.pc(), 0xbe69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe67), 0xcb);
        EXPECT(gbc.readMem(0xbe68), 0xe7);
        // CB E7 0267
        gbc.setState(0x1a09, 0xa991, 0xd840, 0x59ea, 0xacdf, 0x1dc4, 0x0, 0x1);
        gbc.writeMem(0x1a09, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa991);
        EXPECT(gbc.pc(), 0x1a0b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0268
        gbc.setState(0x369e, 0x3527, 0xb870, 0x303c, 0xec41, 0x26b4, 0x1, 0x0);
        gbc.writeMem(0x369e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x3527);
        EXPECT(gbc.pc(), 0x36a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0269
        gbc.setState(0x1753, 0xfaa5, 0x3b30, 0x3f8d, 0x2ed7, 0xd38f, 0x0, 0x1);
        gbc.writeMem(0x1753, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfaa5);
        EXPECT(gbc.pc(), 0x1755);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 026A
        gbc.setState(0xca94, 0x9c1d, 0xd570, 0x453e, 0x1332, 0x9b71, 0x1, 0x1);
        gbc.writeMem(0xca94, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9c1d);
        EXPECT(gbc.pc(), 0xca96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca94), 0xcb);
        EXPECT(gbc.readMem(0xca95), 0xe7);
        // CB E7 026B
        gbc.setState(0xd192, 0xfc3a, 0xee30, 0x43be, 0x4d06, 0x2c4e, 0x1, 0x1);
        gbc.writeMem(0xd192, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfc3a);
        EXPECT(gbc.pc(), 0xd194);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd192), 0xcb);
        EXPECT(gbc.readMem(0xd193), 0xe7);
        // CB E7 026C
        gbc.setState(0xb038, 0x1feb, 0x9340, 0xc8e6, 0x4dfd, 0x388f, 0x0, 0x0);
        gbc.writeMem(0xb038, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x1feb);
        EXPECT(gbc.pc(), 0xb03a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb038), 0xcb);
        EXPECT(gbc.readMem(0xb039), 0xe7);
        // CB E7 026D
        gbc.setState(0x3742, 0xb426, 0x580, 0x1671, 0x13c6, 0xda8f, 0x1, 0x1);
        gbc.writeMem(0x3742, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xb426);
        EXPECT(gbc.pc(), 0x3744);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 026E
        gbc.setState(0xe9f7, 0xac66, 0x5430, 0xa6e5, 0x108c, 0xe9ba, 0x1, 0x0);
        gbc.writeMem(0xe9f7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xac66);
        EXPECT(gbc.pc(), 0xe9f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f7), 0xcb);
        EXPECT(gbc.readMem(0xe9f8), 0xe7);
        // CB E7 026F
        gbc.setState(0xcab4, 0xe8e6, 0xf8e0, 0x8091, 0xd93a, 0xa386, 0x1, 0x0);
        gbc.writeMem(0xcab4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xe8e6);
        EXPECT(gbc.pc(), 0xcab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcab4), 0xcb);
        EXPECT(gbc.readMem(0xcab5), 0xe7);
        // CB E7 0270
        gbc.setState(0x31ac, 0x6d9, 0x8d0, 0x5477, 0x2395, 0x2a5e, 0x1, 0x0);
        gbc.writeMem(0x31ac, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6d9);
        EXPECT(gbc.pc(), 0x31ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0271
        gbc.setState(0xc93d, 0x457b, 0xa210, 0x79b1, 0x969, 0xea6d, 0x0, 0x0);
        gbc.writeMem(0xc93d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x457b);
        EXPECT(gbc.pc(), 0xc93f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc93d), 0xcb);
        EXPECT(gbc.readMem(0xc93e), 0xe7);
        // CB E7 0272
        gbc.setState(0x7b24, 0xc3ff, 0x33a0, 0xbd37, 0x204a, 0xb30a, 0x0, 0x1);
        gbc.writeMem(0x7b24, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xc3ff);
        EXPECT(gbc.pc(), 0x7b26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0273
        gbc.setState(0x7132, 0x979d, 0x1580, 0xee73, 0x31ba, 0xd60, 0x1, 0x0);
        gbc.writeMem(0x7132, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x979d);
        EXPECT(gbc.pc(), 0x7134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0274
        gbc.setState(0x6964, 0x71c8, 0xe9a0, 0xbe8d, 0x8dbd, 0x9bf2, 0x1, 0x1);
        gbc.writeMem(0x6964, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x71c8);
        EXPECT(gbc.pc(), 0x6966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0275
        gbc.setState(0x5687, 0x8c0e, 0x1df0, 0xd507, 0x7997, 0x84dd, 0x1, 0x0);
        gbc.writeMem(0x5687, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x8c0e);
        EXPECT(gbc.pc(), 0x5689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0276
        gbc.setState(0xd884, 0x42e5, 0x6980, 0x8ccd, 0xa08a, 0x9ac5, 0x0, 0x0);
        gbc.writeMem(0xd884, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x42e5);
        EXPECT(gbc.pc(), 0xd886);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd884), 0xcb);
        EXPECT(gbc.readMem(0xd885), 0xe7);
        // CB E7 0277
        gbc.setState(0xbc57, 0xf846, 0xae20, 0x9def, 0x3098, 0xcf80, 0x0, 0x1);
        gbc.writeMem(0xbc57, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf846);
        EXPECT(gbc.pc(), 0xbc59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc57), 0xcb);
        EXPECT(gbc.readMem(0xbc58), 0xe7);
        // CB E7 0278
        gbc.setState(0x15db, 0x5323, 0x57d0, 0xce71, 0xb0b0, 0x9e9b, 0x1, 0x1);
        gbc.writeMem(0x15db, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x5323);
        EXPECT(gbc.pc(), 0x15dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0279
        gbc.setState(0xb96b, 0xc91e, 0x8300, 0xb371, 0x4841, 0x59a8, 0x0, 0x0);
        gbc.writeMem(0xb96b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc91e);
        EXPECT(gbc.pc(), 0xb96d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb96b), 0xcb);
        EXPECT(gbc.readMem(0xb96c), 0xe7);
        // CB E7 027B
        gbc.setState(0x9d2c, 0x9cff, 0xc070, 0xa6aa, 0x167, 0xe468, 0x1, 0x1);
        gbc.writeMem(0x9d2c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x9cff);
        EXPECT(gbc.pc(), 0x9d2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d2c), 0xcb);
        EXPECT(gbc.readMem(0x9d2d), 0xe7);
        // CB E7 027C
        gbc.setState(0x3c5e, 0x9e7c, 0x8680, 0x15b8, 0x4485, 0xaa3d, 0x0, 0x0);
        gbc.writeMem(0x3c5e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9e7c);
        EXPECT(gbc.pc(), 0x3c60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 027D
        gbc.setState(0x8e37, 0xe793, 0x2c10, 0x822f, 0xafd, 0xd35d, 0x1, 0x1);
        gbc.writeMem(0x8e37, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xe793);
        EXPECT(gbc.pc(), 0x8e39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e37), 0xcb);
        EXPECT(gbc.readMem(0x8e38), 0xe7);
        // CB E7 027E
        gbc.setState(0xda50, 0xa698, 0x3150, 0xf6e5, 0x62e2, 0xa931, 0x1, 0x1);
        gbc.writeMem(0xda50, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xa698);
        EXPECT(gbc.pc(), 0xda52);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda50), 0xcb);
        EXPECT(gbc.readMem(0xda51), 0xe7);
        // CB E7 027F
        gbc.setState(0x1317, 0xbdc, 0x1290, 0x26ca, 0x71d0, 0x8c31, 0x1, 0x0);
        gbc.writeMem(0x1317, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xbdc);
        EXPECT(gbc.pc(), 0x1319);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0280
        gbc.setState(0xcea7, 0xb8b9, 0x6e40, 0x9cd9, 0xd9c5, 0xa7e, 0x1, 0x0);
        gbc.writeMem(0xcea7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb8b9);
        EXPECT(gbc.pc(), 0xcea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcea7), 0xcb);
        EXPECT(gbc.readMem(0xcea8), 0xe7);
        // CB E7 0281
        gbc.setState(0x625c, 0xa5d2, 0x8a90, 0xf3e9, 0x591f, 0xe0a9, 0x1, 0x0);
        gbc.writeMem(0x625c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa5d2);
        EXPECT(gbc.pc(), 0x625e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0282
        gbc.setState(0xefea, 0x9cbc, 0xff50, 0x6702, 0x9e5c, 0x65f7, 0x1, 0x1);
        gbc.writeMem(0xefea, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x9cbc);
        EXPECT(gbc.pc(), 0xefec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefea), 0xcb);
        EXPECT(gbc.readMem(0xefeb), 0xe7);
        // CB E7 0283
        gbc.setState(0x94df, 0x4a54, 0x5970, 0xff8b, 0xea5b, 0x50a5, 0x0, 0x0);
        gbc.writeMem(0x94df, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4a54);
        EXPECT(gbc.pc(), 0x94e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94df), 0xcb);
        EXPECT(gbc.readMem(0x94e0), 0xe7);
        // CB E7 0284
        gbc.setState(0xc892, 0x5cf1, 0xc3c0, 0xbb6b, 0x8049, 0x9508, 0x1, 0x1);
        gbc.writeMem(0xc892, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x5cf1);
        EXPECT(gbc.pc(), 0xc894);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc892), 0xcb);
        EXPECT(gbc.readMem(0xc893), 0xe7);
        // CB E7 0285
        gbc.setState(0xcf6, 0x13a2, 0xb710, 0xaa4d, 0x43b6, 0xddec, 0x0, 0x0);
        gbc.writeMem(0xcf6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x13a2);
        EXPECT(gbc.pc(), 0xcf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0286
        gbc.setState(0x1f78, 0x62f1, 0x13a0, 0x77d2, 0x5aa8, 0x4fb5, 0x1, 0x0);
        gbc.writeMem(0x1f78, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x62f1);
        EXPECT(gbc.pc(), 0x1f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0287
        gbc.setState(0x9cf1, 0xb1ae, 0x68c0, 0xee44, 0x8105, 0xa434, 0x0, 0x0);
        gbc.writeMem(0x9cf1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb1ae);
        EXPECT(gbc.pc(), 0x9cf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cf1), 0xcb);
        EXPECT(gbc.readMem(0x9cf2), 0xe7);
        // CB E7 0288
        gbc.setState(0x235c, 0xd283, 0x6b60, 0x804d, 0x6bcc, 0x9d26, 0x1, 0x1);
        gbc.writeMem(0x235c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xd283);
        EXPECT(gbc.pc(), 0x235e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0289
        gbc.setState(0xe202, 0x872f, 0xcee0, 0xd826, 0x8586, 0x500e, 0x1, 0x1);
        gbc.writeMem(0xe202, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x872f);
        EXPECT(gbc.pc(), 0xe204);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe202), 0xcb);
        EXPECT(gbc.readMem(0xe203), 0xe7);
        // CB E7 028A
        gbc.setState(0x9d76, 0x9863, 0x7630, 0xed99, 0x738f, 0x2e4, 0x1, 0x1);
        gbc.writeMem(0x9d76, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9863);
        EXPECT(gbc.pc(), 0x9d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d76), 0xcb);
        EXPECT(gbc.readMem(0x9d77), 0xe7);
        // CB E7 028B
        gbc.setState(0xaafa, 0x9a1d, 0xb600, 0x1c, 0xc6a9, 0x9b0c, 0x1, 0x0);
        gbc.writeMem(0xaafa, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x9a1d);
        EXPECT(gbc.pc(), 0xaafc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaafa), 0xcb);
        EXPECT(gbc.readMem(0xaafb), 0xe7);
        // CB E7 028C
        gbc.setState(0x285d, 0x40ae, 0x85d0, 0xdf8e, 0x6103, 0x38e2, 0x0, 0x1);
        gbc.writeMem(0x285d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x40ae);
        EXPECT(gbc.pc(), 0x285f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 028D
        gbc.setState(0xad2b, 0xf883, 0x1460, 0x7b7f, 0x3c9, 0x52, 0x1, 0x1);
        gbc.writeMem(0xad2b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xf883);
        EXPECT(gbc.pc(), 0xad2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad2b), 0xcb);
        EXPECT(gbc.readMem(0xad2c), 0xe7);
        // CB E7 028E
        gbc.setState(0xbb32, 0x4c71, 0x92f0, 0xf72c, 0xf993, 0x6d2a, 0x1, 0x1);
        gbc.writeMem(0xbb32, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4c71);
        EXPECT(gbc.pc(), 0xbb34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb32), 0xcb);
        EXPECT(gbc.readMem(0xbb33), 0xe7);
        // CB E7 028F
        gbc.setState(0x3c7d, 0xcbea, 0x5ca0, 0x9cb, 0xddcc, 0x8434, 0x1, 0x1);
        gbc.writeMem(0x3c7d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcbea);
        EXPECT(gbc.pc(), 0x3c7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0290
        gbc.setState(0x5099, 0x1245, 0xcd30, 0x66e8, 0xdf4d, 0x37f2, 0x1, 0x0);
        gbc.writeMem(0x5099, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x1245);
        EXPECT(gbc.pc(), 0x509b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0291
        gbc.setState(0xabf2, 0x6e99, 0xa720, 0x2997, 0x5530, 0x5195, 0x1, 0x1);
        gbc.writeMem(0xabf2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x6e99);
        EXPECT(gbc.pc(), 0xabf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xabf2), 0xcb);
        EXPECT(gbc.readMem(0xabf3), 0xe7);
        // CB E7 0292
        gbc.setState(0x4109, 0xf2d, 0x3b10, 0xf22, 0xbbdd, 0xd258, 0x0, 0x0);
        gbc.writeMem(0x4109, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf2d);
        EXPECT(gbc.pc(), 0x410b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0293
        gbc.setState(0x8748, 0x6822, 0x19d0, 0xdfd8, 0xc979, 0x1c87, 0x0, 0x0);
        gbc.writeMem(0x8748, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6822);
        EXPECT(gbc.pc(), 0x874a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8748), 0xcb);
        EXPECT(gbc.readMem(0x8749), 0xe7);
        // CB E7 0294
        gbc.setState(0x81c0, 0xa45e, 0xd8d0, 0x57b0, 0x87d9, 0x6240, 0x1, 0x0);
        gbc.writeMem(0x81c0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xa45e);
        EXPECT(gbc.pc(), 0x81c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c0), 0xcb);
        EXPECT(gbc.readMem(0x81c1), 0xe7);
        // CB E7 0295
        gbc.setState(0x6694, 0x2404, 0x8c40, 0x32af, 0x7fe5, 0xcd88, 0x1, 0x1);
        gbc.writeMem(0x6694, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2404);
        EXPECT(gbc.pc(), 0x6696);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0296
        gbc.setState(0x73a6, 0x7d7b, 0x58f0, 0xea7b, 0x2c11, 0x2eb9, 0x1, 0x1);
        gbc.writeMem(0x73a6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7d7b);
        EXPECT(gbc.pc(), 0x73a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0297
        gbc.setState(0x215f, 0xe3b1, 0xcf20, 0x5676, 0xc15e, 0xb7c0, 0x0, 0x0);
        gbc.writeMem(0x215f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xe3b1);
        EXPECT(gbc.pc(), 0x2161);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0298
        gbc.setState(0xb0ee, 0xe452, 0xb810, 0xc910, 0xb453, 0x4b5b, 0x1, 0x1);
        gbc.writeMem(0xb0ee, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe452);
        EXPECT(gbc.pc(), 0xb0f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb0ee), 0xcb);
        EXPECT(gbc.readMem(0xb0ef), 0xe7);
        // CB E7 0299
        gbc.setState(0xb374, 0xd08b, 0x8ff0, 0x99a8, 0xd836, 0xfc69, 0x1, 0x0);
        gbc.writeMem(0xb374, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd08b);
        EXPECT(gbc.pc(), 0xb376);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb374), 0xcb);
        EXPECT(gbc.readMem(0xb375), 0xe7);
        // CB E7 029A
        gbc.setState(0x7955, 0xd0a4, 0x1d40, 0x677f, 0x27af, 0x380c, 0x0, 0x0);
        gbc.writeMem(0x7955, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xd0a4);
        EXPECT(gbc.pc(), 0x7957);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 029B
        gbc.setState(0xb24, 0x82e3, 0x4240, 0x57b1, 0x7ecc, 0xa991, 0x1, 0x0);
        gbc.writeMem(0xb24, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x82e3);
        EXPECT(gbc.pc(), 0xb26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 029C
        gbc.setState(0xc447, 0xfec, 0x10c0, 0x4e16, 0x5588, 0x7ac, 0x1, 0x0);
        gbc.writeMem(0xc447, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xfec);
        EXPECT(gbc.pc(), 0xc449);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc447), 0xcb);
        EXPECT(gbc.readMem(0xc448), 0xe7);
        // CB E7 029D
        gbc.setState(0x62b0, 0xb00d, 0x8ff0, 0xbefe, 0x999c, 0xe904, 0x1, 0x0);
        gbc.writeMem(0x62b0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xb00d);
        EXPECT(gbc.pc(), 0x62b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 029E
        gbc.setState(0x191f, 0x2289, 0x3b10, 0xfd90, 0xdd3a, 0xa575, 0x0, 0x0);
        gbc.writeMem(0x191f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2289);
        EXPECT(gbc.pc(), 0x1921);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 029F
        gbc.setState(0xbae, 0x60cf, 0x1c90, 0x5701, 0x263e, 0x2c8a, 0x0, 0x1);
        gbc.writeMem(0xbae, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x60cf);
        EXPECT(gbc.pc(), 0xbb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02A0
        gbc.setState(0xa592, 0x2695, 0x8850, 0xe18, 0x188e, 0x3f24, 0x0, 0x0);
        gbc.writeMem(0xa592, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x2695);
        EXPECT(gbc.pc(), 0xa594);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa592), 0xcb);
        EXPECT(gbc.readMem(0xa593), 0xe7);
        // CB E7 02A1
        gbc.setState(0x9e15, 0x3c84, 0x99b0, 0x7820, 0x8919, 0x5d1c, 0x0, 0x1);
        gbc.writeMem(0x9e15, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x3c84);
        EXPECT(gbc.pc(), 0x9e17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e15), 0xcb);
        EXPECT(gbc.readMem(0x9e16), 0xe7);
        // CB E7 02A2
        gbc.setState(0x83f0, 0x636, 0x9f40, 0xc29a, 0xaf80, 0x6e6c, 0x0, 0x1);
        gbc.writeMem(0x83f0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x636);
        EXPECT(gbc.pc(), 0x83f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83f0), 0xcb);
        EXPECT(gbc.readMem(0x83f1), 0xe7);
        // CB E7 02A3
        gbc.setState(0x334d, 0xfa2c, 0x6440, 0x7c46, 0x9e93, 0x3ecb, 0x0, 0x0);
        gbc.writeMem(0x334d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xfa2c);
        EXPECT(gbc.pc(), 0x334f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02A5
        gbc.setState(0xd27b, 0x5d02, 0xddb0, 0x4296, 0x1edb, 0x62d2, 0x1, 0x1);
        gbc.writeMem(0xd27b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x5d02);
        EXPECT(gbc.pc(), 0xd27d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd27b), 0xcb);
        EXPECT(gbc.readMem(0xd27c), 0xe7);
        // CB E7 02A6
        gbc.setState(0x109f, 0xa58c, 0x1df0, 0x430d, 0xcd52, 0xb37e, 0x1, 0x0);
        gbc.writeMem(0x109f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa58c);
        EXPECT(gbc.pc(), 0x10a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02A7
        gbc.setState(0x3188, 0xe217, 0x87f0, 0xbaac, 0x6e6d, 0x7c2e, 0x1, 0x1);
        gbc.writeMem(0x3188, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xe217);
        EXPECT(gbc.pc(), 0x318a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02A8
        gbc.setState(0x4794, 0x9b11, 0x5210, 0x7bc9, 0xa8a3, 0x1c2c, 0x0, 0x1);
        gbc.writeMem(0x4794, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x9b11);
        EXPECT(gbc.pc(), 0x4796);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02A9
        gbc.setState(0xdcbd, 0x4c58, 0xa6b0, 0x76ba, 0xce18, 0xb2f3, 0x1, 0x0);
        gbc.writeMem(0xdcbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4c58);
        EXPECT(gbc.pc(), 0xdcbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcbd), 0xcb);
        EXPECT(gbc.readMem(0xdcbe), 0xe7);
        // CB E7 02AA
        gbc.setState(0x81e2, 0xeae7, 0xbbf0, 0x60c4, 0x5206, 0xde44, 0x0, 0x0);
        gbc.writeMem(0x81e2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xeae7);
        EXPECT(gbc.pc(), 0x81e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81e2), 0xcb);
        EXPECT(gbc.readMem(0x81e3), 0xe7);
        // CB E7 02AB
        gbc.setState(0xa63e, 0xb461, 0x5500, 0x68b, 0xdbb5, 0xfef6, 0x0, 0x1);
        gbc.writeMem(0xa63e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb461);
        EXPECT(gbc.pc(), 0xa640);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa63e), 0xcb);
        EXPECT(gbc.readMem(0xa63f), 0xe7);
        // CB E7 02AC
        gbc.setState(0x8bbc, 0x4d57, 0x7b20, 0x387f, 0x74f2, 0xa0c, 0x1, 0x0);
        gbc.writeMem(0x8bbc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x4d57);
        EXPECT(gbc.pc(), 0x8bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bbc), 0xcb);
        EXPECT(gbc.readMem(0x8bbd), 0xe7);
        // CB E7 02AD
        gbc.setState(0x6da2, 0x7f30, 0xbb80, 0x8e1f, 0xe3ce, 0xf362, 0x1, 0x1);
        gbc.writeMem(0x6da2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x7f30);
        EXPECT(gbc.pc(), 0x6da4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02AE
        gbc.setState(0x345c, 0x83f1, 0x3280, 0x988e, 0x5b1c, 0x324d, 0x0, 0x0);
        gbc.writeMem(0x345c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x83f1);
        EXPECT(gbc.pc(), 0x345e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02AF
        gbc.setState(0x43e7, 0x5b7e, 0xb2a0, 0x8d57, 0xeaa6, 0x8e2a, 0x0, 0x1);
        gbc.writeMem(0x43e7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x5b7e);
        EXPECT(gbc.pc(), 0x43e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02B0
        gbc.setState(0xe8cb, 0x2a3c, 0x1b0, 0xe11b, 0x308f, 0x9c4d, 0x0, 0x0);
        gbc.writeMem(0xe8cb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2a3c);
        EXPECT(gbc.pc(), 0xe8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8cb), 0xcb);
        EXPECT(gbc.readMem(0xe8cc), 0xe7);
        // CB E7 02B1
        gbc.setState(0x9f, 0x7673, 0xf430, 0x1d32, 0x90a, 0x8061, 0x0, 0x1);
        gbc.writeMem(0x9f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7673);
        EXPECT(gbc.pc(), 0xa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02B2
        gbc.setState(0x4019, 0x221, 0x1eb0, 0xf964, 0x13b0, 0x9f36, 0x1, 0x1);
        gbc.writeMem(0x4019, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x221);
        EXPECT(gbc.pc(), 0x401b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02B4
        gbc.setState(0x6ffd, 0xe0a7, 0x8a30, 0x2133, 0x951, 0xb7a5, 0x1, 0x0);
        gbc.writeMem(0x6ffd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xe0a7);
        EXPECT(gbc.pc(), 0x6fff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02B6
        gbc.setState(0xd0ec, 0xe64c, 0x400, 0x5476, 0xdcfc, 0x6eda, 0x1, 0x0);
        gbc.writeMem(0xd0ec, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe64c);
        EXPECT(gbc.pc(), 0xd0ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0ec), 0xcb);
        EXPECT(gbc.readMem(0xd0ed), 0xe7);
        // CB E7 02B7
        gbc.setState(0xc16f, 0x297d, 0xd7c0, 0x6ae8, 0x7ef1, 0x9b61, 0x1, 0x0);
        gbc.writeMem(0xc16f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x297d);
        EXPECT(gbc.pc(), 0xc171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc16f), 0xcb);
        EXPECT(gbc.readMem(0xc170), 0xe7);
        // CB E7 02B8
        gbc.setState(0x3b24, 0xdc98, 0xa6d0, 0xd5ad, 0x1747, 0x7b36, 0x0, 0x1);
        gbc.writeMem(0x3b24, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xdc98);
        EXPECT(gbc.pc(), 0x3b26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02B9
        gbc.setState(0x4325, 0x47da, 0xa150, 0x6707, 0xd5d1, 0xdf5d, 0x0, 0x1);
        gbc.writeMem(0x4325, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x47da);
        EXPECT(gbc.pc(), 0x4327);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02BA
        gbc.setState(0xa1de, 0x7174, 0x5b30, 0x8b1a, 0xce8, 0xd49b, 0x0, 0x1);
        gbc.writeMem(0xa1de, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7174);
        EXPECT(gbc.pc(), 0xa1e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1de), 0xcb);
        EXPECT(gbc.readMem(0xa1df), 0xe7);
        // CB E7 02BB
        gbc.setState(0x1418, 0x23b3, 0xe3e0, 0x5667, 0xecb9, 0xa664, 0x0, 0x1);
        gbc.writeMem(0x1418, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x23b3);
        EXPECT(gbc.pc(), 0x141a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02BC
        gbc.setState(0xc23e, 0xe935, 0xef50, 0xa137, 0x6020, 0xa010, 0x1, 0x0);
        gbc.writeMem(0xc23e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe935);
        EXPECT(gbc.pc(), 0xc240);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc23e), 0xcb);
        EXPECT(gbc.readMem(0xc23f), 0xe7);
        // CB E7 02BE
        gbc.setState(0x1fed, 0x967f, 0xeed0, 0x2eb5, 0x79a9, 0xb402, 0x0, 0x1);
        gbc.writeMem(0x1fed, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x967f);
        EXPECT(gbc.pc(), 0x1fef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02BF
        gbc.setState(0x570e, 0xf7ba, 0x4560, 0xb4ef, 0x8af9, 0xa0c8, 0x0, 0x1);
        gbc.writeMem(0x570e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xf7ba);
        EXPECT(gbc.pc(), 0x5710);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02C0
        gbc.setState(0xb4d, 0xa9d, 0xc170, 0xc578, 0xcd8f, 0x4de6, 0x1, 0x0);
        gbc.writeMem(0xb4d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa9d);
        EXPECT(gbc.pc(), 0xb4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02C1
        gbc.setState(0x6457, 0x204d, 0xf740, 0x52e, 0x9e70, 0xfe1c, 0x0, 0x1);
        gbc.writeMem(0x6457, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x204d);
        EXPECT(gbc.pc(), 0x6459);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02C2
        gbc.setState(0x5262, 0xd506, 0x8370, 0x2de3, 0xde97, 0x2b89, 0x0, 0x1);
        gbc.writeMem(0x5262, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd506);
        EXPECT(gbc.pc(), 0x5264);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02C3
        gbc.setState(0xaa0d, 0xf278, 0x8a10, 0x18b6, 0x4523, 0x5cf8, 0x1, 0x1);
        gbc.writeMem(0xaa0d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf278);
        EXPECT(gbc.pc(), 0xaa0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa0d), 0xcb);
        EXPECT(gbc.readMem(0xaa0e), 0xe7);
        // CB E7 02C4
        gbc.setState(0xb139, 0x48, 0xc850, 0xb72, 0xc659, 0xe79e, 0x0, 0x1);
        gbc.writeMem(0xb139, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x48);
        EXPECT(gbc.pc(), 0xb13b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb139), 0xcb);
        EXPECT(gbc.readMem(0xb13a), 0xe7);
        // CB E7 02C5
        gbc.setState(0xefad, 0xf02d, 0x91d0, 0x13e7, 0xe9c7, 0xb254, 0x0, 0x1);
        gbc.writeMem(0xefad, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf02d);
        EXPECT(gbc.pc(), 0xefaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefad), 0xcb);
        EXPECT(gbc.readMem(0xefae), 0xe7);
        // CB E7 02C6
        gbc.setState(0xda08, 0xc6e, 0xcd00, 0x5371, 0xfe64, 0x7540, 0x0, 0x1);
        gbc.writeMem(0xda08, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc6e);
        EXPECT(gbc.pc(), 0xda0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda08), 0xcb);
        EXPECT(gbc.readMem(0xda09), 0xe7);
        // CB E7 02C7
        gbc.setState(0x565c, 0x521f, 0x110, 0x3e1d, 0x1edc, 0x1683, 0x1, 0x0);
        gbc.writeMem(0x565c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x521f);
        EXPECT(gbc.pc(), 0x565e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02C8
        gbc.setState(0x432f, 0x9a54, 0xc560, 0xe147, 0xda69, 0xcd4e, 0x1, 0x0);
        gbc.writeMem(0x432f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9a54);
        EXPECT(gbc.pc(), 0x4331);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02C9
        gbc.setState(0xaed, 0x14ea, 0x2ec0, 0x781, 0x7ee5, 0x43f9, 0x0, 0x0);
        gbc.writeMem(0xaed, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x14ea);
        EXPECT(gbc.pc(), 0xaef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02CA
        gbc.setState(0xb759, 0x74c6, 0xa280, 0xf7f7, 0xfbfa, 0x1afc, 0x0, 0x0);
        gbc.writeMem(0xb759, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x74c6);
        EXPECT(gbc.pc(), 0xb75b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb759), 0xcb);
        EXPECT(gbc.readMem(0xb75a), 0xe7);
        // CB E7 02CB
        gbc.setState(0x33d0, 0x4663, 0x4bb0, 0x5201, 0xf070, 0xb1ad, 0x1, 0x1);
        gbc.writeMem(0x33d0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x4663);
        EXPECT(gbc.pc(), 0x33d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02CC
        gbc.setState(0x430d, 0x40e5, 0xc510, 0x6f94, 0xf03c, 0x14ff, 0x1, 0x0);
        gbc.writeMem(0x430d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x40e5);
        EXPECT(gbc.pc(), 0x430f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02CD
        gbc.setState(0xd078, 0xe38, 0x1b0, 0xe24c, 0x7e24, 0xa56a, 0x0, 0x1);
        gbc.writeMem(0xd078, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xe38);
        EXPECT(gbc.pc(), 0xd07a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd078), 0xcb);
        EXPECT(gbc.readMem(0xd079), 0xe7);
        // CB E7 02CE
        gbc.setState(0x5e63, 0x9328, 0xc970, 0xab21, 0x86b9, 0x82b1, 0x0, 0x1);
        gbc.writeMem(0x5e63, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x9328);
        EXPECT(gbc.pc(), 0x5e65);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02CF
        gbc.setState(0xe10b, 0xe358, 0xca60, 0x411f, 0x79cf, 0xb34d, 0x0, 0x0);
        gbc.writeMem(0xe10b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xe358);
        EXPECT(gbc.pc(), 0xe10d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe10b), 0xcb);
        EXPECT(gbc.readMem(0xe10c), 0xe7);
        // CB E7 02D0
        gbc.setState(0x8fc7, 0x5245, 0x1a80, 0xe38e, 0x186, 0xc179, 0x0, 0x0);
        gbc.writeMem(0x8fc7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x5245);
        EXPECT(gbc.pc(), 0x8fc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc7), 0xcb);
        EXPECT(gbc.readMem(0x8fc8), 0xe7);
        // CB E7 02D1
        gbc.setState(0x395c, 0xf274, 0xc190, 0x9186, 0x370e, 0x3106, 0x0, 0x0);
        gbc.writeMem(0x395c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xf274);
        EXPECT(gbc.pc(), 0x395e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02D2
        gbc.setState(0x2517, 0xd354, 0x560, 0xfd34, 0x9558, 0xf34b, 0x0, 0x0);
        gbc.writeMem(0x2517, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xd354);
        EXPECT(gbc.pc(), 0x2519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02D4
        gbc.setState(0x3f4f, 0x6c9e, 0xf1b0, 0xe625, 0x6b6d, 0xa4a1, 0x0, 0x1);
        gbc.writeMem(0x3f4f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6c9e);
        EXPECT(gbc.pc(), 0x3f51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02D5
        gbc.setState(0x38b3, 0x4039, 0xf630, 0x4d5a, 0xd53b, 0x2173, 0x1, 0x1);
        gbc.writeMem(0x38b3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4039);
        EXPECT(gbc.pc(), 0x38b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02D6
        gbc.setState(0x9338, 0x9d64, 0x31f0, 0x32f6, 0x4541, 0xd050, 0x1, 0x1);
        gbc.writeMem(0x9338, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x9d64);
        EXPECT(gbc.pc(), 0x933a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9338), 0xcb);
        EXPECT(gbc.readMem(0x9339), 0xe7);
        // CB E7 02D7
        gbc.setState(0xce2c, 0x4e0d, 0x2c30, 0x3a60, 0x4088, 0x5e5c, 0x0, 0x1);
        gbc.writeMem(0xce2c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x4e0d);
        EXPECT(gbc.pc(), 0xce2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce2c), 0xcb);
        EXPECT(gbc.readMem(0xce2d), 0xe7);
        // CB E7 02D8
        gbc.setState(0x11c2, 0x1984, 0xae30, 0xa44, 0xa1cc, 0x3e70, 0x0, 0x1);
        gbc.writeMem(0x11c2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1984);
        EXPECT(gbc.pc(), 0x11c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02D9
        gbc.setState(0x1255, 0xe489, 0x7ab0, 0x544, 0xc525, 0xd517, 0x0, 0x0);
        gbc.writeMem(0x1255, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xe489);
        EXPECT(gbc.pc(), 0x1257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02DB
        gbc.setState(0x8d2b, 0xad44, 0x1630, 0x7534, 0x3b5, 0xa06a, 0x0, 0x0);
        gbc.writeMem(0x8d2b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xad44);
        EXPECT(gbc.pc(), 0x8d2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d2b), 0xcb);
        EXPECT(gbc.readMem(0x8d2c), 0xe7);
        // CB E7 02DC
        gbc.setState(0x1c0c, 0x24c1, 0xe760, 0xa6d8, 0x4709, 0xbd51, 0x0, 0x1);
        gbc.writeMem(0x1c0c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x24c1);
        EXPECT(gbc.pc(), 0x1c0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02DD
        gbc.setState(0xbe3d, 0x996f, 0xf2e0, 0x31dc, 0x88a6, 0x8cd5, 0x1, 0x1);
        gbc.writeMem(0xbe3d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x996f);
        EXPECT(gbc.pc(), 0xbe3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe3d), 0xcb);
        EXPECT(gbc.readMem(0xbe3e), 0xe7);
        // CB E7 02DE
        gbc.setState(0x5838, 0xd5cb, 0x5a0, 0x55cb, 0x464c, 0xe7b3, 0x1, 0x0);
        gbc.writeMem(0x5838, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xd5cb);
        EXPECT(gbc.pc(), 0x583a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02DF
        gbc.setState(0x3bbb, 0x7d07, 0x28f0, 0x29d7, 0xd656, 0x9c6b, 0x1, 0x0);
        gbc.writeMem(0x3bbb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x7d07);
        EXPECT(gbc.pc(), 0x3bbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E1
        gbc.setState(0xd6d3, 0xd1f8, 0x5ca0, 0x1808, 0xe408, 0x267d, 0x0, 0x0);
        gbc.writeMem(0xd6d3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd1f8);
        EXPECT(gbc.pc(), 0xd6d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6d3), 0xcb);
        EXPECT(gbc.readMem(0xd6d4), 0xe7);
        // CB E7 02E2
        gbc.setState(0x79f, 0xcd9a, 0x5350, 0x1cee, 0x132e, 0x3d00, 0x1, 0x0);
        gbc.writeMem(0x79f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xcd9a);
        EXPECT(gbc.pc(), 0x7a1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E3
        gbc.setState(0x1dc2, 0x642b, 0x5e70, 0x3c1, 0x3786, 0xb66a, 0x0, 0x0);
        gbc.writeMem(0x1dc2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x642b);
        EXPECT(gbc.pc(), 0x1dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E4
        gbc.setState(0x42cb, 0xe54e, 0xdab0, 0x13ea, 0x42db, 0x4bf4, 0x1, 0x0);
        gbc.writeMem(0x42cb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xe54e);
        EXPECT(gbc.pc(), 0x42cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E5
        gbc.setState(0x1b3a, 0xc058, 0xb030, 0xeac3, 0xcd31, 0x9117, 0x1, 0x1);
        gbc.writeMem(0x1b3a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xc058);
        EXPECT(gbc.pc(), 0x1b3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E6
        gbc.setState(0x5d14, 0x1678, 0x78a0, 0x999b, 0x4a8, 0x9998, 0x1, 0x1);
        gbc.writeMem(0x5d14, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1678);
        EXPECT(gbc.pc(), 0x5d16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02E7
        gbc.setState(0x34e9, 0x798a, 0x8ce0, 0x9920, 0xd9b2, 0xf15b, 0x1, 0x1);
        gbc.writeMem(0x34e9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x798a);
        EXPECT(gbc.pc(), 0x34eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02E8
        gbc.setState(0xd4f, 0xe7ab, 0x6450, 0x384a, 0x3655, 0xce, 0x0, 0x1);
        gbc.writeMem(0xd4f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xe7ab);
        EXPECT(gbc.pc(), 0xd51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02E9
        gbc.setState(0x24d9, 0x9f79, 0x65e0, 0x9d2f, 0x1267, 0x67bd, 0x0, 0x0);
        gbc.writeMem(0x24d9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9f79);
        EXPECT(gbc.pc(), 0x24db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02EA
        gbc.setState(0x15fc, 0x8aac, 0x6750, 0xa888, 0x3367, 0xd884, 0x0, 0x1);
        gbc.writeMem(0x15fc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x8aac);
        EXPECT(gbc.pc(), 0x15fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02EC
        gbc.setState(0x52c1, 0x346a, 0x2dc0, 0xc5, 0xa2cd, 0x3c1c, 0x0, 0x1);
        gbc.writeMem(0x52c1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x346a);
        EXPECT(gbc.pc(), 0x52c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02ED
        gbc.setState(0x156f, 0xe7f9, 0x8ae0, 0x84a2, 0xecaa, 0x2b2f, 0x1, 0x1);
        gbc.writeMem(0x156f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe7f9);
        EXPECT(gbc.pc(), 0x1571);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02EE
        gbc.setState(0x364f, 0x852e, 0x9140, 0xa52c, 0x29ce, 0x4eaa, 0x1, 0x0);
        gbc.writeMem(0x364f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x852e);
        EXPECT(gbc.pc(), 0x3651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02EF
        gbc.setState(0x80a4, 0x55a9, 0x44c0, 0xc189, 0xb3d8, 0x4885, 0x0, 0x1);
        gbc.writeMem(0x80a4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x55a9);
        EXPECT(gbc.pc(), 0x80a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80a4), 0xcb);
        EXPECT(gbc.readMem(0x80a5), 0xe7);
        // CB E7 02F0
        gbc.setState(0xedda, 0xebe6, 0xef50, 0x216f, 0x1ca7, 0xf981, 0x0, 0x1);
        gbc.writeMem(0xedda, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xebe6);
        EXPECT(gbc.pc(), 0xeddc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedda), 0xcb);
        EXPECT(gbc.readMem(0xeddb), 0xe7);
        // CB E7 02F1
        gbc.setState(0x26cd, 0xbf6e, 0x1160, 0x23cb, 0x7780, 0x6626, 0x1, 0x1);
        gbc.writeMem(0x26cd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xbf6e);
        EXPECT(gbc.pc(), 0x26cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02F2
        gbc.setState(0x5262, 0x6672, 0x2330, 0x8da0, 0x2ae6, 0x96da, 0x1, 0x1);
        gbc.writeMem(0x5262, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6672);
        EXPECT(gbc.pc(), 0x5264);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02F3
        gbc.setState(0x84cf, 0xe17a, 0x95d0, 0x6d0, 0xe0c2, 0x3810, 0x0, 0x1);
        gbc.writeMem(0x84cf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe17a);
        EXPECT(gbc.pc(), 0x84d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x84cf), 0xcb);
        EXPECT(gbc.readMem(0x84d0), 0xe7);
        // CB E7 02F4
        gbc.setState(0x787c, 0xe105, 0x6470, 0x6b1f, 0x9cf0, 0x5894, 0x0, 0x1);
        gbc.writeMem(0x787c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe105);
        EXPECT(gbc.pc(), 0x787e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02F5
        gbc.setState(0x7a1d, 0x64f9, 0xfe00, 0xadf1, 0x6b99, 0xac3e, 0x1, 0x0);
        gbc.writeMem(0x7a1d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x64f9);
        EXPECT(gbc.pc(), 0x7a1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02F6
        gbc.setState(0x2da6, 0x3f8d, 0x48f0, 0x16fe, 0xa43a, 0x28f, 0x1, 0x0);
        gbc.writeMem(0x2da6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x3f8d);
        EXPECT(gbc.pc(), 0x2da8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02F7
        gbc.setState(0x425a, 0x423, 0x55d0, 0xc89b, 0xc3ab, 0xfd21, 0x0, 0x1);
        gbc.writeMem(0x425a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x423);
        EXPECT(gbc.pc(), 0x425c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02F8
        gbc.setState(0xeb1c, 0x81a7, 0x87c0, 0xa82f, 0xd1c2, 0x323e, 0x1, 0x1);
        gbc.writeMem(0xeb1c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x81a7);
        EXPECT(gbc.pc(), 0xeb1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1c), 0xcb);
        EXPECT(gbc.readMem(0xeb1d), 0xe7);
        // CB E7 02F9
        gbc.setState(0x2776, 0xa27c, 0xd870, 0x3cda, 0x2b0b, 0x8a72, 0x1, 0x0);
        gbc.writeMem(0x2776, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa27c);
        EXPECT(gbc.pc(), 0x2778);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02FB
        gbc.setState(0xd17c, 0xe7c3, 0xb620, 0xc20, 0x503b, 0x3af5, 0x0, 0x0);
        gbc.writeMem(0xd17c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe7c3);
        EXPECT(gbc.pc(), 0xd17e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd17c), 0xcb);
        EXPECT(gbc.readMem(0xd17d), 0xe7);
        // CB E7 02FC
        gbc.setState(0x33b1, 0xc0a9, 0x84f0, 0x6112, 0x5c3b, 0xae68, 0x0, 0x0);
        gbc.writeMem(0x33b1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc0a9);
        EXPECT(gbc.pc(), 0x33b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 02FD
        gbc.setState(0x166a, 0x5b5d, 0x6660, 0xd73d, 0x2e1d, 0x531b, 0x1, 0x1);
        gbc.writeMem(0x166a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x5b5d);
        EXPECT(gbc.pc(), 0x166c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 02FF
        gbc.setState(0xc9b2, 0xcc4c, 0xff90, 0x53e3, 0xd8aa, 0x1838, 0x1, 0x1);
        gbc.writeMem(0xc9b2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xcc4c);
        EXPECT(gbc.pc(), 0xc9b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9b2), 0xcb);
        EXPECT(gbc.readMem(0xc9b3), 0xe7);
        // CB E7 0301
        gbc.setState(0x4117, 0xcd6f, 0x9480, 0xe3f5, 0xa73f, 0x3ece, 0x1, 0x1);
        gbc.writeMem(0x4117, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xcd6f);
        EXPECT(gbc.pc(), 0x4119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0302
        gbc.setState(0xedd, 0x8f8f, 0x8280, 0xb5b3, 0x1079, 0xefc8, 0x1, 0x0);
        gbc.writeMem(0xedd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x8f8f);
        EXPECT(gbc.pc(), 0xedf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0303
        gbc.setState(0x73f7, 0xebab, 0x5600, 0x4834, 0x307, 0x8d0a, 0x1, 0x0);
        gbc.writeMem(0x73f7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xebab);
        EXPECT(gbc.pc(), 0x73f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0304
        gbc.setState(0x1aa, 0x74bc, 0xd210, 0xd9cb, 0x8ab2, 0xcc22, 0x1, 0x0);
        gbc.writeMem(0x1aa, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x74bc);
        EXPECT(gbc.pc(), 0x1ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0305
        gbc.setState(0xddcd, 0xb2d4, 0x17f0, 0xc784, 0x2dba, 0xf9a3, 0x1, 0x1);
        gbc.writeMem(0xddcd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb2d4);
        EXPECT(gbc.pc(), 0xddcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddcd), 0xcb);
        EXPECT(gbc.readMem(0xddce), 0xe7);
        // CB E7 0306
        gbc.setState(0x99e7, 0x2b2, 0xed10, 0xa541, 0x152b, 0x14cb, 0x1, 0x1);
        gbc.writeMem(0x99e7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2b2);
        EXPECT(gbc.pc(), 0x99e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99e7), 0xcb);
        EXPECT(gbc.readMem(0x99e8), 0xe7);
        // CB E7 0307
        gbc.setState(0x5f4a, 0xd327, 0x8470, 0x82c4, 0xd6cd, 0x1a39, 0x0, 0x1);
        gbc.writeMem(0x5f4a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xd327);
        EXPECT(gbc.pc(), 0x5f4c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0308
        gbc.setState(0x1c54, 0x6054, 0xd500, 0xfc29, 0xcab, 0xe22, 0x1, 0x0);
        gbc.writeMem(0x1c54, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6054);
        EXPECT(gbc.pc(), 0x1c56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0309
        gbc.setState(0x2277, 0x8398, 0x2f70, 0x3ccc, 0x3834, 0x54ec, 0x1, 0x0);
        gbc.writeMem(0x2277, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x8398);
        EXPECT(gbc.pc(), 0x2279);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 030A
        gbc.setState(0x29ce, 0x68c7, 0x14e0, 0x1ee3, 0x211b, 0x62f4, 0x0, 0x0);
        gbc.writeMem(0x29ce, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x68c7);
        EXPECT(gbc.pc(), 0x29d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 030B
        gbc.setState(0xbacc, 0x4621, 0x6f00, 0x9bc5, 0x6c25, 0xebcd, 0x0, 0x0);
        gbc.writeMem(0xbacc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4621);
        EXPECT(gbc.pc(), 0xbace);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbacc), 0xcb);
        EXPECT(gbc.readMem(0xbacd), 0xe7);
        // CB E7 030C
        gbc.setState(0xa45b, 0xc3c1, 0xa620, 0xa70, 0xdcc, 0x1360, 0x1, 0x0);
        gbc.writeMem(0xa45b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xc3c1);
        EXPECT(gbc.pc(), 0xa45d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa45b), 0xcb);
        EXPECT(gbc.readMem(0xa45c), 0xe7);
        // CB E7 030D
        gbc.setState(0x4ad3, 0x8be2, 0xbe30, 0x3be3, 0xf75, 0xdd0c, 0x1, 0x0);
        gbc.writeMem(0x4ad3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8be2);
        EXPECT(gbc.pc(), 0x4ad5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 030E
        gbc.setState(0xa6b3, 0xf08, 0x2da0, 0xf0e7, 0x2d87, 0xb917, 0x0, 0x1);
        gbc.writeMem(0xa6b3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xf08);
        EXPECT(gbc.pc(), 0xa6b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa6b3), 0xcb);
        EXPECT(gbc.readMem(0xa6b4), 0xe7);
        // CB E7 030F
        gbc.setState(0x1539, 0x88e7, 0x7220, 0xd27f, 0x4ae6, 0xbc82, 0x0, 0x1);
        gbc.writeMem(0x1539, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x88e7);
        EXPECT(gbc.pc(), 0x153b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0310
        gbc.setState(0x7376, 0xcdac, 0x15c0, 0xf30d, 0xa13, 0xde9e, 0x0, 0x1);
        gbc.writeMem(0x7376, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xcdac);
        EXPECT(gbc.pc(), 0x7378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0312
        gbc.setState(0x533, 0x80d3, 0x5a80, 0x5f4b, 0x4fb8, 0xb88e, 0x1, 0x0);
        gbc.writeMem(0x533, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x80d3);
        EXPECT(gbc.pc(), 0x535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0313
        gbc.setState(0xed6a, 0xdeeb, 0x9130, 0x3ed0, 0xff13, 0x600d, 0x1, 0x1);
        gbc.writeMem(0xed6a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xdeeb);
        EXPECT(gbc.pc(), 0xed6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed6a), 0xcb);
        EXPECT(gbc.readMem(0xed6b), 0xe7);
        // CB E7 0314
        gbc.setState(0xbcb, 0x3958, 0x6f00, 0x6982, 0x4757, 0x3132, 0x1, 0x0);
        gbc.writeMem(0xbcb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3958);
        EXPECT(gbc.pc(), 0xbcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0315
        gbc.setState(0xcd4e, 0x4e0f, 0xb580, 0x158, 0x41e9, 0x3f68, 0x0, 0x1);
        gbc.writeMem(0xcd4e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x4e0f);
        EXPECT(gbc.pc(), 0xcd50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd4e), 0xcb);
        EXPECT(gbc.readMem(0xcd4f), 0xe7);
        // CB E7 0317
        gbc.setState(0x6cd6, 0xe827, 0x6580, 0x3e32, 0xf086, 0x7bf2, 0x0, 0x1);
        gbc.writeMem(0x6cd6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe827);
        EXPECT(gbc.pc(), 0x6cd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0318
        gbc.setState(0xa60f, 0xe7a, 0xd1f0, 0x3936, 0x1c18, 0x4690, 0x1, 0x0);
        gbc.writeMem(0xa60f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xe7a);
        EXPECT(gbc.pc(), 0xa611);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa60f), 0xcb);
        EXPECT(gbc.readMem(0xa610), 0xe7);
        // CB E7 0319
        gbc.setState(0xd701, 0x8bfa, 0x68b0, 0x5ec, 0xc143, 0x9045, 0x1, 0x1);
        gbc.writeMem(0xd701, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8bfa);
        EXPECT(gbc.pc(), 0xd703);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd701), 0xcb);
        EXPECT(gbc.readMem(0xd702), 0xe7);
        // CB E7 031A
        gbc.setState(0x300c, 0xc192, 0x40c0, 0xe4cd, 0x2ab2, 0xa624, 0x1, 0x1);
        gbc.writeMem(0x300c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc192);
        EXPECT(gbc.pc(), 0x300e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 031B
        gbc.setState(0x1163, 0x625a, 0xe680, 0xcc75, 0xd4bf, 0x2800, 0x1, 0x0);
        gbc.writeMem(0x1163, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x625a);
        EXPECT(gbc.pc(), 0x1165);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 031C
        gbc.setState(0x39bb, 0xc26, 0x46e0, 0x3a70, 0xc9c8, 0xcac, 0x0, 0x0);
        gbc.writeMem(0x39bb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xc26);
        EXPECT(gbc.pc(), 0x39bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 031D
        gbc.setState(0x15c4, 0x5fa, 0x1c80, 0xcd50, 0x3e9b, 0x999e, 0x0, 0x1);
        gbc.writeMem(0x15c4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5fa);
        EXPECT(gbc.pc(), 0x15c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 031E
        gbc.setState(0xafbd, 0x21a7, 0x4b50, 0xb952, 0x57ac, 0x4370, 0x0, 0x1);
        gbc.writeMem(0xafbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x21a7);
        EXPECT(gbc.pc(), 0xafbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbd), 0xcb);
        EXPECT(gbc.readMem(0xafbe), 0xe7);
        // CB E7 031F
        gbc.setState(0x251d, 0xc0f4, 0x6ab0, 0x48db, 0xf6c2, 0x2d06, 0x0, 0x0);
        gbc.writeMem(0x251d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xc0f4);
        EXPECT(gbc.pc(), 0x251f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0320
        gbc.setState(0xebf, 0xbc2e, 0x7ff0, 0x36d9, 0xe724, 0x5145, 0x0, 0x1);
        gbc.writeMem(0xebf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xbc2e);
        EXPECT(gbc.pc(), 0xec1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0321
        gbc.setState(0x15b1, 0xc79, 0xae00, 0xd755, 0x7183, 0xdb0e, 0x1, 0x0);
        gbc.writeMem(0x15b1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xc79);
        EXPECT(gbc.pc(), 0x15b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0322
        gbc.setState(0x451c, 0x937d, 0x24c0, 0x35c2, 0xb8d8, 0x4fe, 0x1, 0x0);
        gbc.writeMem(0x451c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x937d);
        EXPECT(gbc.pc(), 0x451e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0323
        gbc.setState(0x9386, 0xfbdb, 0xc2a0, 0x3217, 0xc83e, 0x8762, 0x0, 0x1);
        gbc.writeMem(0x9386, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xfbdb);
        EXPECT(gbc.pc(), 0x9388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9386), 0xcb);
        EXPECT(gbc.readMem(0x9387), 0xe7);
        // CB E7 0324
        gbc.setState(0xb341, 0x3453, 0xe820, 0xbb4f, 0xd144, 0x709a, 0x1, 0x1);
        gbc.writeMem(0xb341, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x3453);
        EXPECT(gbc.pc(), 0xb343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb341), 0xcb);
        EXPECT(gbc.readMem(0xb342), 0xe7);
        // CB E7 0325
        gbc.setState(0x99cd, 0x793f, 0x5470, 0x5b6b, 0x7b81, 0x641a, 0x1, 0x0);
        gbc.writeMem(0x99cd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x793f);
        EXPECT(gbc.pc(), 0x99cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99cd), 0xcb);
        EXPECT(gbc.readMem(0x99ce), 0xe7);
        // CB E7 0326
        gbc.setState(0xda7b, 0x12a7, 0xe450, 0xbe9e, 0xf41c, 0xf689, 0x0, 0x0);
        gbc.writeMem(0xda7b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x12a7);
        EXPECT(gbc.pc(), 0xda7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda7b), 0xcb);
        EXPECT(gbc.readMem(0xda7c), 0xe7);
        // CB E7 0327
        gbc.setState(0x4c01, 0xccd, 0x16b0, 0x400b, 0x5443, 0xbd5a, 0x0, 0x1);
        gbc.writeMem(0x4c01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xccd);
        EXPECT(gbc.pc(), 0x4c03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0328
        gbc.setState(0xc6f4, 0x4271, 0xf280, 0x2844, 0xaec4, 0xb06a, 0x1, 0x0);
        gbc.writeMem(0xc6f4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x4271);
        EXPECT(gbc.pc(), 0xc6f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f4), 0xcb);
        EXPECT(gbc.readMem(0xc6f5), 0xe7);
        // CB E7 0329
        gbc.setState(0x827b, 0x2983, 0x4cd0, 0xde78, 0x2dca, 0xae9, 0x1, 0x0);
        gbc.writeMem(0x827b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x2983);
        EXPECT(gbc.pc(), 0x827d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x827b), 0xcb);
        EXPECT(gbc.readMem(0x827c), 0xe7);
        // CB E7 032A
        gbc.setState(0xd3ea, 0xe027, 0xebe0, 0x27a6, 0x9521, 0x961f, 0x0, 0x0);
        gbc.writeMem(0xd3ea, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe027);
        EXPECT(gbc.pc(), 0xd3ec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3ea), 0xcb);
        EXPECT(gbc.readMem(0xd3eb), 0xe7);
        // CB E7 032B
        gbc.setState(0xa7f6, 0x5292, 0xbcf0, 0x8e3b, 0x3e9e, 0x93a1, 0x1, 0x0);
        gbc.writeMem(0xa7f6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x5292);
        EXPECT(gbc.pc(), 0xa7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f6), 0xcb);
        EXPECT(gbc.readMem(0xa7f7), 0xe7);
        // CB E7 032C
        gbc.setState(0x70a3, 0xbbac, 0xb3d0, 0xa7b5, 0xd761, 0xba, 0x1, 0x1);
        gbc.writeMem(0x70a3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xbbac);
        EXPECT(gbc.pc(), 0x70a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 032D
        gbc.setState(0x9eec, 0xbe71, 0xc6c0, 0xf095, 0x9593, 0x75f, 0x0, 0x1);
        gbc.writeMem(0x9eec, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xbe71);
        EXPECT(gbc.pc(), 0x9eee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9eec), 0xcb);
        EXPECT(gbc.readMem(0x9eed), 0xe7);
        // CB E7 032E
        gbc.setState(0x885d, 0x87b3, 0xd290, 0xf7b3, 0x1725, 0x2c55, 0x1, 0x1);
        gbc.writeMem(0x885d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x87b3);
        EXPECT(gbc.pc(), 0x885f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x885d), 0xcb);
        EXPECT(gbc.readMem(0x885e), 0xe7);
        // CB E7 032F
        gbc.setState(0x5bd2, 0xfd20, 0x6050, 0x59c3, 0xd4d2, 0x2ae4, 0x0, 0x1);
        gbc.writeMem(0x5bd2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xfd20);
        EXPECT(gbc.pc(), 0x5bd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0331
        gbc.setState(0x1142, 0x8e40, 0x92f0, 0x6b12, 0xc512, 0x2558, 0x1, 0x1);
        gbc.writeMem(0x1142, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x8e40);
        EXPECT(gbc.pc(), 0x1144);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0332
        gbc.setState(0x8d74, 0x1ed8, 0xefb0, 0xa7fd, 0xf8a6, 0x9e66, 0x1, 0x1);
        gbc.writeMem(0x8d74, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x1ed8);
        EXPECT(gbc.pc(), 0x8d76);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d74), 0xcb);
        EXPECT(gbc.readMem(0x8d75), 0xe7);
        // CB E7 0333
        gbc.setState(0xc582, 0x2431, 0xed10, 0xe2c6, 0x9bb3, 0x8541, 0x0, 0x0);
        gbc.writeMem(0xc582, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2431);
        EXPECT(gbc.pc(), 0xc584);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc582), 0xcb);
        EXPECT(gbc.readMem(0xc583), 0xe7);
        // CB E7 0334
        gbc.setState(0x5040, 0x9e70, 0x6ca0, 0xe357, 0x6c08, 0x6cc3, 0x0, 0x0);
        gbc.writeMem(0x5040, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9e70);
        EXPECT(gbc.pc(), 0x5042);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0335
        gbc.setState(0xa313, 0x3997, 0xc340, 0xeca6, 0x109c, 0xdba8, 0x1, 0x1);
        gbc.writeMem(0xa313, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3997);
        EXPECT(gbc.pc(), 0xa315);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa313), 0xcb);
        EXPECT(gbc.readMem(0xa314), 0xe7);
        // CB E7 0336
        gbc.setState(0xc3, 0x7e2a, 0xf200, 0xe829, 0xdfb9, 0xfa0b, 0x0, 0x0);
        gbc.writeMem(0xc3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7e2a);
        EXPECT(gbc.pc(), 0xc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0337
        gbc.setState(0x1f2f, 0x95bf, 0xf4f0, 0x7592, 0xeeda, 0x299d, 0x0, 0x0);
        gbc.writeMem(0x1f2f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x95bf);
        EXPECT(gbc.pc(), 0x1f31);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0338
        gbc.setState(0x1810, 0x5dd6, 0xfc0, 0xb63b, 0x30d, 0x51e, 0x0, 0x1);
        gbc.writeMem(0x1810, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x5dd6);
        EXPECT(gbc.pc(), 0x1812);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0339
        gbc.setState(0x18c3, 0xf849, 0x37d0, 0x87a, 0x2e2e, 0x95eb, 0x1, 0x1);
        gbc.writeMem(0x18c3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xf849);
        EXPECT(gbc.pc(), 0x18c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 033A
        gbc.setState(0xe5da, 0x2453, 0x1830, 0x6cd3, 0x1b59, 0xc4d8, 0x0, 0x1);
        gbc.writeMem(0xe5da, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2453);
        EXPECT(gbc.pc(), 0xe5dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5da), 0xcb);
        EXPECT(gbc.readMem(0xe5db), 0xe7);
        // CB E7 033B
        gbc.setState(0xdf26, 0x5401, 0xd370, 0xf005, 0x9365, 0x9070, 0x0, 0x1);
        gbc.writeMem(0xdf26, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5401);
        EXPECT(gbc.pc(), 0xdf28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf26), 0xcb);
        EXPECT(gbc.readMem(0xdf27), 0xe7);
        // CB E7 033C
        gbc.setState(0x4ade, 0x9033, 0x3820, 0xc0e0, 0x2ce8, 0x2815, 0x0, 0x0);
        gbc.writeMem(0x4ade, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9033);
        EXPECT(gbc.pc(), 0x4ae0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 033D
        gbc.setState(0xbb1d, 0xad3c, 0xae80, 0x89c2, 0x5c7c, 0x5a06, 0x0, 0x0);
        gbc.writeMem(0xbb1d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xad3c);
        EXPECT(gbc.pc(), 0xbb1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1d), 0xcb);
        EXPECT(gbc.readMem(0xbb1e), 0xe7);
        // CB E7 033E
        gbc.setState(0x47db, 0x3f0f, 0x7980, 0x1c36, 0x7250, 0xbeaa, 0x1, 0x1);
        gbc.writeMem(0x47db, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3f0f);
        EXPECT(gbc.pc(), 0x47dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 033F
        gbc.setState(0x7942, 0x822d, 0x56e0, 0xc681, 0x8854, 0x1ee1, 0x1, 0x1);
        gbc.writeMem(0x7942, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x822d);
        EXPECT(gbc.pc(), 0x7944);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0340
        gbc.setState(0x517, 0x468a, 0x1220, 0xf7ff, 0xb0d8, 0x3d8, 0x0, 0x0);
        gbc.writeMem(0x517, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x468a);
        EXPECT(gbc.pc(), 0x519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0341
        gbc.setState(0x9b8a, 0xb22e, 0xa330, 0x8af9, 0xe873, 0x223a, 0x1, 0x1);
        gbc.writeMem(0x9b8a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xb22e);
        EXPECT(gbc.pc(), 0x9b8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9b8a), 0xcb);
        EXPECT(gbc.readMem(0x9b8b), 0xe7);
        // CB E7 0342
        gbc.setState(0x9c4f, 0x416, 0x1e40, 0xf523, 0x8cb0, 0xe621, 0x0, 0x1);
        gbc.writeMem(0x9c4f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x416);
        EXPECT(gbc.pc(), 0x9c51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c4f), 0xcb);
        EXPECT(gbc.readMem(0x9c50), 0xe7);
        // CB E7 0343
        gbc.setState(0x1888, 0x6d36, 0x2cb0, 0x2557, 0x4147, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x1888, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6d36);
        EXPECT(gbc.pc(), 0x188a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0344
        gbc.setState(0xa28b, 0x56d4, 0x95e0, 0x75b0, 0x7efd, 0xbe19, 0x1, 0x0);
        gbc.writeMem(0xa28b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x56d4);
        EXPECT(gbc.pc(), 0xa28d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa28b), 0xcb);
        EXPECT(gbc.readMem(0xa28c), 0xe7);
        // CB E7 0345
        gbc.setState(0xcb08, 0x3506, 0xd6d0, 0xbfac, 0x7ffb, 0xd6c0, 0x1, 0x1);
        gbc.writeMem(0xcb08, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x3506);
        EXPECT(gbc.pc(), 0xcb0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb08), 0xcb);
        EXPECT(gbc.readMem(0xcb09), 0xe7);
        // CB E7 0346
        gbc.setState(0x347e, 0x320e, 0xce0, 0x9d66, 0xb5c7, 0x3dce, 0x0, 0x0);
        gbc.writeMem(0x347e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x320e);
        EXPECT(gbc.pc(), 0x3480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0347
        gbc.setState(0xdcf8, 0xc579, 0x7aa0, 0xdfbc, 0x56b7, 0xf201, 0x1, 0x0);
        gbc.writeMem(0xdcf8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xc579);
        EXPECT(gbc.pc(), 0xdcfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf8), 0xcb);
        EXPECT(gbc.readMem(0xdcf9), 0xe7);
        // CB E7 0348
        gbc.setState(0x518c, 0x6c07, 0xb1b0, 0xdf90, 0xab34, 0xe960, 0x0, 0x1);
        gbc.writeMem(0x518c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6c07);
        EXPECT(gbc.pc(), 0x518e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0349
        gbc.setState(0x3849, 0xaeae, 0xaee0, 0xe6b7, 0x3fa9, 0x72f9, 0x1, 0x0);
        gbc.writeMem(0x3849, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xaeae);
        EXPECT(gbc.pc(), 0x384b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 034A
        gbc.setState(0xd2e8, 0x46a1, 0xf630, 0xcf72, 0x9afc, 0x1bab, 0x1, 0x0);
        gbc.writeMem(0xd2e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x46a1);
        EXPECT(gbc.pc(), 0xd2ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd2e8), 0xcb);
        EXPECT(gbc.readMem(0xd2e9), 0xe7);
        // CB E7 034B
        gbc.setState(0x3f98, 0xfc45, 0x7cb0, 0xbc71, 0x2997, 0xe7d7, 0x1, 0x1);
        gbc.writeMem(0x3f98, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xfc45);
        EXPECT(gbc.pc(), 0x3f9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 034C
        gbc.setState(0x3224, 0x4e5f, 0xff90, 0x57b3, 0x26d6, 0xf618, 0x1, 0x1);
        gbc.writeMem(0x3224, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x4e5f);
        EXPECT(gbc.pc(), 0x3226);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 034D
        gbc.setState(0x9ca6, 0x5096, 0x8e60, 0x9de1, 0xc3f8, 0x7448, 0x1, 0x1);
        gbc.writeMem(0x9ca6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x5096);
        EXPECT(gbc.pc(), 0x9ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca6), 0xcb);
        EXPECT(gbc.readMem(0x9ca7), 0xe7);
        // CB E7 034E
        gbc.setState(0xe289, 0x5aca, 0xf200, 0xda7e, 0x5d2, 0xe0e2, 0x0, 0x1);
        gbc.writeMem(0xe289, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x5aca);
        EXPECT(gbc.pc(), 0xe28b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe289), 0xcb);
        EXPECT(gbc.readMem(0xe28a), 0xe7);
        // CB E7 034F
        gbc.setState(0x115, 0x8046, 0xbb90, 0x213c, 0xaa8c, 0xf7e9, 0x1, 0x0);
        gbc.writeMem(0x115, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8046);
        EXPECT(gbc.pc(), 0x117);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0350
        gbc.setState(0x2cbd, 0xc06d, 0x8610, 0x10a6, 0x1c2f, 0x9499, 0x0, 0x1);
        gbc.writeMem(0x2cbd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc06d);
        EXPECT(gbc.pc(), 0x2cbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0351
        gbc.setState(0x571b, 0x9801, 0x3850, 0xd5be, 0x7b3f, 0xce1b, 0x1, 0x0);
        gbc.writeMem(0x571b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x9801);
        EXPECT(gbc.pc(), 0x571d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0352
        gbc.setState(0x51d4, 0xaaf1, 0x1850, 0x967f, 0x3169, 0x52a2, 0x1, 0x1);
        gbc.writeMem(0x51d4, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xaaf1);
        EXPECT(gbc.pc(), 0x51d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0353
        gbc.setState(0x56bf, 0x965b, 0x10, 0xa109, 0x2868, 0x17bb, 0x1, 0x0);
        gbc.writeMem(0x56bf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x965b);
        EXPECT(gbc.pc(), 0x56c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0354
        gbc.setState(0xb22f, 0x69e, 0xf080, 0xed8e, 0x7d79, 0xcc3b, 0x1, 0x1);
        gbc.writeMem(0xb22f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x69e);
        EXPECT(gbc.pc(), 0xb231);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb22f), 0xcb);
        EXPECT(gbc.readMem(0xb230), 0xe7);
        // CB E7 0355
        gbc.setState(0xc828, 0x4063, 0x5310, 0xec99, 0x24af, 0xf4da, 0x1, 0x1);
        gbc.writeMem(0xc828, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x4063);
        EXPECT(gbc.pc(), 0xc82a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc828), 0xcb);
        EXPECT(gbc.readMem(0xc829), 0xe7);
        // CB E7 0356
        gbc.setState(0x41e7, 0x3c68, 0x8c60, 0x1d0a, 0x6ab, 0x84ad, 0x1, 0x1);
        gbc.writeMem(0x41e7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x3c68);
        EXPECT(gbc.pc(), 0x41e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0357
        gbc.setState(0xa70, 0xbd3a, 0x2ec0, 0xdb40, 0x795c, 0xfb4, 0x0, 0x1);
        gbc.writeMem(0xa70, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xbd3a);
        EXPECT(gbc.pc(), 0xa72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0358
        gbc.setState(0x1e79, 0x8100, 0xec70, 0x41da, 0xfa3e, 0x10ba, 0x0, 0x1);
        gbc.writeMem(0x1e79, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x8100);
        EXPECT(gbc.pc(), 0x1e7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0359
        gbc.setState(0x3ce8, 0xcebe, 0x4200, 0xe134, 0xf386, 0x285e, 0x0, 0x1);
        gbc.writeMem(0x3ce8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xcebe);
        EXPECT(gbc.pc(), 0x3cea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 035B
        gbc.setState(0x1b5f, 0xa4aa, 0xef10, 0xa677, 0x50e2, 0x532d, 0x1, 0x1);
        gbc.writeMem(0x1b5f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xa4aa);
        EXPECT(gbc.pc(), 0x1b61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 035C
        gbc.setState(0x4d0b, 0xabf0, 0x71a0, 0x714a, 0xf72b, 0x5e6f, 0x1, 0x0);
        gbc.writeMem(0x4d0b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xabf0);
        EXPECT(gbc.pc(), 0x4d0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 035D
        gbc.setState(0x32b6, 0xe5d0, 0x9a40, 0x9e02, 0x87eb, 0x1cef, 0x0, 0x1);
        gbc.writeMem(0x32b6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe5d0);
        EXPECT(gbc.pc(), 0x32b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 035E
        gbc.setState(0x5e01, 0xca8b, 0xc5f0, 0x9e57, 0xc5be, 0x56d2, 0x1, 0x0);
        gbc.writeMem(0x5e01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xca8b);
        EXPECT(gbc.pc(), 0x5e03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 035F
        gbc.setState(0x28f8, 0x3ed6, 0xadb0, 0x25e7, 0x4e50, 0x9544, 0x0, 0x1);
        gbc.writeMem(0x28f8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x3ed6);
        EXPECT(gbc.pc(), 0x28fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0360
        gbc.setState(0x4977, 0x548b, 0xbb20, 0x2264, 0x8f8, 0x2708, 0x1, 0x1);
        gbc.writeMem(0x4977, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x548b);
        EXPECT(gbc.pc(), 0x4979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0361
        gbc.setState(0xe9bb, 0x6e2f, 0x29c0, 0x7dee, 0xd680, 0xb3c8, 0x0, 0x0);
        gbc.writeMem(0xe9bb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x6e2f);
        EXPECT(gbc.pc(), 0xe9bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9bb), 0xcb);
        EXPECT(gbc.readMem(0xe9bc), 0xe7);
        // CB E7 0362
        gbc.setState(0x94fb, 0x9778, 0x98d0, 0xeb35, 0xf84a, 0xc088, 0x1, 0x1);
        gbc.writeMem(0x94fb, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x9778);
        EXPECT(gbc.pc(), 0x94fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94fb), 0xcb);
        EXPECT(gbc.readMem(0x94fc), 0xe7);
        // CB E7 0363
        gbc.setState(0xcaf0, 0x23f6, 0x47f0, 0x477e, 0xc372, 0x8d80, 0x1, 0x1);
        gbc.writeMem(0xcaf0, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x23f6);
        EXPECT(gbc.pc(), 0xcaf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaf0), 0xcb);
        EXPECT(gbc.readMem(0xcaf1), 0xe7);
        // CB E7 0364
        gbc.setState(0x9dbc, 0x377d, 0xd6b0, 0x3b20, 0xe4c8, 0x1026, 0x1, 0x0);
        gbc.writeMem(0x9dbc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x377d);
        EXPECT(gbc.pc(), 0x9dbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dbc), 0xcb);
        EXPECT(gbc.readMem(0x9dbd), 0xe7);
        // CB E7 0365
        gbc.setState(0xd20e, 0xce59, 0x41d0, 0x50fc, 0x20ae, 0x1918, 0x1, 0x0);
        gbc.writeMem(0xd20e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xce59);
        EXPECT(gbc.pc(), 0xd210);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd20e), 0xcb);
        EXPECT(gbc.readMem(0xd20f), 0xe7);
        // CB E7 0366
        gbc.setState(0xe58c, 0x62a, 0xf7f0, 0x69df, 0x6b79, 0x7aec, 0x1, 0x1);
        gbc.writeMem(0xe58c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x62a);
        EXPECT(gbc.pc(), 0xe58e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe58c), 0xcb);
        EXPECT(gbc.readMem(0xe58d), 0xe7);
        // CB E7 0367
        gbc.setState(0xbc29, 0x4cd3, 0x26c0, 0x4a09, 0x6c77, 0x7713, 0x0, 0x1);
        gbc.writeMem(0xbc29, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4cd3);
        EXPECT(gbc.pc(), 0xbc2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc29), 0xcb);
        EXPECT(gbc.readMem(0xbc2a), 0xe7);
        // CB E7 0368
        gbc.setState(0x5f2b, 0xe22c, 0xc30, 0x773f, 0xdca3, 0xc547, 0x0, 0x0);
        gbc.writeMem(0x5f2b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xe22c);
        EXPECT(gbc.pc(), 0x5f2d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0369
        gbc.setState(0xb291, 0x3213, 0x90f0, 0xbd31, 0xda06, 0x9499, 0x1, 0x0);
        gbc.writeMem(0xb291, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x3213);
        EXPECT(gbc.pc(), 0xb293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb291), 0xcb);
        EXPECT(gbc.readMem(0xb292), 0xe7);
        // CB E7 036A
        gbc.setState(0x93a7, 0x6fe4, 0xcdb0, 0x62bd, 0x60d7, 0xfa50, 0x0, 0x1);
        gbc.writeMem(0x93a7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x6fe4);
        EXPECT(gbc.pc(), 0x93a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93a7), 0xcb);
        EXPECT(gbc.readMem(0x93a8), 0xe7);
        // CB E7 036B
        gbc.setState(0xb7e8, 0x2e89, 0xb660, 0xfcdf, 0x7c61, 0xb5b, 0x1, 0x1);
        gbc.writeMem(0xb7e8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x2e89);
        EXPECT(gbc.pc(), 0xb7ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7e8), 0xcb);
        EXPECT(gbc.readMem(0xb7e9), 0xe7);
        // CB E7 036C
        gbc.setState(0xc2bf, 0x73d5, 0x29c0, 0x3daa, 0x8bd0, 0xa602, 0x1, 0x1);
        gbc.writeMem(0xc2bf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x73d5);
        EXPECT(gbc.pc(), 0xc2c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2bf), 0xcb);
        EXPECT(gbc.readMem(0xc2c0), 0xe7);
        // CB E7 036D
        gbc.setState(0xbfc3, 0x9d0f, 0x2c30, 0x286e, 0x4cbe, 0x6e14, 0x0, 0x0);
        gbc.writeMem(0xbfc3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x9d0f);
        EXPECT(gbc.pc(), 0xbfc5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfc3), 0xcb);
        EXPECT(gbc.readMem(0xbfc4), 0xe7);
        // CB E7 036E
        gbc.setState(0x2fe1, 0x329c, 0x5ab0, 0x143c, 0xfddd, 0x75b2, 0x0, 0x1);
        gbc.writeMem(0x2fe1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x329c);
        EXPECT(gbc.pc(), 0x2fe3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 036F
        gbc.setState(0x1a41, 0xa401, 0xb750, 0xab7b, 0x82ba, 0xc37e, 0x0, 0x1);
        gbc.writeMem(0x1a41, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xa401);
        EXPECT(gbc.pc(), 0x1a43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0370
        gbc.setState(0xa116, 0xbce1, 0xb560, 0xfa07, 0x680c, 0x7189, 0x0, 0x1);
        gbc.writeMem(0xa116, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xbce1);
        EXPECT(gbc.pc(), 0xa118);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa116), 0xcb);
        EXPECT(gbc.readMem(0xa117), 0xe7);
        // CB E7 0371
        gbc.setState(0x7335, 0x50bc, 0x1e0, 0x8cdb, 0x3c9e, 0x57c4, 0x1, 0x1);
        gbc.writeMem(0x7335, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x50bc);
        EXPECT(gbc.pc(), 0x7337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0372
        gbc.setState(0x7218, 0x80a0, 0xb040, 0xc5cf, 0x3774, 0x93bf, 0x1, 0x0);
        gbc.writeMem(0x7218, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x80a0);
        EXPECT(gbc.pc(), 0x721a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0373
        gbc.setState(0x7d52, 0xec97, 0x3450, 0x79c4, 0xa687, 0xc38f, 0x1, 0x0);
        gbc.writeMem(0x7d52, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xec97);
        EXPECT(gbc.pc(), 0x7d54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0374
        gbc.setState(0x23bc, 0xa92b, 0x9970, 0xda17, 0xa56f, 0xafa3, 0x0, 0x0);
        gbc.writeMem(0x23bc, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xa92b);
        EXPECT(gbc.pc(), 0x23be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0375
        gbc.setState(0xcf3, 0x89ce, 0x5070, 0x2eca, 0xef5, 0xe3e7, 0x0, 0x1);
        gbc.writeMem(0xcf3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x89ce);
        EXPECT(gbc.pc(), 0xcf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0376
        gbc.setState(0x4015, 0x2e3b, 0xae30, 0xe2f2, 0x22f8, 0xbac0, 0x0, 0x0);
        gbc.writeMem(0x4015, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2e3b);
        EXPECT(gbc.pc(), 0x4017);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0377
        gbc.setState(0xc495, 0x9f28, 0xcc90, 0x55e8, 0x61dd, 0xbfc2, 0x0, 0x1);
        gbc.writeMem(0xc495, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x9f28);
        EXPECT(gbc.pc(), 0xc497);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc495), 0xcb);
        EXPECT(gbc.readMem(0xc496), 0xe7);
        // CB E7 0378
        gbc.setState(0xe8c5, 0xd2e3, 0xa380, 0x9ee1, 0x3a07, 0x2e5b, 0x1, 0x1);
        gbc.writeMem(0xe8c5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd2e3);
        EXPECT(gbc.pc(), 0xe8c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8c5), 0xcb);
        EXPECT(gbc.readMem(0xe8c6), 0xe7);
        // CB E7 037A
        gbc.setState(0xd3f2, 0x9e2e, 0xede0, 0x900b, 0x446c, 0xdc05, 0x1, 0x1);
        gbc.writeMem(0xd3f2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x9e2e);
        EXPECT(gbc.pc(), 0xd3f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f2), 0xcb);
        EXPECT(gbc.readMem(0xd3f3), 0xe7);
        // CB E7 037B
        gbc.setState(0x7169, 0x8a0, 0xb880, 0xc5a1, 0x26bd, 0xe545, 0x1, 0x0);
        gbc.writeMem(0x7169, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8a0);
        EXPECT(gbc.pc(), 0x716b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 037C
        gbc.setState(0x2ce9, 0x1527, 0x4860, 0xfcc4, 0x6c22, 0x1a25, 0x0, 0x1);
        gbc.writeMem(0x2ce9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x1527);
        EXPECT(gbc.pc(), 0x2ceb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 037D
        gbc.setState(0x887d, 0x39ce, 0xacb0, 0x894f, 0x741c, 0xd79e, 0x1, 0x0);
        gbc.writeMem(0x887d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x39ce);
        EXPECT(gbc.pc(), 0x887f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x887d), 0xcb);
        EXPECT(gbc.readMem(0x887e), 0xe7);
        // CB E7 037E
        gbc.setState(0xc8af, 0xc448, 0xd0c0, 0xd8d1, 0xb228, 0xd3fe, 0x1, 0x1);
        gbc.writeMem(0xc8af, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xc448);
        EXPECT(gbc.pc(), 0xc8b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8af), 0xcb);
        EXPECT(gbc.readMem(0xc8b0), 0xe7);
        // CB E7 037F
        gbc.setState(0x7e6d, 0xf063, 0x140, 0xfddf, 0xe9bb, 0x90d, 0x1, 0x1);
        gbc.writeMem(0x7e6d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf063);
        EXPECT(gbc.pc(), 0x7e6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0380
        gbc.setState(0x3917, 0x6da7, 0xbf10, 0x3f73, 0x6dd8, 0x5a74, 0x0, 0x0);
        gbc.writeMem(0x3917, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6da7);
        EXPECT(gbc.pc(), 0x3919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0381
        gbc.setState(0xbfad, 0x2cd6, 0x8cc0, 0xed83, 0x91c7, 0xbc72, 0x0, 0x0);
        gbc.writeMem(0xbfad, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2cd6);
        EXPECT(gbc.pc(), 0xbfaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfad), 0xcb);
        EXPECT(gbc.readMem(0xbfae), 0xe7);
        // CB E7 0382
        gbc.setState(0xd38d, 0xeca0, 0x99f0, 0x7b4a, 0x8b43, 0x60f6, 0x0, 0x1);
        gbc.writeMem(0xd38d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xeca0);
        EXPECT(gbc.pc(), 0xd38f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd38d), 0xcb);
        EXPECT(gbc.readMem(0xd38e), 0xe7);
        // CB E7 0383
        gbc.setState(0xd9ee, 0x6760, 0xaab0, 0xa808, 0xab3a, 0x6e5d, 0x1, 0x1);
        gbc.writeMem(0xd9ee, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6760);
        EXPECT(gbc.pc(), 0xd9f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9ee), 0xcb);
        EXPECT(gbc.readMem(0xd9ef), 0xe7);
        // CB E7 0384
        gbc.setState(0x4026, 0x1f35, 0x90b0, 0x5eb2, 0xa3a9, 0x74e8, 0x1, 0x0);
        gbc.writeMem(0x4026, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x1f35);
        EXPECT(gbc.pc(), 0x4028);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0385
        gbc.setState(0x7f6a, 0x4ba0, 0x3fc0, 0xa892, 0xeefb, 0x30ac, 0x1, 0x1);
        gbc.writeMem(0x7f6a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x4ba0);
        EXPECT(gbc.pc(), 0x7f6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0386
        gbc.setState(0x5ba2, 0xabc6, 0x4d0, 0xd77a, 0x8188, 0x265c, 0x1, 0x1);
        gbc.writeMem(0x5ba2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xabc6);
        EXPECT(gbc.pc(), 0x5ba4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0387
        gbc.setState(0x94a7, 0x9cb6, 0x7e50, 0x6a27, 0x6666, 0xbe4d, 0x0, 0x1);
        gbc.writeMem(0x94a7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9cb6);
        EXPECT(gbc.pc(), 0x94a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94a7), 0xcb);
        EXPECT(gbc.readMem(0x94a8), 0xe7);
        // CB E7 0388
        gbc.setState(0x96a1, 0x8edb, 0x6a60, 0x3e35, 0xe8d8, 0xce25, 0x1, 0x0);
        gbc.writeMem(0x96a1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8edb);
        EXPECT(gbc.pc(), 0x96a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x96a1), 0xcb);
        EXPECT(gbc.readMem(0x96a2), 0xe7);
        // CB E7 0389
        gbc.setState(0x6e5e, 0x18d2, 0x3380, 0x6ce0, 0xae, 0xa48f, 0x1, 0x0);
        gbc.writeMem(0x6e5e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x18d2);
        EXPECT(gbc.pc(), 0x6e60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 038A
        gbc.setState(0xdddf, 0x28f3, 0xc770, 0x3bd1, 0x8f2, 0x754d, 0x1, 0x1);
        gbc.writeMem(0xdddf, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x28f3);
        EXPECT(gbc.pc(), 0xdde1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdddf), 0xcb);
        EXPECT(gbc.readMem(0xdde0), 0xe7);
        // CB E7 038B
        gbc.setState(0x3f28, 0x928c, 0xb290, 0xa22e, 0x3ca3, 0x4f48, 0x0, 0x0);
        gbc.writeMem(0x3f28, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x928c);
        EXPECT(gbc.pc(), 0x3f2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 038C
        gbc.setState(0x7ca6, 0xa72f, 0x5430, 0x6c99, 0xf45d, 0x303f, 0x0, 0x1);
        gbc.writeMem(0x7ca6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa72f);
        EXPECT(gbc.pc(), 0x7ca8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 038D
        gbc.setState(0xd731, 0xfd2e, 0x1d10, 0x33a8, 0x68eb, 0xa5df, 0x0, 0x0);
        gbc.writeMem(0xd731, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfd2e);
        EXPECT(gbc.pc(), 0xd733);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd731), 0xcb);
        EXPECT(gbc.readMem(0xd732), 0xe7);
        // CB E7 038E
        gbc.setState(0x98ec, 0x6bbe, 0xbb90, 0x94ac, 0xdc9, 0x5f5c, 0x1, 0x1);
        gbc.writeMem(0x98ec, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x6bbe);
        EXPECT(gbc.pc(), 0x98ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98ec), 0xcb);
        EXPECT(gbc.readMem(0x98ed), 0xe7);
        // CB E7 038F
        gbc.setState(0xc283, 0x9c7f, 0x6340, 0xc288, 0xd953, 0x8e96, 0x0, 0x0);
        gbc.writeMem(0xc283, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9c7f);
        EXPECT(gbc.pc(), 0xc285);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc283), 0xcb);
        EXPECT(gbc.readMem(0xc284), 0xe7);
        // CB E7 0390
        gbc.setState(0x8fa9, 0x7747, 0x780, 0x2288, 0xe2cd, 0x2901, 0x0, 0x1);
        gbc.writeMem(0x8fa9, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7747);
        EXPECT(gbc.pc(), 0x8fab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fa9), 0xcb);
        EXPECT(gbc.readMem(0x8faa), 0xe7);
        // CB E7 0391
        gbc.setState(0x2b8f, 0x1a71, 0xd320, 0x1428, 0x3029, 0xf3fa, 0x0, 0x0);
        gbc.writeMem(0x2b8f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x1a71);
        EXPECT(gbc.pc(), 0x2b91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0392
        gbc.setState(0x8d19, 0x5497, 0x7e30, 0xc2da, 0x2184, 0x4145, 0x1, 0x0);
        gbc.writeMem(0x8d19, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x5497);
        EXPECT(gbc.pc(), 0x8d1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d19), 0xcb);
        EXPECT(gbc.readMem(0x8d1a), 0xe7);
        // CB E7 0393
        gbc.setState(0xd513, 0xc978, 0xc910, 0xec7b, 0x1ba1, 0x7daa, 0x0, 0x1);
        gbc.writeMem(0xd513, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xc978);
        EXPECT(gbc.pc(), 0xd515);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd513), 0xcb);
        EXPECT(gbc.readMem(0xd514), 0xe7);
        // CB E7 0394
        gbc.setState(0xb48, 0x6c50, 0xef80, 0x9480, 0xf150, 0xb763, 0x0, 0x1);
        gbc.writeMem(0xb48, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6c50);
        EXPECT(gbc.pc(), 0xb4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0396
        gbc.setState(0x34d2, 0x9878, 0xedd0, 0x2cf9, 0x5ef0, 0xb9dd, 0x1, 0x0);
        gbc.writeMem(0x34d2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x9878);
        EXPECT(gbc.pc(), 0x34d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 0397
        gbc.setState(0x509c, 0x8141, 0xeca0, 0xb27f, 0x44f2, 0xd037, 0x0, 0x0);
        gbc.writeMem(0x509c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8141);
        EXPECT(gbc.pc(), 0x509e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 0398
        gbc.setState(0xce8f, 0xcd31, 0x4040, 0x6f33, 0xd3e4, 0x458f, 0x0, 0x0);
        gbc.writeMem(0xce8f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xcd31);
        EXPECT(gbc.pc(), 0xce91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce8f), 0xcb);
        EXPECT(gbc.readMem(0xce90), 0xe7);
        // CB E7 0399
        gbc.setState(0x7dc1, 0x7d8a, 0x4d60, 0xc496, 0x2695, 0x37ae, 0x0, 0x0);
        gbc.writeMem(0x7dc1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7d8a);
        EXPECT(gbc.pc(), 0x7dc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 039A
        gbc.setState(0xa858, 0x75c6, 0x4230, 0xe11, 0xb36b, 0x2e61, 0x0, 0x0);
        gbc.writeMem(0xa858, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x75c6);
        EXPECT(gbc.pc(), 0xa85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa858), 0xcb);
        EXPECT(gbc.readMem(0xa859), 0xe7);
        // CB E7 039B
        gbc.setState(0xc8e3, 0xe11b, 0x3260, 0xb7b8, 0xe97b, 0x56e0, 0x1, 0x1);
        gbc.writeMem(0xc8e3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe11b);
        EXPECT(gbc.pc(), 0xc8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8e3), 0xcb);
        EXPECT(gbc.readMem(0xc8e4), 0xe7);
        // CB E7 039C
        gbc.setState(0x705e, 0xba00, 0xfe90, 0xf62d, 0x2546, 0x190a, 0x0, 0x0);
        gbc.writeMem(0x705e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xba00);
        EXPECT(gbc.pc(), 0x7060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 039D
        gbc.setState(0xc3a5, 0x4bc8, 0x7ea0, 0xdc07, 0x86d6, 0x33b2, 0x0, 0x0);
        gbc.writeMem(0xc3a5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x4bc8);
        EXPECT(gbc.pc(), 0xc3a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3a5), 0xcb);
        EXPECT(gbc.readMem(0xc3a6), 0xe7);
        // CB E7 039E
        gbc.setState(0x2bb8, 0xc65e, 0x4c70, 0xf76e, 0xf1c3, 0x9cba, 0x0, 0x1);
        gbc.writeMem(0x2bb8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xc65e);
        EXPECT(gbc.pc(), 0x2bba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 039F
        gbc.setState(0x3687, 0x67f0, 0x760, 0x3dfc, 0xb3f7, 0x3a16, 0x0, 0x1);
        gbc.writeMem(0x3687, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x67f0);
        EXPECT(gbc.pc(), 0x3689);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03A0
        gbc.setState(0x73b5, 0x4976, 0xfee0, 0x6fe3, 0x3c08, 0x3d19, 0x0, 0x0);
        gbc.writeMem(0x73b5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4976);
        EXPECT(gbc.pc(), 0x73b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03A1
        gbc.setState(0x256b, 0xa801, 0xbd0, 0xbbc1, 0x750e, 0xf96a, 0x0, 0x0);
        gbc.writeMem(0x256b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa801);
        EXPECT(gbc.pc(), 0x256d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03A2
        gbc.setState(0xb53, 0x1f46, 0x190, 0x3743, 0xcc31, 0x59c7, 0x1, 0x1);
        gbc.writeMem(0xb53, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1f46);
        EXPECT(gbc.pc(), 0xb55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03A4
        gbc.setState(0xab0c, 0xa364, 0x9010, 0xc63a, 0xdbb5, 0x1ec4, 0x1, 0x0);
        gbc.writeMem(0xab0c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa364);
        EXPECT(gbc.pc(), 0xab0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab0c), 0xcb);
        EXPECT(gbc.readMem(0xab0d), 0xe7);
        // CB E7 03A5
        gbc.setState(0xd94d, 0xd8bc, 0xb9e0, 0xebf8, 0x11ba, 0x88db, 0x0, 0x1);
        gbc.writeMem(0xd94d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xd8bc);
        EXPECT(gbc.pc(), 0xd94f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd94d), 0xcb);
        EXPECT(gbc.readMem(0xd94e), 0xe7);
        // CB E7 03A6
        gbc.setState(0xe7bd, 0xf08c, 0x99d0, 0xb56c, 0x7952, 0x21fc, 0x0, 0x1);
        gbc.writeMem(0xe7bd, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xf08c);
        EXPECT(gbc.pc(), 0xe7bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7bd), 0xcb);
        EXPECT(gbc.readMem(0xe7be), 0xe7);
        // CB E7 03A7
        gbc.setState(0x8131, 0x1d5, 0x87f0, 0xd2e9, 0x2f2c, 0x1c98, 0x1, 0x1);
        gbc.writeMem(0x8131, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1d5);
        EXPECT(gbc.pc(), 0x8133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8131), 0xcb);
        EXPECT(gbc.readMem(0x8132), 0xe7);
        // CB E7 03A8
        gbc.setState(0x193e, 0x5786, 0x9fa0, 0x36d6, 0x934b, 0xd119, 0x1, 0x1);
        gbc.writeMem(0x193e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5786);
        EXPECT(gbc.pc(), 0x1940);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03A9
        gbc.setState(0x20e1, 0x1a68, 0xe8c0, 0x9f76, 0xb037, 0x2570, 0x0, 0x0);
        gbc.writeMem(0x20e1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1a68);
        EXPECT(gbc.pc(), 0x20e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03AA
        gbc.setState(0x5be1, 0xe4cd, 0x740, 0xd2f, 0x12c0, 0x5a54, 0x0, 0x0);
        gbc.writeMem(0x5be1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe4cd);
        EXPECT(gbc.pc(), 0x5be3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03AB
        gbc.setState(0x98e2, 0x8b7, 0x9af0, 0xeb39, 0x7cf6, 0xf3e5, 0x1, 0x1);
        gbc.writeMem(0x98e2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x8b7);
        EXPECT(gbc.pc(), 0x98e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98e2), 0xcb);
        EXPECT(gbc.readMem(0x98e3), 0xe7);
        // CB E7 03AC
        gbc.setState(0xe585, 0xe4cb, 0xa450, 0xe880, 0x1bfc, 0xfbb4, 0x0, 0x0);
        gbc.writeMem(0xe585, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xe4cb);
        EXPECT(gbc.pc(), 0xe587);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe585), 0xcb);
        EXPECT(gbc.readMem(0xe586), 0xe7);
        // CB E7 03AD
        gbc.setState(0xc15a, 0xb062, 0x81a0, 0x46fd, 0x4201, 0x771d, 0x0, 0x0);
        gbc.writeMem(0xc15a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xb062);
        EXPECT(gbc.pc(), 0xc15c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15a), 0xcb);
        EXPECT(gbc.readMem(0xc15b), 0xe7);
        // CB E7 03AE
        gbc.setState(0x47d, 0xc4a8, 0x3410, 0x53b3, 0x25f9, 0x8ca1, 0x1, 0x0);
        gbc.writeMem(0x47d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xc4a8);
        EXPECT(gbc.pc(), 0x47f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03AF
        gbc.setState(0x55b7, 0x98e4, 0xb2b0, 0x9931, 0xd557, 0x85d5, 0x0, 0x0);
        gbc.writeMem(0x55b7, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x98e4);
        EXPECT(gbc.pc(), 0x55b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03B0
        gbc.setState(0x2dc5, 0x34c3, 0x28a0, 0xaea0, 0x9640, 0xa0f, 0x0, 0x1);
        gbc.writeMem(0x2dc5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x34c3);
        EXPECT(gbc.pc(), 0x2dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03B1
        gbc.setState(0x5318, 0xbc5a, 0xade0, 0x17a3, 0x801f, 0xb63c, 0x1, 0x0);
        gbc.writeMem(0x5318, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbc5a);
        EXPECT(gbc.pc(), 0x531a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03B2
        gbc.setState(0x702f, 0xac75, 0x1620, 0xa900, 0x9500, 0xf98f, 0x1, 0x0);
        gbc.writeMem(0x702f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xac75);
        EXPECT(gbc.pc(), 0x7031);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03B3
        gbc.setState(0x3f00, 0x8ee5, 0x7560, 0xcbb7, 0x9bc7, 0x32ce, 0x1, 0x0);
        gbc.writeMem(0x3f00, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x8ee5);
        EXPECT(gbc.pc(), 0x3f02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03B4
        gbc.setState(0xb05d, 0x53a7, 0xcd80, 0x8075, 0xc5f6, 0x8fb7, 0x1, 0x1);
        gbc.writeMem(0xb05d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x53a7);
        EXPECT(gbc.pc(), 0xb05f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb05d), 0xcb);
        EXPECT(gbc.readMem(0xb05e), 0xe7);
        // CB E7 03B5
        gbc.setState(0x8346, 0x8b3e, 0xf880, 0x8ddf, 0x93f7, 0x259d, 0x0, 0x0);
        gbc.writeMem(0x8346, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8b3e);
        EXPECT(gbc.pc(), 0x8348);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8346), 0xcb);
        EXPECT(gbc.readMem(0x8347), 0xe7);
        // CB E7 03B6
        gbc.setState(0x201b, 0x8ef5, 0x80a0, 0x8a26, 0xe9ca, 0x1989, 0x1, 0x0);
        gbc.writeMem(0x201b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8ef5);
        EXPECT(gbc.pc(), 0x201d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03B7
        gbc.setState(0x1088, 0xa1e1, 0x1bd0, 0xc875, 0xa17c, 0xc172, 0x0, 0x1);
        gbc.writeMem(0x1088, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xa1e1);
        EXPECT(gbc.pc(), 0x108a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03B8
        gbc.setState(0x2682, 0xf005, 0x7490, 0xb0be, 0x63d3, 0x8c72, 0x0, 0x1);
        gbc.writeMem(0x2682, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xf005);
        EXPECT(gbc.pc(), 0x2684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03B9
        gbc.setState(0x40e6, 0x4377, 0x9f60, 0xad58, 0xc1e0, 0xee52, 0x0, 0x0);
        gbc.writeMem(0x40e6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x4377);
        EXPECT(gbc.pc(), 0x40e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03BA
        gbc.setState(0x9c01, 0xf51e, 0xf7e0, 0xddd2, 0x7b65, 0xf23, 0x0, 0x0);
        gbc.writeMem(0x9c01, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf51e);
        EXPECT(gbc.pc(), 0x9c03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c01), 0xcb);
        EXPECT(gbc.readMem(0x9c02), 0xe7);
        // CB E7 03BB
        gbc.setState(0xade8, 0x7bc7, 0x20d0, 0x89b9, 0x6106, 0xbb9, 0x0, 0x1);
        gbc.writeMem(0xade8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x7bc7);
        EXPECT(gbc.pc(), 0xadea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xade8), 0xcb);
        EXPECT(gbc.readMem(0xade9), 0xe7);
        // CB E7 03BC
        gbc.setState(0xe884, 0xf63b, 0x2750, 0xe709, 0x4857, 0xe510, 0x1, 0x0);
        gbc.writeMem(0xe884, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf63b);
        EXPECT(gbc.pc(), 0xe886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe884), 0xcb);
        EXPECT(gbc.readMem(0xe885), 0xe7);
        // CB E7 03BD
        gbc.setState(0x1e7d, 0xa798, 0xd900, 0x8dae, 0x8c1a, 0x8b6e, 0x0, 0x1);
        gbc.writeMem(0x1e7d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa798);
        EXPECT(gbc.pc(), 0x1e7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03BE
        gbc.setState(0xa771, 0x45d9, 0x7a50, 0x6665, 0xdf72, 0xcaa1, 0x1, 0x1);
        gbc.writeMem(0xa771, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x45d9);
        EXPECT(gbc.pc(), 0xa773);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa771), 0xcb);
        EXPECT(gbc.readMem(0xa772), 0xe7);
        // CB E7 03BF
        gbc.setState(0x999a, 0x70cd, 0xb910, 0x768f, 0xe42e, 0x34ea, 0x1, 0x1);
        gbc.writeMem(0x999a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x70cd);
        EXPECT(gbc.pc(), 0x999c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x999a), 0xcb);
        EXPECT(gbc.readMem(0x999b), 0xe7);
        // CB E7 03C0
        gbc.setState(0x3e5d, 0x8c74, 0x3360, 0xfe72, 0xa111, 0x6b15, 0x0, 0x0);
        gbc.writeMem(0x3e5d, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x8c74);
        EXPECT(gbc.pc(), 0x3e5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03C1
        gbc.setState(0x11d6, 0x7a24, 0x60a0, 0x773, 0x886, 0x7ea9, 0x1, 0x1);
        gbc.writeMem(0x11d6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x7a24);
        EXPECT(gbc.pc(), 0x11d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03C2
        gbc.setState(0xed58, 0x5089, 0x6c50, 0x3936, 0xe2f3, 0x1d74, 0x0, 0x1);
        gbc.writeMem(0xed58, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5089);
        EXPECT(gbc.pc(), 0xed5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed58), 0xcb);
        EXPECT(gbc.readMem(0xed59), 0xe7);
        // CB E7 03C3
        gbc.setState(0x4a9a, 0x5c37, 0xcbb0, 0xc406, 0x70ab, 0x10ee, 0x0, 0x0);
        gbc.writeMem(0x4a9a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x5c37);
        EXPECT(gbc.pc(), 0x4a9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03C4
        gbc.setState(0xe880, 0x53af, 0x1f0, 0xe961, 0x3bb0, 0x84c6, 0x1, 0x0);
        gbc.writeMem(0xe880, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x53af);
        EXPECT(gbc.pc(), 0xe882);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe880), 0xcb);
        EXPECT(gbc.readMem(0xe881), 0xe7);
        // CB E7 03C5
        gbc.setState(0xaea3, 0x8c59, 0x5e0, 0x6cc4, 0x52ba, 0xcd0a, 0x0, 0x0);
        gbc.writeMem(0xaea3, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x8c59);
        EXPECT(gbc.pc(), 0xaea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaea3), 0xcb);
        EXPECT(gbc.readMem(0xaea4), 0xe7);
        // CB E7 03C6
        gbc.setState(0xda6b, 0x8aee, 0x4740, 0x767e, 0xa588, 0x98f3, 0x1, 0x0);
        gbc.writeMem(0xda6b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x8aee);
        EXPECT(gbc.pc(), 0xda6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda6b), 0xcb);
        EXPECT(gbc.readMem(0xda6c), 0xe7);
        // CB E7 03C7
        gbc.setState(0x4be8, 0x3a6, 0xe3c0, 0x6490, 0x19c2, 0xfaaa, 0x0, 0x0);
        gbc.writeMem(0x4be8, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3a6);
        EXPECT(gbc.pc(), 0x4bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03C8
        gbc.setState(0x647, 0x41fa, 0xd790, 0xff4, 0x8945, 0xef42, 0x1, 0x1);
        gbc.writeMem(0x647, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x41fa);
        EXPECT(gbc.pc(), 0x649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03C9
        gbc.setState(0x165a, 0x986e, 0x2cb0, 0xa052, 0x29bb, 0x3c1, 0x0, 0x0);
        gbc.writeMem(0x165a, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x986e);
        EXPECT(gbc.pc(), 0x165c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03CA
        gbc.setState(0x771b, 0x5a8f, 0x930, 0xf9bb, 0x3470, 0xcb2c, 0x1, 0x1);
        gbc.writeMem(0x771b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5a8f);
        EXPECT(gbc.pc(), 0x771d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03CB
        gbc.setState(0xa61e, 0xa566, 0xe180, 0x9c1, 0xfafc, 0x915a, 0x1, 0x0);
        gbc.writeMem(0xa61e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xa566);
        EXPECT(gbc.pc(), 0xa620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa61e), 0xcb);
        EXPECT(gbc.readMem(0xa61f), 0xe7);
        // CB E7 03CC
        gbc.setState(0x2149, 0xe00a, 0x74f0, 0x827c, 0xc260, 0x749, 0x1, 0x0);
        gbc.writeMem(0x2149, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xe00a);
        EXPECT(gbc.pc(), 0x214b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03CD
        gbc.setState(0x5690, 0xb508, 0x6db0, 0x3c7e, 0xf54a, 0xea82, 0x1, 0x0);
        gbc.writeMem(0x5690, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb508);
        EXPECT(gbc.pc(), 0x5692);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03CE
        gbc.setState(0xecca, 0x26f7, 0x680, 0x9a84, 0xb2e, 0x5354, 0x0, 0x0);
        gbc.writeMem(0xecca, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x26f7);
        EXPECT(gbc.pc(), 0xeccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecca), 0xcb);
        EXPECT(gbc.readMem(0xeccb), 0xe7);
        // CB E7 03CF
        gbc.setState(0xe55c, 0x8f5d, 0x6220, 0x9b8a, 0xe560, 0x867, 0x1, 0x0);
        gbc.writeMem(0xe55c, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x8f5d);
        EXPECT(gbc.pc(), 0xe55e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe55c), 0xcb);
        EXPECT(gbc.readMem(0xe55d), 0xe7);
        // CB E7 03D0
        gbc.setState(0x7ace, 0x8531, 0xd260, 0x7677, 0x5f8a, 0x14a7, 0x1, 0x0);
        gbc.writeMem(0x7ace, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x8531);
        EXPECT(gbc.pc(), 0x7ad0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03D1
        gbc.setState(0xb759, 0xb6b1, 0x4730, 0xcc98, 0x81e9, 0x1c69, 0x1, 0x0);
        gbc.writeMem(0xb759, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb6b1);
        EXPECT(gbc.pc(), 0xb75b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb759), 0xcb);
        EXPECT(gbc.readMem(0xb75a), 0xe7);
        // CB E7 03D2
        gbc.setState(0xceab, 0xe8d3, 0xc910, 0x7627, 0x8b94, 0x1664, 0x0, 0x1);
        gbc.writeMem(0xceab, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xe8d3);
        EXPECT(gbc.pc(), 0xcead);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceab), 0xcb);
        EXPECT(gbc.readMem(0xceac), 0xe7);
        // CB E7 03D3
        gbc.setState(0x5ca5, 0xb634, 0xb9b0, 0x5b91, 0x13f8, 0x708, 0x0, 0x0);
        gbc.writeMem(0x5ca5, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb634);
        EXPECT(gbc.pc(), 0x5ca7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03D4
        gbc.setState(0xe774, 0x1a7f, 0xdcb0, 0xeb71, 0x6c0c, 0xe4c7, 0x1, 0x1);
        gbc.writeMem(0xe774, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x1a7f);
        EXPECT(gbc.pc(), 0xe776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe774), 0xcb);
        EXPECT(gbc.readMem(0xe775), 0xe7);
        // CB E7 03D5
        gbc.setState(0x3a18, 0x4edd, 0x3710, 0x7e6b, 0xf412, 0x5c47, 0x1, 0x1);
        gbc.writeMem(0x3a18, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x4edd);
        EXPECT(gbc.pc(), 0x3a1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03D6
        gbc.setState(0x1dae, 0x141d, 0xeec0, 0xd848, 0xf52e, 0x4357, 0x1, 0x0);
        gbc.writeMem(0x1dae, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x141d);
        EXPECT(gbc.pc(), 0x1db0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03D7
        gbc.setState(0x5772, 0x6143, 0xb610, 0x5bc3, 0x8354, 0x4e8e, 0x1, 0x1);
        gbc.writeMem(0x5772, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6143);
        EXPECT(gbc.pc(), 0x5774);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03D8
        gbc.setState(0xc2a1, 0x814a, 0x70, 0x536f, 0xc968, 0x14ff, 0x1, 0x0);
        gbc.writeMem(0xc2a1, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x814a);
        EXPECT(gbc.pc(), 0xc2a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc2a1), 0xcb);
        EXPECT(gbc.readMem(0xc2a2), 0xe7);
        // CB E7 03D9
        gbc.setState(0x37f6, 0xc9a7, 0x60a0, 0xef81, 0x5ce3, 0x4b74, 0x0, 0x1);
        gbc.writeMem(0x37f6, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xc9a7);
        EXPECT(gbc.pc(), 0x37f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03DA
        gbc.setState(0x79c2, 0xd927, 0xd9b0, 0xcc2b, 0xdab4, 0x5ba3, 0x0, 0x1);
        gbc.writeMem(0x79c2, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xd927);
        EXPECT(gbc.pc(), 0x79c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03DB
        gbc.setState(0xa05e, 0xfdac, 0xad70, 0x435b, 0xab09, 0x677c, 0x0, 0x1);
        gbc.writeMem(0xa05e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xfdac);
        EXPECT(gbc.pc(), 0xa060);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa05e), 0xcb);
        EXPECT(gbc.readMem(0xa05f), 0xe7);
        // CB E7 03DC
        gbc.setState(0xeb1f, 0x59cb, 0xfc20, 0xd83a, 0xbaeb, 0xecd2, 0x1, 0x0);
        gbc.writeMem(0xeb1f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x59cb);
        EXPECT(gbc.pc(), 0xeb21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb1f), 0xcb);
        EXPECT(gbc.readMem(0xeb20), 0xe7);
        // CB E7 03DD
        gbc.setState(0xb501, 0x19b5, 0x9310, 0x8e7a, 0x912b, 0xa265, 0x0, 0x1);
        gbc.writeMem(0xb501, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x19b5);
        EXPECT(gbc.pc(), 0xb503);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb501), 0xcb);
        EXPECT(gbc.readMem(0xb502), 0xe7);
        // CB E7 03DE
        gbc.setState(0xa3ae, 0xcc17, 0xfd70, 0x4c9, 0x4fea, 0x1ac2, 0x1, 0x0);
        gbc.writeMem(0xa3ae, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xcc17);
        EXPECT(gbc.pc(), 0xa3b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3ae), 0xcb);
        EXPECT(gbc.readMem(0xa3af), 0xe7);
        // CB E7 03DF
        gbc.setState(0x918b, 0x561f, 0x2a50, 0xcc01, 0x2872, 0x36c7, 0x1, 0x1);
        gbc.writeMem(0x918b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x561f);
        EXPECT(gbc.pc(), 0x918d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918b), 0xcb);
        EXPECT(gbc.readMem(0x918c), 0xe7);
        // CB E7 03E0
        gbc.setState(0xa83, 0xa510, 0x850, 0xae3d, 0x5d1f, 0x876a, 0x0, 0x0);
        gbc.writeMem(0xa83, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xa510);
        EXPECT(gbc.pc(), 0xa85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03E1
        gbc.setState(0x370e, 0xd27, 0x7510, 0xd59e, 0x40ea, 0x1972, 0x1, 0x1);
        gbc.writeMem(0x370e, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd27);
        EXPECT(gbc.pc(), 0x3710);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03E2
        gbc.setState(0x4e2f, 0x5c4b, 0xe780, 0xcee4, 0x7962, 0x9eba, 0x1, 0x0);
        gbc.writeMem(0x4e2f, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5c4b);
        EXPECT(gbc.pc(), 0x4e31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03E3
        gbc.setState(0x3066, 0xe0df, 0x8710, 0xe309, 0xc255, 0x9c07, 0x1, 0x1);
        gbc.writeMem(0x3066, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe0df);
        EXPECT(gbc.pc(), 0x3068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // CB E7 03E4
        gbc.setState(0x793b, 0x9da5, 0xb160, 0xa484, 0x565a, 0x7395, 0x0, 0x0);
        gbc.writeMem(0x793b, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x9da5);
        EXPECT(gbc.pc(), 0x793d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03E6
        gbc.setState(0x3dff, 0x9ef8, 0x4280, 0xb011, 0x4053, 0x3e7e, 0x1, 0x1);
        gbc.writeMem(0x3dff, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x9ef8);
        EXPECT(gbc.pc(), 0x3e01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // CB E7 03E7
        gbc.setState(0x5660, 0xcfe2, 0xe4f0, 0xf73b, 0x824f, 0xa508, 0x0, 0x1);
        gbc.writeMem(0x5660, { 0xcb, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xcfe2);
        EXPECT(gbc.pc(), 0x5662);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
    }
