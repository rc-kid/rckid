    TEST(gbcemu, opcode_1b) {
        GBCEmu gbc{"", nullptr};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 1B 0000
        gbc.setState(0x59c7, 0x4c3d, 0x3a90, 0x897d, 0x152e, 0xf59a, 0x1, 0x1);
        gbc.writeMem(0x59c7, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x4c3d, gbc.sp());
        EXPECT(0x59c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0001
        gbc.setState(0x9aba, 0x5ccd, 0xb9b0, 0xc443, 0xe9c2, 0xeedb, 0x0, 0x1);
        gbc.writeMem(0x9aba, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x5ccd, gbc.sp());
        EXPECT(0x9abb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9aba));
        // 1B 0002
        gbc.setState(0xc9e6, 0x746b, 0x31a0, 0x414b, 0x99d4, 0xafb8, 0x1, 0x0);
        gbc.writeMem(0xc9e6, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x746b, gbc.sp());
        EXPECT(0xc9e7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc9e6));
        // 1B 0003
        gbc.setState(0x9382, 0x4559, 0x4b30, 0xf7d3, 0x3d9a, 0xaaa2, 0x0, 0x1);
        gbc.writeMem(0x9382, { 0x1b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x4559, gbc.sp());
        EXPECT(0x9383, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9382));
        // 1B 0004
        gbc.setState(0x2938, 0xdce1, 0x80a0, 0x6fb6, 0xdb3e, 0x8135, 0x0, 0x1);
        gbc.writeMem(0x2938, { 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xdce1, gbc.sp());
        EXPECT(0x2939, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0005
        gbc.setState(0x34c7, 0x998b, 0xae40, 0x8e55, 0x4eb2, 0x7cb8, 0x1, 0x1);
        gbc.writeMem(0x34c7, { 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x998b, gbc.sp());
        EXPECT(0x34c8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0006
        gbc.setState(0x610a, 0x74e2, 0x8090, 0xe9ba, 0x37eb, 0x4df6, 0x0, 0x1);
        gbc.writeMem(0x610a, { 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0x74e2, gbc.sp());
        EXPECT(0x610b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0007
        gbc.setState(0xad31, 0xe909, 0x1c00, 0xc904, 0xe319, 0xee9d, 0x1, 0x0);
        gbc.writeMem(0xad31, { 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xe909, gbc.sp());
        EXPECT(0xad32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad31));
        // 1B 0008
        gbc.setState(0xdb6c, 0xec16, 0x7280, 0xd432, 0x617c, 0x21b8, 0x1, 0x1);
        gbc.writeMem(0xdb6c, { 0x1b });
        gbc.step();
        EXPECT(0x72, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xec16, gbc.sp());
        EXPECT(0xdb6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdb6c));
        // 1B 0009
        gbc.setState(0xae0, 0xfc31, 0xe020, 0x3465, 0xbe0, 0xcc29, 0x1, 0x1);
        gbc.writeMem(0xae0, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0xfc31, gbc.sp());
        EXPECT(0xae1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 000A
        gbc.setState(0x984a, 0xbaa0, 0xb780, 0xe527, 0x99d1, 0x4346, 0x0, 0x0);
        gbc.writeMem(0x984a, { 0x1b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xbaa0, gbc.sp());
        EXPECT(0x984b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x984a));
        // 1B 000B
        gbc.setState(0xed87, 0x640a, 0xffc0, 0x6b5d, 0x637e, 0xfe9a, 0x1, 0x0);
        gbc.writeMem(0xed87, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x640a, gbc.sp());
        EXPECT(0xed88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xed87));
        // 1B 000C
        gbc.setState(0x6f22, 0x38a0, 0xe7b0, 0x5937, 0x337e, 0x8608, 0x0, 0x1);
        gbc.writeMem(0x6f22, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x38a0, gbc.sp());
        EXPECT(0x6f23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 000D
        gbc.setState(0x4280, 0xc36d, 0x3180, 0x9acd, 0xc57d, 0x1e10, 0x1, 0x1);
        gbc.writeMem(0x4280, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0xc36d, gbc.sp());
        EXPECT(0x4281, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 000E
        gbc.setState(0xca70, 0x5589, 0x78f0, 0x4184, 0xa32f, 0xf048, 0x0, 0x1);
        gbc.writeMem(0xca70, { 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x5589, gbc.sp());
        EXPECT(0xca71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xca70));
        // 1B 000F
        gbc.setState(0x5ff, 0xb47d, 0xdde0, 0xc7d6, 0x5830, 0xa8ce, 0x1, 0x0);
        gbc.writeMem(0x5ff, { 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xb47d, gbc.sp());
        EXPECT(0x600, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0010
        gbc.setState(0x9713, 0xe980, 0xd120, 0xa910, 0xa82e, 0x7232, 0x0, 0x1);
        gbc.writeMem(0x9713, { 0x1b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0xa9, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0xe980, gbc.sp());
        EXPECT(0x9714, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9713));
        // 1B 0011
        gbc.setState(0x2a29, 0xfc02, 0x6cf0, 0x1c5d, 0x820b, 0xe864, 0x1, 0x0);
        gbc.writeMem(0x2a29, { 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xfc02, gbc.sp());
        EXPECT(0x2a2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0013
        gbc.setState(0xb4ac, 0x7f86, 0x1f60, 0xa341, 0x1d25, 0x2893, 0x1, 0x0);
        gbc.writeMem(0xb4ac, { 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x7f86, gbc.sp());
        EXPECT(0xb4ad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb4ac));
        // 1B 0015
        gbc.setState(0xa2e1, 0x38ab, 0x6a50, 0x6b00, 0x2bfa, 0x4f0c, 0x0, 0x1);
        gbc.writeMem(0xa2e1, { 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x38ab, gbc.sp());
        EXPECT(0xa2e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa2e1));
        // 1B 0016
        gbc.setState(0x28ef, 0xdc71, 0xd540, 0x3522, 0x47fe, 0xa6ce, 0x1, 0x1);
        gbc.writeMem(0x28ef, { 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xdc71, gbc.sp());
        EXPECT(0x28f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0017
        gbc.setState(0x9967, 0xd2b4, 0xa960, 0xb94c, 0xece7, 0x8f24, 0x0, 0x1);
        gbc.writeMem(0x9967, { 0x1b });
        gbc.step();
        EXPECT(0xa9, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0xd2b4, gbc.sp());
        EXPECT(0x9968, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9967));
        // 1B 0018
        gbc.setState(0x6a78, 0xf615, 0x9e30, 0xaefc, 0x50df, 0xf0d7, 0x0, 0x1);
        gbc.writeMem(0x6a78, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xf615, gbc.sp());
        EXPECT(0x6a79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0019
        gbc.setState(0x891d, 0xcf38, 0xe2c0, 0x3e1a, 0x2487, 0x4cdf, 0x1, 0x1);
        gbc.writeMem(0x891d, { 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xcf38, gbc.sp());
        EXPECT(0x891e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x891d));
        // 1B 001A
        gbc.setState(0x4d88, 0xecbb, 0xb2e0, 0xfc4d, 0xf295, 0x4d63, 0x0, 0x0);
        gbc.writeMem(0x4d88, { 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xecbb, gbc.sp());
        EXPECT(0x4d89, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 001B
        gbc.setState(0x2f0e, 0x76b8, 0xfa20, 0x90c7, 0x32b5, 0x9d5b, 0x1, 0x1);
        gbc.writeMem(0x2f0e, { 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x76b8, gbc.sp());
        EXPECT(0x2f0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 001C
        gbc.setState(0xe47c, 0x7c07, 0x6ba0, 0x2ca7, 0xd4e0, 0x8cd4, 0x1, 0x1);
        gbc.writeMem(0xe47c, { 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x2c, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x7c07, gbc.sp());
        EXPECT(0xe47d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe47c));
        // 1B 001D
        gbc.setState(0x25, 0x83f8, 0xbf30, 0x214f, 0xfe40, 0x6f1b, 0x1, 0x0);
        gbc.writeMem(0x25, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x83f8, gbc.sp());
        EXPECT(0x26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 001E
        gbc.setState(0x3cfe, 0x64c5, 0xc4b0, 0x506b, 0xc5a5, 0x69d3, 0x1, 0x0);
        gbc.writeMem(0x3cfe, { 0x1b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x64c5, gbc.sp());
        EXPECT(0x3cff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 001F
        gbc.setState(0x1e2b, 0x15e8, 0xb9a0, 0x592a, 0x181f, 0xb8a0, 0x1, 0x1);
        gbc.writeMem(0x1e2b, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x15e8, gbc.sp());
        EXPECT(0x1e2c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0020
        gbc.setState(0xca8f, 0xbc7d, 0x3260, 0x559b, 0xd5eb, 0x6976, 0x0, 0x0);
        gbc.writeMem(0xca8f, { 0x1b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xbc7d, gbc.sp());
        EXPECT(0xca90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xca8f));
        // 1B 0021
        gbc.setState(0x3e50, 0xa32f, 0x5fc0, 0x44f, 0xdb81, 0x620e, 0x1, 0x0);
        gbc.writeMem(0x3e50, { 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x4, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xa32f, gbc.sp());
        EXPECT(0x3e51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0022
        gbc.setState(0x76c4, 0x8c6d, 0xf50, 0x1a9d, 0xee20, 0xea02, 0x1, 0x1);
        gbc.writeMem(0x76c4, { 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x8c6d, gbc.sp());
        EXPECT(0x76c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0023
        gbc.setState(0xa3bd, 0x6264, 0x90a0, 0x32d1, 0xfc63, 0x6903, 0x0, 0x0);
        gbc.writeMem(0xa3bd, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x62, gbc.e());
        EXPECT(0x69, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x6264, gbc.sp());
        EXPECT(0xa3be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa3bd));
        // 1B 0024
        gbc.setState(0x8046, 0x7b4b, 0x8710, 0x97cf, 0x3a6a, 0x1bae, 0x1, 0x1);
        gbc.writeMem(0x8046, { 0x1b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x7b4b, gbc.sp());
        EXPECT(0x8047, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8046));
        // 1B 0026
        gbc.setState(0xea2e, 0x39e7, 0x7720, 0x5b39, 0x571e, 0x6d4, 0x1, 0x0);
        gbc.writeMem(0xea2e, { 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x39e7, gbc.sp());
        EXPECT(0xea2f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xea2e));
        // 1B 0027
        gbc.setState(0xbbbc, 0x6617, 0xbe20, 0x6b42, 0x989e, 0x91f7, 0x1, 0x1);
        gbc.writeMem(0xbbbc, { 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0x6617, gbc.sp());
        EXPECT(0xbbbd, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbbbc));
        // 1B 0028
        gbc.setState(0xa65a, 0x13fa, 0x2c10, 0x1bd7, 0x2575, 0xf4bc, 0x1, 0x0);
        gbc.writeMem(0xa65a, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x13fa, gbc.sp());
        EXPECT(0xa65b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa65a));
        // 1B 0029
        gbc.setState(0x3e92, 0xede8, 0xdb70, 0x758a, 0xaed1, 0x6815, 0x0, 0x1);
        gbc.writeMem(0x3e92, { 0x1b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xede8, gbc.sp());
        EXPECT(0x3e93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 002A
        gbc.setState(0x1748, 0xd1b5, 0x5640, 0x830d, 0x36da, 0xffb4, 0x0, 0x1);
        gbc.writeMem(0x1748, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0xd1b5, gbc.sp());
        EXPECT(0x1749, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 002B
        gbc.setState(0x633f, 0xe0f8, 0xcea0, 0xd75c, 0x2f3c, 0xd564, 0x1, 0x1);
        gbc.writeMem(0x633f, { 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xe0f8, gbc.sp());
        EXPECT(0x6340, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 002C
        gbc.setState(0x74e1, 0xc637, 0x30a0, 0xc34f, 0xd2b2, 0x168e, 0x1, 0x0);
        gbc.writeMem(0x74e1, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xc637, gbc.sp());
        EXPECT(0x74e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 002D
        gbc.setState(0xe48c, 0x8a5a, 0xb080, 0xc3c3, 0x7769, 0xe9e9, 0x0, 0x0);
        gbc.writeMem(0xe48c, { 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x8a5a, gbc.sp());
        EXPECT(0xe48d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe48c));
        // 1B 002E
        gbc.setState(0x1a85, 0x590c, 0x3460, 0x53be, 0xbeee, 0xccdc, 0x1, 0x0);
        gbc.writeMem(0x1a85, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x590c, gbc.sp());
        EXPECT(0x1a86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 002F
        gbc.setState(0xebac, 0xf82a, 0x64c0, 0xfa29, 0x3b90, 0xd415, 0x0, 0x0);
        gbc.writeMem(0xebac, { 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0xf82a, gbc.sp());
        EXPECT(0xebad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xebac));
        // 1B 0030
        gbc.setState(0x154d, 0xdbc0, 0x7180, 0x53c7, 0xcc0f, 0x88b1, 0x0, 0x1);
        gbc.writeMem(0x154d, { 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xdbc0, gbc.sp());
        EXPECT(0x154e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0031
        gbc.setState(0x121b, 0x9595, 0x1580, 0xfcf3, 0x4190, 0x2e1, 0x0, 0x1);
        gbc.writeMem(0x121b, { 0x1b });
        gbc.step();
        EXPECT(0x15, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x9595, gbc.sp());
        EXPECT(0x121c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0032
        gbc.setState(0x3df7, 0x9788, 0xa110, 0xe452, 0x2ba3, 0x9f16, 0x1, 0x0);
        gbc.writeMem(0x3df7, { 0x1b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x9788, gbc.sp());
        EXPECT(0x3df8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0033
        gbc.setState(0x12b5, 0x50e, 0xebc0, 0x961a, 0xdfa9, 0xf15, 0x1, 0x1);
        gbc.writeMem(0x12b5, { 0x1b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x50e, gbc.sp());
        EXPECT(0x12b6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0034
        gbc.setState(0x7871, 0x686a, 0x2660, 0xc6f4, 0x837a, 0x6a85, 0x1, 0x0);
        gbc.writeMem(0x7871, { 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x686a, gbc.sp());
        EXPECT(0x7872, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0035
        gbc.setState(0x367f, 0x2a47, 0xb740, 0x3410, 0x4553, 0x50ab, 0x1, 0x0);
        gbc.writeMem(0x367f, { 0x1b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x2a47, gbc.sp());
        EXPECT(0x3680, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0036
        gbc.setState(0x98fd, 0x4df4, 0x7500, 0xde62, 0x79f5, 0xe837, 0x0, 0x1);
        gbc.writeMem(0x98fd, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x4df4, gbc.sp());
        EXPECT(0x98fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x98fd));
        // 1B 0037
        gbc.setState(0x9681, 0x8153, 0x3af0, 0x93ca, 0x8b51, 0x1ef4, 0x1, 0x0);
        gbc.writeMem(0x9681, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x8153, gbc.sp());
        EXPECT(0x9682, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9681));
        // 1B 0038
        gbc.setState(0x65a3, 0xaf8a, 0x1c10, 0x6bae, 0x9ac9, 0x1159, 0x1, 0x0);
        gbc.writeMem(0x65a3, { 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0xaf8a, gbc.sp());
        EXPECT(0x65a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0039
        gbc.setState(0x2091, 0x5539, 0x5600, 0x3cf0, 0x57db, 0x8264, 0x0, 0x1);
        gbc.writeMem(0x2091, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x5539, gbc.sp());
        EXPECT(0x2092, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 003B
        gbc.setState(0xa315, 0xbab6, 0xbd60, 0x3823, 0x136f, 0x74b0, 0x0, 0x1);
        gbc.writeMem(0xa315, { 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x23, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xbab6, gbc.sp());
        EXPECT(0xa316, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa315));
        // 1B 003C
        gbc.setState(0x6e5, 0xecdb, 0x2d80, 0x782b, 0x60ce, 0x88bd, 0x1, 0x1);
        gbc.writeMem(0x6e5, { 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xecdb, gbc.sp());
        EXPECT(0x6e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 003D
        gbc.setState(0xa25d, 0xfc32, 0x7ee0, 0xf0da, 0x4531, 0xf16e, 0x1, 0x1);
        gbc.writeMem(0xa25d, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xf0, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0xfc32, gbc.sp());
        EXPECT(0xa25e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa25d));
        // 1B 003E
        gbc.setState(0x1fbd, 0xef6b, 0x2a80, 0x116e, 0x8251, 0x37df, 0x1, 0x0);
        gbc.writeMem(0x1fbd, { 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xef6b, gbc.sp());
        EXPECT(0x1fbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 003F
        gbc.setState(0x730d, 0xdd02, 0x9f80, 0x56d2, 0xd65d, 0x7df3, 0x1, 0x1);
        gbc.writeMem(0x730d, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xdd02, gbc.sp());
        EXPECT(0x730e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0040
        gbc.setState(0x9d, 0xb802, 0xc460, 0x8765, 0x3eea, 0x43eb, 0x1, 0x1);
        gbc.writeMem(0x9d, { 0x1b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0xb802, gbc.sp());
        EXPECT(0x9e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0041
        gbc.setState(0x44b1, 0x1668, 0xabe0, 0xee1b, 0x60a0, 0x770b, 0x0, 0x1);
        gbc.writeMem(0x44b1, { 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x1668, gbc.sp());
        EXPECT(0x44b2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0042
        gbc.setState(0x4126, 0xc2cf, 0x7770, 0xeee6, 0xc27a, 0xbc21, 0x0, 0x0);
        gbc.writeMem(0x4126, { 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x21, gbc.l());
        EXPECT(0xc2cf, gbc.sp());
        EXPECT(0x4127, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0043
        gbc.setState(0x150e, 0xe129, 0xf8d0, 0xbfee, 0x57ca, 0xf655, 0x1, 0x1);
        gbc.writeMem(0x150e, { 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0xe129, gbc.sp());
        EXPECT(0x150f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0044
        gbc.setState(0xcf22, 0x7a75, 0x9ed0, 0xd8d0, 0x4c0, 0x8a7, 0x0, 0x0);
        gbc.writeMem(0xcf22, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x7a75, gbc.sp());
        EXPECT(0xcf23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcf22));
        // 1B 0045
        gbc.setState(0x9883, 0x113e, 0xc3e0, 0x3af2, 0x84d9, 0xd5dd, 0x1, 0x0);
        gbc.writeMem(0x9883, { 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x113e, gbc.sp());
        EXPECT(0x9884, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9883));
        // 1B 0046
        gbc.setState(0x591b, 0x2005, 0x400, 0xb3f5, 0xe76, 0xf607, 0x0, 0x1);
        gbc.writeMem(0x591b, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x2005, gbc.sp());
        EXPECT(0x591c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0047
        gbc.setState(0x5809, 0x5af7, 0xf640, 0xb568, 0x9bd2, 0x6dfe, 0x0, 0x0);
        gbc.writeMem(0x5809, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x5af7, gbc.sp());
        EXPECT(0x580a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0048
        gbc.setState(0x55b2, 0x630d, 0xd580, 0xa584, 0xba11, 0x5961, 0x0, 0x0);
        gbc.writeMem(0x55b2, { 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xba, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x630d, gbc.sp());
        EXPECT(0x55b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0049
        gbc.setState(0x340e, 0x34e0, 0x7f70, 0x2962, 0x4c41, 0xc96c, 0x0, 0x1);
        gbc.writeMem(0x340e, { 0x1b });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x34e0, gbc.sp());
        EXPECT(0x340f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 004A
        gbc.setState(0x5427, 0xb9b1, 0x590, 0x6e7c, 0x7345, 0xe67a, 0x1, 0x0);
        gbc.writeMem(0x5427, { 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0xb9b1, gbc.sp());
        EXPECT(0x5428, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 004C
        gbc.setState(0xeda4, 0xbe77, 0x1f00, 0x23f6, 0xb5b9, 0x35dd, 0x0, 0x1);
        gbc.writeMem(0xeda4, { 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0xbe77, gbc.sp());
        EXPECT(0xeda5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xeda4));
        // 1B 004D
        gbc.setState(0x471a, 0x423a, 0xed0, 0x2278, 0x7547, 0xa20d, 0x0, 0x1);
        gbc.writeMem(0x471a, { 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x22, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x423a, gbc.sp());
        EXPECT(0x471b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 004E
        gbc.setState(0x9e37, 0xf0b8, 0x6f90, 0xc1fc, 0x8446, 0x3306, 0x0, 0x0);
        gbc.writeMem(0x9e37, { 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xf0b8, gbc.sp());
        EXPECT(0x9e38, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9e37));
        // 1B 004F
        gbc.setState(0x9de4, 0x3f54, 0x650, 0x4ff5, 0x3529, 0xfa1, 0x0, 0x0);
        gbc.writeMem(0x9de4, { 0x1b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x3f54, gbc.sp());
        EXPECT(0x9de5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9de4));
        // 1B 0050
        gbc.setState(0x81fa, 0xf188, 0x400, 0x3dc4, 0x6807, 0x2c40, 0x1, 0x0);
        gbc.writeMem(0x81fa, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x3d, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xf188, gbc.sp());
        EXPECT(0x81fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x81fa));
        // 1B 0051
        gbc.setState(0x1b15, 0x3592, 0x3790, 0xb775, 0xc66e, 0x650c, 0x0, 0x0);
        gbc.writeMem(0x1b15, { 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x3592, gbc.sp());
        EXPECT(0x1b16, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0052
        gbc.setState(0xa2c6, 0x962f, 0x5c20, 0x88ea, 0xf791, 0x8de2, 0x0, 0x1);
        gbc.writeMem(0xa2c6, { 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x962f, gbc.sp());
        EXPECT(0xa2c7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa2c6));
        // 1B 0053
        gbc.setState(0xaac5, 0xdbec, 0x4ed0, 0x9715, 0x7c64, 0x1191, 0x1, 0x0);
        gbc.writeMem(0xaac5, { 0x1b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xdbec, gbc.sp());
        EXPECT(0xaac6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaac5));
        // 1B 0054
        gbc.setState(0xd581, 0x20af, 0xb930, 0xc83d, 0x3986, 0x7f3, 0x1, 0x1);
        gbc.writeMem(0xd581, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x20af, gbc.sp());
        EXPECT(0xd582, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd581));
        // 1B 0055
        gbc.setState(0xa154, 0x4b25, 0x60a0, 0xf500, 0xb371, 0xf54b, 0x0, 0x1);
        gbc.writeMem(0xa154, { 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0x4b25, gbc.sp());
        EXPECT(0xa155, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa154));
        // 1B 0057
        gbc.setState(0x1ad0, 0x8d77, 0x9e50, 0xa7d6, 0xda16, 0xa70e, 0x0, 0x0);
        gbc.writeMem(0x1ad0, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x8d77, gbc.sp());
        EXPECT(0x1ad1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0058
        gbc.setState(0x29da, 0xe80b, 0xece0, 0xfefc, 0x3aed, 0xb4e, 0x1, 0x0);
        gbc.writeMem(0x29da, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xe80b, gbc.sp());
        EXPECT(0x29db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0059
        gbc.setState(0x243a, 0xb4ca, 0x3640, 0x8bab, 0x8eb2, 0xf07d, 0x1, 0x1);
        gbc.writeMem(0x243a, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xb4ca, gbc.sp());
        EXPECT(0x243b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 005B
        gbc.setState(0x6db1, 0xcf32, 0x6020, 0x93f1, 0x938c, 0x140d, 0x1, 0x0);
        gbc.writeMem(0x6db1, { 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xcf32, gbc.sp());
        EXPECT(0x6db2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 005C
        gbc.setState(0x3f4b, 0x43c1, 0xc870, 0xdc7b, 0xa184, 0x5d6c, 0x1, 0x1);
        gbc.writeMem(0x3f4b, { 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x6c, gbc.l());
        EXPECT(0x43c1, gbc.sp());
        EXPECT(0x3f4c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 005D
        gbc.setState(0x446e, 0xaa69, 0x5a20, 0x75c, 0xb2b1, 0x2126, 0x1, 0x0);
        gbc.writeMem(0x446e, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xaa69, gbc.sp());
        EXPECT(0x446f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 005E
        gbc.setState(0x915a, 0x528b, 0x1d60, 0x4f, 0x50e4, 0x4d76, 0x0, 0x0);
        gbc.writeMem(0x915a, { 0x1b });
        gbc.step();
        EXPECT(0x1d, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x528b, gbc.sp());
        EXPECT(0x915b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x915a));
        // 1B 005F
        gbc.setState(0x868e, 0xa177, 0xd1a0, 0x1bd, 0x8ad6, 0x4e13, 0x0, 0x0);
        gbc.writeMem(0x868e, { 0x1b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0xa177, gbc.sp());
        EXPECT(0x868f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x868e));
        // 1B 0060
        gbc.setState(0x5f1d, 0x69a2, 0x1750, 0x47a2, 0xf7cf, 0xd632, 0x0, 0x1);
        gbc.writeMem(0x5f1d, { 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x69a2, gbc.sp());
        EXPECT(0x5f1e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0061
        gbc.setState(0x6b0d, 0x56eb, 0xcfc0, 0x7a3c, 0x4bcb, 0x3aa7, 0x1, 0x0);
        gbc.writeMem(0x6b0d, { 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x56eb, gbc.sp());
        EXPECT(0x6b0e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0062
        gbc.setState(0x2f6b, 0x95f9, 0x710, 0xe34e, 0x70f0, 0xc480, 0x1, 0x0);
        gbc.writeMem(0x2f6b, { 0x1b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x4e, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0x95f9, gbc.sp());
        EXPECT(0x2f6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0064
        gbc.setState(0x64ff, 0xbf92, 0x49f0, 0x98a3, 0xf25, 0x9ad3, 0x0, 0x1);
        gbc.writeMem(0x64ff, { 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0xbf92, gbc.sp());
        EXPECT(0x6500, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0065
        gbc.setState(0x1bf0, 0xfe64, 0xaed0, 0x95de, 0x2f25, 0xae, 0x0, 0x1);
        gbc.writeMem(0x1bf0, { 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xfe64, gbc.sp());
        EXPECT(0x1bf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0067
        gbc.setState(0x1a4e, 0x5372, 0xe7b0, 0x2d5e, 0x1ca7, 0xb87, 0x1, 0x0);
        gbc.writeMem(0x1a4e, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x5372, gbc.sp());
        EXPECT(0x1a4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0068
        gbc.setState(0x6418, 0x365e, 0x9ed0, 0x1ca1, 0x8d0d, 0xe37a, 0x1, 0x0);
        gbc.writeMem(0x6418, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x365e, gbc.sp());
        EXPECT(0x6419, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0069
        gbc.setState(0x570f, 0xae50, 0xe960, 0x7b11, 0x4f15, 0x18ea, 0x1, 0x1);
        gbc.writeMem(0x570f, { 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0x7b, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xae50, gbc.sp());
        EXPECT(0x5710, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 006A
        gbc.setState(0x1922, 0x2de5, 0xf260, 0x6493, 0xaef8, 0x4f1c, 0x1, 0x1);
        gbc.writeMem(0x1922, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x2de5, gbc.sp());
        EXPECT(0x1923, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 006B
        gbc.setState(0x3f9, 0x226, 0x9b90, 0x7cca, 0xbd2e, 0xeb7c, 0x0, 0x0);
        gbc.writeMem(0x3f9, { 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x226, gbc.sp());
        EXPECT(0x3fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 006C
        gbc.setState(0x7bd, 0x5891, 0x3d40, 0xd7f7, 0xb6d2, 0xc89c, 0x0, 0x1);
        gbc.writeMem(0x7bd, { 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x5891, gbc.sp());
        EXPECT(0x7be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 006D
        gbc.setState(0xa4b9, 0x31e0, 0x4d90, 0xdd20, 0x4231, 0x241d, 0x0, 0x1);
        gbc.writeMem(0xa4b9, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x20, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x31e0, gbc.sp());
        EXPECT(0xa4ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa4b9));
        // 1B 006E
        gbc.setState(0x2daf, 0xb95b, 0xd360, 0xae01, 0x4262, 0xd06d, 0x0, 0x0);
        gbc.writeMem(0x2daf, { 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xb95b, gbc.sp());
        EXPECT(0x2db0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 006F
        gbc.setState(0x6aa6, 0x3c3e, 0x59a0, 0xbee1, 0xd56, 0xc566, 0x1, 0x0);
        gbc.writeMem(0x6aa6, { 0x1b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x3c3e, gbc.sp());
        EXPECT(0x6aa7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0070
        gbc.setState(0x97f8, 0x4747, 0x8690, 0x926, 0x96ab, 0xc407, 0x1, 0x1);
        gbc.writeMem(0x97f8, { 0x1b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x96, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x4747, gbc.sp());
        EXPECT(0x97f9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x97f8));
        // 1B 0071
        gbc.setState(0x9b5d, 0xc4f, 0x3f30, 0x6d52, 0x4d24, 0xada4, 0x0, 0x1);
        gbc.writeMem(0x9b5d, { 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xc4f, gbc.sp());
        EXPECT(0x9b5e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b5d));
        // 1B 0072
        gbc.setState(0xd5cd, 0x5c2, 0x8260, 0xe28d, 0x4d65, 0xf861, 0x0, 0x0);
        gbc.writeMem(0xd5cd, { 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x5c2, gbc.sp());
        EXPECT(0xd5ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd5cd));
        // 1B 0073
        gbc.setState(0xaa24, 0xda93, 0x9700, 0x57a9, 0x2a6b, 0x881d, 0x0, 0x1);
        gbc.writeMem(0xaa24, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xda93, gbc.sp());
        EXPECT(0xaa25, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaa24));
        // 1B 0074
        gbc.setState(0x1bad, 0xf021, 0x43a0, 0x8162, 0xfff1, 0x78b3, 0x0, 0x0);
        gbc.writeMem(0x1bad, { 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xf021, gbc.sp());
        EXPECT(0x1bae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0077
        gbc.setState(0x7b78, 0x2060, 0xfa60, 0x174c, 0x6cdc, 0x4d31, 0x0, 0x1);
        gbc.writeMem(0x7b78, { 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x2060, gbc.sp());
        EXPECT(0x7b79, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0079
        gbc.setState(0x7134, 0x1a92, 0x8490, 0xb93e, 0x95d4, 0x7532, 0x0, 0x0);
        gbc.writeMem(0x7134, { 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1a92, gbc.sp());
        EXPECT(0x7135, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 007A
        gbc.setState(0xb9a3, 0xc1f, 0xb0a0, 0x6961, 0x140c, 0x1bc7, 0x1, 0x0);
        gbc.writeMem(0xb9a3, { 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xc1f, gbc.sp());
        EXPECT(0xb9a4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb9a3));
        // 1B 007B
        gbc.setState(0xe409, 0x7b09, 0x3180, 0x9d41, 0xc9d8, 0xe2a6, 0x1, 0x1);
        gbc.writeMem(0xe409, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x7b09, gbc.sp());
        EXPECT(0xe40a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe409));
        // 1B 007C
        gbc.setState(0x73e0, 0xdf8f, 0x7600, 0xa6eb, 0xe7bd, 0x94f6, 0x0, 0x1);
        gbc.writeMem(0x73e0, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xdf8f, gbc.sp());
        EXPECT(0x73e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 007D
        gbc.setState(0xa5dd, 0x1308, 0xa5d0, 0x92e, 0x36b8, 0x9dfe, 0x0, 0x1);
        gbc.writeMem(0xa5dd, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x36, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x1308, gbc.sp());
        EXPECT(0xa5de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa5dd));
        // 1B 007E
        gbc.setState(0xc302, 0x3df6, 0x830, 0x74ba, 0x22c, 0x4bbe, 0x0, 0x0);
        gbc.writeMem(0xc302, { 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x3df6, gbc.sp());
        EXPECT(0xc303, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc302));
        // 1B 007F
        gbc.setState(0xb13a, 0x904e, 0x8230, 0xb8a9, 0x394a, 0xa641, 0x0, 0x1);
        gbc.writeMem(0xb13a, { 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x904e, gbc.sp());
        EXPECT(0xb13b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb13a));
        // 1B 0080
        gbc.setState(0x5fcd, 0x7b26, 0xbf10, 0x6321, 0x5916, 0xa96, 0x0, 0x1);
        gbc.writeMem(0x5fcd, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x7b26, gbc.sp());
        EXPECT(0x5fce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0081
        gbc.setState(0x654a, 0x661b, 0x7a10, 0x617e, 0x83f7, 0xa887, 0x0, 0x1);
        gbc.writeMem(0x654a, { 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x661b, gbc.sp());
        EXPECT(0x654b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0082
        gbc.setState(0xb060, 0xfe5d, 0xba0, 0x34ce, 0x8f92, 0x5ca7, 0x0, 0x0);
        gbc.writeMem(0xb060, { 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xfe5d, gbc.sp());
        EXPECT(0xb061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb060));
        // 1B 0083
        gbc.setState(0x27a5, 0x9ea8, 0xc6e0, 0xabc0, 0xeb77, 0x321e, 0x0, 0x1);
        gbc.writeMem(0x27a5, { 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x9ea8, gbc.sp());
        EXPECT(0x27a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0084
        gbc.setState(0x50d4, 0x1e2, 0xa4f0, 0xf68c, 0xd680, 0x1cdf, 0x0, 0x0);
        gbc.writeMem(0x50d4, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x1e2, gbc.sp());
        EXPECT(0x50d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0085
        gbc.setState(0xde8, 0x337a, 0xce20, 0xdd3c, 0xdc0b, 0x20b3, 0x1, 0x1);
        gbc.writeMem(0xde8, { 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x337a, gbc.sp());
        EXPECT(0xde9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0086
        gbc.setState(0xc370, 0x138b, 0x4ff0, 0x9302, 0x4048, 0x25ea, 0x1, 0x0);
        gbc.writeMem(0xc370, { 0x1b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x138b, gbc.sp());
        EXPECT(0xc371, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc370));
        // 1B 0087
        gbc.setState(0x213, 0x6d24, 0x85f0, 0xebc7, 0x9586, 0x3793, 0x0, 0x0);
        gbc.writeMem(0x213, { 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x37, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x6d24, gbc.sp());
        EXPECT(0x214, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0088
        gbc.setState(0xbf1, 0x42c6, 0x3450, 0xe3d0, 0x73e9, 0xd03c, 0x0, 0x0);
        gbc.writeMem(0xbf1, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x73, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x42c6, gbc.sp());
        EXPECT(0xbf2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0089
        gbc.setState(0x57eb, 0xf149, 0x5a00, 0x4898, 0x8281, 0x84f3, 0x1, 0x0);
        gbc.writeMem(0x57eb, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0xf149, gbc.sp());
        EXPECT(0x57ec, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 008B
        gbc.setState(0x895a, 0x29d1, 0x4750, 0x6661, 0x8790, 0x6c50, 0x1, 0x1);
        gbc.writeMem(0x895a, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0x29d1, gbc.sp());
        EXPECT(0x895b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x895a));
        // 1B 008C
        gbc.setState(0x1332, 0xd306, 0x30e0, 0x36b7, 0xb48d, 0x7a88, 0x1, 0x1);
        gbc.writeMem(0x1332, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xd306, gbc.sp());
        EXPECT(0x1333, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 008D
        gbc.setState(0xdc38, 0x42f0, 0x8e60, 0x6c, 0xe8db, 0x945d, 0x1, 0x1);
        gbc.writeMem(0xdc38, { 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0x42f0, gbc.sp());
        EXPECT(0xdc39, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdc38));
        // 1B 008E
        gbc.setState(0x7772, 0x2317, 0xf810, 0x6c6f, 0x6e0b, 0xc649, 0x0, 0x0);
        gbc.writeMem(0x7772, { 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x49, gbc.l());
        EXPECT(0x2317, gbc.sp());
        EXPECT(0x7773, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 008F
        gbc.setState(0x7fd4, 0xc1c3, 0x8a20, 0xac5c, 0x5755, 0x7dbd, 0x0, 0x0);
        gbc.writeMem(0x7fd4, { 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc1c3, gbc.sp());
        EXPECT(0x7fd5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0090
        gbc.setState(0xb589, 0xe447, 0xc000, 0x1f9f, 0x93eb, 0xb402, 0x0, 0x1);
        gbc.writeMem(0xb589, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xe447, gbc.sp());
        EXPECT(0xb58a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb589));
        // 1B 0091
        gbc.setState(0xbb7b, 0xd663, 0xa350, 0x61af, 0x9b53, 0xdd70, 0x1, 0x0);
        gbc.writeMem(0xbb7b, { 0x1b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xd663, gbc.sp());
        EXPECT(0xbb7c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbb7b));
        // 1B 0092
        gbc.setState(0xc319, 0xfae, 0x5c70, 0xb22f, 0x109f, 0x5fa4, 0x0, 0x1);
        gbc.writeMem(0xc319, { 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xfae, gbc.sp());
        EXPECT(0xc31a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc319));
        // 1B 0093
        gbc.setState(0xb0f7, 0x2b20, 0xcc20, 0xe5e1, 0x2c16, 0x492e, 0x1, 0x1);
        gbc.writeMem(0xb0f7, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x2b20, gbc.sp());
        EXPECT(0xb0f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb0f7));
        // 1B 0094
        gbc.setState(0xe9f6, 0x869e, 0x6d0, 0xabec, 0x1325, 0xecf1, 0x0, 0x0);
        gbc.writeMem(0xe9f6, { 0x1b });
        gbc.step();
        EXPECT(0x6, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xf1, gbc.l());
        EXPECT(0x869e, gbc.sp());
        EXPECT(0xe9f7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe9f6));
        // 1B 0095
        gbc.setState(0xaa89, 0xb83c, 0xa1e0, 0xf9c2, 0x8359, 0x31ec, 0x0, 0x0);
        gbc.writeMem(0xaa89, { 0x1b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xb83c, gbc.sp());
        EXPECT(0xaa8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaa89));
        // 1B 0096
        gbc.setState(0x6682, 0x8bbb, 0x8970, 0x99e7, 0x275, 0xce46, 0x1, 0x1);
        gbc.writeMem(0x6682, { 0x1b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x2, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x8bbb, gbc.sp());
        EXPECT(0x6683, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0097
        gbc.setState(0xcb89, 0xd21, 0x4f20, 0xf948, 0x5174, 0x5687, 0x1, 0x1);
        gbc.writeMem(0xcb89, { 0x1b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xd21, gbc.sp());
        EXPECT(0xcb8a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcb89));
        // 1B 0098
        gbc.setState(0x4b56, 0x3c2e, 0x73c0, 0x5cd9, 0xbf5, 0x45cc, 0x1, 0x1);
        gbc.writeMem(0x4b56, { 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x3c2e, gbc.sp());
        EXPECT(0x4b57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0099
        gbc.setState(0x30ab, 0x7c53, 0xc420, 0x9e76, 0x138, 0x3cab, 0x1, 0x1);
        gbc.writeMem(0x30ab, { 0x1b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x7c53, gbc.sp());
        EXPECT(0x30ac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 009A
        gbc.setState(0x8fd1, 0xcbcd, 0xd910, 0xb50e, 0x271f, 0x35a2, 0x1, 0x0);
        gbc.writeMem(0x8fd1, { 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xcbcd, gbc.sp());
        EXPECT(0x8fd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8fd1));
        // 1B 009B
        gbc.setState(0x95bd, 0x862c, 0xdfb0, 0x41ea, 0xe67b, 0xa48a, 0x1, 0x1);
        gbc.writeMem(0x95bd, { 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x862c, gbc.sp());
        EXPECT(0x95be, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x95bd));
        // 1B 009C
        gbc.setState(0xa9bb, 0x9de8, 0x56c0, 0x1134, 0x68e1, 0xd95c, 0x0, 0x1);
        gbc.writeMem(0xa9bb, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x9de8, gbc.sp());
        EXPECT(0xa9bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa9bb));
        // 1B 009D
        gbc.setState(0x5c8e, 0xd3d8, 0x3130, 0x6553, 0x3c56, 0x29e6, 0x0, 0x1);
        gbc.writeMem(0x5c8e, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x55, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xd3d8, gbc.sp());
        EXPECT(0x5c8f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 009E
        gbc.setState(0x690d, 0xc7be, 0x25c0, 0x6993, 0x32a9, 0x1950, 0x0, 0x1);
        gbc.writeMem(0x690d, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x50, gbc.l());
        EXPECT(0xc7be, gbc.sp());
        EXPECT(0x690e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 009F
        gbc.setState(0x4db2, 0x7f55, 0x1110, 0x1c15, 0x2c2f, 0xc4c9, 0x1, 0x1);
        gbc.writeMem(0x4db2, { 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x7f55, gbc.sp());
        EXPECT(0x4db3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00A0
        gbc.setState(0x426c, 0xb580, 0x4110, 0x6d19, 0xd9c2, 0xeb1e, 0x0, 0x1);
        gbc.writeMem(0x426c, { 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xb580, gbc.sp());
        EXPECT(0x426d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00A1
        gbc.setState(0x94d8, 0x85b0, 0x7bb0, 0xb543, 0xacca, 0xafd8, 0x0, 0x0);
        gbc.writeMem(0x94d8, { 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0xd8, gbc.l());
        EXPECT(0x85b0, gbc.sp());
        EXPECT(0x94d9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x94d8));
        // 1B 00A2
        gbc.setState(0x1cb9, 0x7f31, 0x83e0, 0xc8ef, 0xa9fa, 0x7ce2, 0x0, 0x0);
        gbc.writeMem(0x1cb9, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x7f31, gbc.sp());
        EXPECT(0x1cba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00A3
        gbc.setState(0x7aab, 0x1631, 0xf890, 0x6ef6, 0xaf8c, 0x3037, 0x1, 0x0);
        gbc.writeMem(0x7aab, { 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x1631, gbc.sp());
        EXPECT(0x7aac, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00A4
        gbc.setState(0x1f96, 0x17e8, 0xbc40, 0x47ae, 0xb549, 0x9571, 0x0, 0x1);
        gbc.writeMem(0x1f96, { 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x17e8, gbc.sp());
        EXPECT(0x1f97, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00A6
        gbc.setState(0x5340, 0x94e9, 0x8d00, 0x8630, 0xfa7d, 0xec4e, 0x1, 0x1);
        gbc.writeMem(0x5340, { 0x1b });
        gbc.step();
        EXPECT(0x8d, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x94e9, gbc.sp());
        EXPECT(0x5341, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00A7
        gbc.setState(0xce43, 0x59ee, 0x1650, 0x1fd1, 0x5d1e, 0x50cd, 0x1, 0x1);
        gbc.writeMem(0xce43, { 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x1f, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x59ee, gbc.sp());
        EXPECT(0xce44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xce43));
        // 1B 00A8
        gbc.setState(0xad42, 0xb0ef, 0xd8c0, 0xf112, 0xef42, 0x4f5b, 0x0, 0x1);
        gbc.writeMem(0xad42, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xb0ef, gbc.sp());
        EXPECT(0xad43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad42));
        // 1B 00A9
        gbc.setState(0x3cc7, 0xbb76, 0x60b0, 0x31cd, 0xf41e, 0x43c9, 0x0, 0x0);
        gbc.writeMem(0x3cc7, { 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xbb76, gbc.sp());
        EXPECT(0x3cc8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00AA
        gbc.setState(0xe61e, 0x155d, 0x4800, 0xff7b, 0x2731, 0xeb94, 0x0, 0x1);
        gbc.writeMem(0xe61e, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x155d, gbc.sp());
        EXPECT(0xe61f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe61e));
        // 1B 00AB
        gbc.setState(0x7bde, 0x2a46, 0x8580, 0x955a, 0x85e1, 0xfa5f, 0x1, 0x1);
        gbc.writeMem(0x7bde, { 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x85, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xfa, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x2a46, gbc.sp());
        EXPECT(0x7bdf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00AC
        gbc.setState(0x3613, 0xab65, 0xcac0, 0x2661, 0x309b, 0x9898, 0x1, 0x1);
        gbc.writeMem(0x3613, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x98, gbc.l());
        EXPECT(0xab65, gbc.sp());
        EXPECT(0x3614, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00AE
        gbc.setState(0xa0d4, 0x33f6, 0xec80, 0x5c1a, 0xedf6, 0x7765, 0x1, 0x0);
        gbc.writeMem(0xa0d4, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x33f6, gbc.sp());
        EXPECT(0xa0d5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa0d4));
        // 1B 00B0
        gbc.setState(0xd535, 0x9e71, 0x1100, 0xe3d2, 0xe4a1, 0x7454, 0x1, 0x0);
        gbc.writeMem(0xd535, { 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x54, gbc.l());
        EXPECT(0x9e71, gbc.sp());
        EXPECT(0xd536, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd535));
        // 1B 00B1
        gbc.setState(0xa855, 0x20d0, 0x5e90, 0xf416, 0xdf29, 0xee27, 0x1, 0x0);
        gbc.writeMem(0xa855, { 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0x20d0, gbc.sp());
        EXPECT(0xa856, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa855));
        // 1B 00B2
        gbc.setState(0xc375, 0x7d16, 0x2da0, 0x7f7, 0x66b0, 0x24ca, 0x1, 0x0);
        gbc.writeMem(0xc375, { 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x66, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0x7d16, gbc.sp());
        EXPECT(0xc376, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc375));
        // 1B 00B3
        gbc.setState(0xb680, 0xad4c, 0xd610, 0xa8ae, 0x6aa2, 0xf3b7, 0x1, 0x0);
        gbc.writeMem(0xb680, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0xad4c, gbc.sp());
        EXPECT(0xb681, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb680));
        // 1B 00B4
        gbc.setState(0x3040, 0x962, 0xd730, 0xd0b2, 0x642d, 0xda40, 0x0, 0x1);
        gbc.writeMem(0x3040, { 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x962, gbc.sp());
        EXPECT(0x3041, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00B5
        gbc.setState(0x5b3, 0x37c3, 0x6800, 0x8824, 0xfb13, 0xf5a, 0x0, 0x1);
        gbc.writeMem(0x5b3, { 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x37c3, gbc.sp());
        EXPECT(0x5b4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00B6
        gbc.setState(0x9cf7, 0xe97b, 0x3f40, 0xf538, 0x7a86, 0x33fe, 0x1, 0x0);
        gbc.writeMem(0x9cf7, { 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xe97b, gbc.sp());
        EXPECT(0x9cf8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9cf7));
        // 1B 00B7
        gbc.setState(0x7afd, 0xf357, 0x3680, 0x597, 0x5ffa, 0xbece, 0x0, 0x1);
        gbc.writeMem(0x7afd, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0x5f, gbc.d());
        EXPECT(0xf9, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0xf357, gbc.sp());
        EXPECT(0x7afe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00B8
        gbc.setState(0x3931, 0x676c, 0x4dd0, 0xe350, 0xbf7b, 0x952e, 0x1, 0x1);
        gbc.writeMem(0x3931, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x676c, gbc.sp());
        EXPECT(0x3932, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00B9
        gbc.setState(0x769d, 0x6254, 0xbf90, 0x3f95, 0x3ff8, 0xaa1b, 0x1, 0x1);
        gbc.writeMem(0x769d, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0x6254, gbc.sp());
        EXPECT(0x769e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00BA
        gbc.setState(0x7394, 0x9942, 0xa400, 0xb336, 0xc8c2, 0x7fed, 0x1, 0x0);
        gbc.writeMem(0x7394, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x9942, gbc.sp());
        EXPECT(0x7395, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00BB
        gbc.setState(0xbf81, 0xbcd, 0xacd0, 0x6983, 0x8d76, 0xe7b1, 0x1, 0x0);
        gbc.writeMem(0xbf81, { 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xbcd, gbc.sp());
        EXPECT(0xbf82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbf81));
        // 1B 00BC
        gbc.setState(0xaee, 0x5f83, 0xb940, 0xbae7, 0x5e73, 0xd432, 0x0, 0x0);
        gbc.writeMem(0xaee, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x5e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x5f83, gbc.sp());
        EXPECT(0xaef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00BD
        gbc.setState(0x4023, 0x4f33, 0xa000, 0xb071, 0xb9a9, 0x187f, 0x0, 0x1);
        gbc.writeMem(0x4023, { 0x1b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0xb0, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x4f33, gbc.sp());
        EXPECT(0x4024, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00BE
        gbc.setState(0x2a77, 0x8285, 0x5790, 0xd2a3, 0x5582, 0xf4d3, 0x1, 0x1);
        gbc.writeMem(0x2a77, { 0x1b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x8285, gbc.sp());
        EXPECT(0x2a78, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00BF
        gbc.setState(0x4456, 0xfeef, 0xa720, 0xc20d, 0x8a8a, 0x2076, 0x1, 0x1);
        gbc.writeMem(0x4456, { 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xfeef, gbc.sp());
        EXPECT(0x4457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00C0
        gbc.setState(0x81f7, 0xd7e0, 0xa560, 0x9b38, 0xf80f, 0x60c3, 0x1, 0x1);
        gbc.writeMem(0x81f7, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xd7e0, gbc.sp());
        EXPECT(0x81f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x81f7));
        // 1B 00C1
        gbc.setState(0x42da, 0x9443, 0x9a0, 0xaf5a, 0x42e, 0xfd43, 0x0, 0x0);
        gbc.writeMem(0x42da, { 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x9443, gbc.sp());
        EXPECT(0x42db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00C2
        gbc.setState(0xdcd8, 0xf686, 0x56f0, 0xbe92, 0xd6b4, 0x2fb0, 0x1, 0x0);
        gbc.writeMem(0xdcd8, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xf686, gbc.sp());
        EXPECT(0xdcd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdcd8));
        // 1B 00C3
        gbc.setState(0x16b2, 0x4dac, 0x9730, 0x5e77, 0x3f20, 0xc3e9, 0x1, 0x0);
        gbc.writeMem(0x16b2, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x4dac, gbc.sp());
        EXPECT(0x16b3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00C4
        gbc.setState(0x120c, 0x5411, 0x1fc0, 0xd771, 0xf80c, 0xeafd, 0x0, 0x1);
        gbc.writeMem(0x120c, { 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x5411, gbc.sp());
        EXPECT(0x120d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00C5
        gbc.setState(0x7fbe, 0xc521, 0xf2c0, 0x128, 0xb232, 0x445b, 0x1, 0x1);
        gbc.writeMem(0x7fbe, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xc521, gbc.sp());
        EXPECT(0x7fbf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00C6
        gbc.setState(0x263a, 0x8443, 0xdf10, 0xe901, 0xf082, 0xa316, 0x0, 0x1);
        gbc.writeMem(0x263a, { 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x8443, gbc.sp());
        EXPECT(0x263b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00C7
        gbc.setState(0x91cd, 0x5803, 0x9e40, 0x7312, 0x3833, 0x2e9e, 0x0, 0x0);
        gbc.writeMem(0x91cd, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x38, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x5803, gbc.sp());
        EXPECT(0x91ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x91cd));
        // 1B 00C9
        gbc.setState(0x5e97, 0x214b, 0xcd10, 0x2600, 0x3f9, 0x8126, 0x1, 0x1);
        gbc.writeMem(0x5e97, { 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x214b, gbc.sp());
        EXPECT(0x5e98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00CA
        gbc.setState(0x409a, 0xa458, 0x6470, 0x4f4d, 0xb366, 0xcfb5, 0x0, 0x1);
        gbc.writeMem(0x409a, { 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xa458, gbc.sp());
        EXPECT(0x409b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00CB
        gbc.setState(0xdd65, 0x4511, 0xaa10, 0xa6b2, 0xe90, 0x2359, 0x1, 0x0);
        gbc.writeMem(0xdd65, { 0x1b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x8f, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x4511, gbc.sp());
        EXPECT(0xdd66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdd65));
        // 1B 00CC
        gbc.setState(0xad84, 0x8695, 0x6360, 0xdc59, 0x6080, 0xaf45, 0x0, 0x0);
        gbc.writeMem(0xad84, { 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x8695, gbc.sp());
        EXPECT(0xad85, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad84));
        // 1B 00CD
        gbc.setState(0x3f45, 0x86ec, 0x43b0, 0x706a, 0x251a, 0xf3, 0x0, 0x0);
        gbc.writeMem(0x3f45, { 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x19, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x86ec, gbc.sp());
        EXPECT(0x3f46, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00CE
        gbc.setState(0x2982, 0x2005, 0xe2b0, 0x2f36, 0x6eb2, 0xac00, 0x0, 0x0);
        gbc.writeMem(0x2982, { 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x2005, gbc.sp());
        EXPECT(0x2983, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00CF
        gbc.setState(0xc740, 0x93ec, 0x230, 0x1d4c, 0xce79, 0x3984, 0x0, 0x0);
        gbc.writeMem(0xc740, { 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x93ec, gbc.sp());
        EXPECT(0xc741, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc740));
        // 1B 00D0
        gbc.setState(0x107e, 0xcf37, 0xd200, 0x9953, 0xfce4, 0xda, 0x0, 0x1);
        gbc.writeMem(0x107e, { 0x1b });
        gbc.step();
        EXPECT(0xd2, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xcf37, gbc.sp());
        EXPECT(0x107f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00D1
        gbc.setState(0x9b18, 0x283d, 0xe7d0, 0x5538, 0x3e88, 0xc2f2, 0x0, 0x1);
        gbc.writeMem(0x9b18, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x283d, gbc.sp());
        EXPECT(0x9b19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b18));
        // 1B 00D2
        gbc.setState(0xae4f, 0x8b3e, 0xfc0, 0xbebf, 0xc33e, 0x2d8a, 0x1, 0x0);
        gbc.writeMem(0xae4f, { 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x8b3e, gbc.sp());
        EXPECT(0xae50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xae4f));
        // 1B 00D3
        gbc.setState(0x6dbc, 0x95b8, 0xff50, 0xa1fd, 0xdb, 0x7c1e, 0x0, 0x1);
        gbc.writeMem(0x6dbc, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x95b8, gbc.sp());
        EXPECT(0x6dbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00D4
        gbc.setState(0x69fb, 0xa71b, 0x34b0, 0xa459, 0x19e6, 0x6f7e, 0x0, 0x1);
        gbc.writeMem(0x69fb, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0xa71b, gbc.sp());
        EXPECT(0x69fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00D5
        gbc.setState(0x1e66, 0xd1bd, 0x42f0, 0x9ac2, 0xd909, 0xfd, 0x1, 0x0);
        gbc.writeMem(0x1e66, { 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xd1bd, gbc.sp());
        EXPECT(0x1e67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00D6
        gbc.setState(0xc45d, 0x3f3a, 0x4760, 0x574f, 0x6151, 0xd0f0, 0x1, 0x1);
        gbc.writeMem(0xc45d, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x57, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3f3a, gbc.sp());
        EXPECT(0xc45e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc45d));
        // 1B 00D7
        gbc.setState(0x6afd, 0x29f6, 0x6240, 0xfe2c, 0x6e9, 0x244e, 0x1, 0x1);
        gbc.writeMem(0x6afd, { 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x29f6, gbc.sp());
        EXPECT(0x6afe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00D8
        gbc.setState(0xca2f, 0x2376, 0x4610, 0x1a6d, 0x5001, 0x3384, 0x0, 0x1);
        gbc.writeMem(0xca2f, { 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2376, gbc.sp());
        EXPECT(0xca30, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xca2f));
        // 1B 00D9
        gbc.setState(0xd48b, 0xe5e9, 0xad50, 0x1bf1, 0x71d0, 0x1920, 0x1, 0x0);
        gbc.writeMem(0xd48b, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xcf, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xe5e9, gbc.sp());
        EXPECT(0xd48c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd48b));
        // 1B 00DA
        gbc.setState(0xb661, 0x3c10, 0x81d0, 0xd170, 0x80c2, 0x412f, 0x0, 0x1);
        gbc.writeMem(0xb661, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0x3c10, gbc.sp());
        EXPECT(0xb662, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb661));
        // 1B 00DB
        gbc.setState(0xbd3, 0xfd71, 0xc390, 0x97cc, 0xc83a, 0x51b3, 0x0, 0x0);
        gbc.writeMem(0xbd3, { 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xfd71, gbc.sp());
        EXPECT(0xbd4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00DC
        gbc.setState(0x8bcd, 0x18e1, 0x470, 0xf975, 0x6459, 0x17cf, 0x1, 0x1);
        gbc.writeMem(0x8bcd, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x18e1, gbc.sp());
        EXPECT(0x8bce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8bcd));
        // 1B 00DD
        gbc.setState(0xc46, 0xdb45, 0x5c80, 0x6e82, 0x2dbe, 0x336a, 0x1, 0x0);
        gbc.writeMem(0xc46, { 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x33, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0xdb45, gbc.sp());
        EXPECT(0xc47, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00DE
        gbc.setState(0x5320, 0xf64a, 0xc480, 0x19bc, 0x65ea, 0x2b43, 0x0, 0x1);
        gbc.writeMem(0x5320, { 0x1b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xf64a, gbc.sp());
        EXPECT(0x5321, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00DF
        gbc.setState(0xea67, 0x730c, 0x6330, 0x360e, 0xc9b0, 0x1a4c, 0x1, 0x0);
        gbc.writeMem(0xea67, { 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x730c, gbc.sp());
        EXPECT(0xea68, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xea67));
        // 1B 00E0
        gbc.setState(0xc6de, 0x399d, 0x6500, 0xd64f, 0x2d45, 0x9987, 0x1, 0x1);
        gbc.writeMem(0xc6de, { 0x1b });
        gbc.step();
        EXPECT(0x65, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0x399d, gbc.sp());
        EXPECT(0xc6df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6de));
        // 1B 00E1
        gbc.setState(0xebf1, 0x1e4d, 0x14c0, 0xd32c, 0xaec1, 0xb33c, 0x1, 0x1);
        gbc.writeMem(0xebf1, { 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x1e4d, gbc.sp());
        EXPECT(0xebf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xebf1));
        // 1B 00E2
        gbc.setState(0xc271, 0xac32, 0x5750, 0x10f3, 0x8122, 0x675d, 0x1, 0x1);
        gbc.writeMem(0xc271, { 0x1b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xac32, gbc.sp());
        EXPECT(0xc272, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc271));
        // 1B 00E3
        gbc.setState(0x3939, 0xa434, 0xf460, 0x6ee7, 0x500b, 0xb599, 0x1, 0x1);
        gbc.writeMem(0x3939, { 0x1b });
        gbc.step();
        EXPECT(0xf4, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xa434, gbc.sp());
        EXPECT(0x393a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00E4
        gbc.setState(0x3c85, 0xc592, 0x36d0, 0x10b, 0x5c46, 0x5b3d, 0x1, 0x0);
        gbc.writeMem(0x3c85, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xc592, gbc.sp());
        EXPECT(0x3c86, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00E5
        gbc.setState(0x9e31, 0xd754, 0xb420, 0x2bd2, 0xbdef, 0xdabb, 0x0, 0x0);
        gbc.writeMem(0x9e31, { 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xd754, gbc.sp());
        EXPECT(0x9e32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9e31));
        // 1B 00E6
        gbc.setState(0xec91, 0xe5ed, 0x6290, 0x38bd, 0xaf46, 0xd8aa, 0x1, 0x0);
        gbc.writeMem(0xec91, { 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xe5ed, gbc.sp());
        EXPECT(0xec92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xec91));
        // 1B 00E8
        gbc.setState(0xcbcd, 0xd5d9, 0xed80, 0xfd57, 0xd67d, 0x7d20, 0x1, 0x0);
        gbc.writeMem(0xcbcd, { 0x1b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xfd, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0xd5d9, gbc.sp());
        EXPECT(0xcbce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcbcd));
        // 1B 00E9
        gbc.setState(0xb19c, 0xff02, 0xc810, 0xcbdf, 0xa8a2, 0xbef, 0x0, 0x0);
        gbc.writeMem(0xb19c, { 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xff02, gbc.sp());
        EXPECT(0xb19d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb19c));
        // 1B 00EA
        gbc.setState(0x234e, 0xc232, 0xcc60, 0xa844, 0x37d4, 0x1522, 0x1, 0x0);
        gbc.writeMem(0x234e, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xc232, gbc.sp());
        EXPECT(0x234f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00EB
        gbc.setState(0x14d5, 0x46e0, 0x2a0, 0x48a9, 0x2f9c, 0xda93, 0x0, 0x0);
        gbc.writeMem(0x14d5, { 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x46e0, gbc.sp());
        EXPECT(0x14d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00EC
        gbc.setState(0xc230, 0x46b2, 0x8c40, 0x4eed, 0x5077, 0x30e4, 0x1, 0x0);
        gbc.writeMem(0xc230, { 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0x46b2, gbc.sp());
        EXPECT(0xc231, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc230));
        // 1B 00ED
        gbc.setState(0xbe84, 0xf61b, 0x36a0, 0xc258, 0x3bed, 0x85ae, 0x1, 0x0);
        gbc.writeMem(0xbe84, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xf61b, gbc.sp());
        EXPECT(0xbe85, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbe84));
        // 1B 00EE
        gbc.setState(0x6285, 0xa21c, 0x27c0, 0x25fd, 0x489e, 0x2e92, 0x1, 0x1);
        gbc.writeMem(0x6285, { 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xa21c, gbc.sp());
        EXPECT(0x6286, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00EF
        gbc.setState(0x92ef, 0x29e, 0xcd60, 0xfe8c, 0xa6f7, 0xcd2, 0x1, 0x0);
        gbc.writeMem(0x92ef, { 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x29e, gbc.sp());
        EXPECT(0x92f0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x92ef));
        // 1B 00F0
        gbc.setState(0xb1, 0x753c, 0xc090, 0xe29d, 0xdc24, 0x724d, 0x0, 0x0);
        gbc.writeMem(0xb1, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x753c, gbc.sp());
        EXPECT(0xb2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00F1
        gbc.setState(0xe594, 0xc000, 0x2870, 0x1a13, 0x2d20, 0xba62, 0x0, 0x1);
        gbc.writeMem(0xe594, { 0x1b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xc000, gbc.sp());
        EXPECT(0xe595, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe594));
        // 1B 00F2
        gbc.setState(0xb631, 0xebb8, 0x3220, 0xf2bd, 0xffd4, 0x9822, 0x1, 0x0);
        gbc.writeMem(0xb631, { 0x1b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0xebb8, gbc.sp());
        EXPECT(0xb632, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb631));
        // 1B 00F3
        gbc.setState(0x378c, 0x7d75, 0x20c0, 0x9704, 0x16b5, 0xe87f, 0x1, 0x1);
        gbc.writeMem(0x378c, { 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xb4, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x7d75, gbc.sp());
        EXPECT(0x378d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00F4
        gbc.setState(0xacf, 0x988e, 0xb910, 0x5d27, 0x9a7d, 0x9814, 0x0, 0x1);
        gbc.writeMem(0xacf, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x14, gbc.l());
        EXPECT(0x988e, gbc.sp());
        EXPECT(0xad0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00F5
        gbc.setState(0x9aa5, 0x9cf7, 0xa510, 0xba43, 0xbf8a, 0xd4b9, 0x0, 0x1);
        gbc.writeMem(0x9aa5, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x9cf7, gbc.sp());
        EXPECT(0x9aa6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9aa5));
        // 1B 00F6
        gbc.setState(0xcba8, 0x8542, 0x16f0, 0xde37, 0x973e, 0x30c, 0x0, 0x0);
        gbc.writeMem(0xcba8, { 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x97, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x8542, gbc.sp());
        EXPECT(0xcba9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcba8));
        // 1B 00F7
        gbc.setState(0xede6, 0x6946, 0x1980, 0x5610, 0xbffe, 0x9cac, 0x1, 0x0);
        gbc.writeMem(0xede6, { 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x6946, gbc.sp());
        EXPECT(0xede7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xede6));
        // 1B 00F8
        gbc.setState(0x4fc8, 0x64ca, 0xff10, 0xdcbd, 0xcf0a, 0xbcef, 0x1, 0x0);
        gbc.writeMem(0x4fc8, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x64ca, gbc.sp());
        EXPECT(0x4fc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00F9
        gbc.setState(0x64ce, 0xa8d2, 0x1390, 0xd67a, 0xf027, 0xa3c9, 0x0, 0x0);
        gbc.writeMem(0x64ce, { 0x1b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xa8d2, gbc.sp());
        EXPECT(0x64cf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00FA
        gbc.setState(0xb79e, 0x1940, 0x3ee0, 0x7cef, 0xd19, 0x31e6, 0x1, 0x0);
        gbc.writeMem(0xb79e, { 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x1940, gbc.sp());
        EXPECT(0xb79f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb79e));
        // 1B 00FC
        gbc.setState(0xb15a, 0xe6c8, 0x9bb0, 0xc217, 0x3100, 0xe181, 0x0, 0x1);
        gbc.writeMem(0xb15a, { 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xe6c8, gbc.sp());
        EXPECT(0xb15b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb15a));
        // 1B 00FD
        gbc.setState(0x76ad, 0x89f0, 0x2e50, 0x6b2b, 0x790e, 0xbb2b, 0x0, 0x0);
        gbc.writeMem(0x76ad, { 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0x89f0, gbc.sp());
        EXPECT(0x76ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 00FE
        gbc.setState(0x7ecd, 0xd472, 0x34e0, 0xb4c7, 0x46e2, 0xac64, 0x1, 0x0);
        gbc.writeMem(0x7ecd, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xd472, gbc.sp());
        EXPECT(0x7ece, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 00FF
        gbc.setState(0x5955, 0x9c13, 0x6150, 0xdbd9, 0x611d, 0x28d5, 0x1, 0x0);
        gbc.writeMem(0x5955, { 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x9c13, gbc.sp());
        EXPECT(0x5956, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0100
        gbc.setState(0x8612, 0x3dc4, 0xb580, 0x852b, 0x607a, 0xb5b7, 0x1, 0x1);
        gbc.writeMem(0x8612, { 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x3dc4, gbc.sp());
        EXPECT(0x8613, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8612));
        // 1B 0101
        gbc.setState(0xa5, 0x6ab7, 0x3590, 0x5ede, 0x1dec, 0x7600, 0x1, 0x1);
        gbc.writeMem(0xa5, { 0x1b });
        gbc.step();
        EXPECT(0x35, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x6ab7, gbc.sp());
        EXPECT(0xa6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0102
        gbc.setState(0x4a8c, 0x7d95, 0xf620, 0xd24, 0xc073, 0x747, 0x0, 0x1);
        gbc.writeMem(0x4a8c, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xc0, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x7d95, gbc.sp());
        EXPECT(0x4a8d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0103
        gbc.setState(0x97e7, 0xdad7, 0xad90, 0xc64d, 0xaafd, 0x90ab, 0x1, 0x1);
        gbc.writeMem(0x97e7, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xdad7, gbc.sp());
        EXPECT(0x97e8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x97e7));
        // 1B 0104
        gbc.setState(0xaf37, 0xfe83, 0x2e30, 0xc9a5, 0xa758, 0x73ee, 0x1, 0x1);
        gbc.writeMem(0xaf37, { 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xfe83, gbc.sp());
        EXPECT(0xaf38, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaf37));
        // 1B 0105
        gbc.setState(0x608e, 0xa791, 0x4b80, 0xae59, 0x76ce, 0x21a6, 0x1, 0x1);
        gbc.writeMem(0x608e, { 0x1b });
        gbc.step();
        EXPECT(0x4b, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0xa791, gbc.sp());
        EXPECT(0x608f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0106
        gbc.setState(0x7295, 0x3f69, 0xea50, 0xcb75, 0x2600, 0xa1fc, 0x0, 0x1);
        gbc.writeMem(0x7295, { 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0xa1, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x3f69, gbc.sp());
        EXPECT(0x7296, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0107
        gbc.setState(0xe77f, 0x5a8a, 0x67b0, 0xe8bd, 0x39f1, 0x2116, 0x0, 0x1);
        gbc.writeMem(0xe77f, { 0x1b });
        gbc.step();
        EXPECT(0x67, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x39, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x21, gbc.h());
        EXPECT(0x16, gbc.l());
        EXPECT(0x5a8a, gbc.sp());
        EXPECT(0xe780, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe77f));
        // 1B 0108
        gbc.setState(0x4a28, 0x8755, 0x34b0, 0x1a8b, 0x6973, 0xb65a, 0x1, 0x0);
        gbc.writeMem(0x4a28, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x8b, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x8755, gbc.sp());
        EXPECT(0x4a29, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0109
        gbc.setState(0xcb72, 0xe030, 0x4100, 0x1c0, 0x78eb, 0x5cb2, 0x0, 0x0);
        gbc.writeMem(0xcb72, { 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xe030, gbc.sp());
        EXPECT(0xcb73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcb72));
        // 1B 010A
        gbc.setState(0x4d2f, 0xce39, 0x4950, 0xb5e9, 0x7a28, 0xbad6, 0x1, 0x1);
        gbc.writeMem(0x4d2f, { 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xce39, gbc.sp());
        EXPECT(0x4d30, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 010B
        gbc.setState(0xa72f, 0x3fd2, 0xfd00, 0xbf08, 0x720e, 0x2e0, 0x0, 0x1);
        gbc.writeMem(0xa72f, { 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x3fd2, gbc.sp());
        EXPECT(0xa730, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa72f));
        // 1B 010C
        gbc.setState(0xde7, 0x4130, 0xea0, 0xbcd3, 0x7e32, 0xa077, 0x0, 0x1);
        gbc.writeMem(0xde7, { 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x4130, gbc.sp());
        EXPECT(0xde8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 010D
        gbc.setState(0x68ac, 0x4155, 0xd8b0, 0x21a7, 0x9a41, 0x1c38, 0x0, 0x1);
        gbc.writeMem(0x68ac, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0x4155, gbc.sp());
        EXPECT(0x68ad, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 010E
        gbc.setState(0x8bb2, 0x29ca, 0xfba0, 0xc62f, 0x4aee, 0xb8a8, 0x0, 0x1);
        gbc.writeMem(0x8bb2, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xc6, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x29ca, gbc.sp());
        EXPECT(0x8bb3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8bb2));
        // 1B 010F
        gbc.setState(0xbc42, 0xe041, 0x9f50, 0x2347, 0x8715, 0x6242, 0x0, 0x0);
        gbc.writeMem(0xbc42, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xe041, gbc.sp());
        EXPECT(0xbc43, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbc42));
        // 1B 0110
        gbc.setState(0x8b20, 0x962d, 0x3b00, 0x94c3, 0x1999, 0x8161, 0x1, 0x1);
        gbc.writeMem(0x8b20, { 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x962d, gbc.sp());
        EXPECT(0x8b21, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8b20));
        // 1B 0111
        gbc.setState(0x6a06, 0x2338, 0x5cb0, 0xcef4, 0x78e0, 0x466b, 0x1, 0x1);
        gbc.writeMem(0x6a06, { 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xdf, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x2338, gbc.sp());
        EXPECT(0x6a07, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0112
        gbc.setState(0x1c6d, 0xc2e6, 0xea50, 0x4837, 0xd446, 0x79bb, 0x1, 0x0);
        gbc.writeMem(0x1c6d, { 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xbb, gbc.l());
        EXPECT(0xc2e6, gbc.sp());
        EXPECT(0x1c6e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0113
        gbc.setState(0xc09c, 0x3163, 0xe800, 0x1721, 0xdfd9, 0xb89a, 0x0, 0x1);
        gbc.writeMem(0xc09c, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x3163, gbc.sp());
        EXPECT(0xc09d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc09c));
        // 1B 0114
        gbc.setState(0x2ac0, 0xed4b, 0x94b0, 0xceff, 0xca2c, 0xf4ac, 0x0, 0x0);
        gbc.writeMem(0x2ac0, { 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xed4b, gbc.sp());
        EXPECT(0x2ac1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0115
        gbc.setState(0x5850, 0xb10b, 0xb920, 0xf126, 0x7e00, 0x50a3, 0x1, 0x0);
        gbc.writeMem(0x5850, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x7d, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0xb10b, gbc.sp());
        EXPECT(0x5851, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0116
        gbc.setState(0x6f9d, 0xfe8, 0x2c00, 0x8992, 0xa20b, 0x109b, 0x0, 0x0);
        gbc.writeMem(0x6f9d, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0xfe8, gbc.sp());
        EXPECT(0x6f9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0117
        gbc.setState(0x8c2b, 0x9a63, 0xe690, 0xc968, 0x2186, 0x1101, 0x0, 0x1);
        gbc.writeMem(0x8c2b, { 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x1, gbc.l());
        EXPECT(0x9a63, gbc.sp());
        EXPECT(0x8c2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8c2b));
        // 1B 0118
        gbc.setState(0x7672, 0xc7f, 0xed30, 0xe518, 0x446c, 0x1dfa, 0x0, 0x0);
        gbc.writeMem(0x7672, { 0x1b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xc7f, gbc.sp());
        EXPECT(0x7673, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0119
        gbc.setState(0xd01c, 0xa57f, 0xfb0, 0xc47, 0x5c86, 0x842c, 0x0, 0x1);
        gbc.writeMem(0xd01c, { 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xa57f, gbc.sp());
        EXPECT(0xd01d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd01c));
        // 1B 011A
        gbc.setState(0xe69c, 0xe86a, 0xe9f0, 0xd886, 0x3b9f, 0x492c, 0x0, 0x0);
        gbc.writeMem(0xe69c, { 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x86, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0xe86a, gbc.sp());
        EXPECT(0xe69d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe69c));
        // 1B 011B
        gbc.setState(0xe642, 0x18f0, 0x4570, 0xd005, 0x81e8, 0xa58b, 0x1, 0x1);
        gbc.writeMem(0xe642, { 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xa5, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x18f0, gbc.sp());
        EXPECT(0xe643, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe642));
        // 1B 011C
        gbc.setState(0xb664, 0xaa1e, 0xc720, 0xe5f6, 0xa96a, 0x9800, 0x0, 0x1);
        gbc.writeMem(0xb664, { 0x1b });
        gbc.step();
        EXPECT(0xc7, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x69, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xaa1e, gbc.sp());
        EXPECT(0xb665, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb664));
        // 1B 011D
        gbc.setState(0x9aed, 0x6c81, 0x7020, 0x9785, 0x6d2, 0xc5db, 0x1, 0x0);
        gbc.writeMem(0x9aed, { 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x6c81, gbc.sp());
        EXPECT(0x9aee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9aed));
        // 1B 011E
        gbc.setState(0x4cc, 0x901e, 0x37d0, 0x8ac7, 0xb993, 0x2e95, 0x0, 0x0);
        gbc.writeMem(0x4cc, { 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0x901e, gbc.sp());
        EXPECT(0x4cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 011F
        gbc.setState(0x5be, 0x8ce6, 0xc190, 0x7233, 0x4cb8, 0x8aaa, 0x0, 0x1);
        gbc.writeMem(0x5be, { 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0x8ce6, gbc.sp());
        EXPECT(0x5bf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0120
        gbc.setState(0x43a9, 0xf688, 0x2cf0, 0xc4cb, 0x7e73, 0x2ba7, 0x0, 0x0);
        gbc.writeMem(0x43a9, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xc4, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0xf688, gbc.sp());
        EXPECT(0x43aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0121
        gbc.setState(0x1f75, 0x270a, 0xa780, 0x4981, 0x4e76, 0x4607, 0x0, 0x1);
        gbc.writeMem(0x1f75, { 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x270a, gbc.sp());
        EXPECT(0x1f76, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0122
        gbc.setState(0x4a97, 0xb61a, 0x9ff0, 0xc5e1, 0x5233, 0xdc33, 0x0, 0x0);
        gbc.writeMem(0x4a97, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0xb61a, gbc.sp());
        EXPECT(0x4a98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0123
        gbc.setState(0x987d, 0x964a, 0xd440, 0x2ba2, 0xc8a2, 0x2afc, 0x1, 0x0);
        gbc.writeMem(0x987d, { 0x1b });
        gbc.step();
        EXPECT(0xd4, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0xa1, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0x964a, gbc.sp());
        EXPECT(0x987e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x987d));
        // 1B 0124
        gbc.setState(0x84b6, 0x89e2, 0x30d0, 0x2d72, 0x42e3, 0x8f00, 0x1, 0x1);
        gbc.writeMem(0x84b6, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xe2, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x89e2, gbc.sp());
        EXPECT(0x84b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x84b6));
        // 1B 0125
        gbc.setState(0xb3d1, 0x8fd0, 0x1320, 0x547a, 0x87d6, 0xf0c8, 0x0, 0x1);
        gbc.writeMem(0xb3d1, { 0x1b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xf0, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0x8fd0, gbc.sp());
        EXPECT(0xb3d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb3d1));
        // 1B 0126
        gbc.setState(0x1dbd, 0x9711, 0xf50, 0x400c, 0xc2ef, 0x6d4d, 0x1, 0x0);
        gbc.writeMem(0x1dbd, { 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0xc, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x9711, gbc.sp());
        EXPECT(0x1dbe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0127
        gbc.setState(0x872f, 0xd210, 0xbf60, 0xb8a, 0x4942, 0xd5da, 0x0, 0x1);
        gbc.writeMem(0x872f, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xd210, gbc.sp());
        EXPECT(0x8730, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x872f));
        // 1B 0128
        gbc.setState(0x2ed2, 0x3d45, 0x2580, 0xd387, 0x658a, 0xd497, 0x0, 0x1);
        gbc.writeMem(0x2ed2, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0x3d45, gbc.sp());
        EXPECT(0x2ed3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 012A
        gbc.setState(0x8f43, 0x358c, 0x3ea0, 0x3e4b, 0xda4d, 0x3da1, 0x1, 0x1);
        gbc.writeMem(0x8f43, { 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x358c, gbc.sp());
        EXPECT(0x8f44, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8f43));
        // 1B 012B
        gbc.setState(0x6979, 0x54dc, 0x69d0, 0x6bbc, 0x7b20, 0xf2ce, 0x1, 0x1);
        gbc.writeMem(0x6979, { 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x54dc, gbc.sp());
        EXPECT(0x697a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 012C
        gbc.setState(0x8608, 0x6862, 0x83c0, 0x9dbc, 0x81f6, 0x2939, 0x0, 0x0);
        gbc.writeMem(0x8608, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x6862, gbc.sp());
        EXPECT(0x8609, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8608));
        // 1B 012D
        gbc.setState(0x1a8d, 0xae91, 0xaea0, 0x627c, 0x536, 0x54ae, 0x1, 0x0);
        gbc.writeMem(0x1a8d, { 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xae91, gbc.sp());
        EXPECT(0x1a8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 012E
        gbc.setState(0x49da, 0xebe9, 0x1c50, 0xa18c, 0x784a, 0xcd86, 0x0, 0x1);
        gbc.writeMem(0x49da, { 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xebe9, gbc.sp());
        EXPECT(0x49db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 012F
        gbc.setState(0x74c8, 0xa03e, 0xb690, 0x6e75, 0x78c2, 0x2dd1, 0x0, 0x1);
        gbc.writeMem(0x74c8, { 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x78, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xa03e, gbc.sp());
        EXPECT(0x74c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0130
        gbc.setState(0xe1f4, 0x21f1, 0xb6f0, 0xfca5, 0xca15, 0x46c4, 0x0, 0x0);
        gbc.writeMem(0xe1f4, { 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x21f1, gbc.sp());
        EXPECT(0xe1f5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe1f4));
        // 1B 0131
        gbc.setState(0xe2b6, 0xa751, 0xb30, 0x62f5, 0x450d, 0x1ab9, 0x0, 0x1);
        gbc.writeMem(0xe2b6, { 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xf5, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0xa751, gbc.sp());
        EXPECT(0xe2b7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe2b6));
        // 1B 0132
        gbc.setState(0xba78, 0x850d, 0x9d20, 0x98a1, 0xa51f, 0x500, 0x1, 0x1);
        gbc.writeMem(0xba78, { 0x1b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x98, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x850d, gbc.sp());
        EXPECT(0xba79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xba78));
        // 1B 0133
        gbc.setState(0x5ddf, 0x9525, 0xa490, 0x7a3, 0xa26b, 0xdba1, 0x0, 0x1);
        gbc.writeMem(0x5ddf, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xdb, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x9525, gbc.sp());
        EXPECT(0x5de0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0134
        gbc.setState(0xaccd, 0x4afe, 0x7ae0, 0x74e7, 0xb1bb, 0x3d00, 0x1, 0x1);
        gbc.writeMem(0xaccd, { 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x4afe, gbc.sp());
        EXPECT(0xacce, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaccd));
        // 1B 0135
        gbc.setState(0x7279, 0x6b38, 0x4640, 0x41c9, 0xff31, 0xbeb4, 0x0, 0x0);
        gbc.writeMem(0x7279, { 0x1b });
        gbc.step();
        EXPECT(0x46, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xbe, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x6b38, gbc.sp());
        EXPECT(0x727a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0136
        gbc.setState(0xb1e5, 0xda2d, 0x7ec0, 0x6fac, 0xd484, 0xc3a0, 0x0, 0x0);
        gbc.writeMem(0xb1e5, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x83, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0xda2d, gbc.sp());
        EXPECT(0xb1e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb1e5));
        // 1B 0137
        gbc.setState(0xeccc, 0xa845, 0x8900, 0x7015, 0x51d6, 0xcc4a, 0x0, 0x0);
        gbc.writeMem(0xeccc, { 0x1b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x4a, gbc.l());
        EXPECT(0xa845, gbc.sp());
        EXPECT(0xeccd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xeccc));
        // 1B 0138
        gbc.setState(0x526, 0xd1b9, 0x4f0, 0x97a7, 0xb1bf, 0x1f0b, 0x1, 0x1);
        gbc.writeMem(0x526, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xd1b9, gbc.sp());
        EXPECT(0x527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0139
        gbc.setState(0x8757, 0x52c8, 0xfd90, 0xea56, 0x429a, 0x8d4, 0x0, 0x1);
        gbc.writeMem(0x8757, { 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0xd4, gbc.l());
        EXPECT(0x52c8, gbc.sp());
        EXPECT(0x8758, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8757));
        // 1B 013A
        gbc.setState(0x777e, 0x9932, 0x9750, 0xcf7c, 0xc361, 0xf41e, 0x0, 0x0);
        gbc.writeMem(0x777e, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x9932, gbc.sp());
        EXPECT(0x777f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 013B
        gbc.setState(0xd23a, 0xede9, 0x9fb0, 0xa71a, 0x7d7, 0x8cbf, 0x0, 0x1);
        gbc.writeMem(0xd23a, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xd6, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0xede9, gbc.sp());
        EXPECT(0xd23b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd23a));
        // 1B 013C
        gbc.setState(0x9a0d, 0x23bc, 0xba40, 0x1204, 0xa5c1, 0x9186, 0x0, 0x0);
        gbc.writeMem(0x9a0d, { 0x1b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x23bc, gbc.sp());
        EXPECT(0x9a0e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9a0d));
        // 1B 013D
        gbc.setState(0x6c56, 0x6d83, 0xcaf0, 0x3c16, 0x1c03, 0x2e08, 0x0, 0x1);
        gbc.writeMem(0x6c56, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x6d83, gbc.sp());
        EXPECT(0x6c57, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 013E
        gbc.setState(0xeb92, 0xc59b, 0xfef0, 0x4b9d, 0x57a3, 0xa746, 0x0, 0x0);
        gbc.writeMem(0xeb92, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc59b, gbc.sp());
        EXPECT(0xeb93, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xeb92));
        // 1B 013F
        gbc.setState(0x373e, 0xc0ad, 0x43b0, 0x5284, 0x3fab, 0xce3, 0x0, 0x0);
        gbc.writeMem(0x373e, { 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xc0ad, gbc.sp());
        EXPECT(0x373f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0140
        gbc.setState(0x490f, 0xcc0, 0x9c10, 0xf7d8, 0xca2d, 0x6d06, 0x1, 0x1);
        gbc.writeMem(0x490f, { 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xd8, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0x6d, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0xcc0, gbc.sp());
        EXPECT(0x4910, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0141
        gbc.setState(0x36d, 0xe374, 0x3740, 0xdc01, 0x4fb9, 0x4d87, 0x1, 0x1);
        gbc.writeMem(0x36d, { 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0xdc, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x87, gbc.l());
        EXPECT(0xe374, gbc.sp());
        EXPECT(0x36e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0142
        gbc.setState(0x1000, 0xa6b1, 0x68a0, 0x5614, 0xe592, 0x26df, 0x0, 0x1);
        gbc.writeMem(0x1000, { 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x91, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0xa6b1, gbc.sp());
        EXPECT(0x1001, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0143
        gbc.setState(0xe638, 0x4589, 0x5be0, 0x79b4, 0xfeee, 0x41e0, 0x0, 0x0);
        gbc.writeMem(0xe638, { 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x4589, gbc.sp());
        EXPECT(0xe639, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe638));
        // 1B 0144
        gbc.setState(0x444f, 0xc678, 0x9f0, 0x7d2, 0x70ae, 0xadf4, 0x1, 0x1);
        gbc.writeMem(0x444f, { 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xc678, gbc.sp());
        EXPECT(0x4450, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0145
        gbc.setState(0x708e, 0xf8f9, 0xf830, 0x36e7, 0x33c3, 0x988, 0x1, 0x0);
        gbc.writeMem(0x708e, { 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xf8f9, gbc.sp());
        EXPECT(0x708f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0146
        gbc.setState(0x1357, 0xadf0, 0x2380, 0xa410, 0xa44d, 0xd1d7, 0x0, 0x0);
        gbc.writeMem(0x1357, { 0x1b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xadf0, gbc.sp());
        EXPECT(0x1358, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0148
        gbc.setState(0x7486, 0x5605, 0xa0, 0x6258, 0xe33d, 0x1404, 0x1, 0x1);
        gbc.writeMem(0x7486, { 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x5605, gbc.sp());
        EXPECT(0x7487, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0149
        gbc.setState(0xb123, 0x80f9, 0xbee0, 0x31b9, 0x9259, 0x8eed, 0x0, 0x0);
        gbc.writeMem(0xb123, { 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0x80f9, gbc.sp());
        EXPECT(0xb124, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb123));
        // 1B 014A
        gbc.setState(0x95fd, 0x341c, 0x21e0, 0x752e, 0xc3fb, 0x9542, 0x1, 0x1);
        gbc.writeMem(0x95fd, { 0x1b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x75, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xc3, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x341c, gbc.sp());
        EXPECT(0x95fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x95fd));
        // 1B 014B
        gbc.setState(0x95e0, 0x585a, 0xb560, 0xb944, 0x1521, 0x96db, 0x0, 0x0);
        gbc.writeMem(0x95e0, { 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0x585a, gbc.sp());
        EXPECT(0x95e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x95e0));
        // 1B 014C
        gbc.setState(0xbb, 0x2656, 0xa280, 0x28, 0xbe5, 0xac77, 0x0, 0x0);
        gbc.writeMem(0xbb, { 0x1b });
        gbc.step();
        EXPECT(0xa2, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0x28, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xe4, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0x2656, gbc.sp());
        EXPECT(0xbc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 014D
        gbc.setState(0x2d73, 0xec3b, 0x1240, 0x8cd3, 0x696, 0x1dc4, 0x1, 0x1);
        gbc.writeMem(0x2d73, { 0x1b });
        gbc.step();
        EXPECT(0x12, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xec3b, gbc.sp());
        EXPECT(0x2d74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 014E
        gbc.setState(0x85a9, 0x761f, 0x6950, 0x726d, 0x9e24, 0x8910, 0x0, 0x1);
        gbc.writeMem(0x85a9, { 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x761f, gbc.sp());
        EXPECT(0x85aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x85a9));
        // 1B 014F
        gbc.setState(0x12f1, 0x1a3a, 0x2750, 0xd1f0, 0x59ae, 0xda32, 0x0, 0x1);
        gbc.writeMem(0x12f1, { 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0xf0, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x32, gbc.l());
        EXPECT(0x1a3a, gbc.sp());
        EXPECT(0x12f2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0150
        gbc.setState(0x572a, 0x155c, 0x6240, 0x4f6a, 0x3f8f, 0xbacf, 0x1, 0x0);
        gbc.writeMem(0x572a, { 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x3f, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x155c, gbc.sp());
        EXPECT(0x572b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0151
        gbc.setState(0xd7da, 0x27dc, 0xaf60, 0x97ea, 0x13dd, 0x6185, 0x1, 0x1);
        gbc.writeMem(0xd7da, { 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x27dc, gbc.sp());
        EXPECT(0xd7db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd7da));
        // 1B 0152
        gbc.setState(0x9f44, 0xc27, 0xa660, 0xde22, 0x3003, 0x5aea, 0x1, 0x0);
        gbc.writeMem(0x9f44, { 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0xc27, gbc.sp());
        EXPECT(0x9f45, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9f44));
        // 1B 0153
        gbc.setState(0xec56, 0x8ef5, 0x7dd0, 0x7ebd, 0xe036, 0x84e5, 0x1, 0x0);
        gbc.writeMem(0xec56, { 0x1b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x7e, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x8ef5, gbc.sp());
        EXPECT(0xec57, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xec56));
        // 1B 0154
        gbc.setState(0x8691, 0x6a11, 0xf6c0, 0x1e4, 0x9ae8, 0x225a, 0x0, 0x1);
        gbc.writeMem(0x8691, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x1, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x6a11, gbc.sp());
        EXPECT(0x8692, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8691));
        // 1B 0155
        gbc.setState(0x5cc2, 0x748a, 0xc520, 0x78fe, 0x3a9f, 0x8f6e, 0x1, 0x0);
        gbc.writeMem(0x5cc2, { 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0x6e, gbc.l());
        EXPECT(0x748a, gbc.sp());
        EXPECT(0x5cc3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0156
        gbc.setState(0xdba1, 0x38a7, 0xc30, 0xe2de, 0x2e02, 0x1b02, 0x1, 0x0);
        gbc.writeMem(0xdba1, { 0x1b });
        gbc.step();
        EXPECT(0xc, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0x38a7, gbc.sp());
        EXPECT(0xdba2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdba1));
        // 1B 0157
        gbc.setState(0xee4a, 0xb74e, 0x5d50, 0x859b, 0x901e, 0x3483, 0x1, 0x1);
        gbc.writeMem(0xee4a, { 0x1b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0xb74e, gbc.sp());
        EXPECT(0xee4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xee4a));
        // 1B 0158
        gbc.setState(0xc1bd, 0xb3c, 0x7b90, 0x82b5, 0x998, 0x5c03, 0x0, 0x1);
        gbc.writeMem(0xc1bd, { 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x9, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x5c, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0xb3c, gbc.sp());
        EXPECT(0xc1be, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc1bd));
        // 1B 0159
        gbc.setState(0x7f35, 0xb5bf, 0x7820, 0x59ce, 0x8d0e, 0xb50a, 0x1, 0x0);
        gbc.writeMem(0x7f35, { 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0xb5bf, gbc.sp());
        EXPECT(0x7f36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 015A
        gbc.setState(0xb87f, 0x3d70, 0xe380, 0xa34b, 0xfd17, 0xa485, 0x0, 0x1);
        gbc.writeMem(0xb87f, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x4b, gbc.c());
        EXPECT(0xfd, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x3d70, gbc.sp());
        EXPECT(0xb880, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb87f));
        // 1B 015B
        gbc.setState(0x8205, 0x3669, 0x7740, 0xcc3e, 0xd45e, 0x4ebe, 0x1, 0x1);
        gbc.writeMem(0x8205, { 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x3e, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x3669, gbc.sp());
        EXPECT(0x8206, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8205));
        // 1B 015C
        gbc.setState(0x9cba, 0x30ae, 0x7930, 0xb421, 0xb59e, 0xaa9, 0x0, 0x1);
        gbc.writeMem(0x9cba, { 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x9d, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x30ae, gbc.sp());
        EXPECT(0x9cbb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9cba));
        // 1B 015D
        gbc.setState(0x5e5, 0x2a1e, 0x9560, 0x5cbc, 0x5453, 0x109f, 0x1, 0x0);
        gbc.writeMem(0x5e5, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x5c, gbc.b());
        EXPECT(0xbc, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x2a1e, gbc.sp());
        EXPECT(0x5e6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 015E
        gbc.setState(0xda4a, 0xf998, 0xfee0, 0x35cb, 0x1866, 0x8a6b, 0x0, 0x1);
        gbc.writeMem(0xda4a, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0xf998, gbc.sp());
        EXPECT(0xda4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xda4a));
        // 1B 015F
        gbc.setState(0xc231, 0xe32a, 0xc010, 0x6539, 0xd829, 0x5dc5, 0x0, 0x1);
        gbc.writeMem(0xc231, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x65, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xe32a, gbc.sp());
        EXPECT(0xc232, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc231));
        // 1B 0160
        gbc.setState(0x4e89, 0xcaac, 0x4d70, 0xaff1, 0x9874, 0x2cd5, 0x0, 0x0);
        gbc.writeMem(0x4e89, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xcaac, gbc.sp());
        EXPECT(0x4e8a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0161
        gbc.setState(0xb492, 0x2ce1, 0x1630, 0xb77f, 0xa37a, 0x8e43, 0x0, 0x1);
        gbc.writeMem(0xb492, { 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0x2ce1, gbc.sp());
        EXPECT(0xb493, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb492));
        // 1B 0162
        gbc.setState(0x772b, 0x1660, 0x8520, 0x81cb, 0xce3c, 0xcddd, 0x1, 0x0);
        gbc.writeMem(0x772b, { 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x1660, gbc.sp());
        EXPECT(0x772c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0163
        gbc.setState(0xbbd1, 0xe523, 0xb010, 0x60b0, 0x703, 0x9962, 0x1, 0x1);
        gbc.writeMem(0xbbd1, { 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0xe523, gbc.sp());
        EXPECT(0xbbd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbbd1));
        // 1B 0164
        gbc.setState(0xb218, 0x87b3, 0x41e0, 0x3976, 0x1979, 0x19af, 0x1, 0x1);
        gbc.writeMem(0xb218, { 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x39, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x78, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x87b3, gbc.sp());
        EXPECT(0xb219, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb218));
        // 1B 0165
        gbc.setState(0x9812, 0xa6b7, 0x4ae0, 0xf382, 0xc745, 0x13fe, 0x0, 0x0);
        gbc.writeMem(0x9812, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0xa6b7, gbc.sp());
        EXPECT(0x9813, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9812));
        // 1B 0166
        gbc.setState(0xc6da, 0x8fdd, 0x5290, 0xcabf, 0x4907, 0x269a, 0x1, 0x1);
        gbc.writeMem(0xc6da, { 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0x8fdd, gbc.sp());
        EXPECT(0xc6db, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6da));
        // 1B 0167
        gbc.setState(0x2e23, 0x2293, 0x4470, 0xec48, 0xfbed, 0xd646, 0x1, 0x1);
        gbc.writeMem(0x2e23, { 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x2293, gbc.sp());
        EXPECT(0x2e24, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0168
        gbc.setState(0xe0f, 0x9184, 0xec70, 0x41d0, 0x920c, 0xc23a, 0x0, 0x0);
        gbc.writeMem(0xe0f, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0x9184, gbc.sp());
        EXPECT(0xe10, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0169
        gbc.setState(0xbf16, 0x47db, 0xc0b0, 0xa638, 0xe444, 0x9718, 0x1, 0x1);
        gbc.writeMem(0xbf16, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x38, gbc.c());
        EXPECT(0xe4, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x47db, gbc.sp());
        EXPECT(0xbf17, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbf16));
        // 1B 016A
        gbc.setState(0xd8f7, 0x1e61, 0x90c0, 0x9c84, 0x571b, 0x1613, 0x1, 0x0);
        gbc.writeMem(0xd8f7, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x1e61, gbc.sp());
        EXPECT(0xd8f8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd8f7));
        // 1B 016B
        gbc.setState(0x8862, 0x8d72, 0x7050, 0xa61d, 0x4e11, 0xaf8f, 0x0, 0x0);
        gbc.writeMem(0x8862, { 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x8f, gbc.l());
        EXPECT(0x8d72, gbc.sp());
        EXPECT(0x8863, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8862));
        // 1B 016C
        gbc.setState(0x8646, 0x9459, 0x3a70, 0x90f3, 0x8747, 0x1607, 0x0, 0x0);
        gbc.writeMem(0x8646, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xf3, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x9459, gbc.sp());
        EXPECT(0x8647, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8646));
        // 1B 016D
        gbc.setState(0x1054, 0x52ca, 0x8950, 0xc784, 0x6357, 0xc8fd, 0x1, 0x0);
        gbc.writeMem(0x1054, { 0x1b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0x63, gbc.d());
        EXPECT(0x56, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x52ca, gbc.sp());
        EXPECT(0x1055, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 016E
        gbc.setState(0x181a, 0x2ce4, 0x3020, 0xfe6e, 0x5cd8, 0x85c7, 0x0, 0x1);
        gbc.writeMem(0x181a, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x2ce4, gbc.sp());
        EXPECT(0x181b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 016F
        gbc.setState(0x592, 0x1f81, 0xad60, 0xfbef, 0x9178, 0xc6d5, 0x1, 0x1);
        gbc.writeMem(0x592, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0x77, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x1f81, gbc.sp());
        EXPECT(0x593, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0170
        gbc.setState(0x480c, 0x64a6, 0x1a80, 0xd60b, 0xadd8, 0x91c0, 0x1, 0x0);
        gbc.writeMem(0x480c, { 0x1b });
        gbc.step();
        EXPECT(0x1a, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x91, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0x64a6, gbc.sp());
        EXPECT(0x480d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0171
        gbc.setState(0x5358, 0xea7d, 0xcac0, 0x2891, 0x1707, 0xc091, 0x0, 0x0);
        gbc.writeMem(0x5358, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xea7d, gbc.sp());
        EXPECT(0x5359, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0172
        gbc.setState(0x6899, 0x82fe, 0xe0f0, 0x53d, 0x4c6b, 0xd37b, 0x1, 0x1);
        gbc.writeMem(0x6899, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x82fe, gbc.sp());
        EXPECT(0x689a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0174
        gbc.setState(0x5569, 0xfaf9, 0xca00, 0xeaf6, 0x7f3a, 0x2474, 0x0, 0x1);
        gbc.writeMem(0x5569, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0xfaf9, gbc.sp());
        EXPECT(0x556a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0175
        gbc.setState(0x36b6, 0xbd77, 0x2b40, 0x1ea6, 0x8d91, 0x1b0b, 0x1, 0x1);
        gbc.writeMem(0x36b6, { 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xa6, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x1b, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xbd77, gbc.sp());
        EXPECT(0x36b7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0176
        gbc.setState(0x5ea6, 0x9170, 0x8650, 0x6034, 0xd647, 0x2292, 0x0, 0x0);
        gbc.writeMem(0x5ea6, { 0x1b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xd6, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x9170, gbc.sp());
        EXPECT(0x5ea7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0177
        gbc.setState(0x2746, 0xdd11, 0x81f0, 0x35f, 0xcfab, 0xe70b, 0x1, 0x1);
        gbc.writeMem(0x2746, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0xdd11, gbc.sp());
        EXPECT(0x2747, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0178
        gbc.setState(0x702, 0x3776, 0xac50, 0x2414, 0x5437, 0x25fe, 0x0, 0x1);
        gbc.writeMem(0x702, { 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x24, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x54, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0xfe, gbc.l());
        EXPECT(0x3776, gbc.sp());
        EXPECT(0x703, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0179
        gbc.setState(0xca27, 0x930a, 0x84b0, 0x934a, 0x554f, 0xc118, 0x0, 0x1);
        gbc.writeMem(0xca27, { 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x930a, gbc.sp());
        EXPECT(0xca28, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xca27));
        // 1B 017A
        gbc.setState(0x816a, 0xd359, 0xfd60, 0xd753, 0xe3a0, 0x361b, 0x0, 0x0);
        gbc.writeMem(0x816a, { 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xd359, gbc.sp());
        EXPECT(0x816b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x816a));
        // 1B 017B
        gbc.setState(0xdcad, 0x5098, 0x5e30, 0xf1fe, 0x2c4e, 0xe385, 0x1, 0x0);
        gbc.writeMem(0xdcad, { 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5098, gbc.sp());
        EXPECT(0xdcae, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdcad));
        // 1B 017C
        gbc.setState(0xa184, 0xd2a8, 0x9be0, 0xaa8f, 0x1bc3, 0xff02, 0x0, 0x1);
        gbc.writeMem(0xa184, { 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xc2, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x2, gbc.l());
        EXPECT(0xd2a8, gbc.sp());
        EXPECT(0xa185, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa184));
        // 1B 017D
        gbc.setState(0x2364, 0x9304, 0xf880, 0x36f6, 0xbf1e, 0xe30e, 0x0, 0x0);
        gbc.writeMem(0x2364, { 0x1b });
        gbc.step();
        EXPECT(0xf8, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x9304, gbc.sp());
        EXPECT(0x2365, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 017E
        gbc.setState(0x845f, 0xa3c0, 0x8e10, 0x2f85, 0xa1ad, 0x4bd7, 0x0, 0x0);
        gbc.writeMem(0x845f, { 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xa1, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xa3c0, gbc.sp());
        EXPECT(0x8460, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x845f));
        // 1B 017F
        gbc.setState(0xa084, 0x258f, 0xe160, 0x597c, 0x2176, 0x5fa3, 0x0, 0x1);
        gbc.writeMem(0xa084, { 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x258f, gbc.sp());
        EXPECT(0xa085, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa084));
        // 1B 0180
        gbc.setState(0x2739, 0x90d4, 0x45d0, 0xab4d, 0x4376, 0xac59, 0x1, 0x0);
        gbc.writeMem(0x2739, { 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x90d4, gbc.sp());
        EXPECT(0x273a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0181
        gbc.setState(0x683f, 0x57f1, 0x9090, 0xb55f, 0xf215, 0xb0ac, 0x0, 0x1);
        gbc.writeMem(0x683f, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x14, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x57f1, gbc.sp());
        EXPECT(0x6840, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0182
        gbc.setState(0xb653, 0xb75b, 0x1740, 0x9a0a, 0xf859, 0xedc4, 0x0, 0x0);
        gbc.writeMem(0xb653, { 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0xb75b, gbc.sp());
        EXPECT(0xb654, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb653));
        // 1B 0183
        gbc.setState(0x5c8, 0x355d, 0x6460, 0x6cb3, 0x215a, 0xbaeb, 0x0, 0x0);
        gbc.writeMem(0x5c8, { 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xb3, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0xeb, gbc.l());
        EXPECT(0x355d, gbc.sp());
        EXPECT(0x5c9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0184
        gbc.setState(0xb8c4, 0x8136, 0x4820, 0xcd0d, 0x586d, 0xc6ec, 0x0, 0x1);
        gbc.writeMem(0xb8c4, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x8136, gbc.sp());
        EXPECT(0xb8c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb8c4));
        // 1B 0185
        gbc.setState(0xbac8, 0x3ac, 0xd080, 0x85b5, 0x2f72, 0x2f56, 0x0, 0x1);
        gbc.writeMem(0xbac8, { 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xb5, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x2f, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x3ac, gbc.sp());
        EXPECT(0xbac9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbac8));
        // 1B 0186
        gbc.setState(0x4ac2, 0x3bd8, 0x9ce0, 0x7c17, 0xb2a4, 0x5103, 0x1, 0x1);
        gbc.writeMem(0x4ac2, { 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x3, gbc.l());
        EXPECT(0x3bd8, gbc.sp());
        EXPECT(0x4ac3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0187
        gbc.setState(0x50a9, 0xeace, 0x57c0, 0x3e59, 0x1ac6, 0x870e, 0x0, 0x1);
        gbc.writeMem(0x50a9, { 0x1b });
        gbc.step();
        EXPECT(0x57, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x59, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0xeace, gbc.sp());
        EXPECT(0x50aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0188
        gbc.setState(0x8451, 0xd4f9, 0xd3e0, 0xd62d, 0x9cc8, 0xd726, 0x1, 0x1);
        gbc.writeMem(0x8451, { 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0xd4f9, gbc.sp());
        EXPECT(0x8452, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8451));
        // 1B 0189
        gbc.setState(0x171c, 0x45a9, 0x3780, 0x4380, 0xe6cc, 0x818b, 0x0, 0x0);
        gbc.writeMem(0x171c, { 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x80, gbc.c());
        EXPECT(0xe6, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x45a9, gbc.sp());
        EXPECT(0x171d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 018A
        gbc.setState(0x54f2, 0x7448, 0xc000, 0x360d, 0xdc5e, 0x3dd3, 0x0, 0x1);
        gbc.writeMem(0x54f2, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x7448, gbc.sp());
        EXPECT(0x54f3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 018D
        gbc.setState(0xebf8, 0x5b74, 0xec0, 0x504c, 0x1e9d, 0xecbd, 0x0, 0x0);
        gbc.writeMem(0xebf8, { 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x5b74, gbc.sp());
        EXPECT(0xebf9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xebf8));
        // 1B 018E
        gbc.setState(0xa2b, 0x59c7, 0x94e0, 0x2f0d, 0x19cf, 0x5ce, 0x0, 0x1);
        gbc.writeMem(0xa2b, { 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x59c7, gbc.sp());
        EXPECT(0xa2c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 018F
        gbc.setState(0x567b, 0xb137, 0xcbf0, 0x732f, 0xfde, 0x191d, 0x1, 0x0);
        gbc.writeMem(0x567b, { 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x19, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xb137, gbc.sp());
        EXPECT(0x567c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0190
        gbc.setState(0xe9c4, 0x8613, 0xc840, 0x2b76, 0x83ce, 0xb7be, 0x0, 0x1);
        gbc.writeMem(0xe9c4, { 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x83, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xbe, gbc.l());
        EXPECT(0x8613, gbc.sp());
        EXPECT(0xe9c5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe9c4));
        // 1B 0191
        gbc.setState(0xb8e0, 0x1ebc, 0x63f0, 0xe29f, 0x922b, 0x27e9, 0x0, 0x0);
        gbc.writeMem(0xb8e0, { 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x2a, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x1ebc, gbc.sp());
        EXPECT(0xb8e1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb8e0));
        // 1B 0192
        gbc.setState(0xb1e, 0xa361, 0xfbd0, 0xfeb4, 0x70aa, 0x18b3, 0x1, 0x0);
        gbc.writeMem(0xb1e, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xfe, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0x18, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xa361, gbc.sp());
        EXPECT(0xb1f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0193
        gbc.setState(0x1abb, 0x9e9f, 0xbc40, 0x831f, 0xd0f3, 0x31d1, 0x1, 0x1);
        gbc.writeMem(0x1abb, { 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x9e9f, gbc.sp());
        EXPECT(0x1abc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0194
        gbc.setState(0x7993, 0x4793, 0x280, 0xc055, 0xa282, 0x607, 0x1, 0x1);
        gbc.writeMem(0x7993, { 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x4793, gbc.sp());
        EXPECT(0x7994, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0195
        gbc.setState(0xce96, 0xe171, 0x3900, 0x2fab, 0x251d, 0x26c7, 0x1, 0x0);
        gbc.writeMem(0xce96, { 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0xe171, gbc.sp());
        EXPECT(0xce97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xce96));
        // 1B 0196
        gbc.setState(0x2bf, 0x4a92, 0xe520, 0x307f, 0xa7e1, 0x7552, 0x1, 0x1);
        gbc.writeMem(0x2bf, { 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xa7, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x4a92, gbc.sp());
        EXPECT(0x2c0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0197
        gbc.setState(0xaf2a, 0xc9c9, 0x7bb0, 0x6f27, 0x1020, 0xdc1b, 0x1, 0x0);
        gbc.writeMem(0xaf2a, { 0x1b });
        gbc.step();
        EXPECT(0x7b, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0x1f, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x1b, gbc.l());
        EXPECT(0xc9c9, gbc.sp());
        EXPECT(0xaf2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaf2a));
        // 1B 0198
        gbc.setState(0x9a2d, 0x16ef, 0x5c10, 0xdfd, 0xe244, 0x769f, 0x1, 0x1);
        gbc.writeMem(0x9a2d, { 0x1b });
        gbc.step();
        EXPECT(0x5c, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x16ef, gbc.sp());
        EXPECT(0x9a2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9a2d));
        // 1B 0199
        gbc.setState(0x94e2, 0xdb0e, 0x2d40, 0x4d1e, 0x281c, 0xf417, 0x1, 0x0);
        gbc.writeMem(0x94e2, { 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xdb0e, gbc.sp());
        EXPECT(0x94e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x94e2));
        // 1B 019A
        gbc.setState(0x53e8, 0x5278, 0x6ba0, 0x8641, 0x2b6c, 0x3d, 0x0, 0x0);
        gbc.writeMem(0x53e8, { 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x5278, gbc.sp());
        EXPECT(0x53e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 019C
        gbc.setState(0x1c3d, 0xaa36, 0xc570, 0xfffe, 0xb201, 0x2945, 0x0, 0x0);
        gbc.writeMem(0x1c3d, { 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0xb2, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0xaa36, gbc.sp());
        EXPECT(0x1c3e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 019D
        gbc.setState(0xe943, 0xa93a, 0x40f0, 0x59bf, 0xec47, 0x5b41, 0x0, 0x0);
        gbc.writeMem(0xe943, { 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xa93a, gbc.sp());
        EXPECT(0xe944, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe943));
        // 1B 019E
        gbc.setState(0xa2e4, 0xd7c, 0x6650, 0x89f1, 0xe296, 0x49db, 0x1, 0x1);
        gbc.writeMem(0xa2e4, { 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xd7c, gbc.sp());
        EXPECT(0xa2e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa2e4));
        // 1B 019F
        gbc.setState(0x3519, 0x35ab, 0xe3c0, 0xa41a, 0x2d8e, 0x2526, 0x1, 0x0);
        gbc.writeMem(0x3519, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x26, gbc.l());
        EXPECT(0x35ab, gbc.sp());
        EXPECT(0x351a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01A0
        gbc.setState(0x307a, 0x26f7, 0xb000, 0xc063, 0xd162, 0x6c15, 0x1, 0x1);
        gbc.writeMem(0x307a, { 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x63, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x26f7, gbc.sp());
        EXPECT(0x307b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01A1
        gbc.setState(0x8f40, 0xdaad, 0x5f20, 0x8e1, 0x8098, 0x68f4, 0x0, 0x1);
        gbc.writeMem(0x8f40, { 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x80, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xdaad, gbc.sp());
        EXPECT(0x8f41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8f40));
        // 1B 01A2
        gbc.setState(0xc3a1, 0xc508, 0xf350, 0x69e9, 0x8674, 0x6612, 0x1, 0x0);
        gbc.writeMem(0xc3a1, { 0x1b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xc508, gbc.sp());
        EXPECT(0xc3a2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc3a1));
        // 1B 01A4
        gbc.setState(0xd55f, 0xfcdd, 0x8800, 0x96f, 0x32f4, 0xf5e, 0x0, 0x1);
        gbc.writeMem(0xd55f, { 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0xf3, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0x5e, gbc.l());
        EXPECT(0xfcdd, gbc.sp());
        EXPECT(0xd560, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd55f));
        // 1B 01A5
        gbc.setState(0x8af8, 0x8997, 0xc110, 0x4c7d, 0x4fad, 0xe17b, 0x0, 0x1);
        gbc.writeMem(0x8af8, { 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x8997, gbc.sp());
        EXPECT(0x8af9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8af8));
        // 1B 01A6
        gbc.setState(0xb331, 0x4062, 0x25d0, 0xf60d, 0xbf9, 0xd31c, 0x1, 0x0);
        gbc.writeMem(0xb331, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x1c, gbc.l());
        EXPECT(0x4062, gbc.sp());
        EXPECT(0xb332, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb331));
        // 1B 01A7
        gbc.setState(0x7643, 0x667e, 0x24e0, 0x82eb, 0x5c5, 0x36f4, 0x0, 0x1);
        gbc.writeMem(0x7643, { 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x36, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x667e, gbc.sp());
        EXPECT(0x7644, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01A8
        gbc.setState(0xa84b, 0xc4de, 0xe8a0, 0x1d41, 0xdbca, 0x59bd, 0x1, 0x1);
        gbc.writeMem(0xa84b, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc4de, gbc.sp());
        EXPECT(0xa84c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa84b));
        // 1B 01A9
        gbc.setState(0x3917, 0x4fdd, 0x48c0, 0xd430, 0xf26, 0x4c93, 0x0, 0x0);
        gbc.writeMem(0x3917, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x4fdd, gbc.sp());
        EXPECT(0x3918, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01AA
        gbc.setState(0xbeec, 0xd716, 0x5300, 0x4ca9, 0x8fb8, 0xa356, 0x0, 0x1);
        gbc.writeMem(0xbeec, { 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x4c, gbc.b());
        EXPECT(0xa9, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0xd716, gbc.sp());
        EXPECT(0xbeed, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbeec));
        // 1B 01AC
        gbc.setState(0x2794, 0x13e5, 0x1f00, 0xeefa, 0x5352, 0x348a, 0x1, 0x0);
        gbc.writeMem(0x2794, { 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x13e5, gbc.sp());
        EXPECT(0x2795, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01AD
        gbc.setState(0xee18, 0x5d77, 0xc290, 0x503c, 0xfcf7, 0x6ff4, 0x1, 0x0);
        gbc.writeMem(0xee18, { 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x6f, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x5d77, gbc.sp());
        EXPECT(0xee19, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xee18));
        // 1B 01AE
        gbc.setState(0x49de, 0xdaaa, 0x3b10, 0x8871, 0x4622, 0x7ac9, 0x1, 0x0);
        gbc.writeMem(0x49de, { 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x46, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xdaaa, gbc.sp());
        EXPECT(0x49df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01AF
        gbc.setState(0x9003, 0x673c, 0x4a30, 0x9171, 0xbc58, 0xb2e1, 0x0, 0x1);
        gbc.writeMem(0x9003, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x673c, gbc.sp());
        EXPECT(0x9004, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9003));
        // 1B 01B1
        gbc.setState(0x3942, 0xf2c3, 0xcc60, 0xe44, 0x1380, 0x28f2, 0x1, 0x1);
        gbc.writeMem(0x3942, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xf2c3, gbc.sp());
        EXPECT(0x3943, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01B2
        gbc.setState(0x51a9, 0x4e31, 0x2750, 0xff12, 0xd5fd, 0x4a08, 0x0, 0x1);
        gbc.writeMem(0x51a9, { 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x4e31, gbc.sp());
        EXPECT(0x51aa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01B3
        gbc.setState(0xc739, 0x747, 0xfb70, 0xb2a5, 0xe01c, 0x9ae, 0x1, 0x1);
        gbc.writeMem(0xc739, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0x747, gbc.sp());
        EXPECT(0xc73a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc739));
        // 1B 01B4
        gbc.setState(0x1d15, 0x361e, 0xb1f0, 0xf7e8, 0x3b37, 0x1fd3, 0x1, 0x1);
        gbc.writeMem(0x1d15, { 0x1b });
        gbc.step();
        EXPECT(0xb1, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x361e, gbc.sp());
        EXPECT(0x1d16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01B5
        gbc.setState(0xe8eb, 0xbb2e, 0xe540, 0x4a21, 0x29eb, 0xdecf, 0x0, 0x1);
        gbc.writeMem(0xe8eb, { 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xbb2e, gbc.sp());
        EXPECT(0xe8ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe8eb));
        // 1B 01B6
        gbc.setState(0xb05d, 0xaf54, 0x4a80, 0x974d, 0xf98c, 0xd144, 0x1, 0x0);
        gbc.writeMem(0xb05d, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x8b, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0xaf54, gbc.sp());
        EXPECT(0xb05e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb05d));
        // 1B 01B7
        gbc.setState(0x9d5b, 0x4a94, 0xe8a0, 0x2712, 0x18b, 0x898e, 0x1, 0x1);
        gbc.writeMem(0x9d5b, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x4a94, gbc.sp());
        EXPECT(0x9d5c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9d5b));
        // 1B 01B8
        gbc.setState(0x7d9f, 0xba29, 0x32e0, 0xf41c, 0xb52a, 0x4907, 0x0, 0x0);
        gbc.writeMem(0x7d9f, { 0x1b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0xba29, gbc.sp());
        EXPECT(0x7da0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01B9
        gbc.setState(0x8cde, 0x14e9, 0x4da0, 0x7677, 0x1bcf, 0x97b0, 0x0, 0x0);
        gbc.writeMem(0x8cde, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x14e9, gbc.sp());
        EXPECT(0x8cdf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8cde));
        // 1B 01BA
        gbc.setState(0xecdf, 0xbd90, 0x2ad0, 0xd16d, 0xa423, 0xa794, 0x1, 0x1);
        gbc.writeMem(0xecdf, { 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x6d, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xa7, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0xbd90, gbc.sp());
        EXPECT(0xece0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xecdf));
        // 1B 01BB
        gbc.setState(0xee18, 0xbe90, 0xfb80, 0x90c9, 0x930c, 0x59c9, 0x0, 0x1);
        gbc.writeMem(0xee18, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x59, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0xbe90, gbc.sp());
        EXPECT(0xee19, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xee18));
        // 1B 01BC
        gbc.setState(0x65e3, 0x5c5a, 0xe390, 0xe114, 0x9948, 0x2464, 0x0, 0x1);
        gbc.writeMem(0x65e3, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x5c5a, gbc.sp());
        EXPECT(0x65e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01BD
        gbc.setState(0x165c, 0x9e43, 0x2bc0, 0x439b, 0xed67, 0x7bea, 0x0, 0x1);
        gbc.writeMem(0x165c, { 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0xed, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x9e43, gbc.sp());
        EXPECT(0x165d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01BE
        gbc.setState(0xc1ab, 0xa503, 0x55c0, 0xf909, 0x2fbb, 0x6308, 0x0, 0x0);
        gbc.writeMem(0xc1ab, { 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0xf9, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xa503, gbc.sp());
        EXPECT(0xc1ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc1ab));
        // 1B 01BF
        gbc.setState(0x360c, 0x3d3, 0xee30, 0x7cfa, 0x6f33, 0x6165, 0x0, 0x0);
        gbc.writeMem(0x360c, { 0x1b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0x61, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x3d3, gbc.sp());
        EXPECT(0x360d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01C1
        gbc.setState(0xd853, 0x8d72, 0xb950, 0x8dca, 0x9ef6, 0x1393, 0x1, 0x1);
        gbc.writeMem(0xd853, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x8d72, gbc.sp());
        EXPECT(0xd854, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd853));
        // 1B 01C2
        gbc.setState(0xc1d5, 0x4c2b, 0x4720, 0x91d, 0xc2c5, 0xb32c, 0x1, 0x0);
        gbc.writeMem(0xc1d5, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x9, gbc.b());
        EXPECT(0x1d, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x4c2b, gbc.sp());
        EXPECT(0xc1d6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc1d5));
        // 1B 01C3
        gbc.setState(0x5310, 0xac7a, 0xe7a0, 0xae9f, 0x28c2, 0x6ad5, 0x0, 0x1);
        gbc.writeMem(0x5310, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x6a, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xac7a, gbc.sp());
        EXPECT(0x5311, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01C4
        gbc.setState(0xce70, 0x21cf, 0xc1b0, 0xb26a, 0xaf72, 0xa604, 0x0, 0x0);
        gbc.writeMem(0xce70, { 0x1b });
        gbc.step();
        EXPECT(0xc1, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x21cf, gbc.sp());
        EXPECT(0xce71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xce70));
        // 1B 01C5
        gbc.setState(0xa963, 0x660, 0x4260, 0xbbed, 0x3de4, 0xe66a, 0x1, 0x1);
        gbc.writeMem(0xa963, { 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0x3d, gbc.d());
        EXPECT(0xe3, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x660, gbc.sp());
        EXPECT(0xa964, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa963));
        // 1B 01C6
        gbc.setState(0x3c36, 0xb637, 0xed90, 0x8f66, 0xc94b, 0xcc43, 0x0, 0x1);
        gbc.writeMem(0x3c36, { 0x1b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xcc, gbc.h());
        EXPECT(0x43, gbc.l());
        EXPECT(0xb637, gbc.sp());
        EXPECT(0x3c37, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01C7
        gbc.setState(0x9806, 0x1d82, 0x9420, 0x5452, 0xc1f, 0xc959, 0x1, 0x0);
        gbc.writeMem(0x9806, { 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0xc, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x1d82, gbc.sp());
        EXPECT(0x9807, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9806));
        // 1B 01C8
        gbc.setState(0x6f46, 0x3d30, 0x7c80, 0xc91e, 0xd827, 0x8df9, 0x0, 0x1);
        gbc.writeMem(0x6f46, { 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0xf9, gbc.l());
        EXPECT(0x3d30, gbc.sp());
        EXPECT(0x6f47, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01C9
        gbc.setState(0x21e9, 0x1b0b, 0xbcc0, 0x427e, 0xe11b, 0x941, 0x0, 0x0);
        gbc.writeMem(0x21e9, { 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0x7e, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x9, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x1b0b, gbc.sp());
        EXPECT(0x21ea, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01CA
        gbc.setState(0x794a, 0x7418, 0x9600, 0xb43b, 0x3e1e, 0xb3ba, 0x1, 0x1);
        gbc.writeMem(0x794a, { 0x1b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x3b, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x7418, gbc.sp());
        EXPECT(0x794b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01CB
        gbc.setState(0xd7e4, 0xeec0, 0x2220, 0x3890, 0x8eb0, 0xffc3, 0x0, 0x1);
        gbc.writeMem(0xd7e4, { 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x38, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0xaf, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xeec0, gbc.sp());
        EXPECT(0xd7e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd7e4));
        // 1B 01CC
        gbc.setState(0x951f, 0xc593, 0x4950, 0xac03, 0x1125, 0xe6c3, 0x0, 0x0);
        gbc.writeMem(0x951f, { 0x1b });
        gbc.step();
        EXPECT(0x49, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xc593, gbc.sp());
        EXPECT(0x9520, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x951f));
        // 1B 01CD
        gbc.setState(0x44f, 0xed90, 0xf620, 0xc8b8, 0xf7ba, 0xabb0, 0x1, 0x0);
        gbc.writeMem(0x44f, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xb8, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0xb9, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0xed90, gbc.sp());
        EXPECT(0x450, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01CE
        gbc.setState(0x8880, 0xcf17, 0x9920, 0x1ddd, 0x1d23, 0x464c, 0x1, 0x1);
        gbc.writeMem(0x8880, { 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0xdd, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xcf17, gbc.sp());
        EXPECT(0x8881, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8880));
        // 1B 01D0
        gbc.setState(0x44f1, 0xc97a, 0x3070, 0x1085, 0xff07, 0xbf4c, 0x1, 0x0);
        gbc.writeMem(0x44f1, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x10, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0xff, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xc97a, gbc.sp());
        EXPECT(0x44f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01D2
        gbc.setState(0x3a80, 0x61d5, 0x3a30, 0xb426, 0x778a, 0xeef5, 0x0, 0x0);
        gbc.writeMem(0x3a80, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x61d5, gbc.sp());
        EXPECT(0x3a81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01D4
        gbc.setState(0x22b7, 0x5cac, 0x3b40, 0xda7a, 0x1f09, 0x359, 0x0, 0x1);
        gbc.writeMem(0x22b7, { 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0x59, gbc.l());
        EXPECT(0x5cac, gbc.sp());
        EXPECT(0x22b8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01D5
        gbc.setState(0x9307, 0x7e91, 0x3460, 0xb7cc, 0x2017, 0x351f, 0x1, 0x0);
        gbc.writeMem(0x9307, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x7e91, gbc.sp());
        EXPECT(0x9308, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9307));
        // 1B 01D6
        gbc.setState(0x9b3c, 0xfcfb, 0xfb40, 0xf385, 0x7c5e, 0x7e5, 0x0, 0x1);
        gbc.writeMem(0x9b3c, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x5d, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0xfcfb, gbc.sp());
        EXPECT(0x9b3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b3c));
        // 1B 01D7
        gbc.setState(0x346e, 0x405, 0xdfb0, 0xc35d, 0xa946, 0x4c1f, 0x0, 0x0);
        gbc.writeMem(0x346e, { 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x405, gbc.sp());
        EXPECT(0x346f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01D9
        gbc.setState(0x4043, 0xd0bb, 0x8f40, 0xbd1f, 0x72a6, 0xfe75, 0x0, 0x1);
        gbc.writeMem(0x4043, { 0x1b });
        gbc.step();
        EXPECT(0x8f, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0xa5, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xd0bb, gbc.sp());
        EXPECT(0x4044, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01DA
        gbc.setState(0x7f03, 0x2c59, 0x18e0, 0x1621, 0x28d1, 0xab8b, 0x1, 0x1);
        gbc.writeMem(0x7f03, { 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x8b, gbc.l());
        EXPECT(0x2c59, gbc.sp());
        EXPECT(0x7f04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01DB
        gbc.setState(0x83cd, 0x7e9e, 0x36e0, 0x88d3, 0xd7ff, 0xc092, 0x0, 0x0);
        gbc.writeMem(0x83cd, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x7e9e, gbc.sp());
        EXPECT(0x83ce, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x83cd));
        // 1B 01DC
        gbc.setState(0xf53, 0x2c6f, 0x33e0, 0x8c6e, 0xd7b2, 0x4c9b, 0x0, 0x0);
        gbc.writeMem(0xf53, { 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xb1, gbc.e());
        EXPECT(0x4c, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x2c6f, gbc.sp());
        EXPECT(0xf54, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01DD
        gbc.setState(0x9dbc, 0x6b, 0x3f50, 0x4a64, 0xa06c, 0x4ed0, 0x0, 0x1);
        gbc.writeMem(0x9dbc, { 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x4a, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x6b, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0x6b, gbc.sp());
        EXPECT(0x9dbd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9dbc));
        // 1B 01DE
        gbc.setState(0xba3a, 0xb7af, 0x2eb0, 0x7a1b, 0xefa9, 0x5d76, 0x0, 0x1);
        gbc.writeMem(0xba3a, { 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x5d, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xb7af, gbc.sp());
        EXPECT(0xba3b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xba3a));
        // 1B 01DF
        gbc.setState(0x3667, 0x4202, 0x2c20, 0xd72c, 0xcf, 0x700b, 0x1, 0x1);
        gbc.writeMem(0x3667, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0xce, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x4202, gbc.sp());
        EXPECT(0x3668, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01E0
        gbc.setState(0xa1ea, 0xbc06, 0x2300, 0x322f, 0xe531, 0xb4c8, 0x0, 0x0);
        gbc.writeMem(0xa1ea, { 0x1b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x2f, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xc8, gbc.l());
        EXPECT(0xbc06, gbc.sp());
        EXPECT(0xa1eb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa1ea));
        // 1B 01E2
        gbc.setState(0xad71, 0xf289, 0x7ea0, 0x1aa0, 0x2429, 0x8104, 0x0, 0x0);
        gbc.writeMem(0xad71, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0xa0, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0xf289, gbc.sp());
        EXPECT(0xad72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad71));
        // 1B 01E4
        gbc.setState(0x4114, 0xd705, 0xdee0, 0xa629, 0x7aa5, 0xffb5, 0x1, 0x0);
        gbc.writeMem(0x4114, { 0x1b });
        gbc.step();
        EXPECT(0xde, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0xd705, gbc.sp());
        EXPECT(0x4115, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01E5
        gbc.setState(0xcb3d, 0xcfeb, 0x7f70, 0xccbe, 0x4dde, 0x64ed, 0x1, 0x0);
        gbc.writeMem(0xcb3d, { 0x1b });
        gbc.step();
        EXPECT(0x7f, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xcfeb, gbc.sp());
        EXPECT(0xcb3e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcb3d));
        // 1B 01E6
        gbc.setState(0x4cff, 0xa82c, 0x53b0, 0xfb2, 0x2acc, 0xf6f8, 0x1, 0x0);
        gbc.writeMem(0x4cff, { 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0xcb, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0xf8, gbc.l());
        EXPECT(0xa82c, gbc.sp());
        EXPECT(0x4d00, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01E7
        gbc.setState(0x1ef6, 0x3940, 0x6e60, 0x9a57, 0xbbae, 0x489b, 0x0, 0x1);
        gbc.writeMem(0x1ef6, { 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x48, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x3940, gbc.sp());
        EXPECT(0x1ef7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01E8
        gbc.setState(0x878c, 0x4c52, 0x47f0, 0xed6c, 0xf221, 0x3d5f, 0x1, 0x0);
        gbc.writeMem(0x878c, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x4c52, gbc.sp());
        EXPECT(0x878d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x878c));
        // 1B 01E9
        gbc.setState(0x2e19, 0x555e, 0xa660, 0x4b65, 0xaf58, 0xaa0e, 0x0, 0x1);
        gbc.writeMem(0x2e19, { 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x4b, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x555e, gbc.sp());
        EXPECT(0x2e1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01EA
        gbc.setState(0x766c, 0x7c96, 0x9a20, 0x972d, 0xf88b, 0x84e6, 0x0, 0x1);
        gbc.writeMem(0x766c, { 0x1b });
        gbc.step();
        EXPECT(0x9a, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0x84, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x7c96, gbc.sp());
        EXPECT(0x766d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01EB
        gbc.setState(0x95b3, 0x5424, 0x31e0, 0x6f27, 0xaa7d, 0x740a, 0x1, 0x0);
        gbc.writeMem(0x95b3, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xa, gbc.l());
        EXPECT(0x5424, gbc.sp());
        EXPECT(0x95b4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x95b3));
        // 1B 01EC
        gbc.setState(0x641b, 0x8886, 0xb80, 0xc09a, 0x9844, 0x44bf, 0x1, 0x1);
        gbc.writeMem(0x641b, { 0x1b });
        gbc.step();
        EXPECT(0xb, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xbf, gbc.l());
        EXPECT(0x8886, gbc.sp());
        EXPECT(0x641c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01ED
        gbc.setState(0x9b81, 0x2c22, 0xcd60, 0x73a1, 0x504f, 0xca19, 0x1, 0x1);
        gbc.writeMem(0x9b81, { 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0x4e, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x2c22, gbc.sp());
        EXPECT(0x9b82, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b81));
        // 1B 01EE
        gbc.setState(0xb77, 0xeb60, 0x22d0, 0x9a72, 0x7e0e, 0x5bdc, 0x0, 0x1);
        gbc.writeMem(0xb77, { 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0xeb60, gbc.sp());
        EXPECT(0xb78, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01EF
        gbc.setState(0x68f3, 0x7529, 0xd8b0, 0x49f7, 0x8afb, 0xdcd2, 0x0, 0x1);
        gbc.writeMem(0x68f3, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x7529, gbc.sp());
        EXPECT(0x68f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01F0
        gbc.setState(0xe804, 0xa59c, 0xbec0, 0x7111, 0xaadc, 0xacc2, 0x1, 0x1);
        gbc.writeMem(0xe804, { 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0xc2, gbc.l());
        EXPECT(0xa59c, gbc.sp());
        EXPECT(0xe805, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe804));
        // 1B 01F1
        gbc.setState(0x1df7, 0x3219, 0x8850, 0x8721, 0x7e6b, 0x220e, 0x0, 0x1);
        gbc.writeMem(0x1df7, { 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0x87, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x7e, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x3219, gbc.sp());
        EXPECT(0x1df8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01F2
        gbc.setState(0x448d, 0x40b0, 0x8730, 0x7cf6, 0x908d, 0x224f, 0x1, 0x1);
        gbc.writeMem(0x448d, { 0x1b });
        gbc.step();
        EXPECT(0x87, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x40b0, gbc.sp());
        EXPECT(0x448e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01F3
        gbc.setState(0x2c64, 0x1b1f, 0xb720, 0x5102, 0x5149, 0x38b4, 0x0, 0x1);
        gbc.writeMem(0x2c64, { 0x1b });
        gbc.step();
        EXPECT(0xb7, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0x38, gbc.h());
        EXPECT(0xb4, gbc.l());
        EXPECT(0x1b1f, gbc.sp());
        EXPECT(0x2c65, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01F4
        gbc.setState(0xbcf5, 0x3beb, 0xff10, 0x93ad, 0xb1b4, 0xc6ff, 0x1, 0x0);
        gbc.writeMem(0xbcf5, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xb3, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xff, gbc.l());
        EXPECT(0x3beb, gbc.sp());
        EXPECT(0xbcf6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbcf5));
        // 1B 01F5
        gbc.setState(0xe8b0, 0xa86a, 0x4090, 0xa6eb, 0x1a49, 0xa235, 0x1, 0x1);
        gbc.writeMem(0xe8b0, { 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xa6, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x48, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0xa86a, gbc.sp());
        EXPECT(0xe8b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe8b0));
        // 1B 01F6
        gbc.setState(0x5c4e, 0xf8b2, 0x8b40, 0x27c6, 0xa073, 0xd35d, 0x0, 0x0);
        gbc.writeMem(0x5c4e, { 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x72, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xf8b2, gbc.sp());
        EXPECT(0x5c4f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 01F7
        gbc.setState(0x9afb, 0xe341, 0xe40, 0x1b6b, 0xcae2, 0xf87b, 0x0, 0x1);
        gbc.writeMem(0x9afb, { 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xf8, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xe341, gbc.sp());
        EXPECT(0x9afc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9afb));
        // 1B 01F8
        gbc.setState(0xec23, 0xbcb0, 0x21f0, 0x3057, 0x150a, 0xf980, 0x0, 0x0);
        gbc.writeMem(0xec23, { 0x1b });
        gbc.step();
        EXPECT(0x21, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x15, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xbcb0, gbc.sp());
        EXPECT(0xec24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xec23));
        // 1B 01F9
        gbc.setState(0x7bea, 0xc0be, 0xad30, 0xa98, 0x7aa3, 0xe746, 0x1, 0x0);
        gbc.writeMem(0x7bea, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0xc0be, gbc.sp());
        EXPECT(0x7beb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01FA
        gbc.setState(0xde0f, 0x9c42, 0xe840, 0x13e1, 0xbdac, 0x542d, 0x1, 0x0);
        gbc.writeMem(0xde0f, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x9c42, gbc.sp());
        EXPECT(0xde10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xde0f));
        // 1B 01FB
        gbc.setState(0xa6d6, 0x77c9, 0x6f10, 0x3130, 0xee4c, 0xd3f5, 0x0, 0x1);
        gbc.writeMem(0xa6d6, { 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x77c9, gbc.sp());
        EXPECT(0xa6d7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa6d6));
        // 1B 01FC
        gbc.setState(0x5342, 0x8cca, 0x4ad0, 0x30aa, 0xef53, 0x10d3, 0x1, 0x1);
        gbc.writeMem(0x5342, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x52, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xd3, gbc.l());
        EXPECT(0x8cca, gbc.sp());
        EXPECT(0x5343, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 01FD
        gbc.setState(0xdcb5, 0x1802, 0x1480, 0x68f2, 0xa2af, 0x157a, 0x0, 0x1);
        gbc.writeMem(0xdcb5, { 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x68, gbc.b());
        EXPECT(0xf2, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x1802, gbc.sp());
        EXPECT(0xdcb6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdcb5));
        // 1B 01FF
        gbc.setState(0xdd61, 0xa09c, 0x1990, 0x2ff7, 0xb40c, 0x552f, 0x0, 0x0);
        gbc.writeMem(0xdd61, { 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x2f, gbc.l());
        EXPECT(0xa09c, gbc.sp());
        EXPECT(0xdd62, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdd61));
        // 1B 0200
        gbc.setState(0x71d0, 0xcfba, 0x4740, 0xb282, 0x57be, 0x8065, 0x0, 0x1);
        gbc.writeMem(0x71d0, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xcfba, gbc.sp());
        EXPECT(0x71d1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0201
        gbc.setState(0x214f, 0xb95f, 0x3950, 0x526b, 0xd7a0, 0x92a4, 0x1, 0x1);
        gbc.writeMem(0x214f, { 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xb95f, gbc.sp());
        EXPECT(0x2150, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0202
        gbc.setState(0xe115, 0x62a, 0x8030, 0xfa2, 0x25f2, 0xfd1, 0x1, 0x1);
        gbc.writeMem(0xe115, { 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xa2, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0x62a, gbc.sp());
        EXPECT(0xe116, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe115));
        // 1B 0203
        gbc.setState(0xb006, 0x91be, 0x6820, 0x2a2a, 0x8fc7, 0x4b46, 0x1, 0x1);
        gbc.writeMem(0xb006, { 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x2a, gbc.c());
        EXPECT(0x8f, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x4b, gbc.h());
        EXPECT(0x46, gbc.l());
        EXPECT(0x91be, gbc.sp());
        EXPECT(0xb007, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb006));
        // 1B 0204
        gbc.setState(0x4880, 0x3cb9, 0x83c0, 0xa4b7, 0x5a1b, 0x7c6d, 0x0, 0x0);
        gbc.writeMem(0x4880, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xb7, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0x3cb9, gbc.sp());
        EXPECT(0x4881, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0205
        gbc.setState(0x5ec1, 0x7dfd, 0xfa30, 0xbd0e, 0x60eb, 0x962d, 0x1, 0x0);
        gbc.writeMem(0x5ec1, { 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xbd, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x96, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0x7dfd, gbc.sp());
        EXPECT(0x5ec2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0206
        gbc.setState(0xaf1f, 0x2b6d, 0xc250, 0x23cd, 0x29bc, 0x9dc3, 0x1, 0x0);
        gbc.writeMem(0xaf1f, { 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0x23, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x2b6d, gbc.sp());
        EXPECT(0xaf20, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xaf1f));
        // 1B 0207
        gbc.setState(0x64f2, 0xe964, 0x64b0, 0x3fbe, 0x26fc, 0x4ad2, 0x1, 0x0);
        gbc.writeMem(0x64f2, { 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xe964, gbc.sp());
        EXPECT(0x64f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0208
        gbc.setState(0xe4dc, 0x7b1, 0xe770, 0x493d, 0xc6e7, 0x23c4, 0x0, 0x1);
        gbc.writeMem(0xe4dc, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xe6, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x7b1, gbc.sp());
        EXPECT(0xe4dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe4dc));
        // 1B 0209
        gbc.setState(0x6bb0, 0x8621, 0xd9a0, 0x1911, 0x3174, 0x178a, 0x1, 0x1);
        gbc.writeMem(0x6bb0, { 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x8621, gbc.sp());
        EXPECT(0x6bb1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 020A
        gbc.setState(0xae08, 0x9c62, 0x4da0, 0x29c0, 0x2209, 0x79e0, 0x1, 0x1);
        gbc.writeMem(0xae08, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xe0, gbc.l());
        EXPECT(0x9c62, gbc.sp());
        EXPECT(0xae09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xae08));
        // 1B 020B
        gbc.setState(0x6cc, 0x22df, 0x83f0, 0x3e1a, 0x8de2, 0xfd3e, 0x0, 0x0);
        gbc.writeMem(0x6cc, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xe1, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0x3e, gbc.l());
        EXPECT(0x22df, gbc.sp());
        EXPECT(0x6cd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 020C
        gbc.setState(0xb9a8, 0xfa68, 0x5a60, 0xaaea, 0xf75a, 0xaf2d, 0x1, 0x0);
        gbc.writeMem(0xb9a8, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xaa, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x2d, gbc.l());
        EXPECT(0xfa68, gbc.sp());
        EXPECT(0xb9a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb9a8));
        // 1B 020D
        gbc.setState(0x896d, 0x6ec5, 0x9090, 0x2eb1, 0x9245, 0x7a5a, 0x0, 0x1);
        gbc.writeMem(0x896d, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x6ec5, gbc.sp());
        EXPECT(0x896e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x896d));
        // 1B 020F
        gbc.setState(0xcce4, 0x811e, 0xf220, 0xce37, 0x1239, 0xff13, 0x0, 0x0);
        gbc.writeMem(0xcce4, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x13, gbc.l());
        EXPECT(0x811e, gbc.sp());
        EXPECT(0xcce5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcce4));
        // 1B 0210
        gbc.setState(0x594d, 0x18a5, 0xca10, 0xbf9a, 0x752c, 0xd985, 0x1, 0x0);
        gbc.writeMem(0x594d, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x75, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x18a5, gbc.sp());
        EXPECT(0x594e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0211
        gbc.setState(0x4879, 0xe824, 0x6d00, 0x848f, 0xcbf1, 0x8a27, 0x1, 0x0);
        gbc.writeMem(0x4879, { 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xe824, gbc.sp());
        EXPECT(0x487a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0212
        gbc.setState(0xd668, 0xedf2, 0x7690, 0xd94a, 0x453c, 0x3db1, 0x1, 0x1);
        gbc.writeMem(0xd668, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0xedf2, gbc.sp());
        EXPECT(0xd669, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd668));
        // 1B 0213
        gbc.setState(0x56a8, 0xfd39, 0xb970, 0x1183, 0x7264, 0x6319, 0x0, 0x0);
        gbc.writeMem(0x56a8, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xfd39, gbc.sp());
        EXPECT(0x56a9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0214
        gbc.setState(0x2df3, 0xdab1, 0x25e0, 0x1d07, 0x4d1e, 0xd63, 0x1, 0x1);
        gbc.writeMem(0x2df3, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x7, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0x63, gbc.l());
        EXPECT(0xdab1, gbc.sp());
        EXPECT(0x2df4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0215
        gbc.setState(0x801, 0x2da1, 0x2e40, 0x1955, 0x2cbc, 0x6831, 0x0, 0x0);
        gbc.writeMem(0x801, { 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x2da1, gbc.sp());
        EXPECT(0x802, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0216
        gbc.setState(0x1b7a, 0x4f42, 0xcf00, 0x8931, 0x1c72, 0x72b5, 0x0, 0x1);
        gbc.writeMem(0x1b7a, { 0x1b });
        gbc.step();
        EXPECT(0xcf, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xb5, gbc.l());
        EXPECT(0x4f42, gbc.sp());
        EXPECT(0x1b7b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0217
        gbc.setState(0x31f7, 0xce70, 0x5b70, 0xd509, 0xa48, 0xf67c, 0x0, 0x0);
        gbc.writeMem(0x31f7, { 0x1b });
        gbc.step();
        EXPECT(0x5b, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0xce70, gbc.sp());
        EXPECT(0x31f8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0218
        gbc.setState(0x2473, 0xd1e2, 0x1060, 0x77a3, 0x99ab, 0x2912, 0x1, 0x1);
        gbc.writeMem(0x2473, { 0x1b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xd1e2, gbc.sp());
        EXPECT(0x2474, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0219
        gbc.setState(0x3f86, 0x969e, 0x2b80, 0x3bf, 0xd00f, 0x727d, 0x0, 0x0);
        gbc.writeMem(0x3f86, { 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0x969e, gbc.sp());
        EXPECT(0x3f87, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 021A
        gbc.setState(0xb7e2, 0xcfea, 0xd110, 0x32b6, 0xb6b, 0x8e89, 0x1, 0x0);
        gbc.writeMem(0xb7e2, { 0x1b });
        gbc.step();
        EXPECT(0xd1, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x89, gbc.l());
        EXPECT(0xcfea, gbc.sp());
        EXPECT(0xb7e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb7e2));
        // 1B 021B
        gbc.setState(0x7163, 0x98ac, 0x75a0, 0xbc1e, 0xeb69, 0xe95f, 0x1, 0x1);
        gbc.writeMem(0x7163, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x5f, gbc.l());
        EXPECT(0x98ac, gbc.sp());
        EXPECT(0x7164, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 021C
        gbc.setState(0x859f, 0x4180, 0xfef0, 0xb639, 0xf3dd, 0x2e90, 0x1, 0x0);
        gbc.writeMem(0x859f, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0x4180, gbc.sp());
        EXPECT(0x85a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x859f));
        // 1B 021D
        gbc.setState(0xc94c, 0x19df, 0xc3c0, 0x919a, 0x5503, 0xe93, 0x0, 0x0);
        gbc.writeMem(0xc94c, { 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xe, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0x19df, gbc.sp());
        EXPECT(0xc94d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc94c));
        // 1B 021E
        gbc.setState(0xb7d7, 0xab23, 0x560, 0x25b0, 0x4e33, 0xb4c1, 0x1, 0x0);
        gbc.writeMem(0xb7d7, { 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x25, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x32, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0xab23, gbc.sp());
        EXPECT(0xb7d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb7d7));
        // 1B 021F
        gbc.setState(0xad73, 0x8633, 0xf600, 0x1a10, 0x53fb, 0x1fc4, 0x0, 0x0);
        gbc.writeMem(0xad73, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x1a, gbc.b());
        EXPECT(0x10, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x8633, gbc.sp());
        EXPECT(0xad74, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad73));
        // 1B 0220
        gbc.setState(0xe1fd, 0x77a2, 0xe0d0, 0x81a5, 0xeafb, 0xda3f, 0x0, 0x0);
        gbc.writeMem(0xe1fd, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xfa, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x77a2, gbc.sp());
        EXPECT(0xe1fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe1fd));
        // 1B 0221
        gbc.setState(0xd0f0, 0xc2bf, 0xe390, 0x9e54, 0xfc2f, 0xa90, 0x0, 0x1);
        gbc.writeMem(0xd0f0, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x9e, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xfc, gbc.d());
        EXPECT(0x2e, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xc2bf, gbc.sp());
        EXPECT(0xd0f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd0f0));
        // 1B 0222
        gbc.setState(0xd5f5, 0x9d8d, 0xd760, 0x6f2d, 0x607d, 0x39a2, 0x0, 0x1);
        gbc.writeMem(0xd5f5, { 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x6f, gbc.b());
        EXPECT(0x2d, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x9d8d, gbc.sp());
        EXPECT(0xd5f6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd5f5));
        // 1B 0223
        gbc.setState(0x6199, 0x8456, 0x89a0, 0xa387, 0x8448, 0x1a94, 0x1, 0x0);
        gbc.writeMem(0x6199, { 0x1b });
        gbc.step();
        EXPECT(0x89, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x87, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x47, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x8456, gbc.sp());
        EXPECT(0x619a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0224
        gbc.setState(0xb0c7, 0x29f1, 0x3100, 0xa1e6, 0xbb7c, 0xd356, 0x0, 0x1);
        gbc.writeMem(0xb0c7, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xa1, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0xbb, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0xd3, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x29f1, gbc.sp());
        EXPECT(0xb0c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb0c7));
        // 1B 0225
        gbc.setState(0x57dc, 0xe154, 0x1700, 0x794d, 0x722e, 0xf56d, 0x0, 0x0);
        gbc.writeMem(0x57dc, { 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0xf5, gbc.h());
        EXPECT(0x6d, gbc.l());
        EXPECT(0xe154, gbc.sp());
        EXPECT(0x57dd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0226
        gbc.setState(0xd633, 0x938d, 0xf6b0, 0xc1ac, 0xacf1, 0xa62c, 0x1, 0x0);
        gbc.writeMem(0xd633, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0xc1, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xf0, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x2c, gbc.l());
        EXPECT(0x938d, gbc.sp());
        EXPECT(0xd634, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd633));
        // 1B 0227
        gbc.setState(0xa659, 0x61fe, 0xf210, 0xbee4, 0xe706, 0x4f22, 0x1, 0x1);
        gbc.writeMem(0xa659, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x61fe, gbc.sp());
        EXPECT(0xa65a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa659));
        // 1B 0228
        gbc.setState(0x2fe4, 0xa353, 0xd900, 0xcae0, 0xde32, 0x3acd, 0x0, 0x1);
        gbc.writeMem(0x2fe4, { 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xde, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0x3a, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xa353, gbc.sp());
        EXPECT(0x2fe5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0229
        gbc.setState(0xe75c, 0x8806, 0x98f0, 0xedc9, 0x2e42, 0xcfb9, 0x0, 0x0);
        gbc.writeMem(0xe75c, { 0x1b });
        gbc.step();
        EXPECT(0x98, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x8806, gbc.sp());
        EXPECT(0xe75d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe75c));
        // 1B 022A
        gbc.setState(0xf82, 0xc9ee, 0xd30, 0x8a6e, 0xf765, 0x16b2, 0x0, 0x0);
        gbc.writeMem(0xf82, { 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0xc9ee, gbc.sp());
        EXPECT(0xf83, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 022B
        gbc.setState(0xe6ba, 0xb9e, 0x32b0, 0xfc60, 0x65a8, 0xe5ae, 0x0, 0x1);
        gbc.writeMem(0xe6ba, { 0x1b });
        gbc.step();
        EXPECT(0x32, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0xa7, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xb9e, gbc.sp());
        EXPECT(0xe6bb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe6ba));
        // 1B 022C
        gbc.setState(0x16e6, 0x6a15, 0x71e0, 0x1bd3, 0xa809, 0x1330, 0x0, 0x0);
        gbc.writeMem(0x16e6, { 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x1b, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x6a15, gbc.sp());
        EXPECT(0x16e7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 022D
        gbc.setState(0xcc90, 0xe47f, 0xf910, 0x3fa5, 0x4f8d, 0x8590, 0x1, 0x1);
        gbc.writeMem(0xcc90, { 0x1b });
        gbc.step();
        EXPECT(0xf9, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x8c, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0x90, gbc.l());
        EXPECT(0xe47f, gbc.sp());
        EXPECT(0xcc91, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcc90));
        // 1B 022E
        gbc.setState(0xdb9b, 0xce2, 0x5010, 0x85aa, 0x7000, 0x3b3d, 0x0, 0x0);
        gbc.writeMem(0xdb9b, { 0x1b });
        gbc.step();
        EXPECT(0x50, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x6f, gbc.d());
        EXPECT(0xff, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xce2, gbc.sp());
        EXPECT(0xdb9c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdb9b));
        // 1B 022F
        gbc.setState(0x71a9, 0x4b, 0x3b60, 0x5ad7, 0x5b1e, 0x93f3, 0x1, 0x1);
        gbc.writeMem(0x71a9, { 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x5a, gbc.b());
        EXPECT(0xd7, gbc.c());
        EXPECT(0x5b, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x93, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x4b, gbc.sp());
        EXPECT(0x71aa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0230
        gbc.setState(0x2c9a, 0xa942, 0xe8c0, 0x3268, 0xf38, 0xef8e, 0x1, 0x1);
        gbc.writeMem(0x2c9a, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xa942, gbc.sp());
        EXPECT(0x2c9b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0231
        gbc.setState(0x2604, 0x3470, 0x9950, 0x5511, 0x14f2, 0x7bec, 0x1, 0x1);
        gbc.writeMem(0x2604, { 0x1b });
        gbc.step();
        EXPECT(0x99, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0x3470, gbc.sp());
        EXPECT(0x2605, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0232
        gbc.setState(0xddb3, 0x1807, 0xb210, 0x9cb2, 0xee8, 0x3b39, 0x1, 0x1);
        gbc.writeMem(0xddb3, { 0x1b });
        gbc.step();
        EXPECT(0xb2, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0x3b, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x1807, gbc.sp());
        EXPECT(0xddb4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xddb3));
        // 1B 0233
        gbc.setState(0x1834, 0xdac0, 0x8110, 0xf200, 0x60e, 0xda5, 0x0, 0x1);
        gbc.writeMem(0x1834, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x0, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0xdac0, gbc.sp());
        EXPECT(0x1835, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0234
        gbc.setState(0x7d43, 0x1c19, 0x3920, 0x52ad, 0x24cd, 0xdcd9, 0x0, 0x1);
        gbc.writeMem(0x7d43, { 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x52, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x1c19, gbc.sp());
        EXPECT(0x7d44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0235
        gbc.setState(0xe679, 0x806c, 0x9730, 0x550, 0x43e9, 0x4f48, 0x1, 0x0);
        gbc.writeMem(0xe679, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x806c, gbc.sp());
        EXPECT(0xe67a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe679));
        // 1B 0236
        gbc.setState(0xadaa, 0x2df9, 0x53b0, 0x34af, 0xbe3a, 0x5b7e, 0x1, 0x0);
        gbc.writeMem(0xadaa, { 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xbe, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0x7e, gbc.l());
        EXPECT(0x2df9, gbc.sp());
        EXPECT(0xadab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xadaa));
        // 1B 0237
        gbc.setState(0xb12d, 0xcc3a, 0xaad0, 0x8b04, 0xee4d, 0x1aec, 0x1, 0x1);
        gbc.writeMem(0xb12d, { 0x1b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xcc3a, gbc.sp());
        EXPECT(0xb12e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb12d));
        // 1B 0239
        gbc.setState(0xd8c4, 0xb7fa, 0x30d0, 0x3702, 0xf3d4, 0x6ed0, 0x1, 0x0);
        gbc.writeMem(0xd8c4, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xb7fa, gbc.sp());
        EXPECT(0xd8c5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd8c4));
        // 1B 023A
        gbc.setState(0xbc43, 0x29b6, 0xdf0, 0x4927, 0x3ef8, 0xc2df, 0x0, 0x1);
        gbc.writeMem(0xbc43, { 0x1b });
        gbc.step();
        EXPECT(0xd, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xdf, gbc.l());
        EXPECT(0x29b6, gbc.sp());
        EXPECT(0xbc44, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbc43));
        // 1B 023B
        gbc.setState(0x15a4, 0xf890, 0x2c70, 0x131f, 0x5d58, 0xb0e2, 0x0, 0x1);
        gbc.writeMem(0x15a4, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xb0, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0xf890, gbc.sp());
        EXPECT(0x15a5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 023C
        gbc.setState(0x5333, 0x5571, 0xeb60, 0x2632, 0xe314, 0x56e2, 0x0, 0x1);
        gbc.writeMem(0x5333, { 0x1b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x32, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x56, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x5571, gbc.sp());
        EXPECT(0x5334, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 023D
        gbc.setState(0x81d7, 0x7b83, 0xdd50, 0x343d, 0x362, 0x9fb6, 0x1, 0x1);
        gbc.writeMem(0x81d7, { 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x34, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0x61, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x7b83, gbc.sp());
        EXPECT(0x81d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x81d7));
        // 1B 023E
        gbc.setState(0x2f35, 0x14a6, 0x8390, 0x3788, 0x4f11, 0xc2e5, 0x1, 0x1);
        gbc.writeMem(0x2f35, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0xc2, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x14a6, gbc.sp());
        EXPECT(0x2f36, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0240
        gbc.setState(0x7831, 0x9b0f, 0x6e40, 0x865c, 0x332c, 0xac10, 0x0, 0x1);
        gbc.writeMem(0x7831, { 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x10, gbc.l());
        EXPECT(0x9b0f, gbc.sp());
        EXPECT(0x7832, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0241
        gbc.setState(0x84d7, 0x749f, 0x5ae0, 0x9b4a, 0x718a, 0xd228, 0x1, 0x1);
        gbc.writeMem(0x84d7, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x89, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x749f, gbc.sp());
        EXPECT(0x84d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x84d7));
        // 1B 0242
        gbc.setState(0x8a8d, 0xbf91, 0x1740, 0xb561, 0x3af, 0x7308, 0x1, 0x0);
        gbc.writeMem(0x8a8d, { 0x1b });
        gbc.step();
        EXPECT(0x17, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x61, gbc.c());
        EXPECT(0x3, gbc.d());
        EXPECT(0xae, gbc.e());
        EXPECT(0x73, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xbf91, gbc.sp());
        EXPECT(0x8a8e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8a8d));
        // 1B 0243
        gbc.setState(0x6c39, 0x9dab, 0x9d80, 0x2b2e, 0x4d60, 0x52f4, 0x0, 0x1);
        gbc.writeMem(0x6c39, { 0x1b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0x9dab, gbc.sp());
        EXPECT(0x6c3a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0244
        gbc.setState(0x4857, 0xfa15, 0xf0, 0xf1b4, 0x11b9, 0xcaf4, 0x0, 0x1);
        gbc.writeMem(0x4857, { 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0xf1, gbc.b());
        EXPECT(0xb4, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xfa15, gbc.sp());
        EXPECT(0x4858, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0245
        gbc.setState(0x6024, 0xd5f4, 0x48b0, 0x64ac, 0x98d8, 0x7fcc, 0x0, 0x0);
        gbc.writeMem(0x6024, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x64, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0x98, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0xd5f4, gbc.sp());
        EXPECT(0x6025, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0246
        gbc.setState(0x2334, 0xacac, 0x76a0, 0x3343, 0xf766, 0xb761, 0x1, 0x1);
        gbc.writeMem(0x2334, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xacac, gbc.sp());
        EXPECT(0x2335, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0247
        gbc.setState(0x6996, 0x63df, 0x6850, 0x797f, 0xb77, 0xddb6, 0x1, 0x1);
        gbc.writeMem(0x6996, { 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0x63df, gbc.sp());
        EXPECT(0x6997, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0248
        gbc.setState(0xed26, 0x79f8, 0xe7b0, 0x480a, 0xf44b, 0xcef5, 0x0, 0x0);
        gbc.writeMem(0xed26, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0xf4, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0x79f8, gbc.sp());
        EXPECT(0xed27, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xed26));
        // 1B 024A
        gbc.setState(0x3d4, 0xc6b5, 0x5960, 0xd093, 0x7ac5, 0x325d, 0x0, 0x1);
        gbc.writeMem(0x3d4, { 0x1b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x7a, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x5d, gbc.l());
        EXPECT(0xc6b5, gbc.sp());
        EXPECT(0x3d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 024B
        gbc.setState(0x9456, 0x99f, 0x6d00, 0x4d58, 0xc269, 0x1134, 0x1, 0x1);
        gbc.writeMem(0x9456, { 0x1b });
        gbc.step();
        EXPECT(0x6d, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x34, gbc.l());
        EXPECT(0x99f, gbc.sp());
        EXPECT(0x9457, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9456));
        // 1B 024C
        gbc.setState(0xed1b, 0xf01c, 0x5a40, 0xa3ea, 0x2c24, 0x243b, 0x0, 0x0);
        gbc.writeMem(0xed1b, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xf01c, gbc.sp());
        EXPECT(0xed1c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xed1b));
        // 1B 024D
        gbc.setState(0xbd86, 0xe390, 0xe030, 0x4e0e, 0xdf0a, 0xb666, 0x1, 0x0);
        gbc.writeMem(0xbd86, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x9, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0xe390, gbc.sp());
        EXPECT(0xbd87, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbd86));
        // 1B 024E
        gbc.setState(0xab9f, 0x560e, 0x9670, 0x9439, 0x271b, 0x71dc, 0x0, 0x1);
        gbc.writeMem(0xab9f, { 0x1b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x39, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x560e, gbc.sp());
        EXPECT(0xaba0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xab9f));
        // 1B 024F
        gbc.setState(0x2507, 0x8f38, 0x9ca0, 0x3c75, 0x7f88, 0x4720, 0x0, 0x1);
        gbc.writeMem(0x2507, { 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x3c, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x20, gbc.l());
        EXPECT(0x8f38, gbc.sp());
        EXPECT(0x2508, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0250
        gbc.setState(0xb866, 0x6a88, 0xe810, 0x73cb, 0x5350, 0x491, 0x1, 0x0);
        gbc.writeMem(0xb866, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xcb, gbc.c());
        EXPECT(0x53, gbc.d());
        EXPECT(0x4f, gbc.e());
        EXPECT(0x4, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x6a88, gbc.sp());
        EXPECT(0xb867, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb866));
        // 1B 0251
        gbc.setState(0x7599, 0xe060, 0xee80, 0xedea, 0x5ceb, 0x7a17, 0x1, 0x1);
        gbc.writeMem(0x7599, { 0x1b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xe060, gbc.sp());
        EXPECT(0x759a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0252
        gbc.setState(0x2294, 0x92ff, 0x20e0, 0xae06, 0xc7ea, 0x9445, 0x1, 0x1);
        gbc.writeMem(0x2294, { 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x92ff, gbc.sp());
        EXPECT(0x2295, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0253
        gbc.setState(0x35e1, 0x636a, 0x2370, 0x5940, 0x3c2a, 0x7b8a, 0x1, 0x1);
        gbc.writeMem(0x35e1, { 0x1b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x7b, gbc.h());
        EXPECT(0x8a, gbc.l());
        EXPECT(0x636a, gbc.sp());
        EXPECT(0x35e2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0254
        gbc.setState(0x1e06, 0xb29c, 0xddb0, 0x51df, 0x6c07, 0x7105, 0x0, 0x1);
        gbc.writeMem(0x1e06, { 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0xdf, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x71, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xb29c, gbc.sp());
        EXPECT(0x1e07, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0255
        gbc.setState(0x9ec5, 0xa5b4, 0xb6f0, 0x76e3, 0x60a5, 0xbdcd, 0x1, 0x1);
        gbc.writeMem(0x9ec5, { 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xbd, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0xa5b4, gbc.sp());
        EXPECT(0x9ec6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9ec5));
        // 1B 0256
        gbc.setState(0xcad4, 0x54ef, 0xdf40, 0xe4c2, 0x4, 0x7f60, 0x0, 0x0);
        gbc.writeMem(0xcad4, { 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0xe4, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0x54ef, gbc.sp());
        EXPECT(0xcad5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcad4));
        // 1B 0257
        gbc.setState(0x9c47, 0xd012, 0x2a80, 0xf326, 0xd4e1, 0xd560, 0x0, 0x0);
        gbc.writeMem(0x9c47, { 0x1b });
        gbc.step();
        EXPECT(0x2a, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x26, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x60, gbc.l());
        EXPECT(0xd012, gbc.sp());
        EXPECT(0x9c48, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9c47));
        // 1B 0258
        gbc.setState(0x7bf1, 0x51be, 0xd6c0, 0x7906, 0x7fed, 0x20b8, 0x1, 0x0);
        gbc.writeMem(0x7bf1, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x79, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x51be, gbc.sp());
        EXPECT(0x7bf2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0259
        gbc.setState(0x1560, 0x3cbf, 0x28a0, 0x1d36, 0x33b8, 0xccc, 0x0, 0x1);
        gbc.writeMem(0x1560, { 0x1b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xc, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x3cbf, gbc.sp());
        EXPECT(0x1561, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 025A
        gbc.setState(0xc08d, 0xe631, 0xe840, 0xc86f, 0x7c45, 0x2c19, 0x1, 0x1);
        gbc.writeMem(0xc08d, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xe631, gbc.sp());
        EXPECT(0xc08e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc08d));
        // 1B 025B
        gbc.setState(0x1be4, 0x58a4, 0x1150, 0x5131, 0x7c1b, 0x687b, 0x1, 0x0);
        gbc.writeMem(0x1be4, { 0x1b });
        gbc.step();
        EXPECT(0x11, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x7c, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x68, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x58a4, gbc.sp());
        EXPECT(0x1be5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 025C
        gbc.setState(0x23bb, 0xd57b, 0xb020, 0x565d, 0xacc0, 0x4f48, 0x1, 0x0);
        gbc.writeMem(0x23bb, { 0x1b });
        gbc.step();
        EXPECT(0xb0, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xac, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0xd57b, gbc.sp());
        EXPECT(0x23bc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 025D
        gbc.setState(0x8c5a, 0xf522, 0xa400, 0x1e11, 0x94bd, 0x44e3, 0x0, 0x0);
        gbc.writeMem(0x8c5a, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x44, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0xf522, gbc.sp());
        EXPECT(0x8c5b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8c5a));
        // 1B 025E
        gbc.setState(0x8a99, 0x95c7, 0x9d40, 0x46f4, 0xdec, 0xcf22, 0x0, 0x0);
        gbc.writeMem(0x8a99, { 0x1b });
        gbc.step();
        EXPECT(0x9d, gbc.a());
        EXPECT(0x46, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x95c7, gbc.sp());
        EXPECT(0x8a9a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8a99));
        // 1B 025F
        gbc.setState(0x3287, 0x7ae6, 0x1320, 0x6378, 0x7b23, 0xbc1, 0x1, 0x1);
        gbc.writeMem(0x3287, { 0x1b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x22, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xc1, gbc.l());
        EXPECT(0x7ae6, gbc.sp());
        EXPECT(0x3288, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0260
        gbc.setState(0x96dd, 0x6f2e, 0xaa40, 0x55c9, 0x48e9, 0xd745, 0x0, 0x1);
        gbc.writeMem(0x96dd, { 0x1b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xe8, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x6f2e, gbc.sp());
        EXPECT(0x96de, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x96dd));
        // 1B 0261
        gbc.setState(0x65, 0x8d28, 0x3a80, 0x1498, 0x4dc2, 0x9556, 0x1, 0x1);
        gbc.writeMem(0x65, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x8d28, gbc.sp());
        EXPECT(0x66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0262
        gbc.setState(0xbc78, 0x876a, 0x7e90, 0xb794, 0x6ceb, 0xf61f, 0x1, 0x1);
        gbc.writeMem(0xbc78, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x876a, gbc.sp());
        EXPECT(0xbc79, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbc78));
        // 1B 0263
        gbc.setState(0x1bd1, 0xd3f3, 0xc6e0, 0xd55d, 0x91d6, 0x8d23, 0x1, 0x1);
        gbc.writeMem(0x1bd1, { 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x91, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0xd3f3, gbc.sp());
        EXPECT(0x1bd2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0264
        gbc.setState(0x5b17, 0xb81f, 0x38b0, 0x9166, 0xb010, 0xd0d5, 0x1, 0x1);
        gbc.writeMem(0x5b17, { 0x1b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0x91, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xb0, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0xb81f, gbc.sp());
        EXPECT(0x5b18, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0265
        gbc.setState(0x107f, 0x867e, 0x3900, 0x973f, 0x6b19, 0x7c7a, 0x1, 0x1);
        gbc.writeMem(0x107f, { 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x3f, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x867e, gbc.sp());
        EXPECT(0x1080, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0266
        gbc.setState(0x2521, 0xbf57, 0xcb80, 0x6a6f, 0x9f3e, 0x2465, 0x1, 0x0);
        gbc.writeMem(0x2521, { 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x6f, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xbf57, gbc.sp());
        EXPECT(0x2522, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0267
        gbc.setState(0x9b02, 0x51ff, 0x86f0, 0xa0ae, 0x8b83, 0x283f, 0x0, 0x0);
        gbc.writeMem(0x9b02, { 0x1b });
        gbc.step();
        EXPECT(0x86, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0x82, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x51ff, gbc.sp());
        EXPECT(0x9b03, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b02));
        // 1B 0268
        gbc.setState(0x1dc2, 0xe04c, 0xe8e0, 0xf478, 0xa32d, 0xa4c0, 0x0, 0x0);
        gbc.writeMem(0x1dc2, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xf4, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0x2c, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xc0, gbc.l());
        EXPECT(0xe04c, gbc.sp());
        EXPECT(0x1dc3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0269
        gbc.setState(0x88e4, 0xdb79, 0x52d0, 0xfe0, 0x373a, 0x1e4, 0x1, 0x0);
        gbc.writeMem(0x88e4, { 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0x37, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xe4, gbc.l());
        EXPECT(0xdb79, gbc.sp());
        EXPECT(0x88e5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x88e4));
        // 1B 026A
        gbc.setState(0x3b4d, 0x297a, 0xfb00, 0x92bf, 0xf043, 0x46c6, 0x1, 0x1);
        gbc.writeMem(0x3b4d, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x297a, gbc.sp());
        EXPECT(0x3b4e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 026B
        gbc.setState(0x62c0, 0x1c7c, 0xad90, 0xa777, 0xf904, 0x571e, 0x1, 0x1);
        gbc.writeMem(0x62c0, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x77, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0x1c7c, gbc.sp());
        EXPECT(0x62c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 026D
        gbc.setState(0xc8e5, 0x44a1, 0xe6a0, 0x1d58, 0x6886, 0xad62, 0x0, 0x1);
        gbc.writeMem(0xc8e5, { 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x58, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0x62, gbc.l());
        EXPECT(0x44a1, gbc.sp());
        EXPECT(0xc8e6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc8e5));
        // 1B 026E
        gbc.setState(0xab71, 0xdb5, 0x9570, 0x81d6, 0xfaf2, 0x88d6, 0x1, 0x0);
        gbc.writeMem(0xab71, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x81, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xfa, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0xdb5, gbc.sp());
        EXPECT(0xab72, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xab71));
        // 1B 026F
        gbc.setState(0x248e, 0xc4e6, 0x4760, 0x7c8c, 0x9e85, 0x850d, 0x0, 0x1);
        gbc.writeMem(0x248e, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x8c, gbc.c());
        EXPECT(0x9e, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0x85, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xc4e6, gbc.sp());
        EXPECT(0x248f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0270
        gbc.setState(0xc736, 0x854a, 0xbe60, 0x56c3, 0x62dc, 0x947b, 0x1, 0x0);
        gbc.writeMem(0xc736, { 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x56, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x854a, gbc.sp());
        EXPECT(0xc737, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc736));
        // 1B 0271
        gbc.setState(0x100a, 0xa1bd, 0xe990, 0xc211, 0x6c0f, 0xc41e, 0x1, 0x1);
        gbc.writeMem(0x100a, { 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xc2, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0x6c, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xa1bd, gbc.sp());
        EXPECT(0x100b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0272
        gbc.setState(0x898b, 0x807e, 0x75b0, 0xd86a, 0x1925, 0x7041, 0x0, 0x1);
        gbc.writeMem(0x898b, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xd8, gbc.b());
        EXPECT(0x6a, gbc.c());
        EXPECT(0x19, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0x807e, gbc.sp());
        EXPECT(0x898c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x898b));
        // 1B 0273
        gbc.setState(0xb4a, 0x75e8, 0x840, 0x42a8, 0x5728, 0xbc1d, 0x0, 0x1);
        gbc.writeMem(0xb4a, { 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x42, gbc.b());
        EXPECT(0xa8, gbc.c());
        EXPECT(0x57, gbc.d());
        EXPECT(0x27, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x75e8, gbc.sp());
        EXPECT(0xb4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0274
        gbc.setState(0x87e7, 0x2d10, 0x6070, 0x5881, 0xeb3d, 0x323f, 0x0, 0x0);
        gbc.writeMem(0x87e7, { 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x81, gbc.c());
        EXPECT(0xeb, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x2d10, gbc.sp());
        EXPECT(0x87e8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x87e7));
        // 1B 0275
        gbc.setState(0xbd72, 0xe976, 0x43c0, 0xebd5, 0x5214, 0x5000, 0x0, 0x1);
        gbc.writeMem(0xbd72, { 0x1b });
        gbc.step();
        EXPECT(0x43, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xe976, gbc.sp());
        EXPECT(0xbd73, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbd72));
        // 1B 0276
        gbc.setState(0x7ec3, 0xcaf6, 0xccc0, 0x5172, 0x28c5, 0x97d7, 0x0, 0x1);
        gbc.writeMem(0x7ec3, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0xcaf6, gbc.sp());
        EXPECT(0x7ec4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0277
        gbc.setState(0x4ad9, 0x2bbb, 0x9f10, 0x49c5, 0xbf85, 0xd2fb, 0x1, 0x0);
        gbc.writeMem(0x4ad9, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0xbf, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0x2bbb, gbc.sp());
        EXPECT(0x4ada, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0278
        gbc.setState(0xbb07, 0x526, 0xbc40, 0x69f1, 0x3c2c, 0x97ac, 0x0, 0x0);
        gbc.writeMem(0xbb07, { 0x1b });
        gbc.step();
        EXPECT(0xbc, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0x2b, gbc.e());
        EXPECT(0x97, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x526, gbc.sp());
        EXPECT(0xbb08, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbb07));
        // 1B 0279
        gbc.setState(0xf73, 0x3b25, 0x3e00, 0x2055, 0x6bc4, 0x8e22, 0x1, 0x0);
        gbc.writeMem(0xf73, { 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x55, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0xc3, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x3b25, gbc.sp());
        EXPECT(0xf74, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 027A
        gbc.setState(0xfa0, 0x4f03, 0x9360, 0x12ef, 0xa86d, 0x8e69, 0x0, 0x1);
        gbc.writeMem(0xfa0, { 0x1b });
        gbc.step();
        EXPECT(0x93, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0xef, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0x6c, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0x4f03, gbc.sp());
        EXPECT(0xfa1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 027B
        gbc.setState(0x1e29, 0x62f, 0xea40, 0xe309, 0xce7c, 0x4d00, 0x0, 0x0);
        gbc.writeMem(0x1e29, { 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x62f, gbc.sp());
        EXPECT(0x1e2a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 027C
        gbc.setState(0xd9de, 0x761e, 0xb560, 0xaff7, 0xca1d, 0x9ca4, 0x1, 0x1);
        gbc.writeMem(0xd9de, { 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0xf7, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0x761e, gbc.sp());
        EXPECT(0xd9df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd9de));
        // 1B 027D
        gbc.setState(0x33cb, 0x5c98, 0x3090, 0xf773, 0xaeb7, 0xb7b7, 0x0, 0x1);
        gbc.writeMem(0x33cb, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xf7, gbc.b());
        EXPECT(0x73, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x5c98, gbc.sp());
        EXPECT(0x33cc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 027E
        gbc.setState(0x55f0, 0x7799, 0x71b0, 0x3bab, 0x1e94, 0xeed7, 0x1, 0x0);
        gbc.writeMem(0x55f0, { 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x1e, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x7799, gbc.sp());
        EXPECT(0x55f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 027F
        gbc.setState(0x4c5e, 0x9726, 0x440, 0xbcb0, 0x7232, 0xe2f3, 0x0, 0x0);
        gbc.writeMem(0x4c5e, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xb0, gbc.c());
        EXPECT(0x72, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xf3, gbc.l());
        EXPECT(0x9726, gbc.sp());
        EXPECT(0x4c5f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0280
        gbc.setState(0x5221, 0xa705, 0x1070, 0xa57a, 0x21bf, 0x6017, 0x0, 0x1);
        gbc.writeMem(0x5221, { 0x1b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x17, gbc.l());
        EXPECT(0xa705, gbc.sp());
        EXPECT(0x5222, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0281
        gbc.setState(0x84d4, 0xed88, 0x2990, 0xa792, 0x4cee, 0xd5ab, 0x0, 0x0);
        gbc.writeMem(0x84d4, { 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0xa7, gbc.b());
        EXPECT(0x92, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xed88, gbc.sp());
        EXPECT(0x84d5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x84d4));
        // 1B 0282
        gbc.setState(0x1c97, 0xd4a9, 0xe6c0, 0x6390, 0xe359, 0x14a9, 0x0, 0x1);
        gbc.writeMem(0x1c97, { 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x14, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0xd4a9, gbc.sp());
        EXPECT(0x1c98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0283
        gbc.setState(0xb890, 0xbd55, 0x2920, 0x566, 0x8724, 0xb1f7, 0x1, 0x0);
        gbc.writeMem(0xb890, { 0x1b });
        gbc.step();
        EXPECT(0x29, gbc.a());
        EXPECT(0x5, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0x87, gbc.d());
        EXPECT(0x23, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf7, gbc.l());
        EXPECT(0xbd55, gbc.sp());
        EXPECT(0xb891, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb890));
        // 1B 0284
        gbc.setState(0xbfc1, 0x91b, 0x9630, 0xea93, 0x1bc7, 0xe218, 0x0, 0x0);
        gbc.writeMem(0xbfc1, { 0x1b });
        gbc.step();
        EXPECT(0x96, gbc.a());
        EXPECT(0xea, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x18, gbc.l());
        EXPECT(0x91b, gbc.sp());
        EXPECT(0xbfc2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbfc1));
        // 1B 0285
        gbc.setState(0xe95a, 0x119b, 0x2590, 0xbfba, 0xa447, 0xd8a6, 0x1, 0x0);
        gbc.writeMem(0xe95a, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0xbf, gbc.b());
        EXPECT(0xba, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0x46, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xa6, gbc.l());
        EXPECT(0x119b, gbc.sp());
        EXPECT(0xe95b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe95a));
        // 1B 0286
        gbc.setState(0x5b31, 0x23d9, 0x3830, 0xd3c7, 0x4e7d, 0x3c11, 0x1, 0x1);
        gbc.writeMem(0x5b31, { 0x1b });
        gbc.step();
        EXPECT(0x38, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x23d9, gbc.sp());
        EXPECT(0x5b32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0287
        gbc.setState(0xbcca, 0x91eb, 0xfe10, 0xd652, 0x14a1, 0xe99f, 0x0, 0x0);
        gbc.writeMem(0xbcca, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x52, gbc.c());
        EXPECT(0x14, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x91eb, gbc.sp());
        EXPECT(0xbccb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbcca));
        // 1B 0288
        gbc.setState(0xba3c, 0x91a9, 0x62d0, 0xc9cc, 0x3bda, 0xb10c, 0x1, 0x1);
        gbc.writeMem(0xba3c, { 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xcc, gbc.c());
        EXPECT(0x3b, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x91a9, gbc.sp());
        EXPECT(0xba3d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xba3c));
        // 1B 0289
        gbc.setState(0xb22f, 0x5c30, 0x2f40, 0x2009, 0x6e2a, 0xab6a, 0x1, 0x1);
        gbc.writeMem(0xb22f, { 0x1b });
        gbc.step();
        EXPECT(0x2f, gbc.a());
        EXPECT(0x20, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x6e, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0xab, gbc.h());
        EXPECT(0x6a, gbc.l());
        EXPECT(0x5c30, gbc.sp());
        EXPECT(0xb230, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb22f));
        // 1B 028A
        gbc.setState(0x9f9b, 0xc23c, 0xaba0, 0xd662, 0xf86e, 0x20fc, 0x1, 0x0);
        gbc.writeMem(0x9f9b, { 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xd6, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x20, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xc23c, gbc.sp());
        EXPECT(0x9f9c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9f9b));
        // 1B 028B
        gbc.setState(0xa788, 0x6bc5, 0xffc0, 0xc727, 0x8a82, 0xf7e5, 0x0, 0x0);
        gbc.writeMem(0xa788, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xc7, gbc.b());
        EXPECT(0x27, gbc.c());
        EXPECT(0x8a, gbc.d());
        EXPECT(0x81, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0xe5, gbc.l());
        EXPECT(0x6bc5, gbc.sp());
        EXPECT(0xa789, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa788));
        // 1B 028C
        gbc.setState(0xb2de, 0x15d6, 0xecc0, 0x73a7, 0xaac8, 0xade2, 0x1, 0x1);
        gbc.writeMem(0xb2de, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x15d6, gbc.sp());
        EXPECT(0xb2df, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb2de));
        // 1B 028D
        gbc.setState(0xb385, 0xd3e, 0xcc60, 0xd4c2, 0xe57e, 0x7f6f, 0x1, 0x1);
        gbc.writeMem(0xb385, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x7f, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0xd3e, gbc.sp());
        EXPECT(0xb386, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb385));
        // 1B 028E
        gbc.setState(0xbf11, 0x7c55, 0x16e0, 0x5564, 0x16f5, 0x264, 0x0, 0x1);
        gbc.writeMem(0xbf11, { 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0x64, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x7c55, gbc.sp());
        EXPECT(0xbf12, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbf11));
        // 1B 0290
        gbc.setState(0xc107, 0xc2f3, 0xa4c0, 0x8209, 0x6ad9, 0x3c82, 0x1, 0x1);
        gbc.writeMem(0xc107, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0x82, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x6a, gbc.d());
        EXPECT(0xd8, gbc.e());
        EXPECT(0x3c, gbc.h());
        EXPECT(0x82, gbc.l());
        EXPECT(0xc2f3, gbc.sp());
        EXPECT(0xc108, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc107));
        // 1B 0291
        gbc.setState(0x6f8a, 0x1cb9, 0xdb10, 0x4fa5, 0xb342, 0x1161, 0x1, 0x0);
        gbc.writeMem(0x6f8a, { 0x1b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x1cb9, gbc.sp());
        EXPECT(0x6f8b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0292
        gbc.setState(0xdc6, 0x8ff2, 0x9210, 0x2643, 0xe3bd, 0x806, 0x1, 0x1);
        gbc.writeMem(0xdc6, { 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0x26, gbc.b());
        EXPECT(0x43, gbc.c());
        EXPECT(0xe3, gbc.d());
        EXPECT(0xbc, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x6, gbc.l());
        EXPECT(0x8ff2, gbc.sp());
        EXPECT(0xdc7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0293
        gbc.setState(0x5f2a, 0x8947, 0x9580, 0x85be, 0xec5d, 0x9dc7, 0x1, 0x1);
        gbc.writeMem(0x5f2a, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0xbe, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x5c, gbc.e());
        EXPECT(0x9d, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x8947, gbc.sp());
        EXPECT(0x5f2b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0294
        gbc.setState(0x668a, 0x5016, 0x75b0, 0xce37, 0xfb5a, 0xf48e, 0x1, 0x0);
        gbc.writeMem(0x668a, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xce, gbc.b());
        EXPECT(0x37, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0x5016, gbc.sp());
        EXPECT(0x668b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0295
        gbc.setState(0x7060, 0xff6d, 0x1f90, 0xfcdb, 0x299d, 0x595, 0x0, 0x0);
        gbc.writeMem(0x7060, { 0x1b });
        gbc.step();
        EXPECT(0x1f, gbc.a());
        EXPECT(0xfc, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x29, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x95, gbc.l());
        EXPECT(0xff6d, gbc.sp());
        EXPECT(0x7061, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0296
        gbc.setState(0xb31b, 0x71e, 0xd800, 0x7171, 0x79a0, 0xda23, 0x0, 0x0);
        gbc.writeMem(0xb31b, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x9f, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x23, gbc.l());
        EXPECT(0x71e, gbc.sp());
        EXPECT(0xb31c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb31b));
        // 1B 0297
        gbc.setState(0x5399, 0xd0c7, 0x7e70, 0xd02b, 0x687c, 0x5468, 0x1, 0x0);
        gbc.writeMem(0x5399, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xd0, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0xd0c7, gbc.sp());
        EXPECT(0x539a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0298
        gbc.setState(0x975d, 0xb6d4, 0x4290, 0x55b9, 0xdf05, 0x3ded, 0x0, 0x1);
        gbc.writeMem(0x975d, { 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xb9, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xb6d4, gbc.sp());
        EXPECT(0x975e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x975d));
        // 1B 0299
        gbc.setState(0xc324, 0x449c, 0x2650, 0x7ae5, 0xf319, 0xcd4d, 0x1, 0x0);
        gbc.writeMem(0xc324, { 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0xf3, gbc.d());
        EXPECT(0x18, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0x449c, gbc.sp());
        EXPECT(0xc325, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc324));
        // 1B 029B
        gbc.setState(0xbaac, 0x3c7, 0xd6e0, 0xc354, 0xec2e, 0x457c, 0x1, 0x1);
        gbc.writeMem(0xbaac, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xec, gbc.d());
        EXPECT(0x2d, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x3c7, gbc.sp());
        EXPECT(0xbaad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbaac));
        // 1B 029C
        gbc.setState(0x3b4f, 0x98fb, 0x6e80, 0x62a4, 0x133a, 0x6eab, 0x1, 0x0);
        gbc.writeMem(0x3b4f, { 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0x98fb, gbc.sp());
        EXPECT(0x3b50, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 029D
        gbc.setState(0x8a51, 0x5ffe, 0x8010, 0xad78, 0xf35, 0x72fd, 0x0, 0x1);
        gbc.writeMem(0x8a51, { 0x1b });
        gbc.step();
        EXPECT(0x80, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x34, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x5ffe, gbc.sp());
        EXPECT(0x8a52, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8a51));
        // 1B 029E
        gbc.setState(0xf38, 0x8a35, 0x9f10, 0x9206, 0xa6a9, 0x225, 0x0, 0x0);
        gbc.writeMem(0xf38, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xa6, gbc.d());
        EXPECT(0xa8, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x8a35, gbc.sp());
        EXPECT(0xf39, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 029F
        gbc.setState(0x59b4, 0x601f, 0xd980, 0xcb60, 0x6b5c, 0xbc48, 0x1, 0x0);
        gbc.writeMem(0x59b4, { 0x1b });
        gbc.step();
        EXPECT(0xd9, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xbc, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x601f, gbc.sp());
        EXPECT(0x59b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02A0
        gbc.setState(0xad08, 0x1e0a, 0x3e10, 0x1ea3, 0xf25, 0x557a, 0x1, 0x0);
        gbc.writeMem(0xad08, { 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xf, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x1e0a, gbc.sp());
        EXPECT(0xad09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xad08));
        // 1B 02A1
        gbc.setState(0x325f, 0xee04, 0x4ae0, 0x7da, 0xaa7b, 0xbb19, 0x0, 0x0);
        gbc.writeMem(0x325f, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0x7a, gbc.e());
        EXPECT(0xbb, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xee04, gbc.sp());
        EXPECT(0x3260, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02A2
        gbc.setState(0x6d63, 0xc497, 0x810, 0x94af, 0xcec2, 0x7a30, 0x1, 0x1);
        gbc.writeMem(0x6d63, { 0x1b });
        gbc.step();
        EXPECT(0x8, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0xc497, gbc.sp());
        EXPECT(0x6d64, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02A3
        gbc.setState(0xa71, 0xdb5a, 0x400, 0x36da, 0x9bc6, 0xba08, 0x0, 0x0);
        gbc.writeMem(0xa71, { 0x1b });
        gbc.step();
        EXPECT(0x4, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0xdb5a, gbc.sp());
        EXPECT(0xa72, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02A4
        gbc.setState(0x7fea, 0xb8c6, 0xcbb0, 0xc9e0, 0xaede, 0x4777, 0x0, 0x0);
        gbc.writeMem(0x7fea, { 0x1b });
        gbc.step();
        EXPECT(0xcb, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0xe0, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb8c6, gbc.sp());
        EXPECT(0x7feb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02A5
        gbc.setState(0xc63c, 0x4acd, 0xe040, 0xe5fe, 0x7101, 0xb6e2, 0x0, 0x0);
        gbc.writeMem(0xc63c, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0xe5, gbc.b());
        EXPECT(0xfe, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0x0, gbc.e());
        EXPECT(0xb6, gbc.h());
        EXPECT(0xe2, gbc.l());
        EXPECT(0x4acd, gbc.sp());
        EXPECT(0xc63d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc63c));
        // 1B 02A6
        gbc.setState(0x3dac, 0x2940, 0x2e50, 0x8941, 0xd1c5, 0xa845, 0x1, 0x0);
        gbc.writeMem(0x3dac, { 0x1b });
        gbc.step();
        EXPECT(0x2e, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x45, gbc.l());
        EXPECT(0x2940, gbc.sp());
        EXPECT(0x3dad, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02A7
        gbc.setState(0x2282, 0x6708, 0x7dd0, 0x9b14, 0xc95b, 0xd535, 0x1, 0x0);
        gbc.writeMem(0x2282, { 0x1b });
        gbc.step();
        EXPECT(0x7d, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0xd5, gbc.h());
        EXPECT(0x35, gbc.l());
        EXPECT(0x6708, gbc.sp());
        EXPECT(0x2283, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02A8
        gbc.setState(0x10af, 0xf3d1, 0x62b0, 0xef3d, 0xb65a, 0xd2fb, 0x1, 0x0);
        gbc.writeMem(0x10af, { 0x1b });
        gbc.step();
        EXPECT(0x62, gbc.a());
        EXPECT(0xef, gbc.b());
        EXPECT(0x3d, gbc.c());
        EXPECT(0xb6, gbc.d());
        EXPECT(0x59, gbc.e());
        EXPECT(0xd2, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xf3d1, gbc.sp());
        EXPECT(0x10b0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02A9
        gbc.setState(0x808b, 0xd312, 0xe0e0, 0x769, 0x5a70, 0x4271, 0x0, 0x0);
        gbc.writeMem(0x808b, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0x5a, gbc.d());
        EXPECT(0x6f, gbc.e());
        EXPECT(0x42, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0xd312, gbc.sp());
        EXPECT(0x808c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x808b));
        // 1B 02AA
        gbc.setState(0x61b0, 0x13df, 0xb8a0, 0x1491, 0xd766, 0xa96f, 0x1, 0x1);
        gbc.writeMem(0x61b0, { 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0x91, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0x6f, gbc.l());
        EXPECT(0x13df, gbc.sp());
        EXPECT(0x61b1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02AB
        gbc.setState(0x300c, 0xe58, 0xef70, 0x4982, 0x4adc, 0xc5cb, 0x1, 0x1);
        gbc.writeMem(0x300c, { 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0xcb, gbc.l());
        EXPECT(0xe58, gbc.sp());
        EXPECT(0x300d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02AC
        gbc.setState(0x47d0, 0xd0c3, 0xbf00, 0xb17b, 0x9a98, 0x80a8, 0x1, 0x1);
        gbc.writeMem(0x47d0, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x9a, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0xd0c3, gbc.sp());
        EXPECT(0x47d1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02AD
        gbc.setState(0x4b8f, 0xe8fa, 0xa5d0, 0x3a17, 0xa214, 0x79db, 0x1, 0x0);
        gbc.writeMem(0x4b8f, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x17, gbc.c());
        EXPECT(0xa2, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xdb, gbc.l());
        EXPECT(0xe8fa, gbc.sp());
        EXPECT(0x4b90, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02AE
        gbc.setState(0x7bc, 0x27f0, 0xa130, 0x67aa, 0x2faa, 0xc300, 0x0, 0x0);
        gbc.writeMem(0x7bc, { 0x1b });
        gbc.step();
        EXPECT(0xa1, gbc.a());
        EXPECT(0x67, gbc.b());
        EXPECT(0xaa, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xa9, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0x27f0, gbc.sp());
        EXPECT(0x7bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02AF
        gbc.setState(0xb84b, 0x223b, 0x8e10, 0xc57f, 0xed3, 0xb776, 0x1, 0x0);
        gbc.writeMem(0xb84b, { 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x223b, gbc.sp());
        EXPECT(0xb84c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb84b));
        // 1B 02B0
        gbc.setState(0x7493, 0x399e, 0x8260, 0x1c48, 0xdf52, 0x246b, 0x0, 0x0);
        gbc.writeMem(0x7493, { 0x1b });
        gbc.step();
        EXPECT(0x82, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0xdf, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x399e, gbc.sp());
        EXPECT(0x7494, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02B1
        gbc.setState(0x8df7, 0x72d1, 0xe310, 0x9908, 0x26ca, 0xc99b, 0x0, 0x0);
        gbc.writeMem(0x8df7, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x72d1, gbc.sp());
        EXPECT(0x8df8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8df7));
        // 1B 02B2
        gbc.setState(0x186f, 0x2d5d, 0x1800, 0xe0e4, 0x6b31, 0xc683, 0x0, 0x1);
        gbc.writeMem(0x186f, { 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x30, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x2d5d, gbc.sp());
        EXPECT(0x1870, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02B3
        gbc.setState(0x90fa, 0xe1ef, 0xda50, 0x7390, 0x25b7, 0x6688, 0x1, 0x1);
        gbc.writeMem(0x90fa, { 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0x25, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xe1ef, gbc.sp());
        EXPECT(0x90fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x90fa));
        // 1B 02B4
        gbc.setState(0x3bb8, 0xe404, 0x5d50, 0x584d, 0x490c, 0x175b, 0x0, 0x0);
        gbc.writeMem(0x3bb8, { 0x1b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0xb, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0xe404, gbc.sp());
        EXPECT(0x3bb9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02B6
        gbc.setState(0xbab4, 0x4c5, 0x8b50, 0x5972, 0xce3b, 0x989e, 0x1, 0x0);
        gbc.writeMem(0xbab4, { 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x72, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x4c5, gbc.sp());
        EXPECT(0xbab5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbab4));
        // 1B 02B7
        gbc.setState(0x33df, 0x3ed2, 0x4090, 0xb31b, 0x8ddb, 0x3eee, 0x0, 0x1);
        gbc.writeMem(0x33df, { 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xb3, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x3e, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0x3ed2, gbc.sp());
        EXPECT(0x33e0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02B8
        gbc.setState(0x8a22, 0x83e8, 0xeb50, 0x8319, 0xe03d, 0x673b, 0x1, 0x1);
        gbc.writeMem(0x8a22, { 0x1b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0x83e8, gbc.sp());
        EXPECT(0x8a23, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8a22));
        // 1B 02B9
        gbc.setState(0xea66, 0x8f52, 0xe260, 0x49e2, 0x5230, 0xa486, 0x1, 0x0);
        gbc.writeMem(0xea66, { 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x52, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x8f52, gbc.sp());
        EXPECT(0xea67, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xea66));
        // 1B 02BA
        gbc.setState(0x5548, 0xd48, 0x7910, 0xdb16, 0x811e, 0x29ac, 0x1, 0x1);
        gbc.writeMem(0x5548, { 0x1b });
        gbc.step();
        EXPECT(0x79, gbc.a());
        EXPECT(0xdb, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0xd48, gbc.sp());
        EXPECT(0x5549, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02BB
        gbc.setState(0xca2c, 0x6e6f, 0x28a0, 0x50a4, 0xc6e6, 0x7dd, 0x0, 0x0);
        gbc.writeMem(0xca2c, { 0x1b });
        gbc.step();
        EXPECT(0x28, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xa4, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x6e6f, gbc.sp());
        EXPECT(0xca2d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xca2c));
        // 1B 02BC
        gbc.setState(0x7193, 0x87f8, 0x6900, 0x718e, 0x4359, 0xaaef, 0x0, 0x0);
        gbc.writeMem(0x7193, { 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0x71, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x43, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0xaa, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x87f8, gbc.sp());
        EXPECT(0x7194, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02BD
        gbc.setState(0x7c, 0x9833, 0x2590, 0x16c6, 0xa3fe, 0x23b2, 0x1, 0x0);
        gbc.writeMem(0x7c, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0xa3, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0x23, gbc.h());
        EXPECT(0xb2, gbc.l());
        EXPECT(0x9833, gbc.sp());
        EXPECT(0x7d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02BE
        gbc.setState(0x9b97, 0x8caa, 0xef00, 0xab31, 0xf8ed, 0xa4bd, 0x1, 0x0);
        gbc.writeMem(0x9b97, { 0x1b });
        gbc.step();
        EXPECT(0xef, gbc.a());
        EXPECT(0xab, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0xf8, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xa4, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0x8caa, gbc.sp());
        EXPECT(0x9b98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b97));
        // 1B 02C0
        gbc.setState(0x7963, 0xcb3a, 0x1980, 0x802c, 0x5c9d, 0x671e, 0x0, 0x1);
        gbc.writeMem(0x7963, { 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x80, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x9c, gbc.e());
        EXPECT(0x67, gbc.h());
        EXPECT(0x1e, gbc.l());
        EXPECT(0xcb3a, gbc.sp());
        EXPECT(0x7964, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C1
        gbc.setState(0x1f87, 0xe045, 0x95c0, 0x835, 0xef59, 0x66ad, 0x1, 0x0);
        gbc.writeMem(0x1f87, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x8, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0x58, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0xe045, gbc.sp());
        EXPECT(0x1f88, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C2
        gbc.setState(0xcc4, 0x7c5e, 0x5200, 0x996b, 0xf6c8, 0x9986, 0x1, 0x0);
        gbc.writeMem(0xcc4, { 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0x7c5e, gbc.sp());
        EXPECT(0xcc5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C3
        gbc.setState(0xef3f, 0x478e, 0x5120, 0x5430, 0x680f, 0xc585, 0x1, 0x0);
        gbc.writeMem(0xef3f, { 0x1b });
        gbc.step();
        EXPECT(0x51, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x478e, gbc.sp());
        EXPECT(0xef40, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xef3f));
        // 1B 02C4
        gbc.setState(0x207c, 0xf4b4, 0x4ae0, 0x4fe1, 0x4edd, 0xc83c, 0x0, 0x0);
        gbc.writeMem(0x207c, { 0x1b });
        gbc.step();
        EXPECT(0x4a, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0x4e, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xc8, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xf4b4, gbc.sp());
        EXPECT(0x207d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C5
        gbc.setState(0x3bc4, 0x1f, 0x8390, 0xbcc9, 0xc418, 0xe924, 0x0, 0x0);
        gbc.writeMem(0x3bc4, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xe9, gbc.h());
        EXPECT(0x24, gbc.l());
        EXPECT(0x1f, gbc.sp());
        EXPECT(0x3bc5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02C7
        gbc.setState(0xc8, 0x3bca, 0xfea0, 0x2e7a, 0xe222, 0xf21d, 0x1, 0x1);
        gbc.writeMem(0xc8, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x2e, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x3bca, gbc.sp());
        EXPECT(0xc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C8
        gbc.setState(0x73f6, 0x5add, 0xf380, 0x9ce3, 0x8122, 0x136b, 0x1, 0x1);
        gbc.writeMem(0x73f6, { 0x1b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0x9c, gbc.b());
        EXPECT(0xe3, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x21, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0x6b, gbc.l());
        EXPECT(0x5add, gbc.sp());
        EXPECT(0x73f7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02C9
        gbc.setState(0x16e3, 0xd0c7, 0x9420, 0xcb34, 0xc69a, 0x834c, 0x0, 0x0);
        gbc.writeMem(0x16e3, { 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0xc6, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0xd0c7, gbc.sp());
        EXPECT(0x16e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02CA
        gbc.setState(0x9589, 0x6cfe, 0x41a0, 0x93fd, 0x9529, 0x79c3, 0x1, 0x0);
        gbc.writeMem(0x9589, { 0x1b });
        gbc.step();
        EXPECT(0x41, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x79, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x6cfe, gbc.sp());
        EXPECT(0x958a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9589));
        // 1B 02CB
        gbc.setState(0x9de7, 0xa264, 0xda40, 0x2b0e, 0x4a08, 0xfe00, 0x1, 0x0);
        gbc.writeMem(0x9de7, { 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xe, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0x7, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x0, gbc.l());
        EXPECT(0xa264, gbc.sp());
        EXPECT(0x9de8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9de7));
        // 1B 02CC
        gbc.setState(0x7e6f, 0x2262, 0x59c0, 0xee7, 0xcb9a, 0x83c9, 0x1, 0x0);
        gbc.writeMem(0x7e6f, { 0x1b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x99, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xc9, gbc.l());
        EXPECT(0x2262, gbc.sp());
        EXPECT(0x7e70, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02CD
        gbc.setState(0x666b, 0xeefb, 0x3c00, 0xc00f, 0x10da, 0x82b3, 0x1, 0x0);
        gbc.writeMem(0x666b, { 0x1b });
        gbc.step();
        EXPECT(0x3c, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0x10, gbc.d());
        EXPECT(0xd9, gbc.e());
        EXPECT(0x82, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xeefb, gbc.sp());
        EXPECT(0x666c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02CE
        gbc.setState(0x3ab2, 0x603f, 0xfb00, 0x7848, 0x58f, 0xe5ad, 0x1, 0x0);
        gbc.writeMem(0x3ab2, { 0x1b });
        gbc.step();
        EXPECT(0xfb, gbc.a());
        EXPECT(0x78, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x5, gbc.d());
        EXPECT(0x8e, gbc.e());
        EXPECT(0xe5, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x603f, gbc.sp());
        EXPECT(0x3ab3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02CF
        gbc.setState(0x76c5, 0xfffb, 0x1970, 0x4385, 0x28e6, 0x89a2, 0x0, 0x1);
        gbc.writeMem(0x76c5, { 0x1b });
        gbc.step();
        EXPECT(0x19, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x85, gbc.c());
        EXPECT(0x28, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x89, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0xfffb, gbc.sp());
        EXPECT(0x76c6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02D0
        gbc.setState(0x7ef7, 0x5f74, 0x9080, 0x1d65, 0xae69, 0x640b, 0x1, 0x0);
        gbc.writeMem(0x7ef7, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0x1d, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x68, gbc.e());
        EXPECT(0x64, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x5f74, gbc.sp());
        EXPECT(0x7ef8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02D1
        gbc.setState(0x1263, 0x9964, 0x9010, 0xa5a1, 0x5c25, 0x2b3d, 0x0, 0x1);
        gbc.writeMem(0x1263, { 0x1b });
        gbc.step();
        EXPECT(0x90, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xa1, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x2b, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x9964, gbc.sp());
        EXPECT(0x1264, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02D2
        gbc.setState(0x89e2, 0x9e14, 0x9bd0, 0x74ee, 0xcc71, 0x568, 0x1, 0x0);
        gbc.writeMem(0x89e2, { 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0x74, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0x70, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x68, gbc.l());
        EXPECT(0x9e14, gbc.sp());
        EXPECT(0x89e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x89e2));
        // 1B 02D4
        gbc.setState(0x82ea, 0x3931, 0x6970, 0xba14, 0xdaef, 0xfdbc, 0x1, 0x0);
        gbc.writeMem(0x82ea, { 0x1b });
        gbc.step();
        EXPECT(0x69, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0xfd, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x3931, gbc.sp());
        EXPECT(0x82eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x82ea));
        // 1B 02D5
        gbc.setState(0x7602, 0x402f, 0xdd10, 0xddd2, 0x82dc, 0x9f1d, 0x0, 0x0);
        gbc.writeMem(0x7602, { 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0x82, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0x402f, gbc.sp());
        EXPECT(0x7603, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02D6
        gbc.setState(0xe309, 0x54, 0x6c70, 0x6ed3, 0x1bd6, 0x3daf, 0x0, 0x1);
        gbc.writeMem(0xe309, { 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x6e, gbc.b());
        EXPECT(0xd3, gbc.c());
        EXPECT(0x1b, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x3d, gbc.h());
        EXPECT(0xaf, gbc.l());
        EXPECT(0x54, gbc.sp());
        EXPECT(0xe30a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe309));
        // 1B 02D7
        gbc.setState(0xa6e8, 0x9015, 0x2d10, 0x3090, 0xb7be, 0xfd9, 0x0, 0x1);
        gbc.writeMem(0xa6e8, { 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xf, gbc.h());
        EXPECT(0xd9, gbc.l());
        EXPECT(0x9015, gbc.sp());
        EXPECT(0xa6e9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa6e8));
        // 1B 02D8
        gbc.setState(0xe579, 0x8f40, 0x5630, 0x9778, 0xc2a5, 0x474f, 0x1, 0x1);
        gbc.writeMem(0xe579, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0x47, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0x8f40, gbc.sp());
        EXPECT(0xe57a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe579));
        // 1B 02D9
        gbc.setState(0xb022, 0xc84d, 0x30f0, 0xbb08, 0xe9b1, 0x5241, 0x1, 0x1);
        gbc.writeMem(0xb022, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xb0, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xc84d, gbc.sp());
        EXPECT(0xb023, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb022));
        // 1B 02DA
        gbc.setState(0xb993, 0xfb81, 0x6b40, 0x6160, 0xe2d4, 0xa0f6, 0x1, 0x0);
        gbc.writeMem(0xb993, { 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0x61, gbc.b());
        EXPECT(0x60, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0xf6, gbc.l());
        EXPECT(0xfb81, gbc.sp());
        EXPECT(0xb994, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb993));
        // 1B 02DB
        gbc.setState(0x2ce1, 0x7b59, 0x4870, 0x1971, 0x4f99, 0xc4c3, 0x1, 0x1);
        gbc.writeMem(0x2ce1, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0x98, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x7b59, gbc.sp());
        EXPECT(0x2ce2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02DC
        gbc.setState(0xc068, 0x141b, 0xa470, 0xc02c, 0x123a, 0xdab7, 0x1, 0x0);
        gbc.writeMem(0xc068, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x12, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xb7, gbc.l());
        EXPECT(0x141b, gbc.sp());
        EXPECT(0xc069, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc068));
        // 1B 02DD
        gbc.setState(0x35ff, 0xcb77, 0xb850, 0xf89b, 0x6038, 0xf3a4, 0x1, 0x0);
        gbc.writeMem(0x35ff, { 0x1b });
        gbc.step();
        EXPECT(0xb8, gbc.a());
        EXPECT(0xf8, gbc.b());
        EXPECT(0x9b, gbc.c());
        EXPECT(0x60, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xcb77, gbc.sp());
        EXPECT(0x3600, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02DE
        gbc.setState(0x4e2d, 0xbae3, 0x9780, 0xa28e, 0x2407, 0xe093, 0x1, 0x1);
        gbc.writeMem(0x4e2d, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x8e, gbc.c());
        EXPECT(0x24, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xbae3, gbc.sp());
        EXPECT(0x4e2e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02DF
        gbc.setState(0xa911, 0xb230, 0xe8d0, 0xcb1b, 0xa94, 0xff19, 0x1, 0x0);
        gbc.writeMem(0xa911, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xcb, gbc.b());
        EXPECT(0x1b, gbc.c());
        EXPECT(0xa, gbc.d());
        EXPECT(0x93, gbc.e());
        EXPECT(0xff, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xb230, gbc.sp());
        EXPECT(0xa912, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa911));
        // 1B 02E1
        gbc.setState(0x8fec, 0xa1ff, 0x4e40, 0x7a93, 0xb1b9, 0x7638, 0x1, 0x1);
        gbc.writeMem(0x8fec, { 0x1b });
        gbc.step();
        EXPECT(0x4e, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x93, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0xb8, gbc.e());
        EXPECT(0x76, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xa1ff, gbc.sp());
        EXPECT(0x8fed, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8fec));
        // 1B 02E2
        gbc.setState(0xa0da, 0xf620, 0xe080, 0x8f78, 0xeec5, 0xd072, 0x0, 0x1);
        gbc.writeMem(0xa0da, { 0x1b });
        gbc.step();
        EXPECT(0xe0, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x78, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0xf620, gbc.sp());
        EXPECT(0xa0db, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa0da));
        // 1B 02E4
        gbc.setState(0x6d9d, 0xb44d, 0x6490, 0xcfb2, 0x20ad, 0x8b93, 0x0, 0x1);
        gbc.writeMem(0x6d9d, { 0x1b });
        gbc.step();
        EXPECT(0x64, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x93, gbc.l());
        EXPECT(0xb44d, gbc.sp());
        EXPECT(0x6d9e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02E5
        gbc.setState(0xd88e, 0x4570, 0x8c90, 0xeeb6, 0x686f, 0x92a8, 0x1, 0x1);
        gbc.writeMem(0xd88e, { 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xb6, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x6e, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xa8, gbc.l());
        EXPECT(0x4570, gbc.sp());
        EXPECT(0xd88f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd88e));
        // 1B 02E6
        gbc.setState(0x1619, 0xf7a, 0xd3b0, 0x8c14, 0x6b3d, 0x2f5, 0x0, 0x0);
        gbc.writeMem(0x1619, { 0x1b });
        gbc.step();
        EXPECT(0xd3, gbc.a());
        EXPECT(0x8c, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x6b, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xf7a, gbc.sp());
        EXPECT(0x161a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02E7
        gbc.setState(0x6316, 0x88d0, 0x59e0, 0x8dab, 0x68f8, 0x7799, 0x0, 0x1);
        gbc.writeMem(0x6316, { 0x1b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xab, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xf7, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x88d0, gbc.sp());
        EXPECT(0x6317, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02E8
        gbc.setState(0x4c40, 0x6fe0, 0x2660, 0xb55d, 0x4c32, 0xf307, 0x0, 0x1);
        gbc.writeMem(0x4c40, { 0x1b });
        gbc.step();
        EXPECT(0x26, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x31, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x6fe0, gbc.sp());
        EXPECT(0x4c41, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02E9
        gbc.setState(0xa6a1, 0x8baf, 0x10a0, 0x2f09, 0xa951, 0xd45b, 0x0, 0x0);
        gbc.writeMem(0xa6a1, { 0x1b });
        gbc.step();
        EXPECT(0x10, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0xa9, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0xd4, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x8baf, gbc.sp());
        EXPECT(0xa6a2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa6a1));
        // 1B 02EA
        gbc.setState(0x5f80, 0x7c14, 0x4d70, 0xcc50, 0xd02a, 0x7c7, 0x0, 0x0);
        gbc.writeMem(0x5f80, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x29, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0xc7, gbc.l());
        EXPECT(0x7c14, gbc.sp());
        EXPECT(0x5f81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02EB
        gbc.setState(0xd414, 0x148, 0xbaf0, 0xf5db, 0x6540, 0xf4cc, 0x1, 0x1);
        gbc.writeMem(0xd414, { 0x1b });
        gbc.step();
        EXPECT(0xba, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0xdb, gbc.c());
        EXPECT(0x65, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0xf4, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x148, gbc.sp());
        EXPECT(0xd415, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd414));
        // 1B 02EC
        gbc.setState(0xe45e, 0x461a, 0x24b0, 0xe22, 0x1641, 0x744e, 0x0, 0x1);
        gbc.writeMem(0xe45e, { 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xe, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x461a, gbc.sp());
        EXPECT(0xe45f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe45e));
        // 1B 02ED
        gbc.setState(0x2f25, 0x70f, 0x9790, 0xeb35, 0x2a60, 0x4d96, 0x1, 0x1);
        gbc.writeMem(0x2f25, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x35, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x4d, gbc.h());
        EXPECT(0x96, gbc.l());
        EXPECT(0x70f, gbc.sp());
        EXPECT(0x2f26, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02EE
        gbc.setState(0x9ac2, 0x9e0e, 0x6bb0, 0xed1a, 0x67c7, 0xae44, 0x1, 0x0);
        gbc.writeMem(0x9ac2, { 0x1b });
        gbc.step();
        EXPECT(0x6b, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0x1a, gbc.c());
        EXPECT(0x67, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0xae, gbc.h());
        EXPECT(0x44, gbc.l());
        EXPECT(0x9e0e, gbc.sp());
        EXPECT(0x9ac3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9ac2));
        // 1B 02EF
        gbc.setState(0x7fc8, 0xa263, 0x30a0, 0x50ee, 0x8640, 0x830d, 0x1, 0x0);
        gbc.writeMem(0x7fc8, { 0x1b });
        gbc.step();
        EXPECT(0x30, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xee, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x83, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0xa263, gbc.sp());
        EXPECT(0x7fc9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02F0
        gbc.setState(0xce0b, 0x2f33, 0xe80, 0x4d03, 0xd574, 0x40e6, 0x1, 0x1);
        gbc.writeMem(0xce0b, { 0x1b });
        gbc.step();
        EXPECT(0xe, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0xd5, gbc.d());
        EXPECT(0x73, gbc.e());
        EXPECT(0x40, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0x2f33, gbc.sp());
        EXPECT(0xce0c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xce0b));
        // 1B 02F1
        gbc.setState(0x4eff, 0xfe57, 0xc0e0, 0x49cd, 0xbd04, 0x4f4f, 0x0, 0x1);
        gbc.writeMem(0x4eff, { 0x1b });
        gbc.step();
        EXPECT(0xc0, gbc.a());
        EXPECT(0x49, gbc.b());
        EXPECT(0xcd, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0x4f, gbc.h());
        EXPECT(0x4f, gbc.l());
        EXPECT(0xfe57, gbc.sp());
        EXPECT(0x4f00, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02F2
        gbc.setState(0x5a0e, 0x7ca9, 0x6810, 0x8b33, 0x9b72, 0x7808, 0x1, 0x1);
        gbc.writeMem(0x5a0e, { 0x1b });
        gbc.step();
        EXPECT(0x68, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0x9b, gbc.d());
        EXPECT(0x71, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x8, gbc.l());
        EXPECT(0x7ca9, gbc.sp());
        EXPECT(0x5a0f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02F3
        gbc.setState(0x3d49, 0xc44a, 0x560, 0xc9f, 0x8440, 0x853, 0x1, 0x1);
        gbc.writeMem(0x3d49, { 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x3f, gbc.e());
        EXPECT(0x8, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0xc44a, gbc.sp());
        EXPECT(0x3d4a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02F4
        gbc.setState(0x8a19, 0x1560, 0x7610, 0xc956, 0x55d5, 0xe1ea, 0x0, 0x1);
        gbc.writeMem(0x8a19, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xc9, gbc.b());
        EXPECT(0x56, gbc.c());
        EXPECT(0x55, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x1560, gbc.sp());
        EXPECT(0x8a1a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8a19));
        // 1B 02F5
        gbc.setState(0xdd31, 0x76a, 0x92a0, 0xc567, 0xae3e, 0xc1fd, 0x0, 0x0);
        gbc.writeMem(0xdd31, { 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x67, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xc1, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x76a, gbc.sp());
        EXPECT(0xdd32, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdd31));
        // 1B 02F6
        gbc.setState(0x41ff, 0x5664, 0x6ae0, 0x45fa, 0xcdeb, 0x5742, 0x1, 0x0);
        gbc.writeMem(0x41ff, { 0x1b });
        gbc.step();
        EXPECT(0x6a, gbc.a());
        EXPECT(0x45, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0x5664, gbc.sp());
        EXPECT(0x4200, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02F7
        gbc.setState(0xb333, 0xada2, 0x560, 0xb81c, 0x8680, 0x5bfb, 0x0, 0x1);
        gbc.writeMem(0xb333, { 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xfb, gbc.l());
        EXPECT(0xada2, gbc.sp());
        EXPECT(0xb334, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb333));
        // 1B 02F9
        gbc.setState(0xb656, 0xe75f, 0x9200, 0xbcf4, 0xd01e, 0x1699, 0x0, 0x1);
        gbc.writeMem(0xb656, { 0x1b });
        gbc.step();
        EXPECT(0x92, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0xe75f, gbc.sp());
        EXPECT(0xb657, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb656));
        // 1B 02FA
        gbc.setState(0x4963, 0xbb80, 0xb900, 0x9229, 0x3ef0, 0xca86, 0x1, 0x1);
        gbc.writeMem(0x4963, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0x29, gbc.c());
        EXPECT(0x3e, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xbb80, gbc.sp());
        EXPECT(0x4964, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02FB
        gbc.setState(0xae50, 0x6663, 0xa7a0, 0x8e9e, 0x4fc6, 0xba47, 0x1, 0x0);
        gbc.writeMem(0xae50, { 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x4f, gbc.d());
        EXPECT(0xc5, gbc.e());
        EXPECT(0xba, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x6663, gbc.sp());
        EXPECT(0xae51, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xae50));
        // 1B 02FC
        gbc.setState(0x9257, 0x12e9, 0x7550, 0xe353, 0x8129, 0x1a71, 0x1, 0x1);
        gbc.writeMem(0x9257, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xe3, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0x28, gbc.e());
        EXPECT(0x1a, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x12e9, gbc.sp());
        EXPECT(0x9258, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9257));
        // 1B 02FD
        gbc.setState(0x1251, 0x1117, 0xac30, 0xb834, 0x4081, 0xb22e, 0x0, 0x0);
        gbc.writeMem(0x1251, { 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0xb8, gbc.b());
        EXPECT(0x34, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x80, gbc.e());
        EXPECT(0xb2, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x1117, gbc.sp());
        EXPECT(0x1252, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 02FE
        gbc.setState(0x63fa, 0xb918, 0xf1a0, 0x1c3c, 0x9313, 0x4591, 0x1, 0x1);
        gbc.writeMem(0x63fa, { 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x1c, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x93, gbc.d());
        EXPECT(0x12, gbc.e());
        EXPECT(0x45, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0xb918, gbc.sp());
        EXPECT(0x63fb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 02FF
        gbc.setState(0xcdec, 0xe936, 0x7710, 0xaf57, 0x1a6e, 0xd669, 0x0, 0x1);
        gbc.writeMem(0xcdec, { 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xaf, gbc.b());
        EXPECT(0x57, gbc.c());
        EXPECT(0x1a, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xe936, gbc.sp());
        EXPECT(0xcded, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcdec));
        // 1B 0300
        gbc.setState(0x2fb, 0x3b20, 0x4d70, 0x50e4, 0xcbbb, 0xd9b9, 0x1, 0x1);
        gbc.writeMem(0x2fb, { 0x1b });
        gbc.step();
        EXPECT(0x4d, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xd9, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x3b20, gbc.sp());
        EXPECT(0x2fc, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0301
        gbc.setState(0x2472, 0x42e4, 0x7840, 0x5349, 0x90eb, 0x7ddd, 0x0, 0x1);
        gbc.writeMem(0x2472, { 0x1b });
        gbc.step();
        EXPECT(0x78, gbc.a());
        EXPECT(0x53, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0xea, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0xdd, gbc.l());
        EXPECT(0x42e4, gbc.sp());
        EXPECT(0x2473, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0302
        gbc.setState(0x903c, 0xe439, 0x97c0, 0xb147, 0x4d38, 0xa8a1, 0x1, 0x1);
        gbc.writeMem(0x903c, { 0x1b });
        gbc.step();
        EXPECT(0x97, gbc.a());
        EXPECT(0xb1, gbc.b());
        EXPECT(0x47, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0x37, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xe439, gbc.sp());
        EXPECT(0x903d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x903c));
        // 1B 0303
        gbc.setState(0x89bc, 0xe30, 0xe330, 0x3b19, 0xa011, 0x92f5, 0x0, 0x0);
        gbc.writeMem(0x89bc, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0x3b, gbc.b());
        EXPECT(0x19, gbc.c());
        EXPECT(0xa0, gbc.d());
        EXPECT(0x10, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xf5, gbc.l());
        EXPECT(0xe30, gbc.sp());
        EXPECT(0x89bd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x89bc));
        // 1B 0304
        gbc.setState(0x9d6c, 0x3299, 0xf2a0, 0xdfc0, 0x764d, 0x8fa2, 0x1, 0x1);
        gbc.writeMem(0x9d6c, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x8f, gbc.h());
        EXPECT(0xa2, gbc.l());
        EXPECT(0x3299, gbc.sp());
        EXPECT(0x9d6d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9d6c));
        // 1B 0305
        gbc.setState(0x1b7, 0xbb34, 0x9a0, 0xae1f, 0xf6ca, 0x4381, 0x1, 0x0);
        gbc.writeMem(0x1b7, { 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xae, gbc.b());
        EXPECT(0x1f, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xc9, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xbb34, gbc.sp());
        EXPECT(0x1b8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0306
        gbc.setState(0xc1ad, 0x3b4a, 0x4550, 0x8e70, 0x210f, 0x8b3d, 0x0, 0x1);
        gbc.writeMem(0xc1ad, { 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x8e, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0x21, gbc.d());
        EXPECT(0xe, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0x3b4a, gbc.sp());
        EXPECT(0xc1ae, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc1ad));
        // 1B 0307
        gbc.setState(0x175f, 0xb175, 0xd6a0, 0xfb54, 0x3255, 0x92ec, 0x1, 0x1);
        gbc.writeMem(0x175f, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x32, gbc.d());
        EXPECT(0x54, gbc.e());
        EXPECT(0x92, gbc.h());
        EXPECT(0xec, gbc.l());
        EXPECT(0xb175, gbc.sp());
        EXPECT(0x1760, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0308
        gbc.setState(0xf96, 0x21f0, 0xab30, 0xacd0, 0xcdb3, 0xc9c6, 0x1, 0x0);
        gbc.writeMem(0xf96, { 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xcd, gbc.d());
        EXPECT(0xb2, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xc6, gbc.l());
        EXPECT(0x21f0, gbc.sp());
        EXPECT(0xf97, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0309
        gbc.setState(0x28ce, 0xf4a0, 0xa500, 0x88d6, 0xf6bb, 0x244b, 0x1, 0x0);
        gbc.writeMem(0x28ce, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0xd6, gbc.c());
        EXPECT(0xf6, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x24, gbc.h());
        EXPECT(0x4b, gbc.l());
        EXPECT(0xf4a0, gbc.sp());
        EXPECT(0x28cf, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 030A
        gbc.setState(0x9a97, 0x8df6, 0xe660, 0x8d0f, 0xe944, 0xaf52, 0x1, 0x1);
        gbc.writeMem(0x9a97, { 0x1b });
        gbc.step();
        EXPECT(0xe6, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0xf, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x43, gbc.e());
        EXPECT(0xaf, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x8df6, gbc.sp());
        EXPECT(0x9a98, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9a97));
        // 1B 030C
        gbc.setState(0x64fd, 0x29a7, 0xaf60, 0x2d94, 0x92dd, 0xdd07, 0x1, 0x0);
        gbc.writeMem(0x64fd, { 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x2d, gbc.b());
        EXPECT(0x94, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0xdc, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x7, gbc.l());
        EXPECT(0x29a7, gbc.sp());
        EXPECT(0x64fe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 030D
        gbc.setState(0xe103, 0x37ae, 0x540, 0x1548, 0x71a4, 0xa02a, 0x1, 0x1);
        gbc.writeMem(0xe103, { 0x1b });
        gbc.step();
        EXPECT(0x5, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x48, gbc.c());
        EXPECT(0x71, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x2a, gbc.l());
        EXPECT(0x37ae, gbc.sp());
        EXPECT(0xe104, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe103));
        // 1B 030E
        gbc.setState(0xa353, 0x2324, 0x4500, 0x7702, 0x4df2, 0x66cf, 0x0, 0x0);
        gbc.writeMem(0xa353, { 0x1b });
        gbc.step();
        EXPECT(0x45, gbc.a());
        EXPECT(0x77, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0x2324, gbc.sp());
        EXPECT(0xa354, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa353));
        // 1B 030F
        gbc.setState(0xe9a5, 0x3cd1, 0x8a50, 0x9a45, 0x1cc9, 0xc355, 0x1, 0x0);
        gbc.writeMem(0xe9a5, { 0x1b });
        gbc.step();
        EXPECT(0x8a, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x45, gbc.c());
        EXPECT(0x1c, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xc3, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x3cd1, gbc.sp());
        EXPECT(0xe9a6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe9a5));
        // 1B 0310
        gbc.setState(0x4954, 0x54f, 0xdf00, 0x994a, 0x4004, 0xe247, 0x1, 0x1);
        gbc.writeMem(0x4954, { 0x1b });
        gbc.step();
        EXPECT(0xdf, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x4a, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0x3, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x54f, gbc.sp());
        EXPECT(0x4955, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0311
        gbc.setState(0x867f, 0xc7b4, 0xdbc0, 0x89bd, 0x8d16, 0x64d, 0x1, 0x0);
        gbc.writeMem(0x867f, { 0x1b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x8d, gbc.d());
        EXPECT(0x15, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x4d, gbc.l());
        EXPECT(0xc7b4, gbc.sp());
        EXPECT(0x8680, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x867f));
        // 1B 0312
        gbc.setState(0xa58, 0xa089, 0xc6b0, 0x92c6, 0x47c8, 0xe8ca, 0x1, 0x0);
        gbc.writeMem(0xa58, { 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0x92, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xe8, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xa089, gbc.sp());
        EXPECT(0xa59, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0313
        gbc.setState(0x4709, 0x64ec, 0x24c0, 0xb2ae, 0xbc3b, 0x5448, 0x1, 0x0);
        gbc.writeMem(0x4709, { 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0xb2, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0xbc, gbc.d());
        EXPECT(0x3a, gbc.e());
        EXPECT(0x54, gbc.h());
        EXPECT(0x48, gbc.l());
        EXPECT(0x64ec, gbc.sp());
        EXPECT(0x470a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0314
        gbc.setState(0x7817, 0x1f0f, 0xfd90, 0xd24, 0xd1b, 0x880f, 0x0, 0x0);
        gbc.writeMem(0x7817, { 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x24, gbc.c());
        EXPECT(0xd, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x88, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x1f0f, gbc.sp());
        EXPECT(0x7818, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0315
        gbc.setState(0x4d91, 0x3aee, 0xd6a0, 0x3188, 0x2a1e, 0x1cf0, 0x1, 0x0);
        gbc.writeMem(0x4d91, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0x2a, gbc.d());
        EXPECT(0x1d, gbc.e());
        EXPECT(0x1c, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x3aee, gbc.sp());
        EXPECT(0x4d92, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0316
        gbc.setState(0x63c6, 0xa646, 0x6ec0, 0x8f15, 0xe2ed, 0xbe6, 0x1, 0x0);
        gbc.writeMem(0x63c6, { 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x8f, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0xe2, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xb, gbc.h());
        EXPECT(0xe6, gbc.l());
        EXPECT(0xa646, gbc.sp());
        EXPECT(0x63c7, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0317
        gbc.setState(0xb2b1, 0x993d, 0xa880, 0x48bf, 0xdb3f, 0xdd7, 0x1, 0x0);
        gbc.writeMem(0xb2b1, { 0x1b });
        gbc.step();
        EXPECT(0xa8, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0xd, gbc.h());
        EXPECT(0xd7, gbc.l());
        EXPECT(0x993d, gbc.sp());
        EXPECT(0xb2b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb2b1));
        // 1B 0318
        gbc.setState(0xc26c, 0x5a7e, 0xe710, 0x1704, 0x17ff, 0x29a3, 0x0, 0x1);
        gbc.writeMem(0xc26c, { 0x1b });
        gbc.step();
        EXPECT(0xe7, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x4, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0x29, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x5a7e, gbc.sp());
        EXPECT(0xc26d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc26c));
        // 1B 0319
        gbc.setState(0x3a8e, 0x8e2a, 0x36c0, 0x50d0, 0xeafc, 0x5537, 0x1, 0x0);
        gbc.writeMem(0x3a8e, { 0x1b });
        gbc.step();
        EXPECT(0x36, gbc.a());
        EXPECT(0x50, gbc.b());
        EXPECT(0xd0, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x55, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0x8e2a, gbc.sp());
        EXPECT(0x3a8f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 031A
        gbc.setState(0x493e, 0x8588, 0x2d0, 0x138d, 0x4dad, 0x551, 0x0, 0x1);
        gbc.writeMem(0x493e, { 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0x8d, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x8588, gbc.sp());
        EXPECT(0x493f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 031B
        gbc.setState(0xba45, 0x5e25, 0x88a0, 0xa876, 0xc5ec, 0xa8d, 0x1, 0x1);
        gbc.writeMem(0xba45, { 0x1b });
        gbc.step();
        EXPECT(0x88, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0xeb, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x5e25, gbc.sp());
        EXPECT(0xba46, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xba45));
        // 1B 031C
        gbc.setState(0xcfce, 0x9b69, 0x7700, 0xfce, 0x50c2, 0xe24e, 0x0, 0x1);
        gbc.writeMem(0xcfce, { 0x1b });
        gbc.step();
        EXPECT(0x77, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x50, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0x9b69, gbc.sp());
        EXPECT(0xcfcf, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcfce));
        // 1B 031D
        gbc.setState(0x1653, 0xeed, 0x150, 0xd244, 0x200d, 0x1f88, 0x0, 0x0);
        gbc.writeMem(0x1653, { 0x1b });
        gbc.step();
        EXPECT(0x1, gbc.a());
        EXPECT(0xd2, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x20, gbc.d());
        EXPECT(0xc, gbc.e());
        EXPECT(0x1f, gbc.h());
        EXPECT(0x88, gbc.l());
        EXPECT(0xeed, gbc.sp());
        EXPECT(0x1654, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 031E
        gbc.setState(0x7138, 0x52c1, 0xea20, 0x9f42, 0x908e, 0x7d28, 0x1, 0x0);
        gbc.writeMem(0x7138, { 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x90, gbc.d());
        EXPECT(0x8d, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x28, gbc.l());
        EXPECT(0x52c1, gbc.sp());
        EXPECT(0x7139, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 031F
        gbc.setState(0xc9a8, 0xfc62, 0xd0, 0x9796, 0x845b, 0x993c, 0x1, 0x0);
        gbc.writeMem(0xc9a8, { 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x97, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0x5a, gbc.e());
        EXPECT(0x99, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0xfc62, gbc.sp());
        EXPECT(0xc9a9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc9a8));
        // 1B 0320
        gbc.setState(0x933, 0xc255, 0xf2a0, 0xa30d, 0xb45, 0x4e42, 0x1, 0x0);
        gbc.writeMem(0x933, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x42, gbc.l());
        EXPECT(0xc255, gbc.sp());
        EXPECT(0x934, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0321
        gbc.setState(0x60b9, 0x638a, 0x340, 0xd15d, 0x4c7c, 0x819f, 0x0, 0x0);
        gbc.writeMem(0x60b9, { 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x7b, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0x638a, gbc.sp());
        EXPECT(0x60ba, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0322
        gbc.setState(0x766a, 0x2323, 0x2220, 0x2f6, 0x113d, 0x2684, 0x1, 0x1);
        gbc.writeMem(0x766a, { 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x2, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x3c, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x2323, gbc.sp());
        EXPECT(0x766b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0323
        gbc.setState(0x67ae, 0xc773, 0x2490, 0x5914, 0xd2d3, 0xe2da, 0x1, 0x0);
        gbc.writeMem(0x67ae, { 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xe2, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xc773, gbc.sp());
        EXPECT(0x67af, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0325
        gbc.setState(0x59ab, 0x76cb, 0x5a40, 0x3e06, 0x5888, 0x2c92, 0x0, 0x0);
        gbc.writeMem(0x59ab, { 0x1b });
        gbc.step();
        EXPECT(0x5a, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x87, gbc.e());
        EXPECT(0x2c, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0x76cb, gbc.sp());
        EXPECT(0x59ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0326
        gbc.setState(0x44f0, 0xee24, 0x4000, 0x950d, 0x62bb, 0xf697, 0x1, 0x0);
        gbc.writeMem(0x44f0, { 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0x95, gbc.b());
        EXPECT(0xd, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xee24, gbc.sp());
        EXPECT(0x44f1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0327
        gbc.setState(0x3d03, 0x71de, 0x7aa0, 0xa16, 0x68c9, 0xdc51, 0x1, 0x1);
        gbc.writeMem(0x3d03, { 0x1b });
        gbc.step();
        EXPECT(0x7a, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x16, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0xdc, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x71de, gbc.sp());
        EXPECT(0x3d04, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0328
        gbc.setState(0x8426, 0xdd44, 0x5e10, 0x4efa, 0x177, 0xe775, 0x1, 0x0);
        gbc.writeMem(0x8426, { 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x4e, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x76, gbc.e());
        EXPECT(0xe7, gbc.h());
        EXPECT(0x75, gbc.l());
        EXPECT(0xdd44, gbc.sp());
        EXPECT(0x8427, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8426));
        // 1B 0329
        gbc.setState(0x475b, 0x1f01, 0x3b80, 0x69a5, 0x2652, 0x747, 0x1, 0x1);
        gbc.writeMem(0x475b, { 0x1b });
        gbc.step();
        EXPECT(0x3b, gbc.a());
        EXPECT(0x69, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x51, gbc.e());
        EXPECT(0x7, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0x1f01, gbc.sp());
        EXPECT(0x475c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 032A
        gbc.setState(0x6b14, 0xfcb3, 0xbf50, 0xbc68, 0x7714, 0xeb97, 0x0, 0x1);
        gbc.writeMem(0x6b14, { 0x1b });
        gbc.step();
        EXPECT(0xbf, gbc.a());
        EXPECT(0xbc, gbc.b());
        EXPECT(0x68, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0xeb, gbc.h());
        EXPECT(0x97, gbc.l());
        EXPECT(0xfcb3, gbc.sp());
        EXPECT(0x6b15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 032B
        gbc.setState(0xa884, 0x1e0a, 0xcc40, 0xda42, 0xa40b, 0xcfac, 0x1, 0x0);
        gbc.writeMem(0xa884, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xda, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0xa4, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0xac, gbc.l());
        EXPECT(0x1e0a, gbc.sp());
        EXPECT(0xa885, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa884));
        // 1B 032C
        gbc.setState(0x9686, 0x2188, 0x6f80, 0x5baf, 0x4968, 0xca29, 0x0, 0x0);
        gbc.writeMem(0x9686, { 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x5b, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x49, gbc.d());
        EXPECT(0x67, gbc.e());
        EXPECT(0xca, gbc.h());
        EXPECT(0x29, gbc.l());
        EXPECT(0x2188, gbc.sp());
        EXPECT(0x9687, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9686));
        // 1B 032D
        gbc.setState(0x3ca, 0xc295, 0xb920, 0x3a4c, 0x4f3, 0x86bd, 0x0, 0x1);
        gbc.writeMem(0x3ca, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0x4, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0xbd, gbc.l());
        EXPECT(0xc295, gbc.sp());
        EXPECT(0x3cb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 032E
        gbc.setState(0xe864, 0xf3dc, 0xa6b0, 0x512e, 0x40d6, 0x2565, 0x0, 0x1);
        gbc.writeMem(0xe864, { 0x1b });
        gbc.step();
        EXPECT(0xa6, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x40, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0xf3dc, gbc.sp());
        EXPECT(0xe865, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe864));
        // 1B 032F
        gbc.setState(0x294f, 0x6433, 0x44c0, 0xb401, 0x11ed, 0xe0e9, 0x0, 0x0);
        gbc.writeMem(0x294f, { 0x1b });
        gbc.step();
        EXPECT(0x44, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x1, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0x6433, gbc.sp());
        EXPECT(0x2950, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0330
        gbc.setState(0xb4fe, 0x4b10, 0x63e0, 0x4f5e, 0x2691, 0xc4, 0x0, 0x0);
        gbc.writeMem(0xb4fe, { 0x1b });
        gbc.step();
        EXPECT(0x63, gbc.a());
        EXPECT(0x4f, gbc.b());
        EXPECT(0x5e, gbc.c());
        EXPECT(0x26, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x0, gbc.h());
        EXPECT(0xc4, gbc.l());
        EXPECT(0x4b10, gbc.sp());
        EXPECT(0xb4ff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb4fe));
        // 1B 0331
        gbc.setState(0x729e, 0xa763, 0x8c40, 0xc5, 0x946e, 0x8af2, 0x1, 0x0);
        gbc.writeMem(0x729e, { 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x0, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x94, gbc.d());
        EXPECT(0x6d, gbc.e());
        EXPECT(0x8a, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0xa763, gbc.sp());
        EXPECT(0x729f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0332
        gbc.setState(0x5b14, 0x7881, 0x9e20, 0x6a30, 0xd14c, 0x6c11, 0x0, 0x0);
        gbc.writeMem(0x5b14, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xd1, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x7881, gbc.sp());
        EXPECT(0x5b15, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0333
        gbc.setState(0xe385, 0x51e8, 0xe5f0, 0xe05a, 0x7485, 0xb30d, 0x0, 0x0);
        gbc.writeMem(0xe385, { 0x1b });
        gbc.step();
        EXPECT(0xe5, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x5a, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xb3, gbc.h());
        EXPECT(0xd, gbc.l());
        EXPECT(0x51e8, gbc.sp());
        EXPECT(0xe386, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe385));
        // 1B 0334
        gbc.setState(0xef26, 0x366a, 0x5980, 0xdd1e, 0xd0a7, 0x5f1f, 0x1, 0x1);
        gbc.writeMem(0xef26, { 0x1b });
        gbc.step();
        EXPECT(0x59, gbc.a());
        EXPECT(0xdd, gbc.b());
        EXPECT(0x1e, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xa6, gbc.e());
        EXPECT(0x5f, gbc.h());
        EXPECT(0x1f, gbc.l());
        EXPECT(0x366a, gbc.sp());
        EXPECT(0xef27, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xef26));
        // 1B 0335
        gbc.setState(0x7c69, 0xdef, 0x52b0, 0xad6c, 0x9fe1, 0xafc, 0x0, 0x0);
        gbc.writeMem(0x7c69, { 0x1b });
        gbc.step();
        EXPECT(0x52, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x6c, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xe0, gbc.e());
        EXPECT(0xa, gbc.h());
        EXPECT(0xfc, gbc.l());
        EXPECT(0xdef, gbc.sp());
        EXPECT(0x7c6a, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0336
        gbc.setState(0xbb0f, 0x2379, 0xcce0, 0xd92e, 0x35c0, 0xa2b0, 0x1, 0x0);
        gbc.writeMem(0xbb0f, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xd9, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0x35, gbc.d());
        EXPECT(0xbf, gbc.e());
        EXPECT(0xa2, gbc.h());
        EXPECT(0xb0, gbc.l());
        EXPECT(0x2379, gbc.sp());
        EXPECT(0xbb10, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbb0f));
        // 1B 0337
        gbc.setState(0x6bf0, 0xb941, 0xa760, 0xec25, 0xa506, 0xc7d0, 0x0, 0x0);
        gbc.writeMem(0x6bf0, { 0x1b });
        gbc.step();
        EXPECT(0xa7, gbc.a());
        EXPECT(0xec, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0xc7, gbc.h());
        EXPECT(0xd0, gbc.l());
        EXPECT(0xb941, gbc.sp());
        EXPECT(0x6bf1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0338
        gbc.setState(0xe195, 0x9e5f, 0x2dc0, 0xeb99, 0xd8d6, 0x434c, 0x0, 0x1);
        gbc.writeMem(0xe195, { 0x1b });
        gbc.step();
        EXPECT(0x2d, gbc.a());
        EXPECT(0xeb, gbc.b());
        EXPECT(0x99, gbc.c());
        EXPECT(0xd8, gbc.d());
        EXPECT(0xd5, gbc.e());
        EXPECT(0x43, gbc.h());
        EXPECT(0x4c, gbc.l());
        EXPECT(0x9e5f, gbc.sp());
        EXPECT(0xe196, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe195));
        // 1B 0339
        gbc.setState(0xc7d9, 0xd507, 0x76c0, 0x306b, 0x563a, 0x39d2, 0x0, 0x0);
        gbc.writeMem(0xc7d9, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x6b, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x39, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0xd507, gbc.sp());
        EXPECT(0xc7da, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc7d9));
        // 1B 033B
        gbc.setState(0x2871, 0xf022, 0xb940, 0xa450, 0xaff3, 0x625a, 0x1, 0x1);
        gbc.writeMem(0x2871, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0x50, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0xf022, gbc.sp());
        EXPECT(0x2872, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 033C
        gbc.setState(0x9a80, 0xa34b, 0xb0, 0x4122, 0x6921, 0xb51a, 0x0, 0x1);
        gbc.writeMem(0x9a80, { 0x1b });
        gbc.step();
        EXPECT(0x0, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x69, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0xb5, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xa34b, gbc.sp());
        EXPECT(0x9a81, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9a80));
        // 1B 033E
        gbc.setState(0xeafb, 0x9f95, 0x9b90, 0xa0c5, 0x7bf7, 0x9f0b, 0x0, 0x1);
        gbc.writeMem(0xeafb, { 0x1b });
        gbc.step();
        EXPECT(0x9b, gbc.a());
        EXPECT(0xa0, gbc.b());
        EXPECT(0xc5, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0xf6, gbc.e());
        EXPECT(0x9f, gbc.h());
        EXPECT(0xb, gbc.l());
        EXPECT(0x9f95, gbc.sp());
        EXPECT(0xeafc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xeafb));
        // 1B 033F
        gbc.setState(0xbde0, 0xf86b, 0x55a0, 0x28c4, 0x8907, 0x8e76, 0x1, 0x0);
        gbc.writeMem(0xbde0, { 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0xc4, gbc.c());
        EXPECT(0x89, gbc.d());
        EXPECT(0x6, gbc.e());
        EXPECT(0x8e, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0xf86b, gbc.sp());
        EXPECT(0xbde1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbde0));
        // 1B 0340
        gbc.setState(0x3c15, 0x6c86, 0xea40, 0xd34d, 0x31a1, 0x1533, 0x1, 0x0);
        gbc.writeMem(0x3c15, { 0x1b });
        gbc.step();
        EXPECT(0xea, gbc.a());
        EXPECT(0xd3, gbc.b());
        EXPECT(0x4d, gbc.c());
        EXPECT(0x31, gbc.d());
        EXPECT(0xa0, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x33, gbc.l());
        EXPECT(0x6c86, gbc.sp());
        EXPECT(0x3c16, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0341
        gbc.setState(0x5f7c, 0xda19, 0x1400, 0x2f02, 0xe9d1, 0xdf69, 0x1, 0x1);
        gbc.writeMem(0x5f7c, { 0x1b });
        gbc.step();
        EXPECT(0x14, gbc.a());
        EXPECT(0x2f, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xd0, gbc.e());
        EXPECT(0xdf, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xda19, gbc.sp());
        EXPECT(0x5f7d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0342
        gbc.setState(0xc6ef, 0x6f6f, 0x7140, 0xa5ac, 0xb7bc, 0x60c5, 0x0, 0x1);
        gbc.writeMem(0xc6ef, { 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0xa5, gbc.b());
        EXPECT(0xac, gbc.c());
        EXPECT(0xb7, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0x6f6f, gbc.sp());
        EXPECT(0xc6f0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6ef));
        // 1B 0343
        gbc.setState(0x1b7e, 0x271a, 0x58f0, 0x417d, 0x84bb, 0x661, 0x1, 0x1);
        gbc.writeMem(0x1b7e, { 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0x41, gbc.b());
        EXPECT(0x7d, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xba, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x271a, gbc.sp());
        EXPECT(0x1b7f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0344
        gbc.setState(0x14c9, 0x6a63, 0x2040, 0xff9e, 0xb5d4, 0xf630, 0x1, 0x0);
        gbc.writeMem(0x14c9, { 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xd3, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x30, gbc.l());
        EXPECT(0x6a63, gbc.sp());
        EXPECT(0x14ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0345
        gbc.setState(0xa743, 0x3c11, 0x3f20, 0x4deb, 0x2fef, 0x13e3, 0x0, 0x1);
        gbc.writeMem(0xa743, { 0x1b });
        gbc.step();
        EXPECT(0x3f, gbc.a());
        EXPECT(0x4d, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xee, gbc.e());
        EXPECT(0x13, gbc.h());
        EXPECT(0xe3, gbc.l());
        EXPECT(0x3c11, gbc.sp());
        EXPECT(0xa744, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa743));
        // 1B 0346
        gbc.setState(0xc4a2, 0x619e, 0x5e90, 0x8654, 0xaa10, 0xb9ef, 0x0, 0x0);
        gbc.writeMem(0xc4a2, { 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0xaa, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0xb9, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0x619e, gbc.sp());
        EXPECT(0xc4a3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc4a2));
        // 1B 0347
        gbc.setState(0xc23, 0xdc58, 0x2770, 0xf23a, 0x991d, 0x809a, 0x0, 0x0);
        gbc.writeMem(0xc23, { 0x1b });
        gbc.step();
        EXPECT(0x27, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x99, gbc.d());
        EXPECT(0x1c, gbc.e());
        EXPECT(0x80, gbc.h());
        EXPECT(0x9a, gbc.l());
        EXPECT(0xdc58, gbc.sp());
        EXPECT(0xc24, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0348
        gbc.setState(0x5aed, 0x6e16, 0xd7e0, 0x8a9a, 0x681f, 0xec40, 0x1, 0x0);
        gbc.writeMem(0x5aed, { 0x1b });
        gbc.step();
        EXPECT(0xd7, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0x68, gbc.d());
        EXPECT(0x1e, gbc.e());
        EXPECT(0xec, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0x6e16, gbc.sp());
        EXPECT(0x5aee, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0349
        gbc.setState(0xc6f0, 0x530e, 0x4800, 0x6025, 0x2cd8, 0x58d5, 0x0, 0x0);
        gbc.writeMem(0xc6f0, { 0x1b });
        gbc.step();
        EXPECT(0x48, gbc.a());
        EXPECT(0x60, gbc.b());
        EXPECT(0x25, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xd7, gbc.e());
        EXPECT(0x58, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x530e, gbc.sp());
        EXPECT(0xc6f1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6f0));
        // 1B 034A
        gbc.setState(0x6f31, 0xa6ae, 0x22e0, 0x9a44, 0x704b, 0xb10f, 0x1, 0x0);
        gbc.writeMem(0x6f31, { 0x1b });
        gbc.step();
        EXPECT(0x22, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x44, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0xa6ae, gbc.sp());
        EXPECT(0x6f32, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 034B
        gbc.setState(0xdf30, 0x969c, 0xe4c0, 0xcc8f, 0x2d75, 0x1e05, 0x0, 0x0);
        gbc.writeMem(0xdf30, { 0x1b });
        gbc.step();
        EXPECT(0xe4, gbc.a());
        EXPECT(0xcc, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x2d, gbc.d());
        EXPECT(0x74, gbc.e());
        EXPECT(0x1e, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0x969c, gbc.sp());
        EXPECT(0xdf31, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdf30));
        // 1B 034C
        gbc.setState(0xb6ea, 0x7d85, 0xf0e0, 0x1706, 0xd0f2, 0x7004, 0x1, 0x1);
        gbc.writeMem(0xb6ea, { 0x1b });
        gbc.step();
        EXPECT(0xf0, gbc.a());
        EXPECT(0x17, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xd0, gbc.d());
        EXPECT(0xf1, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x4, gbc.l());
        EXPECT(0x7d85, gbc.sp());
        EXPECT(0xb6eb, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb6ea));
        // 1B 034D
        gbc.setState(0x4f4c, 0x6600, 0xffb0, 0xa31c, 0x88de, 0x28ce, 0x1, 0x1);
        gbc.writeMem(0x4f4c, { 0x1b });
        gbc.step();
        EXPECT(0xff, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x88, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x28, gbc.h());
        EXPECT(0xce, gbc.l());
        EXPECT(0x6600, gbc.sp());
        EXPECT(0x4f4d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 034E
        gbc.setState(0x5ec8, 0x9b2e, 0xd560, 0x86da, 0xc7f5, 0xdda1, 0x1, 0x0);
        gbc.writeMem(0x5ec8, { 0x1b });
        gbc.step();
        EXPECT(0xd5, gbc.a());
        EXPECT(0x86, gbc.b());
        EXPECT(0xda, gbc.c());
        EXPECT(0xc7, gbc.d());
        EXPECT(0xf4, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0x9b2e, gbc.sp());
        EXPECT(0x5ec9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 034F
        gbc.setState(0x58f, 0xc6e9, 0x3e10, 0x76c0, 0xcfb6, 0x34f4, 0x1, 0x0);
        gbc.writeMem(0x58f, { 0x1b });
        gbc.step();
        EXPECT(0x3e, gbc.a());
        EXPECT(0x76, gbc.b());
        EXPECT(0xc0, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x34, gbc.h());
        EXPECT(0xf4, gbc.l());
        EXPECT(0xc6e9, gbc.sp());
        EXPECT(0x590, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0350
        gbc.setState(0x78e2, 0xfbe7, 0xd8d0, 0x3505, 0x4df6, 0xbf80, 0x0, 0x1);
        gbc.writeMem(0x78e2, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x35, gbc.b());
        EXPECT(0x5, gbc.c());
        EXPECT(0x4d, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xbf, gbc.h());
        EXPECT(0x80, gbc.l());
        EXPECT(0xfbe7, gbc.sp());
        EXPECT(0x78e3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0351
        gbc.setState(0x287e, 0xb936, 0x83a0, 0x7f75, 0x5958, 0xa861, 0x0, 0x0);
        gbc.writeMem(0x287e, { 0x1b });
        gbc.step();
        EXPECT(0x83, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0x75, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0x57, gbc.e());
        EXPECT(0xa8, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0xb936, gbc.sp());
        EXPECT(0x287f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0352
        gbc.setState(0x53c0, 0x6d56, 0xc270, 0xcaf9, 0xc1ff, 0xd8b1, 0x1, 0x1);
        gbc.writeMem(0x53c0, { 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xca, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0xc1, gbc.d());
        EXPECT(0xfe, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0xb1, gbc.l());
        EXPECT(0x6d56, gbc.sp());
        EXPECT(0x53c1, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0355
        gbc.setState(0x84a, 0x3171, 0x2c60, 0xcf22, 0x56f0, 0xf97a, 0x1, 0x0);
        gbc.writeMem(0x84a, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xcf, gbc.b());
        EXPECT(0x22, gbc.c());
        EXPECT(0x56, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0xf9, gbc.h());
        EXPECT(0x7a, gbc.l());
        EXPECT(0x3171, gbc.sp());
        EXPECT(0x84b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0356
        gbc.setState(0xcda9, 0x582f, 0xc3f0, 0x1e3c, 0x714, 0x2622, 0x0, 0x0);
        gbc.writeMem(0xcda9, { 0x1b });
        gbc.step();
        EXPECT(0xc3, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x3c, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0x13, gbc.e());
        EXPECT(0x26, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x582f, gbc.sp());
        EXPECT(0xcdaa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcda9));
        // 1B 0357
        gbc.setState(0xbdfc, 0xeaf, 0xa3e0, 0x43ec, 0x51d3, 0xcd57, 0x0, 0x0);
        gbc.writeMem(0xbdfc, { 0x1b });
        gbc.step();
        EXPECT(0xa3, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0xec, gbc.c());
        EXPECT(0x51, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xeaf, gbc.sp());
        EXPECT(0xbdfd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbdfc));
        // 1B 0359
        gbc.setState(0xcbd8, 0xc438, 0x8120, 0xc8d1, 0xe93e, 0xb4b3, 0x1, 0x1);
        gbc.writeMem(0xcbd8, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xc8, gbc.b());
        EXPECT(0xd1, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x3d, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0xc438, gbc.sp());
        EXPECT(0xcbd9, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xcbd8));
        // 1B 035A
        gbc.setState(0x9ea1, 0x1c1f, 0xe2c0, 0x5df6, 0x7b6b, 0x9c5c, 0x1, 0x1);
        gbc.writeMem(0x9ea1, { 0x1b });
        gbc.step();
        EXPECT(0xe2, gbc.a());
        EXPECT(0x5d, gbc.b());
        EXPECT(0xf6, gbc.c());
        EXPECT(0x7b, gbc.d());
        EXPECT(0x6a, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0x1c1f, gbc.sp());
        EXPECT(0x9ea2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9ea1));
        // 1B 035B
        gbc.setState(0x9707, 0xbb83, 0xe3c0, 0xf39e, 0x6203, 0xf1ae, 0x1, 0x0);
        gbc.writeMem(0x9707, { 0x1b });
        gbc.step();
        EXPECT(0xe3, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0x9e, gbc.c());
        EXPECT(0x62, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0xf1, gbc.h());
        EXPECT(0xae, gbc.l());
        EXPECT(0xbb83, gbc.sp());
        EXPECT(0x9708, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9707));
        // 1B 035C
        gbc.setState(0xd990, 0xb318, 0xab50, 0xe87b, 0xb5f0, 0x8d67, 0x0, 0x0);
        gbc.writeMem(0xd990, { 0x1b });
        gbc.step();
        EXPECT(0xab, gbc.a());
        EXPECT(0xe8, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xef, gbc.e());
        EXPECT(0x8d, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0xb318, gbc.sp());
        EXPECT(0xd991, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd990));
        // 1B 035D
        gbc.setState(0x10d1, 0x37f6, 0x7ee0, 0x3fc7, 0xf0c9, 0x615, 0x0, 0x1);
        gbc.writeMem(0x10d1, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xf0, gbc.d());
        EXPECT(0xc8, gbc.e());
        EXPECT(0x6, gbc.h());
        EXPECT(0x15, gbc.l());
        EXPECT(0x37f6, gbc.sp());
        EXPECT(0x10d2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 035E
        gbc.setState(0x7d1f, 0x5fc2, 0xdc00, 0x2b62, 0x1f6, 0x7085, 0x0, 0x0);
        gbc.writeMem(0x7d1f, { 0x1b });
        gbc.step();
        EXPECT(0xdc, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x62, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0x85, gbc.l());
        EXPECT(0x5fc2, gbc.sp());
        EXPECT(0x7d20, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 035F
        gbc.setState(0x8cf4, 0xc532, 0x53c0, 0x72e, 0xe810, 0x78b8, 0x0, 0x0);
        gbc.writeMem(0x8cf4, { 0x1b });
        gbc.step();
        EXPECT(0x53, gbc.a());
        EXPECT(0x7, gbc.b());
        EXPECT(0x2e, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0xf, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0xc532, gbc.sp());
        EXPECT(0x8cf5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8cf4));
        // 1B 0360
        gbc.setState(0x83bb, 0xf4f8, 0xcdd0, 0x14c6, 0x7060, 0x4a1d, 0x0, 0x1);
        gbc.writeMem(0x83bb, { 0x1b });
        gbc.step();
        EXPECT(0xcd, gbc.a());
        EXPECT(0x14, gbc.b());
        EXPECT(0xc6, gbc.c());
        EXPECT(0x70, gbc.d());
        EXPECT(0x5f, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xf4f8, gbc.sp());
        EXPECT(0x83bc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x83bb));
        // 1B 0361
        gbc.setState(0x69fc, 0xc64b, 0x7110, 0x2b02, 0xf598, 0xee41, 0x0, 0x1);
        gbc.writeMem(0x69fc, { 0x1b });
        gbc.step();
        EXPECT(0x71, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0x2, gbc.c());
        EXPECT(0xf5, gbc.d());
        EXPECT(0x97, gbc.e());
        EXPECT(0xee, gbc.h());
        EXPECT(0x41, gbc.l());
        EXPECT(0xc64b, gbc.sp());
        EXPECT(0x69fd, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0362
        gbc.setState(0xa00d, 0xd395, 0xe8d0, 0xf2b, 0x840e, 0xcf52, 0x0, 0x0);
        gbc.writeMem(0xa00d, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0xf, gbc.b());
        EXPECT(0x2b, gbc.c());
        EXPECT(0x84, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0xd395, gbc.sp());
        EXPECT(0xa00e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa00d));
        // 1B 0363
        gbc.setState(0x598e, 0x8dfd, 0xb470, 0x1576, 0xc9e6, 0x1655, 0x1, 0x1);
        gbc.writeMem(0x598e, { 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0x16, gbc.h());
        EXPECT(0x55, gbc.l());
        EXPECT(0x8dfd, gbc.sp());
        EXPECT(0x598f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0364
        gbc.setState(0x26e2, 0xd79c, 0x9ea0, 0xd4f9, 0x5cbf, 0xc0aa, 0x1, 0x0);
        gbc.writeMem(0x26e2, { 0x1b });
        gbc.step();
        EXPECT(0x9e, gbc.a());
        EXPECT(0xd4, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0xbe, gbc.e());
        EXPECT(0xc0, gbc.h());
        EXPECT(0xaa, gbc.l());
        EXPECT(0xd79c, gbc.sp());
        EXPECT(0x26e3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0365
        gbc.setState(0x1b7d, 0xece7, 0xd880, 0xb612, 0x33ab, 0x2eef, 0x0, 0x1);
        gbc.writeMem(0x1b7d, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x33, gbc.d());
        EXPECT(0xaa, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0xef, gbc.l());
        EXPECT(0xece7, gbc.sp());
        EXPECT(0x1b7e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0366
        gbc.setState(0x7185, 0xd4c9, 0x7520, 0xd5ae, 0x59de, 0x947b, 0x1, 0x1);
        gbc.writeMem(0x7185, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xd5, gbc.b());
        EXPECT(0xae, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x94, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0xd4c9, gbc.sp());
        EXPECT(0x7186, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0367
        gbc.setState(0x555, 0xfcb9, 0xd8f0, 0x8403, 0x4bac, 0x22e9, 0x1, 0x0);
        gbc.writeMem(0x555, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x84, gbc.b());
        EXPECT(0x3, gbc.c());
        EXPECT(0x4b, gbc.d());
        EXPECT(0xab, gbc.e());
        EXPECT(0x22, gbc.h());
        EXPECT(0xe9, gbc.l());
        EXPECT(0xfcb9, gbc.sp());
        EXPECT(0x556, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0368
        gbc.setState(0x5746, 0x42b1, 0x9b0, 0xe14f, 0xb7a, 0x90ea, 0x1, 0x1);
        gbc.writeMem(0x5746, { 0x1b });
        gbc.step();
        EXPECT(0x9, gbc.a());
        EXPECT(0xe1, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xb, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0x90, gbc.h());
        EXPECT(0xea, gbc.l());
        EXPECT(0x42b1, gbc.sp());
        EXPECT(0x5747, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0369
        gbc.setState(0xc6f5, 0x8dd6, 0xbef0, 0x37bb, 0xe764, 0xdade, 0x1, 0x1);
        gbc.writeMem(0xc6f5, { 0x1b });
        gbc.step();
        EXPECT(0xbe, gbc.a());
        EXPECT(0x37, gbc.b());
        EXPECT(0xbb, gbc.c());
        EXPECT(0xe7, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x8dd6, gbc.sp());
        EXPECT(0xc6f6, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6f5));
        // 1B 036A
        gbc.setState(0x9ca3, 0x263f, 0x33c0, 0x89a7, 0x4766, 0xf774, 0x0, 0x1);
        gbc.writeMem(0x9ca3, { 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xa7, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x65, gbc.e());
        EXPECT(0xf7, gbc.h());
        EXPECT(0x74, gbc.l());
        EXPECT(0x263f, gbc.sp());
        EXPECT(0x9ca4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9ca3));
        // 1B 036B
        gbc.setState(0xe276, 0xd29c, 0x3a20, 0x21d2, 0xc85f, 0x7a12, 0x1, 0x1);
        gbc.writeMem(0xe276, { 0x1b });
        gbc.step();
        EXPECT(0x3a, gbc.a());
        EXPECT(0x21, gbc.b());
        EXPECT(0xd2, gbc.c());
        EXPECT(0xc8, gbc.d());
        EXPECT(0x5e, gbc.e());
        EXPECT(0x7a, gbc.h());
        EXPECT(0x12, gbc.l());
        EXPECT(0xd29c, gbc.sp());
        EXPECT(0xe277, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe276));
        // 1B 036C
        gbc.setState(0x94f1, 0x5d4, 0x2b80, 0x4812, 0x64c8, 0xe6a3, 0x1, 0x0);
        gbc.writeMem(0x94f1, { 0x1b });
        gbc.step();
        EXPECT(0x2b, gbc.a());
        EXPECT(0x48, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x64, gbc.d());
        EXPECT(0xc7, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xa3, gbc.l());
        EXPECT(0x5d4, gbc.sp());
        EXPECT(0x94f2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x94f1));
        // 1B 036D
        gbc.setState(0xae70, 0xa945, 0x9490, 0x13ff, 0x4c39, 0x6647, 0x0, 0x1);
        gbc.writeMem(0xae70, { 0x1b });
        gbc.step();
        EXPECT(0x94, gbc.a());
        EXPECT(0x13, gbc.b());
        EXPECT(0xff, gbc.c());
        EXPECT(0x4c, gbc.d());
        EXPECT(0x38, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x47, gbc.l());
        EXPECT(0xa945, gbc.sp());
        EXPECT(0xae71, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xae70));
        // 1B 036E
        gbc.setState(0xbc24, 0x1d01, 0x8140, 0xffe7, 0xf226, 0x294, 0x1, 0x0);
        gbc.writeMem(0xbc24, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xe7, gbc.c());
        EXPECT(0xf2, gbc.d());
        EXPECT(0x25, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x94, gbc.l());
        EXPECT(0x1d01, gbc.sp());
        EXPECT(0xbc25, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbc24));
        // 1B 036F
        gbc.setState(0x2294, 0xc336, 0xee30, 0xa276, 0x4742, 0x2ca, 0x1, 0x1);
        gbc.writeMem(0x2294, { 0x1b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0x76, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0xca, gbc.l());
        EXPECT(0xc336, gbc.sp());
        EXPECT(0x2295, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0370
        gbc.setState(0x1498, 0x1816, 0xa030, 0x89fc, 0x6127, 0x2d53, 0x1, 0x1);
        gbc.writeMem(0x1498, { 0x1b });
        gbc.step();
        EXPECT(0xa0, gbc.a());
        EXPECT(0x89, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0x61, gbc.d());
        EXPECT(0x26, gbc.e());
        EXPECT(0x2d, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x1816, gbc.sp());
        EXPECT(0x1499, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0371
        gbc.setState(0x9d29, 0xe4b7, 0x4220, 0x7a14, 0x11c7, 0x57d1, 0x1, 0x1);
        gbc.writeMem(0x9d29, { 0x1b });
        gbc.step();
        EXPECT(0x42, gbc.a());
        EXPECT(0x7a, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0xc6, gbc.e());
        EXPECT(0x57, gbc.h());
        EXPECT(0xd1, gbc.l());
        EXPECT(0xe4b7, gbc.sp());
        EXPECT(0x9d2a, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9d29));
        // 1B 0372
        gbc.setState(0xc3c, 0x1796, 0xdad0, 0xb9d5, 0xb303, 0x8c22, 0x0, 0x0);
        gbc.writeMem(0xc3c, { 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0xb9, gbc.b());
        EXPECT(0xd5, gbc.c());
        EXPECT(0xb3, gbc.d());
        EXPECT(0x2, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x22, gbc.l());
        EXPECT(0x1796, gbc.sp());
        EXPECT(0xc3d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0373
        gbc.setState(0x8bdf, 0x4771, 0xceb0, 0xb67c, 0xf1d2, 0x1de1, 0x0, 0x1);
        gbc.writeMem(0x8bdf, { 0x1b });
        gbc.step();
        EXPECT(0xce, gbc.a());
        EXPECT(0xb6, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0xf1, gbc.d());
        EXPECT(0xd1, gbc.e());
        EXPECT(0x1d, gbc.h());
        EXPECT(0xe1, gbc.l());
        EXPECT(0x4771, gbc.sp());
        EXPECT(0x8be0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8bdf));
        // 1B 0374
        gbc.setState(0xd01c, 0xe639, 0x70a0, 0x317b, 0x174c, 0x6ea4, 0x1, 0x1);
        gbc.writeMem(0xd01c, { 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0x7b, gbc.c());
        EXPECT(0x17, gbc.d());
        EXPECT(0x4b, gbc.e());
        EXPECT(0x6e, gbc.h());
        EXPECT(0xa4, gbc.l());
        EXPECT(0xe639, gbc.sp());
        EXPECT(0xd01d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd01c));
        // 1B 0375
        gbc.setState(0x5817, 0x51ed, 0xc2f0, 0xe214, 0x41ae, 0x4e3f, 0x1, 0x0);
        gbc.writeMem(0x5817, { 0x1b });
        gbc.step();
        EXPECT(0xc2, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x14, gbc.c());
        EXPECT(0x41, gbc.d());
        EXPECT(0xad, gbc.e());
        EXPECT(0x4e, gbc.h());
        EXPECT(0x3f, gbc.l());
        EXPECT(0x51ed, gbc.sp());
        EXPECT(0x5818, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0376
        gbc.setState(0xbdee, 0xaa57, 0x1c80, 0xc018, 0xe845, 0xd781, 0x1, 0x1);
        gbc.writeMem(0xbdee, { 0x1b });
        gbc.step();
        EXPECT(0x1c, gbc.a());
        EXPECT(0xc0, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x81, gbc.l());
        EXPECT(0xaa57, gbc.sp());
        EXPECT(0xbdef, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbdee));
        // 1B 0377
        gbc.setState(0xa0e3, 0x920, 0x74b0, 0x8a8f, 0x48db, 0x819c, 0x0, 0x1);
        gbc.writeMem(0xa0e3, { 0x1b });
        gbc.step();
        EXPECT(0x74, gbc.a());
        EXPECT(0x8a, gbc.b());
        EXPECT(0x8f, gbc.c());
        EXPECT(0x48, gbc.d());
        EXPECT(0xda, gbc.e());
        EXPECT(0x81, gbc.h());
        EXPECT(0x9c, gbc.l());
        EXPECT(0x920, gbc.sp());
        EXPECT(0xa0e4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa0e3));
        // 1B 0378
        gbc.setState(0xeb4e, 0x1c5b, 0x5600, 0xa2ce, 0x8bbe, 0xc60c, 0x1, 0x1);
        gbc.writeMem(0xeb4e, { 0x1b });
        gbc.step();
        EXPECT(0x56, gbc.a());
        EXPECT(0xa2, gbc.b());
        EXPECT(0xce, gbc.c());
        EXPECT(0x8b, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xc6, gbc.h());
        EXPECT(0xc, gbc.l());
        EXPECT(0x1c5b, gbc.sp());
        EXPECT(0xeb4f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xeb4e));
        // 1B 0379
        gbc.setState(0x2a81, 0xf90d, 0x8140, 0x3eea, 0xc534, 0x2a1a, 0x0, 0x1);
        gbc.writeMem(0x2a81, { 0x1b });
        gbc.step();
        EXPECT(0x81, gbc.a());
        EXPECT(0x3e, gbc.b());
        EXPECT(0xea, gbc.c());
        EXPECT(0xc5, gbc.d());
        EXPECT(0x33, gbc.e());
        EXPECT(0x2a, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xf90d, gbc.sp());
        EXPECT(0x2a82, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 037A
        gbc.setState(0x89c9, 0x9cae, 0x8ef0, 0x62bf, 0x27b7, 0x785a, 0x1, 0x1);
        gbc.writeMem(0x89c9, { 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0xbf, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xb6, gbc.e());
        EXPECT(0x78, gbc.h());
        EXPECT(0x5a, gbc.l());
        EXPECT(0x9cae, gbc.sp());
        EXPECT(0x89ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x89c9));
        // 1B 037B
        gbc.setState(0xc2fb, 0xbc16, 0x5e00, 0x6cf4, 0x4517, 0x9eb6, 0x0, 0x0);
        gbc.writeMem(0xc2fb, { 0x1b });
        gbc.step();
        EXPECT(0x5e, gbc.a());
        EXPECT(0x6c, gbc.b());
        EXPECT(0xf4, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x16, gbc.e());
        EXPECT(0x9e, gbc.h());
        EXPECT(0xb6, gbc.l());
        EXPECT(0xbc16, gbc.sp());
        EXPECT(0xc2fc, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc2fb));
        // 1B 037C
        gbc.setState(0x9491, 0xf238, 0xdb90, 0x284f, 0xabbc, 0x8c40, 0x0, 0x1);
        gbc.writeMem(0x9491, { 0x1b });
        gbc.step();
        EXPECT(0xdb, gbc.a());
        EXPECT(0x28, gbc.b());
        EXPECT(0x4f, gbc.c());
        EXPECT(0xab, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x40, gbc.l());
        EXPECT(0xf238, gbc.sp());
        EXPECT(0x9492, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9491));
        // 1B 037D
        gbc.setState(0x17f8, 0x27cf, 0xbb70, 0x665d, 0xa5b8, 0xcd65, 0x0, 0x1);
        gbc.writeMem(0x17f8, { 0x1b });
        gbc.step();
        EXPECT(0xbb, gbc.a());
        EXPECT(0x66, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0xb7, gbc.e());
        EXPECT(0xcd, gbc.h());
        EXPECT(0x65, gbc.l());
        EXPECT(0x27cf, gbc.sp());
        EXPECT(0x17f9, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 037E
        gbc.setState(0x9726, 0x94dd, 0x39e0, 0x7383, 0xf736, 0xc9a0, 0x1, 0x0);
        gbc.writeMem(0x9726, { 0x1b });
        gbc.step();
        EXPECT(0x39, gbc.a());
        EXPECT(0x73, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xf7, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0xa0, gbc.l());
        EXPECT(0x94dd, gbc.sp());
        EXPECT(0x9727, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9726));
        // 1B 037F
        gbc.setState(0x16f9, 0x3b23, 0xb320, 0xa336, 0xefb6, 0x351a, 0x0, 0x0);
        gbc.writeMem(0x16f9, { 0x1b });
        gbc.step();
        EXPECT(0xb3, gbc.a());
        EXPECT(0xa3, gbc.b());
        EXPECT(0x36, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xb5, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0x3b23, gbc.sp());
        EXPECT(0x16fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0380
        gbc.setState(0x9a3e, 0x1790, 0xc4c0, 0xb433, 0xe895, 0xc931, 0x0, 0x1);
        gbc.writeMem(0x9a3e, { 0x1b });
        gbc.step();
        EXPECT(0xc4, gbc.a());
        EXPECT(0xb4, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xe8, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xc9, gbc.h());
        EXPECT(0x31, gbc.l());
        EXPECT(0x1790, gbc.sp());
        EXPECT(0x9a3f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9a3e));
        // 1B 0381
        gbc.setState(0xed8f, 0x9115, 0x91a0, 0x3f18, 0x59fc, 0x2572, 0x0, 0x1);
        gbc.writeMem(0xed8f, { 0x1b });
        gbc.step();
        EXPECT(0x91, gbc.a());
        EXPECT(0x3f, gbc.b());
        EXPECT(0x18, gbc.c());
        EXPECT(0x59, gbc.d());
        EXPECT(0xfb, gbc.e());
        EXPECT(0x25, gbc.h());
        EXPECT(0x72, gbc.l());
        EXPECT(0x9115, gbc.sp());
        EXPECT(0xed90, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xed8f));
        // 1B 0382
        gbc.setState(0x6d08, 0x216a, 0xb990, 0x47e6, 0x2237, 0xb876, 0x1, 0x0);
        gbc.writeMem(0x6d08, { 0x1b });
        gbc.step();
        EXPECT(0xb9, gbc.a());
        EXPECT(0x47, gbc.b());
        EXPECT(0xe6, gbc.c());
        EXPECT(0x22, gbc.d());
        EXPECT(0x36, gbc.e());
        EXPECT(0xb8, gbc.h());
        EXPECT(0x76, gbc.l());
        EXPECT(0x216a, gbc.sp());
        EXPECT(0x6d09, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0383
        gbc.setState(0x4910, 0x2de4, 0xaff0, 0x3613, 0x3a96, 0x327b, 0x1, 0x0);
        gbc.writeMem(0x4910, { 0x1b });
        gbc.step();
        EXPECT(0xaf, gbc.a());
        EXPECT(0x36, gbc.b());
        EXPECT(0x13, gbc.c());
        EXPECT(0x3a, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0x32, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x2de4, gbc.sp());
        EXPECT(0x4911, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0384
        gbc.setState(0xf05, 0xef62, 0xae40, 0x854c, 0xdb02, 0xcf4e, 0x0, 0x0);
        gbc.writeMem(0xf05, { 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0x85, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0xcf, gbc.h());
        EXPECT(0x4e, gbc.l());
        EXPECT(0xef62, gbc.sp());
        EXPECT(0xf06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0385
        gbc.setState(0x2a7b, 0x1f78, 0x2050, 0xad9a, 0xda1c, 0x6b83, 0x0, 0x1);
        gbc.writeMem(0x2a7b, { 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0xad, gbc.b());
        EXPECT(0x9a, gbc.c());
        EXPECT(0xda, gbc.d());
        EXPECT(0x1b, gbc.e());
        EXPECT(0x6b, gbc.h());
        EXPECT(0x83, gbc.l());
        EXPECT(0x1f78, gbc.sp());
        EXPECT(0x2a7c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0386
        gbc.setState(0xa488, 0xd65a, 0x33c0, 0x1e11, 0xca9f, 0x2e1a, 0x1, 0x0);
        gbc.writeMem(0xa488, { 0x1b });
        gbc.step();
        EXPECT(0x33, gbc.a());
        EXPECT(0x1e, gbc.b());
        EXPECT(0x11, gbc.c());
        EXPECT(0xca, gbc.d());
        EXPECT(0x9e, gbc.e());
        EXPECT(0x2e, gbc.h());
        EXPECT(0x1a, gbc.l());
        EXPECT(0xd65a, gbc.sp());
        EXPECT(0xa489, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa488));
        // 1B 0387
        gbc.setState(0xd4f3, 0x7692, 0x95c0, 0xd8a, 0xe57e, 0x3b9, 0x0, 0x0);
        gbc.writeMem(0xd4f3, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x8a, gbc.c());
        EXPECT(0xe5, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0x3, gbc.h());
        EXPECT(0xb9, gbc.l());
        EXPECT(0x7692, gbc.sp());
        EXPECT(0xd4f4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd4f3));
        // 1B 0388
        gbc.setState(0x6b97, 0xa609, 0x6060, 0x590a, 0x7fde, 0x95a1, 0x0, 0x0);
        gbc.writeMem(0x6b97, { 0x1b });
        gbc.step();
        EXPECT(0x60, gbc.a());
        EXPECT(0x59, gbc.b());
        EXPECT(0xa, gbc.c());
        EXPECT(0x7f, gbc.d());
        EXPECT(0xdd, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa1, gbc.l());
        EXPECT(0xa609, gbc.sp());
        EXPECT(0x6b98, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0389
        gbc.setState(0x88fd, 0x974a, 0x8470, 0x54f1, 0x9d93, 0x77d5, 0x0, 0x1);
        gbc.writeMem(0x88fd, { 0x1b });
        gbc.step();
        EXPECT(0x84, gbc.a());
        EXPECT(0x54, gbc.b());
        EXPECT(0xf1, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0x77, gbc.h());
        EXPECT(0xd5, gbc.l());
        EXPECT(0x974a, gbc.sp());
        EXPECT(0x88fe, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x88fd));
        // 1B 038A
        gbc.setState(0xc8c1, 0xf36f, 0xf330, 0xb571, 0xcb61, 0xdded, 0x0, 0x1);
        gbc.writeMem(0xc8c1, { 0x1b });
        gbc.step();
        EXPECT(0xf3, gbc.a());
        EXPECT(0xb5, gbc.b());
        EXPECT(0x71, gbc.c());
        EXPECT(0xcb, gbc.d());
        EXPECT(0x60, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0xed, gbc.l());
        EXPECT(0xf36f, gbc.sp());
        EXPECT(0xc8c2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc8c1));
        // 1B 038C
        gbc.setState(0xb3e1, 0xcc94, 0x2480, 0x7288, 0xadea, 0xda9f, 0x0, 0x0);
        gbc.writeMem(0xb3e1, { 0x1b });
        gbc.step();
        EXPECT(0x24, gbc.a());
        EXPECT(0x72, gbc.b());
        EXPECT(0x88, gbc.c());
        EXPECT(0xad, gbc.d());
        EXPECT(0xe9, gbc.e());
        EXPECT(0xda, gbc.h());
        EXPECT(0x9f, gbc.l());
        EXPECT(0xcc94, gbc.sp());
        EXPECT(0xb3e2, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb3e1));
        // 1B 038D
        gbc.setState(0x3637, 0x75c6, 0x13e0, 0xf69d, 0xb491, 0x9a71, 0x0, 0x1);
        gbc.writeMem(0x3637, { 0x1b });
        gbc.step();
        EXPECT(0x13, gbc.a());
        EXPECT(0xf6, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xb4, gbc.d());
        EXPECT(0x90, gbc.e());
        EXPECT(0x9a, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x75c6, gbc.sp());
        EXPECT(0x3638, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 038E
        gbc.setState(0x6c85, 0x9d53, 0x8c50, 0x55c3, 0x2e4d, 0x66f0, 0x0, 0x0);
        gbc.writeMem(0x6c85, { 0x1b });
        gbc.step();
        EXPECT(0x8c, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xc3, gbc.c());
        EXPECT(0x2e, gbc.d());
        EXPECT(0x4c, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0xf0, gbc.l());
        EXPECT(0x9d53, gbc.sp());
        EXPECT(0x6c86, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 038F
        gbc.setState(0x1f1c, 0xf10a, 0xd890, 0xd9d, 0xe976, 0x23b, 0x0, 0x1);
        gbc.writeMem(0x1f1c, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x9d, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x75, gbc.e());
        EXPECT(0x2, gbc.h());
        EXPECT(0x3b, gbc.l());
        EXPECT(0xf10a, gbc.sp());
        EXPECT(0x1f1d, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0390
        gbc.setState(0x3526, 0x9860, 0xadb0, 0x1670, 0xd309, 0xa671, 0x1, 0x0);
        gbc.writeMem(0x3526, { 0x1b });
        gbc.step();
        EXPECT(0xad, gbc.a());
        EXPECT(0x16, gbc.b());
        EXPECT(0x70, gbc.c());
        EXPECT(0xd3, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0xa6, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x9860, gbc.sp());
        EXPECT(0x3527, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0391
        gbc.setState(0xa484, 0x19ad, 0xb650, 0xbbd, 0x2fee, 0xa039, 0x1, 0x0);
        gbc.writeMem(0xa484, { 0x1b });
        gbc.step();
        EXPECT(0xb6, gbc.a());
        EXPECT(0xb, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0xa0, gbc.h());
        EXPECT(0x39, gbc.l());
        EXPECT(0x19ad, gbc.sp());
        EXPECT(0xa485, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa484));
        // 1B 0392
        gbc.setState(0x9b67, 0x8b2, 0x8b10, 0x31b1, 0xc94e, 0x8b71, 0x0, 0x1);
        gbc.writeMem(0x9b67, { 0x1b });
        gbc.step();
        EXPECT(0x8b, gbc.a());
        EXPECT(0x31, gbc.b());
        EXPECT(0xb1, gbc.c());
        EXPECT(0xc9, gbc.d());
        EXPECT(0x4d, gbc.e());
        EXPECT(0x8b, gbc.h());
        EXPECT(0x71, gbc.l());
        EXPECT(0x8b2, gbc.sp());
        EXPECT(0x9b68, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b67));
        // 1B 0393
        gbc.setState(0xecf3, 0xac61, 0xe960, 0xe684, 0xa8e6, 0xf33d, 0x1, 0x1);
        gbc.writeMem(0xecf3, { 0x1b });
        gbc.step();
        EXPECT(0xe9, gbc.a());
        EXPECT(0xe6, gbc.b());
        EXPECT(0x84, gbc.c());
        EXPECT(0xa8, gbc.d());
        EXPECT(0xe5, gbc.e());
        EXPECT(0xf3, gbc.h());
        EXPECT(0x3d, gbc.l());
        EXPECT(0xac61, gbc.sp());
        EXPECT(0xecf4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xecf3));
        // 1B 0395
        gbc.setState(0x628a, 0xa029, 0xedc0, 0x934c, 0xfb7e, 0xfe27, 0x0, 0x1);
        gbc.writeMem(0x628a, { 0x1b });
        gbc.step();
        EXPECT(0xed, gbc.a());
        EXPECT(0x93, gbc.b());
        EXPECT(0x4c, gbc.c());
        EXPECT(0xfb, gbc.d());
        EXPECT(0x7d, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x27, gbc.l());
        EXPECT(0xa029, gbc.sp());
        EXPECT(0x628b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0396
        gbc.setState(0xbcef, 0x346b, 0xacd0, 0x29e1, 0xbd36, 0x4661, 0x0, 0x0);
        gbc.writeMem(0xbcef, { 0x1b });
        gbc.step();
        EXPECT(0xac, gbc.a());
        EXPECT(0x29, gbc.b());
        EXPECT(0xe1, gbc.c());
        EXPECT(0xbd, gbc.d());
        EXPECT(0x35, gbc.e());
        EXPECT(0x46, gbc.h());
        EXPECT(0x61, gbc.l());
        EXPECT(0x346b, gbc.sp());
        EXPECT(0xbcf0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbcef));
        // 1B 0397
        gbc.setState(0x2b74, 0xc0a2, 0xc970, 0xfafc, 0xce09, 0x495c, 0x1, 0x1);
        gbc.writeMem(0x2b74, { 0x1b });
        gbc.step();
        EXPECT(0xc9, gbc.a());
        EXPECT(0xfa, gbc.b());
        EXPECT(0xfc, gbc.c());
        EXPECT(0xce, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x49, gbc.h());
        EXPECT(0x5c, gbc.l());
        EXPECT(0xc0a2, gbc.sp());
        EXPECT(0x2b75, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 0398
        gbc.setState(0x2af6, 0xb5ad, 0xbdc0, 0xf249, 0xc4bc, 0x6292, 0x0, 0x0);
        gbc.writeMem(0x2af6, { 0x1b });
        gbc.step();
        EXPECT(0xbd, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x49, gbc.c());
        EXPECT(0xc4, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x62, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xb5ad, gbc.sp());
        EXPECT(0x2af7, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 0399
        gbc.setState(0xc45f, 0x334b, 0x9530, 0x129c, 0x4543, 0x9b9e, 0x1, 0x1);
        gbc.writeMem(0xc45f, { 0x1b });
        gbc.step();
        EXPECT(0x95, gbc.a());
        EXPECT(0x12, gbc.b());
        EXPECT(0x9c, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x42, gbc.e());
        EXPECT(0x9b, gbc.h());
        EXPECT(0x9e, gbc.l());
        EXPECT(0x334b, gbc.sp());
        EXPECT(0xc460, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc45f));
        // 1B 039A
        gbc.setState(0xc707, 0xc809, 0x66d0, 0xb70b, 0x76c2, 0x4a05, 0x1, 0x0);
        gbc.writeMem(0xc707, { 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x76, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0x4a, gbc.h());
        EXPECT(0x5, gbc.l());
        EXPECT(0xc809, gbc.sp());
        EXPECT(0xc708, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc707));
        // 1B 039B
        gbc.setState(0xefa1, 0x73ec, 0xaad0, 0xe9cf, 0xdbf3, 0x5bba, 0x1, 0x0);
        gbc.writeMem(0xefa1, { 0x1b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xcf, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0x5b, gbc.h());
        EXPECT(0xba, gbc.l());
        EXPECT(0x73ec, gbc.sp());
        EXPECT(0xefa2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xefa1));
        // 1B 039C
        gbc.setState(0xbaaa, 0x7d13, 0xc6e0, 0xf509, 0x6d3f, 0x31cc, 0x1, 0x1);
        gbc.writeMem(0xbaaa, { 0x1b });
        gbc.step();
        EXPECT(0xc6, gbc.a());
        EXPECT(0xf5, gbc.b());
        EXPECT(0x9, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x3e, gbc.e());
        EXPECT(0x31, gbc.h());
        EXPECT(0xcc, gbc.l());
        EXPECT(0x7d13, gbc.sp());
        EXPECT(0xbaab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbaaa));
        // 1B 039D
        gbc.setState(0xb9f9, 0x7015, 0xd890, 0x6ae4, 0xa530, 0xa33c, 0x1, 0x1);
        gbc.writeMem(0xb9f9, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x6a, gbc.b());
        EXPECT(0xe4, gbc.c());
        EXPECT(0xa5, gbc.d());
        EXPECT(0x2f, gbc.e());
        EXPECT(0xa3, gbc.h());
        EXPECT(0x3c, gbc.l());
        EXPECT(0x7015, gbc.sp());
        EXPECT(0xb9fa, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb9f9));
        // 1B 039E
        gbc.setState(0xd39a, 0xd430, 0x7020, 0x55f9, 0x7be, 0xdd64, 0x0, 0x0);
        gbc.writeMem(0xd39a, { 0x1b });
        gbc.step();
        EXPECT(0x70, gbc.a());
        EXPECT(0x55, gbc.b());
        EXPECT(0xf9, gbc.c());
        EXPECT(0x7, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xdd, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xd430, gbc.sp());
        EXPECT(0xd39b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd39a));
        // 1B 039F
        gbc.setState(0xb3ab, 0x7c7, 0xaad0, 0xa21, 0x2cfe, 0xd77b, 0x0, 0x1);
        gbc.writeMem(0xb3ab, { 0x1b });
        gbc.step();
        EXPECT(0xaa, gbc.a());
        EXPECT(0xa, gbc.b());
        EXPECT(0x21, gbc.c());
        EXPECT(0x2c, gbc.d());
        EXPECT(0xfd, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x7b, gbc.l());
        EXPECT(0x7c7, gbc.sp());
        EXPECT(0xb3ac, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb3ab));
        // 1B 03A0
        gbc.setState(0x632b, 0x83a8, 0xdaf0, 0x889f, 0x9d65, 0x11fd, 0x1, 0x0);
        gbc.writeMem(0x632b, { 0x1b });
        gbc.step();
        EXPECT(0xda, gbc.a());
        EXPECT(0x88, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x9d, gbc.d());
        EXPECT(0x64, gbc.e());
        EXPECT(0x11, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x83a8, gbc.sp());
        EXPECT(0x632c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03A1
        gbc.setState(0xdb41, 0xb7bb, 0x8e40, 0xd142, 0x5d46, 0x6077, 0x0, 0x0);
        gbc.writeMem(0xdb41, { 0x1b });
        gbc.step();
        EXPECT(0x8e, gbc.a());
        EXPECT(0xd1, gbc.b());
        EXPECT(0x42, gbc.c());
        EXPECT(0x5d, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x60, gbc.h());
        EXPECT(0x77, gbc.l());
        EXPECT(0xb7bb, gbc.sp());
        EXPECT(0xdb42, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xdb41));
        // 1B 03A2
        gbc.setState(0x166, 0x839, 0x5f60, 0x63bd, 0xd20b, 0xf251, 0x0, 0x1);
        gbc.writeMem(0x166, { 0x1b });
        gbc.step();
        EXPECT(0x5f, gbc.a());
        EXPECT(0x63, gbc.b());
        EXPECT(0xbd, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xa, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x51, gbc.l());
        EXPECT(0x839, gbc.sp());
        EXPECT(0x167, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03A3
        gbc.setState(0x118c, 0x84b7, 0x85c0, 0x405f, 0xe1ad, 0x65b3, 0x1, 0x1);
        gbc.writeMem(0x118c, { 0x1b });
        gbc.step();
        EXPECT(0x85, gbc.a());
        EXPECT(0x40, gbc.b());
        EXPECT(0x5f, gbc.c());
        EXPECT(0xe1, gbc.d());
        EXPECT(0xac, gbc.e());
        EXPECT(0x65, gbc.h());
        EXPECT(0xb3, gbc.l());
        EXPECT(0x84b7, gbc.sp());
        EXPECT(0x118d, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03A4
        gbc.setState(0x80d2, 0x2c83, 0x6130, 0xd70b, 0x3ccd, 0xb1a9, 0x1, 0x0);
        gbc.writeMem(0x80d2, { 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xb, gbc.c());
        EXPECT(0x3c, gbc.d());
        EXPECT(0xcc, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x2c83, gbc.sp());
        EXPECT(0x80d3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x80d2));
        // 1B 03A5
        gbc.setState(0x1017, 0x19f9, 0x25c0, 0x306e, 0x4593, 0xb452, 0x0, 0x1);
        gbc.writeMem(0x1017, { 0x1b });
        gbc.step();
        EXPECT(0x25, gbc.a());
        EXPECT(0x30, gbc.b());
        EXPECT(0x6e, gbc.c());
        EXPECT(0x45, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xb4, gbc.h());
        EXPECT(0x52, gbc.l());
        EXPECT(0x19f9, gbc.sp());
        EXPECT(0x1018, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03A6
        gbc.setState(0x4c9e, 0xbf40, 0xa420, 0xcd82, 0xeef9, 0xea70, 0x1, 0x0);
        gbc.writeMem(0x4c9e, { 0x1b });
        gbc.step();
        EXPECT(0xa4, gbc.a());
        EXPECT(0xcd, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xea, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xbf40, gbc.sp());
        EXPECT(0x4c9f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03A7
        gbc.setState(0x4814, 0xc738, 0xc830, 0x703a, 0x42a3, 0x528e, 0x1, 0x1);
        gbc.writeMem(0x4814, { 0x1b });
        gbc.step();
        EXPECT(0xc8, gbc.a());
        EXPECT(0x70, gbc.b());
        EXPECT(0x3a, gbc.c());
        EXPECT(0x42, gbc.d());
        EXPECT(0xa2, gbc.e());
        EXPECT(0x52, gbc.h());
        EXPECT(0x8e, gbc.l());
        EXPECT(0xc738, gbc.sp());
        EXPECT(0x4815, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03A8
        gbc.setState(0xd3aa, 0x28b0, 0x6e00, 0x5869, 0xd202, 0x1a9, 0x1, 0x1);
        gbc.writeMem(0xd3aa, { 0x1b });
        gbc.step();
        EXPECT(0x6e, gbc.a());
        EXPECT(0x58, gbc.b());
        EXPECT(0x69, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x1, gbc.e());
        EXPECT(0x1, gbc.h());
        EXPECT(0xa9, gbc.l());
        EXPECT(0x28b0, gbc.sp());
        EXPECT(0xd3ab, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd3aa));
        // 1B 03A9
        gbc.setState(0x150e, 0x91aa, 0x380, 0x5e97, 0xb580, 0x6366, 0x1, 0x1);
        gbc.writeMem(0x150e, { 0x1b });
        gbc.step();
        EXPECT(0x3, gbc.a());
        EXPECT(0x5e, gbc.b());
        EXPECT(0x97, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0x7f, gbc.e());
        EXPECT(0x63, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x91aa, gbc.sp());
        EXPECT(0x150f, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03AA
        gbc.setState(0xe445, 0x134, 0x16b0, 0xd7ed, 0xcfc2, 0xe0cd, 0x1, 0x1);
        gbc.writeMem(0xe445, { 0x1b });
        gbc.step();
        EXPECT(0x16, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0xc1, gbc.e());
        EXPECT(0xe0, gbc.h());
        EXPECT(0xcd, gbc.l());
        EXPECT(0x134, gbc.sp());
        EXPECT(0xe446, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe445));
        // 1B 03AB
        gbc.setState(0xa175, 0x55bc, 0xf2e0, 0x1166, 0xd43a, 0x98ad, 0x1, 0x1);
        gbc.writeMem(0xa175, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x11, gbc.b());
        EXPECT(0x66, gbc.c());
        EXPECT(0xd4, gbc.d());
        EXPECT(0x39, gbc.e());
        EXPECT(0x98, gbc.h());
        EXPECT(0xad, gbc.l());
        EXPECT(0x55bc, gbc.sp());
        EXPECT(0xa176, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa175));
        // 1B 03AC
        gbc.setState(0x29d5, 0xa608, 0xae60, 0xf3ed, 0xd7f9, 0xadcf, 0x0, 0x0);
        gbc.writeMem(0x29d5, { 0x1b });
        gbc.step();
        EXPECT(0xae, gbc.a());
        EXPECT(0xf3, gbc.b());
        EXPECT(0xed, gbc.c());
        EXPECT(0xd7, gbc.d());
        EXPECT(0xf8, gbc.e());
        EXPECT(0xad, gbc.h());
        EXPECT(0xcf, gbc.l());
        EXPECT(0xa608, gbc.sp());
        EXPECT(0x29d6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03AD
        gbc.setState(0x57c7, 0xd4ca, 0xfdf0, 0xeefd, 0x9ced, 0xfe69, 0x0, 0x1);
        gbc.writeMem(0x57c7, { 0x1b });
        gbc.step();
        EXPECT(0xfd, gbc.a());
        EXPECT(0xee, gbc.b());
        EXPECT(0xfd, gbc.c());
        EXPECT(0x9c, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0xfe, gbc.h());
        EXPECT(0x69, gbc.l());
        EXPECT(0xd4ca, gbc.sp());
        EXPECT(0x57c8, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03AE
        gbc.setState(0x4843, 0x55c2, 0xfc20, 0xe246, 0xd964, 0x9c19, 0x1, 0x1);
        gbc.writeMem(0x4843, { 0x1b });
        gbc.step();
        EXPECT(0xfc, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0x46, gbc.c());
        EXPECT(0xd9, gbc.d());
        EXPECT(0x63, gbc.e());
        EXPECT(0x9c, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0x55c2, gbc.sp());
        EXPECT(0x4844, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03AF
        gbc.setState(0x85e4, 0x6523, 0x73b0, 0x6daf, 0x13be, 0x105b, 0x0, 0x0);
        gbc.writeMem(0x85e4, { 0x1b });
        gbc.step();
        EXPECT(0x73, gbc.a());
        EXPECT(0x6d, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0x13, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0x5b, gbc.l());
        EXPECT(0x6523, gbc.sp());
        EXPECT(0x85e5, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x85e4));
        // 1B 03B0
        gbc.setState(0x6916, 0x11fd, 0x3df0, 0x90c8, 0x58e8, 0xe18d, 0x0, 0x1);
        gbc.writeMem(0x6916, { 0x1b });
        gbc.step();
        EXPECT(0x3d, gbc.a());
        EXPECT(0x90, gbc.b());
        EXPECT(0xc8, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0xe7, gbc.e());
        EXPECT(0xe1, gbc.h());
        EXPECT(0x8d, gbc.l());
        EXPECT(0x11fd, gbc.sp());
        EXPECT(0x6917, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B1
        gbc.setState(0x78bf, 0x9beb, 0xca50, 0x67f, 0x8e25, 0x5ade, 0x0, 0x0);
        gbc.writeMem(0x78bf, { 0x1b });
        gbc.step();
        EXPECT(0xca, gbc.a());
        EXPECT(0x6, gbc.b());
        EXPECT(0x7f, gbc.c());
        EXPECT(0x8e, gbc.d());
        EXPECT(0x24, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x9beb, gbc.sp());
        EXPECT(0x78c0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B2
        gbc.setState(0xa3d7, 0x5f9a, 0xfae0, 0xba9f, 0x5867, 0xb164, 0x1, 0x0);
        gbc.writeMem(0xa3d7, { 0x1b });
        gbc.step();
        EXPECT(0xfa, gbc.a());
        EXPECT(0xba, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x58, gbc.d());
        EXPECT(0x66, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0x5f9a, gbc.sp());
        EXPECT(0xa3d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa3d7));
        // 1B 03B3
        gbc.setState(0x273, 0xb0dc, 0xd890, 0xb740, 0x4446, 0x72fa, 0x0, 0x1);
        gbc.writeMem(0x273, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0xb7, gbc.b());
        EXPECT(0x40, gbc.c());
        EXPECT(0x44, gbc.d());
        EXPECT(0x45, gbc.e());
        EXPECT(0x72, gbc.h());
        EXPECT(0xfa, gbc.l());
        EXPECT(0xb0dc, gbc.sp());
        EXPECT(0x274, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B4
        gbc.setState(0x3721, 0x312d, 0x31b0, 0xc59f, 0x68b, 0xf266, 0x0, 0x1);
        gbc.writeMem(0x3721, { 0x1b });
        gbc.step();
        EXPECT(0x31, gbc.a());
        EXPECT(0xc5, gbc.b());
        EXPECT(0x9f, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x8a, gbc.e());
        EXPECT(0xf2, gbc.h());
        EXPECT(0x66, gbc.l());
        EXPECT(0x312d, gbc.sp());
        EXPECT(0x3722, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B5
        gbc.setState(0xa22, 0x22d7, 0xe8b0, 0x9698, 0x1ddc, 0x7c91, 0x0, 0x0);
        gbc.writeMem(0xa22, { 0x1b });
        gbc.step();
        EXPECT(0xe8, gbc.a());
        EXPECT(0x96, gbc.b());
        EXPECT(0x98, gbc.c());
        EXPECT(0x1d, gbc.d());
        EXPECT(0xdb, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x22d7, gbc.sp());
        EXPECT(0xa23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B6
        gbc.setState(0x9f13, 0x4db3, 0xe100, 0x9a2c, 0x184b, 0x95a7, 0x1, 0x1);
        gbc.writeMem(0x9f13, { 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0x9a, gbc.b());
        EXPECT(0x2c, gbc.c());
        EXPECT(0x18, gbc.d());
        EXPECT(0x4a, gbc.e());
        EXPECT(0x95, gbc.h());
        EXPECT(0xa7, gbc.l());
        EXPECT(0x4db3, gbc.sp());
        EXPECT(0x9f14, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9f13));
        // 1B 03B7
        gbc.setState(0x21ee, 0xd2ac, 0xe150, 0xbeeb, 0x6d4a, 0x5a38, 0x0, 0x1);
        gbc.writeMem(0x21ee, { 0x1b });
        gbc.step();
        EXPECT(0xe1, gbc.a());
        EXPECT(0xbe, gbc.b());
        EXPECT(0xeb, gbc.c());
        EXPECT(0x6d, gbc.d());
        EXPECT(0x49, gbc.e());
        EXPECT(0x5a, gbc.h());
        EXPECT(0x38, gbc.l());
        EXPECT(0xd2ac, gbc.sp());
        EXPECT(0x21ef, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03B8
        gbc.setState(0xcca, 0xfbe2, 0x5580, 0x5130, 0xe9ed, 0x6c92, 0x0, 0x1);
        gbc.writeMem(0xcca, { 0x1b });
        gbc.step();
        EXPECT(0x55, gbc.a());
        EXPECT(0x51, gbc.b());
        EXPECT(0x30, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0xec, gbc.e());
        EXPECT(0x6c, gbc.h());
        EXPECT(0x92, gbc.l());
        EXPECT(0xfbe2, gbc.sp());
        EXPECT(0xccb, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03B9
        gbc.setState(0x4247, 0xf82b, 0xd8a0, 0x9990, 0xdb51, 0x7d1d, 0x0, 0x0);
        gbc.writeMem(0x4247, { 0x1b });
        gbc.step();
        EXPECT(0xd8, gbc.a());
        EXPECT(0x99, gbc.b());
        EXPECT(0x90, gbc.c());
        EXPECT(0xdb, gbc.d());
        EXPECT(0x50, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x1d, gbc.l());
        EXPECT(0xf82b, gbc.sp());
        EXPECT(0x4248, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03BA
        gbc.setState(0x8a0, 0x53ca, 0xf1c0, 0x9d96, 0xe1b, 0x350e, 0x0, 0x0);
        gbc.writeMem(0x8a0, { 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0x9d, gbc.b());
        EXPECT(0x96, gbc.c());
        EXPECT(0xe, gbc.d());
        EXPECT(0x1a, gbc.e());
        EXPECT(0x35, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x53ca, gbc.sp());
        EXPECT(0x8a1, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03BB
        gbc.setState(0x400d, 0xac0, 0x7530, 0xd7c9, 0x27be, 0xac19, 0x1, 0x0);
        gbc.writeMem(0x400d, { 0x1b });
        gbc.step();
        EXPECT(0x75, gbc.a());
        EXPECT(0xd7, gbc.b());
        EXPECT(0xc9, gbc.c());
        EXPECT(0x27, gbc.d());
        EXPECT(0xbd, gbc.e());
        EXPECT(0xac, gbc.h());
        EXPECT(0x19, gbc.l());
        EXPECT(0xac0, gbc.sp());
        EXPECT(0x400e, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03BC
        gbc.setState(0x8194, 0x3143, 0x4ff0, 0x4354, 0x799c, 0x517c, 0x1, 0x0);
        gbc.writeMem(0x8194, { 0x1b });
        gbc.step();
        EXPECT(0x4f, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x54, gbc.c());
        EXPECT(0x79, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x51, gbc.h());
        EXPECT(0x7c, gbc.l());
        EXPECT(0x3143, gbc.sp());
        EXPECT(0x8195, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8194));
        // 1B 03BD
        gbc.setState(0xc25f, 0x5915, 0xa520, 0x8306, 0xe00e, 0xe384, 0x1, 0x1);
        gbc.writeMem(0xc25f, { 0x1b });
        gbc.step();
        EXPECT(0xa5, gbc.a());
        EXPECT(0x83, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xe0, gbc.d());
        EXPECT(0xd, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0x84, gbc.l());
        EXPECT(0x5915, gbc.sp());
        EXPECT(0xc260, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc25f));
        // 1B 03BE
        gbc.setState(0xd2c3, 0x642c, 0x9c60, 0xe012, 0x81bc, 0x667f, 0x0, 0x0);
        gbc.writeMem(0xd2c3, { 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0xe0, gbc.b());
        EXPECT(0x12, gbc.c());
        EXPECT(0x81, gbc.d());
        EXPECT(0xbb, gbc.e());
        EXPECT(0x66, gbc.h());
        EXPECT(0x7f, gbc.l());
        EXPECT(0x642c, gbc.sp());
        EXPECT(0xd2c4, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd2c3));
        // 1B 03BF
        gbc.setState(0x68b2, 0x50c1, 0x6170, 0xc3af, 0xccc5, 0xf62e, 0x0, 0x1);
        gbc.writeMem(0x68b2, { 0x1b });
        gbc.step();
        EXPECT(0x61, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0xaf, gbc.c());
        EXPECT(0xcc, gbc.d());
        EXPECT(0xc4, gbc.e());
        EXPECT(0xf6, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x50c1, gbc.sp());
        EXPECT(0x68b3, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03C0
        gbc.setState(0x2642, 0x90f3, 0xf6a0, 0x18fa, 0x193, 0xd6a5, 0x0, 0x0);
        gbc.writeMem(0x2642, { 0x1b });
        gbc.step();
        EXPECT(0xf6, gbc.a());
        EXPECT(0x18, gbc.b());
        EXPECT(0xfa, gbc.c());
        EXPECT(0x1, gbc.d());
        EXPECT(0x92, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0xa5, gbc.l());
        EXPECT(0x90f3, gbc.sp());
        EXPECT(0x2643, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03C1
        gbc.setState(0xb8d7, 0xcf50, 0x76c0, 0xffb2, 0xf987, 0xc57d, 0x1, 0x0);
        gbc.writeMem(0xb8d7, { 0x1b });
        gbc.step();
        EXPECT(0x76, gbc.a());
        EXPECT(0xff, gbc.b());
        EXPECT(0xb2, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x86, gbc.e());
        EXPECT(0xc5, gbc.h());
        EXPECT(0x7d, gbc.l());
        EXPECT(0xcf50, gbc.sp());
        EXPECT(0xb8d8, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb8d7));
        // 1B 03C2
        gbc.setState(0x2163, 0x19ca, 0x2330, 0x8bc2, 0x9f96, 0xa90f, 0x1, 0x0);
        gbc.writeMem(0x2163, { 0x1b });
        gbc.step();
        EXPECT(0x23, gbc.a());
        EXPECT(0x8b, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0x95, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xf, gbc.l());
        EXPECT(0x19ca, gbc.sp());
        EXPECT(0x2164, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03C3
        gbc.setState(0xab4a, 0xca58, 0xeb70, 0x3279, 0xaf09, 0x70c5, 0x0, 0x0);
        gbc.writeMem(0xab4a, { 0x1b });
        gbc.step();
        EXPECT(0xeb, gbc.a());
        EXPECT(0x32, gbc.b());
        EXPECT(0x79, gbc.c());
        EXPECT(0xaf, gbc.d());
        EXPECT(0x8, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xc5, gbc.l());
        EXPECT(0xca58, gbc.sp());
        EXPECT(0xab4b, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xab4a));
        // 1B 03C5
        gbc.setState(0x2a6b, 0xa7a9, 0x4000, 0xacdc, 0xf918, 0x869d, 0x1, 0x1);
        gbc.writeMem(0x2a6b, { 0x1b });
        gbc.step();
        EXPECT(0x40, gbc.a());
        EXPECT(0xac, gbc.b());
        EXPECT(0xdc, gbc.c());
        EXPECT(0xf9, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0x86, gbc.h());
        EXPECT(0x9d, gbc.l());
        EXPECT(0xa7a9, gbc.sp());
        EXPECT(0x2a6c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03C6
        gbc.setState(0xa1c9, 0x2c06, 0xd6a0, 0x1508, 0x685, 0xd191, 0x1, 0x0);
        gbc.writeMem(0xa1c9, { 0x1b });
        gbc.step();
        EXPECT(0xd6, gbc.a());
        EXPECT(0x15, gbc.b());
        EXPECT(0x8, gbc.c());
        EXPECT(0x6, gbc.d());
        EXPECT(0x84, gbc.e());
        EXPECT(0xd1, gbc.h());
        EXPECT(0x91, gbc.l());
        EXPECT(0x2c06, gbc.sp());
        EXPECT(0xa1ca, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xa1c9));
        // 1B 03C8
        gbc.setState(0x6904, 0xd110, 0x6cf0, 0x3a06, 0xae7f, 0x10ee, 0x1, 0x0);
        gbc.writeMem(0x6904, { 0x1b });
        gbc.step();
        EXPECT(0x6c, gbc.a());
        EXPECT(0x3a, gbc.b());
        EXPECT(0x6, gbc.c());
        EXPECT(0xae, gbc.d());
        EXPECT(0x7e, gbc.e());
        EXPECT(0x10, gbc.h());
        EXPECT(0xee, gbc.l());
        EXPECT(0xd110, gbc.sp());
        EXPECT(0x6905, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03C9
        gbc.setState(0x9cfe, 0x7111, 0xf150, 0xe2ad, 0x9b, 0x2767, 0x0, 0x0);
        gbc.writeMem(0x9cfe, { 0x1b });
        gbc.step();
        EXPECT(0xf1, gbc.a());
        EXPECT(0xe2, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x0, gbc.d());
        EXPECT(0x9a, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0x67, gbc.l());
        EXPECT(0x7111, gbc.sp());
        EXPECT(0x9cff, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9cfe));
        // 1B 03CA
        gbc.setState(0x57cf, 0x1445, 0x9cf0, 0x3d9, 0x7741, 0x5b8, 0x0, 0x0);
        gbc.writeMem(0x57cf, { 0x1b });
        gbc.step();
        EXPECT(0x9c, gbc.a());
        EXPECT(0x3, gbc.b());
        EXPECT(0xd9, gbc.c());
        EXPECT(0x77, gbc.d());
        EXPECT(0x40, gbc.e());
        EXPECT(0x5, gbc.h());
        EXPECT(0xb8, gbc.l());
        EXPECT(0x1445, gbc.sp());
        EXPECT(0x57d0, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03CB
        gbc.setState(0x74a5, 0x3af4, 0xb5e0, 0x7c53, 0xcf42, 0xd811, 0x0, 0x0);
        gbc.writeMem(0x74a5, { 0x1b });
        gbc.step();
        EXPECT(0xb5, gbc.a());
        EXPECT(0x7c, gbc.b());
        EXPECT(0x53, gbc.c());
        EXPECT(0xcf, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0xd8, gbc.h());
        EXPECT(0x11, gbc.l());
        EXPECT(0x3af4, gbc.sp());
        EXPECT(0x74a6, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03CC
        gbc.setState(0x6f54, 0x4fa2, 0x7cb0, 0xa85d, 0xb121, 0x74de, 0x1, 0x1);
        gbc.writeMem(0x6f54, { 0x1b });
        gbc.step();
        EXPECT(0x7c, gbc.a());
        EXPECT(0xa8, gbc.b());
        EXPECT(0x5d, gbc.c());
        EXPECT(0xb1, gbc.d());
        EXPECT(0x20, gbc.e());
        EXPECT(0x74, gbc.h());
        EXPECT(0xde, gbc.l());
        EXPECT(0x4fa2, gbc.sp());
        EXPECT(0x6f55, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03CD
        gbc.setState(0x1931, 0xeb95, 0x6fc0, 0x2a31, 0x2b42, 0x8c64, 0x1, 0x1);
        gbc.writeMem(0x1931, { 0x1b });
        gbc.step();
        EXPECT(0x6f, gbc.a());
        EXPECT(0x2a, gbc.b());
        EXPECT(0x31, gbc.c());
        EXPECT(0x2b, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x8c, gbc.h());
        EXPECT(0x64, gbc.l());
        EXPECT(0xeb95, gbc.sp());
        EXPECT(0x1932, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03CE
        gbc.setState(0x5738, 0xc194, 0x2030, 0x27d4, 0xd205, 0x4186, 0x0, 0x1);
        gbc.writeMem(0x5738, { 0x1b });
        gbc.step();
        EXPECT(0x20, gbc.a());
        EXPECT(0x27, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0x4, gbc.e());
        EXPECT(0x41, gbc.h());
        EXPECT(0x86, gbc.l());
        EXPECT(0xc194, gbc.sp());
        EXPECT(0x5739, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03CF
        gbc.setState(0xb7c3, 0x8407, 0xfb0, 0x6be8, 0x9fa5, 0xefd2, 0x1, 0x1);
        gbc.writeMem(0xb7c3, { 0x1b });
        gbc.step();
        EXPECT(0xf, gbc.a());
        EXPECT(0x6b, gbc.b());
        EXPECT(0xe8, gbc.c());
        EXPECT(0x9f, gbc.d());
        EXPECT(0xa4, gbc.e());
        EXPECT(0xef, gbc.h());
        EXPECT(0xd2, gbc.l());
        EXPECT(0x8407, gbc.sp());
        EXPECT(0xb7c4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xb7c3));
        // 1B 03D0
        gbc.setState(0xe99b, 0x86c3, 0x6690, 0x445c, 0xeafd, 0x27f2, 0x0, 0x1);
        gbc.writeMem(0xe99b, { 0x1b });
        gbc.step();
        EXPECT(0x66, gbc.a());
        EXPECT(0x44, gbc.b());
        EXPECT(0x5c, gbc.c());
        EXPECT(0xea, gbc.d());
        EXPECT(0xfc, gbc.e());
        EXPECT(0x27, gbc.h());
        EXPECT(0xf2, gbc.l());
        EXPECT(0x86c3, gbc.sp());
        EXPECT(0xe99c, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe99b));
        // 1B 03D1
        gbc.setState(0x94b1, 0xdb98, 0x1890, 0xf283, 0xeeee, 0x70ab, 0x1, 0x1);
        gbc.writeMem(0x94b1, { 0x1b });
        gbc.step();
        EXPECT(0x18, gbc.a());
        EXPECT(0xf2, gbc.b());
        EXPECT(0x83, gbc.c());
        EXPECT(0xee, gbc.d());
        EXPECT(0xed, gbc.e());
        EXPECT(0x70, gbc.h());
        EXPECT(0xab, gbc.l());
        EXPECT(0xdb98, gbc.sp());
        EXPECT(0x94b2, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x94b1));
        // 1B 03D2
        gbc.setState(0x369f, 0x87bb, 0xf200, 0x8d7a, 0xd2cb, 0xde25, 0x1, 0x0);
        gbc.writeMem(0x369f, { 0x1b });
        gbc.step();
        EXPECT(0xf2, gbc.a());
        EXPECT(0x8d, gbc.b());
        EXPECT(0x7a, gbc.c());
        EXPECT(0xd2, gbc.d());
        EXPECT(0xca, gbc.e());
        EXPECT(0xde, gbc.h());
        EXPECT(0x25, gbc.l());
        EXPECT(0x87bb, gbc.sp());
        EXPECT(0x36a0, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03D3
        gbc.setState(0x15d3, 0x7be, 0xfed0, 0x2bc7, 0xb5df, 0xd753, 0x1, 0x0);
        gbc.writeMem(0x15d3, { 0x1b });
        gbc.step();
        EXPECT(0xfe, gbc.a());
        EXPECT(0x2b, gbc.b());
        EXPECT(0xc7, gbc.c());
        EXPECT(0xb5, gbc.d());
        EXPECT(0xde, gbc.e());
        EXPECT(0xd7, gbc.h());
        EXPECT(0x53, gbc.l());
        EXPECT(0x7be, gbc.sp());
        EXPECT(0x15d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03D4
        gbc.setState(0x963a, 0xd93b, 0x47b0, 0xc65, 0xdca4, 0xa9fd, 0x1, 0x1);
        gbc.writeMem(0x963a, { 0x1b });
        gbc.step();
        EXPECT(0x47, gbc.a());
        EXPECT(0xc, gbc.b());
        EXPECT(0x65, gbc.c());
        EXPECT(0xdc, gbc.d());
        EXPECT(0xa3, gbc.e());
        EXPECT(0xa9, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0xd93b, gbc.sp());
        EXPECT(0x963b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x963a));
        // 1B 03D5
        gbc.setState(0x1c8d, 0x8e8c, 0xb4f0, 0x33a3, 0xefd3, 0x7c9b, 0x0, 0x0);
        gbc.writeMem(0x1c8d, { 0x1b });
        gbc.step();
        EXPECT(0xb4, gbc.a());
        EXPECT(0x33, gbc.b());
        EXPECT(0xa3, gbc.c());
        EXPECT(0xef, gbc.d());
        EXPECT(0xd2, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0x9b, gbc.l());
        EXPECT(0x8e8c, gbc.sp());
        EXPECT(0x1c8e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03D6
        gbc.setState(0x68b4, 0x7561, 0x2c00, 0xdfca, 0xe97a, 0xe3dc, 0x1, 0x0);
        gbc.writeMem(0x68b4, { 0x1b });
        gbc.step();
        EXPECT(0x2c, gbc.a());
        EXPECT(0xdf, gbc.b());
        EXPECT(0xca, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x79, gbc.e());
        EXPECT(0xe3, gbc.h());
        EXPECT(0xdc, gbc.l());
        EXPECT(0x7561, gbc.sp());
        EXPECT(0x68b5, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03D7
        gbc.setState(0xef4d, 0x532e, 0xec20, 0xbbd4, 0xfe45, 0x3099, 0x0, 0x0);
        gbc.writeMem(0xef4d, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xbb, gbc.b());
        EXPECT(0xd4, gbc.c());
        EXPECT(0xfe, gbc.d());
        EXPECT(0x44, gbc.e());
        EXPECT(0x30, gbc.h());
        EXPECT(0x99, gbc.l());
        EXPECT(0x532e, gbc.sp());
        EXPECT(0xef4e, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xef4d));
        // 1B 03D8
        gbc.setState(0xbb65, 0xe525, 0xee10, 0x4395, 0x1fd5, 0xed3a, 0x1, 0x1);
        gbc.writeMem(0xbb65, { 0x1b });
        gbc.step();
        EXPECT(0xee, gbc.a());
        EXPECT(0x43, gbc.b());
        EXPECT(0x95, gbc.c());
        EXPECT(0x1f, gbc.d());
        EXPECT(0xd4, gbc.e());
        EXPECT(0xed, gbc.h());
        EXPECT(0x3a, gbc.l());
        EXPECT(0xe525, gbc.sp());
        EXPECT(0xbb66, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xbb65));
        // 1B 03D9
        gbc.setState(0xee22, 0x231c, 0xec90, 0xfba5, 0x165c, 0xb7d6, 0x0, 0x1);
        gbc.writeMem(0xee22, { 0x1b });
        gbc.step();
        EXPECT(0xec, gbc.a());
        EXPECT(0xfb, gbc.b());
        EXPECT(0xa5, gbc.c());
        EXPECT(0x16, gbc.d());
        EXPECT(0x5b, gbc.e());
        EXPECT(0xb7, gbc.h());
        EXPECT(0xd6, gbc.l());
        EXPECT(0x231c, gbc.sp());
        EXPECT(0xee23, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xee22));
        // 1B 03DB
        gbc.setState(0xe4f9, 0xdff1, 0x9f20, 0x6233, 0xc2f6, 0x1737, 0x0, 0x0);
        gbc.writeMem(0xe4f9, { 0x1b });
        gbc.step();
        EXPECT(0x9f, gbc.a());
        EXPECT(0x62, gbc.b());
        EXPECT(0x33, gbc.c());
        EXPECT(0xc2, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0x17, gbc.h());
        EXPECT(0x37, gbc.l());
        EXPECT(0xdff1, gbc.sp());
        EXPECT(0xe4fa, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe4f9));
        // 1B 03DC
        gbc.setState(0x9b4a, 0xfb3b, 0xcc90, 0xede5, 0x7486, 0x8770, 0x1, 0x0);
        gbc.writeMem(0x9b4a, { 0x1b });
        gbc.step();
        EXPECT(0xcc, gbc.a());
        EXPECT(0xed, gbc.b());
        EXPECT(0xe5, gbc.c());
        EXPECT(0x74, gbc.d());
        EXPECT(0x85, gbc.e());
        EXPECT(0x87, gbc.h());
        EXPECT(0x70, gbc.l());
        EXPECT(0xfb3b, gbc.sp());
        EXPECT(0x9b4b, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x9b4a));
        // 1B 03DD
        gbc.setState(0x8ff3, 0x8abc, 0x5850, 0xd15, 0x9295, 0xe60e, 0x1, 0x0);
        gbc.writeMem(0x8ff3, { 0x1b });
        gbc.step();
        EXPECT(0x58, gbc.a());
        EXPECT(0xd, gbc.b());
        EXPECT(0x15, gbc.c());
        EXPECT(0x92, gbc.d());
        EXPECT(0x94, gbc.e());
        EXPECT(0xe6, gbc.h());
        EXPECT(0xe, gbc.l());
        EXPECT(0x8abc, gbc.sp());
        EXPECT(0x8ff4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x8ff3));
        // 1B 03DE
        gbc.setState(0xc6f2, 0x6c20, 0x7e80, 0xe9de, 0x5c18, 0xc4fd, 0x1, 0x0);
        gbc.writeMem(0xc6f2, { 0x1b });
        gbc.step();
        EXPECT(0x7e, gbc.a());
        EXPECT(0xe9, gbc.b());
        EXPECT(0xde, gbc.c());
        EXPECT(0x5c, gbc.d());
        EXPECT(0x17, gbc.e());
        EXPECT(0xc4, gbc.h());
        EXPECT(0xfd, gbc.l());
        EXPECT(0x6c20, gbc.sp());
        EXPECT(0xc6f3, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xc6f2));
        // 1B 03DF
        gbc.setState(0x5f1b, 0xa54a, 0xc510, 0xc351, 0xe906, 0x7cda, 0x1, 0x1);
        gbc.writeMem(0x5f1b, { 0x1b });
        gbc.step();
        EXPECT(0xc5, gbc.a());
        EXPECT(0xc3, gbc.b());
        EXPECT(0x51, gbc.c());
        EXPECT(0xe9, gbc.d());
        EXPECT(0x5, gbc.e());
        EXPECT(0x7c, gbc.h());
        EXPECT(0xda, gbc.l());
        EXPECT(0xa54a, gbc.sp());
        EXPECT(0x5f1c, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03E0
        gbc.setState(0x6ffd, 0xc982, 0x770, 0x9f7c, 0x4af3, 0xce57, 0x1, 0x0);
        gbc.writeMem(0x6ffd, { 0x1b });
        gbc.step();
        EXPECT(0x7, gbc.a());
        EXPECT(0x9f, gbc.b());
        EXPECT(0x7c, gbc.c());
        EXPECT(0x4a, gbc.d());
        EXPECT(0xf2, gbc.e());
        EXPECT(0xce, gbc.h());
        EXPECT(0x57, gbc.l());
        EXPECT(0xc982, gbc.sp());
        EXPECT(0x6ffe, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03E1
        gbc.setState(0x1e05, 0x514e, 0x3740, 0x9b41, 0x47f6, 0xd0c3, 0x0, 0x0);
        gbc.writeMem(0x1e05, { 0x1b });
        gbc.step();
        EXPECT(0x37, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x41, gbc.c());
        EXPECT(0x47, gbc.d());
        EXPECT(0xf5, gbc.e());
        EXPECT(0xd0, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0x514e, gbc.sp());
        EXPECT(0x1e06, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        // 1B 03E2
        gbc.setState(0xd2eb, 0x6c28, 0xd0c0, 0x9482, 0x2f3c, 0xd62e, 0x0, 0x0);
        gbc.writeMem(0xd2eb, { 0x1b });
        gbc.step();
        EXPECT(0xd0, gbc.a());
        EXPECT(0x94, gbc.b());
        EXPECT(0x82, gbc.c());
        EXPECT(0x2f, gbc.d());
        EXPECT(0x3b, gbc.e());
        EXPECT(0xd6, gbc.h());
        EXPECT(0x2e, gbc.l());
        EXPECT(0x6c28, gbc.sp());
        EXPECT(0xd2ec, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xd2eb));
        // 1B 03E3
        gbc.setState(0xe326, 0x6aba, 0xddc0, 0xdec2, 0xb9c1, 0x1556, 0x1, 0x1);
        gbc.writeMem(0xe326, { 0x1b });
        gbc.step();
        EXPECT(0xdd, gbc.a());
        EXPECT(0xde, gbc.b());
        EXPECT(0xc2, gbc.c());
        EXPECT(0xb9, gbc.d());
        EXPECT(0xc0, gbc.e());
        EXPECT(0x15, gbc.h());
        EXPECT(0x56, gbc.l());
        EXPECT(0x6aba, gbc.sp());
        EXPECT(0xe327, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(false, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0xe326));
        // 1B 03E4
        gbc.setState(0x17fe, 0xaeb7, 0x5df0, 0x7fe2, 0x9542, 0x7d2b, 0x1, 0x0);
        gbc.writeMem(0x17fe, { 0x1b });
        gbc.step();
        EXPECT(0x5d, gbc.a());
        EXPECT(0x7f, gbc.b());
        EXPECT(0xe2, gbc.c());
        EXPECT(0x95, gbc.d());
        EXPECT(0x41, gbc.e());
        EXPECT(0x7d, gbc.h());
        EXPECT(0x2b, gbc.l());
        EXPECT(0xaeb7, gbc.sp());
        EXPECT(0x17ff, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03E5
        gbc.setState(0x89d3, 0xf440, 0x250, 0xa4ad, 0x30ce, 0xb1c3, 0x1, 0x1);
        gbc.writeMem(0x89d3, { 0x1b });
        gbc.step();
        EXPECT(0x2, gbc.a());
        EXPECT(0xa4, gbc.b());
        EXPECT(0xad, gbc.c());
        EXPECT(0x30, gbc.d());
        EXPECT(0xcd, gbc.e());
        EXPECT(0xb1, gbc.h());
        EXPECT(0xc3, gbc.l());
        EXPECT(0xf440, gbc.sp());
        EXPECT(0x89d4, gbc.pc());
        EXPECT(0x1, gbc.ime());
        EXPECT(false, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
        EXPECT(0x1b, gbc.readMem(0x89d3));
        // 1B 03E6
        gbc.setState(0x1710, 0x72b2, 0x1bf0, 0x9b1c, 0x869c, 0x50bc, 0x0, 0x1);
        gbc.writeMem(0x1710, { 0x1b });
        gbc.step();
        EXPECT(0x1b, gbc.a());
        EXPECT(0x9b, gbc.b());
        EXPECT(0x1c, gbc.c());
        EXPECT(0x86, gbc.d());
        EXPECT(0x9b, gbc.e());
        EXPECT(0x50, gbc.h());
        EXPECT(0xbc, gbc.l());
        EXPECT(0x72b2, gbc.sp());
        EXPECT(0x1711, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(true, gbc.flagN());
        EXPECT(true, gbc.flagH());
        EXPECT(true, gbc.flagC());
        // 1B 03E7
        gbc.setState(0x630e, 0xb4bb, 0x3490, 0x19e9, 0x117d, 0x7579, 0x0, 0x0);
        gbc.writeMem(0x630e, { 0x1b });
        gbc.step();
        EXPECT(0x34, gbc.a());
        EXPECT(0x19, gbc.b());
        EXPECT(0xe9, gbc.c());
        EXPECT(0x11, gbc.d());
        EXPECT(0x7c, gbc.e());
        EXPECT(0x75, gbc.h());
        EXPECT(0x79, gbc.l());
        EXPECT(0xb4bb, gbc.sp());
        EXPECT(0x630f, gbc.pc());
        EXPECT(0x0, gbc.ime());
        EXPECT(true, gbc.flagZ());
        EXPECT(false, gbc.flagN());
        EXPECT(false, gbc.flagH());
        EXPECT(true, gbc.flagC());
    }
