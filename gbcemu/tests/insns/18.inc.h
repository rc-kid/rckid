    TEST(gbcemu, opcode_18) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 18 0000
        gbc.setState(0x5f0f, 0xf363, 0x3760, 0x60fb, 0xfc93, 0xa06c, 0x1, 0x0);
        gbc.writeMem(0x5f0f, { 0x18, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xf363);
        EXPECT(gbc.pc(), 0x5f4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0001
        gbc.setState(0xf17, 0xa9a2, 0xe550, 0xf51a, 0x3bac, 0xc122, 0x0, 0x1);
        gbc.writeMem(0xf17, { 0x18, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xa9a2);
        EXPECT(gbc.pc(), 0xeb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0002
        gbc.setState(0x858d, 0xa6bb, 0x9aa0, 0xfb7b, 0xeac6, 0x91cb, 0x0, 0x1);
        gbc.writeMem(0x858d, { 0x18, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xa6bb);
        EXPECT(gbc.pc(), 0x85b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x858d), 0x18);
        EXPECT(gbc.readMem(0x858e), 0x29);
        // 18 0003
        gbc.setState(0x5c6e, 0x82b0, 0xc600, 0x7122, 0x76c4, 0xd24c, 0x1, 0x1);
        gbc.writeMem(0x5c6e, { 0x18, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x82b0);
        EXPECT(gbc.pc(), 0x5c33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0004
        gbc.setState(0x5cea, 0x7598, 0xca50, 0x983e, 0x11c2, 0x9f8f, 0x0, 0x0);
        gbc.writeMem(0x5cea, { 0x18, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x7598);
        EXPECT(gbc.pc(), 0x5d67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0005
        gbc.setState(0x9dd, 0xa114, 0x180, 0x5973, 0xab25, 0x65d2, 0x1, 0x1);
        gbc.writeMem(0x9dd, { 0x18, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa114);
        EXPECT(gbc.pc(), 0x960);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0006
        gbc.setState(0x2321, 0xe126, 0x5ee0, 0x6c1a, 0xd2b7, 0x40dc, 0x1, 0x0);
        gbc.writeMem(0x2321, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xe126);
        EXPECT(gbc.pc(), 0x239b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0007
        gbc.setState(0x8ac7, 0x53cb, 0x17d0, 0x80c7, 0x88ab, 0x9114, 0x1, 0x0);
        gbc.writeMem(0x8ac7, { 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x53cb);
        EXPECT(gbc.pc(), 0x8ab7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac7), 0x18);
        EXPECT(gbc.readMem(0x8ac8), 0xee);
        // 18 0008
        gbc.setState(0x9b3c, 0x56ac, 0x6580, 0x9f2, 0xc02d, 0x71fb, 0x0, 0x0);
        gbc.writeMem(0x9b3c, { 0x18, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x56ac);
        EXPECT(gbc.pc(), 0x9ba0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b3c), 0x18);
        EXPECT(gbc.readMem(0x9b3d), 0x62);
        // 18 0009
        gbc.setState(0xe9cc, 0x25f9, 0x3130, 0x8f60, 0xe709, 0xb4a6, 0x1, 0x0);
        gbc.writeMem(0xe9cc, { 0x18, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x25f9);
        EXPECT(gbc.pc(), 0xe9db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9cc), 0x18);
        EXPECT(gbc.readMem(0xe9cd), 0xd);
        // 18 000A
        gbc.setState(0x7a5f, 0x7d19, 0x84b0, 0x2fcc, 0xe36c, 0x63bc, 0x0, 0x1);
        gbc.writeMem(0x7a5f, { 0x18, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7d19);
        EXPECT(gbc.pc(), 0x7a21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 000B
        gbc.setState(0x6a67, 0xacb6, 0xd9f0, 0x65e3, 0xcc78, 0xdc41, 0x1, 0x1);
        gbc.writeMem(0x6a67, { 0x18, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xacb6);
        EXPECT(gbc.pc(), 0x6a7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 000C
        gbc.setState(0xb71f, 0x7493, 0xe440, 0x1ebb, 0x62b2, 0x44b7, 0x0, 0x1);
        gbc.writeMem(0xb71f, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7493);
        EXPECT(gbc.pc(), 0xb6f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb71f), 0x18);
        EXPECT(gbc.readMem(0xb720), 0xd4);
        // 18 000D
        gbc.setState(0xd530, 0x20d7, 0xacc0, 0xee4d, 0xa1a9, 0x7c1c, 0x1, 0x0);
        gbc.writeMem(0xd530, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x20d7);
        EXPECT(gbc.pc(), 0xd536);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd530), 0x18);
        EXPECT(gbc.readMem(0xd531), 0x4);
        // 18 000F
        gbc.setState(0x3bb, 0x43a1, 0x5160, 0xd2da, 0xf496, 0x862b, 0x0, 0x1);
        gbc.writeMem(0x3bb, { 0x18, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x43a1);
        EXPECT(gbc.pc(), 0x387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0010
        gbc.setState(0x3d56, 0xe8f2, 0xb530, 0x6a73, 0xb231, 0x44bc, 0x0, 0x0);
        gbc.writeMem(0x3d56, { 0x18, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xe8f2);
        EXPECT(gbc.pc(), 0x3d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0011
        gbc.setState(0xc56d, 0x36aa, 0x2dd0, 0x705a, 0xd73f, 0x519b, 0x1, 0x0);
        gbc.writeMem(0xc56d, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x36aa);
        EXPECT(gbc.pc(), 0xc540);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc56d), 0x18);
        EXPECT(gbc.readMem(0xc56e), 0xd1);
        // 18 0013
        gbc.setState(0x9803, 0x8631, 0xf160, 0x2183, 0x38e0, 0xc33e, 0x1, 0x0);
        gbc.writeMem(0x9803, { 0x18, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8631);
        EXPECT(gbc.pc(), 0x9852);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9803), 0x18);
        EXPECT(gbc.readMem(0x9804), 0x4d);
        // 18 0014
        gbc.setState(0xc62, 0xcf36, 0xb720, 0x19ae, 0xc540, 0xedc5, 0x1, 0x0);
        gbc.writeMem(0xc62, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xcf36);
        EXPECT(gbc.pc(), 0xc9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0015
        gbc.setState(0x8cde, 0x23e2, 0xbf90, 0x4836, 0x7f14, 0xaef4, 0x1, 0x1);
        gbc.writeMem(0x8cde, { 0x18, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x23e2);
        EXPECT(gbc.pc(), 0x8d36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8cde), 0x18);
        EXPECT(gbc.readMem(0x8cdf), 0x56);
        // 18 0017
        gbc.setState(0x4c50, 0x924, 0x6d00, 0x14c0, 0x23f8, 0xb3fa, 0x1, 0x1);
        gbc.writeMem(0x4c50, { 0x18, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x924);
        EXPECT(gbc.pc(), 0x4c2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0018
        gbc.setState(0x82db, 0x952d, 0xb560, 0x8b08, 0xf019, 0xf6ba, 0x0, 0x0);
        gbc.writeMem(0x82db, { 0x18, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x952d);
        EXPECT(gbc.pc(), 0x82f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82db), 0x18);
        EXPECT(gbc.readMem(0x82dc), 0x1b);
        // 18 0019
        gbc.setState(0x6d42, 0x8b83, 0x52b0, 0xb0f, 0x2382, 0x2589, 0x1, 0x0);
        gbc.writeMem(0x6d42, { 0x18, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x8b83);
        EXPECT(gbc.pc(), 0x6da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 001A
        gbc.setState(0xe7c9, 0xc2d9, 0xb70, 0x14e0, 0x369c, 0xb05, 0x1, 0x0);
        gbc.writeMem(0xe7c9, { 0x18, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xc2d9);
        EXPECT(gbc.pc(), 0xe841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7c9), 0x18);
        EXPECT(gbc.readMem(0xe7ca), 0x76);
        // 18 001B
        gbc.setState(0xc714, 0x8b04, 0xa770, 0x89, 0x3b27, 0x218d, 0x0, 0x1);
        gbc.writeMem(0xc714, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8b04);
        EXPECT(gbc.pc(), 0xc6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc714), 0x18);
        EXPECT(gbc.readMem(0xc715), 0xc7);
        // 18 001C
        gbc.setState(0x5582, 0x6fb8, 0x5ca0, 0x7a00, 0xf1fd, 0x4655, 0x1, 0x1);
        gbc.writeMem(0x5582, { 0x18, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x6fb8);
        EXPECT(gbc.pc(), 0x556e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 001D
        gbc.setState(0xd5ba, 0x37c4, 0x7060, 0x9c80, 0x7740, 0x75ee, 0x1, 0x0);
        gbc.writeMem(0xd5ba, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x37c4);
        EXPECT(gbc.pc(), 0xd542);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ba), 0x18);
        EXPECT(gbc.readMem(0xd5bb), 0x86);
        // 18 001E
        gbc.setState(0xe104, 0x7b0a, 0xff0, 0x1bda, 0x7b3d, 0x5d02, 0x0, 0x1);
        gbc.writeMem(0xe104, { 0x18, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x7b0a);
        EXPECT(gbc.pc(), 0xe0f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe104), 0x18);
        EXPECT(gbc.readMem(0xe105), 0xea);
        // 18 001F
        gbc.setState(0xa868, 0x62b, 0x9eb0, 0xa3d3, 0xcc5, 0x4594, 0x1, 0x0);
        gbc.writeMem(0xa868, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x62b);
        EXPECT(gbc.pc(), 0xa8e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa868), 0x18);
        EXPECT(gbc.readMem(0xa869), 0x78);
        // 18 0021
        gbc.setState(0xe294, 0xf83c, 0x3510, 0x409e, 0xc64f, 0x5d0d, 0x0, 0x1);
        gbc.writeMem(0xe294, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xf83c);
        EXPECT(gbc.pc(), 0xe293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe294), 0x18);
        EXPECT(gbc.readMem(0xe295), 0xfd);
        // 18 0022
        gbc.setState(0xcfc2, 0x14a0, 0xb810, 0x12c0, 0x6de2, 0x4e16, 0x0, 0x1);
        gbc.writeMem(0xcfc2, { 0x18, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x14a0);
        EXPECT(gbc.pc(), 0xcfe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfc2), 0x18);
        EXPECT(gbc.readMem(0xcfc3), 0x1d);
        // 18 0024
        gbc.setState(0x6a47, 0x6890, 0xe970, 0xe69b, 0xdd8b, 0xb47, 0x1, 0x1);
        gbc.writeMem(0x6a47, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x6890);
        EXPECT(gbc.pc(), 0x69f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0025
        gbc.setState(0x673c, 0xa83c, 0x9920, 0x7a87, 0x321, 0x7c73, 0x1, 0x0);
        gbc.writeMem(0x673c, { 0x18, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xa83c);
        EXPECT(gbc.pc(), 0x66dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0026
        gbc.setState(0xc3a, 0xf77a, 0xa790, 0xf14b, 0xc914, 0x2bae, 0x1, 0x1);
        gbc.writeMem(0xc3a, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf77a);
        EXPECT(gbc.pc(), 0xbef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0027
        gbc.setState(0xb380, 0xe8a2, 0x29b0, 0x5b7d, 0xb4a7, 0xab55, 0x0, 0x1);
        gbc.writeMem(0xb380, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe8a2);
        EXPECT(gbc.pc(), 0xb330);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb380), 0x18);
        EXPECT(gbc.readMem(0xb381), 0xae);
        // 18 0028
        gbc.setState(0x801a, 0x7fe7, 0xb9e0, 0xb37c, 0xeb25, 0x11c3, 0x1, 0x1);
        gbc.writeMem(0x801a, { 0x18, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x7fe7);
        EXPECT(gbc.pc(), 0x8079);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x801a), 0x18);
        EXPECT(gbc.readMem(0x801b), 0x5d);
        // 18 0029
        gbc.setState(0xa1f2, 0x84b1, 0x8e20, 0x32b2, 0x14f6, 0xf26f, 0x0, 0x0);
        gbc.writeMem(0xa1f2, { 0x18, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x84b1);
        EXPECT(gbc.pc(), 0xa24a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1f2), 0x18);
        EXPECT(gbc.readMem(0xa1f3), 0x56);
        // 18 002A
        gbc.setState(0x7115, 0x6fa9, 0xc1a0, 0x5215, 0x53d9, 0x41bc, 0x1, 0x1);
        gbc.writeMem(0x7115, { 0x18, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x6fa9);
        EXPECT(gbc.pc(), 0x7155);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 002B
        gbc.setState(0xc992, 0x9902, 0xf0b0, 0x25ac, 0xef8, 0x791a, 0x0, 0x1);
        gbc.writeMem(0xc992, { 0x18, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9902);
        EXPECT(gbc.pc(), 0xc94d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc992), 0x18);
        EXPECT(gbc.readMem(0xc993), 0xb9);
        // 18 002C
        gbc.setState(0xdf30, 0x87e0, 0x5bb0, 0x58c8, 0xe50f, 0xe938, 0x1, 0x0);
        gbc.writeMem(0xdf30, { 0x18, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x87e0);
        EXPECT(gbc.pc(), 0xdfae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf30), 0x18);
        EXPECT(gbc.readMem(0xdf31), 0x7c);
        // 18 002D
        gbc.setState(0x9642, 0xb0e7, 0x3f30, 0xc8a7, 0x3d3, 0xf789, 0x0, 0x1);
        gbc.writeMem(0x9642, { 0x18, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb0e7);
        EXPECT(gbc.pc(), 0x9621);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9642), 0x18);
        EXPECT(gbc.readMem(0x9643), 0xdd);
        // 18 002E
        gbc.setState(0x44f4, 0x84bc, 0x37f0, 0x6a41, 0x446b, 0x2031, 0x1, 0x1);
        gbc.writeMem(0x44f4, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x84bc);
        EXPECT(gbc.pc(), 0x44bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 002F
        gbc.setState(0x4d7b, 0xe9c7, 0xecb0, 0x8db8, 0xeee4, 0xf3f5, 0x0, 0x1);
        gbc.writeMem(0x4d7b, { 0x18, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe9c7);
        EXPECT(gbc.pc(), 0x4db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0030
        gbc.setState(0x77bb, 0x3fa9, 0x9a90, 0xe171, 0xa33b, 0x2d36, 0x0, 0x1);
        gbc.writeMem(0x77bb, { 0x18, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3fa9);
        EXPECT(gbc.pc(), 0x7778);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0031
        gbc.setState(0x46a, 0x3db0, 0xc780, 0xf7df, 0x7c3d, 0x5010, 0x1, 0x0);
        gbc.writeMem(0x46a, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x3db0);
        EXPECT(gbc.pc(), 0x49a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0032
        gbc.setState(0x7b7a, 0xa6e5, 0xf800, 0x4a4e, 0x7010, 0xe447, 0x1, 0x1);
        gbc.writeMem(0x7b7a, { 0x18, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa6e5);
        EXPECT(gbc.pc(), 0x7b92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0033
        gbc.setState(0xde1, 0x4075, 0x80b0, 0x1cff, 0x2995, 0xae2a, 0x0, 0x1);
        gbc.writeMem(0xde1, { 0x18, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x4075);
        EXPECT(gbc.pc(), 0xde2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0034
        gbc.setState(0xeccc, 0x832, 0x7ef0, 0xacdc, 0x785b, 0x382b, 0x0, 0x0);
        gbc.writeMem(0xeccc, { 0x18, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x832);
        EXPECT(gbc.pc(), 0xece9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeccc), 0x18);
        EXPECT(gbc.readMem(0xeccd), 0x1b);
        // 18 0036
        gbc.setState(0x320c, 0xe406, 0x6140, 0x836, 0xa2c, 0xc0fd, 0x0, 0x1);
        gbc.writeMem(0x320c, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xe406);
        EXPECT(gbc.pc(), 0x325a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0037
        gbc.setState(0x6a28, 0x80c1, 0xe6e0, 0xe828, 0x63d5, 0x7b8e, 0x0, 0x0);
        gbc.writeMem(0x6a28, { 0x18, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x80c1);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0038
        gbc.setState(0xc6ae, 0x3499, 0x8ae0, 0x6d37, 0x14e4, 0x971f, 0x1, 0x1);
        gbc.writeMem(0xc6ae, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3499);
        EXPECT(gbc.pc(), 0xc6cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6ae), 0x18);
        EXPECT(gbc.readMem(0xc6af), 0x1f);
        // 18 0039
        gbc.setState(0x416f, 0xd84d, 0xad90, 0x702f, 0xa33f, 0x9ed7, 0x0, 0x0);
        gbc.writeMem(0x416f, { 0x18, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xd84d);
        EXPECT(gbc.pc(), 0x410d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 003A
        gbc.setState(0x1ed1, 0xb939, 0x87e0, 0xdb99, 0x46d2, 0x5aa4, 0x1, 0x1);
        gbc.writeMem(0x1ed1, { 0x18, 0xbf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xb939);
        EXPECT(gbc.pc(), 0x1e92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 003B
        gbc.setState(0x31f6, 0x336, 0x8bd0, 0xfbb8, 0xc42, 0xcc79, 0x0, 0x1);
        gbc.writeMem(0x31f6, { 0x18, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x336);
        EXPECT(gbc.pc(), 0x3199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 003C
        gbc.setState(0x660f, 0xc11d, 0xe8a0, 0x122e, 0x1df1, 0x5abd, 0x1, 0x0);
        gbc.writeMem(0x660f, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xc11d);
        EXPECT(gbc.pc(), 0x65d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 003D
        gbc.setState(0x236e, 0x75e5, 0x9020, 0xdd2d, 0x3dad, 0x27da, 0x1, 0x0);
        gbc.writeMem(0x236e, { 0x18, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x75e5);
        EXPECT(gbc.pc(), 0x23a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 003E
        gbc.setState(0xe0b5, 0xa40c, 0xd6b0, 0xc10f, 0x32b, 0xd7ff, 0x0, 0x1);
        gbc.writeMem(0xe0b5, { 0x18, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa40c);
        EXPECT(gbc.pc(), 0xe077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0b5), 0x18);
        EXPECT(gbc.readMem(0xe0b6), 0xc0);
        // 18 003F
        gbc.setState(0x5680, 0xd6c1, 0x3950, 0x7273, 0xdeb7, 0xebe4, 0x1, 0x1);
        gbc.writeMem(0x5680, { 0x18, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd6c1);
        EXPECT(gbc.pc(), 0x56e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0040
        gbc.setState(0xc48, 0x9a1, 0xfd0, 0xac26, 0x52bb, 0xe4d, 0x0, 0x0);
        gbc.writeMem(0xc48, { 0x18, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9a1);
        EXPECT(gbc.pc(), 0xc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0041
        gbc.setState(0xee59, 0xa035, 0x3cf0, 0xd7df, 0x8c3d, 0xd104, 0x1, 0x0);
        gbc.writeMem(0xee59, { 0x18, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa035);
        EXPECT(gbc.pc(), 0xeec7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee59), 0x18);
        EXPECT(gbc.readMem(0xee5a), 0x6c);
        // 18 0042
        gbc.setState(0x541, 0x9f66, 0xe290, 0x99f4, 0xff6b, 0xdcbb, 0x1, 0x0);
        gbc.writeMem(0x541, { 0x18, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9f66);
        EXPECT(gbc.pc(), 0x583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0043
        gbc.setState(0x975c, 0x4b33, 0xa1f0, 0x9a7a, 0x6740, 0xf000, 0x0, 0x1);
        gbc.writeMem(0x975c, { 0x18, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x4b33);
        EXPECT(gbc.pc(), 0x96e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x975c), 0x18);
        EXPECT(gbc.readMem(0x975d), 0x8b);
        // 18 0044
        gbc.setState(0x1958, 0xc21c, 0xb7e0, 0xfad0, 0xfad3, 0xaae8, 0x0, 0x1);
        gbc.writeMem(0x1958, { 0x18, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xc21c);
        EXPECT(gbc.pc(), 0x19a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0045
        gbc.setState(0x3f5a, 0xa87f, 0x7b40, 0x774f, 0x7cad, 0xf87, 0x1, 0x1);
        gbc.writeMem(0x3f5a, { 0x18, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xa87f);
        EXPECT(gbc.pc(), 0x3f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0046
        gbc.setState(0x6c13, 0x16f7, 0x7c20, 0xfb05, 0x7331, 0x7ce6, 0x0, 0x1);
        gbc.writeMem(0x6c13, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x16f7);
        EXPECT(gbc.pc(), 0x6be8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0048
        gbc.setState(0x4228, 0xb51e, 0xccf0, 0x23f8, 0xc764, 0x79a3, 0x0, 0x1);
        gbc.writeMem(0x4228, { 0x18, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb51e);
        EXPECT(gbc.pc(), 0x4229);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0049
        gbc.setState(0xe0d9, 0xc3ea, 0x5910, 0xbb61, 0xbfaf, 0xa14b, 0x1, 0x1);
        gbc.writeMem(0xe0d9, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xc3ea);
        EXPECT(gbc.pc(), 0xe089);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d9), 0x18);
        EXPECT(gbc.readMem(0xe0da), 0xae);
        // 18 004A
        gbc.setState(0x3edd, 0x10ae, 0xcd00, 0x17b, 0x7d3e, 0x5a36, 0x1, 0x1);
        gbc.writeMem(0x3edd, { 0x18, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x10ae);
        EXPECT(gbc.pc(), 0x3ede);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 004B
        gbc.setState(0x780d, 0xd56f, 0xc070, 0x8189, 0x19b0, 0x1c3d, 0x1, 0x1);
        gbc.writeMem(0x780d, { 0x18, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd56f);
        EXPECT(gbc.pc(), 0x77e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 004C
        gbc.setState(0xb144, 0x724, 0xf4f0, 0x427e, 0xaabc, 0x9149, 0x0, 0x0);
        gbc.writeMem(0xb144, { 0x18, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x724);
        EXPECT(gbc.pc(), 0xb0f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb144), 0x18);
        EXPECT(gbc.readMem(0xb145), 0xb2);
        // 18 004D
        gbc.setState(0x9cdc, 0x28c0, 0x3590, 0xb6c7, 0x2ca3, 0x8f14, 0x1, 0x0);
        gbc.writeMem(0x9cdc, { 0x18, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x28c0);
        EXPECT(gbc.pc(), 0x9c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cdc), 0x18);
        EXPECT(gbc.readMem(0x9cdd), 0xc0);
        // 18 004E
        gbc.setState(0xace0, 0xd257, 0x6130, 0x5274, 0xcdfc, 0xb4e7, 0x0, 0x0);
        gbc.writeMem(0xace0, { 0x18, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xd257);
        EXPECT(gbc.pc(), 0xac8d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xace0), 0x18);
        EXPECT(gbc.readMem(0xace1), 0xab);
        // 18 004F
        gbc.setState(0x5121, 0x9bbc, 0xb710, 0x3868, 0x378b, 0xba98, 0x0, 0x1);
        gbc.writeMem(0x5121, { 0x18, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x9bbc);
        EXPECT(gbc.pc(), 0x517a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0050
        gbc.setState(0xabd8, 0xfd1c, 0x6070, 0xbf2b, 0x9d40, 0xda03, 0x0, 0x0);
        gbc.writeMem(0xabd8, { 0x18, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfd1c);
        EXPECT(gbc.pc(), 0xac05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabd8), 0x18);
        EXPECT(gbc.readMem(0xabd9), 0x2b);
        // 18 0051
        gbc.setState(0xac37, 0x3bd6, 0xb660, 0xbe2d, 0x6f37, 0x8c71, 0x1, 0x1);
        gbc.writeMem(0xac37, { 0x18, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x3bd6);
        EXPECT(gbc.pc(), 0xac4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac37), 0x18);
        EXPECT(gbc.readMem(0xac38), 0x16);
        // 18 0052
        gbc.setState(0x2716, 0x6fc0, 0xebc0, 0x32ee, 0xc24b, 0xc50e, 0x1, 0x0);
        gbc.writeMem(0x2716, { 0x18, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6fc0);
        EXPECT(gbc.pc(), 0x2708);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0053
        gbc.setState(0x8c5, 0x23b5, 0x24a0, 0xb731, 0x505e, 0xa770, 0x0, 0x0);
        gbc.writeMem(0x8c5, { 0x18, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x23b5);
        EXPECT(gbc.pc(), 0x90d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0054
        gbc.setState(0x1e8a, 0xab6, 0x5110, 0x8912, 0x8e1f, 0x6774, 0x1, 0x0);
        gbc.writeMem(0x1e8a, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xab6);
        EXPECT(gbc.pc(), 0x1e5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0055
        gbc.setState(0xd97d, 0x6aa1, 0x4020, 0x24df, 0x4299, 0xb387, 0x1, 0x1);
        gbc.writeMem(0xd97d, { 0x18, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x6aa1);
        EXPECT(gbc.pc(), 0xd9b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd97d), 0x18);
        EXPECT(gbc.readMem(0xd97e), 0x31);
        // 18 0056
        gbc.setState(0xd1b0, 0x26f9, 0x6300, 0x8eb1, 0x4f6d, 0x936d, 0x0, 0x0);
        gbc.writeMem(0xd1b0, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x26f9);
        EXPECT(gbc.pc(), 0xd22c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1b0), 0x18);
        EXPECT(gbc.readMem(0xd1b1), 0x7a);
        // 18 0057
        gbc.setState(0x9d97, 0x9c8e, 0x51d0, 0x4bc8, 0xa99, 0x364b, 0x1, 0x0);
        gbc.writeMem(0x9d97, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x9c8e);
        EXPECT(gbc.pc(), 0x9d93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d97), 0x18);
        EXPECT(gbc.readMem(0x9d98), 0xfa);
        // 18 0058
        gbc.setState(0xb3cf, 0x9136, 0x2fd0, 0x9947, 0xc8cc, 0x3c3d, 0x0, 0x1);
        gbc.writeMem(0xb3cf, { 0x18, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x9136);
        EXPECT(gbc.pc(), 0xb39b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb3cf), 0x18);
        EXPECT(gbc.readMem(0xb3d0), 0xca);
        // 18 0059
        gbc.setState(0x906e, 0xe0f1, 0xa390, 0xebf1, 0xb0c1, 0x412c, 0x1, 0x1);
        gbc.writeMem(0x906e, { 0x18, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xe0f1);
        EXPECT(gbc.pc(), 0x9082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x906e), 0x18);
        EXPECT(gbc.readMem(0x906f), 0x12);
        // 18 005A
        gbc.setState(0x9bbd, 0x92e, 0xbef0, 0x808f, 0x6efc, 0xf011, 0x1, 0x1);
        gbc.writeMem(0x9bbd, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x92e);
        EXPECT(gbc.pc(), 0x9bfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bbd), 0x18);
        EXPECT(gbc.readMem(0x9bbe), 0x3f);
        // 18 005B
        gbc.setState(0xc81b, 0xd4a4, 0x6f10, 0x4bec, 0x517c, 0xcc3b, 0x0, 0x0);
        gbc.writeMem(0xc81b, { 0x18, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xd4a4);
        EXPECT(gbc.pc(), 0xc7c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc81b), 0x18);
        EXPECT(gbc.readMem(0xc81c), 0xab);
        // 18 005C
        gbc.setState(0x2e4b, 0xc491, 0x4090, 0x45e2, 0xa435, 0xd25f, 0x0, 0x1);
        gbc.writeMem(0x2e4b, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xc491);
        EXPECT(gbc.pc(), 0x2e49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 005D
        gbc.setState(0x4c96, 0x24a, 0xdf90, 0x6139, 0x76a6, 0x488c, 0x0, 0x0);
        gbc.writeMem(0x4c96, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x24a);
        EXPECT(gbc.pc(), 0x4cf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 005E
        gbc.setState(0xe358, 0xe8fb, 0xbee0, 0xfc89, 0xdb13, 0xe30e, 0x0, 0x1);
        gbc.writeMem(0xe358, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe8fb);
        EXPECT(gbc.pc(), 0xe3c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe358), 0x18);
        EXPECT(gbc.readMem(0xe359), 0x68);
        // 18 005F
        gbc.setState(0x42b4, 0x730d, 0x640, 0xd430, 0x43fd, 0x8542, 0x1, 0x1);
        gbc.writeMem(0x42b4, { 0x18, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x730d);
        EXPECT(gbc.pc(), 0x42fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0060
        gbc.setState(0xbcd4, 0xd5fd, 0xc7e0, 0x5692, 0xf571, 0x8fbd, 0x1, 0x0);
        gbc.writeMem(0xbcd4, { 0x18, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd5fd);
        EXPECT(gbc.pc(), 0xbc8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbcd4), 0x18);
        EXPECT(gbc.readMem(0xbcd5), 0xb5);
        // 18 0061
        gbc.setState(0xbf78, 0xc7e5, 0x51c0, 0x9518, 0xd913, 0xfac4, 0x0, 0x0);
        gbc.writeMem(0xbf78, { 0x18, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xc7e5);
        EXPECT(gbc.pc(), 0xbf51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf78), 0x18);
        EXPECT(gbc.readMem(0xbf79), 0xd7);
        // 18 0062
        gbc.setState(0x6ba7, 0x2b7d, 0x1230, 0xbae9, 0xe686, 0xdab, 0x1, 0x1);
        gbc.writeMem(0x6ba7, { 0x18, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x2b7d);
        EXPECT(gbc.pc(), 0x6be9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0063
        gbc.setState(0xbe65, 0x77e0, 0x9dd0, 0x3c73, 0x4475, 0xa700, 0x0, 0x1);
        gbc.writeMem(0xbe65, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x77e0);
        EXPECT(gbc.pc(), 0xbee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe65), 0x18);
        EXPECT(gbc.readMem(0xbe66), 0x7a);
        // 18 0064
        gbc.setState(0xa8b2, 0x4ec9, 0x3020, 0xcda0, 0x98ff, 0xbe84, 0x0, 0x0);
        gbc.writeMem(0xa8b2, { 0x18, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x4ec9);
        EXPECT(gbc.pc(), 0xa918);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8b2), 0x18);
        EXPECT(gbc.readMem(0xa8b3), 0x64);
        // 18 0065
        gbc.setState(0xd811, 0xad87, 0x1040, 0x8982, 0x41de, 0x380b, 0x1, 0x1);
        gbc.writeMem(0xd811, { 0x18, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xad87);
        EXPECT(gbc.pc(), 0xd7fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd811), 0x18);
        EXPECT(gbc.readMem(0xd812), 0xe8);
        // 18 0066
        gbc.setState(0xe32d, 0xf24f, 0x3c0, 0x4fc6, 0x5660, 0x2448, 0x0, 0x0);
        gbc.writeMem(0xe32d, { 0x18, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf24f);
        EXPECT(gbc.pc(), 0xe306);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe32d), 0x18);
        EXPECT(gbc.readMem(0xe32e), 0xd7);
        // 18 0067
        gbc.setState(0x737d, 0xb53c, 0x53c0, 0x887a, 0x7a7f, 0x9539, 0x1, 0x1);
        gbc.writeMem(0x737d, { 0x18, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb53c);
        EXPECT(gbc.pc(), 0x73e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0068
        gbc.setState(0x8289, 0xf976, 0x3660, 0x9195, 0xbef4, 0xd310, 0x0, 0x1);
        gbc.writeMem(0x8289, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xf976);
        EXPECT(gbc.pc(), 0x8267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8289), 0x18);
        EXPECT(gbc.readMem(0x828a), 0xdc);
        // 18 0069
        gbc.setState(0xec62, 0x7e8a, 0x4620, 0xa7b, 0xd39b, 0xc3da, 0x1, 0x0);
        gbc.writeMem(0xec62, { 0x18, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x7e8a);
        EXPECT(gbc.pc(), 0xebe6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec62), 0x18);
        EXPECT(gbc.readMem(0xec63), 0x82);
        // 18 006A
        gbc.setState(0xbe40, 0x4b83, 0xe970, 0x2438, 0x32d9, 0xec92, 0x0, 0x1);
        gbc.writeMem(0xbe40, { 0x18, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x4b83);
        EXPECT(gbc.pc(), 0xbdcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe40), 0x18);
        EXPECT(gbc.readMem(0xbe41), 0x8b);
        // 18 006B
        gbc.setState(0xe28b, 0xcea9, 0xa670, 0xd03c, 0xa4f2, 0xa2c8, 0x1, 0x1);
        gbc.writeMem(0xe28b, { 0x18, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xcea9);
        EXPECT(gbc.pc(), 0xe2d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe28b), 0x18);
        EXPECT(gbc.readMem(0xe28c), 0x4a);
        // 18 006C
        gbc.setState(0x4cc4, 0x4ce6, 0xd650, 0x5924, 0xf2d6, 0xdd8d, 0x1, 0x1);
        gbc.writeMem(0x4cc4, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4ce6);
        EXPECT(gbc.pc(), 0x4c5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 006D
        gbc.setState(0xd922, 0x9343, 0x4f70, 0x8645, 0xf65e, 0x164, 0x1, 0x0);
        gbc.writeMem(0xd922, { 0x18, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x9343);
        EXPECT(gbc.pc(), 0xd95c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd922), 0x18);
        EXPECT(gbc.readMem(0xd923), 0x38);
        // 18 006E
        gbc.setState(0xe238, 0xd3b9, 0x240, 0x832b, 0xff08, 0xf3d, 0x1, 0x1);
        gbc.writeMem(0xe238, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd3b9);
        EXPECT(gbc.pc(), 0xe259);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe238), 0x18);
        EXPECT(gbc.readMem(0xe239), 0x1f);
        // 18 006F
        gbc.setState(0x743d, 0x24f0, 0x9ba0, 0x63, 0x76d6, 0x1942, 0x1, 0x1);
        gbc.writeMem(0x743d, { 0x18, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x24f0);
        EXPECT(gbc.pc(), 0x74b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0070
        gbc.setState(0x5c17, 0xd591, 0x9630, 0x3733, 0xe1f1, 0x37e4, 0x1, 0x0);
        gbc.writeMem(0x5c17, { 0x18, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd591);
        EXPECT(gbc.pc(), 0x5bc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0071
        gbc.setState(0x8e2f, 0xf6e8, 0x1340, 0x9dd0, 0xd2fa, 0x857c, 0x0, 0x0);
        gbc.writeMem(0x8e2f, { 0x18, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xf6e8);
        EXPECT(gbc.pc(), 0x8e52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e2f), 0x18);
        EXPECT(gbc.readMem(0x8e30), 0x21);
        // 18 0072
        gbc.setState(0x86dc, 0x4c48, 0x3950, 0xd09e, 0x6e5a, 0x7513, 0x0, 0x1);
        gbc.writeMem(0x86dc, { 0x18, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4c48);
        EXPECT(gbc.pc(), 0x8671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86dc), 0x18);
        EXPECT(gbc.readMem(0x86dd), 0x93);
        // 18 0073
        gbc.setState(0x6ef4, 0xcf0e, 0x5d80, 0xac73, 0x1400, 0xaddf, 0x0, 0x0);
        gbc.writeMem(0x6ef4, { 0x18, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xcf0e);
        EXPECT(gbc.pc(), 0x6ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0074
        gbc.setState(0x6f4d, 0xb6fb, 0x9c0, 0x4d6b, 0x19b7, 0x83ea, 0x0, 0x1);
        gbc.writeMem(0x6f4d, { 0x18, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xb6fb);
        EXPECT(gbc.pc(), 0x6f50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0075
        gbc.setState(0x2ea8, 0x4f0, 0x4b30, 0xa549, 0x361c, 0x6ad2, 0x1, 0x1);
        gbc.writeMem(0x2ea8, { 0x18, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x4f0);
        EXPECT(gbc.pc(), 0x2e33);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0076
        gbc.setState(0x783a, 0x1142, 0xe0c0, 0xfa6a, 0x2bf, 0x5b34, 0x0, 0x0);
        gbc.writeMem(0x783a, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1142);
        EXPECT(gbc.pc(), 0x7821);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0077
        gbc.setState(0xd74f, 0x505e, 0xfea0, 0xaf30, 0x4475, 0xa45e, 0x0, 0x1);
        gbc.writeMem(0xd74f, { 0x18, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x505e);
        EXPECT(gbc.pc(), 0xd70f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd74f), 0x18);
        EXPECT(gbc.readMem(0xd750), 0xbe);
        // 18 0078
        gbc.setState(0x1109, 0x5dc6, 0xe990, 0x4687, 0x2861, 0xb324, 0x0, 0x1);
        gbc.writeMem(0x1109, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5dc6);
        EXPECT(gbc.pc(), 0x10b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0079
        gbc.setState(0xd16a, 0xea45, 0x4cd0, 0xcf0f, 0xc0df, 0xed04, 0x1, 0x1);
        gbc.writeMem(0xd16a, { 0x18, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xea45);
        EXPECT(gbc.pc(), 0xd1a8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd16a), 0x18);
        EXPECT(gbc.readMem(0xd16b), 0x3c);
        // 18 007A
        gbc.setState(0xe494, 0x6b7c, 0x2360, 0xeca8, 0xf531, 0xc275, 0x0, 0x0);
        gbc.writeMem(0xe494, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6b7c);
        EXPECT(gbc.pc(), 0xe4f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe494), 0x18);
        EXPECT(gbc.readMem(0xe495), 0x5f);
        // 18 007B
        gbc.setState(0xaad4, 0x26e9, 0xb7b0, 0x8da0, 0x2ac4, 0x919b, 0x1, 0x0);
        gbc.writeMem(0xaad4, { 0x18, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x26e9);
        EXPECT(gbc.pc(), 0xaaf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaad4), 0x18);
        EXPECT(gbc.readMem(0xaad5), 0x1d);
        // 18 007C
        gbc.setState(0xdc8b, 0xf823, 0x7130, 0xa790, 0xd487, 0x76f8, 0x1, 0x0);
        gbc.writeMem(0xdc8b, { 0x18, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xf823);
        EXPECT(gbc.pc(), 0xdc28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc8b), 0x18);
        EXPECT(gbc.readMem(0xdc8c), 0x9b);
        // 18 007D
        gbc.setState(0x7495, 0xcfc, 0xb00, 0x27e7, 0x2e78, 0x5eab, 0x0, 0x1);
        gbc.writeMem(0x7495, { 0x18, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcfc);
        EXPECT(gbc.pc(), 0x7508);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 007F
        gbc.setState(0x4743, 0x22b2, 0x3500, 0xdee0, 0x500f, 0x6181, 0x0, 0x0);
        gbc.writeMem(0x4743, { 0x18, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x22b2);
        EXPECT(gbc.pc(), 0x4702);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0080
        gbc.setState(0x582c, 0xb33e, 0xd490, 0x29e1, 0x5d51, 0xd586, 0x1, 0x1);
        gbc.writeMem(0x582c, { 0x18, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb33e);
        EXPECT(gbc.pc(), 0x57ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0081
        gbc.setState(0x3af5, 0x5e9d, 0x9110, 0x53e5, 0x7dbb, 0xe5e5, 0x0, 0x0);
        gbc.writeMem(0x3af5, { 0x18, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5e9d);
        EXPECT(gbc.pc(), 0x3a96);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0082
        gbc.setState(0x3b56, 0x5673, 0x5840, 0x963a, 0x2aff, 0xf012, 0x1, 0x1);
        gbc.writeMem(0x3b56, { 0x18, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x5673);
        EXPECT(gbc.pc(), 0x3ad8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0083
        gbc.setState(0x6195, 0x9243, 0x7a60, 0xed54, 0x6a, 0xa1e9, 0x0, 0x1);
        gbc.writeMem(0x6195, { 0x18, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9243);
        EXPECT(gbc.pc(), 0x6181);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0084
        gbc.setState(0x2d25, 0x7000, 0x7ec0, 0x164, 0x9ee8, 0xe1af, 0x1, 0x0);
        gbc.writeMem(0x2d25, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7000);
        EXPECT(gbc.pc(), 0x2da1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0085
        gbc.setState(0x6585, 0x5eb9, 0xf420, 0x956c, 0xe345, 0xac85, 0x0, 0x1);
        gbc.writeMem(0x6585, { 0x18, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x5eb9);
        EXPECT(gbc.pc(), 0x65b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0086
        gbc.setState(0xc72c, 0xc810, 0xa2c0, 0xd161, 0xd150, 0x51e2, 0x0, 0x0);
        gbc.writeMem(0xc72c, { 0x18, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc810);
        EXPECT(gbc.pc(), 0xc750);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc72c), 0x18);
        EXPECT(gbc.readMem(0xc72d), 0x22);
        // 18 0087
        gbc.setState(0x556, 0xdbff, 0xaa90, 0x895, 0xe1ab, 0xbd9e, 0x0, 0x1);
        gbc.writeMem(0x556, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xdbff);
        EXPECT(gbc.pc(), 0x5d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0088
        gbc.setState(0xad1b, 0x4cf4, 0x49e0, 0xf95, 0x7c71, 0x3916, 0x1, 0x0);
        gbc.writeMem(0xad1b, { 0x18, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x4cf4);
        EXPECT(gbc.pc(), 0xace8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad1b), 0x18);
        EXPECT(gbc.readMem(0xad1c), 0xcb);
        // 18 0089
        gbc.setState(0xdf31, 0x1311, 0x4440, 0xc9cd, 0xa0, 0xa7af, 0x0, 0x0);
        gbc.writeMem(0xdf31, { 0x18, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x1311);
        EXPECT(gbc.pc(), 0xdf4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf31), 0x18);
        EXPECT(gbc.readMem(0xdf32), 0x1c);
        // 18 008A
        gbc.setState(0xe7bd, 0x3027, 0x1f40, 0xd125, 0x89e9, 0xfb49, 0x1, 0x0);
        gbc.writeMem(0xe7bd, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x3027);
        EXPECT(gbc.pc(), 0xe765);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7bd), 0x18);
        EXPECT(gbc.readMem(0xe7be), 0xa6);
        // 18 008B
        gbc.setState(0xd5ee, 0xc193, 0x3540, 0x2fcf, 0x2ab3, 0xc940, 0x0, 0x0);
        gbc.writeMem(0xd5ee, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xc193);
        EXPECT(gbc.pc(), 0xd585);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5ee), 0x18);
        EXPECT(gbc.readMem(0xd5ef), 0x95);
        // 18 008C
        gbc.setState(0xb7e, 0xde49, 0x8f90, 0x5529, 0x9677, 0x3d36, 0x1, 0x0);
        gbc.writeMem(0xb7e, { 0x18, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xde49);
        EXPECT(gbc.pc(), 0xb92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 008E
        gbc.setState(0x5d3b, 0xf9d1, 0xe6a0, 0x9a06, 0x65e1, 0x40e4, 0x1, 0x1);
        gbc.writeMem(0x5d3b, { 0x18, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xf9d1);
        EXPECT(gbc.pc(), 0x5d6a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 008F
        gbc.setState(0x7576, 0x4d91, 0x8d40, 0xf9ec, 0x1f98, 0x18cd, 0x0, 0x1);
        gbc.writeMem(0x7576, { 0x18, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4d91);
        EXPECT(gbc.pc(), 0x752d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0090
        gbc.setState(0x396a, 0xa637, 0x4f0, 0x4a96, 0x1056, 0xb047, 0x1, 0x0);
        gbc.writeMem(0x396a, { 0x18, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xa637);
        EXPECT(gbc.pc(), 0x392f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0091
        gbc.setState(0xb57, 0x932f, 0x6e30, 0x1486, 0xbfa2, 0x3302, 0x0, 0x1);
        gbc.writeMem(0xb57, { 0x18, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x932f);
        EXPECT(gbc.pc(), 0xb13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0092
        gbc.setState(0x77c0, 0xded7, 0x5170, 0x86d, 0x5e37, 0xdd05, 0x1, 0x0);
        gbc.writeMem(0x77c0, { 0x18, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xded7);
        EXPECT(gbc.pc(), 0x7759);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0093
        gbc.setState(0xc0b3, 0xe72b, 0x9660, 0xf010, 0xa595, 0x1ade, 0x1, 0x0);
        gbc.writeMem(0xc0b3, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xe72b);
        EXPECT(gbc.pc(), 0xc0ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0b3), 0x18);
        EXPECT(gbc.readMem(0xc0b4), 0xf8);
        // 18 0094
        gbc.setState(0xefea, 0xd3ab, 0x8510, 0xe940, 0xbf89, 0xf764, 0x0, 0x1);
        gbc.writeMem(0xefea, { 0x18, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xd3ab);
        EXPECT(gbc.pc(), 0xf025);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefea), 0x18);
        EXPECT(gbc.readMem(0xefeb), 0x39);
        // 18 0096
        gbc.setState(0x1cc6, 0xed00, 0xddc0, 0x8550, 0x7c5, 0x683b, 0x0, 0x0);
        gbc.writeMem(0x1cc6, { 0x18, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xed00);
        EXPECT(gbc.pc(), 0x1d47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0097
        gbc.setState(0x35ee, 0x4188, 0x70, 0x9a7e, 0x3d37, 0xfa44, 0x0, 0x0);
        gbc.writeMem(0x35ee, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x4188);
        EXPECT(gbc.pc(), 0x35d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0098
        gbc.setState(0x2f60, 0x4bbb, 0x5200, 0x5e5b, 0xfafe, 0x9bdb, 0x1, 0x1);
        gbc.writeMem(0x2f60, { 0x18, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4bbb);
        EXPECT(gbc.pc(), 0x2f45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0099
        gbc.setState(0x1b3d, 0x3b87, 0x4130, 0xd997, 0x431a, 0x8323, 0x0, 0x0);
        gbc.writeMem(0x1b3d, { 0x18, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3b87);
        EXPECT(gbc.pc(), 0x1afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 009A
        gbc.setState(0x6e1f, 0xeee8, 0x8700, 0xb9e3, 0xf2cc, 0x4bac, 0x1, 0x0);
        gbc.writeMem(0x6e1f, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xeee8);
        EXPECT(gbc.pc(), 0x6e1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 009B
        gbc.setState(0x4aae, 0xcf86, 0xbda0, 0xaf85, 0xdcad, 0xc343, 0x1, 0x0);
        gbc.writeMem(0x4aae, { 0x18, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcf86);
        EXPECT(gbc.pc(), 0x4ae1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 009C
        gbc.setState(0x4aac, 0xb8c0, 0x8830, 0xcb2a, 0x39f8, 0x7c65, 0x0, 0x1);
        gbc.writeMem(0x4aac, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xb8c0);
        EXPECT(gbc.pc(), 0x4aa2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 009D
        gbc.setState(0xd714, 0x20b, 0x9e50, 0x1a73, 0x60c6, 0x74f2, 0x0, 0x0);
        gbc.writeMem(0xd714, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x20b);
        EXPECT(gbc.pc(), 0xd70e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd714), 0x18);
        EXPECT(gbc.readMem(0xd715), 0xf8);
        // 18 009E
        gbc.setState(0xa355, 0xb6ec, 0x13e0, 0x2d7f, 0x6f09, 0xc1b1, 0x0, 0x0);
        gbc.writeMem(0xa355, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xb6ec);
        EXPECT(gbc.pc(), 0xa2e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa355), 0x18);
        EXPECT(gbc.readMem(0xa356), 0x8e);
        // 18 00A1
        gbc.setState(0xd53c, 0xf165, 0x93d0, 0x3fe4, 0x9592, 0x7d58, 0x1, 0x0);
        gbc.writeMem(0xd53c, { 0x18, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xf165);
        EXPECT(gbc.pc(), 0xd56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd53c), 0x18);
        EXPECT(gbc.readMem(0xd53d), 0x2c);
        // 18 00A2
        gbc.setState(0xbffe, 0x3a86, 0xabf0, 0x2e74, 0x4851, 0x9e23, 0x1, 0x0);
        gbc.writeMem(0xbffe, { 0x18, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3a86);
        EXPECT(gbc.pc(), 0xc041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbffe), 0x18);
        EXPECT(gbc.readMem(0xbfff), 0x41);
        // 18 00A3
        gbc.setState(0x44f0, 0x2056, 0xd6a0, 0x7426, 0x364d, 0x43ee, 0x0, 0x1);
        gbc.writeMem(0x44f0, { 0x18, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2056);
        EXPECT(gbc.pc(), 0x4549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00A4
        gbc.setState(0x4656, 0x545d, 0x35d0, 0xb020, 0x6325, 0x1585, 0x1, 0x0);
        gbc.writeMem(0x4656, { 0x18, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x545d);
        EXPECT(gbc.pc(), 0x46cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00A5
        gbc.setState(0x2fa, 0xb55b, 0x220, 0x811d, 0xa48a, 0xdc4a, 0x0, 0x1);
        gbc.writeMem(0x2fa, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xb55b);
        EXPECT(gbc.pc(), 0x2e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00A6
        gbc.setState(0x78ee, 0xde3d, 0xd870, 0x6a72, 0x9907, 0x1f55, 0x0, 0x0);
        gbc.writeMem(0x78ee, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xde3d);
        EXPECT(gbc.pc(), 0x793c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00A7
        gbc.setState(0xd6b4, 0x15f9, 0xd050, 0x6888, 0x7856, 0x67a7, 0x1, 0x1);
        gbc.writeMem(0xd6b4, { 0x18, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x15f9);
        EXPECT(gbc.pc(), 0xd67a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b4), 0x18);
        EXPECT(gbc.readMem(0xd6b5), 0xc4);
        // 18 00A8
        gbc.setState(0x4030, 0xedcb, 0x6e70, 0x3eee, 0x955a, 0xf1ec, 0x1, 0x0);
        gbc.writeMem(0x4030, { 0x18, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xedcb);
        EXPECT(gbc.pc(), 0x3fbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00A9
        gbc.setState(0x2d3f, 0x9dc, 0xd530, 0x8eab, 0x3821, 0x9340, 0x0, 0x0);
        gbc.writeMem(0x2d3f, { 0x18, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x9dc);
        EXPECT(gbc.pc(), 0x2d2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00AA
        gbc.setState(0xb59b, 0x5ad4, 0x5810, 0xa854, 0x9b33, 0x154e, 0x0, 0x0);
        gbc.writeMem(0xb59b, { 0x18, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5ad4);
        EXPECT(gbc.pc(), 0xb5c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb59b), 0x18);
        EXPECT(gbc.readMem(0xb59c), 0x28);
        // 18 00AB
        gbc.setState(0x2133, 0xbf0e, 0x610, 0x6751, 0xb17d, 0xdaa3, 0x1, 0x1);
        gbc.writeMem(0x2133, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xbf0e);
        EXPECT(gbc.pc(), 0x20e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00AC
        gbc.setState(0x3bf7, 0x52d, 0x70, 0x37fa, 0xbb3f, 0x6449, 0x1, 0x1);
        gbc.writeMem(0x3bf7, { 0x18, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x52d);
        EXPECT(gbc.pc(), 0x3bc9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00AD
        gbc.setState(0xdcf6, 0xbe21, 0x3d40, 0x1043, 0x663c, 0x7f24, 0x1, 0x1);
        gbc.writeMem(0xdcf6, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xbe21);
        EXPECT(gbc.pc(), 0xdd60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcf6), 0x18);
        EXPECT(gbc.readMem(0xdcf7), 0x68);
        // 18 00AE
        gbc.setState(0x4d19, 0x5b9, 0x1580, 0xf24d, 0xc67a, 0x1138, 0x1, 0x0);
        gbc.writeMem(0x4d19, { 0x18, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5b9);
        EXPECT(gbc.pc(), 0x4cf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00AF
        gbc.setState(0x2a88, 0x3d56, 0xda0, 0x43d7, 0x4317, 0xe0e8, 0x1, 0x1);
        gbc.writeMem(0x2a88, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3d56);
        EXPECT(gbc.pc(), 0x2ae3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00B0
        gbc.setState(0x5098, 0xb6de, 0x7cc0, 0x2f04, 0xd0c5, 0x36ce, 0x0, 0x1);
        gbc.writeMem(0x5098, { 0x18, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb6de);
        EXPECT(gbc.pc(), 0x509a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00B1
        gbc.setState(0x7dd0, 0x5b2, 0x85f0, 0x8f1, 0x7c38, 0x9784, 0x0, 0x1);
        gbc.writeMem(0x7dd0, { 0x18, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x5b2);
        EXPECT(gbc.pc(), 0x7dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00B2
        gbc.setState(0x1601, 0xf25b, 0xfe40, 0x29f6, 0x7913, 0x35d, 0x0, 0x1);
        gbc.writeMem(0x1601, { 0x18, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf25b);
        EXPECT(gbc.pc(), 0x164c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00B3
        gbc.setState(0x90c6, 0x3db7, 0x4bb0, 0xc81c, 0x56a4, 0xe9f7, 0x0, 0x0);
        gbc.writeMem(0x90c6, { 0x18, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3db7);
        EXPECT(gbc.pc(), 0x9077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x90c6), 0x18);
        EXPECT(gbc.readMem(0x90c7), 0xaf);
        // 18 00B4
        gbc.setState(0x5fe, 0x7701, 0x71c0, 0x2bb2, 0xa6ba, 0x39bc, 0x1, 0x0);
        gbc.writeMem(0x5fe, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x7701);
        EXPECT(gbc.pc(), 0x5fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00B5
        gbc.setState(0xc701, 0xbb, 0xae00, 0x659b, 0xaf84, 0x5381, 0x1, 0x1);
        gbc.writeMem(0xc701, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbb);
        EXPECT(gbc.pc(), 0xc691);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc701), 0x18);
        EXPECT(gbc.readMem(0xc702), 0x8e);
        // 18 00B6
        gbc.setState(0x5915, 0x2d70, 0xe250, 0x68ec, 0x78c3, 0xecd6, 0x0, 0x1);
        gbc.writeMem(0x5915, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2d70);
        EXPECT(gbc.pc(), 0x5956);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00B7
        gbc.setState(0xcea9, 0xcd0, 0x1c0, 0xae26, 0xfce8, 0xc290, 0x0, 0x1);
        gbc.writeMem(0xcea9, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xcd0);
        EXPECT(gbc.pc(), 0xcee5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcea9), 0x18);
        EXPECT(gbc.readMem(0xceaa), 0x3a);
        // 18 00B8
        gbc.setState(0xdade, 0x48c2, 0xe0f0, 0xafc1, 0xfd47, 0x2fd1, 0x0, 0x0);
        gbc.writeMem(0xdade, { 0x18, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x48c2);
        EXPECT(gbc.pc(), 0xdb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdade), 0x18);
        EXPECT(gbc.readMem(0xdadf), 0x50);
        // 18 00B9
        gbc.setState(0x147d, 0xcce3, 0x9b00, 0x85c9, 0xbbae, 0x48b4, 0x1, 0x0);
        gbc.writeMem(0x147d, { 0x18, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xcce3);
        EXPECT(gbc.pc(), 0x14c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00BA
        gbc.setState(0x3aaf, 0xcca, 0x30d0, 0x615, 0x7619, 0xcbf1, 0x0, 0x1);
        gbc.writeMem(0x3aaf, { 0x18, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xcca);
        EXPECT(gbc.pc(), 0x3b0c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00BB
        gbc.setState(0x2b55, 0x3d74, 0x7f70, 0xd5c5, 0x1e95, 0xce36, 0x0, 0x1);
        gbc.writeMem(0x2b55, { 0x18, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x3d74);
        EXPECT(gbc.pc(), 0x2b37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00BC
        gbc.setState(0x9056, 0xc4cd, 0x720, 0xf12b, 0x5f33, 0x9152, 0x1, 0x1);
        gbc.writeMem(0x9056, { 0x18, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xc4cd);
        EXPECT(gbc.pc(), 0x90d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9056), 0x18);
        EXPECT(gbc.readMem(0x9057), 0x79);
        // 18 00BD
        gbc.setState(0xc4c, 0x7aad, 0x26f0, 0x9531, 0x398a, 0xf23e, 0x1, 0x0);
        gbc.writeMem(0xc4c, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x7aad);
        EXPECT(gbc.pc(), 0xc50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00BE
        gbc.setState(0x1847, 0x1bf7, 0x4de0, 0x1845, 0x6262, 0x9bab, 0x1, 0x0);
        gbc.writeMem(0x1847, { 0x18, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1bf7);
        EXPECT(gbc.pc(), 0x17d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00BF
        gbc.setState(0xbfcb, 0x84ca, 0x130, 0xb0c4, 0x7b9f, 0x1777, 0x1, 0x1);
        gbc.writeMem(0xbfcb, { 0x18, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x84ca);
        EXPECT(gbc.pc(), 0xc014);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfcb), 0x18);
        EXPECT(gbc.readMem(0xbfcc), 0x47);
        // 18 00C0
        gbc.setState(0x6deb, 0x4c8, 0x5640, 0x919a, 0xc467, 0x7e13, 0x0, 0x0);
        gbc.writeMem(0x6deb, { 0x18, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x4c8);
        EXPECT(gbc.pc(), 0x6e1d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00C1
        gbc.setState(0xb98b, 0xf534, 0xb790, 0xb163, 0x4723, 0xd220, 0x0, 0x1);
        gbc.writeMem(0xb98b, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xf534);
        EXPECT(gbc.pc(), 0xb9a0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb98b), 0x18);
        EXPECT(gbc.readMem(0xb98c), 0x13);
        // 18 00C2
        gbc.setState(0x1252, 0x7d97, 0xf380, 0x1866, 0x610e, 0xe244, 0x0, 0x1);
        gbc.writeMem(0x1252, { 0x18, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x7d97);
        EXPECT(gbc.pc(), 0x11e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00C3
        gbc.setState(0xee28, 0xe562, 0x31d0, 0x4fd0, 0x82ae, 0x745c, 0x0, 0x1);
        gbc.writeMem(0xee28, { 0x18, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xe562);
        EXPECT(gbc.pc(), 0xede0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xee28), 0x18);
        EXPECT(gbc.readMem(0xee29), 0xb6);
        // 18 00C4
        gbc.setState(0xea11, 0x6f5, 0x6e50, 0x2462, 0xc74b, 0xb0e6, 0x0, 0x1);
        gbc.writeMem(0xea11, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6f5);
        EXPECT(gbc.pc(), 0xe9e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea11), 0x18);
        EXPECT(gbc.readMem(0xea12), 0xd4);
        // 18 00C5
        gbc.setState(0x146e, 0x2c30, 0x7e80, 0xb13e, 0x91a3, 0x65b1, 0x0, 0x1);
        gbc.writeMem(0x146e, { 0x18, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x2c30);
        EXPECT(gbc.pc(), 0x1433);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00C6
        gbc.setState(0x9bb6, 0xd829, 0xbf30, 0x46cd, 0xd2bb, 0x99df, 0x1, 0x0);
        gbc.writeMem(0x9bb6, { 0x18, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xd829);
        EXPECT(gbc.pc(), 0x9bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bb6), 0x18);
        EXPECT(gbc.readMem(0x9bb7), 0xfe);
        // 18 00C7
        gbc.setState(0x9a3b, 0x7679, 0xd220, 0xa46d, 0xf8a8, 0x34a8, 0x0, 0x0);
        gbc.writeMem(0x9a3b, { 0x18, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x7679);
        EXPECT(gbc.pc(), 0x99cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a3b), 0x18);
        EXPECT(gbc.readMem(0x9a3c), 0x8f);
        // 18 00C8
        gbc.setState(0x3b2, 0x9522, 0x40e0, 0xbe14, 0xe40d, 0x18e3, 0x0, 0x1);
        gbc.writeMem(0x3b2, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9522);
        EXPECT(gbc.pc(), 0x362);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00C9
        gbc.setState(0xc2b, 0x27df, 0x7160, 0x609b, 0x989e, 0xf7b3, 0x1, 0x1);
        gbc.writeMem(0xc2b, { 0x18, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x27df);
        EXPECT(gbc.pc(), 0xc78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00CA
        gbc.setState(0x400, 0x6327, 0xc520, 0x735, 0xe630, 0x5067, 0x1, 0x1);
        gbc.writeMem(0x400, { 0x18, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6327);
        EXPECT(gbc.pc(), 0x429);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00CB
        gbc.setState(0x608a, 0x388f, 0xabe0, 0x701a, 0x45f2, 0x2bcc, 0x0, 0x0);
        gbc.writeMem(0x608a, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x388f);
        EXPECT(gbc.pc(), 0x6032);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00CC
        gbc.setState(0xa8a8, 0x7d3f, 0xa7c0, 0x3134, 0x1ce9, 0x8367, 0x1, 0x1);
        gbc.writeMem(0xa8a8, { 0x18, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7d3f);
        EXPECT(gbc.pc(), 0xa8d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8a8), 0x18);
        EXPECT(gbc.readMem(0xa8a9), 0x2f);
        // 18 00CD
        gbc.setState(0x8100, 0x6c88, 0x980, 0x77ad, 0x7b51, 0x6522, 0x0, 0x1);
        gbc.writeMem(0x8100, { 0x18, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x6c88);
        EXPECT(gbc.pc(), 0x813e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8100), 0x18);
        EXPECT(gbc.readMem(0x8101), 0x3c);
        // 18 00CE
        gbc.setState(0xa463, 0x2450, 0xf3b0, 0xedde, 0x5ffd, 0x5fb0, 0x0, 0x0);
        gbc.writeMem(0xa463, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x2450);
        EXPECT(gbc.pc(), 0xa4d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa463), 0x18);
        EXPECT(gbc.readMem(0xa464), 0x70);
        // 18 00CF
        gbc.setState(0xde07, 0x7c21, 0x5da0, 0x633a, 0xaf41, 0xe65c, 0x0, 0x1);
        gbc.writeMem(0xde07, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x7c21);
        EXPECT(gbc.pc(), 0xdde5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde07), 0x18);
        EXPECT(gbc.readMem(0xde08), 0xdc);
        // 18 00D0
        gbc.setState(0xcd49, 0xa809, 0x60b0, 0x1409, 0xa0e2, 0x6fd1, 0x1, 0x1);
        gbc.writeMem(0xcd49, { 0x18, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa809);
        EXPECT(gbc.pc(), 0xccce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd49), 0x18);
        EXPECT(gbc.readMem(0xcd4a), 0x83);
        // 18 00D1
        gbc.setState(0x234c, 0xba2b, 0x1590, 0x3656, 0xc12f, 0x189b, 0x0, 0x0);
        gbc.writeMem(0x234c, { 0x18, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xba2b);
        EXPECT(gbc.pc(), 0x2376);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00D2
        gbc.setState(0xe740, 0xa068, 0xd1f0, 0x198c, 0x335c, 0x5198, 0x0, 0x1);
        gbc.writeMem(0xe740, { 0x18, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa068);
        EXPECT(gbc.pc(), 0xe7b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe740), 0x18);
        EXPECT(gbc.readMem(0xe741), 0x6e);
        // 18 00D3
        gbc.setState(0xa1a4, 0xe3f7, 0x2f90, 0xfa92, 0xfd3e, 0x1caa, 0x0, 0x1);
        gbc.writeMem(0xa1a4, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xe3f7);
        EXPECT(gbc.pc(), 0xa1e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1a4), 0x18);
        EXPECT(gbc.readMem(0xa1a5), 0x3f);
        // 18 00D4
        gbc.setState(0xc873, 0x4263, 0xe7d0, 0xd7cc, 0x24b1, 0x1fd7, 0x1, 0x1);
        gbc.writeMem(0xc873, { 0x18, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x4263);
        EXPECT(gbc.pc(), 0xc859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc873), 0x18);
        EXPECT(gbc.readMem(0xc874), 0xe4);
        // 18 00D5
        gbc.setState(0xe018, 0x2ddb, 0xb970, 0x8a48, 0x6e5b, 0xf6f4, 0x0, 0x0);
        gbc.writeMem(0xe018, { 0x18, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x2ddb);
        EXPECT(gbc.pc(), 0xdfa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe018), 0x18);
        EXPECT(gbc.readMem(0xe019), 0x8a);
        // 18 00D6
        gbc.setState(0xbf44, 0xe298, 0x8030, 0xc979, 0x5860, 0x9191, 0x1, 0x1);
        gbc.writeMem(0xbf44, { 0x18, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xe298);
        EXPECT(gbc.pc(), 0xbfbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf44), 0x18);
        EXPECT(gbc.readMem(0xbf45), 0x77);
        // 18 00D8
        gbc.setState(0x49d0, 0x7603, 0xefd0, 0x179b, 0x340b, 0x1a13, 0x1, 0x1);
        gbc.writeMem(0x49d0, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x7603);
        EXPECT(gbc.pc(), 0x49ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00D9
        gbc.setState(0xc60e, 0x4bfd, 0xd5c0, 0x35b1, 0x2d7a, 0x4366, 0x1, 0x1);
        gbc.writeMem(0xc60e, { 0x18, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4bfd);
        EXPECT(gbc.pc(), 0xc638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc60e), 0x18);
        EXPECT(gbc.readMem(0xc60f), 0x28);
        // 18 00DA
        gbc.setState(0xb3a8, 0xe25c, 0x1840, 0xd920, 0x29eb, 0x593, 0x1, 0x1);
        gbc.writeMem(0xb3a8, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe25c);
        EXPECT(gbc.pc(), 0xb357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3a8), 0x18);
        EXPECT(gbc.readMem(0xb3a9), 0xad);
        // 18 00DB
        gbc.setState(0xad0d, 0x5ec2, 0x9c10, 0x29cc, 0xf54b, 0xd873, 0x0, 0x1);
        gbc.writeMem(0xad0d, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x5ec2);
        EXPECT(gbc.pc(), 0xacbc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad0d), 0x18);
        EXPECT(gbc.readMem(0xad0e), 0xad);
        // 18 00DC
        gbc.setState(0xca61, 0xd6c5, 0x12f0, 0xc68f, 0xbbda, 0xb98f, 0x0, 0x1);
        gbc.writeMem(0xca61, { 0x18, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xd6c5);
        EXPECT(gbc.pc(), 0xca05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca61), 0x18);
        EXPECT(gbc.readMem(0xca62), 0xa2);
        // 18 00DD
        gbc.setState(0xe59, 0x5e02, 0xe500, 0xa7e0, 0x1847, 0x2f04, 0x1, 0x1);
        gbc.writeMem(0xe59, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x5e02);
        EXPECT(gbc.pc(), 0xe01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00DE
        gbc.setState(0x603, 0xdf28, 0x41b0, 0x9c3, 0x454d, 0xc361, 0x0, 0x1);
        gbc.writeMem(0x603, { 0x18, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xdf28);
        EXPECT(gbc.pc(), 0x653);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00DF
        gbc.setState(0x5c44, 0xfe2d, 0x94f0, 0x8513, 0x3ecd, 0x3d01, 0x1, 0x1);
        gbc.writeMem(0x5c44, { 0x18, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xfe2d);
        EXPECT(gbc.pc(), 0x5bc7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00E0
        gbc.setState(0x876f, 0x58ec, 0xb600, 0xd8de, 0x2003, 0x3dbe, 0x1, 0x0);
        gbc.writeMem(0x876f, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x58ec);
        EXPECT(gbc.pc(), 0x8742);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x876f), 0x18);
        EXPECT(gbc.readMem(0x8770), 0xd1);
        // 18 00E1
        gbc.setState(0x7b5a, 0xe3a5, 0x140, 0x9383, 0x2097, 0x88f5, 0x0, 0x1);
        gbc.writeMem(0x7b5a, { 0x18, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xe3a5);
        EXPECT(gbc.pc(), 0x7b69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00E2
        gbc.setState(0x7196, 0xf5ce, 0x8ed0, 0x641c, 0xdb26, 0x1cf, 0x0, 0x0);
        gbc.writeMem(0x7196, { 0x18, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xf5ce);
        EXPECT(gbc.pc(), 0x71e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00E3
        gbc.setState(0x42b5, 0x83c5, 0x4b30, 0x63f8, 0x6fc3, 0x5a50, 0x1, 0x0);
        gbc.writeMem(0x42b5, { 0x18, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x83c5);
        EXPECT(gbc.pc(), 0x4237);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00E4
        gbc.setState(0x7bb6, 0x9f34, 0x6900, 0x603b, 0xe230, 0xc09, 0x0, 0x1);
        gbc.writeMem(0x7bb6, { 0x18, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x9f34);
        EXPECT(gbc.pc(), 0x7bd2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00E5
        gbc.setState(0x3b3e, 0x1ea3, 0xd040, 0x666d, 0x9c1b, 0xb5de, 0x0, 0x1);
        gbc.writeMem(0x3b3e, { 0x18, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x1ea3);
        EXPECT(gbc.pc(), 0x3b98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00E6
        gbc.setState(0x1b83, 0xd7e4, 0x8440, 0x2a8, 0xd811, 0xa8b9, 0x0, 0x0);
        gbc.writeMem(0x1b83, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xd7e4);
        EXPECT(gbc.pc(), 0x1b1a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00E7
        gbc.setState(0x6c6f, 0x3df1, 0xd8b0, 0xe7c6, 0x7a23, 0xb8ba, 0x0, 0x1);
        gbc.writeMem(0x6c6f, { 0x18, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3df1);
        EXPECT(gbc.pc(), 0x6c8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00E8
        gbc.setState(0x6e27, 0x9869, 0x8400, 0x25ce, 0xb6e5, 0xf5e5, 0x0, 0x1);
        gbc.writeMem(0x6e27, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x9869);
        EXPECT(gbc.pc(), 0x6e38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00E9
        gbc.setState(0x139d, 0x3060, 0xb500, 0x5bcd, 0xaf05, 0x968, 0x1, 0x0);
        gbc.writeMem(0x139d, { 0x18, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3060);
        EXPECT(gbc.pc(), 0x1343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00EA
        gbc.setState(0x5bdd, 0xbc03, 0xcde0, 0x9f80, 0x6020, 0x200f, 0x1, 0x0);
        gbc.writeMem(0x5bdd, { 0x18, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xbc03);
        EXPECT(gbc.pc(), 0x5c35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00EB
        gbc.setState(0x7e42, 0xd41e, 0x88d0, 0xb89f, 0xeea4, 0xcb4d, 0x1, 0x1);
        gbc.writeMem(0x7e42, { 0x18, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xd41e);
        EXPECT(gbc.pc(), 0x7e54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00EC
        gbc.setState(0x36ce, 0x6fe5, 0x4a70, 0x27ed, 0x42a, 0xf975, 0x0, 0x1);
        gbc.writeMem(0x36ce, { 0x18, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6fe5);
        EXPECT(gbc.pc(), 0x3708);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00ED
        gbc.setState(0x8954, 0x662, 0x66a0, 0x2769, 0x8742, 0x1bf6, 0x1, 0x0);
        gbc.writeMem(0x8954, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x662);
        EXPECT(gbc.pc(), 0x88dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8954), 0x18);
        EXPECT(gbc.readMem(0x8955), 0x86);
        // 18 00EE
        gbc.setState(0x31d3, 0x251a, 0xcf20, 0x9914, 0xfc, 0x912f, 0x1, 0x1);
        gbc.writeMem(0x31d3, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x251a);
        EXPECT(gbc.pc(), 0x322e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00EF
        gbc.setState(0x314e, 0xb8a5, 0x4850, 0xde6f, 0x3e2f, 0xb1d0, 0x1, 0x1);
        gbc.writeMem(0x314e, { 0x18, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xb8a5);
        EXPECT(gbc.pc(), 0x31a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00F0
        gbc.setState(0xcc20, 0x1802, 0xd9a0, 0xb06d, 0xfc60, 0xac0e, 0x1, 0x0);
        gbc.writeMem(0xcc20, { 0x18, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1802);
        EXPECT(gbc.pc(), 0xcbbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc20), 0x18);
        EXPECT(gbc.readMem(0xcc21), 0x9a);
        // 18 00F2
        gbc.setState(0xba8a, 0x8896, 0xd300, 0x46de, 0x93bb, 0xbe0e, 0x1, 0x0);
        gbc.writeMem(0xba8a, { 0x18, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x8896);
        EXPECT(gbc.pc(), 0xba1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba8a), 0x18);
        EXPECT(gbc.readMem(0xba8b), 0x92);
        // 18 00F3
        gbc.setState(0x2aaf, 0xa2a2, 0x3e0, 0xcd0a, 0xf129, 0xf1a8, 0x0, 0x0);
        gbc.writeMem(0x2aaf, { 0x18, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xa2a2);
        EXPECT(gbc.pc(), 0x2a69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00F4
        gbc.setState(0x2807, 0x5fd1, 0xe590, 0x10f0, 0x73d2, 0x9424, 0x0, 0x1);
        gbc.writeMem(0x2807, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x5fd1);
        EXPECT(gbc.pc(), 0x2801);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00F5
        gbc.setState(0xfbe, 0x7511, 0x5eb0, 0x2844, 0xe29f, 0x8daf, 0x0, 0x1);
        gbc.writeMem(0xfbe, { 0x18, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x7511);
        EXPECT(gbc.pc(), 0xff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00F6
        gbc.setState(0x38ff, 0x5671, 0x99e0, 0x384e, 0xf2cd, 0x57e9, 0x1, 0x1);
        gbc.writeMem(0x38ff, { 0x18, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x5671);
        EXPECT(gbc.pc(), 0x395f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00F7
        gbc.setState(0x7cc1, 0x8aa, 0x82f0, 0x62ac, 0xfb75, 0xe5db, 0x1, 0x0);
        gbc.writeMem(0x7cc1, { 0x18, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x8aa);
        EXPECT(gbc.pc(), 0x7c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00F8
        gbc.setState(0x3c8c, 0xc3a4, 0x5bf0, 0xada0, 0x3672, 0x1ac1, 0x0, 0x1);
        gbc.writeMem(0x3c8c, { 0x18, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xc3a4);
        EXPECT(gbc.pc(), 0x3d03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 00F9
        gbc.setState(0x5e7b, 0x90ce, 0xd2a0, 0xac1b, 0x6adf, 0xb880, 0x1, 0x0);
        gbc.writeMem(0x5e7b, { 0x18, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x90ce);
        EXPECT(gbc.pc(), 0x5ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00FA
        gbc.setState(0xa8df, 0xb4b4, 0xeb10, 0xa218, 0x737a, 0x63db, 0x1, 0x0);
        gbc.writeMem(0xa8df, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb4b4);
        EXPECT(gbc.pc(), 0xa8d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8df), 0x18);
        EXPECT(gbc.readMem(0xa8e0), 0xf8);
        // 18 00FB
        gbc.setState(0x1786, 0x2f82, 0xb880, 0xf213, 0xdef5, 0xf38f, 0x0, 0x0);
        gbc.writeMem(0x1786, { 0x18, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2f82);
        EXPECT(gbc.pc(), 0x172b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 00FC
        gbc.setState(0x7ecc, 0x7346, 0xea50, 0xc5b0, 0xeec3, 0x866, 0x0, 0x1);
        gbc.writeMem(0x7ecc, { 0x18, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7346);
        EXPECT(gbc.pc(), 0x7e59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 00FD
        gbc.setState(0x2fd0, 0x4e0c, 0x7ae0, 0xfa9d, 0x1386, 0x99e3, 0x1, 0x1);
        gbc.writeMem(0x2fd0, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x4e0c);
        EXPECT(gbc.pc(), 0x2ff8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 00FE
        gbc.setState(0xd6b1, 0x5d26, 0xd7d0, 0x67b, 0x329b, 0xe693, 0x0, 0x1);
        gbc.writeMem(0xd6b1, { 0x18, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5d26);
        EXPECT(gbc.pc(), 0xd64d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6b1), 0x18);
        EXPECT(gbc.readMem(0xd6b2), 0x9a);
        // 18 00FF
        gbc.setState(0xc116, 0x6121, 0x3cb0, 0x67b6, 0xa69e, 0x141e, 0x0, 0x0);
        gbc.writeMem(0xc116, { 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x6121);
        EXPECT(gbc.pc(), 0xc106);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc116), 0x18);
        EXPECT(gbc.readMem(0xc117), 0xee);
        // 18 0100
        gbc.setState(0x2d3a, 0xef35, 0xd5c0, 0x26a3, 0x211d, 0xbd1, 0x0, 0x0);
        gbc.writeMem(0x2d3a, { 0x18, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xef35);
        EXPECT(gbc.pc(), 0x2cbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0101
        gbc.setState(0x7559, 0xccb1, 0x38b0, 0x3091, 0xd04, 0x5f09, 0x1, 0x1);
        gbc.writeMem(0x7559, { 0x18, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xccb1);
        EXPECT(gbc.pc(), 0x7500);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0102
        gbc.setState(0x5561, 0x4672, 0x4840, 0x3cc5, 0x78dc, 0x878a, 0x1, 0x1);
        gbc.writeMem(0x5561, { 0x18, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x4672);
        EXPECT(gbc.pc(), 0x54fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0103
        gbc.setState(0xff7, 0x9644, 0x91c0, 0xc547, 0xfd68, 0x26b5, 0x1, 0x0);
        gbc.writeMem(0xff7, { 0x18, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x9644);
        EXPECT(gbc.pc(), 0xfd7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0104
        gbc.setState(0xeea9, 0x76ca, 0x8510, 0x836b, 0x4cb8, 0x1368, 0x0, 0x0);
        gbc.writeMem(0xeea9, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x76ca);
        EXPECT(gbc.pc(), 0xee9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeea9), 0x18);
        EXPECT(gbc.readMem(0xeeaa), 0xf4);
        // 18 0106
        gbc.setState(0xbd46, 0x4e0d, 0xb060, 0x6056, 0x7a69, 0x14cd, 0x1, 0x1);
        gbc.writeMem(0xbd46, { 0x18, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x4e0d);
        EXPECT(gbc.pc(), 0xbdab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbd46), 0x18);
        EXPECT(gbc.readMem(0xbd47), 0x63);
        // 18 0108
        gbc.setState(0xe6fa, 0xf336, 0xc350, 0x9ce4, 0x3e7, 0x1cb2, 0x0, 0x1);
        gbc.writeMem(0xe6fa, { 0x18, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xf336);
        EXPECT(gbc.pc(), 0xe720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6fa), 0x18);
        EXPECT(gbc.readMem(0xe6fb), 0x24);
        // 18 0109
        gbc.setState(0xafd4, 0x6807, 0xf300, 0xf12f, 0x46b6, 0x6113, 0x1, 0x0);
        gbc.writeMem(0xafd4, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x6807);
        EXPECT(gbc.pc(), 0xafa9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xafd4), 0x18);
        EXPECT(gbc.readMem(0xafd5), 0xd3);
        // 18 010A
        gbc.setState(0xceac, 0x4231, 0x7790, 0xd707, 0x8ba1, 0x1e3d, 0x0, 0x0);
        gbc.writeMem(0xceac, { 0x18, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x4231);
        EXPECT(gbc.pc(), 0xceae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xceac), 0x18);
        EXPECT(gbc.readMem(0xcead), 0x0);
        // 18 010B
        gbc.setState(0xa3, 0x6949, 0xdd0, 0x292d, 0x1856, 0x6767, 0x0, 0x0);
        gbc.writeMem(0xa3, { 0x18, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6949);
        EXPECT(gbc.pc(), 0x41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 010C
        gbc.setState(0xb621, 0x192, 0x5470, 0xeb41, 0xe435, 0x38d6, 0x0, 0x0);
        gbc.writeMem(0xb621, { 0x18, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x192);
        EXPECT(gbc.pc(), 0xb5e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb621), 0x18);
        EXPECT(gbc.readMem(0xb622), 0xbd);
        // 18 010D
        gbc.setState(0x478b, 0x1e3, 0x56b0, 0xd745, 0x4456, 0x430e, 0x1, 0x0);
        gbc.writeMem(0x478b, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1e3);
        EXPECT(gbc.pc(), 0x47b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 010E
        gbc.setState(0xd462, 0xca0, 0xc600, 0x35c4, 0x5704, 0x43c0, 0x1, 0x0);
        gbc.writeMem(0xd462, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xca0);
        EXPECT(gbc.pc(), 0xd461);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd462), 0x18);
        EXPECT(gbc.readMem(0xd463), 0xfd);
        // 18 010F
        gbc.setState(0x6b30, 0x190, 0x5a70, 0x9cd4, 0x4f24, 0xdbe1, 0x0, 0x0);
        gbc.writeMem(0x6b30, { 0x18, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x190);
        EXPECT(gbc.pc(), 0x6b0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0110
        gbc.setState(0x474b, 0x2b2d, 0xcf90, 0x514b, 0xae70, 0x96f8, 0x1, 0x1);
        gbc.writeMem(0x474b, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x2b2d);
        EXPECT(gbc.pc(), 0x4745);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0111
        gbc.setState(0xb7, 0x5c91, 0x10b0, 0xd02, 0xce06, 0x2bcd, 0x0, 0x0);
        gbc.writeMem(0xb7, { 0x18, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x5c91);
        EXPECT(gbc.pc(), 0x4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0112
        gbc.setState(0x76a1, 0x5673, 0x36e0, 0x7ec4, 0x8c0, 0xabb2, 0x0, 0x1);
        gbc.writeMem(0x76a1, { 0x18, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x5673);
        EXPECT(gbc.pc(), 0x76cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0113
        gbc.setState(0xbe4d, 0x5d79, 0xcc0, 0xf3f1, 0x1904, 0xf362, 0x1, 0x0);
        gbc.writeMem(0xbe4d, { 0x18, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x5d79);
        EXPECT(gbc.pc(), 0xbea7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe4d), 0x18);
        EXPECT(gbc.readMem(0xbe4e), 0x58);
        // 18 0114
        gbc.setState(0xb679, 0xa250, 0x5ad0, 0x5c38, 0xd130, 0xbd3f, 0x1, 0x0);
        gbc.writeMem(0xb679, { 0x18, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xa250);
        EXPECT(gbc.pc(), 0xb687);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb679), 0x18);
        EXPECT(gbc.readMem(0xb67a), 0xc);
        // 18 0115
        gbc.setState(0xdec5, 0x33c2, 0x8570, 0x91f3, 0x6f3b, 0x25e9, 0x1, 0x0);
        gbc.writeMem(0xdec5, { 0x18, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x33c2);
        EXPECT(gbc.pc(), 0xdf1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec5), 0x18);
        EXPECT(gbc.readMem(0xdec6), 0x54);
        // 18 0116
        gbc.setState(0xd33f, 0xd613, 0x3db0, 0xa960, 0xbf3e, 0x43bd, 0x1, 0x0);
        gbc.writeMem(0xd33f, { 0x18, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd613);
        EXPECT(gbc.pc(), 0xd35e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd33f), 0x18);
        EXPECT(gbc.readMem(0xd340), 0x1d);
        // 18 0117
        gbc.setState(0x45de, 0x4152, 0xc430, 0xb393, 0xba84, 0x4f65, 0x0, 0x0);
        gbc.writeMem(0x45de, { 0x18, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x4152);
        EXPECT(gbc.pc(), 0x457e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0118
        gbc.setState(0x9058, 0xa3dc, 0x6ef0, 0x22f1, 0x562c, 0xa1f3, 0x0, 0x1);
        gbc.writeMem(0x9058, { 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa3dc);
        EXPECT(gbc.pc(), 0x9048);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9058), 0x18);
        EXPECT(gbc.readMem(0x9059), 0xee);
        // 18 0119
        gbc.setState(0x145e, 0x4b79, 0x15e0, 0x78a4, 0x4ce8, 0x1694, 0x0, 0x1);
        gbc.writeMem(0x145e, { 0x18, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x4b79);
        EXPECT(gbc.pc(), 0x14dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 011A
        gbc.setState(0x4b3e, 0x6996, 0x4100, 0xd82a, 0x9295, 0xad59, 0x0, 0x0);
        gbc.writeMem(0x4b3e, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6996);
        EXPECT(gbc.pc(), 0x4b9f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 011B
        gbc.setState(0x1737, 0x1540, 0x77f0, 0xc3d2, 0x2ce5, 0x3938, 0x0, 0x0);
        gbc.writeMem(0x1737, { 0x18, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x1540);
        EXPECT(gbc.pc(), 0x16be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 011C
        gbc.setState(0xc6a5, 0xcdf8, 0x1d80, 0x893b, 0x8629, 0x27e2, 0x1, 0x1);
        gbc.writeMem(0xc6a5, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xcdf8);
        EXPECT(gbc.pc(), 0xc6c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6a5), 0x18);
        EXPECT(gbc.readMem(0xc6a6), 0x1f);
        // 18 011D
        gbc.setState(0xb710, 0x8d93, 0x27d0, 0x4990, 0x693b, 0x1671, 0x0, 0x1);
        gbc.writeMem(0xb710, { 0x18, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x8d93);
        EXPECT(gbc.pc(), 0xb704);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb710), 0x18);
        EXPECT(gbc.readMem(0xb711), 0xf2);
        // 18 011E
        gbc.setState(0xb99, 0xaaf0, 0x1150, 0x4faa, 0x57ab, 0x7471, 0x0, 0x1);
        gbc.writeMem(0xb99, { 0x18, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xaaf0);
        EXPECT(gbc.pc(), 0xbed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0120
        gbc.setState(0x64ad, 0x681c, 0xdf50, 0xa519, 0xc72d, 0x51f5, 0x0, 0x1);
        gbc.writeMem(0x64ad, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x681c);
        EXPECT(gbc.pc(), 0x64d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0123
        gbc.setState(0x9822, 0x5d59, 0x6410, 0x49f, 0xfa6f, 0xbeca, 0x1, 0x1);
        gbc.writeMem(0x9822, { 0x18, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x5d59);
        EXPECT(gbc.pc(), 0x97bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9822), 0x18);
        EXPECT(gbc.readMem(0x9823), 0x99);
        // 18 0124
        gbc.setState(0x4b86, 0xad9, 0x20d0, 0x584a, 0x4843, 0x2433, 0x0, 0x1);
        gbc.writeMem(0x4b86, { 0x18, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xad9);
        EXPECT(gbc.pc(), 0x4b8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0125
        gbc.setState(0x9f1d, 0xde4f, 0xb640, 0x53cd, 0x56a9, 0x1c26, 0x1, 0x0);
        gbc.writeMem(0x9f1d, { 0x18, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xde4f);
        EXPECT(gbc.pc(), 0x9eda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f1d), 0x18);
        EXPECT(gbc.readMem(0x9f1e), 0xbb);
        // 18 0126
        gbc.setState(0xdc28, 0x34f4, 0x2d70, 0x2fa, 0xc9f6, 0xe0f2, 0x0, 0x1);
        gbc.writeMem(0xdc28, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x34f4);
        EXPECT(gbc.pc(), 0xdbb2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc28), 0x18);
        EXPECT(gbc.readMem(0xdc29), 0x88);
        // 18 0127
        gbc.setState(0x1913, 0xbf06, 0xbbb0, 0x76d8, 0xe5c3, 0x4c59, 0x1, 0x1);
        gbc.writeMem(0x1913, { 0x18, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbf06);
        EXPECT(gbc.pc(), 0x196f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0128
        gbc.setState(0x5649, 0x140a, 0xa690, 0x8e54, 0xb84f, 0x955c, 0x0, 0x1);
        gbc.writeMem(0x5649, { 0x18, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x140a);
        EXPECT(gbc.pc(), 0x55fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0129
        gbc.setState(0xb433, 0xf0d2, 0xc310, 0xec4a, 0xa059, 0x589c, 0x1, 0x1);
        gbc.writeMem(0xb433, { 0x18, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xf0d2);
        EXPECT(gbc.pc(), 0xb443);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb433), 0x18);
        EXPECT(gbc.readMem(0xb434), 0xe);
        // 18 012A
        gbc.setState(0x998, 0x92c8, 0x5be0, 0x243f, 0xd5a8, 0xe872, 0x0, 0x0);
        gbc.writeMem(0x998, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x92c8);
        EXPECT(gbc.pc(), 0x997);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 012B
        gbc.setState(0xd4dc, 0xd807, 0x4d60, 0xeeca, 0x6ff9, 0x2267, 0x1, 0x1);
        gbc.writeMem(0xd4dc, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xd807);
        EXPECT(gbc.pc(), 0xd558);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4dc), 0x18);
        EXPECT(gbc.readMem(0xd4dd), 0x7a);
        // 18 012C
        gbc.setState(0x348, 0xf045, 0x5cb0, 0x72d, 0x1b86, 0xf041, 0x0, 0x0);
        gbc.writeMem(0x348, { 0x18, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xf045);
        EXPECT(gbc.pc(), 0x387);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 012D
        gbc.setState(0x6c02, 0xb611, 0x4a30, 0x3f83, 0x7b6d, 0x391c, 0x0, 0x0);
        gbc.writeMem(0x6c02, { 0x18, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb611);
        EXPECT(gbc.pc(), 0x6b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 012E
        gbc.setState(0x2b34, 0x341f, 0xa50, 0xa091, 0x5197, 0x2cd, 0x0, 0x0);
        gbc.writeMem(0x2b34, { 0x18, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x341f);
        EXPECT(gbc.pc(), 0x2b60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 012F
        gbc.setState(0xb51f, 0x572a, 0x1170, 0x1103, 0x408, 0x2d5e, 0x1, 0x1);
        gbc.writeMem(0xb51f, { 0x18, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x572a);
        EXPECT(gbc.pc(), 0xb4f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51f), 0x18);
        EXPECT(gbc.readMem(0xb520), 0xd0);
        // 18 0130
        gbc.setState(0x471, 0x1b2, 0x3860, 0x7eb5, 0xf8ba, 0x9d7e, 0x0, 0x1);
        gbc.writeMem(0x471, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x1b2);
        EXPECT(gbc.pc(), 0x4ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0131
        gbc.setState(0x6fb1, 0x1108, 0xbf90, 0x96a0, 0x4a64, 0x2174, 0x0, 0x0);
        gbc.writeMem(0x6fb1, { 0x18, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1108);
        EXPECT(gbc.pc(), 0x7003);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0132
        gbc.setState(0xcc, 0x3088, 0x5d90, 0x1cb2, 0xd3ff, 0x88d6, 0x0, 0x0);
        gbc.writeMem(0xcc, { 0x18, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3088);
        EXPECT(gbc.pc(), 0xf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0133
        gbc.setState(0xe1e7, 0x3c1c, 0x6d80, 0x247b, 0x3c9e, 0x8d57, 0x1, 0x0);
        gbc.writeMem(0xe1e7, { 0x18, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3c1c);
        EXPECT(gbc.pc(), 0xe18d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e7), 0x18);
        EXPECT(gbc.readMem(0xe1e8), 0xa4);
        // 18 0134
        gbc.setState(0xb306, 0xbfcc, 0x2f50, 0xab2f, 0xf00f, 0x47e, 0x1, 0x1);
        gbc.writeMem(0xb306, { 0x18, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xbfcc);
        EXPECT(gbc.pc(), 0xb2f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb306), 0x18);
        EXPECT(gbc.readMem(0xb307), 0xe8);
        // 18 0135
        gbc.setState(0x7f9c, 0xf005, 0x24d0, 0x6335, 0xa4b1, 0x7d2a, 0x1, 0x0);
        gbc.writeMem(0x7f9c, { 0x18, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xf005);
        EXPECT(gbc.pc(), 0x7f8e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0136
        gbc.setState(0xa87e, 0x6a02, 0xb300, 0xa3cd, 0x4670, 0x1803, 0x1, 0x0);
        gbc.writeMem(0xa87e, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x6a02);
        EXPECT(gbc.pc(), 0xa87a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa87e), 0x18);
        EXPECT(gbc.readMem(0xa87f), 0xfa);
        // 18 0137
        gbc.setState(0x98c3, 0x60db, 0x9fb0, 0x467d, 0xb81e, 0xd4fe, 0x0, 0x1);
        gbc.writeMem(0x98c3, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x60db);
        EXPECT(gbc.pc(), 0x9853);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c3), 0x18);
        EXPECT(gbc.readMem(0x98c4), 0x8e);
        // 18 0139
        gbc.setState(0x261d, 0x7821, 0xcd40, 0xc61c, 0x4666, 0xf301, 0x1, 0x1);
        gbc.writeMem(0x261d, { 0x18, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x7821);
        EXPECT(gbc.pc(), 0x2698);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 013A
        gbc.setState(0x42c7, 0x79d6, 0xd140, 0x17e1, 0xd7bf, 0xe527, 0x0, 0x1);
        gbc.writeMem(0x42c7, { 0x18, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x79d6);
        EXPECT(gbc.pc(), 0x42d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 013B
        gbc.setState(0x623, 0xc237, 0x9620, 0x7093, 0x4670, 0xfcf7, 0x0, 0x1);
        gbc.writeMem(0x623, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xc237);
        EXPECT(gbc.pc(), 0x5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 013C
        gbc.setState(0xa20a, 0x9c2, 0xd510, 0xedd0, 0xbb9f, 0x4971, 0x0, 0x1);
        gbc.writeMem(0xa20a, { 0x18, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x9c2);
        EXPECT(gbc.pc(), 0xa273);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa20a), 0x18);
        EXPECT(gbc.readMem(0xa20b), 0x67);
        // 18 013D
        gbc.setState(0xd371, 0x4e91, 0xfc90, 0x4195, 0xba3e, 0x3f05, 0x0, 0x0);
        gbc.writeMem(0xd371, { 0x18, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x4e91);
        EXPECT(gbc.pc(), 0xd369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd371), 0x18);
        EXPECT(gbc.readMem(0xd372), 0xf6);
        // 18 013E
        gbc.setState(0x527b, 0x86fa, 0x7240, 0x6ae2, 0xe9b4, 0xb6de, 0x0, 0x0);
        gbc.writeMem(0x527b, { 0x18, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x86fa);
        EXPECT(gbc.pc(), 0x52c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 013F
        gbc.setState(0x91b4, 0xa4c9, 0xac20, 0xf80, 0xcc09, 0xf79b, 0x1, 0x0);
        gbc.writeMem(0x91b4, { 0x18, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa4c9);
        EXPECT(gbc.pc(), 0x91ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91b4), 0x18);
        EXPECT(gbc.readMem(0x91b5), 0x38);
        // 18 0140
        gbc.setState(0xe751, 0x95e3, 0xba50, 0x9212, 0xb817, 0xafe2, 0x0, 0x0);
        gbc.writeMem(0xe751, { 0x18, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x95e3);
        EXPECT(gbc.pc(), 0xe761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe751), 0x18);
        EXPECT(gbc.readMem(0xe752), 0xe);
        // 18 0141
        gbc.setState(0x1b6b, 0xfa3a, 0xe570, 0x8516, 0x63fe, 0x27c, 0x1, 0x0);
        gbc.writeMem(0x1b6b, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xfa3a);
        EXPECT(gbc.pc(), 0x1bd5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0142
        gbc.setState(0x4475, 0xc80d, 0xa180, 0x62cd, 0xd8d3, 0x48d5, 0x1, 0x1);
        gbc.writeMem(0x4475, { 0x18, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc80d);
        EXPECT(gbc.pc(), 0x44a6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0143
        gbc.setState(0xa36e, 0xff12, 0x3d70, 0x4f25, 0xa756, 0x15e7, 0x0, 0x1);
        gbc.writeMem(0xa36e, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xff12);
        EXPECT(gbc.pc(), 0xa355);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa36e), 0x18);
        EXPECT(gbc.readMem(0xa36f), 0xe5);
        // 18 0144
        gbc.setState(0x3c4b, 0x3cad, 0x7520, 0x5da5, 0x54e0, 0xe3aa, 0x0, 0x1);
        gbc.writeMem(0x3c4b, { 0x18, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3cad);
        EXPECT(gbc.pc(), 0x3c38);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0145
        gbc.setState(0x5a50, 0xa47a, 0xb170, 0xbac2, 0xe361, 0x954, 0x1, 0x1);
        gbc.writeMem(0x5a50, { 0x18, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xa47a);
        EXPECT(gbc.pc(), 0x5a87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0146
        gbc.setState(0x242d, 0x747c, 0xf1e0, 0x651d, 0xd9b0, 0x3486, 0x1, 0x0);
        gbc.writeMem(0x242d, { 0x18, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x747c);
        EXPECT(gbc.pc(), 0x2422);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0147
        gbc.setState(0x216a, 0x5e12, 0x56f0, 0x9446, 0x6129, 0xfeba, 0x1, 0x0);
        gbc.writeMem(0x216a, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x5e12);
        EXPECT(gbc.pc(), 0x2192);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0148
        gbc.setState(0x1811, 0x9fc0, 0x400, 0x886e, 0x9852, 0x5b1a, 0x1, 0x0);
        gbc.writeMem(0x1811, { 0x18, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x9fc0);
        EXPECT(gbc.pc(), 0x1857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0149
        gbc.setState(0xa915, 0x2175, 0x3cd0, 0x60b4, 0x73fb, 0x7020, 0x1, 0x1);
        gbc.writeMem(0xa915, { 0x18, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x2175);
        EXPECT(gbc.pc(), 0xa899);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa915), 0x18);
        EXPECT(gbc.readMem(0xa916), 0x82);
        // 18 014A
        gbc.setState(0x6a17, 0xc5b9, 0xed00, 0x37c7, 0x84e, 0xf6a9, 0x1, 0x1);
        gbc.writeMem(0x6a17, { 0x18, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc5b9);
        EXPECT(gbc.pc(), 0x6a25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 014B
        gbc.setState(0x9cec, 0x4681, 0x7200, 0xfe6d, 0x72ee, 0xc001, 0x1, 0x1);
        gbc.writeMem(0x9cec, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4681);
        EXPECT(gbc.pc(), 0x9d29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cec), 0x18);
        EXPECT(gbc.readMem(0x9ced), 0x3b);
        // 18 014C
        gbc.setState(0x24c4, 0x56e3, 0x13b0, 0x90e2, 0x1bb9, 0x2508, 0x1, 0x1);
        gbc.writeMem(0x24c4, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x56e3);
        EXPECT(gbc.pc(), 0x24ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 014D
        gbc.setState(0xb7ed, 0xbebb, 0xdad0, 0x6926, 0xe1bf, 0x489e, 0x1, 0x0);
        gbc.writeMem(0xb7ed, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xbebb);
        EXPECT(gbc.pc(), 0xb869);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7ed), 0x18);
        EXPECT(gbc.readMem(0xb7ee), 0x7a);
        // 18 014E
        gbc.setState(0x9843, 0x4c88, 0x66b0, 0xefd3, 0xe888, 0x342d, 0x1, 0x1);
        gbc.writeMem(0x9843, { 0x18, 0xf2 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x4c88);
        EXPECT(gbc.pc(), 0x9837);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9843), 0x18);
        EXPECT(gbc.readMem(0x9844), 0xf2);
        // 18 014F
        gbc.setState(0x521e, 0x8acd, 0x7720, 0xed00, 0xb4cb, 0x5c8b, 0x0, 0x0);
        gbc.writeMem(0x521e, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x8acd);
        EXPECT(gbc.pc(), 0x51a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0150
        gbc.setState(0x40d0, 0xe2ec, 0x6d0, 0xe6e8, 0xe81b, 0x8651, 0x1, 0x0);
        gbc.writeMem(0x40d0, { 0x18, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0xe2ec);
        EXPECT(gbc.pc(), 0x407e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0151
        gbc.setState(0xc2c1, 0x2551, 0x8d20, 0x4cf4, 0x1736, 0x6440, 0x1, 0x0);
        gbc.writeMem(0xc2c1, { 0x18, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2551);
        EXPECT(gbc.pc(), 0xc300);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c1), 0x18);
        EXPECT(gbc.readMem(0xc2c2), 0x3d);
        // 18 0152
        gbc.setState(0x7409, 0xd3e5, 0x41c0, 0x2734, 0x4886, 0x7ed9, 0x0, 0x0);
        gbc.writeMem(0x7409, { 0x18, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xd3e5);
        EXPECT(gbc.pc(), 0x7396);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0153
        gbc.setState(0x5663, 0x58c4, 0xf2a0, 0x999c, 0xb250, 0xda89, 0x1, 0x0);
        gbc.writeMem(0x5663, { 0x18, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x58c4);
        EXPECT(gbc.pc(), 0x56e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0155
        gbc.setState(0x86f7, 0x416a, 0x4070, 0xbcde, 0x1889, 0xf257, 0x1, 0x1);
        gbc.writeMem(0x86f7, { 0x18, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x416a);
        EXPECT(gbc.pc(), 0x869b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86f7), 0x18);
        EXPECT(gbc.readMem(0x86f8), 0xa2);
        // 18 0156
        gbc.setState(0x12d0, 0x57de, 0xd5c0, 0x8e88, 0x1b7b, 0x786c, 0x0, 0x1);
        gbc.writeMem(0x12d0, { 0x18, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x57de);
        EXPECT(gbc.pc(), 0x12a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0157
        gbc.setState(0x3081, 0x73e3, 0x3bf0, 0xaad0, 0xb337, 0x5232, 0x1, 0x1);
        gbc.writeMem(0x3081, { 0x18, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x73e3);
        EXPECT(gbc.pc(), 0x30e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0159
        gbc.setState(0xb490, 0xfcb7, 0x6470, 0xfa38, 0x2cc0, 0xbac9, 0x0, 0x0);
        gbc.writeMem(0xb490, { 0x18, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xfcb7);
        EXPECT(gbc.pc(), 0xb47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb490), 0x18);
        EXPECT(gbc.readMem(0xb491), 0xec);
        // 18 015A
        gbc.setState(0x326, 0x67e, 0x11c0, 0x9ee5, 0xd66c, 0x99c4, 0x1, 0x0);
        gbc.writeMem(0x326, { 0x18, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x67e);
        EXPECT(gbc.pc(), 0x361);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 015B
        gbc.setState(0x53c8, 0x448d, 0x20c0, 0xbab4, 0x961f, 0xeef9, 0x1, 0x0);
        gbc.writeMem(0x53c8, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x448d);
        EXPECT(gbc.pc(), 0x5378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 015C
        gbc.setState(0xeb69, 0x2a9e, 0x4040, 0xb3e7, 0x7ff0, 0x2a72, 0x0, 0x1);
        gbc.writeMem(0xeb69, { 0x18, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x2a9e);
        EXPECT(gbc.pc(), 0xebb3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb69), 0x18);
        EXPECT(gbc.readMem(0xeb6a), 0x48);
        // 18 015D
        gbc.setState(0x62da, 0xecde, 0x7f20, 0x7140, 0xf720, 0xf08a, 0x0, 0x1);
        gbc.writeMem(0x62da, { 0x18, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xecde);
        EXPECT(gbc.pc(), 0x628c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 015E
        gbc.setState(0xba34, 0x2f84, 0xbf80, 0xb1f3, 0xc06, 0xe0c2, 0x0, 0x1);
        gbc.writeMem(0xba34, { 0x18, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x2f84);
        EXPECT(gbc.pc(), 0xba03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba34), 0x18);
        EXPECT(gbc.readMem(0xba35), 0xcd);
        // 18 015F
        gbc.setState(0x285a, 0xfbd9, 0x4dd0, 0x1486, 0x7237, 0xc86f, 0x1, 0x0);
        gbc.writeMem(0x285a, { 0x18, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfbd9);
        EXPECT(gbc.pc(), 0x282a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0160
        gbc.setState(0x23e2, 0x852e, 0x3570, 0x5a27, 0xa698, 0x1126, 0x1, 0x1);
        gbc.writeMem(0x23e2, { 0x18, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x852e);
        EXPECT(gbc.pc(), 0x238b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0161
        gbc.setState(0x256f, 0xb96c, 0x1160, 0x525b, 0xad3c, 0xd827, 0x0, 0x0);
        gbc.writeMem(0x256f, { 0x18, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xb96c);
        EXPECT(gbc.pc(), 0x24f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0162
        gbc.setState(0x6967, 0xa6c5, 0x2d50, 0x90c2, 0x1209, 0x7a09, 0x1, 0x0);
        gbc.writeMem(0x6967, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa6c5);
        EXPECT(gbc.pc(), 0x691c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0163
        gbc.setState(0x8a49, 0x356f, 0xd420, 0x1ae7, 0x461d, 0xadae, 0x1, 0x1);
        gbc.writeMem(0x8a49, { 0x18, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x356f);
        EXPECT(gbc.pc(), 0x8ab6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a49), 0x18);
        EXPECT(gbc.readMem(0x8a4a), 0x6b);
        // 18 0164
        gbc.setState(0x6bb6, 0x2ad8, 0x1d40, 0x455, 0x8200, 0xa78f, 0x0, 0x1);
        gbc.writeMem(0x6bb6, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2ad8);
        EXPECT(gbc.pc(), 0x6b94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0166
        gbc.setState(0x8943, 0xb748, 0x560, 0x64f5, 0xbcfb, 0xc6a0, 0x1, 0x0);
        gbc.writeMem(0x8943, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb748);
        EXPECT(gbc.pc(), 0x8958);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8943), 0x18);
        EXPECT(gbc.readMem(0x8944), 0x13);
        // 18 0167
        gbc.setState(0x4ed4, 0xeb9, 0xb3d0, 0xeba, 0x1d95, 0x226d, 0x0, 0x0);
        gbc.writeMem(0x4ed4, { 0x18, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xeb9);
        EXPECT(gbc.pc(), 0x4e5d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0168
        gbc.setState(0xe915, 0x6c45, 0xf000, 0xa68a, 0xaca0, 0x3032, 0x1, 0x0);
        gbc.writeMem(0xe915, { 0x18, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x6c45);
        EXPECT(gbc.pc(), 0xe966);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe915), 0x18);
        EXPECT(gbc.readMem(0xe916), 0x4f);
        // 18 0169
        gbc.setState(0xa386, 0x1c07, 0x2ea0, 0x24ec, 0xc72, 0xcdb1, 0x0, 0x1);
        gbc.writeMem(0xa386, { 0x18, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1c07);
        EXPECT(gbc.pc(), 0xa30a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa386), 0x18);
        EXPECT(gbc.readMem(0xa387), 0x82);
        // 18 016A
        gbc.setState(0x1503, 0xb2ae, 0xd970, 0xfd24, 0xd4f0, 0x470b, 0x1, 0x0);
        gbc.writeMem(0x1503, { 0x18, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb2ae);
        EXPECT(gbc.pc(), 0x14bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 016B
        gbc.setState(0xbaef, 0xbcc3, 0x7a40, 0xce4, 0x766e, 0xfe7c, 0x1, 0x0);
        gbc.writeMem(0xbaef, { 0x18, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0xbcc3);
        EXPECT(gbc.pc(), 0xbabe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaef), 0x18);
        EXPECT(gbc.readMem(0xbaf0), 0xcd);
        // 18 016D
        gbc.setState(0x29e, 0x27d4, 0x2cd0, 0xb4b, 0x5c2d, 0xffe9, 0x1, 0x0);
        gbc.writeMem(0x29e, { 0x18, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x27d4);
        EXPECT(gbc.pc(), 0x299);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 016E
        gbc.setState(0x27d7, 0x936f, 0x2890, 0x80a6, 0x25f2, 0xcb2c, 0x1, 0x1);
        gbc.writeMem(0x27d7, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x936f);
        EXPECT(gbc.pc(), 0x278c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 016F
        gbc.setState(0xb120, 0x8334, 0x4cc0, 0xbbbc, 0x44ac, 0x4eb5, 0x1, 0x0);
        gbc.writeMem(0xb120, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x8334);
        EXPECT(gbc.pc(), 0xb19a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb120), 0x18);
        EXPECT(gbc.readMem(0xb121), 0x78);
        // 18 0170
        gbc.setState(0x4488, 0x3462, 0x4770, 0x98d8, 0x3478, 0xcddf, 0x0, 0x1);
        gbc.writeMem(0x4488, { 0x18, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x3462);
        EXPECT(gbc.pc(), 0x44be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0171
        gbc.setState(0x3a59, 0x4a88, 0x4b90, 0x3eeb, 0x16f0, 0x561a, 0x1, 0x0);
        gbc.writeMem(0x3a59, { 0x18, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x4a88);
        EXPECT(gbc.pc(), 0x3aa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0173
        gbc.setState(0xdc66, 0x7d67, 0x6450, 0x8f16, 0x3998, 0x1b64, 0x0, 0x1);
        gbc.writeMem(0xdc66, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7d67);
        EXPECT(gbc.pc(), 0xdcb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc66), 0x18);
        EXPECT(gbc.readMem(0xdc67), 0x4c);
        // 18 0174
        gbc.setState(0x157e, 0x9440, 0x4130, 0xcd91, 0xe6f3, 0x3903, 0x1, 0x0);
        gbc.writeMem(0x157e, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9440);
        EXPECT(gbc.pc(), 0x1554);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0175
        gbc.setState(0x8e4, 0x59d5, 0x4d20, 0x2b28, 0xeff5, 0xe8a3, 0x0, 0x0);
        gbc.writeMem(0x8e4, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x59d5);
        EXPECT(gbc.pc(), 0x8e3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0176
        gbc.setState(0x6e78, 0xf42f, 0x64e0, 0xd328, 0xba, 0xe29b, 0x1, 0x1);
        gbc.writeMem(0x6e78, { 0x18, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xf42f);
        EXPECT(gbc.pc(), 0x6e81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0177
        gbc.setState(0x4f07, 0xf83c, 0xbd30, 0x6d86, 0x81b7, 0xce2c, 0x1, 0x0);
        gbc.writeMem(0x4f07, { 0x18, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xf83c);
        EXPECT(gbc.pc(), 0x4e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0178
        gbc.setState(0xe3e6, 0x684e, 0xefa0, 0x4cb3, 0x7a56, 0x1262, 0x1, 0x0);
        gbc.writeMem(0xe3e6, { 0x18, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x684e);
        EXPECT(gbc.pc(), 0xe3d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3e6), 0x18);
        EXPECT(gbc.readMem(0xe3e7), 0xf0);
        // 18 0179
        gbc.setState(0xc493, 0x1793, 0x9350, 0x2d77, 0xca7f, 0xff8, 0x1, 0x1);
        gbc.writeMem(0xc493, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x1793);
        EXPECT(gbc.pc(), 0xc423);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc493), 0x18);
        EXPECT(gbc.readMem(0xc494), 0x8e);
        // 18 017A
        gbc.setState(0xd6e3, 0x4350, 0x17e0, 0x64a3, 0x830d, 0xfd70, 0x1, 0x0);
        gbc.writeMem(0xd6e3, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x4350);
        EXPECT(gbc.pc(), 0xd731);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6e3), 0x18);
        EXPECT(gbc.readMem(0xd6e4), 0x4c);
        // 18 017C
        gbc.setState(0xab7b, 0x921e, 0x7c80, 0x36a2, 0x1ae4, 0xaab7, 0x1, 0x0);
        gbc.writeMem(0xab7b, { 0x18, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x921e);
        EXPECT(gbc.pc(), 0xab5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xab7b), 0x18);
        EXPECT(gbc.readMem(0xab7c), 0xde);
        // 18 017D
        gbc.setState(0xbc34, 0x39e9, 0x3ce0, 0x4a1c, 0x66b4, 0xbe03, 0x0, 0x1);
        gbc.writeMem(0xbc34, { 0x18, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x39e9);
        EXPECT(gbc.pc(), 0xbbeb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc34), 0x18);
        EXPECT(gbc.readMem(0xbc35), 0xb5);
        // 18 017E
        gbc.setState(0x8ca2, 0x29b1, 0xf170, 0x94e5, 0xb7e0, 0xa11d, 0x0, 0x1);
        gbc.writeMem(0x8ca2, { 0x18, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x29b1);
        EXPECT(gbc.pc(), 0x8cb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ca2), 0x18);
        EXPECT(gbc.readMem(0x8ca3), 0x10);
        // 18 017F
        gbc.setState(0xbf64, 0x9022, 0xed90, 0x473f, 0xcbe3, 0x8703, 0x0, 0x1);
        gbc.writeMem(0xbf64, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x9022);
        EXPECT(gbc.pc(), 0xbfa5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf64), 0x18);
        EXPECT(gbc.readMem(0xbf65), 0x3f);
        // 18 0180
        gbc.setState(0x40c2, 0xa659, 0x8ec0, 0xf67b, 0x34ba, 0xae1, 0x0, 0x0);
        gbc.writeMem(0x40c2, { 0x18, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xa659);
        EXPECT(gbc.pc(), 0x410a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0181
        gbc.setState(0x81b9, 0xb7ff, 0x3a20, 0xb45e, 0xab2, 0x36b0, 0x0, 0x1);
        gbc.writeMem(0x81b9, { 0x18, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xb7ff);
        EXPECT(gbc.pc(), 0x8225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x81b9), 0x18);
        EXPECT(gbc.readMem(0x81ba), 0x6a);
        // 18 0182
        gbc.setState(0x70e8, 0x887d, 0x45f0, 0xa7ef, 0x58ad, 0x6bc, 0x1, 0x0);
        gbc.writeMem(0x70e8, { 0x18, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x887d);
        EXPECT(gbc.pc(), 0x7116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0183
        gbc.setState(0xc592, 0x763d, 0x36b0, 0x1dd7, 0x81e4, 0x6f0, 0x1, 0x0);
        gbc.writeMem(0xc592, { 0x18, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x763d);
        EXPECT(gbc.pc(), 0xc5da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc592), 0x18);
        EXPECT(gbc.readMem(0xc593), 0x46);
        // 18 0184
        gbc.setState(0x77a4, 0xec8c, 0x4ef0, 0xfb91, 0x215e, 0x90a4, 0x1, 0x0);
        gbc.writeMem(0x77a4, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xec8c);
        EXPECT(gbc.pc(), 0x7754);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0185
        gbc.setState(0x33d1, 0x5761, 0xde80, 0xb756, 0xf36c, 0xbe0a, 0x1, 0x1);
        gbc.writeMem(0x33d1, { 0x18, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x5761);
        EXPECT(gbc.pc(), 0x3416);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0186
        gbc.setState(0x6efc, 0x5297, 0xbe20, 0xc979, 0xcc4f, 0x1516, 0x1, 0x0);
        gbc.writeMem(0x6efc, { 0x18, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5297);
        EXPECT(gbc.pc(), 0x6e9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0188
        gbc.setState(0x5c4d, 0xeb75, 0x9c90, 0xfd15, 0x5369, 0xbc72, 0x1, 0x1);
        gbc.writeMem(0x5c4d, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xeb75);
        EXPECT(gbc.pc(), 0x5c20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0189
        gbc.setState(0xdc2e, 0x26c8, 0x2e70, 0xf2a3, 0x153a, 0x7c14, 0x1, 0x0);
        gbc.writeMem(0xdc2e, { 0x18, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x26c8);
        EXPECT(gbc.pc(), 0xdc9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc2e), 0x18);
        EXPECT(gbc.readMem(0xdc2f), 0x6b);
        // 18 018A
        gbc.setState(0x8809, 0x5b85, 0x9420, 0xf565, 0x3a74, 0xd18, 0x0, 0x1);
        gbc.writeMem(0x8809, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x5b85);
        EXPECT(gbc.pc(), 0x87dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8809), 0x18);
        EXPECT(gbc.readMem(0x880a), 0xd1);
        // 18 018B
        gbc.setState(0xde7, 0xeadb, 0x8880, 0xcc09, 0x1397, 0x4b03, 0x0, 0x1);
        gbc.writeMem(0xde7, { 0x18, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xeadb);
        EXPECT(gbc.pc(), 0xd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 018C
        gbc.setState(0x2c7c, 0x13a1, 0xcd10, 0x5196, 0x13d9, 0x60bb, 0x1, 0x0);
        gbc.writeMem(0x2c7c, { 0x18, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x13a1);
        EXPECT(gbc.pc(), 0x2c0b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 018E
        gbc.setState(0x1a20, 0x40c9, 0x1910, 0x9785, 0x1e69, 0xf27f, 0x0, 0x1);
        gbc.writeMem(0x1a20, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x40c9);
        EXPECT(gbc.pc(), 0x1a1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 018F
        gbc.setState(0x1af4, 0x9ddb, 0x4a30, 0xf6fc, 0xeec5, 0x6773, 0x1, 0x1);
        gbc.writeMem(0x1af4, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9ddb);
        EXPECT(gbc.pc(), 0x1abd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0191
        gbc.setState(0xe0d8, 0xfc6, 0xe8f0, 0x870b, 0xb066, 0xb4a6, 0x1, 0x1);
        gbc.writeMem(0xe0d8, { 0x18, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xfc6);
        EXPECT(gbc.pc(), 0xe071);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe0d8), 0x18);
        EXPECT(gbc.readMem(0xe0d9), 0x97);
        // 18 0192
        gbc.setState(0x6487, 0xc8d7, 0x7470, 0xf3c8, 0xa039, 0xad72, 0x1, 0x1);
        gbc.writeMem(0x6487, { 0x18, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc8d7);
        EXPECT(gbc.pc(), 0x64c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0193
        gbc.setState(0x16b0, 0xc633, 0xa3e0, 0x68b6, 0x71dc, 0x3a91, 0x0, 0x0);
        gbc.writeMem(0x16b0, { 0x18, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xc633);
        EXPECT(gbc.pc(), 0x1716);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0194
        gbc.setState(0x4c8d, 0xae69, 0xd80, 0xa9f3, 0xcd23, 0x620f, 0x0, 0x0);
        gbc.writeMem(0x4c8d, { 0x18, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xae69);
        EXPECT(gbc.pc(), 0x4c20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0195
        gbc.setState(0xb0f, 0xe95a, 0xc650, 0x444a, 0x2e91, 0xf195, 0x1, 0x1);
        gbc.writeMem(0xb0f, { 0x18, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe95a);
        EXPECT(gbc.pc(), 0xb6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0196
        gbc.setState(0x457a, 0xd9cc, 0x6c90, 0xb95e, 0x1d4a, 0xe814, 0x0, 0x0);
        gbc.writeMem(0x457a, { 0x18, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xd9cc);
        EXPECT(gbc.pc(), 0x4582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0197
        gbc.setState(0x3fe3, 0x1f8f, 0xdb40, 0xbc72, 0x398e, 0x5b86, 0x1, 0x0);
        gbc.writeMem(0x3fe3, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x1f8f);
        EXPECT(gbc.pc(), 0x3fe2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0198
        gbc.setState(0x32dc, 0xe33e, 0x40f0, 0x7e84, 0x41de, 0xc4fe, 0x1, 0x0);
        gbc.writeMem(0x32dc, { 0x18, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe33e);
        EXPECT(gbc.pc(), 0x3293);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0199
        gbc.setState(0xd3f8, 0x1f8f, 0x8960, 0xfc17, 0x3549, 0xc7fb, 0x1, 0x1);
        gbc.writeMem(0xd3f8, { 0x18, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1f8f);
        EXPECT(gbc.pc(), 0xd441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f8), 0x18);
        EXPECT(gbc.readMem(0xd3f9), 0x47);
        // 18 019A
        gbc.setState(0xd912, 0x411f, 0x5cb0, 0xf04c, 0xfea1, 0x8c6d, 0x1, 0x0);
        gbc.writeMem(0xd912, { 0x18, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x411f);
        EXPECT(gbc.pc(), 0xd8c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd912), 0x18);
        EXPECT(gbc.readMem(0xd913), 0xb0);
        // 18 019B
        gbc.setState(0x4068, 0x83c3, 0x1240, 0xd960, 0x976, 0xdfc, 0x1, 0x0);
        gbc.writeMem(0x4068, { 0x18, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x83c3);
        EXPECT(gbc.pc(), 0x4025);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 019D
        gbc.setState(0x79c3, 0xd11c, 0x7df0, 0xfa11, 0x6177, 0xc84f, 0x1, 0x0);
        gbc.writeMem(0x79c3, { 0x18, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xd11c);
        EXPECT(gbc.pc(), 0x7981);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 019E
        gbc.setState(0x16e4, 0xba0d, 0xcc90, 0xe94a, 0xda68, 0xdc6c, 0x0, 0x0);
        gbc.writeMem(0x16e4, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xba0d);
        EXPECT(gbc.pc(), 0x16e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 019F
        gbc.setState(0xd474, 0xbcd5, 0xda00, 0x1fca, 0xb52d, 0x191b, 0x0, 0x1);
        gbc.writeMem(0xd474, { 0x18, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xbcd5);
        EXPECT(gbc.pc(), 0xd4be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd474), 0x18);
        EXPECT(gbc.readMem(0xd475), 0x48);
        // 18 01A0
        gbc.setState(0x49f6, 0x2a2a, 0x45c0, 0x95e4, 0xadec, 0x1975, 0x0, 0x0);
        gbc.writeMem(0x49f6, { 0x18, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x2a2a);
        EXPECT(gbc.pc(), 0x49b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01A1
        gbc.setState(0x7f17, 0xcd0a, 0x2230, 0x1f8b, 0x8337, 0xdf46, 0x0, 0x1);
        gbc.writeMem(0x7f17, { 0x18, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xcd0a);
        EXPECT(gbc.pc(), 0x7eda);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01A2
        gbc.setState(0x1ae7, 0x9ebf, 0x3170, 0xe059, 0x5380, 0x447a, 0x0, 0x1);
        gbc.writeMem(0x1ae7, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x9ebf);
        EXPECT(gbc.pc(), 0x1a71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01A3
        gbc.setState(0x9ca8, 0xa7f0, 0x5030, 0xa293, 0x9ec4, 0x78ec, 0x0, 0x1);
        gbc.writeMem(0x9ca8, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xa7f0);
        EXPECT(gbc.pc(), 0x9cf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ca8), 0x18);
        EXPECT(gbc.readMem(0x9ca9), 0x4c);
        // 18 01A4
        gbc.setState(0xbe0f, 0xb6c3, 0xd710, 0x8645, 0xf6de, 0x1e86, 0x1, 0x0);
        gbc.writeMem(0xbe0f, { 0x18, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xb6c3);
        EXPECT(gbc.pc(), 0xbdaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe0f), 0x18);
        EXPECT(gbc.readMem(0xbe10), 0x9e);
        // 18 01A5
        gbc.setState(0x2fb, 0x59cd, 0xd300, 0xa6c5, 0x7095, 0x6f3a, 0x1, 0x0);
        gbc.writeMem(0x2fb, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x59cd);
        EXPECT(gbc.pc(), 0x310);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01A6
        gbc.setState(0x381b, 0x9301, 0xa4c0, 0x78a0, 0xfc9e, 0xed83, 0x0, 0x0);
        gbc.writeMem(0x381b, { 0x18, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x9301);
        EXPECT(gbc.pc(), 0x3852);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01A7
        gbc.setState(0x4b5d, 0xa0bd, 0x4260, 0x9ed5, 0x11ab, 0xd907, 0x1, 0x0);
        gbc.writeMem(0x4b5d, { 0x18, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xa0bd);
        EXPECT(gbc.pc(), 0x4b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01A8
        gbc.setState(0xa30b, 0x7d70, 0x8a60, 0x1985, 0xf6ec, 0x7a8c, 0x1, 0x0);
        gbc.writeMem(0xa30b, { 0x18, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7d70);
        EXPECT(gbc.pc(), 0xa32b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa30b), 0x18);
        EXPECT(gbc.readMem(0xa30c), 0x1e);
        // 18 01A9
        gbc.setState(0xe578, 0xf482, 0x4440, 0x4da3, 0xf52d, 0xdd15, 0x0, 0x1);
        gbc.writeMem(0xe578, { 0x18, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf482);
        EXPECT(gbc.pc(), 0xe5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe578), 0x18);
        EXPECT(gbc.readMem(0xe579), 0x4a);
        // 18 01AA
        gbc.setState(0x6edf, 0xa983, 0xdf0, 0xb99f, 0xc641, 0xf5e9, 0x1, 0x1);
        gbc.writeMem(0x6edf, { 0x18, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xa983);
        EXPECT(gbc.pc(), 0x6ef1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01AB
        gbc.setState(0x626d, 0xa42c, 0x5c10, 0x542a, 0xbf, 0xe595, 0x1, 0x1);
        gbc.writeMem(0x626d, { 0x18, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xa42c);
        EXPECT(gbc.pc(), 0x62ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01AC
        gbc.setState(0xa57, 0x8a8a, 0xd2b0, 0xda02, 0x6fb9, 0xdd5e, 0x1, 0x1);
        gbc.writeMem(0xa57, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x8a8a);
        EXPECT(gbc.pc(), 0xa1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01AD
        gbc.setState(0x78a8, 0xb2c3, 0xe2a0, 0x7f4c, 0x428d, 0xecee, 0x0, 0x1);
        gbc.writeMem(0x78a8, { 0x18, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xb2c3);
        EXPECT(gbc.pc(), 0x7892);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01AE
        gbc.setState(0xabc3, 0x9f74, 0x49f0, 0x6af3, 0x7b06, 0x4034, 0x1, 0x1);
        gbc.writeMem(0xabc3, { 0x18, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9f74);
        EXPECT(gbc.pc(), 0xaba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xabc3), 0x18);
        EXPECT(gbc.readMem(0xabc4), 0xe0);
        // 18 01AF
        gbc.setState(0xba1e, 0xa202, 0xe750, 0xfae2, 0xbc67, 0x38af, 0x1, 0x0);
        gbc.writeMem(0xba1e, { 0x18, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xa202);
        EXPECT(gbc.pc(), 0xba6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba1e), 0x18);
        EXPECT(gbc.readMem(0xba1f), 0x4d);
        // 18 01B0
        gbc.setState(0x5358, 0xd2b5, 0x87a0, 0xbb0b, 0x55ce, 0xdaaa, 0x0, 0x1);
        gbc.writeMem(0x5358, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0x5369);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01B1
        gbc.setState(0xca3e, 0xbbff, 0x44f0, 0xe4e1, 0xf775, 0x818f, 0x0, 0x0);
        gbc.writeMem(0xca3e, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xbbff);
        EXPECT(gbc.pc(), 0xca3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca3e), 0x18);
        EXPECT(gbc.readMem(0xca3f), 0xfc);
        // 18 01B2
        gbc.setState(0x97bf, 0x9ce8, 0xabd0, 0x8113, 0x117a, 0x2b0a, 0x1, 0x0);
        gbc.writeMem(0x97bf, { 0x18, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9ce8);
        EXPECT(gbc.pc(), 0x97b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97bf), 0x18);
        EXPECT(gbc.readMem(0x97c0), 0xf3);
        // 18 01B3
        gbc.setState(0xefd6, 0xaad2, 0xbd0, 0xad09, 0xe3c5, 0x7d64, 0x0, 0x0);
        gbc.writeMem(0xefd6, { 0x18, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xaad2);
        EXPECT(gbc.pc(), 0xeff6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefd6), 0x18);
        EXPECT(gbc.readMem(0xefd7), 0x1e);
        // 18 01B4
        gbc.setState(0x61d3, 0x25e1, 0x5fb0, 0xf4c9, 0x6841, 0x4475, 0x1, 0x1);
        gbc.writeMem(0x61d3, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x25e1);
        EXPECT(gbc.pc(), 0x6214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01B5
        gbc.setState(0x9799, 0x550f, 0xdd50, 0x6877, 0xe80e, 0x4960, 0x0, 0x1);
        gbc.writeMem(0x9799, { 0x18, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x550f);
        EXPECT(gbc.pc(), 0x9736);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9799), 0x18);
        EXPECT(gbc.readMem(0x979a), 0x9b);
        // 18 01B6
        gbc.setState(0x4e19, 0xb60b, 0x4fc0, 0x7b4a, 0x9e5c, 0xcc81, 0x0, 0x1);
        gbc.writeMem(0x4e19, { 0x18, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xb60b);
        EXPECT(gbc.pc(), 0x4e03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01B7
        gbc.setState(0x3cac, 0xd7de, 0xa2d0, 0xed2f, 0x26f7, 0xf529, 0x1, 0x0);
        gbc.writeMem(0x3cac, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd7de);
        EXPECT(gbc.pc(), 0x3ccd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01B8
        gbc.setState(0xeca2, 0xd0a9, 0xf930, 0xd063, 0x37a8, 0xa0d8, 0x0, 0x1);
        gbc.writeMem(0xeca2, { 0x18, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xd0a9);
        EXPECT(gbc.pc(), 0xec3c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeca2), 0x18);
        EXPECT(gbc.readMem(0xeca3), 0x98);
        // 18 01B9
        gbc.setState(0x7aa0, 0x3bd8, 0x1a00, 0xa9fc, 0xdc70, 0xe70b, 0x1, 0x1);
        gbc.writeMem(0x7aa0, { 0x18, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x3bd8);
        EXPECT(gbc.pc(), 0x7a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01BA
        gbc.setState(0x66a0, 0x3e25, 0x6680, 0xe4f1, 0x950d, 0xabc2, 0x1, 0x0);
        gbc.writeMem(0x66a0, { 0x18, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x3e25);
        EXPECT(gbc.pc(), 0x6683);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01BB
        gbc.setState(0x1b7a, 0xb5f7, 0xc430, 0x470d, 0xecde, 0x2bbc, 0x1, 0x0);
        gbc.writeMem(0x1b7a, { 0x18, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xb5f7);
        EXPECT(gbc.pc(), 0x1bc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01BC
        gbc.setState(0xb55e, 0x485d, 0xfa50, 0xcff2, 0x53f9, 0x763a, 0x0, 0x1);
        gbc.writeMem(0xb55e, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x485d);
        EXPECT(gbc.pc(), 0xb562);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb55e), 0x18);
        EXPECT(gbc.readMem(0xb55f), 0x2);
        // 18 01BD
        gbc.setState(0xa965, 0xf251, 0x70e0, 0x6a95, 0x3c29, 0x5474, 0x0, 0x0);
        gbc.writeMem(0xa965, { 0x18, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf251);
        EXPECT(gbc.pc(), 0xa99a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa965), 0x18);
        EXPECT(gbc.readMem(0xa966), 0x33);
        // 18 01BE
        gbc.setState(0x1c6a, 0x72b4, 0x8b40, 0x8d7d, 0x4b88, 0x57d3, 0x1, 0x1);
        gbc.writeMem(0x1c6a, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x72b4);
        EXPECT(gbc.pc(), 0x1cdc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01BF
        gbc.setState(0xeda3, 0x35a7, 0x6ef0, 0x4b31, 0x49f2, 0xb275, 0x1, 0x1);
        gbc.writeMem(0xeda3, { 0x18, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x35a7);
        EXPECT(gbc.pc(), 0xee14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeda3), 0x18);
        EXPECT(gbc.readMem(0xeda4), 0x6f);
        // 18 01C0
        gbc.setState(0x432a, 0x69d4, 0x2ef0, 0xa94e, 0x8b6, 0x3c84, 0x1, 0x0);
        gbc.writeMem(0x432a, { 0x18, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x69d4);
        EXPECT(gbc.pc(), 0x42ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01C1
        gbc.setState(0xcc00, 0xc86a, 0xa9d0, 0xa569, 0x5e49, 0x3573, 0x1, 0x0);
        gbc.writeMem(0xcc00, { 0x18, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc86a);
        EXPECT(gbc.pc(), 0xcc63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc00), 0x18);
        EXPECT(gbc.readMem(0xcc01), 0x61);
        // 18 01C2
        gbc.setState(0x47a9, 0xe306, 0x9b50, 0x7b34, 0xc722, 0x8131, 0x0, 0x0);
        gbc.writeMem(0x47a9, { 0x18, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe306);
        EXPECT(gbc.pc(), 0x47f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01C3
        gbc.setState(0x4e88, 0x7584, 0x1850, 0x439e, 0xbf9d, 0x9618, 0x1, 0x1);
        gbc.writeMem(0x4e88, { 0x18, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x7584);
        EXPECT(gbc.pc(), 0x4e29);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01C4
        gbc.setState(0xac26, 0xf47f, 0x6030, 0x239c, 0x8bf4, 0x7b79, 0x0, 0x0);
        gbc.writeMem(0xac26, { 0x18, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xf47f);
        EXPECT(gbc.pc(), 0xabbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac26), 0x18);
        EXPECT(gbc.readMem(0xac27), 0x97);
        // 18 01C5
        gbc.setState(0xd648, 0xe3d6, 0x5b70, 0x6a7b, 0x32df, 0x4d3a, 0x1, 0x1);
        gbc.writeMem(0xd648, { 0x18, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xe3d6);
        EXPECT(gbc.pc(), 0xd6b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd648), 0x18);
        EXPECT(gbc.readMem(0xd649), 0x6b);
        // 18 01C6
        gbc.setState(0x1ade, 0x3521, 0x6e60, 0xbc1, 0xcc20, 0xd3ba, 0x1, 0x0);
        gbc.writeMem(0x1ade, { 0x18, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x3521);
        EXPECT(gbc.pc(), 0x1a78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01C7
        gbc.setState(0xc98a, 0xa00a, 0x23c0, 0xd1aa, 0xe225, 0x509b, 0x0, 0x1);
        gbc.writeMem(0xc98a, { 0x18, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xa00a);
        EXPECT(gbc.pc(), 0xc919);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc98a), 0x18);
        EXPECT(gbc.readMem(0xc98b), 0x8d);
        // 18 01C8
        gbc.setState(0x6e90, 0x3e8b, 0x10, 0x97a2, 0x2c9e, 0x1974, 0x1, 0x0);
        gbc.writeMem(0x6e90, { 0x18, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x3e8b);
        EXPECT(gbc.pc(), 0x6ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01C9
        gbc.setState(0x99ee, 0x9e07, 0xae00, 0x800f, 0x1f72, 0x8d24, 0x1, 0x1);
        gbc.writeMem(0x99ee, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x9e07);
        EXPECT(gbc.pc(), 0x9a1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ee), 0x18);
        EXPECT(gbc.readMem(0x99ef), 0x2e);
        // 18 01CA
        gbc.setState(0xd990, 0xff70, 0xd820, 0x5ee4, 0x9645, 0x9f80, 0x0, 0x0);
        gbc.writeMem(0xd990, { 0x18, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xff70);
        EXPECT(gbc.pc(), 0xd9b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd990), 0x18);
        EXPECT(gbc.readMem(0xd991), 0x22);
        // 18 01CB
        gbc.setState(0xef42, 0x75f9, 0x3a70, 0xc10b, 0xb288, 0x8fcf, 0x1, 0x1);
        gbc.writeMem(0xef42, { 0x18, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x75f9);
        EXPECT(gbc.pc(), 0xef14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef42), 0x18);
        EXPECT(gbc.readMem(0xef43), 0xd0);
        // 18 01CC
        gbc.setState(0x8f67, 0x4d1, 0xc060, 0xf665, 0x2bcb, 0x8e2e, 0x1, 0x0);
        gbc.writeMem(0x8f67, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x4d1);
        EXPECT(gbc.pc(), 0x8fe3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8f67), 0x18);
        EXPECT(gbc.readMem(0x8f68), 0x7a);
        // 18 01CE
        gbc.setState(0xe5c9, 0xd72d, 0x21c0, 0x47af, 0x5c14, 0x98ab, 0x0, 0x0);
        gbc.writeMem(0xe5c9, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xd72d);
        EXPECT(gbc.pc(), 0xe633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5c9), 0x18);
        EXPECT(gbc.readMem(0xe5ca), 0x68);
        // 18 01CF
        gbc.setState(0x3a6b, 0x162d, 0x3fd0, 0xa557, 0xebed, 0x3b3e, 0x1, 0x1);
        gbc.writeMem(0x3a6b, { 0x18, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x162d);
        EXPECT(gbc.pc(), 0x3a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01D0
        gbc.setState(0xc901, 0x75b6, 0xcec0, 0x8d5f, 0xc50, 0xaac6, 0x1, 0x1);
        gbc.writeMem(0xc901, { 0x18, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x75b6);
        EXPECT(gbc.pc(), 0xc91f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc901), 0x18);
        EXPECT(gbc.readMem(0xc902), 0x1c);
        // 18 01D1
        gbc.setState(0x594e, 0xd7bf, 0xb7f0, 0x981d, 0xb384, 0x153c, 0x0, 0x0);
        gbc.writeMem(0x594e, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xd7bf);
        EXPECT(gbc.pc(), 0x59b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01D2
        gbc.setState(0xccb5, 0x7690, 0x8d90, 0xb241, 0xb580, 0x87c2, 0x1, 0x0);
        gbc.writeMem(0xccb5, { 0x18, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x7690);
        EXPECT(gbc.pc(), 0xcc90);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccb5), 0x18);
        EXPECT(gbc.readMem(0xccb6), 0xd9);
        // 18 01D3
        gbc.setState(0x31ef, 0x48a7, 0x7b20, 0x6a0b, 0x3c7f, 0x422d, 0x1, 0x1);
        gbc.writeMem(0x31ef, { 0x18, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x48a7);
        EXPECT(gbc.pc(), 0x31d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01D4
        gbc.setState(0x19fd, 0x635d, 0x3c20, 0xbd94, 0x7d46, 0x3ee3, 0x0, 0x1);
        gbc.writeMem(0x19fd, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x635d);
        EXPECT(gbc.pc(), 0x1a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01D5
        gbc.setState(0x5177, 0x95b3, 0x88d0, 0x1679, 0x5d51, 0x38a7, 0x0, 0x1);
        gbc.writeMem(0x5177, { 0x18, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x95b3);
        EXPECT(gbc.pc(), 0x51c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01D7
        gbc.setState(0x7d0c, 0xf8fc, 0x50f0, 0x8325, 0xdb9b, 0xe5bc, 0x0, 0x0);
        gbc.writeMem(0x7d0c, { 0x18, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xf8fc);
        EXPECT(gbc.pc(), 0x7d4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01D8
        gbc.setState(0x5afb, 0xb6fe, 0x60d0, 0x7907, 0x2233, 0xa791, 0x1, 0x0);
        gbc.writeMem(0x5afb, { 0x18, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb6fe);
        EXPECT(gbc.pc(), 0x5ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01D9
        gbc.setState(0x6f8d, 0x7953, 0x1bb0, 0x8cd8, 0xbdff, 0x1e22, 0x1, 0x0);
        gbc.writeMem(0x6f8d, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x7953);
        EXPECT(gbc.pc(), 0x6fa2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01DA
        gbc.setState(0x8044, 0x913f, 0xc680, 0xb51c, 0xcee7, 0xbe8f, 0x0, 0x1);
        gbc.writeMem(0x8044, { 0x18, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x913f);
        EXPECT(gbc.pc(), 0x8039);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8044), 0x18);
        EXPECT(gbc.readMem(0x8045), 0xf3);
        // 18 01DB
        gbc.setState(0x53f9, 0xbe04, 0xfd60, 0x95b2, 0x1904, 0x6679, 0x0, 0x0);
        gbc.writeMem(0x53f9, { 0x18, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbe04);
        EXPECT(gbc.pc(), 0x53d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01DC
        gbc.setState(0x2a70, 0x56b5, 0x6940, 0x3d34, 0x909f, 0x51ec, 0x1, 0x1);
        gbc.writeMem(0x2a70, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x56b5);
        EXPECT(gbc.pc(), 0x29f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01DD
        gbc.setState(0x6b95, 0xf77f, 0xa020, 0x58bb, 0x9634, 0x856b, 0x1, 0x1);
        gbc.writeMem(0x6b95, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xf77f);
        EXPECT(gbc.pc(), 0x6bb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01DE
        gbc.setState(0xbc33, 0x1c4, 0x7b80, 0xd10d, 0x456, 0x187, 0x0, 0x1);
        gbc.writeMem(0xbc33, { 0x18, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x1c4);
        EXPECT(gbc.pc(), 0xbbc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc33), 0x18);
        EXPECT(gbc.readMem(0xbc34), 0x94);
        // 18 01DF
        gbc.setState(0x5d56, 0x2c51, 0xfad0, 0xd950, 0x227f, 0x6594, 0x1, 0x0);
        gbc.writeMem(0x5d56, { 0x18, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x2c51);
        EXPECT(gbc.pc(), 0x5d3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01E0
        gbc.setState(0x5781, 0xe04c, 0xa0d0, 0x197f, 0x1d7f, 0x6a42, 0x1, 0x0);
        gbc.writeMem(0x5781, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe04c);
        EXPECT(gbc.pc(), 0x57be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01E1
        gbc.setState(0x7d1b, 0x127d, 0xc000, 0x2737, 0x11a4, 0xfd6b, 0x0, 0x1);
        gbc.writeMem(0x7d1b, { 0x18, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x127d);
        EXPECT(gbc.pc(), 0x7d41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01E2
        gbc.setState(0x662b, 0xe44c, 0xb90, 0x928a, 0x2c5e, 0xadc9, 0x0, 0x1);
        gbc.writeMem(0x662b, { 0x18, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe44c);
        EXPECT(gbc.pc(), 0x6648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01E5
        gbc.setState(0x829f, 0x490, 0xf360, 0xe194, 0xd317, 0xb239, 0x1, 0x0);
        gbc.writeMem(0x829f, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x490);
        EXPECT(gbc.pc(), 0x8274);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x829f), 0x18);
        EXPECT(gbc.readMem(0x82a0), 0xd3);
        // 18 01E6
        gbc.setState(0x4f4d, 0xda65, 0x4150, 0xd1c, 0x81e2, 0xabc8, 0x1, 0x1);
        gbc.writeMem(0x4f4d, { 0x18, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xda65);
        EXPECT(gbc.pc(), 0x4f0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01E7
        gbc.setState(0xa031, 0xcf4, 0x3b60, 0x3693, 0xb141, 0x2c04, 0x0, 0x0);
        gbc.writeMem(0xa031, { 0x18, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xcf4);
        EXPECT(gbc.pc(), 0xa067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa031), 0x18);
        EXPECT(gbc.readMem(0xa032), 0x34);
        // 18 01E8
        gbc.setState(0x438f, 0x403d, 0x5530, 0x132b, 0x992e, 0x1ec3, 0x1, 0x0);
        gbc.writeMem(0x438f, { 0x18, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x403d);
        EXPECT(gbc.pc(), 0x435f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01E9
        gbc.setState(0x66ec, 0xb72a, 0x9de0, 0x37aa, 0x3de5, 0xc67f, 0x1, 0x0);
        gbc.writeMem(0x66ec, { 0x18, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xb72a);
        EXPECT(gbc.pc(), 0x669f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 01EA
        gbc.setState(0x2f18, 0xcd7f, 0x1e50, 0xde1f, 0xf00, 0x7fde, 0x0, 0x0);
        gbc.writeMem(0x2f18, { 0x18, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xcd7f);
        EXPECT(gbc.pc(), 0x2f57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01EB
        gbc.setState(0xd1d5, 0xbfd6, 0x43c0, 0x12b2, 0xca7b, 0x1da, 0x1, 0x0);
        gbc.writeMem(0xd1d5, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xbfd6);
        EXPECT(gbc.pc(), 0xd216);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1d5), 0x18);
        EXPECT(gbc.readMem(0xd1d6), 0x3f);
        // 18 01EC
        gbc.setState(0xac7f, 0x150e, 0x44b0, 0xd76f, 0x9f9c, 0xdfa4, 0x0, 0x1);
        gbc.writeMem(0xac7f, { 0x18, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x150e);
        EXPECT(gbc.pc(), 0xac56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac7f), 0x18);
        EXPECT(gbc.readMem(0xac80), 0xd5);
        // 18 01ED
        gbc.setState(0x7d73, 0x61cf, 0x27b0, 0xe8eb, 0xf6f6, 0x430e, 0x1, 0x1);
        gbc.writeMem(0x7d73, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x61cf);
        EXPECT(gbc.pc(), 0x7d03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01EE
        gbc.setState(0x981b, 0xef45, 0x2150, 0x970, 0x6403, 0x3881, 0x1, 0x1);
        gbc.writeMem(0x981b, { 0x18, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xef45);
        EXPECT(gbc.pc(), 0x97ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x981b), 0x18);
        EXPECT(gbc.readMem(0x981c), 0x91);
        // 18 01EF
        gbc.setState(0x49db, 0xa4c8, 0x8410, 0x6d0f, 0xf5cb, 0x8d02, 0x0, 0x0);
        gbc.writeMem(0x49db, { 0x18, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa4c8);
        EXPECT(gbc.pc(), 0x4a11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01F0
        gbc.setState(0x56cb, 0x20a1, 0xb1c0, 0x4907, 0x3b3f, 0xa6fc, 0x1, 0x0);
        gbc.writeMem(0x56cb, { 0x18, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x20a1);
        EXPECT(gbc.pc(), 0x5718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01F1
        gbc.setState(0x941c, 0x358b, 0xafd0, 0xe9ea, 0x9ce5, 0x7978, 0x0, 0x0);
        gbc.writeMem(0x941c, { 0x18, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x358b);
        EXPECT(gbc.pc(), 0x93c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x941c), 0x18);
        EXPECT(gbc.readMem(0x941d), 0xab);
        // 18 01F2
        gbc.setState(0xcd82, 0xa0cd, 0xab60, 0x9ed0, 0x1a08, 0x59ed, 0x0, 0x1);
        gbc.writeMem(0xcd82, { 0x18, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa0cd);
        EXPECT(gbc.pc(), 0xcd1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd82), 0x18);
        EXPECT(gbc.readMem(0xcd83), 0x9a);
        // 18 01F3
        gbc.setState(0xe2cf, 0x94a4, 0xbbc0, 0x1b53, 0xf4a7, 0x8cdc, 0x1, 0x0);
        gbc.writeMem(0xe2cf, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x94a4);
        EXPECT(gbc.pc(), 0xe32a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe2cf), 0x18);
        EXPECT(gbc.readMem(0xe2d0), 0x59);
        // 18 01F5
        gbc.setState(0xbb16, 0x4c2d, 0x6940, 0xa85, 0x6e80, 0xea04, 0x0, 0x0);
        gbc.writeMem(0xbb16, { 0x18, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x4c2d);
        EXPECT(gbc.pc(), 0xbafc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb16), 0x18);
        EXPECT(gbc.readMem(0xbb17), 0xe4);
        // 18 01F6
        gbc.setState(0x8c37, 0x1fe, 0x78a0, 0xf63a, 0x3a9f, 0x93b9, 0x0, 0x0);
        gbc.writeMem(0x8c37, { 0x18, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x1fe);
        EXPECT(gbc.pc(), 0x8c88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c37), 0x18);
        EXPECT(gbc.readMem(0x8c38), 0x4f);
        // 18 01F7
        gbc.setState(0xd9bc, 0x2919, 0x1fb0, 0x7cbc, 0x551, 0x1a76, 0x1, 0x1);
        gbc.writeMem(0xd9bc, { 0x18, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x2919);
        EXPECT(gbc.pc(), 0xd975);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9bc), 0x18);
        EXPECT(gbc.readMem(0xd9bd), 0xb7);
        // 18 01F8
        gbc.setState(0xae36, 0x370d, 0x8820, 0xefc8, 0x490e, 0x9260, 0x0, 0x0);
        gbc.writeMem(0xae36, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x370d);
        EXPECT(gbc.pc(), 0xae91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae36), 0x18);
        EXPECT(gbc.readMem(0xae37), 0x59);
        // 18 01F9
        gbc.setState(0x2d4f, 0x881e, 0x8380, 0xdc31, 0x3434, 0x154d, 0x1, 0x0);
        gbc.writeMem(0x2d4f, { 0x18, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x881e);
        EXPECT(gbc.pc(), 0x2d37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 01FA
        gbc.setState(0x7c50, 0x7573, 0x2e30, 0x56e7, 0xf289, 0xd45b, 0x1, 0x1);
        gbc.writeMem(0x7c50, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7573);
        EXPECT(gbc.pc(), 0x7c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01FB
        gbc.setState(0x754, 0x7011, 0x4930, 0x837a, 0xa3d, 0x4382, 0x1, 0x1);
        gbc.writeMem(0x754, { 0x18, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x7011);
        EXPECT(gbc.pc(), 0x776);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 01FC
        gbc.setState(0x1421, 0xd0a7, 0x4190, 0x636c, 0x8a32, 0xd29c, 0x0, 0x1);
        gbc.writeMem(0x1421, { 0x18, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xd0a7);
        EXPECT(gbc.pc(), 0x149a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01FD
        gbc.setState(0xb858, 0x5dc5, 0x64a0, 0xe04d, 0xb100, 0x8c66, 0x1, 0x1);
        gbc.writeMem(0xb858, { 0x18, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5dc5);
        EXPECT(gbc.pc(), 0xb7f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb858), 0x18);
        EXPECT(gbc.readMem(0xb859), 0x9e);
        // 18 01FE
        gbc.setState(0x6533, 0xc232, 0x7790, 0xf3b5, 0x5482, 0x8844, 0x1, 0x1);
        gbc.writeMem(0x6533, { 0x18, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xc232);
        EXPECT(gbc.pc(), 0x6556);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 01FF
        gbc.setState(0x69c1, 0x9474, 0x5d80, 0x2d11, 0x690d, 0xaa76, 0x0, 0x1);
        gbc.writeMem(0x69c1, { 0x18, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9474);
        EXPECT(gbc.pc(), 0x6a12);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0200
        gbc.setState(0x10a0, 0x82b7, 0x3770, 0xc7e, 0x2447, 0x70f6, 0x1, 0x0);
        gbc.writeMem(0x10a0, { 0x18, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x82b7);
        EXPECT(gbc.pc(), 0x10b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0201
        gbc.setState(0xe714, 0x304b, 0x4f0, 0x4f97, 0xf3d8, 0x29c1, 0x1, 0x0);
        gbc.writeMem(0xe714, { 0x18, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x304b);
        EXPECT(gbc.pc(), 0xe6fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe714), 0x18);
        EXPECT(gbc.readMem(0xe715), 0xe7);
        // 18 0202
        gbc.setState(0x41e2, 0x2044, 0xd500, 0x4415, 0x7e1b, 0x6e62, 0x1, 0x1);
        gbc.writeMem(0x41e2, { 0x18, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x2044);
        EXPECT(gbc.pc(), 0x4257);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0203
        gbc.setState(0x7f0d, 0x3c0f, 0x5c00, 0xefd6, 0x1903, 0x30c3, 0x1, 0x1);
        gbc.writeMem(0x7f0d, { 0x18, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x3c0f);
        EXPECT(gbc.pc(), 0x7edc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0204
        gbc.setState(0x7555, 0x53a7, 0x6fd0, 0xd3a3, 0x13fc, 0xc3cf, 0x0, 0x0);
        gbc.writeMem(0x7555, { 0x18, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x53a7);
        EXPECT(gbc.pc(), 0x7577);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0205
        gbc.setState(0xe6ff, 0xe597, 0x67d0, 0xa899, 0x4ea9, 0xa3f2, 0x0, 0x1);
        gbc.writeMem(0xe6ff, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0xe597);
        EXPECT(gbc.pc(), 0xe720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6ff), 0x18);
        EXPECT(gbc.readMem(0xe700), 0x1f);
        // 18 0206
        gbc.setState(0x591d, 0xd3a4, 0xa7a0, 0x59dc, 0x65b0, 0x986f, 0x0, 0x0);
        gbc.writeMem(0x591d, { 0x18, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xd3a4);
        EXPECT(gbc.pc(), 0x597c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0207
        gbc.setState(0xc29b, 0xd12d, 0x7120, 0xab0a, 0x7472, 0xbc8a, 0x0, 0x0);
        gbc.writeMem(0xc29b, { 0x18, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xd12d);
        EXPECT(gbc.pc(), 0xc313);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc29b), 0x18);
        EXPECT(gbc.readMem(0xc29c), 0x76);
        // 18 0208
        gbc.setState(0x5422, 0xd6b8, 0xa9c0, 0x4d68, 0xf6ce, 0xe7e6, 0x1, 0x0);
        gbc.writeMem(0x5422, { 0x18, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd6b8);
        EXPECT(gbc.pc(), 0x5482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0209
        gbc.setState(0x43db, 0xbc4f, 0x15d0, 0xb909, 0x8b6, 0x5c03, 0x1, 0x1);
        gbc.writeMem(0x43db, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xbc4f);
        EXPECT(gbc.pc(), 0x43d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 020A
        gbc.setState(0x1612, 0x9208, 0x6880, 0xd34f, 0xcacd, 0xa606, 0x1, 0x1);
        gbc.writeMem(0x1612, { 0x18, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x9208);
        EXPECT(gbc.pc(), 0x15ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 020B
        gbc.setState(0xe38e, 0x892b, 0x1af0, 0x61ac, 0x12e6, 0x7334, 0x0, 0x1);
        gbc.writeMem(0xe38e, { 0x18, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x892b);
        EXPECT(gbc.pc(), 0xe339);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe38e), 0x18);
        EXPECT(gbc.readMem(0xe38f), 0xa9);
        // 18 020C
        gbc.setState(0xd56c, 0x8774, 0x350, 0x50ce, 0x7933, 0xcffb, 0x0, 0x1);
        gbc.writeMem(0xd56c, { 0x18, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8774);
        EXPECT(gbc.pc(), 0xd58e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd56c), 0x18);
        EXPECT(gbc.readMem(0xd56d), 0x20);
        // 18 020D
        gbc.setState(0x9b4a, 0x5b4e, 0x1ca0, 0xe9b, 0x1bd7, 0x9e95, 0x1, 0x1);
        gbc.writeMem(0x9b4a, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x5b4e);
        EXPECT(gbc.pc(), 0x9ad4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9b4a), 0x18);
        EXPECT(gbc.readMem(0x9b4b), 0x88);
        // 18 020E
        gbc.setState(0x9736, 0x183d, 0x8710, 0x88db, 0x77be, 0x7370, 0x1, 0x1);
        gbc.writeMem(0x9736, { 0x18, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x183d);
        EXPECT(gbc.pc(), 0x96d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9736), 0x18);
        EXPECT(gbc.readMem(0x9737), 0x9a);
        // 18 020F
        gbc.setState(0x85c9, 0x41d8, 0x3530, 0x571, 0x3b22, 0x5fe5, 0x0, 0x1);
        gbc.writeMem(0x85c9, { 0x18, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x41d8);
        EXPECT(gbc.pc(), 0x85e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c9), 0x18);
        EXPECT(gbc.readMem(0x85ca), 0x1c);
        // 18 0210
        gbc.setState(0x38c6, 0x4365, 0x2dd0, 0x54e2, 0x9fe6, 0x176e, 0x0, 0x0);
        gbc.writeMem(0x38c6, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x4365);
        EXPECT(gbc.pc(), 0x38ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0211
        gbc.setState(0xd002, 0x3a33, 0xdc00, 0xd26e, 0x72f7, 0xdc68, 0x1, 0x0);
        gbc.writeMem(0xd002, { 0x18, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x3a33);
        EXPECT(gbc.pc(), 0xd027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd002), 0x18);
        EXPECT(gbc.readMem(0xd003), 0x23);
        // 18 0213
        gbc.setState(0x76f4, 0x9777, 0x32e0, 0xb8f3, 0x5dd6, 0x7f53, 0x1, 0x1);
        gbc.writeMem(0x76f4, { 0x18, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x9777);
        EXPECT(gbc.pc(), 0x76b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0214
        gbc.setState(0x364e, 0xb5d5, 0xe480, 0xeb4b, 0x4464, 0x6fd2, 0x0, 0x0);
        gbc.writeMem(0x364e, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xb5d5);
        EXPECT(gbc.pc(), 0x35d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0216
        gbc.setState(0x547b, 0x93a2, 0x9d10, 0x635, 0xf779, 0x92fa, 0x1, 0x1);
        gbc.writeMem(0x547b, { 0x18, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x93a2);
        EXPECT(gbc.pc(), 0x54f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0217
        gbc.setState(0xaed2, 0x6a5, 0x2060, 0xf8db, 0xd72f, 0x1037, 0x0, 0x1);
        gbc.writeMem(0xaed2, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x6a5);
        EXPECT(gbc.pc(), 0xaee7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaed2), 0x18);
        EXPECT(gbc.readMem(0xaed3), 0x13);
        // 18 0218
        gbc.setState(0x1f17, 0x4b29, 0x4b70, 0x91e8, 0x328, 0x1457, 0x0, 0x1);
        gbc.writeMem(0x1f17, { 0x18, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4b29);
        EXPECT(gbc.pc(), 0x1f42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0219
        gbc.setState(0xb049, 0xadcc, 0xacd0, 0x50da, 0x9b72, 0x4586, 0x1, 0x1);
        gbc.writeMem(0xb049, { 0x18, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xadcc);
        EXPECT(gbc.pc(), 0xb011);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb049), 0x18);
        EXPECT(gbc.readMem(0xb04a), 0xc6);
        // 18 021A
        gbc.setState(0x243c, 0xa16b, 0x1ff0, 0x4566, 0x422f, 0x5148, 0x1, 0x1);
        gbc.writeMem(0x243c, { 0x18, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xa16b);
        EXPECT(gbc.pc(), 0x248f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 021B
        gbc.setState(0x1d14, 0x650, 0xde60, 0x4080, 0xce8, 0x87e8, 0x0, 0x0);
        gbc.writeMem(0x1d14, { 0x18, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x650);
        EXPECT(gbc.pc(), 0x1d27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 021C
        gbc.setState(0x99e1, 0x32b9, 0x5f40, 0x2545, 0xa809, 0x818d, 0x1, 0x0);
        gbc.writeMem(0x99e1, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x32b9);
        EXPECT(gbc.pc(), 0x99e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e1), 0x18);
        EXPECT(gbc.readMem(0x99e2), 0x2);
        // 18 021D
        gbc.setState(0xbbc6, 0x5d80, 0x88b0, 0x2599, 0xbdc1, 0x3f10, 0x1, 0x0);
        gbc.writeMem(0xbbc6, { 0x18, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x5d80);
        EXPECT(gbc.pc(), 0xbb9a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbc6), 0x18);
        EXPECT(gbc.readMem(0xbbc7), 0xd2);
        // 18 021E
        gbc.setState(0x167a, 0xe7bf, 0x6380, 0x7765, 0x270, 0x2857, 0x1, 0x1);
        gbc.writeMem(0x167a, { 0x18, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xe7bf);
        EXPECT(gbc.pc(), 0x16d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0220
        gbc.setState(0x6482, 0xdfb6, 0x2530, 0xd22e, 0x4e1e, 0xf2e4, 0x1, 0x0);
        gbc.writeMem(0x6482, { 0x18, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xdfb6);
        EXPECT(gbc.pc(), 0x6414);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0221
        gbc.setState(0x6049, 0xd56b, 0x7f70, 0x7ce1, 0x3814, 0x6bbf, 0x0, 0x0);
        gbc.writeMem(0x6049, { 0x18, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd56b);
        EXPECT(gbc.pc(), 0x6014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0223
        gbc.setState(0xdef4, 0xecb0, 0x73c0, 0x36f6, 0xe687, 0xa38c, 0x1, 0x1);
        gbc.writeMem(0xdef4, { 0x18, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0xecb0);
        EXPECT(gbc.pc(), 0xdf11);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdef4), 0x18);
        EXPECT(gbc.readMem(0xdef5), 0x1b);
        // 18 0224
        gbc.setState(0xe25d, 0x19c1, 0xfd50, 0x72c, 0xbbfc, 0x6f96, 0x1, 0x0);
        gbc.writeMem(0xe25d, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x19c1);
        EXPECT(gbc.pc(), 0xe2cf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe25d), 0x18);
        EXPECT(gbc.readMem(0xe25e), 0x70);
        // 18 0225
        gbc.setState(0xd970, 0x7dd, 0x17b0, 0xe780, 0xf3a2, 0x8003, 0x0, 0x1);
        gbc.writeMem(0xd970, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x7dd);
        EXPECT(gbc.pc(), 0xd998);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd970), 0x18);
        EXPECT(gbc.readMem(0xd971), 0x26);
        // 18 0227
        gbc.setState(0x4fc2, 0x6d59, 0x39a0, 0x76d6, 0x552a, 0x67dd, 0x1, 0x0);
        gbc.writeMem(0x4fc2, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x6d59);
        EXPECT(gbc.pc(), 0x4f98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0228
        gbc.setState(0x66d2, 0x5cd7, 0xeab0, 0xa5a3, 0x3fa5, 0xa5b3, 0x0, 0x1);
        gbc.writeMem(0x66d2, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5cd7);
        EXPECT(gbc.pc(), 0x6744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0229
        gbc.setState(0xbfae, 0x2888, 0x1a10, 0x7b03, 0x7ff, 0xf1f5, 0x1, 0x0);
        gbc.writeMem(0xbfae, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2888);
        EXPECT(gbc.pc(), 0xc020);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfae), 0x18);
        EXPECT(gbc.readMem(0xbfaf), 0x70);
        // 18 022A
        gbc.setState(0x17b5, 0xd805, 0x8180, 0x2d15, 0xe85f, 0x71d3, 0x1, 0x1);
        gbc.writeMem(0x17b5, { 0x18, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd805);
        EXPECT(gbc.pc(), 0x180c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 022B
        gbc.setState(0x113c, 0x8ef1, 0xe0e0, 0x13a4, 0xc4b2, 0xade9, 0x1, 0x1);
        gbc.writeMem(0x113c, { 0x18, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8ef1);
        EXPECT(gbc.pc(), 0x1161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 022C
        gbc.setState(0x9c4d, 0xabb2, 0xcf0, 0x5a0c, 0x59f, 0x3e65, 0x0, 0x1);
        gbc.writeMem(0x9c4d, { 0x18, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xabb2);
        EXPECT(gbc.pc(), 0x9c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c4d), 0x18);
        EXPECT(gbc.readMem(0x9c4e), 0xd8);
        // 18 022D
        gbc.setState(0xd918, 0x1626, 0x9870, 0x4069, 0x2cba, 0xb3d0, 0x1, 0x1);
        gbc.writeMem(0xd918, { 0x18, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x1626);
        EXPECT(gbc.pc(), 0xd90a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd918), 0x18);
        EXPECT(gbc.readMem(0xd919), 0xf0);
        // 18 022E
        gbc.setState(0x4682, 0xda9b, 0x8660, 0xbd16, 0x58c2, 0x15c3, 0x1, 0x1);
        gbc.writeMem(0x4682, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xda9b);
        EXPECT(gbc.pc(), 0x4686);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 022F
        gbc.setState(0xf05, 0x6a1, 0xe6d0, 0xe43e, 0x8b49, 0xfa75, 0x1, 0x1);
        gbc.writeMem(0xf05, { 0x18, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0x6a1);
        EXPECT(gbc.pc(), 0xf1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0230
        gbc.setState(0xb400, 0xd4dd, 0xc7d0, 0xbc74, 0x80ec, 0x153, 0x0, 0x0);
        gbc.writeMem(0xb400, { 0x18, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd4dd);
        EXPECT(gbc.pc(), 0xb46e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb400), 0x18);
        EXPECT(gbc.readMem(0xb401), 0x6c);
        // 18 0231
        gbc.setState(0x7195, 0x9519, 0xa860, 0x745a, 0x8768, 0x9422, 0x1, 0x1);
        gbc.writeMem(0x7195, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x9519);
        EXPECT(gbc.pc(), 0x71b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0232
        gbc.setState(0x530c, 0xa285, 0xdb90, 0x9490, 0xfd94, 0x1ce7, 0x1, 0x1);
        gbc.writeMem(0x530c, { 0x18, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa285);
        EXPECT(gbc.pc(), 0x537a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0233
        gbc.setState(0x776, 0xd002, 0xe780, 0x6598, 0xf8c7, 0x8686, 0x0, 0x0);
        gbc.writeMem(0x776, { 0x18, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xd002);
        EXPECT(gbc.pc(), 0x720);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0234
        gbc.setState(0x1fbe, 0x2ba1, 0x4f0, 0x25ac, 0x6bbb, 0x81a3, 0x1, 0x1);
        gbc.writeMem(0x1fbe, { 0x18, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x2ba1);
        EXPECT(gbc.pc(), 0x1fea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0235
        gbc.setState(0x1f0, 0x48c0, 0x1ed0, 0xa84, 0x6dc5, 0xa324, 0x1, 0x0);
        gbc.writeMem(0x1f0, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x48c0);
        EXPECT(gbc.pc(), 0x1b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0236
        gbc.setState(0x7292, 0xbed3, 0xeba0, 0x8f64, 0x55d3, 0x3964, 0x0, 0x1);
        gbc.writeMem(0x7292, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xbed3);
        EXPECT(gbc.pc(), 0x728e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0237
        gbc.setState(0x317f, 0xa1ad, 0x7550, 0x6e8a, 0xa6f5, 0x200b, 0x0, 0x0);
        gbc.writeMem(0x317f, { 0x18, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xa1ad);
        EXPECT(gbc.pc(), 0x31be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0238
        gbc.setState(0x8fd2, 0xa833, 0xe060, 0xbb8f, 0xb0b3, 0xc582, 0x1, 0x1);
        gbc.writeMem(0x8fd2, { 0x18, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xa833);
        EXPECT(gbc.pc(), 0x9027);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fd2), 0x18);
        EXPECT(gbc.readMem(0x8fd3), 0x53);
        // 18 0239
        gbc.setState(0x4e89, 0x2b7c, 0x4610, 0x56b2, 0xf737, 0xb077, 0x1, 0x0);
        gbc.writeMem(0x4e89, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x2b7c);
        EXPECT(gbc.pc(), 0x4e8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 023B
        gbc.setState(0x6177, 0x57fd, 0x8ea0, 0x4bf5, 0xa1d9, 0xcbbb, 0x0, 0x1);
        gbc.writeMem(0x6177, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x57fd);
        EXPECT(gbc.pc(), 0x618c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 023C
        gbc.setState(0x279b, 0x629a, 0xdf50, 0x5114, 0x58b5, 0x74fd, 0x0, 0x0);
        gbc.writeMem(0x279b, { 0x18, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x629a);
        EXPECT(gbc.pc(), 0x27a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 023E
        gbc.setState(0xd35d, 0xfcc5, 0x8d30, 0x6965, 0xb79a, 0x5ad0, 0x0, 0x0);
        gbc.writeMem(0xd35d, { 0x18, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfcc5);
        EXPECT(gbc.pc(), 0xd37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd35d), 0x18);
        EXPECT(gbc.readMem(0xd35e), 0x20);
        // 18 023F
        gbc.setState(0xb52f, 0xe392, 0x1550, 0x8dfb, 0x17c6, 0xba45, 0x0, 0x0);
        gbc.writeMem(0xb52f, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe392);
        EXPECT(gbc.pc(), 0xb590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb52f), 0x18);
        EXPECT(gbc.readMem(0xb530), 0x5f);
        // 18 0240
        gbc.setState(0x817f, 0xfb23, 0x98f0, 0x973d, 0xd8ae, 0x7d6b, 0x0, 0x0);
        gbc.writeMem(0x817f, { 0x18, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfb23);
        EXPECT(gbc.pc(), 0x81a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x817f), 0x18);
        EXPECT(gbc.readMem(0x8180), 0x23);
        // 18 0241
        gbc.setState(0x1e01, 0xc01c, 0xf240, 0x7e4f, 0xfdfa, 0xf6e, 0x0, 0x0);
        gbc.writeMem(0x1e01, { 0x18, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xc01c);
        EXPECT(gbc.pc(), 0x1de9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0242
        gbc.setState(0x5703, 0x228e, 0x3bc0, 0x7ffd, 0xc861, 0xb552, 0x0, 0x1);
        gbc.writeMem(0x5703, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x228e);
        EXPECT(gbc.pc(), 0x56b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0243
        gbc.setState(0x768a, 0xd617, 0xed90, 0x3288, 0x32af, 0x2554, 0x1, 0x0);
        gbc.writeMem(0x768a, { 0x18, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xd617);
        EXPECT(gbc.pc(), 0x76f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0244
        gbc.setState(0xddd, 0x4faa, 0x8a00, 0x5f45, 0xcd27, 0x869f, 0x1, 0x0);
        gbc.writeMem(0xddd, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4faa);
        EXPECT(gbc.pc(), 0xe0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0245
        gbc.setState(0x1fe9, 0x9525, 0xed20, 0x45d7, 0x982f, 0xf120, 0x0, 0x1);
        gbc.writeMem(0x1fe9, { 0x18, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9525);
        EXPECT(gbc.pc(), 0x1f70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0246
        gbc.setState(0x3848, 0x3c4e, 0x2ef0, 0x231, 0x6530, 0x2ba6, 0x1, 0x1);
        gbc.writeMem(0x3848, { 0x18, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x3c4e);
        EXPECT(gbc.pc(), 0x38b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0247
        gbc.setState(0x5c3f, 0x62, 0xfb30, 0xc42b, 0xf5e9, 0xe365, 0x0, 0x0);
        gbc.writeMem(0x5c3f, { 0x18, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x62);
        EXPECT(gbc.pc(), 0x5c46);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0248
        gbc.setState(0xc6b2, 0x5fa8, 0xb220, 0xf4a4, 0x585e, 0x5eeb, 0x1, 0x0);
        gbc.writeMem(0xc6b2, { 0x18, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5fa8);
        EXPECT(gbc.pc(), 0xc6c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6b2), 0x18);
        EXPECT(gbc.readMem(0xc6b3), 0x14);
        // 18 0249
        gbc.setState(0xa8, 0x10d7, 0xbca0, 0x4660, 0x5b58, 0x2382, 0x0, 0x1);
        gbc.writeMem(0xa8, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x10d7);
        EXPECT(gbc.pc(), 0x11a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 024A
        gbc.setState(0xbac6, 0xd5f5, 0xc200, 0xcd48, 0xe63f, 0xd406, 0x0, 0x1);
        gbc.writeMem(0xbac6, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xd5f5);
        EXPECT(gbc.pc(), 0xbac5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac6), 0x18);
        EXPECT(gbc.readMem(0xbac7), 0xfd);
        // 18 024B
        gbc.setState(0xb8de, 0x3fb, 0x8720, 0x5258, 0x9e43, 0x1857, 0x0, 0x0);
        gbc.writeMem(0xb8de, { 0x18, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x3fb);
        EXPECT(gbc.pc(), 0xb863);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8de), 0x18);
        EXPECT(gbc.readMem(0xb8df), 0x83);
        // 18 024C
        gbc.setState(0x91f7, 0xe5a7, 0x410, 0xfe4c, 0x2723, 0x45e0, 0x0, 0x1);
        gbc.writeMem(0x91f7, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe5a7);
        EXPECT(gbc.pc(), 0x9238);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91f7), 0x18);
        EXPECT(gbc.readMem(0x91f8), 0x3f);
        // 18 024D
        gbc.setState(0x4802, 0x1770, 0x3aa0, 0xee0, 0xf23d, 0x5429, 0x1, 0x1);
        gbc.writeMem(0x4802, { 0x18, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x1770);
        EXPECT(gbc.pc(), 0x485f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 024E
        gbc.setState(0x4c6f, 0xecba, 0x2aa0, 0x3c17, 0x5cc4, 0xc0cf, 0x1, 0x0);
        gbc.writeMem(0x4c6f, { 0x18, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xecba);
        EXPECT(gbc.pc(), 0x4c58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 024F
        gbc.setState(0x978a, 0xa85b, 0x3690, 0xbe9a, 0xeb72, 0x2b11, 0x1, 0x0);
        gbc.writeMem(0x978a, { 0x18, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xa85b);
        EXPECT(gbc.pc(), 0x979d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978a), 0x18);
        EXPECT(gbc.readMem(0x978b), 0x11);
        // 18 0250
        gbc.setState(0x4671, 0x7473, 0x4ad0, 0x25ea, 0xdd93, 0x6f61, 0x1, 0x1);
        gbc.writeMem(0x4671, { 0x18, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x7473);
        EXPECT(gbc.pc(), 0x4649);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0251
        gbc.setState(0x647f, 0x5952, 0xd480, 0x27c0, 0x451d, 0x5b14, 0x0, 0x1);
        gbc.writeMem(0x647f, { 0x18, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x5952);
        EXPECT(gbc.pc(), 0x645c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0252
        gbc.setState(0x974c, 0xeeac, 0xacb0, 0x720c, 0xbe91, 0x74c2, 0x1, 0x1);
        gbc.writeMem(0x974c, { 0x18, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xeeac);
        EXPECT(gbc.pc(), 0x9756);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x974c), 0x18);
        EXPECT(gbc.readMem(0x974d), 0x8);
        // 18 0253
        gbc.setState(0xec26, 0xa734, 0x5950, 0xb1c8, 0x3e73, 0x7fcc, 0x0, 0x0);
        gbc.writeMem(0xec26, { 0x18, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa734);
        EXPECT(gbc.pc(), 0xec83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec26), 0x18);
        EXPECT(gbc.readMem(0xec27), 0x5b);
        // 18 0254
        gbc.setState(0xdca, 0x9717, 0x74c0, 0x7e14, 0xe39a, 0xa69f, 0x1, 0x1);
        gbc.writeMem(0xdca, { 0x18, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x9717);
        EXPECT(gbc.pc(), 0xe39);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0256
        gbc.setState(0xe87a, 0x93bb, 0x9f80, 0x7d85, 0x268d, 0xddd1, 0x0, 0x1);
        gbc.writeMem(0xe87a, { 0x18, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x93bb);
        EXPECT(gbc.pc(), 0xe878);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe87a), 0x18);
        EXPECT(gbc.readMem(0xe87b), 0xfc);
        // 18 0257
        gbc.setState(0x1f03, 0x84b6, 0x9ab0, 0x1dc9, 0x2f62, 0x2ebc, 0x1, 0x1);
        gbc.writeMem(0x1f03, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x84b6);
        EXPECT(gbc.pc(), 0x1f64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0258
        gbc.setState(0xeb4e, 0x4b24, 0x22b0, 0x5f6a, 0x8450, 0xc467, 0x0, 0x1);
        gbc.writeMem(0xeb4e, { 0x18, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x4b24);
        EXPECT(gbc.pc(), 0xebb0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb4e), 0x18);
        EXPECT(gbc.readMem(0xeb4f), 0x60);
        // 18 0259
        gbc.setState(0x5010, 0xc74a, 0x58d0, 0xbbe5, 0xbd8e, 0x4899, 0x1, 0x1);
        gbc.writeMem(0x5010, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xc74a);
        EXPECT(gbc.pc(), 0x4fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 025A
        gbc.setState(0x419a, 0x1e01, 0xdfb0, 0x9503, 0x6b00, 0xee20, 0x0, 0x0);
        gbc.writeMem(0x419a, { 0x18, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x1e01);
        EXPECT(gbc.pc(), 0x420a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 025B
        gbc.setState(0x2ded, 0x3713, 0x2260, 0xbe66, 0x1a6c, 0x24a9, 0x0, 0x1);
        gbc.writeMem(0x2ded, { 0x18, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3713);
        EXPECT(gbc.pc(), 0x2de5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 025C
        gbc.setState(0x405, 0xbf42, 0x11b0, 0xc266, 0x131d, 0xdc23, 0x0, 0x1);
        gbc.writeMem(0x405, { 0x18, 0x77 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xbf42);
        EXPECT(gbc.pc(), 0x47e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 025D
        gbc.setState(0x19fb, 0xee52, 0xca50, 0x15ef, 0xd27, 0xec59, 0x0, 0x1);
        gbc.writeMem(0x19fb, { 0x18, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xee52);
        EXPECT(gbc.pc(), 0x1984);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 025E
        gbc.setState(0x8db4, 0xd9f3, 0x4810, 0xed56, 0x202f, 0x17bd, 0x1, 0x0);
        gbc.writeMem(0x8db4, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd9f3);
        EXPECT(gbc.pc(), 0x8e1e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db4), 0x18);
        EXPECT(gbc.readMem(0x8db5), 0x68);
        // 18 025F
        gbc.setState(0xe394, 0xda9c, 0xf680, 0x52cb, 0x884f, 0x30c3, 0x0, 0x1);
        gbc.writeMem(0xe394, { 0x18, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xda9c);
        EXPECT(gbc.pc(), 0xe3f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe394), 0x18);
        EXPECT(gbc.readMem(0xe395), 0x5e);
        // 18 0260
        gbc.setState(0x34db, 0x7263, 0x5960, 0xbaa9, 0x9cf5, 0x4db6, 0x0, 0x0);
        gbc.writeMem(0x34db, { 0x18, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x7263);
        EXPECT(gbc.pc(), 0x34be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0261
        gbc.setState(0x684a, 0x583b, 0x78d0, 0xbe3c, 0x8136, 0x81a0, 0x1, 0x0);
        gbc.writeMem(0x684a, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x583b);
        EXPECT(gbc.pc(), 0x6886);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0262
        gbc.setState(0x3b04, 0x1dcd, 0x80c0, 0x61e6, 0xca8e, 0x1e04, 0x0, 0x0);
        gbc.writeMem(0x3b04, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x1dcd);
        EXPECT(gbc.pc(), 0x3ab9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0263
        gbc.setState(0x76b6, 0x34c1, 0x5d70, 0x8687, 0xb088, 0xfd2c, 0x0, 0x0);
        gbc.writeMem(0x76b6, { 0x18, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x34c1);
        EXPECT(gbc.pc(), 0x76f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0264
        gbc.setState(0xcde, 0x2031, 0xc0, 0xdf98, 0x9ca8, 0x4725, 0x0, 0x1);
        gbc.writeMem(0xcde, { 0x18, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x2031);
        EXPECT(gbc.pc(), 0xd55);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0265
        gbc.setState(0xcbe5, 0x366c, 0x1a30, 0x42c4, 0x448d, 0x9a39, 0x0, 0x0);
        gbc.writeMem(0xcbe5, { 0x18, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x366c);
        EXPECT(gbc.pc(), 0xcc47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbe5), 0x18);
        EXPECT(gbc.readMem(0xcbe6), 0x60);
        // 18 0266
        gbc.setState(0xa221, 0xd31e, 0x6110, 0x439a, 0x76b3, 0xe6c1, 0x1, 0x0);
        gbc.writeMem(0xa221, { 0x18, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xd31e);
        EXPECT(gbc.pc(), 0xa21a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa221), 0x18);
        EXPECT(gbc.readMem(0xa222), 0xf7);
        // 18 0267
        gbc.setState(0x1f0, 0x41ba, 0xa440, 0x577c, 0xde69, 0xc3fe, 0x0, 0x1);
        gbc.writeMem(0x1f0, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x41ba);
        EXPECT(gbc.pc(), 0x1b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0268
        gbc.setState(0x53a, 0x9cf9, 0x8500, 0x33fc, 0x1e71, 0x6ebd, 0x1, 0x0);
        gbc.writeMem(0x53a, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x9cf9);
        EXPECT(gbc.pc(), 0x4e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0269
        gbc.setState(0xe517, 0xe82, 0xbb90, 0xe7a2, 0xd016, 0x86d, 0x1, 0x0);
        gbc.writeMem(0xe517, { 0x18, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe82);
        EXPECT(gbc.pc(), 0xe555);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe517), 0x18);
        EXPECT(gbc.readMem(0xe518), 0x3c);
        // 18 026A
        gbc.setState(0xc8d1, 0x9f2a, 0xcf80, 0xfa1, 0x5061, 0xd89b, 0x0, 0x1);
        gbc.writeMem(0xc8d1, { 0x18, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9f2a);
        EXPECT(gbc.pc(), 0xc87e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8d1), 0x18);
        EXPECT(gbc.readMem(0xc8d2), 0xab);
        // 18 026B
        gbc.setState(0x3a5b, 0xaab3, 0x67a0, 0x67f7, 0x1173, 0xe5d7, 0x1, 0x0);
        gbc.writeMem(0x3a5b, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xaab3);
        EXPECT(gbc.pc(), 0x3a82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 026C
        gbc.setState(0x3a63, 0x9da7, 0xbb40, 0xd4e1, 0x5095, 0xbbb3, 0x0, 0x1);
        gbc.writeMem(0x3a63, { 0x18, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x9da7);
        EXPECT(gbc.pc(), 0x39f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 026D
        gbc.setState(0x37e8, 0xe8dc, 0xcb60, 0x5588, 0x4238, 0xc81d, 0x1, 0x0);
        gbc.writeMem(0x37e8, { 0x18, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe8dc);
        EXPECT(gbc.pc(), 0x3859);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 026E
        gbc.setState(0x1082, 0x9e04, 0xd530, 0xf567, 0x6ad2, 0xdf87, 0x0, 0x1);
        gbc.writeMem(0x1082, { 0x18, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x9e04);
        EXPECT(gbc.pc(), 0x1053);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 026F
        gbc.setState(0xe19c, 0x32a1, 0xc580, 0xe03e, 0x17b5, 0xfc53, 0x0, 0x1);
        gbc.writeMem(0xe19c, { 0x18, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x32a1);
        EXPECT(gbc.pc(), 0xe1cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe19c), 0x18);
        EXPECT(gbc.readMem(0xe19d), 0x31);
        // 18 0272
        gbc.setState(0xacb8, 0xb88d, 0x2bf0, 0xc3f3, 0xbd20, 0x7ae5, 0x1, 0x1);
        gbc.writeMem(0xacb8, { 0x18, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xb88d);
        EXPECT(gbc.pc(), 0xacce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacb8), 0x18);
        EXPECT(gbc.readMem(0xacb9), 0x14);
        // 18 0273
        gbc.setState(0x971e, 0x7d69, 0x6bd0, 0xda, 0x4466, 0x6043, 0x1, 0x0);
        gbc.writeMem(0x971e, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7d69);
        EXPECT(gbc.pc(), 0x96d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x971e), 0x18);
        EXPECT(gbc.readMem(0x971f), 0xb3);
        // 18 0274
        gbc.setState(0xcaed, 0xbb7c, 0x5220, 0x693, 0x44f0, 0x1c0e, 0x1, 0x1);
        gbc.writeMem(0xcaed, { 0x18, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xbb7c);
        EXPECT(gbc.pc(), 0xcaea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcaed), 0x18);
        EXPECT(gbc.readMem(0xcaee), 0xfb);
        // 18 0275
        gbc.setState(0xa890, 0x3c07, 0x8be0, 0x7998, 0x229e, 0x4788, 0x0, 0x1);
        gbc.writeMem(0xa890, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x3c07);
        EXPECT(gbc.pc(), 0xa8cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa890), 0x18);
        EXPECT(gbc.readMem(0xa891), 0x3b);
        // 18 0276
        gbc.setState(0xd683, 0x3215, 0x4e40, 0x281e, 0xdee0, 0xd97d, 0x1, 0x1);
        gbc.writeMem(0xd683, { 0x18, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x3215);
        EXPECT(gbc.pc(), 0xd68a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd683), 0x18);
        EXPECT(gbc.readMem(0xd684), 0x5);
        // 18 0277
        gbc.setState(0x7a42, 0x4984, 0x220, 0xae9a, 0x2b34, 0x89bd, 0x0, 0x1);
        gbc.writeMem(0x7a42, { 0x18, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x4984);
        EXPECT(gbc.pc(), 0x7aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0278
        gbc.setState(0xa619, 0xcc75, 0xe350, 0x84ed, 0xda5d, 0x270f, 0x0, 0x0);
        gbc.writeMem(0xa619, { 0x18, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xcc75);
        EXPECT(gbc.pc(), 0xa607);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa619), 0x18);
        EXPECT(gbc.readMem(0xa61a), 0xec);
        // 18 0279
        gbc.setState(0xa4fa, 0x61a, 0x3be0, 0xcc67, 0xe7c4, 0xf0ea, 0x1, 0x1);
        gbc.writeMem(0xa4fa, { 0x18, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x61a);
        EXPECT(gbc.pc(), 0xa4ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4fa), 0x18);
        EXPECT(gbc.readMem(0xa4fb), 0xce);
        // 18 027A
        gbc.setState(0xbeec, 0x5b6e, 0xa60, 0x1c7c, 0x3c22, 0xb21d, 0x1, 0x0);
        gbc.writeMem(0xbeec, { 0x18, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x5b6e);
        EXPECT(gbc.pc(), 0xbe91);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbeec), 0x18);
        EXPECT(gbc.readMem(0xbeed), 0xa3);
        // 18 027B
        gbc.setState(0x6367, 0x1960, 0x3800, 0xd40c, 0x451d, 0xfca4, 0x1, 0x1);
        gbc.writeMem(0x6367, { 0x18, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x1960);
        EXPECT(gbc.pc(), 0x63d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 027C
        gbc.setState(0xc391, 0xb9b, 0xc700, 0x4732, 0xeae8, 0xc0b9, 0x0, 0x1);
        gbc.writeMem(0xc391, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xb9b);
        EXPECT(gbc.pc(), 0xc3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc391), 0x18);
        EXPECT(gbc.readMem(0xc392), 0x5f);
        // 18 027D
        gbc.setState(0xb15b, 0x169a, 0xc8f0, 0x5f89, 0x7ac6, 0x3f27, 0x1, 0x0);
        gbc.writeMem(0xb15b, { 0x18, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x169a);
        EXPECT(gbc.pc(), 0xb181);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb15b), 0x18);
        EXPECT(gbc.readMem(0xb15c), 0x24);
        // 18 027E
        gbc.setState(0x21ae, 0x249f, 0x1090, 0xd9e8, 0xc8a0, 0xfe9a, 0x1, 0x0);
        gbc.writeMem(0x21ae, { 0x18, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x249f);
        EXPECT(gbc.pc(), 0x2209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 027F
        gbc.setState(0x2400, 0x8ba7, 0x9fa0, 0x2704, 0x3d19, 0x374b, 0x0, 0x0);
        gbc.writeMem(0x2400, { 0x18, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8ba7);
        EXPECT(gbc.pc(), 0x23ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0280
        gbc.setState(0xb85c, 0x5c6d, 0xb490, 0xc2e8, 0xcff5, 0x32bb, 0x1, 0x0);
        gbc.writeMem(0xb85c, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x5c6d);
        EXPECT(gbc.pc(), 0xb80c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85c), 0x18);
        EXPECT(gbc.readMem(0xb85d), 0xae);
        // 18 0281
        gbc.setState(0x4cb2, 0xbb55, 0x6140, 0x3d64, 0xf76a, 0xf279, 0x1, 0x0);
        gbc.writeMem(0x4cb2, { 0x18, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xbb55);
        EXPECT(gbc.pc(), 0x4caf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0282
        gbc.setState(0xd814, 0x4542, 0xd80, 0xe3d7, 0x9ec8, 0x2e24, 0x0, 0x0);
        gbc.writeMem(0xd814, { 0x18, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x4542);
        EXPECT(gbc.pc(), 0xd798);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd814), 0x18);
        EXPECT(gbc.readMem(0xd815), 0x82);
        // 18 0283
        gbc.setState(0x36a9, 0xeb04, 0xd4e0, 0xeaba, 0xac3d, 0x84f1, 0x1, 0x1);
        gbc.writeMem(0x36a9, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xeb04);
        EXPECT(gbc.pc(), 0x36e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0284
        gbc.setState(0x19e8, 0x2081, 0x4380, 0xf385, 0xd902, 0xd5e8, 0x1, 0x0);
        gbc.writeMem(0x19e8, { 0x18, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x2081);
        EXPECT(gbc.pc(), 0x1a04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0285
        gbc.setState(0xb2c9, 0x3a38, 0xd5b0, 0xc895, 0xf6d7, 0xb20, 0x0, 0x1);
        gbc.writeMem(0xb2c9, { 0x18, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x3a38);
        EXPECT(gbc.pc(), 0xb320);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2c9), 0x18);
        EXPECT(gbc.readMem(0xb2ca), 0x55);
        // 18 0286
        gbc.setState(0xdbe3, 0xc6a8, 0x33d0, 0xd210, 0xd0a6, 0xa9d9, 0x0, 0x1);
        gbc.writeMem(0xdbe3, { 0x18, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc6a8);
        EXPECT(gbc.pc(), 0xdc0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbe3), 0x18);
        EXPECT(gbc.readMem(0xdbe4), 0x29);
        // 18 0287
        gbc.setState(0x5806, 0x5c4d, 0xe640, 0x1b58, 0xee55, 0x5b4a, 0x1, 0x1);
        gbc.writeMem(0x5806, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x5c4d);
        EXPECT(gbc.pc(), 0x580c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0288
        gbc.setState(0x903c, 0x50be, 0xdb80, 0xc70a, 0xbfe6, 0x89d8, 0x0, 0x0);
        gbc.writeMem(0x903c, { 0x18, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x50be);
        EXPECT(gbc.pc(), 0x8fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x903c), 0x18);
        EXPECT(gbc.readMem(0x903d), 0x8a);
        // 18 0289
        gbc.setState(0xc2c2, 0x5b6e, 0xf0c0, 0x4a10, 0x95e3, 0x888e, 0x1, 0x0);
        gbc.writeMem(0xc2c2, { 0x18, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5b6e);
        EXPECT(gbc.pc(), 0xc2d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2c2), 0x18);
        EXPECT(gbc.readMem(0xc2c3), 0xd);
        // 18 028A
        gbc.setState(0xbd07, 0xf6cb, 0x5930, 0xf71e, 0xa48f, 0xfe70, 0x1, 0x1);
        gbc.writeMem(0xbd07, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf6cb);
        EXPECT(gbc.pc(), 0xbd68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd07), 0x18);
        EXPECT(gbc.readMem(0xbd08), 0x5f);
        // 18 028B
        gbc.setState(0xba7a, 0x7a36, 0x9590, 0x7e66, 0xb369, 0xff87, 0x0, 0x1);
        gbc.writeMem(0xba7a, { 0x18, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7a36);
        EXPECT(gbc.pc(), 0xba59);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba7a), 0x18);
        EXPECT(gbc.readMem(0xba7b), 0xdd);
        // 18 028C
        gbc.setState(0xa75e, 0x8470, 0xe360, 0x278a, 0x70ce, 0x3844, 0x0, 0x1);
        gbc.writeMem(0xa75e, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x8470);
        EXPECT(gbc.pc(), 0xa70d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa75e), 0x18);
        EXPECT(gbc.readMem(0xa75f), 0xad);
        // 18 028D
        gbc.setState(0xb352, 0xdcab, 0xee50, 0x41f2, 0x216d, 0x952a, 0x1, 0x0);
        gbc.writeMem(0xb352, { 0x18, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xdcab);
        EXPECT(gbc.pc(), 0xb304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb352), 0x18);
        EXPECT(gbc.readMem(0xb353), 0xb0);
        // 18 028E
        gbc.setState(0xa283, 0xa7c7, 0xe260, 0x1793, 0xc0f3, 0x1aa1, 0x0, 0x0);
        gbc.writeMem(0xa283, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xa7c7);
        EXPECT(gbc.pc(), 0xa232);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa283), 0x18);
        EXPECT(gbc.readMem(0xa284), 0xad);
        // 18 028F
        gbc.setState(0x2d67, 0x7a02, 0x9950, 0x9c60, 0x745d, 0xbd5d, 0x0, 0x1);
        gbc.writeMem(0x2d67, { 0x18, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x7a02);
        EXPECT(gbc.pc(), 0x2dcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0290
        gbc.setState(0xa436, 0x3dad, 0xba60, 0xe38f, 0x9c1, 0x17bd, 0x0, 0x0);
        gbc.writeMem(0xa436, { 0x18, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3dad);
        EXPECT(gbc.pc(), 0xa3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa436), 0x18);
        EXPECT(gbc.readMem(0xa437), 0xa2);
        // 18 0291
        gbc.setState(0xce3f, 0x379d, 0x80d0, 0x7f64, 0xdcb2, 0xa945, 0x1, 0x0);
        gbc.writeMem(0xce3f, { 0x18, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x379d);
        EXPECT(gbc.pc(), 0xce37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce3f), 0x18);
        EXPECT(gbc.readMem(0xce40), 0xf6);
        // 18 0292
        gbc.setState(0xa3ab, 0x638f, 0x7d00, 0x8fc2, 0xea5a, 0x3985, 0x1, 0x0);
        gbc.writeMem(0xa3ab, { 0x18, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x638f);
        EXPECT(gbc.pc(), 0xa402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa3ab), 0x18);
        EXPECT(gbc.readMem(0xa3ac), 0x55);
        // 18 0293
        gbc.setState(0xc55d, 0x2cb4, 0x6580, 0xe249, 0xced5, 0x9ca0, 0x1, 0x1);
        gbc.writeMem(0xc55d, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2cb4);
        EXPECT(gbc.pc(), 0xc56e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc55d), 0x18);
        EXPECT(gbc.readMem(0xc55e), 0xf);
        // 18 0295
        gbc.setState(0x7da2, 0x6d9, 0x5b20, 0xa46a, 0x3f18, 0x5daa, 0x1, 0x1);
        gbc.writeMem(0x7da2, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x6d9);
        EXPECT(gbc.pc(), 0x7d4a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0296
        gbc.setState(0xd79f, 0x6fd, 0xde30, 0x4603, 0x5a59, 0x9ea2, 0x0, 0x0);
        gbc.writeMem(0xd79f, { 0x18, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x6fd);
        EXPECT(gbc.pc(), 0xd7f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd79f), 0x18);
        EXPECT(gbc.readMem(0xd7a0), 0x51);
        // 18 0297
        gbc.setState(0xd899, 0x2c37, 0xd20, 0x3b6a, 0x12b6, 0xc315, 0x0, 0x0);
        gbc.writeMem(0xd899, { 0x18, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2c37);
        EXPECT(gbc.pc(), 0xd831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd899), 0x18);
        EXPECT(gbc.readMem(0xd89a), 0x96);
        // 18 0299
        gbc.setState(0xeeb, 0xe536, 0xf860, 0x3d18, 0xf53a, 0x3c88, 0x0, 0x0);
        gbc.writeMem(0xeeb, { 0x18, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe536);
        EXPECT(gbc.pc(), 0xe81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 029A
        gbc.setState(0x7dc4, 0xe278, 0x4350, 0xf43d, 0xf12a, 0xc094, 0x1, 0x0);
        gbc.writeMem(0x7dc4, { 0x18, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xe278);
        EXPECT(gbc.pc(), 0x7d7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 029B
        gbc.setState(0x3c67, 0x6557, 0xce50, 0x2765, 0xc0df, 0xcc3c, 0x0, 0x0);
        gbc.writeMem(0x3c67, { 0x18, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x6557);
        EXPECT(gbc.pc(), 0x3c24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 029C
        gbc.setState(0xba1d, 0x26d5, 0xb270, 0x95c3, 0x9918, 0xe46c, 0x0, 0x0);
        gbc.writeMem(0xba1d, { 0x18, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x26d5);
        EXPECT(gbc.pc(), 0xb9a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba1d), 0x18);
        EXPECT(gbc.readMem(0xba1e), 0x8a);
        // 18 029D
        gbc.setState(0x2d53, 0xa884, 0x89e0, 0xb080, 0x7a9f, 0xc824, 0x1, 0x1);
        gbc.writeMem(0x2d53, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa884);
        EXPECT(gbc.pc(), 0x2d31);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 029E
        gbc.setState(0xa999, 0x4906, 0x9d60, 0x22f, 0x6f54, 0x1c7d, 0x1, 0x0);
        gbc.writeMem(0xa999, { 0x18, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x4906);
        EXPECT(gbc.pc(), 0xa9fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa999), 0x18);
        EXPECT(gbc.readMem(0xa99a), 0x60);
        // 18 029F
        gbc.setState(0x2c26, 0x1c90, 0xb030, 0x4af, 0xa97f, 0xcd32, 0x1, 0x0);
        gbc.writeMem(0x2c26, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x1c90);
        EXPECT(gbc.pc(), 0x2bef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02A0
        gbc.setState(0x3045, 0x47e1, 0x3600, 0x5ee7, 0xa5ca, 0x2c2, 0x1, 0x0);
        gbc.writeMem(0x3045, { 0x18, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x47e1);
        EXPECT(gbc.pc(), 0x306f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02A1
        gbc.setState(0x1b62, 0x8ad0, 0x7360, 0x7d28, 0x7f6f, 0xcd13, 0x1, 0x0);
        gbc.writeMem(0x1b62, { 0x18, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x8ad0);
        EXPECT(gbc.pc(), 0x1b21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02A2
        gbc.setState(0x738, 0x1a14, 0xa640, 0x5145, 0xde96, 0x5a1, 0x1, 0x1);
        gbc.writeMem(0x738, { 0x18, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x1a14);
        EXPECT(gbc.pc(), 0x761);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02A3
        gbc.setState(0xd33f, 0xb868, 0x3b20, 0x9122, 0x6270, 0x402, 0x0, 0x1);
        gbc.writeMem(0xd33f, { 0x18, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xb868);
        EXPECT(gbc.pc(), 0xd35e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd33f), 0x18);
        EXPECT(gbc.readMem(0xd340), 0x1d);
        // 18 02A4
        gbc.setState(0x2705, 0x2d00, 0xd7f0, 0xe53a, 0xad0f, 0xe62e, 0x0, 0x0);
        gbc.writeMem(0x2705, { 0x18, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2d00);
        EXPECT(gbc.pc(), 0x2722);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02A5
        gbc.setState(0xae46, 0x558f, 0xdb0, 0x876e, 0x2d16, 0xd57, 0x0, 0x0);
        gbc.writeMem(0xae46, { 0x18, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x558f);
        EXPECT(gbc.pc(), 0xae2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae46), 0x18);
        EXPECT(gbc.readMem(0xae47), 0xe7);
        // 18 02A6
        gbc.setState(0x61e1, 0x14dd, 0xd540, 0xa5fd, 0x9a61, 0x1d69, 0x0, 0x0);
        gbc.writeMem(0x61e1, { 0x18, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x14dd);
        EXPECT(gbc.pc(), 0x61f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02A7
        gbc.setState(0xa168, 0xb3cd, 0x6cd0, 0x914a, 0xd472, 0x6572, 0x0, 0x1);
        gbc.writeMem(0xa168, { 0x18, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb3cd);
        EXPECT(gbc.pc(), 0xa1bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa168), 0x18);
        EXPECT(gbc.readMem(0xa169), 0x52);
        // 18 02A9
        gbc.setState(0x6bd5, 0x3240, 0x74b0, 0x5416, 0x6418, 0x4d2e, 0x0, 0x0);
        gbc.writeMem(0x6bd5, { 0x18, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x3240);
        EXPECT(gbc.pc(), 0x6bbe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02AA
        gbc.setState(0x418b, 0xc115, 0x1d0, 0x9fa6, 0xeee, 0x762b, 0x1, 0x0);
        gbc.writeMem(0x418b, { 0x18, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xc115);
        EXPECT(gbc.pc(), 0x41d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02AB
        gbc.setState(0x60e5, 0x18d0, 0xa870, 0x3c48, 0x54bc, 0x2268, 0x0, 0x1);
        gbc.writeMem(0x60e5, { 0x18, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x18d0);
        EXPECT(gbc.pc(), 0x6151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02AC
        gbc.setState(0x7278, 0x4492, 0x6330, 0x3242, 0x39eb, 0x571d, 0x1, 0x0);
        gbc.writeMem(0x7278, { 0x18, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x4492);
        EXPECT(gbc.pc(), 0x72c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02AD
        gbc.setState(0x9ca3, 0x6871, 0x6000, 0xb81f, 0x5ced, 0x83a1, 0x0, 0x0);
        gbc.writeMem(0x9ca3, { 0x18, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6871);
        EXPECT(gbc.pc(), 0x9cf9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ca3), 0x18);
        EXPECT(gbc.readMem(0x9ca4), 0x54);
        // 18 02AE
        gbc.setState(0xc12d, 0xa79a, 0xac90, 0x4100, 0x1593, 0x901f, 0x1, 0x1);
        gbc.writeMem(0xc12d, { 0x18, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xa79a);
        EXPECT(gbc.pc(), 0xc0d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc12d), 0x18);
        EXPECT(gbc.readMem(0xc12e), 0xa8);
        // 18 02AF
        gbc.setState(0xb1dd, 0x8e3a, 0x94f0, 0x15c8, 0xb4cf, 0x9ef7, 0x0, 0x1);
        gbc.writeMem(0xb1dd, { 0x18, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x8e3a);
        EXPECT(gbc.pc(), 0xb164);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb1dd), 0x18);
        EXPECT(gbc.readMem(0xb1de), 0x85);
        // 18 02B0
        gbc.setState(0x958d, 0x2281, 0x22d0, 0xfb3, 0x886c, 0x5d8, 0x1, 0x1);
        gbc.writeMem(0x958d, { 0x18, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x2281);
        EXPECT(gbc.pc(), 0x957c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x958d), 0x18);
        EXPECT(gbc.readMem(0x958e), 0xed);
        // 18 02B1
        gbc.setState(0xd0b8, 0xa1a3, 0xd0a0, 0x3e78, 0xd0ff, 0x182a, 0x1, 0x0);
        gbc.writeMem(0xd0b8, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa1a3);
        EXPECT(gbc.pc(), 0xd060);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0b8), 0x18);
        EXPECT(gbc.readMem(0xd0b9), 0xa6);
        // 18 02B2
        gbc.setState(0x5875, 0xb0c2, 0xfd0, 0xf387, 0x18cf, 0x462a, 0x0, 0x0);
        gbc.writeMem(0x5875, { 0x18, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xb0c2);
        EXPECT(gbc.pc(), 0x5835);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02B3
        gbc.setState(0xefe7, 0xaff8, 0x20c0, 0x7839, 0x9ac6, 0xca41, 0x0, 0x1);
        gbc.writeMem(0xefe7, { 0x18, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xaff8);
        EXPECT(gbc.pc(), 0xf014);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefe7), 0x18);
        EXPECT(gbc.readMem(0xefe8), 0x2b);
        // 18 02B4
        gbc.setState(0xa4b9, 0xd2a6, 0xdc20, 0x1c5e, 0x2974, 0x4bc0, 0x1, 0x0);
        gbc.writeMem(0xa4b9, { 0x18, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd2a6);
        EXPECT(gbc.pc(), 0xa52e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa4b9), 0x18);
        EXPECT(gbc.readMem(0xa4ba), 0x73);
        // 18 02B5
        gbc.setState(0x5763, 0x2ba9, 0xc5a0, 0xdd4, 0x60e7, 0xa06c, 0x1, 0x0);
        gbc.writeMem(0x5763, { 0x18, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x2ba9);
        EXPECT(gbc.pc(), 0x56e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02B6
        gbc.setState(0x5f1b, 0x6a2, 0x6dd0, 0x51fd, 0xe6b9, 0xe746, 0x1, 0x1);
        gbc.writeMem(0x5f1b, { 0x18, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x6a2);
        EXPECT(gbc.pc(), 0x5f28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02B7
        gbc.setState(0x12d, 0x2bd2, 0x89c0, 0xec31, 0x9813, 0x86a8, 0x1, 0x0);
        gbc.writeMem(0x12d, { 0x18, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x2bd2);
        EXPECT(gbc.pc(), 0x11e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02B8
        gbc.setState(0x3864, 0xfaa, 0x2160, 0xaaa0, 0x9ce5, 0xc0f6, 0x1, 0x0);
        gbc.writeMem(0x3864, { 0x18, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xfaa);
        EXPECT(gbc.pc(), 0x38c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02B9
        gbc.setState(0x203, 0x8fb5, 0xfbf0, 0xa988, 0xda30, 0x134e, 0x0, 0x0);
        gbc.writeMem(0x203, { 0x18, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x8fb5);
        EXPECT(gbc.pc(), 0x1b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02BA
        gbc.setState(0x8ee5, 0xe420, 0x590, 0xd70c, 0xb674, 0x82d7, 0x0, 0x1);
        gbc.writeMem(0x8ee5, { 0x18, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xe420);
        EXPECT(gbc.pc(), 0x8f63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ee5), 0x18);
        EXPECT(gbc.readMem(0x8ee6), 0x7c);
        // 18 02BB
        gbc.setState(0x67f9, 0xab8d, 0x4800, 0x4c63, 0x51bb, 0xbdd8, 0x1, 0x0);
        gbc.writeMem(0x67f9, { 0x18, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xab8d);
        EXPECT(gbc.pc(), 0x686c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02BC
        gbc.setState(0x1a0b, 0x3c93, 0x40d0, 0xd71e, 0x160d, 0x8d3a, 0x0, 0x1);
        gbc.writeMem(0x1a0b, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x3c93);
        EXPECT(gbc.pc(), 0x19de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02BD
        gbc.setState(0x776a, 0xeabe, 0x30d0, 0xb47c, 0xc51, 0x3bf8, 0x1, 0x0);
        gbc.writeMem(0x776a, { 0x18, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xeabe);
        EXPECT(gbc.pc(), 0x7783);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02BE
        gbc.setState(0x6e76, 0xeaf6, 0xa0c0, 0x5431, 0xe826, 0xbe7d, 0x1, 0x0);
        gbc.writeMem(0x6e76, { 0x18, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xeaf6);
        EXPECT(gbc.pc(), 0x6e35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02BF
        gbc.setState(0xcd3, 0x47cb, 0x8330, 0xf57c, 0x4a56, 0x90d9, 0x0, 0x1);
        gbc.writeMem(0xcd3, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x47cb);
        EXPECT(gbc.pc(), 0xcc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02C0
        gbc.setState(0xa2f1, 0xa753, 0x3620, 0xffe4, 0xc10c, 0x1cbb, 0x0, 0x0);
        gbc.writeMem(0xa2f1, { 0x18, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xa753);
        EXPECT(gbc.pc(), 0xa335);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa2f1), 0x18);
        EXPECT(gbc.readMem(0xa2f2), 0x42);
        // 18 02C1
        gbc.setState(0x797b, 0x5bf6, 0x7a60, 0xa1b3, 0x4d90, 0x1817, 0x0, 0x0);
        gbc.writeMem(0x797b, { 0x18, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x5bf6);
        EXPECT(gbc.pc(), 0x798f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02C2
        gbc.setState(0x9d73, 0xd19b, 0x4b80, 0x87fc, 0xb631, 0x12e9, 0x0, 0x1);
        gbc.writeMem(0x9d73, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xd19b);
        EXPECT(gbc.pc(), 0x9d5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d73), 0x18);
        EXPECT(gbc.readMem(0x9d74), 0xe5);
        // 18 02C3
        gbc.setState(0x7656, 0x848, 0x7370, 0x8373, 0x175a, 0x707, 0x0, 0x0);
        gbc.writeMem(0x7656, { 0x18, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x848);
        EXPECT(gbc.pc(), 0x765b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02C4
        gbc.setState(0x43d, 0x14a6, 0x7720, 0x14fd, 0x7568, 0x708d, 0x1, 0x1);
        gbc.writeMem(0x43d, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x14a6);
        EXPECT(gbc.pc(), 0x3c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02C5
        gbc.setState(0x42d1, 0x25d1, 0x58b0, 0x754, 0x1b1, 0x1167, 0x0, 0x1);
        gbc.writeMem(0x42d1, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x25d1);
        EXPECT(gbc.pc(), 0x42a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02C6
        gbc.setState(0x3e0a, 0x289c, 0x25f0, 0xf808, 0xe77a, 0x5e61, 0x0, 0x1);
        gbc.writeMem(0x3e0a, { 0x18, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x289c);
        EXPECT(gbc.pc(), 0x3e66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02C7
        gbc.setState(0xa905, 0x69f5, 0xd5b0, 0x934, 0xbb35, 0x6450, 0x1, 0x1);
        gbc.writeMem(0xa905, { 0x18, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x69f5);
        EXPECT(gbc.pc(), 0xa979);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa905), 0x18);
        EXPECT(gbc.readMem(0xa906), 0x72);
        // 18 02C9
        gbc.setState(0xa908, 0x9a0c, 0xf100, 0xf9a7, 0xc5f, 0x5c04, 0x1, 0x0);
        gbc.writeMem(0xa908, { 0x18, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x9a0c);
        EXPECT(gbc.pc(), 0xa937);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa908), 0x18);
        EXPECT(gbc.readMem(0xa909), 0x2d);
        // 18 02CA
        gbc.setState(0xecba, 0xac04, 0x1bd0, 0x828, 0x465d, 0xce78, 0x1, 0x1);
        gbc.writeMem(0xecba, { 0x18, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xac04);
        EXPECT(gbc.pc(), 0xed16);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecba), 0x18);
        EXPECT(gbc.readMem(0xecbb), 0x5a);
        // 18 02CB
        gbc.setState(0x1bb5, 0x1f6b, 0xbac0, 0x81dc, 0xa1dd, 0xddc4, 0x0, 0x1);
        gbc.writeMem(0x1bb5, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x1f6b);
        EXPECT(gbc.pc(), 0x1bdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02CC
        gbc.setState(0xc5db, 0xd228, 0xb0, 0xf39a, 0xf95c, 0x1d00, 0x0, 0x1);
        gbc.writeMem(0xc5db, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xd228);
        EXPECT(gbc.pc(), 0xc5d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5db), 0x18);
        EXPECT(gbc.readMem(0xc5dc), 0xf4);
        // 18 02CD
        gbc.setState(0x766d, 0x2cd4, 0x130, 0x2c83, 0x6ad, 0x6b1a, 0x1, 0x0);
        gbc.writeMem(0x766d, { 0x18, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2cd4);
        EXPECT(gbc.pc(), 0x7624);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02CE
        gbc.setState(0x28ee, 0x8029, 0x7570, 0x7f87, 0xbe1, 0x42ea, 0x1, 0x1);
        gbc.writeMem(0x28ee, { 0x18, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x8029);
        EXPECT(gbc.pc(), 0x28b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02CF
        gbc.setState(0xbedc, 0x9bd4, 0xfe00, 0xd8cf, 0x9eee, 0x72dc, 0x0, 0x0);
        gbc.writeMem(0xbedc, { 0x18, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x9bd4);
        EXPECT(gbc.pc(), 0xbf42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbedc), 0x18);
        EXPECT(gbc.readMem(0xbedd), 0x64);
        // 18 02D0
        gbc.setState(0x28b2, 0xfc56, 0x9510, 0x9e96, 0xa6e9, 0x2904, 0x1, 0x1);
        gbc.writeMem(0x28b2, { 0x18, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xfc56);
        EXPECT(gbc.pc(), 0x2909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02D1
        gbc.setState(0xb6b3, 0x9956, 0x6e00, 0x5d3d, 0xa1f3, 0xa61e, 0x1, 0x0);
        gbc.writeMem(0xb6b3, { 0x18, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9956);
        EXPECT(gbc.pc(), 0xb6ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b3), 0x18);
        EXPECT(gbc.readMem(0xb6b4), 0x15);
        // 18 02D2
        gbc.setState(0x3c2a, 0x863e, 0x7270, 0x3c2a, 0xbc55, 0xa52e, 0x1, 0x0);
        gbc.writeMem(0x3c2a, { 0x18, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x863e);
        EXPECT(gbc.pc(), 0x3c1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02D4
        gbc.setState(0x29f2, 0x569b, 0xd110, 0xc8bf, 0x631, 0xb1aa, 0x1, 0x0);
        gbc.writeMem(0x29f2, { 0x18, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x569b);
        EXPECT(gbc.pc(), 0x2a5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02D5
        gbc.setState(0x815d, 0x804c, 0x6080, 0xdaad, 0x6b13, 0xafc2, 0x0, 0x0);
        gbc.writeMem(0x815d, { 0x18, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x804c);
        EXPECT(gbc.pc(), 0x81b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x815d), 0x18);
        EXPECT(gbc.readMem(0x815e), 0x57);
        // 18 02D6
        gbc.setState(0x43f2, 0xa3cf, 0xf560, 0xdc6d, 0xda39, 0xf910, 0x0, 0x0);
        gbc.writeMem(0x43f2, { 0x18, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xa3cf);
        EXPECT(gbc.pc(), 0x43e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02D7
        gbc.setState(0x3213, 0xac73, 0xd720, 0x76c2, 0xfbe8, 0x7f93, 0x0, 0x1);
        gbc.writeMem(0x3213, { 0x18, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xac73);
        EXPECT(gbc.pc(), 0x3290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02D8
        gbc.setState(0x514, 0x43cd, 0x9820, 0xb512, 0x2f2b, 0x7262, 0x0, 0x0);
        gbc.writeMem(0x514, { 0x18, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x43cd);
        EXPECT(gbc.pc(), 0x4f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02D9
        gbc.setState(0x4db9, 0x430d, 0x6300, 0x8629, 0x4d73, 0x4ac1, 0x1, 0x1);
        gbc.writeMem(0x4db9, { 0x18, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x430d);
        EXPECT(gbc.pc(), 0x4dd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02DA
        gbc.setState(0x732a, 0xb28c, 0x2980, 0x6db4, 0x9f0b, 0x89b3, 0x1, 0x1);
        gbc.writeMem(0x732a, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xb28c);
        EXPECT(gbc.pc(), 0x7330);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02DB
        gbc.setState(0x20fd, 0x2c22, 0x3ce0, 0xc71f, 0xcd70, 0x359a, 0x1, 0x0);
        gbc.writeMem(0x20fd, { 0x18, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x2c22);
        EXPECT(gbc.pc(), 0x2098);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02DC
        gbc.setState(0x1cbb, 0xff7c, 0x3350, 0x5c0b, 0x7e12, 0xa424, 0x0, 0x1);
        gbc.writeMem(0x1cbb, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xff7c);
        EXPECT(gbc.pc(), 0x1c82);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02DD
        gbc.setState(0xa7c, 0x33ca, 0x2cd0, 0x9dd, 0x5a4e, 0x27fa, 0x0, 0x1);
        gbc.writeMem(0xa7c, { 0x18, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x33ca);
        EXPECT(gbc.pc(), 0xa1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02DE
        gbc.setState(0x5a3c, 0xcea9, 0xa630, 0xc048, 0xbcbe, 0x221d, 0x0, 0x1);
        gbc.writeMem(0x5a3c, { 0x18, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xcea9);
        EXPECT(gbc.pc(), 0x5a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02DF
        gbc.setState(0x32dd, 0x763f, 0x4220, 0x5aaa, 0x4738, 0x2b27, 0x0, 0x1);
        gbc.writeMem(0x32dd, { 0x18, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x763f);
        EXPECT(gbc.pc(), 0x332e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02E0
        gbc.setState(0x875e, 0x8b3e, 0x62f0, 0xdcc8, 0xf55f, 0x67d2, 0x1, 0x1);
        gbc.writeMem(0x875e, { 0x18, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8b3e);
        EXPECT(gbc.pc(), 0x8723);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x875e), 0x18);
        EXPECT(gbc.readMem(0x875f), 0xc3);
        // 18 02E1
        gbc.setState(0xa092, 0xaeaf, 0x74b0, 0x1f2c, 0x787c, 0xf87d, 0x0, 0x1);
        gbc.writeMem(0xa092, { 0x18, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xaeaf);
        EXPECT(gbc.pc(), 0xa095);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa092), 0x18);
        EXPECT(gbc.readMem(0xa093), 0x1);
        // 18 02E2
        gbc.setState(0xa82a, 0xe6be, 0x3b20, 0xd771, 0xc04, 0xa992, 0x1, 0x0);
        gbc.writeMem(0xa82a, { 0x18, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe6be);
        EXPECT(gbc.pc(), 0xa7f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82a), 0x18);
        EXPECT(gbc.readMem(0xa82b), 0xc8);
        // 18 02E3
        gbc.setState(0x85ec, 0x5252, 0xe10, 0x738e, 0x723d, 0x9109, 0x1, 0x1);
        gbc.writeMem(0x85ec, { 0x18, 0x4d });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x5252);
        EXPECT(gbc.pc(), 0x863b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85ec), 0x18);
        EXPECT(gbc.readMem(0x85ed), 0x4d);
        // 18 02E4
        gbc.setState(0x614b, 0xc573, 0x72a0, 0x7d84, 0xfb34, 0xa96d, 0x0, 0x1);
        gbc.writeMem(0x614b, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xc573);
        EXPECT(gbc.pc(), 0x6173);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02E5
        gbc.setState(0xca7, 0x94e4, 0x9e0, 0x8bfa, 0xd57d, 0x7e2c, 0x1, 0x0);
        gbc.writeMem(0xca7, { 0x18, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x94e4);
        EXPECT(gbc.pc(), 0xcd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02E6
        gbc.setState(0xde6c, 0xa36e, 0xebd0, 0x7b8b, 0xff8c, 0x74b1, 0x1, 0x1);
        gbc.writeMem(0xde6c, { 0x18, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xa36e);
        EXPECT(gbc.pc(), 0xde49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6c), 0x18);
        EXPECT(gbc.readMem(0xde6d), 0xdb);
        // 18 02E7
        gbc.setState(0x51f1, 0xd77d, 0x1df0, 0xec5a, 0x32, 0x16c0, 0x1, 0x0);
        gbc.writeMem(0x51f1, { 0x18, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xd77d);
        EXPECT(gbc.pc(), 0x517a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02E8
        gbc.setState(0xbe5c, 0x17a4, 0xabc0, 0xf50f, 0x2343, 0x1640, 0x1, 0x0);
        gbc.writeMem(0xbe5c, { 0x18, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x17a4);
        EXPECT(gbc.pc(), 0xbdf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5c), 0x18);
        EXPECT(gbc.readMem(0xbe5d), 0x94);
        // 18 02E9
        gbc.setState(0x533, 0x6854, 0x2240, 0x4cd9, 0xdf18, 0x2898, 0x0, 0x0);
        gbc.writeMem(0x533, { 0x18, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6854);
        EXPECT(gbc.pc(), 0x5a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02EA
        gbc.setState(0xb4f, 0xbc70, 0x9d70, 0x7c28, 0x1126, 0x23ce, 0x0, 0x0);
        gbc.writeMem(0xb4f, { 0x18, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xbc70);
        EXPECT(gbc.pc(), 0xb19);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 02EB
        gbc.setState(0xca4e, 0x3486, 0x4510, 0x2252, 0xecdf, 0x1325, 0x0, 0x1);
        gbc.writeMem(0xca4e, { 0x18, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3486);
        EXPECT(gbc.pc(), 0xca16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca4e), 0x18);
        EXPECT(gbc.readMem(0xca4f), 0xc6);
        // 18 02EC
        gbc.setState(0x8410, 0xd56b, 0x6f90, 0x6090, 0x32b6, 0x3ba, 0x1, 0x1);
        gbc.writeMem(0x8410, { 0x18, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd56b);
        EXPECT(gbc.pc(), 0x8459);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8410), 0x18);
        EXPECT(gbc.readMem(0x8411), 0x47);
        // 18 02ED
        gbc.setState(0x306e, 0x4272, 0x8c90, 0x893, 0xfd7f, 0x58be, 0x0, 0x0);
        gbc.writeMem(0x306e, { 0x18, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4272);
        EXPECT(gbc.pc(), 0x3086);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02EE
        gbc.setState(0xac78, 0x2848, 0xea70, 0x9b2b, 0x9a11, 0x19ba, 0x1, 0x1);
        gbc.writeMem(0xac78, { 0x18, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2848);
        EXPECT(gbc.pc(), 0xace2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac78), 0x18);
        EXPECT(gbc.readMem(0xac79), 0x68);
        // 18 02EF
        gbc.setState(0x5b6, 0x97d6, 0x22d0, 0xc43e, 0x9715, 0x98ad, 0x1, 0x1);
        gbc.writeMem(0x5b6, { 0x18, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x97d6);
        EXPECT(gbc.pc(), 0x5bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02F0
        gbc.setState(0x19ee, 0x21, 0xd5c0, 0x9f2f, 0x7c5, 0xae31, 0x0, 0x1);
        gbc.writeMem(0x19ee, { 0x18, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x21);
        EXPECT(gbc.pc(), 0x1a52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02F1
        gbc.setState(0xce0e, 0x2174, 0x5980, 0xc804, 0x79d8, 0x99bc, 0x0, 0x0);
        gbc.writeMem(0xce0e, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2174);
        EXPECT(gbc.pc(), 0xcdd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce0e), 0x18);
        EXPECT(gbc.readMem(0xce0f), 0xc7);
        // 18 02F2
        gbc.setState(0xbda, 0x5ed6, 0xd90, 0x764, 0x132f, 0x78fd, 0x1, 0x0);
        gbc.writeMem(0xbda, { 0x18, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x5ed6);
        EXPECT(gbc.pc(), 0xb87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 02F3
        gbc.setState(0xd424, 0xd965, 0xef90, 0x5b59, 0x3682, 0x599a, 0x0, 0x1);
        gbc.writeMem(0xd424, { 0x18, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xd965);
        EXPECT(gbc.pc(), 0xd3ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd424), 0x18);
        EXPECT(gbc.readMem(0xd425), 0x87);
        // 18 02F4
        gbc.setState(0x952c, 0x588b, 0x7210, 0xf4e8, 0x71, 0xf81, 0x1, 0x0);
        gbc.writeMem(0x952c, { 0x18, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x588b);
        EXPECT(gbc.pc(), 0x9598);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x952c), 0x18);
        EXPECT(gbc.readMem(0x952d), 0x6a);
        // 18 02F5
        gbc.setState(0x245b, 0xa37f, 0xc2a0, 0xd756, 0xf5a4, 0x9b62, 0x1, 0x1);
        gbc.writeMem(0x245b, { 0x18, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0xa37f);
        EXPECT(gbc.pc(), 0x2411);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02F6
        gbc.setState(0xc2ac, 0xb70c, 0xd900, 0x127c, 0x45d1, 0x4dfd, 0x0, 0x0);
        gbc.writeMem(0xc2ac, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xb70c);
        EXPECT(gbc.pc(), 0xc2e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc2ac), 0x18);
        EXPECT(gbc.readMem(0xc2ad), 0x3b);
        // 18 02F7
        gbc.setState(0xbd8, 0x5114, 0xad40, 0x95b5, 0x453b, 0x662c, 0x0, 0x1);
        gbc.writeMem(0xbd8, { 0x18, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x5114);
        EXPECT(gbc.pc(), 0xbcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 02F8
        gbc.setState(0x4b9f, 0x1ab6, 0xbd20, 0x5cc5, 0x82, 0x8bc5, 0x1, 0x1);
        gbc.writeMem(0x4b9f, { 0x18, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x1ab6);
        EXPECT(gbc.pc(), 0x4b2e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02F9
        gbc.setState(0x8592, 0x6e5e, 0xa040, 0xa16e, 0x9ac4, 0x4fbd, 0x1, 0x0);
        gbc.writeMem(0x8592, { 0x18, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6e5e);
        EXPECT(gbc.pc(), 0x85ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8592), 0x18);
        EXPECT(gbc.readMem(0x8593), 0x58);
        // 18 02FA
        gbc.setState(0x8580, 0xdcb6, 0x3300, 0xaba8, 0x7d4d, 0xd5a5, 0x0, 0x0);
        gbc.writeMem(0x8580, { 0x18, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xdcb6);
        EXPECT(gbc.pc(), 0x8568);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8580), 0x18);
        EXPECT(gbc.readMem(0x8581), 0xe6);
        // 18 02FB
        gbc.setState(0xa62c, 0x90c4, 0x3240, 0xba66, 0xc2d0, 0x383f, 0x1, 0x1);
        gbc.writeMem(0xa62c, { 0x18, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x90c4);
        EXPECT(gbc.pc(), 0xa676);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa62c), 0x18);
        EXPECT(gbc.readMem(0xa62d), 0x48);
        // 18 02FC
        gbc.setState(0x722a, 0xf545, 0x2160, 0x64cb, 0x9675, 0x9a5, 0x0, 0x1);
        gbc.writeMem(0x722a, { 0x18, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0xf545);
        EXPECT(gbc.pc(), 0x71c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 02FD
        gbc.setState(0xe3d5, 0x699f, 0x7ca0, 0xc95c, 0xfe26, 0x1bf0, 0x1, 0x1);
        gbc.writeMem(0xe3d5, { 0x18, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x699f);
        EXPECT(gbc.pc(), 0xe38b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3d5), 0x18);
        EXPECT(gbc.readMem(0xe3d6), 0xb4);
        // 18 02FE
        gbc.setState(0xaad3, 0x1cf8, 0x7b00, 0xc70f, 0x275e, 0x65f6, 0x0, 0x1);
        gbc.writeMem(0xaad3, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x1cf8);
        EXPECT(gbc.pc(), 0xaad2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad3), 0x18);
        EXPECT(gbc.readMem(0xaad4), 0xfd);
        // 18 02FF
        gbc.setState(0xae84, 0xf04, 0x8e20, 0xc63d, 0x51ce, 0x8355, 0x1, 0x1);
        gbc.writeMem(0xae84, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf04);
        EXPECT(gbc.pc(), 0xae0c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae84), 0x18);
        EXPECT(gbc.readMem(0xae85), 0x86);
        // 18 0300
        gbc.setState(0x2093, 0xdf07, 0x9550, 0x1f00, 0xbe00, 0xd615, 0x0, 0x1);
        gbc.writeMem(0x2093, { 0x18, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xdf07);
        EXPECT(gbc.pc(), 0x20d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0301
        gbc.setState(0x7448, 0x24c1, 0xde60, 0xa0a8, 0xfe39, 0xd7e, 0x1, 0x0);
        gbc.writeMem(0x7448, { 0x18, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x24c1);
        EXPECT(gbc.pc(), 0x7471);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0302
        gbc.setState(0x2fb, 0x56dc, 0xb840, 0x6b32, 0x1e5e, 0xcb47, 0x0, 0x1);
        gbc.writeMem(0x2fb, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x56dc);
        EXPECT(gbc.pc(), 0x310);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0303
        gbc.setState(0x4a4c, 0xa391, 0xa690, 0xe3e7, 0xb0a, 0x51e5, 0x0, 0x0);
        gbc.writeMem(0x4a4c, { 0x18, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xa391);
        EXPECT(gbc.pc(), 0x4aba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0304
        gbc.setState(0x1f93, 0x400, 0x3260, 0xc241, 0xcc94, 0x3790, 0x1, 0x0);
        gbc.writeMem(0x1f93, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x400);
        EXPECT(gbc.pc(), 0x200d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0305
        gbc.setState(0x371e, 0x4ba2, 0xdc80, 0x996f, 0x77c1, 0x2599, 0x0, 0x0);
        gbc.writeMem(0x371e, { 0x18, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x4ba2);
        EXPECT(gbc.pc(), 0x3705);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0306
        gbc.setState(0x67c7, 0xd6b9, 0xd370, 0xca20, 0x7bca, 0xc281, 0x0, 0x1);
        gbc.writeMem(0x67c7, { 0x18, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xd6b9);
        EXPECT(gbc.pc(), 0x67e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0307
        gbc.setState(0x5302, 0x167a, 0x4ac0, 0x575c, 0x51f5, 0x48b0, 0x1, 0x1);
        gbc.writeMem(0x5302, { 0x18, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x167a);
        EXPECT(gbc.pc(), 0x52bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0308
        gbc.setState(0x20a5, 0x61cd, 0x4690, 0x59a9, 0xd1c3, 0x7b5b, 0x1, 0x1);
        gbc.writeMem(0x20a5, { 0x18, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x61cd);
        EXPECT(gbc.pc(), 0x2041);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0309
        gbc.setState(0x350a, 0x6bb0, 0xe740, 0xdc2e, 0xd799, 0xf8ea, 0x0, 0x1);
        gbc.writeMem(0x350a, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x6bb0);
        EXPECT(gbc.pc(), 0x3500);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 030A
        gbc.setState(0x1dea, 0x983b, 0xb7b0, 0xec13, 0x56fb, 0xfdbc, 0x0, 0x1);
        gbc.writeMem(0x1dea, { 0x18, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x983b);
        EXPECT(gbc.pc(), 0x1dd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 030B
        gbc.setState(0x204b, 0x9062, 0x5cc0, 0xcfa8, 0xeaf1, 0x38d2, 0x1, 0x0);
        gbc.writeMem(0x204b, { 0x18, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x9062);
        EXPECT(gbc.pc(), 0x2005);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 030C
        gbc.setState(0x29de, 0xb49b, 0xc110, 0x7310, 0xead0, 0x5c7d, 0x1, 0x0);
        gbc.writeMem(0x29de, { 0x18, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xb49b);
        EXPECT(gbc.pc(), 0x29f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 030D
        gbc.setState(0xba31, 0x67f, 0xd2a0, 0x8591, 0x4aa8, 0x3bdd, 0x0, 0x0);
        gbc.writeMem(0xba31, { 0x18, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x67f);
        EXPECT(gbc.pc(), 0xba49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba31), 0x18);
        EXPECT(gbc.readMem(0xba32), 0x16);
        // 18 030E
        gbc.setState(0x790f, 0xbacf, 0x5e10, 0x4f5d, 0xe3dc, 0xd658, 0x1, 0x0);
        gbc.writeMem(0x790f, { 0x18, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xbacf);
        EXPECT(gbc.pc(), 0x7926);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 030F
        gbc.setState(0x80c9, 0xeb77, 0x62d0, 0xa6bd, 0xed11, 0xb358, 0x0, 0x1);
        gbc.writeMem(0x80c9, { 0x18, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xeb77);
        EXPECT(gbc.pc(), 0x80a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80c9), 0x18);
        EXPECT(gbc.readMem(0x80ca), 0xd9);
        // 18 0310
        gbc.setState(0xe402, 0x1bda, 0xca50, 0xd32e, 0x2a4f, 0x1d14, 0x1, 0x0);
        gbc.writeMem(0xe402, { 0x18, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x1bda);
        EXPECT(gbc.pc(), 0xe3da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe402), 0x18);
        EXPECT(gbc.readMem(0xe403), 0xd6);
        // 18 0311
        gbc.setState(0x3bc3, 0x11cc, 0x9830, 0xa1e6, 0x7790, 0x1e4b, 0x1, 0x0);
        gbc.writeMem(0x3bc3, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x77);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x11cc);
        EXPECT(gbc.pc(), 0x3bea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0312
        gbc.setState(0x6286, 0x32c5, 0xdeb0, 0x9af5, 0x2960, 0xc0ea, 0x1, 0x1);
        gbc.writeMem(0x6286, { 0x18, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x32c5);
        EXPECT(gbc.pc(), 0x62de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0313
        gbc.setState(0x7fb0, 0x914c, 0x5090, 0x2e6a, 0xf08d, 0xf17e, 0x1, 0x0);
        gbc.writeMem(0x7fb0, { 0x18, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x914c);
        EXPECT(gbc.pc(), 0x8012);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0314
        gbc.setState(0x9c00, 0x4e21, 0x6b80, 0xd5fb, 0xbcb9, 0xa158, 0x0, 0x0);
        gbc.writeMem(0x9c00, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4e21);
        EXPECT(gbc.pc(), 0x9bfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c00), 0x18);
        EXPECT(gbc.readMem(0x9c01), 0xfa);
        // 18 0315
        gbc.setState(0x456a, 0x6d4, 0xf320, 0x565b, 0x376b, 0x76ae, 0x1, 0x1);
        gbc.writeMem(0x456a, { 0x18, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x6d4);
        EXPECT(gbc.pc(), 0x450d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0317
        gbc.setState(0x4c61, 0x902e, 0xcee0, 0x806e, 0xeaa7, 0x7ea8, 0x1, 0x1);
        gbc.writeMem(0x4c61, { 0x18, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x902e);
        EXPECT(gbc.pc(), 0x4c7b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0318
        gbc.setState(0xa1d6, 0x3c78, 0xa070, 0x4eb4, 0xc976, 0x1c1f, 0x1, 0x0);
        gbc.writeMem(0xa1d6, { 0x18, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x3c78);
        EXPECT(gbc.pc(), 0xa1aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa1d6), 0x18);
        EXPECT(gbc.readMem(0xa1d7), 0xd2);
        // 18 0319
        gbc.setState(0x1ffd, 0x6358, 0x3370, 0xa2c2, 0x94ae, 0x9cff, 0x1, 0x0);
        gbc.writeMem(0x1ffd, { 0x18, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x6358);
        EXPECT(gbc.pc(), 0x1fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 031A
        gbc.setState(0x35ec, 0xc629, 0xa620, 0x5f64, 0xa82e, 0x7021, 0x1, 0x1);
        gbc.writeMem(0x35ec, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc629);
        EXPECT(gbc.pc(), 0x3583);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 031B
        gbc.setState(0x10a3, 0x46dc, 0xc590, 0x800e, 0xea5e, 0xd666, 0x1, 0x0);
        gbc.writeMem(0x10a3, { 0x18, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x46dc);
        EXPECT(gbc.pc(), 0x1124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 031C
        gbc.setState(0x2e3d, 0x139e, 0x9520, 0xd7f, 0x55bb, 0x7974, 0x0, 0x1);
        gbc.writeMem(0x2e3d, { 0x18, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x139e);
        EXPECT(gbc.pc(), 0x2de4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 031D
        gbc.setState(0xdf5e, 0x3bc1, 0x4590, 0x2978, 0x693, 0x776f, 0x1, 0x1);
        gbc.writeMem(0xdf5e, { 0x18, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x3bc1);
        EXPECT(gbc.pc(), 0xdf98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf5e), 0x18);
        EXPECT(gbc.readMem(0xdf5f), 0x38);
        // 18 031E
        gbc.setState(0xc298, 0x5597, 0x4600, 0x42b1, 0x46c8, 0x4dd3, 0x0, 0x1);
        gbc.writeMem(0xc298, { 0x18, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x5597);
        EXPECT(gbc.pc(), 0xc2bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc298), 0x18);
        EXPECT(gbc.readMem(0xc299), 0x23);
        // 18 031F
        gbc.setState(0xc69c, 0x760c, 0xef50, 0x4b6b, 0x7abc, 0x6fba, 0x0, 0x0);
        gbc.writeMem(0xc69c, { 0x18, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x760c);
        EXPECT(gbc.pc(), 0xc623);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc69c), 0x18);
        EXPECT(gbc.readMem(0xc69d), 0x85);
        // 18 0320
        gbc.setState(0x52f3, 0x6d25, 0x62d0, 0x9ca2, 0xe5f2, 0x4ca5, 0x1, 0x0);
        gbc.writeMem(0x52f3, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6d25);
        EXPECT(gbc.pc(), 0x527d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0321
        gbc.setState(0xa052, 0xb829, 0xa0b0, 0xe1ef, 0x5e3f, 0x8c1a, 0x0, 0x1);
        gbc.writeMem(0xa052, { 0x18, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xb829);
        EXPECT(gbc.pc(), 0xa089);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa052), 0x18);
        EXPECT(gbc.readMem(0xa053), 0x35);
        // 18 0322
        gbc.setState(0xc3ca, 0xa2bd, 0x4240, 0xa380, 0x8bc3, 0xfe4f, 0x0, 0x1);
        gbc.writeMem(0xc3ca, { 0x18, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa2bd);
        EXPECT(gbc.pc(), 0xc3f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3ca), 0x18);
        EXPECT(gbc.readMem(0xc3cb), 0x29);
        // 18 0323
        gbc.setState(0xbfc, 0xda1c, 0x2720, 0xa3ff, 0x465d, 0x3eee, 0x1, 0x1);
        gbc.writeMem(0xbfc, { 0x18, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xda1c);
        EXPECT(gbc.pc(), 0xbd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0324
        gbc.setState(0x9d2c, 0x492e, 0x21e0, 0xa5d1, 0x51b6, 0xa26, 0x1, 0x0);
        gbc.writeMem(0x9d2c, { 0x18, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x492e);
        EXPECT(gbc.pc(), 0x9d22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d2c), 0x18);
        EXPECT(gbc.readMem(0x9d2d), 0xf4);
        // 18 0325
        gbc.setState(0x4bd5, 0xb5ef, 0xffa0, 0x3d5b, 0xc2ae, 0x77bb, 0x0, 0x0);
        gbc.writeMem(0x4bd5, { 0x18, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0xb5ef);
        EXPECT(gbc.pc(), 0x4c02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0326
        gbc.setState(0x36e3, 0xb282, 0x7970, 0x4445, 0xc4fa, 0xaa8b, 0x1, 0x1);
        gbc.writeMem(0x36e3, { 0x18, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb282);
        EXPECT(gbc.pc(), 0x3702);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0327
        gbc.setState(0xdc95, 0x78b9, 0xc640, 0x60f, 0xc62e, 0x5b6a, 0x0, 0x0);
        gbc.writeMem(0xdc95, { 0x18, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x78b9);
        EXPECT(gbc.pc(), 0xdc4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc95), 0x18);
        EXPECT(gbc.readMem(0xdc96), 0xb3);
        // 18 0328
        gbc.setState(0xdc0d, 0x94b9, 0xe030, 0x434c, 0x4472, 0xde91, 0x1, 0x1);
        gbc.writeMem(0xdc0d, { 0x18, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x94b9);
        EXPECT(gbc.pc(), 0xdc00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc0d), 0x18);
        EXPECT(gbc.readMem(0xdc0e), 0xf1);
        // 18 0329
        gbc.setState(0x6400, 0x4790, 0xbe60, 0x21bd, 0x7efc, 0x5720, 0x0, 0x0);
        gbc.writeMem(0x6400, { 0x18, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x4790);
        EXPECT(gbc.pc(), 0x63a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 032A
        gbc.setState(0x4783, 0x90d9, 0x27c0, 0xfacf, 0x74a9, 0xbc8a, 0x0, 0x0);
        gbc.writeMem(0x4783, { 0x18, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x90d9);
        EXPECT(gbc.pc(), 0x4753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 032B
        gbc.setState(0x8681, 0x83d6, 0xfb10, 0xcb47, 0x94b3, 0x20a2, 0x0, 0x0);
        gbc.writeMem(0x8681, { 0x18, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x83d6);
        EXPECT(gbc.pc(), 0x86f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8681), 0x18);
        EXPECT(gbc.readMem(0x8682), 0x73);
        // 18 032C
        gbc.setState(0x1f83, 0x9773, 0xe8a0, 0x8b65, 0xbab9, 0x8ee3, 0x1, 0x0);
        gbc.writeMem(0x1f83, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9773);
        EXPECT(gbc.pc(), 0x1fbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 032D
        gbc.setState(0x9bfd, 0x59cd, 0x3e30, 0xb878, 0x7dde, 0xc119, 0x0, 0x0);
        gbc.writeMem(0x9bfd, { 0x18, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x59cd);
        EXPECT(gbc.pc(), 0x9c06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bfd), 0x18);
        EXPECT(gbc.readMem(0x9bfe), 0x7);
        // 18 032E
        gbc.setState(0x27b0, 0xf29f, 0x300, 0x5b94, 0xa8f6, 0x6d42, 0x0, 0x0);
        gbc.writeMem(0x27b0, { 0x18, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xf29f);
        EXPECT(gbc.pc(), 0x282d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 032F
        gbc.setState(0x5d60, 0x1e19, 0xed40, 0xf23f, 0xefcd, 0x5c73, 0x1, 0x0);
        gbc.writeMem(0x5d60, { 0x18, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x1e19);
        EXPECT(gbc.pc(), 0x5d09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0330
        gbc.setState(0xc44f, 0xfce4, 0x2430, 0xe97f, 0xa05d, 0xe1e0, 0x0, 0x0);
        gbc.writeMem(0xc44f, { 0x18, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xfce4);
        EXPECT(gbc.pc(), 0xc46d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc44f), 0x18);
        EXPECT(gbc.readMem(0xc450), 0x1c);
        // 18 0332
        gbc.setState(0xef34, 0xb2e3, 0x9af0, 0x8e13, 0x58b4, 0x3ba3, 0x0, 0x1);
        gbc.writeMem(0xef34, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xb2e3);
        EXPECT(gbc.pc(), 0xef71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef34), 0x18);
        EXPECT(gbc.readMem(0xef35), 0x3b);
        // 18 0333
        gbc.setState(0x1dae, 0x8e08, 0x2590, 0x8cd7, 0x8bc4, 0xe4fb, 0x0, 0x1);
        gbc.writeMem(0x1dae, { 0x18, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8e08);
        EXPECT(gbc.pc(), 0x1df4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0334
        gbc.setState(0xd6e2, 0x13ca, 0x64b0, 0x78ce, 0xb687, 0xbe5b, 0x1, 0x0);
        gbc.writeMem(0xd6e2, { 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x13ca);
        EXPECT(gbc.pc(), 0xd6d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6e2), 0x18);
        EXPECT(gbc.readMem(0xd6e3), 0xee);
        // 18 0335
        gbc.setState(0x5ed7, 0xc16e, 0x51c0, 0xcdd6, 0xbea, 0xc1dd, 0x1, 0x0);
        gbc.writeMem(0x5ed7, { 0x18, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xc16e);
        EXPECT(gbc.pc(), 0x5ed4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0336
        gbc.setState(0x6707, 0xc0af, 0x9bb0, 0x7097, 0x1fc0, 0x2a15, 0x1, 0x0);
        gbc.writeMem(0x6707, { 0x18, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc0af);
        EXPECT(gbc.pc(), 0x66cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0337
        gbc.setState(0xc4ba, 0x2ab9, 0x13f0, 0x821c, 0xa3f5, 0xf332, 0x1, 0x0);
        gbc.writeMem(0xc4ba, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x2ab9);
        EXPECT(gbc.pc(), 0xc4c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4ba), 0x18);
        EXPECT(gbc.readMem(0xc4bb), 0x4);
        // 18 0338
        gbc.setState(0x1696, 0xd4cd, 0x9520, 0x61f2, 0xd0da, 0x4577, 0x1, 0x0);
        gbc.writeMem(0x1696, { 0x18, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xd4cd);
        EXPECT(gbc.pc(), 0x162a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0339
        gbc.setState(0xac4e, 0xa5ac, 0x5430, 0x777a, 0xad0d, 0x1f68, 0x0, 0x0);
        gbc.writeMem(0xac4e, { 0x18, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xa5ac);
        EXPECT(gbc.pc(), 0xabe0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac4e), 0x18);
        EXPECT(gbc.readMem(0xac4f), 0x90);
        // 18 033A
        gbc.setState(0x54be, 0x31f4, 0x13d0, 0x5498, 0x460e, 0x44e8, 0x1, 0x0);
        gbc.writeMem(0x54be, { 0x18, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x31f4);
        EXPECT(gbc.pc(), 0x5481);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 033B
        gbc.setState(0x553, 0xdfd, 0x9e10, 0x161d, 0xa100, 0x6042, 0x1, 0x1);
        gbc.writeMem(0x553, { 0x18, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xdfd);
        EXPECT(gbc.pc(), 0x566);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 033D
        gbc.setState(0x9dac, 0xad73, 0x3f00, 0xdaba, 0x7477, 0x12a, 0x1, 0x0);
        gbc.writeMem(0x9dac, { 0x18, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xad73);
        EXPECT(gbc.pc(), 0x9d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dac), 0x18);
        EXPECT(gbc.readMem(0x9dad), 0x97);
        // 18 033E
        gbc.setState(0xb1, 0x1142, 0xc9a0, 0x7b35, 0x5803, 0xc471, 0x0, 0x1);
        gbc.writeMem(0xb1, { 0x18, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x1142);
        EXPECT(gbc.pc(), 0xa9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 033F
        gbc.setState(0x6777, 0x5acf, 0x5bf0, 0x653a, 0x30d7, 0xb14c, 0x1, 0x0);
        gbc.writeMem(0x6777, { 0x18, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x5acf);
        EXPECT(gbc.pc(), 0x6743);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0340
        gbc.setState(0x4629, 0x5c20, 0x7770, 0x6e4c, 0xb176, 0x326f, 0x0, 0x1);
        gbc.writeMem(0x4629, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x5c20);
        EXPECT(gbc.pc(), 0x4651);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0341
        gbc.setState(0x2bf1, 0x11af, 0x47a0, 0xff1d, 0xc04c, 0xa932, 0x1, 0x0);
        gbc.writeMem(0x2bf1, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x11af);
        EXPECT(gbc.pc(), 0x2bba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0342
        gbc.setState(0x6030, 0x1791, 0x9a70, 0xc305, 0x9612, 0x1c02, 0x0, 0x0);
        gbc.writeMem(0x6030, { 0x18, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1791);
        EXPECT(gbc.pc(), 0x5fdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0343
        gbc.setState(0xefac, 0x5aa1, 0x6f30, 0x3d77, 0x74f6, 0x3eb3, 0x1, 0x1);
        gbc.writeMem(0xefac, { 0x18, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x5aa1);
        EXPECT(gbc.pc(), 0xf00a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xefac), 0x18);
        EXPECT(gbc.readMem(0xefad), 0x5c);
        // 18 0344
        gbc.setState(0x67fc, 0xd95c, 0xc9a0, 0xcf45, 0x3f85, 0x3b63, 0x0, 0x0);
        gbc.writeMem(0x67fc, { 0x18, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0xd95c);
        EXPECT(gbc.pc(), 0x6797);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0345
        gbc.setState(0xeb72, 0xa9fa, 0xe2e0, 0x6207, 0x2cc6, 0xc1c0, 0x1, 0x1);
        gbc.writeMem(0xeb72, { 0x18, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa9fa);
        EXPECT(gbc.pc(), 0xeaf4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb72), 0x18);
        EXPECT(gbc.readMem(0xeb73), 0x80);
        // 18 0346
        gbc.setState(0xea57, 0x3723, 0xd270, 0x60f9, 0x189e, 0x5bec, 0x0, 0x0);
        gbc.writeMem(0xea57, { 0x18, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x3723);
        EXPECT(gbc.pc(), 0xea75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea57), 0x18);
        EXPECT(gbc.readMem(0xea58), 0x1c);
        // 18 0347
        gbc.setState(0xf47, 0xf215, 0xbbe0, 0xd1db, 0x44aa, 0x9ca6, 0x1, 0x1);
        gbc.writeMem(0xf47, { 0x18, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xf215);
        EXPECT(gbc.pc(), 0xef8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0348
        gbc.setState(0x207f, 0xb726, 0x9150, 0xba1f, 0xc773, 0x7a0d, 0x1, 0x0);
        gbc.writeMem(0x207f, { 0x18, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xb726);
        EXPECT(gbc.pc(), 0x20b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0349
        gbc.setState(0x2985, 0x2754, 0x1890, 0x60fc, 0x3b1f, 0x2d15, 0x0, 0x0);
        gbc.writeMem(0x2985, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x2754);
        EXPECT(gbc.pc(), 0x298b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 034A
        gbc.setState(0x95f1, 0x7466, 0x1bd0, 0x8549, 0x85a5, 0x84e2, 0x1, 0x0);
        gbc.writeMem(0x95f1, { 0x18, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x7466);
        EXPECT(gbc.pc(), 0x9622);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95f1), 0x18);
        EXPECT(gbc.readMem(0x95f2), 0x2f);
        // 18 034B
        gbc.setState(0x3d80, 0x86e2, 0x46d0, 0xe67f, 0x4d1f, 0x59b4, 0x0, 0x0);
        gbc.writeMem(0x3d80, { 0x18, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x86e2);
        EXPECT(gbc.pc(), 0x3d2f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 034C
        gbc.setState(0x28ae, 0xd863, 0x6030, 0x2817, 0xcd56, 0xc6b8, 0x0, 0x0);
        gbc.writeMem(0x28ae, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xd863);
        EXPECT(gbc.pc(), 0x2928);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 034D
        gbc.setState(0x6297, 0x86b5, 0xb3a0, 0xa5ae, 0xdb6c, 0x7873, 0x1, 0x1);
        gbc.writeMem(0x6297, { 0x18, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x86b5);
        EXPECT(gbc.pc(), 0x630b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 034E
        gbc.setState(0x5d02, 0x6de1, 0xb5b0, 0x2fc1, 0xc759, 0x80a1, 0x1, 0x0);
        gbc.writeMem(0x5d02, { 0x18, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6de1);
        EXPECT(gbc.pc(), 0x5d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 034F
        gbc.setState(0x2761, 0xf846, 0x66b0, 0x7ef2, 0xc29d, 0xf397, 0x1, 0x0);
        gbc.writeMem(0x2761, { 0x18, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf846);
        EXPECT(gbc.pc(), 0x2785);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0350
        gbc.setState(0xb7f8, 0xdddf, 0xfd70, 0x5c1, 0x4949, 0xb528, 0x1, 0x0);
        gbc.writeMem(0xb7f8, { 0x18, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdddf);
        EXPECT(gbc.pc(), 0xb7b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb7f8), 0x18);
        EXPECT(gbc.readMem(0xb7f9), 0xb8);
        // 18 0351
        gbc.setState(0x6aa5, 0xc52f, 0xb0a0, 0x6e8e, 0x1bc0, 0x2614, 0x0, 0x1);
        gbc.writeMem(0x6aa5, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc52f);
        EXPECT(gbc.pc(), 0x6ae2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0352
        gbc.setState(0xc57c, 0x95b1, 0x8ed0, 0x77c7, 0x6d2c, 0x30bb, 0x1, 0x1);
        gbc.writeMem(0xc57c, { 0x18, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x95b1);
        EXPECT(gbc.pc(), 0xc59e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc57c), 0x18);
        EXPECT(gbc.readMem(0xc57d), 0x20);
        // 18 0353
        gbc.setState(0x618e, 0x4c4e, 0xc300, 0x2472, 0x6e06, 0x2428, 0x1, 0x0);
        gbc.writeMem(0x618e, { 0x18, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x4c4e);
        EXPECT(gbc.pc(), 0x6118);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0354
        gbc.setState(0x8d4a, 0x251d, 0x6dd0, 0x441e, 0xcb64, 0x3c40, 0x0, 0x0);
        gbc.writeMem(0x8d4a, { 0x18, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x251d);
        EXPECT(gbc.pc(), 0x8d44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d4a), 0x18);
        EXPECT(gbc.readMem(0x8d4b), 0xf8);
        // 18 0355
        gbc.setState(0x7572, 0x6aa6, 0x9570, 0x7d7, 0x7bbc, 0x311d, 0x1, 0x1);
        gbc.writeMem(0x7572, { 0x18, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x6aa6);
        EXPECT(gbc.pc(), 0x754c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0356
        gbc.setState(0xd5a, 0x82a6, 0x2ea0, 0x6789, 0xa628, 0xfc18, 0x1, 0x1);
        gbc.writeMem(0xd5a, { 0x18, 0x70 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x82a6);
        EXPECT(gbc.pc(), 0xdcc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0357
        gbc.setState(0x3d04, 0xe4e3, 0xe000, 0x64f6, 0x110, 0xa5c8, 0x1, 0x1);
        gbc.writeMem(0x3d04, { 0x18, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0xe4e3);
        EXPECT(gbc.pc(), 0x3d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0358
        gbc.setState(0xec8, 0xc230, 0x6ff0, 0x8c5a, 0x59da, 0xc812, 0x0, 0x0);
        gbc.writeMem(0xec8, { 0x18, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xc230);
        EXPECT(gbc.pc(), 0xe67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0359
        gbc.setState(0x61c5, 0xc1ee, 0x33d0, 0xf4c6, 0xa2dc, 0x9ab8, 0x1, 0x1);
        gbc.writeMem(0x61c5, { 0x18, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc1ee);
        EXPECT(gbc.pc(), 0x6147);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 035A
        gbc.setState(0xb204, 0x44e0, 0xf670, 0xc56b, 0x79f1, 0x2dcb, 0x0, 0x0);
        gbc.writeMem(0xb204, { 0x18, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x44e0);
        EXPECT(gbc.pc(), 0xb196);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb204), 0x18);
        EXPECT(gbc.readMem(0xb205), 0x90);
        // 18 035C
        gbc.setState(0xed10, 0x10d6, 0x4a50, 0x8844, 0x5280, 0xf46c, 0x1, 0x0);
        gbc.writeMem(0xed10, { 0x18, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x10d6);
        EXPECT(gbc.pc(), 0xec9b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed10), 0x18);
        EXPECT(gbc.readMem(0xed11), 0x89);
        // 18 035D
        gbc.setState(0x4d62, 0xa555, 0xfc70, 0x11ae, 0x4be1, 0x4498, 0x0, 0x0);
        gbc.writeMem(0x4d62, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xa555);
        EXPECT(gbc.pc(), 0x4d83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 035E
        gbc.setState(0x74c2, 0x7bb9, 0x1b90, 0x9ef8, 0x539, 0x7bae, 0x0, 0x0);
        gbc.writeMem(0x74c2, { 0x18, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x7bb9);
        EXPECT(gbc.pc(), 0x7455);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 035F
        gbc.setState(0xe4c1, 0x3c1e, 0x1ce0, 0x4d7a, 0xb219, 0x9ad1, 0x1, 0x1);
        gbc.writeMem(0xe4c1, { 0x18, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3c1e);
        EXPECT(gbc.pc(), 0xe530);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4c1), 0x18);
        EXPECT(gbc.readMem(0xe4c2), 0x6d);
        // 18 0360
        gbc.setState(0xdc6a, 0x5b22, 0x1fa0, 0xfbec, 0x3bc5, 0x6c8e, 0x1, 0x0);
        gbc.writeMem(0xdc6a, { 0x18, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x5b22);
        EXPECT(gbc.pc(), 0xdc35);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc6a), 0x18);
        EXPECT(gbc.readMem(0xdc6b), 0xc9);
        // 18 0361
        gbc.setState(0x59b4, 0xbcf, 0x6830, 0xe8ea, 0x1d11, 0xa607, 0x0, 0x1);
        gbc.writeMem(0x59b4, { 0x18, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xbcf);
        EXPECT(gbc.pc(), 0x59dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0362
        gbc.setState(0x299c, 0xe02b, 0x510, 0x7bdf, 0x830a, 0x49da, 0x0, 0x1);
        gbc.writeMem(0x299c, { 0x18, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0xe02b);
        EXPECT(gbc.pc(), 0x299c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0363
        gbc.setState(0x49, 0xe9ac, 0x20d0, 0xefbd, 0x7ad0, 0x8cbd, 0x0, 0x0);
        gbc.writeMem(0x49, { 0x18, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xe9ac);
        EXPECT(gbc.pc(), 0x39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0364
        gbc.setState(0x898a, 0x6846, 0x8290, 0xe468, 0x50da, 0xd5e6, 0x0, 0x1);
        gbc.writeMem(0x898a, { 0x18, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x6846);
        EXPECT(gbc.pc(), 0x892f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x898a), 0x18);
        EXPECT(gbc.readMem(0x898b), 0xa3);
        // 18 0365
        gbc.setState(0xddd2, 0xd1d6, 0x90c0, 0x1fa, 0xf232, 0x77af, 0x1, 0x1);
        gbc.writeMem(0xddd2, { 0x18, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd1d6);
        EXPECT(gbc.pc(), 0xdde0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddd2), 0x18);
        EXPECT(gbc.readMem(0xddd3), 0xc);
        // 18 0366
        gbc.setState(0xa20d, 0x572d, 0x29a0, 0x6d4b, 0x3876, 0x7b20, 0x0, 0x0);
        gbc.writeMem(0xa20d, { 0x18, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x572d);
        EXPECT(gbc.pc(), 0xa212);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa20d), 0x18);
        EXPECT(gbc.readMem(0xa20e), 0x3);
        // 18 0368
        gbc.setState(0xebbc, 0xe4ea, 0xee10, 0xb3a9, 0x1663, 0x6fcc, 0x0, 0x0);
        gbc.writeMem(0xebbc, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xe4ea);
        EXPECT(gbc.pc(), 0xeb91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xebbc), 0x18);
        EXPECT(gbc.readMem(0xebbd), 0xd3);
        // 18 0369
        gbc.setState(0xa959, 0x78af, 0xc0b0, 0x491d, 0x3f0, 0x1b42, 0x1, 0x0);
        gbc.writeMem(0xa959, { 0x18, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x78af);
        EXPECT(gbc.pc(), 0xa98a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa959), 0x18);
        EXPECT(gbc.readMem(0xa95a), 0x2f);
        // 18 036A
        gbc.setState(0x2477, 0x7b94, 0x18e0, 0xbbce, 0x6211, 0x8a80, 0x0, 0x1);
        gbc.writeMem(0x2477, { 0x18, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x7b94);
        EXPECT(gbc.pc(), 0x2449);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 036B
        gbc.setState(0xb0a, 0x753e, 0xa9e0, 0x422d, 0xee9, 0x357a, 0x1, 0x1);
        gbc.writeMem(0xb0a, { 0x18, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x753e);
        EXPECT(gbc.pc(), 0xad1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 036C
        gbc.setState(0x64c, 0x8ef7, 0x7b70, 0x7710, 0xf97, 0x4538, 0x1, 0x1);
        gbc.writeMem(0x64c, { 0x18, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x8ef7);
        EXPECT(gbc.pc(), 0x60f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 036D
        gbc.setState(0x818b, 0xea11, 0x7fc0, 0xa037, 0x4c46, 0x17e2, 0x0, 0x0);
        gbc.writeMem(0x818b, { 0x18, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xea11);
        EXPECT(gbc.pc(), 0x8120);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x818b), 0x18);
        EXPECT(gbc.readMem(0x818c), 0x93);
        // 18 036E
        gbc.setState(0x570e, 0x690d, 0x8410, 0xfd23, 0x9d40, 0xa0cd, 0x1, 0x0);
        gbc.writeMem(0x570e, { 0x18, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x690d);
        EXPECT(gbc.pc(), 0x577e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0370
        gbc.setState(0xdd53, 0x852d, 0x1eb0, 0x154, 0xf9a7, 0xaac9, 0x1, 0x0);
        gbc.writeMem(0xdd53, { 0x18, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x852d);
        EXPECT(gbc.pc(), 0xdd55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd53), 0x18);
        EXPECT(gbc.readMem(0xdd54), 0x0);
        // 18 0371
        gbc.setState(0x2a70, 0xc0b0, 0x7ce0, 0xe901, 0xbd5, 0x2f3a, 0x0, 0x1);
        gbc.writeMem(0x2a70, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xc0b0);
        EXPECT(gbc.pc(), 0x29f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0372
        gbc.setState(0x9e15, 0x1ce, 0x7d60, 0x5129, 0xa377, 0x1e0d, 0x1, 0x0);
        gbc.writeMem(0x9e15, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x1ce);
        EXPECT(gbc.pc(), 0x9e45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e15), 0x18);
        EXPECT(gbc.readMem(0x9e16), 0x2e);
        // 18 0373
        gbc.setState(0x72b1, 0x99c8, 0x510, 0x3906, 0x9073, 0x5134, 0x0, 0x0);
        gbc.writeMem(0x72b1, { 0x18, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x99c8);
        EXPECT(gbc.pc(), 0x7309);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0374
        gbc.setState(0xa942, 0xf2be, 0xc740, 0x2d12, 0x3220, 0xfb11, 0x0, 0x1);
        gbc.writeMem(0xa942, { 0x18, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0xf2be);
        EXPECT(gbc.pc(), 0xa969);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa942), 0x18);
        EXPECT(gbc.readMem(0xa943), 0x25);
        // 18 0375
        gbc.setState(0xef14, 0xc9d1, 0x360, 0x48ac, 0xdd0e, 0xf345, 0x1, 0x1);
        gbc.writeMem(0xef14, { 0x18, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xc9d1);
        EXPECT(gbc.pc(), 0xef42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef14), 0x18);
        EXPECT(gbc.readMem(0xef15), 0x2c);
        // 18 0376
        gbc.setState(0xb379, 0x87cf, 0xfae0, 0x559f, 0xf8ce, 0xe2ba, 0x1, 0x0);
        gbc.writeMem(0xb379, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x87cf);
        EXPECT(gbc.pc(), 0xb34c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb379), 0x18);
        EXPECT(gbc.readMem(0xb37a), 0xd1);
        // 18 0377
        gbc.setState(0x8bd2, 0x594e, 0x7c40, 0x93a8, 0xdaa1, 0xc899, 0x0, 0x1);
        gbc.writeMem(0x8bd2, { 0x18, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x594e);
        EXPECT(gbc.pc(), 0x8c48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bd2), 0x18);
        EXPECT(gbc.readMem(0x8bd3), 0x74);
        // 18 0379
        gbc.setState(0xd4f0, 0xdc74, 0xbeb0, 0xad33, 0xe655, 0x4bfc, 0x0, 0x1);
        gbc.writeMem(0xd4f0, { 0x18, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xdc74);
        EXPECT(gbc.pc(), 0xd54a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd4f0), 0x18);
        EXPECT(gbc.readMem(0xd4f1), 0x58);
        // 18 037A
        gbc.setState(0x8e5e, 0xc615, 0x9ec0, 0xcf92, 0x8e23, 0x6713, 0x1, 0x1);
        gbc.writeMem(0x8e5e, { 0x18, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc615);
        EXPECT(gbc.pc(), 0x8e77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5e), 0x18);
        EXPECT(gbc.readMem(0x8e5f), 0x17);
        // 18 037B
        gbc.setState(0x4ad2, 0xd58c, 0xf8e0, 0x837c, 0xf059, 0x721e, 0x0, 0x0);
        gbc.writeMem(0x4ad2, { 0x18, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xd58c);
        EXPECT(gbc.pc(), 0x4a5a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 037C
        gbc.setState(0x229, 0x9a48, 0x9130, 0x12e9, 0xf21b, 0xfae4, 0x0, 0x0);
        gbc.writeMem(0x229, { 0x18, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x9a48);
        EXPECT(gbc.pc(), 0x1d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 037D
        gbc.setState(0x242, 0xb3d4, 0x3770, 0xb7e5, 0x560a, 0x53de, 0x1, 0x0);
        gbc.writeMem(0x242, { 0x18, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb3d4);
        EXPECT(gbc.pc(), 0x27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 037E
        gbc.setState(0xbc3b, 0x498, 0xfc50, 0x90ee, 0xd0b, 0x328f, 0x1, 0x1);
        gbc.writeMem(0xbc3b, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x498);
        EXPECT(gbc.pc(), 0xbc7c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc3b), 0x18);
        EXPECT(gbc.readMem(0xbc3c), 0x3f);
        // 18 037F
        gbc.setState(0x8c96, 0xdd1, 0x18d0, 0x7f01, 0x3558, 0xd843, 0x1, 0x0);
        gbc.writeMem(0x8c96, { 0x18, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xdd1);
        EXPECT(gbc.pc(), 0x8ca3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c96), 0x18);
        EXPECT(gbc.readMem(0x8c97), 0xb);
        // 18 0381
        gbc.setState(0x4038, 0x8233, 0x8ee0, 0x8a0d, 0x327e, 0xa8ff, 0x0, 0x1);
        gbc.writeMem(0x4038, { 0x18, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x8233);
        EXPECT(gbc.pc(), 0x3fe1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0382
        gbc.setState(0x39db, 0x584a, 0x6290, 0x60ec, 0x2a4a, 0xddd9, 0x1, 0x0);
        gbc.writeMem(0x39db, { 0x18, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x584a);
        EXPECT(gbc.pc(), 0x39af);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0383
        gbc.setState(0x4230, 0x57a6, 0xa120, 0xb4a, 0x65f, 0x4c17, 0x0, 0x0);
        gbc.writeMem(0x4230, { 0x18, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x57a6);
        EXPECT(gbc.pc(), 0x424a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0384
        gbc.setState(0xc946, 0xd2fc, 0x560, 0x1014, 0xc45a, 0x6285, 0x0, 0x0);
        gbc.writeMem(0xc946, { 0x18, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xd2fc);
        EXPECT(gbc.pc(), 0xc8e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc946), 0x18);
        EXPECT(gbc.readMem(0xc947), 0x9d);
        // 18 0385
        gbc.setState(0x665c, 0xc23f, 0x8f00, 0x2224, 0xcfc0, 0x64e3, 0x0, 0x1);
        gbc.writeMem(0x665c, { 0x18, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x64);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xc23f);
        EXPECT(gbc.pc(), 0x66bd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0386
        gbc.setState(0x421, 0x965, 0x3360, 0x62bc, 0x6d78, 0x9f43, 0x0, 0x1);
        gbc.writeMem(0x421, { 0x18, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x965);
        EXPECT(gbc.pc(), 0x3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0387
        gbc.setState(0xea69, 0x99d, 0x62a0, 0xb8a0, 0xb801, 0xe3f5, 0x1, 0x1);
        gbc.writeMem(0xea69, { 0x18, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x99d);
        EXPECT(gbc.pc(), 0xea65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea69), 0x18);
        EXPECT(gbc.readMem(0xea6a), 0xfa);
        // 18 0388
        gbc.setState(0x3164, 0x4536, 0x12a0, 0xb874, 0xbe4d, 0x8cbb, 0x0, 0x0);
        gbc.writeMem(0x3164, { 0x18, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x4536);
        EXPECT(gbc.pc(), 0x3151);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0389
        gbc.setState(0xe3b2, 0x3a24, 0x2630, 0xc9dd, 0x2e6, 0xd9ae, 0x0, 0x0);
        gbc.writeMem(0xe3b2, { 0x18, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3a24);
        EXPECT(gbc.pc(), 0xe3ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3b2), 0x18);
        EXPECT(gbc.readMem(0xe3b3), 0x36);
        // 18 038A
        gbc.setState(0x624d, 0xc37a, 0xe5a0, 0x540a, 0x2018, 0xa650, 0x0, 0x1);
        gbc.writeMem(0x624d, { 0x18, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc37a);
        EXPECT(gbc.pc(), 0x6227);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 038B
        gbc.setState(0x391b, 0xa50c, 0xef60, 0xeff, 0x5c9c, 0xce3b, 0x1, 0x1);
        gbc.writeMem(0x391b, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa50c);
        EXPECT(gbc.pc(), 0x392c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 038C
        gbc.setState(0x7ff2, 0x381e, 0x1d70, 0x22db, 0xd26c, 0x2462, 0x0, 0x0);
        gbc.writeMem(0x7ff2, { 0x18, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x381e);
        EXPECT(gbc.pc(), 0x8046);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 038D
        gbc.setState(0x4403, 0xf7e9, 0x330, 0x9717, 0x474d, 0x797b, 0x0, 0x1);
        gbc.writeMem(0x4403, { 0x18, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf7e9);
        EXPECT(gbc.pc(), 0x442f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 038E
        gbc.setState(0x7f63, 0x38f8, 0x3ff0, 0x7ce0, 0xeaf8, 0x372, 0x0, 0x0);
        gbc.writeMem(0x7f63, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0x38f8);
        EXPECT(gbc.pc(), 0x7f39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 038F
        gbc.setState(0x1609, 0x6030, 0xf900, 0x7ead, 0xa430, 0x6159, 0x0, 0x0);
        gbc.writeMem(0x1609, { 0x18, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x6030);
        EXPECT(gbc.pc(), 0x1633);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 0391
        gbc.setState(0x1fc7, 0x730b, 0xeb10, 0x1af6, 0x4707, 0x62c8, 0x1, 0x1);
        gbc.writeMem(0x1fc7, { 0x18, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x730b);
        EXPECT(gbc.pc(), 0x1fa8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0393
        gbc.setState(0x66eb, 0x3cc3, 0x2a10, 0xe724, 0x8e62, 0x7b1d, 0x1, 0x0);
        gbc.writeMem(0x66eb, { 0x18, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3cc3);
        EXPECT(gbc.pc(), 0x672c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0394
        gbc.setState(0x2516, 0x2486, 0xbf10, 0xcf32, 0x2b7c, 0x13d6, 0x0, 0x1);
        gbc.writeMem(0x2516, { 0x18, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x2486);
        EXPECT(gbc.pc(), 0x2590);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 0395
        gbc.setState(0xa7d2, 0x3d17, 0xa3d0, 0x99c, 0x888c, 0xe4c7, 0x0, 0x1);
        gbc.writeMem(0xa7d2, { 0x18, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x3d17);
        EXPECT(gbc.pc(), 0xa7be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7d2), 0x18);
        EXPECT(gbc.readMem(0xa7d3), 0xea);
        // 18 0396
        gbc.setState(0x6162, 0x7d75, 0x4c20, 0xb0de, 0x2e0f, 0x862a, 0x1, 0x1);
        gbc.writeMem(0x6162, { 0x18, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7d75);
        EXPECT(gbc.pc(), 0x60f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 0397
        gbc.setState(0x7945, 0x506b, 0xea30, 0xf2c4, 0xc668, 0x2430, 0x0, 0x1);
        gbc.writeMem(0x7945, { 0x18, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x506b);
        EXPECT(gbc.pc(), 0x7942);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0398
        gbc.setState(0x218e, 0xd862, 0x32b0, 0xabdc, 0xac6, 0x6ad, 0x1, 0x1);
        gbc.writeMem(0x218e, { 0x18, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xd862);
        EXPECT(gbc.pc(), 0x21dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 0399
        gbc.setState(0x29f9, 0xfb82, 0xfe30, 0x86f4, 0xabc1, 0x8a67, 0x1, 0x1);
        gbc.writeMem(0x29f9, { 0x18, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xfb82);
        EXPECT(gbc.pc(), 0x29b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 039A
        gbc.setState(0xad31, 0x72d, 0x5110, 0xbee8, 0x6c07, 0x5113, 0x0, 0x1);
        gbc.writeMem(0xad31, { 0x18, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x72d);
        EXPECT(gbc.pc(), 0xacf5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad31), 0x18);
        EXPECT(gbc.readMem(0xad32), 0xc2);
        // 18 039B
        gbc.setState(0xca2d, 0x8c73, 0x20b0, 0x9349, 0xf97e, 0xc65b, 0x1, 0x0);
        gbc.writeMem(0xca2d, { 0x18, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x8c73);
        EXPECT(gbc.pc(), 0xca7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca2d), 0x18);
        EXPECT(gbc.readMem(0xca2e), 0x50);
        // 18 039C
        gbc.setState(0x53c8, 0x6527, 0x8a10, 0x8fd8, 0x4828, 0xbd1, 0x1, 0x0);
        gbc.writeMem(0x53c8, { 0x18, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x6527);
        EXPECT(gbc.pc(), 0x5378);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 039E
        gbc.setState(0xbbd6, 0xf1d5, 0x7fb0, 0xd14d, 0xd43a, 0x83e3, 0x0, 0x1);
        gbc.writeMem(0xbbd6, { 0x18, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xf1d5);
        EXPECT(gbc.pc(), 0xbbd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbd6), 0x18);
        EXPECT(gbc.readMem(0xbbd7), 0xfb);
        // 18 039F
        gbc.setState(0xbb39, 0xa504, 0xba50, 0x1632, 0xb4c0, 0x179c, 0x1, 0x0);
        gbc.writeMem(0xbb39, { 0x18, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0xa504);
        EXPECT(gbc.pc(), 0xbad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb39), 0x18);
        EXPECT(gbc.readMem(0xbb3a), 0x98);
        // 18 03A0
        gbc.setState(0x6ce1, 0x1266, 0xa590, 0x63df, 0x31ee, 0x6574, 0x1, 0x1);
        gbc.writeMem(0x6ce1, { 0x18, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1266);
        EXPECT(gbc.pc(), 0x6c8c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03A1
        gbc.setState(0x5b0, 0x487c, 0xed0, 0x608a, 0x4fae, 0x8570, 0x1, 0x1);
        gbc.writeMem(0x5b0, { 0x18, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x487c);
        EXPECT(gbc.pc(), 0x5ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03A2
        gbc.setState(0x2b97, 0xcb35, 0xddd0, 0x1c61, 0x1ac0, 0xfc21, 0x1, 0x0);
        gbc.writeMem(0x2b97, { 0x18, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xcb35);
        EXPECT(gbc.pc(), 0x2b5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03A3
        gbc.setState(0x83a7, 0xcf06, 0xc600, 0x32ac, 0xd15d, 0x2de8, 0x1, 0x0);
        gbc.writeMem(0x83a7, { 0x18, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xcf06);
        EXPECT(gbc.pc(), 0x83e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x83a7), 0x18);
        EXPECT(gbc.readMem(0x83a8), 0x3c);
        // 18 03A4
        gbc.setState(0x792f, 0xd8ce, 0x8050, 0x8088, 0x699f, 0x94c7, 0x1, 0x1);
        gbc.writeMem(0x792f, { 0x18, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xd8ce);
        EXPECT(gbc.pc(), 0x79b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03A5
        gbc.setState(0x9f73, 0x4ce1, 0xad60, 0xe000, 0x4ef0, 0xfe02, 0x0, 0x0);
        gbc.writeMem(0x9f73, { 0x18, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x4ce1);
        EXPECT(gbc.pc(), 0x9f99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f73), 0x18);
        EXPECT(gbc.readMem(0x9f74), 0x24);
        // 18 03A6
        gbc.setState(0xc714, 0x393e, 0x9950, 0xf45, 0xac13, 0xb88c, 0x0, 0x1);
        gbc.writeMem(0xc714, { 0x18, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x393e);
        EXPECT(gbc.pc(), 0xc6dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc714), 0x18);
        EXPECT(gbc.readMem(0xc715), 0xc7);
        // 18 03A7
        gbc.setState(0x95ac, 0x279b, 0x70, 0x6a28, 0x9745, 0x3859, 0x1, 0x1);
        gbc.writeMem(0x95ac, { 0x18, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x279b);
        EXPECT(gbc.pc(), 0x959b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95ac), 0x18);
        EXPECT(gbc.readMem(0x95ad), 0xed);
        // 18 03A8
        gbc.setState(0x9075, 0x5aa7, 0x8880, 0x687a, 0x25e, 0x7e6a, 0x0, 0x1);
        gbc.writeMem(0x9075, { 0x18, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5aa7);
        EXPECT(gbc.pc(), 0x906d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9075), 0x18);
        EXPECT(gbc.readMem(0x9076), 0xf6);
        // 18 03A9
        gbc.setState(0xd462, 0xe206, 0x52a0, 0x3b48, 0xb871, 0x22f1, 0x0, 0x1);
        gbc.writeMem(0xd462, { 0x18, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe206);
        EXPECT(gbc.pc(), 0xd461);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd462), 0x18);
        EXPECT(gbc.readMem(0xd463), 0xfd);
        // 18 03AA
        gbc.setState(0xb592, 0xd925, 0xde0, 0x35b9, 0x8240, 0x18c3, 0x0, 0x0);
        gbc.writeMem(0xb592, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xd925);
        EXPECT(gbc.pc(), 0xb567);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb592), 0x18);
        EXPECT(gbc.readMem(0xb593), 0xd3);
        // 18 03AB
        gbc.setState(0x7a3e, 0xaeda, 0x3b20, 0xe398, 0x960b, 0x50d3, 0x0, 0x1);
        gbc.writeMem(0x7a3e, { 0x18, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xaeda);
        EXPECT(gbc.pc(), 0x7a9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03AC
        gbc.setState(0xe231, 0xba68, 0x6a70, 0x3e07, 0x6a4b, 0xf90a, 0x1, 0x1);
        gbc.writeMem(0xe231, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xba68);
        EXPECT(gbc.pc(), 0xe235);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe231), 0x18);
        EXPECT(gbc.readMem(0xe232), 0x2);
        // 18 03AD
        gbc.setState(0x11db, 0x6ec3, 0x910, 0xe8b8, 0x1aa5, 0xad82, 0x0, 0x1);
        gbc.writeMem(0x11db, { 0x18, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0x6ec3);
        EXPECT(gbc.pc(), 0x1166);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03AE
        gbc.setState(0x39a0, 0x8c30, 0x72b0, 0xb4ea, 0x7ed7, 0xe50d, 0x1, 0x0);
        gbc.writeMem(0x39a0, { 0x18, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x8c30);
        EXPECT(gbc.pc(), 0x397e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03AF
        gbc.setState(0x6aed, 0xf674, 0x5c90, 0x7d41, 0xdaac, 0xf188, 0x0, 0x0);
        gbc.writeMem(0x6aed, { 0x18, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf674);
        EXPECT(gbc.pc(), 0x6ac0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03B0
        gbc.setState(0x70cf, 0x7018, 0x8ae0, 0x59bc, 0xac01, 0x309, 0x0, 0x0);
        gbc.writeMem(0x70cf, { 0x18, 0x95 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x7018);
        EXPECT(gbc.pc(), 0x7066);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03B1
        gbc.setState(0x6f72, 0x4d4e, 0x4550, 0xbc9e, 0xce64, 0x1e1c, 0x1, 0x1);
        gbc.writeMem(0x6f72, { 0x18, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x4d4e);
        EXPECT(gbc.pc(), 0x6fed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03B2
        gbc.setState(0xd88f, 0x7104, 0xf9e0, 0xdf0c, 0x874b, 0x7dc7, 0x0, 0x0);
        gbc.writeMem(0xd88f, { 0x18, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7104);
        EXPECT(gbc.pc(), 0xd83d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd88f), 0x18);
        EXPECT(gbc.readMem(0xd890), 0xac);
        // 18 03B3
        gbc.setState(0x85e1, 0x9394, 0x1340, 0x22ac, 0xe013, 0xde1f, 0x0, 0x1);
        gbc.writeMem(0x85e1, { 0x18, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x9394);
        EXPECT(gbc.pc(), 0x860e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85e1), 0x18);
        EXPECT(gbc.readMem(0x85e2), 0x2b);
        // 18 03B4
        gbc.setState(0x1713, 0xd094, 0xe350, 0xa500, 0xb36a, 0xe646, 0x1, 0x1);
        gbc.writeMem(0x1713, { 0x18, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd094);
        EXPECT(gbc.pc(), 0x177a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03B5
        gbc.setState(0x3e70, 0xdf7b, 0x9480, 0x6ba6, 0x1c02, 0x75f5, 0x1, 0x1);
        gbc.writeMem(0x3e70, { 0x18, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xdf7b);
        EXPECT(gbc.pc(), 0x3eb6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03B7
        gbc.setState(0xb041, 0xc7ab, 0xdfc0, 0x6959, 0x9287, 0x58, 0x1, 0x0);
        gbc.writeMem(0xb041, { 0x18, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc7ab);
        EXPECT(gbc.pc(), 0xb0bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb041), 0x18);
        EXPECT(gbc.readMem(0xb042), 0x7a);
        // 18 03B8
        gbc.setState(0x2237, 0xe47c, 0x9950, 0x1135, 0xf1e2, 0xbb5a, 0x1, 0x1);
        gbc.writeMem(0x2237, { 0x18, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe47c);
        EXPECT(gbc.pc(), 0x226c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03B9
        gbc.setState(0x864d, 0x512b, 0x3480, 0x858d, 0x6951, 0x77b8, 0x0, 0x1);
        gbc.writeMem(0x864d, { 0x18, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x512b);
        EXPECT(gbc.pc(), 0x8605);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x864d), 0x18);
        EXPECT(gbc.readMem(0x864e), 0xb6);
        // 18 03BA
        gbc.setState(0x8e8, 0x5dae, 0x6b70, 0xaa22, 0x90a1, 0x119d, 0x1, 0x0);
        gbc.writeMem(0x8e8, { 0x18, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5dae);
        EXPECT(gbc.pc(), 0x88b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03BC
        gbc.setState(0xe42b, 0x2496, 0x3bf0, 0xe71b, 0x461d, 0x31e4, 0x1, 0x0);
        gbc.writeMem(0xe42b, { 0x18, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x2496);
        EXPECT(gbc.pc(), 0xe401);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe42b), 0x18);
        EXPECT(gbc.readMem(0xe42c), 0xd4);
        // 18 03BD
        gbc.setState(0x1ba8, 0x13a2, 0x12b0, 0x5f41, 0xfade, 0x8011, 0x0, 0x0);
        gbc.writeMem(0x1ba8, { 0x18, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x13a2);
        EXPECT(gbc.pc(), 0x1bae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03BE
        gbc.setState(0xde71, 0x7b16, 0xe1d0, 0x7efd, 0xe520, 0xbead, 0x1, 0x1);
        gbc.writeMem(0xde71, { 0x18, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x7b16);
        EXPECT(gbc.pc(), 0xde34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde71), 0x18);
        EXPECT(gbc.readMem(0xde72), 0xc1);
        // 18 03BF
        gbc.setState(0x4d1c, 0xdbbd, 0x1620, 0x5745, 0xd70e, 0x5376, 0x1, 0x1);
        gbc.writeMem(0x4d1c, { 0x18, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xdbbd);
        EXPECT(gbc.pc(), 0x4d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03C0
        gbc.setState(0x87ca, 0x94be, 0x52c0, 0x6b39, 0x12de, 0x96b9, 0x1, 0x0);
        gbc.writeMem(0x87ca, { 0x18, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x94be);
        EXPECT(gbc.pc(), 0x87eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x87ca), 0x18);
        EXPECT(gbc.readMem(0x87cb), 0x1f);
        // 18 03C2
        gbc.setState(0x392e, 0xbcbd, 0x2070, 0xc527, 0xb78a, 0x21a, 0x0, 0x1);
        gbc.writeMem(0x392e, { 0x18, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbcbd);
        EXPECT(gbc.pc(), 0x39a1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03C3
        gbc.setState(0x2e6a, 0xe360, 0x2910, 0x4e71, 0xbdcd, 0x457b, 0x0, 0x0);
        gbc.writeMem(0x2e6a, { 0x18, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xe360);
        EXPECT(gbc.pc(), 0x2e39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03C4
        gbc.setState(0xbd6a, 0xf9e7, 0x3ef0, 0x7b42, 0x2465, 0x4a91, 0x1, 0x0);
        gbc.writeMem(0xbd6a, { 0x18, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xf9e7);
        EXPECT(gbc.pc(), 0xbcfe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbd6a), 0x18);
        EXPECT(gbc.readMem(0xbd6b), 0x92);
        // 18 03C5
        gbc.setState(0xdefd, 0x4247, 0xe0e0, 0x46dd, 0x2550, 0xbc03, 0x0, 0x0);
        gbc.writeMem(0xdefd, { 0x18, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x4247);
        EXPECT(gbc.pc(), 0xdf63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdefd), 0x18);
        EXPECT(gbc.readMem(0xdefe), 0x64);
        // 18 03C6
        gbc.setState(0xa52b, 0xdc00, 0x1850, 0x9439, 0x73af, 0x5693, 0x0, 0x0);
        gbc.writeMem(0xa52b, { 0x18, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdc00);
        EXPECT(gbc.pc(), 0xa540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa52b), 0x18);
        EXPECT(gbc.readMem(0xa52c), 0x13);
        // 18 03C7
        gbc.setState(0x2c7a, 0xd8af, 0xe930, 0x15df, 0xd2d5, 0xa97d, 0x1, 0x1);
        gbc.writeMem(0x2c7a, { 0x18, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xd8af);
        EXPECT(gbc.pc(), 0x2c84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03C8
        gbc.setState(0x8e86, 0xb3a5, 0xfa30, 0xf960, 0x790b, 0xeb84, 0x0, 0x1);
        gbc.writeMem(0x8e86, { 0x18, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xb3a5);
        EXPECT(gbc.pc(), 0x8eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8e86), 0x18);
        EXPECT(gbc.readMem(0x8e87), 0x27);
        // 18 03C9
        gbc.setState(0x8bc6, 0x9388, 0x3eb0, 0x5002, 0x1ef8, 0xc50a, 0x1, 0x1);
        gbc.writeMem(0x8bc6, { 0x18, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x9388);
        EXPECT(gbc.pc(), 0x8b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bc6), 0x18);
        EXPECT(gbc.readMem(0x8bc7), 0xb9);
        // 18 03CA
        gbc.setState(0x9872, 0x687a, 0x3570, 0xbf8e, 0x4de0, 0x25ac, 0x0, 0x0);
        gbc.writeMem(0x9872, { 0x18, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x687a);
        EXPECT(gbc.pc(), 0x9838);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9872), 0x18);
        EXPECT(gbc.readMem(0x9873), 0xc4);
        // 18 03CB
        gbc.setState(0x4129, 0x45c9, 0x6070, 0x96e9, 0xf7e5, 0x1093, 0x1, 0x0);
        gbc.writeMem(0x4129, { 0x18, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x45c9);
        EXPECT(gbc.pc(), 0x4124);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03CC
        gbc.setState(0xef75, 0x6073, 0xfda0, 0xe4dd, 0xc2e5, 0x6d6c, 0x0, 0x1);
        gbc.writeMem(0xef75, { 0x18, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6073);
        EXPECT(gbc.pc(), 0xef9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef75), 0x18);
        EXPECT(gbc.readMem(0xef76), 0x23);
        // 18 03CD
        gbc.setState(0x4365, 0xd2b5, 0xbf40, 0xdaac, 0x81f5, 0x576b, 0x1, 0x0);
        gbc.writeMem(0x4365, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xd2b5);
        EXPECT(gbc.pc(), 0x4395);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03CE
        gbc.setState(0xdda4, 0x1a86, 0x8820, 0xaf89, 0x3c2e, 0xf15f, 0x0, 0x0);
        gbc.writeMem(0xdda4, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x1a86);
        EXPECT(gbc.pc(), 0xdd79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdda4), 0x18);
        EXPECT(gbc.readMem(0xdda5), 0xd3);
        // 18 03CF
        gbc.setState(0x727d, 0xfc39, 0x6530, 0x9313, 0xb14b, 0xfca0, 0x0, 0x0);
        gbc.writeMem(0x727d, { 0x18, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xfc39);
        EXPECT(gbc.pc(), 0x72aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03D0
        gbc.setState(0x877d, 0x8c56, 0xadc0, 0x9b14, 0x278, 0xc47f, 0x0, 0x1);
        gbc.writeMem(0x877d, { 0x18, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x8c56);
        EXPECT(gbc.pc(), 0x875d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x877d), 0x18);
        EXPECT(gbc.readMem(0x877e), 0xde);
        // 18 03D1
        gbc.setState(0x34bd, 0xd0b8, 0xca90, 0xade5, 0x286e, 0xfcbc, 0x1, 0x1);
        gbc.writeMem(0x34bd, { 0x18, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd0b8);
        EXPECT(gbc.pc(), 0x34cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 18 03D2
        gbc.setState(0x6040, 0x66d9, 0x6000, 0xc944, 0x9587, 0x654b, 0x0, 0x0);
        gbc.writeMem(0x6040, { 0x18, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x66d9);
        EXPECT(gbc.pc(), 0x609a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03D3
        gbc.setState(0x653, 0x7b58, 0x5630, 0xad79, 0x8f41, 0xf37, 0x0, 0x0);
        gbc.writeMem(0x653, { 0x18, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x7b58);
        EXPECT(gbc.pc(), 0x628);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03D4
        gbc.setState(0x3c59, 0x84a8, 0x1eb0, 0x6fb, 0x9d0d, 0xd402, 0x0, 0x1);
        gbc.writeMem(0x3c59, { 0x18, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x84a8);
        EXPECT(gbc.pc(), 0x3c9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03D6
        gbc.setState(0x60bc, 0x7f1e, 0xe0, 0x8e45, 0xa7f9, 0x16f, 0x0, 0x1);
        gbc.writeMem(0x60bc, { 0x18, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7f1e);
        EXPECT(gbc.pc(), 0x60cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03D7
        gbc.setState(0xb8f0, 0x7723, 0xa000, 0x1189, 0x85db, 0x5cb7, 0x1, 0x0);
        gbc.writeMem(0xb8f0, { 0x18, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x7723);
        EXPECT(gbc.pc(), 0xb8e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8f0), 0x18);
        EXPECT(gbc.readMem(0xb8f1), 0xf1);
        // 18 03D8
        gbc.setState(0x3f2a, 0x3938, 0xbc00, 0xbb56, 0x3213, 0xf123, 0x1, 0x1);
        gbc.writeMem(0x3f2a, { 0x18, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3938);
        EXPECT(gbc.pc(), 0x3f60);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03D9
        gbc.setState(0x6494, 0xb35c, 0x5e70, 0xfb1c, 0x194e, 0x6a24, 0x0, 0x0);
        gbc.writeMem(0x6494, { 0x18, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xb35c);
        EXPECT(gbc.pc(), 0x650b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03DA
        gbc.setState(0x79b9, 0x3cb1, 0x170, 0x36b6, 0xc863, 0x6a5d, 0x0, 0x0);
        gbc.writeMem(0x79b9, { 0x18, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x3cb1);
        EXPECT(gbc.pc(), 0x7a2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03DB
        gbc.setState(0x7ce1, 0x9689, 0xdec0, 0x7a96, 0x54b7, 0xfda3, 0x1, 0x0);
        gbc.writeMem(0x7ce1, { 0x18, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x9689);
        EXPECT(gbc.pc(), 0x7cef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03DC
        gbc.setState(0xddfd, 0x4b5, 0xfe50, 0x5e47, 0x9ef5, 0x938d, 0x1, 0x1);
        gbc.writeMem(0xddfd, { 0x18, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x4b5);
        EXPECT(gbc.pc(), 0xde6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xddfd), 0x18);
        EXPECT(gbc.readMem(0xddfe), 0x6f);
        // 18 03DD
        gbc.setState(0x5a55, 0x9741, 0x8480, 0xb021, 0x783e, 0x2755, 0x1, 0x0);
        gbc.writeMem(0x5a55, { 0x18, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x9741);
        EXPECT(gbc.pc(), 0x59dc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 18 03DE
        gbc.setState(0x3633, 0xe49d, 0x7820, 0x5768, 0xbb92, 0x4730, 0x0, 0x0);
        gbc.writeMem(0x3633, { 0x18, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xe49d);
        EXPECT(gbc.pc(), 0x367d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03DF
        gbc.setState(0xc0d9, 0xa283, 0xb480, 0x3424, 0x1f8f, 0x8317, 0x0, 0x0);
        gbc.writeMem(0xc0d9, { 0x18, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xa283);
        EXPECT(gbc.pc(), 0xc083);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0d9), 0x18);
        EXPECT(gbc.readMem(0xc0da), 0xa8);
        // 18 03E0
        gbc.setState(0x20a6, 0x315, 0x7f20, 0xc564, 0xb277, 0x482a, 0x1, 0x1);
        gbc.writeMem(0x20a6, { 0x18, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x315);
        EXPECT(gbc.pc(), 0x2119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 18 03E1
        gbc.setState(0xaf83, 0x1bb9, 0x6620, 0x5289, 0x8907, 0x1fb4, 0x1, 0x1);
        gbc.writeMem(0xaf83, { 0x18, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x1bb9);
        EXPECT(gbc.pc(), 0xaf7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf83), 0x18);
        EXPECT(gbc.readMem(0xaf84), 0xf9);
        // 18 03E2
        gbc.setState(0x8efa, 0x5dbc, 0x5ac0, 0xc1f1, 0xb195, 0xe4e0, 0x1, 0x0);
        gbc.writeMem(0x8efa, { 0x18, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x5dbc);
        EXPECT(gbc.pc(), 0x8f7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8efa), 0x18);
        EXPECT(gbc.readMem(0x8efb), 0x7e);
        // 18 03E3
        gbc.setState(0x92c9, 0xd6fb, 0x30, 0x2ad1, 0x8768, 0xa118, 0x1, 0x1);
        gbc.writeMem(0x92c9, { 0x18, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xd6fb);
        EXPECT(gbc.pc(), 0x92f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x92c9), 0x18);
        EXPECT(gbc.readMem(0x92ca), 0x2e);
        // 18 03E4
        gbc.setState(0x57c9, 0xe7e8, 0x63f0, 0x4585, 0x83d8, 0x6ce4, 0x0, 0x0);
        gbc.writeMem(0x57c9, { 0x18, 0xe7 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xe7e8);
        EXPECT(gbc.pc(), 0x57b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 18 03E5
        gbc.setState(0xba9c, 0xa3e2, 0x5d20, 0x2c79, 0xe15c, 0xc61b, 0x1, 0x1);
        gbc.writeMem(0xba9c, { 0x18, 0xa6 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xa3e2);
        EXPECT(gbc.pc(), 0xba44);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba9c), 0x18);
        EXPECT(gbc.readMem(0xba9d), 0xa6);
        // 18 03E6
        gbc.setState(0xc188, 0xa336, 0x18c0, 0xaa37, 0x522f, 0x867f, 0x0, 0x1);
        gbc.writeMem(0xc188, { 0x18, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xa336);
        EXPECT(gbc.pc(), 0xc199);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc188), 0x18);
        EXPECT(gbc.readMem(0xc189), 0xf);
        // 18 03E7
        gbc.setState(0x9c7b, 0x58d5, 0xba70, 0x7351, 0x61b8, 0x1932, 0x1, 0x1);
        gbc.writeMem(0x9c7b, { 0x18, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x58d5);
        EXPECT(gbc.pc(), 0x9cb0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c7b), 0x18);
        EXPECT(gbc.readMem(0x9c7c), 0x33);
    }
