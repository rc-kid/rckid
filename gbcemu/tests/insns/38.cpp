#include "../gbctests_insns.h"
#if (defined GBCEMU_INSNS_TESTS_ALL) || (defined GBCEMU_INSNS_TESTS_38)
#include "../gbctests.h"

namespace rckid::gbcemu {

    TEST(gbcemu, opcode_38) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // 38 0000
        gbc.setState(0x6cb3, 0x98eb, 0xea0, 0x391, 0xb4af, 0x508e, 0x0, 0x0);
        gbc.writeMem(0x6cb3, { 0x38, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x98eb);
        EXPECT(gbc.pc(), 0x6cb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0002
        gbc.setState(0x75cb, 0xe91, 0x5ed0, 0x669b, 0x924d, 0x9bc2, 0x1, 0x0);
        gbc.writeMem(0x75cb, { 0x38, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xe91);
        EXPECT(gbc.pc(), 0x75f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0003
        gbc.setState(0xc753, 0x3356, 0xec60, 0xd05d, 0x26a9, 0x9c7f, 0x1, 0x0);
        gbc.writeMem(0xc753, { 0x38, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x3356);
        EXPECT(gbc.pc(), 0xc755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc753), 0x38);
        EXPECT(gbc.readMem(0xc754), 0x43);
        // 38 0004
        gbc.setState(0x1ec4, 0xff72, 0xb170, 0x2d86, 0x6ae8, 0xc2bc, 0x1, 0x1);
        gbc.writeMem(0x1ec4, { 0x38, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xff72);
        EXPECT(gbc.pc(), 0x1e5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0005
        gbc.setState(0xe061, 0x1809, 0x520, 0x2b36, 0xfe74, 0x4c8b, 0x1, 0x0);
        gbc.writeMem(0xe061, { 0x38, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x1809);
        EXPECT(gbc.pc(), 0xe063);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe061), 0x38);
        EXPECT(gbc.readMem(0xe062), 0x82);
        // 38 0006
        gbc.setState(0x35a0, 0x7dba, 0xfb90, 0x230c, 0x5bec, 0x83d0, 0x0, 0x0);
        gbc.writeMem(0x35a0, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x7dba);
        EXPECT(gbc.pc(), 0x35b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0007
        gbc.setState(0xd7cf, 0x7744, 0x66e0, 0x8da8, 0xd034, 0x6d38, 0x1, 0x1);
        gbc.writeMem(0xd7cf, { 0x38, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x7744);
        EXPECT(gbc.pc(), 0xd7d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7cf), 0x38);
        EXPECT(gbc.readMem(0xd7d0), 0x8);
        // 38 0008
        gbc.setState(0x3ea2, 0x1e3e, 0x6fc0, 0x2ab9, 0x387e, 0x5a0b, 0x1, 0x1);
        gbc.writeMem(0x3ea2, { 0x38, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x1e3e);
        EXPECT(gbc.pc(), 0x3ea4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0009
        gbc.setState(0x284d, 0xf735, 0xdfd0, 0x49e, 0x66a8, 0xa548, 0x0, 0x1);
        gbc.writeMem(0x284d, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xf735);
        EXPECT(gbc.pc(), 0x27f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 000A
        gbc.setState(0xa5a3, 0x7ec5, 0x2c50, 0x5380, 0xf2ea, 0x15b0, 0x1, 0x0);
        gbc.writeMem(0xa5a3, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x7ec5);
        EXPECT(gbc.pc(), 0xa5fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5a3), 0x38);
        EXPECT(gbc.readMem(0xa5a4), 0x59);
        // 38 000B
        gbc.setState(0xd22, 0x2351, 0x83a0, 0x3191, 0x6dc6, 0xe414, 0x0, 0x0);
        gbc.writeMem(0xd22, { 0x38, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0x2351);
        EXPECT(gbc.pc(), 0xd24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 000C
        gbc.setState(0x3a11, 0x52fe, 0x9dd0, 0x41c6, 0x22b2, 0x3088, 0x0, 0x1);
        gbc.writeMem(0x3a11, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x52fe);
        EXPECT(gbc.pc(), 0x3a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 000E
        gbc.setState(0x9c50, 0xec08, 0xad90, 0x604c, 0x6dd6, 0xebde, 0x0, 0x1);
        gbc.writeMem(0x9c50, { 0x38, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xec08);
        EXPECT(gbc.pc(), 0x9ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c50), 0x38);
        EXPECT(gbc.readMem(0x9c51), 0x51);
        // 38 000F
        gbc.setState(0x1f2b, 0x9abb, 0xb850, 0xc694, 0x53a5, 0xfb7d, 0x1, 0x1);
        gbc.writeMem(0x1f2b, { 0x38, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x9abb);
        EXPECT(gbc.pc(), 0x1f04);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0010
        gbc.setState(0x6e90, 0xfd7e, 0x1e90, 0x39ee, 0x38aa, 0x51f4, 0x1, 0x0);
        gbc.writeMem(0x6e90, { 0x38, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xfd7e);
        EXPECT(gbc.pc(), 0x6ec8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0011
        gbc.setState(0x1018, 0x4a81, 0x9f80, 0x7738, 0x3a50, 0x435e, 0x1, 0x1);
        gbc.writeMem(0x1018, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x4a81);
        EXPECT(gbc.pc(), 0x101a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0012
        gbc.setState(0xcfa4, 0x5d19, 0xa370, 0xd8bc, 0xfbe9, 0xc6b1, 0x0, 0x0);
        gbc.writeMem(0xcfa4, { 0x38, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x5d19);
        EXPECT(gbc.pc(), 0xcf80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfa4), 0x38);
        EXPECT(gbc.readMem(0xcfa5), 0xda);
        // 38 0013
        gbc.setState(0xa263, 0x4791, 0x9660, 0x1380, 0x6aa4, 0xa515, 0x0, 0x1);
        gbc.writeMem(0xa263, { 0x38, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x4791);
        EXPECT(gbc.pc(), 0xa265);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa263), 0x38);
        EXPECT(gbc.readMem(0xa264), 0x75);
        // 38 0014
        gbc.setState(0x88df, 0x8887, 0x9540, 0x16f7, 0xa89f, 0xb757, 0x1, 0x1);
        gbc.writeMem(0x88df, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8887);
        EXPECT(gbc.pc(), 0x88e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88df), 0x38);
        EXPECT(gbc.readMem(0x88e0), 0xad);
        // 38 0015
        gbc.setState(0x52a7, 0x51bc, 0xd780, 0x903f, 0x18c1, 0xf6a9, 0x1, 0x0);
        gbc.writeMem(0x52a7, { 0x38, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x51bc);
        EXPECT(gbc.pc(), 0x52a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0016
        gbc.setState(0x502e, 0xdc1e, 0xc810, 0x772d, 0xc6d4, 0x1e18, 0x1, 0x0);
        gbc.writeMem(0x502e, { 0x38, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xdc1e);
        EXPECT(gbc.pc(), 0x4ff3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0017
        gbc.setState(0x3479, 0xb77c, 0xfb70, 0x10d1, 0xb4b8, 0xa9e8, 0x0, 0x1);
        gbc.writeMem(0x3479, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb77c);
        EXPECT(gbc.pc(), 0x34ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0019
        gbc.setState(0x831b, 0x32b1, 0xf720, 0x6802, 0xda76, 0xd652, 0x0, 0x0);
        gbc.writeMem(0x831b, { 0x38, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x32b1);
        EXPECT(gbc.pc(), 0x831d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831b), 0x38);
        EXPECT(gbc.readMem(0x831c), 0xe0);
        // 38 001A
        gbc.setState(0x8c66, 0x1be3, 0xeba0, 0x7079, 0x39cd, 0x9c57, 0x0, 0x1);
        gbc.writeMem(0x8c66, { 0x38, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x1be3);
        EXPECT(gbc.pc(), 0x8c68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c66), 0x38);
        EXPECT(gbc.readMem(0x8c67), 0x5f);
        // 38 001B
        gbc.setState(0xac0d, 0x6b8d, 0x92c0, 0xa6a4, 0x65d3, 0xae9f, 0x1, 0x0);
        gbc.writeMem(0xac0d, { 0x38, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6b8d);
        EXPECT(gbc.pc(), 0xac0f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac0d), 0x38);
        EXPECT(gbc.readMem(0xac0e), 0x30);
        // 38 001C
        gbc.setState(0xbc08, 0xc54c, 0x5890, 0xb560, 0x3cd6, 0xcaf4, 0x0, 0x0);
        gbc.writeMem(0xbc08, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc54c);
        EXPECT(gbc.pc(), 0xbbb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc08), 0x38);
        EXPECT(gbc.readMem(0xbc09), 0xac);
        // 38 001D
        gbc.setState(0xb51e, 0xbcea, 0xaa10, 0xf023, 0x80ad, 0xbd3f, 0x1, 0x1);
        gbc.writeMem(0xb51e, { 0x38, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xbcea);
        EXPECT(gbc.pc(), 0xb56c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb51e), 0x38);
        EXPECT(gbc.readMem(0xb51f), 0x4c);
        // 38 001E
        gbc.setState(0x7550, 0xdc08, 0x38c0, 0x8ca, 0x729b, 0x990, 0x1, 0x1);
        gbc.writeMem(0x7550, { 0x38, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xdc08);
        EXPECT(gbc.pc(), 0x7552);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 001F
        gbc.setState(0x1762, 0x396f, 0x5550, 0x7183, 0x72f5, 0x4189, 0x1, 0x0);
        gbc.writeMem(0x1762, { 0x38, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x396f);
        EXPECT(gbc.pc(), 0x1769);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0020
        gbc.setState(0x9221, 0xe5d0, 0xdfd0, 0x1c74, 0xbafc, 0x3dc7, 0x1, 0x1);
        gbc.writeMem(0x9221, { 0x38, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xe5d0);
        EXPECT(gbc.pc(), 0x9211);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9221), 0x38);
        EXPECT(gbc.readMem(0x9222), 0xee);
        // 38 0022
        gbc.setState(0x6fb8, 0x305f, 0x4880, 0x64f, 0x30e6, 0xd9a, 0x1, 0x1);
        gbc.writeMem(0x6fb8, { 0x38, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x305f);
        EXPECT(gbc.pc(), 0x6fba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0023
        gbc.setState(0x64fb, 0x604a, 0x2850, 0x16cc, 0xaaa7, 0x5d5, 0x0, 0x1);
        gbc.writeMem(0x64fb, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xcc);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x604a);
        EXPECT(gbc.pc(), 0x6529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0024
        gbc.setState(0x8339, 0x45ad, 0x1f20, 0x2bff, 0x2f21, 0xe8af, 0x0, 0x0);
        gbc.writeMem(0x8339, { 0x38, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x45ad);
        EXPECT(gbc.pc(), 0x833b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8339), 0x38);
        EXPECT(gbc.readMem(0x833a), 0xaf);
        // 38 0025
        gbc.setState(0x563f, 0x62d5, 0xbff0, 0x2f02, 0xb77, 0x3244, 0x1, 0x1);
        gbc.writeMem(0x563f, { 0x38, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x62d5);
        EXPECT(gbc.pc(), 0x561f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0026
        gbc.setState(0x9afe, 0x8ebb, 0x5040, 0x122e, 0xb7ec, 0x76f, 0x1, 0x0);
        gbc.writeMem(0x9afe, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x8ebb);
        EXPECT(gbc.pc(), 0x9b00);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9afe), 0x38);
        EXPECT(gbc.readMem(0x9aff), 0x53);
        // 38 0027
        gbc.setState(0x210f, 0xf5ed, 0xb720, 0xc393, 0x2254, 0x533f, 0x0, 0x0);
        gbc.writeMem(0x210f, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xf5ed);
        EXPECT(gbc.pc(), 0x2111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0028
        gbc.setState(0x18cc, 0xcdce, 0x2fc0, 0xa428, 0x58d, 0x7986, 0x1, 0x0);
        gbc.writeMem(0x18cc, { 0x38, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcdce);
        EXPECT(gbc.pc(), 0x18ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0029
        gbc.setState(0xd33, 0x7416, 0x3eb0, 0x841c, 0x8964, 0xcefd, 0x0, 0x0);
        gbc.writeMem(0xd33, { 0x38, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x7416);
        EXPECT(gbc.pc(), 0xdae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 002A
        gbc.setState(0xa0ae, 0x4b82, 0xeb20, 0x676c, 0x4591, 0x9911, 0x1, 0x1);
        gbc.writeMem(0xa0ae, { 0x38, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x4b82);
        EXPECT(gbc.pc(), 0xa0b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ae), 0x38);
        EXPECT(gbc.readMem(0xa0af), 0xb1);
        // 38 002B
        gbc.setState(0x7331, 0xdd3, 0xefd0, 0x879c, 0x1ba0, 0x5dd2, 0x1, 0x0);
        gbc.writeMem(0x7331, { 0x38, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdd3);
        EXPECT(gbc.pc(), 0x7367);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 002D
        gbc.setState(0x3198, 0xf73, 0xf830, 0x54e1, 0xb2b9, 0x5a5e, 0x0, 0x1);
        gbc.writeMem(0x3198, { 0x38, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xf73);
        EXPECT(gbc.pc(), 0x3142);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 002E
        gbc.setState(0x914f, 0x302b, 0xde70, 0xa0c4, 0xe65c, 0xb722, 0x0, 0x0);
        gbc.writeMem(0x914f, { 0x38, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x302b);
        EXPECT(gbc.pc(), 0x9197);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x914f), 0x38);
        EXPECT(gbc.readMem(0x9150), 0x46);
        // 38 002F
        gbc.setState(0x10ab, 0x83ff, 0x9d70, 0xfecd, 0x6cdb, 0xc179, 0x1, 0x1);
        gbc.writeMem(0x10ab, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x83ff);
        EXPECT(gbc.pc(), 0x10ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0030
        gbc.setState(0x7ca5, 0x88c5, 0xf0d0, 0xd4a5, 0x1aec, 0xaea9, 0x1, 0x1);
        gbc.writeMem(0x7ca5, { 0x38, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x88c5);
        EXPECT(gbc.pc(), 0x7c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0031
        gbc.setState(0x6314, 0x41fe, 0x6f60, 0xcae5, 0x7f3a, 0xefc7, 0x1, 0x1);
        gbc.writeMem(0x6314, { 0x38, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x41fe);
        EXPECT(gbc.pc(), 0x6316);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0033
        gbc.setState(0xdaaf, 0xcb39, 0x5180, 0x4703, 0x2a07, 0x4f8a, 0x0, 0x1);
        gbc.writeMem(0xdaaf, { 0x38, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xcb39);
        EXPECT(gbc.pc(), 0xdab1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdaaf), 0x38);
        EXPECT(gbc.readMem(0xdab0), 0xf0);
        // 38 0034
        gbc.setState(0x7348, 0xb86c, 0xf0a0, 0x2892, 0x4fd8, 0xf426, 0x0, 0x0);
        gbc.writeMem(0x7348, { 0x38, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb86c);
        EXPECT(gbc.pc(), 0x734a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0035
        gbc.setState(0x408d, 0x47cd, 0xc080, 0x8805, 0x313a, 0x475c, 0x0, 0x1);
        gbc.writeMem(0x408d, { 0x38, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x47cd);
        EXPECT(gbc.pc(), 0x408f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0036
        gbc.setState(0x543, 0x3aab, 0xd7e0, 0xc5f0, 0xae25, 0x9e9f, 0x1, 0x0);
        gbc.writeMem(0x543, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x3aab);
        EXPECT(gbc.pc(), 0x545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0037
        gbc.setState(0x2173, 0xedd4, 0x6780, 0xd3a4, 0xf04c, 0x2405, 0x1, 0x1);
        gbc.writeMem(0x2173, { 0x38, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xedd4);
        EXPECT(gbc.pc(), 0x2175);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0038
        gbc.setState(0x2da8, 0x829c, 0x30d0, 0x1c16, 0xa72b, 0x5311, 0x1, 0x1);
        gbc.writeMem(0x2da8, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x829c);
        EXPECT(gbc.pc(), 0x2dbf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0039
        gbc.setState(0x35d2, 0x4612, 0x32a0, 0x78b4, 0x372, 0xe041, 0x0, 0x0);
        gbc.writeMem(0x35d2, { 0x38, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x4612);
        EXPECT(gbc.pc(), 0x35d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 003A
        gbc.setState(0xed6a, 0xc6d5, 0x41b0, 0x4bc2, 0xb13d, 0x32a4, 0x0, 0x1);
        gbc.writeMem(0xed6a, { 0x38, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xc6d5);
        EXPECT(gbc.pc(), 0xed39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xed6a), 0x38);
        EXPECT(gbc.readMem(0xed6b), 0xcd);
        // 38 003B
        gbc.setState(0xdf51, 0xc69b, 0x6a40, 0xa1e8, 0xc03b, 0x4e9, 0x1, 0x0);
        gbc.writeMem(0xdf51, { 0x38, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc69b);
        EXPECT(gbc.pc(), 0xdf53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf51), 0x38);
        EXPECT(gbc.readMem(0xdf52), 0xba);
        // 38 003D
        gbc.setState(0xc064, 0xf317, 0xcbf0, 0x318d, 0xf83b, 0x87c6, 0x0, 0x1);
        gbc.writeMem(0xc064, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xf317);
        EXPECT(gbc.pc(), 0xc000);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc064), 0x38);
        EXPECT(gbc.readMem(0xc065), 0x9a);
        // 38 003E
        gbc.setState(0x2976, 0x1a70, 0xb500, 0xb027, 0xb82e, 0x791b, 0x1, 0x0);
        gbc.writeMem(0x2976, { 0x38, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x1a70);
        EXPECT(gbc.pc(), 0x2978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 003F
        gbc.setState(0xe26f, 0x6804, 0x9170, 0x81ac, 0x9110, 0xc053, 0x1, 0x1);
        gbc.writeMem(0xe26f, { 0x38, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x6804);
        EXPECT(gbc.pc(), 0xe2d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe26f), 0x38);
        EXPECT(gbc.readMem(0xe270), 0x62);
        // 38 0040
        gbc.setState(0xb471, 0x6e9c, 0x2940, 0x1a02, 0x6e15, 0x45b1, 0x1, 0x0);
        gbc.writeMem(0xb471, { 0x38, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x6e9c);
        EXPECT(gbc.pc(), 0xb473);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb471), 0x38);
        EXPECT(gbc.readMem(0xb472), 0xc);
        // 38 0041
        gbc.setState(0x2e9f, 0xda03, 0x40f0, 0xcf1b, 0x8180, 0xbad4, 0x0, 0x1);
        gbc.writeMem(0x2e9f, { 0x38, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xda03);
        EXPECT(gbc.pc(), 0x2f13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0042
        gbc.setState(0x9f40, 0xf36, 0x9e70, 0x86e, 0x884a, 0xcbff, 0x1, 0x1);
        gbc.writeMem(0x9f40, { 0x38, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xf36);
        EXPECT(gbc.pc(), 0x9f2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f40), 0x38);
        EXPECT(gbc.readMem(0x9f41), 0xed);
        // 38 0043
        gbc.setState(0xbc5e, 0xe3ec, 0x9720, 0x3e00, 0xe446, 0x57d0, 0x0, 0x0);
        gbc.writeMem(0xbc5e, { 0x38, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe3ec);
        EXPECT(gbc.pc(), 0xbc60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc5e), 0x38);
        EXPECT(gbc.readMem(0xbc5f), 0xf4);
        // 38 0044
        gbc.setState(0x1767, 0xc75e, 0x7310, 0x1178, 0x9ef1, 0xc268, 0x0, 0x1);
        gbc.writeMem(0x1767, { 0x38, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xc75e);
        EXPECT(gbc.pc(), 0x175e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0045
        gbc.setState(0xcc12, 0xe47c, 0x9e60, 0x246c, 0xb7ab, 0xd9ae, 0x1, 0x0);
        gbc.writeMem(0xcc12, { 0x38, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xe47c);
        EXPECT(gbc.pc(), 0xcc14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc12), 0x38);
        EXPECT(gbc.readMem(0xcc13), 0xf0);
        // 38 0046
        gbc.setState(0x33c3, 0x7656, 0x3b20, 0xfaca, 0x602b, 0x6d0f, 0x1, 0x1);
        gbc.writeMem(0x33c3, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x7656);
        EXPECT(gbc.pc(), 0x33c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0047
        gbc.setState(0xdc80, 0xc97, 0x6210, 0x3ed7, 0x14fc, 0xf4e5, 0x1, 0x0);
        gbc.writeMem(0xdc80, { 0x38, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xc97);
        EXPECT(gbc.pc(), 0xdc3f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc80), 0x38);
        EXPECT(gbc.readMem(0xdc81), 0xbd);
        // 38 0048
        gbc.setState(0xad2b, 0x5666, 0x2f90, 0xc55a, 0x849b, 0xb537, 0x1, 0x1);
        gbc.writeMem(0xad2b, { 0x38, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x5666);
        EXPECT(gbc.pc(), 0xaccc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad2b), 0x38);
        EXPECT(gbc.readMem(0xad2c), 0x9f);
        // 38 0049
        gbc.setState(0x9f06, 0xa2c6, 0x6c00, 0x5cf5, 0x60c7, 0x8e37, 0x0, 0x1);
        gbc.writeMem(0x9f06, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xa2c6);
        EXPECT(gbc.pc(), 0x9f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f06), 0x38);
        EXPECT(gbc.readMem(0x9f07), 0x21);
        // 38 004A
        gbc.setState(0xbfb0, 0xe6e6, 0xaab0, 0x7653, 0x7b6c, 0x1fac, 0x0, 0x0);
        gbc.writeMem(0xbfb0, { 0x38, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe6e6);
        EXPECT(gbc.pc(), 0xbf35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb0), 0x38);
        EXPECT(gbc.readMem(0xbfb1), 0x83);
        // 38 004B
        gbc.setState(0x96b8, 0xea97, 0x4e70, 0x82e9, 0x69cd, 0x8dea, 0x1, 0x0);
        gbc.writeMem(0x96b8, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xea97);
        EXPECT(gbc.pc(), 0x9709);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96b8), 0x38);
        EXPECT(gbc.readMem(0x96b9), 0x4f);
        // 38 004C
        gbc.setState(0x1df0, 0x6e64, 0x5a70, 0x5047, 0x7a84, 0x1c70, 0x0, 0x0);
        gbc.writeMem(0x1df0, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x6e64);
        EXPECT(gbc.pc(), 0x1da9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 004D
        gbc.setState(0x8d07, 0xe843, 0xc390, 0xbdee, 0x9485, 0xad6b, 0x0, 0x0);
        gbc.writeMem(0x8d07, { 0x38, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xe843);
        EXPECT(gbc.pc(), 0x8d5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d07), 0x38);
        EXPECT(gbc.readMem(0x8d08), 0x52);
        // 38 004E
        gbc.setState(0x9f5b, 0x4b7, 0xebb0, 0x15f9, 0x31d, 0x9b01, 0x0, 0x1);
        gbc.writeMem(0x9f5b, { 0x38, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4b7);
        EXPECT(gbc.pc(), 0x9f53);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f5b), 0x38);
        EXPECT(gbc.readMem(0x9f5c), 0xf6);
        // 38 004F
        gbc.setState(0x21c6, 0x1eea, 0x6f40, 0xd144, 0x98eb, 0xe901, 0x1, 0x0);
        gbc.writeMem(0x21c6, { 0x38, 0x7 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x1eea);
        EXPECT(gbc.pc(), 0x21c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0051
        gbc.setState(0x274d, 0x323d, 0xddb0, 0x7162, 0xc17a, 0x1ebf, 0x1, 0x0);
        gbc.writeMem(0x274d, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x323d);
        EXPECT(gbc.pc(), 0x26df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0052
        gbc.setState(0xb28, 0xfa5d, 0x9d0, 0x61d6, 0x43b3, 0xeced, 0x0, 0x0);
        gbc.writeMem(0xb28, { 0x38, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xfa5d);
        EXPECT(gbc.pc(), 0xb4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0053
        gbc.setState(0x5e77, 0x1b39, 0x10, 0xe038, 0x4ae0, 0x3849, 0x0, 0x0);
        gbc.writeMem(0x5e77, { 0x38, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1b39);
        EXPECT(gbc.pc(), 0x5ea6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0055
        gbc.setState(0x9e74, 0x5aea, 0x17b0, 0x5f7b, 0x25a2, 0xf2db, 0x1, 0x1);
        gbc.writeMem(0x9e74, { 0x38, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5aea);
        EXPECT(gbc.pc(), 0x9e64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e74), 0x38);
        EXPECT(gbc.readMem(0x9e75), 0xee);
        // 38 0056
        gbc.setState(0x3fa2, 0xf4d8, 0xbbf0, 0xba99, 0xd666, 0xc592, 0x0, 0x0);
        gbc.writeMem(0x3fa2, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf4d8);
        EXPECT(gbc.pc(), 0x3fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0057
        gbc.setState(0x1397, 0x9f02, 0xf590, 0x341e, 0x252c, 0xb2ba, 0x1, 0x1);
        gbc.writeMem(0x1397, { 0x38, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x9f02);
        EXPECT(gbc.pc(), 0x1323);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0058
        gbc.setState(0xa882, 0xe457, 0x2ab0, 0xdf59, 0x4522, 0x5f98, 0x1, 0x1);
        gbc.writeMem(0xa882, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0xe457);
        EXPECT(gbc.pc(), 0xa8a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa882), 0x38);
        EXPECT(gbc.readMem(0xa883), 0x21);
        // 38 0059
        gbc.setState(0x4453, 0x2453, 0x710, 0xb3a9, 0xc7bd, 0x8ce1, 0x1, 0x1);
        gbc.writeMem(0x4453, { 0x38, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x2453);
        EXPECT(gbc.pc(), 0x4490);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 005A
        gbc.setState(0x8922, 0x402e, 0xf030, 0x5c78, 0x1776, 0x95ad, 0x0, 0x1);
        gbc.writeMem(0x8922, { 0x38, 0xba });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x402e);
        EXPECT(gbc.pc(), 0x88de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8922), 0x38);
        EXPECT(gbc.readMem(0x8923), 0xba);
        // 38 005B
        gbc.setState(0x68eb, 0xb8aa, 0xbf60, 0xe8a9, 0xe1fc, 0x53ce, 0x0, 0x0);
        gbc.writeMem(0x68eb, { 0x38, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb8aa);
        EXPECT(gbc.pc(), 0x68ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 005C
        gbc.setState(0x8919, 0xd201, 0xd380, 0x8739, 0xfb89, 0xaf2f, 0x1, 0x0);
        gbc.writeMem(0x8919, { 0x38, 0xe4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xd201);
        EXPECT(gbc.pc(), 0x891b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8919), 0x38);
        EXPECT(gbc.readMem(0x891a), 0xe4);
        // 38 005D
        gbc.setState(0x7633, 0x6b3e, 0xf9a0, 0xff5f, 0xec74, 0x3feb, 0x0, 0x0);
        gbc.writeMem(0x7633, { 0x38, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x6b3e);
        EXPECT(gbc.pc(), 0x7635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 005E
        gbc.setState(0xd19b, 0xea8f, 0xeff0, 0x2229, 0x4185, 0x8aa6, 0x1, 0x1);
        gbc.writeMem(0xd19b, { 0x38, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xea8f);
        EXPECT(gbc.pc(), 0xd15b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19b), 0x38);
        EXPECT(gbc.readMem(0xd19c), 0xbe);
        // 38 005F
        gbc.setState(0xd720, 0x8155, 0x3480, 0x2116, 0xd65a, 0x9c45, 0x1, 0x1);
        gbc.writeMem(0xd720, { 0x38, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8155);
        EXPECT(gbc.pc(), 0xd722);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd720), 0x38);
        EXPECT(gbc.readMem(0xd721), 0x83);
        // 38 0060
        gbc.setState(0xde62, 0xdbeb, 0xc4c0, 0x46e8, 0xa576, 0x7be3, 0x0, 0x0);
        gbc.writeMem(0xde62, { 0x38, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xdbeb);
        EXPECT(gbc.pc(), 0xde64);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde62), 0x38);
        EXPECT(gbc.readMem(0xde63), 0xd9);
        // 38 0063
        gbc.setState(0xbf89, 0xc8da, 0x61e0, 0x4f8c, 0x4c99, 0x48ce, 0x1, 0x1);
        gbc.writeMem(0xbf89, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xc8da);
        EXPECT(gbc.pc(), 0xbf8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf89), 0x38);
        EXPECT(gbc.readMem(0xbf8a), 0x32);
        // 38 0064
        gbc.setState(0xda3, 0xe619, 0xa990, 0xe41a, 0x1cd9, 0xe27d, 0x0, 0x0);
        gbc.writeMem(0xda3, { 0x38, 0xd2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe619);
        EXPECT(gbc.pc(), 0xd77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0065
        gbc.setState(0xa132, 0xe156, 0x46e0, 0x4795, 0x5ede, 0x3b7e, 0x1, 0x0);
        gbc.writeMem(0xa132, { 0x38, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xe156);
        EXPECT(gbc.pc(), 0xa134);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa132), 0x38);
        EXPECT(gbc.readMem(0xa133), 0xa2);
        // 38 0067
        gbc.setState(0x9e2c, 0x2957, 0x7b10, 0xe9da, 0xbf8a, 0x13c5, 0x0, 0x1);
        gbc.writeMem(0x9e2c, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x2957);
        EXPECT(gbc.pc(), 0x9db6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e2c), 0x38);
        EXPECT(gbc.readMem(0x9e2d), 0x88);
        // 38 0068
        gbc.setState(0xbb1, 0x3307, 0x9ac0, 0x5005, 0x902d, 0x76fd, 0x1, 0x1);
        gbc.writeMem(0xbb1, { 0x38, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x3307);
        EXPECT(gbc.pc(), 0xbb3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0069
        gbc.setState(0x629, 0xb47d, 0x7b30, 0x65e9, 0x4e4a, 0xa97e, 0x0, 0x0);
        gbc.writeMem(0x629, { 0x38, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0xb47d);
        EXPECT(gbc.pc(), 0x5f1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 006A
        gbc.setState(0x43f9, 0xea87, 0xcb70, 0xd32, 0x59ca, 0xeb38, 0x0, 0x1);
        gbc.writeMem(0x43f9, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xea87);
        EXPECT(gbc.pc(), 0x442d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 006B
        gbc.setState(0x8665, 0x13ca, 0x6e60, 0xfcc5, 0xf08, 0x417e, 0x1, 0x0);
        gbc.writeMem(0x8665, { 0x38, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x13ca);
        EXPECT(gbc.pc(), 0x8667);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8665), 0x38);
        EXPECT(gbc.readMem(0x8666), 0x1f);
        // 38 006C
        gbc.setState(0x57ae, 0xff61, 0x1a0, 0x943a, 0x99cf, 0x3196, 0x1, 0x1);
        gbc.writeMem(0x57ae, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xff61);
        EXPECT(gbc.pc(), 0x57b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 006D
        gbc.setState(0x7676, 0x4c9, 0xcb20, 0x9517, 0xf86b, 0x47f3, 0x0, 0x0);
        gbc.writeMem(0x7676, { 0x38, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x4c9);
        EXPECT(gbc.pc(), 0x7678);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 006E
        gbc.setState(0xedf3, 0xb5cd, 0x7f80, 0xf4c3, 0xb9d1, 0xd0db, 0x1, 0x1);
        gbc.writeMem(0xedf3, { 0x38, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0xb5cd);
        EXPECT(gbc.pc(), 0xedf5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf3), 0x38);
        EXPECT(gbc.readMem(0xedf4), 0x2);
        // 38 006F
        gbc.setState(0x2fc5, 0xe5c3, 0x80f0, 0x5f9a, 0xe88, 0xb80c, 0x0, 0x1);
        gbc.writeMem(0x2fc5, { 0x38, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xe5c3);
        EXPECT(gbc.pc(), 0x2fc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0070
        gbc.setState(0x5d40, 0x6b4d, 0x5940, 0xadee, 0xc18f, 0xd608, 0x1, 0x1);
        gbc.writeMem(0x5d40, { 0x38, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6b4d);
        EXPECT(gbc.pc(), 0x5d42);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0071
        gbc.setState(0x2c2b, 0x8d3a, 0xd7b0, 0x3a15, 0xd82, 0x7831, 0x0, 0x0);
        gbc.writeMem(0x2c2b, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x8d3a);
        EXPECT(gbc.pc(), 0x2c87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0072
        gbc.setState(0xe6d7, 0xb984, 0x9890, 0x9617, 0xd233, 0xddf1, 0x1, 0x1);
        gbc.writeMem(0xe6d7, { 0x38, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xb984);
        EXPECT(gbc.pc(), 0xe65f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d7), 0x38);
        EXPECT(gbc.readMem(0xe6d8), 0x86);
        // 38 0073
        gbc.setState(0x2db, 0xc57e, 0x8c00, 0x87e8, 0xdd7d, 0xed4d, 0x1, 0x1);
        gbc.writeMem(0x2db, { 0x38, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc57e);
        EXPECT(gbc.pc(), 0x2dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0074
        gbc.setState(0x1817, 0x5641, 0x3ba0, 0xdf42, 0x2f7, 0x1533, 0x1, 0x0);
        gbc.writeMem(0x1817, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5641);
        EXPECT(gbc.pc(), 0x1819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0075
        gbc.setState(0xa638, 0x136b, 0x8d30, 0xefc2, 0x4ce7, 0xf4e9, 0x0, 0x0);
        gbc.writeMem(0xa638, { 0x38, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x136b);
        EXPECT(gbc.pc(), 0xa5ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa638), 0x38);
        EXPECT(gbc.readMem(0xa639), 0x80);
        // 38 0076
        gbc.setState(0xb406, 0xd3c3, 0xcd10, 0x48ee, 0x7b31, 0x315b, 0x0, 0x1);
        gbc.writeMem(0xb406, { 0x38, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd3c3);
        EXPECT(gbc.pc(), 0xb3cb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb406), 0x38);
        EXPECT(gbc.readMem(0xb407), 0xc3);
        // 38 0077
        gbc.setState(0x548e, 0xdd59, 0x51d0, 0xa55d, 0x3a45, 0x2f44, 0x0, 0x1);
        gbc.writeMem(0x548e, { 0x38, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xdd59);
        EXPECT(gbc.pc(), 0x5432);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0078
        gbc.setState(0x6a9c, 0x492c, 0x36f0, 0xe236, 0xfa91, 0xe16c, 0x1, 0x1);
        gbc.writeMem(0x6a9c, { 0x38, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x492c);
        EXPECT(gbc.pc(), 0x6aab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0079
        gbc.setState(0x92e1, 0x6cb0, 0xbd80, 0x6984, 0x22e1, 0x2808, 0x1, 0x0);
        gbc.writeMem(0x92e1, { 0x38, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0x6cb0);
        EXPECT(gbc.pc(), 0x92e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92e1), 0x38);
        EXPECT(gbc.readMem(0x92e2), 0xbb);
        // 38 007A
        gbc.setState(0xb1f9, 0x1652, 0x76e0, 0xf8f6, 0x27d9, 0xaf9d, 0x0, 0x1);
        gbc.writeMem(0xb1f9, { 0x38, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1652);
        EXPECT(gbc.pc(), 0xb1fb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1f9), 0x38);
        EXPECT(gbc.readMem(0xb1fa), 0x49);
        // 38 007B
        gbc.setState(0x6f19, 0x24ca, 0x5cf0, 0x7e55, 0xfcbb, 0xfc59, 0x1, 0x1);
        gbc.writeMem(0x6f19, { 0x38, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x24ca);
        EXPECT(gbc.pc(), 0x6f40);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 007C
        gbc.setState(0xaa6a, 0xac4d, 0xa2c0, 0xe5dc, 0xe0c7, 0x5a1c, 0x0, 0x1);
        gbc.writeMem(0xaa6a, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xac4d);
        EXPECT(gbc.pc(), 0xaa6c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa6a), 0x38);
        EXPECT(gbc.readMem(0xaa6b), 0xac);
        // 38 007D
        gbc.setState(0xcf78, 0xc488, 0x5a50, 0x977f, 0x9eb5, 0xed5b, 0x0, 0x0);
        gbc.writeMem(0xcf78, { 0x38, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xc488);
        EXPECT(gbc.pc(), 0xcf17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf78), 0x38);
        EXPECT(gbc.readMem(0xcf79), 0x9d);
        // 38 007F
        gbc.setState(0x2497, 0xe806, 0x9ac0, 0x5bae, 0xdd65, 0x7782, 0x0, 0x1);
        gbc.writeMem(0x2497, { 0x38, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe806);
        EXPECT(gbc.pc(), 0x2499);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0080
        gbc.setState(0xbbad, 0xbe14, 0x55e0, 0x31af, 0x9d45, 0xebd8, 0x1, 0x1);
        gbc.writeMem(0xbbad, { 0x38, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xbe14);
        EXPECT(gbc.pc(), 0xbbaf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbad), 0x38);
        EXPECT(gbc.readMem(0xbbae), 0xce);
        // 38 0081
        gbc.setState(0x6361, 0xc8f8, 0x4fc0, 0xf4aa, 0x7009, 0x1315, 0x1, 0x0);
        gbc.writeMem(0x6361, { 0x38, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc8f8);
        EXPECT(gbc.pc(), 0x6363);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0082
        gbc.setState(0x748e, 0xa271, 0x8c50, 0xf9c9, 0xeeef, 0xeb5, 0x0, 0x0);
        gbc.writeMem(0x748e, { 0x38, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xa271);
        EXPECT(gbc.pc(), 0x744d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0085
        gbc.setState(0xa0c8, 0xa4b4, 0x5de0, 0xfe63, 0x8562, 0x49cc, 0x1, 0x1);
        gbc.writeMem(0xa0c8, { 0x38, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa4b4);
        EXPECT(gbc.pc(), 0xa0ca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c8), 0x38);
        EXPECT(gbc.readMem(0xa0c9), 0x7b);
        // 38 0086
        gbc.setState(0xb843, 0x2787, 0x4b30, 0x5821, 0x276b, 0xd6f3, 0x0, 0x1);
        gbc.writeMem(0xb843, { 0x38, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x2787);
        EXPECT(gbc.pc(), 0xb80d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb843), 0x38);
        EXPECT(gbc.readMem(0xb844), 0xc8);
        // 38 0087
        gbc.setState(0x21a5, 0xaff8, 0x7570, 0xfc82, 0xa327, 0x6e36, 0x0, 0x0);
        gbc.writeMem(0x21a5, { 0x38, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xaff8);
        EXPECT(gbc.pc(), 0x2214);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0088
        gbc.setState(0xcd29, 0x5b0, 0x85c0, 0x2a53, 0xdc82, 0x33ec, 0x0, 0x0);
        gbc.writeMem(0xcd29, { 0x38, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0x5b0);
        EXPECT(gbc.pc(), 0xcd2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd29), 0x38);
        EXPECT(gbc.readMem(0xcd2a), 0x81);
        // 38 008A
        gbc.setState(0x3f0, 0xfa0e, 0xbc40, 0x6824, 0x25d0, 0xdf4b, 0x0, 0x1);
        gbc.writeMem(0x3f0, { 0x38, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xfa0e);
        EXPECT(gbc.pc(), 0x3f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 008B
        gbc.setState(0x49eb, 0x7279, 0x4490, 0x287a, 0xabcd, 0xb068, 0x0, 0x0);
        gbc.writeMem(0x49eb, { 0x38, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x7279);
        EXPECT(gbc.pc(), 0x4a28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 008C
        gbc.setState(0xca8d, 0x28cc, 0x3af0, 0xfb7a, 0xf2bf, 0xe9bf, 0x0, 0x0);
        gbc.writeMem(0xca8d, { 0x38, 0x72 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x28cc);
        EXPECT(gbc.pc(), 0xcb01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca8d), 0x38);
        EXPECT(gbc.readMem(0xca8e), 0x72);
        // 38 008D
        gbc.setState(0xa8ef, 0x90b4, 0xa230, 0xd532, 0x54d, 0x4fe0, 0x1, 0x0);
        gbc.writeMem(0xa8ef, { 0x38, 0xb2 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x90b4);
        EXPECT(gbc.pc(), 0xa8a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ef), 0x38);
        EXPECT(gbc.readMem(0xa8f0), 0xb2);
        // 38 008E
        gbc.setState(0x6e23, 0x51a0, 0x63b0, 0xeacb, 0x5acd, 0x5b88, 0x1, 0x1);
        gbc.writeMem(0x6e23, { 0x38, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x51a0);
        EXPECT(gbc.pc(), 0x6e84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 008F
        gbc.setState(0xd8fa, 0x5695, 0x28c0, 0xebcf, 0xfa24, 0x8829, 0x1, 0x1);
        gbc.writeMem(0xd8fa, { 0x38, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x5695);
        EXPECT(gbc.pc(), 0xd8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8fa), 0x38);
        EXPECT(gbc.readMem(0xd8fb), 0x14);
        // 38 0090
        gbc.setState(0x7882, 0x20fe, 0x2710, 0x307b, 0x88f0, 0x5e3c, 0x1, 0x0);
        gbc.writeMem(0x7882, { 0x38, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x20fe);
        EXPECT(gbc.pc(), 0x78db);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0091
        gbc.setState(0x73f3, 0xb738, 0x8f20, 0x967f, 0x515f, 0x89e9, 0x1, 0x1);
        gbc.writeMem(0x73f3, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xb738);
        EXPECT(gbc.pc(), 0x73f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0092
        gbc.setState(0x6ec6, 0x1452, 0xd8d0, 0xdab5, 0xb95d, 0xc31, 0x0, 0x0);
        gbc.writeMem(0x6ec6, { 0x38, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x1452);
        EXPECT(gbc.pc(), 0x6f08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0093
        gbc.setState(0xe97c, 0x742d, 0x4370, 0xb6d4, 0xa283, 0x2fbf, 0x0, 0x1);
        gbc.writeMem(0xe97c, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x742d);
        EXPECT(gbc.pc(), 0xe9d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe97c), 0x38);
        EXPECT(gbc.readMem(0xe97d), 0x5a);
        // 38 0094
        gbc.setState(0xc436, 0xd4c4, 0xbfd0, 0xe5d1, 0x7be5, 0x4684, 0x1, 0x1);
        gbc.writeMem(0xc436, { 0x38, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xd4c4);
        EXPECT(gbc.pc(), 0xc3fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc436), 0x38);
        EXPECT(gbc.readMem(0xc437), 0xc3);
        // 38 0095
        gbc.setState(0x4a40, 0x38af, 0x5c80, 0xbaa4, 0x95a4, 0xcfda, 0x0, 0x0);
        gbc.writeMem(0x4a40, { 0x38, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x38af);
        EXPECT(gbc.pc(), 0x4a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0096
        gbc.setState(0xe999, 0x42d0, 0x28c0, 0x2a65, 0xb658, 0x1969, 0x1, 0x0);
        gbc.writeMem(0xe999, { 0x38, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x42d0);
        EXPECT(gbc.pc(), 0xe99b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe999), 0x38);
        EXPECT(gbc.readMem(0xe99a), 0x74);
        // 38 0097
        gbc.setState(0x5356, 0x2ee9, 0xb400, 0xfd93, 0xf5ee, 0xd8bc, 0x0, 0x1);
        gbc.writeMem(0x5356, { 0x38, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x2ee9);
        EXPECT(gbc.pc(), 0x5358);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0098
        gbc.setState(0x831c, 0x7ad8, 0xb9a0, 0xfe21, 0x9e39, 0xab64, 0x0, 0x1);
        gbc.writeMem(0x831c, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x7ad8);
        EXPECT(gbc.pc(), 0x831e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x831c), 0x38);
        EXPECT(gbc.readMem(0x831d), 0x21);
        // 38 0099
        gbc.setState(0xdebc, 0x2733, 0x7640, 0xba31, 0x1f25, 0x9c78, 0x1, 0x0);
        gbc.writeMem(0xdebc, { 0x38, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x2733);
        EXPECT(gbc.pc(), 0xdebe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdebc), 0x38);
        EXPECT(gbc.readMem(0xdebd), 0x47);
        // 38 009A
        gbc.setState(0xae71, 0x941f, 0x4790, 0x575c, 0x7c27, 0x4f0b, 0x1, 0x1);
        gbc.writeMem(0xae71, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x941f);
        EXPECT(gbc.pc(), 0xae77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae71), 0x38);
        EXPECT(gbc.readMem(0xae72), 0x4);
        // 38 009B
        gbc.setState(0xcf17, 0xb140, 0x5730, 0x4a0c, 0x1c6f, 0x52f6, 0x0, 0x1);
        gbc.writeMem(0xcf17, { 0x38, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xb140);
        EXPECT(gbc.pc(), 0xcf01);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf17), 0x38);
        EXPECT(gbc.readMem(0xcf18), 0xe8);
        // 38 009C
        gbc.setState(0x8561, 0x29c8, 0x6c00, 0xb494, 0xf68, 0x2dad, 0x1, 0x1);
        gbc.writeMem(0x8561, { 0x38, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x29c8);
        EXPECT(gbc.pc(), 0x8563);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8561), 0x38);
        EXPECT(gbc.readMem(0x8562), 0xe9);
        // 38 009D
        gbc.setState(0x9917, 0xc069, 0x7b30, 0xaee2, 0x2c42, 0xb1a3, 0x1, 0x0);
        gbc.writeMem(0x9917, { 0x38, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xc069);
        EXPECT(gbc.pc(), 0x9903);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9917), 0x38);
        EXPECT(gbc.readMem(0x9918), 0xea);
        // 38 009E
        gbc.setState(0x2ce2, 0xab2f, 0x7f80, 0xe446, 0x4032, 0x46cc, 0x0, 0x0);
        gbc.writeMem(0x2ce2, { 0x38, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xab2f);
        EXPECT(gbc.pc(), 0x2ce4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 009F
        gbc.setState(0x585, 0x9885, 0xf0b0, 0x57e9, 0x2f6b, 0xd729, 0x0, 0x0);
        gbc.writeMem(0x585, { 0x38, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x9885);
        EXPECT(gbc.pc(), 0x5c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00A0
        gbc.setState(0xafbd, 0xd8c2, 0x86d0, 0x9e35, 0xb178, 0x6f2a, 0x1, 0x1);
        gbc.writeMem(0xafbd, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xd8c2);
        EXPECT(gbc.pc(), 0xb018);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xafbd), 0x38);
        EXPECT(gbc.readMem(0xafbe), 0x59);
        // 38 00A1
        gbc.setState(0xe6d8, 0x4d2, 0x5b50, 0x2eaf, 0x1ea6, 0xb651, 0x1, 0x0);
        gbc.writeMem(0xe6d8, { 0x38, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x4d2);
        EXPECT(gbc.pc(), 0xe6a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d8), 0x38);
        EXPECT(gbc.readMem(0xe6d9), 0xca);
        // 38 00A3
        gbc.setState(0xd613, 0xe594, 0xcd10, 0xfe65, 0xc833, 0x1145, 0x0, 0x0);
        gbc.writeMem(0xd613, { 0x38, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xc8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xe594);
        EXPECT(gbc.pc(), 0xd693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd613), 0x38);
        EXPECT(gbc.readMem(0xd614), 0x7e);
        // 38 00A5
        gbc.setState(0xcbd9, 0xdf0, 0x4cd0, 0x9986, 0xb363, 0x5b28, 0x1, 0x0);
        gbc.writeMem(0xcbd9, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0xdf0);
        EXPECT(gbc.pc(), 0xcb88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbd9), 0x38);
        EXPECT(gbc.readMem(0xcbda), 0xad);
        // 38 00A6
        gbc.setState(0x6e9a, 0x905b, 0x2fd0, 0xe267, 0xf3a1, 0x9686, 0x0, 0x0);
        gbc.writeMem(0x6e9a, { 0x38, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x905b);
        EXPECT(gbc.pc(), 0x6edb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00A7
        gbc.setState(0x26e, 0x909c, 0x1ca0, 0x50fd, 0x6cf, 0x51ef, 0x1, 0x1);
        gbc.writeMem(0x26e, { 0x38, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x909c);
        EXPECT(gbc.pc(), 0x270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00A8
        gbc.setState(0x1fb7, 0x7b9f, 0x4c30, 0xb56c, 0x7c37, 0x6073, 0x0, 0x0);
        gbc.writeMem(0x1fb7, { 0x38, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x7b9f);
        EXPECT(gbc.pc(), 0x1f8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00A9
        gbc.setState(0xb9b8, 0x282e, 0xce50, 0x3dbf, 0xf7be, 0x99cb, 0x0, 0x1);
        gbc.writeMem(0xb9b8, { 0x38, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x282e);
        EXPECT(gbc.pc(), 0xb9c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9b8), 0x38);
        EXPECT(gbc.readMem(0xb9b9), 0x9);
        // 38 00AA
        gbc.setState(0x97e6, 0xad4b, 0x8b70, 0xa386, 0xc762, 0x246c, 0x0, 0x1);
        gbc.writeMem(0x97e6, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xad4b);
        EXPECT(gbc.pc(), 0x9850);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97e6), 0x38);
        EXPECT(gbc.readMem(0x97e7), 0x68);
        // 38 00AB
        gbc.setState(0x9d8a, 0xe823, 0xa390, 0x4424, 0x2bea, 0x899a, 0x0, 0x0);
        gbc.writeMem(0x9d8a, { 0x38, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xe823);
        EXPECT(gbc.pc(), 0x9d86);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d8a), 0x38);
        EXPECT(gbc.readMem(0x9d8b), 0xfa);
        // 38 00AC
        gbc.setState(0x9c9e, 0xd0c7, 0xad70, 0x8a8, 0x30c1, 0xe76c, 0x1, 0x1);
        gbc.writeMem(0x9c9e, { 0x38, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0xd0c7);
        EXPECT(gbc.pc(), 0x9c9e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9c9e), 0x38);
        EXPECT(gbc.readMem(0x9c9f), 0xfe);
        // 38 00AD
        gbc.setState(0xcc97, 0xfa16, 0xbbc0, 0x1387, 0x70bc, 0x7c33, 0x0, 0x0);
        gbc.writeMem(0xcc97, { 0x38, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfa16);
        EXPECT(gbc.pc(), 0xcc99);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc97), 0x38);
        EXPECT(gbc.readMem(0xcc98), 0xe3);
        // 38 00AE
        gbc.setState(0xda4e, 0x9862, 0x1090, 0x2f70, 0x5093, 0xf834, 0x0, 0x0);
        gbc.writeMem(0xda4e, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x9862);
        EXPECT(gbc.pc(), 0xda9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda4e), 0x38);
        EXPECT(gbc.readMem(0xda4f), 0x4a);
        // 38 00AF
        gbc.setState(0x7303, 0x1acb, 0x9570, 0x909e, 0x4c35, 0xefe, 0x0, 0x0);
        gbc.writeMem(0x7303, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x1acb);
        EXPECT(gbc.pc(), 0x7321);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00B0
        gbc.setState(0x664e, 0x4ee0, 0xcc80, 0x77, 0x6daa, 0xe50, 0x0, 0x1);
        gbc.writeMem(0x664e, { 0x38, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x4ee0);
        EXPECT(gbc.pc(), 0x6650);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00B1
        gbc.setState(0xbbdc, 0x5ba6, 0x7ce0, 0xd2d9, 0xb356, 0x438c, 0x0, 0x1);
        gbc.writeMem(0xbbdc, { 0x38, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5ba6);
        EXPECT(gbc.pc(), 0xbbde);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbbdc), 0x38);
        EXPECT(gbc.readMem(0xbbdd), 0x6c);
        // 38 00B2
        gbc.setState(0x5b0e, 0xc7d0, 0x8480, 0xcc67, 0xf313, 0x3ead, 0x0, 0x0);
        gbc.writeMem(0x5b0e, { 0x38, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xc7d0);
        EXPECT(gbc.pc(), 0x5b10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00B3
        gbc.setState(0x6902, 0x186, 0xaef0, 0xe18d, 0x2ac7, 0x4dd4, 0x1, 0x0);
        gbc.writeMem(0x6902, { 0x38, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x186);
        EXPECT(gbc.pc(), 0x695c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00B4
        gbc.setState(0x6784, 0xe871, 0xc2c0, 0x6de5, 0xcc21, 0x606d, 0x0, 0x0);
        gbc.writeMem(0x6784, { 0x38, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe871);
        EXPECT(gbc.pc(), 0x6786);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00B6
        gbc.setState(0x6396, 0x2149, 0xb220, 0x5e5c, 0xca4e, 0x54dc, 0x1, 0x1);
        gbc.writeMem(0x6396, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0x2149);
        EXPECT(gbc.pc(), 0x6398);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00B7
        gbc.setState(0xba84, 0xf35c, 0x10b0, 0xb03a, 0xf632, 0x731e, 0x0, 0x0);
        gbc.writeMem(0xba84, { 0x38, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0xf35c);
        EXPECT(gbc.pc(), 0xbafc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba84), 0x38);
        EXPECT(gbc.readMem(0xba85), 0x76);
        // 38 00B8
        gbc.setState(0x3e07, 0x51f, 0x9c0, 0x2424, 0x8f84, 0x6120, 0x1, 0x1);
        gbc.writeMem(0x3e07, { 0x38, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x51f);
        EXPECT(gbc.pc(), 0x3e09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00B9
        gbc.setState(0x1023, 0x5ad, 0x2950, 0x6137, 0x2bbd, 0x4b32, 0x1, 0x0);
        gbc.writeMem(0x1023, { 0x38, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x5ad);
        EXPECT(gbc.pc(), 0x101a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00BA
        gbc.setState(0xe9f6, 0xb5d2, 0x6d50, 0x1e69, 0x1102, 0xc805, 0x1, 0x1);
        gbc.writeMem(0xe9f6, { 0x38, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xb5d2);
        EXPECT(gbc.pc(), 0xea46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9f6), 0x38);
        EXPECT(gbc.readMem(0xe9f7), 0x4e);
        // 38 00BB
        gbc.setState(0x904d, 0x9ffc, 0xdd0, 0xf0ea, 0x876e, 0xb720, 0x1, 0x1);
        gbc.writeMem(0x904d, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x9ffc);
        EXPECT(gbc.pc(), 0x8fe5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x904d), 0x38);
        EXPECT(gbc.readMem(0x904e), 0x96);
        // 38 00BC
        gbc.setState(0x900a, 0x35cb, 0x1040, 0x2899, 0xa5dc, 0xc82b, 0x1, 0x1);
        gbc.writeMem(0x900a, { 0x38, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x35cb);
        EXPECT(gbc.pc(), 0x900c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x900a), 0x38);
        EXPECT(gbc.readMem(0x900b), 0xf4);
        // 38 00BD
        gbc.setState(0xa859, 0xafb9, 0x89a0, 0x4b16, 0x2d1c, 0xb882, 0x1, 0x1);
        gbc.writeMem(0xa859, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xafb9);
        EXPECT(gbc.pc(), 0xa85b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa859), 0x38);
        EXPECT(gbc.readMem(0xa85a), 0x8e);
        // 38 00BE
        gbc.setState(0x4e9a, 0xa0d, 0x1260, 0x1350, 0xcac5, 0x5cd2, 0x1, 0x1);
        gbc.writeMem(0x4e9a, { 0x38, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa0d);
        EXPECT(gbc.pc(), 0x4e9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00BF
        gbc.setState(0x63c7, 0x247f, 0x5250, 0x991f, 0xab28, 0x9949, 0x1, 0x1);
        gbc.writeMem(0x63c7, { 0x38, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x247f);
        EXPECT(gbc.pc(), 0x638f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00C0
        gbc.setState(0xedd5, 0xbb92, 0x7330, 0x34fe, 0x9d61, 0x273d, 0x0, 0x0);
        gbc.writeMem(0xedd5, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xbb92);
        EXPECT(gbc.pc(), 0xee10);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedd5), 0x38);
        EXPECT(gbc.readMem(0xedd6), 0x39);
        // 38 00C2
        gbc.setState(0x8b72, 0x789f, 0x75c0, 0xa5d, 0xcfb2, 0xc368, 0x1, 0x0);
        gbc.writeMem(0x8b72, { 0x38, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x789f);
        EXPECT(gbc.pc(), 0x8b74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b72), 0x38);
        EXPECT(gbc.readMem(0x8b73), 0xd3);
        // 38 00C3
        gbc.setState(0x443f, 0xb532, 0x300, 0xb619, 0x60de, 0xaaf5, 0x1, 0x0);
        gbc.writeMem(0x443f, { 0x38, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xb532);
        EXPECT(gbc.pc(), 0x4441);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00C4
        gbc.setState(0xd643, 0x1f43, 0x4d50, 0xc49f, 0x8884, 0x6946, 0x1, 0x1);
        gbc.writeMem(0xd643, { 0x38, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x1f43);
        EXPECT(gbc.pc(), 0xd6be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd643), 0x38);
        EXPECT(gbc.readMem(0xd644), 0x79);
        // 38 00C5
        gbc.setState(0x3c7c, 0x51f1, 0xdf70, 0x9993, 0xc9b6, 0x2ee8, 0x0, 0x0);
        gbc.writeMem(0x3c7c, { 0x38, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x51f1);
        EXPECT(gbc.pc(), 0x3cba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00C6
        gbc.setState(0x705b, 0x31dc, 0x70f0, 0xecad, 0x3141, 0x89c, 0x0, 0x1);
        gbc.writeMem(0x705b, { 0x38, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xec);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x31dc);
        EXPECT(gbc.pc(), 0x6ffd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00C7
        gbc.setState(0x15ff, 0x35db, 0xfa00, 0x1e85, 0xdf5c, 0x4bdb, 0x1, 0x1);
        gbc.writeMem(0x15ff, { 0x38, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x35db);
        EXPECT(gbc.pc(), 0x1601);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00C8
        gbc.setState(0xea86, 0x8a50, 0xb280, 0xf218, 0x5027, 0x413c, 0x0, 0x1);
        gbc.writeMem(0xea86, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x8a50);
        EXPECT(gbc.pc(), 0xea88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea86), 0x38);
        EXPECT(gbc.readMem(0xea87), 0x4f);
        // 38 00C9
        gbc.setState(0xa574, 0x355a, 0x85e0, 0xe698, 0xb6c4, 0x4e9, 0x1, 0x0);
        gbc.writeMem(0xa574, { 0x38, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x355a);
        EXPECT(gbc.pc(), 0xa576);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa574), 0x38);
        EXPECT(gbc.readMem(0xa575), 0x94);
        // 38 00CA
        gbc.setState(0xc4fb, 0xf16c, 0x1470, 0xab9f, 0xead6, 0xac08, 0x0, 0x1);
        gbc.writeMem(0xc4fb, { 0x38, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf16c);
        EXPECT(gbc.pc(), 0xc4ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc4fb), 0x38);
        EXPECT(gbc.readMem(0xc4fc), 0x2);
        // 38 00CB
        gbc.setState(0x9a4c, 0x2fe, 0x61d0, 0x49d4, 0x4cf9, 0xbb38, 0x0, 0x0);
        gbc.writeMem(0x9a4c, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x2fe);
        EXPECT(gbc.pc(), 0x9aa8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4c), 0x38);
        EXPECT(gbc.readMem(0x9a4d), 0x5a);
        // 38 00CC
        gbc.setState(0x5ba3, 0xac32, 0x7560, 0x77f3, 0x8774, 0xa967, 0x1, 0x1);
        gbc.writeMem(0x5ba3, { 0x38, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xac32);
        EXPECT(gbc.pc(), 0x5ba5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00CD
        gbc.setState(0xa3f6, 0xa4a7, 0x2990, 0x2de0, 0xd485, 0xa45, 0x0, 0x0);
        gbc.writeMem(0xa3f6, { 0x38, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xa4a7);
        EXPECT(gbc.pc(), 0xa3e2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa3f6), 0x38);
        EXPECT(gbc.readMem(0xa3f7), 0xea);
        // 38 00CE
        gbc.setState(0x2372, 0xe22f, 0x42d0, 0x7329, 0xe472, 0xba07, 0x1, 0x1);
        gbc.writeMem(0x2372, { 0x38, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe22f);
        EXPECT(gbc.pc(), 0x2313);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00CF
        gbc.setState(0x3463, 0xf0e9, 0xcd0, 0xf1d0, 0xe291, 0xeba8, 0x0, 0x1);
        gbc.writeMem(0x3463, { 0x38, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf0e9);
        EXPECT(gbc.pc(), 0x33ea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00D0
        gbc.setState(0x51cb, 0x2aa6, 0x930, 0xb71d, 0xe11, 0xb5b5, 0x0, 0x0);
        gbc.writeMem(0x51cb, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x2aa6);
        EXPECT(gbc.pc(), 0x515d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00D1
        gbc.setState(0x6be7, 0xd909, 0x8710, 0x1dac, 0x3e5b, 0xf076, 0x0, 0x0);
        gbc.writeMem(0x6be7, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xac);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd909);
        EXPECT(gbc.pc(), 0x6b7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00D2
        gbc.setState(0x437f, 0x386c, 0xf690, 0x7d82, 0x9133, 0xa6c0, 0x0, 0x1);
        gbc.writeMem(0x437f, { 0x38, 0x9c });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x386c);
        EXPECT(gbc.pc(), 0x431d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00D3
        gbc.setState(0xeeb5, 0x5618, 0xfdd0, 0x1b27, 0x374e, 0x3bc5, 0x1, 0x1);
        gbc.writeMem(0xeeb5, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x5618);
        EXPECT(gbc.pc(), 0xeee0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeeb5), 0x38);
        EXPECT(gbc.readMem(0xeeb6), 0x29);
        // 38 00D4
        gbc.setState(0x7eac, 0x393, 0x8d80, 0x88a2, 0xf746, 0xd446, 0x1, 0x1);
        gbc.writeMem(0x7eac, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0x393);
        EXPECT(gbc.pc(), 0x7eae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00D5
        gbc.setState(0x9546, 0x498d, 0xc450, 0xff8e, 0x3e5a, 0x7e7, 0x0, 0x0);
        gbc.writeMem(0x9546, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x498d);
        EXPECT(gbc.pc(), 0x9581);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9546), 0x38);
        EXPECT(gbc.readMem(0x9547), 0x39);
        // 38 00D6
        gbc.setState(0xb6fc, 0x91e9, 0x68a0, 0xd6d3, 0xd7c1, 0x531f, 0x0, 0x0);
        gbc.writeMem(0xb6fc, { 0x38, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x91e9);
        EXPECT(gbc.pc(), 0xb6fe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6fc), 0x38);
        EXPECT(gbc.readMem(0xb6fd), 0x19);
        // 38 00D7
        gbc.setState(0x4280, 0xdcfd, 0xb360, 0x36a3, 0x9f0b, 0x7120, 0x0, 0x1);
        gbc.writeMem(0x4280, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x71);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xdcfd);
        EXPECT(gbc.pc(), 0x4282);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00D8
        gbc.setState(0x2fc, 0xdffe, 0xdc70, 0xe7e8, 0x5bc1, 0x7fd, 0x0, 0x0);
        gbc.writeMem(0x2fc, { 0x38, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xdffe);
        EXPECT(gbc.pc(), 0x2f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00D9
        gbc.setState(0xa66a, 0xc151, 0x6460, 0xcbe, 0x923e, 0x2742, 0x0, 0x1);
        gbc.writeMem(0xa66a, { 0x38, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xc151);
        EXPECT(gbc.pc(), 0xa66c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa66a), 0x38);
        EXPECT(gbc.readMem(0xa66b), 0x1a);
        // 38 00DA
        gbc.setState(0xe17e, 0x5d49, 0x59e0, 0x24d, 0x8dd, 0x3238, 0x0, 0x0);
        gbc.writeMem(0xe17e, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x5d49);
        EXPECT(gbc.pc(), 0xe180);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe17e), 0x38);
        EXPECT(gbc.readMem(0xe17f), 0x32);
        // 38 00DB
        gbc.setState(0x7803, 0x7de5, 0x7320, 0x7864, 0xfbb6, 0xb343, 0x1, 0x1);
        gbc.writeMem(0x7803, { 0x38, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x7de5);
        EXPECT(gbc.pc(), 0x7805);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00DC
        gbc.setState(0x2ac4, 0x50e0, 0x2dd0, 0x1ef7, 0x9140, 0x910b, 0x1, 0x0);
        gbc.writeMem(0x2ac4, { 0x38, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x50e0);
        EXPECT(gbc.pc(), 0x2b17);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00DD
        gbc.setState(0x6ec6, 0xc9e0, 0x45c0, 0x5718, 0x6349, 0xabfc, 0x0, 0x0);
        gbc.writeMem(0x6ec6, { 0x38, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xc9e0);
        EXPECT(gbc.pc(), 0x6ec8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00DE
        gbc.setState(0x2d49, 0xfcba, 0xd5d0, 0xfaa5, 0x31f5, 0x448f, 0x0, 0x1);
        gbc.writeMem(0x2d49, { 0x38, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xfcba);
        EXPECT(gbc.pc(), 0x2dc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00DF
        gbc.setState(0xc273, 0xd719, 0xe4e0, 0x7ed3, 0x83f7, 0xfe1, 0x1, 0x1);
        gbc.writeMem(0xc273, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd719);
        EXPECT(gbc.pc(), 0xc275);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc273), 0x38);
        EXPECT(gbc.readMem(0xc274), 0x60);
        // 38 00E0
        gbc.setState(0xd22c, 0x5d83, 0xad90, 0xdbdf, 0xbfbb, 0xd474, 0x0, 0x1);
        gbc.writeMem(0xd22c, { 0x38, 0xf7 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x5d83);
        EXPECT(gbc.pc(), 0xd225);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd22c), 0x38);
        EXPECT(gbc.readMem(0xd22d), 0xf7);
        // 38 00E1
        gbc.setState(0x4312, 0x6f42, 0xa540, 0x193c, 0xd6cb, 0xc36f, 0x1, 0x0);
        gbc.writeMem(0x4312, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x6f42);
        EXPECT(gbc.pc(), 0x4314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00E2
        gbc.setState(0x1a11, 0xbd9a, 0x1e70, 0x6931, 0xa342, 0xb467, 0x1, 0x0);
        gbc.writeMem(0x1a11, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbd9a);
        EXPECT(gbc.pc(), 0x19da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00E3
        gbc.setState(0x98df, 0x214d, 0x7280, 0x114d, 0x703f, 0x63b6, 0x0, 0x1);
        gbc.writeMem(0x98df, { 0x38, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x214d);
        EXPECT(gbc.pc(), 0x98e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98df), 0x38);
        EXPECT(gbc.readMem(0x98e0), 0xd0);
        // 38 00E4
        gbc.setState(0x5fdb, 0x7f51, 0x2a0, 0x513c, 0x95de, 0x6d10, 0x1, 0x1);
        gbc.writeMem(0x5fdb, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7f51);
        EXPECT(gbc.pc(), 0x5fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00E5
        gbc.setState(0x3a38, 0xccd2, 0xaa30, 0xb3a1, 0x5893, 0x6586, 0x0, 0x1);
        gbc.writeMem(0x3a38, { 0x38, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xccd2);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00E6
        gbc.setState(0x2cfd, 0xc04d, 0x4320, 0x1204, 0x42a7, 0x7f43, 0x0, 0x1);
        gbc.writeMem(0x2cfd, { 0x38, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xc04d);
        EXPECT(gbc.pc(), 0x2cff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00E7
        gbc.setState(0x2697, 0xe101, 0x2470, 0xbfee, 0x4a7b, 0x11dd, 0x0, 0x0);
        gbc.writeMem(0x2697, { 0x38, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xe101);
        EXPECT(gbc.pc(), 0x2661);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00E8
        gbc.setState(0xb7d4, 0x5e5a, 0x7c00, 0xe6, 0xc97, 0x4731, 0x0, 0x0);
        gbc.writeMem(0xb7d4, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x5e5a);
        EXPECT(gbc.pc(), 0xb7d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7d4), 0x38);
        EXPECT(gbc.readMem(0xb7d5), 0x55);
        // 38 00E9
        gbc.setState(0x3358, 0x606e, 0x5be0, 0xeb85, 0x1c16, 0xc38d, 0x0, 0x1);
        gbc.writeMem(0x3358, { 0x38, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x606e);
        EXPECT(gbc.pc(), 0x335a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 00EA
        gbc.setState(0x516b, 0xd9d8, 0x7a00, 0x9342, 0x9903, 0x7f29, 0x0, 0x0);
        gbc.writeMem(0x516b, { 0x38, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xd9d8);
        EXPECT(gbc.pc(), 0x516d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00EB
        gbc.setState(0x5c0e, 0x76a9, 0x5e50, 0xdef, 0xc067, 0xa1c, 0x0, 0x1);
        gbc.writeMem(0x5c0e, { 0x38, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x76a9);
        EXPECT(gbc.pc(), 0x5bd8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 00EC
        gbc.setState(0xa853, 0x154d, 0xf510, 0xb05d, 0xd361, 0x6974, 0x0, 0x1);
        gbc.writeMem(0xa853, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x154d);
        EXPECT(gbc.pc(), 0xa7ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa853), 0x38);
        EXPECT(gbc.readMem(0xa854), 0x9a);
        // 38 00ED
        gbc.setState(0xad1b, 0xd444, 0x7e30, 0x2cbc, 0xf231, 0x2030, 0x0, 0x1);
        gbc.writeMem(0xad1b, { 0x38, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0xd444);
        EXPECT(gbc.pc(), 0xace8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad1b), 0x38);
        EXPECT(gbc.readMem(0xad1c), 0xcb);
        // 38 00EF
        gbc.setState(0x9f89, 0x8f1d, 0x6f40, 0x7682, 0xea8e, 0x9f00, 0x1, 0x1);
        gbc.writeMem(0x9f89, { 0x38, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x8f1d);
        EXPECT(gbc.pc(), 0x9f8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f89), 0x38);
        EXPECT(gbc.readMem(0x9f8a), 0xb);
        // 38 00F0
        gbc.setState(0xc0f4, 0xa14a, 0x99e0, 0x526b, 0x14bd, 0x5bff, 0x1, 0x0);
        gbc.writeMem(0xc0f4, { 0x38, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xa14a);
        EXPECT(gbc.pc(), 0xc0f6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0f4), 0x38);
        EXPECT(gbc.readMem(0xc0f5), 0xcf);
        // 38 00F1
        gbc.setState(0x571a, 0xf286, 0x9540, 0x9ebb, 0x684c, 0xe044, 0x0, 0x0);
        gbc.writeMem(0x571a, { 0x38, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xf286);
        EXPECT(gbc.pc(), 0x571c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00F2
        gbc.setState(0x9dc0, 0xdc07, 0x49d0, 0x6614, 0x790, 0xf019, 0x1, 0x1);
        gbc.writeMem(0x9dc0, { 0x38, 0x3d });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xdc07);
        EXPECT(gbc.pc(), 0x9dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9dc0), 0x38);
        EXPECT(gbc.readMem(0x9dc1), 0x3d);
        // 38 00F3
        gbc.setState(0xcd1e, 0xc6c0, 0x8d40, 0xbac9, 0x2ddd, 0x85a9, 0x0, 0x0);
        gbc.writeMem(0xcd1e, { 0x38, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xc6c0);
        EXPECT(gbc.pc(), 0xcd20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd1e), 0x38);
        EXPECT(gbc.readMem(0xcd1f), 0x2d);
        // 38 00F4
        gbc.setState(0x3885, 0x4c01, 0xd840, 0xa94e, 0x48d0, 0x59b0, 0x1, 0x0);
        gbc.writeMem(0x3885, { 0x38, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x4c01);
        EXPECT(gbc.pc(), 0x3887);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00F5
        gbc.setState(0xaf83, 0x33bc, 0x9140, 0xee6e, 0x3d37, 0xbf1c, 0x0, 0x1);
        gbc.writeMem(0xaf83, { 0x38, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x33bc);
        EXPECT(gbc.pc(), 0xaf85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaf83), 0x38);
        EXPECT(gbc.readMem(0xaf84), 0xf9);
        // 38 00F6
        gbc.setState(0x333d, 0x72c, 0xbd80, 0xf687, 0x7a51, 0x8fc7, 0x0, 0x0);
        gbc.writeMem(0x333d, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x72c);
        EXPECT(gbc.pc(), 0x333f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00F7
        gbc.setState(0x4e23, 0x722, 0xed00, 0x9c20, 0x5224, 0x480e, 0x0, 0x1);
        gbc.writeMem(0x4e23, { 0x38, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x722);
        EXPECT(gbc.pc(), 0x4e25);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00F9
        gbc.setState(0x71c7, 0xdeae, 0xf9c0, 0xb0d0, 0xd2a1, 0x47ea, 0x1, 0x1);
        gbc.writeMem(0x71c7, { 0x38, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xdeae);
        EXPECT(gbc.pc(), 0x71c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 00FA
        gbc.setState(0x9a8d, 0xf90f, 0xe80, 0x6e69, 0x5adb, 0xc255, 0x1, 0x1);
        gbc.writeMem(0x9a8d, { 0x38, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf90f);
        EXPECT(gbc.pc(), 0x9a8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a8d), 0x38);
        EXPECT(gbc.readMem(0x9a8e), 0x89);
        // 38 00FB
        gbc.setState(0xb66d, 0xfe61, 0x5430, 0x29d2, 0x5024, 0xaef8, 0x1, 0x1);
        gbc.writeMem(0xb66d, { 0x38, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xfe61);
        EXPECT(gbc.pc(), 0xb5ef);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb66d), 0x38);
        EXPECT(gbc.readMem(0xb66e), 0x80);
        // 38 00FC
        gbc.setState(0x7fa6, 0x34ce, 0xee70, 0x8a29, 0x921c, 0x5156, 0x0, 0x0);
        gbc.writeMem(0x7fa6, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x34ce);
        EXPECT(gbc.pc(), 0x7ffd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 00FD
        gbc.setState(0x8df5, 0xd9fe, 0xa610, 0xc4f8, 0xa05e, 0x61ee, 0x0, 0x0);
        gbc.writeMem(0x8df5, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xd9fe);
        EXPECT(gbc.pc(), 0x8de3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8df5), 0x38);
        EXPECT(gbc.readMem(0x8df6), 0xec);
        // 38 00FE
        gbc.setState(0x8790, 0x9dfa, 0xe220, 0x632f, 0x97, 0xc397, 0x1, 0x1);
        gbc.writeMem(0x8790, { 0x38, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x9dfa);
        EXPECT(gbc.pc(), 0x8792);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8790), 0x38);
        EXPECT(gbc.readMem(0x8791), 0xdf);
        // 38 00FF
        gbc.setState(0xa15c, 0xaefe, 0xb8f0, 0x25ca, 0x91f7, 0xb9ce, 0x0, 0x1);
        gbc.writeMem(0xa15c, { 0x38, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaefe);
        EXPECT(gbc.pc(), 0xa127);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa15c), 0x38);
        EXPECT(gbc.readMem(0xa15d), 0xc9);
        // 38 0100
        gbc.setState(0x69a7, 0x2e3a, 0x1b10, 0xc1f3, 0xd29, 0x80cc, 0x0, 0x0);
        gbc.writeMem(0x69a7, { 0x38, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x2e3a);
        EXPECT(gbc.pc(), 0x69b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0102
        gbc.setState(0x4e0b, 0x8d3d, 0xa4a0, 0x585f, 0xe35e, 0x1ab1, 0x0, 0x1);
        gbc.writeMem(0x4e0b, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x8d3d);
        EXPECT(gbc.pc(), 0x4e0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0103
        gbc.setState(0x5239, 0x6e43, 0x5a70, 0x6287, 0x7ff2, 0x7a67, 0x0, 0x1);
        gbc.writeMem(0x5239, { 0x38, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x6e43);
        EXPECT(gbc.pc(), 0x5219);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0104
        gbc.setState(0x2e5a, 0xb9e3, 0x2c30, 0xfc53, 0x152e, 0x125a, 0x0, 0x0);
        gbc.writeMem(0x2e5a, { 0x38, 0x62 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb9e3);
        EXPECT(gbc.pc(), 0x2ebe);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0105
        gbc.setState(0x5414, 0x34ea, 0x2c60, 0xf7e8, 0xd634, 0x7ad8, 0x0, 0x1);
        gbc.writeMem(0x5414, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x34ea);
        EXPECT(gbc.pc(), 0x5416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0106
        gbc.setState(0x131, 0x3298, 0xb3a0, 0xfb07, 0x1eef, 0xa62c, 0x1, 0x0);
        gbc.writeMem(0x131, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x3298);
        EXPECT(gbc.pc(), 0x133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0107
        gbc.setState(0x8963, 0xb1e7, 0x2540, 0xc599, 0xc22a, 0x7938, 0x1, 0x1);
        gbc.writeMem(0x8963, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xb1e7);
        EXPECT(gbc.pc(), 0x8965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8963), 0x38);
        EXPECT(gbc.readMem(0x8964), 0x9a);
        // 38 0108
        gbc.setState(0x9e59, 0xac66, 0xddc0, 0x2e89, 0x27fe, 0x9c87, 0x0, 0x0);
        gbc.writeMem(0x9e59, { 0x38, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xac66);
        EXPECT(gbc.pc(), 0x9e5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e59), 0x38);
        EXPECT(gbc.readMem(0x9e5a), 0x57);
        // 38 0109
        gbc.setState(0x7b76, 0x2d2b, 0xfa30, 0x47ad, 0x5a2a, 0x2b83, 0x1, 0x0);
        gbc.writeMem(0x7b76, { 0x38, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x2d2b);
        EXPECT(gbc.pc(), 0x7bec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 010A
        gbc.setState(0x94be, 0x6f96, 0x58c0, 0xb2e3, 0xa858, 0x6573, 0x1, 0x1);
        gbc.writeMem(0x94be, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x6f96);
        EXPECT(gbc.pc(), 0x94c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94be), 0x38);
        EXPECT(gbc.readMem(0x94bf), 0xc2);
        // 38 010B
        gbc.setState(0x4f58, 0x2465, 0x3d30, 0x2c2e, 0xd1d5, 0xd961, 0x1, 0x0);
        gbc.writeMem(0x4f58, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x2465);
        EXPECT(gbc.pc(), 0x4f93);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 010C
        gbc.setState(0xaacc, 0xd779, 0x52b0, 0x517b, 0xb5eb, 0x48e6, 0x1, 0x1);
        gbc.writeMem(0xaacc, { 0x38, 0xc });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xd779);
        EXPECT(gbc.pc(), 0xaada);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaacc), 0x38);
        EXPECT(gbc.readMem(0xaacd), 0xc);
        // 38 010D
        gbc.setState(0x48ed, 0xd8c8, 0xb0f0, 0x467a, 0xeada, 0x88bd, 0x0, 0x1);
        gbc.writeMem(0x48ed, { 0x38, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xd8c8);
        EXPECT(gbc.pc(), 0x48ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 010E
        gbc.setState(0x6d2, 0x5f0b, 0xf8c0, 0x4047, 0x837a, 0xf920, 0x1, 0x1);
        gbc.writeMem(0x6d2, { 0x38, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x5f0b);
        EXPECT(gbc.pc(), 0x6d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 010F
        gbc.setState(0x46dd, 0xe5f9, 0xf180, 0x604d, 0xb302, 0x772d, 0x1, 0x0);
        gbc.writeMem(0x46dd, { 0x38, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0xe5f9);
        EXPECT(gbc.pc(), 0x46df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0110
        gbc.setState(0xdabf, 0xcf70, 0x4880, 0xd659, 0xd185, 0x5d7b, 0x0, 0x0);
        gbc.writeMem(0xdabf, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xcf70);
        EXPECT(gbc.pc(), 0xdac1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdabf), 0x38);
        EXPECT(gbc.readMem(0xdac0), 0x2c);
        // 38 0111
        gbc.setState(0x8de1, 0xafeb, 0x4770, 0x3dba, 0xe49, 0x7ee9, 0x1, 0x0);
        gbc.writeMem(0x8de1, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xafeb);
        EXPECT(gbc.pc(), 0x8e0d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8de1), 0x38);
        EXPECT(gbc.readMem(0x8de2), 0x2a);
        // 38 0112
        gbc.setState(0x4ee5, 0xbe58, 0x2f00, 0xff3c, 0x83b6, 0xaf50, 0x1, 0x0);
        gbc.writeMem(0x4ee5, { 0x38, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xbe58);
        EXPECT(gbc.pc(), 0x4ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0113
        gbc.setState(0xae48, 0x61a4, 0x8a10, 0x3c47, 0xbff5, 0x7a0f, 0x0, 0x0);
        gbc.writeMem(0xae48, { 0x38, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x8a);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x61a4);
        EXPECT(gbc.pc(), 0xae22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae48), 0x38);
        EXPECT(gbc.readMem(0xae49), 0xd8);
        // 38 0114
        gbc.setState(0xa0ab, 0x1474, 0xb700, 0x430f, 0xd1f4, 0x26a9, 0x0, 0x0);
        gbc.writeMem(0xa0ab, { 0x38, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1474);
        EXPECT(gbc.pc(), 0xa0ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0ab), 0x38);
        EXPECT(gbc.readMem(0xa0ac), 0x6f);
        // 38 0116
        gbc.setState(0xca5e, 0xf8ec, 0x76b0, 0xb4f2, 0x995a, 0xe0b9, 0x1, 0x1);
        gbc.writeMem(0xca5e, { 0x38, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf8ec);
        EXPECT(gbc.pc(), 0xca0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca5e), 0x38);
        EXPECT(gbc.readMem(0xca5f), 0xae);
        // 38 0117
        gbc.setState(0xdce4, 0x295c, 0x8f40, 0x8930, 0x825e, 0xf5a0, 0x1, 0x0);
        gbc.writeMem(0xdce4, { 0x38, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x295c);
        EXPECT(gbc.pc(), 0xdce6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdce4), 0x38);
        EXPECT(gbc.readMem(0xdce5), 0x38);
        // 38 0118
        gbc.setState(0x5084, 0xe3f0, 0x2890, 0xc7c7, 0x56be, 0x5b42, 0x0, 0x1);
        gbc.writeMem(0x5084, { 0x38, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xe3f0);
        EXPECT(gbc.pc(), 0x503c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0119
        gbc.setState(0xd37d, 0xe4ae, 0x7560, 0x9619, 0xf44, 0x445b, 0x0, 0x0);
        gbc.writeMem(0xd37d, { 0x38, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xe4ae);
        EXPECT(gbc.pc(), 0xd37f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd37d), 0x38);
        EXPECT(gbc.readMem(0xd37e), 0xfa);
        // 38 011A
        gbc.setState(0xc212, 0xd851, 0xac20, 0x5e76, 0xb73f, 0x9de8, 0x1, 0x1);
        gbc.writeMem(0xc212, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xd851);
        EXPECT(gbc.pc(), 0xc214);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc212), 0x38);
        EXPECT(gbc.readMem(0xc213), 0xec);
        // 38 011B
        gbc.setState(0x34f5, 0x6c0c, 0x1640, 0xfc9b, 0xb379, 0xabda, 0x1, 0x1);
        gbc.writeMem(0x34f5, { 0x38, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x6c0c);
        EXPECT(gbc.pc(), 0x34f7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 011C
        gbc.setState(0x15f6, 0x69d3, 0x7370, 0xa234, 0x15e0, 0xaf5b, 0x0, 0x0);
        gbc.writeMem(0x15f6, { 0x38, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x69d3);
        EXPECT(gbc.pc(), 0x1632);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 011D
        gbc.setState(0x367b, 0x839d, 0xeac0, 0xa9fe, 0x3535, 0x85c3, 0x0, 0x1);
        gbc.writeMem(0x367b, { 0x38, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x839d);
        EXPECT(gbc.pc(), 0x367d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 011F
        gbc.setState(0x79aa, 0x8fb6, 0x75c0, 0xec4, 0x1814, 0x1f57, 0x1, 0x0);
        gbc.writeMem(0x79aa, { 0x38, 0xff });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x8fb6);
        EXPECT(gbc.pc(), 0x79ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0120
        gbc.setState(0x857d, 0x2334, 0xe00, 0x5023, 0x1317, 0xb111, 0x0, 0x1);
        gbc.writeMem(0x857d, { 0x38, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x2334);
        EXPECT(gbc.pc(), 0x857f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x857d), 0x38);
        EXPECT(gbc.readMem(0x857e), 0x30);
        // 38 0121
        gbc.setState(0x360c, 0x475b, 0x2b20, 0x39eb, 0x2160, 0x6ed7, 0x0, 0x0);
        gbc.writeMem(0x360c, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x475b);
        EXPECT(gbc.pc(), 0x360e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0122
        gbc.setState(0x22f1, 0x859f, 0xd250, 0x36fe, 0xb795, 0x661b, 0x1, 0x0);
        gbc.writeMem(0x22f1, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x859f);
        EXPECT(gbc.pc(), 0x22ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0123
        gbc.setState(0xd50d, 0x95c5, 0x1090, 0xbe12, 0xa32d, 0x803e, 0x1, 0x0);
        gbc.writeMem(0xd50d, { 0x38, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x95c5);
        EXPECT(gbc.pc(), 0xd574);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd50d), 0x38);
        EXPECT(gbc.readMem(0xd50e), 0x65);
        // 38 0124
        gbc.setState(0x96c6, 0x7688, 0x45d0, 0xf964, 0xecf2, 0x758b, 0x1, 0x0);
        gbc.writeMem(0x96c6, { 0x38, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x7688);
        EXPECT(gbc.pc(), 0x96c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96c6), 0x38);
        EXPECT(gbc.readMem(0x96c7), 0xfb);
        // 38 0125
        gbc.setState(0x2921, 0xb9d9, 0x6a40, 0x9e12, 0xa633, 0x4859, 0x1, 0x1);
        gbc.writeMem(0x2921, { 0x38, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xb9d9);
        EXPECT(gbc.pc(), 0x2923);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0126
        gbc.setState(0x86c8, 0xb396, 0xdaa0, 0x1193, 0x52ce, 0x94de, 0x0, 0x1);
        gbc.writeMem(0x86c8, { 0x38, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xb396);
        EXPECT(gbc.pc(), 0x86ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x86c8), 0x38);
        EXPECT(gbc.readMem(0x86c9), 0x22);
        // 38 0127
        gbc.setState(0x78db, 0xd990, 0x30c0, 0xd5d6, 0xf8d7, 0x6d65, 0x0, 0x0);
        gbc.writeMem(0x78db, { 0x38, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xd990);
        EXPECT(gbc.pc(), 0x78dd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0128
        gbc.setState(0x73d4, 0xdb38, 0xb680, 0x3f40, 0x37ce, 0x49b0, 0x1, 0x1);
        gbc.writeMem(0x73d4, { 0x38, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xdb38);
        EXPECT(gbc.pc(), 0x73d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0129
        gbc.setState(0x3c5a, 0x4b57, 0x8d30, 0xde8, 0x4f31, 0xab3b, 0x0, 0x0);
        gbc.writeMem(0x3c5a, { 0x38, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4b57);
        EXPECT(gbc.pc(), 0x3bdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 012A
        gbc.setState(0x59c8, 0x2f25, 0x89a0, 0x1e27, 0xb594, 0xb841, 0x0, 0x0);
        gbc.writeMem(0x59c8, { 0x38, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x2f25);
        EXPECT(gbc.pc(), 0x59ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 012B
        gbc.setState(0x481, 0xaafe, 0xa900, 0x16a8, 0x65b7, 0x9da6, 0x0, 0x1);
        gbc.writeMem(0x481, { 0x38, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xaafe);
        EXPECT(gbc.pc(), 0x483);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 012C
        gbc.setState(0xbb9e, 0x756a, 0xd8d0, 0x5d64, 0x61d6, 0xafca, 0x1, 0x1);
        gbc.writeMem(0xbb9e, { 0x38, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x756a);
        EXPECT(gbc.pc(), 0xbb71);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb9e), 0x38);
        EXPECT(gbc.readMem(0xbb9f), 0xd1);
        // 38 012D
        gbc.setState(0xff1, 0xf23c, 0x3280, 0xd3f3, 0x1303, 0x6dfe, 0x0, 0x1);
        gbc.writeMem(0xff1, { 0x38, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xf23c);
        EXPECT(gbc.pc(), 0xff3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 012E
        gbc.setState(0xcf6f, 0x144f, 0x42b0, 0xd35b, 0x260a, 0x415c, 0x1, 0x0);
        gbc.writeMem(0xcf6f, { 0x38, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x144f);
        EXPECT(gbc.pc(), 0xcfeb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf6f), 0x38);
        EXPECT(gbc.readMem(0xcf70), 0x7a);
        // 38 0130
        gbc.setState(0x1db, 0x1ec8, 0x4da0, 0xb593, 0x8a15, 0xb5eb, 0x1, 0x1);
        gbc.writeMem(0x1db, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x1ec8);
        EXPECT(gbc.pc(), 0x1dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0131
        gbc.setState(0x2888, 0xae3e, 0x51f0, 0x598e, 0x4c7c, 0xaf87, 0x0, 0x1);
        gbc.writeMem(0x2888, { 0x38, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xae3e);
        EXPECT(gbc.pc(), 0x28e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0132
        gbc.setState(0x1ef7, 0xa85a, 0xa8b0, 0xe254, 0xd5f3, 0x9a36, 0x1, 0x0);
        gbc.writeMem(0x1ef7, { 0x38, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xa85a);
        EXPECT(gbc.pc(), 0x1f0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0133
        gbc.setState(0x3f5f, 0x2d0e, 0x2800, 0x2ec0, 0x60a2, 0x51c0, 0x0, 0x0);
        gbc.writeMem(0x3f5f, { 0x38, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2d0e);
        EXPECT(gbc.pc(), 0x3f61);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0134
        gbc.setState(0x825c, 0xe1e3, 0x7260, 0x6354, 0x1ae1, 0x4b93, 0x1, 0x1);
        gbc.writeMem(0x825c, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xe1e3);
        EXPECT(gbc.pc(), 0x825e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x825c), 0x38);
        EXPECT(gbc.readMem(0x825d), 0x15);
        // 38 0135
        gbc.setState(0xcc7b, 0xd28d, 0xc4f0, 0x522d, 0xafe6, 0xa36a, 0x0, 0x0);
        gbc.writeMem(0xcc7b, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xd28d);
        EXPECT(gbc.pc(), 0xccb6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7b), 0x38);
        EXPECT(gbc.readMem(0xcc7c), 0x39);
        // 38 0136
        gbc.setState(0xde5b, 0x4cb7, 0xfb50, 0x9ff9, 0x284f, 0x177a, 0x1, 0x1);
        gbc.writeMem(0xde5b, { 0x38, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x4cb7);
        EXPECT(gbc.pc(), 0xdead);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde5b), 0x38);
        EXPECT(gbc.readMem(0xde5c), 0x50);
        // 38 0137
        gbc.setState(0x89e0, 0x2f26, 0x130, 0xffd8, 0xd011, 0xf195, 0x1, 0x0);
        gbc.writeMem(0x89e0, { 0x38, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x2f26);
        EXPECT(gbc.pc(), 0x89b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x89e0), 0x38);
        EXPECT(gbc.readMem(0x89e1), 0xd3);
        // 38 0138
        gbc.setState(0xe872, 0x93fe, 0x7d50, 0x1e24, 0x11e3, 0x298a, 0x0, 0x1);
        gbc.writeMem(0xe872, { 0x38, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x93fe);
        EXPECT(gbc.pc(), 0xe8f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe872), 0x38);
        EXPECT(gbc.readMem(0xe873), 0x7c);
        // 38 013A
        gbc.setState(0x6115, 0x465d, 0x9dd0, 0x7b1e, 0xdaca, 0x3ba6, 0x1, 0x0);
        gbc.writeMem(0x6115, { 0x38, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x465d);
        EXPECT(gbc.pc(), 0x615c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 013B
        gbc.setState(0x12ee, 0x3513, 0x4db0, 0xdeae, 0x78f1, 0xeebf, 0x1, 0x0);
        gbc.writeMem(0x12ee, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x3513);
        EXPECT(gbc.pc(), 0x130d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 013D
        gbc.setState(0x88bf, 0xf82b, 0xadf0, 0x4335, 0x46ad, 0x693b, 0x0, 0x0);
        gbc.writeMem(0x88bf, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xf82b);
        EXPECT(gbc.pc(), 0x884d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88bf), 0x38);
        EXPECT(gbc.readMem(0x88c0), 0x8c);
        // 38 013E
        gbc.setState(0xd532, 0x75a6, 0x4610, 0xf2d6, 0x381e, 0x9c1c, 0x0, 0x1);
        gbc.writeMem(0xd532, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x75a6);
        EXPECT(gbc.pc(), 0xd4eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd532), 0x38);
        EXPECT(gbc.readMem(0xd533), 0xb7);
        // 38 013F
        gbc.setState(0xeb56, 0x7c34, 0xe7c0, 0x6d95, 0xd80b, 0xc28c, 0x1, 0x0);
        gbc.writeMem(0xeb56, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x7c34);
        EXPECT(gbc.pc(), 0xeb58);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeb56), 0x38);
        EXPECT(gbc.readMem(0xeb57), 0x2c);
        // 38 0140
        gbc.setState(0xce52, 0x896d, 0x2e20, 0xae36, 0x7a45, 0xd168, 0x1, 0x0);
        gbc.writeMem(0xce52, { 0x38, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x896d);
        EXPECT(gbc.pc(), 0xce54);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce52), 0x38);
        EXPECT(gbc.readMem(0xce53), 0x9d);
        // 38 0141
        gbc.setState(0x918a, 0xa044, 0x86d0, 0x9e68, 0x12ce, 0xa56e, 0x0, 0x0);
        gbc.writeMem(0x918a, { 0x38, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xa044);
        EXPECT(gbc.pc(), 0x9111);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x918a), 0x38);
        EXPECT(gbc.readMem(0x918b), 0x85);
        // 38 0142
        gbc.setState(0xef54, 0x1087, 0x950, 0xfab4, 0xc2a, 0x2fd, 0x1, 0x1);
        gbc.writeMem(0xef54, { 0x38, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x1087);
        EXPECT(gbc.pc(), 0xef1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef54), 0x38);
        EXPECT(gbc.readMem(0xef55), 0xc6);
        // 38 0143
        gbc.setState(0x8b25, 0x9f67, 0xee30, 0x79c1, 0x92d2, 0x6a59, 0x0, 0x0);
        gbc.writeMem(0x8b25, { 0x38, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x9f67);
        EXPECT(gbc.pc(), 0x8b93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8b25), 0x38);
        EXPECT(gbc.readMem(0x8b26), 0x6c);
        // 38 0144
        gbc.setState(0x6c6f, 0xe0b7, 0x4510, 0x604c, 0xec75, 0x93c9, 0x1, 0x1);
        gbc.writeMem(0x6c6f, { 0x38, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xe0b7);
        EXPECT(gbc.pc(), 0x6c8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0145
        gbc.setState(0x6b2f, 0xe035, 0x1eb0, 0xab18, 0xe19d, 0x5695, 0x1, 0x0);
        gbc.writeMem(0x6b2f, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe035);
        EXPECT(gbc.pc(), 0x6ab9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0146
        gbc.setState(0x7147, 0xe29b, 0xd860, 0xe777, 0xc0a5, 0x3df6, 0x0, 0x0);
        gbc.writeMem(0x7147, { 0x38, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xe29b);
        EXPECT(gbc.pc(), 0x7149);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0147
        gbc.setState(0x3fd9, 0x3ada, 0x2e40, 0x3c14, 0xbcf5, 0xb9ae, 0x1, 0x0);
        gbc.writeMem(0x3fd9, { 0x38, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x3ada);
        EXPECT(gbc.pc(), 0x3fdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0148
        gbc.setState(0xd58a, 0x8031, 0xc160, 0x4728, 0xab45, 0x3452, 0x0, 0x1);
        gbc.writeMem(0xd58a, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x8031);
        EXPECT(gbc.pc(), 0xd58c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd58a), 0x38);
        EXPECT(gbc.readMem(0xd58b), 0x88);
        // 38 0149
        gbc.setState(0xb233, 0xa1f1, 0xfbe0, 0x6480, 0x19eb, 0xc509, 0x0, 0x1);
        gbc.writeMem(0xb233, { 0x38, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xa1f1);
        EXPECT(gbc.pc(), 0xb235);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb233), 0x38);
        EXPECT(gbc.readMem(0xb234), 0xe2);
        // 38 014A
        gbc.setState(0xecce, 0x8ed2, 0xc9b0, 0x4ff3, 0xd25, 0x7be2, 0x1, 0x1);
        gbc.writeMem(0xecce, { 0x38, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x8ed2);
        EXPECT(gbc.pc(), 0xec8b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecce), 0x38);
        EXPECT(gbc.readMem(0xeccf), 0xbb);
        // 38 014B
        gbc.setState(0xd1f2, 0xb75d, 0x5440, 0x7516, 0xeeab, 0x1782, 0x1, 0x0);
        gbc.writeMem(0xd1f2, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xb75d);
        EXPECT(gbc.pc(), 0xd1f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd1f2), 0x38);
        EXPECT(gbc.readMem(0xd1f3), 0x59);
        // 38 014C
        gbc.setState(0xcde0, 0x5f9a, 0xedc0, 0xb9bf, 0xeed9, 0xb976, 0x1, 0x1);
        gbc.writeMem(0xcde0, { 0x38, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x5f9a);
        EXPECT(gbc.pc(), 0xcde2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde0), 0x38);
        EXPECT(gbc.readMem(0xcde1), 0xb0);
        // 38 014D
        gbc.setState(0x2bbc, 0x2d02, 0x7160, 0x8b5c, 0x85b4, 0xaf1f, 0x1, 0x0);
        gbc.writeMem(0x2bbc, { 0x38, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x2d02);
        EXPECT(gbc.pc(), 0x2bbe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 014E
        gbc.setState(0xd6d4, 0xb0cc, 0x8190, 0xf5e2, 0x793c, 0x2ec7, 0x1, 0x0);
        gbc.writeMem(0xd6d4, { 0x38, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xb0cc);
        EXPECT(gbc.pc(), 0xd755);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6d4), 0x38);
        EXPECT(gbc.readMem(0xd6d5), 0x7f);
        // 38 014F
        gbc.setState(0x4606, 0x4229, 0xd070, 0x6ba2, 0x80fb, 0xd39a, 0x0, 0x0);
        gbc.writeMem(0x4606, { 0x38, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x4229);
        EXPECT(gbc.pc(), 0x4676);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0150
        gbc.setState(0xa610, 0x7685, 0xb350, 0xe7dc, 0x88ea, 0xd570, 0x0, 0x0);
        gbc.writeMem(0xa610, { 0x38, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x7685);
        EXPECT(gbc.pc(), 0xa61f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa610), 0x38);
        EXPECT(gbc.readMem(0xa611), 0xd);
        // 38 0151
        gbc.setState(0x6a5c, 0x7c49, 0xeb10, 0x272b, 0x2aab, 0xe374, 0x0, 0x0);
        gbc.writeMem(0x6a5c, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x7c49);
        EXPECT(gbc.pc(), 0x6a87);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0152
        gbc.setState(0x6221, 0x1863, 0x34e0, 0xaf05, 0xa986, 0xe169, 0x1, 0x0);
        gbc.writeMem(0x6221, { 0x38, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1863);
        EXPECT(gbc.pc(), 0x6223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0153
        gbc.setState(0x8998, 0xb175, 0xb170, 0x6a39, 0xdbac, 0xc439, 0x0, 0x0);
        gbc.writeMem(0x8998, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0xb175);
        EXPECT(gbc.pc(), 0x892a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8998), 0x38);
        EXPECT(gbc.readMem(0x8999), 0x90);
        // 38 0154
        gbc.setState(0xcba0, 0xf67a, 0xc5d0, 0x3aa4, 0x19f9, 0xc355, 0x0, 0x1);
        gbc.writeMem(0xcba0, { 0x38, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xf67a);
        EXPECT(gbc.pc(), 0xcbf3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcba0), 0x38);
        EXPECT(gbc.readMem(0xcba1), 0x51);
        // 38 0155
        gbc.setState(0xbfd2, 0x2195, 0xd6a0, 0x8659, 0xd463, 0x950e, 0x0, 0x1);
        gbc.writeMem(0xbfd2, { 0x38, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x2195);
        EXPECT(gbc.pc(), 0xbfd4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfd2), 0x38);
        EXPECT(gbc.readMem(0xbfd3), 0x23);
        // 38 0156
        gbc.setState(0xa4cc, 0xb2c8, 0xf170, 0xbce5, 0x864c, 0xb9d1, 0x1, 0x0);
        gbc.writeMem(0xa4cc, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xb2c8);
        EXPECT(gbc.pc(), 0xa464);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4cc), 0x38);
        EXPECT(gbc.readMem(0xa4cd), 0x96);
        // 38 0157
        gbc.setState(0xc016, 0xa859, 0x2690, 0x642f, 0x806c, 0xd64c, 0x1, 0x1);
        gbc.writeMem(0xc016, { 0x38, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xa859);
        EXPECT(gbc.pc(), 0xbff2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc016), 0x38);
        EXPECT(gbc.readMem(0xc017), 0xda);
        // 38 0158
        gbc.setState(0xaa98, 0x6a33, 0xf110, 0x6978, 0xc755, 0xc420, 0x0, 0x1);
        gbc.writeMem(0xaa98, { 0x38, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x6a33);
        EXPECT(gbc.pc(), 0xaab2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa98), 0x38);
        EXPECT(gbc.readMem(0xaa99), 0x18);
        // 38 0159
        gbc.setState(0x2302, 0xe0ba, 0x3760, 0x2980, 0xbc5a, 0xb66d, 0x1, 0x0);
        gbc.writeMem(0x2302, { 0x38, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xe0ba);
        EXPECT(gbc.pc(), 0x2304);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 015A
        gbc.setState(0x31e7, 0x949d, 0x5240, 0xa1e0, 0x72a3, 0xb26a, 0x1, 0x1);
        gbc.writeMem(0x31e7, { 0x38, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x949d);
        EXPECT(gbc.pc(), 0x31e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 015B
        gbc.setState(0x8fc6, 0x5f1c, 0x6f80, 0x77b9, 0x7537, 0x8288, 0x0, 0x0);
        gbc.writeMem(0x8fc6, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x5f1c);
        EXPECT(gbc.pc(), 0x8fc8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8fc6), 0x38);
        EXPECT(gbc.readMem(0x8fc7), 0x2c);
        // 38 015C
        gbc.setState(0xe1e, 0x3f5a, 0xb0d0, 0x98bc, 0xa70f, 0xd9db, 0x0, 0x0);
        gbc.writeMem(0xe1e, { 0x38, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x3f5a);
        EXPECT(gbc.pc(), 0xe9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 015D
        gbc.setState(0x607b, 0x402e, 0x1e70, 0xe9a7, 0x7819, 0x9691, 0x0, 0x0);
        gbc.writeMem(0x607b, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x402e);
        EXPECT(gbc.pc(), 0x6081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 015E
        gbc.setState(0x334a, 0x23de, 0x24a0, 0xfb7c, 0xf2b2, 0x3f93, 0x1, 0x0);
        gbc.writeMem(0x334a, { 0x38, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x23de);
        EXPECT(gbc.pc(), 0x334c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 015F
        gbc.setState(0x4a4, 0xc744, 0x6430, 0x2c2b, 0x599, 0x6cf4, 0x1, 0x0);
        gbc.writeMem(0x4a4, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xc744);
        EXPECT(gbc.pc(), 0x4f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0160
        gbc.setState(0x9a14, 0xfbc, 0xc350, 0x3ad9, 0x9a9, 0xe295, 0x1, 0x0);
        gbc.writeMem(0x9a14, { 0x38, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xfbc);
        EXPECT(gbc.pc(), 0x99e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a14), 0x38);
        EXPECT(gbc.readMem(0x9a15), 0xd0);
        // 38 0161
        gbc.setState(0x1d06, 0xb1ec, 0xa0d0, 0x6571, 0xe20d, 0x16d8, 0x0, 0x1);
        gbc.writeMem(0x1d06, { 0x38, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xb1ec);
        EXPECT(gbc.pc(), 0x1cd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0162
        gbc.setState(0x26b8, 0x3d02, 0xe5d0, 0xa381, 0x1374, 0xed86, 0x0, 0x1);
        gbc.writeMem(0x26b8, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x3d02);
        EXPECT(gbc.pc(), 0x2737);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0163
        gbc.setState(0x5fdb, 0xc4e7, 0x62c0, 0x151d, 0x26cc, 0xd5ff, 0x1, 0x0);
        gbc.writeMem(0x5fdb, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xc4e7);
        EXPECT(gbc.pc(), 0x5fdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0164
        gbc.setState(0x31e1, 0x202f, 0x24f0, 0xe138, 0x659e, 0xcfcf, 0x1, 0x1);
        gbc.writeMem(0x31e1, { 0x38, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x202f);
        EXPECT(gbc.pc(), 0x31b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0165
        gbc.setState(0x3d12, 0x38a8, 0x8240, 0x7ef5, 0x54fd, 0x5974, 0x1, 0x0);
        gbc.writeMem(0x3d12, { 0x38, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x38a8);
        EXPECT(gbc.pc(), 0x3d14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0166
        gbc.setState(0x630e, 0x4390, 0xe190, 0x32d5, 0x109f, 0x5da3, 0x1, 0x1);
        gbc.writeMem(0x630e, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x4390);
        EXPECT(gbc.pc(), 0x6339);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0167
        gbc.setState(0xb930, 0xd411, 0x1c10, 0x9b2f, 0xedf4, 0x5172, 0x0, 0x0);
        gbc.writeMem(0xb930, { 0x38, 0x9f });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xd411);
        EXPECT(gbc.pc(), 0xb8d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb930), 0x38);
        EXPECT(gbc.readMem(0xb931), 0x9f);
        // 38 0168
        gbc.setState(0xbc36, 0xe829, 0xf250, 0x3a9a, 0xb52e, 0x259f, 0x0, 0x0);
        gbc.writeMem(0xbc36, { 0x38, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xe829);
        EXPECT(gbc.pc(), 0xbcad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc36), 0x38);
        EXPECT(gbc.readMem(0xbc37), 0x75);
        // 38 0169
        gbc.setState(0x24a7, 0x84d4, 0x9ad0, 0xb508, 0x322, 0x3fc0, 0x1, 0x1);
        gbc.writeMem(0x24a7, { 0x38, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x84d4);
        EXPECT(gbc.pc(), 0x2528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 016B
        gbc.setState(0x9bef, 0xddce, 0xb620, 0x750b, 0x5ee3, 0xb771, 0x0, 0x0);
        gbc.writeMem(0x9bef, { 0x38, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xddce);
        EXPECT(gbc.pc(), 0x9bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bef), 0x38);
        EXPECT(gbc.readMem(0x9bf0), 0xd4);
        // 38 016C
        gbc.setState(0x8001, 0xb021, 0xf8a0, 0x1c0, 0x67c4, 0xc271, 0x1, 0x0);
        gbc.writeMem(0x8001, { 0x38, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0xb021);
        EXPECT(gbc.pc(), 0x8003);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8001), 0x38);
        EXPECT(gbc.readMem(0x8002), 0xe0);
        // 38 016D
        gbc.setState(0x8760, 0x512a, 0xc990, 0xc0e5, 0xd837, 0x3b06, 0x0, 0x1);
        gbc.writeMem(0x8760, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x512a);
        EXPECT(gbc.pc(), 0x87cd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8760), 0x38);
        EXPECT(gbc.readMem(0x8761), 0x6b);
        // 38 016E
        gbc.setState(0x2814, 0xc282, 0xb440, 0x3e7c, 0x8748, 0x5088, 0x1, 0x1);
        gbc.writeMem(0x2814, { 0x38, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xc282);
        EXPECT(gbc.pc(), 0x2816);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 016F
        gbc.setState(0x13f7, 0xa094, 0xa510, 0x49eb, 0x7a10, 0xb9f6, 0x1, 0x0);
        gbc.writeMem(0x13f7, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xa094);
        EXPECT(gbc.pc(), 0x13a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0170
        gbc.setState(0x818f, 0x703b, 0x7230, 0xc0e9, 0xb6ad, 0xa96f, 0x0, 0x1);
        gbc.writeMem(0x818f, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x703b);
        EXPECT(gbc.pc(), 0x8153);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x818f), 0x38);
        EXPECT(gbc.readMem(0x8190), 0xc2);
        // 38 0171
        gbc.setState(0x6562, 0xe428, 0x5580, 0xdcb2, 0x8e91, 0xda0f, 0x0, 0x1);
        gbc.writeMem(0x6562, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xe428);
        EXPECT(gbc.pc(), 0x6564);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0172
        gbc.setState(0x6540, 0xd3fb, 0x8520, 0xddc9, 0x9c77, 0xa43d, 0x0, 0x1);
        gbc.writeMem(0x6540, { 0x38, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd3fb);
        EXPECT(gbc.pc(), 0x6542);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0173
        gbc.setState(0x403b, 0xbe96, 0x7d70, 0x1377, 0x67fb, 0x9260, 0x1, 0x0);
        gbc.writeMem(0x403b, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xbe96);
        EXPECT(gbc.pc(), 0x40a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0174
        gbc.setState(0x5f6d, 0xb39c, 0x7f50, 0xbef2, 0x1820, 0x1fcb, 0x1, 0x0);
        gbc.writeMem(0x5f6d, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xb39c);
        EXPECT(gbc.pc(), 0x5f1b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0175
        gbc.setState(0xa786, 0x6f5, 0x48c0, 0x290b, 0xa20a, 0x9799, 0x1, 0x1);
        gbc.writeMem(0xa786, { 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x6f5);
        EXPECT(gbc.pc(), 0xa788);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa786), 0x38);
        EXPECT(gbc.readMem(0xa787), 0x33);
        // 38 0177
        gbc.setState(0x4547, 0x8f8b, 0xe760, 0xc595, 0x2955, 0xab7c, 0x0, 0x1);
        gbc.writeMem(0x4547, { 0x38, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x8f8b);
        EXPECT(gbc.pc(), 0x4549);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0178
        gbc.setState(0xc20, 0x5020, 0xc6b0, 0x9f04, 0x9f5b, 0x350d, 0x0, 0x0);
        gbc.writeMem(0xc20, { 0x38, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x5020);
        EXPECT(gbc.pc(), 0xc8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0179
        gbc.setState(0x951f, 0xcae3, 0xbf40, 0xc121, 0x2085, 0xd344, 0x1, 0x0);
        gbc.writeMem(0x951f, { 0x38, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xcae3);
        EXPECT(gbc.pc(), 0x9521);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x951f), 0x38);
        EXPECT(gbc.readMem(0x9520), 0xfd);
        // 38 017A
        gbc.setState(0x37ca, 0x7579, 0xcfe0, 0x9c36, 0x95ff, 0x8267, 0x1, 0x0);
        gbc.writeMem(0x37ca, { 0x38, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7579);
        EXPECT(gbc.pc(), 0x37cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 017B
        gbc.setState(0xa780, 0x35e5, 0x6a60, 0x86ca, 0x2b58, 0x235a, 0x0, 0x0);
        gbc.writeMem(0xa780, { 0x38, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x35e5);
        EXPECT(gbc.pc(), 0xa782);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa780), 0x38);
        EXPECT(gbc.readMem(0xa781), 0xca);
        // 38 017D
        gbc.setState(0x94ad, 0x726e, 0x2a10, 0x484b, 0xcc1e, 0x87b, 0x0, 0x1);
        gbc.writeMem(0x94ad, { 0x38, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x726e);
        EXPECT(gbc.pc(), 0x9523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ad), 0x38);
        EXPECT(gbc.readMem(0x94ae), 0x74);
        // 38 017E
        gbc.setState(0x661a, 0x2ff6, 0x24b0, 0x3b7e, 0x70a4, 0x3288, 0x0, 0x0);
        gbc.writeMem(0x661a, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x2ff6);
        EXPECT(gbc.pc(), 0x6655);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 017F
        gbc.setState(0xb687, 0x6d93, 0x75a0, 0xf639, 0x5e97, 0xcb60, 0x1, 0x1);
        gbc.writeMem(0xb687, { 0x38, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x6d93);
        EXPECT(gbc.pc(), 0xb689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb687), 0x38);
        EXPECT(gbc.readMem(0xb688), 0x54);
        // 38 0180
        gbc.setState(0x49d5, 0x7f14, 0x3490, 0x990f, 0x21e8, 0x536d, 0x1, 0x1);
        gbc.writeMem(0x49d5, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x7f14);
        EXPECT(gbc.pc(), 0x4965);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0181
        gbc.setState(0x48e6, 0x8b1b, 0x9790, 0x5875, 0x7e30, 0xd443, 0x0, 0x0);
        gbc.writeMem(0x48e6, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x8b1b);
        EXPECT(gbc.pc(), 0x4894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0182
        gbc.setState(0xe3c3, 0x9538, 0xe50, 0x2fc2, 0xd46c, 0x97ea, 0x1, 0x0);
        gbc.writeMem(0xe3c3, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x9538);
        EXPECT(gbc.pc(), 0xe357);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe3c3), 0x38);
        EXPECT(gbc.readMem(0xe3c4), 0x92);
        // 38 0183
        gbc.setState(0x7066, 0x1aca, 0x3e00, 0x61f2, 0x785e, 0x57ee, 0x1, 0x0);
        gbc.writeMem(0x7066, { 0x38, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x1aca);
        EXPECT(gbc.pc(), 0x7068);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0184
        gbc.setState(0x8c34, 0x7af0, 0x29a0, 0x5c93, 0xa781, 0x763d, 0x0, 0x1);
        gbc.writeMem(0x8c34, { 0x38, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x7af0);
        EXPECT(gbc.pc(), 0x8c36);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c34), 0x38);
        EXPECT(gbc.readMem(0x8c35), 0x2b);
        // 38 0185
        gbc.setState(0x611e, 0x3979, 0x6bc0, 0xf78b, 0x7080, 0x6924, 0x1, 0x1);
        gbc.writeMem(0x611e, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x3979);
        EXPECT(gbc.pc(), 0x6120);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0186
        gbc.setState(0x9083, 0xfb76, 0x63f0, 0x54bc, 0xfce0, 0xc5dc, 0x0, 0x1);
        gbc.writeMem(0x9083, { 0x38, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xfb76);
        EXPECT(gbc.pc(), 0x90f2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9083), 0x38);
        EXPECT(gbc.readMem(0x9084), 0x6d);
        // 38 0187
        gbc.setState(0x315d, 0x7b05, 0x970, 0x4519, 0x7934, 0x234f, 0x1, 0x0);
        gbc.writeMem(0x315d, { 0x38, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x7b05);
        EXPECT(gbc.pc(), 0x30f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 018B
        gbc.setState(0x9f3d, 0x60d3, 0x9070, 0xb4e, 0x64c3, 0x29ee, 0x0, 0x0);
        gbc.writeMem(0x9f3d, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x60d3);
        EXPECT(gbc.pc(), 0x9ecf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f3d), 0x38);
        EXPECT(gbc.readMem(0x9f3e), 0x90);
        // 38 018C
        gbc.setState(0x6952, 0x4a58, 0xc210, 0x785, 0x69b5, 0xb796, 0x1, 0x1);
        gbc.writeMem(0x6952, { 0x38, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x4a58);
        EXPECT(gbc.pc(), 0x6950);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 018D
        gbc.setState(0xd8f1, 0x3277, 0x5b20, 0xfab7, 0x9dbf, 0xf035, 0x0, 0x0);
        gbc.writeMem(0xd8f1, { 0x38, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x3277);
        EXPECT(gbc.pc(), 0xd8f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd8f1), 0x38);
        EXPECT(gbc.readMem(0xd8f2), 0x97);
        // 38 018E
        gbc.setState(0x2475, 0x26e9, 0xe2d0, 0x528, 0xfba2, 0x91ce, 0x1, 0x0);
        gbc.writeMem(0x2475, { 0x38, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x26e9);
        EXPECT(gbc.pc(), 0x241b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 018F
        gbc.setState(0x8ce6, 0x652d, 0x2400, 0xca95, 0x9f07, 0x5384, 0x0, 0x0);
        gbc.writeMem(0x8ce6, { 0x38, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0x652d);
        EXPECT(gbc.pc(), 0x8ce8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8ce6), 0x38);
        EXPECT(gbc.readMem(0x8ce7), 0x98);
        // 38 0190
        gbc.setState(0x985f, 0x8daa, 0x1bc0, 0x8eee, 0x32b9, 0xa5cc, 0x1, 0x1);
        gbc.writeMem(0x985f, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x8daa);
        EXPECT(gbc.pc(), 0x9861);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x985f), 0x38);
        EXPECT(gbc.readMem(0x9860), 0x1d);
        // 38 0191
        gbc.setState(0x81ad, 0xca7a, 0x7d10, 0x676, 0x608, 0x89ce, 0x0, 0x1);
        gbc.writeMem(0x81ad, { 0x38, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xca7a);
        EXPECT(gbc.pc(), 0x81e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81ad), 0x38);
        EXPECT(gbc.readMem(0x81ae), 0x3a);
        // 38 0192
        gbc.setState(0x6bc3, 0xa09c, 0x2fb0, 0xca5, 0x7f99, 0x2b1d, 0x1, 0x1);
        gbc.writeMem(0x6bc3, { 0x38, 0xef });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xa09c);
        EXPECT(gbc.pc(), 0x6bb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0193
        gbc.setState(0xce1d, 0x315f, 0x3fa0, 0xe0f4, 0x1bde, 0x8c4d, 0x0, 0x0);
        gbc.writeMem(0xce1d, { 0x38, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x315f);
        EXPECT(gbc.pc(), 0xce1f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce1d), 0x38);
        EXPECT(gbc.readMem(0xce1e), 0x69);
        // 38 0194
        gbc.setState(0x3c12, 0x7d59, 0x2c00, 0xbbcf, 0x503e, 0x52a4, 0x1, 0x1);
        gbc.writeMem(0x3c12, { 0x38, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0x7d59);
        EXPECT(gbc.pc(), 0x3c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0195
        gbc.setState(0x4041, 0x5a58, 0xf970, 0xd4c1, 0xf987, 0xc01a, 0x0, 0x1);
        gbc.writeMem(0x4041, { 0x38, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x5a58);
        EXPECT(gbc.pc(), 0x3fd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0196
        gbc.setState(0x71d2, 0x6d09, 0xf0b0, 0x584e, 0x76eb, 0x475d, 0x1, 0x0);
        gbc.writeMem(0x71d2, { 0x38, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x6d09);
        EXPECT(gbc.pc(), 0x7208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0197
        gbc.setState(0xbfbf, 0xfa4f, 0x54d0, 0xda0b, 0x67f9, 0xd3bc, 0x1, 0x1);
        gbc.writeMem(0xbfbf, { 0x38, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xfa4f);
        EXPECT(gbc.pc(), 0xbf72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfbf), 0x38);
        EXPECT(gbc.readMem(0xbfc0), 0xb1);
        // 38 0198
        gbc.setState(0x768d, 0xfed1, 0x6ac0, 0x1ffe, 0x1ef, 0x8738, 0x1, 0x0);
        gbc.writeMem(0x768d, { 0x38, 0x81 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfed1);
        EXPECT(gbc.pc(), 0x768f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0199
        gbc.setState(0x5c3b, 0xfb99, 0x6af0, 0x29d9, 0xf10c, 0xa0a2, 0x0, 0x0);
        gbc.writeMem(0x5c3b, { 0x38, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xfb99);
        EXPECT(gbc.pc(), 0x5c39);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 019A
        gbc.setState(0xec2a, 0x83be, 0x2800, 0x303d, 0x40ec, 0x1c32, 0x1, 0x0);
        gbc.writeMem(0xec2a, { 0x38, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x83be);
        EXPECT(gbc.pc(), 0xec2c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xec2a), 0x38);
        EXPECT(gbc.readMem(0xec2b), 0x75);
        // 38 019B
        gbc.setState(0xde20, 0xc96a, 0x61a0, 0x5eab, 0xf4c1, 0x8f38, 0x1, 0x1);
        gbc.writeMem(0xde20, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xc96a);
        EXPECT(gbc.pc(), 0xde22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde20), 0x38);
        EXPECT(gbc.readMem(0xde21), 0xc7);
        // 38 019C
        gbc.setState(0x3932, 0xe6e, 0x99d0, 0x1ebc, 0x80c9, 0x88b2, 0x0, 0x0);
        gbc.writeMem(0x3932, { 0x38, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xe6e);
        EXPECT(gbc.pc(), 0x392d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 019D
        gbc.setState(0x5587, 0x5e2e, 0xcc40, 0xa7e1, 0xca1c, 0x1036, 0x1, 0x1);
        gbc.writeMem(0x5587, { 0x38, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x5e2e);
        EXPECT(gbc.pc(), 0x5589);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 019E
        gbc.setState(0xaa1c, 0x5608, 0x93d0, 0x5e2e, 0x9e69, 0x4993, 0x1, 0x1);
        gbc.writeMem(0xaa1c, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x5608);
        EXPECT(gbc.pc(), 0xa9c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa1c), 0x38);
        EXPECT(gbc.readMem(0xaa1d), 0xa5);
        // 38 019F
        gbc.setState(0x7350, 0xe91, 0x77a0, 0x872d, 0xf396, 0x5d0, 0x0, 0x0);
        gbc.writeMem(0x7350, { 0x38, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xe91);
        EXPECT(gbc.pc(), 0x7352);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01A0
        gbc.setState(0x23b8, 0x5293, 0x1740, 0x89ee, 0xe708, 0xb239, 0x0, 0x0);
        gbc.writeMem(0x23b8, { 0x38, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x5293);
        EXPECT(gbc.pc(), 0x23ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01A1
        gbc.setState(0x489e, 0xe490, 0x7170, 0x8f42, 0x8976, 0xb07d, 0x1, 0x1);
        gbc.writeMem(0x489e, { 0x38, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xe490);
        EXPECT(gbc.pc(), 0x4860);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01A2
        gbc.setState(0x48e9, 0xf4ff, 0x80d0, 0x6610, 0x976c, 0x106e, 0x1, 0x0);
        gbc.writeMem(0x48e9, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf4ff);
        EXPECT(gbc.pc(), 0x4915);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01A3
        gbc.setState(0xe331, 0x9855, 0x7b0, 0xefa7, 0x6cb5, 0x8b96, 0x1, 0x1);
        gbc.writeMem(0xe331, { 0x38, 0x98 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x9855);
        EXPECT(gbc.pc(), 0xe2cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe331), 0x38);
        EXPECT(gbc.readMem(0xe332), 0x98);
        // 38 01A4
        gbc.setState(0x965b, 0x7918, 0x5770, 0x5f81, 0xbd43, 0x7407, 0x0, 0x1);
        gbc.writeMem(0x965b, { 0x38, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7918);
        EXPECT(gbc.pc(), 0x9613);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x965b), 0x38);
        EXPECT(gbc.readMem(0x965c), 0xb6);
        // 38 01A6
        gbc.setState(0x3d01, 0xd08c, 0x4b50, 0x586f, 0x211f, 0x731b, 0x1, 0x0);
        gbc.writeMem(0x3d01, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0xd08c);
        EXPECT(gbc.pc(), 0x3ca8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01A7
        gbc.setState(0x71ee, 0x367b, 0xbec0, 0x4112, 0x848a, 0xea2a, 0x0, 0x1);
        gbc.writeMem(0x71ee, { 0x38, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x367b);
        EXPECT(gbc.pc(), 0x71f0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01A8
        gbc.setState(0x3226, 0x8751, 0x25e0, 0xf06f, 0x42ba, 0x7d80, 0x0, 0x1);
        gbc.writeMem(0x3226, { 0x38, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x8751);
        EXPECT(gbc.pc(), 0x3228);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01A9
        gbc.setState(0xdc0, 0x73dc, 0x800, 0x5913, 0x2795, 0xc221, 0x0, 0x0);
        gbc.writeMem(0xdc0, { 0x38, 0x12 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x73dc);
        EXPECT(gbc.pc(), 0xdc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01AA
        gbc.setState(0x7f48, 0x6682, 0xf9f0, 0x4f91, 0xcdaa, 0xef93, 0x0, 0x0);
        gbc.writeMem(0x7f48, { 0x38, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x6682);
        EXPECT(gbc.pc(), 0x7f88);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01AC
        gbc.setState(0x8087, 0x7cef, 0x8050, 0xfb78, 0x1784, 0x8898, 0x1, 0x1);
        gbc.writeMem(0x8087, { 0x38, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x7cef);
        EXPECT(gbc.pc(), 0x80ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8087), 0x38);
        EXPECT(gbc.readMem(0x8088), 0x64);
        // 38 01AD
        gbc.setState(0x7ca9, 0xb1a1, 0xad90, 0xe0c4, 0xfffc, 0xe368, 0x0, 0x1);
        gbc.writeMem(0x7ca9, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xb1a1);
        EXPECT(gbc.pc(), 0x7c37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01AE
        gbc.setState(0xd77f, 0xda06, 0xf200, 0x52e2, 0x58c0, 0x96b9, 0x1, 0x1);
        gbc.writeMem(0xd77f, { 0x38, 0x86 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xda06);
        EXPECT(gbc.pc(), 0xd781);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd77f), 0x38);
        EXPECT(gbc.readMem(0xd780), 0x86);
        // 38 01AF
        gbc.setState(0x8bdf, 0x70ee, 0x5f00, 0x89b5, 0x3c0a, 0x2d86, 0x0, 0x1);
        gbc.writeMem(0x8bdf, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x70ee);
        EXPECT(gbc.pc(), 0x8be1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8bdf), 0x38);
        EXPECT(gbc.readMem(0x8be0), 0xac);
        // 38 01B1
        gbc.setState(0x3ebe, 0xbe0c, 0xd870, 0xe71a, 0x4998, 0xa36, 0x1, 0x0);
        gbc.writeMem(0x3ebe, { 0x38, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xbe0c);
        EXPECT(gbc.pc(), 0x3ee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01B2
        gbc.setState(0x7ae7, 0x296f, 0xcdd0, 0x67bb, 0x92e6, 0x3b22, 0x0, 0x1);
        gbc.writeMem(0x7ae7, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x296f);
        EXPECT(gbc.pc(), 0x7a8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01B3
        gbc.setState(0x77b1, 0x8361, 0x6490, 0xca41, 0x5e3d, 0x3721, 0x1, 0x1);
        gbc.writeMem(0x77b1, { 0x38, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x8361);
        EXPECT(gbc.pc(), 0x77b0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01B6
        gbc.setState(0x4f6c, 0x2ad7, 0x76a0, 0x5393, 0x9792, 0xd1a0, 0x0, 0x1);
        gbc.writeMem(0x4f6c, { 0x38, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x2ad7);
        EXPECT(gbc.pc(), 0x4f6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01B7
        gbc.setState(0x8e19, 0xcf72, 0xa4e0, 0x2301, 0x4af2, 0x31b4, 0x0, 0x1);
        gbc.writeMem(0x8e19, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xcf72);
        EXPECT(gbc.pc(), 0x8e1b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e19), 0x38);
        EXPECT(gbc.readMem(0x8e1a), 0x2c);
        // 38 01B8
        gbc.setState(0xea17, 0x142a, 0x5cd0, 0x3c2b, 0x89a5, 0x31fb, 0x1, 0x0);
        gbc.writeMem(0xea17, { 0x38, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x142a);
        EXPECT(gbc.pc(), 0xea47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea17), 0x38);
        EXPECT(gbc.readMem(0xea18), 0x2e);
        // 38 01B9
        gbc.setState(0xb5dc, 0xc87d, 0x5a10, 0xebdb, 0x6940, 0x8810, 0x1, 0x1);
        gbc.writeMem(0xb5dc, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xc87d);
        EXPECT(gbc.pc(), 0xb56a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5dc), 0x38);
        EXPECT(gbc.readMem(0xb5dd), 0x8c);
        // 38 01BA
        gbc.setState(0xaad1, 0x16e2, 0x6700, 0xcbd7, 0xbe1f, 0xfb5c, 0x1, 0x0);
        gbc.writeMem(0xaad1, { 0x38, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x16e2);
        EXPECT(gbc.pc(), 0xaad3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaad1), 0x38);
        EXPECT(gbc.readMem(0xaad2), 0xe5);
        // 38 01BB
        gbc.setState(0x37cb, 0x8860, 0xfb20, 0xfe20, 0xae9e, 0x19c, 0x1, 0x0);
        gbc.writeMem(0x37cb, { 0x38, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8860);
        EXPECT(gbc.pc(), 0x37cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01BC
        gbc.setState(0xccbb, 0xacad, 0x4aa0, 0x921c, 0xb070, 0xb47a, 0x0, 0x0);
        gbc.writeMem(0xccbb, { 0x38, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xacad);
        EXPECT(gbc.pc(), 0xccbd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xccbb), 0x38);
        EXPECT(gbc.readMem(0xccbc), 0x30);
        // 38 01BE
        gbc.setState(0xbbe5, 0x7d4e, 0x4a90, 0xfe6f, 0x7f26, 0x14d9, 0x1, 0x0);
        gbc.writeMem(0xbbe5, { 0x38, 0x1b });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7d4e);
        EXPECT(gbc.pc(), 0xbc02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbbe5), 0x38);
        EXPECT(gbc.readMem(0xbbe6), 0x1b);
        // 38 01BF
        gbc.setState(0x1765, 0x95b, 0xf410, 0x896f, 0xa4f6, 0xe95, 0x1, 0x0);
        gbc.writeMem(0x1765, { 0x38, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x95b);
        EXPECT(gbc.pc(), 0x177f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01C0
        gbc.setState(0x6f29, 0xfb22, 0x9700, 0x820c, 0xe9e4, 0xb22a, 0x0, 0x1);
        gbc.writeMem(0x6f29, { 0x38, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x82);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xfb22);
        EXPECT(gbc.pc(), 0x6f2b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01C1
        gbc.setState(0xcc46, 0x95ae, 0x3d40, 0x7e95, 0xe89b, 0x1d7e, 0x1, 0x0);
        gbc.writeMem(0xcc46, { 0x38, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x95ae);
        EXPECT(gbc.pc(), 0xcc48);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc46), 0x38);
        EXPECT(gbc.readMem(0xcc47), 0xcb);
        // 38 01C2
        gbc.setState(0x623b, 0x98e6, 0x3f0, 0xa29f, 0x2346, 0x82bf, 0x0, 0x1);
        gbc.writeMem(0x623b, { 0x38, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x98e6);
        EXPECT(gbc.pc(), 0x61fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01C3
        gbc.setState(0xc9b3, 0x882c, 0xa60, 0xab4, 0x80d, 0x6a63, 0x1, 0x0);
        gbc.writeMem(0xc9b3, { 0x38, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x882c);
        EXPECT(gbc.pc(), 0xc9b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc9b3), 0x38);
        EXPECT(gbc.readMem(0xc9b4), 0xbe);
        // 38 01C4
        gbc.setState(0xd005, 0x9e1d, 0x6d0, 0x7354, 0x5f92, 0x106a, 0x1, 0x1);
        gbc.writeMem(0xd005, { 0x38, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x9e1d);
        EXPECT(gbc.pc(), 0xd080);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd005), 0x38);
        EXPECT(gbc.readMem(0xd006), 0x79);
        // 38 01C5
        gbc.setState(0xd51b, 0xfab4, 0x55b0, 0xcb62, 0x62a0, 0xfd4e, 0x0, 0x1);
        gbc.writeMem(0xd51b, { 0x38, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xfab4);
        EXPECT(gbc.pc(), 0xd4b1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd51b), 0x38);
        EXPECT(gbc.readMem(0xd51c), 0x94);
        // 38 01C6
        gbc.setState(0xe9c8, 0x9815, 0xec10, 0x62c5, 0xe347, 0xc711, 0x1, 0x1);
        gbc.writeMem(0xe9c8, { 0x38, 0x37 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x9815);
        EXPECT(gbc.pc(), 0xea01);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9c8), 0x38);
        EXPECT(gbc.readMem(0xe9c9), 0x37);
        // 38 01C7
        gbc.setState(0x714c, 0xdad, 0x6370, 0x917f, 0x98ed, 0x11e5, 0x1, 0x1);
        gbc.writeMem(0x714c, { 0x38, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0xdad);
        EXPECT(gbc.pc(), 0x7168);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01C8
        gbc.setState(0x3e93, 0x2a2b, 0xd4e0, 0xbb5, 0xc156, 0xf02d, 0x1, 0x0);
        gbc.writeMem(0x3e93, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2a2b);
        EXPECT(gbc.pc(), 0x3e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01C9
        gbc.setState(0x6aae, 0x1e1c, 0x9ad0, 0x4669, 0xce1e, 0x359d, 0x1, 0x0);
        gbc.writeMem(0x6aae, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x1e1c);
        EXPECT(gbc.pc(), 0x6a67);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01CA
        gbc.setState(0xadf1, 0x8ca0, 0xf060, 0xbf19, 0x43e3, 0x8b85, 0x1, 0x1);
        gbc.writeMem(0xadf1, { 0x38, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x8ca0);
        EXPECT(gbc.pc(), 0xadf3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadf1), 0x38);
        EXPECT(gbc.readMem(0xadf2), 0x7b);
        // 38 01CB
        gbc.setState(0x499d, 0x8fb9, 0xfbd0, 0xc67f, 0x3a4a, 0x7d37, 0x1, 0x1);
        gbc.writeMem(0x499d, { 0x38, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x8fb9);
        EXPECT(gbc.pc(), 0x4954);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01CC
        gbc.setState(0x8f4a, 0x8588, 0x9070, 0x68aa, 0xaf6d, 0x597, 0x0, 0x0);
        gbc.writeMem(0x8f4a, { 0x38, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x8588);
        EXPECT(gbc.pc(), 0x8f72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f4a), 0x38);
        EXPECT(gbc.readMem(0x8f4b), 0x26);
        // 38 01CD
        gbc.setState(0x2ed9, 0x1087, 0x890, 0xe16c, 0x3297, 0x2eb0, 0x1, 0x1);
        gbc.writeMem(0x2ed9, { 0x38, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x1087);
        EXPECT(gbc.pc(), 0x2e96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01CE
        gbc.setState(0xbb83, 0x3a15, 0xeec0, 0xc02, 0xd214, 0xe7b3, 0x0, 0x0);
        gbc.writeMem(0xbb83, { 0x38, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3a15);
        EXPECT(gbc.pc(), 0xbb85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb83), 0x38);
        EXPECT(gbc.readMem(0xbb84), 0x38);
        // 38 01CF
        gbc.setState(0x4e83, 0x6dfe, 0xf680, 0x7e25, 0xfc84, 0x81bd, 0x0, 0x1);
        gbc.writeMem(0x4e83, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x6dfe);
        EXPECT(gbc.pc(), 0x4e85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01D0
        gbc.setState(0x1f00, 0xc48c, 0x4650, 0x3f58, 0x3e6a, 0xde7d, 0x1, 0x0);
        gbc.writeMem(0x1f00, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xc48c);
        EXPECT(gbc.pc(), 0x1eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01D1
        gbc.setState(0xe092, 0x81, 0xccd0, 0x145a, 0x7ef1, 0xef07, 0x1, 0x1);
        gbc.writeMem(0xe092, { 0x38, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x81);
        EXPECT(gbc.pc(), 0xe105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe092), 0x38);
        EXPECT(gbc.readMem(0xe093), 0x71);
        // 38 01D2
        gbc.setState(0xc13, 0xd60b, 0x77e0, 0xf982, 0x7e5b, 0x9abc, 0x1, 0x0);
        gbc.writeMem(0xc13, { 0x38, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0xd60b);
        EXPECT(gbc.pc(), 0xc15);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01D4
        gbc.setState(0xdea6, 0x279d, 0x5550, 0xc242, 0x15a1, 0x4788, 0x1, 0x1);
        gbc.writeMem(0xdea6, { 0x38, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x279d);
        EXPECT(gbc.pc(), 0xde68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea6), 0x38);
        EXPECT(gbc.readMem(0xdea7), 0xc0);
        // 38 01D5
        gbc.setState(0xd328, 0x46a, 0xeec0, 0xdb7, 0x8132, 0xafd0, 0x0, 0x0);
        gbc.writeMem(0xd328, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x46a);
        EXPECT(gbc.pc(), 0xd32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd328), 0x38);
        EXPECT(gbc.readMem(0xd329), 0x8c);
        // 38 01D6
        gbc.setState(0x97b, 0x8bed, 0x9050, 0x5448, 0x86e4, 0xfd2, 0x1, 0x1);
        gbc.writeMem(0x97b, { 0x38, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8bed);
        EXPECT(gbc.pc(), 0x947);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01D9
        gbc.setState(0x8d37, 0x5288, 0x1cb0, 0x4883, 0x78d3, 0xbf9d, 0x1, 0x0);
        gbc.writeMem(0x8d37, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5288);
        EXPECT(gbc.pc(), 0x8d1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d37), 0x38);
        EXPECT(gbc.readMem(0x8d38), 0xe6);
        // 38 01DA
        gbc.setState(0xac3, 0xae0e, 0x99e0, 0xc948, 0xe161, 0x7861, 0x1, 0x1);
        gbc.writeMem(0xac3, { 0x38, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xae0e);
        EXPECT(gbc.pc(), 0xac5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01DB
        gbc.setState(0x31d0, 0x59aa, 0xf6d0, 0xbedc, 0x4f68, 0xa8ef, 0x1, 0x1);
        gbc.writeMem(0x31d0, { 0x38, 0x5d });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x59aa);
        EXPECT(gbc.pc(), 0x322f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01DC
        gbc.setState(0xc80d, 0xe695, 0xfc50, 0xe4ed, 0x2314, 0x4854, 0x1, 0x0);
        gbc.writeMem(0xc80d, { 0x38, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xe695);
        EXPECT(gbc.pc(), 0xc7e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc80d), 0x38);
        EXPECT(gbc.readMem(0xc80e), 0xd9);
        // 38 01DD
        gbc.setState(0x3bc3, 0x787e, 0x50, 0x2a0b, 0xfe9d, 0xeb17, 0x0, 0x0);
        gbc.writeMem(0x3bc3, { 0x38, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x787e);
        EXPECT(gbc.pc(), 0x3bea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01DE
        gbc.setState(0xac19, 0x7036, 0x4870, 0x2c67, 0x4fca, 0xd607, 0x1, 0x1);
        gbc.writeMem(0xac19, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x7036);
        EXPECT(gbc.pc(), 0xac37);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac19), 0x38);
        EXPECT(gbc.readMem(0xac1a), 0x1c);
        // 38 01DF
        gbc.setState(0xf5a, 0x780f, 0xfa40, 0xafb2, 0x7073, 0xe074, 0x0, 0x0);
        gbc.writeMem(0xf5a, { 0x38, 0xb6 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x780f);
        EXPECT(gbc.pc(), 0xf5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01E0
        gbc.setState(0x91d7, 0x7468, 0xacb0, 0xa7cf, 0xa9a3, 0x7f0, 0x0, 0x0);
        gbc.writeMem(0x91d7, { 0x38, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7468);
        EXPECT(gbc.pc(), 0x91db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91d7), 0x38);
        EXPECT(gbc.readMem(0x91d8), 0x2);
        // 38 01E3
        gbc.setState(0x63d8, 0x6a56, 0x6910, 0xe2fb, 0x8b09, 0xe6cf, 0x1, 0x1);
        gbc.writeMem(0x63d8, { 0x38, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x6a56);
        EXPECT(gbc.pc(), 0x635a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01E4
        gbc.setState(0x453b, 0xdd3e, 0x3fd0, 0xca7f, 0x8707, 0x449f, 0x1, 0x1);
        gbc.writeMem(0x453b, { 0x38, 0xeb });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0xdd3e);
        EXPECT(gbc.pc(), 0x4528);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01E5
        gbc.setState(0x2136, 0x76e5, 0x6b70, 0x90bd, 0x6ea5, 0x8348, 0x0, 0x1);
        gbc.writeMem(0x2136, { 0x38, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x76e5);
        EXPECT(gbc.pc(), 0x20e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01E6
        gbc.setState(0xcd1a, 0x99d9, 0xd2e0, 0x870, 0x2545, 0xe67f, 0x1, 0x1);
        gbc.writeMem(0xcd1a, { 0x38, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x99d9);
        EXPECT(gbc.pc(), 0xcd1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd1a), 0x38);
        EXPECT(gbc.readMem(0xcd1b), 0x14);
        // 38 01E7
        gbc.setState(0x2f4a, 0xfcf2, 0xccd0, 0x36bf, 0xa61c, 0xa44c, 0x0, 0x0);
        gbc.writeMem(0x2f4a, { 0x38, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xfcf2);
        EXPECT(gbc.pc(), 0x2f4a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01E8
        gbc.setState(0xbc32, 0xd72c, 0x4ec0, 0x48, 0x7f23, 0x157f, 0x0, 0x1);
        gbc.writeMem(0xbc32, { 0x38, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd72c);
        EXPECT(gbc.pc(), 0xbc34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc32), 0x38);
        EXPECT(gbc.readMem(0xbc33), 0xf3);
        // 38 01E9
        gbc.setState(0x263f, 0x5cc7, 0x5be0, 0xd34f, 0x103c, 0x5b21, 0x1, 0x0);
        gbc.writeMem(0x263f, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x5cc7);
        EXPECT(gbc.pc(), 0x2641);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01EA
        gbc.setState(0x9f25, 0xd4cc, 0x6de0, 0x22f1, 0xb2fe, 0x45c, 0x1, 0x0);
        gbc.writeMem(0x9f25, { 0x38, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xd4cc);
        EXPECT(gbc.pc(), 0x9f27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9f25), 0x38);
        EXPECT(gbc.readMem(0x9f26), 0x25);
        // 38 01EB
        gbc.setState(0xb7ca, 0x209, 0xe5a0, 0x46f5, 0xe52b, 0x7a9b, 0x0, 0x1);
        gbc.writeMem(0xb7ca, { 0x38, 0x93 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x209);
        EXPECT(gbc.pc(), 0xb7cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7ca), 0x38);
        EXPECT(gbc.readMem(0xb7cb), 0x93);
        // 38 01EC
        gbc.setState(0xc28a, 0x46f, 0x98e0, 0x77e2, 0xdbac, 0x5a1e, 0x0, 0x0);
        gbc.writeMem(0xc28a, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x46f);
        EXPECT(gbc.pc(), 0xc28c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc28a), 0x38);
        EXPECT(gbc.readMem(0xc28b), 0xc7);
        // 38 01ED
        gbc.setState(0xb77c, 0x9563, 0x4650, 0xd585, 0x1fe, 0x3c2e, 0x0, 0x0);
        gbc.writeMem(0xb77c, { 0x38, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x9563);
        EXPECT(gbc.pc(), 0xb753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb77c), 0x38);
        EXPECT(gbc.readMem(0xb77d), 0xd5);
        // 38 01EE
        gbc.setState(0xa01d, 0xd3a1, 0x83a0, 0x5da0, 0xdd13, 0xb576, 0x1, 0x1);
        gbc.writeMem(0xa01d, { 0x38, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xd3a1);
        EXPECT(gbc.pc(), 0xa01f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01d), 0x38);
        EXPECT(gbc.readMem(0xa01e), 0xd1);
        // 38 01EF
        gbc.setState(0xd07e, 0x81bd, 0xd4c0, 0xb8d8, 0x1525, 0x8948, 0x0, 0x0);
        gbc.writeMem(0xd07e, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x81bd);
        EXPECT(gbc.pc(), 0xd080);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd07e), 0x38);
        EXPECT(gbc.readMem(0xd07f), 0x4);
        // 38 01F1
        gbc.setState(0x4cda, 0x7c85, 0x4760, 0x4e4f, 0x133, 0x2136, 0x0, 0x0);
        gbc.writeMem(0x4cda, { 0x38, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x7c85);
        EXPECT(gbc.pc(), 0x4cdc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 01F2
        gbc.setState(0xb8c3, 0x1e53, 0xbb80, 0x756b, 0x2404, 0xc2b1, 0x0, 0x0);
        gbc.writeMem(0xb8c3, { 0x38, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x1e53);
        EXPECT(gbc.pc(), 0xb8c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8c3), 0x38);
        EXPECT(gbc.readMem(0xb8c4), 0xa2);
        // 38 01F3
        gbc.setState(0xecd8, 0x6699, 0x990, 0x983f, 0xd53b, 0x7ee5, 0x0, 0x0);
        gbc.writeMem(0xecd8, { 0x38, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x6699);
        EXPECT(gbc.pc(), 0xecaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xecd8), 0x38);
        EXPECT(gbc.readMem(0xecd9), 0xd5);
        // 38 01F4
        gbc.setState(0x5039, 0xc8a4, 0x2430, 0xc45, 0xc4ac, 0xad19, 0x1, 0x1);
        gbc.writeMem(0x5039, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xc8a4);
        EXPECT(gbc.pc(), 0x5021);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 01F5
        gbc.setState(0xb6d9, 0x78b, 0xafe0, 0x3f59, 0xc39c, 0xb04d, 0x0, 0x0);
        gbc.writeMem(0xb6d9, { 0x38, 0xa0 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x78b);
        EXPECT(gbc.pc(), 0xb6db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d9), 0x38);
        EXPECT(gbc.readMem(0xb6da), 0xa0);
        // 38 01F6
        gbc.setState(0xd25f, 0x569d, 0xb910, 0x5346, 0xa18b, 0x8705, 0x0, 0x0);
        gbc.writeMem(0xd25f, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x569d);
        EXPECT(gbc.pc(), 0xd28a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd25f), 0x38);
        EXPECT(gbc.readMem(0xd260), 0x29);
        // 38 01F7
        gbc.setState(0x6bcf, 0xc625, 0x4c50, 0x3060, 0x8344, 0xdbef, 0x1, 0x0);
        gbc.writeMem(0x6bcf, { 0x38, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xc625);
        EXPECT(gbc.pc(), 0x6c3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01F8
        gbc.setState(0x75ec, 0x8fb6, 0xde00, 0xad9e, 0xb360, 0xd64, 0x0, 0x0);
        gbc.writeMem(0x75ec, { 0x38, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x8fb6);
        EXPECT(gbc.pc(), 0x75ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01F9
        gbc.setState(0xd53a, 0x5f1b, 0xf640, 0x92b6, 0xb40d, 0x5189, 0x1, 0x1);
        gbc.writeMem(0xd53a, { 0x38, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5f1b);
        EXPECT(gbc.pc(), 0xd53c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd53a), 0x38);
        EXPECT(gbc.readMem(0xd53b), 0x3e);
        // 38 01FA
        gbc.setState(0x91c1, 0x5a43, 0x4c0, 0x447f, 0x7301, 0x4b16, 0x0, 0x1);
        gbc.writeMem(0x91c1, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x5a43);
        EXPECT(gbc.pc(), 0x91c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91c1), 0x38);
        EXPECT(gbc.readMem(0x91c2), 0xa5);
        // 38 01FB
        gbc.setState(0x7e9f, 0x7634, 0x2000, 0x7bc1, 0xbd99, 0xac7c, 0x0, 0x0);
        gbc.writeMem(0x7e9f, { 0x38, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x7634);
        EXPECT(gbc.pc(), 0x7ea1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 01FC
        gbc.setState(0x96ea, 0xb627, 0xbe70, 0x638, 0xfc40, 0xf083, 0x1, 0x0);
        gbc.writeMem(0x96ea, { 0x38, 0xa7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xb627);
        EXPECT(gbc.pc(), 0x9693);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96ea), 0x38);
        EXPECT(gbc.readMem(0x96eb), 0xa7);
        // 38 01FE
        gbc.setState(0x2a82, 0xc9f, 0x31d0, 0xe2c6, 0xfa0c, 0xd933, 0x0, 0x1);
        gbc.writeMem(0x2a82, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xc9f);
        EXPECT(gbc.pc(), 0x2ad9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 01FF
        gbc.setState(0x2cdd, 0x349a, 0xf3a0, 0x6db, 0xc06e, 0xf31e, 0x1, 0x1);
        gbc.writeMem(0x2cdd, { 0x38, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x349a);
        EXPECT(gbc.pc(), 0x2cdf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0200
        gbc.setState(0xe0e9, 0xf0a8, 0xcc60, 0x11f2, 0x414e, 0x6ad2, 0x0, 0x1);
        gbc.writeMem(0xe0e9, { 0x38, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf0a8);
        EXPECT(gbc.pc(), 0xe0eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0e9), 0x38);
        EXPECT(gbc.readMem(0xe0ea), 0xf0);
        // 38 0201
        gbc.setState(0x2d5e, 0xa83f, 0x6e80, 0x7288, 0xe7fd, 0xe14e, 0x0, 0x1);
        gbc.writeMem(0x2d5e, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa83f);
        EXPECT(gbc.pc(), 0x2d60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0202
        gbc.setState(0x934d, 0x7796, 0x10f0, 0x7398, 0x13fd, 0x4c7f, 0x1, 0x1);
        gbc.writeMem(0x934d, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7796);
        EXPECT(gbc.pc(), 0x92f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x934d), 0x38);
        EXPECT(gbc.readMem(0x934e), 0xa5);
        // 38 0203
        gbc.setState(0x5db6, 0x322, 0x8b90, 0xb12f, 0x169a, 0xa148, 0x0, 0x0);
        gbc.writeMem(0x5db6, { 0x38, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x322);
        EXPECT(gbc.pc(), 0x5db2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0204
        gbc.setState(0x1f3f, 0x8f78, 0xe4e0, 0x6efd, 0x3092, 0x4a92, 0x1, 0x0);
        gbc.writeMem(0x1f3f, { 0x38, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x8f78);
        EXPECT(gbc.pc(), 0x1f41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0205
        gbc.setState(0xa812, 0xc503, 0xcd70, 0x34d9, 0x911d, 0x6a85, 0x1, 0x1);
        gbc.writeMem(0xa812, { 0x38, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xc503);
        EXPECT(gbc.pc(), 0xa866);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa812), 0x38);
        EXPECT(gbc.readMem(0xa813), 0x52);
        // 38 0206
        gbc.setState(0x1ffb, 0x8cca, 0x59f0, 0x6ce6, 0x5bb9, 0x739d, 0x0, 0x0);
        gbc.writeMem(0x1ffb, { 0x38, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x8cca);
        EXPECT(gbc.pc(), 0x1f8c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0207
        gbc.setState(0x40c6, 0x9299, 0x6ad0, 0xad0d, 0xfa82, 0xfbc5, 0x0, 0x0);
        gbc.writeMem(0x40c6, { 0x38, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9299);
        EXPECT(gbc.pc(), 0x412b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0208
        gbc.setState(0x6c72, 0x2af7, 0x8830, 0x77c2, 0x41da, 0x5e86, 0x1, 0x1);
        gbc.writeMem(0x6c72, { 0x38, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x2af7);
        EXPECT(gbc.pc(), 0x6c61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0209
        gbc.setState(0xc54c, 0x7b4e, 0xe330, 0xd61b, 0x9012, 0xb355, 0x0, 0x1);
        gbc.writeMem(0xc54c, { 0x38, 0x4c });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0x7b4e);
        EXPECT(gbc.pc(), 0xc59a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc54c), 0x38);
        EXPECT(gbc.readMem(0xc54d), 0x4c);
        // 38 020B
        gbc.setState(0x8996, 0x322a, 0x9bd0, 0x6461, 0x1d8d, 0x96b4, 0x1, 0x0);
        gbc.writeMem(0x8996, { 0x38, 0xda });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x322a);
        EXPECT(gbc.pc(), 0x8972);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8996), 0x38);
        EXPECT(gbc.readMem(0x8997), 0xda);
        // 38 020C
        gbc.setState(0x2475, 0x1c0d, 0x1890, 0x5260, 0x474e, 0x7b8e, 0x0, 0x1);
        gbc.writeMem(0x2475, { 0x38, 0xa4 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x1c0d);
        EXPECT(gbc.pc(), 0x241b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 020D
        gbc.setState(0x88dd, 0xc086, 0xa3d0, 0xb839, 0x3273, 0x775a, 0x0, 0x1);
        gbc.writeMem(0x88dd, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc086);
        EXPECT(gbc.pc(), 0x892e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88dd), 0x38);
        EXPECT(gbc.readMem(0x88de), 0x4f);
        // 38 020E
        gbc.setState(0x3ee1, 0x15be, 0x9960, 0x1ebc, 0x920c, 0x2cf4, 0x1, 0x1);
        gbc.writeMem(0x3ee1, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x15be);
        EXPECT(gbc.pc(), 0x3ee3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0210
        gbc.setState(0x104b, 0x4851, 0x5350, 0x5b0b, 0x1ab2, 0x8e26, 0x1, 0x0);
        gbc.writeMem(0x104b, { 0x38, 0x80 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x4851);
        EXPECT(gbc.pc(), 0xfcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0211
        gbc.setState(0xec1f, 0xabc7, 0x9050, 0x1b77, 0x2be9, 0x1c7b, 0x0, 0x0);
        gbc.writeMem(0xec1f, { 0x38, 0xcb });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xabc7);
        EXPECT(gbc.pc(), 0xebec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xec1f), 0x38);
        EXPECT(gbc.readMem(0xec20), 0xcb);
        // 38 0212
        gbc.setState(0x6a83, 0x7e6, 0x1ee0, 0x506a, 0x7a93, 0x3fa, 0x1, 0x1);
        gbc.writeMem(0x6a83, { 0x38, 0x17 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0x7e6);
        EXPECT(gbc.pc(), 0x6a85);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0213
        gbc.setState(0xde27, 0x33c4, 0xef10, 0x236, 0xf719, 0x306b, 0x0, 0x1);
        gbc.writeMem(0xde27, { 0x38, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x33c4);
        EXPECT(gbc.pc(), 0xde58);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde27), 0x38);
        EXPECT(gbc.readMem(0xde28), 0x2f);
        // 38 0214
        gbc.setState(0x45fb, 0x9c6, 0x2c20, 0x9980, 0xb15, 0x3f85, 0x0, 0x0);
        gbc.writeMem(0x45fb, { 0x38, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x9c6);
        EXPECT(gbc.pc(), 0x45fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0215
        gbc.setState(0x4ab1, 0x863b, 0x33d0, 0xa468, 0x94d9, 0xe6c7, 0x0, 0x1);
        gbc.writeMem(0x4ab1, { 0x38, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x863b);
        EXPECT(gbc.pc(), 0x4afb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0216
        gbc.setState(0xa2be, 0x304e, 0x51f0, 0x6f3b, 0x6627, 0x26ba, 0x1, 0x1);
        gbc.writeMem(0xa2be, { 0x38, 0x8d });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x304e);
        EXPECT(gbc.pc(), 0xa24d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa2be), 0x38);
        EXPECT(gbc.readMem(0xa2bf), 0x8d);
        // 38 0217
        gbc.setState(0xc94b, 0x3d22, 0xe0, 0xc71d, 0xc36c, 0x9b4d, 0x1, 0x1);
        gbc.writeMem(0xc94b, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3d22);
        EXPECT(gbc.pc(), 0xc94d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc94b), 0x38);
        EXPECT(gbc.readMem(0xc94c), 0x92);
        // 38 0218
        gbc.setState(0xcbdf, 0x5d40, 0x1df0, 0x3b9c, 0xbec9, 0xeb3f, 0x1, 0x0);
        gbc.writeMem(0xcbdf, { 0x38, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0x5d40);
        EXPECT(gbc.pc(), 0xcb84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcbdf), 0x38);
        EXPECT(gbc.readMem(0xcbe0), 0xa3);
        // 38 0219
        gbc.setState(0x207c, 0x4b55, 0xa360, 0x73e6, 0x1f92, 0x700f, 0x0, 0x0);
        gbc.writeMem(0x207c, { 0x38, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x4b55);
        EXPECT(gbc.pc(), 0x207e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 021B
        gbc.setState(0x4ebf, 0xb831, 0x3690, 0x7113, 0x4061, 0x840b, 0x0, 0x1);
        gbc.writeMem(0x4ebf, { 0x38, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xb831);
        EXPECT(gbc.pc(), 0x4efd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 021C
        gbc.setState(0x9bf8, 0xcb4e, 0xf380, 0xdfb3, 0xb183, 0x2301, 0x1, 0x0);
        gbc.writeMem(0x9bf8, { 0x38, 0x99 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0xcb4e);
        EXPECT(gbc.pc(), 0x9bfa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9bf8), 0x38);
        EXPECT(gbc.readMem(0x9bf9), 0x99);
        // 38 021D
        gbc.setState(0x8b1d, 0xf1, 0xbf40, 0x2ddf, 0x3819, 0x7cd0, 0x1, 0x1);
        gbc.writeMem(0x8b1d, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xf1);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0x38);
        EXPECT(gbc.readMem(0x8b1e), 0x15);
        // 38 021E
        gbc.setState(0xa4b7, 0x426a, 0xdc70, 0x1f49, 0xf680, 0x5f1, 0x1, 0x0);
        gbc.writeMem(0xa4b7, { 0x38, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x426a);
        EXPECT(gbc.pc(), 0xa4bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa4b7), 0x38);
        EXPECT(gbc.readMem(0xa4b8), 0x3);
        // 38 021F
        gbc.setState(0x1645, 0x4f85, 0x80b0, 0x953d, 0x2b36, 0x60a7, 0x0, 0x0);
        gbc.writeMem(0x1645, { 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0x4f85);
        EXPECT(gbc.pc(), 0x167a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0220
        gbc.setState(0xd1d6, 0x8562, 0xb370, 0x1fa1, 0xaa14, 0xb74b, 0x0, 0x0);
        gbc.writeMem(0xd1d6, { 0x38, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x8562);
        EXPECT(gbc.pc(), 0xd257);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd1d6), 0x38);
        EXPECT(gbc.readMem(0xd1d7), 0x7f);
        // 38 0221
        gbc.setState(0x1a8, 0x67d2, 0xca30, 0x8180, 0xf34d, 0x7f86, 0x1, 0x1);
        gbc.writeMem(0x1a8, { 0x38, 0xe2 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x67d2);
        EXPECT(gbc.pc(), 0x18c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0222
        gbc.setState(0x793d, 0x437e, 0xb260, 0xf88e, 0x1a37, 0xab3c, 0x0, 0x1);
        gbc.writeMem(0x793d, { 0x38, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x437e);
        EXPECT(gbc.pc(), 0x793f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0223
        gbc.setState(0xc791, 0xdd02, 0x4560, 0xa8ff, 0x9f90, 0xf5d4, 0x0, 0x1);
        gbc.writeMem(0xc791, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xdd02);
        EXPECT(gbc.pc(), 0xc793);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc791), 0x38);
        EXPECT(gbc.readMem(0xc792), 0x39);
        // 38 0224
        gbc.setState(0xd58b, 0x2dcf, 0xee10, 0x84a1, 0x22e9, 0x8d2, 0x1, 0x0);
        gbc.writeMem(0xd58b, { 0x38, 0x7a });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x2dcf);
        EXPECT(gbc.pc(), 0xd607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd58b), 0x38);
        EXPECT(gbc.readMem(0xd58c), 0x7a);
        // 38 0225
        gbc.setState(0x5486, 0x2ba, 0xec90, 0xf2ea, 0x5171, 0xdf3c, 0x1, 0x0);
        gbc.writeMem(0x5486, { 0x38, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2ba);
        EXPECT(gbc.pc(), 0x54fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0226
        gbc.setState(0xef0c, 0xe8e7, 0xc630, 0x17b9, 0x36fd, 0x8523, 0x1, 0x1);
        gbc.writeMem(0xef0c, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfd);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe8e7);
        EXPECT(gbc.pc(), 0xef68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xef0c), 0x38);
        EXPECT(gbc.readMem(0xef0d), 0x5a);
        // 38 0227
        gbc.setState(0x96d2, 0x8d26, 0xf510, 0x193a, 0xe407, 0x5e9c, 0x1, 0x1);
        gbc.writeMem(0x96d2, { 0x38, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8d26);
        EXPECT(gbc.pc(), 0x9689);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96d2), 0x38);
        EXPECT(gbc.readMem(0x96d3), 0xb5);
        // 38 0228
        gbc.setState(0xc487, 0xda54, 0xdb00, 0x2a3b, 0x24de, 0xb634, 0x0, 0x1);
        gbc.writeMem(0xc487, { 0x38, 0xae });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xda54);
        EXPECT(gbc.pc(), 0xc489);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc487), 0x38);
        EXPECT(gbc.readMem(0xc488), 0xae);
        // 38 0229
        gbc.setState(0x9e81, 0xb511, 0x1d40, 0x73c, 0x196, 0xac73, 0x1, 0x0);
        gbc.writeMem(0x9e81, { 0x38, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb511);
        EXPECT(gbc.pc(), 0x9e83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e81), 0x38);
        EXPECT(gbc.readMem(0x9e82), 0xb5);
        // 38 022A
        gbc.setState(0x3fb3, 0x6d40, 0xad40, 0xf01, 0xe610, 0xccb0, 0x0, 0x0);
        gbc.writeMem(0x3fb3, { 0x38, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x6d40);
        EXPECT(gbc.pc(), 0x3fb5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 022B
        gbc.setState(0x8bda, 0xb450, 0x630, 0x78ff, 0xfb0b, 0x1ea6, 0x1, 0x0);
        gbc.writeMem(0x8bda, { 0x38, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xb450);
        EXPECT(gbc.pc(), 0x8bb8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bda), 0x38);
        EXPECT(gbc.readMem(0x8bdb), 0xdc);
        // 38 022D
        gbc.setState(0x1c69, 0x832, 0xb8b0, 0x5d19, 0xb97, 0x195a, 0x0, 0x0);
        gbc.writeMem(0x1c69, { 0x38, 0x25 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x832);
        EXPECT(gbc.pc(), 0x1c90);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 022E
        gbc.setState(0x6909, 0x7c95, 0xebc0, 0x7b37, 0x16d2, 0x6859, 0x1, 0x1);
        gbc.writeMem(0x6909, { 0x38, 0xdf });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x7c95);
        EXPECT(gbc.pc(), 0x690b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 022F
        gbc.setState(0x9a4e, 0x518, 0x5fb0, 0xd538, 0xf282, 0x689a, 0x1, 0x1);
        gbc.writeMem(0x9a4e, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x518);
        EXPECT(gbc.pc(), 0x99fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a4e), 0x38);
        EXPECT(gbc.readMem(0x9a4f), 0xad);
        // 38 0231
        gbc.setState(0x46e4, 0xb57d, 0x6e0, 0x2c8e, 0x5fb7, 0x341c, 0x1, 0x1);
        gbc.writeMem(0x46e4, { 0x38, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xb57d);
        EXPECT(gbc.pc(), 0x46e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0232
        gbc.setState(0x406f, 0xfc86, 0x7350, 0x5648, 0x2ed5, 0xc33, 0x0, 0x0);
        gbc.writeMem(0x406f, { 0x38, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xfc86);
        EXPECT(gbc.pc(), 0x400c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0233
        gbc.setState(0xc5c, 0x516e, 0x97d0, 0x44d8, 0x2f90, 0xd838, 0x0, 0x1);
        gbc.writeMem(0xc5c, { 0x38, 0x3f });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x516e);
        EXPECT(gbc.pc(), 0xc9d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0234
        gbc.setState(0x1953, 0xebf0, 0x9360, 0xfedd, 0xb515, 0x45ee, 0x0, 0x1);
        gbc.writeMem(0x1953, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xebf0);
        EXPECT(gbc.pc(), 0x1955);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0235
        gbc.setState(0xe9b9, 0x3b5f, 0x9070, 0xe3ed, 0x69ce, 0x4985, 0x1, 0x1);
        gbc.writeMem(0xe9b9, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x3b5f);
        EXPECT(gbc.pc(), 0xea19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9b9), 0x38);
        EXPECT(gbc.readMem(0xe9ba), 0x5e);
        // 38 0236
        gbc.setState(0xa892, 0xe973, 0xd6a0, 0x547c, 0x4ada, 0x8c95, 0x0, 0x0);
        gbc.writeMem(0xa892, { 0x38, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xe973);
        EXPECT(gbc.pc(), 0xa894);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa892), 0x38);
        EXPECT(gbc.readMem(0xa893), 0x67);
        // 38 0237
        gbc.setState(0x7071, 0xbece, 0x8be0, 0x5a68, 0x49, 0x571a, 0x1, 0x0);
        gbc.writeMem(0x7071, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xbece);
        EXPECT(gbc.pc(), 0x7073);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0238
        gbc.setState(0x1640, 0x16fb, 0x5510, 0x1dd8, 0x6819, 0x9e27, 0x0, 0x0);
        gbc.writeMem(0x1640, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x16fb);
        EXPECT(gbc.pc(), 0x166c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0239
        gbc.setState(0xa4d, 0xfd, 0xacc0, 0x81d0, 0xc6c7, 0xc06f, 0x1, 0x0);
        gbc.writeMem(0xa4d, { 0x38, 0xbc });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xfd);
        EXPECT(gbc.pc(), 0xa4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 023A
        gbc.setState(0x57c1, 0x50b6, 0x4550, 0x15f1, 0x723a, 0xc58f, 0x0, 0x0);
        gbc.writeMem(0x57c1, { 0x38, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x50b6);
        EXPECT(gbc.pc(), 0x57fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 023B
        gbc.setState(0x5b14, 0x9101, 0x7410, 0x14d9, 0x4a, 0x214d, 0x1, 0x0);
        gbc.writeMem(0x5b14, { 0x38, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x9101);
        EXPECT(gbc.pc(), 0x5b5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 023C
        gbc.setState(0x1b25, 0x5e75, 0xe730, 0xd0f4, 0x1b5b, 0x2b8b, 0x1, 0x1);
        gbc.writeMem(0x1b25, { 0x38, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x5e75);
        EXPECT(gbc.pc(), 0x1afb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 023D
        gbc.setState(0x6e31, 0xea8a, 0xfb10, 0xa464, 0x5dda, 0xfdd9, 0x0, 0x1);
        gbc.writeMem(0x6e31, { 0x38, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xea8a);
        EXPECT(gbc.pc(), 0x6e8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 023E
        gbc.setState(0xe00b, 0x81e1, 0x4300, 0x3af0, 0x7da6, 0xf7db, 0x0, 0x1);
        gbc.writeMem(0xe00b, { 0x38, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x81e1);
        EXPECT(gbc.pc(), 0xe00d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe00b), 0x38);
        EXPECT(gbc.readMem(0xe00c), 0xd8);
        // 38 023F
        gbc.setState(0x2e81, 0xf506, 0x3480, 0x392f, 0xf84d, 0x593a, 0x0, 0x0);
        gbc.writeMem(0x2e81, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf506);
        EXPECT(gbc.pc(), 0x2e83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0240
        gbc.setState(0x4e08, 0x4554, 0xbf30, 0x68cf, 0x7fe3, 0x7bde, 0x0, 0x0);
        gbc.writeMem(0x4e08, { 0x38, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x4554);
        EXPECT(gbc.pc(), 0x4e2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0241
        gbc.setState(0x82f, 0x76ad, 0xd750, 0x3693, 0x9a20, 0x749d, 0x0, 0x1);
        gbc.writeMem(0x82f, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x76ad);
        EXPECT(gbc.pc(), 0x85a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0242
        gbc.setState(0x65d1, 0x70dd, 0x6380, 0x9e60, 0xecc6, 0xe0fd, 0x0, 0x1);
        gbc.writeMem(0x65d1, { 0x38, 0x39 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x70dd);
        EXPECT(gbc.pc(), 0x65d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0243
        gbc.setState(0x91f2, 0x4342, 0x4f00, 0x81a1, 0xa79c, 0x38cc, 0x0, 0x1);
        gbc.writeMem(0x91f2, { 0x38, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x4342);
        EXPECT(gbc.pc(), 0x91f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91f2), 0x38);
        EXPECT(gbc.readMem(0x91f3), 0xaa);
        // 38 0244
        gbc.setState(0x5312, 0xfff8, 0x41e0, 0xae8b, 0xd325, 0xf916, 0x1, 0x0);
        gbc.writeMem(0x5312, { 0x38, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0xfff8);
        EXPECT(gbc.pc(), 0x5314);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0245
        gbc.setState(0x23b1, 0x2a9c, 0x950, 0x739b, 0x68d9, 0x3ff5, 0x1, 0x1);
        gbc.writeMem(0x23b1, { 0x38, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x2a9c);
        EXPECT(gbc.pc(), 0x2418);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0246
        gbc.setState(0xbaf3, 0xc4e8, 0x3ef0, 0xb83b, 0x3990, 0xbb21, 0x1, 0x0);
        gbc.writeMem(0xbaf3, { 0x38, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc4e8);
        EXPECT(gbc.pc(), 0xbb08);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaf3), 0x38);
        EXPECT(gbc.readMem(0xbaf4), 0x13);
        // 38 0247
        gbc.setState(0xa67e, 0x6edf, 0x9d20, 0x95d2, 0x2a7a, 0x3da9, 0x0, 0x1);
        gbc.writeMem(0xa67e, { 0x38, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x6edf);
        EXPECT(gbc.pc(), 0xa680);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa67e), 0x38);
        EXPECT(gbc.readMem(0xa67f), 0x8);
        // 38 0248
        gbc.setState(0xa1ad, 0xa67b, 0x8b20, 0xd832, 0xbca1, 0x8df3, 0x0, 0x1);
        gbc.writeMem(0xa1ad, { 0x38, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xa67b);
        EXPECT(gbc.pc(), 0xa1af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa1ad), 0x38);
        EXPECT(gbc.readMem(0xa1ae), 0xd1);
        // 38 0249
        gbc.setState(0x920f, 0x7e2d, 0xfbd0, 0x24f5, 0x4490, 0x1e49, 0x0, 0x0);
        gbc.writeMem(0x920f, { 0x38, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7e2d);
        EXPECT(gbc.pc(), 0x9209);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x920f), 0x38);
        EXPECT(gbc.readMem(0x9210), 0xf8);
        // 38 024A
        gbc.setState(0x8231, 0x8e9b, 0xe350, 0xa004, 0x9ba7, 0x3efd, 0x0, 0x0);
        gbc.writeMem(0x8231, { 0x38, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x8e9b);
        EXPECT(gbc.pc(), 0x81b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8231), 0x38);
        EXPECT(gbc.readMem(0x8232), 0x83);
        // 38 024B
        gbc.setState(0x6b50, 0x87f8, 0x61c0, 0xdf53, 0x4bac, 0xe2c9, 0x0, 0x0);
        gbc.writeMem(0x6b50, { 0x38, 0xb5 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x87f8);
        EXPECT(gbc.pc(), 0x6b52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 024C
        gbc.setState(0xd5e5, 0x2aa3, 0x31f0, 0x1a67, 0x3279, 0x8440, 0x1, 0x1);
        gbc.writeMem(0xd5e5, { 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x2aa3);
        EXPECT(gbc.pc(), 0xd61a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5e5), 0x38);
        EXPECT(gbc.readMem(0xd5e6), 0x33);
        // 38 024D
        gbc.setState(0xaab9, 0xef13, 0xb5a0, 0x253e, 0x289a, 0xca64, 0x0, 0x0);
        gbc.writeMem(0xaab9, { 0x38, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xef13);
        EXPECT(gbc.pc(), 0xaabb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaab9), 0x38);
        EXPECT(gbc.readMem(0xaaba), 0x56);
        // 38 024E
        gbc.setState(0x12d6, 0x6ac7, 0xf200, 0x6ef6, 0x1ecb, 0x9bfd, 0x0, 0x1);
        gbc.writeMem(0x12d6, { 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x6ac7);
        EXPECT(gbc.pc(), 0x12d8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 024F
        gbc.setState(0x5334, 0x128a, 0x5040, 0xc236, 0x478b, 0xd420, 0x1, 0x1);
        gbc.writeMem(0x5334, { 0x38, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x128a);
        EXPECT(gbc.pc(), 0x5336);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0250
        gbc.setState(0x5c70, 0xd7ea, 0x7290, 0x3171, 0x4215, 0x1348, 0x1, 0x1);
        gbc.writeMem(0x5c70, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x71);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xd7ea);
        EXPECT(gbc.pc(), 0x5c34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0251
        gbc.setState(0xdedf, 0xc06c, 0xc640, 0x3928, 0xc109, 0xe341, 0x0, 0x1);
        gbc.writeMem(0xdedf, { 0x38, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc06c);
        EXPECT(gbc.pc(), 0xdee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdedf), 0x38);
        EXPECT(gbc.readMem(0xdee0), 0xf8);
        // 38 0252
        gbc.setState(0x4068, 0x452d, 0x2d40, 0xcb26, 0xa3c0, 0xad5f, 0x0, 0x1);
        gbc.writeMem(0x4068, { 0x38, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x452d);
        EXPECT(gbc.pc(), 0x406a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0253
        gbc.setState(0xbb5e, 0xf988, 0x7030, 0xee4c, 0x9a87, 0x2c08, 0x0, 0x0);
        gbc.writeMem(0xbb5e, { 0x38, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xf988);
        EXPECT(gbc.pc(), 0xbb91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb5e), 0x38);
        EXPECT(gbc.readMem(0xbb5f), 0x31);
        // 38 0254
        gbc.setState(0x6efd, 0xd7d6, 0xabc0, 0xc631, 0x53d, 0x1ccf, 0x1, 0x1);
        gbc.writeMem(0x6efd, { 0x38, 0xfd });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xd7d6);
        EXPECT(gbc.pc(), 0x6eff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0255
        gbc.setState(0xd350, 0x7647, 0xe70, 0xa2f3, 0x7e3c, 0x1dea, 0x0, 0x0);
        gbc.writeMem(0xd350, { 0x38, 0x8 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x7647);
        EXPECT(gbc.pc(), 0xd35a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd350), 0x38);
        EXPECT(gbc.readMem(0xd351), 0x8);
        // 38 0256
        gbc.setState(0xd63b, 0x7baf, 0x67a0, 0x134c, 0xac8d, 0x996e, 0x0, 0x0);
        gbc.writeMem(0xd63b, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x7baf);
        EXPECT(gbc.pc(), 0xd63d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd63b), 0x38);
        EXPECT(gbc.readMem(0xd63c), 0x9a);
        // 38 0257
        gbc.setState(0x1244, 0x49d5, 0xa100, 0xe17e, 0x16c3, 0x9c5e, 0x1, 0x1);
        gbc.writeMem(0x1244, { 0x38, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x49d5);
        EXPECT(gbc.pc(), 0x1246);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0258
        gbc.setState(0x401b, 0xf084, 0xa080, 0x5999, 0x94c0, 0xf880, 0x1, 0x1);
        gbc.writeMem(0x401b, { 0x38, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xf084);
        EXPECT(gbc.pc(), 0x401d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0259
        gbc.setState(0x144d, 0x4a12, 0x31b0, 0x4a57, 0x392f, 0xbc0b, 0x1, 0x0);
        gbc.writeMem(0x144d, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x4a12);
        EXPECT(gbc.pc(), 0x14cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 025A
        gbc.setState(0x5800, 0x29a6, 0x5e90, 0x743c, 0xa589, 0x1cff, 0x0, 0x0);
        gbc.writeMem(0x5800, { 0x38, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0x29a6);
        EXPECT(gbc.pc(), 0x57a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 025B
        gbc.setState(0x52e5, 0x5c91, 0x7250, 0x14a1, 0x79fa, 0xaf6d, 0x1, 0x1);
        gbc.writeMem(0x52e5, { 0x38, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x5c91);
        EXPECT(gbc.pc(), 0x52b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 025C
        gbc.setState(0x2040, 0x56e9, 0xdf0, 0x3dc3, 0xf7cf, 0x1968, 0x1, 0x1);
        gbc.writeMem(0x2040, { 0x38, 0x4e });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x19);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x56e9);
        EXPECT(gbc.pc(), 0x2090);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 025D
        gbc.setState(0x3b75, 0x4032, 0x93f0, 0xf7a4, 0x7512, 0xcf98, 0x0, 0x1);
        gbc.writeMem(0x3b75, { 0x38, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4032);
        EXPECT(gbc.pc(), 0x3b75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 025E
        gbc.setState(0x880f, 0xb7a, 0xce20, 0x239b, 0xadcc, 0x8a94, 0x1, 0x1);
        gbc.writeMem(0x880f, { 0x38, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0xb7a);
        EXPECT(gbc.pc(), 0x8811);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x880f), 0x38);
        EXPECT(gbc.readMem(0x8810), 0x84);
        // 38 025F
        gbc.setState(0x2b58, 0xf80, 0x3f30, 0xe60c, 0x607b, 0xd493, 0x0, 0x0);
        gbc.writeMem(0x2b58, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xf80);
        EXPECT(gbc.pc(), 0x2b76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0260
        gbc.setState(0x8650, 0xcb82, 0xe610, 0xee06, 0xd491, 0x6843, 0x1, 0x0);
        gbc.writeMem(0x8650, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xee);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xcb82);
        EXPECT(gbc.pc(), 0x86a7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8650), 0x38);
        EXPECT(gbc.readMem(0x8651), 0x55);
        // 38 0261
        gbc.setState(0xb230, 0x5b50, 0xb4a0, 0x69e5, 0xea79, 0x598a, 0x1, 0x0);
        gbc.writeMem(0xb230, { 0x38, 0x7c });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x5b50);
        EXPECT(gbc.pc(), 0xb232);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb230), 0x38);
        EXPECT(gbc.readMem(0xb231), 0x7c);
        // 38 0262
        gbc.setState(0xbb96, 0x5f62, 0xc370, 0xd502, 0x2d42, 0xc133, 0x0, 0x0);
        gbc.writeMem(0xbb96, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5f62);
        EXPECT(gbc.pc(), 0xbbc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb96), 0x38);
        EXPECT(gbc.readMem(0xbb97), 0x2a);
        // 38 0263
        gbc.setState(0x5043, 0xa0eb, 0x12f0, 0x4327, 0x1ad0, 0x3e4f, 0x1, 0x0);
        gbc.writeMem(0x5043, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xa0eb);
        EXPECT(gbc.pc(), 0x5061);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0264
        gbc.setState(0x453, 0x2107, 0xdfb0, 0x4dbf, 0xbea9, 0x626b, 0x1, 0x1);
        gbc.writeMem(0x453, { 0x38, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x2107);
        EXPECT(gbc.pc(), 0x499);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0265
        gbc.setState(0x9225, 0xf2c1, 0xdab0, 0xeab0, 0xaab9, 0x1583, 0x0, 0x0);
        gbc.writeMem(0x9225, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xf2c1);
        EXPECT(gbc.pc(), 0x9248);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9225), 0x38);
        EXPECT(gbc.readMem(0x9226), 0x21);
        // 38 0266
        gbc.setState(0x4034, 0xc5b4, 0xc100, 0x9914, 0xff3e, 0x774d, 0x0, 0x1);
        gbc.writeMem(0x4034, { 0x38, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xc5b4);
        EXPECT(gbc.pc(), 0x4036);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0267
        gbc.setState(0x76f1, 0x1ea4, 0x1860, 0xcbe6, 0x54ca, 0x237a, 0x1, 0x1);
        gbc.writeMem(0x76f1, { 0x38, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1ea4);
        EXPECT(gbc.pc(), 0x76f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0268
        gbc.setState(0xa76a, 0x26cf, 0x56b0, 0x9498, 0x8954, 0xd4b7, 0x0, 0x0);
        gbc.writeMem(0xa76a, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x26cf);
        EXPECT(gbc.pc(), 0xa6f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa76a), 0x38);
        EXPECT(gbc.readMem(0xa76b), 0x88);
        // 38 0269
        gbc.setState(0x1fc9, 0x9467, 0x2be0, 0x64ff, 0xccce, 0xe80, 0x0, 0x1);
        gbc.writeMem(0x1fc9, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x9467);
        EXPECT(gbc.pc(), 0x1fcb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 026A
        gbc.setState(0x87f7, 0xaf89, 0xba90, 0xe90a, 0x91fa, 0x4dce, 0x0, 0x0);
        gbc.writeMem(0x87f7, { 0x38, 0x50 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xaf89);
        EXPECT(gbc.pc(), 0x8849);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87f7), 0x38);
        EXPECT(gbc.readMem(0x87f8), 0x50);
        // 38 026B
        gbc.setState(0x8b12, 0x89b5, 0x9b20, 0x7580, 0xc146, 0xb8e0, 0x0, 0x0);
        gbc.writeMem(0x8b12, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x89b5);
        EXPECT(gbc.pc(), 0x8b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b12), 0x38);
        EXPECT(gbc.readMem(0x8b13), 0xc7);
        // 38 026C
        gbc.setState(0xa37, 0xf8b5, 0x7b0, 0xd06, 0x4c32, 0x80c4, 0x1, 0x1);
        gbc.writeMem(0xa37, { 0x38, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xf8b5);
        EXPECT(gbc.pc(), 0xa09);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 026D
        gbc.setState(0x7a32, 0xf120, 0x7ef0, 0x118f, 0xd182, 0x88ac, 0x0, 0x0);
        gbc.writeMem(0x7a32, { 0x38, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xf120);
        EXPECT(gbc.pc(), 0x7a72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 026E
        gbc.setState(0x7d55, 0x2492, 0xde70, 0x5a6, 0xeea6, 0x3f8f, 0x1, 0x1);
        gbc.writeMem(0x7d55, { 0x38, 0x79 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x2492);
        EXPECT(gbc.pc(), 0x7dd0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 026F
        gbc.setState(0x437d, 0x11d6, 0x97c0, 0x5d24, 0x9d9c, 0x2ae9, 0x0, 0x0);
        gbc.writeMem(0x437d, { 0x38, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x11d6);
        EXPECT(gbc.pc(), 0x437f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0271
        gbc.setState(0x5d5d, 0xe8a8, 0x9180, 0xa9ef, 0x75f1, 0xe1a0, 0x1, 0x0);
        gbc.writeMem(0x5d5d, { 0x38, 0x2e });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xe8a8);
        EXPECT(gbc.pc(), 0x5d5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0273
        gbc.setState(0x82b3, 0xe832, 0xe380, 0x6e78, 0x42bc, 0xb23, 0x1, 0x1);
        gbc.writeMem(0x82b3, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe832);
        EXPECT(gbc.pc(), 0x82b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82b3), 0x38);
        EXPECT(gbc.readMem(0x82b4), 0x59);
        // 38 0274
        gbc.setState(0x5dc2, 0x48d2, 0xdf20, 0x40cf, 0xb0bb, 0x982a, 0x0, 0x0);
        gbc.writeMem(0x5dc2, { 0x38, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x48d2);
        EXPECT(gbc.pc(), 0x5dc4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0275
        gbc.setState(0xcef8, 0x1920, 0x6bb0, 0x321b, 0x6f07, 0x50f3, 0x1, 0x1);
        gbc.writeMem(0xcef8, { 0x38, 0x59 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0x1920);
        EXPECT(gbc.pc(), 0xcf53);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcef8), 0x38);
        EXPECT(gbc.readMem(0xcef9), 0x59);
        // 38 0276
        gbc.setState(0x4c94, 0x4b23, 0x16b0, 0xd420, 0x3157, 0xb4b, 0x0, 0x1);
        gbc.writeMem(0x4c94, { 0x38, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x4b23);
        EXPECT(gbc.pc(), 0x4c77);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0277
        gbc.setState(0xa6de, 0x1932, 0x43b0, 0xe689, 0x501, 0xa76c, 0x0, 0x1);
        gbc.writeMem(0xa6de, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1932);
        EXPECT(gbc.pc(), 0xa6a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa6de), 0x38);
        EXPECT(gbc.readMem(0xa6df), 0xc7);
        // 38 0278
        gbc.setState(0x1ad7, 0x6fb1, 0xc090, 0x5092, 0x6786, 0xbc61, 0x0, 0x1);
        gbc.writeMem(0x1ad7, { 0x38, 0xac });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6fb1);
        EXPECT(gbc.pc(), 0x1a85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0279
        gbc.setState(0x3d6c, 0x7e3f, 0xf120, 0x9283, 0x61dd, 0x7d78, 0x0, 0x1);
        gbc.writeMem(0x3d6c, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7e3f);
        EXPECT(gbc.pc(), 0x3d6e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 027A
        gbc.setState(0x4ae1, 0x15bd, 0x4d30, 0x4338, 0xbb63, 0x5d0b, 0x1, 0x0);
        gbc.writeMem(0x4ae1, { 0x38, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x15bd);
        EXPECT(gbc.pc(), 0x4ade);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 027B
        gbc.setState(0x4b13, 0xa8c, 0x4b60, 0x5542, 0x82d2, 0xac80, 0x0, 0x1);
        gbc.writeMem(0x4b13, { 0x38, 0x19 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xa8c);
        EXPECT(gbc.pc(), 0x4b15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 027C
        gbc.setState(0xe1e6, 0x5ff9, 0xb4c0, 0x4c09, 0x9e36, 0xc06c, 0x1, 0x0);
        gbc.writeMem(0xe1e6, { 0x38, 0x48 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x5ff9);
        EXPECT(gbc.pc(), 0xe1e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe1e6), 0x38);
        EXPECT(gbc.readMem(0xe1e7), 0x48);
        // 38 027D
        gbc.setState(0xdef7, 0x412a, 0x5390, 0x43b3, 0x833, 0x4590, 0x1, 0x0);
        gbc.writeMem(0xdef7, { 0x38, 0x36 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x412a);
        EXPECT(gbc.pc(), 0xdf2f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdef7), 0x38);
        EXPECT(gbc.readMem(0xdef8), 0x36);
        // 38 027F
        gbc.setState(0x8eea, 0x3013, 0xfd10, 0x72d9, 0xda9f, 0xe57b, 0x1, 0x1);
        gbc.writeMem(0x8eea, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x3013);
        EXPECT(gbc.pc(), 0x8f4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eea), 0x38);
        EXPECT(gbc.readMem(0x8eeb), 0x60);
        // 38 0280
        gbc.setState(0xe8fb, 0xa773, 0x4f70, 0xba60, 0x5599, 0x7fea, 0x1, 0x0);
        gbc.writeMem(0xe8fb, { 0x38, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xa773);
        EXPECT(gbc.pc(), 0xe8e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8fb), 0x38);
        EXPECT(gbc.readMem(0xe8fc), 0xe9);
        // 38 0281
        gbc.setState(0x35c7, 0x462e, 0xcf10, 0x96f3, 0x66b5, 0x26b7, 0x1, 0x1);
        gbc.writeMem(0x35c7, { 0x38, 0x3e });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x462e);
        EXPECT(gbc.pc(), 0x3607);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0283
        gbc.setState(0x262d, 0x93a8, 0xdbf0, 0x22b0, 0xb70f, 0x2cfd, 0x1, 0x1);
        gbc.writeMem(0x262d, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x93a8);
        EXPECT(gbc.pc(), 0x25e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0284
        gbc.setState(0x8eb8, 0x8ef, 0x7cb0, 0x59d7, 0xcd21, 0x168d, 0x0, 0x0);
        gbc.writeMem(0x8eb8, { 0x38, 0xe9 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x8ef);
        EXPECT(gbc.pc(), 0x8ea3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eb8), 0x38);
        EXPECT(gbc.readMem(0x8eb9), 0xe9);
        // 38 0285
        gbc.setState(0x7703, 0x657c, 0x5810, 0x2aef, 0xbd5d, 0xa1fd, 0x0, 0x1);
        gbc.writeMem(0x7703, { 0x38, 0x28 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x657c);
        EXPECT(gbc.pc(), 0x772d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0286
        gbc.setState(0x60ff, 0xe841, 0xa8a0, 0x6317, 0xac45, 0x282b, 0x0, 0x0);
        gbc.writeMem(0x60ff, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xe841);
        EXPECT(gbc.pc(), 0x6101);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0287
        gbc.setState(0x773e, 0x7db7, 0xca0, 0xdede, 0x3fc0, 0x9ed8, 0x1, 0x0);
        gbc.writeMem(0x773e, { 0x38, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7db7);
        EXPECT(gbc.pc(), 0x7740);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0288
        gbc.setState(0xb5f, 0xc5e6, 0x46d0, 0xe413, 0xdab3, 0x8ffa, 0x1, 0x1);
        gbc.writeMem(0xb5f, { 0x38, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xc5e6);
        EXPECT(gbc.pc(), 0xbb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0289
        gbc.setState(0x447b, 0x5e92, 0x8700, 0x6ed2, 0x8898, 0x5252, 0x0, 0x1);
        gbc.writeMem(0x447b, { 0x38, 0x14 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x5e92);
        EXPECT(gbc.pc(), 0x447d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 028A
        gbc.setState(0x979c, 0x6a5d, 0x28d0, 0xbe3a, 0x8034, 0xb1de, 0x0, 0x0);
        gbc.writeMem(0x979c, { 0x38, 0x3c });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x6a5d);
        EXPECT(gbc.pc(), 0x97da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x979c), 0x38);
        EXPECT(gbc.readMem(0x979d), 0x3c);
        // 38 028B
        gbc.setState(0x58cd, 0x7577, 0xe770, 0x1ffa, 0x50be, 0xad87, 0x0, 0x0);
        gbc.writeMem(0x58cd, { 0x38, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x7577);
        EXPECT(gbc.pc(), 0x58a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 028C
        gbc.setState(0x3521, 0x92fe, 0x3040, 0x2625, 0x8b2a, 0x97f0, 0x0, 0x0);
        gbc.writeMem(0x3521, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x92fe);
        EXPECT(gbc.pc(), 0x3523);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 028D
        gbc.setState(0x7292, 0xbecb, 0x3e40, 0xd197, 0x238d, 0xdb06, 0x0, 0x0);
        gbc.writeMem(0x7292, { 0x38, 0xfa });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xbecb);
        EXPECT(gbc.pc(), 0x7294);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 028E
        gbc.setState(0xa381, 0x1b68, 0xcd90, 0x40c3, 0x81ab, 0x2c99, 0x0, 0x1);
        gbc.writeMem(0xa381, { 0x38, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x1b68);
        EXPECT(gbc.pc(), 0xa35c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa381), 0x38);
        EXPECT(gbc.readMem(0xa382), 0xd9);
        // 38 028F
        gbc.setState(0xe222, 0xbdbd, 0x8800, 0xea6c, 0x9024, 0xd992, 0x0, 0x0);
        gbc.writeMem(0xe222, { 0x38, 0xa2 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xbdbd);
        EXPECT(gbc.pc(), 0xe224);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe222), 0x38);
        EXPECT(gbc.readMem(0xe223), 0xa2);
        // 38 0290
        gbc.setState(0xa680, 0x9c23, 0xf080, 0xc4f2, 0x48bf, 0xc4e9, 0x1, 0x0);
        gbc.writeMem(0xa680, { 0x38, 0xa9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x9c23);
        EXPECT(gbc.pc(), 0xa682);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa680), 0x38);
        EXPECT(gbc.readMem(0xa681), 0xa9);
        // 38 0291
        gbc.setState(0x7a86, 0x97dc, 0x820, 0x7dd2, 0x88a2, 0x39b0, 0x1, 0x1);
        gbc.writeMem(0x7a86, { 0x38, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0x97dc);
        EXPECT(gbc.pc(), 0x7a88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0292
        gbc.setState(0x4a96, 0xa04e, 0x3be0, 0xc4de, 0xa6a0, 0xc74b, 0x0, 0x0);
        gbc.writeMem(0x4a96, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0xa04e);
        EXPECT(gbc.pc(), 0x4a98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0293
        gbc.setState(0x2632, 0xa86d, 0x7f90, 0xa6fe, 0xded6, 0x1ba9, 0x0, 0x0);
        gbc.writeMem(0x2632, { 0x38, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xa86d);
        EXPECT(gbc.pc(), 0x2697);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0294
        gbc.setState(0xe91b, 0xe92c, 0x7260, 0xa6b3, 0x4e27, 0x51f, 0x1, 0x1);
        gbc.writeMem(0xe91b, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0xe92c);
        EXPECT(gbc.pc(), 0xe91d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe91b), 0x38);
        EXPECT(gbc.readMem(0xe91c), 0xb7);
        // 38 0295
        gbc.setState(0x8a04, 0xc7e7, 0x7c60, 0x6435, 0x94f1, 0x6ea, 0x1, 0x0);
        gbc.writeMem(0x8a04, { 0x38, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xc7e7);
        EXPECT(gbc.pc(), 0x8a06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8a04), 0x38);
        EXPECT(gbc.readMem(0x8a05), 0x46);
        // 38 0296
        gbc.setState(0x3034, 0x7c07, 0x7720, 0xb72c, 0x7297, 0xbc39, 0x1, 0x0);
        gbc.writeMem(0x3034, { 0x38, 0x1a });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x7c07);
        EXPECT(gbc.pc(), 0x3036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0297
        gbc.setState(0x10ad, 0x618e, 0xe150, 0xd2b0, 0x24c8, 0xb7fb, 0x1, 0x0);
        gbc.writeMem(0x10ad, { 0x38, 0x58 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x618e);
        EXPECT(gbc.pc(), 0x1107);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0298
        gbc.setState(0x2bef, 0x9a04, 0x25c0, 0x7f5b, 0xdf03, 0x805b, 0x0, 0x0);
        gbc.writeMem(0x2bef, { 0x38, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x9a04);
        EXPECT(gbc.pc(), 0x2bf1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0299
        gbc.setState(0x670f, 0xa17f, 0x42b0, 0x67e8, 0xcf82, 0x9d9e, 0x1, 0x0);
        gbc.writeMem(0x670f, { 0x38, 0x6e });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0xa17f);
        EXPECT(gbc.pc(), 0x677f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 029A
        gbc.setState(0x792c, 0x2697, 0xaf80, 0xc8f5, 0x35a0, 0xdf3d, 0x0, 0x1);
        gbc.writeMem(0x792c, { 0x38, 0xce });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x2697);
        EXPECT(gbc.pc(), 0x792e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 029B
        gbc.setState(0x4274, 0x4f0c, 0x7b80, 0xda67, 0x89b6, 0xe201, 0x1, 0x1);
        gbc.writeMem(0x4274, { 0x38, 0x7d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x4f0c);
        EXPECT(gbc.pc(), 0x4276);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 029C
        gbc.setState(0xf16, 0xf41e, 0xe330, 0x8d61, 0x455d, 0xfb74, 0x0, 0x0);
        gbc.writeMem(0xf16, { 0x38, 0xea });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xf41e);
        EXPECT(gbc.pc(), 0xf02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 029D
        gbc.setState(0x91be, 0x9e6a, 0x7820, 0x9406, 0x8bbf, 0xcc38, 0x0, 0x0);
        gbc.writeMem(0x91be, { 0x38, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x9e6a);
        EXPECT(gbc.pc(), 0x91c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91be), 0x38);
        EXPECT(gbc.readMem(0x91bf), 0x6a);
        // 38 029E
        gbc.setState(0x5d9a, 0x7f69, 0x55f0, 0xdd2c, 0xe93a, 0xfbbb, 0x1, 0x0);
        gbc.writeMem(0x5d9a, { 0x38, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7f69);
        EXPECT(gbc.pc(), 0x5df8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 029F
        gbc.setState(0x3737, 0xdb53, 0xa8b0, 0xff5b, 0x2d1d, 0xa4f6, 0x0, 0x1);
        gbc.writeMem(0x3737, { 0x38, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0xdb53);
        EXPECT(gbc.pc(), 0x36d6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02A0
        gbc.setState(0xb8e3, 0x44bc, 0x6160, 0x314b, 0xcba5, 0x60f4, 0x1, 0x1);
        gbc.writeMem(0xb8e3, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x44bc);
        EXPECT(gbc.pc(), 0xb8e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb8e3), 0x38);
        EXPECT(gbc.readMem(0xb8e4), 0x5e);
        // 38 02A1
        gbc.setState(0x329f, 0x26ee, 0xc090, 0x6664, 0xa342, 0x2f9e, 0x0, 0x0);
        gbc.writeMem(0x329f, { 0x38, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x26ee);
        EXPECT(gbc.pc(), 0x329a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02A2
        gbc.setState(0xab10, 0x295d, 0xdfd0, 0xf52c, 0x53e3, 0xbf91, 0x0, 0x0);
        gbc.writeMem(0xab10, { 0x38, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x295d);
        EXPECT(gbc.pc(), 0xab05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab10), 0x38);
        EXPECT(gbc.readMem(0xab11), 0xf3);
        // 38 02A3
        gbc.setState(0xefd3, 0xac32, 0x2f00, 0x18d, 0x39a2, 0x26d3, 0x0, 0x0);
        gbc.writeMem(0xefd3, { 0x38, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xac32);
        EXPECT(gbc.pc(), 0xefd5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xefd3), 0x38);
        EXPECT(gbc.readMem(0xefd4), 0x2f);
        // 38 02A4
        gbc.setState(0xa37d, 0xc6c6, 0x80f0, 0x9e91, 0xd77, 0x56ed, 0x0, 0x0);
        gbc.writeMem(0xa37d, { 0x38, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xc6c6);
        EXPECT(gbc.pc(), 0xa3c4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa37d), 0x38);
        EXPECT(gbc.readMem(0xa37e), 0x45);
        // 38 02A5
        gbc.setState(0xe803, 0x1175, 0xded0, 0xfb2f, 0x45f3, 0x8434, 0x1, 0x0);
        gbc.writeMem(0xe803, { 0x38, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x1175);
        EXPECT(gbc.pc(), 0xe7c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe803), 0x38);
        EXPECT(gbc.readMem(0xe804), 0xc3);
        // 38 02A6
        gbc.setState(0x97c8, 0x9f16, 0x3780, 0x2b42, 0xe3d9, 0x8d1c, 0x0, 0x1);
        gbc.writeMem(0x97c8, { 0x38, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0x9f16);
        EXPECT(gbc.pc(), 0x97ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c8), 0x38);
        EXPECT(gbc.readMem(0x97c9), 0xbe);
        // 38 02A7
        gbc.setState(0x1c16, 0x6de1, 0x6da0, 0x5eae, 0x7dc7, 0xfa74, 0x1, 0x0);
        gbc.writeMem(0x1c16, { 0x38, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x6de1);
        EXPECT(gbc.pc(), 0x1c18);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02A8
        gbc.setState(0x7075, 0xca21, 0xbf30, 0xfa72, 0x48e9, 0xd54, 0x1, 0x1);
        gbc.writeMem(0x7075, { 0x38, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x72);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xca21);
        EXPECT(gbc.pc(), 0x7078);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02A9
        gbc.setState(0x61ab, 0xe777, 0xad0, 0x524a, 0xccb, 0x5e29, 0x1, 0x1);
        gbc.writeMem(0x61ab, { 0x38, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe777);
        EXPECT(gbc.pc(), 0x614b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02AA
        gbc.setState(0xe3bd, 0x8aaf, 0x7c40, 0x3dd2, 0x2fcd, 0xec95, 0x0, 0x0);
        gbc.writeMem(0xe3bd, { 0x38, 0x1e });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x8aaf);
        EXPECT(gbc.pc(), 0xe3bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe3bd), 0x38);
        EXPECT(gbc.readMem(0xe3be), 0x1e);
        // 38 02AB
        gbc.setState(0x74b4, 0xa374, 0xd340, 0x63ee, 0xbed7, 0xc993, 0x0, 0x1);
        gbc.writeMem(0x74b4, { 0x38, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xa374);
        EXPECT(gbc.pc(), 0x74b6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02AC
        gbc.setState(0xce49, 0xdc10, 0x7530, 0xd4d4, 0x928b, 0x81b3, 0x0, 0x0);
        gbc.writeMem(0xce49, { 0x38, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0xdc10);
        EXPECT(gbc.pc(), 0xce6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce49), 0x38);
        EXPECT(gbc.readMem(0xce4a), 0x20);
        // 38 02AD
        gbc.setState(0x7401, 0xba18, 0x47b0, 0x8470, 0x1137, 0xb274, 0x1, 0x0);
        gbc.writeMem(0x7401, { 0x38, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xba18);
        EXPECT(gbc.pc(), 0x7455);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02AE
        gbc.setState(0x485e, 0x7097, 0xd8a0, 0x2d23, 0xbcac, 0x857d, 0x0, 0x1);
        gbc.writeMem(0x485e, { 0x38, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x7097);
        EXPECT(gbc.pc(), 0x4860);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02AF
        gbc.setState(0x9a93, 0x68bd, 0x73d0, 0x6e95, 0x7eba, 0x7b79, 0x1, 0x1);
        gbc.writeMem(0x9a93, { 0x38, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x68bd);
        EXPECT(gbc.pc(), 0x9a45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9a93), 0x38);
        EXPECT(gbc.readMem(0x9a94), 0xb0);
        // 38 02B0
        gbc.setState(0x271e, 0xc4da, 0x480, 0x43c9, 0x2e91, 0xc5c6, 0x1, 0x0);
        gbc.writeMem(0x271e, { 0x38, 0xd });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xc4da);
        EXPECT(gbc.pc(), 0x2720);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02B1
        gbc.setState(0xef66, 0x77a6, 0x35a0, 0x5ddf, 0xd5b2, 0x9945, 0x1, 0x1);
        gbc.writeMem(0xef66, { 0x38, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x77a6);
        EXPECT(gbc.pc(), 0xef68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef66), 0x38);
        EXPECT(gbc.readMem(0xef67), 0x9);
        // 38 02B2
        gbc.setState(0x4b62, 0x2ff3, 0xbba0, 0x94da, 0x5a7, 0x5e1d, 0x1, 0x1);
        gbc.writeMem(0x4b62, { 0x38, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2ff3);
        EXPECT(gbc.pc(), 0x4b64);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02B4
        gbc.setState(0xdec3, 0xc6cc, 0x2830, 0xdc8c, 0xc602, 0x43fb, 0x1, 0x0);
        gbc.writeMem(0xdec3, { 0x38, 0x57 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xc6cc);
        EXPECT(gbc.pc(), 0xdf1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdec3), 0x38);
        EXPECT(gbc.readMem(0xdec4), 0x57);
        // 38 02B5
        gbc.setState(0x7ef0, 0x4dcf, 0x4850, 0x1055, 0x3ca8, 0xa078, 0x1, 0x1);
        gbc.writeMem(0x7ef0, { 0x38, 0xb7 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x4dcf);
        EXPECT(gbc.pc(), 0x7ea9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02B6
        gbc.setState(0x172, 0xed49, 0x9860, 0x5669, 0x528a, 0x9d1a, 0x0, 0x1);
        gbc.writeMem(0x172, { 0x38, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xed49);
        EXPECT(gbc.pc(), 0x174);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02B7
        gbc.setState(0x7ecb, 0x1d60, 0xd090, 0xeef, 0x18d8, 0x1ca9, 0x0, 0x0);
        gbc.writeMem(0x7ecb, { 0x38, 0x6 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1d60);
        EXPECT(gbc.pc(), 0x7ed3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02B8
        gbc.setState(0xc376, 0xd7a6, 0xa960, 0xb8e8, 0xe2de, 0x635b, 0x0, 0x1);
        gbc.writeMem(0xc376, { 0x38, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd7a6);
        EXPECT(gbc.pc(), 0xc378);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc376), 0x38);
        EXPECT(gbc.readMem(0xc377), 0xc9);
        // 38 02B9
        gbc.setState(0x9fdd, 0xffe, 0xe2e0, 0x6093, 0xb78a, 0xc5a0, 0x0, 0x0);
        gbc.writeMem(0x9fdd, { 0x38, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xffe);
        EXPECT(gbc.pc(), 0x9fdf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9fdd), 0x38);
        EXPECT(gbc.readMem(0x9fde), 0xaa);
        // 38 02BA
        gbc.setState(0xe237, 0x6da2, 0xbb90, 0xc93, 0xf2d7, 0x7e4d, 0x1, 0x0);
        gbc.writeMem(0xe237, { 0x38, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x6da2);
        EXPECT(gbc.pc(), 0xe1bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe237), 0x38);
        EXPECT(gbc.readMem(0xe238), 0x84);
        // 38 02BB
        gbc.setState(0xd841, 0x431, 0x95d0, 0x44c0, 0x25f8, 0xfef0, 0x1, 0x1);
        gbc.writeMem(0xd841, { 0x38, 0xc5 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x431);
        EXPECT(gbc.pc(), 0xd808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd841), 0x38);
        EXPECT(gbc.readMem(0xd842), 0xc5);
        // 38 02BC
        gbc.setState(0x2d8c, 0xe76e, 0xc3e0, 0x9a75, 0x4bbb, 0xef31, 0x0, 0x1);
        gbc.writeMem(0x2d8c, { 0x38, 0x5a });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe76e);
        EXPECT(gbc.pc(), 0x2d8e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02BD
        gbc.setState(0x2846, 0x50d7, 0x5c10, 0x574e, 0x5052, 0x21b8, 0x1, 0x0);
        gbc.writeMem(0x2846, { 0x38, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x50d7);
        EXPECT(gbc.pc(), 0x2828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02BE
        gbc.setState(0x6a29, 0xdfd1, 0xecf0, 0xbad2, 0x7167, 0xbb93, 0x1, 0x1);
        gbc.writeMem(0x6a29, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xdfd1);
        EXPECT(gbc.pc(), 0x69b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02BF
        gbc.setState(0x85cc, 0x1ca5, 0xab20, 0x99ea, 0xde91, 0x1e2, 0x1, 0x1);
        gbc.writeMem(0x85cc, { 0x38, 0x1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x1ca5);
        EXPECT(gbc.pc(), 0x85ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x85cc), 0x38);
        EXPECT(gbc.readMem(0x85cd), 0x1);
        // 38 02C1
        gbc.setState(0x853d, 0x70e, 0x2a0, 0x7423, 0xd85e, 0xe89e, 0x1, 0x1);
        gbc.writeMem(0x853d, { 0x38, 0x30 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x70e);
        EXPECT(gbc.pc(), 0x853f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x853d), 0x38);
        EXPECT(gbc.readMem(0x853e), 0x30);
        // 38 02C2
        gbc.setState(0x80d2, 0xc1a7, 0x9db0, 0x933c, 0x53e3, 0x7bd7, 0x0, 0x0);
        gbc.writeMem(0x80d2, { 0x38, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc1a7);
        EXPECT(gbc.pc(), 0x806f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x80d2), 0x38);
        EXPECT(gbc.readMem(0x80d3), 0x9b);
        // 38 02C3
        gbc.setState(0x931e, 0x3de8, 0xd0, 0x1d7c, 0xea23, 0xd732, 0x0, 0x0);
        gbc.writeMem(0x931e, { 0x38, 0xd8 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3de8);
        EXPECT(gbc.pc(), 0x92f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931e), 0x38);
        EXPECT(gbc.readMem(0x931f), 0xd8);
        // 38 02C4
        gbc.setState(0xc26a, 0x8dce, 0xb8f0, 0xdb8b, 0x422d, 0xae0c, 0x1, 0x0);
        gbc.writeMem(0xc26a, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8dce);
        EXPECT(gbc.pc(), 0xc288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26a), 0x38);
        EXPECT(gbc.readMem(0xc26b), 0x1c);
        // 38 02C5
        gbc.setState(0x3e3a, 0x33ed, 0xdd70, 0xb480, 0x981c, 0xe473, 0x0, 0x0);
        gbc.writeMem(0x3e3a, { 0x38, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x33ed);
        EXPECT(gbc.pc(), 0x3dfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02C6
        gbc.setState(0xc8a0, 0x5670, 0xafe0, 0x7867, 0x102f, 0x6e8d, 0x1, 0x0);
        gbc.writeMem(0xc8a0, { 0x38, 0x42 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5670);
        EXPECT(gbc.pc(), 0xc8a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8a0), 0x38);
        EXPECT(gbc.readMem(0xc8a1), 0x42);
        // 38 02C7
        gbc.setState(0x5a7b, 0xccc7, 0xb870, 0xefb9, 0x3def, 0xb938, 0x0, 0x1);
        gbc.writeMem(0x5a7b, { 0x38, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xccc7);
        EXPECT(gbc.pc(), 0x5a02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02C8
        gbc.setState(0x8695, 0x408c, 0xb50, 0xae81, 0xe2e7, 0x30f4, 0x0, 0x1);
        gbc.writeMem(0x8695, { 0x38, 0x5f });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x408c);
        EXPECT(gbc.pc(), 0x86f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8695), 0x38);
        EXPECT(gbc.readMem(0x8696), 0x5f);
        // 38 02C9
        gbc.setState(0xb948, 0x1774, 0x7550, 0x2d3c, 0x99e0, 0xdbd6, 0x0, 0x1);
        gbc.writeMem(0xb948, { 0x38, 0xd3 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1774);
        EXPECT(gbc.pc(), 0xb91d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb948), 0x38);
        EXPECT(gbc.readMem(0xb949), 0xd3);
        // 38 02CA
        gbc.setState(0x1dc1, 0x193c, 0x96b0, 0x4996, 0xcf55, 0x1c1, 0x0, 0x1);
        gbc.writeMem(0x1dc1, { 0x38, 0xdd });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xcf);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x193c);
        EXPECT(gbc.pc(), 0x1da0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02CB
        gbc.setState(0x208c, 0xff1c, 0x62b0, 0x5d67, 0xf790, 0xd481, 0x1, 0x0);
        gbc.writeMem(0x208c, { 0x38, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xff1c);
        EXPECT(gbc.pc(), 0x20b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02CC
        gbc.setState(0x662c, 0x3de, 0xa860, 0x302f, 0xbb9c, 0x31d1, 0x0, 0x0);
        gbc.writeMem(0x662c, { 0x38, 0xa });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x3de);
        EXPECT(gbc.pc(), 0x662e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02CD
        gbc.setState(0xe328, 0xda84, 0x3140, 0x9d48, 0xba05, 0xcfe0, 0x0, 0x0);
        gbc.writeMem(0xe328, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xda84);
        EXPECT(gbc.pc(), 0xe32a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe328), 0x38);
        EXPECT(gbc.readMem(0xe329), 0x4a);
        // 38 02CE
        gbc.setState(0x53, 0x58a9, 0xd6d0, 0x4779, 0x33e9, 0x7bb7, 0x1, 0x0);
        gbc.writeMem(0x53, { 0x38, 0xf1 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x58a9);
        EXPECT(gbc.pc(), 0x46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02CF
        gbc.setState(0xa70b, 0xb3b9, 0xcd00, 0xaff4, 0x7ee1, 0x903b, 0x1, 0x1);
        gbc.writeMem(0xa70b, { 0x38, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xb3b9);
        EXPECT(gbc.pc(), 0xa70d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa70b), 0x38);
        EXPECT(gbc.readMem(0xa70c), 0x1f);
        // 38 02D0
        gbc.setState(0x6a25, 0xb24a, 0xa4c0, 0x2aaa, 0xac73, 0x5b08, 0x0, 0x1);
        gbc.writeMem(0x6a25, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8);
        EXPECT(gbc.sp(), 0xb24a);
        EXPECT(gbc.pc(), 0x6a27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02D1
        gbc.setState(0x2262, 0x438c, 0x7130, 0x40b6, 0xf3e8, 0x165f, 0x0, 0x0);
        gbc.writeMem(0x2262, { 0x38, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x438c);
        EXPECT(gbc.pc(), 0x223b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02D2
        gbc.setState(0xc539, 0xc543, 0x5680, 0x3f76, 0xb7ab, 0x3792, 0x0, 0x0);
        gbc.writeMem(0xc539, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xc543);
        EXPECT(gbc.pc(), 0xc53b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc539), 0x38);
        EXPECT(gbc.readMem(0xc53a), 0x60);
        // 38 02D3
        gbc.setState(0x8415, 0xa140, 0xd770, 0x478d, 0x2010, 0x8a14, 0x1, 0x0);
        gbc.writeMem(0x8415, { 0x38, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xa140);
        EXPECT(gbc.pc(), 0x847a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8415), 0x38);
        EXPECT(gbc.readMem(0x8416), 0x63);
        // 38 02D4
        gbc.setState(0x8ea0, 0x247, 0xda90, 0x94e6, 0xd746, 0xf191, 0x1, 0x0);
        gbc.writeMem(0x8ea0, { 0x38, 0xad });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x247);
        EXPECT(gbc.pc(), 0x8e4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ea0), 0x38);
        EXPECT(gbc.readMem(0x8ea1), 0xad);
        // 38 02D5
        gbc.setState(0xee45, 0x7c54, 0x37e0, 0x5c6e, 0xc241, 0xce2f, 0x1, 0x1);
        gbc.writeMem(0xee45, { 0x38, 0x69 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x7c54);
        EXPECT(gbc.pc(), 0xee47);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee45), 0x38);
        EXPECT(gbc.readMem(0xee46), 0x69);
        // 38 02D6
        gbc.setState(0x932, 0x6f30, 0xc90, 0x5ca, 0x4161, 0x84b2, 0x1, 0x1);
        gbc.writeMem(0x932, { 0x38, 0x3b });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x5);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6f30);
        EXPECT(gbc.pc(), 0x96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02D7
        gbc.setState(0xac01, 0x239a, 0xcf40, 0x119b, 0x34dd, 0xa561, 0x0, 0x1);
        gbc.writeMem(0xac01, { 0x38, 0x18 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x239a);
        EXPECT(gbc.pc(), 0xac03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac01), 0x38);
        EXPECT(gbc.readMem(0xac02), 0x18);
        // 38 02D8
        gbc.setState(0x4ae4, 0xe831, 0x2450, 0xda4e, 0xef77, 0xf4c1, 0x1, 0x0);
        gbc.writeMem(0x4ae4, { 0x38, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xe831);
        EXPECT(gbc.pc(), 0x4b2d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02D9
        gbc.setState(0x27c4, 0xcd50, 0xc7a0, 0x1916, 0x854e, 0x6269, 0x0, 0x1);
        gbc.writeMem(0x27c4, { 0x38, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xcd50);
        EXPECT(gbc.pc(), 0x27c6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02DA
        gbc.setState(0xe73b, 0xd828, 0x2300, 0x7f85, 0xddce, 0xec69, 0x1, 0x1);
        gbc.writeMem(0xe73b, { 0x38, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xd828);
        EXPECT(gbc.pc(), 0xe73d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe73b), 0x38);
        EXPECT(gbc.readMem(0xe73c), 0x84);
        // 38 02DB
        gbc.setState(0x8d39, 0x1c29, 0xfe30, 0xcca1, 0x6935, 0x5c69, 0x0, 0x1);
        gbc.writeMem(0x8d39, { 0x38, 0xe3 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x1c29);
        EXPECT(gbc.pc(), 0x8d1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d39), 0x38);
        EXPECT(gbc.readMem(0x8d3a), 0xe3);
        // 38 02DC
        gbc.setState(0x5254, 0xb884, 0xdcd0, 0x1a0e, 0x7f70, 0xb455, 0x1, 0x1);
        gbc.writeMem(0x5254, { 0x38, 0xcc });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb884);
        EXPECT(gbc.pc(), 0x5222);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02DD
        gbc.setState(0x95d7, 0xecd6, 0x3c10, 0xac29, 0xdf07, 0xa37a, 0x0, 0x1);
        gbc.writeMem(0x95d7, { 0x38, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xecd6);
        EXPECT(gbc.pc(), 0x9648);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95d7), 0x38);
        EXPECT(gbc.readMem(0x95d8), 0x6f);
        // 38 02DE
        gbc.setState(0x67ad, 0xddc2, 0xfd90, 0x5d55, 0x993a, 0x7d9d, 0x0, 0x0);
        gbc.writeMem(0x67ad, { 0x38, 0xdb });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xddc2);
        EXPECT(gbc.pc(), 0x678a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02DF
        gbc.setState(0x55b8, 0x6f66, 0xd7a0, 0xa66, 0x1b26, 0x597f, 0x0, 0x0);
        gbc.writeMem(0x55b8, { 0x38, 0x4b });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x66);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x6f66);
        EXPECT(gbc.pc(), 0x55ba);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02E0
        gbc.setState(0xc26b, 0x9dfc, 0x93f0, 0x844a, 0xfb73, 0x78, 0x1, 0x0);
        gbc.writeMem(0xc26b, { 0x38, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x9dfc);
        EXPECT(gbc.pc(), 0xc2d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc26b), 0x38);
        EXPECT(gbc.readMem(0xc26c), 0x67);
        // 38 02E1
        gbc.setState(0xa598, 0x749f, 0xd390, 0x5e45, 0xc558, 0xfabe, 0x1, 0x0);
        gbc.writeMem(0xa598, { 0x38, 0x2c });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x749f);
        EXPECT(gbc.pc(), 0xa5c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa598), 0x38);
        EXPECT(gbc.readMem(0xa599), 0x2c);
        // 38 02E2
        gbc.setState(0x4b96, 0x126f, 0x5a30, 0xe2a7, 0x3113, 0x99ab, 0x1, 0x0);
        gbc.writeMem(0x4b96, { 0x38, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x126f);
        EXPECT(gbc.pc(), 0x4bfc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02E3
        gbc.setState(0xe4ed, 0x7bf, 0x4ca0, 0xcd9c, 0x7f9, 0x98d8, 0x0, 0x0);
        gbc.writeMem(0xe4ed, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x7bf);
        EXPECT(gbc.pc(), 0xe4ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe4ed), 0x38);
        EXPECT(gbc.readMem(0xe4ee), 0xe6);
        // 38 02E4
        gbc.setState(0x1934, 0x44d6, 0xfde0, 0xc3ce, 0x2d66, 0x6b9f, 0x0, 0x1);
        gbc.writeMem(0x1934, { 0x38, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x44d6);
        EXPECT(gbc.pc(), 0x1936);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02E5
        gbc.setState(0x773d, 0x9047, 0x3110, 0xc4eb, 0x1c9b, 0x20c3, 0x1, 0x1);
        gbc.writeMem(0x773d, { 0x38, 0x75 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x9047);
        EXPECT(gbc.pc(), 0x77b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02E6
        gbc.setState(0x71c5, 0x8309, 0x5f00, 0x6343, 0xb5d1, 0xf7c0, 0x0, 0x0);
        gbc.writeMem(0x71c5, { 0x38, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x8309);
        EXPECT(gbc.pc(), 0x71c7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02E7
        gbc.setState(0x4379, 0xee21, 0xfd40, 0x6302, 0x95d0, 0xf044, 0x1, 0x1);
        gbc.writeMem(0x4379, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xee21);
        EXPECT(gbc.pc(), 0x437b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02E8
        gbc.setState(0x44b2, 0xcbd2, 0x1700, 0x18de, 0xa75e, 0x5f45, 0x1, 0x0);
        gbc.writeMem(0x44b2, { 0x38, 0xc4 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0xcbd2);
        EXPECT(gbc.pc(), 0x44b4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02E9
        gbc.setState(0x5f97, 0x41a5, 0x1790, 0x5d48, 0x1932, 0xf3e1, 0x0, 0x1);
        gbc.writeMem(0x5f97, { 0x38, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x41a5);
        EXPECT(gbc.pc(), 0x5fa7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02EA
        gbc.setState(0xe422, 0xf278, 0xab30, 0xb675, 0xad2e, 0x9bd6, 0x1, 0x1);
        gbc.writeMem(0xe422, { 0x38, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xf278);
        EXPECT(gbc.pc(), 0xe432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe422), 0x38);
        EXPECT(gbc.readMem(0xe423), 0xe);
        // 38 02EC
        gbc.setState(0x6399, 0xccb3, 0x47b0, 0xbd86, 0x90b8, 0x4385, 0x1, 0x0);
        gbc.writeMem(0x6399, { 0x38, 0x67 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xccb3);
        EXPECT(gbc.pc(), 0x6402);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02ED
        gbc.setState(0x5663, 0xdf6c, 0x7b90, 0xdddb, 0x3a98, 0x49fa, 0x1, 0x1);
        gbc.writeMem(0x5663, { 0x38, 0x7e });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xdf6c);
        EXPECT(gbc.pc(), 0x56e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02EE
        gbc.setState(0x6d5c, 0x905e, 0xb010, 0xc6eb, 0x6d10, 0x384b, 0x1, 0x0);
        gbc.writeMem(0x6d5c, { 0x38, 0x22 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x905e);
        EXPECT(gbc.pc(), 0x6d80);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02EF
        gbc.setState(0x71f0, 0x7e24, 0x1d40, 0xb7e5, 0x9a63, 0xa7e6, 0x1, 0x0);
        gbc.writeMem(0x71f0, { 0x38, 0xd6 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x7e24);
        EXPECT(gbc.pc(), 0x71f2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02F0
        gbc.setState(0x386f, 0x433b, 0x6cb0, 0xb180, 0x8b5a, 0x8478, 0x1, 0x1);
        gbc.writeMem(0x386f, { 0x38, 0x2 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x433b);
        EXPECT(gbc.pc(), 0x3873);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02F1
        gbc.setState(0x447f, 0xefeb, 0x39a0, 0xa5ed, 0x5a63, 0xeaa2, 0x0, 0x1);
        gbc.writeMem(0x447f, { 0x38, 0xb0 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xefeb);
        EXPECT(gbc.pc(), 0x4481);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02F2
        gbc.setState(0xa657, 0x8ccb, 0x73f0, 0x1d98, 0x9425, 0xabc6, 0x1, 0x0);
        gbc.writeMem(0xa657, { 0x38, 0x5c });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8ccb);
        EXPECT(gbc.pc(), 0xa6b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa657), 0x38);
        EXPECT(gbc.readMem(0xa658), 0x5c);
        // 38 02F3
        gbc.setState(0x12dc, 0xacda, 0x5940, 0xd286, 0x4122, 0x47, 0x0, 0x1);
        gbc.writeMem(0x12dc, { 0x38, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xacda);
        EXPECT(gbc.pc(), 0x12de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02F4
        gbc.setState(0x11d0, 0x3a03, 0xa200, 0x12c5, 0x4007, 0x4f33, 0x1, 0x0);
        gbc.writeMem(0x11d0, { 0x38, 0x35 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x3a03);
        EXPECT(gbc.pc(), 0x11d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 02F5
        gbc.setState(0x2b7b, 0x3029, 0x3af0, 0x197f, 0x2083, 0x5704, 0x1, 0x1);
        gbc.writeMem(0x2b7b, { 0x38, 0x23 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x3029);
        EXPECT(gbc.pc(), 0x2ba0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02F6
        gbc.setState(0xb70, 0xf4a6, 0x8d60, 0xc084, 0x9bfb, 0x5a1d, 0x1, 0x0);
        gbc.writeMem(0xb70, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf4a6);
        EXPECT(gbc.pc(), 0xb72);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02F7
        gbc.setState(0x4518, 0xe565, 0x9c70, 0x2b13, 0x4a2f, 0x36ef, 0x0, 0x0);
        gbc.writeMem(0x4518, { 0x38, 0xf });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xe565);
        EXPECT(gbc.pc(), 0x4529);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 02F9
        gbc.setState(0xc085, 0x3abe, 0xa980, 0xf491, 0x5093, 0xae9, 0x1, 0x1);
        gbc.writeMem(0xc085, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3abe);
        EXPECT(gbc.pc(), 0xc087);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc085), 0x38);
        EXPECT(gbc.readMem(0xc086), 0x5e);
        // 38 02FA
        gbc.setState(0xe0b, 0xe7b6, 0xd620, 0xeb77, 0xe56c, 0x1082, 0x0, 0x1);
        gbc.writeMem(0xe0b, { 0x38, 0x66 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xe7b6);
        EXPECT(gbc.pc(), 0xe0d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02FC
        gbc.setState(0x602c, 0xbcde, 0x61d0, 0x92ae, 0xc2a0, 0xc786, 0x0, 0x0);
        gbc.writeMem(0x602c, { 0x38, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xbcde);
        EXPECT(gbc.pc(), 0x5fbf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 02FD
        gbc.setState(0xecbb, 0x5890, 0xe0c0, 0xa58a, 0x6968, 0x474e, 0x1, 0x1);
        gbc.writeMem(0xecbb, { 0x38, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x5890);
        EXPECT(gbc.pc(), 0xecbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xecbb), 0x38);
        EXPECT(gbc.readMem(0xecbc), 0x97);
        // 38 02FE
        gbc.setState(0x3777, 0x5ca6, 0xc020, 0xc8, 0x8b2c, 0x3366, 0x1, 0x1);
        gbc.writeMem(0x3777, { 0x38, 0x33 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x5ca6);
        EXPECT(gbc.pc(), 0x3779);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 02FF
        gbc.setState(0x9d92, 0xafba, 0x2ce0, 0xaf01, 0xf066, 0x17fc, 0x0, 0x0);
        gbc.writeMem(0x9d92, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xafba);
        EXPECT(gbc.pc(), 0x9d94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9d92), 0x38);
        EXPECT(gbc.readMem(0x9d93), 0x1d);
        // 38 0300
        gbc.setState(0x4be, 0x7e74, 0x5920, 0xcd92, 0x298a, 0xd858, 0x0, 0x1);
        gbc.writeMem(0x4be, { 0x38, 0x7b });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x7e74);
        EXPECT(gbc.pc(), 0x4c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0301
        gbc.setState(0xc00, 0x56cd, 0x1220, 0x3744, 0x8a1c, 0x5cd8, 0x1, 0x1);
        gbc.writeMem(0xc00, { 0x38, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x56cd);
        EXPECT(gbc.pc(), 0xc02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0302
        gbc.setState(0x768a, 0x861c, 0x7a0, 0x9f81, 0x7f54, 0x8304, 0x1, 0x0);
        gbc.writeMem(0x768a, { 0x38, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x861c);
        EXPECT(gbc.pc(), 0x768c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0303
        gbc.setState(0xb80f, 0x6a3b, 0xa9b0, 0x1818, 0xdee9, 0x763, 0x1, 0x1);
        gbc.writeMem(0xb80f, { 0x38, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6a3b);
        EXPECT(gbc.pc(), 0xb884);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb80f), 0x38);
        EXPECT(gbc.readMem(0xb810), 0x73);
        // 38 0304
        gbc.setState(0x2c3a, 0x8838, 0xc3f0, 0x2b25, 0xb862, 0xd24c, 0x1, 0x1);
        gbc.writeMem(0x2c3a, { 0x38, 0xca });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x8838);
        EXPECT(gbc.pc(), 0x2c06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0305
        gbc.setState(0x98dd, 0xee67, 0x66e0, 0xab01, 0x90cb, 0x9381, 0x1, 0x0);
        gbc.writeMem(0x98dd, { 0x38, 0x85 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xee67);
        EXPECT(gbc.pc(), 0x98df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98dd), 0x38);
        EXPECT(gbc.readMem(0x98de), 0x85);
        // 38 0306
        gbc.setState(0x7d1e, 0xb56d, 0xa40, 0x5a3b, 0xf809, 0x7a41, 0x1, 0x1);
        gbc.writeMem(0x7d1e, { 0x38, 0x51 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xb56d);
        EXPECT(gbc.pc(), 0x7d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0307
        gbc.setState(0xa8c0, 0x3d2, 0xd960, 0xf0b4, 0x4c61, 0x2a27, 0x0, 0x0);
        gbc.writeMem(0xa8c0, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x3d2);
        EXPECT(gbc.pc(), 0xa8c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa8c0), 0x38);
        EXPECT(gbc.readMem(0xa8c1), 0x5e);
        // 38 0308
        gbc.setState(0x30b8, 0xa8bc, 0xa530, 0xefb8, 0x1beb, 0x3489, 0x1, 0x1);
        gbc.writeMem(0x30b8, { 0x38, 0x5 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xa8bc);
        EXPECT(gbc.pc(), 0x30bf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0309
        gbc.setState(0x332a, 0x49b5, 0x6790, 0x4246, 0xe8c9, 0x23d5, 0x0, 0x1);
        gbc.writeMem(0x332a, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x49b5);
        EXPECT(gbc.pc(), 0x3397);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 030A
        gbc.setState(0x521, 0x361e, 0x220, 0x8421, 0x2322, 0xaae8, 0x1, 0x1);
        gbc.writeMem(0x521, { 0x38, 0xcf });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x361e);
        EXPECT(gbc.pc(), 0x523);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 030B
        gbc.setState(0x666a, 0xab39, 0x6bc0, 0x202a, 0xb5cf, 0x8355, 0x0, 0x0);
        gbc.writeMem(0x666a, { 0x38, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xab39);
        EXPECT(gbc.pc(), 0x666c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 030C
        gbc.setState(0xa7f9, 0xa8d7, 0xf0b0, 0xbc44, 0xf1cd, 0xdfc4, 0x0, 0x1);
        gbc.writeMem(0xa7f9, { 0x38, 0x63 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xa8d7);
        EXPECT(gbc.pc(), 0xa85e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa7f9), 0x38);
        EXPECT(gbc.readMem(0xa7fa), 0x63);
        // 38 030D
        gbc.setState(0x6b23, 0xfacb, 0xd8d0, 0xb885, 0xe61f, 0x4cc5, 0x0, 0x1);
        gbc.writeMem(0x6b23, { 0x38, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xfacb);
        EXPECT(gbc.pc(), 0x6b28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 030E
        gbc.setState(0x920e, 0xd4bc, 0xd000, 0x55c4, 0x3c9b, 0xf3bf, 0x0, 0x0);
        gbc.writeMem(0x920e, { 0x38, 0x6a });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xc4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xd4bc);
        EXPECT(gbc.pc(), 0x9210);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x920e), 0x38);
        EXPECT(gbc.readMem(0x920f), 0x6a);
        // 38 030F
        gbc.setState(0xe111, 0xe038, 0x7a0, 0x2ef1, 0x5049, 0x2c0b, 0x0, 0x1);
        gbc.writeMem(0xe111, { 0x38, 0xc3 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xe038);
        EXPECT(gbc.pc(), 0xe113);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe111), 0x38);
        EXPECT(gbc.readMem(0xe112), 0xc3);
        // 38 0310
        gbc.setState(0x7a28, 0x1e60, 0x7bc0, 0xb2d1, 0xf125, 0xc6ab, 0x0, 0x0);
        gbc.writeMem(0x7a28, { 0x38, 0x6d });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x1e60);
        EXPECT(gbc.pc(), 0x7a2a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0311
        gbc.setState(0x46f7, 0x474f, 0x29a0, 0xf2ed, 0xc97, 0xa5cd, 0x1, 0x0);
        gbc.writeMem(0x46f7, { 0x38, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x474f);
        EXPECT(gbc.pc(), 0x46f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0312
        gbc.setState(0x24ad, 0x14ad, 0x5f30, 0xffc0, 0xa8fa, 0xdfcc, 0x0, 0x0);
        gbc.writeMem(0x24ad, { 0x38, 0xe0 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0x14ad);
        EXPECT(gbc.pc(), 0x248f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0313
        gbc.setState(0x15a, 0x4a1a, 0x1c40, 0x171a, 0x1514, 0x6288, 0x1, 0x0);
        gbc.writeMem(0x15a, { 0x38, 0x9b });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4a1a);
        EXPECT(gbc.pc(), 0x15c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0314
        gbc.setState(0x8717, 0x162b, 0x8320, 0x92db, 0x2ebe, 0x4b48, 0x0, 0x0);
        gbc.writeMem(0x8717, { 0x38, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x162b);
        EXPECT(gbc.pc(), 0x8719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8717), 0x38);
        EXPECT(gbc.readMem(0x8718), 0x52);
        // 38 0315
        gbc.setState(0x871e, 0x82bf, 0xead0, 0x87fa, 0x5ad8, 0x3fbf, 0x1, 0x0);
        gbc.writeMem(0x871e, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x82bf);
        EXPECT(gbc.pc(), 0x86c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x871e), 0x38);
        EXPECT(gbc.readMem(0x871f), 0xa1);
        // 38 0316
        gbc.setState(0x7b17, 0x74dc, 0x9ca0, 0x1b9d, 0x5a4d, 0x9935, 0x1, 0x1);
        gbc.writeMem(0x7b17, { 0x38, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x74dc);
        EXPECT(gbc.pc(), 0x7b19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0317
        gbc.setState(0x805a, 0x2128, 0x7110, 0xd077, 0x85cb, 0x3213, 0x1, 0x1);
        gbc.writeMem(0x805a, { 0x38, 0xbe });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x2128);
        EXPECT(gbc.pc(), 0x801a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x805a), 0x38);
        EXPECT(gbc.readMem(0x805b), 0xbe);
        // 38 0318
        gbc.setState(0x2ec7, 0x7a45, 0x6930, 0xd26a, 0x7484, 0x4424, 0x0, 0x0);
        gbc.writeMem(0x2ec7, { 0x38, 0xe8 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x7a45);
        EXPECT(gbc.pc(), 0x2eb1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0319
        gbc.setState(0xa98b, 0xeda7, 0x25a0, 0x1e57, 0x46d5, 0x47b1, 0x1, 0x0);
        gbc.writeMem(0xa98b, { 0x38, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xeda7);
        EXPECT(gbc.pc(), 0xa98d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa98b), 0x38);
        EXPECT(gbc.readMem(0xa98c), 0x54);
        // 38 031A
        gbc.setState(0xce69, 0x5158, 0xfe10, 0x5463, 0x873c, 0x3a70, 0x0, 0x1);
        gbc.writeMem(0xce69, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5158);
        EXPECT(gbc.pc(), 0xce6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce69), 0x38);
        EXPECT(gbc.readMem(0xce6a), 0x4);
        // 38 031B
        gbc.setState(0xcde8, 0xf648, 0xbac0, 0xd96b, 0x9c4, 0x6ed1, 0x1, 0x1);
        gbc.writeMem(0xcde8, { 0x38, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xf648);
        EXPECT(gbc.pc(), 0xcdea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcde8), 0x38);
        EXPECT(gbc.readMem(0xcde9), 0x78);
        // 38 031C
        gbc.setState(0x3d5f, 0xcb0c, 0x56c0, 0x1d89, 0xf3c5, 0xa056, 0x1, 0x1);
        gbc.writeMem(0x3d5f, { 0x38, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xcb0c);
        EXPECT(gbc.pc(), 0x3d61);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 031D
        gbc.setState(0xcd11, 0xa438, 0x8e0, 0x1006, 0x6eca, 0xd3b8, 0x0, 0x1);
        gbc.writeMem(0xcd11, { 0x38, 0x0 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xa438);
        EXPECT(gbc.pc(), 0xcd13);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd11), 0x38);
        EXPECT(gbc.readMem(0xcd12), 0x0);
        // 38 031E
        gbc.setState(0xce6f, 0x51f2, 0x900, 0xaac8, 0x39cc, 0x80c7, 0x0, 0x1);
        gbc.writeMem(0xce6f, { 0x38, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x51f2);
        EXPECT(gbc.pc(), 0xce71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xce6f), 0x38);
        EXPECT(gbc.readMem(0xce70), 0x31);
        // 38 031F
        gbc.setState(0x294d, 0xc905, 0x74d0, 0xf496, 0xa40c, 0xc38d, 0x1, 0x1);
        gbc.writeMem(0x294d, { 0x38, 0xdc });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xc905);
        EXPECT(gbc.pc(), 0x292b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0320
        gbc.setState(0x4b7f, 0x31b, 0x4be0, 0x326d, 0x838e, 0x1551, 0x1, 0x0);
        gbc.writeMem(0x4b7f, { 0x38, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x31b);
        EXPECT(gbc.pc(), 0x4b81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0321
        gbc.setState(0x5c16, 0xcfb8, 0xf900, 0x37b2, 0xc13e, 0xc3ba, 0x0, 0x1);
        gbc.writeMem(0x5c16, { 0x38, 0x2f });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xcfb8);
        EXPECT(gbc.pc(), 0x5c18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0322
        gbc.setState(0x7925, 0xe374, 0x8b60, 0x8ae4, 0x7b9c, 0xee29, 0x1, 0x0);
        gbc.writeMem(0x7925, { 0x38, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xe374);
        EXPECT(gbc.pc(), 0x7927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0323
        gbc.setState(0x1637, 0xd4f, 0xb050, 0x4df5, 0xb19a, 0xede, 0x1, 0x1);
        gbc.writeMem(0x1637, { 0x38, 0xcd });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0xd4f);
        EXPECT(gbc.pc(), 0x1606);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0324
        gbc.setState(0xc28b, 0x855e, 0xbed0, 0x6dd2, 0x559e, 0xc3f6, 0x1, 0x1);
        gbc.writeMem(0xc28b, { 0x38, 0x29 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x855e);
        EXPECT(gbc.pc(), 0xc2b6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28b), 0x38);
        EXPECT(gbc.readMem(0xc28c), 0x29);
        // 38 0325
        gbc.setState(0xcd16, 0xfdea, 0x6990, 0xcc42, 0xc7f8, 0x5d80, 0x1, 0x1);
        gbc.writeMem(0xcd16, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0xfdea);
        EXPECT(gbc.pc(), 0xccae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcd16), 0x38);
        EXPECT(gbc.readMem(0xcd17), 0x96);
        // 38 0326
        gbc.setState(0x4386, 0x4267, 0xd620, 0x6f12, 0x60ae, 0x8aaa, 0x0, 0x1);
        gbc.writeMem(0x4386, { 0x38, 0x4 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x4267);
        EXPECT(gbc.pc(), 0x4388);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0327
        gbc.setState(0xb6b7, 0x7910, 0xca40, 0x6050, 0x2f6e, 0x955b, 0x1, 0x0);
        gbc.writeMem(0xb6b7, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7910);
        EXPECT(gbc.pc(), 0xb6b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6b7), 0x38);
        EXPECT(gbc.readMem(0xb6b8), 0x4f);
        // 38 0328
        gbc.setState(0xe8a3, 0x7949, 0xc390, 0x527e, 0xd66, 0xa6d9, 0x1, 0x1);
        gbc.writeMem(0xe8a3, { 0x38, 0x8c });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0x7949);
        EXPECT(gbc.pc(), 0xe831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe8a3), 0x38);
        EXPECT(gbc.readMem(0xe8a4), 0x8c);
        // 38 0329
        gbc.setState(0x505, 0xbf0f, 0xc3d0, 0xda39, 0xbeb6, 0x296d, 0x1, 0x0);
        gbc.writeMem(0x505, { 0x38, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0xbf0f);
        EXPECT(gbc.pc(), 0x51a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 032A
        gbc.setState(0xa82, 0xc4e0, 0x18b0, 0x799a, 0x5682, 0xcdfd, 0x1, 0x0);
        gbc.writeMem(0xa82, { 0x38, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xc4e0);
        EXPECT(gbc.pc(), 0xa97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 032B
        gbc.setState(0xc51a, 0xb0b7, 0xa340, 0xce2b, 0x2f79, 0xb931, 0x0, 0x1);
        gbc.writeMem(0xc51a, { 0x38, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xb0b7);
        EXPECT(gbc.pc(), 0xc51c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc51a), 0x38);
        EXPECT(gbc.readMem(0xc51b), 0xb3);
        // 38 032C
        gbc.setState(0xb02d, 0x8e95, 0x7100, 0x3356, 0x8d9a, 0x2345, 0x0, 0x1);
        gbc.writeMem(0xb02d, { 0x38, 0xb8 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x8e95);
        EXPECT(gbc.pc(), 0xb02f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb02d), 0x38);
        EXPECT(gbc.readMem(0xb02e), 0xb8);
        // 38 032D
        gbc.setState(0x48f6, 0x1fba, 0x3c20, 0x1ab, 0x2799, 0x5a27, 0x1, 0x1);
        gbc.writeMem(0x48f6, { 0x38, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x1fba);
        EXPECT(gbc.pc(), 0x48f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 032E
        gbc.setState(0x575e, 0x1c64, 0x3850, 0x6495, 0x9aa, 0x9c6f, 0x1, 0x1);
        gbc.writeMem(0x575e, { 0x38, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x1c64);
        EXPECT(gbc.pc(), 0x5730);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 032F
        gbc.setState(0xd27c, 0x9603, 0x6040, 0x92c3, 0x8b69, 0xf0f9, 0x1, 0x0);
        gbc.writeMem(0xd27c, { 0x38, 0xc9 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x9603);
        EXPECT(gbc.pc(), 0xd27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd27c), 0x38);
        EXPECT(gbc.readMem(0xd27d), 0xc9);
        // 38 0330
        gbc.setState(0x6522, 0x2fab, 0xe1c0, 0x901c, 0x99c5, 0x4ad0, 0x1, 0x0);
        gbc.writeMem(0x6522, { 0x38, 0xc0 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0x2fab);
        EXPECT(gbc.pc(), 0x6524);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0331
        gbc.setState(0xde21, 0xa387, 0xb270, 0xafa9, 0x5877, 0x5c8a, 0x1, 0x1);
        gbc.writeMem(0xde21, { 0x38, 0x20 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0xa387);
        EXPECT(gbc.pc(), 0xde43);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde21), 0x38);
        EXPECT(gbc.readMem(0xde22), 0x20);
        // 38 0332
        gbc.setState(0x5dd5, 0x8397, 0xc100, 0x9269, 0xe442, 0xcab, 0x0, 0x1);
        gbc.writeMem(0x5dd5, { 0x38, 0x2d });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x8397);
        EXPECT(gbc.pc(), 0x5dd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0333
        gbc.setState(0x9a30, 0xa91b, 0x6020, 0xcec3, 0xe75b, 0xd721, 0x0, 0x1);
        gbc.writeMem(0x9a30, { 0x38, 0xfe });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xa91b);
        EXPECT(gbc.pc(), 0x9a32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9a30), 0x38);
        EXPECT(gbc.readMem(0x9a31), 0xfe);
        // 38 0334
        gbc.setState(0x1768, 0xc001, 0x3ad0, 0xb0ea, 0x63e7, 0xb7a, 0x1, 0x0);
        gbc.writeMem(0x1768, { 0x38, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xc001);
        EXPECT(gbc.pc(), 0x16ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0335
        gbc.setState(0x63ff, 0x81df, 0x5e0, 0x7f29, 0x9570, 0x3f21, 0x0, 0x1);
        gbc.writeMem(0x63ff, { 0x38, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x81df);
        EXPECT(gbc.pc(), 0x6401);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0336
        gbc.setState(0x2553, 0xb5e7, 0xd980, 0x5a2a, 0xc391, 0x2c99, 0x0, 0x0);
        gbc.writeMem(0x2553, { 0x38, 0xf0 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xb5e7);
        EXPECT(gbc.pc(), 0x2555);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0337
        gbc.setState(0x21f6, 0x1e8f, 0xea00, 0x5e5b, 0x8621, 0x6315, 0x1, 0x0);
        gbc.writeMem(0x21f6, { 0x38, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x1e8f);
        EXPECT(gbc.pc(), 0x21f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0338
        gbc.setState(0xc8cb, 0x63c9, 0x4dc0, 0xe3d5, 0x3600, 0x8c57, 0x1, 0x0);
        gbc.writeMem(0xc8cb, { 0x38, 0xaa });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x63c9);
        EXPECT(gbc.pc(), 0xc8cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8cb), 0x38);
        EXPECT(gbc.readMem(0xc8cc), 0xaa);
        // 38 0339
        gbc.setState(0x67aa, 0xcd26, 0xe620, 0xc974, 0x3247, 0xbe4a, 0x0, 0x0);
        gbc.writeMem(0x67aa, { 0x38, 0x9d });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xcd26);
        EXPECT(gbc.pc(), 0x67ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 033A
        gbc.setState(0x1b99, 0x86d0, 0x4120, 0xe14b, 0x80ed, 0x939e, 0x0, 0x0);
        gbc.writeMem(0x1b99, { 0x38, 0x26 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x86d0);
        EXPECT(gbc.pc(), 0x1b9b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 033B
        gbc.setState(0x83b7, 0x1ab9, 0xc830, 0x2140, 0x63bb, 0xe033, 0x1, 0x0);
        gbc.writeMem(0x83b7, { 0x38, 0x3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x1ab9);
        EXPECT(gbc.pc(), 0x83bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x83b7), 0x38);
        EXPECT(gbc.readMem(0x83b8), 0x3);
        // 38 033C
        gbc.setState(0xa5fd, 0xea6f, 0xde90, 0xf70b, 0x3f04, 0x85a3, 0x0, 0x0);
        gbc.writeMem(0xa5fd, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xea6f);
        EXPECT(gbc.pc(), 0xa66a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa5fd), 0x38);
        EXPECT(gbc.readMem(0xa5fe), 0x6b);
        // 38 033D
        gbc.setState(0xcbf6, 0x7d7d, 0x13c0, 0x3a59, 0xe5db, 0x8e7e, 0x0, 0x1);
        gbc.writeMem(0xcbf6, { 0x38, 0xa5 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x7d7d);
        EXPECT(gbc.pc(), 0xcbf8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcbf6), 0x38);
        EXPECT(gbc.readMem(0xcbf7), 0xa5);
        // 38 033E
        gbc.setState(0x98bc, 0x66fe, 0xd430, 0x8961, 0x662d, 0x93aa, 0x0, 0x1);
        gbc.writeMem(0x98bc, { 0x38, 0x21 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x66fe);
        EXPECT(gbc.pc(), 0x98df);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98bc), 0x38);
        EXPECT(gbc.readMem(0x98bd), 0x21);
        // 38 033F
        gbc.setState(0x778b, 0x44dd, 0x37a0, 0xc238, 0xc7f0, 0x9c5c, 0x1, 0x1);
        gbc.writeMem(0x778b, { 0x38, 0x38 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0x44dd);
        EXPECT(gbc.pc(), 0x778d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0340
        gbc.setState(0xae30, 0x28b2, 0xefa0, 0xfa1, 0x4c4e, 0x3ed8, 0x0, 0x1);
        gbc.writeMem(0xae30, { 0x38, 0xd0 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x28b2);
        EXPECT(gbc.pc(), 0xae32);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae30), 0x38);
        EXPECT(gbc.readMem(0xae31), 0xd0);
        // 38 0341
        gbc.setState(0x982, 0x3b86, 0xd930, 0x7a10, 0xf45, 0xda5a, 0x0, 0x0);
        gbc.writeMem(0x982, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x3b86);
        EXPECT(gbc.pc(), 0x912);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0342
        gbc.setState(0x2f8, 0x2925, 0xf120, 0xdf84, 0xb948, 0xd58e, 0x1, 0x1);
        gbc.writeMem(0x2f8, { 0x38, 0x60 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xd5);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x2925);
        EXPECT(gbc.pc(), 0x2fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0343
        gbc.setState(0x6c03, 0xef8e, 0xf000, 0xa65c, 0x5d77, 0x4a56, 0x0, 0x0);
        gbc.writeMem(0x6c03, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0xef8e);
        EXPECT(gbc.pc(), 0x6c05);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0344
        gbc.setState(0xc8ab, 0x71ba, 0xfdc0, 0xa5ab, 0x82bf, 0x6302, 0x0, 0x1);
        gbc.writeMem(0xc8ab, { 0x38, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x71ba);
        EXPECT(gbc.pc(), 0xc8ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8ab), 0x38);
        EXPECT(gbc.readMem(0xc8ac), 0x1f);
        // 38 0345
        gbc.setState(0xd817, 0x57b4, 0xf860, 0x7d6f, 0x7b67, 0xd7cb, 0x1, 0x0);
        gbc.writeMem(0xd817, { 0x38, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x57b4);
        EXPECT(gbc.pc(), 0xd819);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd817), 0x38);
        EXPECT(gbc.readMem(0xd818), 0x41);
        // 38 0346
        gbc.setState(0xe59f, 0xb13c, 0x2a10, 0x51ef, 0xd84a, 0x4926, 0x1, 0x0);
        gbc.writeMem(0xe59f, { 0x38, 0x84 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0xb13c);
        EXPECT(gbc.pc(), 0xe525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe59f), 0x38);
        EXPECT(gbc.readMem(0xe5a0), 0x84);
        // 38 0347
        gbc.setState(0x7786, 0xec12, 0xc190, 0x1614, 0xc1a0, 0x92d4, 0x0, 0x0);
        gbc.writeMem(0x7786, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xec12);
        EXPECT(gbc.pc(), 0x771a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0348
        gbc.setState(0x1e20, 0x7dcb, 0x1f60, 0x98cd, 0x6d67, 0x4867, 0x1, 0x1);
        gbc.writeMem(0x1e20, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x7dcb);
        EXPECT(gbc.pc(), 0x1e22);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0349
        gbc.setState(0x5eec, 0x4c82, 0xeff0, 0x11e4, 0x8af9, 0xef35, 0x1, 0x1);
        gbc.writeMem(0x5eec, { 0x38, 0x6c });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4c82);
        EXPECT(gbc.pc(), 0x5f5a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 034A
        gbc.setState(0xac37, 0xac07, 0xd2f0, 0x76e5, 0xc1cf, 0xf096, 0x0, 0x1);
        gbc.writeMem(0xac37, { 0x38, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xac07);
        EXPECT(gbc.pc(), 0xac4f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac37), 0x38);
        EXPECT(gbc.readMem(0xac38), 0x16);
        // 38 034B
        gbc.setState(0x38ac, 0x61fb, 0xdcc0, 0x5f61, 0x5eef, 0x60e7, 0x0, 0x1);
        gbc.writeMem(0x38ac, { 0x38, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x61fb);
        EXPECT(gbc.pc(), 0x38ae);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 034C
        gbc.setState(0xef7c, 0x7b99, 0x7860, 0xced4, 0xf20f, 0xd7f0, 0x1, 0x1);
        gbc.writeMem(0xef7c, { 0x38, 0x94 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xf);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x7b99);
        EXPECT(gbc.pc(), 0xef7e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef7c), 0x38);
        EXPECT(gbc.readMem(0xef7d), 0x94);
        // 38 034D
        gbc.setState(0xcb7c, 0x8485, 0x2a20, 0x51e1, 0x8a77, 0x518a, 0x0, 0x1);
        gbc.writeMem(0xcb7c, { 0x38, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x8485);
        EXPECT(gbc.pc(), 0xcb7e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcb7c), 0x38);
        EXPECT(gbc.readMem(0xcb7d), 0x16);
        // 38 034E
        gbc.setState(0x1291, 0xa222, 0xbcf0, 0xd0cd, 0xc78f, 0x2d6, 0x0, 0x1);
        gbc.writeMem(0x1291, { 0x38, 0xd7 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xa222);
        EXPECT(gbc.pc(), 0x126a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0350
        gbc.setState(0x6f53, 0xf5ad, 0xdd40, 0x471f, 0x5bf6, 0xaf23, 0x1, 0x0);
        gbc.writeMem(0x6f53, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xf5ad);
        EXPECT(gbc.pc(), 0x6f55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0352
        gbc.setState(0x19f5, 0xfa0c, 0x9700, 0x23ea, 0x9b8e, 0xa1d4, 0x0, 0x0);
        gbc.writeMem(0x19f5, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xfa0c);
        EXPECT(gbc.pc(), 0x19f7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0353
        gbc.setState(0xdc77, 0x2075, 0x22e0, 0xcd34, 0xb42f, 0x165a, 0x1, 0x1);
        gbc.writeMem(0xdc77, { 0x38, 0xe });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x2075);
        EXPECT(gbc.pc(), 0xdc79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc77), 0x38);
        EXPECT(gbc.readMem(0xdc78), 0xe);
        // 38 0354
        gbc.setState(0xca3d, 0xa17d, 0xfd90, 0x752e, 0x55d6, 0x89dc, 0x1, 0x0);
        gbc.writeMem(0xca3d, { 0x38, 0xb4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xa17d);
        EXPECT(gbc.pc(), 0xc9f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca3d), 0x38);
        EXPECT(gbc.readMem(0xca3e), 0xb4);
        // 38 0356
        gbc.setState(0xbf5d, 0xdf94, 0xb650, 0xa109, 0x2337, 0x3d9, 0x0, 0x0);
        gbc.writeMem(0xbf5d, { 0x38, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xdf94);
        EXPECT(gbc.pc(), 0xbeea);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf5d), 0x38);
        EXPECT(gbc.readMem(0xbf5e), 0x8b);
        // 38 0357
        gbc.setState(0x4510, 0xeba7, 0xc20, 0xbe97, 0x3e84, 0xf3c1, 0x0, 0x1);
        gbc.writeMem(0x4510, { 0x38, 0x10 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xeba7);
        EXPECT(gbc.pc(), 0x4512);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0358
        gbc.setState(0xbfcd, 0x66e1, 0xe100, 0x8e74, 0xb3b7, 0xcbf8, 0x1, 0x1);
        gbc.writeMem(0xbfcd, { 0x38, 0x34 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb7);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x66e1);
        EXPECT(gbc.pc(), 0xbfcf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbfcd), 0x38);
        EXPECT(gbc.readMem(0xbfce), 0x34);
        // 38 0359
        gbc.setState(0x5c3, 0x687, 0xf260, 0x739d, 0x2d04, 0xbe65, 0x1, 0x1);
        gbc.writeMem(0x5c3, { 0x38, 0x7f });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x687);
        EXPECT(gbc.pc(), 0x5c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 035A
        gbc.setState(0xa796, 0x5f22, 0xeb60, 0xaa2e, 0x294e, 0xf49d, 0x1, 0x1);
        gbc.writeMem(0xa796, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x5f22);
        EXPECT(gbc.pc(), 0xa798);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa796), 0x38);
        EXPECT(gbc.readMem(0xa797), 0x5e);
        // 38 035B
        gbc.setState(0xcf2b, 0x775b, 0x42b0, 0xbf8e, 0x2810, 0xb02, 0x0, 0x1);
        gbc.writeMem(0xcf2b, { 0x38, 0x49 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x775b);
        EXPECT(gbc.pc(), 0xcf76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf2b), 0x38);
        EXPECT(gbc.readMem(0xcf2c), 0x49);
        // 38 035C
        gbc.setState(0x4493, 0xfd40, 0xfce0, 0xbc32, 0xbcbc, 0xd03, 0x1, 0x1);
        gbc.writeMem(0x4493, { 0x38, 0x43 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfd40);
        EXPECT(gbc.pc(), 0x4495);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 035D
        gbc.setState(0x53be, 0xc99d, 0xfec0, 0x72fe, 0xfd25, 0xfb07, 0x0, 0x1);
        gbc.writeMem(0x53be, { 0x38, 0xd4 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xc99d);
        EXPECT(gbc.pc(), 0x53c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 035F
        gbc.setState(0xcd72, 0x8edc, 0x4860, 0x279a, 0x6ed8, 0xfefb, 0x1, 0x1);
        gbc.writeMem(0xcd72, { 0x38, 0x88 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8edc);
        EXPECT(gbc.pc(), 0xcd74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd72), 0x38);
        EXPECT(gbc.readMem(0xcd73), 0x88);
        // 38 0360
        gbc.setState(0x3a9a, 0xcdc7, 0x3c40, 0x2380, 0x3903, 0x5b66, 0x1, 0x1);
        gbc.writeMem(0x3a9a, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0xcdc7);
        EXPECT(gbc.pc(), 0x3a9c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0361
        gbc.setState(0xe557, 0xda98, 0xfe80, 0x9724, 0x1beb, 0x6d3, 0x0, 0x0);
        gbc.writeMem(0xe557, { 0x38, 0x16 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xda98);
        EXPECT(gbc.pc(), 0xe559);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe557), 0x38);
        EXPECT(gbc.readMem(0xe558), 0x16);
        // 38 0362
        gbc.setState(0x8500, 0x5476, 0xbc00, 0x30a6, 0xf0ca, 0xba80, 0x0, 0x0);
        gbc.writeMem(0x8500, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5476);
        EXPECT(gbc.pc(), 0x8502);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8500), 0x38);
        EXPECT(gbc.readMem(0x8501), 0xe6);
        // 38 0363
        gbc.setState(0x19dc, 0x2b50, 0x5400, 0x1de4, 0xdd96, 0xf73c, 0x0, 0x0);
        gbc.writeMem(0x19dc, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0x2b50);
        EXPECT(gbc.pc(), 0x19de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0364
        gbc.setState(0x2f36, 0xc6b4, 0x77a0, 0x4aa1, 0xecad, 0xc421, 0x1, 0x0);
        gbc.writeMem(0x2f36, { 0x38, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xc6b4);
        EXPECT(gbc.pc(), 0x2f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0365
        gbc.setState(0xe34f, 0x5650, 0xd000, 0xe746, 0x1748, 0x39e, 0x0, 0x1);
        gbc.writeMem(0xe34f, { 0x38, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5650);
        EXPECT(gbc.pc(), 0xe351);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe34f), 0x38);
        EXPECT(gbc.readMem(0xe350), 0xd5);
        // 38 0366
        gbc.setState(0xedf5, 0xd3e2, 0x6590, 0x25b0, 0x1654, 0xf75b, 0x0, 0x0);
        gbc.writeMem(0xedf5, { 0x38, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd3e2);
        EXPECT(gbc.pc(), 0xee3d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf5), 0x38);
        EXPECT(gbc.readMem(0xedf6), 0x46);
        // 38 0367
        gbc.setState(0x8726, 0xb4e3, 0x96e0, 0xe2a, 0x83a, 0x62e8, 0x0, 0x0);
        gbc.writeMem(0x8726, { 0x38, 0x11 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xb4e3);
        EXPECT(gbc.pc(), 0x8728);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8726), 0x38);
        EXPECT(gbc.readMem(0x8727), 0x11);
        // 38 0368
        gbc.setState(0xc015, 0x1540, 0x3860, 0xf54e, 0xafaf, 0xfc8d, 0x1, 0x0);
        gbc.writeMem(0xc015, { 0x38, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1540);
        EXPECT(gbc.pc(), 0xc017);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc015), 0x38);
        EXPECT(gbc.readMem(0xc016), 0x9);
        // 38 0369
        gbc.setState(0x57bf, 0xd682, 0xe540, 0x2d5f, 0x4f29, 0xfbaf, 0x0, 0x1);
        gbc.writeMem(0x57bf, { 0x38, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xd682);
        EXPECT(gbc.pc(), 0x57c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 036A
        gbc.setState(0xae37, 0x17a1, 0x8f50, 0xfa05, 0x5074, 0xda39, 0x1, 0x0);
        gbc.writeMem(0xae37, { 0x38, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x17a1);
        EXPECT(gbc.pc(), 0xadbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae37), 0x38);
        EXPECT(gbc.readMem(0xae38), 0x82);
        // 38 036B
        gbc.setState(0x66b, 0x87e2, 0x20b0, 0x9f11, 0x9138, 0xdac2, 0x1, 0x1);
        gbc.writeMem(0x66b, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0x87e2);
        EXPECT(gbc.pc(), 0x6b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 036C
        gbc.setState(0xee8d, 0x85b1, 0xc340, 0xff7, 0x90bc, 0x704b, 0x1, 0x1);
        gbc.writeMem(0xee8d, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x85b1);
        EXPECT(gbc.pc(), 0xee8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee8d), 0x38);
        EXPECT(gbc.readMem(0xee8e), 0x90);
        // 38 036D
        gbc.setState(0xb6d8, 0x5994, 0xb930, 0x62b0, 0xb9d7, 0x6a0c, 0x0, 0x1);
        gbc.writeMem(0xb6d8, { 0x38, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x5994);
        EXPECT(gbc.pc(), 0xb71f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb6d8), 0x38);
        EXPECT(gbc.readMem(0xb6d9), 0x45);
        // 38 036E
        gbc.setState(0x761d, 0xf582, 0xdea0, 0x366e, 0x9c6, 0x1d9a, 0x1, 0x1);
        gbc.writeMem(0x761d, { 0x38, 0x82 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0xf582);
        EXPECT(gbc.pc(), 0x761f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 036F
        gbc.setState(0x5808, 0x3ddc, 0x42b0, 0xb808, 0x9797, 0xe8b3, 0x0, 0x0);
        gbc.writeMem(0x5808, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x3ddc);
        EXPECT(gbc.pc(), 0x57ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0371
        gbc.setState(0xe425, 0xc5d4, 0xf4b0, 0x98a4, 0x6e71, 0xf29b, 0x1, 0x0);
        gbc.writeMem(0xe425, { 0x38, 0xb9 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0xa4);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xc5d4);
        EXPECT(gbc.pc(), 0xe3e0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe425), 0x38);
        EXPECT(gbc.readMem(0xe426), 0xb9);
        // 38 0372
        gbc.setState(0x418a, 0xa55d, 0xf8f0, 0xfd3d, 0x211d, 0x5be8, 0x0, 0x0);
        gbc.writeMem(0x418a, { 0x38, 0x68 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0xa55d);
        EXPECT(gbc.pc(), 0x41f4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0373
        gbc.setState(0x8c53, 0x7581, 0xabb0, 0x1d11, 0x56d8, 0x2a77, 0x0, 0x0);
        gbc.writeMem(0x8c53, { 0x38, 0xa1 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x7581);
        EXPECT(gbc.pc(), 0x8bf6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8c53), 0x38);
        EXPECT(gbc.readMem(0x8c54), 0xa1);
        // 38 0375
        gbc.setState(0xcb73, 0x7cda, 0x3ff0, 0xea45, 0x1258, 0xc20a, 0x1, 0x0);
        gbc.writeMem(0xcb73, { 0x38, 0xa8 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x7cda);
        EXPECT(gbc.pc(), 0xcb1d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb73), 0x38);
        EXPECT(gbc.readMem(0xcb74), 0xa8);
        // 38 0376
        gbc.setState(0x66a6, 0xebe8, 0x1160, 0x3f38, 0x4373, 0x7982, 0x0, 0x0);
        gbc.writeMem(0x66a6, { 0x38, 0x40 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x73);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xebe8);
        EXPECT(gbc.pc(), 0x66a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0377
        gbc.setState(0xc932, 0xce3, 0x8360, 0xbf0b, 0x62df, 0xff47, 0x0, 0x0);
        gbc.writeMem(0xc932, { 0x38, 0xc7 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xce3);
        EXPECT(gbc.pc(), 0xc934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc932), 0x38);
        EXPECT(gbc.readMem(0xc933), 0xc7);
        // 38 0378
        gbc.setState(0x13e3, 0xc692, 0x9240, 0xf481, 0x219e, 0x85be, 0x1, 0x1);
        gbc.writeMem(0x13e3, { 0x38, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xc692);
        EXPECT(gbc.pc(), 0x13e5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0379
        gbc.setState(0x744, 0x2611, 0x4590, 0x350c, 0x33f8, 0x9e44, 0x1, 0x1);
        gbc.writeMem(0x744, { 0x38, 0xf8 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x2611);
        EXPECT(gbc.pc(), 0x73e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 037B
        gbc.setState(0x58db, 0xc304, 0xec10, 0xf68e, 0x3481, 0xfaf5, 0x0, 0x0);
        gbc.writeMem(0x58db, { 0x38, 0x97 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0xc304);
        EXPECT(gbc.pc(), 0x5874);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 037C
        gbc.setState(0x7560, 0x3bf2, 0xdc50, 0x24a1, 0x5f7d, 0x3828, 0x0, 0x0);
        gbc.writeMem(0x7560, { 0x38, 0x24 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x3bf2);
        EXPECT(gbc.pc(), 0x7586);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 037D
        gbc.setState(0xda0f, 0x65ea, 0x9fe0, 0x1060, 0x8c92, 0x9a45, 0x0, 0x0);
        gbc.writeMem(0xda0f, { 0x38, 0x8b });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x65ea);
        EXPECT(gbc.pc(), 0xda11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda0f), 0x38);
        EXPECT(gbc.readMem(0xda10), 0x8b);
        // 38 037E
        gbc.setState(0x186b, 0x7515, 0x31d0, 0xf94d, 0xde1d, 0xb79, 0x0, 0x1);
        gbc.writeMem(0x186b, { 0x38, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0x7515);
        EXPECT(gbc.pc(), 0x18b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 037F
        gbc.setState(0x441b, 0x3bc5, 0x7160, 0xb486, 0xcdf1, 0x27b6, 0x1, 0x0);
        gbc.writeMem(0x441b, { 0x38, 0xe5 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x3bc5);
        EXPECT(gbc.pc(), 0x441d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0380
        gbc.setState(0x3b8, 0xf8f8, 0x55a0, 0xa148, 0xbb74, 0x6509, 0x1, 0x0);
        gbc.writeMem(0x3b8, { 0x38, 0x87 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf8f8);
        EXPECT(gbc.pc(), 0x3ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0381
        gbc.setState(0xa467, 0xfd8c, 0x35b0, 0x1248, 0x8274, 0x342, 0x1, 0x0);
        gbc.writeMem(0xa467, { 0x38, 0xf9 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xfd8c);
        EXPECT(gbc.pc(), 0xa462);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa467), 0x38);
        EXPECT(gbc.readMem(0xa468), 0xf9);
        // 38 0382
        gbc.setState(0xcf99, 0x33de, 0x81f0, 0x1615, 0x2d5d, 0x2574, 0x1, 0x0);
        gbc.writeMem(0xcf99, { 0x38, 0xb3 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x33de);
        EXPECT(gbc.pc(), 0xcf4e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf99), 0x38);
        EXPECT(gbc.readMem(0xcf9a), 0xb3);
        // 38 0383
        gbc.setState(0xbac9, 0x5ec, 0x6700, 0xadb0, 0xd6a6, 0x1050, 0x1, 0x0);
        gbc.writeMem(0xbac9, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xad);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0x5ec);
        EXPECT(gbc.pc(), 0xbacb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac9), 0x38);
        EXPECT(gbc.readMem(0xbaca), 0x8e);
        // 38 0384
        gbc.setState(0x5cc7, 0x5f7a, 0x6410, 0xef6a, 0x92f9, 0xcb0f, 0x0, 0x0);
        gbc.writeMem(0x5cc7, { 0x38, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x5f7a);
        EXPECT(gbc.pc(), 0x5cf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0386
        gbc.setState(0xd720, 0x2e47, 0xb2f0, 0xf208, 0xe85e, 0xe901, 0x1, 0x0);
        gbc.writeMem(0xd720, { 0x38, 0x83 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x2e47);
        EXPECT(gbc.pc(), 0xd6a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd720), 0x38);
        EXPECT(gbc.readMem(0xd721), 0x83);
        // 38 0387
        gbc.setState(0x3dd6, 0x5d8a, 0xc230, 0xfdad, 0x1d04, 0x4005, 0x0, 0x1);
        gbc.writeMem(0x3dd6, { 0x38, 0xd5 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x5d8a);
        EXPECT(gbc.pc(), 0x3dad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 0388
        gbc.setState(0xa439, 0x80ec, 0xdd30, 0x9e43, 0x2a58, 0xbdb6, 0x1, 0x0);
        gbc.writeMem(0xa439, { 0x38, 0x71 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x80ec);
        EXPECT(gbc.pc(), 0xa4ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa439), 0x38);
        EXPECT(gbc.readMem(0xa43a), 0x71);
        // 38 0389
        gbc.setState(0x4e5e, 0x70ed, 0x3700, 0x606a, 0x7e4f, 0x2a4e, 0x0, 0x0);
        gbc.writeMem(0x4e5e, { 0x38, 0xed });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x70ed);
        EXPECT(gbc.pc(), 0x4e60);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 038A
        gbc.setState(0xedf0, 0xd412, 0x55a0, 0xfb27, 0x4f33, 0xf947, 0x1, 0x1);
        gbc.writeMem(0xedf0, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xd412);
        EXPECT(gbc.pc(), 0xedf2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xedf0), 0x38);
        EXPECT(gbc.readMem(0xedf1), 0x53);
        // 38 038B
        gbc.setState(0xcdca, 0x9384, 0xeba0, 0xd91b, 0x9f5, 0x2ace, 0x0, 0x0);
        gbc.writeMem(0xcdca, { 0x38, 0xb });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0x9384);
        EXPECT(gbc.pc(), 0xcdcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcdca), 0x38);
        EXPECT(gbc.readMem(0xcdcb), 0xb);
        // 38 038C
        gbc.setState(0xd12, 0x5b16, 0xfa80, 0xbf68, 0x23b5, 0xb119, 0x1, 0x0);
        gbc.writeMem(0xd12, { 0x38, 0x8a });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x5b16);
        EXPECT(gbc.pc(), 0xd14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 038D
        gbc.setState(0x28e, 0xd277, 0xd790, 0xebd9, 0xee65, 0xb65a, 0x0, 0x0);
        gbc.writeMem(0x28e, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0x65);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd277);
        EXPECT(gbc.pc(), 0x226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 038E
        gbc.setState(0xdbec, 0xbda6, 0x5290, 0x605b, 0x400, 0x7470, 0x0, 0x0);
        gbc.writeMem(0xdbec, { 0x38, 0xde });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xbda6);
        EXPECT(gbc.pc(), 0xdbcc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbec), 0x38);
        EXPECT(gbc.readMem(0xdbed), 0xde);
        // 38 0390
        gbc.setState(0xc64, 0xf5b6, 0x9310, 0x6357, 0x5a12, 0x531, 0x0, 0x0);
        gbc.writeMem(0xc64, { 0x38, 0xaf });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xf5b6);
        EXPECT(gbc.pc(), 0xc15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 0392
        gbc.setState(0x96d, 0x808b, 0xf580, 0x12c5, 0x6f2a, 0xa43d, 0x0, 0x0);
        gbc.writeMem(0x96d, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x808b);
        EXPECT(gbc.pc(), 0x96f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0393
        gbc.setState(0x8610, 0xe246, 0x5f70, 0x34a3, 0x6901, 0xa0d6, 0x1, 0x0);
        gbc.writeMem(0x8610, { 0x38, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe246);
        EXPECT(gbc.pc(), 0x85f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8610), 0x38);
        EXPECT(gbc.readMem(0x8611), 0xe1);
        // 38 0394
        gbc.setState(0x6286, 0xb0be, 0x1cc0, 0x720b, 0xb91f, 0xadc6, 0x1, 0x0);
        gbc.writeMem(0x6286, { 0x38, 0x56 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0xb0be);
        EXPECT(gbc.pc(), 0x6288);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 0395
        gbc.setState(0xb068, 0x463e, 0x6000, 0xd93c, 0xa6e6, 0x567b, 0x1, 0x1);
        gbc.writeMem(0xb068, { 0x38, 0x2a });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xe6);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x463e);
        EXPECT(gbc.pc(), 0xb06a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb068), 0x38);
        EXPECT(gbc.readMem(0xb069), 0x2a);
        // 38 0396
        gbc.setState(0xe77e, 0x9958, 0x430, 0x5c24, 0x96ee, 0xc1e3, 0x1, 0x1);
        gbc.writeMem(0xe77e, { 0x38, 0x61 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0x9958);
        EXPECT(gbc.pc(), 0xe7e1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe77e), 0x38);
        EXPECT(gbc.readMem(0xe77f), 0x61);
        // 38 0397
        gbc.setState(0xe7f5, 0xead5, 0xcaf0, 0xd96d, 0x5b53, 0x9b2f, 0x1, 0x1);
        gbc.writeMem(0xe7f5, { 0x38, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xead5);
        EXPECT(gbc.pc(), 0xe800);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7f5), 0x38);
        EXPECT(gbc.readMem(0xe7f6), 0x9);
        // 38 0398
        gbc.setState(0x7080, 0xd66, 0x22e0, 0xf4c5, 0xaa8e, 0xc70f, 0x1, 0x0);
        gbc.writeMem(0x7080, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x8e);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xd66);
        EXPECT(gbc.pc(), 0x7082);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 0399
        gbc.setState(0xbb17, 0xb37e, 0x9360, 0xdd2d, 0x32a5, 0xf0a2, 0x1, 0x1);
        gbc.writeMem(0xbb17, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0xb37e);
        EXPECT(gbc.pc(), 0xbb19);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb17), 0x38);
        EXPECT(gbc.readMem(0xbb18), 0x53);
        // 38 039A
        gbc.setState(0xc48b, 0xff71, 0x8340, 0x8d44, 0xcca9, 0xf073, 0x1, 0x0);
        gbc.writeMem(0xc48b, { 0x38, 0x32 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0x44);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xff71);
        EXPECT(gbc.pc(), 0xc48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc48b), 0x38);
        EXPECT(gbc.readMem(0xc48c), 0x32);
        // 38 039B
        gbc.setState(0x21c5, 0x3fbe, 0xbef0, 0xcff2, 0x68b4, 0x9aa8, 0x0, 0x0);
        gbc.writeMem(0x21c5, { 0x38, 0xf4 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3fbe);
        EXPECT(gbc.pc(), 0x21bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 039C
        gbc.setState(0xdbd3, 0x8972, 0x72d0, 0x25fb, 0xc505, 0x7d3e, 0x1, 0x0);
        gbc.writeMem(0xdbd3, { 0x38, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x8972);
        EXPECT(gbc.pc(), 0xdc4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbd3), 0x38);
        EXPECT(gbc.readMem(0xdbd4), 0x76);
        // 38 039D
        gbc.setState(0x85f6, 0x56b2, 0x5030, 0xfc2a, 0x8da1, 0x1e8b, 0x0, 0x1);
        gbc.writeMem(0x85f6, { 0x38, 0x52 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x56b2);
        EXPECT(gbc.pc(), 0x864a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85f6), 0x38);
        EXPECT(gbc.readMem(0x85f7), 0x52);
        // 38 039E
        gbc.setState(0x194a, 0x6a99, 0xf860, 0x3e0e, 0x416, 0x7f9c, 0x0, 0x0);
        gbc.writeMem(0x194a, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xf8);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x6a99);
        EXPECT(gbc.pc(), 0x194c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 039F
        gbc.setState(0x6776, 0x2d9d, 0x1650, 0x2191, 0x537d, 0xc7c7, 0x0, 0x0);
        gbc.writeMem(0x6776, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x2d9d);
        EXPECT(gbc.pc(), 0x673a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03A0
        gbc.setState(0xa8ac, 0x8051, 0xb90, 0xdef3, 0x699b, 0xc25, 0x1, 0x0);
        gbc.writeMem(0xa8ac, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x8051);
        EXPECT(gbc.pc(), 0xa901);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8ac), 0x38);
        EXPECT(gbc.readMem(0xa8ad), 0x53);
        // 38 03A1
        gbc.setState(0x77e7, 0x23fa, 0x2ec0, 0x310a, 0x84c8, 0xe2ed, 0x1, 0x0);
        gbc.writeMem(0x77e7, { 0x38, 0x55 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x23fa);
        EXPECT(gbc.pc(), 0x77e9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03A2
        gbc.setState(0xd7a1, 0x4880, 0x51e0, 0xdaee, 0xdfca, 0xa556, 0x1, 0x1);
        gbc.writeMem(0xd7a1, { 0x38, 0x76 });
        gbc.step();
        EXPECT(gbc.a(),  0x51);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x4880);
        EXPECT(gbc.pc(), 0xd7a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a1), 0x38);
        EXPECT(gbc.readMem(0xd7a2), 0x76);
        // 38 03A3
        gbc.setState(0x3a3e, 0x4a07, 0x1330, 0xc00, 0x4a4c, 0xb68e, 0x1, 0x0);
        gbc.writeMem(0x3a3e, { 0x38, 0x3a });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x4a07);
        EXPECT(gbc.pc(), 0x3a7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03A5
        gbc.setState(0xe09e, 0xa14b, 0x5b30, 0x398b, 0x78f0, 0xcf0d, 0x0, 0x0);
        gbc.writeMem(0xe09e, { 0x38, 0x13 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xa14b);
        EXPECT(gbc.pc(), 0xe0b3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe09e), 0x38);
        EXPECT(gbc.readMem(0xe09f), 0x13);
        // 38 03A6
        gbc.setState(0xda91, 0xfda5, 0x6350, 0x54f8, 0x71a4, 0x73ec, 0x0, 0x0);
        gbc.writeMem(0xda91, { 0x38, 0xee });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfda5);
        EXPECT(gbc.pc(), 0xda81);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda91), 0x38);
        EXPECT(gbc.readMem(0xda92), 0xee);
        // 38 03A7
        gbc.setState(0xd949, 0x8ed5, 0x2260, 0xcb85, 0xa37c, 0xc87, 0x0, 0x0);
        gbc.writeMem(0xd949, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0x8ed5);
        EXPECT(gbc.pc(), 0xd94b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd949), 0x38);
        EXPECT(gbc.readMem(0xd94a), 0x4a);
        // 38 03A8
        gbc.setState(0x134b, 0xcc1e, 0xc800, 0x5ef5, 0xf036, 0xbe1a, 0x0, 0x1);
        gbc.writeMem(0x134b, { 0x38, 0x46 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xcc1e);
        EXPECT(gbc.pc(), 0x134d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03A9
        gbc.setState(0x37fe, 0x75b6, 0x5fa0, 0x91a6, 0xf6ff, 0x3e83, 0x0, 0x1);
        gbc.writeMem(0x37fe, { 0x38, 0x9e });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x75b6);
        EXPECT(gbc.pc(), 0x3800);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03AA
        gbc.setState(0xbf56, 0x8b37, 0x2b70, 0x4f78, 0x8f4a, 0x47cd, 0x1, 0x0);
        gbc.writeMem(0xbf56, { 0x38, 0x8f });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x78);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x8b37);
        EXPECT(gbc.pc(), 0xbee7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf56), 0x38);
        EXPECT(gbc.readMem(0xbf57), 0x8f);
        // 38 03AB
        gbc.setState(0x4588, 0xce64, 0x1870, 0xb5e3, 0x5f35, 0x4af, 0x0, 0x0);
        gbc.writeMem(0x4588, { 0x38, 0x9 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xce64);
        EXPECT(gbc.pc(), 0x4593);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03AC
        gbc.setState(0xa94f, 0x2a73, 0x4b50, 0x9cc1, 0x7101, 0x1689, 0x0, 0x0);
        gbc.writeMem(0xa94f, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2a73);
        EXPECT(gbc.pc(), 0xa9a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa94f), 0x38);
        EXPECT(gbc.readMem(0xa950), 0x53);
        // 38 03AD
        gbc.setState(0xb880, 0x80ff, 0xabb0, 0xb80c, 0x626b, 0xca2f, 0x0, 0x0);
        gbc.writeMem(0xb880, { 0x38, 0x1c });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x80ff);
        EXPECT(gbc.pc(), 0xb89e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb880), 0x38);
        EXPECT(gbc.readMem(0xb881), 0x1c);
        // 38 03AE
        gbc.setState(0x16c3, 0xc552, 0x98a0, 0xd874, 0x8e08, 0xd209, 0x0, 0x0);
        gbc.writeMem(0x16c3, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xc552);
        EXPECT(gbc.pc(), 0x16c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03AF
        gbc.setState(0x1f01, 0xdace, 0x4020, 0x2fb3, 0x82bf, 0xbd2, 0x1, 0x1);
        gbc.writeMem(0x1f01, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xdace);
        EXPECT(gbc.pc(), 0x1f03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03B0
        gbc.setState(0xa63a, 0xf31, 0x88b0, 0xdc55, 0xad0, 0x3afa, 0x0, 0x0);
        gbc.writeMem(0xa63a, { 0x38, 0xb1 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xf31);
        EXPECT(gbc.pc(), 0xa5ed);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa63a), 0x38);
        EXPECT(gbc.readMem(0xa63b), 0xb1);
        // 38 03B1
        gbc.setState(0x62c0, 0x66f6, 0xc480, 0x7edc, 0x375, 0x17e7, 0x0, 0x0);
        gbc.writeMem(0x62c0, { 0x38, 0xa3 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x66f6);
        EXPECT(gbc.pc(), 0x62c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03B2
        gbc.setState(0xb3c, 0xf671, 0x48c0, 0xe93f, 0xde01, 0x2da8, 0x1, 0x1);
        gbc.writeMem(0xb3c, { 0x38, 0xc2 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xf671);
        EXPECT(gbc.pc(), 0xb3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03B3
        gbc.setState(0x990d, 0xac6f, 0x54e0, 0xfacf, 0x847, 0x7aba, 0x0, 0x1);
        gbc.writeMem(0x990d, { 0x38, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xac6f);
        EXPECT(gbc.pc(), 0x990f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x990d), 0x38);
        EXPECT(gbc.readMem(0x990e), 0xe1);
        // 38 03B4
        gbc.setState(0xd386, 0x38d7, 0xc7b0, 0xa76d, 0x1dbf, 0x1d6d, 0x0, 0x0);
        gbc.writeMem(0xd386, { 0x38, 0x15 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x38d7);
        EXPECT(gbc.pc(), 0xd39d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd386), 0x38);
        EXPECT(gbc.readMem(0xd387), 0x15);
        // 38 03B5
        gbc.setState(0xdc1b, 0xb8d8, 0x2d0, 0xfe2c, 0xadbb, 0x1117, 0x0, 0x1);
        gbc.writeMem(0xdc1b, { 0x38, 0x5b });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xb8d8);
        EXPECT(gbc.pc(), 0xdc78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc1b), 0x38);
        EXPECT(gbc.readMem(0xdc1c), 0x5b);
        // 38 03B6
        gbc.setState(0x1a29, 0x4c0d, 0x8950, 0x966c, 0x5ba2, 0xb466, 0x0, 0x1);
        gbc.writeMem(0x1a29, { 0x38, 0x91 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x6c);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x4c0d);
        EXPECT(gbc.pc(), 0x19bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03B7
        gbc.setState(0xbac9, 0x87a8, 0xfaa0, 0xe645, 0x704a, 0xffa1, 0x0, 0x0);
        gbc.writeMem(0xbac9, { 0x38, 0x8e });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x87a8);
        EXPECT(gbc.pc(), 0xbacb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbac9), 0x38);
        EXPECT(gbc.readMem(0xbaca), 0x8e);
        // 38 03B8
        gbc.setState(0x4aa3, 0xa38c, 0xf9d0, 0xdb3a, 0x2aca, 0xcc96, 0x1, 0x1);
        gbc.writeMem(0x4aa3, { 0x38, 0x53 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0xa38c);
        EXPECT(gbc.pc(), 0x4af8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03B9
        gbc.setState(0xd956, 0x27a6, 0x87e0, 0xab26, 0xad1d, 0x7c00, 0x0, 0x1);
        gbc.writeMem(0xd956, { 0x38, 0xd9 });
        gbc.step();
        EXPECT(gbc.a(),  0x87);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x27a6);
        EXPECT(gbc.pc(), 0xd958);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd956), 0x38);
        EXPECT(gbc.readMem(0xd957), 0xd9);
        // 38 03BB
        gbc.setState(0x4065, 0x224c, 0x9f80, 0xef0a, 0x98f2, 0xbb16, 0x0, 0x1);
        gbc.writeMem(0x4065, { 0x38, 0x1f });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x224c);
        EXPECT(gbc.pc(), 0x4067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03BC
        gbc.setState(0x38f1, 0x3865, 0x76d0, 0x38ff, 0xa171, 0xcf48, 0x1, 0x0);
        gbc.writeMem(0x38f1, { 0x38, 0x31 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x3865);
        EXPECT(gbc.pc(), 0x3924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03BD
        gbc.setState(0xc08a, 0xbe2a, 0x3b40, 0xe476, 0x172c, 0xaa52, 0x1, 0x0);
        gbc.writeMem(0xc08a, { 0x38, 0x64 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x76);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xbe2a);
        EXPECT(gbc.pc(), 0xc08c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc08a), 0x38);
        EXPECT(gbc.readMem(0xc08b), 0x64);
        // 38 03BE
        gbc.setState(0x79a0, 0xcdb, 0x37b0, 0xff9, 0xe45e, 0xa1ea, 0x0, 0x1);
        gbc.writeMem(0x79a0, { 0x38, 0xfb });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xcdb);
        EXPECT(gbc.pc(), 0x799d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03BF
        gbc.setState(0xe93, 0x225a, 0x5930, 0xf7bc, 0x254c, 0x9bc7, 0x0, 0x1);
        gbc.writeMem(0xe93, { 0x38, 0x89 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x225a);
        EXPECT(gbc.pc(), 0xe1e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03C0
        gbc.setState(0xeb9a, 0xbe11, 0xac70, 0x7834, 0xbcd2, 0x2b40, 0x0, 0x0);
        gbc.writeMem(0xeb9a, { 0x38, 0x54 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xbe11);
        EXPECT(gbc.pc(), 0xebf0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb9a), 0x38);
        EXPECT(gbc.readMem(0xeb9b), 0x54);
        // 38 03C1
        gbc.setState(0x3870, 0x9f7, 0xbf40, 0x5046, 0x99f2, 0xac58, 0x0, 0x1);
        gbc.writeMem(0x3870, { 0x38, 0x73 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x9f7);
        EXPECT(gbc.pc(), 0x3872);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03C2
        gbc.setState(0xc755, 0x6a37, 0xb8c0, 0xe15c, 0xca2f, 0x7b61, 0x0, 0x0);
        gbc.writeMem(0xc755, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x6a37);
        EXPECT(gbc.pc(), 0xc757);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc755), 0x38);
        EXPECT(gbc.readMem(0xc756), 0x96);
        // 38 03C3
        gbc.setState(0x1181, 0x56bd, 0x6f80, 0x2d6b, 0xe7e9, 0xfb7d, 0x0, 0x0);
        gbc.writeMem(0x1181, { 0x38, 0x74 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x56bd);
        EXPECT(gbc.pc(), 0x1183);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03C4
        gbc.setState(0xac80, 0xa9a7, 0xdee0, 0xf0d4, 0x71dd, 0xa83b, 0x1, 0x0);
        gbc.writeMem(0xac80, { 0x38, 0x27 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xa9a7);
        EXPECT(gbc.pc(), 0xac82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac80), 0x38);
        EXPECT(gbc.readMem(0xac81), 0x27);
        // 38 03C5
        gbc.setState(0x91e5, 0x2904, 0xfc60, 0x7df, 0x2a5a, 0xb79f, 0x0, 0x1);
        gbc.writeMem(0x91e5, { 0x38, 0xe1 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x7);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x2904);
        EXPECT(gbc.pc(), 0x91e7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x91e5), 0x38);
        EXPECT(gbc.readMem(0x91e6), 0xe1);
        // 38 03C6
        gbc.setState(0x9666, 0xebe1, 0x7e90, 0x255a, 0x2323, 0xf5ab, 0x0, 0x0);
        gbc.writeMem(0x9666, { 0x38, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xebe1);
        EXPECT(gbc.pc(), 0x965e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9666), 0x38);
        EXPECT(gbc.readMem(0x9667), 0xf6);
        // 38 03C7
        gbc.setState(0xac11, 0x358, 0x8c40, 0x86b3, 0xadc6, 0xcaee, 0x1, 0x0);
        gbc.writeMem(0xac11, { 0x38, 0x5e });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x358);
        EXPECT(gbc.pc(), 0xac13);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac11), 0x38);
        EXPECT(gbc.readMem(0xac12), 0x5e);
        // 38 03C8
        gbc.setState(0xd8c0, 0x9bff, 0xb790, 0xe6c6, 0x8d91, 0x7bae, 0x1, 0x1);
        gbc.writeMem(0xd8c0, { 0x38, 0x65 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9bff);
        EXPECT(gbc.pc(), 0xd927);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd8c0), 0x38);
        EXPECT(gbc.readMem(0xd8c1), 0x65);
        // 38 03CA
        gbc.setState(0x1159, 0xb46e, 0x7570, 0x7efd, 0x46fb, 0xbc60, 0x1, 0x1);
        gbc.writeMem(0x1159, { 0x38, 0xab });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb46e);
        EXPECT(gbc.pc(), 0x1106);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03CB
        gbc.setState(0x165a, 0x6083, 0x9320, 0xac23, 0x35c3, 0x7863, 0x1, 0x1);
        gbc.writeMem(0x165a, { 0x38, 0x2b });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x23);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x6083);
        EXPECT(gbc.pc(), 0x165c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03CC
        gbc.setState(0x337a, 0x4b3a, 0xbfc0, 0x3fb9, 0x18ba, 0xee4e, 0x1, 0x0);
        gbc.writeMem(0x337a, { 0x38, 0x45 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x4b3a);
        EXPECT(gbc.pc(), 0x337c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03CD
        gbc.setState(0x99c5, 0x7425, 0x50f0, 0x3746, 0x48b9, 0x8621, 0x0, 0x0);
        gbc.writeMem(0x99c5, { 0x38, 0x41 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x7425);
        EXPECT(gbc.pc(), 0x9a08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x99c5), 0x38);
        EXPECT(gbc.readMem(0x99c6), 0x41);
        // 38 03CE
        gbc.setState(0x937, 0xa2b0, 0xd600, 0xbfd3, 0x4b58, 0xa7d2, 0x0, 0x1);
        gbc.writeMem(0x937, { 0x38, 0xbd });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa2b0);
        EXPECT(gbc.pc(), 0x939);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03CF
        gbc.setState(0x575d, 0x7f51, 0x8310, 0x5675, 0x7556, 0x5869, 0x0, 0x1);
        gbc.writeMem(0x575d, { 0x38, 0x96 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x7f51);
        EXPECT(gbc.pc(), 0x56f5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03D0
        gbc.setState(0x2306, 0xff2b, 0x3200, 0x135e, 0x874f, 0x9489, 0x0, 0x1);
        gbc.writeMem(0x2306, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xff2b);
        EXPECT(gbc.pc(), 0x2308);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03D1
        gbc.setState(0x9210, 0xfe52, 0x3310, 0x173, 0x607b, 0xf538, 0x0, 0x1);
        gbc.writeMem(0x9210, { 0x38, 0x6f });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0xfe52);
        EXPECT(gbc.pc(), 0x9281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9210), 0x38);
        EXPECT(gbc.readMem(0x9211), 0x6f);
        // 38 03D2
        gbc.setState(0x54c4, 0x3990, 0x5540, 0x2a90, 0x466, 0x473e, 0x1, 0x1);
        gbc.writeMem(0x54c4, { 0x38, 0xc6 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0x47);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x3990);
        EXPECT(gbc.pc(), 0x54c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03D4
        gbc.setState(0xc742, 0xa321, 0x2a0, 0x3954, 0x8da0, 0x6ae6, 0x0, 0x0);
        gbc.writeMem(0xc742, { 0x38, 0x4f });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x39);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa321);
        EXPECT(gbc.pc(), 0xc744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc742), 0x38);
        EXPECT(gbc.readMem(0xc743), 0x4f);
        // 38 03D5
        gbc.setState(0x2eed, 0xdea9, 0x3610, 0x5306, 0x1738, 0xf13a, 0x1, 0x1);
        gbc.writeMem(0x2eed, { 0x38, 0xf6 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xdea9);
        EXPECT(gbc.pc(), 0x2ee5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03D6
        gbc.setState(0xe860, 0x2adc, 0xd220, 0xe300, 0xb34d, 0xf6a2, 0x0, 0x1);
        gbc.writeMem(0xe860, { 0x38, 0x44 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xa2);
        EXPECT(gbc.sp(), 0x2adc);
        EXPECT(gbc.pc(), 0xe862);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe860), 0x38);
        EXPECT(gbc.readMem(0xe861), 0x44);
        // 38 03D7
        gbc.setState(0x4b0c, 0xf76c, 0x26c0, 0xd1c7, 0x31c, 0xcea7, 0x0, 0x1);
        gbc.writeMem(0x4b0c, { 0x38, 0xf5 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xf76c);
        EXPECT(gbc.pc(), 0x4b0e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03D8
        gbc.setState(0xb2d2, 0xf8f, 0xe520, 0x6484, 0x863b, 0xbd24, 0x0, 0x1);
        gbc.writeMem(0xb2d2, { 0x38, 0x4a });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xf8f);
        EXPECT(gbc.pc(), 0xb2d4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d2), 0x38);
        EXPECT(gbc.readMem(0xb2d3), 0x4a);
        // 38 03D9
        gbc.setState(0x7017, 0xd70f, 0x4140, 0xe7af, 0x441f, 0xdd46, 0x1, 0x1);
        gbc.writeMem(0x7017, { 0x38, 0x92 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xd70f);
        EXPECT(gbc.pc(), 0x7019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03DA
        gbc.setState(0x85bb, 0xb1ed, 0x7510, 0xb0d1, 0x1a26, 0xf58, 0x0, 0x0);
        gbc.writeMem(0x85bb, { 0x38, 0x9a });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x26);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xb1ed);
        EXPECT(gbc.pc(), 0x8557);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85bb), 0x38);
        EXPECT(gbc.readMem(0x85bc), 0x9a);
        // 38 03DB
        gbc.setState(0x9769, 0xc15f, 0x7630, 0x1e17, 0x6eed, 0x37d5, 0x0, 0x0);
        gbc.writeMem(0x9769, { 0x38, 0xc1 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0xed);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xc15f);
        EXPECT(gbc.pc(), 0x972c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9769), 0x38);
        EXPECT(gbc.readMem(0x976a), 0xc1);
        // 38 03DC
        gbc.setState(0xbe17, 0xd201, 0x5330, 0x165c, 0xd0ac, 0x6eba, 0x1, 0x0);
        gbc.writeMem(0xbe17, { 0x38, 0xd1 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd201);
        EXPECT(gbc.pc(), 0xbdea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe17), 0x38);
        EXPECT(gbc.readMem(0xbe18), 0xd1);
        // 38 03DD
        gbc.setState(0x69cb, 0x95cb, 0xb5a0, 0xc69c, 0xfba3, 0x8d19, 0x1, 0x0);
        gbc.writeMem(0x69cb, { 0x38, 0x6b });
        gbc.step();
        EXPECT(gbc.a(),  0xb5);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x95cb);
        EXPECT(gbc.pc(), 0x69cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03DE
        gbc.setState(0x7a8b, 0x6b82, 0x5c50, 0x6137, 0x1e2d, 0xae98, 0x0, 0x1);
        gbc.writeMem(0x7a8b, { 0x38, 0xf3 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x6b82);
        EXPECT(gbc.pc(), 0x7a80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03DF
        gbc.setState(0x6dc8, 0x19bc, 0x7390, 0xc74b, 0xce13, 0x6c1e, 0x0, 0x0);
        gbc.writeMem(0x6dc8, { 0x38, 0x1d });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x19bc);
        EXPECT(gbc.pc(), 0x6de7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
        // 38 03E0
        gbc.setState(0x5842, 0xc25a, 0x4b80, 0xf051, 0xc49d, 0xd349, 0x1, 0x0);
        gbc.writeMem(0x5842, { 0x38, 0xe6 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xc25a);
        EXPECT(gbc.pc(), 0x5844);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  false);
        // 38 03E2
        gbc.setState(0xc29, 0xe342, 0xbeb0, 0x7efd, 0xcc8b, 0x8010, 0x0, 0x0);
        gbc.writeMem(0xc29, { 0x38, 0x47 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xe342);
        EXPECT(gbc.pc(), 0xc72);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03E3
        gbc.setState(0x7d26, 0x35fe, 0x34a0, 0x8bde, 0x2c02, 0x67e5, 0x0, 0x1);
        gbc.writeMem(0x7d26, { 0x38, 0xfc });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x67);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x35fe);
        EXPECT(gbc.pc(), 0x7d28);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // 38 03E4
        gbc.setState(0xea23, 0xe099, 0xd1a0, 0x3db9, 0xdeee, 0x2f67, 0x1, 0x0);
        gbc.writeMem(0xea23, { 0x38, 0xec });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0xb9);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xe099);
        EXPECT(gbc.pc(), 0xea25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xea23), 0x38);
        EXPECT(gbc.readMem(0xea24), 0xec);
        // 38 03E5
        gbc.setState(0xaee3, 0x93d0, 0xc0f0, 0x4a57, 0x178c, 0x13ea, 0x0, 0x0);
        gbc.writeMem(0xaee3, { 0x38, 0xbb });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x93d0);
        EXPECT(gbc.pc(), 0xaea0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaee3), 0x38);
        EXPECT(gbc.readMem(0xaee4), 0xbb);
        // 38 03E6
        gbc.setState(0x4dbb, 0x6546, 0x41f0, 0xf126, 0xe05f, 0x8527, 0x0, 0x0);
        gbc.writeMem(0x4dbb, { 0x38, 0xc8 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x6546);
        EXPECT(gbc.pc(), 0x4d85);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  true);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // 38 03E7
        gbc.setState(0x60cd, 0xff53, 0xf490, 0x1be, 0xa2eb, 0x1dd9, 0x1, 0x1);
        gbc.writeMem(0x60cd, { 0x38, 0x90 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xff53);
        EXPECT(gbc.pc(), 0x605f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  false);
        EXPECT(gbc.flagC(),  true);
    }
}
#endif
