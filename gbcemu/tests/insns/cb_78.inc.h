    TEST(gbcemu, opcode_cb_78) {
        GBCEmu gbc{};
        uint8_t cartridge[0x8000];
        cartridge[0x149] = 0x02; // 8kb external RAM
        gbc.loadCartridge(new FlashGamePak(cartridge));
        // CB 78 0000
        gbc.setState(0x5e8b, 0xe373, 0xd0f0, 0x12bd, 0x47bd, 0x9d0e, 0x1, 0x1);
        gbc.writeMem(0x5e8b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xe373);
        EXPECT(gbc.pc(), 0x5e8d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0001
        gbc.setState(0x389e, 0x3aad, 0xa60, 0x2a0c, 0x36b3, 0x844c, 0x1, 0x1);
        gbc.writeMem(0x389e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0x3aad);
        EXPECT(gbc.pc(), 0x38a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0002
        gbc.setState(0x3bd9, 0x33ed, 0x8ec0, 0x679, 0xa74b, 0x3400, 0x1, 0x1);
        gbc.writeMem(0x3bd9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x33ed);
        EXPECT(gbc.pc(), 0x3bdb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0003
        gbc.setState(0x321c, 0x296d, 0xcbc0, 0xabec, 0x5c7d, 0xaa29, 0x1, 0x0);
        gbc.writeMem(0x321c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x296d);
        EXPECT(gbc.pc(), 0x321e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0004
        gbc.setState(0x95f8, 0x3535, 0x3ae0, 0x6b92, 0x8655, 0xa6e4, 0x1, 0x0);
        gbc.writeMem(0x95f8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x3535);
        EXPECT(gbc.pc(), 0x95fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95f8), 0xcb);
        EXPECT(gbc.readMem(0x95f9), 0x78);
        // CB 78 0005
        gbc.setState(0xda05, 0xb14b, 0xdb10, 0x8bb4, 0x7b7a, 0x126f, 0x1, 0x0);
        gbc.writeMem(0xda05, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x7b);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xb14b);
        EXPECT(gbc.pc(), 0xda07);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda05), 0xcb);
        EXPECT(gbc.readMem(0xda06), 0x78);
        // CB 78 0006
        gbc.setState(0xb5c5, 0x5604, 0x72b0, 0xd648, 0x8adf, 0xbe99, 0x1, 0x1);
        gbc.writeMem(0xb5c5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0x5604);
        EXPECT(gbc.pc(), 0xb5c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5c5), 0xcb);
        EXPECT(gbc.readMem(0xb5c6), 0x78);
        // CB 78 0008
        gbc.setState(0x8206, 0xdb81, 0xa9f0, 0xc126, 0xb3b6, 0xe233, 0x1, 0x0);
        gbc.writeMem(0x8206, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xb3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xdb81);
        EXPECT(gbc.pc(), 0x8208);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8206), 0xcb);
        EXPECT(gbc.readMem(0x8207), 0x78);
        // CB 78 000A
        gbc.setState(0x18d5, 0x177, 0x24e0, 0x16ae, 0x624c, 0x10d, 0x1, 0x0);
        gbc.writeMem(0x18d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0x177);
        EXPECT(gbc.pc(), 0x18d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 000B
        gbc.setState(0x2bd7, 0xc45c, 0x2950, 0xe2a, 0x4cc8, 0x35d9, 0x1, 0x0);
        gbc.writeMem(0x2bd7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x2a);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xc45c);
        EXPECT(gbc.pc(), 0x2bd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 000C
        gbc.setState(0x2dea, 0x5c50, 0xf040, 0xb8c5, 0x3ac3, 0x117f, 0x0, 0x1);
        gbc.writeMem(0x2dea, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xb8);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5c50);
        EXPECT(gbc.pc(), 0x2dec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 000D
        gbc.setState(0x2ed3, 0x2536, 0xf2b0, 0x5616, 0xd44f, 0x79c3, 0x1, 0x1);
        gbc.writeMem(0x2ed3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0xd4);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2536);
        EXPECT(gbc.pc(), 0x2ed5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 000E
        gbc.setState(0xd533, 0xe671, 0xc9f0, 0xde4c, 0x12a4, 0xbdd6, 0x1, 0x1);
        gbc.writeMem(0xd533, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xe671);
        EXPECT(gbc.pc(), 0xd535);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd533), 0xcb);
        EXPECT(gbc.readMem(0xd534), 0x78);
        // CB 78 000F
        gbc.setState(0xb666, 0x7928, 0x5af0, 0x3336, 0xc924, 0x1d93, 0x1, 0x1);
        gbc.writeMem(0xb666, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x7928);
        EXPECT(gbc.pc(), 0xb668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb666), 0xcb);
        EXPECT(gbc.readMem(0xb667), 0x78);
        // CB 78 0010
        gbc.setState(0x31b7, 0x30a0, 0x5000, 0x67d2, 0xd7b8, 0x1a4a, 0x1, 0x1);
        gbc.writeMem(0x31b7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0xd7);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x30a0);
        EXPECT(gbc.pc(), 0x31b9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0011
        gbc.setState(0xa8d8, 0x484f, 0x770, 0x24a0, 0xd5a1, 0xe5de, 0x0, 0x0);
        gbc.writeMem(0xa8d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x484f);
        EXPECT(gbc.pc(), 0xa8da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8d8), 0xcb);
        EXPECT(gbc.readMem(0xa8d9), 0x78);
        // CB 78 0012
        gbc.setState(0x9223, 0x57d6, 0x43b0, 0x2974, 0xf3f1, 0xcd1f, 0x1, 0x0);
        gbc.writeMem(0x9223, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x57d6);
        EXPECT(gbc.pc(), 0x9225);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9223), 0xcb);
        EXPECT(gbc.readMem(0x9224), 0x78);
        // CB 78 0013
        gbc.setState(0x8da8, 0x868e, 0x5aa0, 0x7abf, 0x878c, 0x7515, 0x1, 0x1);
        gbc.writeMem(0x8da8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x868e);
        EXPECT(gbc.pc(), 0x8daa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8da8), 0xcb);
        EXPECT(gbc.readMem(0x8da9), 0x78);
        // CB 78 0015
        gbc.setState(0x3be, 0x7de0, 0x7540, 0x37d9, 0x947, 0xf2f7, 0x1, 0x0);
        gbc.writeMem(0x3be, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7de0);
        EXPECT(gbc.pc(), 0x3c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0016
        gbc.setState(0x366a, 0xe5e7, 0xafa0, 0x28c9, 0x8819, 0x6b8f, 0x1, 0x0);
        gbc.writeMem(0x366a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xe5e7);
        EXPECT(gbc.pc(), 0x366c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0017
        gbc.setState(0xe17c, 0x8076, 0xfd70, 0x4eb, 0x969a, 0xa910, 0x1, 0x0);
        gbc.writeMem(0xe17c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x8076);
        EXPECT(gbc.pc(), 0xe17e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe17c), 0xcb);
        EXPECT(gbc.readMem(0xe17d), 0x78);
        // CB 78 0018
        gbc.setState(0x5d76, 0x93fb, 0x4ad0, 0x9475, 0x7ed3, 0xb86f, 0x1, 0x1);
        gbc.writeMem(0x5d76, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x75);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x93fb);
        EXPECT(gbc.pc(), 0x5d78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0019
        gbc.setState(0xd0fb, 0x7d53, 0xaf10, 0x987b, 0x9087, 0xeaf2, 0x1, 0x1);
        gbc.writeMem(0xd0fb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x7d53);
        EXPECT(gbc.pc(), 0xd0fd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd0fb), 0xcb);
        EXPECT(gbc.readMem(0xd0fc), 0x78);
        // CB 78 001B
        gbc.setState(0x978b, 0xef82, 0xa9b0, 0x5c99, 0x16d3, 0x2edd, 0x0, 0x0);
        gbc.writeMem(0x978b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xef82);
        EXPECT(gbc.pc(), 0x978d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x978b), 0xcb);
        EXPECT(gbc.readMem(0x978c), 0x78);
        // CB 78 001C
        gbc.setState(0x538a, 0xca30, 0x8250, 0x999d, 0x2dfe, 0x912c, 0x1, 0x1);
        gbc.writeMem(0x538a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xca30);
        EXPECT(gbc.pc(), 0x538c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 001D
        gbc.setState(0x644c, 0x7791, 0x9cd0, 0xa13f, 0xe5da, 0xbf9b, 0x1, 0x0);
        gbc.writeMem(0x644c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x7791);
        EXPECT(gbc.pc(), 0x644e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 001E
        gbc.setState(0xc12d, 0x9ae8, 0xe9b0, 0xb12e, 0xb5d6, 0x77da, 0x1, 0x0);
        gbc.writeMem(0xc12d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x9ae8);
        EXPECT(gbc.pc(), 0xc12f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc12d), 0xcb);
        EXPECT(gbc.readMem(0xc12e), 0x78);
        // CB 78 001F
        gbc.setState(0xd2ab, 0x7743, 0xc9e0, 0xf295, 0x8607, 0x1cd, 0x1, 0x0);
        gbc.writeMem(0xd2ab, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x7743);
        EXPECT(gbc.pc(), 0xd2ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd2ab), 0xcb);
        EXPECT(gbc.readMem(0xd2ac), 0x78);
        // CB 78 0020
        gbc.setState(0xd41f, 0x2e07, 0xeec0, 0xaf57, 0xfada, 0xcce5, 0x1, 0x0);
        gbc.writeMem(0xd41f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x2e07);
        EXPECT(gbc.pc(), 0xd421);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd41f), 0xcb);
        EXPECT(gbc.readMem(0xd420), 0x78);
        // CB 78 0021
        gbc.setState(0xe410, 0x6e4, 0xb3d0, 0x7f48, 0x82a8, 0xcea3, 0x0, 0x1);
        gbc.writeMem(0xe410, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x6e4);
        EXPECT(gbc.pc(), 0xe412);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe410), 0xcb);
        EXPECT(gbc.readMem(0xe411), 0x78);
        // CB 78 0022
        gbc.setState(0x6c5d, 0xc6d7, 0x8940, 0x5734, 0x33ec, 0xc6f1, 0x0, 0x0);
        gbc.writeMem(0x6c5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x34);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xc6d7);
        EXPECT(gbc.pc(), 0x6c5f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0023
        gbc.setState(0x7043, 0xf2aa, 0x810, 0x85dc, 0x91e2, 0x3cdc, 0x0, 0x0);
        gbc.writeMem(0x7043, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xdc);
        EXPECT(gbc.sp(), 0xf2aa);
        EXPECT(gbc.pc(), 0x7045);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0024
        gbc.setState(0xa60d, 0x2f29, 0xa390, 0xce55, 0x354b, 0x665, 0x1, 0x0);
        gbc.writeMem(0xa60d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0x2f29);
        EXPECT(gbc.pc(), 0xa60f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa60d), 0xcb);
        EXPECT(gbc.readMem(0xa60e), 0x78);
        // CB 78 0025
        gbc.setState(0xdd90, 0x9f95, 0xea0, 0xf885, 0xe17a, 0x8915, 0x0, 0x1);
        gbc.writeMem(0xdd90, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x9f95);
        EXPECT(gbc.pc(), 0xdd92);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd90), 0xcb);
        EXPECT(gbc.readMem(0xdd91), 0x78);
        // CB 78 0026
        gbc.setState(0x8043, 0x1b3e, 0xbf60, 0xceab, 0x23d8, 0x2e28, 0x1, 0x0);
        gbc.writeMem(0x8043, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xab);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xd8);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x1b3e);
        EXPECT(gbc.pc(), 0x8045);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8043), 0xcb);
        EXPECT(gbc.readMem(0x8044), 0x78);
        // CB 78 0027
        gbc.setState(0x2fde, 0xe982, 0xa5e0, 0xf77c, 0xebb8, 0x5919, 0x1, 0x1);
        gbc.writeMem(0x2fde, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xe982);
        EXPECT(gbc.pc(), 0x2fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0028
        gbc.setState(0x3b4f, 0x4f73, 0xc2e0, 0x4959, 0xae1a, 0x87ed, 0x0, 0x0);
        gbc.writeMem(0x3b4f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x4f73);
        EXPECT(gbc.pc(), 0x3b51);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0029
        gbc.setState(0x8ac2, 0xffd9, 0x6af0, 0x6652, 0x208c, 0x44e7, 0x0, 0x1);
        gbc.writeMem(0x8ac2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xffd9);
        EXPECT(gbc.pc(), 0x8ac4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ac2), 0xcb);
        EXPECT(gbc.readMem(0x8ac3), 0x78);
        // CB 78 002A
        gbc.setState(0x128c, 0xb5ba, 0x7500, 0x905a, 0x8f9c, 0xf2c, 0x0, 0x0);
        gbc.writeMem(0x128c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0xb5ba);
        EXPECT(gbc.pc(), 0x128e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 002B
        gbc.setState(0x8bba, 0x4f14, 0x5e30, 0x173e, 0xa163, 0x6f61, 0x1, 0x1);
        gbc.writeMem(0x8bba, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0x4f14);
        EXPECT(gbc.pc(), 0x8bbc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8bba), 0xcb);
        EXPECT(gbc.readMem(0x8bbb), 0x78);
        // CB 78 002C
        gbc.setState(0x5430, 0x78e1, 0xc030, 0xc55, 0x26b6, 0x7c03, 0x1, 0x0);
        gbc.writeMem(0x5430, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x78e1);
        EXPECT(gbc.pc(), 0x5432);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 002D
        gbc.setState(0x64a8, 0x784d, 0xd8d0, 0xeb98, 0xa2ce, 0x6ab3, 0x1, 0x1);
        gbc.writeMem(0x64a8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x784d);
        EXPECT(gbc.pc(), 0x64aa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 002E
        gbc.setState(0x930b, 0x4cbb, 0x6500, 0x948b, 0x93cb, 0x7206, 0x0, 0x0);
        gbc.writeMem(0x930b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x4cbb);
        EXPECT(gbc.pc(), 0x930d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x930b), 0xcb);
        EXPECT(gbc.readMem(0x930c), 0x78);
        // CB 78 0030
        gbc.setState(0x2d25, 0xccdb, 0x1c00, 0x2a5d, 0xb1d4, 0xfa22, 0x1, 0x1);
        gbc.writeMem(0x2d25, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xccdb);
        EXPECT(gbc.pc(), 0x2d27);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0031
        gbc.setState(0xa87a, 0x9c4e, 0x5dc0, 0xedb2, 0x4905, 0x1141, 0x0, 0x1);
        gbc.writeMem(0xa87a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x9c4e);
        EXPECT(gbc.pc(), 0xa87c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa87a), 0xcb);
        EXPECT(gbc.readMem(0xa87b), 0x78);
        // CB 78 0032
        gbc.setState(0x1370, 0x3728, 0xfb70, 0x838e, 0x440e, 0xe9f1, 0x0, 0x1);
        gbc.writeMem(0x1370, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x3728);
        EXPECT(gbc.pc(), 0x1372);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0033
        gbc.setState(0xdbdb, 0x589a, 0xb7d0, 0xaced, 0x2dd3, 0x4397, 0x1, 0x0);
        gbc.writeMem(0xdbdb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x589a);
        EXPECT(gbc.pc(), 0xdbdd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdbdb), 0xcb);
        EXPECT(gbc.readMem(0xdbdc), 0x78);
        // CB 78 0035
        gbc.setState(0xe347, 0xa7f3, 0x9a90, 0x1c19, 0xa353, 0xdd64, 0x0, 0x1);
        gbc.writeMem(0xe347, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa7f3);
        EXPECT(gbc.pc(), 0xe349);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe347), 0xcb);
        EXPECT(gbc.readMem(0xe348), 0x78);
        // CB 78 0036
        gbc.setState(0x5d, 0x6e54, 0x12c0, 0x5773, 0x2307, 0x7538, 0x1, 0x1);
        gbc.writeMem(0x5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x6e54);
        EXPECT(gbc.pc(), 0x5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0037
        gbc.setState(0x54c3, 0xe957, 0x74d0, 0xfdf9, 0x1b3d, 0xf9, 0x1, 0x0);
        gbc.writeMem(0x54c3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xf9);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xe957);
        EXPECT(gbc.pc(), 0x54c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0038
        gbc.setState(0x24ab, 0x6603, 0x3b70, 0x27a9, 0x6c41, 0x6df1, 0x0, 0x1);
        gbc.writeMem(0x24ab, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x6603);
        EXPECT(gbc.pc(), 0x24ad);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0039
        gbc.setState(0x89c8, 0xe26d, 0x4be0, 0x8360, 0x2de, 0xbdd4, 0x0, 0x0);
        gbc.writeMem(0x89c8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0xe26d);
        EXPECT(gbc.pc(), 0x89ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89c8), 0xcb);
        EXPECT(gbc.readMem(0x89c9), 0x78);
        // CB 78 003A
        gbc.setState(0xd755, 0xf44b, 0x9000, 0xdbb0, 0x2b91, 0xa688, 0x1, 0x0);
        gbc.writeMem(0xd755, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xf44b);
        EXPECT(gbc.pc(), 0xd757);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd755), 0xcb);
        EXPECT(gbc.readMem(0xd756), 0x78);
        // CB 78 003C
        gbc.setState(0x7ae8, 0xbfcb, 0x5e60, 0x75c0, 0x4797, 0xbe59, 0x1, 0x0);
        gbc.writeMem(0x7ae8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbfcb);
        EXPECT(gbc.pc(), 0x7aea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 003D
        gbc.setState(0x76fd, 0xee6a, 0x11b0, 0x144e, 0x91f7, 0xb377, 0x0, 0x0);
        gbc.writeMem(0x76fd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xee6a);
        EXPECT(gbc.pc(), 0x76ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 003E
        gbc.setState(0x5432, 0xba11, 0x3110, 0x2289, 0x9474, 0x45b6, 0x1, 0x0);
        gbc.writeMem(0x5432, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0xba11);
        EXPECT(gbc.pc(), 0x5434);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0040
        gbc.setState(0x5216, 0xff4, 0x7a30, 0x4658, 0x629b, 0x6dd6, 0x0, 0x1);
        gbc.writeMem(0x5216, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xff4);
        EXPECT(gbc.pc(), 0x5218);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0041
        gbc.setState(0x4cd0, 0x7f4, 0x3f50, 0x1850, 0x7399, 0xf649, 0x1, 0x1);
        gbc.writeMem(0x4cd0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x7f4);
        EXPECT(gbc.pc(), 0x4cd2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0042
        gbc.setState(0x10f6, 0x7b07, 0x3740, 0xab22, 0xce48, 0x76fb, 0x0, 0x0);
        gbc.writeMem(0x10f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x7b07);
        EXPECT(gbc.pc(), 0x10f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0043
        gbc.setState(0x863d, 0x839, 0x6ca0, 0x2c4b, 0xf78, 0x4eaa, 0x0, 0x0);
        gbc.writeMem(0x863d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x839);
        EXPECT(gbc.pc(), 0x863f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x863d), 0xcb);
        EXPECT(gbc.readMem(0x863e), 0x78);
        // CB 78 0044
        gbc.setState(0x98c7, 0x3ab2, 0x7710, 0xe632, 0xe6c6, 0xce8, 0x0, 0x0);
        gbc.writeMem(0x98c7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x3ab2);
        EXPECT(gbc.pc(), 0x98c9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x98c7), 0xcb);
        EXPECT(gbc.readMem(0x98c8), 0x78);
        // CB 78 0045
        gbc.setState(0x8d4d, 0xe3a1, 0x4b00, 0x9cbc, 0x72b5, 0xefc5, 0x1, 0x0);
        gbc.writeMem(0x8d4d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe3a1);
        EXPECT(gbc.pc(), 0x8d4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8d4d), 0xcb);
        EXPECT(gbc.readMem(0x8d4e), 0x78);
        // CB 78 0046
        gbc.setState(0x2033, 0x24e6, 0xe850, 0x3e0, 0x8bf3, 0x1e29, 0x0, 0x1);
        gbc.writeMem(0x2033, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x24e6);
        EXPECT(gbc.pc(), 0x2035);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0047
        gbc.setState(0xaa39, 0x3a23, 0xf080, 0xbec8, 0xef0a, 0x9389, 0x1, 0x0);
        gbc.writeMem(0xaa39, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3a23);
        EXPECT(gbc.pc(), 0xaa3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xaa39), 0xcb);
        EXPECT(gbc.readMem(0xaa3a), 0x78);
        // CB 78 0048
        gbc.setState(0x2fbb, 0x32c8, 0x5030, 0x68ed, 0x1e19, 0x76b2, 0x1, 0x0);
        gbc.writeMem(0x2fbb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x32c8);
        EXPECT(gbc.pc(), 0x2fbd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0049
        gbc.setState(0xccc5, 0xd801, 0xf670, 0xd8fd, 0x7877, 0xf00b, 0x0, 0x1);
        gbc.writeMem(0xccc5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd801);
        EXPECT(gbc.pc(), 0xccc7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc5), 0xcb);
        EXPECT(gbc.readMem(0xccc6), 0x78);
        // CB 78 004A
        gbc.setState(0xee45, 0xa91f, 0x33e0, 0x43f2, 0x4115, 0x83e0, 0x0, 0x0);
        gbc.writeMem(0xee45, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x15);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xa91f);
        EXPECT(gbc.pc(), 0xee47);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xee45), 0xcb);
        EXPECT(gbc.readMem(0xee46), 0x78);
        // CB 78 004B
        gbc.setState(0xbe3f, 0xd846, 0x6690, 0xd903, 0xd168, 0x8ef0, 0x0, 0x0);
        gbc.writeMem(0xbe3f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xd846);
        EXPECT(gbc.pc(), 0xbe41);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe3f), 0xcb);
        EXPECT(gbc.readMem(0xbe40), 0x78);
        // CB 78 004C
        gbc.setState(0xf24, 0x3aef, 0x9eb0, 0xdedb, 0x7061, 0x5ad6, 0x1, 0x0);
        gbc.writeMem(0xf24, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9e);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x70);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x3aef);
        EXPECT(gbc.pc(), 0xf26);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 004D
        gbc.setState(0xa9c3, 0x29c1, 0x60a0, 0xf4b7, 0xa941, 0x5340, 0x1, 0x1);
        gbc.writeMem(0xa9c3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x29c1);
        EXPECT(gbc.pc(), 0xa9c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa9c3), 0xcb);
        EXPECT(gbc.readMem(0xa9c4), 0x78);
        // CB 78 004E
        gbc.setState(0xe06d, 0x9742, 0x2f30, 0x3a5a, 0x749d, 0x2e81, 0x0, 0x1);
        gbc.writeMem(0xe06d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x9742);
        EXPECT(gbc.pc(), 0xe06f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe06d), 0xcb);
        EXPECT(gbc.readMem(0xe06e), 0x78);
        // CB 78 004F
        gbc.setState(0xb9bf, 0x6bb0, 0xd3d0, 0x1f24, 0x97ec, 0xca15, 0x1, 0x0);
        gbc.writeMem(0xb9bf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x97);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xca);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x6bb0);
        EXPECT(gbc.pc(), 0xb9c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9bf), 0xcb);
        EXPECT(gbc.readMem(0xb9c0), 0x78);
        // CB 78 0051
        gbc.setState(0x1ad4, 0xd898, 0x7e70, 0x11c3, 0x9aaa, 0xb35b, 0x1, 0x1);
        gbc.writeMem(0x1ad4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0xd898);
        EXPECT(gbc.pc(), 0x1ad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0052
        gbc.setState(0xbde6, 0x41e4, 0x82b0, 0x8058, 0x8f5, 0xd93b, 0x1, 0x1);
        gbc.writeMem(0xbde6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xf5);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x41e4);
        EXPECT(gbc.pc(), 0xbde8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbde6), 0xcb);
        EXPECT(gbc.readMem(0xbde7), 0x78);
        // CB 78 0053
        gbc.setState(0x623f, 0xea6f, 0x9590, 0x79c2, 0xeaad, 0x47, 0x0, 0x1);
        gbc.writeMem(0x623f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0xea6f);
        EXPECT(gbc.pc(), 0x6241);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0054
        gbc.setState(0x2ad, 0x5048, 0x6b30, 0x21b3, 0x898d, 0xa264, 0x0, 0x1);
        gbc.writeMem(0x2ad, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0x5048);
        EXPECT(gbc.pc(), 0x2af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0055
        gbc.setState(0xdedf, 0x5a0b, 0x4ba0, 0x7f94, 0xd9ce, 0x46d4, 0x0, 0x1);
        gbc.writeMem(0xdedf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0xd9);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x5a0b);
        EXPECT(gbc.pc(), 0xdee1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdedf), 0xcb);
        EXPECT(gbc.readMem(0xdee0), 0x78);
        // CB 78 0056
        gbc.setState(0x8396, 0x561e, 0x5b60, 0x6f6d, 0x5f6d, 0xe638, 0x0, 0x1);
        gbc.writeMem(0x8396, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x38);
        EXPECT(gbc.sp(), 0x561e);
        EXPECT(gbc.pc(), 0x8398);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8396), 0xcb);
        EXPECT(gbc.readMem(0x8397), 0x78);
        // CB 78 0057
        gbc.setState(0x5c9e, 0x747a, 0x240, 0xd81c, 0x87d7, 0xb53b, 0x1, 0x0);
        gbc.writeMem(0x5c9e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x747a);
        EXPECT(gbc.pc(), 0x5ca0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0058
        gbc.setState(0xbc26, 0x92ac, 0xa9f0, 0xc121, 0xb67a, 0x3f85, 0x1, 0x0);
        gbc.writeMem(0xbc26, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x92ac);
        EXPECT(gbc.pc(), 0xbc28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc26), 0xcb);
        EXPECT(gbc.readMem(0xbc27), 0x78);
        // CB 78 0059
        gbc.setState(0x48b, 0x31c5, 0x10c0, 0x27f4, 0x5bbb, 0xe08f, 0x1, 0x1);
        gbc.writeMem(0x48b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x31c5);
        EXPECT(gbc.pc(), 0x48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 005B
        gbc.setState(0x3633, 0xaf25, 0x96c0, 0xf806, 0xf687, 0x4b42, 0x0, 0x0);
        gbc.writeMem(0x3633, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0xaf25);
        EXPECT(gbc.pc(), 0x3635);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 005C
        gbc.setState(0x128, 0xa8dc, 0x3f10, 0xdc3e, 0x8d3a, 0xc7d1, 0x1, 0x0);
        gbc.writeMem(0x128, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0xa8dc);
        EXPECT(gbc.pc(), 0x12a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 005D
        gbc.setState(0x6d43, 0xe42a, 0xf700, 0xc1a2, 0xb2c0, 0x2d27, 0x1, 0x0);
        gbc.writeMem(0x6d43, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe42a);
        EXPECT(gbc.pc(), 0x6d45);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 005E
        gbc.setState(0xba7e, 0xe86b, 0xc4e0, 0xc567, 0x4a41, 0x5570, 0x0, 0x1);
        gbc.writeMem(0xba7e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xe86b);
        EXPECT(gbc.pc(), 0xba80);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba7e), 0xcb);
        EXPECT(gbc.readMem(0xba7f), 0x78);
        // CB 78 005F
        gbc.setState(0x240c, 0xc648, 0x2b50, 0xfa8c, 0x310a, 0x6f8b, 0x1, 0x0);
        gbc.writeMem(0x240c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0xfa);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xc648);
        EXPECT(gbc.pc(), 0x240e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0060
        gbc.setState(0xa205, 0xddc4, 0x3fe0, 0x617a, 0xe540, 0x368f, 0x0, 0x1);
        gbc.writeMem(0xa205, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0xddc4);
        EXPECT(gbc.pc(), 0xa207);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa205), 0xcb);
        EXPECT(gbc.readMem(0xa206), 0x78);
        // CB 78 0061
        gbc.setState(0x1717, 0xc096, 0x52c0, 0x341b, 0xd87e, 0xd959, 0x0, 0x1);
        gbc.writeMem(0x1717, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xc096);
        EXPECT(gbc.pc(), 0x1719);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0062
        gbc.setState(0xcb4a, 0x4aa, 0x4b70, 0x7e1e, 0xe0a2, 0x1ac1, 0x1, 0x0);
        gbc.writeMem(0xcb4a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x4aa);
        EXPECT(gbc.pc(), 0xcb4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb4a), 0xcb);
        EXPECT(gbc.readMem(0xcb4b), 0x78);
        // CB 78 0063
        gbc.setState(0xd6a1, 0xb3c0, 0x8920, 0x24ca, 0x62d, 0x54cf, 0x1, 0x1);
        gbc.writeMem(0xd6a1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb3c0);
        EXPECT(gbc.pc(), 0xd6a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd6a1), 0xcb);
        EXPECT(gbc.readMem(0xd6a2), 0x78);
        // CB 78 0064
        gbc.setState(0x53d0, 0x7c8, 0x7650, 0xd0cd, 0x7e01, 0x5ebe, 0x1, 0x0);
        gbc.writeMem(0x53d0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x7c8);
        EXPECT(gbc.pc(), 0x53d2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0066
        gbc.setState(0xaa1a, 0x35f2, 0x9550, 0xb01c, 0x48af, 0x907d, 0x0, 0x1);
        gbc.writeMem(0xaa1a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x35f2);
        EXPECT(gbc.pc(), 0xaa1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaa1a), 0xcb);
        EXPECT(gbc.readMem(0xaa1b), 0x78);
        // CB 78 0068
        gbc.setState(0xad16, 0xb980, 0x82a0, 0x376e, 0x66c, 0x7d95, 0x0, 0x0);
        gbc.writeMem(0xad16, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0x6);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xb980);
        EXPECT(gbc.pc(), 0xad18);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xad16), 0xcb);
        EXPECT(gbc.readMem(0xad17), 0x78);
        // CB 78 0069
        gbc.setState(0x673, 0x3c51, 0x39d0, 0xbba5, 0x2984, 0xb34d, 0x1, 0x0);
        gbc.writeMem(0x673, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x3c51);
        EXPECT(gbc.pc(), 0x675);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 006A
        gbc.setState(0x99e9, 0xd0d4, 0x2060, 0x26da, 0x6b22, 0x6189, 0x1, 0x0);
        gbc.writeMem(0x99e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xd0d4);
        EXPECT(gbc.pc(), 0x99eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99e9), 0xcb);
        EXPECT(gbc.readMem(0x99ea), 0x78);
        // CB 78 006B
        gbc.setState(0x6cd4, 0x971d, 0xe3d0, 0x55ae, 0xc98c, 0xfd1e, 0x1, 0x0);
        gbc.writeMem(0x6cd4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x971d);
        EXPECT(gbc.pc(), 0x6cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 006E
        gbc.setState(0xd07f, 0xaa9e, 0xe610, 0x4d53, 0x5a17, 0x552b, 0x0, 0x0);
        gbc.writeMem(0xd07f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xaa9e);
        EXPECT(gbc.pc(), 0xd081);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd07f), 0xcb);
        EXPECT(gbc.readMem(0xd080), 0x78);
        // CB 78 006F
        gbc.setState(0x236e, 0x8001, 0xeac0, 0xf7e7, 0xff58, 0x7424, 0x1, 0x1);
        gbc.writeMem(0x236e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xea);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x8001);
        EXPECT(gbc.pc(), 0x2370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0070
        gbc.setState(0xbaf4, 0x4af1, 0xe20, 0x8468, 0x7228, 0x7bf2, 0x1, 0x0);
        gbc.writeMem(0xbaf4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4af1);
        EXPECT(gbc.pc(), 0xbaf6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbaf4), 0xcb);
        EXPECT(gbc.readMem(0xbaf5), 0x78);
        // CB 78 0071
        gbc.setState(0x3544, 0xb3a4, 0xc1e0, 0xe59c, 0x8b3c, 0x385a, 0x1, 0x0);
        gbc.writeMem(0x3544, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xb3a4);
        EXPECT(gbc.pc(), 0x3546);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0072
        gbc.setState(0xcf5a, 0x8158, 0x7d10, 0x7318, 0x4e00, 0xc00c, 0x0, 0x1);
        gbc.writeMem(0xcf5a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0x8158);
        EXPECT(gbc.pc(), 0xcf5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf5a), 0xcb);
        EXPECT(gbc.readMem(0xcf5b), 0x78);
        // CB 78 0073
        gbc.setState(0x7db5, 0xa8c4, 0x4610, 0xedb, 0xba71, 0x6eee, 0x0, 0x1);
        gbc.writeMem(0x7db5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xa8c4);
        EXPECT(gbc.pc(), 0x7db7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0075
        gbc.setState(0xe4d5, 0x30a8, 0x1690, 0x8070, 0x72a2, 0xba7b, 0x0, 0x0);
        gbc.writeMem(0xe4d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xba);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x30a8);
        EXPECT(gbc.pc(), 0xe4d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe4d5), 0xcb);
        EXPECT(gbc.readMem(0xe4d6), 0x78);
        // CB 78 0077
        gbc.setState(0xe0b8, 0x225f, 0x1120, 0x3f4c, 0x9a93, 0xa603, 0x1, 0x0);
        gbc.writeMem(0xe0b8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x4c);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x225f);
        EXPECT(gbc.pc(), 0xe0ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe0b8), 0xcb);
        EXPECT(gbc.readMem(0xe0b9), 0x78);
        // CB 78 0078
        gbc.setState(0xb56f, 0x95ff, 0xe1b0, 0x9e90, 0x583d, 0x6125, 0x0, 0x0);
        gbc.writeMem(0xb56f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x95ff);
        EXPECT(gbc.pc(), 0xb571);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb56f), 0xcb);
        EXPECT(gbc.readMem(0xb570), 0x78);
        // CB 78 0079
        gbc.setState(0x3866, 0xc0d8, 0xa220, 0x8433, 0x30d4, 0x8983, 0x0, 0x1);
        gbc.writeMem(0x3866, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0xc0d8);
        EXPECT(gbc.pc(), 0x3868);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 007A
        gbc.setState(0x50b3, 0xcbdf, 0x9570, 0xcddb, 0xb96a, 0xa4ae, 0x1, 0x1);
        gbc.writeMem(0x50b3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0xcd);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xcbdf);
        EXPECT(gbc.pc(), 0x50b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 007B
        gbc.setState(0x58f8, 0x1dc4, 0xeda0, 0xd679, 0x966d, 0xe998, 0x1, 0x0);
        gbc.writeMem(0x58f8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xed);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x1dc4);
        EXPECT(gbc.pc(), 0x58fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 007C
        gbc.setState(0xc121, 0x4ea9, 0x55a0, 0xd3de, 0x6c3c, 0x1ffd, 0x1, 0x1);
        gbc.writeMem(0xc121, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x4ea9);
        EXPECT(gbc.pc(), 0xc123);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc121), 0xcb);
        EXPECT(gbc.readMem(0xc122), 0x78);
        // CB 78 007D
        gbc.setState(0xd5d4, 0x8daa, 0x82b0, 0xf7bb, 0x358, 0x4c6, 0x1, 0x0);
        gbc.writeMem(0xd5d4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x8daa);
        EXPECT(gbc.pc(), 0xd5d6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5d4), 0xcb);
        EXPECT(gbc.readMem(0xd5d5), 0x78);
        // CB 78 007E
        gbc.setState(0x8d3c, 0x170d, 0xc110, 0xc94f, 0x6680, 0x8f35, 0x0, 0x1);
        gbc.writeMem(0x8d3c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x170d);
        EXPECT(gbc.pc(), 0x8d3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d3c), 0xcb);
        EXPECT(gbc.readMem(0x8d3d), 0x78);
        // CB 78 007F
        gbc.setState(0x899c, 0xd093, 0x3610, 0x8c5c, 0x8989, 0x750b, 0x1, 0x0);
        gbc.writeMem(0x899c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x5c);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xd093);
        EXPECT(gbc.pc(), 0x899e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x899c), 0xcb);
        EXPECT(gbc.readMem(0x899d), 0x78);
        // CB 78 0080
        gbc.setState(0xc819, 0x72cb, 0xe930, 0x6502, 0x92c1, 0x9b32, 0x1, 0x1);
        gbc.writeMem(0xc819, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x72cb);
        EXPECT(gbc.pc(), 0xc81b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc819), 0xcb);
        EXPECT(gbc.readMem(0xc81a), 0x78);
        // CB 78 0081
        gbc.setState(0xb154, 0x84a0, 0xa740, 0x2968, 0x95be, 0x9a95, 0x1, 0x1);
        gbc.writeMem(0xb154, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x84a0);
        EXPECT(gbc.pc(), 0xb156);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb154), 0xcb);
        EXPECT(gbc.readMem(0xb155), 0x78);
        // CB 78 0082
        gbc.setState(0x3a40, 0x6c05, 0xa0b0, 0x5426, 0xa03, 0x59e9, 0x0, 0x1);
        gbc.writeMem(0x3a40, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa0);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x6c05);
        EXPECT(gbc.pc(), 0x3a42);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0084
        gbc.setState(0x4964, 0x3cf7, 0xc820, 0x7f2b, 0x1ecc, 0xa683, 0x0, 0x1);
        gbc.writeMem(0x4964, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xa6);
        EXPECT(gbc.l(),  0x83);
        EXPECT(gbc.sp(), 0x3cf7);
        EXPECT(gbc.pc(), 0x4966);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0085
        gbc.setState(0xbaad, 0xb3c8, 0x1a50, 0x7ca3, 0xa69d, 0xf46b, 0x0, 0x0);
        gbc.writeMem(0xbaad, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb3c8);
        EXPECT(gbc.pc(), 0xbaaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbaad), 0xcb);
        EXPECT(gbc.readMem(0xbaae), 0x78);
        // CB 78 0086
        gbc.setState(0x4f4, 0xb12b, 0xdbc0, 0x1986, 0xd8d7, 0xbfc, 0x0, 0x0);
        gbc.writeMem(0x4f4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb12b);
        EXPECT(gbc.pc(), 0x4f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0087
        gbc.setState(0xa0ed, 0x4686, 0xd490, 0x10a9, 0x4e42, 0x17db, 0x0, 0x0);
        gbc.writeMem(0xa0ed, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x4686);
        EXPECT(gbc.pc(), 0xa0ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa0ed), 0xcb);
        EXPECT(gbc.readMem(0xa0ee), 0x78);
        // CB 78 0088
        gbc.setState(0x7bb5, 0x7217, 0x7010, 0xe0b2, 0xb8c9, 0x50d1, 0x1, 0x1);
        gbc.writeMem(0x7bb5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x7217);
        EXPECT(gbc.pc(), 0x7bb7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0089
        gbc.setState(0x826e, 0x72c7, 0xad0, 0x3a77, 0x5aca, 0x15cb, 0x1, 0x0);
        gbc.writeMem(0x826e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x72c7);
        EXPECT(gbc.pc(), 0x8270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x826e), 0xcb);
        EXPECT(gbc.readMem(0x826f), 0x78);
        // CB 78 008A
        gbc.setState(0xc33e, 0xda17, 0x620, 0xc9a3, 0xa2d, 0xed21, 0x0, 0x0);
        gbc.writeMem(0xc33e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0xda17);
        EXPECT(gbc.pc(), 0xc340);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc33e), 0xcb);
        EXPECT(gbc.readMem(0xc33f), 0x78);
        // CB 78 008B
        gbc.setState(0x87d9, 0xe59c, 0x45d0, 0x4e, 0x2664, 0xccfe, 0x0, 0x1);
        gbc.writeMem(0x87d9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0xe59c);
        EXPECT(gbc.pc(), 0x87db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87d9), 0xcb);
        EXPECT(gbc.readMem(0x87da), 0x78);
        // CB 78 008C
        gbc.setState(0xbef8, 0x36d, 0x4720, 0xe4fe, 0xecd7, 0x8e22, 0x1, 0x0);
        gbc.writeMem(0xbef8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x36d);
        EXPECT(gbc.pc(), 0xbefa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbef8), 0xcb);
        EXPECT(gbc.readMem(0xbef9), 0x78);
        // CB 78 008D
        gbc.setState(0x9bdf, 0x60f7, 0xa850, 0x805, 0x9ddb, 0x2735, 0x1, 0x0);
        gbc.writeMem(0x9bdf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x60f7);
        EXPECT(gbc.pc(), 0x9be1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9bdf), 0xcb);
        EXPECT(gbc.readMem(0x9be0), 0x78);
        // CB 78 008E
        gbc.setState(0xa68b, 0xb2ba, 0x6d10, 0xb6bb, 0xa0b9, 0x5b8e, 0x1, 0x1);
        gbc.writeMem(0xa68b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xbb);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0xb2ba);
        EXPECT(gbc.pc(), 0xa68d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa68b), 0xcb);
        EXPECT(gbc.readMem(0xa68c), 0x78);
        // CB 78 008F
        gbc.setState(0x88c, 0xe3e9, 0xc610, 0x2026, 0xf41a, 0xef60, 0x0, 0x0);
        gbc.writeMem(0x88c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x20);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xe3e9);
        EXPECT(gbc.pc(), 0x88e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0090
        gbc.setState(0xe733, 0xd6b2, 0xdb40, 0xebae, 0x8707, 0xa3d, 0x1, 0x1);
        gbc.writeMem(0xe733, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xd6b2);
        EXPECT(gbc.pc(), 0xe735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe733), 0xcb);
        EXPECT(gbc.readMem(0xe734), 0x78);
        // CB 78 0092
        gbc.setState(0x3c12, 0x69f8, 0x3a20, 0x7aa0, 0xc516, 0x4934, 0x1, 0x0);
        gbc.writeMem(0x3c12, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x7a);
        EXPECT(gbc.c(),  0xa0);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x69f8);
        EXPECT(gbc.pc(), 0x3c14);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0093
        gbc.setState(0xe59, 0x8392, 0x6210, 0xb5f1, 0xa7db, 0xbb9c, 0x1, 0x0);
        gbc.writeMem(0xe59, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xb5);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8392);
        EXPECT(gbc.pc(), 0xe5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0094
        gbc.setState(0xc6d8, 0x1fb, 0x6340, 0x4ef8, 0x9930, 0xa33b, 0x0, 0x0);
        gbc.writeMem(0xc6d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x1fb);
        EXPECT(gbc.pc(), 0xc6da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6d8), 0xcb);
        EXPECT(gbc.readMem(0xc6d9), 0x78);
        // CB 78 0095
        gbc.setState(0xb742, 0xa0d3, 0xd420, 0x9020, 0x2cdf, 0xefe7, 0x0, 0x0);
        gbc.writeMem(0xb742, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xa0d3);
        EXPECT(gbc.pc(), 0xb744);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb742), 0xcb);
        EXPECT(gbc.readMem(0xb743), 0x78);
        // CB 78 0096
        gbc.setState(0x819c, 0xaafa, 0xf390, 0x4690, 0x55e2, 0x8607, 0x1, 0x0);
        gbc.writeMem(0x819c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf3);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xaafa);
        EXPECT(gbc.pc(), 0x819e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x819c), 0xcb);
        EXPECT(gbc.readMem(0x819d), 0x78);
        // CB 78 0097
        gbc.setState(0x7e89, 0x1105, 0x93b0, 0x145d, 0xf829, 0xfa93, 0x0, 0x0);
        gbc.writeMem(0x7e89, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x1105);
        EXPECT(gbc.pc(), 0x7e8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0098
        gbc.setState(0x7c79, 0xd059, 0x6590, 0xb927, 0x6e01, 0xac0a, 0x0, 0x1);
        gbc.writeMem(0x7c79, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd059);
        EXPECT(gbc.pc(), 0x7c7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0099
        gbc.setState(0xbef4, 0x7fe5, 0xae90, 0x1fde, 0x8bc1, 0x1354, 0x1, 0x0);
        gbc.writeMem(0xbef4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x7fe5);
        EXPECT(gbc.pc(), 0xbef6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbef4), 0xcb);
        EXPECT(gbc.readMem(0xbef5), 0x78);
        // CB 78 009A
        gbc.setState(0xbf6e, 0x41f9, 0x10f0, 0x5e03, 0x35cc, 0xf8b5, 0x0, 0x0);
        gbc.writeMem(0xbf6e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x41f9);
        EXPECT(gbc.pc(), 0xbf70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf6e), 0xcb);
        EXPECT(gbc.readMem(0xbf6f), 0x78);
        // CB 78 009B
        gbc.setState(0x7dcf, 0xf950, 0x7540, 0xaffc, 0xa5da, 0x56ec, 0x0, 0x1);
        gbc.writeMem(0x7dcf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xf950);
        EXPECT(gbc.pc(), 0x7dd1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 009D
        gbc.setState(0xa771, 0x5509, 0x2800, 0x64e6, 0x9a6c, 0x6e7f, 0x0, 0x0);
        gbc.writeMem(0xa771, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x5509);
        EXPECT(gbc.pc(), 0xa773);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa771), 0xcb);
        EXPECT(gbc.readMem(0xa772), 0x78);
        // CB 78 009E
        gbc.setState(0x55fa, 0x33c3, 0x26c0, 0xb0fc, 0xc648, 0xa234, 0x1, 0x0);
        gbc.writeMem(0x55fa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x33c3);
        EXPECT(gbc.pc(), 0x55fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 009F
        gbc.setState(0x55cf, 0x1c76, 0x56f0, 0xbfb3, 0xe6f3, 0x3bd2, 0x1, 0x0);
        gbc.writeMem(0x55cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x1c76);
        EXPECT(gbc.pc(), 0x55d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00A0
        gbc.setState(0x335b, 0x8fa2, 0x42a0, 0x6903, 0xbbdf, 0x551, 0x0, 0x1);
        gbc.writeMem(0x335b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x51);
        EXPECT(gbc.sp(), 0x8fa2);
        EXPECT(gbc.pc(), 0x335d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00A1
        gbc.setState(0x37e9, 0x72b7, 0xa270, 0x9545, 0x159e, 0x75b9, 0x1, 0x0);
        gbc.writeMem(0x37e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x15);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0x72b7);
        EXPECT(gbc.pc(), 0x37eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00A2
        gbc.setState(0x2cc4, 0x5eb0, 0x36a0, 0x63f7, 0x6e5a, 0xe889, 0x1, 0x1);
        gbc.writeMem(0x2cc4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x36);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5eb0);
        EXPECT(gbc.pc(), 0x2cc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00A3
        gbc.setState(0x43d5, 0x5ba3, 0x89b0, 0xeb19, 0xb6fa, 0xbc5f, 0x0, 0x1);
        gbc.writeMem(0x43d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0x5ba3);
        EXPECT(gbc.pc(), 0x43d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00A4
        gbc.setState(0x81c0, 0xf950, 0x4770, 0x1a5, 0xb9e5, 0xaecc, 0x0, 0x0);
        gbc.writeMem(0x81c0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0xb9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xf950);
        EXPECT(gbc.pc(), 0x81c2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81c0), 0xcb);
        EXPECT(gbc.readMem(0x81c1), 0x78);
        // CB 78 00A7
        gbc.setState(0x2128, 0x7383, 0x5600, 0x9da7, 0x855f, 0x795b, 0x1, 0x1);
        gbc.writeMem(0x2128, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x5b);
        EXPECT(gbc.sp(), 0x7383);
        EXPECT(gbc.pc(), 0x212a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00A8
        gbc.setState(0x6407, 0xedd4, 0x9330, 0x7e2d, 0xe390, 0x3688, 0x1, 0x0);
        gbc.writeMem(0x6407, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xedd4);
        EXPECT(gbc.pc(), 0x6409);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00A9
        gbc.setState(0xe23d, 0x2943, 0x7d00, 0x6639, 0x76ba, 0x5fc0, 0x0, 0x1);
        gbc.writeMem(0xe23d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5f);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x2943);
        EXPECT(gbc.pc(), 0xe23f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe23d), 0xcb);
        EXPECT(gbc.readMem(0xe23e), 0x78);
        // CB 78 00AA
        gbc.setState(0x516, 0xc9b8, 0x2b60, 0x4f1f, 0xd0da, 0xf4d7, 0x1, 0x1);
        gbc.writeMem(0x516, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x4f);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0xc9b8);
        EXPECT(gbc.pc(), 0x518);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00AB
        gbc.setState(0x434d, 0x6d4, 0xa220, 0xd44f, 0xc116, 0x22a5, 0x1, 0x0);
        gbc.writeMem(0x434d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x6d4);
        EXPECT(gbc.pc(), 0x434f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00AC
        gbc.setState(0xda79, 0x1588, 0xd630, 0xe891, 0x3c2c, 0x26b2, 0x0, 0x0);
        gbc.writeMem(0xda79, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x1588);
        EXPECT(gbc.pc(), 0xda7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xda79), 0xcb);
        EXPECT(gbc.readMem(0xda7a), 0x78);
        // CB 78 00AD
        gbc.setState(0x7a63, 0x11f1, 0xc3c0, 0x73e5, 0xa420, 0xe254, 0x1, 0x0);
        gbc.writeMem(0x7a63, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x11f1);
        EXPECT(gbc.pc(), 0x7a65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00AE
        gbc.setState(0xb947, 0xd241, 0x3bb0, 0xc7d0, 0x5ef0, 0xe91a, 0x0, 0x0);
        gbc.writeMem(0xb947, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xd241);
        EXPECT(gbc.pc(), 0xb949);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb947), 0xcb);
        EXPECT(gbc.readMem(0xb948), 0x78);
        // CB 78 00AF
        gbc.setState(0xdc01, 0xa097, 0x64d0, 0xd179, 0x838a, 0x953d, 0x1, 0x1);
        gbc.writeMem(0xdc01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0xa097);
        EXPECT(gbc.pc(), 0xdc03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdc01), 0xcb);
        EXPECT(gbc.readMem(0xdc02), 0x78);
        // CB 78 00B0
        gbc.setState(0x5d96, 0x6656, 0x9cd0, 0x4e6d, 0xe683, 0x101a, 0x1, 0x1);
        gbc.writeMem(0x5d96, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6656);
        EXPECT(gbc.pc(), 0x5d98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00B1
        gbc.setState(0x88f7, 0xce09, 0x3ce0, 0xb67d, 0xc5c6, 0x4a52, 0x1, 0x1);
        gbc.writeMem(0x88f7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xce09);
        EXPECT(gbc.pc(), 0x88f9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88f7), 0xcb);
        EXPECT(gbc.readMem(0x88f8), 0x78);
        // CB 78 00B2
        gbc.setState(0x3524, 0xc3c8, 0xdd0, 0x9d97, 0x2ac2, 0xb648, 0x0, 0x1);
        gbc.writeMem(0x3524, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0xc3c8);
        EXPECT(gbc.pc(), 0x3526);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00B3
        gbc.setState(0xc669, 0x7745, 0xb6c0, 0x50f7, 0x59cc, 0x37c0, 0x0, 0x0);
        gbc.writeMem(0xc669, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0xf7);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x37);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x7745);
        EXPECT(gbc.pc(), 0xc66b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc669), 0xcb);
        EXPECT(gbc.readMem(0xc66a), 0x78);
        // CB 78 00B4
        gbc.setState(0x87a8, 0xf9d3, 0xb470, 0xcf67, 0x17fe, 0x79df, 0x0, 0x0);
        gbc.writeMem(0x87a8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x67);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xf9d3);
        EXPECT(gbc.pc(), 0x87aa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87a8), 0xcb);
        EXPECT(gbc.readMem(0x87a9), 0x78);
        // CB 78 00B5
        gbc.setState(0x907d, 0xa055, 0x2f20, 0xccc3, 0x2a7d, 0x9576, 0x0, 0x0);
        gbc.writeMem(0x907d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xa055);
        EXPECT(gbc.pc(), 0x907f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x907d), 0xcb);
        EXPECT(gbc.readMem(0x907e), 0x78);
        // CB 78 00B6
        gbc.setState(0xbe1e, 0x484e, 0xd1b0, 0xc5f, 0x3576, 0x3301, 0x0, 0x1);
        gbc.writeMem(0xbe1e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x76);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x484e);
        EXPECT(gbc.pc(), 0xbe20);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe1e), 0xcb);
        EXPECT(gbc.readMem(0xbe1f), 0x78);
        // CB 78 00B7
        gbc.setState(0xc87a, 0x6ed8, 0xf740, 0xc7b, 0x6f24, 0x317e, 0x0, 0x1);
        gbc.writeMem(0xc87a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x6ed8);
        EXPECT(gbc.pc(), 0xc87c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc87a), 0xcb);
        EXPECT(gbc.readMem(0xc87b), 0x78);
        // CB 78 00B8
        gbc.setState(0x3a5d, 0xa12c, 0x2100, 0x9e8e, 0xe8c5, 0x5329, 0x1, 0x1);
        gbc.writeMem(0x3a5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xa12c);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00B9
        gbc.setState(0x9e30, 0x330a, 0xef0, 0x6596, 0x1ca5, 0x2fbd, 0x1, 0x1);
        gbc.writeMem(0x9e30, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x330a);
        EXPECT(gbc.pc(), 0x9e32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e30), 0xcb);
        EXPECT(gbc.readMem(0x9e31), 0x78);
        // CB 78 00BA
        gbc.setState(0x3c80, 0xfa0e, 0x12e0, 0x17f4, 0xdaa2, 0xacec, 0x1, 0x1);
        gbc.writeMem(0x3c80, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xfa0e);
        EXPECT(gbc.pc(), 0x3c82);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00BB
        gbc.setState(0x5d47, 0x511c, 0x86d0, 0x546d, 0xfad, 0xdd6b, 0x1, 0x0);
        gbc.writeMem(0x5d47, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0x511c);
        EXPECT(gbc.pc(), 0x5d49);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00BC
        gbc.setState(0xbb1a, 0xb1a6, 0x7400, 0xebf5, 0xc3c9, 0x9fa0, 0x0, 0x0);
        gbc.writeMem(0xbb1a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xb1a6);
        EXPECT(gbc.pc(), 0xbb1c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb1a), 0xcb);
        EXPECT(gbc.readMem(0xbb1b), 0x78);
        // CB 78 00BD
        gbc.setState(0x8dfb, 0xb371, 0x14e0, 0x8982, 0xa23a, 0x893f, 0x0, 0x1);
        gbc.writeMem(0x8dfb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xb371);
        EXPECT(gbc.pc(), 0x8dfd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dfb), 0xcb);
        EXPECT(gbc.readMem(0x8dfc), 0x78);
        // CB 78 00BE
        gbc.setState(0x25bc, 0xeceb, 0xe9f0, 0xe624, 0x45c, 0x547a, 0x1, 0x0);
        gbc.writeMem(0x25bc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xeceb);
        EXPECT(gbc.pc(), 0x25be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00BF
        gbc.setState(0x58fe, 0x37a0, 0x4250, 0x248d, 0x96e5, 0x9901, 0x1, 0x0);
        gbc.writeMem(0x58fe, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x37a0);
        EXPECT(gbc.pc(), 0x5900);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00C0
        gbc.setState(0xcfc7, 0x4d05, 0xe000, 0x7549, 0x4ea2, 0x6e2, 0x0, 0x0);
        gbc.writeMem(0xcfc7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x4d05);
        EXPECT(gbc.pc(), 0xcfc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc7), 0xcb);
        EXPECT(gbc.readMem(0xcfc8), 0x78);
        // CB 78 00C1
        gbc.setState(0x8c63, 0x9b67, 0xd6e0, 0xb6d7, 0x3a68, 0x644, 0x1, 0x1);
        gbc.writeMem(0x8c63, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x9b67);
        EXPECT(gbc.pc(), 0x8c65);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c63), 0xcb);
        EXPECT(gbc.readMem(0x8c64), 0x78);
        // CB 78 00C2
        gbc.setState(0x71e6, 0x72bc, 0x5880, 0xfb96, 0x9ea8, 0xcb80, 0x1, 0x1);
        gbc.writeMem(0x71e6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x72bc);
        EXPECT(gbc.pc(), 0x71e8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00C3
        gbc.setState(0xda20, 0xb5a6, 0xe020, 0x3486, 0x298a, 0xdbd, 0x0, 0x0);
        gbc.writeMem(0xda20, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0xb5a6);
        EXPECT(gbc.pc(), 0xda22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda20), 0xcb);
        EXPECT(gbc.readMem(0xda21), 0x78);
        // CB 78 00C4
        gbc.setState(0x693a, 0xf411, 0x8130, 0xbd36, 0x4777, 0x7d7b, 0x0, 0x1);
        gbc.writeMem(0x693a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xf411);
        EXPECT(gbc.pc(), 0x693c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00C5
        gbc.setState(0x9551, 0xfa2a, 0x8ed0, 0xf207, 0x9a4b, 0x8daf, 0x1, 0x0);
        gbc.writeMem(0x9551, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xfa2a);
        EXPECT(gbc.pc(), 0x9553);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9551), 0xcb);
        EXPECT(gbc.readMem(0x9552), 0x78);
        // CB 78 00C6
        gbc.setState(0x3c0f, 0x80fb, 0xc4c0, 0xed0, 0xc236, 0xaf95, 0x0, 0x1);
        gbc.writeMem(0x3c0f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x80fb);
        EXPECT(gbc.pc(), 0x3c11);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00C7
        gbc.setState(0x6042, 0x4d8f, 0x6f20, 0x5704, 0xe559, 0x9698, 0x0, 0x1);
        gbc.writeMem(0x6042, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x96);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x4d8f);
        EXPECT(gbc.pc(), 0x6044);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00C8
        gbc.setState(0x6682, 0xba8b, 0x1b70, 0x428f, 0x6586, 0xcc5f, 0x1, 0x0);
        gbc.writeMem(0x6682, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xba8b);
        EXPECT(gbc.pc(), 0x6684);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00C9
        gbc.setState(0x46e2, 0xf642, 0xf790, 0x9c4a, 0xf69a, 0x4957, 0x1, 0x0);
        gbc.writeMem(0x46e2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xf642);
        EXPECT(gbc.pc(), 0x46e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00CA
        gbc.setState(0xcce, 0xbb4d, 0xb3b0, 0x602, 0xb27d, 0xdd12, 0x0, 0x0);
        gbc.writeMem(0xcce, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0xbb4d);
        EXPECT(gbc.pc(), 0xcd0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00CB
        gbc.setState(0x1129, 0x4f40, 0xaa80, 0x93de, 0x3652, 0x919f, 0x1, 0x0);
        gbc.writeMem(0x1129, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x4f40);
        EXPECT(gbc.pc(), 0x112b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00CC
        gbc.setState(0x1733, 0x16a4, 0x7430, 0xaf56, 0x76f4, 0x21cd, 0x0, 0x1);
        gbc.writeMem(0x1733, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x16a4);
        EXPECT(gbc.pc(), 0x1735);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00CD
        gbc.setState(0x45c9, 0xdfb6, 0x9980, 0xc720, 0xca1b, 0x5532, 0x1, 0x1);
        gbc.writeMem(0x45c9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xdfb6);
        EXPECT(gbc.pc(), 0x45cb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00CE
        gbc.setState(0xb41a, 0xb243, 0xd460, 0xa99b, 0xdad7, 0x1c57, 0x1, 0x0);
        gbc.writeMem(0xb41a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0xb243);
        EXPECT(gbc.pc(), 0xb41c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb41a), 0xcb);
        EXPECT(gbc.readMem(0xb41b), 0x78);
        // CB 78 00CF
        gbc.setState(0x1922, 0x88cb, 0x64b0, 0x97a6, 0xdab0, 0x5d77, 0x1, 0x1);
        gbc.writeMem(0x1922, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xda);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x88cb);
        EXPECT(gbc.pc(), 0x1924);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00D0
        gbc.setState(0xbe5b, 0x30b6, 0x4c00, 0xef77, 0xf04b, 0x4ff4, 0x1, 0x0);
        gbc.writeMem(0xbe5b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x30b6);
        EXPECT(gbc.pc(), 0xbe5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbe5b), 0xcb);
        EXPECT(gbc.readMem(0xbe5c), 0x78);
        // CB 78 00D1
        gbc.setState(0x77e9, 0xfd1e, 0xe5e0, 0x185a, 0xfc2b, 0x353, 0x0, 0x0);
        gbc.writeMem(0x77e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfd1e);
        EXPECT(gbc.pc(), 0x77eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00D2
        gbc.setState(0x90c5, 0xa371, 0x2580, 0x47bf, 0x4057, 0xceb4, 0x1, 0x1);
        gbc.writeMem(0x90c5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbf);
        EXPECT(gbc.d(),  0x40);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0xa371);
        EXPECT(gbc.pc(), 0x90c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90c5), 0xcb);
        EXPECT(gbc.readMem(0x90c6), 0x78);
        // CB 78 00D3
        gbc.setState(0x51cf, 0x450e, 0x6180, 0xe1bd, 0x833c, 0xe317, 0x1, 0x1);
        gbc.writeMem(0x51cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x450e);
        EXPECT(gbc.pc(), 0x51d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00D4
        gbc.setState(0x3928, 0xa09b, 0xcaa0, 0xd785, 0xd3b6, 0x6304, 0x0, 0x0);
        gbc.writeMem(0x3928, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xa09b);
        EXPECT(gbc.pc(), 0x392a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00D5
        gbc.setState(0x2637, 0x6f91, 0xcbb0, 0x3f82, 0x9466, 0xbfb2, 0x0, 0x1);
        gbc.writeMem(0x2637, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x94);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x6f91);
        EXPECT(gbc.pc(), 0x2639);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00D6
        gbc.setState(0xe891, 0x8d30, 0x50f0, 0x88e1, 0x22d0, 0x899c, 0x0, 0x0);
        gbc.writeMem(0xe891, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x8d30);
        EXPECT(gbc.pc(), 0xe893);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe891), 0xcb);
        EXPECT(gbc.readMem(0xe892), 0x78);
        // CB 78 00D7
        gbc.setState(0x1344, 0x922d, 0x4b80, 0x22e8, 0x32d5, 0x2820, 0x1, 0x0);
        gbc.writeMem(0x1344, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x22);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x32);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x922d);
        EXPECT(gbc.pc(), 0x1346);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00D8
        gbc.setState(0xde64, 0x97b, 0x5220, 0x2b52, 0x98f7, 0xaa62, 0x0, 0x0);
        gbc.writeMem(0xde64, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x97b);
        EXPECT(gbc.pc(), 0xde66);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde64), 0xcb);
        EXPECT(gbc.readMem(0xde65), 0x78);
        // CB 78 00D9
        gbc.setState(0x8425, 0x8d68, 0x3490, 0xe40d, 0xed10, 0xb9f, 0x0, 0x1);
        gbc.writeMem(0x8425, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8d68);
        EXPECT(gbc.pc(), 0x8427);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8425), 0xcb);
        EXPECT(gbc.readMem(0x8426), 0x78);
        // CB 78 00DA
        gbc.setState(0x8b1d, 0xb927, 0x1aa0, 0xc446, 0xb2a3, 0x9189, 0x1, 0x1);
        gbc.writeMem(0x8b1d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xb927);
        EXPECT(gbc.pc(), 0x8b1f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8b1d), 0xcb);
        EXPECT(gbc.readMem(0x8b1e), 0x78);
        // CB 78 00DB
        gbc.setState(0xa058, 0x38d0, 0xf740, 0x886f, 0x56a9, 0xc79c, 0x1, 0x0);
        gbc.writeMem(0xa058, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x38d0);
        EXPECT(gbc.pc(), 0xa05a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa058), 0xcb);
        EXPECT(gbc.readMem(0xa059), 0x78);
        // CB 78 00DC
        gbc.setState(0xd800, 0x4558, 0x83c0, 0x64dd, 0xdb70, 0x2c73, 0x1, 0x0);
        gbc.writeMem(0xd800, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x4558);
        EXPECT(gbc.pc(), 0xd802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd800), 0xcb);
        EXPECT(gbc.readMem(0xd801), 0x78);
        // CB 78 00DD
        gbc.setState(0xd103, 0x7001, 0x4ba0, 0x3411, 0x1351, 0x8f45, 0x1, 0x0);
        gbc.writeMem(0xd103, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7001);
        EXPECT(gbc.pc(), 0xd105);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd103), 0xcb);
        EXPECT(gbc.readMem(0xd104), 0x78);
        // CB 78 00DE
        gbc.setState(0xa0c3, 0x9c70, 0x49a0, 0x79ad, 0xe7f7, 0xf73, 0x0, 0x1);
        gbc.writeMem(0xa0c3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x9c70);
        EXPECT(gbc.pc(), 0xa0c5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c3), 0xcb);
        EXPECT(gbc.readMem(0xa0c4), 0x78);
        // CB 78 00DF
        gbc.setState(0x43ee, 0x7ae0, 0x1e90, 0xb704, 0x24bd, 0x82a, 0x1, 0x0);
        gbc.writeMem(0x43ee, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x7ae0);
        EXPECT(gbc.pc(), 0x43f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00E0
        gbc.setState(0x846f, 0x1df0, 0x9810, 0x921c, 0xf7f1, 0xbb09, 0x0, 0x0);
        gbc.writeMem(0x846f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x1df0);
        EXPECT(gbc.pc(), 0x8471);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x846f), 0xcb);
        EXPECT(gbc.readMem(0x8470), 0x78);
        // CB 78 00E1
        gbc.setState(0x4ec7, 0x456, 0xe970, 0xf6e2, 0xf92e, 0x99f1, 0x0, 0x0);
        gbc.writeMem(0x4ec7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x456);
        EXPECT(gbc.pc(), 0x4ec9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00E2
        gbc.setState(0x480, 0x940d, 0x230, 0x5c91, 0x529f, 0xf5eb, 0x1, 0x1);
        gbc.writeMem(0x480, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5c);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x940d);
        EXPECT(gbc.pc(), 0x482);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00E3
        gbc.setState(0x5cdc, 0xed8c, 0x1660, 0x6896, 0xdce8, 0x5606, 0x1, 0x1);
        gbc.writeMem(0x5cdc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0xed8c);
        EXPECT(gbc.pc(), 0x5cde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00E4
        gbc.setState(0x3a29, 0x7a9d, 0x2ec0, 0x17b1, 0x1813, 0x55e7, 0x1, 0x1);
        gbc.writeMem(0x3a29, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x7a9d);
        EXPECT(gbc.pc(), 0x3a2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00E5
        gbc.setState(0x2ae4, 0x6d2f, 0x8bc0, 0xa20b, 0x727e, 0x55a1, 0x1, 0x0);
        gbc.writeMem(0x2ae4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0x6d2f);
        EXPECT(gbc.pc(), 0x2ae6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00E6
        gbc.setState(0xddb2, 0xf079, 0xd080, 0x2570, 0xfd52, 0xd409, 0x0, 0x1);
        gbc.writeMem(0xddb2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0xf079);
        EXPECT(gbc.pc(), 0xddb4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xddb2), 0xcb);
        EXPECT(gbc.readMem(0xddb3), 0x78);
        // CB 78 00E7
        gbc.setState(0x2067, 0xc227, 0x1240, 0x97e9, 0xa79b, 0x8dee, 0x1, 0x0);
        gbc.writeMem(0x2067, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xe9);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0xc227);
        EXPECT(gbc.pc(), 0x2069);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00E8
        gbc.setState(0xb2d3, 0xe421, 0x7040, 0x2f45, 0xaec4, 0x2fe3, 0x1, 0x0);
        gbc.writeMem(0xb2d3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xe3);
        EXPECT(gbc.sp(), 0xe421);
        EXPECT(gbc.pc(), 0xb2d5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb2d3), 0xcb);
        EXPECT(gbc.readMem(0xb2d4), 0x78);
        // CB 78 00E9
        gbc.setState(0xd6a3, 0x6cbd, 0x40b0, 0xe3eb, 0x80c4, 0xb7ab, 0x0, 0x1);
        gbc.writeMem(0xd6a3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x80);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x6cbd);
        EXPECT(gbc.pc(), 0xd6a5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd6a3), 0xcb);
        EXPECT(gbc.readMem(0xd6a4), 0x78);
        // CB 78 00EA
        gbc.setState(0xd224, 0x50fb, 0xa660, 0xb1d8, 0xa03c, 0x7bfd, 0x0, 0x0);
        gbc.writeMem(0xd224, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0x50fb);
        EXPECT(gbc.pc(), 0xd226);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd224), 0xcb);
        EXPECT(gbc.readMem(0xd225), 0x78);
        // CB 78 00EB
        gbc.setState(0x9ef2, 0x6065, 0xf660, 0x1928, 0xf02c, 0x581a, 0x1, 0x0);
        gbc.writeMem(0x9ef2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2c);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x6065);
        EXPECT(gbc.pc(), 0x9ef4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ef2), 0xcb);
        EXPECT(gbc.readMem(0x9ef3), 0x78);
        // CB 78 00EC
        gbc.setState(0xd3f6, 0x4494, 0x60b0, 0x5b9d, 0xf54e, 0x8d0a, 0x0, 0x0);
        gbc.writeMem(0xd3f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf5);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x4494);
        EXPECT(gbc.pc(), 0xd3f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd3f6), 0xcb);
        EXPECT(gbc.readMem(0xd3f7), 0x78);
        // CB 78 00ED
        gbc.setState(0x88ec, 0x2364, 0x9960, 0xf0e5, 0xeb05, 0x4b1d, 0x0, 0x0);
        gbc.writeMem(0x88ec, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x2364);
        EXPECT(gbc.pc(), 0x88ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x88ec), 0xcb);
        EXPECT(gbc.readMem(0x88ed), 0x78);
        // CB 78 00EF
        gbc.setState(0x7a04, 0xa102, 0xafc0, 0xdcae, 0xec38, 0xf85d, 0x1, 0x0);
        gbc.writeMem(0x7a04, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xae);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa102);
        EXPECT(gbc.pc(), 0x7a06);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00F1
        gbc.setState(0x11fd, 0x302b, 0xcae0, 0xafe, 0x1ad2, 0x562f, 0x0, 0x1);
        gbc.writeMem(0x11fd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x302b);
        EXPECT(gbc.pc(), 0x11ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00F2
        gbc.setState(0xbf6e, 0x20ea, 0x5460, 0x1289, 0x1c12, 0x7ade, 0x0, 0x0);
        gbc.writeMem(0xbf6e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x54);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x20ea);
        EXPECT(gbc.pc(), 0xbf70);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf6e), 0xcb);
        EXPECT(gbc.readMem(0xbf6f), 0x78);
        // CB 78 00F3
        gbc.setState(0x93cf, 0xb5fa, 0xae30, 0xc05b, 0x2e97, 0x2bbe, 0x0, 0x0);
        gbc.writeMem(0x93cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x2b);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0xb5fa);
        EXPECT(gbc.pc(), 0x93d1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x93cf), 0xcb);
        EXPECT(gbc.readMem(0x93d0), 0x78);
        // CB 78 00F4
        gbc.setState(0xa67d, 0xc6e6, 0xf550, 0xf6fa, 0x508c, 0x9402, 0x1, 0x1);
        gbc.writeMem(0xa67d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xc6e6);
        EXPECT(gbc.pc(), 0xa67f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa67d), 0xcb);
        EXPECT(gbc.readMem(0xa67e), 0x78);
        // CB 78 00F5
        gbc.setState(0x6c88, 0x88b7, 0xb2a0, 0x2af4, 0xa15c, 0x13b7, 0x1, 0x1);
        gbc.writeMem(0x6c88, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x88b7);
        EXPECT(gbc.pc(), 0x6c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00F6
        gbc.setState(0x1705, 0xbca9, 0xd440, 0xb661, 0x92d7, 0x634, 0x1, 0x1);
        gbc.writeMem(0x1705, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x6);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xbca9);
        EXPECT(gbc.pc(), 0x1707);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00F7
        gbc.setState(0xe88d, 0xf3c3, 0x5d70, 0xb174, 0xbca0, 0x3b1d, 0x0, 0x1);
        gbc.writeMem(0xe88d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xf3c3);
        EXPECT(gbc.pc(), 0xe88f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe88d), 0xcb);
        EXPECT(gbc.readMem(0xe88e), 0x78);
        // CB 78 00F8
        gbc.setState(0xae1f, 0x4bcf, 0xcf60, 0x2922, 0xff12, 0x4a58, 0x0, 0x0);
        gbc.writeMem(0xae1f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x4bcf);
        EXPECT(gbc.pc(), 0xae21);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae1f), 0xcb);
        EXPECT(gbc.readMem(0xae20), 0x78);
        // CB 78 00F9
        gbc.setState(0x7017, 0xc4f2, 0x3900, 0x975e, 0x5d0b, 0x6fe2, 0x1, 0x0);
        gbc.writeMem(0x7017, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xb);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xc4f2);
        EXPECT(gbc.pc(), 0x7019);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00FA
        gbc.setState(0x8e73, 0x6427, 0xfbc0, 0xe4be, 0x3aa3, 0x4bba, 0x1, 0x0);
        gbc.writeMem(0x8e73, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0x3a);
        EXPECT(gbc.e(),  0xa3);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x6427);
        EXPECT(gbc.pc(), 0x8e75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e73), 0xcb);
        EXPECT(gbc.readMem(0x8e74), 0x78);
        // CB 78 00FB
        gbc.setState(0x716, 0x6a02, 0x7890, 0x641f, 0xbdc1, 0x819, 0x1, 0x1);
        gbc.writeMem(0x716, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x6a02);
        EXPECT(gbc.pc(), 0x718);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00FC
        gbc.setState(0xdc34, 0xf967, 0xe500, 0x7984, 0x8d45, 0x91e6, 0x1, 0x1);
        gbc.writeMem(0xdc34, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xf967);
        EXPECT(gbc.pc(), 0xdc36);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc34), 0xcb);
        EXPECT(gbc.readMem(0xdc35), 0x78);
        // CB 78 00FD
        gbc.setState(0x508e, 0x5709, 0x7b00, 0x3f1a, 0x12c0, 0x4cdf, 0x0, 0x0);
        gbc.writeMem(0x508e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0xc0);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x5709);
        EXPECT(gbc.pc(), 0x5090);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 00FE
        gbc.setState(0x6da4, 0x1ef7, 0x13d0, 0x23f2, 0xd57f, 0xc678, 0x1, 0x0);
        gbc.writeMem(0x6da4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xf2);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x1ef7);
        EXPECT(gbc.pc(), 0x6da6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 00FF
        gbc.setState(0x7b39, 0x6c1c, 0x4320, 0x3211, 0xb6f2, 0x589f, 0x1, 0x1);
        gbc.writeMem(0x7b39, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x6c1c);
        EXPECT(gbc.pc(), 0x7b3b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0100
        gbc.setState(0x722f, 0x3672, 0x50c0, 0xbae1, 0xbf8b, 0x13b1, 0x0, 0x1);
        gbc.writeMem(0x722f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xbf);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x3672);
        EXPECT(gbc.pc(), 0x7231);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0101
        gbc.setState(0x7b02, 0x6f58, 0x4310, 0x882c, 0xd3b1, 0x4c49, 0x0, 0x0);
        gbc.writeMem(0x7b02, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x6f58);
        EXPECT(gbc.pc(), 0x7b04);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0102
        gbc.setState(0xe642, 0xcaab, 0x7e30, 0xd3b6, 0xdcca, 0xfcf, 0x0, 0x0);
        gbc.writeMem(0xe642, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0xb6);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xcaab);
        EXPECT(gbc.pc(), 0xe644);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe642), 0xcb);
        EXPECT(gbc.readMem(0xe643), 0x78);
        // CB 78 0103
        gbc.setState(0x62c8, 0xd2a9, 0x3110, 0xb143, 0xab24, 0x7fed, 0x0, 0x0);
        gbc.writeMem(0x62c8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xd2a9);
        EXPECT(gbc.pc(), 0x62ca);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0104
        gbc.setState(0xc855, 0x49de, 0x1690, 0x1613, 0xf02d, 0x184d, 0x1, 0x1);
        gbc.writeMem(0xc855, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x49de);
        EXPECT(gbc.pc(), 0xc857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc855), 0xcb);
        EXPECT(gbc.readMem(0xc856), 0x78);
        // CB 78 0106
        gbc.setState(0x89e7, 0xc4b5, 0xfc40, 0x34af, 0x22ec, 0xf937, 0x0, 0x1);
        gbc.writeMem(0x89e7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0xc4b5);
        EXPECT(gbc.pc(), 0x89e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x89e7), 0xcb);
        EXPECT(gbc.readMem(0x89e8), 0x78);
        // CB 78 0107
        gbc.setState(0x42c3, 0x7081, 0x1740, 0xf2c8, 0x6062, 0x9c1, 0x1, 0x0);
        gbc.writeMem(0x42c3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x7081);
        EXPECT(gbc.pc(), 0x42c5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0108
        gbc.setState(0x7758, 0xde9d, 0x60c0, 0xbe5, 0x6161, 0x44a7, 0x0, 0x0);
        gbc.writeMem(0x7758, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xde9d);
        EXPECT(gbc.pc(), 0x775a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0109
        gbc.setState(0x7498, 0x971e, 0x890, 0x5956, 0x7e84, 0x1c21, 0x0, 0x1);
        gbc.writeMem(0x7498, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x21);
        EXPECT(gbc.sp(), 0x971e);
        EXPECT(gbc.pc(), 0x749a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 010A
        gbc.setState(0x863b, 0xfdcd, 0x25f0, 0xd56a, 0xfe6a, 0xd6df, 0x0, 0x1);
        gbc.writeMem(0x863b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xd6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xfdcd);
        EXPECT(gbc.pc(), 0x863d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x863b), 0xcb);
        EXPECT(gbc.readMem(0x863c), 0x78);
        // CB 78 010B
        gbc.setState(0x9ced, 0x49de, 0x2840, 0xfd29, 0x4e81, 0xb10, 0x0, 0x0);
        gbc.writeMem(0x9ced, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x49de);
        EXPECT(gbc.pc(), 0x9cef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ced), 0xcb);
        EXPECT(gbc.readMem(0x9cee), 0x78);
        // CB 78 010C
        gbc.setState(0x43f9, 0x9b67, 0x4a0, 0x355d, 0xc3a6, 0xc774, 0x1, 0x1);
        gbc.writeMem(0x43f9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x9b67);
        EXPECT(gbc.pc(), 0x43fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 010D
        gbc.setState(0x59d2, 0x7e, 0x8b80, 0x4c2e, 0xa663, 0xd9f7, 0x1, 0x0);
        gbc.writeMem(0x59d2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x7e);
        EXPECT(gbc.pc(), 0x59d4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 010E
        gbc.setState(0x5a38, 0xcda4, 0x5e90, 0xf27c, 0x1395, 0x517d, 0x1, 0x1);
        gbc.writeMem(0x5a38, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0xcda4);
        EXPECT(gbc.pc(), 0x5a3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 010F
        gbc.setState(0x46aa, 0x8f91, 0x5210, 0xe9e7, 0xfff0, 0xb8da, 0x0, 0x0);
        gbc.writeMem(0x46aa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8f91);
        EXPECT(gbc.pc(), 0x46ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0110
        gbc.setState(0xb44e, 0xc72e, 0x8650, 0xbe3b, 0x12e, 0x6d7f, 0x0, 0x1);
        gbc.writeMem(0xb44e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xc72e);
        EXPECT(gbc.pc(), 0xb450);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb44e), 0xcb);
        EXPECT(gbc.readMem(0xb44f), 0x78);
        // CB 78 0111
        gbc.setState(0x30dc, 0xe4a8, 0x3370, 0x181b, 0xc9af, 0xe64e, 0x1, 0x1);
        gbc.writeMem(0x30dc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x18);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0xc9);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xe4a8);
        EXPECT(gbc.pc(), 0x30de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0112
        gbc.setState(0xe932, 0xdb2, 0xadb0, 0x1ed8, 0x9301, 0xeced, 0x0, 0x0);
        gbc.writeMem(0xe932, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xdb2);
        EXPECT(gbc.pc(), 0xe934);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe932), 0xcb);
        EXPECT(gbc.readMem(0xe933), 0x78);
        // CB 78 0113
        gbc.setState(0x1030, 0xa5b5, 0x1890, 0x1fbd, 0x841d, 0x885d, 0x1, 0x0);
        gbc.writeMem(0x1030, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x1f);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xa5b5);
        EXPECT(gbc.pc(), 0x1032);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0114
        gbc.setState(0x899b, 0xa79f, 0x6b80, 0x26a5, 0x34c8, 0x7ddf, 0x0, 0x1);
        gbc.writeMem(0x899b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x34);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa79f);
        EXPECT(gbc.pc(), 0x899d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x899b), 0xcb);
        EXPECT(gbc.readMem(0x899c), 0x78);
        // CB 78 0115
        gbc.setState(0x1a95, 0x7e70, 0x4d40, 0x68eb, 0x9b7e, 0x7fd7, 0x1, 0x1);
        gbc.writeMem(0x1a95, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0x9b);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x7e70);
        EXPECT(gbc.pc(), 0x1a97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0116
        gbc.setState(0x519b, 0xe254, 0x760, 0x87fe, 0xe90a, 0xb492, 0x0, 0x1);
        gbc.writeMem(0x519b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xe254);
        EXPECT(gbc.pc(), 0x519d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0118
        gbc.setState(0x2034, 0x8e6, 0x30a0, 0x8b1, 0x866c, 0x91b8, 0x1, 0x1);
        gbc.writeMem(0x2034, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x8e6);
        EXPECT(gbc.pc(), 0x2036);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0119
        gbc.setState(0x3f01, 0x4af6, 0x15a0, 0xf689, 0xaa9d, 0x8bf2, 0x0, 0x0);
        gbc.writeMem(0x3f01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x9d);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x4af6);
        EXPECT(gbc.pc(), 0x3f03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 011A
        gbc.setState(0x8dd8, 0x299, 0x15e0, 0x5a43, 0xed58, 0x325d, 0x1, 0x0);
        gbc.writeMem(0x8dd8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x299);
        EXPECT(gbc.pc(), 0x8dda);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd8), 0xcb);
        EXPECT(gbc.readMem(0x8dd9), 0x78);
        // CB 78 011B
        gbc.setState(0x2b43, 0xf79c, 0xbc70, 0x25e0, 0x46dd, 0xf9ea, 0x0, 0x0);
        gbc.writeMem(0x2b43, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbc);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xf9);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0xf79c);
        EXPECT(gbc.pc(), 0x2b45);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 011C
        gbc.setState(0x5150, 0xa8d5, 0xae50, 0xbf2d, 0x134, 0xf024, 0x0, 0x0);
        gbc.writeMem(0x5150, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xae);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xa8d5);
        EXPECT(gbc.pc(), 0x5152);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 011D
        gbc.setState(0x5f79, 0x618b, 0x1af0, 0x6ce0, 0xa562, 0xb70f, 0x0, 0x0);
        gbc.writeMem(0x5f79, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x618b);
        EXPECT(gbc.pc(), 0x5f7b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 011E
        gbc.setState(0x8cea, 0xce1f, 0x2b60, 0x3b79, 0x16bb, 0x8a33, 0x0, 0x0);
        gbc.writeMem(0x8cea, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2b);
        EXPECT(gbc.b(),  0x3b);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0xce1f);
        EXPECT(gbc.pc(), 0x8cec);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8cea), 0xcb);
        EXPECT(gbc.readMem(0x8ceb), 0x78);
        // CB 78 011F
        gbc.setState(0x1e4b, 0xee75, 0x1e90, 0xaa82, 0xe36b, 0xeba3, 0x1, 0x0);
        gbc.writeMem(0x1e4b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0xee75);
        EXPECT(gbc.pc(), 0x1e4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0120
        gbc.setState(0x1649, 0x8819, 0x24d0, 0xa65e, 0x194b, 0xbcac, 0x1, 0x0);
        gbc.writeMem(0x1649, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0x8819);
        EXPECT(gbc.pc(), 0x164b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0121
        gbc.setState(0x12ed, 0x995d, 0xb890, 0x4882, 0x7e8f, 0xb7f9, 0x0, 0x1);
        gbc.writeMem(0x12ed, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x995d);
        EXPECT(gbc.pc(), 0x12ef);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0122
        gbc.setState(0x5064, 0x503b, 0xe870, 0x987a, 0x996a, 0xe706, 0x1, 0x1);
        gbc.writeMem(0x5064, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x503b);
        EXPECT(gbc.pc(), 0x5066);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0123
        gbc.setState(0x24a2, 0xba24, 0x1610, 0x7356, 0xbed4, 0xc718, 0x0, 0x1);
        gbc.writeMem(0x24a2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0xba24);
        EXPECT(gbc.pc(), 0x24a4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0124
        gbc.setState(0x18ce, 0x87d9, 0xc0a0, 0x34b8, 0x6985, 0x145, 0x0, 0x1);
        gbc.writeMem(0x18ce, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x87d9);
        EXPECT(gbc.pc(), 0x18d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0125
        gbc.setState(0x26f, 0xee43, 0x4940, 0xd535, 0x4d0d, 0x4f85, 0x1, 0x0);
        gbc.writeMem(0x26f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0xee43);
        EXPECT(gbc.pc(), 0x271);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0126
        gbc.setState(0x88be, 0xbe7c, 0xfa70, 0x6315, 0x902d, 0xfac7, 0x1, 0x1);
        gbc.writeMem(0x88be, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0xbe7c);
        EXPECT(gbc.pc(), 0x88c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88be), 0xcb);
        EXPECT(gbc.readMem(0x88bf), 0x78);
        // CB 78 0127
        gbc.setState(0xc3d8, 0xc346, 0x4690, 0x2e94, 0x2f98, 0x7e9, 0x0, 0x0);
        gbc.writeMem(0xc3d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x94);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0xc346);
        EXPECT(gbc.pc(), 0xc3da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc3d8), 0xcb);
        EXPECT(gbc.readMem(0xc3d9), 0x78);
        // CB 78 0128
        gbc.setState(0x7708, 0xc769, 0x63a0, 0xf8a6, 0xb86, 0xb13, 0x0, 0x1);
        gbc.writeMem(0x7708, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0xc769);
        EXPECT(gbc.pc(), 0x770a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0129
        gbc.setState(0x60cd, 0x3ceb, 0x1910, 0xd71f, 0x3f60, 0x56a8, 0x0, 0x0);
        gbc.writeMem(0x60cd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x3ceb);
        EXPECT(gbc.pc(), 0x60cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 012A
        gbc.setState(0xcc2c, 0xe742, 0xa400, 0x6413, 0x9847, 0x3a9d, 0x0, 0x1);
        gbc.writeMem(0xcc2c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xe742);
        EXPECT(gbc.pc(), 0xcc2e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcc2c), 0xcb);
        EXPECT(gbc.readMem(0xcc2d), 0x78);
        // CB 78 012B
        gbc.setState(0xef71, 0x706f, 0x40e0, 0xe15a, 0x700, 0xac07, 0x1, 0x0);
        gbc.writeMem(0xef71, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x7);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0x706f);
        EXPECT(gbc.pc(), 0xef73);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xef71), 0xcb);
        EXPECT(gbc.readMem(0xef72), 0x78);
        // CB 78 012C
        gbc.setState(0x4d5a, 0x77ad, 0x920, 0xb0cb, 0xe4b0, 0x3002, 0x0, 0x0);
        gbc.writeMem(0x4d5a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x77ad);
        EXPECT(gbc.pc(), 0x4d5c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 012D
        gbc.setState(0xd9e4, 0x577c, 0xe310, 0x45f1, 0x8f88, 0x3542, 0x0, 0x0);
        gbc.writeMem(0xd9e4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x42);
        EXPECT(gbc.sp(), 0x577c);
        EXPECT(gbc.pc(), 0xd9e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9e4), 0xcb);
        EXPECT(gbc.readMem(0xd9e5), 0x78);
        // CB 78 012E
        gbc.setState(0x7e93, 0x34e, 0x4590, 0xf8b0, 0x4366, 0xf873, 0x1, 0x1);
        gbc.writeMem(0x7e93, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x34e);
        EXPECT(gbc.pc(), 0x7e95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 012F
        gbc.setState(0x98a1, 0x6c52, 0xc580, 0x583e, 0x68f3, 0xefc3, 0x0, 0x1);
        gbc.writeMem(0x98a1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x6c52);
        EXPECT(gbc.pc(), 0x98a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x98a1), 0xcb);
        EXPECT(gbc.readMem(0x98a2), 0x78);
        // CB 78 0131
        gbc.setState(0x3070, 0xd212, 0x9090, 0x865b, 0x7d88, 0x3624, 0x0, 0x1);
        gbc.writeMem(0x3070, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x90);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xd212);
        EXPECT(gbc.pc(), 0x3072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0132
        gbc.setState(0xa806, 0x673c, 0xef90, 0xb083, 0x683e, 0x7520, 0x1, 0x0);
        gbc.writeMem(0xa806, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x673c);
        EXPECT(gbc.pc(), 0xa808);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa806), 0xcb);
        EXPECT(gbc.readMem(0xa807), 0x78);
        // CB 78 0134
        gbc.setState(0x4272, 0xf4d2, 0xef40, 0xb44f, 0x9fa1, 0xb707, 0x0, 0x0);
        gbc.writeMem(0x4272, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0xa1);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xf4d2);
        EXPECT(gbc.pc(), 0x4274);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0135
        gbc.setState(0xea77, 0x65d9, 0xc710, 0xf7ad, 0xe36a, 0x684f, 0x0, 0x0);
        gbc.writeMem(0xea77, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x68);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0x65d9);
        EXPECT(gbc.pc(), 0xea79);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea77), 0xcb);
        EXPECT(gbc.readMem(0xea78), 0x78);
        // CB 78 0136
        gbc.setState(0xe5cf, 0xbefb, 0x88f0, 0xb60c, 0xd86b, 0x4e05, 0x1, 0x0);
        gbc.writeMem(0xe5cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0xbefb);
        EXPECT(gbc.pc(), 0xe5d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe5cf), 0xcb);
        EXPECT(gbc.readMem(0xe5d0), 0x78);
        // CB 78 0137
        gbc.setState(0xbc9d, 0xfe4e, 0x2d90, 0x43ba, 0xe34b, 0xb4f8, 0x1, 0x1);
        gbc.writeMem(0xbc9d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x4b);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0xfe4e);
        EXPECT(gbc.pc(), 0xbc9f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc9d), 0xcb);
        EXPECT(gbc.readMem(0xbc9e), 0x78);
        // CB 78 0138
        gbc.setState(0x99ca, 0x782b, 0xc080, 0xbbf5, 0x4991, 0x6dab, 0x1, 0x1);
        gbc.writeMem(0x99ca, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0x782b);
        EXPECT(gbc.pc(), 0x99cc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x99ca), 0xcb);
        EXPECT(gbc.readMem(0x99cb), 0x78);
        // CB 78 0139
        gbc.setState(0xbc8f, 0x2853, 0xbf60, 0x6a8b, 0xaa50, 0xdd5, 0x0, 0x0);
        gbc.writeMem(0xbc8f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x2853);
        EXPECT(gbc.pc(), 0xbc91);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbc8f), 0xcb);
        EXPECT(gbc.readMem(0xbc90), 0x78);
        // CB 78 013A
        gbc.setState(0x598, 0x5ab, 0xcce0, 0x85a3, 0x5cf, 0x6389, 0x0, 0x1);
        gbc.writeMem(0x598, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x5);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x5ab);
        EXPECT(gbc.pc(), 0x59a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 013B
        gbc.setState(0x3365, 0xf2cb, 0xbe40, 0x80ec, 0x888d, 0xb889, 0x0, 0x1);
        gbc.writeMem(0x3365, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xf2cb);
        EXPECT(gbc.pc(), 0x3367);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 013C
        gbc.setState(0xce32, 0x85a1, 0xa930, 0x5273, 0x58d1, 0x220, 0x0, 0x1);
        gbc.writeMem(0xce32, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x85a1);
        EXPECT(gbc.pc(), 0xce34);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce32), 0xcb);
        EXPECT(gbc.readMem(0xce33), 0x78);
        // CB 78 013D
        gbc.setState(0x4d13, 0xcae1, 0xba60, 0x7599, 0x1248, 0x8179, 0x0, 0x1);
        gbc.writeMem(0x4d13, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0x81);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xcae1);
        EXPECT(gbc.pc(), 0x4d15);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 013E
        gbc.setState(0xb3fb, 0x24e0, 0x6460, 0x7dd2, 0x5d12, 0x38e1, 0x0, 0x0);
        gbc.writeMem(0xb3fb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x24e0);
        EXPECT(gbc.pc(), 0xb3fd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3fb), 0xcb);
        EXPECT(gbc.readMem(0xb3fc), 0x78);
        // CB 78 013F
        gbc.setState(0x5019, 0xef66, 0x5b20, 0x35b, 0x5df1, 0x455c, 0x0, 0x0);
        gbc.writeMem(0x5019, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x5c);
        EXPECT(gbc.sp(), 0xef66);
        EXPECT(gbc.pc(), 0x501b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0140
        gbc.setState(0x6081, 0x2bc8, 0xfdc0, 0x8c98, 0xb82d, 0xaac1, 0x1, 0x1);
        gbc.writeMem(0x6081, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0x2bc8);
        EXPECT(gbc.pc(), 0x6083);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0141
        gbc.setState(0xe414, 0x4d9f, 0xa730, 0x4a9f, 0xe211, 0x4617, 0x0, 0x0);
        gbc.writeMem(0xe414, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0x4d9f);
        EXPECT(gbc.pc(), 0xe416);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe414), 0xcb);
        EXPECT(gbc.readMem(0xe415), 0x78);
        // CB 78 0142
        gbc.setState(0x315b, 0x3508, 0xc290, 0xe73c, 0x529a, 0x44e1, 0x1, 0x0);
        gbc.writeMem(0x315b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0x3508);
        EXPECT(gbc.pc(), 0x315d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0143
        gbc.setState(0x8e9, 0x15f7, 0x440, 0x38d, 0x64dd, 0xb39c, 0x1, 0x0);
        gbc.writeMem(0x8e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x15f7);
        EXPECT(gbc.pc(), 0x8eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0145
        gbc.setState(0x284e, 0xd46e, 0xfb90, 0x9dc5, 0xff6f, 0x6ad0, 0x1, 0x0);
        gbc.writeMem(0x284e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0xff);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd46e);
        EXPECT(gbc.pc(), 0x2850);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0146
        gbc.setState(0xb29, 0xaf0a, 0x3880, 0x8646, 0x8278, 0x419b, 0x1, 0x0);
        gbc.writeMem(0xb29, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x38);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x46);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0xaf0a);
        EXPECT(gbc.pc(), 0xb2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0147
        gbc.setState(0x19e6, 0x3892, 0xb220, 0xf91b, 0x4c17, 0xf032, 0x0, 0x0);
        gbc.writeMem(0x19e6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xf9);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x3892);
        EXPECT(gbc.pc(), 0x19e8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0148
        gbc.setState(0x44, 0xc659, 0xac60, 0xf152, 0xb1b6, 0x9e2e, 0x1, 0x1);
        gbc.writeMem(0x44, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xc659);
        EXPECT(gbc.pc(), 0x46);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0149
        gbc.setState(0x96bf, 0x4247, 0x32d0, 0xd0dd, 0x931f, 0x5586, 0x1, 0x0);
        gbc.writeMem(0x96bf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0x4247);
        EXPECT(gbc.pc(), 0x96c1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x96bf), 0xcb);
        EXPECT(gbc.readMem(0x96c0), 0x78);
        // CB 78 014A
        gbc.setState(0xdf75, 0xfb3a, 0x4f50, 0x15cb, 0x8ba5, 0x8f6b, 0x1, 0x1);
        gbc.writeMem(0xdf75, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0x8f);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xfb3a);
        EXPECT(gbc.pc(), 0xdf77);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf75), 0xcb);
        EXPECT(gbc.readMem(0xdf76), 0x78);
        // CB 78 014B
        gbc.setState(0x2261, 0x63ed, 0x3270, 0xa1e5, 0xea47, 0x993, 0x0, 0x1);
        gbc.writeMem(0x2261, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xe5);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0x63ed);
        EXPECT(gbc.pc(), 0x2263);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 014C
        gbc.setState(0x9675, 0x9458, 0x48c0, 0x16f4, 0x921c, 0xa21e, 0x1, 0x1);
        gbc.writeMem(0x9675, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x1e);
        EXPECT(gbc.sp(), 0x9458);
        EXPECT(gbc.pc(), 0x9677);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9675), 0xcb);
        EXPECT(gbc.readMem(0x9676), 0x78);
        // CB 78 014D
        gbc.setState(0x3dd7, 0x124c, 0x930, 0x6ec9, 0x472e, 0xf24d, 0x1, 0x0);
        gbc.writeMem(0x3dd7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x124c);
        EXPECT(gbc.pc(), 0x3dd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 014E
        gbc.setState(0x19b7, 0x970e, 0xeb40, 0x5104, 0xe292, 0xf405, 0x0, 0x0);
        gbc.writeMem(0x19b7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x92);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x970e);
        EXPECT(gbc.pc(), 0x19b9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 014F
        gbc.setState(0xb6d6, 0x5b9a, 0x460, 0x298e, 0x7627, 0xe980, 0x1, 0x0);
        gbc.writeMem(0xb6d6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x5b9a);
        EXPECT(gbc.pc(), 0xb6d8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb6d6), 0xcb);
        EXPECT(gbc.readMem(0xb6d7), 0x78);
        // CB 78 0150
        gbc.setState(0x8ead, 0xb952, 0xba10, 0xe0e3, 0x3683, 0x5572, 0x0, 0x1);
        gbc.writeMem(0x8ead, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xb952);
        EXPECT(gbc.pc(), 0x8eaf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8ead), 0xcb);
        EXPECT(gbc.readMem(0x8eae), 0x78);
        // CB 78 0151
        gbc.setState(0x112a, 0x62b9, 0xc410, 0xc11c, 0xdc03, 0x6bc5, 0x1, 0x1);
        gbc.writeMem(0x112a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x62b9);
        EXPECT(gbc.pc(), 0x112c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0152
        gbc.setState(0x6291, 0xe179, 0x4820, 0x9bdd, 0x9670, 0x9a1c, 0x0, 0x0);
        gbc.writeMem(0x6291, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x9a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xe179);
        EXPECT(gbc.pc(), 0x6293);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0153
        gbc.setState(0x24d0, 0x46d3, 0x7b90, 0x1377, 0x2a, 0xac7c, 0x0, 0x1);
        gbc.writeMem(0x24d0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x46d3);
        EXPECT(gbc.pc(), 0x24d2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0155
        gbc.setState(0x9cd4, 0xcd68, 0x6ce0, 0xc2a7, 0x261a, 0x65d2, 0x1, 0x1);
        gbc.writeMem(0x9cd4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x1a);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xcd68);
        EXPECT(gbc.pc(), 0x9cd6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9cd4), 0xcb);
        EXPECT(gbc.readMem(0x9cd5), 0x78);
        // CB 78 0157
        gbc.setState(0x8482, 0x6f1c, 0xbb60, 0x96d6, 0x3c99, 0xb85e, 0x0, 0x0);
        gbc.writeMem(0x8482, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0xb8);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x6f1c);
        EXPECT(gbc.pc(), 0x8484);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8482), 0xcb);
        EXPECT(gbc.readMem(0x8483), 0x78);
        // CB 78 0158
        gbc.setState(0xc267, 0x1e97, 0xa7b0, 0xc520, 0xcad6, 0x3ae0, 0x1, 0x1);
        gbc.writeMem(0xc267, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x1e97);
        EXPECT(gbc.pc(), 0xc269);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc267), 0xcb);
        EXPECT(gbc.readMem(0xc268), 0x78);
        // CB 78 0159
        gbc.setState(0xc543, 0x7dd4, 0x41d0, 0xd7ec, 0x5cff, 0x355a, 0x1, 0x1);
        gbc.writeMem(0xc543, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0xd7);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0x7dd4);
        EXPECT(gbc.pc(), 0xc545);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc543), 0xcb);
        EXPECT(gbc.readMem(0xc544), 0x78);
        // CB 78 015A
        gbc.setState(0xb9f6, 0x91e3, 0x3b30, 0xb09a, 0xa43c, 0x9533, 0x0, 0x1);
        gbc.writeMem(0xb9f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x91e3);
        EXPECT(gbc.pc(), 0xb9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb9f6), 0xcb);
        EXPECT(gbc.readMem(0xb9f7), 0x78);
        // CB 78 015C
        gbc.setState(0xe9dc, 0x221b, 0xec80, 0xdc96, 0x2510, 0xdb1f, 0x0, 0x1);
        gbc.writeMem(0xe9dc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x1f);
        EXPECT(gbc.sp(), 0x221b);
        EXPECT(gbc.pc(), 0xe9de);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe9dc), 0xcb);
        EXPECT(gbc.readMem(0xe9dd), 0x78);
        // CB 78 015D
        gbc.setState(0x73ec, 0xdd33, 0x1aa0, 0xce6e, 0xd6ba, 0x697f, 0x0, 0x1);
        gbc.writeMem(0x73ec, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1a);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xdd33);
        EXPECT(gbc.pc(), 0x73ee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 015E
        gbc.setState(0x33f8, 0x1e3b, 0x2470, 0x7bca, 0x7e4a, 0x8649, 0x0, 0x0);
        gbc.writeMem(0x33f8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0x1e3b);
        EXPECT(gbc.pc(), 0x33fa);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 015F
        gbc.setState(0xd926, 0x5489, 0x7b00, 0xb3d2, 0x5da6, 0xf633, 0x1, 0x1);
        gbc.writeMem(0xd926, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0xd2);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5489);
        EXPECT(gbc.pc(), 0xd928);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd926), 0xcb);
        EXPECT(gbc.readMem(0xd927), 0x78);
        // CB 78 0160
        gbc.setState(0x2c59, 0x122c, 0xc010, 0xd26a, 0x9244, 0x4812, 0x0, 0x1);
        gbc.writeMem(0x2c59, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x122c);
        EXPECT(gbc.pc(), 0x2c5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0161
        gbc.setState(0x37c7, 0x36e4, 0xe7b0, 0x2c18, 0xdbd0, 0x54cb, 0x1, 0x0);
        gbc.writeMem(0x37c7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x36e4);
        EXPECT(gbc.pc(), 0x37c9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0162
        gbc.setState(0x437d, 0xb362, 0x3020, 0x8e1d, 0x24d1, 0x8ed3, 0x0, 0x1);
        gbc.writeMem(0x437d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xb362);
        EXPECT(gbc.pc(), 0x437f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0164
        gbc.setState(0x5db9, 0xd10, 0x4b90, 0x4b2c, 0x5fdd, 0xe30a, 0x1, 0x0);
        gbc.writeMem(0x5db9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x2c);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0xd10);
        EXPECT(gbc.pc(), 0x5dbb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0165
        gbc.setState(0xde06, 0x8c, 0xc420, 0x724a, 0x1f83, 0xf781, 0x0, 0x1);
        gbc.writeMem(0xde06, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x8c);
        EXPECT(gbc.pc(), 0xde08);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xde06), 0xcb);
        EXPECT(gbc.readMem(0xde07), 0x78);
        // CB 78 0166
        gbc.setState(0x9bb, 0x56f1, 0x6da0, 0xd604, 0xceec, 0x11b2, 0x1, 0x0);
        gbc.writeMem(0x9bb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6d);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0x56f1);
        EXPECT(gbc.pc(), 0x9bd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0167
        gbc.setState(0x5517, 0xfa03, 0x65c0, 0x7050, 0x1cb, 0x3b4a, 0x0, 0x1);
        gbc.writeMem(0x5517, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x70);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x3b);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xfa03);
        EXPECT(gbc.pc(), 0x5519);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0168
        gbc.setState(0x2173, 0x3632, 0xfa70, 0x452e, 0x14a9, 0x7496, 0x0, 0x0);
        gbc.writeMem(0x2173, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x3632);
        EXPECT(gbc.pc(), 0x2175);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0169
        gbc.setState(0x431c, 0xcfcc, 0xd170, 0x8bf4, 0x50c6, 0x9814, 0x1, 0x0);
        gbc.writeMem(0x431c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd1);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0xc6);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xcfcc);
        EXPECT(gbc.pc(), 0x431e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 016A
        gbc.setState(0x26f3, 0x3a5d, 0x96c0, 0x598b, 0x1a7a, 0xb2e2, 0x1, 0x1);
        gbc.writeMem(0x26f3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x3a5d);
        EXPECT(gbc.pc(), 0x26f5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 016B
        gbc.setState(0xe43f, 0xa2f, 0x2e00, 0xed7a, 0x4543, 0xcbcc, 0x0, 0x0);
        gbc.writeMem(0xe43f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x43);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xcc);
        EXPECT(gbc.sp(), 0xa2f);
        EXPECT(gbc.pc(), 0xe441);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe43f), 0xcb);
        EXPECT(gbc.readMem(0xe440), 0x78);
        // CB 78 016C
        gbc.setState(0xc6f9, 0xe29, 0xbb00, 0xf170, 0x59bb, 0x5222, 0x1, 0x1);
        gbc.writeMem(0xc6f9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0xe29);
        EXPECT(gbc.pc(), 0xc6fb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc6f9), 0xcb);
        EXPECT(gbc.readMem(0xc6fa), 0x78);
        // CB 78 016D
        gbc.setState(0x7bc0, 0xb3fd, 0x3960, 0xf69d, 0xf779, 0x5c69, 0x0, 0x1);
        gbc.writeMem(0x7bc0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0xb3fd);
        EXPECT(gbc.pc(), 0x7bc2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 016E
        gbc.setState(0x888b, 0xfcfd, 0x4e70, 0x845d, 0x63fc, 0x345e, 0x0, 0x0);
        gbc.writeMem(0x888b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x34);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xfcfd);
        EXPECT(gbc.pc(), 0x888d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x888b), 0xcb);
        EXPECT(gbc.readMem(0x888c), 0x78);
        // CB 78 016F
        gbc.setState(0x982f, 0x6e70, 0x3450, 0x797f, 0xf04f, 0x7877, 0x0, 0x1);
        gbc.writeMem(0x982f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0x6e70);
        EXPECT(gbc.pc(), 0x9831);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x982f), 0xcb);
        EXPECT(gbc.readMem(0x9830), 0x78);
        // CB 78 0170
        gbc.setState(0x7e49, 0x5fd8, 0xd740, 0x9b64, 0x61a7, 0x28de, 0x0, 0x0);
        gbc.writeMem(0x7e49, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x5fd8);
        EXPECT(gbc.pc(), 0x7e4b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0171
        gbc.setState(0x1781, 0x9ed2, 0x710, 0xa943, 0x1979, 0xb4bb, 0x0, 0x0);
        gbc.writeMem(0x1781, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x9ed2);
        EXPECT(gbc.pc(), 0x1783);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0172
        gbc.setState(0x350e, 0x3105, 0xa950, 0xb231, 0x9d17, 0xed25, 0x0, 0x1);
        gbc.writeMem(0x350e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0x9d);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0x3105);
        EXPECT(gbc.pc(), 0x3510);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0173
        gbc.setState(0x7641, 0x642e, 0x4fc0, 0xbe1a, 0x54bf, 0x9dd7, 0x1, 0x1);
        gbc.writeMem(0x7641, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1a);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x642e);
        EXPECT(gbc.pc(), 0x7643);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0174
        gbc.setState(0xb5e7, 0x1802, 0xdc40, 0x5e22, 0xa606, 0x2c48, 0x0, 0x1);
        gbc.writeMem(0xb5e7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0x22);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x6);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x1802);
        EXPECT(gbc.pc(), 0xb5e9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb5e7), 0xcb);
        EXPECT(gbc.readMem(0xb5e8), 0x78);
        // CB 78 0175
        gbc.setState(0xbc7f, 0x2af, 0xf710, 0xd2d0, 0x59a4, 0xeb1a, 0x1, 0x1);
        gbc.writeMem(0xbc7f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf7);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x2af);
        EXPECT(gbc.pc(), 0xbc81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc7f), 0xcb);
        EXPECT(gbc.readMem(0xbc80), 0x78);
        // CB 78 0176
        gbc.setState(0xe42c, 0xe2ec, 0x75a0, 0xa5e1, 0x8f0d, 0x9bcd, 0x1, 0x1);
        gbc.writeMem(0xe42c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0xe2ec);
        EXPECT(gbc.pc(), 0xe42e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe42c), 0xcb);
        EXPECT(gbc.readMem(0xe42d), 0x78);
        // CB 78 0177
        gbc.setState(0x7cc, 0x7ccf, 0xa460, 0x324d, 0x6bbf, 0x6f78, 0x0, 0x1);
        gbc.writeMem(0x7cc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x6f);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0x7ccf);
        EXPECT(gbc.pc(), 0x7ce);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0178
        gbc.setState(0x4529, 0x7fe9, 0xcbb0, 0xdcb3, 0x9011, 0xd30b, 0x0, 0x1);
        gbc.writeMem(0x4529, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0x7fe9);
        EXPECT(gbc.pc(), 0x452b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 017A
        gbc.setState(0xb075, 0x8b30, 0xf960, 0x6137, 0x36a, 0xce9, 0x0, 0x1);
        gbc.writeMem(0xb075, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x8b30);
        EXPECT(gbc.pc(), 0xb077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb075), 0xcb);
        EXPECT(gbc.readMem(0xb076), 0x78);
        // CB 78 017B
        gbc.setState(0x8db3, 0xd84f, 0xd7b0, 0xc982, 0x8f13, 0x59c5, 0x1, 0x0);
        gbc.writeMem(0x8db3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd7);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x82);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xd84f);
        EXPECT(gbc.pc(), 0x8db5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8db3), 0xcb);
        EXPECT(gbc.readMem(0x8db4), 0x78);
        // CB 78 017C
        gbc.setState(0x6b14, 0xea7e, 0xf540, 0x8c08, 0x62a5, 0xa4a4, 0x0, 0x0);
        gbc.writeMem(0x6b14, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x62);
        EXPECT(gbc.e(),  0xa5);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xa4);
        EXPECT(gbc.sp(), 0xea7e);
        EXPECT(gbc.pc(), 0x6b16);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 017D
        gbc.setState(0x8d84, 0x7d28, 0x9770, 0xc4cf, 0xec37, 0xad57, 0x1, 0x0);
        gbc.writeMem(0x8d84, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x7d28);
        EXPECT(gbc.pc(), 0x8d86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8d84), 0xcb);
        EXPECT(gbc.readMem(0x8d85), 0x78);
        // CB 78 017E
        gbc.setState(0x94ba, 0xeb0c, 0x3ad0, 0xf837, 0xacf, 0x2fa1, 0x0, 0x1);
        gbc.writeMem(0x94ba, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xeb0c);
        EXPECT(gbc.pc(), 0x94bc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x94ba), 0xcb);
        EXPECT(gbc.readMem(0x94bb), 0x78);
        // CB 78 017F
        gbc.setState(0x2815, 0x7aba, 0x99b0, 0x49e3, 0x88d9, 0x1445, 0x1, 0x0);
        gbc.writeMem(0x2815, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x99);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0x14);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x7aba);
        EXPECT(gbc.pc(), 0x2817);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0181
        gbc.setState(0xc8bd, 0xc43d, 0xd240, 0x16e1, 0x1630, 0x9ba8, 0x0, 0x0);
        gbc.writeMem(0xc8bd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0x16);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0xc43d);
        EXPECT(gbc.pc(), 0xc8bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc8bd), 0xcb);
        EXPECT(gbc.readMem(0xc8be), 0x78);
        // CB 78 0182
        gbc.setState(0xebd9, 0x601c, 0x5a20, 0x8dda, 0xdbf7, 0xf452, 0x0, 0x1);
        gbc.writeMem(0xebd9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x8d);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0x601c);
        EXPECT(gbc.pc(), 0xebdb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xebd9), 0xcb);
        EXPECT(gbc.readMem(0xebda), 0x78);
        // CB 78 0183
        gbc.setState(0xb342, 0x9c23, 0x2630, 0xc48b, 0xc1b8, 0xcf76, 0x1, 0x1);
        gbc.writeMem(0xb342, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0x9c23);
        EXPECT(gbc.pc(), 0xb344);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb342), 0xcb);
        EXPECT(gbc.readMem(0xb343), 0x78);
        // CB 78 0184
        gbc.setState(0x766f, 0xff30, 0x8990, 0xfde4, 0xbb5c, 0xf5f1, 0x1, 0x0);
        gbc.writeMem(0x766f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xff30);
        EXPECT(gbc.pc(), 0x7671);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0185
        gbc.setState(0xb659, 0x344f, 0xbb30, 0xfb3f, 0xcace, 0xb9ad, 0x0, 0x0);
        gbc.writeMem(0xb659, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xca);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x344f);
        EXPECT(gbc.pc(), 0xb65b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb659), 0xcb);
        EXPECT(gbc.readMem(0xb65a), 0x78);
        // CB 78 0186
        gbc.setState(0x830b, 0xedec, 0x3e40, 0x542f, 0xf11e, 0x4b04, 0x1, 0x1);
        gbc.writeMem(0x830b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xf1);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0xedec);
        EXPECT(gbc.pc(), 0x830d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x830b), 0xcb);
        EXPECT(gbc.readMem(0x830c), 0x78);
        // CB 78 0187
        gbc.setState(0xb9f6, 0x79f7, 0xebe0, 0x3e58, 0x74d5, 0xabb, 0x0, 0x1);
        gbc.writeMem(0xb9f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x58);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x79f7);
        EXPECT(gbc.pc(), 0xb9f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb9f6), 0xcb);
        EXPECT(gbc.readMem(0xb9f7), 0x78);
        // CB 78 0188
        gbc.setState(0xc9e1, 0x1b5f, 0x3730, 0x51d4, 0x3c19, 0x82d1, 0x1, 0x0);
        gbc.writeMem(0xc9e1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x3c);
        EXPECT(gbc.e(),  0x19);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x1b5f);
        EXPECT(gbc.pc(), 0xc9e3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc9e1), 0xcb);
        EXPECT(gbc.readMem(0xc9e2), 0x78);
        // CB 78 0189
        gbc.setState(0xc15c, 0x8830, 0x440, 0x5ebc, 0xb6fb, 0x31b7, 0x1, 0x0);
        gbc.writeMem(0xc15c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xb6);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x8830);
        EXPECT(gbc.pc(), 0xc15e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc15c), 0xcb);
        EXPECT(gbc.readMem(0xc15d), 0x78);
        // CB 78 018A
        gbc.setState(0x53e4, 0xb7ea, 0xfe40, 0x9b0a, 0xeaea, 0x17aa, 0x1, 0x0);
        gbc.writeMem(0x53e4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xb7ea);
        EXPECT(gbc.pc(), 0x53e6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 018B
        gbc.setState(0x4fde, 0x35b6, 0xe090, 0xbaa9, 0xed97, 0x4171, 0x1, 0x0);
        gbc.writeMem(0x4fde, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x41);
        EXPECT(gbc.l(),  0x71);
        EXPECT(gbc.sp(), 0x35b6);
        EXPECT(gbc.pc(), 0x4fe0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 018C
        gbc.setState(0xd19a, 0x1c21, 0x8470, 0x66f1, 0x616f, 0xc9bc, 0x0, 0x0);
        gbc.writeMem(0xd19a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x1c21);
        EXPECT(gbc.pc(), 0xd19c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd19a), 0xcb);
        EXPECT(gbc.readMem(0xd19b), 0x78);
        // CB 78 018D
        gbc.setState(0x6fe7, 0x1712, 0x4090, 0x9c9, 0xaa4d, 0xbe02, 0x1, 0x0);
        gbc.writeMem(0x6fe7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x1712);
        EXPECT(gbc.pc(), 0x6fe9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 018E
        gbc.setState(0x251e, 0x9f5e, 0x6380, 0x4aa, 0x7c81, 0x219b, 0x1, 0x0);
        gbc.writeMem(0x251e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x81);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x9f5e);
        EXPECT(gbc.pc(), 0x2520);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 018F
        gbc.setState(0x93bd, 0x893d, 0x3940, 0x8c0e, 0xacd6, 0xdced, 0x0, 0x0);
        gbc.writeMem(0x93bd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0xd6);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x893d);
        EXPECT(gbc.pc(), 0x93bf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x93bd), 0xcb);
        EXPECT(gbc.readMem(0x93be), 0x78);
        // CB 78 0191
        gbc.setState(0xd666, 0xc6c, 0xd4a0, 0xa6a5, 0x9087, 0xf790, 0x1, 0x0);
        gbc.writeMem(0xd666, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xc6c);
        EXPECT(gbc.pc(), 0xd668);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd666), 0xcb);
        EXPECT(gbc.readMem(0xd667), 0x78);
        // CB 78 0192
        gbc.setState(0x9214, 0xa2b8, 0x4d40, 0xe9d3, 0x6105, 0xbfc0, 0x0, 0x1);
        gbc.writeMem(0x9214, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0xa2b8);
        EXPECT(gbc.pc(), 0x9216);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9214), 0xcb);
        EXPECT(gbc.readMem(0x9215), 0x78);
        // CB 78 0193
        gbc.setState(0xa60d, 0x27f9, 0x780, 0xa1aa, 0x6f1d, 0x30c7, 0x0, 0x1);
        gbc.writeMem(0xa60d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x27f9);
        EXPECT(gbc.pc(), 0xa60f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa60d), 0xcb);
        EXPECT(gbc.readMem(0xa60e), 0x78);
        // CB 78 0194
        gbc.setState(0x9361, 0x2039, 0x1cf0, 0xfdd5, 0xbb5e, 0x103e, 0x0, 0x1);
        gbc.writeMem(0x9361, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfd);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x2039);
        EXPECT(gbc.pc(), 0x9363);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9361), 0xcb);
        EXPECT(gbc.readMem(0x9362), 0x78);
        // CB 78 0195
        gbc.setState(0xc66e, 0xf6a4, 0xab10, 0x3273, 0x20a0, 0x6ba0, 0x1, 0x0);
        gbc.writeMem(0xc66e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xab);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xf6a4);
        EXPECT(gbc.pc(), 0xc670);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc66e), 0xcb);
        EXPECT(gbc.readMem(0xc66f), 0x78);
        // CB 78 0196
        gbc.setState(0x2b96, 0x4ea5, 0x1fb0, 0x73d7, 0x7f89, 0x439b, 0x1, 0x0);
        gbc.writeMem(0x2b96, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x4ea5);
        EXPECT(gbc.pc(), 0x2b98);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0197
        gbc.setState(0x58b5, 0x32ae, 0xf980, 0x5017, 0xa213, 0x80c8, 0x1, 0x0);
        gbc.writeMem(0x58b5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xc8);
        EXPECT(gbc.sp(), 0x32ae);
        EXPECT(gbc.pc(), 0x58b7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0198
        gbc.setState(0x52eb, 0x468c, 0x9830, 0xbbd0, 0x71eb, 0x88b3, 0x1, 0x0);
        gbc.writeMem(0x52eb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x468c);
        EXPECT(gbc.pc(), 0x52ed);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0199
        gbc.setState(0x45e2, 0xd002, 0x3240, 0x7856, 0xc383, 0x3a25, 0x1, 0x1);
        gbc.writeMem(0x45e2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0x56);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x83);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0x25);
        EXPECT(gbc.sp(), 0xd002);
        EXPECT(gbc.pc(), 0x45e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 019A
        gbc.setState(0x474a, 0xd9ec, 0x49a0, 0x9018, 0xcc6f, 0xee75, 0x1, 0x1);
        gbc.writeMem(0x474a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xcc);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0xee);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd9ec);
        EXPECT(gbc.pc(), 0x474c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 019B
        gbc.setState(0x4c8d, 0xbff8, 0xa710, 0x6f0f, 0x287a, 0xedfa, 0x1, 0x1);
        gbc.writeMem(0x4c8d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x7a);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0xfa);
        EXPECT(gbc.sp(), 0xbff8);
        EXPECT(gbc.pc(), 0x4c8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 019C
        gbc.setState(0x16a5, 0xfd6d, 0x2100, 0xe19d, 0x69ef, 0xe5dd, 0x0, 0x1);
        gbc.writeMem(0x16a5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x69);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xfd6d);
        EXPECT(gbc.pc(), 0x16a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 019D
        gbc.setState(0x8909, 0x8052, 0xdca0, 0xab92, 0xd2af, 0x44d7, 0x0, 0x0);
        gbc.writeMem(0x8909, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x92);
        EXPECT(gbc.d(),  0xd2);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xd7);
        EXPECT(gbc.sp(), 0x8052);
        EXPECT(gbc.pc(), 0x890b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8909), 0xcb);
        EXPECT(gbc.readMem(0x890a), 0x78);
        // CB 78 019E
        gbc.setState(0x8585, 0xe6c3, 0x560, 0x6fb5, 0x5e6e, 0x6df1, 0x1, 0x1);
        gbc.writeMem(0x8585, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe6c3);
        EXPECT(gbc.pc(), 0x8587);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8585), 0xcb);
        EXPECT(gbc.readMem(0x8586), 0x78);
        // CB 78 019F
        gbc.setState(0xde22, 0x8f12, 0xb470, 0x7f54, 0xe1b5, 0x10d2, 0x1, 0x0);
        gbc.writeMem(0xde22, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x8f12);
        EXPECT(gbc.pc(), 0xde24);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde22), 0xcb);
        EXPECT(gbc.readMem(0xde23), 0x78);
        // CB 78 01A0
        gbc.setState(0x55f1, 0xcf32, 0x98b0, 0x7c08, 0x280a, 0x31ff, 0x0, 0x0);
        gbc.writeMem(0x55f1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0xff);
        EXPECT(gbc.sp(), 0xcf32);
        EXPECT(gbc.pc(), 0x55f3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01A1
        gbc.setState(0xd580, 0xf02d, 0x3760, 0x42f4, 0xb0b2, 0xc44c, 0x0, 0x1);
        gbc.writeMem(0xd580, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0x42);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xb2);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xf02d);
        EXPECT(gbc.pc(), 0xd582);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd580), 0xcb);
        EXPECT(gbc.readMem(0xd581), 0x78);
        // CB 78 01A3
        gbc.setState(0xa335, 0xff65, 0xcde0, 0xcb4e, 0x65c4, 0x26af, 0x1, 0x0);
        gbc.writeMem(0xa335, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xcb);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0xff65);
        EXPECT(gbc.pc(), 0xa337);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa335), 0xcb);
        EXPECT(gbc.readMem(0xa336), 0x78);
        // CB 78 01A4
        gbc.setState(0x2287, 0xc7c9, 0x58f0, 0x21f1, 0xbbe1, 0xe629, 0x1, 0x1);
        gbc.writeMem(0x2287, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x58);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xe1);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0xc7c9);
        EXPECT(gbc.pc(), 0x2289);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01A5
        gbc.setState(0x9e54, 0x2892, 0x86e0, 0x3837, 0xe6c2, 0x50da, 0x1, 0x0);
        gbc.writeMem(0x9e54, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x50);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x2892);
        EXPECT(gbc.pc(), 0x9e56);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9e54), 0xcb);
        EXPECT(gbc.readMem(0x9e55), 0x78);
        // CB 78 01A6
        gbc.setState(0x6518, 0xa6d2, 0xdca0, 0xf551, 0x4cb1, 0x13d2, 0x0, 0x0);
        gbc.writeMem(0x6518, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa6d2);
        EXPECT(gbc.pc(), 0x651a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01A7
        gbc.setState(0xeb81, 0x548a, 0x8930, 0x99c1, 0x1f03, 0x18b3, 0x0, 0x1);
        gbc.writeMem(0xeb81, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x18);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x548a);
        EXPECT(gbc.pc(), 0xeb83);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb81), 0xcb);
        EXPECT(gbc.readMem(0xeb82), 0x78);
        // CB 78 01A8
        gbc.setState(0x7218, 0xa023, 0x2e70, 0xbb17, 0xb175, 0xc6df, 0x0, 0x1);
        gbc.writeMem(0x7218, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0xa023);
        EXPECT(gbc.pc(), 0x721a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01A9
        gbc.setState(0x8691, 0x3e28, 0x9ff0, 0xbfc2, 0x8220, 0x8ce9, 0x0, 0x0);
        gbc.writeMem(0x8691, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x82);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0xe9);
        EXPECT(gbc.sp(), 0x3e28);
        EXPECT(gbc.pc(), 0x8693);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8691), 0xcb);
        EXPECT(gbc.readMem(0x8692), 0x78);
        // CB 78 01AA
        gbc.setState(0x3dfd, 0x6462, 0x49b0, 0xdf24, 0xe509, 0x28d8, 0x1, 0x0);
        gbc.writeMem(0x3dfd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0x6462);
        EXPECT(gbc.pc(), 0x3dff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01AC
        gbc.setState(0xcda8, 0x10a0, 0x50, 0x36e1, 0xec7d, 0xb145, 0x1, 0x0);
        gbc.writeMem(0xcda8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x10a0);
        EXPECT(gbc.pc(), 0xcdaa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcda8), 0xcb);
        EXPECT(gbc.readMem(0xcda9), 0x78);
        // CB 78 01AD
        gbc.setState(0x1d8d, 0xf026, 0x3910, 0xa2a1, 0x6d31, 0xc392, 0x1, 0x1);
        gbc.writeMem(0x1d8d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf026);
        EXPECT(gbc.pc(), 0x1d8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01AE
        gbc.setState(0x5c18, 0x92a6, 0x56b0, 0x5227, 0x935, 0x62f6, 0x1, 0x1);
        gbc.writeMem(0x5c18, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0xf6);
        EXPECT(gbc.sp(), 0x92a6);
        EXPECT(gbc.pc(), 0x5c1a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01AF
        gbc.setState(0x82aa, 0xbe99, 0x7c40, 0xb23d, 0xe5fc, 0x2a3c, 0x1, 0x1);
        gbc.writeMem(0x82aa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xb2);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xfc);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xbe99);
        EXPECT(gbc.pc(), 0x82ac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x82aa), 0xcb);
        EXPECT(gbc.readMem(0x82ab), 0x78);
        // CB 78 01B0
        gbc.setState(0x8f92, 0x69f, 0xfd70, 0xa4e0, 0xfe90, 0x92fb, 0x0, 0x0);
        gbc.writeMem(0x8f92, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x90);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x69f);
        EXPECT(gbc.pc(), 0x8f94);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f92), 0xcb);
        EXPECT(gbc.readMem(0x8f93), 0x78);
        // CB 78 01B1
        gbc.setState(0x6b84, 0x5cbc, 0xfc20, 0x473, 0xa487, 0x4359, 0x1, 0x1);
        gbc.writeMem(0x6b84, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x5cbc);
        EXPECT(gbc.pc(), 0x6b86);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01B2
        gbc.setState(0x17ec, 0x55ac, 0x5290, 0x8b8, 0xcd50, 0xcbd1, 0x1, 0x0);
        gbc.writeMem(0x17ec, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x52);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xcb);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x55ac);
        EXPECT(gbc.pc(), 0x17ee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01B3
        gbc.setState(0x2e30, 0xb656, 0x7900, 0x1500, 0x5d9f, 0xd0b7, 0x1, 0x0);
        gbc.writeMem(0x2e30, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xb656);
        EXPECT(gbc.pc(), 0x2e32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01B4
        gbc.setState(0x1b07, 0x2e35, 0x6c50, 0x7457, 0x30f6, 0x1566, 0x0, 0x1);
        gbc.writeMem(0x1b07, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x57);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xf6);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x2e35);
        EXPECT(gbc.pc(), 0x1b09);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01B5
        gbc.setState(0xba76, 0x6d12, 0xa170, 0x35db, 0xd895, 0x5704, 0x0, 0x0);
        gbc.writeMem(0xba76, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4);
        EXPECT(gbc.sp(), 0x6d12);
        EXPECT(gbc.pc(), 0xba78);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xba76), 0xcb);
        EXPECT(gbc.readMem(0xba77), 0x78);
        // CB 78 01B6
        gbc.setState(0x1070, 0xb314, 0x6e10, 0xce45, 0x3bf3, 0x80fc, 0x0, 0x1);
        gbc.writeMem(0x1070, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0xb314);
        EXPECT(gbc.pc(), 0x1072);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01B7
        gbc.setState(0x312b, 0xa78e, 0x2db0, 0x649f, 0xea5c, 0x5de2, 0x1, 0x0);
        gbc.writeMem(0x312b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x64);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0xa78e);
        EXPECT(gbc.pc(), 0x312d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01B8
        gbc.setState(0x2b7d, 0xa870, 0x9650, 0x4770, 0x4669, 0x24d9, 0x1, 0x1);
        gbc.writeMem(0x2b7d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xd9);
        EXPECT(gbc.sp(), 0xa870);
        EXPECT(gbc.pc(), 0x2b7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01B9
        gbc.setState(0x4ddd, 0x6fb, 0xd9b0, 0xd952, 0xb539, 0x6cb8, 0x0, 0x1);
        gbc.writeMem(0x4ddd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x39);
        EXPECT(gbc.h(),  0x6c);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0x6fb);
        EXPECT(gbc.pc(), 0x4ddf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01BA
        gbc.setState(0xc8ba, 0xf2d1, 0x4cb0, 0x723f, 0xb8c3, 0x615d, 0x1, 0x0);
        gbc.writeMem(0xc8ba, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x72);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0xf2d1);
        EXPECT(gbc.pc(), 0xc8bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8ba), 0xcb);
        EXPECT(gbc.readMem(0xc8bb), 0x78);
        // CB 78 01BB
        gbc.setState(0x585c, 0x9b1e, 0x84a0, 0x263f, 0xdf2e, 0xd36e, 0x0, 0x0);
        gbc.writeMem(0x585c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0x9b1e);
        EXPECT(gbc.pc(), 0x585e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01BC
        gbc.setState(0x6e26, 0xb168, 0xc990, 0xcc91, 0xe291, 0x291, 0x1, 0x1);
        gbc.writeMem(0x6e26, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x2);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xb168);
        EXPECT(gbc.pc(), 0x6e28);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01BD
        gbc.setState(0xcadd, 0x3fb3, 0xa8f0, 0x9a8b, 0x5e48, 0xafe0, 0x1, 0x0);
        gbc.writeMem(0xcadd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x9a);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x5e);
        EXPECT(gbc.e(),  0x48);
        EXPECT(gbc.h(),  0xaf);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0x3fb3);
        EXPECT(gbc.pc(), 0xcadf);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcadd), 0xcb);
        EXPECT(gbc.readMem(0xcade), 0x78);
        // CB 78 01BE
        gbc.setState(0x27c, 0xd1d2, 0xee20, 0x3488, 0xcb23, 0x475, 0x1, 0x0);
        gbc.writeMem(0x27c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0x75);
        EXPECT(gbc.sp(), 0xd1d2);
        EXPECT(gbc.pc(), 0x27e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01BF
        gbc.setState(0xd9aa, 0x1d46, 0xc5f0, 0xe41, 0xfda, 0xdf23, 0x0, 0x0);
        gbc.writeMem(0xd9aa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x1d46);
        EXPECT(gbc.pc(), 0xd9ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd9aa), 0xcb);
        EXPECT(gbc.readMem(0xd9ab), 0x78);
        // CB 78 01C0
        gbc.setState(0xdb5d, 0xe69e, 0xc5f0, 0xd391, 0x43f3, 0xab3c, 0x1, 0x0);
        gbc.writeMem(0xdb5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf3);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xe69e);
        EXPECT(gbc.pc(), 0xdb5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb5d), 0xcb);
        EXPECT(gbc.readMem(0xdb5e), 0x78);
        // CB 78 01C1
        gbc.setState(0x6a55, 0x7ac2, 0xf30, 0xcff5, 0x506c, 0xee, 0x0, 0x0);
        gbc.writeMem(0x6a55, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x7ac2);
        EXPECT(gbc.pc(), 0x6a57);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01C2
        gbc.setState(0x7f59, 0x9dfd, 0x96c0, 0x3e01, 0x3de7, 0xd9be, 0x0, 0x0);
        gbc.writeMem(0x7f59, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x9dfd);
        EXPECT(gbc.pc(), 0x7f5b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01C3
        gbc.setState(0x3d4e, 0x55ef, 0xa5f0, 0xc9dd, 0xba41, 0xeb91, 0x0, 0x0);
        gbc.writeMem(0x3d4e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0x55ef);
        EXPECT(gbc.pc(), 0x3d50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01C4
        gbc.setState(0x492, 0xef5e, 0x9300, 0x80af, 0x4c27, 0xc717, 0x0, 0x1);
        gbc.writeMem(0x492, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xaf);
        EXPECT(gbc.d(),  0x4c);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0x17);
        EXPECT(gbc.sp(), 0xef5e);
        EXPECT(gbc.pc(), 0x494);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01C5
        gbc.setState(0xdf6d, 0x7c84, 0x8490, 0x7617, 0x197c, 0x1541, 0x1, 0x0);
        gbc.writeMem(0xdf6d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x7c84);
        EXPECT(gbc.pc(), 0xdf6f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdf6d), 0xcb);
        EXPECT(gbc.readMem(0xdf6e), 0x78);
        // CB 78 01C6
        gbc.setState(0x1902, 0xaf78, 0x6040, 0x7dff, 0xd38d, 0x4488, 0x0, 0x0);
        gbc.writeMem(0x1902, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x60);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xaf78);
        EXPECT(gbc.pc(), 0x1904);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01C7
        gbc.setState(0xb503, 0xa812, 0x6680, 0xf65b, 0xd896, 0x78ba, 0x1, 0x1);
        gbc.writeMem(0xb503, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xf6);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xa812);
        EXPECT(gbc.pc(), 0xb505);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb503), 0xcb);
        EXPECT(gbc.readMem(0xb504), 0x78);
        // CB 78 01C8
        gbc.setState(0x7cca, 0x2cb9, 0x8e80, 0x8950, 0xe862, 0xa92e, 0x0, 0x0);
        gbc.writeMem(0x7cca, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8e);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0x2cb9);
        EXPECT(gbc.pc(), 0x7ccc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01C9
        gbc.setState(0x6cb6, 0xe57b, 0x7090, 0xb0c, 0x4997, 0x9f88, 0x0, 0x0);
        gbc.writeMem(0x6cb6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x97);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xe57b);
        EXPECT(gbc.pc(), 0x6cb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01CA
        gbc.setState(0xdd3a, 0x6bb2, 0x9bb0, 0x6133, 0x7293, 0x6188, 0x1, 0x0);
        gbc.writeMem(0xdd3a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0x33);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x6bb2);
        EXPECT(gbc.pc(), 0xdd3c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd3a), 0xcb);
        EXPECT(gbc.readMem(0xdd3b), 0x78);
        // CB 78 01CB
        gbc.setState(0xa8fa, 0xb266, 0xadb0, 0x556b, 0x1aca, 0x4e64, 0x1, 0x0);
        gbc.writeMem(0xa8fa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xad);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xb266);
        EXPECT(gbc.pc(), 0xa8fc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa8fa), 0xcb);
        EXPECT(gbc.readMem(0xa8fb), 0x78);
        // CB 78 01CC
        gbc.setState(0x3fb6, 0x2bfb, 0x33d0, 0x67c9, 0xd09b, 0x2e29, 0x0, 0x0);
        gbc.writeMem(0x3fb6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x2bfb);
        EXPECT(gbc.pc(), 0x3fb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01CD
        gbc.setState(0x9dee, 0x22e, 0x4000, 0x13c9, 0x1449, 0xb7fe, 0x1, 0x1);
        gbc.writeMem(0x9dee, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x14);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x22e);
        EXPECT(gbc.pc(), 0x9df0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9dee), 0xcb);
        EXPECT(gbc.readMem(0x9def), 0x78);
        // CB 78 01CE
        gbc.setState(0xab47, 0x9ad1, 0xfdb0, 0xcc36, 0x9a47, 0x7816, 0x0, 0x0);
        gbc.writeMem(0xab47, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x47);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x9ad1);
        EXPECT(gbc.pc(), 0xab49);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xab47), 0xcb);
        EXPECT(gbc.readMem(0xab48), 0x78);
        // CB 78 01CF
        gbc.setState(0xd3f7, 0x137c, 0x9280, 0xf4a2, 0x288d, 0xb29f, 0x0, 0x0);
        gbc.writeMem(0xd3f7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x92);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0xb2);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x137c);
        EXPECT(gbc.pc(), 0xd3f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3f7), 0xcb);
        EXPECT(gbc.readMem(0xd3f8), 0x78);
        // CB 78 01D1
        gbc.setState(0x1951, 0x1a1e, 0x4d20, 0x65d7, 0x79b9, 0x880f, 0x0, 0x1);
        gbc.writeMem(0x1951, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4d);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xd7);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0xb9);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0x1a1e);
        EXPECT(gbc.pc(), 0x1953);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01D2
        gbc.setState(0x4523, 0xc366, 0xb620, 0x4d83, 0xe213, 0x1f3c, 0x1, 0x0);
        gbc.writeMem(0x4523, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x4d);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0x13);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x3c);
        EXPECT(gbc.sp(), 0xc366);
        EXPECT(gbc.pc(), 0x4525);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01D4
        gbc.setState(0xb7f4, 0x70f5, 0xbea0, 0x6814, 0x2c51, 0xf503, 0x0, 0x0);
        gbc.writeMem(0xb7f4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0x14);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x70f5);
        EXPECT(gbc.pc(), 0xb7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb7f4), 0xcb);
        EXPECT(gbc.readMem(0xb7f5), 0x78);
        // CB 78 01D5
        gbc.setState(0x86a1, 0x38ef, 0x9110, 0xc3ff, 0xe770, 0x1339, 0x0, 0x0);
        gbc.writeMem(0x86a1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x38ef);
        EXPECT(gbc.pc(), 0x86a3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x86a1), 0xcb);
        EXPECT(gbc.readMem(0x86a2), 0x78);
        // CB 78 01D6
        gbc.setState(0x28a5, 0xab96, 0xe680, 0x5597, 0x4746, 0x57e1, 0x0, 0x1);
        gbc.writeMem(0x28a5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0x55);
        EXPECT(gbc.c(),  0x97);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xab96);
        EXPECT(gbc.pc(), 0x28a7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01D7
        gbc.setState(0x2727, 0x8b1c, 0xb6e0, 0x9fec, 0xf7ee, 0x3806, 0x1, 0x0);
        gbc.writeMem(0x2727, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0xec);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x8b1c);
        EXPECT(gbc.pc(), 0x2729);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01D8
        gbc.setState(0xda3f, 0x5a76, 0x27a0, 0x760d, 0x5699, 0x5f4, 0x1, 0x0);
        gbc.writeMem(0xda3f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0xd);
        EXPECT(gbc.d(),  0x56);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x5a76);
        EXPECT(gbc.pc(), 0xda41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda3f), 0xcb);
        EXPECT(gbc.readMem(0xda40), 0x78);
        // CB 78 01D9
        gbc.setState(0x3a90, 0xfcf6, 0x640, 0x6b4d, 0x1261, 0x2487, 0x1, 0x0);
        gbc.writeMem(0x3a90, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x87);
        EXPECT(gbc.sp(), 0xfcf6);
        EXPECT(gbc.pc(), 0x3a92);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01DA
        gbc.setState(0x5cec, 0x1769, 0x8cf0, 0xc885, 0xe693, 0xefb5, 0x0, 0x1);
        gbc.writeMem(0x5cec, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0xc8);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x93);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x1769);
        EXPECT(gbc.pc(), 0x5cee);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01DB
        gbc.setState(0x23dc, 0x78b, 0x80d0, 0x6374, 0x6fd7, 0x214e, 0x1, 0x0);
        gbc.writeMem(0x23dc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x78b);
        EXPECT(gbc.pc(), 0x23de);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01DC
        gbc.setState(0xba67, 0x244b, 0x80e0, 0xe33a, 0x5154, 0x638a, 0x0, 0x0);
        gbc.writeMem(0xba67, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x244b);
        EXPECT(gbc.pc(), 0xba69);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba67), 0xcb);
        EXPECT(gbc.readMem(0xba68), 0x78);
        // CB 78 01DD
        gbc.setState(0xc28a, 0x9738, 0x5d30, 0x1cde, 0xb46b, 0x87bf, 0x1, 0x1);
        gbc.writeMem(0xc28a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0x9738);
        EXPECT(gbc.pc(), 0xc28c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc28a), 0xcb);
        EXPECT(gbc.readMem(0xc28b), 0x78);
        // CB 78 01DE
        gbc.setState(0x7976, 0x5803, 0xfd60, 0xb304, 0xd3ec, 0x7a54, 0x1, 0x0);
        gbc.writeMem(0x7976, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0x5803);
        EXPECT(gbc.pc(), 0x7978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01DF
        gbc.setState(0x7836, 0x5518, 0x45d0, 0x12e0, 0x5dde, 0xde7b, 0x1, 0x0);
        gbc.writeMem(0x7836, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x12);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x5518);
        EXPECT(gbc.pc(), 0x7838);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01E2
        gbc.setState(0x95a7, 0x4d0c, 0xc60, 0x3d6b, 0x9e6c, 0xff7, 0x0, 0x1);
        gbc.writeMem(0x95a7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x9e);
        EXPECT(gbc.e(),  0x6c);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x4d0c);
        EXPECT(gbc.pc(), 0x95a9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95a7), 0xcb);
        EXPECT(gbc.readMem(0x95a8), 0x78);
        // CB 78 01E3
        gbc.setState(0x1b77, 0x55f4, 0xfe00, 0x1b4e, 0x1e3b, 0xc298, 0x1, 0x1);
        gbc.writeMem(0x1b77, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x4e);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x55f4);
        EXPECT(gbc.pc(), 0x1b79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01E4
        gbc.setState(0x16a9, 0xe554, 0x4370, 0xdfa7, 0x8527, 0xa27, 0x1, 0x1);
        gbc.writeMem(0x16a9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xe554);
        EXPECT(gbc.pc(), 0x16ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01E5
        gbc.setState(0x7486, 0x1b34, 0xe560, 0xa174, 0x5364, 0x2722, 0x0, 0x0);
        gbc.writeMem(0x7486, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x64);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x1b34);
        EXPECT(gbc.pc(), 0x7488);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01E6
        gbc.setState(0xeb61, 0x5f38, 0x6390, 0x58ee, 0x85e0, 0x40a9, 0x0, 0x0);
        gbc.writeMem(0xeb61, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x40);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x5f38);
        EXPECT(gbc.pc(), 0xeb63);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xeb61), 0xcb);
        EXPECT(gbc.readMem(0xeb62), 0x78);
        // CB 78 01E7
        gbc.setState(0x426, 0xc846, 0x9be0, 0xf448, 0x247b, 0xc05e, 0x1, 0x0);
        gbc.writeMem(0x426, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xf4);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x7b);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xc846);
        EXPECT(gbc.pc(), 0x428);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01E8
        gbc.setState(0x49db, 0x8de8, 0x1ea0, 0xb9ba, 0xd562, 0x5e26, 0x1, 0x0);
        gbc.writeMem(0x49db, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x5e);
        EXPECT(gbc.l(),  0x26);
        EXPECT(gbc.sp(), 0x8de8);
        EXPECT(gbc.pc(), 0x49dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01E9
        gbc.setState(0x53b0, 0xd7fd, 0xf510, 0x818f, 0x3916, 0x7950, 0x0, 0x0);
        gbc.writeMem(0x53b0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x8f);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0x79);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xd7fd);
        EXPECT(gbc.pc(), 0x53b2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01EA
        gbc.setState(0x3812, 0x2939, 0x66f0, 0xfce2, 0x543f, 0xfe90, 0x1, 0x1);
        gbc.writeMem(0x3812, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x66);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xe2);
        EXPECT(gbc.d(),  0x54);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0x2939);
        EXPECT(gbc.pc(), 0x3814);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01EB
        gbc.setState(0x97d7, 0xa7e9, 0xdfc0, 0x6210, 0xc27d, 0xe88, 0x1, 0x0);
        gbc.writeMem(0x97d7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x62);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x7d);
        EXPECT(gbc.h(),  0xe);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xa7e9);
        EXPECT(gbc.pc(), 0x97d9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d7), 0xcb);
        EXPECT(gbc.readMem(0x97d8), 0x78);
        // CB 78 01EC
        gbc.setState(0xbec4, 0xd38b, 0x65e0, 0xc35e, 0x23dd, 0x11b5, 0x1, 0x1);
        gbc.writeMem(0xbec4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x11);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0xd38b);
        EXPECT(gbc.pc(), 0xbec6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbec4), 0xcb);
        EXPECT(gbc.readMem(0xbec5), 0x78);
        // CB 78 01ED
        gbc.setState(0xe7ad, 0x5534, 0x50b0, 0xbe88, 0x981f, 0x3c6a, 0x0, 0x0);
        gbc.writeMem(0xe7ad, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x5534);
        EXPECT(gbc.pc(), 0xe7af);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe7ad), 0xcb);
        EXPECT(gbc.readMem(0xe7ae), 0x78);
        // CB 78 01EE
        gbc.setState(0x5fbf, 0x1622, 0xfca0, 0xaa77, 0xcdf0, 0x954b, 0x1, 0x1);
        gbc.writeMem(0x5fbf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xcd);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1622);
        EXPECT(gbc.pc(), 0x5fc1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01EF
        gbc.setState(0x124e, 0xd22d, 0x6a50, 0x2a50, 0x7480, 0x44a7, 0x0, 0x0);
        gbc.writeMem(0x124e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xd22d);
        EXPECT(gbc.pc(), 0x1250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01F0
        gbc.setState(0x9ee2, 0xe3b4, 0x8180, 0x38db, 0x4f95, 0x225a, 0x0, 0x0);
        gbc.writeMem(0x9ee2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x4f);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xe3b4);
        EXPECT(gbc.pc(), 0x9ee4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9ee2), 0xcb);
        EXPECT(gbc.readMem(0x9ee3), 0x78);
        // CB 78 01F1
        gbc.setState(0x97c6, 0x4a38, 0xc0a0, 0xe095, 0xfee0, 0x4a57, 0x0, 0x1);
        gbc.writeMem(0x97c6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x4a38);
        EXPECT(gbc.pc(), 0x97c8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97c6), 0xcb);
        EXPECT(gbc.readMem(0x97c7), 0x78);
        // CB 78 01F2
        gbc.setState(0xb3ce, 0x3e45, 0x7280, 0xa3fb, 0x30b5, 0x9caa, 0x0, 0x1);
        gbc.writeMem(0xb3ce, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xa3);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0xb5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x3e45);
        EXPECT(gbc.pc(), 0xb3d0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb3ce), 0xcb);
        EXPECT(gbc.readMem(0xb3cf), 0x78);
        // CB 78 01F3
        gbc.setState(0x141c, 0x484b, 0xf950, 0x2fda, 0x5cf7, 0x6973, 0x0, 0x0);
        gbc.writeMem(0x141c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x484b);
        EXPECT(gbc.pc(), 0x141e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01F4
        gbc.setState(0x542d, 0xd021, 0x44f0, 0x5f6b, 0x44c3, 0xadd3, 0x1, 0x1);
        gbc.writeMem(0x542d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x44);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x6b);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0xd021);
        EXPECT(gbc.pc(), 0x542f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01F5
        gbc.setState(0xda32, 0x9916, 0xd240, 0xa0a1, 0x1b46, 0xe2f8, 0x1, 0x0);
        gbc.writeMem(0xda32, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0xf8);
        EXPECT(gbc.sp(), 0x9916);
        EXPECT(gbc.pc(), 0xda34);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xda32), 0xcb);
        EXPECT(gbc.readMem(0xda33), 0x78);
        // CB 78 01F8
        gbc.setState(0xea9f, 0xa55e, 0xc510, 0x45a7, 0xf775, 0xbb99, 0x0, 0x0);
        gbc.writeMem(0xea9f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc5);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0x75);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xa55e);
        EXPECT(gbc.pc(), 0xeaa1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xea9f), 0xcb);
        EXPECT(gbc.readMem(0xeaa0), 0x78);
        // CB 78 01F9
        gbc.setState(0x6875, 0x52af, 0xd520, 0x9b5, 0x110, 0x4bd2, 0x1, 0x0);
        gbc.writeMem(0x6875, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd5);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x52af);
        EXPECT(gbc.pc(), 0x6877);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01FA
        gbc.setState(0x7af0, 0xa711, 0x8290, 0x6bd0, 0x1914, 0xb1a0, 0x1, 0x0);
        gbc.writeMem(0x7af0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xb1);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0xa711);
        EXPECT(gbc.pc(), 0x7af2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01FB
        gbc.setState(0x338b, 0xeed2, 0x3c50, 0x37bd, 0x9a77, 0x5d92, 0x1, 0x0);
        gbc.writeMem(0x338b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3c);
        EXPECT(gbc.b(),  0x37);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x77);
        EXPECT(gbc.h(),  0x5d);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xeed2);
        EXPECT(gbc.pc(), 0x338d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 01FC
        gbc.setState(0xe5ce, 0xaa95, 0x6c60, 0xc03e, 0x491b, 0xa295, 0x1, 0x0);
        gbc.writeMem(0xe5ce, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0xaa95);
        EXPECT(gbc.pc(), 0xe5d0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ce), 0xcb);
        EXPECT(gbc.readMem(0xe5cf), 0x78);
        // CB 78 01FD
        gbc.setState(0x7569, 0xcaa6, 0xeec0, 0x52c7, 0x1fba, 0x7f34, 0x1, 0x0);
        gbc.writeMem(0x7569, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xcaa6);
        EXPECT(gbc.pc(), 0x756b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 01FE
        gbc.setState(0x9152, 0xee28, 0x2d20, 0xed4a, 0xc58a, 0x9549, 0x1, 0x0);
        gbc.writeMem(0x9152, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x49);
        EXPECT(gbc.sp(), 0xee28);
        EXPECT(gbc.pc(), 0x9154);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9152), 0xcb);
        EXPECT(gbc.readMem(0x9153), 0x78);
        // CB 78 01FF
        gbc.setState(0x3f50, 0x4091, 0x49d0, 0xbe1c, 0x5ac3, 0x1da5, 0x0, 0x0);
        gbc.writeMem(0x3f50, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x1c);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xc3);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xa5);
        EXPECT(gbc.sp(), 0x4091);
        EXPECT(gbc.pc(), 0x3f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0200
        gbc.setState(0x1896, 0xf0b, 0x5ae0, 0xbccd, 0x3942, 0x173a, 0x0, 0x0);
        gbc.writeMem(0x1896, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0xf0b);
        EXPECT(gbc.pc(), 0x1898);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0201
        gbc.setState(0x49e8, 0x79e3, 0x7c60, 0x2e7b, 0x98ef, 0x2488, 0x1, 0x0);
        gbc.writeMem(0x49e8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x79e3);
        EXPECT(gbc.pc(), 0x49ea);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0202
        gbc.setState(0x6c69, 0xbbdb, 0xd200, 0xd149, 0xa, 0xde3b, 0x1, 0x0);
        gbc.writeMem(0x6c69, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0xbbdb);
        EXPECT(gbc.pc(), 0x6c6b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0204
        gbc.setState(0xde65, 0x4382, 0x7690, 0xa479, 0x4abb, 0xf1f1, 0x0, 0x1);
        gbc.writeMem(0xde65, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x4a);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x4382);
        EXPECT(gbc.pc(), 0xde67);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde65), 0xcb);
        EXPECT(gbc.readMem(0xde66), 0x78);
        // CB 78 0205
        gbc.setState(0xdea1, 0x3397, 0x53b0, 0x1521, 0xd111, 0xf0bd, 0x1, 0x0);
        gbc.writeMem(0xdea1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x53);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x21);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0xf0);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x3397);
        EXPECT(gbc.pc(), 0xdea3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea1), 0xcb);
        EXPECT(gbc.readMem(0xdea2), 0x78);
        // CB 78 0206
        gbc.setState(0x95de, 0x2008, 0x3070, 0x2f32, 0x7638, 0x84ba, 0x0, 0x1);
        gbc.writeMem(0x95de, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x30);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x76);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0x2008);
        EXPECT(gbc.pc(), 0x95e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x95de), 0xcb);
        EXPECT(gbc.readMem(0x95df), 0x78);
        // CB 78 0207
        gbc.setState(0xc8b3, 0x67ea, 0xe890, 0xaf4b, 0xdd68, 0x7809, 0x1, 0x1);
        gbc.writeMem(0xc8b3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xdd);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x9);
        EXPECT(gbc.sp(), 0x67ea);
        EXPECT(gbc.pc(), 0xc8b5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc8b3), 0xcb);
        EXPECT(gbc.readMem(0xc8b4), 0x78);
        // CB 78 0208
        gbc.setState(0xbf23, 0x3394, 0x2e20, 0xced5, 0x8549, 0x53f2, 0x1, 0x1);
        gbc.writeMem(0xbf23, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2e);
        EXPECT(gbc.b(),  0xce);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x49);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x3394);
        EXPECT(gbc.pc(), 0xbf25);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf23), 0xcb);
        EXPECT(gbc.readMem(0xbf24), 0x78);
        // CB 78 0209
        gbc.setState(0xd5b8, 0x7974, 0xe990, 0x386d, 0xec91, 0x8816, 0x1, 0x1);
        gbc.writeMem(0xd5b8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe9);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xec);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x88);
        EXPECT(gbc.l(),  0x16);
        EXPECT(gbc.sp(), 0x7974);
        EXPECT(gbc.pc(), 0xd5ba);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd5b8), 0xcb);
        EXPECT(gbc.readMem(0xd5b9), 0x78);
        // CB 78 020A
        gbc.setState(0x6fb9, 0x7d4a, 0x6c70, 0xa45f, 0x1ce0, 0x8710, 0x0, 0x0);
        gbc.writeMem(0x6fb9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xe0);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0x7d4a);
        EXPECT(gbc.pc(), 0x6fbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 020B
        gbc.setState(0x64be, 0x71de, 0xb1f0, 0xedc, 0x3810, 0x5ab7, 0x0, 0x1);
        gbc.writeMem(0x64be, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xe);
        EXPECT(gbc.c(),  0xdc);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0x71de);
        EXPECT(gbc.pc(), 0x64c0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 020C
        gbc.setState(0x70cd, 0x6e4, 0x23a0, 0x8acf, 0xfb2f, 0x748e, 0x0, 0x1);
        gbc.writeMem(0x70cd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x23);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xfb);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x8e);
        EXPECT(gbc.sp(), 0x6e4);
        EXPECT(gbc.pc(), 0x70cf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 020D
        gbc.setState(0x1149, 0x6492, 0xf6e0, 0x929f, 0x136b, 0x53c0, 0x1, 0x1);
        gbc.writeMem(0x1149, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0x6b);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x6492);
        EXPECT(gbc.pc(), 0x114b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 020E
        gbc.setState(0xccc4, 0x92c4, 0x1410, 0xe130, 0x8ade, 0x6e5e, 0x0, 0x0);
        gbc.writeMem(0xccc4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0x92c4);
        EXPECT(gbc.pc(), 0xccc6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xccc4), 0xcb);
        EXPECT(gbc.readMem(0xccc5), 0x78);
        // CB 78 020F
        gbc.setState(0x7405, 0x4b9f, 0x50d0, 0x6574, 0x2f2b, 0x6be7, 0x1, 0x0);
        gbc.writeMem(0x7405, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x50);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0x4b9f);
        EXPECT(gbc.pc(), 0x7407);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0210
        gbc.setState(0x881f, 0xf27a, 0xe240, 0xd1d0, 0x5b9f, 0xc54, 0x1, 0x1);
        gbc.writeMem(0x881f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xd1);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x5b);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xf27a);
        EXPECT(gbc.pc(), 0x8821);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x881f), 0xcb);
        EXPECT(gbc.readMem(0x8820), 0x78);
        // CB 78 0211
        gbc.setState(0xe10e, 0x8781, 0x88b0, 0x1ab8, 0x90d4, 0x3334, 0x0, 0x1);
        gbc.writeMem(0xe10e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0x1a);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x33);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0x8781);
        EXPECT(gbc.pc(), 0xe110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe10e), 0xcb);
        EXPECT(gbc.readMem(0xe10f), 0x78);
        // CB 78 0213
        gbc.setState(0xcd5c, 0x657a, 0xb960, 0x4bc8, 0xe43b, 0x75e2, 0x1, 0x1);
        gbc.writeMem(0xcd5c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0xe4);
        EXPECT(gbc.e(),  0x3b);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0xe2);
        EXPECT(gbc.sp(), 0x657a);
        EXPECT(gbc.pc(), 0xcd5e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcd5c), 0xcb);
        EXPECT(gbc.readMem(0xcd5d), 0x78);
        // CB 78 0214
        gbc.setState(0x5207, 0x3261, 0xc090, 0xc79a, 0x2f61, 0x6b23, 0x1, 0x0);
        gbc.writeMem(0x5207, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x3261);
        EXPECT(gbc.pc(), 0x5209);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0215
        gbc.setState(0x14bc, 0xee1e, 0x900, 0x2fa7, 0x7aac, 0x5b6a, 0x0, 0x1);
        gbc.writeMem(0x14bc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9);
        EXPECT(gbc.b(),  0x2f);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xee1e);
        EXPECT(gbc.pc(), 0x14be);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0216
        gbc.setState(0xcc61, 0x4423, 0xa7f0, 0x5607, 0xdb3d, 0xe135, 0x1, 0x1);
        gbc.writeMem(0xcc61, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0x35);
        EXPECT(gbc.sp(), 0x4423);
        EXPECT(gbc.pc(), 0xcc63);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc61), 0xcb);
        EXPECT(gbc.readMem(0xcc62), 0x78);
        // CB 78 0217
        gbc.setState(0xac7a, 0xcaaf, 0xcb40, 0xeb3a, 0xc302, 0xf5f4, 0x0, 0x0);
        gbc.writeMem(0xac7a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xeb);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xcaaf);
        EXPECT(gbc.pc(), 0xac7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xac7a), 0xcb);
        EXPECT(gbc.readMem(0xac7b), 0x78);
        // CB 78 0218
        gbc.setState(0x2d1e, 0xe60a, 0x2190, 0x3547, 0x4b88, 0xa031, 0x1, 0x0);
        gbc.writeMem(0x2d1e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x4b);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xe60a);
        EXPECT(gbc.pc(), 0x2d20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0219
        gbc.setState(0xa07b, 0x5491, 0x7a10, 0xaa18, 0xb11, 0x958c, 0x0, 0x1);
        gbc.writeMem(0xa07b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x18);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x11);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x5491);
        EXPECT(gbc.pc(), 0xa07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa07b), 0xcb);
        EXPECT(gbc.readMem(0xa07c), 0x78);
        // CB 78 021A
        gbc.setState(0xa21a, 0x1337, 0x1220, 0xa043, 0xa782, 0x818, 0x1, 0x0);
        gbc.writeMem(0xa21a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0xa0);
        EXPECT(gbc.c(),  0x43);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0x18);
        EXPECT(gbc.sp(), 0x1337);
        EXPECT(gbc.pc(), 0xa21c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa21a), 0xcb);
        EXPECT(gbc.readMem(0xa21b), 0x78);
        // CB 78 021B
        gbc.setState(0x8c98, 0xe3fd, 0xfbe0, 0x71a6, 0x8fda, 0x2255, 0x0, 0x1);
        gbc.writeMem(0x8c98, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8f);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xe3fd);
        EXPECT(gbc.pc(), 0x8c9a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8c98), 0xcb);
        EXPECT(gbc.readMem(0x8c99), 0x78);
        // CB 78 021C
        gbc.setState(0x3bdb, 0xcb6d, 0x1f70, 0xabe1, 0xa5d4, 0x91ab, 0x0, 0x1);
        gbc.writeMem(0x3bdb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xab);
        EXPECT(gbc.sp(), 0xcb6d);
        EXPECT(gbc.pc(), 0x3bdd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 021E
        gbc.setState(0x90cf, 0xd874, 0x7e20, 0x46d4, 0xb298, 0x9853, 0x1, 0x1);
        gbc.writeMem(0x90cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x98);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xd874);
        EXPECT(gbc.pc(), 0x90d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x90cf), 0xcb);
        EXPECT(gbc.readMem(0x90d0), 0x78);
        // CB 78 021F
        gbc.setState(0x7e00, 0xf470, 0x5db0, 0x54a3, 0x1940, 0x4846, 0x0, 0x0);
        gbc.writeMem(0x7e00, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x54);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xf470);
        EXPECT(gbc.pc(), 0x7e02);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0220
        gbc.setState(0xe827, 0x8562, 0x8180, 0xcf85, 0xa2d0, 0x1062, 0x0, 0x1);
        gbc.writeMem(0xe827, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0x85);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x8562);
        EXPECT(gbc.pc(), 0xe829);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe827), 0xcb);
        EXPECT(gbc.readMem(0xe828), 0x78);
        // CB 78 0221
        gbc.setState(0x64f, 0x67ef, 0xb2b0, 0xa89d, 0xb8d0, 0xe61b, 0x1, 0x0);
        gbc.writeMem(0x64f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0xa8);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xd0);
        EXPECT(gbc.h(),  0xe6);
        EXPECT(gbc.l(),  0x1b);
        EXPECT(gbc.sp(), 0x67ef);
        EXPECT(gbc.pc(), 0x651);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0222
        gbc.setState(0x2768, 0x8bb, 0x1b00, 0x8a4b, 0x4322, 0x8b70, 0x0, 0x0);
        gbc.writeMem(0x2768, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x8bb);
        EXPECT(gbc.pc(), 0x276a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0223
        gbc.setState(0x2137, 0x935b, 0xe640, 0xf530, 0xb8da, 0x70ca, 0x1, 0x0);
        gbc.writeMem(0x2137, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe6);
        EXPECT(gbc.b(),  0xf5);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x935b);
        EXPECT(gbc.pc(), 0x2139);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0224
        gbc.setState(0x3b29, 0xf345, 0x9480, 0xdbb1, 0x7c36, 0xf8b9, 0x1, 0x1);
        gbc.writeMem(0x3b29, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0x7c);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xb9);
        EXPECT(gbc.sp(), 0xf345);
        EXPECT(gbc.pc(), 0x3b2b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0225
        gbc.setState(0x6da6, 0xad81, 0x65e0, 0x40bc, 0xc0f0, 0x4968, 0x0, 0x1);
        gbc.writeMem(0x6da6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x65);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xf0);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0xad81);
        EXPECT(gbc.pc(), 0x6da8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0226
        gbc.setState(0x9d82, 0xb688, 0xe7b0, 0x9169, 0x5289, 0x2d3e, 0x0, 0x0);
        gbc.writeMem(0x9d82, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x89);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xb688);
        EXPECT(gbc.pc(), 0x9d84);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d82), 0xcb);
        EXPECT(gbc.readMem(0x9d83), 0x78);
        // CB 78 0227
        gbc.setState(0x5f8d, 0x1fdd, 0x84e0, 0xbcba, 0x92e7, 0xa74b, 0x1, 0x1);
        gbc.writeMem(0x5f8d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x84);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xe7);
        EXPECT(gbc.h(),  0xa7);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x1fdd);
        EXPECT(gbc.pc(), 0x5f8f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0228
        gbc.setState(0x6373, 0x2240, 0xc290, 0xd589, 0x3008, 0x72c9, 0x1, 0x1);
        gbc.writeMem(0x6373, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x72);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x2240);
        EXPECT(gbc.pc(), 0x6375);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0229
        gbc.setState(0x2976, 0x5304, 0xcd10, 0xe9bc, 0x6e67, 0x2cdb, 0x1, 0x0);
        gbc.writeMem(0x2976, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcd);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x6e);
        EXPECT(gbc.e(),  0x67);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0xdb);
        EXPECT(gbc.sp(), 0x5304);
        EXPECT(gbc.pc(), 0x2978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 022A
        gbc.setState(0x6b12, 0xc376, 0xc20, 0x8ef, 0x718b, 0xa200, 0x0, 0x1);
        gbc.writeMem(0x6b12, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xef);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0xc376);
        EXPECT(gbc.pc(), 0x6b14);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 022C
        gbc.setState(0x82fc, 0x1555, 0x37f0, 0xbf03, 0x25d7, 0xcfcf, 0x1, 0x1);
        gbc.writeMem(0x82fc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x37);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0x1555);
        EXPECT(gbc.pc(), 0x82fe);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x82fc), 0xcb);
        EXPECT(gbc.readMem(0x82fd), 0x78);
        // CB 78 022D
        gbc.setState(0xcf08, 0xd047, 0x43a0, 0xefe0, 0x574a, 0xca1, 0x1, 0x1);
        gbc.writeMem(0xcf08, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x43);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd047);
        EXPECT(gbc.pc(), 0xcf0a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcf08), 0xcb);
        EXPECT(gbc.readMem(0xcf09), 0x78);
        // CB 78 022E
        gbc.setState(0x7ca1, 0x8fc2, 0x9b30, 0xa6f, 0xc7cd, 0x519a, 0x0, 0x0);
        gbc.writeMem(0x7ca1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x8fc2);
        EXPECT(gbc.pc(), 0x7ca3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0230
        gbc.setState(0x575a, 0xe654, 0x7db0, 0xe4ed, 0x27bc, 0xa8e7, 0x1, 0x1);
        gbc.writeMem(0x575a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xbc);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe654);
        EXPECT(gbc.pc(), 0x575c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0231
        gbc.setState(0xd7a3, 0x8f2d, 0x4ae0, 0xa43a, 0xf2e9, 0x90da, 0x1, 0x1);
        gbc.writeMem(0xd7a3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4a);
        EXPECT(gbc.b(),  0xa4);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0xda);
        EXPECT(gbc.sp(), 0x8f2d);
        EXPECT(gbc.pc(), 0xd7a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7a3), 0xcb);
        EXPECT(gbc.readMem(0xd7a4), 0x78);
        // CB 78 0232
        gbc.setState(0x66d9, 0xab2a, 0x1750, 0x90d3, 0xa6c9, 0xaa6a, 0x0, 0x1);
        gbc.writeMem(0x66d9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0xab2a);
        EXPECT(gbc.pc(), 0x66db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0233
        gbc.setState(0xd0da, 0x2316, 0xe8c0, 0x1931, 0xa6d5, 0xacb, 0x0, 0x1);
        gbc.writeMem(0xd0da, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x19);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x2316);
        EXPECT(gbc.pc(), 0xd0dc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd0da), 0xcb);
        EXPECT(gbc.readMem(0xd0db), 0x78);
        // CB 78 0235
        gbc.setState(0x4e85, 0xf6d5, 0x4fd0, 0x753d, 0xf2c2, 0x9953, 0x1, 0x1);
        gbc.writeMem(0x4e85, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0xf2);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x99);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xf6d5);
        EXPECT(gbc.pc(), 0x4e87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0236
        gbc.setState(0x5513, 0xed36, 0xe520, 0xafd6, 0x16b8, 0x51c2, 0x1, 0x0);
        gbc.writeMem(0x5513, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xc2);
        EXPECT(gbc.sp(), 0xed36);
        EXPECT(gbc.pc(), 0x5515);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0237
        gbc.setState(0x410e, 0xe92e, 0x64a0, 0xb60a, 0xce9, 0xf724, 0x0, 0x1);
        gbc.writeMem(0x410e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xa);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xe92e);
        EXPECT(gbc.pc(), 0x4110);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0238
        gbc.setState(0xb07b, 0x2b65, 0x96c0, 0xc0fc, 0x3635, 0xf72d, 0x0, 0x1);
        gbc.writeMem(0xb07b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x96);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x2d);
        EXPECT(gbc.sp(), 0x2b65);
        EXPECT(gbc.pc(), 0xb07d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb07b), 0xcb);
        EXPECT(gbc.readMem(0xb07c), 0x78);
        // CB 78 0239
        gbc.setState(0xf9a, 0xf14a, 0x67c0, 0x585f, 0x2408, 0x430b, 0x0, 0x0);
        gbc.writeMem(0xf9a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x58);
        EXPECT(gbc.c(),  0x5f);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0xb);
        EXPECT(gbc.sp(), 0xf14a);
        EXPECT(gbc.pc(), 0xf9c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 023A
        gbc.setState(0x9c0, 0x9831, 0x34b0, 0x8013, 0xf8a6, 0xed4e, 0x1, 0x0);
        gbc.writeMem(0x9c0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xa6);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0x9831);
        EXPECT(gbc.pc(), 0x9c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 023B
        gbc.setState(0x52a3, 0x31a5, 0xca70, 0x437b, 0xf625, 0x5598, 0x1, 0x0);
        gbc.writeMem(0x52a3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x7b);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x55);
        EXPECT(gbc.l(),  0x98);
        EXPECT(gbc.sp(), 0x31a5);
        EXPECT(gbc.pc(), 0x52a5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 023C
        gbc.setState(0x1f60, 0xedee, 0xcc30, 0x9e9a, 0x2653, 0x2e40, 0x0, 0x1);
        gbc.writeMem(0x1f60, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0xedee);
        EXPECT(gbc.pc(), 0x1f62);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 023E
        gbc.setState(0x7339, 0x6d71, 0xe100, 0x9361, 0x289c, 0xbbd4, 0x1, 0x0);
        gbc.writeMem(0x7339, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x6d71);
        EXPECT(gbc.pc(), 0x733b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 023F
        gbc.setState(0x9be1, 0x557a, 0xbd0, 0x7fc5, 0x71c2, 0x6e62, 0x1, 0x1);
        gbc.writeMem(0x9be1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x557a);
        EXPECT(gbc.pc(), 0x9be3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9be1), 0xcb);
        EXPECT(gbc.readMem(0x9be2), 0x78);
        // CB 78 0240
        gbc.setState(0x1754, 0xf8ea, 0x61e0, 0x5988, 0xac91, 0x1a1c, 0x1, 0x0);
        gbc.writeMem(0x1754, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xf8ea);
        EXPECT(gbc.pc(), 0x1756);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0241
        gbc.setState(0x536a, 0xb2a0, 0x33c0, 0xf7a1, 0xb71, 0x8552, 0x1, 0x0);
        gbc.writeMem(0x536a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x33);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x71);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xb2a0);
        EXPECT(gbc.pc(), 0x536c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0242
        gbc.setState(0x3d21, 0x4e1d, 0x5ab0, 0x9929, 0xdb18, 0x3280, 0x0, 0x0);
        gbc.writeMem(0x3d21, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5a);
        EXPECT(gbc.b(),  0x99);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x18);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x4e1d);
        EXPECT(gbc.pc(), 0x3d23);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0243
        gbc.setState(0xb908, 0xf5a8, 0x6f10, 0xb041, 0x7935, 0x46e0, 0x1, 0x1);
        gbc.writeMem(0xb908, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x46);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xf5a8);
        EXPECT(gbc.pc(), 0xb90a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb908), 0xcb);
        EXPECT(gbc.readMem(0xb909), 0x78);
        // CB 78 0245
        gbc.setState(0x205d, 0xf528, 0x97c0, 0x9c55, 0x3536, 0xd94f, 0x0, 0x0);
        gbc.writeMem(0x205d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x4f);
        EXPECT(gbc.sp(), 0xf528);
        EXPECT(gbc.pc(), 0x205f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0246
        gbc.setState(0x759c, 0xea5c, 0x40c0, 0x358e, 0x33ce, 0x5cc3, 0x0, 0x1);
        gbc.writeMem(0x759c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x40);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xea5c);
        EXPECT(gbc.pc(), 0x759e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0247
        gbc.setState(0xdcd4, 0xa43a, 0x1300, 0xa200, 0xc374, 0x60e6, 0x0, 0x1);
        gbc.writeMem(0xdcd4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xa43a);
        EXPECT(gbc.pc(), 0xdcd6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdcd4), 0xcb);
        EXPECT(gbc.readMem(0xdcd5), 0x78);
        // CB 78 0248
        gbc.setState(0xbf22, 0xb438, 0x7f10, 0x8784, 0xde6f, 0x9de7, 0x0, 0x0);
        gbc.writeMem(0xbf22, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x87);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0x6f);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xb438);
        EXPECT(gbc.pc(), 0xbf24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf22), 0xcb);
        EXPECT(gbc.readMem(0xbf23), 0x78);
        // CB 78 0249
        gbc.setState(0x153e, 0xde7e, 0x1640, 0x97fb, 0xaeca, 0xacf7, 0x0, 0x0);
        gbc.writeMem(0x153e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xac);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0xde7e);
        EXPECT(gbc.pc(), 0x1540);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 024A
        gbc.setState(0xdea3, 0xbabd, 0x3970, 0x8028, 0xc270, 0x581, 0x0, 0x1);
        gbc.writeMem(0xdea3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x39);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0x5);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0xbabd);
        EXPECT(gbc.pc(), 0xdea5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdea3), 0xcb);
        EXPECT(gbc.readMem(0xdea4), 0x78);
        // CB 78 024B
        gbc.setState(0xacdc, 0xc09d, 0xa510, 0xc17f, 0xbdcb, 0x2158, 0x1, 0x1);
        gbc.writeMem(0xacdc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0x21);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0xc09d);
        EXPECT(gbc.pc(), 0xacde);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xacdc), 0xcb);
        EXPECT(gbc.readMem(0xacdd), 0x78);
        // CB 78 024C
        gbc.setState(0xdd7b, 0x90d8, 0xc100, 0xdc68, 0x551b, 0xe1ad, 0x0, 0x0);
        gbc.writeMem(0xdd7b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc1);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x90d8);
        EXPECT(gbc.pc(), 0xdd7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd7b), 0xcb);
        EXPECT(gbc.readMem(0xdd7c), 0x78);
        // CB 78 024D
        gbc.setState(0x126a, 0xaa81, 0xdb50, 0xc17f, 0xf7dc, 0x5319, 0x1, 0x0);
        gbc.writeMem(0x126a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0xf7);
        EXPECT(gbc.e(),  0xdc);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0xaa81);
        EXPECT(gbc.pc(), 0x126c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 024E
        gbc.setState(0xd888, 0xdd94, 0xcf90, 0x71ad, 0x3998, 0x51aa, 0x1, 0x1);
        gbc.writeMem(0xd888, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0x71);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x98);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xdd94);
        EXPECT(gbc.pc(), 0xd88a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd888), 0xcb);
        EXPECT(gbc.readMem(0xd889), 0x78);
        // CB 78 024F
        gbc.setState(0x95b6, 0x1b59, 0xb1a0, 0xa105, 0x1ccd, 0xced6, 0x0, 0x1);
        gbc.writeMem(0x95b6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x1b59);
        EXPECT(gbc.pc(), 0x95b8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x95b6), 0xcb);
        EXPECT(gbc.readMem(0x95b7), 0x78);
        // CB 78 0250
        gbc.setState(0x3364, 0x41eb, 0x93e0, 0x361, 0x6716, 0xe1f0, 0x0, 0x1);
        gbc.writeMem(0x3364, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x16);
        EXPECT(gbc.h(),  0xe1);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0x41eb);
        EXPECT(gbc.pc(), 0x3366);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0251
        gbc.setState(0x4dfa, 0x5138, 0x8910, 0x4afc, 0x7a4f, 0x9568, 0x0, 0x1);
        gbc.writeMem(0x4dfa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x7a);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x95);
        EXPECT(gbc.l(),  0x68);
        EXPECT(gbc.sp(), 0x5138);
        EXPECT(gbc.pc(), 0x4dfc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0252
        gbc.setState(0xb35f, 0xe43f, 0xb8f0, 0x1dc3, 0x7154, 0xbf78, 0x0, 0x1);
        gbc.writeMem(0xb35f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb8);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x71);
        EXPECT(gbc.e(),  0x54);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x78);
        EXPECT(gbc.sp(), 0xe43f);
        EXPECT(gbc.pc(), 0xb361);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb35f), 0xcb);
        EXPECT(gbc.readMem(0xb360), 0x78);
        // CB 78 0253
        gbc.setState(0xc450, 0xd253, 0x5a0, 0x3aea, 0x511e, 0x5add, 0x0, 0x1);
        gbc.writeMem(0xc450, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0xea);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0xd253);
        EXPECT(gbc.pc(), 0xc452);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc450), 0xcb);
        EXPECT(gbc.readMem(0xc451), 0x78);
        // CB 78 0254
        gbc.setState(0xed5a, 0xfc46, 0x800, 0xd2db, 0xdbb6, 0xa831, 0x1, 0x1);
        gbc.writeMem(0xed5a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0xfc46);
        EXPECT(gbc.pc(), 0xed5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xed5a), 0xcb);
        EXPECT(gbc.readMem(0xed5b), 0x78);
        // CB 78 0255
        gbc.setState(0xe682, 0x26f5, 0xce60, 0x4781, 0x818b, 0x4c03, 0x0, 0x0);
        gbc.writeMem(0xe682, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x4c);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x26f5);
        EXPECT(gbc.pc(), 0xe684);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe682), 0xcb);
        EXPECT(gbc.readMem(0xe683), 0x78);
        // CB 78 0256
        gbc.setState(0xf69, 0x1096, 0x9f40, 0x969a, 0xe36a, 0xeb13, 0x0, 0x1);
        gbc.writeMem(0xf69, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0x13);
        EXPECT(gbc.sp(), 0x1096);
        EXPECT(gbc.pc(), 0xf6b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0257
        gbc.setState(0x6e2a, 0xa885, 0xd330, 0xdf59, 0xfd5d, 0x9ead, 0x0, 0x1);
        gbc.writeMem(0x6e2a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x59);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0xa885);
        EXPECT(gbc.pc(), 0x6e2c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0258
        gbc.setState(0x77b3, 0x9de0, 0xd8e0, 0xd4a8, 0xeb1d, 0x3d63, 0x0, 0x0);
        gbc.writeMem(0x77b3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x3d);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x9de0);
        EXPECT(gbc.pc(), 0x77b5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 025A
        gbc.setState(0xba08, 0x2556, 0x5e80, 0x636d, 0x9c78, 0x522b, 0x0, 0x0);
        gbc.writeMem(0xba08, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5e);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x52);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x2556);
        EXPECT(gbc.pc(), 0xba0a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xba08), 0xcb);
        EXPECT(gbc.readMem(0xba09), 0x78);
        // CB 78 025B
        gbc.setState(0xe47e, 0x50e5, 0x8570, 0x3e68, 0x5d07, 0x8eca, 0x0, 0x1);
        gbc.writeMem(0xe47e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x7);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x50e5);
        EXPECT(gbc.pc(), 0xe480);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe47e), 0xcb);
        EXPECT(gbc.readMem(0xe47f), 0x78);
        // CB 78 025C
        gbc.setState(0xe5ac, 0x2845, 0x4be0, 0x8153, 0xae5a, 0xd14b, 0x1, 0x0);
        gbc.writeMem(0xe5ac, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x4b);
        EXPECT(gbc.sp(), 0x2845);
        EXPECT(gbc.pc(), 0xe5ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5ac), 0xcb);
        EXPECT(gbc.readMem(0xe5ad), 0x78);
        // CB 78 025D
        gbc.setState(0x4922, 0x9ff2, 0xb220, 0x5b45, 0x7887, 0x28e6, 0x0, 0x0);
        gbc.writeMem(0x4922, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x9ff2);
        EXPECT(gbc.pc(), 0x4924);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 025E
        gbc.setState(0x269a, 0x5439, 0x5fe0, 0x4b3e, 0x666a, 0xdac0, 0x1, 0x1);
        gbc.writeMem(0x269a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xc0);
        EXPECT(gbc.sp(), 0x5439);
        EXPECT(gbc.pc(), 0x269c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 025F
        gbc.setState(0x2c6b, 0x522a, 0x4530, 0xca2b, 0x88ad, 0x9f8f, 0x1, 0x1);
        gbc.writeMem(0x2c6b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x2b);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x8f);
        EXPECT(gbc.sp(), 0x522a);
        EXPECT(gbc.pc(), 0x2c6d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0261
        gbc.setState(0x94fd, 0x478a, 0x6fa0, 0xdab8, 0x28f7, 0x59b4, 0x0, 0x1);
        gbc.writeMem(0x94fd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6f);
        EXPECT(gbc.b(),  0xda);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0x28);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x478a);
        EXPECT(gbc.pc(), 0x94ff);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x94fd), 0xcb);
        EXPECT(gbc.readMem(0x94fe), 0x78);
        // CB 78 0263
        gbc.setState(0x64e2, 0x7356, 0xa1e0, 0xc312, 0xabf8, 0xcfc9, 0x1, 0x0);
        gbc.writeMem(0x64e2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x7356);
        EXPECT(gbc.pc(), 0x64e4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0264
        gbc.setState(0xcc04, 0xd183, 0x98b0, 0xbca5, 0x6a1f, 0x70d0, 0x0, 0x1);
        gbc.writeMem(0xcc04, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0xa5);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xd183);
        EXPECT(gbc.pc(), 0xcc06);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc04), 0xcb);
        EXPECT(gbc.readMem(0xcc05), 0x78);
        // CB 78 0265
        gbc.setState(0x6991, 0x4a51, 0x3d10, 0x8a99, 0xc1c2, 0xab1, 0x0, 0x1);
        gbc.writeMem(0x6991, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xc1);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0x4a51);
        EXPECT(gbc.pc(), 0x6993);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0266
        gbc.setState(0x24d5, 0xbf5c, 0xe280, 0xe801, 0x875a, 0xcf67, 0x1, 0x1);
        gbc.writeMem(0x24d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x1);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbf5c);
        EXPECT(gbc.pc(), 0x24d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0267
        gbc.setState(0x7a9, 0x2418, 0x69a0, 0xbfd9, 0x1f3a, 0x564a, 0x0, 0x0);
        gbc.writeMem(0x7a9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0x2418);
        EXPECT(gbc.pc(), 0x7ab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0268
        gbc.setState(0xc38b, 0x3b10, 0x7ce0, 0x3348, 0x3844, 0xdf95, 0x0, 0x0);
        gbc.writeMem(0xc38b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x33);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x38);
        EXPECT(gbc.e(),  0x44);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x95);
        EXPECT(gbc.sp(), 0x3b10);
        EXPECT(gbc.pc(), 0xc38d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc38b), 0xcb);
        EXPECT(gbc.readMem(0xc38c), 0x78);
        // CB 78 0269
        gbc.setState(0x7ae5, 0x2272, 0x5c40, 0x756a, 0x8cd5, 0xdfc3, 0x1, 0x0);
        gbc.writeMem(0x7ae5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x75);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x8c);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2272);
        EXPECT(gbc.pc(), 0x7ae7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 026A
        gbc.setState(0xc48b, 0x81bb, 0xfc70, 0x3610, 0xc72, 0x6dc9, 0x1, 0x0);
        gbc.writeMem(0xc48b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0x81bb);
        EXPECT(gbc.pc(), 0xc48d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc48b), 0xcb);
        EXPECT(gbc.readMem(0xc48c), 0x78);
        // CB 78 026B
        gbc.setState(0x1045, 0xb77f, 0xbb80, 0x3648, 0x29dd, 0x7044, 0x1, 0x0);
        gbc.writeMem(0x1045, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0xdd);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0xb77f);
        EXPECT(gbc.pc(), 0x1047);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 026C
        gbc.setState(0x80df, 0xf354, 0x62e0, 0xf2f, 0x22d, 0x370, 0x0, 0x0);
        gbc.writeMem(0x80df, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x2d);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0xf354);
        EXPECT(gbc.pc(), 0x80e1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x80df), 0xcb);
        EXPECT(gbc.readMem(0x80e0), 0x78);
        // CB 78 026D
        gbc.setState(0x444c, 0x86ed, 0x9860, 0xfedb, 0x44f1, 0x80ea, 0x0, 0x1);
        gbc.writeMem(0x444c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x98);
        EXPECT(gbc.b(),  0xfe);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x86ed);
        EXPECT(gbc.pc(), 0x444e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 026E
        gbc.setState(0x349d, 0x465, 0x4cf0, 0x455b, 0x2aea, 0x4959, 0x0, 0x1);
        gbc.writeMem(0x349d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0x465);
        EXPECT(gbc.pc(), 0x349f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 026F
        gbc.setState(0x4f4b, 0x5b91, 0x7bf0, 0xb706, 0x5d1c, 0xbf5d, 0x0, 0x0);
        gbc.writeMem(0x4f4b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xbf);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x5b91);
        EXPECT(gbc.pc(), 0x4f4d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0270
        gbc.setState(0x60af, 0x3ddf, 0x7960, 0xe751, 0x183d, 0xc515, 0x1, 0x0);
        gbc.writeMem(0x60af, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x3d);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x3ddf);
        EXPECT(gbc.pc(), 0x60b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0271
        gbc.setState(0x5644, 0x8853, 0xaaf0, 0x78a7, 0xefba, 0x5a22, 0x1, 0x1);
        gbc.writeMem(0x5644, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa7);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x22);
        EXPECT(gbc.sp(), 0x8853);
        EXPECT(gbc.pc(), 0x5646);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0272
        gbc.setState(0xb01e, 0x7a21, 0xb380, 0x1b64, 0x2eb6, 0xfd15, 0x0, 0x1);
        gbc.writeMem(0xb01e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0x2e);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0x7a21);
        EXPECT(gbc.pc(), 0xb020);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb01e), 0xcb);
        EXPECT(gbc.readMem(0xb01f), 0x78);
        // CB 78 0273
        gbc.setState(0x537c, 0x6213, 0x1590, 0x3efd, 0x5f1d, 0x2f94, 0x1, 0x1);
        gbc.writeMem(0x537c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xfd);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x94);
        EXPECT(gbc.sp(), 0x6213);
        EXPECT(gbc.pc(), 0x537e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0274
        gbc.setState(0x516f, 0x6286, 0x5d0, 0x9b36, 0x4227, 0xc100, 0x1, 0x0);
        gbc.writeMem(0x516f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x6286);
        EXPECT(gbc.pc(), 0x5171);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0275
        gbc.setState(0x12d3, 0x50d0, 0x67c0, 0x360e, 0x6bdb, 0x5a2c, 0x0, 0x0);
        gbc.writeMem(0x12d3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0x6b);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x2c);
        EXPECT(gbc.sp(), 0x50d0);
        EXPECT(gbc.pc(), 0x12d5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0276
        gbc.setState(0xb2ab, 0x7701, 0x7a70, 0xc977, 0x6501, 0xe927, 0x1, 0x0);
        gbc.writeMem(0xb2ab, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0xc9);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x65);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x7701);
        EXPECT(gbc.pc(), 0xb2ad);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb2ab), 0xcb);
        EXPECT(gbc.readMem(0xb2ac), 0x78);
        // CB 78 0278
        gbc.setState(0x6877, 0x1d8d, 0x6cd0, 0x101e, 0x4727, 0x9ad, 0x1, 0x0);
        gbc.writeMem(0x6877, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0x47);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x1d8d);
        EXPECT(gbc.pc(), 0x6879);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0279
        gbc.setState(0xb5dd, 0x9b91, 0xd910, 0x7c17, 0x584d, 0xa556, 0x1, 0x1);
        gbc.writeMem(0xb5dd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd9);
        EXPECT(gbc.b(),  0x7c);
        EXPECT(gbc.c(),  0x17);
        EXPECT(gbc.d(),  0x58);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0xa5);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x9b91);
        EXPECT(gbc.pc(), 0xb5df);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5dd), 0xcb);
        EXPECT(gbc.readMem(0xb5de), 0x78);
        // CB 78 027A
        gbc.setState(0xbb6c, 0xcd9c, 0xe4c0, 0x3162, 0x4e9a, 0x58aa, 0x1, 0x1);
        gbc.writeMem(0xbb6c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0xcd9c);
        EXPECT(gbc.pc(), 0xbb6e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb6c), 0xcb);
        EXPECT(gbc.readMem(0xbb6d), 0x78);
        // CB 78 027B
        gbc.setState(0x15a1, 0x1ca1, 0x29f0, 0x95ce, 0x6f70, 0xd474, 0x1, 0x1);
        gbc.writeMem(0x15a1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0x95);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x70);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x1ca1);
        EXPECT(gbc.pc(), 0x15a3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 027C
        gbc.setState(0x56b, 0x611a, 0x9ab0, 0xa550, 0x1be2, 0xc93d, 0x1, 0x1);
        gbc.writeMem(0x56b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x50);
        EXPECT(gbc.d(),  0x1b);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0xc9);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x611a);
        EXPECT(gbc.pc(), 0x56d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 027F
        gbc.setState(0x288c, 0xfa0c, 0x5730, 0x9127, 0xabf8, 0x2754, 0x0, 0x0);
        gbc.writeMem(0x288c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x27);
        EXPECT(gbc.d(),  0xab);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x54);
        EXPECT(gbc.sp(), 0xfa0c);
        EXPECT(gbc.pc(), 0x288e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0280
        gbc.setState(0xcfb2, 0x565c, 0xddf0, 0xfbde, 0xf0b3, 0x369b, 0x1, 0x0);
        gbc.writeMem(0xcfb2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0xfb);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xf0);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x9b);
        EXPECT(gbc.sp(), 0x565c);
        EXPECT(gbc.pc(), 0xcfb4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcfb2), 0xcb);
        EXPECT(gbc.readMem(0xcfb3), 0x78);
        // CB 78 0281
        gbc.setState(0x1a67, 0x63a5, 0x78a0, 0x5d1b, 0x32, 0x2dc5, 0x1, 0x1);
        gbc.writeMem(0x1a67, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x0);
        EXPECT(gbc.e(),  0x32);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x63a5);
        EXPECT(gbc.pc(), 0x1a69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0282
        gbc.setState(0x3fd7, 0x5e0f, 0x81e0, 0xaaff, 0xba7e, 0x784d, 0x1, 0x0);
        gbc.writeMem(0x3fd7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x5e0f);
        EXPECT(gbc.pc(), 0x3fd9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0283
        gbc.setState(0x2f1e, 0xb24d, 0x78e0, 0xc22e, 0x88f2, 0x1d55, 0x1, 0x1);
        gbc.writeMem(0x2f1e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x78);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x2e);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0xf2);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0x55);
        EXPECT(gbc.sp(), 0xb24d);
        EXPECT(gbc.pc(), 0x2f20);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0284
        gbc.setState(0x9f36, 0x657f, 0xff70, 0xd841, 0xd5b0, 0xb99c, 0x1, 0x1);
        gbc.writeMem(0x9f36, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x657f);
        EXPECT(gbc.pc(), 0x9f38);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9f36), 0xcb);
        EXPECT(gbc.readMem(0x9f37), 0x78);
        // CB 78 0285
        gbc.setState(0x3e53, 0x3269, 0xe2c0, 0x3e55, 0x2b0d, 0x5301, 0x1, 0x1);
        gbc.writeMem(0x3e53, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xd);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0x1);
        EXPECT(gbc.sp(), 0x3269);
        EXPECT(gbc.pc(), 0x3e55);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0286
        gbc.setState(0xbfb7, 0x1ba4, 0x1c90, 0x7f9d, 0x478, 0x3ae6, 0x1, 0x1);
        gbc.writeMem(0xbfb7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x78);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0x1ba4);
        EXPECT(gbc.pc(), 0xbfb9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbfb7), 0xcb);
        EXPECT(gbc.readMem(0xbfb8), 0x78);
        // CB 78 0287
        gbc.setState(0x898, 0xd230, 0xcbf0, 0x39b, 0xfabf, 0x6061, 0x1, 0x1);
        gbc.writeMem(0x898, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0x9b);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0x60);
        EXPECT(gbc.l(),  0x61);
        EXPECT(gbc.sp(), 0xd230);
        EXPECT(gbc.pc(), 0x89a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0288
        gbc.setState(0x8535, 0x7c7, 0x1ce0, 0x8535, 0x557c, 0x53c6, 0x1, 0x1);
        gbc.writeMem(0x8535, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x35);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x7c7);
        EXPECT(gbc.pc(), 0x8537);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8535), 0xcb);
        EXPECT(gbc.readMem(0x8536), 0x78);
        // CB 78 0289
        gbc.setState(0x9e3c, 0x8b34, 0x4190, 0x3d68, 0x591d, 0x7820, 0x1, 0x1);
        gbc.writeMem(0x9e3c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x41);
        EXPECT(gbc.b(),  0x3d);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0x59);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x8b34);
        EXPECT(gbc.pc(), 0x9e3e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9e3c), 0xcb);
        EXPECT(gbc.readMem(0x9e3d), 0x78);
        // CB 78 028A
        gbc.setState(0x9733, 0xc81d, 0x9a60, 0x2bde, 0xd3de, 0x8a77, 0x1, 0x0);
        gbc.writeMem(0x9733, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9a);
        EXPECT(gbc.b(),  0x2b);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xde);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x77);
        EXPECT(gbc.sp(), 0xc81d);
        EXPECT(gbc.pc(), 0x9735);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9733), 0xcb);
        EXPECT(gbc.readMem(0x9734), 0x78);
        // CB 78 028B
        gbc.setState(0x4683, 0xf74d, 0xe460, 0xaeaa, 0xb49f, 0xc5f3, 0x0, 0x1);
        gbc.writeMem(0x4683, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xf3);
        EXPECT(gbc.sp(), 0xf74d);
        EXPECT(gbc.pc(), 0x4685);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 028C
        gbc.setState(0x8a49, 0x5e8, 0xc950, 0xfcfe, 0x118c, 0x7457, 0x1, 0x0);
        gbc.writeMem(0x8a49, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc9);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0x11);
        EXPECT(gbc.e(),  0x8c);
        EXPECT(gbc.h(),  0x74);
        EXPECT(gbc.l(),  0x57);
        EXPECT(gbc.sp(), 0x5e8);
        EXPECT(gbc.pc(), 0x8a4b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a49), 0xcb);
        EXPECT(gbc.readMem(0x8a4a), 0x78);
        // CB 78 028D
        gbc.setState(0x95, 0x6eef, 0x3d00, 0x52df, 0x68d4, 0xdf28, 0x1, 0x1);
        gbc.writeMem(0x95, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xdf);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xdf);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x6eef);
        EXPECT(gbc.pc(), 0x97);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 028E
        gbc.setState(0x5fd, 0x2351, 0xfb50, 0x60c1, 0x8a0a, 0x26c3, 0x1, 0x1);
        gbc.writeMem(0x5fd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfb);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc1);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0x2351);
        EXPECT(gbc.pc(), 0x5ff);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 028F
        gbc.setState(0x228e, 0x78ba, 0x1690, 0x3fba, 0x41c7, 0xaa31, 0x0, 0x1);
        gbc.writeMem(0x228e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x16);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x78ba);
        EXPECT(gbc.pc(), 0x2290);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0290
        gbc.setState(0x6aa1, 0x1bc1, 0x5590, 0x88b2, 0x7224, 0xf80a, 0x0, 0x0);
        gbc.writeMem(0x6aa1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0xa);
        EXPECT(gbc.sp(), 0x1bc1);
        EXPECT(gbc.pc(), 0x6aa3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0291
        gbc.setState(0x1098, 0xc995, 0xf980, 0xea25, 0xa52f, 0x6215, 0x0, 0x0);
        gbc.writeMem(0x1098, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf9);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x62);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xc995);
        EXPECT(gbc.pc(), 0x109a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0292
        gbc.setState(0x188e, 0x2968, 0xef70, 0x8560, 0x78b4, 0xd2f, 0x0, 0x0);
        gbc.writeMem(0x188e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xef);
        EXPECT(gbc.b(),  0x85);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0xd);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0x2968);
        EXPECT(gbc.pc(), 0x1890);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0293
        gbc.setState(0xb165, 0xc30, 0xb0a0, 0xf284, 0x2bb0, 0xe224, 0x0, 0x1);
        gbc.writeMem(0xb165, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0xf2);
        EXPECT(gbc.c(),  0x84);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xb0);
        EXPECT(gbc.h(),  0xe2);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xc30);
        EXPECT(gbc.pc(), 0xb167);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb165), 0xcb);
        EXPECT(gbc.readMem(0xb166), 0x78);
        // CB 78 0294
        gbc.setState(0x228b, 0xe29a, 0xb280, 0x9629, 0x163a, 0xa3f1, 0x0, 0x1);
        gbc.writeMem(0x228b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x29);
        EXPECT(gbc.d(),  0x16);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0xe29a);
        EXPECT(gbc.pc(), 0x228d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0295
        gbc.setState(0x640, 0x35b2, 0x94e0, 0xe4fe, 0xdc03, 0xdbd6, 0x1, 0x0);
        gbc.writeMem(0x640, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x94);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x35b2);
        EXPECT(gbc.pc(), 0x642);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0296
        gbc.setState(0x6f50, 0x1a79, 0x1760, 0x9091, 0x668d, 0x7897, 0x0, 0x1);
        gbc.writeMem(0x6f50, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1a79);
        EXPECT(gbc.pc(), 0x6f52);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0297
        gbc.setState(0x14b2, 0x5c1c, 0xc360, 0x57dd, 0x430, 0xfdf2, 0x0, 0x0);
        gbc.writeMem(0x14b2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc3);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0xf2);
        EXPECT(gbc.sp(), 0x5c1c);
        EXPECT(gbc.pc(), 0x14b4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0298
        gbc.setState(0xadc1, 0xc38f, 0x6b40, 0xa1d9, 0x10ac, 0xde0d, 0x0, 0x0);
        gbc.writeMem(0xadc1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6b);
        EXPECT(gbc.b(),  0xa1);
        EXPECT(gbc.c(),  0xd9);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xd);
        EXPECT(gbc.sp(), 0xc38f);
        EXPECT(gbc.pc(), 0xadc3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xadc1), 0xcb);
        EXPECT(gbc.readMem(0xadc2), 0x78);
        // CB 78 029A
        gbc.setState(0x24bf, 0x1cbf, 0xa520, 0x6ab1, 0xadae, 0x8d70, 0x0, 0x0);
        gbc.writeMem(0x24bf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x6a);
        EXPECT(gbc.c(),  0xb1);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x1cbf);
        EXPECT(gbc.pc(), 0x24c1);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 029C
        gbc.setState(0x55e9, 0x2b2, 0xa250, 0x5af3, 0x6dc8, 0xa4d4, 0x1, 0x0);
        gbc.writeMem(0x55e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xd4);
        EXPECT(gbc.sp(), 0x2b2);
        EXPECT(gbc.pc(), 0x55eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 029D
        gbc.setState(0xb85b, 0xb9c7, 0x2130, 0x67bd, 0x363, 0x42f4, 0x0, 0x0);
        gbc.writeMem(0xb85b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x67);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x3);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0xb9c7);
        EXPECT(gbc.pc(), 0xb85d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb85b), 0xcb);
        EXPECT(gbc.readMem(0xb85c), 0x78);
        // CB 78 029E
        gbc.setState(0x3b5d, 0x1058, 0x7cc0, 0x3a8a, 0xe2a4, 0x6d0e, 0x1, 0x0);
        gbc.writeMem(0x3b5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x1058);
        EXPECT(gbc.pc(), 0x3b5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 029F
        gbc.setState(0x534, 0x3902, 0x61c0, 0x7fcb, 0xe7da, 0x4d12, 0x0, 0x0);
        gbc.writeMem(0x534, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x61);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3902);
        EXPECT(gbc.pc(), 0x536);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02A0
        gbc.setState(0xa791, 0xa55f, 0x8210, 0xc679, 0x5ada, 0xcc3e, 0x1, 0x1);
        gbc.writeMem(0xa791, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x82);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x79);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xa55f);
        EXPECT(gbc.pc(), 0xa793);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa791), 0xcb);
        EXPECT(gbc.readMem(0xa792), 0x78);
        // CB 78 02A2
        gbc.setState(0x6822, 0xd16f, 0x77e0, 0x97dd, 0xbbb6, 0x1ba1, 0x0, 0x1);
        gbc.writeMem(0x6822, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x97);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xbb);
        EXPECT(gbc.e(),  0xb6);
        EXPECT(gbc.h(),  0x1b);
        EXPECT(gbc.l(),  0xa1);
        EXPECT(gbc.sp(), 0xd16f);
        EXPECT(gbc.pc(), 0x6824);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02A3
        gbc.setState(0x37ea, 0x1d2d, 0xe4d0, 0x5755, 0x90f9, 0x97c, 0x1, 0x1);
        gbc.writeMem(0x37ea, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe4);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x1d2d);
        EXPECT(gbc.pc(), 0x37ec);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02A4
        gbc.setState(0x3863, 0xdbd8, 0x2c20, 0x5070, 0x246a, 0x39b7, 0x1, 0x0);
        gbc.writeMem(0x3863, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xdbd8);
        EXPECT(gbc.pc(), 0x3865);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02A5
        gbc.setState(0x1083, 0xe935, 0xfed0, 0xef04, 0xb8ea, 0xf7e7, 0x0, 0x0);
        gbc.writeMem(0x1083, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0xe7);
        EXPECT(gbc.sp(), 0xe935);
        EXPECT(gbc.pc(), 0x1085);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02A6
        gbc.setState(0xcea9, 0x59d5, 0x9cb0, 0x9ca1, 0x68ef, 0x3130, 0x0, 0x0);
        gbc.writeMem(0xcea9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x9c);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0xef);
        EXPECT(gbc.h(),  0x31);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x59d5);
        EXPECT(gbc.pc(), 0xceab);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcea9), 0xcb);
        EXPECT(gbc.readMem(0xceaa), 0x78);
        // CB 78 02A7
        gbc.setState(0xa68e, 0x7c92, 0xca0, 0xb6c7, 0xa079, 0xc306, 0x0, 0x0);
        gbc.writeMem(0xa68e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xa0);
        EXPECT(gbc.e(),  0x79);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x7c92);
        EXPECT(gbc.pc(), 0xa690);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa68e), 0xcb);
        EXPECT(gbc.readMem(0xa68f), 0x78);
        // CB 78 02A8
        gbc.setState(0xa24e, 0x3374, 0x9530, 0x83ce, 0x3f85, 0x381d, 0x1, 0x0);
        gbc.writeMem(0xa24e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x95);
        EXPECT(gbc.b(),  0x83);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x3374);
        EXPECT(gbc.pc(), 0xa250);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa24e), 0xcb);
        EXPECT(gbc.readMem(0xa24f), 0x78);
        // CB 78 02A9
        gbc.setState(0xc4db, 0xed19, 0x7d20, 0x60b, 0x8340, 0x27ef, 0x1, 0x1);
        gbc.writeMem(0xc4db, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x6);
        EXPECT(gbc.c(),  0xb);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0xed19);
        EXPECT(gbc.pc(), 0xc4dd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc4db), 0xcb);
        EXPECT(gbc.readMem(0xc4dc), 0x78);
        // CB 78 02AA
        gbc.setState(0x6e77, 0x5e39, 0xb410, 0x8e24, 0xbc59, 0x829e, 0x1, 0x0);
        gbc.writeMem(0x6e77, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb4);
        EXPECT(gbc.b(),  0x8e);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x5e39);
        EXPECT(gbc.pc(), 0x6e79);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02AB
        gbc.setState(0x495, 0x72b2, 0x59a0, 0xc3c8, 0x8787, 0xc88b, 0x1, 0x1);
        gbc.writeMem(0x495, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xc8);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0x72b2);
        EXPECT(gbc.pc(), 0x497);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02AC
        gbc.setState(0x3f42, 0xbc2f, 0xa4a0, 0x600c, 0xbae8, 0x4e9d, 0x0, 0x1);
        gbc.writeMem(0x3f42, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0x60);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0xba);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xbc2f);
        EXPECT(gbc.pc(), 0x3f44);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02AD
        gbc.setState(0x4c0d, 0xf44f, 0x2d20, 0x8f05, 0x128d, 0x6ec3, 0x0, 0x0);
        gbc.writeMem(0x4c0d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2d);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0x12);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0xc3);
        EXPECT(gbc.sp(), 0xf44f);
        EXPECT(gbc.pc(), 0x4c0f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02AF
        gbc.setState(0x16ee, 0xb82b, 0x1430, 0x7332, 0x43ab, 0x13ce, 0x1, 0x0);
        gbc.writeMem(0x16ee, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x14);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0x32);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xb82b);
        EXPECT(gbc.pc(), 0x16f0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02B0
        gbc.setState(0xe80a, 0x5f1c, 0xc680, 0x96, 0xe320, 0x33b, 0x0, 0x1);
        gbc.writeMem(0xe80a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x3);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x5f1c);
        EXPECT(gbc.pc(), 0xe80c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe80a), 0xcb);
        EXPECT(gbc.readMem(0xe80b), 0x78);
        // CB 78 02B1
        gbc.setState(0x9065, 0x9168, 0xd060, 0x4304, 0xeb6e, 0xd4ae, 0x0, 0x1);
        gbc.writeMem(0x9065, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0x4);
        EXPECT(gbc.d(),  0xeb);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0xd4);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x9168);
        EXPECT(gbc.pc(), 0x9067);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9065), 0xcb);
        EXPECT(gbc.readMem(0x9066), 0x78);
        // CB 78 02B2
        gbc.setState(0x854, 0x21ea, 0x27f0, 0xb488, 0xaed4, 0x92d3, 0x0, 0x1);
        gbc.writeMem(0x854, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x27);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x92);
        EXPECT(gbc.l(),  0xd3);
        EXPECT(gbc.sp(), 0x21ea);
        EXPECT(gbc.pc(), 0x856);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02B3
        gbc.setState(0x791f, 0x7041, 0x4810, 0x3ca, 0x5ccb, 0xc533, 0x1, 0x1);
        gbc.writeMem(0x791f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x48);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0xcb);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x7041);
        EXPECT(gbc.pc(), 0x7921);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02B4
        gbc.setState(0x8469, 0x55c4, 0x9bd0, 0x1bd6, 0x48a8, 0xbcd2, 0x1, 0x1);
        gbc.writeMem(0x8469, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9b);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x48);
        EXPECT(gbc.e(),  0xa8);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0x55c4);
        EXPECT(gbc.pc(), 0x846b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8469), 0xcb);
        EXPECT(gbc.readMem(0x846a), 0x78);
        // CB 78 02B5
        gbc.setState(0x36c5, 0x92cc, 0xd4c0, 0xd003, 0x632b, 0xed9c, 0x1, 0x0);
        gbc.writeMem(0x36c5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x9c);
        EXPECT(gbc.sp(), 0x92cc);
        EXPECT(gbc.pc(), 0x36c7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02B6
        gbc.setState(0xe6d8, 0x877d, 0xa530, 0x3c51, 0x27e2, 0x6aea, 0x0, 0x0);
        gbc.writeMem(0xe6d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa5);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe2);
        EXPECT(gbc.h(),  0x6a);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x877d);
        EXPECT(gbc.pc(), 0xe6da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe6d8), 0xcb);
        EXPECT(gbc.readMem(0xe6d9), 0x78);
        // CB 78 02B7
        gbc.setState(0x7eb7, 0xc760, 0x3a00, 0x6b62, 0x60d7, 0x8b41, 0x0, 0x1);
        gbc.writeMem(0x7eb7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0x62);
        EXPECT(gbc.d(),  0x60);
        EXPECT(gbc.e(),  0xd7);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xc760);
        EXPECT(gbc.pc(), 0x7eb9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02B8
        gbc.setState(0xa0a4, 0xcb92, 0x1300, 0x8908, 0xed5f, 0x58ec, 0x0, 0x0);
        gbc.writeMem(0xa0a4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0x58);
        EXPECT(gbc.l(),  0xec);
        EXPECT(gbc.sp(), 0xcb92);
        EXPECT(gbc.pc(), 0xa0a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0a4), 0xcb);
        EXPECT(gbc.readMem(0xa0a5), 0x78);
        // CB 78 02B9
        gbc.setState(0xedcb, 0xfea6, 0x5510, 0xed3b, 0x4605, 0xb02b, 0x1, 0x1);
        gbc.writeMem(0xedcb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0xfea6);
        EXPECT(gbc.pc(), 0xedcd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedcb), 0xcb);
        EXPECT(gbc.readMem(0xedcc), 0x78);
        // CB 78 02BA
        gbc.setState(0xd3c0, 0x1f7d, 0xec20, 0x4e3, 0x2c6e, 0x22fb, 0x1, 0x0);
        gbc.writeMem(0xd3c0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x4);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x1f7d);
        EXPECT(gbc.pc(), 0xd3c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd3c0), 0xcb);
        EXPECT(gbc.readMem(0xd3c1), 0x78);
        // CB 78 02BB
        gbc.setState(0x72ff, 0x5b04, 0x8f70, 0xf3, 0x2bcc, 0xd1e5, 0x1, 0x0);
        gbc.writeMem(0x72ff, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x0);
        EXPECT(gbc.c(),  0xf3);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x5b04);
        EXPECT(gbc.pc(), 0x7301);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02BC
        gbc.setState(0xca67, 0x8299, 0x15c0, 0x79cf, 0xbe3f, 0xff7d, 0x1, 0x0);
        gbc.writeMem(0xca67, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0xcf);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x3f);
        EXPECT(gbc.h(),  0xff);
        EXPECT(gbc.l(),  0x7d);
        EXPECT(gbc.sp(), 0x8299);
        EXPECT(gbc.pc(), 0xca69);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xca67), 0xcb);
        EXPECT(gbc.readMem(0xca68), 0x78);
        // CB 78 02BD
        gbc.setState(0xb054, 0xee4b, 0xb620, 0xdf6f, 0xe2c4, 0xcb7, 0x0, 0x1);
        gbc.writeMem(0xb054, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0xe2);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xb7);
        EXPECT(gbc.sp(), 0xee4b);
        EXPECT(gbc.pc(), 0xb056);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb054), 0xcb);
        EXPECT(gbc.readMem(0xb055), 0x78);
        // CB 78 02BE
        gbc.setState(0x75b5, 0xf5b, 0x6c90, 0xd32d, 0x2fc8, 0x54cb, 0x0, 0x0);
        gbc.writeMem(0x75b5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xd3);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x2f);
        EXPECT(gbc.e(),  0xc8);
        EXPECT(gbc.h(),  0x54);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0xf5b);
        EXPECT(gbc.pc(), 0x75b7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02BF
        gbc.setState(0x8dd1, 0x5d67, 0xc720, 0x91e4, 0xf48a, 0xfb30, 0x0, 0x0);
        gbc.writeMem(0x8dd1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0xe4);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x8a);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0x30);
        EXPECT(gbc.sp(), 0x5d67);
        EXPECT(gbc.pc(), 0x8dd3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8dd1), 0xcb);
        EXPECT(gbc.readMem(0x8dd2), 0x78);
        // CB 78 02C1
        gbc.setState(0x3ef7, 0xe3ab, 0xcb90, 0xe53a, 0xd525, 0x2c52, 0x0, 0x0);
        gbc.writeMem(0x3ef7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x3a);
        EXPECT(gbc.d(),  0xd5);
        EXPECT(gbc.e(),  0x25);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x52);
        EXPECT(gbc.sp(), 0xe3ab);
        EXPECT(gbc.pc(), 0x3ef9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02C2
        gbc.setState(0x6e3c, 0x7f34, 0x32d0, 0x8481, 0xb0ae, 0x38c7, 0x0, 0x1);
        gbc.writeMem(0x6e3c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0x38);
        EXPECT(gbc.l(),  0xc7);
        EXPECT(gbc.sp(), 0x7f34);
        EXPECT(gbc.pc(), 0x6e3e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02C3
        gbc.setState(0x307a, 0x5e0b, 0xe250, 0x52b3, 0x2162, 0x73a3, 0x0, 0x1);
        gbc.writeMem(0x307a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x52);
        EXPECT(gbc.c(),  0xb3);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x73);
        EXPECT(gbc.l(),  0xa3);
        EXPECT(gbc.sp(), 0x5e0b);
        EXPECT(gbc.pc(), 0x307c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02C4
        gbc.setState(0xbb86, 0x98bd, 0x840, 0xefc0, 0x5a69, 0x66ef, 0x1, 0x1);
        gbc.writeMem(0xbb86, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x5a);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x98bd);
        EXPECT(gbc.pc(), 0xbb88);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb86), 0xcb);
        EXPECT(gbc.readMem(0xbb87), 0x78);
        // CB 78 02C6
        gbc.setState(0x67f6, 0x2738, 0x20c0, 0x68a1, 0x5c85, 0xaef1, 0x1, 0x1);
        gbc.writeMem(0x67f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x20);
        EXPECT(gbc.b(),  0x68);
        EXPECT(gbc.c(),  0xa1);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xf1);
        EXPECT(gbc.sp(), 0x2738);
        EXPECT(gbc.pc(), 0x67f8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02C7
        gbc.setState(0xdcb6, 0xefb6, 0x4ff0, 0x8699, 0xbe10, 0xa2d8, 0x0, 0x1);
        gbc.writeMem(0xdcb6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xbe);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0xa2);
        EXPECT(gbc.l(),  0xd8);
        EXPECT(gbc.sp(), 0xefb6);
        EXPECT(gbc.pc(), 0xdcb8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdcb6), 0xcb);
        EXPECT(gbc.readMem(0xdcb7), 0x78);
        // CB 78 02C9
        gbc.setState(0x1ce0, 0x84e9, 0xd8f0, 0xd2d8, 0x8329, 0x7afc, 0x1, 0x1);
        gbc.writeMem(0x1ce0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x7a);
        EXPECT(gbc.l(),  0xfc);
        EXPECT(gbc.sp(), 0x84e9);
        EXPECT(gbc.pc(), 0x1ce2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02CA
        gbc.setState(0xde38, 0xb2b7, 0x270, 0xddcd, 0x1c7e, 0xfd60, 0x1, 0x1);
        gbc.writeMem(0xde38, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xcd);
        EXPECT(gbc.d(),  0x1c);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xfd);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xb2b7);
        EXPECT(gbc.pc(), 0xde3a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde38), 0xcb);
        EXPECT(gbc.readMem(0xde39), 0x78);
        // CB 78 02CB
        gbc.setState(0xa7a4, 0x6be4, 0x7500, 0xe836, 0x8d0c, 0x83f5, 0x0, 0x0);
        gbc.writeMem(0xa7a4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x75);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x8d);
        EXPECT(gbc.e(),  0xc);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x6be4);
        EXPECT(gbc.pc(), 0xa7a6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa7a4), 0xcb);
        EXPECT(gbc.readMem(0xa7a5), 0x78);
        // CB 78 02CC
        gbc.setState(0x4786, 0x7b99, 0xf240, 0x8b4f, 0xb005, 0xcf9f, 0x0, 0x1);
        gbc.writeMem(0x4786, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x7b99);
        EXPECT(gbc.pc(), 0x4788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02CD
        gbc.setState(0xbb25, 0x6006, 0x56b0, 0x5f1e, 0xce20, 0xc12a, 0x0, 0x1);
        gbc.writeMem(0xbb25, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1e);
        EXPECT(gbc.d(),  0xce);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0x6006);
        EXPECT(gbc.pc(), 0xbb27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbb25), 0xcb);
        EXPECT(gbc.readMem(0xbb26), 0x78);
        // CB 78 02CE
        gbc.setState(0x7aa2, 0xa3ff, 0x8900, 0xb326, 0xc37f, 0x44ed, 0x0, 0x1);
        gbc.writeMem(0x7aa2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0xa3ff);
        EXPECT(gbc.pc(), 0x7aa4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02D0
        gbc.setState(0xb592, 0x67cd, 0x1e10, 0xdc7e, 0xd3bb, 0x66d1, 0x1, 0x0);
        gbc.writeMem(0xb592, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1e);
        EXPECT(gbc.b(),  0xdc);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0xd1);
        EXPECT(gbc.sp(), 0x67cd);
        EXPECT(gbc.pc(), 0xb594);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb592), 0xcb);
        EXPECT(gbc.readMem(0xb593), 0x78);
        // CB 78 02D1
        gbc.setState(0xc478, 0x67bc, 0x2170, 0x275b, 0xac9f, 0x7811, 0x1, 0x1);
        gbc.writeMem(0xc478, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xac);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x78);
        EXPECT(gbc.l(),  0x11);
        EXPECT(gbc.sp(), 0x67bc);
        EXPECT(gbc.pc(), 0xc47a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc478), 0xcb);
        EXPECT(gbc.readMem(0xc479), 0x78);
        // CB 78 02D2
        gbc.setState(0x26ff, 0x2e37, 0x8fb0, 0x7470, 0x8114, 0xfc3a, 0x1, 0x1);
        gbc.writeMem(0x26ff, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8f);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x2e37);
        EXPECT(gbc.pc(), 0x2701);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02D3
        gbc.setState(0xeaaa, 0x62a4, 0xffa0, 0x664d, 0xf27, 0x1780, 0x1, 0x0);
        gbc.writeMem(0xeaaa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x17);
        EXPECT(gbc.l(),  0x80);
        EXPECT(gbc.sp(), 0x62a4);
        EXPECT(gbc.pc(), 0xeaac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeaaa), 0xcb);
        EXPECT(gbc.readMem(0xeaab), 0x78);
        // CB 78 02D4
        gbc.setState(0x28a7, 0x97c, 0xd840, 0xaf61, 0x84a0, 0x4bf5, 0x1, 0x1);
        gbc.writeMem(0x28a7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd8);
        EXPECT(gbc.b(),  0xaf);
        EXPECT(gbc.c(),  0x61);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x97c);
        EXPECT(gbc.pc(), 0x28a9);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02D5
        gbc.setState(0x1c82, 0xe50b, 0x3ff0, 0x32fa, 0xa9fa, 0x9be0, 0x1, 0x0);
        gbc.writeMem(0x1c82, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x32);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x9b);
        EXPECT(gbc.l(),  0xe0);
        EXPECT(gbc.sp(), 0xe50b);
        EXPECT(gbc.pc(), 0x1c84);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02D7
        gbc.setState(0x7e71, 0xe13d, 0x8d80, 0x23d6, 0x27e3, 0x8e79, 0x0, 0x0);
        gbc.writeMem(0x7e71, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0x23);
        EXPECT(gbc.c(),  0xd6);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x79);
        EXPECT(gbc.sp(), 0xe13d);
        EXPECT(gbc.pc(), 0x7e73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02D8
        gbc.setState(0xd966, 0xbdb0, 0x4fb0, 0xd6d4, 0x36fe, 0x8c2e, 0x0, 0x1);
        gbc.writeMem(0xd966, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x36);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x2e);
        EXPECT(gbc.sp(), 0xbdb0);
        EXPECT(gbc.pc(), 0xd968);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd966), 0xcb);
        EXPECT(gbc.readMem(0xd967), 0x78);
        // CB 78 02D9
        gbc.setState(0x9571, 0x774a, 0xf290, 0x6e4a, 0x9ce9, 0xeb0e, 0x0, 0x1);
        gbc.writeMem(0x9571, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf2);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x9c);
        EXPECT(gbc.e(),  0xe9);
        EXPECT(gbc.h(),  0xeb);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x774a);
        EXPECT(gbc.pc(), 0x9573);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9571), 0xcb);
        EXPECT(gbc.readMem(0x9572), 0x78);
        // CB 78 02DA
        gbc.setState(0xb397, 0x82bc, 0x9120, 0x8442, 0x7dae, 0xd245, 0x0, 0x0);
        gbc.writeMem(0xb397, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0x7d);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xd2);
        EXPECT(gbc.l(),  0x45);
        EXPECT(gbc.sp(), 0x82bc);
        EXPECT(gbc.pc(), 0xb399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb397), 0xcb);
        EXPECT(gbc.readMem(0xb398), 0x78);
        // CB 78 02DB
        gbc.setState(0x8e5a, 0x3f59, 0x3100, 0xd47, 0x81bf, 0xc202, 0x1, 0x0);
        gbc.writeMem(0x8e5a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x47);
        EXPECT(gbc.d(),  0x81);
        EXPECT(gbc.e(),  0xbf);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0x3f59);
        EXPECT(gbc.pc(), 0x8e5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8e5a), 0xcb);
        EXPECT(gbc.readMem(0x8e5b), 0x78);
        // CB 78 02DC
        gbc.setState(0x6732, 0x8bda, 0x5b40, 0xab3e, 0x892f, 0xfa1d, 0x1, 0x1);
        gbc.writeMem(0x6732, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0x89);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xfa);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0x8bda);
        EXPECT(gbc.pc(), 0x6734);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02DD
        gbc.setState(0x3e20, 0x2ab5, 0xdb0, 0xb377, 0x1f56, 0xc16a, 0x0, 0x1);
        gbc.writeMem(0x3e20, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0xb3);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x6a);
        EXPECT(gbc.sp(), 0x2ab5);
        EXPECT(gbc.pc(), 0x3e22);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02DE
        gbc.setState(0x8786, 0xbb75, 0x8380, 0xdf86, 0xfae8, 0x3f93, 0x0, 0x1);
        gbc.writeMem(0x8786, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x83);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xfa);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbb75);
        EXPECT(gbc.pc(), 0x8788);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8786), 0xcb);
        EXPECT(gbc.readMem(0x8787), 0x78);
        // CB 78 02DF
        gbc.setState(0x183f, 0x34fe, 0xb90, 0x24d, 0xbdf, 0xc163, 0x1, 0x0);
        gbc.writeMem(0x183f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0x2);
        EXPECT(gbc.c(),  0x4d);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0xdf);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0x63);
        EXPECT(gbc.sp(), 0x34fe);
        EXPECT(gbc.pc(), 0x1841);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02E0
        gbc.setState(0x931d, 0xaec5, 0xff70, 0x1548, 0xc628, 0xe882, 0x0, 0x0);
        gbc.writeMem(0x931d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0x28);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x82);
        EXPECT(gbc.sp(), 0xaec5);
        EXPECT(gbc.pc(), 0x931f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x931d), 0xcb);
        EXPECT(gbc.readMem(0x931e), 0x78);
        // CB 78 02E1
        gbc.setState(0x5200, 0xa02a, 0x1260, 0x13fe, 0xf445, 0xdb2a, 0x1, 0x0);
        gbc.writeMem(0x5200, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0xfe);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xdb);
        EXPECT(gbc.l(),  0x2a);
        EXPECT(gbc.sp(), 0xa02a);
        EXPECT(gbc.pc(), 0x5202);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02E2
        gbc.setState(0x4e3, 0xb828, 0x69e0, 0x730c, 0x6a91, 0xed43, 0x0, 0x1);
        gbc.writeMem(0x4e3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x69);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc);
        EXPECT(gbc.d(),  0x6a);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xed);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0xb828);
        EXPECT(gbc.pc(), 0x4e5);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02E3
        gbc.setState(0x4d73, 0x3e34, 0xb930, 0x9141, 0x10f9, 0x1af7, 0x1, 0x0);
        gbc.writeMem(0x4d73, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x91);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x10);
        EXPECT(gbc.e(),  0xf9);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0xf7);
        EXPECT(gbc.sp(), 0x3e34);
        EXPECT(gbc.pc(), 0x4d75);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02E4
        gbc.setState(0x3976, 0x2073, 0xdfc0, 0xf363, 0xe0d4, 0xaaed, 0x1, 0x1);
        gbc.writeMem(0x3976, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0xaa);
        EXPECT(gbc.l(),  0xed);
        EXPECT(gbc.sp(), 0x2073);
        EXPECT(gbc.pc(), 0x3978);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02E5
        gbc.setState(0x79d1, 0x3263, 0x1b90, 0xb24, 0xa868, 0x1341, 0x1, 0x1);
        gbc.writeMem(0x79d1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xb);
        EXPECT(gbc.c(),  0x24);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0x68);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0x3263);
        EXPECT(gbc.pc(), 0x79d3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02E6
        gbc.setState(0xdc24, 0x71cb, 0x70e0, 0xc78b, 0xb240, 0x77dd, 0x0, 0x0);
        gbc.writeMem(0xdc24, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xc7);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x71cb);
        EXPECT(gbc.pc(), 0xdc26);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdc24), 0xcb);
        EXPECT(gbc.readMem(0xdc25), 0x78);
        // CB 78 02E7
        gbc.setState(0xe6aa, 0xd948, 0xbe60, 0x3c00, 0xe9e5, 0xca6, 0x0, 0x1);
        gbc.writeMem(0xe6aa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xe5);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xd948);
        EXPECT(gbc.pc(), 0xe6ac);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe6aa), 0xcb);
        EXPECT(gbc.readMem(0xe6ab), 0x78);
        // CB 78 02E8
        gbc.setState(0xc5c0, 0xcc47, 0xaf0, 0x3581, 0x21cd, 0x2a20, 0x1, 0x1);
        gbc.writeMem(0xc5c0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x81);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xcd);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xcc47);
        EXPECT(gbc.pc(), 0xc5c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc5c0), 0xcb);
        EXPECT(gbc.readMem(0xc5c1), 0x78);
        // CB 78 02E9
        gbc.setState(0x372e, 0x549c, 0x7900, 0x92eb, 0xb50e, 0xf58, 0x0, 0x0);
        gbc.writeMem(0x372e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xeb);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0xe);
        EXPECT(gbc.h(),  0xf);
        EXPECT(gbc.l(),  0x58);
        EXPECT(gbc.sp(), 0x549c);
        EXPECT(gbc.pc(), 0x3730);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02EA
        gbc.setState(0xb667, 0x1f75, 0x7930, 0x9839, 0xc4a7, 0xc8dd, 0x0, 0x1);
        gbc.writeMem(0xb667, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x79);
        EXPECT(gbc.b(),  0x98);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xdd);
        EXPECT(gbc.sp(), 0x1f75);
        EXPECT(gbc.pc(), 0xb669);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb667), 0xcb);
        EXPECT(gbc.readMem(0xb668), 0x78);
        // CB 78 02EB
        gbc.setState(0xa670, 0xa022, 0xe240, 0xba0f, 0x43f8, 0x759, 0x0, 0x1);
        gbc.writeMem(0xa670, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x7);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa022);
        EXPECT(gbc.pc(), 0xa672);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa670), 0xcb);
        EXPECT(gbc.readMem(0xa671), 0x78);
        // CB 78 02EC
        gbc.setState(0xd156, 0xbabe, 0x1850, 0xa25a, 0x6850, 0xb7d5, 0x1, 0x1);
        gbc.writeMem(0xd156, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x68);
        EXPECT(gbc.e(),  0x50);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0xbabe);
        EXPECT(gbc.pc(), 0xd158);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd156), 0xcb);
        EXPECT(gbc.readMem(0xd157), 0x78);
        // CB 78 02ED
        gbc.setState(0x8a01, 0x97a0, 0xa8f0, 0x51c0, 0x22cf, 0xce5d, 0x0, 0x0);
        gbc.writeMem(0x8a01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x22);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x5d);
        EXPECT(gbc.sp(), 0x97a0);
        EXPECT(gbc.pc(), 0x8a03);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8a01), 0xcb);
        EXPECT(gbc.readMem(0x8a02), 0x78);
        // CB 78 02EE
        gbc.setState(0xd598, 0x9447, 0xb7a0, 0xbc9e, 0xaada, 0xc8c5, 0x1, 0x1);
        gbc.writeMem(0xd598, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb7);
        EXPECT(gbc.b(),  0xbc);
        EXPECT(gbc.c(),  0x9e);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0xda);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0x9447);
        EXPECT(gbc.pc(), 0xd59a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd598), 0xcb);
        EXPECT(gbc.readMem(0xd599), 0x78);
        // CB 78 02EF
        gbc.setState(0x6a5a, 0xa9de, 0x6350, 0x101d, 0x5335, 0x80f0, 0x1, 0x0);
        gbc.writeMem(0x6a5a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x10);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x80);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xa9de);
        EXPECT(gbc.pc(), 0x6a5c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02F0
        gbc.setState(0x427f, 0xd0ff, 0xde40, 0x4ef0, 0xa730, 0xe4e1, 0x0, 0x1);
        gbc.writeMem(0x427f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0x4e);
        EXPECT(gbc.c(),  0xf0);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0xe1);
        EXPECT(gbc.sp(), 0xd0ff);
        EXPECT(gbc.pc(), 0x4281);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02F1
        gbc.setState(0x3db9, 0xb2fb, 0x5f90, 0x9b15, 0x74b3, 0x7c88, 0x0, 0x0);
        gbc.writeMem(0x3db9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5f);
        EXPECT(gbc.b(),  0x9b);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0xb2fb);
        EXPECT(gbc.pc(), 0x3dbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02F2
        gbc.setState(0x78a, 0xa617, 0xa900, 0x578e, 0x291c, 0xf559, 0x0, 0x1);
        gbc.writeMem(0x78a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa9);
        EXPECT(gbc.b(),  0x57);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xa617);
        EXPECT(gbc.pc(), 0x78c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02F3
        gbc.setState(0xad7d, 0x6394, 0x3410, 0xc620, 0xa4d4, 0x8540, 0x1, 0x1);
        gbc.writeMem(0xad7d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x34);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0x20);
        EXPECT(gbc.d(),  0xa4);
        EXPECT(gbc.e(),  0xd4);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x40);
        EXPECT(gbc.sp(), 0x6394);
        EXPECT(gbc.pc(), 0xad7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad7d), 0xcb);
        EXPECT(gbc.readMem(0xad7e), 0x78);
        // CB 78 02F4
        gbc.setState(0x85c0, 0xaa1b, 0xdcf0, 0xbd02, 0xfc5e, 0x85e6, 0x1, 0x1);
        gbc.writeMem(0x85c0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdc);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0xe6);
        EXPECT(gbc.sp(), 0xaa1b);
        EXPECT(gbc.pc(), 0x85c2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85c0), 0xcb);
        EXPECT(gbc.readMem(0x85c1), 0x78);
        // CB 78 02F5
        gbc.setState(0xde6d, 0x7d22, 0xb9d0, 0x81b7, 0x577e, 0xab6f, 0x0, 0x1);
        gbc.writeMem(0xde6d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0xb7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0xab);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0x7d22);
        EXPECT(gbc.pc(), 0xde6f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde6d), 0xcb);
        EXPECT(gbc.readMem(0xde6e), 0x78);
        // CB 78 02F6
        gbc.setState(0x1c25, 0x5e27, 0x6aa0, 0x51c2, 0x8574, 0x7deb, 0x0, 0x0);
        gbc.writeMem(0x1c25, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6a);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x7d);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0x5e27);
        EXPECT(gbc.pc(), 0x1c27);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02F7
        gbc.setState(0x38b0, 0xa451, 0xbd0, 0xe4a8, 0x90f8, 0xe446, 0x1, 0x1);
        gbc.writeMem(0x38b0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0xa8);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x46);
        EXPECT(gbc.sp(), 0xa451);
        EXPECT(gbc.pc(), 0x38b2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02F8
        gbc.setState(0x6075, 0x1f41, 0x3f30, 0x8064, 0xd87f, 0xcf7a, 0x0, 0x0);
        gbc.writeMem(0x6075, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3f);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0x64);
        EXPECT(gbc.d(),  0xd8);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x1f41);
        EXPECT(gbc.pc(), 0x6077);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02F9
        gbc.setState(0x906e, 0x5d9, 0x2250, 0xe6d3, 0xc62, 0x91bd, 0x1, 0x0);
        gbc.writeMem(0x906e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x22);
        EXPECT(gbc.b(),  0xe6);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x5d9);
        EXPECT(gbc.pc(), 0x9070);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x906e), 0xcb);
        EXPECT(gbc.readMem(0x906f), 0x78);
        // CB 78 02FA
        gbc.setState(0x5e6e, 0x7337, 0x2660, 0x8e6, 0x4912, 0xabd, 0x1, 0x0);
        gbc.writeMem(0x5e6e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0x49);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0xbd);
        EXPECT(gbc.sp(), 0x7337);
        EXPECT(gbc.pc(), 0x5e70);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 02FB
        gbc.setState(0x92ef, 0xd839, 0xcc60, 0xf091, 0x8324, 0x395a, 0x1, 0x1);
        gbc.writeMem(0x92ef, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcc);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x91);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x24);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xd839);
        EXPECT(gbc.pc(), 0x92f1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x92ef), 0xcb);
        EXPECT(gbc.readMem(0x92f0), 0x78);
        // CB 78 02FC
        gbc.setState(0x5c74, 0x6184, 0xebf0, 0x244a, 0x7e57, 0x5629, 0x0, 0x1);
        gbc.writeMem(0x5c74, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x29);
        EXPECT(gbc.sp(), 0x6184);
        EXPECT(gbc.pc(), 0x5c76);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 02FD
        gbc.setState(0xbb3f, 0x691, 0x5cc0, 0xa513, 0x23a2, 0x9f05, 0x1, 0x1);
        gbc.writeMem(0xbb3f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x9f);
        EXPECT(gbc.l(),  0x5);
        EXPECT(gbc.sp(), 0x691);
        EXPECT(gbc.pc(), 0xbb41);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbb3f), 0xcb);
        EXPECT(gbc.readMem(0xbb40), 0x78);
        // CB 78 02FE
        gbc.setState(0xc73e, 0x913f, 0x7cc0, 0xd913, 0x96a9, 0xeca6, 0x0, 0x1);
        gbc.writeMem(0xc73e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7c);
        EXPECT(gbc.b(),  0xd9);
        EXPECT(gbc.c(),  0x13);
        EXPECT(gbc.d(),  0x96);
        EXPECT(gbc.e(),  0xa9);
        EXPECT(gbc.h(),  0xec);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x913f);
        EXPECT(gbc.pc(), 0xc740);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc73e), 0xcb);
        EXPECT(gbc.readMem(0xc73f), 0x78);
        // CB 78 02FF
        gbc.setState(0x26ba, 0xf3a, 0xc0b0, 0x932f, 0x5036, 0xe015, 0x1, 0x0);
        gbc.writeMem(0x26ba, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc0);
        EXPECT(gbc.b(),  0x93);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0x50);
        EXPECT(gbc.e(),  0x36);
        EXPECT(gbc.h(),  0xe0);
        EXPECT(gbc.l(),  0x15);
        EXPECT(gbc.sp(), 0xf3a);
        EXPECT(gbc.pc(), 0x26bc);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0300
        gbc.setState(0x8b1, 0xef40, 0xaf80, 0xad1, 0xa31, 0x4e36, 0x1, 0x0);
        gbc.writeMem(0x8b1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaf);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0x4e);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xef40);
        EXPECT(gbc.pc(), 0x8b3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0301
        gbc.setState(0x47af, 0xbcda, 0xa6f0, 0x6bee, 0xd6e8, 0x2667, 0x1, 0x0);
        gbc.writeMem(0x47af, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0x6b);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0xe8);
        EXPECT(gbc.h(),  0x26);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0xbcda);
        EXPECT(gbc.pc(), 0x47b1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0302
        gbc.setState(0xe8d5, 0x653c, 0x8b20, 0x4968, 0xf85e, 0xbc67, 0x1, 0x0);
        gbc.writeMem(0xe8d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x67);
        EXPECT(gbc.sp(), 0x653c);
        EXPECT(gbc.pc(), 0xe8d7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8d5), 0xcb);
        EXPECT(gbc.readMem(0xe8d6), 0x78);
        // CB 78 0303
        gbc.setState(0x253a, 0x917, 0xe00, 0xe8bd, 0x5103, 0xcc9d, 0x1, 0x0);
        gbc.writeMem(0x253a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe);
        EXPECT(gbc.b(),  0xe8);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0x917);
        EXPECT(gbc.pc(), 0x253c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0304
        gbc.setState(0xa01c, 0xde4c, 0x2a20, 0xa652, 0xb4e4, 0xf2c1, 0x1, 0x1);
        gbc.writeMem(0xa01c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa6);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xc1);
        EXPECT(gbc.sp(), 0xde4c);
        EXPECT(gbc.pc(), 0xa01e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa01c), 0xcb);
        EXPECT(gbc.readMem(0xa01d), 0x78);
        // CB 78 0305
        gbc.setState(0x5351, 0x577e, 0xb1e0, 0x2dc0, 0x98b4, 0x1f31, 0x0, 0x1);
        gbc.writeMem(0x5351, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xb4);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x577e);
        EXPECT(gbc.pc(), 0x5353);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0306
        gbc.setState(0x499a, 0xcfc3, 0xe0b0, 0xaa99, 0xd3fe, 0xc2f0, 0x1, 0x1);
        gbc.writeMem(0x499a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0xaa);
        EXPECT(gbc.c(),  0x99);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0xfe);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0xf0);
        EXPECT(gbc.sp(), 0xcfc3);
        EXPECT(gbc.pc(), 0x499c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0307
        gbc.setState(0xbe71, 0xfe6a, 0xfc10, 0x29e3, 0x99fa, 0x2391, 0x0, 0x1);
        gbc.writeMem(0xbe71, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x29);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x99);
        EXPECT(gbc.e(),  0xfa);
        EXPECT(gbc.h(),  0x23);
        EXPECT(gbc.l(),  0x91);
        EXPECT(gbc.sp(), 0xfe6a);
        EXPECT(gbc.pc(), 0xbe73);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe71), 0xcb);
        EXPECT(gbc.readMem(0xbe72), 0x78);
        // CB 78 0308
        gbc.setState(0x4b46, 0x8b93, 0xdfc0, 0x9efb, 0xd86, 0xe72b, 0x0, 0x1);
        gbc.writeMem(0x4b46, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdf);
        EXPECT(gbc.b(),  0x9e);
        EXPECT(gbc.c(),  0xfb);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0xe7);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x8b93);
        EXPECT(gbc.pc(), 0x4b48);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0309
        gbc.setState(0x461e, 0xa869, 0xa4c0, 0xb7aa, 0x2161, 0x83a7, 0x1, 0x1);
        gbc.writeMem(0x461e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa4);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0x61);
        EXPECT(gbc.h(),  0x83);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xa869);
        EXPECT(gbc.pc(), 0x4620);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 030A
        gbc.setState(0x776f, 0xb094, 0xf040, 0x5a7f, 0x1734, 0xc66b, 0x1, 0x1);
        gbc.writeMem(0x776f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf0);
        EXPECT(gbc.b(),  0x5a);
        EXPECT(gbc.c(),  0x7f);
        EXPECT(gbc.d(),  0x17);
        EXPECT(gbc.e(),  0x34);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x6b);
        EXPECT(gbc.sp(), 0xb094);
        EXPECT(gbc.pc(), 0x7771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 030B
        gbc.setState(0x9cd5, 0x1aaf, 0xa850, 0xedcb, 0xfd9c, 0x4897, 0x0, 0x1);
        gbc.writeMem(0x9cd5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa8);
        EXPECT(gbc.b(),  0xed);
        EXPECT(gbc.c(),  0xcb);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x48);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0x1aaf);
        EXPECT(gbc.pc(), 0x9cd7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9cd5), 0xcb);
        EXPECT(gbc.readMem(0x9cd6), 0x78);
        // CB 78 030D
        gbc.setState(0x77e2, 0x9d39, 0xd00, 0x43c3, 0x465e, 0xc29a, 0x0, 0x1);
        gbc.writeMem(0x77e2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0x46);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0xc2);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x9d39);
        EXPECT(gbc.pc(), 0x77e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 030E
        gbc.setState(0xd989, 0x95ce, 0xc290, 0x30f1, 0x2360, 0xbd23, 0x1, 0x1);
        gbc.writeMem(0xd989, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0xf1);
        EXPECT(gbc.d(),  0x23);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0x95ce);
        EXPECT(gbc.pc(), 0xd98b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd989), 0xcb);
        EXPECT(gbc.readMem(0xd98a), 0x78);
        // CB 78 030F
        gbc.setState(0xd5e2, 0xe560, 0x7ac0, 0x6daa, 0xc412, 0xaea6, 0x0, 0x0);
        gbc.writeMem(0xd5e2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7a);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0xaa);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x12);
        EXPECT(gbc.h(),  0xae);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0xe560);
        EXPECT(gbc.pc(), 0xd5e4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd5e2), 0xcb);
        EXPECT(gbc.readMem(0xd5e3), 0x78);
        // CB 78 0310
        gbc.setState(0x533d, 0x963c, 0xf600, 0x1d52, 0xe785, 0xbcde, 0x1, 0x1);
        gbc.writeMem(0x533d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf6);
        EXPECT(gbc.b(),  0x1d);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0xe7);
        EXPECT(gbc.e(),  0x85);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0xde);
        EXPECT(gbc.sp(), 0x963c);
        EXPECT(gbc.pc(), 0x533f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0311
        gbc.setState(0xdb7b, 0xed56, 0xdef0, 0xbd7e, 0x93d5, 0x2986, 0x0, 0x0);
        gbc.writeMem(0xdb7b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xde);
        EXPECT(gbc.b(),  0xbd);
        EXPECT(gbc.c(),  0x7e);
        EXPECT(gbc.d(),  0x93);
        EXPECT(gbc.e(),  0xd5);
        EXPECT(gbc.h(),  0x29);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xed56);
        EXPECT(gbc.pc(), 0xdb7d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdb7b), 0xcb);
        EXPECT(gbc.readMem(0xdb7c), 0x78);
        // CB 78 0312
        gbc.setState(0x9db9, 0x551f, 0xa170, 0x3869, 0xd046, 0x914d, 0x0, 0x1);
        gbc.writeMem(0x9db9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa1);
        EXPECT(gbc.b(),  0x38);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x46);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x551f);
        EXPECT(gbc.pc(), 0x9dbb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9db9), 0xcb);
        EXPECT(gbc.readMem(0x9dba), 0x78);
        // CB 78 0313
        gbc.setState(0xac89, 0x16d3, 0x3ad0, 0x6651, 0x8a2f, 0x4b92, 0x0, 0x0);
        gbc.writeMem(0xac89, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3a);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0x16d3);
        EXPECT(gbc.pc(), 0xac8b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xac89), 0xcb);
        EXPECT(gbc.readMem(0xac8a), 0x78);
        // CB 78 0314
        gbc.setState(0x8052, 0x2394, 0xc8f0, 0x8a30, 0x372a, 0xd8ee, 0x0, 0x0);
        gbc.writeMem(0x8052, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x8a);
        EXPECT(gbc.c(),  0x30);
        EXPECT(gbc.d(),  0x37);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0xd8);
        EXPECT(gbc.l(),  0xee);
        EXPECT(gbc.sp(), 0x2394);
        EXPECT(gbc.pc(), 0x8054);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8052), 0xcb);
        EXPECT(gbc.readMem(0x8053), 0x78);
        // CB 78 0315
        gbc.setState(0x843a, 0x5ca1, 0x3e00, 0x9436, 0x208, 0xfc06, 0x0, 0x0);
        gbc.writeMem(0x843a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3e);
        EXPECT(gbc.b(),  0x94);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x2);
        EXPECT(gbc.e(),  0x8);
        EXPECT(gbc.h(),  0xfc);
        EXPECT(gbc.l(),  0x6);
        EXPECT(gbc.sp(), 0x5ca1);
        EXPECT(gbc.pc(), 0x843c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x843a), 0xcb);
        EXPECT(gbc.readMem(0x843b), 0x78);
        // CB 78 0316
        gbc.setState(0x6472, 0x81bc, 0x1210, 0x172f, 0xe33, 0x69ca, 0x0, 0x1);
        gbc.writeMem(0x6472, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x12);
        EXPECT(gbc.b(),  0x17);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xe);
        EXPECT(gbc.e(),  0x33);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x81bc);
        EXPECT(gbc.pc(), 0x6474);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0317
        gbc.setState(0x4622, 0x365a, 0x4fa0, 0x792d, 0x8a05, 0xd344, 0x0, 0x1);
        gbc.writeMem(0x4622, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x79);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0x8a);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x44);
        EXPECT(gbc.sp(), 0x365a);
        EXPECT(gbc.pc(), 0x4624);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0318
        gbc.setState(0x9221, 0x5fb8, 0x7040, 0xd0ca, 0xf61d, 0x107e, 0x1, 0x1);
        gbc.writeMem(0x9221, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x70);
        EXPECT(gbc.b(),  0xd0);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0x10);
        EXPECT(gbc.l(),  0x7e);
        EXPECT(gbc.sp(), 0x5fb8);
        EXPECT(gbc.pc(), 0x9223);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9221), 0xcb);
        EXPECT(gbc.readMem(0x9222), 0x78);
        // CB 78 0319
        gbc.setState(0x3c6f, 0xbe88, 0xf4c0, 0x15da, 0xfeff, 0xc659, 0x0, 0x1);
        gbc.writeMem(0x3c6f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xbe88);
        EXPECT(gbc.pc(), 0x3c71);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 031A
        gbc.setState(0x224e, 0x7f08, 0x4920, 0x2a86, 0xb8d, 0x2f88, 0x0, 0x0);
        gbc.writeMem(0x224e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x2a);
        EXPECT(gbc.c(),  0x86);
        EXPECT(gbc.d(),  0xb);
        EXPECT(gbc.e(),  0x8d);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x7f08);
        EXPECT(gbc.pc(), 0x2250);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 031B
        gbc.setState(0x2241, 0xcf46, 0xcac0, 0x404b, 0xe3a4, 0x574e, 0x0, 0x1);
        gbc.writeMem(0x2241, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0x40);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0xe3);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xcf46);
        EXPECT(gbc.pc(), 0x2243);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 031C
        gbc.setState(0x87c1, 0x13e1, 0x2930, 0xeff8, 0x9200, 0xbc7a, 0x0, 0x1);
        gbc.writeMem(0x87c1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x29);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0x0);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0x13e1);
        EXPECT(gbc.pc(), 0x87c3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x87c1), 0xcb);
        EXPECT(gbc.readMem(0x87c2), 0x78);
        // CB 78 031D
        gbc.setState(0x438e, 0xa7de, 0x8880, 0xab5d, 0x7995, 0x82d2, 0x1, 0x0);
        gbc.writeMem(0x438e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x88);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x79);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0x82);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa7de);
        EXPECT(gbc.pc(), 0x4390);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 031E
        gbc.setState(0x1d1a, 0xd09f, 0x5c50, 0x5152, 0x3038, 0xa87b, 0x1, 0x1);
        gbc.writeMem(0x1d1a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x52);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xa8);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0xd09f);
        EXPECT(gbc.pc(), 0x1d1c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 031F
        gbc.setState(0x2a01, 0xfa0a, 0x6360, 0x244a, 0x6337, 0xc5c4, 0x1, 0x0);
        gbc.writeMem(0x2a01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x24);
        EXPECT(gbc.c(),  0x4a);
        EXPECT(gbc.d(),  0x63);
        EXPECT(gbc.e(),  0x37);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0xfa0a);
        EXPECT(gbc.pc(), 0x2a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0320
        gbc.setState(0xca91, 0xab67, 0xb110, 0x3c5d, 0x7814, 0xc10c, 0x0, 0x0);
        gbc.writeMem(0xca91, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb1);
        EXPECT(gbc.b(),  0x3c);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0x78);
        EXPECT(gbc.e(),  0x14);
        EXPECT(gbc.h(),  0xc1);
        EXPECT(gbc.l(),  0xc);
        EXPECT(gbc.sp(), 0xab67);
        EXPECT(gbc.pc(), 0xca93);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca91), 0xcb);
        EXPECT(gbc.readMem(0xca92), 0x78);
        // CB 78 0321
        gbc.setState(0xb06b, 0x68f0, 0x5d20, 0x9d3f, 0x9503, 0x7e39, 0x1, 0x1);
        gbc.writeMem(0xb06b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5d);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x68f0);
        EXPECT(gbc.pc(), 0xb06d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb06b), 0xcb);
        EXPECT(gbc.readMem(0xb06c), 0x78);
        // CB 78 0323
        gbc.setState(0x2664, 0xc5c4, 0x7480, 0x453e, 0xc4c5, 0x9c73, 0x0, 0x1);
        gbc.writeMem(0x2664, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x74);
        EXPECT(gbc.b(),  0x45);
        EXPECT(gbc.c(),  0x3e);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0xc5);
        EXPECT(gbc.h(),  0x9c);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xc5c4);
        EXPECT(gbc.pc(), 0x2666);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0324
        gbc.setState(0xa30, 0xa88b, 0x1d00, 0x1353, 0xdc2e, 0x514a, 0x1, 0x0);
        gbc.writeMem(0xa30, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1d);
        EXPECT(gbc.b(),  0x13);
        EXPECT(gbc.c(),  0x53);
        EXPECT(gbc.d(),  0xdc);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0x51);
        EXPECT(gbc.l(),  0x4a);
        EXPECT(gbc.sp(), 0xa88b);
        EXPECT(gbc.pc(), 0xa32);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0325
        gbc.setState(0x76c2, 0x721e, 0xf470, 0x9d88, 0x312a, 0x5a85, 0x1, 0x1);
        gbc.writeMem(0x76c2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0x9d);
        EXPECT(gbc.c(),  0x88);
        EXPECT(gbc.d(),  0x31);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x5a);
        EXPECT(gbc.l(),  0x85);
        EXPECT(gbc.sp(), 0x721e);
        EXPECT(gbc.pc(), 0x76c4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0326
        gbc.setState(0xb117, 0xdeba, 0x76e0, 0x6d05, 0xa2cc, 0xad84, 0x1, 0x0);
        gbc.writeMem(0xb117, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x5);
        EXPECT(gbc.d(),  0xa2);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x84);
        EXPECT(gbc.sp(), 0xdeba);
        EXPECT(gbc.pc(), 0xb119);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb117), 0xcb);
        EXPECT(gbc.readMem(0xb118), 0x78);
        // CB 78 0327
        gbc.setState(0xbe7d, 0x760, 0xd070, 0x73c5, 0x5fee, 0xa3e5, 0x1, 0x1);
        gbc.writeMem(0xbe7d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0x73);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x5f);
        EXPECT(gbc.e(),  0xee);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0xe5);
        EXPECT(gbc.sp(), 0x760);
        EXPECT(gbc.pc(), 0xbe7f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbe7d), 0xcb);
        EXPECT(gbc.readMem(0xbe7e), 0x78);
        // CB 78 0328
        gbc.setState(0x794b, 0xaaee, 0xe830, 0x7773, 0xb566, 0xb3eb, 0x1, 0x0);
        gbc.writeMem(0x794b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe8);
        EXPECT(gbc.b(),  0x77);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0xb5);
        EXPECT(gbc.e(),  0x66);
        EXPECT(gbc.h(),  0xb3);
        EXPECT(gbc.l(),  0xeb);
        EXPECT(gbc.sp(), 0xaaee);
        EXPECT(gbc.pc(), 0x794d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 032A
        gbc.setState(0x2ff6, 0xd4cd, 0xf110, 0xc5d, 0xe5d9, 0xdcba, 0x0, 0x0);
        gbc.writeMem(0x2ff6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0xc);
        EXPECT(gbc.c(),  0x5d);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0xd9);
        EXPECT(gbc.h(),  0xdc);
        EXPECT(gbc.l(),  0xba);
        EXPECT(gbc.sp(), 0xd4cd);
        EXPECT(gbc.pc(), 0x2ff8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 032B
        gbc.setState(0x9763, 0x4d4, 0x8650, 0xb936, 0x4595, 0xb788, 0x0, 0x0);
        gbc.writeMem(0x9763, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0xb9);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x95);
        EXPECT(gbc.h(),  0xb7);
        EXPECT(gbc.l(),  0x88);
        EXPECT(gbc.sp(), 0x4d4);
        EXPECT(gbc.pc(), 0x9765);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9763), 0xcb);
        EXPECT(gbc.readMem(0x9764), 0x78);
        // CB 78 032C
        gbc.setState(0x3f93, 0x28aa, 0xf1d0, 0x4bb2, 0xa540, 0x1dea, 0x1, 0x0);
        gbc.writeMem(0x3f93, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf1);
        EXPECT(gbc.b(),  0x4b);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x1d);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x28aa);
        EXPECT(gbc.pc(), 0x3f95);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 032D
        gbc.setState(0x684d, 0x6a71, 0xfe30, 0xef65, 0xfe2b, 0x7ead, 0x0, 0x0);
        gbc.writeMem(0x684d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfe);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0xfe);
        EXPECT(gbc.e(),  0x2b);
        EXPECT(gbc.h(),  0x7e);
        EXPECT(gbc.l(),  0xad);
        EXPECT(gbc.sp(), 0x6a71);
        EXPECT(gbc.pc(), 0x684f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 032E
        gbc.setState(0x34d9, 0x6f4, 0x2cf0, 0x5328, 0x83b1, 0xb6cd, 0x0, 0x1);
        gbc.writeMem(0x34d9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2c);
        EXPECT(gbc.b(),  0x53);
        EXPECT(gbc.c(),  0x28);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0xb1);
        EXPECT(gbc.h(),  0xb6);
        EXPECT(gbc.l(),  0xcd);
        EXPECT(gbc.sp(), 0x6f4);
        EXPECT(gbc.pc(), 0x34db);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 032F
        gbc.setState(0xa178, 0xb459, 0xa370, 0xff0f, 0xc0bd, 0xda93, 0x0, 0x0);
        gbc.writeMem(0xa178, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa3);
        EXPECT(gbc.b(),  0xff);
        EXPECT(gbc.c(),  0xf);
        EXPECT(gbc.d(),  0xc0);
        EXPECT(gbc.e(),  0xbd);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xb459);
        EXPECT(gbc.pc(), 0xa17a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa178), 0xcb);
        EXPECT(gbc.readMem(0xa179), 0x78);
        // CB 78 0330
        gbc.setState(0xaf15, 0x7f0f, 0x7330, 0xe3b0, 0x7223, 0x5632, 0x0, 0x1);
        gbc.writeMem(0xaf15, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0xe3);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x23);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0x7f0f);
        EXPECT(gbc.pc(), 0xaf17);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf15), 0xcb);
        EXPECT(gbc.readMem(0xaf16), 0x78);
        // CB 78 0332
        gbc.setState(0xa805, 0xf1c6, 0x8c10, 0x2d3f, 0xdf1b, 0x6d6f, 0x0, 0x1);
        gbc.writeMem(0xa805, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x3f);
        EXPECT(gbc.d(),  0xdf);
        EXPECT(gbc.e(),  0x1b);
        EXPECT(gbc.h(),  0x6d);
        EXPECT(gbc.l(),  0x6f);
        EXPECT(gbc.sp(), 0xf1c6);
        EXPECT(gbc.pc(), 0xa807);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa805), 0xcb);
        EXPECT(gbc.readMem(0xa806), 0x78);
        // CB 78 0333
        gbc.setState(0x1855, 0x7be9, 0x97d0, 0x3b4, 0x8e2f, 0xcecb, 0x1, 0x1);
        gbc.writeMem(0x1855, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x97);
        EXPECT(gbc.b(),  0x3);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0xcb);
        EXPECT(gbc.sp(), 0x7be9);
        EXPECT(gbc.pc(), 0x1857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0334
        gbc.setState(0x626e, 0x64c, 0xe550, 0x6f42, 0xf6c1, 0x353d, 0x1, 0x1);
        gbc.writeMem(0x626e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe5);
        EXPECT(gbc.b(),  0x6f);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xf6);
        EXPECT(gbc.e(),  0xc1);
        EXPECT(gbc.h(),  0x35);
        EXPECT(gbc.l(),  0x3d);
        EXPECT(gbc.sp(), 0x64c);
        EXPECT(gbc.pc(), 0x6270);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0335
        gbc.setState(0x5c4e, 0xdfcc, 0xb0f0, 0x5048, 0x9a2, 0xb45a, 0x1, 0x1);
        gbc.writeMem(0x5c4e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb0);
        EXPECT(gbc.b(),  0x50);
        EXPECT(gbc.c(),  0x48);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0xb4);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xdfcc);
        EXPECT(gbc.pc(), 0x5c50);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0336
        gbc.setState(0x8eec, 0x570f, 0xa7f0, 0x7f26, 0xf409, 0x9e7c, 0x1, 0x1);
        gbc.writeMem(0x8eec, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa7);
        EXPECT(gbc.b(),  0x7f);
        EXPECT(gbc.c(),  0x26);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0x9e);
        EXPECT(gbc.l(),  0x7c);
        EXPECT(gbc.sp(), 0x570f);
        EXPECT(gbc.pc(), 0x8eee);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8eec), 0xcb);
        EXPECT(gbc.readMem(0x8eed), 0x78);
        // CB 78 0337
        gbc.setState(0x7c05, 0xd85b, 0x760, 0x2d93, 0x672f, 0x700e, 0x0, 0x0);
        gbc.writeMem(0x7c05, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x93);
        EXPECT(gbc.d(),  0x67);
        EXPECT(gbc.e(),  0x2f);
        EXPECT(gbc.h(),  0x70);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0xd85b);
        EXPECT(gbc.pc(), 0x7c07);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0338
        gbc.setState(0x3275, 0xf88c, 0x32f0, 0xca7d, 0xa8c7, 0xf4d2, 0x0, 0x1);
        gbc.writeMem(0x3275, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x32);
        EXPECT(gbc.b(),  0xca);
        EXPECT(gbc.c(),  0x7d);
        EXPECT(gbc.d(),  0xa8);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf4);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xf88c);
        EXPECT(gbc.pc(), 0x3277);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0339
        gbc.setState(0x2c4a, 0x5256, 0xbf10, 0xa2f5, 0x73f4, 0xa8d, 0x1, 0x0);
        gbc.writeMem(0x2c4a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0x73);
        EXPECT(gbc.e(),  0xf4);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x5256);
        EXPECT(gbc.pc(), 0x2c4c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 033A
        gbc.setState(0x58f8, 0x24c4, 0xdaa0, 0x1f5, 0xf330, 0x28ca, 0x1, 0x0);
        gbc.writeMem(0x58f8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xda);
        EXPECT(gbc.b(),  0x1);
        EXPECT(gbc.c(),  0xf5);
        EXPECT(gbc.d(),  0xf3);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x28);
        EXPECT(gbc.l(),  0xca);
        EXPECT(gbc.sp(), 0x24c4);
        EXPECT(gbc.pc(), 0x58fa);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 033B
        gbc.setState(0x62de, 0xe7d0, 0x1340, 0xae36, 0x98d1, 0x661d, 0x0, 0x1);
        gbc.writeMem(0x62de, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x13);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd1);
        EXPECT(gbc.h(),  0x66);
        EXPECT(gbc.l(),  0x1d);
        EXPECT(gbc.sp(), 0xe7d0);
        EXPECT(gbc.pc(), 0x62e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 033C
        gbc.setState(0x91a0, 0x8ff6, 0x4f10, 0x89bd, 0x9ad2, 0x65c4, 0x0, 0x0);
        gbc.writeMem(0x91a0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0xbd);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x65);
        EXPECT(gbc.l(),  0xc4);
        EXPECT(gbc.sp(), 0x8ff6);
        EXPECT(gbc.pc(), 0x91a2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x91a0), 0xcb);
        EXPECT(gbc.readMem(0x91a1), 0x78);
        // CB 78 033D
        gbc.setState(0xa0c, 0xfef1, 0xbe80, 0x9f80, 0x33f7, 0x270f, 0x1, 0x1);
        gbc.writeMem(0xa0c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbe);
        EXPECT(gbc.b(),  0x9f);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0xf7);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0xf);
        EXPECT(gbc.sp(), 0xfef1);
        EXPECT(gbc.pc(), 0xa0e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 033E
        gbc.setState(0xae59, 0x1ea1, 0x6700, 0xd425, 0x729c, 0x169e, 0x1, 0x1);
        gbc.writeMem(0xae59, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x72);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9e);
        EXPECT(gbc.sp(), 0x1ea1);
        EXPECT(gbc.pc(), 0xae5b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xae59), 0xcb);
        EXPECT(gbc.readMem(0xae5a), 0x78);
        // CB 78 033F
        gbc.setState(0xe67d, 0xa513, 0x8580, 0x8680, 0xd9c, 0x1a4e, 0x0, 0x0);
        gbc.writeMem(0xe67d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x86);
        EXPECT(gbc.c(),  0x80);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x9c);
        EXPECT(gbc.h(),  0x1a);
        EXPECT(gbc.l(),  0x4e);
        EXPECT(gbc.sp(), 0xa513);
        EXPECT(gbc.pc(), 0xe67f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe67d), 0xcb);
        EXPECT(gbc.readMem(0xe67e), 0x78);
        // CB 78 0340
        gbc.setState(0x2ad2, 0x3ac7, 0x8560, 0xf019, 0x845, 0x562b, 0x0, 0x0);
        gbc.writeMem(0x2ad2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x19);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x3ac7);
        EXPECT(gbc.pc(), 0x2ad4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0341
        gbc.setState(0x8826, 0x29b5, 0x6c90, 0xa9e7, 0x4294, 0x7c48, 0x1, 0x1);
        gbc.writeMem(0x8826, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x7c);
        EXPECT(gbc.l(),  0x48);
        EXPECT(gbc.sp(), 0x29b5);
        EXPECT(gbc.pc(), 0x8828);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8826), 0xcb);
        EXPECT(gbc.readMem(0x8827), 0x78);
        // CB 78 0342
        gbc.setState(0xcf72, 0xf906, 0x86b0, 0x9069, 0x2ae4, 0x2792, 0x1, 0x0);
        gbc.writeMem(0xcf72, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x90);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xe4);
        EXPECT(gbc.h(),  0x27);
        EXPECT(gbc.l(),  0x92);
        EXPECT(gbc.sp(), 0xf906);
        EXPECT(gbc.pc(), 0xcf74);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcf72), 0xcb);
        EXPECT(gbc.readMem(0xcf73), 0x78);
        // CB 78 0343
        gbc.setState(0xa82a, 0x5629, 0x2520, 0x6937, 0xc54f, 0xea70, 0x0, 0x1);
        gbc.writeMem(0xa82a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x25);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x37);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xea);
        EXPECT(gbc.l(),  0x70);
        EXPECT(gbc.sp(), 0x5629);
        EXPECT(gbc.pc(), 0xa82c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa82a), 0xcb);
        EXPECT(gbc.readMem(0xa82b), 0x78);
        // CB 78 0344
        gbc.setState(0xd751, 0x92b2, 0x4990, 0xe2c7, 0x57a7, 0xfe43, 0x1, 0x1);
        gbc.writeMem(0xd751, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xe2);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0x57);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0x43);
        EXPECT(gbc.sp(), 0x92b2);
        EXPECT(gbc.pc(), 0xd753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd751), 0xcb);
        EXPECT(gbc.readMem(0xd752), 0x78);
        // CB 78 0345
        gbc.setState(0x5036, 0xe6d3, 0x7600, 0xddff, 0x2040, 0x6e4c, 0x1, 0x1);
        gbc.writeMem(0x5036, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xdd);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0x20);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x6e);
        EXPECT(gbc.l(),  0x4c);
        EXPECT(gbc.sp(), 0xe6d3);
        EXPECT(gbc.pc(), 0x5038);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0346
        gbc.setState(0x7249, 0x71af, 0xe310, 0x5ec7, 0xf42e, 0xcc7b, 0x0, 0x1);
        gbc.writeMem(0x7249, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x5e);
        EXPECT(gbc.c(),  0xc7);
        EXPECT(gbc.d(),  0xf4);
        EXPECT(gbc.e(),  0x2e);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x7b);
        EXPECT(gbc.sp(), 0x71af);
        EXPECT(gbc.pc(), 0x724b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0347
        gbc.setState(0xdf66, 0x52c2, 0xaae0, 0x28b4, 0x2c7f, 0xa156, 0x0, 0x0);
        gbc.writeMem(0xdf66, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xaa);
        EXPECT(gbc.b(),  0x28);
        EXPECT(gbc.c(),  0xb4);
        EXPECT(gbc.d(),  0x2c);
        EXPECT(gbc.e(),  0x7f);
        EXPECT(gbc.h(),  0xa1);
        EXPECT(gbc.l(),  0x56);
        EXPECT(gbc.sp(), 0x52c2);
        EXPECT(gbc.pc(), 0xdf68);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdf66), 0xcb);
        EXPECT(gbc.readMem(0xdf67), 0x78);
        // CB 78 0348
        gbc.setState(0xce4b, 0xe907, 0x93b0, 0xefc9, 0xc54a, 0x6336, 0x1, 0x1);
        gbc.writeMem(0xce4b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x93);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0xc5);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x63);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0xe907);
        EXPECT(gbc.pc(), 0xce4d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xce4b), 0xcb);
        EXPECT(gbc.readMem(0xce4c), 0x78);
        // CB 78 0349
        gbc.setState(0x466f, 0x109a, 0x3b20, 0xb769, 0xf92a, 0x398c, 0x0, 0x0);
        gbc.writeMem(0x466f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x2a);
        EXPECT(gbc.h(),  0x39);
        EXPECT(gbc.l(),  0x8c);
        EXPECT(gbc.sp(), 0x109a);
        EXPECT(gbc.pc(), 0x4671);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 034A
        gbc.setState(0x12c1, 0xf42b, 0x4620, 0x27e8, 0x6c7c, 0xcdae, 0x1, 0x0);
        gbc.writeMem(0x12c1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x46);
        EXPECT(gbc.b(),  0x27);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x7c);
        EXPECT(gbc.h(),  0xcd);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0xf42b);
        EXPECT(gbc.pc(), 0x12c3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 034B
        gbc.setState(0x81f6, 0xfa78, 0xbf0, 0xc6e6, 0xd55, 0x2e03, 0x0, 0x1);
        gbc.writeMem(0x81f6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb);
        EXPECT(gbc.b(),  0xc6);
        EXPECT(gbc.c(),  0xe6);
        EXPECT(gbc.d(),  0xd);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0x2e);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0xfa78);
        EXPECT(gbc.pc(), 0x81f8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x81f6), 0xcb);
        EXPECT(gbc.readMem(0x81f7), 0x78);
        // CB 78 034C
        gbc.setState(0x4855, 0xa0aa, 0x9f00, 0x63e8, 0xbd74, 0x5720, 0x1, 0x1);
        gbc.writeMem(0x4855, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0xe8);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x57);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xa0aa);
        EXPECT(gbc.pc(), 0x4857);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 034D
        gbc.setState(0x387a, 0x325c, 0x2160, 0x3a65, 0x7403, 0xa9b6, 0x1, 0x0);
        gbc.writeMem(0x387a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x21);
        EXPECT(gbc.b(),  0x3a);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x74);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xa9);
        EXPECT(gbc.l(),  0xb6);
        EXPECT(gbc.sp(), 0x325c);
        EXPECT(gbc.pc(), 0x387c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 034E
        gbc.setState(0xca7d, 0xe96f, 0x77f0, 0x667a, 0xe099, 0x972f, 0x0, 0x0);
        gbc.writeMem(0xca7d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0x66);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0x2f);
        EXPECT(gbc.sp(), 0xe96f);
        EXPECT(gbc.pc(), 0xca7f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xca7d), 0xcb);
        EXPECT(gbc.readMem(0xca7e), 0x78);
        // CB 78 034F
        gbc.setState(0x38ac, 0x87d5, 0xc4b0, 0x313b, 0xb0ac, 0x5947, 0x1, 0x0);
        gbc.writeMem(0x38ac, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x31);
        EXPECT(gbc.c(),  0x3b);
        EXPECT(gbc.d(),  0xb0);
        EXPECT(gbc.e(),  0xac);
        EXPECT(gbc.h(),  0x59);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x87d5);
        EXPECT(gbc.pc(), 0x38ae);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0351
        gbc.setState(0xa79e, 0xec37, 0x4e90, 0xe7c2, 0xfcfb, 0xe476, 0x1, 0x1);
        gbc.writeMem(0xa79e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4e);
        EXPECT(gbc.b(),  0xe7);
        EXPECT(gbc.c(),  0xc2);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0xfb);
        EXPECT(gbc.h(),  0xe4);
        EXPECT(gbc.l(),  0x76);
        EXPECT(gbc.sp(), 0xec37);
        EXPECT(gbc.pc(), 0xa7a0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa79e), 0xcb);
        EXPECT(gbc.readMem(0xa79f), 0x78);
        // CB 78 0352
        gbc.setState(0x4860, 0x1827, 0xe340, 0x356f, 0x86ea, 0xcc39, 0x1, 0x1);
        gbc.writeMem(0x4860, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x35);
        EXPECT(gbc.c(),  0x6f);
        EXPECT(gbc.d(),  0x86);
        EXPECT(gbc.e(),  0xea);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x39);
        EXPECT(gbc.sp(), 0x1827);
        EXPECT(gbc.pc(), 0x4862);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0353
        gbc.setState(0xcc7a, 0x573a, 0x6c70, 0xe508, 0xb1ba, 0x4f8a, 0x0, 0x1);
        gbc.writeMem(0xcc7a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xe5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0x4f);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x573a);
        EXPECT(gbc.pc(), 0xcc7c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcc7a), 0xcb);
        EXPECT(gbc.readMem(0xcc7b), 0x78);
        // CB 78 0354
        gbc.setState(0xc96d, 0xfb80, 0x1590, 0xcc03, 0xc6ec, 0xa059, 0x1, 0x0);
        gbc.writeMem(0xc96d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0x3);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xec);
        EXPECT(gbc.h(),  0xa0);
        EXPECT(gbc.l(),  0x59);
        EXPECT(gbc.sp(), 0xfb80);
        EXPECT(gbc.pc(), 0xc96f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc96d), 0xcb);
        EXPECT(gbc.readMem(0xc96e), 0x78);
        // CB 78 0355
        gbc.setState(0x375f, 0xc5f5, 0x1570, 0xd51, 0x8435, 0x914, 0x0, 0x1);
        gbc.writeMem(0x375f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xd);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0x84);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0x9);
        EXPECT(gbc.l(),  0x14);
        EXPECT(gbc.sp(), 0xc5f5);
        EXPECT(gbc.pc(), 0x3761);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0356
        gbc.setState(0x6167, 0xaf25, 0xe0c0, 0x1c8e, 0xcab, 0x857f, 0x1, 0x0);
        gbc.writeMem(0x6167, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe0);
        EXPECT(gbc.b(),  0x1c);
        EXPECT(gbc.c(),  0x8e);
        EXPECT(gbc.d(),  0xc);
        EXPECT(gbc.e(),  0xab);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xaf25);
        EXPECT(gbc.pc(), 0x6169);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0357
        gbc.setState(0x164d, 0x9daf, 0x67a0, 0x2668, 0xa586, 0x8531, 0x1, 0x0);
        gbc.writeMem(0x164d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x67);
        EXPECT(gbc.b(),  0x26);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0x86);
        EXPECT(gbc.h(),  0x85);
        EXPECT(gbc.l(),  0x31);
        EXPECT(gbc.sp(), 0x9daf);
        EXPECT(gbc.pc(), 0x164f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0358
        gbc.setState(0x23bc, 0x2b14, 0x3df0, 0xe11b, 0x4188, 0xa44d, 0x1, 0x0);
        gbc.writeMem(0x23bc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3d);
        EXPECT(gbc.b(),  0xe1);
        EXPECT(gbc.c(),  0x1b);
        EXPECT(gbc.d(),  0x41);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0x2b14);
        EXPECT(gbc.pc(), 0x23be);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0359
        gbc.setState(0xe51d, 0x1d8f, 0x7600, 0x44d3, 0xa722, 0xc41a, 0x1, 0x1);
        gbc.writeMem(0xe51d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x44);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0x22);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0x1d8f);
        EXPECT(gbc.pc(), 0xe51f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe51d), 0xcb);
        EXPECT(gbc.readMem(0xe51e), 0x78);
        // CB 78 035A
        gbc.setState(0xb061, 0x2221, 0x40, 0x6d96, 0x6196, 0xdea9, 0x0, 0x0);
        gbc.writeMem(0xb061, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x96);
        EXPECT(gbc.d(),  0x61);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xde);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x2221);
        EXPECT(gbc.pc(), 0xb063);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb061), 0xcb);
        EXPECT(gbc.readMem(0xb062), 0x78);
        // CB 78 035B
        gbc.setState(0xd751, 0xcbfa, 0x9fd0, 0x91f, 0xb2d2, 0xf386, 0x1, 0x1);
        gbc.writeMem(0xd751, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9f);
        EXPECT(gbc.b(),  0x9);
        EXPECT(gbc.c(),  0x1f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x86);
        EXPECT(gbc.sp(), 0xcbfa);
        EXPECT(gbc.pc(), 0xd753);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd751), 0xcb);
        EXPECT(gbc.readMem(0xd752), 0x78);
        // CB 78 035C
        gbc.setState(0xde4e, 0x589b, 0x59f0, 0x3408, 0xf8e3, 0x5bd6, 0x0, 0x0);
        gbc.writeMem(0xde4e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0xf8);
        EXPECT(gbc.e(),  0xe3);
        EXPECT(gbc.h(),  0x5b);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x589b);
        EXPECT(gbc.pc(), 0xde50);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xde4e), 0xcb);
        EXPECT(gbc.readMem(0xde4f), 0x78);
        // CB 78 035D
        gbc.setState(0xbcc4, 0x8054, 0x8550, 0x2cd8, 0xb872, 0x3f73, 0x1, 0x1);
        gbc.writeMem(0xbcc4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0xd8);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x72);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0x8054);
        EXPECT(gbc.pc(), 0xbcc6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcc4), 0xcb);
        EXPECT(gbc.readMem(0xbcc5), 0x78);
        // CB 78 035E
        gbc.setState(0xad4d, 0x8c8, 0x85d0, 0x5170, 0x556d, 0x3f53, 0x1, 0x0);
        gbc.writeMem(0xad4d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x85);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x55);
        EXPECT(gbc.e(),  0x6d);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0x8c8);
        EXPECT(gbc.pc(), 0xad4f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xad4d), 0xcb);
        EXPECT(gbc.readMem(0xad4e), 0x78);
        // CB 78 035F
        gbc.setState(0xc2, 0xeb10, 0x640, 0xbb9d, 0xbd9f, 0x3089, 0x1, 0x0);
        gbc.writeMem(0xc2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x9d);
        EXPECT(gbc.d(),  0xbd);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x30);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0xeb10);
        EXPECT(gbc.pc(), 0xc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0361
        gbc.setState(0xd826, 0xaa84, 0x7110, 0x5d4b, 0x4302, 0x931a, 0x0, 0x1);
        gbc.writeMem(0xd826, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x4b);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x2);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0x1a);
        EXPECT(gbc.sp(), 0xaa84);
        EXPECT(gbc.pc(), 0xd828);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd826), 0xcb);
        EXPECT(gbc.readMem(0xd827), 0x78);
        // CB 78 0362
        gbc.setState(0xe7f1, 0xb3df, 0xe2a0, 0x34ff, 0xe1db, 0x61f9, 0x1, 0x1);
        gbc.writeMem(0xe7f1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xff);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x61);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0xb3df);
        EXPECT(gbc.pc(), 0xe7f3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7f1), 0xcb);
        EXPECT(gbc.readMem(0xe7f2), 0x78);
        // CB 78 0363
        gbc.setState(0x3e96, 0xe083, 0xbf40, 0xc1be, 0xf93c, 0x6b23, 0x0, 0x1);
        gbc.writeMem(0x3e96, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc1);
        EXPECT(gbc.c(),  0xbe);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0x3c);
        EXPECT(gbc.h(),  0x6b);
        EXPECT(gbc.l(),  0x23);
        EXPECT(gbc.sp(), 0xe083);
        EXPECT(gbc.pc(), 0x3e98);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0364
        gbc.setState(0xedf2, 0x148, 0x9c50, 0x7b3d, 0x9a0, 0x4e4, 0x0, 0x0);
        gbc.writeMem(0xedf2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9c);
        EXPECT(gbc.b(),  0x7b);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x9);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0x4);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x148);
        EXPECT(gbc.pc(), 0xedf4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xedf2), 0xcb);
        EXPECT(gbc.readMem(0xedf3), 0x78);
        // CB 78 0365
        gbc.setState(0x8b9, 0xb6d3, 0x26c0, 0x3fc5, 0x92f1, 0x22a7, 0x1, 0x0);
        gbc.writeMem(0x8b9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x3f);
        EXPECT(gbc.c(),  0xc5);
        EXPECT(gbc.d(),  0x92);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0xa7);
        EXPECT(gbc.sp(), 0xb6d3);
        EXPECT(gbc.pc(), 0x8bb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0366
        gbc.setState(0x751, 0x265d, 0x8980, 0x4831, 0xb79e, 0x69ae, 0x0, 0x1);
        gbc.writeMem(0x751, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0x48);
        EXPECT(gbc.c(),  0x31);
        EXPECT(gbc.d(),  0xb7);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0xae);
        EXPECT(gbc.sp(), 0x265d);
        EXPECT(gbc.pc(), 0x753);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0367
        gbc.setState(0xb240, 0x68b8, 0xd3f0, 0xba3c, 0x7521, 0xb060, 0x0, 0x1);
        gbc.writeMem(0xb240, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd3);
        EXPECT(gbc.b(),  0xba);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0x21);
        EXPECT(gbc.h(),  0xb0);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0x68b8);
        EXPECT(gbc.pc(), 0xb242);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb240), 0xcb);
        EXPECT(gbc.readMem(0xb241), 0x78);
        // CB 78 0368
        gbc.setState(0x13cc, 0x1d9d, 0xbb50, 0xd88c, 0x42ae, 0xfeea, 0x1, 0x1);
        gbc.writeMem(0x13cc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0xd8);
        EXPECT(gbc.c(),  0x8c);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0xae);
        EXPECT(gbc.h(),  0xfe);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x1d9d);
        EXPECT(gbc.pc(), 0x13ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0369
        gbc.setState(0xd7f4, 0x2a65, 0x4bc0, 0xae6a, 0xe191, 0xbc96, 0x0, 0x0);
        gbc.writeMem(0xd7f4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4b);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0xe1);
        EXPECT(gbc.e(),  0x91);
        EXPECT(gbc.h(),  0xbc);
        EXPECT(gbc.l(),  0x96);
        EXPECT(gbc.sp(), 0x2a65);
        EXPECT(gbc.pc(), 0xd7f6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd7f4), 0xcb);
        EXPECT(gbc.readMem(0xd7f5), 0x78);
        // CB 78 036A
        gbc.setState(0xa114, 0x1dc, 0xba50, 0x303d, 0x6c5b, 0x4aa9, 0x1, 0x1);
        gbc.writeMem(0xa114, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0x30);
        EXPECT(gbc.c(),  0x3d);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x5b);
        EXPECT(gbc.h(),  0x4a);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x1dc);
        EXPECT(gbc.pc(), 0xa116);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa114), 0xcb);
        EXPECT(gbc.readMem(0xa115), 0x78);
        // CB 78 036C
        gbc.setState(0xeebd, 0xf6a8, 0xb2a0, 0x14c0, 0x439f, 0xc46e, 0x0, 0x0);
        gbc.writeMem(0xeebd, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0x6e);
        EXPECT(gbc.sp(), 0xf6a8);
        EXPECT(gbc.pc(), 0xeebf);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xeebd), 0xcb);
        EXPECT(gbc.readMem(0xeebe), 0x78);
        // CB 78 036D
        gbc.setState(0xd144, 0x33f8, 0x1b60, 0xd508, 0x4480, 0x53fe, 0x0, 0x1);
        gbc.writeMem(0xd144, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1b);
        EXPECT(gbc.b(),  0xd5);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x44);
        EXPECT(gbc.e(),  0x80);
        EXPECT(gbc.h(),  0x53);
        EXPECT(gbc.l(),  0xfe);
        EXPECT(gbc.sp(), 0x33f8);
        EXPECT(gbc.pc(), 0xd146);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd144), 0xcb);
        EXPECT(gbc.readMem(0xd145), 0x78);
        // CB 78 036E
        gbc.setState(0x3655, 0x3ea3, 0xe1b0, 0xccdb, 0x3eb3, 0x94f9, 0x0, 0x1);
        gbc.writeMem(0x3655, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe1);
        EXPECT(gbc.b(),  0xcc);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x3e);
        EXPECT(gbc.e(),  0xb3);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0xf9);
        EXPECT(gbc.sp(), 0x3ea3);
        EXPECT(gbc.pc(), 0x3657);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 036F
        gbc.setState(0xe5d8, 0x163c, 0x60, 0xe477, 0x3555, 0xe820, 0x0, 0x0);
        gbc.writeMem(0xe5d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x0);
        EXPECT(gbc.b(),  0xe4);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0x35);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xe8);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0x163c);
        EXPECT(gbc.pc(), 0xe5da);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe5d8), 0xcb);
        EXPECT(gbc.readMem(0xe5d9), 0x78);
        // CB 78 0370
        gbc.setState(0xc66b, 0xe240, 0x4230, 0x9211, 0x2984, 0x8d32, 0x1, 0x0);
        gbc.writeMem(0xc66b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x42);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x84);
        EXPECT(gbc.h(),  0x8d);
        EXPECT(gbc.l(),  0x32);
        EXPECT(gbc.sp(), 0xe240);
        EXPECT(gbc.pc(), 0xc66d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xc66b), 0xcb);
        EXPECT(gbc.readMem(0xc66c), 0x78);
        // CB 78 0371
        gbc.setState(0x7397, 0xe090, 0x7e50, 0x84d1, 0xa101, 0x2c74, 0x0, 0x1);
        gbc.writeMem(0x7397, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7e);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x1);
        EXPECT(gbc.h(),  0x2c);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0xe090);
        EXPECT(gbc.pc(), 0x7399);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0372
        gbc.setState(0xc3cf, 0xc96c, 0x5b20, 0xbb51, 0xb4b8, 0x1627, 0x1, 0x1);
        gbc.writeMem(0xc3cf, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5b);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x51);
        EXPECT(gbc.d(),  0xb4);
        EXPECT(gbc.e(),  0xb8);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0xc96c);
        EXPECT(gbc.pc(), 0xc3d1);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc3cf), 0xcb);
        EXPECT(gbc.readMem(0xc3d0), 0x78);
        // CB 78 0373
        gbc.setState(0x341, 0x4934, 0x80f0, 0xb76d, 0xa7ff, 0x846d, 0x1, 0x1);
        gbc.writeMem(0x341, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x80);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0xa7);
        EXPECT(gbc.e(),  0xff);
        EXPECT(gbc.h(),  0x84);
        EXPECT(gbc.l(),  0x6d);
        EXPECT(gbc.sp(), 0x4934);
        EXPECT(gbc.pc(), 0x343);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0374
        gbc.setState(0x6c88, 0x5cf0, 0xac40, 0x4a39, 0x7ef8, 0x4d33, 0x1, 0x1);
        gbc.writeMem(0x6c88, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0x4a);
        EXPECT(gbc.c(),  0x39);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0xf8);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0x33);
        EXPECT(gbc.sp(), 0x5cf0);
        EXPECT(gbc.pc(), 0x6c8a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0375
        gbc.setState(0x2f85, 0xe418, 0xc2f0, 0xa6d, 0x4557, 0x20ac, 0x1, 0x0);
        gbc.writeMem(0x2f85, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc2);
        EXPECT(gbc.b(),  0xa);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x45);
        EXPECT(gbc.e(),  0x57);
        EXPECT(gbc.h(),  0x20);
        EXPECT(gbc.l(),  0xac);
        EXPECT(gbc.sp(), 0xe418);
        EXPECT(gbc.pc(), 0x2f87);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0376
        gbc.setState(0xc94, 0xcd83, 0x59e0, 0x8142, 0xaa4d, 0x77c9, 0x1, 0x1);
        gbc.writeMem(0xc94, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0x81);
        EXPECT(gbc.c(),  0x42);
        EXPECT(gbc.d(),  0xaa);
        EXPECT(gbc.e(),  0x4d);
        EXPECT(gbc.h(),  0x77);
        EXPECT(gbc.l(),  0xc9);
        EXPECT(gbc.sp(), 0xcd83);
        EXPECT(gbc.pc(), 0xc96);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0377
        gbc.setState(0xb1cb, 0x3d98, 0x8d40, 0xef06, 0xb858, 0xe3a9, 0x1, 0x1);
        gbc.writeMem(0xb1cb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8d);
        EXPECT(gbc.b(),  0xef);
        EXPECT(gbc.c(),  0x6);
        EXPECT(gbc.d(),  0xb8);
        EXPECT(gbc.e(),  0x58);
        EXPECT(gbc.h(),  0xe3);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0x3d98);
        EXPECT(gbc.pc(), 0xb1cd);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb1cb), 0xcb);
        EXPECT(gbc.readMem(0xb1cc), 0x78);
        // CB 78 0378
        gbc.setState(0x9907, 0x5fc5, 0xcb50, 0x152f, 0xed45, 0x45ef, 0x1, 0x1);
        gbc.writeMem(0x9907, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcb);
        EXPECT(gbc.b(),  0x15);
        EXPECT(gbc.c(),  0x2f);
        EXPECT(gbc.d(),  0xed);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x5fc5);
        EXPECT(gbc.pc(), 0x9909);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9907), 0xcb);
        EXPECT(gbc.readMem(0x9908), 0x78);
        // CB 78 0379
        gbc.setState(0x7dc7, 0x35f1, 0xdb60, 0xbfe7, 0x51f1, 0x13ef, 0x0, 0x0);
        gbc.writeMem(0x7dc7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdb);
        EXPECT(gbc.b(),  0xbf);
        EXPECT(gbc.c(),  0xe7);
        EXPECT(gbc.d(),  0x51);
        EXPECT(gbc.e(),  0xf1);
        EXPECT(gbc.h(),  0x13);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x35f1);
        EXPECT(gbc.pc(), 0x7dc9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 037A
        gbc.setState(0x66e9, 0x16df, 0xa6c0, 0xf08b, 0x264f, 0x8a0, 0x0, 0x0);
        gbc.writeMem(0x66e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa6);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x8b);
        EXPECT(gbc.d(),  0x26);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x16df);
        EXPECT(gbc.pc(), 0x66eb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 037B
        gbc.setState(0x8047, 0xfefb, 0xc850, 0xb0d1, 0xaf27, 0x4365, 0x1, 0x1);
        gbc.writeMem(0x8047, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0xb0);
        EXPECT(gbc.c(),  0xd1);
        EXPECT(gbc.d(),  0xaf);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x43);
        EXPECT(gbc.l(),  0x65);
        EXPECT(gbc.sp(), 0xfefb);
        EXPECT(gbc.pc(), 0x8049);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8047), 0xcb);
        EXPECT(gbc.readMem(0x8048), 0x78);
        // CB 78 037C
        gbc.setState(0x85be, 0x655d, 0xc430, 0x7607, 0xa303, 0x89d5, 0x1, 0x0);
        gbc.writeMem(0x85be, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc4);
        EXPECT(gbc.b(),  0x76);
        EXPECT(gbc.c(),  0x7);
        EXPECT(gbc.d(),  0xa3);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0x89);
        EXPECT(gbc.l(),  0xd5);
        EXPECT(gbc.sp(), 0x655d);
        EXPECT(gbc.pc(), 0x85c0);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x85be), 0xcb);
        EXPECT(gbc.readMem(0x85bf), 0x78);
        // CB 78 037E
        gbc.setState(0x4636, 0xa239, 0xebf0, 0xc3b8, 0xb15e, 0x7564, 0x1, 0x1);
        gbc.writeMem(0x4636, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xeb);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0xb8);
        EXPECT(gbc.d(),  0xb1);
        EXPECT(gbc.e(),  0x5e);
        EXPECT(gbc.h(),  0x75);
        EXPECT(gbc.l(),  0x64);
        EXPECT(gbc.sp(), 0xa239);
        EXPECT(gbc.pc(), 0x4638);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 037F
        gbc.setState(0xbf1f, 0x63d, 0x2f90, 0x6969, 0x2456, 0xa369, 0x1, 0x0);
        gbc.writeMem(0xbf1f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0x69);
        EXPECT(gbc.d(),  0x24);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xa3);
        EXPECT(gbc.l(),  0x69);
        EXPECT(gbc.sp(), 0x63d);
        EXPECT(gbc.pc(), 0xbf21);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbf1f), 0xcb);
        EXPECT(gbc.readMem(0xbf20), 0x78);
        // CB 78 0380
        gbc.setState(0x3076, 0x262d, 0x3560, 0xf177, 0xc6cf, 0x8647, 0x0, 0x0);
        gbc.writeMem(0x3076, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x35);
        EXPECT(gbc.b(),  0xf1);
        EXPECT(gbc.c(),  0x77);
        EXPECT(gbc.d(),  0xc6);
        EXPECT(gbc.e(),  0xcf);
        EXPECT(gbc.h(),  0x86);
        EXPECT(gbc.l(),  0x47);
        EXPECT(gbc.sp(), 0x262d);
        EXPECT(gbc.pc(), 0x3078);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0381
        gbc.setState(0xaf5b, 0x2443, 0xd030, 0xf36, 0x5c10, 0x9074, 0x1, 0x1);
        gbc.writeMem(0xaf5b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd0);
        EXPECT(gbc.b(),  0xf);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0x5c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x90);
        EXPECT(gbc.l(),  0x74);
        EXPECT(gbc.sp(), 0x2443);
        EXPECT(gbc.pc(), 0xaf5d);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xaf5b), 0xcb);
        EXPECT(gbc.readMem(0xaf5c), 0x78);
        // CB 78 0382
        gbc.setState(0xdd81, 0x6581, 0x7250, 0xdfe1, 0x835d, 0x87f4, 0x1, 0x1);
        gbc.writeMem(0xdd81, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0xdf);
        EXPECT(gbc.c(),  0xe1);
        EXPECT(gbc.d(),  0x83);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x6581);
        EXPECT(gbc.pc(), 0xdd83);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdd81), 0xcb);
        EXPECT(gbc.readMem(0xdd82), 0x78);
        // CB 78 0383
        gbc.setState(0x944f, 0xa5d1, 0x1c60, 0xfc7a, 0x8ed2, 0x97d2, 0x0, 0x0);
        gbc.writeMem(0x944f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xfc);
        EXPECT(gbc.c(),  0x7a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0x97);
        EXPECT(gbc.l(),  0xd2);
        EXPECT(gbc.sp(), 0xa5d1);
        EXPECT(gbc.pc(), 0x9451);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x944f), 0xcb);
        EXPECT(gbc.readMem(0x9450), 0x78);
        // CB 78 0385
        gbc.setState(0x265, 0x6f38, 0x49e0, 0xf86a, 0x4342, 0x3a0e, 0x0, 0x1);
        gbc.writeMem(0x265, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0xf8);
        EXPECT(gbc.c(),  0x6a);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0x42);
        EXPECT(gbc.h(),  0x3a);
        EXPECT(gbc.l(),  0xe);
        EXPECT(gbc.sp(), 0x6f38);
        EXPECT(gbc.pc(), 0x267);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0386
        gbc.setState(0x410a, 0x3516, 0x5c50, 0x47bc, 0x8774, 0xbe89, 0x0, 0x1);
        gbc.writeMem(0x410a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5c);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0xbc);
        EXPECT(gbc.d(),  0x87);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xbe);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x3516);
        EXPECT(gbc.pc(), 0x410c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0387
        gbc.setState(0x3a5d, 0x7523, 0x6830, 0xacde, 0x46a, 0x8e4, 0x1, 0x1);
        gbc.writeMem(0x3a5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x68);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0xde);
        EXPECT(gbc.d(),  0x4);
        EXPECT(gbc.e(),  0x6a);
        EXPECT(gbc.h(),  0x8);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0x7523);
        EXPECT(gbc.pc(), 0x3a5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0388
        gbc.setState(0x4a01, 0x3ee8, 0xddc0, 0x36d3, 0xae3e, 0xcf8a, 0x1, 0x1);
        gbc.writeMem(0x4a01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xdd);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0xd3);
        EXPECT(gbc.d(),  0xae);
        EXPECT(gbc.e(),  0x3e);
        EXPECT(gbc.h(),  0xcf);
        EXPECT(gbc.l(),  0x8a);
        EXPECT(gbc.sp(), 0x3ee8);
        EXPECT(gbc.pc(), 0x4a03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0389
        gbc.setState(0xdd35, 0xa45b, 0xfdc0, 0x34ca, 0x91ad, 0x7bce, 0x0, 0x1);
        gbc.writeMem(0xdd35, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x34);
        EXPECT(gbc.c(),  0xca);
        EXPECT(gbc.d(),  0x91);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0xce);
        EXPECT(gbc.sp(), 0xa45b);
        EXPECT(gbc.pc(), 0xdd37);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xdd35), 0xcb);
        EXPECT(gbc.readMem(0xdd36), 0x78);
        // CB 78 038A
        gbc.setState(0x607a, 0xc17f, 0xbae0, 0xa95b, 0x1d1f, 0xd050, 0x0, 0x0);
        gbc.writeMem(0x607a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xba);
        EXPECT(gbc.b(),  0xa9);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0x1d);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xd0);
        EXPECT(gbc.l(),  0x50);
        EXPECT(gbc.sp(), 0xc17f);
        EXPECT(gbc.pc(), 0x607c);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 038B
        gbc.setState(0xc0e4, 0x98f9, 0x3b20, 0xcfd4, 0x197e, 0x169a, 0x0, 0x0);
        gbc.writeMem(0xc0e4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0xcf);
        EXPECT(gbc.c(),  0xd4);
        EXPECT(gbc.d(),  0x19);
        EXPECT(gbc.e(),  0x7e);
        EXPECT(gbc.h(),  0x16);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x98f9);
        EXPECT(gbc.pc(), 0xc0e6);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc0e4), 0xcb);
        EXPECT(gbc.readMem(0xc0e5), 0x78);
        // CB 78 038C
        gbc.setState(0x60cc, 0xb12, 0x31b0, 0x8870, 0x5d9e, 0x9434, 0x1, 0x1);
        gbc.writeMem(0x60cc, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x31);
        EXPECT(gbc.b(),  0x88);
        EXPECT(gbc.c(),  0x70);
        EXPECT(gbc.d(),  0x5d);
        EXPECT(gbc.e(),  0x9e);
        EXPECT(gbc.h(),  0x94);
        EXPECT(gbc.l(),  0x34);
        EXPECT(gbc.sp(), 0xb12);
        EXPECT(gbc.pc(), 0x60ce);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 038D
        gbc.setState(0xb8f7, 0x194c, 0x1770, 0x2190, 0x43d2, 0xc0a6, 0x0, 0x1);
        gbc.writeMem(0xb8f7, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x17);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x90);
        EXPECT(gbc.d(),  0x43);
        EXPECT(gbc.e(),  0xd2);
        EXPECT(gbc.h(),  0xc0);
        EXPECT(gbc.l(),  0xa6);
        EXPECT(gbc.sp(), 0x194c);
        EXPECT(gbc.pc(), 0xb8f9);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb8f7), 0xcb);
        EXPECT(gbc.readMem(0xb8f8), 0x78);
        // CB 78 038E
        gbc.setState(0xa918, 0x7a2, 0xb200, 0x8c15, 0x3b4a, 0x12b3, 0x0, 0x0);
        gbc.writeMem(0xa918, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x8c);
        EXPECT(gbc.c(),  0x15);
        EXPECT(gbc.d(),  0x3b);
        EXPECT(gbc.e(),  0x4a);
        EXPECT(gbc.h(),  0x12);
        EXPECT(gbc.l(),  0xb3);
        EXPECT(gbc.sp(), 0x7a2);
        EXPECT(gbc.pc(), 0xa91a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa918), 0xcb);
        EXPECT(gbc.readMem(0xa919), 0x78);
        // CB 78 038F
        gbc.setState(0x264d, 0xf9ec, 0x72f0, 0x2e9f, 0x5274, 0x93fd, 0x1, 0x0);
        gbc.writeMem(0x264d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x72);
        EXPECT(gbc.b(),  0x2e);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x52);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0x93);
        EXPECT(gbc.l(),  0xfd);
        EXPECT(gbc.sp(), 0xf9ec);
        EXPECT(gbc.pc(), 0x264f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0390
        gbc.setState(0x7563, 0x8039, 0xfd40, 0x847c, 0xd01e, 0x49a8, 0x0, 0x0);
        gbc.writeMem(0x7563, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfd);
        EXPECT(gbc.b(),  0x84);
        EXPECT(gbc.c(),  0x7c);
        EXPECT(gbc.d(),  0xd0);
        EXPECT(gbc.e(),  0x1e);
        EXPECT(gbc.h(),  0x49);
        EXPECT(gbc.l(),  0xa8);
        EXPECT(gbc.sp(), 0x8039);
        EXPECT(gbc.pc(), 0x7565);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0391
        gbc.setState(0xe310, 0x4758, 0xee10, 0x6efa, 0x15d, 0xd93b, 0x0, 0x0);
        gbc.writeMem(0xe310, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xee);
        EXPECT(gbc.b(),  0x6e);
        EXPECT(gbc.c(),  0xfa);
        EXPECT(gbc.d(),  0x1);
        EXPECT(gbc.e(),  0x5d);
        EXPECT(gbc.h(),  0xd9);
        EXPECT(gbc.l(),  0x3b);
        EXPECT(gbc.sp(), 0x4758);
        EXPECT(gbc.pc(), 0xe312);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe310), 0xcb);
        EXPECT(gbc.readMem(0xe311), 0x78);
        // CB 78 0392
        gbc.setState(0xc519, 0x6389, 0xb320, 0x7ea2, 0x3029, 0x2d6c, 0x0, 0x0);
        gbc.writeMem(0xc519, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0xa2);
        EXPECT(gbc.d(),  0x30);
        EXPECT(gbc.e(),  0x29);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x6389);
        EXPECT(gbc.pc(), 0xc51b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc519), 0xcb);
        EXPECT(gbc.readMem(0xc51a), 0x78);
        // CB 78 0393
        gbc.setState(0xcb01, 0xb3f2, 0xa2b0, 0xe954, 0x278b, 0x1c8d, 0x1, 0x1);
        gbc.writeMem(0xcb01, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xa2);
        EXPECT(gbc.b(),  0xe9);
        EXPECT(gbc.c(),  0x54);
        EXPECT(gbc.d(),  0x27);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0x1c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0xb3f2);
        EXPECT(gbc.pc(), 0xcb03);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcb01), 0xcb);
        EXPECT(gbc.readMem(0xcb02), 0x78);
        // CB 78 0394
        gbc.setState(0x5e78, 0xd8bb, 0x1950, 0x215a, 0x8852, 0x42e4, 0x1, 0x0);
        gbc.writeMem(0x5e78, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x19);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0x5a);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x52);
        EXPECT(gbc.h(),  0x42);
        EXPECT(gbc.l(),  0xe4);
        EXPECT(gbc.sp(), 0xd8bb);
        EXPECT(gbc.pc(), 0x5e7a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 0395
        gbc.setState(0xb76, 0x5e92, 0xd4a0, 0x6cee, 0x3969, 0x2a00, 0x1, 0x1);
        gbc.writeMem(0xb76, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x6c);
        EXPECT(gbc.c(),  0xee);
        EXPECT(gbc.d(),  0x39);
        EXPECT(gbc.e(),  0x69);
        EXPECT(gbc.h(),  0x2a);
        EXPECT(gbc.l(),  0x0);
        EXPECT(gbc.sp(), 0x5e92);
        EXPECT(gbc.pc(), 0xb78);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 0396
        gbc.setState(0x97d5, 0x9139, 0x8180, 0xe073, 0x8e96, 0x2df5, 0x0, 0x1);
        gbc.writeMem(0x97d5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x81);
        EXPECT(gbc.b(),  0xe0);
        EXPECT(gbc.c(),  0x73);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0x2d);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x9139);
        EXPECT(gbc.pc(), 0x97d7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x97d5), 0xcb);
        EXPECT(gbc.readMem(0x97d6), 0x78);
        // CB 78 0397
        gbc.setState(0x97f2, 0xe6cf, 0x4970, 0x4763, 0x8beb, 0x76c5, 0x1, 0x1);
        gbc.writeMem(0x97f2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x49);
        EXPECT(gbc.b(),  0x47);
        EXPECT(gbc.c(),  0x63);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0xeb);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xc5);
        EXPECT(gbc.sp(), 0xe6cf);
        EXPECT(gbc.pc(), 0x97f4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x97f2), 0xcb);
        EXPECT(gbc.readMem(0x97f3), 0x78);
        // CB 78 0398
        gbc.setState(0x67e9, 0xd846, 0x1840, 0xb1b0, 0x2aca, 0xc7a9, 0x1, 0x0);
        gbc.writeMem(0x67e9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0xb0);
        EXPECT(gbc.d(),  0x2a);
        EXPECT(gbc.e(),  0xca);
        EXPECT(gbc.h(),  0xc7);
        EXPECT(gbc.l(),  0xa9);
        EXPECT(gbc.sp(), 0xd846);
        EXPECT(gbc.pc(), 0x67eb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 039A
        gbc.setState(0x185f, 0x1240, 0x530, 0x59c0, 0xa982, 0x8c8d, 0x0, 0x1);
        gbc.writeMem(0x185f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0x59);
        EXPECT(gbc.c(),  0xc0);
        EXPECT(gbc.d(),  0xa9);
        EXPECT(gbc.e(),  0x82);
        EXPECT(gbc.h(),  0x8c);
        EXPECT(gbc.l(),  0x8d);
        EXPECT(gbc.sp(), 0x1240);
        EXPECT(gbc.pc(), 0x1861);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 039B
        gbc.setState(0x4d6a, 0xc23, 0x5650, 0x49fc, 0x66db, 0xf372, 0x1, 0x1);
        gbc.writeMem(0x4d6a, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x56);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0xfc);
        EXPECT(gbc.d(),  0x66);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0xf3);
        EXPECT(gbc.l(),  0x72);
        EXPECT(gbc.sp(), 0xc23);
        EXPECT(gbc.pc(), 0x4d6c);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 039C
        gbc.setState(0xe73c, 0xabc5, 0xc750, 0xb18a, 0x4ec2, 0xa4fb, 0x0, 0x1);
        gbc.writeMem(0xe73c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc7);
        EXPECT(gbc.b(),  0xb1);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x4e);
        EXPECT(gbc.e(),  0xc2);
        EXPECT(gbc.h(),  0xa4);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0xabc5);
        EXPECT(gbc.pc(), 0xe73e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe73c), 0xcb);
        EXPECT(gbc.readMem(0xe73d), 0x78);
        // CB 78 039D
        gbc.setState(0xd92b, 0x4e7d, 0xb230, 0x5d09, 0xef1d, 0xf719, 0x0, 0x0);
        gbc.writeMem(0xd92b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb2);
        EXPECT(gbc.b(),  0x5d);
        EXPECT(gbc.c(),  0x9);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x1d);
        EXPECT(gbc.h(),  0xf7);
        EXPECT(gbc.l(),  0x19);
        EXPECT(gbc.sp(), 0x4e7d);
        EXPECT(gbc.pc(), 0xd92d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xd92b), 0xcb);
        EXPECT(gbc.readMem(0xd92c), 0x78);
        // CB 78 039E
        gbc.setState(0xcfc9, 0x3d15, 0x2600, 0x2d00, 0xbccc, 0x8e12, 0x1, 0x0);
        gbc.writeMem(0xcfc9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x26);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xbc);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0x12);
        EXPECT(gbc.sp(), 0x3d15);
        EXPECT(gbc.pc(), 0xcfcb);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xcfc9), 0xcb);
        EXPECT(gbc.readMem(0xcfca), 0x78);
        // CB 78 039F
        gbc.setState(0xad4, 0x212e, 0x1830, 0x4ced, 0xa65c, 0x4503, 0x1, 0x0);
        gbc.writeMem(0xad4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x18);
        EXPECT(gbc.b(),  0x4c);
        EXPECT(gbc.c(),  0xed);
        EXPECT(gbc.d(),  0xa6);
        EXPECT(gbc.e(),  0x5c);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0x3);
        EXPECT(gbc.sp(), 0x212e);
        EXPECT(gbc.pc(), 0xad6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03A0
        gbc.setState(0x22a2, 0x2dda, 0x9110, 0x6d74, 0xef63, 0x1e89, 0x1, 0x0);
        gbc.writeMem(0x22a2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x91);
        EXPECT(gbc.b(),  0x6d);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xef);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0x1e);
        EXPECT(gbc.l(),  0x89);
        EXPECT(gbc.sp(), 0x2dda);
        EXPECT(gbc.pc(), 0x22a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03A1
        gbc.setState(0xcaaa, 0x66c2, 0x7fd0, 0x7d6e, 0xa20, 0x8a24, 0x1, 0x0);
        gbc.writeMem(0xcaaa, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7f);
        EXPECT(gbc.b(),  0x7d);
        EXPECT(gbc.c(),  0x6e);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x20);
        EXPECT(gbc.h(),  0x8a);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0x66c2);
        EXPECT(gbc.pc(), 0xcaac);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xcaaa), 0xcb);
        EXPECT(gbc.readMem(0xcaab), 0x78);
        // CB 78 03A2
        gbc.setState(0x6ec1, 0x5029, 0x76c0, 0x25ba, 0xea45, 0x2fdf, 0x1, 0x1);
        gbc.writeMem(0x6ec1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x25);
        EXPECT(gbc.c(),  0xba);
        EXPECT(gbc.d(),  0xea);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0xdf);
        EXPECT(gbc.sp(), 0x5029);
        EXPECT(gbc.pc(), 0x6ec3);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03A3
        gbc.setState(0x236e, 0xf075, 0xffb0, 0x65da, 0x3f45, 0xc697, 0x1, 0x1);
        gbc.writeMem(0x236e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x65);
        EXPECT(gbc.c(),  0xda);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x45);
        EXPECT(gbc.h(),  0xc6);
        EXPECT(gbc.l(),  0x97);
        EXPECT(gbc.sp(), 0xf075);
        EXPECT(gbc.pc(), 0x2370);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03A4
        gbc.setState(0x404c, 0x7a6a, 0xe3c0, 0x7e2d, 0xe9ba, 0xf6d6, 0x0, 0x0);
        gbc.writeMem(0x404c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe3);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x2d);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0xba);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0x7a6a);
        EXPECT(gbc.pc(), 0x404e);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03A5
        gbc.setState(0x5b54, 0x7c89, 0x8910, 0xc274, 0xe931, 0xc4aa, 0x0, 0x0);
        gbc.writeMem(0x5b54, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x89);
        EXPECT(gbc.b(),  0xc2);
        EXPECT(gbc.c(),  0x74);
        EXPECT(gbc.d(),  0xe9);
        EXPECT(gbc.e(),  0x31);
        EXPECT(gbc.h(),  0xc4);
        EXPECT(gbc.l(),  0xaa);
        EXPECT(gbc.sp(), 0x7c89);
        EXPECT(gbc.pc(), 0x5b56);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03A6
        gbc.setState(0x7169, 0x4662, 0x47a0, 0x7440, 0xfc1f, 0xe5a0, 0x0, 0x1);
        gbc.writeMem(0x7169, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x47);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x40);
        EXPECT(gbc.d(),  0xfc);
        EXPECT(gbc.e(),  0x1f);
        EXPECT(gbc.h(),  0xe5);
        EXPECT(gbc.l(),  0xa0);
        EXPECT(gbc.sp(), 0x4662);
        EXPECT(gbc.pc(), 0x716b);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03A8
        gbc.setState(0x1800, 0x5eb5, 0x2470, 0xf3e3, 0x1fc4, 0xefaf, 0x1, 0x0);
        gbc.writeMem(0x1800, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x24);
        EXPECT(gbc.b(),  0xf3);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0x1f);
        EXPECT(gbc.e(),  0xc4);
        EXPECT(gbc.h(),  0xef);
        EXPECT(gbc.l(),  0xaf);
        EXPECT(gbc.sp(), 0x5eb5);
        EXPECT(gbc.pc(), 0x1802);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03A9
        gbc.setState(0x6a33, 0xfa56, 0x7d50, 0x69e0, 0x538b, 0xf153, 0x0, 0x1);
        gbc.writeMem(0x6a33, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x7d);
        EXPECT(gbc.b(),  0x69);
        EXPECT(gbc.c(),  0xe0);
        EXPECT(gbc.d(),  0x53);
        EXPECT(gbc.e(),  0x8b);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x53);
        EXPECT(gbc.sp(), 0xfa56);
        EXPECT(gbc.pc(), 0x6a35);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03AA
        gbc.setState(0xb26d, 0x8272, 0x28e0, 0xac9c, 0x3394, 0x5c9f, 0x0, 0x1);
        gbc.writeMem(0xb26d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x28);
        EXPECT(gbc.b(),  0xac);
        EXPECT(gbc.c(),  0x9c);
        EXPECT(gbc.d(),  0x33);
        EXPECT(gbc.e(),  0x94);
        EXPECT(gbc.h(),  0x5c);
        EXPECT(gbc.l(),  0x9f);
        EXPECT(gbc.sp(), 0x8272);
        EXPECT(gbc.pc(), 0xb26f);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb26d), 0xcb);
        EXPECT(gbc.readMem(0xb26e), 0x78);
        // CB 78 03AB
        gbc.setState(0xbf41, 0xa4f9, 0x1f40, 0x8949, 0xc730, 0x6902, 0x0, 0x0);
        gbc.writeMem(0xbf41, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1f);
        EXPECT(gbc.b(),  0x89);
        EXPECT(gbc.c(),  0x49);
        EXPECT(gbc.d(),  0xc7);
        EXPECT(gbc.e(),  0x30);
        EXPECT(gbc.h(),  0x69);
        EXPECT(gbc.l(),  0x2);
        EXPECT(gbc.sp(), 0xa4f9);
        EXPECT(gbc.pc(), 0xbf43);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xbf41), 0xcb);
        EXPECT(gbc.readMem(0xbf42), 0x78);
        // CB 78 03AC
        gbc.setState(0xbc72, 0x56a1, 0x3b50, 0x495e, 0x6499, 0x3fef, 0x0, 0x0);
        gbc.writeMem(0xbc72, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5e);
        EXPECT(gbc.d(),  0x64);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x3f);
        EXPECT(gbc.l(),  0xef);
        EXPECT(gbc.sp(), 0x56a1);
        EXPECT(gbc.pc(), 0xbc74);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbc72), 0xcb);
        EXPECT(gbc.readMem(0xbc73), 0x78);
        // CB 78 03AD
        gbc.setState(0x88ca, 0xf60b, 0x76b0, 0xc38d, 0x13a0, 0xd7bf, 0x0, 0x0);
        gbc.writeMem(0x88ca, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0xc3);
        EXPECT(gbc.c(),  0x8d);
        EXPECT(gbc.d(),  0x13);
        EXPECT(gbc.e(),  0xa0);
        EXPECT(gbc.h(),  0xd7);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xf60b);
        EXPECT(gbc.pc(), 0x88cc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x88ca), 0xcb);
        EXPECT(gbc.readMem(0x88cb), 0x78);
        // CB 78 03AE
        gbc.setState(0x882f, 0xb3e1, 0x4c80, 0xa702, 0x98d3, 0x2f73, 0x1, 0x0);
        gbc.writeMem(0x882f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x4c);
        EXPECT(gbc.b(),  0xa7);
        EXPECT(gbc.c(),  0x2);
        EXPECT(gbc.d(),  0x98);
        EXPECT(gbc.e(),  0xd3);
        EXPECT(gbc.h(),  0x2f);
        EXPECT(gbc.l(),  0x73);
        EXPECT(gbc.sp(), 0xb3e1);
        EXPECT(gbc.pc(), 0x8831);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x882f), 0xcb);
        EXPECT(gbc.readMem(0x8830), 0x78);
        // CB 78 03AF
        gbc.setState(0x8f73, 0xc1f, 0xbd50, 0x5b41, 0x186e, 0x4b3f, 0x0, 0x0);
        gbc.writeMem(0x8f73, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbd);
        EXPECT(gbc.b(),  0x5b);
        EXPECT(gbc.c(),  0x41);
        EXPECT(gbc.d(),  0x18);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x4b);
        EXPECT(gbc.l(),  0x3f);
        EXPECT(gbc.sp(), 0xc1f);
        EXPECT(gbc.pc(), 0x8f75);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8f73), 0xcb);
        EXPECT(gbc.readMem(0x8f74), 0x78);
        // CB 78 03B0
        gbc.setState(0xa601, 0x819e, 0xf5e0, 0x749f, 0x1aaa, 0x5628, 0x0, 0x1);
        gbc.writeMem(0xa601, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf5);
        EXPECT(gbc.b(),  0x74);
        EXPECT(gbc.c(),  0x9f);
        EXPECT(gbc.d(),  0x1a);
        EXPECT(gbc.e(),  0xaa);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x28);
        EXPECT(gbc.sp(), 0x819e);
        EXPECT(gbc.pc(), 0xa603);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa601), 0xcb);
        EXPECT(gbc.readMem(0xa602), 0x78);
        // CB 78 03B1
        gbc.setState(0x24c6, 0x4dc4, 0x86e0, 0x21f8, 0x25af, 0x563a, 0x1, 0x0);
        gbc.writeMem(0x24c6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x86);
        EXPECT(gbc.b(),  0x21);
        EXPECT(gbc.c(),  0xf8);
        EXPECT(gbc.d(),  0x25);
        EXPECT(gbc.e(),  0xaf);
        EXPECT(gbc.h(),  0x56);
        EXPECT(gbc.l(),  0x3a);
        EXPECT(gbc.sp(), 0x4dc4);
        EXPECT(gbc.pc(), 0x24c8);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03B2
        gbc.setState(0x8143, 0x4e44, 0x7380, 0x9668, 0xd64f, 0x32be, 0x1, 0x1);
        gbc.writeMem(0x8143, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x73);
        EXPECT(gbc.b(),  0x96);
        EXPECT(gbc.c(),  0x68);
        EXPECT(gbc.d(),  0xd6);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0x32);
        EXPECT(gbc.l(),  0xbe);
        EXPECT(gbc.sp(), 0x4e44);
        EXPECT(gbc.pc(), 0x8145);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x8143), 0xcb);
        EXPECT(gbc.readMem(0x8144), 0x78);
        // CB 78 03B3
        gbc.setState(0x21e5, 0x1d4a, 0xb6c0, 0x61a6, 0x8b55, 0xc6c, 0x1, 0x1);
        gbc.writeMem(0x21e5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb6);
        EXPECT(gbc.b(),  0x61);
        EXPECT(gbc.c(),  0xa6);
        EXPECT(gbc.d(),  0x8b);
        EXPECT(gbc.e(),  0x55);
        EXPECT(gbc.h(),  0xc);
        EXPECT(gbc.l(),  0x6c);
        EXPECT(gbc.sp(), 0x1d4a);
        EXPECT(gbc.pc(), 0x21e7);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03B4
        gbc.setState(0xe078, 0xb563, 0x2a70, 0xa24f, 0xb2bb, 0xe98b, 0x1, 0x0);
        gbc.writeMem(0xe078, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2a);
        EXPECT(gbc.b(),  0xa2);
        EXPECT(gbc.c(),  0x4f);
        EXPECT(gbc.d(),  0xb2);
        EXPECT(gbc.e(),  0xbb);
        EXPECT(gbc.h(),  0xe9);
        EXPECT(gbc.l(),  0x8b);
        EXPECT(gbc.sp(), 0xb563);
        EXPECT(gbc.pc(), 0xe07a);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe078), 0xcb);
        EXPECT(gbc.readMem(0xe079), 0x78);
        // CB 78 03B5
        gbc.setState(0x3045, 0xe78b, 0x71b0, 0xb6c3, 0xa196, 0xa7a, 0x0, 0x0);
        gbc.writeMem(0x3045, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x71);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xc3);
        EXPECT(gbc.d(),  0xa1);
        EXPECT(gbc.e(),  0x96);
        EXPECT(gbc.h(),  0xa);
        EXPECT(gbc.l(),  0x7a);
        EXPECT(gbc.sp(), 0xe78b);
        EXPECT(gbc.pc(), 0x3047);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03B6
        gbc.setState(0xae22, 0x8d2f, 0x55d0, 0x2c95, 0xdecc, 0x8efb, 0x0, 0x1);
        gbc.writeMem(0xae22, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x55);
        EXPECT(gbc.b(),  0x2c);
        EXPECT(gbc.c(),  0x95);
        EXPECT(gbc.d(),  0xde);
        EXPECT(gbc.e(),  0xcc);
        EXPECT(gbc.h(),  0x8e);
        EXPECT(gbc.l(),  0xfb);
        EXPECT(gbc.sp(), 0x8d2f);
        EXPECT(gbc.pc(), 0xae24);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xae22), 0xcb);
        EXPECT(gbc.readMem(0xae23), 0x78);
        // CB 78 03B7
        gbc.setState(0x4131, 0xe308, 0xbf00, 0xc055, 0xc49f, 0x9141, 0x1, 0x1);
        gbc.writeMem(0x4131, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbf);
        EXPECT(gbc.b(),  0xc0);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xc4);
        EXPECT(gbc.e(),  0x9f);
        EXPECT(gbc.h(),  0x91);
        EXPECT(gbc.l(),  0x41);
        EXPECT(gbc.sp(), 0xe308);
        EXPECT(gbc.pc(), 0x4133);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03B8
        gbc.setState(0x47ae, 0x444b, 0x6c70, 0xa56d, 0x8c9, 0xb5, 0x0, 0x1);
        gbc.writeMem(0x47ae, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6c);
        EXPECT(gbc.b(),  0xa5);
        EXPECT(gbc.c(),  0x6d);
        EXPECT(gbc.d(),  0x8);
        EXPECT(gbc.e(),  0xc9);
        EXPECT(gbc.h(),  0x0);
        EXPECT(gbc.l(),  0xb5);
        EXPECT(gbc.sp(), 0x444b);
        EXPECT(gbc.pc(), 0x47b0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03B9
        gbc.setState(0x729, 0xeac2, 0xc6e0, 0xbb16, 0x6d8f, 0x45b2, 0x1, 0x1);
        gbc.writeMem(0x729, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xbb);
        EXPECT(gbc.c(),  0x16);
        EXPECT(gbc.d(),  0x6d);
        EXPECT(gbc.e(),  0x8f);
        EXPECT(gbc.h(),  0x45);
        EXPECT(gbc.l(),  0xb2);
        EXPECT(gbc.sp(), 0xeac2);
        EXPECT(gbc.pc(), 0x72b);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03BA
        gbc.setState(0xc8, 0xd26f, 0xcf80, 0xb7a3, 0xd31c, 0x1f7f, 0x1, 0x0);
        gbc.writeMem(0xc8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xcf);
        EXPECT(gbc.b(),  0xb7);
        EXPECT(gbc.c(),  0xa3);
        EXPECT(gbc.d(),  0xd3);
        EXPECT(gbc.e(),  0x1c);
        EXPECT(gbc.h(),  0x1f);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0xd26f);
        EXPECT(gbc.pc(), 0xca);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03BC
        gbc.setState(0x28d8, 0x9961, 0xc8a0, 0x43ce, 0xc209, 0xdd2b, 0x1, 0x1);
        gbc.writeMem(0x28d8, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc8);
        EXPECT(gbc.b(),  0x43);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0xc2);
        EXPECT(gbc.e(),  0x9);
        EXPECT(gbc.h(),  0xdd);
        EXPECT(gbc.l(),  0x2b);
        EXPECT(gbc.sp(), 0x9961);
        EXPECT(gbc.pc(), 0x28da);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03BD
        gbc.setState(0x9287, 0xfd2d, 0xfa30, 0x9238, 0x21a7, 0x124, 0x0, 0x1);
        gbc.writeMem(0x9287, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfa);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0x38);
        EXPECT(gbc.d(),  0x21);
        EXPECT(gbc.e(),  0xa7);
        EXPECT(gbc.h(),  0x1);
        EXPECT(gbc.l(),  0x24);
        EXPECT(gbc.sp(), 0xfd2d);
        EXPECT(gbc.pc(), 0x9289);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9287), 0xcb);
        EXPECT(gbc.readMem(0x9288), 0x78);
        // CB 78 03BE
        gbc.setState(0x6dc2, 0xef2, 0xf490, 0xc49a, 0xc338, 0xb5bf, 0x1, 0x1);
        gbc.writeMem(0x6dc2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xf4);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0x9a);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0x38);
        EXPECT(gbc.h(),  0xb5);
        EXPECT(gbc.l(),  0xbf);
        EXPECT(gbc.sp(), 0xef2);
        EXPECT(gbc.pc(), 0x6dc4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03BF
        gbc.setState(0x9d00, 0x899a, 0xb9f0, 0x4636, 0xa4f, 0xb9e8, 0x1, 0x0);
        gbc.writeMem(0x9d00, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xb9);
        EXPECT(gbc.b(),  0x46);
        EXPECT(gbc.c(),  0x36);
        EXPECT(gbc.d(),  0xa);
        EXPECT(gbc.e(),  0x4f);
        EXPECT(gbc.h(),  0xb9);
        EXPECT(gbc.l(),  0xe8);
        EXPECT(gbc.sp(), 0x899a);
        EXPECT(gbc.pc(), 0x9d02);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9d00), 0xcb);
        EXPECT(gbc.readMem(0x9d01), 0x78);
        // CB 78 03C0
        gbc.setState(0x436f, 0xbfda, 0x45a0, 0x7e3c, 0xf9c7, 0xf893, 0x0, 0x0);
        gbc.writeMem(0x436f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x45);
        EXPECT(gbc.b(),  0x7e);
        EXPECT(gbc.c(),  0x3c);
        EXPECT(gbc.d(),  0xf9);
        EXPECT(gbc.e(),  0xc7);
        EXPECT(gbc.h(),  0xf8);
        EXPECT(gbc.l(),  0x93);
        EXPECT(gbc.sp(), 0xbfda);
        EXPECT(gbc.pc(), 0x4371);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03C1
        gbc.setState(0x47a0, 0x7025, 0x6460, 0xdb10, 0xe074, 0xad7f, 0x1, 0x0);
        gbc.writeMem(0x47a0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x64);
        EXPECT(gbc.b(),  0xdb);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x74);
        EXPECT(gbc.h(),  0xad);
        EXPECT(gbc.l(),  0x7f);
        EXPECT(gbc.sp(), 0x7025);
        EXPECT(gbc.pc(), 0x47a2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03C2
        gbc.setState(0xbcf5, 0xadbf, 0x15b0, 0xb48a, 0x8e5a, 0x9d3e, 0x0, 0x0);
        gbc.writeMem(0xbcf5, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xb4);
        EXPECT(gbc.c(),  0x8a);
        EXPECT(gbc.d(),  0x8e);
        EXPECT(gbc.e(),  0x5a);
        EXPECT(gbc.h(),  0x9d);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0xadbf);
        EXPECT(gbc.pc(), 0xbcf7);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xbcf5), 0xcb);
        EXPECT(gbc.readMem(0xbcf6), 0x78);
        // CB 78 03C3
        gbc.setState(0xb5de, 0xb0c, 0xecf0, 0x4108, 0x7f3a, 0x365f, 0x0, 0x0);
        gbc.writeMem(0xb5de, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0x41);
        EXPECT(gbc.c(),  0x8);
        EXPECT(gbc.d(),  0x7f);
        EXPECT(gbc.e(),  0x3a);
        EXPECT(gbc.h(),  0x36);
        EXPECT(gbc.l(),  0x5f);
        EXPECT(gbc.sp(), 0xb0c);
        EXPECT(gbc.pc(), 0xb5e0);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xb5de), 0xcb);
        EXPECT(gbc.readMem(0xb5df), 0x78);
        // CB 78 03C4
        gbc.setState(0x5415, 0x177b, 0xff80, 0x8f6, 0xeece, 0xb62, 0x1, 0x0);
        gbc.writeMem(0x5415, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xff);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xf6);
        EXPECT(gbc.d(),  0xee);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x62);
        EXPECT(gbc.sp(), 0x177b);
        EXPECT(gbc.pc(), 0x5417);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03C5
        gbc.setState(0x2f7f, 0x924f, 0x3b40, 0x920e, 0xdb9a, 0x8bb4, 0x1, 0x0);
        gbc.writeMem(0x2f7f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3b);
        EXPECT(gbc.b(),  0x92);
        EXPECT(gbc.c(),  0xe);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0x9a);
        EXPECT(gbc.h(),  0x8b);
        EXPECT(gbc.l(),  0xb4);
        EXPECT(gbc.sp(), 0x924f);
        EXPECT(gbc.pc(), 0x2f81);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03C6
        gbc.setState(0x2ff2, 0x209, 0xeca0, 0xd6c9, 0x4d88, 0xb81, 0x0, 0x0);
        gbc.writeMem(0x2ff2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xec);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xc9);
        EXPECT(gbc.d(),  0x4d);
        EXPECT(gbc.e(),  0x88);
        EXPECT(gbc.h(),  0xb);
        EXPECT(gbc.l(),  0x81);
        EXPECT(gbc.sp(), 0x209);
        EXPECT(gbc.pc(), 0x2ff4);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03C8
        gbc.setState(0x9c78, 0x7c59, 0xd640, 0x2d87, 0xad4c, 0xf2bb, 0x0, 0x0);
        gbc.writeMem(0x9c78, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x2d);
        EXPECT(gbc.c(),  0x87);
        EXPECT(gbc.d(),  0xad);
        EXPECT(gbc.e(),  0x4c);
        EXPECT(gbc.h(),  0xf2);
        EXPECT(gbc.l(),  0xbb);
        EXPECT(gbc.sp(), 0x7c59);
        EXPECT(gbc.pc(), 0x9c7a);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0x9c78), 0xcb);
        EXPECT(gbc.readMem(0x9c79), 0x78);
        // CB 78 03C9
        gbc.setState(0xa60b, 0x683b, 0xacb0, 0xf789, 0x426e, 0x3cc6, 0x0, 0x0);
        gbc.writeMem(0xa60b, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xac);
        EXPECT(gbc.b(),  0xf7);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0x42);
        EXPECT(gbc.e(),  0x6e);
        EXPECT(gbc.h(),  0x3c);
        EXPECT(gbc.l(),  0xc6);
        EXPECT(gbc.sp(), 0x683b);
        EXPECT(gbc.pc(), 0xa60d);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xa60b), 0xcb);
        EXPECT(gbc.readMem(0xa60c), 0x78);
        // CB 78 03CA
        gbc.setState(0x4bc3, 0xafcf, 0x7740, 0xc5ad, 0x9f99, 0x4db0, 0x1, 0x0);
        gbc.writeMem(0x4bc3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x77);
        EXPECT(gbc.b(),  0xc5);
        EXPECT(gbc.c(),  0xad);
        EXPECT(gbc.d(),  0x9f);
        EXPECT(gbc.e(),  0x99);
        EXPECT(gbc.h(),  0x4d);
        EXPECT(gbc.l(),  0xb0);
        EXPECT(gbc.sp(), 0xafcf);
        EXPECT(gbc.pc(), 0x4bc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03CB
        gbc.setState(0x750c, 0xfa16, 0xc610, 0xde83, 0x2d4e, 0x2510, 0x1, 0x0);
        gbc.writeMem(0x750c, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xc6);
        EXPECT(gbc.b(),  0xde);
        EXPECT(gbc.c(),  0x83);
        EXPECT(gbc.d(),  0x2d);
        EXPECT(gbc.e(),  0x4e);
        EXPECT(gbc.h(),  0x25);
        EXPECT(gbc.l(),  0x10);
        EXPECT(gbc.sp(), 0xfa16);
        EXPECT(gbc.pc(), 0x750e);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03CC
        gbc.setState(0xe9e0, 0xcb03, 0xd30, 0x6300, 0xe656, 0xf660, 0x1, 0x1);
        gbc.writeMem(0xe9e0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd);
        EXPECT(gbc.b(),  0x63);
        EXPECT(gbc.c(),  0x0);
        EXPECT(gbc.d(),  0xe6);
        EXPECT(gbc.e(),  0x56);
        EXPECT(gbc.h(),  0xf6);
        EXPECT(gbc.l(),  0x60);
        EXPECT(gbc.sp(), 0xcb03);
        EXPECT(gbc.pc(), 0xe9e2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe9e0), 0xcb);
        EXPECT(gbc.readMem(0xe9e1), 0x78);
        // CB 78 03CD
        gbc.setState(0xa0c4, 0x9ec5, 0x6c0, 0xb6b5, 0xdbce, 0xce27, 0x1, 0x0);
        gbc.writeMem(0xa0c4, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x6);
        EXPECT(gbc.b(),  0xb6);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0xdb);
        EXPECT(gbc.e(),  0xce);
        EXPECT(gbc.h(),  0xce);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x9ec5);
        EXPECT(gbc.pc(), 0xa0c6);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa0c4), 0xcb);
        EXPECT(gbc.readMem(0xa0c5), 0x78);
        // CB 78 03CE
        gbc.setState(0xd4d1, 0xfd6a, 0xbb00, 0x495b, 0xfddb, 0x3ed6, 0x0, 0x0);
        gbc.writeMem(0xd4d1, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xbb);
        EXPECT(gbc.b(),  0x49);
        EXPECT(gbc.c(),  0x5b);
        EXPECT(gbc.d(),  0xfd);
        EXPECT(gbc.e(),  0xdb);
        EXPECT(gbc.h(),  0x3e);
        EXPECT(gbc.l(),  0xd6);
        EXPECT(gbc.sp(), 0xfd6a);
        EXPECT(gbc.pc(), 0xd4d3);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xd4d1), 0xcb);
        EXPECT(gbc.readMem(0xd4d2), 0x78);
        // CB 78 03CF
        gbc.setState(0x7f66, 0xd09a, 0x10e0, 0xab60, 0x9551, 0xf190, 0x1, 0x0);
        gbc.writeMem(0x7f66, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x10);
        EXPECT(gbc.b(),  0xab);
        EXPECT(gbc.c(),  0x60);
        EXPECT(gbc.d(),  0x95);
        EXPECT(gbc.e(),  0x51);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x90);
        EXPECT(gbc.sp(), 0xd09a);
        EXPECT(gbc.pc(), 0x7f68);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03D0
        gbc.setState(0x9ff0, 0xc23e, 0x1110, 0x8fe3, 0xa5a2, 0x44b8, 0x0, 0x1);
        gbc.writeMem(0x9ff0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x11);
        EXPECT(gbc.b(),  0x8f);
        EXPECT(gbc.c(),  0xe3);
        EXPECT(gbc.d(),  0xa5);
        EXPECT(gbc.e(),  0xa2);
        EXPECT(gbc.h(),  0x44);
        EXPECT(gbc.l(),  0xb8);
        EXPECT(gbc.sp(), 0xc23e);
        EXPECT(gbc.pc(), 0x9ff2);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x9ff0), 0xcb);
        EXPECT(gbc.readMem(0x9ff1), 0x78);
        // CB 78 03D1
        gbc.setState(0x3875, 0xc838, 0xced0, 0x8d0, 0x75a4, 0xc35a, 0x0, 0x1);
        gbc.writeMem(0x3875, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xce);
        EXPECT(gbc.b(),  0x8);
        EXPECT(gbc.c(),  0xd0);
        EXPECT(gbc.d(),  0x75);
        EXPECT(gbc.e(),  0xa4);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x5a);
        EXPECT(gbc.sp(), 0xc838);
        EXPECT(gbc.pc(), 0x3877);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03D2
        gbc.setState(0xdeba, 0x148f, 0x6330, 0x80b5, 0x900a, 0xd336, 0x0, 0x1);
        gbc.writeMem(0xdeba, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x63);
        EXPECT(gbc.b(),  0x80);
        EXPECT(gbc.c(),  0xb5);
        EXPECT(gbc.d(),  0x90);
        EXPECT(gbc.e(),  0xa);
        EXPECT(gbc.h(),  0xd3);
        EXPECT(gbc.l(),  0x36);
        EXPECT(gbc.sp(), 0x148f);
        EXPECT(gbc.pc(), 0xdebc);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xdeba), 0xcb);
        EXPECT(gbc.readMem(0xdebb), 0x78);
        // CB 78 03D3
        gbc.setState(0xb2e, 0xf9c6, 0xd450, 0x11c6, 0xe55f, 0xdab1, 0x0, 0x0);
        gbc.writeMem(0xb2e, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd4);
        EXPECT(gbc.b(),  0x11);
        EXPECT(gbc.c(),  0xc6);
        EXPECT(gbc.d(),  0xe5);
        EXPECT(gbc.e(),  0x5f);
        EXPECT(gbc.h(),  0xda);
        EXPECT(gbc.l(),  0xb1);
        EXPECT(gbc.sp(), 0xf9c6);
        EXPECT(gbc.pc(), 0xb30);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03D4
        gbc.setState(0x762f, 0xed7b, 0x8c20, 0x3edb, 0x889b, 0xc320, 0x0, 0x1);
        gbc.writeMem(0x762f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x8c);
        EXPECT(gbc.b(),  0x3e);
        EXPECT(gbc.c(),  0xdb);
        EXPECT(gbc.d(),  0x88);
        EXPECT(gbc.e(),  0x9b);
        EXPECT(gbc.h(),  0xc3);
        EXPECT(gbc.l(),  0x20);
        EXPECT(gbc.sp(), 0xed7b);
        EXPECT(gbc.pc(), 0x7631);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03D5
        gbc.setState(0x2eb0, 0x9f88, 0x5940, 0xaef4, 0x3d60, 0xc8f4, 0x1, 0x1);
        gbc.writeMem(0x2eb0, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x59);
        EXPECT(gbc.b(),  0xae);
        EXPECT(gbc.c(),  0xf4);
        EXPECT(gbc.d(),  0x3d);
        EXPECT(gbc.e(),  0x60);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0xf4);
        EXPECT(gbc.sp(), 0x9f88);
        EXPECT(gbc.pc(), 0x2eb2);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03D6
        gbc.setState(0xe7a9, 0x6de9, 0x2fc0, 0x56b2, 0x8505, 0xc53e, 0x1, 0x0);
        gbc.writeMem(0xe7a9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x56);
        EXPECT(gbc.c(),  0xb2);
        EXPECT(gbc.d(),  0x85);
        EXPECT(gbc.e(),  0x5);
        EXPECT(gbc.h(),  0xc5);
        EXPECT(gbc.l(),  0x3e);
        EXPECT(gbc.sp(), 0x6de9);
        EXPECT(gbc.pc(), 0xe7ab);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe7a9), 0xcb);
        EXPECT(gbc.readMem(0xe7aa), 0x78);
        // CB 78 03D7
        gbc.setState(0x16a2, 0x9031, 0x62e0, 0xd289, 0xcb59, 0xd137, 0x1, 0x0);
        gbc.writeMem(0x16a2, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x62);
        EXPECT(gbc.b(),  0xd2);
        EXPECT(gbc.c(),  0x89);
        EXPECT(gbc.d(),  0xcb);
        EXPECT(gbc.e(),  0x59);
        EXPECT(gbc.h(),  0xd1);
        EXPECT(gbc.l(),  0x37);
        EXPECT(gbc.sp(), 0x9031);
        EXPECT(gbc.pc(), 0x16a4);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03D8
        gbc.setState(0xe8b9, 0x44ad, 0x1ce0, 0xc4dd, 0xd104, 0x15bc, 0x0, 0x1);
        gbc.writeMem(0xe8b9, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x1c);
        EXPECT(gbc.b(),  0xc4);
        EXPECT(gbc.c(),  0xdd);
        EXPECT(gbc.d(),  0xd1);
        EXPECT(gbc.e(),  0x4);
        EXPECT(gbc.h(),  0x15);
        EXPECT(gbc.l(),  0xbc);
        EXPECT(gbc.sp(), 0x44ad);
        EXPECT(gbc.pc(), 0xe8bb);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xe8b9), 0xcb);
        EXPECT(gbc.readMem(0xe8ba), 0x78);
        // CB 78 03D9
        gbc.setState(0x176f, 0xb75f, 0x2f00, 0x78a9, 0xc3be, 0xc84d, 0x1, 0x0);
        gbc.writeMem(0x176f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x78);
        EXPECT(gbc.c(),  0xa9);
        EXPECT(gbc.d(),  0xc3);
        EXPECT(gbc.e(),  0xbe);
        EXPECT(gbc.h(),  0xc8);
        EXPECT(gbc.l(),  0x4d);
        EXPECT(gbc.sp(), 0xb75f);
        EXPECT(gbc.pc(), 0x1771);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03DA
        gbc.setState(0xb091, 0x942f, 0x15c0, 0xea10, 0x9a40, 0x76f5, 0x1, 0x1);
        gbc.writeMem(0xb091, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x15);
        EXPECT(gbc.b(),  0xea);
        EXPECT(gbc.c(),  0x10);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x40);
        EXPECT(gbc.h(),  0x76);
        EXPECT(gbc.l(),  0xf5);
        EXPECT(gbc.sp(), 0x942f);
        EXPECT(gbc.pc(), 0xb093);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xb091), 0xcb);
        EXPECT(gbc.readMem(0xb092), 0x78);
        // CB 78 03DB
        gbc.setState(0xa340, 0x7610, 0x2e0, 0x5f1d, 0x1e35, 0xcc66, 0x0, 0x1);
        gbc.writeMem(0xa340, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2);
        EXPECT(gbc.b(),  0x5f);
        EXPECT(gbc.c(),  0x1d);
        EXPECT(gbc.d(),  0x1e);
        EXPECT(gbc.e(),  0x35);
        EXPECT(gbc.h(),  0xcc);
        EXPECT(gbc.l(),  0x66);
        EXPECT(gbc.sp(), 0x7610);
        EXPECT(gbc.pc(), 0xa342);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xa340), 0xcb);
        EXPECT(gbc.readMem(0xa341), 0x78);
        // CB 78 03DC
        gbc.setState(0x61a6, 0xb848, 0x5750, 0xbe55, 0xe853, 0xbdcf, 0x0, 0x1);
        gbc.writeMem(0x61a6, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x57);
        EXPECT(gbc.b(),  0xbe);
        EXPECT(gbc.c(),  0x55);
        EXPECT(gbc.d(),  0xe8);
        EXPECT(gbc.e(),  0x53);
        EXPECT(gbc.h(),  0xbd);
        EXPECT(gbc.l(),  0xcf);
        EXPECT(gbc.sp(), 0xb848);
        EXPECT(gbc.pc(), 0x61a8);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03DE
        gbc.setState(0x615f, 0xfba1, 0x2ff0, 0x3645, 0x6f03, 0xfbd0, 0x1, 0x1);
        gbc.writeMem(0x615f, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x2f);
        EXPECT(gbc.b(),  0x36);
        EXPECT(gbc.c(),  0x45);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x3);
        EXPECT(gbc.h(),  0xfb);
        EXPECT(gbc.l(),  0xd0);
        EXPECT(gbc.sp(), 0xfba1);
        EXPECT(gbc.pc(), 0x6161);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03DF
        gbc.setState(0x8586, 0x399, 0x9d90, 0x5125, 0xe087, 0x24ea, 0x0, 0x1);
        gbc.writeMem(0x8586, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x9d);
        EXPECT(gbc.b(),  0x51);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0xe0);
        EXPECT(gbc.e(),  0x87);
        EXPECT(gbc.h(),  0x24);
        EXPECT(gbc.l(),  0xea);
        EXPECT(gbc.sp(), 0x399);
        EXPECT(gbc.pc(), 0x8588);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8586), 0xcb);
        EXPECT(gbc.readMem(0x8587), 0x78);
        // CB 78 03E0
        gbc.setState(0x112d, 0xd0bb, 0x5a0, 0xf098, 0x6f17, 0xf15e, 0x1, 0x0);
        gbc.writeMem(0x112d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x5);
        EXPECT(gbc.b(),  0xf0);
        EXPECT(gbc.c(),  0x98);
        EXPECT(gbc.d(),  0x6f);
        EXPECT(gbc.e(),  0x17);
        EXPECT(gbc.h(),  0xf1);
        EXPECT(gbc.l(),  0x5e);
        EXPECT(gbc.sp(), 0xd0bb);
        EXPECT(gbc.pc(), 0x112f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        // CB 78 03E1
        gbc.setState(0xe492, 0x1c69, 0xca10, 0xd6d5, 0x3f63, 0xf59a, 0x1, 0x0);
        gbc.writeMem(0xe492, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xca);
        EXPECT(gbc.b(),  0xd6);
        EXPECT(gbc.c(),  0xd5);
        EXPECT(gbc.d(),  0x3f);
        EXPECT(gbc.e(),  0x63);
        EXPECT(gbc.h(),  0xf5);
        EXPECT(gbc.l(),  0x9a);
        EXPECT(gbc.sp(), 0x1c69);
        EXPECT(gbc.pc(), 0xe494);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0xe492), 0xcb);
        EXPECT(gbc.readMem(0xe493), 0x78);
        // CB 78 03E2
        gbc.setState(0x8845, 0xb8b3, 0xfcf0, 0x1e25, 0x6c10, 0x7b9d, 0x0, 0x0);
        gbc.writeMem(0x8845, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xfc);
        EXPECT(gbc.b(),  0x1e);
        EXPECT(gbc.c(),  0x25);
        EXPECT(gbc.d(),  0x6c);
        EXPECT(gbc.e(),  0x10);
        EXPECT(gbc.h(),  0x7b);
        EXPECT(gbc.l(),  0x9d);
        EXPECT(gbc.sp(), 0xb8b3);
        EXPECT(gbc.pc(), 0x8847);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        EXPECT(gbc.readMem(0x8845), 0xcb);
        EXPECT(gbc.readMem(0x8846), 0x78);
        // CB 78 03E3
        gbc.setState(0xc663, 0x8832, 0x76e0, 0x8bce, 0x2927, 0x2227, 0x1, 0x0);
        gbc.writeMem(0xc663, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x76);
        EXPECT(gbc.b(),  0x8b);
        EXPECT(gbc.c(),  0xce);
        EXPECT(gbc.d(),  0x29);
        EXPECT(gbc.e(),  0x27);
        EXPECT(gbc.h(),  0x22);
        EXPECT(gbc.l(),  0x27);
        EXPECT(gbc.sp(), 0x8832);
        EXPECT(gbc.pc(), 0xc665);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
        EXPECT(gbc.readMem(0xc663), 0xcb);
        EXPECT(gbc.readMem(0xc664), 0x78);
        // CB 78 03E5
        gbc.setState(0x4dcb, 0xef58, 0xe2d0, 0x1b11, 0x7e62, 0x7f99, 0x0, 0x0);
        gbc.writeMem(0x4dcb, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xe2);
        EXPECT(gbc.b(),  0x1b);
        EXPECT(gbc.c(),  0x11);
        EXPECT(gbc.d(),  0x7e);
        EXPECT(gbc.e(),  0x62);
        EXPECT(gbc.h(),  0x7f);
        EXPECT(gbc.l(),  0x99);
        EXPECT(gbc.sp(), 0xef58);
        EXPECT(gbc.pc(), 0x4dcd);
        EXPECT(gbc.ime(), 0x0);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03E6
        gbc.setState(0x6cc3, 0xe13a, 0x3d0, 0xd412, 0x2bad, 0x8707, 0x1, 0x1);
        gbc.writeMem(0x6cc3, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0x3);
        EXPECT(gbc.b(),  0xd4);
        EXPECT(gbc.c(),  0x12);
        EXPECT(gbc.d(),  0x2b);
        EXPECT(gbc.e(),  0xad);
        EXPECT(gbc.h(),  0x87);
        EXPECT(gbc.l(),  0x7);
        EXPECT(gbc.sp(), 0xe13a);
        EXPECT(gbc.pc(), 0x6cc5);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  false);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  true);
        // CB 78 03E7
        gbc.setState(0x2c5d, 0xbeab, 0xd620, 0x1465, 0x9a41, 0xbb1c, 0x1, 0x0);
        gbc.writeMem(0x2c5d, { 0xcb, 0x78 });
        gbc.step();
        EXPECT(gbc.a(),  0xd6);
        EXPECT(gbc.b(),  0x14);
        EXPECT(gbc.c(),  0x65);
        EXPECT(gbc.d(),  0x9a);
        EXPECT(gbc.e(),  0x41);
        EXPECT(gbc.h(),  0xbb);
        EXPECT(gbc.l(),  0x1c);
        EXPECT(gbc.sp(), 0xbeab);
        EXPECT(gbc.pc(), 0x2c5f);
        EXPECT(gbc.ime(), 0x1);
        EXPECT(gbc.flagZ(),  true);
        EXPECT(gbc.flagN(),  false);
        EXPECT(gbc.flagH(),  true);
        EXPECT(gbc.flagC(),  false);
    }
